# TPV Studio Environment Variables
# Copy this to .env for local development

# ============================================
# FRONTEND VARIABLES (VITE_ prefix required)
# ============================================
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
VITE_SUPABASE_URL=https://okakomwfikxmwllvliva.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# ============================================
# BACKEND VARIABLES (for Vercel Functions)
# ============================================

# Supabase Service Role for backend operations (storage uploads, database writes)
SUPABASE_URL=https://okakomwfikxmwllvliva.supabase.co
SUPABASE_SERVICE_ROLE=your_service_role_key_here

# Replicate API for AI generation (Recraft SVG) and LLM planning
# Get from: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=your_replicate_api_token_here

# Replicate Webhook Secret for verifying callbacks
# Get from: https://replicate.com/account/webhooks
REPLICATE_WEBHOOK_SECRET=your_webhook_secret_here

# Anthropic API for Claude Haiku (SVG compliance inspector)
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ============================================
# RECRAFT VECTOR AI CONFIGURATION
# ============================================

# Recraft model on Replicate for vector SVG generation
RECRAFT_MODEL=recraft-ai/recraft-v3-svg

# Maximum retry attempts for SVG compliance validation
RECRAFT_MAX_RETRIES=3

# Default color palette constraints
RECRAFT_MAX_COLOURS_DEFAULT=6
RECRAFT_MIN_COLOURS_DEFAULT=3

# Canvas and thumbnail dimensions (pixels)
RECRAFT_CANVAS_PX=2048
RECRAFT_THUMB_PX=512

# Public base URL of your deployment (for webhook callbacks and internal API calls)
# Local: http://localhost:5173
# Production: https://your-app.vercel.app
PUBLIC_BASE_URL=http://localhost:5173

# Optional: For team/organization accounts on Replicate
# Leave blank if using a personal account
REPLICATE_ACCOUNT=
REPLICATE_PROJECT=

# ============================================
# VERCEL DEPLOYMENT INSTRUCTIONS
# ============================================
# 1. Go to Vercel Dashboard > Your Project > Settings > Environment Variables
# 2. Add ALL variables above (except comments)
# 3. Set PUBLIC_BASE_URL to your Vercel domain (e.g., https://tpv-studio.vercel.app)
# 4. After deployment, update Replicate webhook URL to: https://your-domain.vercel.app/api/replicate-callback
# 5. Redeploy to pick up environment variables

# ============================================
# REQUIRED PERMISSIONS
# ============================================
# Supabase Storage Buckets (must exist):
# - tpv-studio (public bucket for final outputs)
# - studio-temp (public bucket for temporary files)
#
# Supabase Database Tables (must exist with extended schema):
# - studio_jobs (columns: id, status, prompt, metadata, outputs, error, created_at, updated_at,
#                mode_type, attempt_current, attempt_max, validation_history, compliant,
#                all_attempt_urls, inspector_final_reasons, max_colours)
#
# API Access Required:
# - Replicate API (for Recraft SVG generation)
# - Anthropic API (for Claude Haiku SVG compliance inspection)
