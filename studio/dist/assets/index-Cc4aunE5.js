var tI=Object.defineProperty;var nI=(e,t,n)=>t in e?tI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var rI=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Hf=(e,t,n)=>nI(e,typeof t!="symbol"?t+"":t,n);var K5e=rI((As,Ps)=>{function iI(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function No(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Oj(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Rj={exports:{}},Rg={},Mj={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf=Symbol.for("react.element"),sI=Symbol.for("react.portal"),aI=Symbol.for("react.fragment"),oI=Symbol.for("react.strict_mode"),lI=Symbol.for("react.profiler"),cI=Symbol.for("react.provider"),uI=Symbol.for("react.context"),hI=Symbol.for("react.forward_ref"),dI=Symbol.for("react.suspense"),fI=Symbol.for("react.memo"),pI=Symbol.for("react.lazy"),lk=Symbol.iterator;function mI(e){return e===null||typeof e!="object"?null:(e=lk&&e[lk]||e["@@iterator"],typeof e=="function"?e:null)}var Lj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ij=Object.assign,$j={};function rh(e,t,n){this.props=e,this.context=t,this.refs=$j,this.updater=n||Lj}rh.prototype.isReactComponent={};rh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Dj(){}Dj.prototype=rh.prototype;function l1(e,t,n){this.props=e,this.context=t,this.refs=$j,this.updater=n||Lj}var c1=l1.prototype=new Dj;c1.constructor=l1;Ij(c1,rh.prototype);c1.isPureReactComponent=!0;var ck=Array.isArray,zj=Object.prototype.hasOwnProperty,u1={current:null},Fj={key:!0,ref:!0,__self:!0,__source:!0};function Bj(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)zj.call(t,r)&&!Fj.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:mf,type:e,key:s,ref:a,props:i,_owner:u1.current}}function gI(e,t){return{$$typeof:mf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function h1(e){return typeof e=="object"&&e!==null&&e.$$typeof===mf}function yI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uk=/\/+/g;function z0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yI(""+e.key):t.toString(36)}function Zp(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case mf:case sI:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+z0(a,0):r,ck(i)?(n="",e!=null&&(n=e.replace(uk,"$&/")+"/"),Zp(i,t,n,"",function(h){return h})):i!=null&&(h1(i)&&(i=gI(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(uk,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",ck(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+z0(s,o);a+=Zp(s,t,n,c,i)}else if(c=mI(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+z0(s,o++),a+=Zp(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Wf(e,t,n){if(e==null)return e;var r=[],i=0;return Zp(e,r,"","",function(s){return t.call(n,s,i++)}),r}function bI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qi={current:null},Qp={transition:null},vI={ReactCurrentDispatcher:Qi,ReactCurrentBatchConfig:Qp,ReactCurrentOwner:u1};function Uj(){throw Error("act(...) is not supported in production builds of React.")}Pn.Children={map:Wf,forEach:function(e,t,n){Wf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Wf(e,function(){t++}),t},toArray:function(e){return Wf(e,function(t){return t})||[]},only:function(e){if(!h1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pn.Component=rh;Pn.Fragment=aI;Pn.Profiler=lI;Pn.PureComponent=l1;Pn.StrictMode=oI;Pn.Suspense=dI;Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vI;Pn.act=Uj;Pn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ij({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=u1.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)zj.call(t,c)&&!Fj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];r.children=o}return{$$typeof:mf,type:e.type,key:i,ref:s,props:r,_owner:a}};Pn.createContext=function(e){return e={$$typeof:uI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cI,_context:e},e.Consumer=e};Pn.createElement=Bj;Pn.createFactory=function(e){var t=Bj.bind(null,e);return t.type=e,t};Pn.createRef=function(){return{current:null}};Pn.forwardRef=function(e){return{$$typeof:hI,render:e}};Pn.isValidElement=h1;Pn.lazy=function(e){return{$$typeof:pI,_payload:{_status:-1,_result:e},_init:bI}};Pn.memo=function(e,t){return{$$typeof:fI,type:e,compare:t===void 0?null:t}};Pn.startTransition=function(e){var t=Qp.transition;Qp.transition={};try{e()}finally{Qp.transition=t}};Pn.unstable_act=Uj;Pn.useCallback=function(e,t){return Qi.current.useCallback(e,t)};Pn.useContext=function(e){return Qi.current.useContext(e)};Pn.useDebugValue=function(){};Pn.useDeferredValue=function(e){return Qi.current.useDeferredValue(e)};Pn.useEffect=function(e,t){return Qi.current.useEffect(e,t)};Pn.useId=function(){return Qi.current.useId()};Pn.useImperativeHandle=function(e,t,n){return Qi.current.useImperativeHandle(e,t,n)};Pn.useInsertionEffect=function(e,t){return Qi.current.useInsertionEffect(e,t)};Pn.useLayoutEffect=function(e,t){return Qi.current.useLayoutEffect(e,t)};Pn.useMemo=function(e,t){return Qi.current.useMemo(e,t)};Pn.useReducer=function(e,t,n){return Qi.current.useReducer(e,t,n)};Pn.useRef=function(e){return Qi.current.useRef(e)};Pn.useState=function(e){return Qi.current.useState(e)};Pn.useSyncExternalStore=function(e,t,n){return Qi.current.useSyncExternalStore(e,t,n)};Pn.useTransition=function(){return Qi.current.useTransition()};Pn.version="18.3.1";Mj.exports=Pn;var pe=Mj.exports;const je=No(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=pe,wI=Symbol.for("react.element"),_I=Symbol.for("react.fragment"),kI=Object.prototype.hasOwnProperty,SI=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function Hj(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)kI.call(t,r)&&!CI.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:wI,type:e,key:s,ref:a,props:i,_owner:SI.current}}Rg.Fragment=_I;Rg.jsx=Hj;Rg.jsxs=Hj;Rj.exports=Rg;var u=Rj.exports,Jb={},Wj={exports:{}},Ms={},Vj={exports:{}},Gj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Be,xe){var Le=Be.length;Be.push(xe);e:for(;0<Le;){var Ce=Le-1>>>1,Re=Be[Ce];if(0<i(Re,xe))Be[Ce]=xe,Be[Le]=Re,Le=Ce;else break e}}function n(Be){return Be.length===0?null:Be[0]}function r(Be){if(Be.length===0)return null;var xe=Be[0],Le=Be.pop();if(Le!==xe){Be[0]=Le;e:for(var Ce=0,Re=Be.length,it=Re>>>1;Ce<it;){var nt=2*(Ce+1)-1,Ue=Be[nt],lt=nt+1,de=Be[lt];if(0>i(Ue,Le))lt<Re&&0>i(de,Ue)?(Be[Ce]=de,Be[lt]=Le,Ce=lt):(Be[Ce]=Ue,Be[nt]=Le,Ce=nt);else if(lt<Re&&0>i(de,Le))Be[Ce]=de,Be[lt]=Le,Ce=lt;else break e}}return xe}function i(Be,xe){var Le=Be.sortIndex-xe.sortIndex;return Le!==0?Le:Be.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],h=[],d=1,p=null,m=3,g=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(Be){for(var xe=n(h);xe!==null;){if(xe.callback===null)r(h);else if(xe.startTime<=Be)r(h),xe.sortIndex=xe.expirationTime,t(c,xe);else break;xe=n(h)}}function j(Be){if(w=!1,P(Be),!v)if(n(c)!==null)v=!0,Ae(M);else{var xe=n(h);xe!==null&&we(j,xe.startTime-Be)}}function M(Be,xe){v=!1,w&&(w=!1,x(D),D=-1),g=!0;var Le=m;try{for(P(xe),p=n(c);p!==null&&(!(p.expirationTime>xe)||Be&&!ue());){var Ce=p.callback;if(typeof Ce=="function"){p.callback=null,m=p.priorityLevel;var Re=Ce(p.expirationTime<=xe);xe=e.unstable_now(),typeof Re=="function"?p.callback=Re:p===n(c)&&r(c),P(xe)}else r(c);p=n(c)}if(p!==null)var it=!0;else{var nt=n(h);nt!==null&&we(j,nt.startTime-xe),it=!1}return it}finally{p=null,m=Le,g=!1}}var S=!1,B=null,D=-1,R=5,ee=-1;function ue(){return!(e.unstable_now()-ee<R)}function ie(){if(B!==null){var Be=e.unstable_now();ee=Be;var xe=!0;try{xe=B(!0,Be)}finally{xe?ge():(S=!1,B=null)}}else S=!1}var ge;if(typeof k=="function")ge=function(){k(ie)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ye=H.port2;H.port1.onmessage=ie,ge=function(){ye.postMessage(null)}}else ge=function(){C(ie,0)};function Ae(Be){B=Be,S||(S=!0,ge())}function we(Be,xe){D=C(function(){Be(e.unstable_now())},xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Be){Be.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Ae(M))},e.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Be?Math.floor(1e3/Be):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(Be){switch(m){case 1:case 2:case 3:var xe=3;break;default:xe=m}var Le=m;m=xe;try{return Be()}finally{m=Le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Be,xe){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Le=m;m=Be;try{return xe()}finally{m=Le}},e.unstable_scheduleCallback=function(Be,xe,Le){var Ce=e.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ce+Le:Ce):Le=Ce,Be){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=Le+Re,Be={id:d++,callback:xe,priorityLevel:Be,startTime:Le,expirationTime:Re,sortIndex:-1},Le>Ce?(Be.sortIndex=Le,t(h,Be),n(c)===null&&Be===n(h)&&(w?(x(D),D=-1):w=!0,we(j,Le-Ce))):(Be.sortIndex=Re,t(c,Be),v||g||(v=!0,Ae(M))),Be},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(Be){var xe=m;return function(){var Le=m;m=xe;try{return Be.apply(this,arguments)}finally{m=Le}}}})(Gj);Vj.exports=Gj;var EI=Vj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=pe,Os=EI;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qj=new Set,Ld={};function mc(e,t){Du(e,t),Du(e+"Capture",t)}function Du(e,t){for(Ld[e]=t,e=0;e<t.length;e++)qj.add(t[e])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ev=Object.prototype.hasOwnProperty,jI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hk={},dk={};function AI(e){return ev.call(dk,e)?!0:ev.call(hk,e)?!1:jI.test(e)?dk[e]=!0:(hk[e]=!0,!1)}function PI(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NI(e,t,n,r){if(t===null||typeof t>"u"||PI(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ji(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ji[e]=new Ji(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ji[t]=new Ji(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ji[e]=new Ji(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ji[e]=new Ji(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ji[e]=new Ji(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ji[e]=new Ji(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ji[e]=new Ji(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ji[e]=new Ji(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ji[e]=new Ji(e,5,!1,e.toLowerCase(),null,!1,!1)});var d1=/[\-:]([a-z])/g;function f1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d1,f1);ji[t]=new Ji(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d1,f1);ji[t]=new Ji(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d1,f1);ji[t]=new Ji(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ji[e]=new Ji(e,1,!1,e.toLowerCase(),null,!1,!1)});ji.xlinkHref=new Ji("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ji[e]=new Ji(e,1,!1,e.toLowerCase(),null,!0,!0)});function p1(e,t,n,r){var i=ji.hasOwnProperty(t)?ji[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NI(t,n,i,r)&&(n=null),r||i===null?AI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Oo=TI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vf=Symbol.for("react.element"),cu=Symbol.for("react.portal"),uu=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),tv=Symbol.for("react.profiler"),Yj=Symbol.for("react.provider"),Xj=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),nv=Symbol.for("react.suspense"),rv=Symbol.for("react.suspense_list"),y1=Symbol.for("react.memo"),qo=Symbol.for("react.lazy"),Kj=Symbol.for("react.offscreen"),fk=Symbol.iterator;function Th(e){return e===null||typeof e!="object"?null:(e=fk&&e[fk]||e["@@iterator"],typeof e=="function"?e:null)}var Wr=Object.assign,F0;function Xh(e){if(F0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F0=t&&t[1]||""}return`
`+F0+e}var B0=!1;function U0(e,t){if(!e||B0)return"";B0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{B0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xh(e):""}function OI(e){switch(e.tag){case 5:return Xh(e.type);case 16:return Xh("Lazy");case 13:return Xh("Suspense");case 19:return Xh("SuspenseList");case 0:case 2:case 15:return e=U0(e.type,!1),e;case 11:return e=U0(e.type.render,!1),e;case 1:return e=U0(e.type,!0),e;default:return""}}function iv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uu:return"Fragment";case cu:return"Portal";case tv:return"Profiler";case m1:return"StrictMode";case nv:return"Suspense";case rv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xj:return(e.displayName||"Context")+".Consumer";case Yj:return(e._context.displayName||"Context")+".Provider";case g1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case y1:return t=e.displayName||null,t!==null?t:iv(e.type)||"Memo";case qo:t=e._payload,e=e._init;try{return iv(e(t))}catch{}}return null}function RI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iv(t);case 8:return t===m1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MI(e){var t=Zj(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gf(e){e._valueTracker||(e._valueTracker=MI(e))}function Qj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Zj(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function km(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sv(e,t){var n=t.checked;return Wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pk(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ml(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jj(e,t){t=t.checked,t!=null&&p1(e,"checked",t,!1)}function av(e,t){Jj(e,t);var n=ml(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ov(e,t.type,n):t.hasOwnProperty("defaultValue")&&ov(e,t.type,ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mk(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ov(e,t,n){(t!=="number"||km(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Kh=Array.isArray;function Eu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ml(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function lv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return Wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gk(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pt(92));if(Kh(n)){if(1<n.length)throw Error(Pt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ml(n)}}function eA(e,t){var n=ml(t.value),r=ml(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qf,nA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qf=qf||document.createElement("div"),qf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Id(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LI=["Webkit","ms","Moz","O"];Object.keys(yd).forEach(function(e){LI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yd[t]=yd[e]})});function rA(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yd.hasOwnProperty(e)&&yd[e]?(""+t).trim():t+"px"}function iA(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rA(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var II=Wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uv(e,t){if(t){if(II[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pt(62))}}function hv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dv=null;function b1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fv=null,Tu=null,ju=null;function bk(e){if(e=bf(e)){if(typeof fv!="function")throw Error(Pt(280));var t=e.stateNode;t&&(t=Dg(t),fv(e.stateNode,e.type,t))}}function sA(e){Tu?ju?ju.push(e):ju=[e]:Tu=e}function aA(){if(Tu){var e=Tu,t=ju;if(ju=Tu=null,bk(e),t)for(e=0;e<t.length;e++)bk(t[e])}}function oA(e,t){return e(t)}function lA(){}var H0=!1;function cA(e,t,n){if(H0)return e(t,n);H0=!0;try{return oA(e,t,n)}finally{H0=!1,(Tu!==null||ju!==null)&&(lA(),aA())}}function $d(e,t){var n=e.stateNode;if(n===null)return null;var r=Dg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pt(231,t,typeof n));return n}var pv=!1;if(Co)try{var jh={};Object.defineProperty(jh,"passive",{get:function(){pv=!0}}),window.addEventListener("test",jh,jh),window.removeEventListener("test",jh,jh)}catch{pv=!1}function $I(e,t,n,r,i,s,a,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(d){this.onError(d)}}var bd=!1,Sm=null,Cm=!1,mv=null,DI={onError:function(e){bd=!0,Sm=e}};function zI(e,t,n,r,i,s,a,o,c){bd=!1,Sm=null,$I.apply(DI,arguments)}function FI(e,t,n,r,i,s,a,o,c){if(zI.apply(this,arguments),bd){if(bd){var h=Sm;bd=!1,Sm=null}else throw Error(Pt(198));Cm||(Cm=!0,mv=h)}}function gc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vk(e){if(gc(e)!==e)throw Error(Pt(188))}function BI(e){var t=e.alternate;if(!t){if(t=gc(e),t===null)throw Error(Pt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vk(i),e;if(s===r)return vk(i),t;s=s.sibling}throw Error(Pt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Pt(189))}}if(n.alternate!==r)throw Error(Pt(190))}if(n.tag!==3)throw Error(Pt(188));return n.stateNode.current===n?e:t}function hA(e){return e=BI(e),e!==null?dA(e):null}function dA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dA(e);if(t!==null)return t;e=e.sibling}return null}var fA=Os.unstable_scheduleCallback,xk=Os.unstable_cancelCallback,UI=Os.unstable_shouldYield,HI=Os.unstable_requestPaint,ei=Os.unstable_now,WI=Os.unstable_getCurrentPriorityLevel,v1=Os.unstable_ImmediatePriority,pA=Os.unstable_UserBlockingPriority,Em=Os.unstable_NormalPriority,VI=Os.unstable_LowPriority,mA=Os.unstable_IdlePriority,Mg=null,ro=null;function GI(e){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(Mg,e,void 0,(e.current.flags&128)===128)}catch{}}var ka=Math.clz32?Math.clz32:XI,qI=Math.log,YI=Math.LN2;function XI(e){return e>>>=0,e===0?32:31-(qI(e)/YI|0)|0}var Yf=64,Xf=4194304;function Zh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Zh(o):(s&=a,s!==0&&(r=Zh(s)))}else a=n&~i,a!==0?r=Zh(a):s!==0&&(r=Zh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ka(t),i=1<<n,r|=e[n],t&=~i;return r}function KI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ka(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=KI(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function gv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gA(){var e=Yf;return Yf<<=1,!(Yf&4194240)&&(Yf=64),e}function W0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ka(t),e[t]=n}function QI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ka(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function x1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ka(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ir=0;function yA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bA,w1,vA,xA,wA,yv=!1,Kf=[],ol=null,ll=null,cl=null,Dd=new Map,zd=new Map,Zo=[],JI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wk(e,t){switch(e){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":Dd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(t.pointerId)}}function Ah(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=bf(t),t!==null&&w1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function e8(e,t,n,r,i){switch(t){case"focusin":return ol=Ah(ol,e,t,n,r,i),!0;case"dragenter":return ll=Ah(ll,e,t,n,r,i),!0;case"mouseover":return cl=Ah(cl,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dd.set(s,Ah(Dd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zd.set(s,Ah(zd.get(s)||null,e,t,n,r,i)),!0}return!1}function _A(e){var t=Kl(e.target);if(t!==null){var n=gc(t);if(n!==null){if(t=n.tag,t===13){if(t=uA(n),t!==null){e.blockedOn=t,wA(e.priority,function(){vA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dv=r,n.target.dispatchEvent(r),dv=null}else return t=bf(n),t!==null&&w1(t),e.blockedOn=n,!1;t.shift()}return!0}function _k(e,t,n){Jp(e)&&n.delete(t)}function t8(){yv=!1,ol!==null&&Jp(ol)&&(ol=null),ll!==null&&Jp(ll)&&(ll=null),cl!==null&&Jp(cl)&&(cl=null),Dd.forEach(_k),zd.forEach(_k)}function Ph(e,t){e.blockedOn===t&&(e.blockedOn=null,yv||(yv=!0,Os.unstable_scheduleCallback(Os.unstable_NormalPriority,t8)))}function Fd(e){function t(i){return Ph(i,e)}if(0<Kf.length){Ph(Kf[0],e);for(var n=1;n<Kf.length;n++){var r=Kf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ol!==null&&Ph(ol,e),ll!==null&&Ph(ll,e),cl!==null&&Ph(cl,e),Dd.forEach(t),zd.forEach(t),n=0;n<Zo.length;n++)r=Zo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zo.length&&(n=Zo[0],n.blockedOn===null);)_A(n),n.blockedOn===null&&Zo.shift()}var Au=Oo.ReactCurrentBatchConfig,jm=!0;function n8(e,t,n,r){var i=ir,s=Au.transition;Au.transition=null;try{ir=1,_1(e,t,n,r)}finally{ir=i,Au.transition=s}}function r8(e,t,n,r){var i=ir,s=Au.transition;Au.transition=null;try{ir=4,_1(e,t,n,r)}finally{ir=i,Au.transition=s}}function _1(e,t,n,r){if(jm){var i=bv(e,t,n,r);if(i===null)ey(e,t,r,Am,n),wk(e,r);else if(e8(i,e,t,n,r))r.stopPropagation();else if(wk(e,r),t&4&&-1<JI.indexOf(e)){for(;i!==null;){var s=bf(i);if(s!==null&&bA(s),s=bv(e,t,n,r),s===null&&ey(e,t,r,Am,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ey(e,t,r,null,n)}}var Am=null;function bv(e,t,n,r){if(Am=null,e=b1(r),e=Kl(e),e!==null)if(t=gc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Am=e,null}function kA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WI()){case v1:return 1;case pA:return 4;case Em:case VI:return 16;case mA:return 536870912;default:return 16}default:return 16}}var rl=null,k1=null,em=null;function SA(){if(em)return em;var e,t=k1,n=t.length,r,i="value"in rl?rl.value:rl.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return em=i.slice(e,1<r?1-r:void 0)}function tm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zf(){return!0}function kk(){return!1}function Ls(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zf:kk,this.isPropagationStopped=kk,this}return Wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zf)},persist:function(){},isPersistent:Zf}),t}var ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S1=Ls(ih),yf=Wr({},ih,{view:0,detail:0}),i8=Ls(yf),V0,G0,Nh,Lg=Wr({},yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nh&&(Nh&&e.type==="mousemove"?(V0=e.screenX-Nh.screenX,G0=e.screenY-Nh.screenY):G0=V0=0,Nh=e),V0)},movementY:function(e){return"movementY"in e?e.movementY:G0}}),Sk=Ls(Lg),s8=Wr({},Lg,{dataTransfer:0}),a8=Ls(s8),o8=Wr({},yf,{relatedTarget:0}),q0=Ls(o8),l8=Wr({},ih,{animationName:0,elapsedTime:0,pseudoElement:0}),c8=Ls(l8),u8=Wr({},ih,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h8=Ls(u8),d8=Wr({},ih,{data:0}),Ck=Ls(d8),f8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=m8[e])?!!t[e]:!1}function C1(){return g8}var y8=Wr({},yf,{key:function(e){if(e.key){var t=f8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?p8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C1,charCode:function(e){return e.type==="keypress"?tm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b8=Ls(y8),v8=Wr({},Lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ek=Ls(v8),x8=Wr({},yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C1}),w8=Ls(x8),_8=Wr({},ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),k8=Ls(_8),S8=Wr({},Lg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C8=Ls(S8),E8=[9,13,27,32],E1=Co&&"CompositionEvent"in window,vd=null;Co&&"documentMode"in document&&(vd=document.documentMode);var T8=Co&&"TextEvent"in window&&!vd,CA=Co&&(!E1||vd&&8<vd&&11>=vd),Tk=" ",jk=!1;function EA(e,t){switch(e){case"keyup":return E8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hu=!1;function j8(e,t){switch(e){case"compositionend":return TA(t);case"keypress":return t.which!==32?null:(jk=!0,Tk);case"textInput":return e=t.data,e===Tk&&jk?null:e;default:return null}}function A8(e,t){if(hu)return e==="compositionend"||!E1&&EA(e,t)?(e=SA(),em=k1=rl=null,hu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return CA&&t.locale!=="ko"?null:t.data;default:return null}}var P8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ak(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!P8[e.type]:t==="textarea"}function jA(e,t,n,r){sA(r),t=Pm(t,"onChange"),0<t.length&&(n=new S1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xd=null,Bd=null;function N8(e){zA(e,0)}function Ig(e){var t=pu(e);if(Qj(t))return e}function O8(e,t){if(e==="change")return t}var AA=!1;if(Co){var Y0;if(Co){var X0="oninput"in document;if(!X0){var Pk=document.createElement("div");Pk.setAttribute("oninput","return;"),X0=typeof Pk.oninput=="function"}Y0=X0}else Y0=!1;AA=Y0&&(!document.documentMode||9<document.documentMode)}function Nk(){xd&&(xd.detachEvent("onpropertychange",PA),Bd=xd=null)}function PA(e){if(e.propertyName==="value"&&Ig(Bd)){var t=[];jA(t,Bd,e,b1(e)),cA(N8,t)}}function R8(e,t,n){e==="focusin"?(Nk(),xd=t,Bd=n,xd.attachEvent("onpropertychange",PA)):e==="focusout"&&Nk()}function M8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ig(Bd)}function L8(e,t){if(e==="click")return Ig(t)}function I8(e,t){if(e==="input"||e==="change")return Ig(t)}function $8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ja=typeof Object.is=="function"?Object.is:$8;function Ud(e,t){if(ja(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ev.call(t,i)||!ja(e[i],t[i]))return!1}return!0}function Ok(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rk(e,t){var n=Ok(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ok(n)}}function NA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OA(){for(var e=window,t=km();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=km(e.document)}return t}function T1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D8(e){var t=OA(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&NA(n.ownerDocument.documentElement,n)){if(r!==null&&T1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Rk(n,s);var a=Rk(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z8=Co&&"documentMode"in document&&11>=document.documentMode,du=null,vv=null,wd=null,xv=!1;function Mk(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xv||du==null||du!==km(r)||(r=du,"selectionStart"in r&&T1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wd&&Ud(wd,r)||(wd=r,r=Pm(vv,"onSelect"),0<r.length&&(t=new S1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=du)))}function Qf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fu={animationend:Qf("Animation","AnimationEnd"),animationiteration:Qf("Animation","AnimationIteration"),animationstart:Qf("Animation","AnimationStart"),transitionend:Qf("Transition","TransitionEnd")},K0={},RA={};Co&&(RA=document.createElement("div").style,"AnimationEvent"in window||(delete fu.animationend.animation,delete fu.animationiteration.animation,delete fu.animationstart.animation),"TransitionEvent"in window||delete fu.transitionend.transition);function $g(e){if(K0[e])return K0[e];if(!fu[e])return e;var t=fu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RA)return K0[e]=t[n];return e}var MA=$g("animationend"),LA=$g("animationiteration"),IA=$g("animationstart"),$A=$g("transitionend"),DA=new Map,Lk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(e,t){DA.set(e,t),mc(t,[e])}for(var Z0=0;Z0<Lk.length;Z0++){var Q0=Lk[Z0],F8=Q0.toLowerCase(),B8=Q0[0].toUpperCase()+Q0.slice(1);_l(F8,"on"+B8)}_l(MA,"onAnimationEnd");_l(LA,"onAnimationIteration");_l(IA,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l($A,"onTransitionEnd");Du("onMouseEnter",["mouseout","mouseover"]);Du("onMouseLeave",["mouseout","mouseover"]);Du("onPointerEnter",["pointerout","pointerover"]);Du("onPointerLeave",["pointerout","pointerover"]);mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qh));function Ik(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,FI(r,t,void 0,e),e.currentTarget=null}function zA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Ik(i,o,h),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,h=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Ik(i,o,h),s=c}}}if(Cm)throw e=mv,Cm=!1,mv=null,e}function jr(e,t){var n=t[Cv];n===void 0&&(n=t[Cv]=new Set);var r=e+"__bubble";n.has(r)||(FA(t,e,2,!1),n.add(r))}function J0(e,t,n){var r=0;t&&(r|=4),FA(n,e,r,t)}var Jf="_reactListening"+Math.random().toString(36).slice(2);function Hd(e){if(!e[Jf]){e[Jf]=!0,qj.forEach(function(n){n!=="selectionchange"&&(U8.has(n)||J0(n,!1,e),J0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jf]||(t[Jf]=!0,J0("selectionchange",!1,t))}}function FA(e,t,n,r){switch(kA(t)){case 1:var i=n8;break;case 4:i=r8;break;default:i=_1}n=i.bind(null,t,n,e),i=void 0,!pv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ey(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Kl(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}cA(function(){var h=s,d=b1(n),p=[];e:{var m=DA.get(e);if(m!==void 0){var g=S1,v=e;switch(e){case"keypress":if(tm(n)===0)break e;case"keydown":case"keyup":g=b8;break;case"focusin":v="focus",g=q0;break;case"focusout":v="blur",g=q0;break;case"beforeblur":case"afterblur":g=q0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Sk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=a8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=w8;break;case MA:case LA:case IA:g=c8;break;case $A:g=k8;break;case"scroll":g=i8;break;case"wheel":g=C8;break;case"copy":case"cut":case"paste":g=h8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ek}var w=(t&4)!==0,C=!w&&e==="scroll",x=w?m!==null?m+"Capture":null:m;w=[];for(var k=h,P;k!==null;){P=k;var j=P.stateNode;if(P.tag===5&&j!==null&&(P=j,x!==null&&(j=$d(k,x),j!=null&&w.push(Wd(k,j,P)))),C)break;k=k.return}0<w.length&&(m=new g(m,v,null,n,d),p.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==dv&&(v=n.relatedTarget||n.fromElement)&&(Kl(v)||v[Eo]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=h,v=v?Kl(v):null,v!==null&&(C=gc(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(w=Sk,j="onMouseLeave",x="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(w=Ek,j="onPointerLeave",x="onPointerEnter",k="pointer"),C=g==null?m:pu(g),P=v==null?m:pu(v),m=new w(j,k+"leave",g,n,d),m.target=C,m.relatedTarget=P,j=null,Kl(d)===h&&(w=new w(x,k+"enter",v,n,d),w.target=P,w.relatedTarget=C,j=w),C=j,g&&v)t:{for(w=g,x=v,k=0,P=w;P;P=Cc(P))k++;for(P=0,j=x;j;j=Cc(j))P++;for(;0<k-P;)w=Cc(w),k--;for(;0<P-k;)x=Cc(x),P--;for(;k--;){if(w===x||x!==null&&w===x.alternate)break t;w=Cc(w),x=Cc(x)}w=null}else w=null;g!==null&&$k(p,m,g,w,!1),v!==null&&C!==null&&$k(p,C,v,w,!0)}}e:{if(m=h?pu(h):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var M=O8;else if(Ak(m))if(AA)M=I8;else{M=M8;var S=R8}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=L8);if(M&&(M=M(e,h))){jA(p,M,n,d);break e}S&&S(e,m,h),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&ov(m,"number",m.value)}switch(S=h?pu(h):window,e){case"focusin":(Ak(S)||S.contentEditable==="true")&&(du=S,vv=h,wd=null);break;case"focusout":wd=vv=du=null;break;case"mousedown":xv=!0;break;case"contextmenu":case"mouseup":case"dragend":xv=!1,Mk(p,n,d);break;case"selectionchange":if(z8)break;case"keydown":case"keyup":Mk(p,n,d)}var B;if(E1)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else hu?EA(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(CA&&n.locale!=="ko"&&(hu||D!=="onCompositionStart"?D==="onCompositionEnd"&&hu&&(B=SA()):(rl=d,k1="value"in rl?rl.value:rl.textContent,hu=!0)),S=Pm(h,D),0<S.length&&(D=new Ck(D,e,null,n,d),p.push({event:D,listeners:S}),B?D.data=B:(B=TA(n),B!==null&&(D.data=B)))),(B=T8?j8(e,n):A8(e,n))&&(h=Pm(h,"onBeforeInput"),0<h.length&&(d=new Ck("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=B))}zA(p,t)})}function Wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$d(e,n),s!=null&&r.unshift(Wd(e,s,i)),s=$d(e,t),s!=null&&r.push(Wd(e,s,i))),e=e.return}return r}function Cc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $k(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,h=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&h!==null&&(o=h,i?(c=$d(n,s),c!=null&&a.unshift(Wd(n,c,o))):i||(c=$d(n,s),c!=null&&a.push(Wd(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var H8=/\r\n?/g,W8=/\u0000|\uFFFD/g;function Dk(e){return(typeof e=="string"?e:""+e).replace(H8,`
`).replace(W8,"")}function ep(e,t,n){if(t=Dk(t),Dk(e)!==t&&n)throw Error(Pt(425))}function Nm(){}var wv=null,_v=null;function kv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sv=typeof setTimeout=="function"?setTimeout:void 0,V8=typeof clearTimeout=="function"?clearTimeout:void 0,zk=typeof Promise=="function"?Promise:void 0,G8=typeof queueMicrotask=="function"?queueMicrotask:typeof zk<"u"?function(e){return zk.resolve(null).then(e).catch(q8)}:Sv;function q8(e){setTimeout(function(){throw e})}function ty(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Fd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fd(t)}function ul(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sh=Math.random().toString(36).slice(2),Xa="__reactFiber$"+sh,Vd="__reactProps$"+sh,Eo="__reactContainer$"+sh,Cv="__reactEvents$"+sh,Y8="__reactListeners$"+sh,X8="__reactHandles$"+sh;function Kl(e){var t=e[Xa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Eo]||n[Xa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fk(e);e!==null;){if(n=e[Xa])return n;e=Fk(e)}return t}e=n,n=e.parentNode}return null}function bf(e){return e=e[Xa]||e[Eo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pt(33))}function Dg(e){return e[Vd]||null}var Ev=[],mu=-1;function kl(e){return{current:e}}function Nr(e){0>mu||(e.current=Ev[mu],Ev[mu]=null,mu--)}function Cr(e,t){mu++,Ev[mu]=e.current,e.current=t}var gl={},Fi=kl(gl),ds=kl(!1),ac=gl;function zu(e,t){var n=e.type.contextTypes;if(!n)return gl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fs(e){return e=e.childContextTypes,e!=null}function Om(){Nr(ds),Nr(Fi)}function Bk(e,t,n){if(Fi.current!==gl)throw Error(Pt(168));Cr(Fi,t),Cr(ds,n)}function BA(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Pt(108,RI(e)||"Unknown",i));return Wr({},n,r)}function Rm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gl,ac=Fi.current,Cr(Fi,e),Cr(ds,ds.current),!0}function Uk(e,t,n){var r=e.stateNode;if(!r)throw Error(Pt(169));n?(e=BA(e,t,ac),r.__reactInternalMemoizedMergedChildContext=e,Nr(ds),Nr(Fi),Cr(Fi,e)):Nr(ds),Cr(ds,n)}var yo=null,zg=!1,ny=!1;function UA(e){yo===null?yo=[e]:yo.push(e)}function K8(e){zg=!0,UA(e)}function Sl(){if(!ny&&yo!==null){ny=!0;var e=0,t=ir;try{var n=yo;for(ir=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yo=null,zg=!1}catch(i){throw yo!==null&&(yo=yo.slice(e+1)),fA(v1,Sl),i}finally{ir=t,ny=!1}}return null}var gu=[],yu=0,Mm=null,Lm=0,Hs=[],Ws=0,oc=null,xo=1,wo="";function Dl(e,t){gu[yu++]=Lm,gu[yu++]=Mm,Mm=e,Lm=t}function HA(e,t,n){Hs[Ws++]=xo,Hs[Ws++]=wo,Hs[Ws++]=oc,oc=e;var r=xo;e=wo;var i=32-ka(r)-1;r&=~(1<<i),n+=1;var s=32-ka(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,xo=1<<32-ka(t)+i|n<<i|r,wo=s+e}else xo=1<<s|n<<i|r,wo=e}function j1(e){e.return!==null&&(Dl(e,1),HA(e,1,0))}function A1(e){for(;e===Mm;)Mm=gu[--yu],gu[yu]=null,Lm=gu[--yu],gu[yu]=null;for(;e===oc;)oc=Hs[--Ws],Hs[Ws]=null,wo=Hs[--Ws],Hs[Ws]=null,xo=Hs[--Ws],Hs[Ws]=null}var Ns=null,js=null,Ir=!1,xa=null;function WA(e,t){var n=Gs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ns=e,js=ul(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ns=e,js=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=oc!==null?{id:xo,overflow:wo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ns=e,js=null,!0):!1;default:return!1}}function Tv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jv(e){if(Ir){var t=js;if(t){var n=t;if(!Hk(e,t)){if(Tv(e))throw Error(Pt(418));t=ul(n.nextSibling);var r=Ns;t&&Hk(e,t)?WA(r,n):(e.flags=e.flags&-4097|2,Ir=!1,Ns=e)}}else{if(Tv(e))throw Error(Pt(418));e.flags=e.flags&-4097|2,Ir=!1,Ns=e}}}function Wk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ns=e}function tp(e){if(e!==Ns)return!1;if(!Ir)return Wk(e),Ir=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kv(e.type,e.memoizedProps)),t&&(t=js)){if(Tv(e))throw VA(),Error(Pt(418));for(;t;)WA(e,t),t=ul(t.nextSibling)}if(Wk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){js=ul(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}js=null}}else js=Ns?ul(e.stateNode.nextSibling):null;return!0}function VA(){for(var e=js;e;)e=ul(e.nextSibling)}function Fu(){js=Ns=null,Ir=!1}function P1(e){xa===null?xa=[e]:xa.push(e)}var Z8=Oo.ReactCurrentBatchConfig;function Oh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pt(309));var r=n.stateNode}if(!r)throw Error(Pt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Pt(284));if(!n._owner)throw Error(Pt(290,e))}return e}function np(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vk(e){var t=e._init;return t(e._payload)}function GA(e){function t(x,k){if(e){var P=x.deletions;P===null?(x.deletions=[k],x.flags|=16):P.push(k)}}function n(x,k){if(!e)return null;for(;k!==null;)t(x,k),k=k.sibling;return null}function r(x,k){for(x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function i(x,k){return x=pl(x,k),x.index=0,x.sibling=null,x}function s(x,k,P){return x.index=P,e?(P=x.alternate,P!==null?(P=P.index,P<k?(x.flags|=2,k):P):(x.flags|=2,k)):(x.flags|=1048576,k)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,k,P,j){return k===null||k.tag!==6?(k=cy(P,x.mode,j),k.return=x,k):(k=i(k,P),k.return=x,k)}function c(x,k,P,j){var M=P.type;return M===uu?d(x,k,P.props.children,j,P.key):k!==null&&(k.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qo&&Vk(M)===k.type)?(j=i(k,P.props),j.ref=Oh(x,k,P),j.return=x,j):(j=lm(P.type,P.key,P.props,null,x.mode,j),j.ref=Oh(x,k,P),j.return=x,j)}function h(x,k,P,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==P.containerInfo||k.stateNode.implementation!==P.implementation?(k=uy(P,x.mode,j),k.return=x,k):(k=i(k,P.children||[]),k.return=x,k)}function d(x,k,P,j,M){return k===null||k.tag!==7?(k=nc(P,x.mode,j,M),k.return=x,k):(k=i(k,P),k.return=x,k)}function p(x,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return k=cy(""+k,x.mode,P),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Vf:return P=lm(k.type,k.key,k.props,null,x.mode,P),P.ref=Oh(x,null,k),P.return=x,P;case cu:return k=uy(k,x.mode,P),k.return=x,k;case qo:var j=k._init;return p(x,j(k._payload),P)}if(Kh(k)||Th(k))return k=nc(k,x.mode,P,null),k.return=x,k;np(x,k)}return null}function m(x,k,P,j){var M=k!==null?k.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return M!==null?null:o(x,k,""+P,j);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Vf:return P.key===M?c(x,k,P,j):null;case cu:return P.key===M?h(x,k,P,j):null;case qo:return M=P._init,m(x,k,M(P._payload),j)}if(Kh(P)||Th(P))return M!==null?null:d(x,k,P,j,null);np(x,P)}return null}function g(x,k,P,j,M){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(P)||null,o(k,x,""+j,M);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Vf:return x=x.get(j.key===null?P:j.key)||null,c(k,x,j,M);case cu:return x=x.get(j.key===null?P:j.key)||null,h(k,x,j,M);case qo:var S=j._init;return g(x,k,P,S(j._payload),M)}if(Kh(j)||Th(j))return x=x.get(P)||null,d(k,x,j,M,null);np(k,j)}return null}function v(x,k,P,j){for(var M=null,S=null,B=k,D=k=0,R=null;B!==null&&D<P.length;D++){B.index>D?(R=B,B=null):R=B.sibling;var ee=m(x,B,P[D],j);if(ee===null){B===null&&(B=R);break}e&&B&&ee.alternate===null&&t(x,B),k=s(ee,k,D),S===null?M=ee:S.sibling=ee,S=ee,B=R}if(D===P.length)return n(x,B),Ir&&Dl(x,D),M;if(B===null){for(;D<P.length;D++)B=p(x,P[D],j),B!==null&&(k=s(B,k,D),S===null?M=B:S.sibling=B,S=B);return Ir&&Dl(x,D),M}for(B=r(x,B);D<P.length;D++)R=g(B,x,D,P[D],j),R!==null&&(e&&R.alternate!==null&&B.delete(R.key===null?D:R.key),k=s(R,k,D),S===null?M=R:S.sibling=R,S=R);return e&&B.forEach(function(ue){return t(x,ue)}),Ir&&Dl(x,D),M}function w(x,k,P,j){var M=Th(P);if(typeof M!="function")throw Error(Pt(150));if(P=M.call(P),P==null)throw Error(Pt(151));for(var S=M=null,B=k,D=k=0,R=null,ee=P.next();B!==null&&!ee.done;D++,ee=P.next()){B.index>D?(R=B,B=null):R=B.sibling;var ue=m(x,B,ee.value,j);if(ue===null){B===null&&(B=R);break}e&&B&&ue.alternate===null&&t(x,B),k=s(ue,k,D),S===null?M=ue:S.sibling=ue,S=ue,B=R}if(ee.done)return n(x,B),Ir&&Dl(x,D),M;if(B===null){for(;!ee.done;D++,ee=P.next())ee=p(x,ee.value,j),ee!==null&&(k=s(ee,k,D),S===null?M=ee:S.sibling=ee,S=ee);return Ir&&Dl(x,D),M}for(B=r(x,B);!ee.done;D++,ee=P.next())ee=g(B,x,D,ee.value,j),ee!==null&&(e&&ee.alternate!==null&&B.delete(ee.key===null?D:ee.key),k=s(ee,k,D),S===null?M=ee:S.sibling=ee,S=ee);return e&&B.forEach(function(ie){return t(x,ie)}),Ir&&Dl(x,D),M}function C(x,k,P,j){if(typeof P=="object"&&P!==null&&P.type===uu&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Vf:e:{for(var M=P.key,S=k;S!==null;){if(S.key===M){if(M=P.type,M===uu){if(S.tag===7){n(x,S.sibling),k=i(S,P.props.children),k.return=x,x=k;break e}}else if(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qo&&Vk(M)===S.type){n(x,S.sibling),k=i(S,P.props),k.ref=Oh(x,S,P),k.return=x,x=k;break e}n(x,S);break}else t(x,S);S=S.sibling}P.type===uu?(k=nc(P.props.children,x.mode,j,P.key),k.return=x,x=k):(j=lm(P.type,P.key,P.props,null,x.mode,j),j.ref=Oh(x,k,P),j.return=x,x=j)}return a(x);case cu:e:{for(S=P.key;k!==null;){if(k.key===S)if(k.tag===4&&k.stateNode.containerInfo===P.containerInfo&&k.stateNode.implementation===P.implementation){n(x,k.sibling),k=i(k,P.children||[]),k.return=x,x=k;break e}else{n(x,k);break}else t(x,k);k=k.sibling}k=uy(P,x.mode,j),k.return=x,x=k}return a(x);case qo:return S=P._init,C(x,k,S(P._payload),j)}if(Kh(P))return v(x,k,P,j);if(Th(P))return w(x,k,P,j);np(x,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,k!==null&&k.tag===6?(n(x,k.sibling),k=i(k,P),k.return=x,x=k):(n(x,k),k=cy(P,x.mode,j),k.return=x,x=k),a(x)):n(x,k)}return C}var Bu=GA(!0),qA=GA(!1),Im=kl(null),$m=null,bu=null,N1=null;function O1(){N1=bu=$m=null}function R1(e){var t=Im.current;Nr(Im),e._currentValue=t}function Av(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pu(e,t){$m=e,N1=bu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hs=!0),e.firstContext=null)}function Ks(e){var t=e._currentValue;if(N1!==e)if(e={context:e,memoizedValue:t,next:null},bu===null){if($m===null)throw Error(Pt(308));bu=e,$m.dependencies={lanes:0,firstContext:e}}else bu=bu.next=e;return t}var Zl=null;function M1(e){Zl===null?Zl=[e]:Zl.push(e)}function YA(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,M1(t)):(n.next=i.next,i.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yo=!1;function L1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Wn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,To(e,n)}return i=r.interleaved,i===null?(t.next=t,M1(r)):(t.next=i.next,i.next=t),r.interleaved=t,To(e,n)}function nm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,x1(e,n)}}function Gk(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Dm(e,t,n,r){var i=e.updateQueue;Yo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,h=c.next;c.next=null,a===null?s=h:a.next=h,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=h:o.next=h,d.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,d=h=c=null,o=s;do{var m=o.lane,g=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(m=t,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=Wr({},p,m);break e;case 2:Yo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(h=d=g,c=p):d=d.next=g,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=p),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);cc|=a,e.lanes=a,e.memoizedState=p}}function qk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Pt(191,i));i.call(r)}}}var vf={},io=kl(vf),Gd=kl(vf),qd=kl(vf);function Ql(e){if(e===vf)throw Error(Pt(174));return e}function I1(e,t){switch(Cr(qd,t),Cr(Gd,e),Cr(io,vf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cv(t,e)}Nr(io),Cr(io,t)}function Uu(){Nr(io),Nr(Gd),Nr(qd)}function KA(e){Ql(qd.current);var t=Ql(io.current),n=cv(t,e.type);t!==n&&(Cr(Gd,e),Cr(io,n))}function $1(e){Gd.current===e&&(Nr(io),Nr(Gd))}var Br=kl(0);function zm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ry=[];function D1(){for(var e=0;e<ry.length;e++)ry[e]._workInProgressVersionPrimary=null;ry.length=0}var rm=Oo.ReactCurrentDispatcher,iy=Oo.ReactCurrentBatchConfig,lc=0,Ur=null,ci=null,vi=null,Fm=!1,_d=!1,Yd=0,Q8=0;function Oi(){throw Error(Pt(321))}function z1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ja(e[n],t[n]))return!1;return!0}function F1(e,t,n,r,i,s){if(lc=s,Ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rm.current=e===null||e.memoizedState===null?n$:r$,e=n(r,i),_d){s=0;do{if(_d=!1,Yd=0,25<=s)throw Error(Pt(301));s+=1,vi=ci=null,t.updateQueue=null,rm.current=i$,e=n(r,i)}while(_d)}if(rm.current=Bm,t=ci!==null&&ci.next!==null,lc=0,vi=ci=Ur=null,Fm=!1,t)throw Error(Pt(300));return e}function B1(){var e=Yd!==0;return Yd=0,e}function Va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Ur.memoizedState=vi=e:vi=vi.next=e,vi}function Zs(){if(ci===null){var e=Ur.alternate;e=e!==null?e.memoizedState:null}else e=ci.next;var t=vi===null?Ur.memoizedState:vi.next;if(t!==null)vi=t,ci=e;else{if(e===null)throw Error(Pt(310));ci=e,e={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},vi===null?Ur.memoizedState=vi=e:vi=vi.next=e}return vi}function Xd(e,t){return typeof t=="function"?t(e):t}function sy(e){var t=Zs(),n=t.queue;if(n===null)throw Error(Pt(311));n.lastRenderedReducer=e;var r=ci,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,h=s;do{var d=h.lane;if((lc&d)===d)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=p,a=r):c=c.next=p,Ur.lanes|=d,cc|=d}h=h.next}while(h!==null&&h!==s);c===null?a=r:c.next=o,ja(r,t.memoizedState)||(hs=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ur.lanes|=s,cc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ay(e){var t=Zs(),n=t.queue;if(n===null)throw Error(Pt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);ja(s,t.memoizedState)||(hs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ZA(){}function QA(e,t){var n=Ur,r=Zs(),i=t(),s=!ja(r.memoizedState,i);if(s&&(r.memoizedState=i,hs=!0),r=r.queue,U1(t3.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,Kd(9,e3.bind(null,n,r,i,t),void 0,null),wi===null)throw Error(Pt(349));lc&30||JA(n,t,i)}return i}function JA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ur.updateQueue,t===null?(t={lastEffect:null,stores:null},Ur.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function e3(e,t,n,r){t.value=n,t.getSnapshot=r,n3(t)&&r3(e)}function t3(e,t,n){return n(function(){n3(t)&&r3(e)})}function n3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ja(e,n)}catch{return!0}}function r3(e){var t=To(e,1);t!==null&&Sa(t,e,1,-1)}function Yk(e){var t=Va();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:e},t.queue=e,e=e.dispatch=t$.bind(null,Ur,e),[t.memoizedState,e]}function Kd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ur.updateQueue,t===null?(t={lastEffect:null,stores:null},Ur.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function i3(){return Zs().memoizedState}function im(e,t,n,r){var i=Va();Ur.flags|=e,i.memoizedState=Kd(1|t,n,void 0,r===void 0?null:r)}function Fg(e,t,n,r){var i=Zs();r=r===void 0?null:r;var s=void 0;if(ci!==null){var a=ci.memoizedState;if(s=a.destroy,r!==null&&z1(r,a.deps)){i.memoizedState=Kd(t,n,s,r);return}}Ur.flags|=e,i.memoizedState=Kd(1|t,n,s,r)}function Xk(e,t){return im(8390656,8,e,t)}function U1(e,t){return Fg(2048,8,e,t)}function s3(e,t){return Fg(4,2,e,t)}function a3(e,t){return Fg(4,4,e,t)}function o3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function l3(e,t,n){return n=n!=null?n.concat([e]):null,Fg(4,4,o3.bind(null,t,e),n)}function H1(){}function c3(e,t){var n=Zs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&z1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function u3(e,t){var n=Zs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&z1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function h3(e,t,n){return lc&21?(ja(n,t)||(n=gA(),Ur.lanes|=n,cc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hs=!0),e.memoizedState=n)}function J8(e,t){var n=ir;ir=n!==0&&4>n?n:4,e(!0);var r=iy.transition;iy.transition={};try{e(!1),t()}finally{ir=n,iy.transition=r}}function d3(){return Zs().memoizedState}function e$(e,t,n){var r=fl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f3(e))p3(t,n);else if(n=YA(e,t,n,r),n!==null){var i=Ki();Sa(n,e,r,i),m3(n,t,r)}}function t$(e,t,n){var r=fl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f3(e))p3(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ja(o,a)){var c=t.interleaved;c===null?(i.next=i,M1(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=YA(e,t,i,r),n!==null&&(i=Ki(),Sa(n,e,r,i),m3(n,t,r))}}function f3(e){var t=e.alternate;return e===Ur||t!==null&&t===Ur}function p3(e,t){_d=Fm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function m3(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,x1(e,n)}}var Bm={readContext:Ks,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},n$={readContext:Ks,useCallback:function(e,t){return Va().memoizedState=[e,t===void 0?null:t],e},useContext:Ks,useEffect:Xk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,im(4194308,4,o3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return im(4194308,4,e,t)},useInsertionEffect:function(e,t){return im(4,2,e,t)},useMemo:function(e,t){var n=Va();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Va();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=e$.bind(null,Ur,e),[r.memoizedState,e]},useRef:function(e){var t=Va();return e={current:e},t.memoizedState=e},useState:Yk,useDebugValue:H1,useDeferredValue:function(e){return Va().memoizedState=e},useTransition:function(){var e=Yk(!1),t=e[0];return e=J8.bind(null,e[1]),Va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ur,i=Va();if(Ir){if(n===void 0)throw Error(Pt(407));n=n()}else{if(n=t(),wi===null)throw Error(Pt(349));lc&30||JA(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Xk(t3.bind(null,r,s,e),[e]),r.flags|=2048,Kd(9,e3.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Va(),t=wi.identifierPrefix;if(Ir){var n=wo,r=xo;n=(r&~(1<<32-ka(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Q8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},r$={readContext:Ks,useCallback:c3,useContext:Ks,useEffect:U1,useImperativeHandle:l3,useInsertionEffect:s3,useLayoutEffect:a3,useMemo:u3,useReducer:sy,useRef:i3,useState:function(){return sy(Xd)},useDebugValue:H1,useDeferredValue:function(e){var t=Zs();return h3(t,ci.memoizedState,e)},useTransition:function(){var e=sy(Xd)[0],t=Zs().memoizedState;return[e,t]},useMutableSource:ZA,useSyncExternalStore:QA,useId:d3,unstable_isNewReconciler:!1},i$={readContext:Ks,useCallback:c3,useContext:Ks,useEffect:U1,useImperativeHandle:l3,useInsertionEffect:s3,useLayoutEffect:a3,useMemo:u3,useReducer:ay,useRef:i3,useState:function(){return ay(Xd)},useDebugValue:H1,useDeferredValue:function(e){var t=Zs();return ci===null?t.memoizedState=e:h3(t,ci.memoizedState,e)},useTransition:function(){var e=ay(Xd)[0],t=Zs().memoizedState;return[e,t]},useMutableSource:ZA,useSyncExternalStore:QA,useId:d3,unstable_isNewReconciler:!1};function fa(e,t){if(e&&e.defaultProps){t=Wr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Wr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bg={isMounted:function(e){return(e=e._reactInternals)?gc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ki(),i=fl(e),s=_o(r,i);s.payload=t,n!=null&&(s.callback=n),t=hl(e,s,i),t!==null&&(Sa(t,e,i,r),nm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ki(),i=fl(e),s=_o(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=hl(e,s,i),t!==null&&(Sa(t,e,i,r),nm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ki(),r=fl(e),i=_o(n,r);i.tag=2,t!=null&&(i.callback=t),t=hl(e,i,r),t!==null&&(Sa(t,e,r,n),nm(t,e,r))}};function Kk(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ud(n,r)||!Ud(i,s):!0}function g3(e,t,n){var r=!1,i=gl,s=t.contextType;return typeof s=="object"&&s!==null?s=Ks(s):(i=fs(t)?ac:Fi.current,r=t.contextTypes,s=(r=r!=null)?zu(e,i):gl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Zk(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bg.enqueueReplaceState(t,t.state,null)}function Nv(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},L1(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ks(s):(s=fs(t)?ac:Fi.current,i.context=zu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Pv(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Bg.enqueueReplaceState(i,i.state,null),Dm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Hu(e,t){try{var n="",r=t;do n+=OI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function oy(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ov(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var s$=typeof WeakMap=="function"?WeakMap:Map;function y3(e,t,n){n=_o(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hm||(Hm=!0,Uv=r),Ov(e,t)},n}function b3(e,t,n){n=_o(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ov(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ov(e,t),typeof r!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Qk(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new s$;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=v$.bind(null,e,t,n),t.then(e,e))}function Jk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eS(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_o(-1,1),t.tag=2,hl(n,t,1))),n.lanes|=1),e)}var a$=Oo.ReactCurrentOwner,hs=!1;function qi(e,t,n,r){t.child=e===null?qA(t,null,n,r):Bu(t,e.child,n,r)}function tS(e,t,n,r,i){n=n.render;var s=t.ref;return Pu(t,i),r=F1(e,t,n,r,s,i),n=B1(),e!==null&&!hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jo(e,t,i)):(Ir&&n&&j1(t),t.flags|=1,qi(e,t,r,i),t.child)}function nS(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Z1(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,v3(e,t,s,r,i)):(e=lm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ud,n(a,r)&&e.ref===t.ref)return jo(e,t,i)}return t.flags|=1,e=pl(s,r),e.ref=t.ref,e.return=t,t.child=e}function v3(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ud(s,r)&&e.ref===t.ref)if(hs=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(hs=!0);else return t.lanes=e.lanes,jo(e,t,i)}return Rv(e,t,n,r,i)}function x3(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(xu,_s),_s|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(xu,_s),_s|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Cr(xu,_s),_s|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Cr(xu,_s),_s|=r;return qi(e,t,i,n),t.child}function w3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rv(e,t,n,r,i){var s=fs(n)?ac:Fi.current;return s=zu(t,s),Pu(t,i),n=F1(e,t,n,r,s,i),r=B1(),e!==null&&!hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jo(e,t,i)):(Ir&&r&&j1(t),t.flags|=1,qi(e,t,n,i),t.child)}function rS(e,t,n,r,i){if(fs(n)){var s=!0;Rm(t)}else s=!1;if(Pu(t,i),t.stateNode===null)sm(e,t),g3(t,n,r),Nv(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ks(h):(h=fs(n)?ac:Fi.current,h=zu(t,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==h)&&Zk(t,a,r,h),Yo=!1;var m=t.memoizedState;a.state=m,Dm(t,r,a,i),c=t.memoizedState,o!==r||m!==c||ds.current||Yo?(typeof d=="function"&&(Pv(t,n,d,r),c=t.memoizedState),(o=Yo||Kk(t,n,o,r,m,c,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=h,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,XA(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:fa(t.type,o),a.props=h,p=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ks(c):(c=fs(n)?ac:Fi.current,c=zu(t,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==c)&&Zk(t,a,r,c),Yo=!1,m=t.memoizedState,a.state=m,Dm(t,r,a,i);var v=t.memoizedState;o!==p||m!==v||ds.current||Yo?(typeof g=="function"&&(Pv(t,n,g,r),v=t.memoizedState),(h=Yo||Kk(t,n,h,r,m,v,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Mv(e,t,n,r,s,i)}function Mv(e,t,n,r,i,s){w3(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Uk(t,n,!1),jo(e,t,s);r=t.stateNode,a$.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Bu(t,e.child,null,s),t.child=Bu(t,null,o,s)):qi(e,t,o,s),t.memoizedState=r.state,i&&Uk(t,n,!0),t.child}function _3(e){var t=e.stateNode;t.pendingContext?Bk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bk(e,t.context,!1),I1(e,t.containerInfo)}function iS(e,t,n,r,i){return Fu(),P1(i),t.flags|=256,qi(e,t,n,r),t.child}var Lv={dehydrated:null,treeContext:null,retryLane:0};function Iv(e){return{baseLanes:e,cachePool:null,transitions:null}}function k3(e,t,n){var r=t.pendingProps,i=Br.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Cr(Br,i&1),e===null)return jv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Wg(a,r,0,null),e=nc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Iv(n),t.memoizedState=Lv,e):W1(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return o$(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=pl(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=pl(o,s):(s=nc(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Iv(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Lv,r}return s=e.child,e=s.sibling,r=pl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function W1(e,t){return t=Wg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rp(e,t,n,r){return r!==null&&P1(r),Bu(t,e.child,null,n),e=W1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function o$(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=oy(Error(Pt(422))),rp(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Wg({mode:"visible",children:r.children},i,0,null),s=nc(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Bu(t,e.child,null,a),t.child.memoizedState=Iv(a),t.memoizedState=Lv,s);if(!(t.mode&1))return rp(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Pt(419)),r=oy(s,r,void 0),rp(e,t,a,r)}if(o=(a&e.childLanes)!==0,hs||o){if(r=wi,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,To(e,i),Sa(r,e,i,-1))}return K1(),r=oy(Error(Pt(421))),rp(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=x$.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,js=ul(i.nextSibling),Ns=t,Ir=!0,xa=null,e!==null&&(Hs[Ws++]=xo,Hs[Ws++]=wo,Hs[Ws++]=oc,xo=e.id,wo=e.overflow,oc=t),t=W1(t,r.children),t.flags|=4096,t)}function sS(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Av(e.return,t,n)}function ly(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function S3(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(qi(e,t,r.children,n),r=Br.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sS(e,n,t);else if(e.tag===19)sS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cr(Br,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&zm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ly(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&zm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ly(t,!0,n,null,s);break;case"together":ly(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pt(153));if(t.child!==null){for(e=t.child,n=pl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function l$(e,t,n){switch(t.tag){case 3:_3(t),Fu();break;case 5:KA(t);break;case 1:fs(t.type)&&Rm(t);break;case 4:I1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Cr(Im,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Cr(Br,Br.current&1),t.flags|=128,null):n&t.child.childLanes?k3(e,t,n):(Cr(Br,Br.current&1),e=jo(e,t,n),e!==null?e.sibling:null);Cr(Br,Br.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return S3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Cr(Br,Br.current),r)break;return null;case 22:case 23:return t.lanes=0,x3(e,t,n)}return jo(e,t,n)}var C3,$v,E3,T3;C3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$v=function(){};E3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ql(io.current);var s=null;switch(n){case"input":i=sv(e,i),r=sv(e,r),s=[];break;case"select":i=Wr({},i,{value:void 0}),r=Wr({},r,{value:void 0}),s=[];break;case"textarea":i=lv(e,i),r=lv(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Nm)}uv(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var o=i[h];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ld.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(o=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ld.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&jr("scroll",e),s||o===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};T3=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rh(e,t){if(!Ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ri(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function c$(e,t,n){var r=t.pendingProps;switch(A1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(t),null;case 1:return fs(t.type)&&Om(),Ri(t),null;case 3:return r=t.stateNode,Uu(),Nr(ds),Nr(Fi),D1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(tp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xa!==null&&(Vv(xa),xa=null))),$v(e,t),Ri(t),null;case 5:$1(t);var i=Ql(qd.current);if(n=t.type,e!==null&&t.stateNode!=null)E3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pt(166));return Ri(t),null}if(e=Ql(io.current),tp(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xa]=t,r[Vd]=s,e=(t.mode&1)!==0,n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Qh.length;i++)jr(Qh[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":pk(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":gk(r,s),jr("invalid",r)}uv(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&ep(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ep(r.textContent,o,e),i=["children",""+o]):Ld.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&jr("scroll",r)}switch(n){case"input":Gf(r),mk(r,s,!0);break;case"textarea":Gf(r),yk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Nm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tA(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xa]=t,e[Vd]=r,C3(e,t,!1,!1),t.stateNode=e;e:{switch(a=hv(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Qh.length;i++)jr(Qh[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":pk(e,r),i=sv(e,r),jr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Wr({},r,{value:void 0}),jr("invalid",e);break;case"textarea":gk(e,r),i=lv(e,r),jr("invalid",e);break;default:i=r}uv(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?iA(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nA(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Id(e,c):typeof c=="number"&&Id(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ld.hasOwnProperty(s)?c!=null&&s==="onScroll"&&jr("scroll",e):c!=null&&p1(e,s,c,a))}switch(n){case"input":Gf(e),mk(e,r,!1);break;case"textarea":Gf(e),yk(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ml(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Eu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Eu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Nm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ri(t),null;case 6:if(e&&t.stateNode!=null)T3(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pt(166));if(n=Ql(qd.current),Ql(io.current),tp(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xa]=t,(s=r.nodeValue!==n)&&(e=Ns,e!==null))switch(e.tag){case 3:ep(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ep(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xa]=t,t.stateNode=r}return Ri(t),null;case 13:if(Nr(Br),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ir&&js!==null&&t.mode&1&&!(t.flags&128))VA(),Fu(),t.flags|=98560,s=!1;else if(s=tp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Pt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pt(317));s[Xa]=t}else Fu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ri(t),s=!1}else xa!==null&&(Vv(xa),xa=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Br.current&1?di===0&&(di=3):K1())),t.updateQueue!==null&&(t.flags|=4),Ri(t),null);case 4:return Uu(),$v(e,t),e===null&&Hd(t.stateNode.containerInfo),Ri(t),null;case 10:return R1(t.type._context),Ri(t),null;case 17:return fs(t.type)&&Om(),Ri(t),null;case 19:if(Nr(Br),s=t.memoizedState,s===null)return Ri(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Rh(s,!1);else{if(di!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zm(e),a!==null){for(t.flags|=128,Rh(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Br,Br.current&1|2),t.child}e=e.sibling}s.tail!==null&&ei()>Wu&&(t.flags|=128,r=!0,Rh(s,!1),t.lanes=4194304)}else{if(!r)if(e=zm(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ir)return Ri(t),null}else 2*ei()-s.renderingStartTime>Wu&&n!==1073741824&&(t.flags|=128,r=!0,Rh(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ei(),t.sibling=null,n=Br.current,Cr(Br,r?n&1|2:n&1),t):(Ri(t),null);case 22:case 23:return X1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_s&1073741824&&(Ri(t),t.subtreeFlags&6&&(t.flags|=8192)):Ri(t),null;case 24:return null;case 25:return null}throw Error(Pt(156,t.tag))}function u$(e,t){switch(A1(t),t.tag){case 1:return fs(t.type)&&Om(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Uu(),Nr(ds),Nr(Fi),D1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $1(t),null;case 13:if(Nr(Br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pt(340));Fu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nr(Br),null;case 4:return Uu(),null;case 10:return R1(t.type._context),null;case 22:case 23:return X1(),null;case 24:return null;default:return null}}var ip=!1,Di=!1,h$=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function vu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xr(e,t,r)}else n.current=null}function Dv(e,t,n){try{n()}catch(r){Xr(e,t,r)}}var aS=!1;function d$(e,t){if(wv=jm,e=OA(),T1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,h=0,d=0,p=e,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++h===i&&(o=a),m===s&&++d===r&&(c=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_v={focusedElem:e,selectionRange:n},jm=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,x=t.stateNode,k=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:fa(t.type,w),C);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(j){Xr(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return v=aS,aS=!1,v}function kd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Dv(t,n,s)}i=i.next}while(i!==r)}}function Ug(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function zv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function j3(e){var t=e.alternate;t!==null&&(e.alternate=null,j3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xa],delete t[Vd],delete t[Cv],delete t[Y8],delete t[X8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function A3(e){return e.tag===5||e.tag===3||e.tag===4}function oS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||A3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nm));else if(r!==4&&(e=e.child,e!==null))for(Fv(e,t,n),e=e.sibling;e!==null;)Fv(e,t,n),e=e.sibling}function Bv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bv(e,t,n),e=e.sibling;e!==null;)Bv(e,t,n),e=e.sibling}var ki=null,ya=!1;function zo(e,t,n){for(n=n.child;n!==null;)P3(e,t,n),n=n.sibling}function P3(e,t,n){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(Mg,n)}catch{}switch(n.tag){case 5:Di||vu(n,t);case 6:var r=ki,i=ya;ki=null,zo(e,t,n),ki=r,ya=i,ki!==null&&(ya?(e=ki,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ki.removeChild(n.stateNode));break;case 18:ki!==null&&(ya?(e=ki,n=n.stateNode,e.nodeType===8?ty(e.parentNode,n):e.nodeType===1&&ty(e,n),Fd(e)):ty(ki,n.stateNode));break;case 4:r=ki,i=ya,ki=n.stateNode.containerInfo,ya=!0,zo(e,t,n),ki=r,ya=i;break;case 0:case 11:case 14:case 15:if(!Di&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Dv(n,t,a),i=i.next}while(i!==r)}zo(e,t,n);break;case 1:if(!Di&&(vu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Xr(n,t,o)}zo(e,t,n);break;case 21:zo(e,t,n);break;case 22:n.mode&1?(Di=(r=Di)||n.memoizedState!==null,zo(e,t,n),Di=r):zo(e,t,n);break;default:zo(e,t,n)}}function lS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new h$),t.forEach(function(r){var i=w$.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function aa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:ki=o.stateNode,ya=!1;break e;case 3:ki=o.stateNode.containerInfo,ya=!0;break e;case 4:ki=o.stateNode.containerInfo,ya=!0;break e}o=o.return}if(ki===null)throw Error(Pt(160));P3(s,a,i),ki=null,ya=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Xr(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)N3(t,e),t=t.sibling}function N3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(aa(t,e),Fa(e),r&4){try{kd(3,e,e.return),Ug(3,e)}catch(w){Xr(e,e.return,w)}try{kd(5,e,e.return)}catch(w){Xr(e,e.return,w)}}break;case 1:aa(t,e),Fa(e),r&512&&n!==null&&vu(n,n.return);break;case 5:if(aa(t,e),Fa(e),r&512&&n!==null&&vu(n,n.return),e.flags&32){var i=e.stateNode;try{Id(i,"")}catch(w){Xr(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Jj(i,s),hv(o,a);var h=hv(o,s);for(a=0;a<c.length;a+=2){var d=c[a],p=c[a+1];d==="style"?iA(i,p):d==="dangerouslySetInnerHTML"?nA(i,p):d==="children"?Id(i,p):p1(i,d,p,h)}switch(o){case"input":av(i,s);break;case"textarea":eA(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Eu(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Eu(i,!!s.multiple,s.defaultValue,!0):Eu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vd]=s}catch(w){Xr(e,e.return,w)}}break;case 6:if(aa(t,e),Fa(e),r&4){if(e.stateNode===null)throw Error(Pt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(w){Xr(e,e.return,w)}}break;case 3:if(aa(t,e),Fa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fd(t.containerInfo)}catch(w){Xr(e,e.return,w)}break;case 4:aa(t,e),Fa(e);break;case 13:aa(t,e),Fa(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(q1=ei())),r&4&&lS(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Di=(h=Di)||d,aa(t,e),Di=h):aa(t,e),Fa(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!d&&e.mode&1)for(Vt=e,d=e.child;d!==null;){for(p=Vt=d;Vt!==null;){switch(m=Vt,g=m.child,m.tag){case 0:case 11:case 14:case 15:kd(4,m,m.return);break;case 1:vu(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){Xr(r,n,w)}}break;case 5:vu(m,m.return);break;case 22:if(m.memoizedState!==null){uS(p);continue}}g!==null?(g.return=m,Vt=g):uS(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=rA("display",a))}catch(w){Xr(e,e.return,w)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(w){Xr(e,e.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:aa(t,e),Fa(e),r&4&&lS(e);break;case 21:break;default:aa(t,e),Fa(e)}}function Fa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(A3(n)){var r=n;break e}n=n.return}throw Error(Pt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Id(i,""),r.flags&=-33);var s=oS(e);Bv(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=oS(e);Fv(e,o,a);break;default:throw Error(Pt(161))}}catch(c){Xr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function f$(e,t,n){Vt=e,O3(e)}function O3(e,t,n){for(var r=(e.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ip;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Di;o=ip;var h=Di;if(ip=a,(Di=c)&&!h)for(Vt=i;Vt!==null;)a=Vt,c=a.child,a.tag===22&&a.memoizedState!==null?hS(i):c!==null?(c.return=a,Vt=c):hS(i);for(;s!==null;)Vt=s,O3(s),s=s.sibling;Vt=i,ip=o,Di=h}cS(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):cS(e)}}function cS(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Di||Ug(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Di)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:fa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&qk(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qk(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Fd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Di||t.flags&512&&zv(t)}catch(m){Xr(t,t.return,m)}}if(t===e){Vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function uS(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function hS(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ug(4,t)}catch(c){Xr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Xr(t,i,c)}}var s=t.return;try{zv(t)}catch(c){Xr(t,s,c)}break;case 5:var a=t.return;try{zv(t)}catch(c){Xr(t,a,c)}}}catch(c){Xr(t,t.return,c)}if(t===e){Vt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Vt=o;break}Vt=t.return}}var p$=Math.ceil,Um=Oo.ReactCurrentDispatcher,V1=Oo.ReactCurrentOwner,Ys=Oo.ReactCurrentBatchConfig,Wn=0,wi=null,si=null,Ei=0,_s=0,xu=kl(0),di=0,Zd=null,cc=0,Hg=0,G1=0,Sd=null,us=null,q1=0,Wu=1/0,mo=null,Hm=!1,Uv=null,dl=null,sp=!1,il=null,Wm=0,Cd=0,Hv=null,am=-1,om=0;function Ki(){return Wn&6?ei():am!==-1?am:am=ei()}function fl(e){return e.mode&1?Wn&2&&Ei!==0?Ei&-Ei:Z8.transition!==null?(om===0&&(om=gA()),om):(e=ir,e!==0||(e=window.event,e=e===void 0?16:kA(e.type)),e):1}function Sa(e,t,n,r){if(50<Cd)throw Cd=0,Hv=null,Error(Pt(185));gf(e,n,r),(!(Wn&2)||e!==wi)&&(e===wi&&(!(Wn&2)&&(Hg|=n),di===4&&Qo(e,Ei)),ps(e,r),n===1&&Wn===0&&!(t.mode&1)&&(Wu=ei()+500,zg&&Sl()))}function ps(e,t){var n=e.callbackNode;ZI(e,t);var r=Tm(e,e===wi?Ei:0);if(r===0)n!==null&&xk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xk(n),t===1)e.tag===0?K8(dS.bind(null,e)):UA(dS.bind(null,e)),G8(function(){!(Wn&6)&&Sl()}),n=null;else{switch(yA(r)){case 1:n=v1;break;case 4:n=pA;break;case 16:n=Em;break;case 536870912:n=mA;break;default:n=Em}n=F3(n,R3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function R3(e,t){if(am=-1,om=0,Wn&6)throw Error(Pt(327));var n=e.callbackNode;if(Nu()&&e.callbackNode!==n)return null;var r=Tm(e,e===wi?Ei:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vm(e,r);else{t=r;var i=Wn;Wn|=2;var s=L3();(wi!==e||Ei!==t)&&(mo=null,Wu=ei()+500,tc(e,t));do try{y$();break}catch(o){M3(e,o)}while(!0);O1(),Um.current=s,Wn=i,si!==null?t=0:(wi=null,Ei=0,t=di)}if(t!==0){if(t===2&&(i=gv(e),i!==0&&(r=i,t=Wv(e,i))),t===1)throw n=Zd,tc(e,0),Qo(e,r),ps(e,ei()),n;if(t===6)Qo(e,r);else{if(i=e.current.alternate,!(r&30)&&!m$(i)&&(t=Vm(e,r),t===2&&(s=gv(e),s!==0&&(r=s,t=Wv(e,s))),t===1))throw n=Zd,tc(e,0),Qo(e,r),ps(e,ei()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Pt(345));case 2:zl(e,us,mo);break;case 3:if(Qo(e,r),(r&130023424)===r&&(t=q1+500-ei(),10<t)){if(Tm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ki(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Sv(zl.bind(null,e,us,mo),t);break}zl(e,us,mo);break;case 4:if(Qo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ka(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=ei()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*p$(r/1960))-r,10<r){e.timeoutHandle=Sv(zl.bind(null,e,us,mo),r);break}zl(e,us,mo);break;case 5:zl(e,us,mo);break;default:throw Error(Pt(329))}}}return ps(e,ei()),e.callbackNode===n?R3.bind(null,e):null}function Wv(e,t){var n=Sd;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),e=Vm(e,t),e!==2&&(t=us,us=n,t!==null&&Vv(t)),e}function Vv(e){us===null?us=e:us.push.apply(us,e)}function m$(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ja(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~G1,t&=~Hg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ka(t),r=1<<n;e[n]=-1,t&=~r}}function dS(e){if(Wn&6)throw Error(Pt(327));Nu();var t=Tm(e,0);if(!(t&1))return ps(e,ei()),null;var n=Vm(e,t);if(e.tag!==0&&n===2){var r=gv(e);r!==0&&(t=r,n=Wv(e,r))}if(n===1)throw n=Zd,tc(e,0),Qo(e,t),ps(e,ei()),n;if(n===6)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zl(e,us,mo),ps(e,ei()),null}function Y1(e,t){var n=Wn;Wn|=1;try{return e(t)}finally{Wn=n,Wn===0&&(Wu=ei()+500,zg&&Sl())}}function uc(e){il!==null&&il.tag===0&&!(Wn&6)&&Nu();var t=Wn;Wn|=1;var n=Ys.transition,r=ir;try{if(Ys.transition=null,ir=1,e)return e()}finally{ir=r,Ys.transition=n,Wn=t,!(Wn&6)&&Sl()}}function X1(){_s=xu.current,Nr(xu)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,V8(n)),si!==null)for(n=si.return;n!==null;){var r=n;switch(A1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Om();break;case 3:Uu(),Nr(ds),Nr(Fi),D1();break;case 5:$1(r);break;case 4:Uu();break;case 13:Nr(Br);break;case 19:Nr(Br);break;case 10:R1(r.type._context);break;case 22:case 23:X1()}n=n.return}if(wi=e,si=e=pl(e.current,null),Ei=_s=t,di=0,Zd=null,G1=Hg=cc=0,us=Sd=null,Zl!==null){for(t=0;t<Zl.length;t++)if(n=Zl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Zl=null}return e}function M3(e,t){do{var n=si;try{if(O1(),rm.current=Bm,Fm){for(var r=Ur.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fm=!1}if(lc=0,vi=ci=Ur=null,_d=!1,Yd=0,V1.current=null,n===null||n.return===null){di=1,Zd=t,si=null;break}e:{var s=e,a=n.return,o=n,c=t;if(t=Ei,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Jk(a);if(g!==null){g.flags&=-257,eS(g,a,o,s,t),g.mode&1&&Qk(s,h,t),t=g,c=h;var v=t.updateQueue;if(v===null){var w=new Set;w.add(c),t.updateQueue=w}else v.add(c);break e}else{if(!(t&1)){Qk(s,h,t),K1();break e}c=Error(Pt(426))}}else if(Ir&&o.mode&1){var C=Jk(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),eS(C,a,o,s,t),P1(Hu(c,o));break e}}s=c=Hu(c,o),di!==4&&(di=2),Sd===null?Sd=[s]:Sd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=y3(s,c,t);Gk(s,x);break e;case 1:o=c;var k=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(dl===null||!dl.has(P)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=b3(s,o,t);Gk(s,j);break e}}s=s.return}while(s!==null)}$3(n)}catch(M){t=M,si===n&&n!==null&&(si=n=n.return);continue}break}while(!0)}function L3(){var e=Um.current;return Um.current=Bm,e===null?Bm:e}function K1(){(di===0||di===3||di===2)&&(di=4),wi===null||!(cc&268435455)&&!(Hg&268435455)||Qo(wi,Ei)}function Vm(e,t){var n=Wn;Wn|=2;var r=L3();(wi!==e||Ei!==t)&&(mo=null,tc(e,t));do try{g$();break}catch(i){M3(e,i)}while(!0);if(O1(),Wn=n,Um.current=r,si!==null)throw Error(Pt(261));return wi=null,Ei=0,di}function g$(){for(;si!==null;)I3(si)}function y$(){for(;si!==null&&!UI();)I3(si)}function I3(e){var t=z3(e.alternate,e,_s);e.memoizedProps=e.pendingProps,t===null?$3(e):si=t,V1.current=null}function $3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=u$(n,t),n!==null){n.flags&=32767,si=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{di=6,si=null;return}}else if(n=c$(n,t,_s),n!==null){si=n;return}if(t=t.sibling,t!==null){si=t;return}si=t=e}while(t!==null);di===0&&(di=5)}function zl(e,t,n){var r=ir,i=Ys.transition;try{Ys.transition=null,ir=1,b$(e,t,n,r)}finally{Ys.transition=i,ir=r}return null}function b$(e,t,n,r){do Nu();while(il!==null);if(Wn&6)throw Error(Pt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(QI(e,s),e===wi&&(si=wi=null,Ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sp||(sp=!0,F3(Em,function(){return Nu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ys.transition,Ys.transition=null;var a=ir;ir=1;var o=Wn;Wn|=4,V1.current=null,d$(e,n),N3(n,e),D8(_v),jm=!!wv,_v=wv=null,e.current=n,f$(n),HI(),Wn=o,ir=a,Ys.transition=s}else e.current=n;if(sp&&(sp=!1,il=e,Wm=i),s=e.pendingLanes,s===0&&(dl=null),GI(n.stateNode),ps(e,ei()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hm)throw Hm=!1,e=Uv,Uv=null,e;return Wm&1&&e.tag!==0&&Nu(),s=e.pendingLanes,s&1?e===Hv?Cd++:(Cd=0,Hv=e):Cd=0,Sl(),null}function Nu(){if(il!==null){var e=yA(Wm),t=Ys.transition,n=ir;try{if(Ys.transition=null,ir=16>e?16:e,il===null)var r=!1;else{if(e=il,il=null,Wm=0,Wn&6)throw Error(Pt(331));var i=Wn;for(Wn|=4,Vt=e.current;Vt!==null;){var s=Vt,a=s.child;if(Vt.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(Vt=h;Vt!==null;){var d=Vt;switch(d.tag){case 0:case 11:case 15:kd(8,d,s)}var p=d.child;if(p!==null)p.return=d,Vt=p;else for(;Vt!==null;){d=Vt;var m=d.sibling,g=d.return;if(j3(d),d===h){Vt=null;break}if(m!==null){m.return=g,Vt=m;break}Vt=g}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}Vt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Vt=a;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kd(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Vt=x;break e}Vt=s.return}}var k=e.current;for(Vt=k;Vt!==null;){a=Vt;var P=a.child;if(a.subtreeFlags&2064&&P!==null)P.return=a,Vt=P;else e:for(a=k;Vt!==null;){if(o=Vt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ug(9,o)}}catch(M){Xr(o,o.return,M)}if(o===a){Vt=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,Vt=j;break e}Vt=o.return}}if(Wn=i,Sl(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(Mg,e)}catch{}r=!0}return r}finally{ir=n,Ys.transition=t}}return!1}function fS(e,t,n){t=Hu(n,t),t=y3(e,t,1),e=hl(e,t,1),t=Ki(),e!==null&&(gf(e,1,t),ps(e,t))}function Xr(e,t,n){if(e.tag===3)fS(e,e,n);else for(;t!==null;){if(t.tag===3){fS(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dl===null||!dl.has(r))){e=Hu(n,e),e=b3(t,e,1),t=hl(t,e,1),e=Ki(),t!==null&&(gf(t,1,e),ps(t,e));break}}t=t.return}}function v$(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ki(),e.pingedLanes|=e.suspendedLanes&n,wi===e&&(Ei&n)===n&&(di===4||di===3&&(Ei&130023424)===Ei&&500>ei()-q1?tc(e,0):G1|=n),ps(e,t)}function D3(e,t){t===0&&(e.mode&1?(t=Xf,Xf<<=1,!(Xf&130023424)&&(Xf=4194304)):t=1);var n=Ki();e=To(e,t),e!==null&&(gf(e,t,n),ps(e,n))}function x$(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),D3(e,n)}function w$(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pt(314))}r!==null&&r.delete(t),D3(e,n)}var z3;z3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ds.current)hs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return hs=!1,l$(e,t,n);hs=!!(e.flags&131072)}else hs=!1,Ir&&t.flags&1048576&&HA(t,Lm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sm(e,t),e=t.pendingProps;var i=zu(t,Fi.current);Pu(t,n),i=F1(null,t,r,e,i,n);var s=B1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fs(r)?(s=!0,Rm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,L1(t),i.updater=Bg,t.stateNode=i,i._reactInternals=t,Nv(t,r,e,n),t=Mv(null,t,r,!0,s,n)):(t.tag=0,Ir&&s&&j1(t),qi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sm(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=k$(r),e=fa(r,e),i){case 0:t=Rv(null,t,r,e,n);break e;case 1:t=rS(null,t,r,e,n);break e;case 11:t=tS(null,t,r,e,n);break e;case 14:t=nS(null,t,r,fa(r.type,e),n);break e}throw Error(Pt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),Rv(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),rS(e,t,r,i,n);case 3:e:{if(_3(t),e===null)throw Error(Pt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,XA(e,t),Dm(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Hu(Error(Pt(423)),t),t=iS(e,t,r,n,i);break e}else if(r!==i){i=Hu(Error(Pt(424)),t),t=iS(e,t,r,n,i);break e}else for(js=ul(t.stateNode.containerInfo.firstChild),Ns=t,Ir=!0,xa=null,n=qA(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fu(),r===i){t=jo(e,t,n);break e}qi(e,t,r,n)}t=t.child}return t;case 5:return KA(t),e===null&&jv(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,kv(r,i)?a=null:s!==null&&kv(r,s)&&(t.flags|=32),w3(e,t),qi(e,t,a,n),t.child;case 6:return e===null&&jv(t),null;case 13:return k3(e,t,n);case 4:return I1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Bu(t,null,r,n):qi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),tS(e,t,r,i,n);case 7:return qi(e,t,t.pendingProps,n),t.child;case 8:return qi(e,t,t.pendingProps.children,n),t.child;case 12:return qi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Cr(Im,r._currentValue),r._currentValue=a,s!==null)if(ja(s.value,a)){if(s.children===i.children&&!ds.current){t=jo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=_o(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Av(s.return,n,t),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Pt(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Av(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}qi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Pu(t,n),i=Ks(i),r=r(i),t.flags|=1,qi(e,t,r,n),t.child;case 14:return r=t.type,i=fa(r,t.pendingProps),i=fa(r.type,i),nS(e,t,r,i,n);case 15:return v3(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),sm(e,t),t.tag=1,fs(r)?(e=!0,Rm(t)):e=!1,Pu(t,n),g3(t,r,i),Nv(t,r,i,n),Mv(null,t,r,!0,e,n);case 19:return S3(e,t,n);case 22:return x3(e,t,n)}throw Error(Pt(156,t.tag))};function F3(e,t){return fA(e,t)}function _$(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(e,t,n,r){return new _$(e,t,n,r)}function Z1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k$(e){if(typeof e=="function")return Z1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g1)return 11;if(e===y1)return 14}return 2}function pl(e,t){var n=e.alternate;return n===null?(n=Gs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function lm(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Z1(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case uu:return nc(n.children,i,s,t);case m1:a=8,i|=8;break;case tv:return e=Gs(12,n,t,i|2),e.elementType=tv,e.lanes=s,e;case nv:return e=Gs(13,n,t,i),e.elementType=nv,e.lanes=s,e;case rv:return e=Gs(19,n,t,i),e.elementType=rv,e.lanes=s,e;case Kj:return Wg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yj:a=10;break e;case Xj:a=9;break e;case g1:a=11;break e;case y1:a=14;break e;case qo:a=16,r=null;break e}throw Error(Pt(130,e==null?e:typeof e,""))}return t=Gs(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function nc(e,t,n,r){return e=Gs(7,e,r,t),e.lanes=n,e}function Wg(e,t,n,r){return e=Gs(22,e,r,t),e.elementType=Kj,e.lanes=n,e.stateNode={isHidden:!1},e}function cy(e,t,n){return e=Gs(6,e,null,t),e.lanes=n,e}function uy(e,t,n){return t=Gs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S$(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W0(0),this.expirationTimes=W0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Q1(e,t,n,r,i,s,a,o,c){return e=new S$(e,t,n,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Gs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},L1(s),e}function C$(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function B3(e){if(!e)return gl;e=e._reactInternals;e:{if(gc(e)!==e||e.tag!==1)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pt(171))}if(e.tag===1){var n=e.type;if(fs(n))return BA(e,n,t)}return t}function U3(e,t,n,r,i,s,a,o,c){return e=Q1(n,r,!0,e,i,s,a,o,c),e.context=B3(null),n=e.current,r=Ki(),i=fl(n),s=_o(r,i),s.callback=t??null,hl(n,s,i),e.current.lanes=i,gf(e,i,r),ps(e,r),e}function Vg(e,t,n,r){var i=t.current,s=Ki(),a=fl(i);return n=B3(n),t.context===null?t.context=n:t.pendingContext=n,t=_o(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hl(i,t,a),e!==null&&(Sa(e,i,a,s),nm(e,i,a)),a}function Gm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function J1(e,t){pS(e,t),(e=e.alternate)&&pS(e,t)}function E$(){return null}var H3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ew(e){this._internalRoot=e}Gg.prototype.render=ew.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pt(409));Vg(e,t,null,null)};Gg.prototype.unmount=ew.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vg(null,e,null,null)}),t[Eo]=null}};function Gg(e){this._internalRoot=e}Gg.prototype.unstable_scheduleHydration=function(e){if(e){var t=xA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zo.length&&t!==0&&t<Zo[n].priority;n++);Zo.splice(n,0,e),n===0&&_A(e)}};function tw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mS(){}function T$(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Gm(a);s.call(h)}}var a=U3(t,r,e,0,null,!1,!1,"",mS);return e._reactRootContainer=a,e[Eo]=a.current,Hd(e.nodeType===8?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var h=Gm(c);o.call(h)}}var c=Q1(e,0,!1,null,null,!1,!1,"",mS);return e._reactRootContainer=c,e[Eo]=c.current,Hd(e.nodeType===8?e.parentNode:e),uc(function(){Vg(t,c,n,r)}),c}function Yg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Gm(a);o.call(c)}}Vg(t,a,e,i)}else a=T$(n,t,e,i,r);return Gm(a)}bA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zh(t.pendingLanes);n!==0&&(x1(t,n|1),ps(t,ei()),!(Wn&6)&&(Wu=ei()+500,Sl()))}break;case 13:uc(function(){var r=To(e,1);if(r!==null){var i=Ki();Sa(r,e,1,i)}}),J1(e,1)}};w1=function(e){if(e.tag===13){var t=To(e,134217728);if(t!==null){var n=Ki();Sa(t,e,134217728,n)}J1(e,134217728)}};vA=function(e){if(e.tag===13){var t=fl(e),n=To(e,t);if(n!==null){var r=Ki();Sa(n,e,t,r)}J1(e,t)}};xA=function(){return ir};wA=function(e,t){var n=ir;try{return ir=e,t()}finally{ir=n}};fv=function(e,t,n){switch(t){case"input":if(av(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Dg(r);if(!i)throw Error(Pt(90));Qj(r),av(r,i)}}}break;case"textarea":eA(e,n);break;case"select":t=n.value,t!=null&&Eu(e,!!n.multiple,t,!1)}};oA=Y1;lA=uc;var j$={usingClientEntryPoint:!1,Events:[bf,pu,Dg,sA,aA,Y1]},Mh={findFiberByHostInstance:Kl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A$={bundleType:Mh.bundleType,version:Mh.version,rendererPackageName:Mh.rendererPackageName,rendererConfig:Mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hA(e),e===null?null:e.stateNode},findFiberByHostInstance:Mh.findFiberByHostInstance||E$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ap.isDisabled&&ap.supportsFiber)try{Mg=ap.inject(A$),ro=ap}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j$;Ms.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tw(t))throw Error(Pt(200));return C$(e,t,null,n)};Ms.createRoot=function(e,t){if(!tw(e))throw Error(Pt(299));var n=!1,r="",i=H3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Q1(e,1,!1,null,null,n,!1,r,i),e[Eo]=t.current,Hd(e.nodeType===8?e.parentNode:e),new ew(t)};Ms.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pt(188)):(e=Object.keys(e).join(","),Error(Pt(268,e)));return e=hA(t),e=e===null?null:e.stateNode,e};Ms.flushSync=function(e){return uc(e)};Ms.hydrate=function(e,t,n){if(!qg(t))throw Error(Pt(200));return Yg(null,e,t,!0,n)};Ms.hydrateRoot=function(e,t,n){if(!tw(e))throw Error(Pt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=H3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=U3(t,null,e,1,n??null,i,!1,s,a),e[Eo]=t.current,Hd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gg(t)};Ms.render=function(e,t,n){if(!qg(t))throw Error(Pt(200));return Yg(null,e,t,!1,n)};Ms.unmountComponentAtNode=function(e){if(!qg(e))throw Error(Pt(40));return e._reactRootContainer?(uc(function(){Yg(null,null,e,!1,function(){e._reactRootContainer=null,e[Eo]=null})}),!0):!1};Ms.unstable_batchedUpdates=Y1;Ms.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qg(n))throw Error(Pt(200));if(e==null||e._reactInternals===void 0)throw Error(Pt(38));return Yg(e,t,n,!1,r)};Ms.version="18.3.1-next-f1338f8080-20240426";function W3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W3)}catch(e){console.error(e)}}W3(),Wj.exports=Ms;var P$=Wj.exports,gS=P$;Jb.createRoot=gS.createRoot,Jb.hydrateRoot=gS.hydrateRoot;var Gv=function(e,t){return Gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Gv(e,t)};function V3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var qm=function(){return qm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},qm.apply(this,arguments)};function ah(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function G3(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function q3(e,t){return function(n,r){t(n,r,e)}}function Y3(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,c=o==="getter"?"get":o==="setter"?"set":"value",h=!t&&e?r.static?e:e.prototype:null,d=t||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),p,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var C=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[c],v);if(o==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(p=a(C.get))&&(d.get=p),(p=a(C.set))&&(d.set=p),(p=a(C.init))&&i.unshift(p)}else(p=a(C))&&(o==="field"?i.unshift(p):d[c]=p)}h&&Object.defineProperty(h,r.name,d),m=!0}function X3(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function K3(e){return typeof e=="symbol"?e:"".concat(e)}function Z3(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Q3(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Yt(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{h(r.next(d))}catch(p){a(p)}}function c(d){try{h(r.throw(d))}catch(p){a(p)}}function h(d){d.done?s(d.value):i(d.value).then(o,c)}h((r=r.apply(e,t||[])).next())})}function J3(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(d){return c([h,d])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Xg=Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function eP(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Xg(t,e,n)}function Ym(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nw(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function tP(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nw(arguments[t]));return e}function nP(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}function rP(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Vu(e){return this instanceof Vu?(this.v=e,this):new Vu(e)}function iP(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(v){return Promise.resolve(v).then(g,p)}}function o(g,v){r[g]&&(i[g]=function(w){return new Promise(function(C,x){s.push([g,w,C,x])>1||c(g,w)})},v&&(i[g]=v(i[g])))}function c(g,v){try{h(r[g](v))}catch(w){m(s[0][3],w)}}function h(g){g.value instanceof Vu?Promise.resolve(g.value.v).then(d,p):m(s[0][2],g)}function d(g){c("next",g)}function p(g){c("throw",g)}function m(g,v){g(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function sP(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(a){return(n=!n)?{value:Vu(e[i](a)),done:!1}:s?s(a):a}:s}}function aP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ym=="function"?Ym(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(o,c){a=e[s](a),i(o,c,a.done,a.value)})}}function i(s,a,o,c){Promise.resolve(c).then(function(h){s({value:h,done:o})},a)}}function oP(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N$=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},qv=function(e){return qv=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},qv(e)};function lP(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=qv(e),r=0;r<n.length;r++)n[r]!=="default"&&Xg(t,e,n[r]);return N$(t,e),t}function cP(e){return e&&e.__esModule?e:{default:e}}function uP(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function hP(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function dP(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function fP(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var O$=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function pP(e){function t(s){e.error=e.hasError?new O$(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return t(a),i()})}else r|=1}catch(a){t(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function mP(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?t?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):e}const R$={__extends:V3,__assign:qm,__rest:ah,__decorate:G3,__param:q3,__esDecorate:Y3,__runInitializers:X3,__propKey:K3,__setFunctionName:Z3,__metadata:Q3,__awaiter:Yt,__generator:J3,__createBinding:Xg,__exportStar:eP,__values:Ym,__read:nw,__spread:tP,__spreadArrays:nP,__spreadArray:rP,__await:Vu,__asyncGenerator:iP,__asyncDelegator:sP,__asyncValues:aP,__makeTemplateObject:oP,__importStar:lP,__importDefault:cP,__classPrivateFieldGet:uP,__classPrivateFieldSet:hP,__classPrivateFieldIn:dP,__addDisposableResource:fP,__disposeResources:pP,__rewriteRelativeImportExtension:mP},M$=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:fP,get __assign(){return qm},__asyncDelegator:sP,__asyncGenerator:iP,__asyncValues:aP,__await:Vu,__awaiter:Yt,__classPrivateFieldGet:uP,__classPrivateFieldIn:dP,__classPrivateFieldSet:hP,__createBinding:Xg,__decorate:G3,__disposeResources:pP,__esDecorate:Y3,__exportStar:eP,__extends:V3,__generator:J3,__importDefault:cP,__importStar:lP,__makeTemplateObject:oP,__metadata:Q3,__param:q3,__propKey:K3,__read:nw,__rest:ah,__rewriteRelativeImportExtension:mP,__runInitializers:X3,__setFunctionName:Z3,__spread:tP,__spreadArray:rP,__spreadArrays:nP,__values:Ym,default:R$},Symbol.toStringTag,{value:"Module"})),L$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class rw extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class yS extends rw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class bS extends rw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class vS extends rw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yv||(Yv={}));class I${constructor(t,{headers:n={},customFetch:r,region:i=Yv.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=L$(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Yt(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:o,signal:c}=r;let h={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(h["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let m;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=o):typeof o=="string"?(h["Content-Type"]="text/plain",m=o):typeof FormData<"u"&&o instanceof FormData?m=o:(h["Content-Type"]="application/json",m=JSON.stringify(o)):m=o;const g=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:m,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new yS(x)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new bS(g);if(!g.ok)throw new vS(g);let w=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return w==="application/json"?C=yield g.json():w==="application/octet-stream"||w==="application/pdf"?C=yield g.blob():w==="text/event-stream"?C=g:w==="multipart/form-data"?C=yield g.formData():C=yield g.text(),{data:C,error:null,response:g}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new yS(s)}:{data:null,error:s,response:s instanceof vS||s instanceof bS?s.context:void 0}}})}}var Yi={};const oh=Oj(M$);var op={},lp={},cp={},up={},hp={},dp={},xS;function gP(){if(xS)return dp;xS=1,Object.defineProperty(dp,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return dp.default=e,dp}var wS;function yP(){if(wS)return hp;wS=1,Object.defineProperty(hp,"__esModule",{value:!0});const t=oh.__importDefault(gP());class n{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var h,d,p,m;let g=null,v=null,w=null,C=c.status,x=c.statusText;if(c.ok){if(this.method!=="HEAD"){const M=await c.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?v=M:v=JSON.parse(M))}const P=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),j=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");P&&j&&j.length>1&&(w=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,C=406,x="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const P=await c.text();try{g=JSON.parse(P),Array.isArray(g)&&c.status===404&&(v=[],g=null,C=200,x="OK")}catch{c.status===404&&P===""?(C=204,x="No Content"):g={message:P}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,C=200,x="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:v,count:w,status:C,statusText:x}});return this.shouldThrowOnError||(o=o.catch(c=>{var h,d,p;return{error:{message:`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(p=c==null?void 0:c.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}}return hp.default=n,hp}var _S;function bP(){if(_S)return up;_S=1,Object.defineProperty(up,"__esModule",{value:!0});const t=oh.__importDefault(yP());class n extends t.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const h=c?`${c}.order`:"order",d=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:h="text"}={}){var d;const p=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${m}"; options=${p};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return up.default=n,up}var kS;function iw(){if(kS)return cp;kS=1,Object.defineProperty(cp,"__esModule",{value:!0});const t=oh.__importDefault(bP()),n=new RegExp("[,()]");class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:c}={}){let h="";c==="plain"?h="pl":c==="phrase"?h="ph":c==="websearch"&&(h="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${h}fts${d}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}}return cp.default=r,cp}var SS;function vP(){if(SS)return lp;SS=1,Object.defineProperty(lp,"__esModule",{value:!0});const t=oh.__importDefault(iw());class n{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(i,s){const{head:a=!1,count:o}=s??{},c=a?"HEAD":"GET";let h=!1;const d=(i??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var o;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(h.length>0){const d=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){var h;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(i,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return lp.default=n,lp}var CS;function $$(){if(CS)return op;CS=1,Object.defineProperty(op,"__esModule",{value:!0});const e=oh,t=e.__importDefault(vP()),n=e.__importDefault(iw());class r{constructor(s,{headers:a={},schema:o,fetch:c}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=c}from(s){const a=new URL(`${this.url}/${s}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:c=!1,count:h}={}){var d;let p;const m=new URL(`${this.url}/rpc/${s}`);let g;o||c?(p=o?"HEAD":"GET",Object.entries(a).filter(([w,C])=>C!==void 0).map(([w,C])=>[w,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([w,C])=>{m.searchParams.append(w,C)})):(p="POST",g=a);const v=new Headers(this.headers);return h&&v.set("Prefer",`count=${h}`),new n.default({method:p,url:m,headers:v,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return op.default=r,op}Object.defineProperty(Yi,"__esModule",{value:!0});var xP=Yi.PostgrestError=PP=Yi.PostgrestBuilder=jP=Yi.PostgrestTransformBuilder=EP=Yi.PostgrestFilterBuilder=SP=Yi.PostgrestQueryBuilder=_P=Yi.PostgrestClient=void 0;const lh=oh,wP=lh.__importDefault($$());var _P=Yi.PostgrestClient=wP.default;const kP=lh.__importDefault(vP());var SP=Yi.PostgrestQueryBuilder=kP.default;const CP=lh.__importDefault(iw());var EP=Yi.PostgrestFilterBuilder=CP.default;const TP=lh.__importDefault(bP());var jP=Yi.PostgrestTransformBuilder=TP.default;const AP=lh.__importDefault(yP());var PP=Yi.PostgrestBuilder=AP.default;const NP=lh.__importDefault(gP());xP=Yi.PostgrestError=NP.default;var OP=Yi.default={PostgrestClient:wP.default,PostgrestQueryBuilder:kP.default,PostgrestFilterBuilder:CP.default,PostgrestTransformBuilder:TP.default,PostgrestBuilder:AP.default,PostgrestError:NP.default};const D$=iI({__proto__:null,get PostgrestBuilder(){return PP},get PostgrestClient(){return _P},get PostgrestError(){return xP},get PostgrestFilterBuilder(){return EP},get PostgrestQueryBuilder(){return SP},get PostgrestTransformBuilder(){return jP},default:OP},[Yi]),{PostgrestClient:z$,PostgrestQueryBuilder:Q5e,PostgrestFilterBuilder:J5e,PostgrestTransformBuilder:eje,PostgrestBuilder:tje,PostgrestError:nje}=OP||D$;class F${static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const B$="2.79.0",U$=`realtime-js/${B$}`,H$="1.0.0",Xv=1e4,W$=1e3,V$=100;var Ed;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ed||(Ed={}));var oi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(oi||(oi={}));var ba;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ba||(ba={}));var Kv;(function(e){e.websocket="websocket"})(Kv||(Kv={}));var Gl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Gl||(Gl={}));class G${constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const h=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:c,payload:h}}}class RP{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xr||(xr={}));const ES=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=q$(a,e,t,i),s),{}):{}},q$=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?MP(s,a):Zv(a)},MP=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Z$(t,n)}switch(e){case xr.bool:return Y$(t);case xr.float4:case xr.float8:case xr.int2:case xr.int4:case xr.int8:case xr.numeric:case xr.oid:return X$(t);case xr.json:case xr.jsonb:return K$(t);case xr.timestamp:return Q$(t);case xr.abstime:case xr.date:case xr.daterange:case xr.int4range:case xr.int8range:case xr.money:case xr.reltime:case xr.text:case xr.time:case xr.timestamptz:case xr.timetz:case xr.tsrange:case xr.tstzrange:return Zv(t);default:return Zv(t)}},Zv=e=>e,Y$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},X$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},K$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Z$=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>MP(t,o))}return e},Q$=e=>typeof e=="string"?e.replace(" ","T"):e,LP=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class hy{constructor(t,n,r={},i=Xv){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var TS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(TS||(TS={}));class Td{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Td.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Td.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Td.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},c={};return this.map(s,(h,d)=>{a[h]||(c[h]=d)}),this.map(a,(h,d)=>{const p=s[h];if(p){const m=d.map(C=>C.presence_ref),g=p.map(C=>C.presence_ref),v=d.filter(C=>g.indexOf(C.presence_ref)<0),w=p.filter(C=>m.indexOf(C.presence_ref)<0);v.length>0&&(o[h]=v),w.length>0&&(c[h]=w)}else o[h]=d}),this.syncDiff(s,{joins:o,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,c)=>{var h;const d=(h=t[o])!==null&&h!==void 0?h:[];if(t[o]=this.cloneDeep(c),d.length>0){const p=t[o].map(g=>g.presence_ref),m=d.filter(g=>p.indexOf(g.presence_ref)<0);t[o].unshift(...m)}r(o,d,c)}),this.map(a,(o,c)=>{let h=t[o];if(!h)return;const d=c.map(p=>p.presence_ref);h=h.filter(p=>d.indexOf(p.presence_ref)<0),t[o]=h,i(o,h,c),h.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jS||(jS={}));var jd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(jd||(jd={}));var go;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(go||(go={}));class sw{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=oi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hy(this,ba.join,this.params,this.timeout),this.rejoinTimer=new RP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oi.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=oi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=oi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ba.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Td(this),this.broadcastEndpointURL=LP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==oi.closed){const{config:{broadcast:a,presence:o,private:c}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[jd.PRESENCE]&&this.bindings[jd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},m={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(go.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(go.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(go.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,C=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,x=[];for(let k=0;k<C;k++){const P=w[k],{filter:{event:j,schema:M,table:S,filter:B}}=P,D=g&&g[k];if(D&&D.event===j&&D.schema===M&&D.table===S&&D.filter===B)x.push(Object.assign(Object.assign({},P),{id:D.id}));else{this.unsubscribe(),this.state=oi.errored,t==null||t(go.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(go.SUBSCRIBED);return}}).receive("error",g=>{this.state=oi.errored,t==null||t(go.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(go.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===oi.joined&&t===jd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const h=await o.json();c=h.error||h.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,c;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=oi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ba.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new hy(this,ba.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=oi.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new hy(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>V$){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:c,leave:h,join:d}=ba;if(r&&[o,c,h,d].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,w,C;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((C=(w=g.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(g=>g.callback(m,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var v,w,C,x,k,P;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const j=g.id,M=(v=g.filter)===null||v===void 0?void 0:v.event;return j&&((w=n.ids)===null||w===void 0?void 0:w.includes(j))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const j=(k=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return j==="*"||j===((P=n==null?void 0:n.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:C,commit_timestamp:x,type:k,errors:P}=v;m=Object.assign(Object.assign({},{schema:w,table:C,commit_timestamp:x,eventType:k,new:{},old:{},errors:P}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===oi.closed}_isJoined(){return this.state===oi.joined}_isJoining(){return this.state===oi.joining}_isLeaving(){return this.state===oi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&sw.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ba.close,{},t)}_onError(t){this._on(ba.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ES(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ES(t.columns,t.old_record)),n}}const dy=()=>{},fp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J$=[1e3,2e3,5e3,1e4],eD=1e4,tD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nD{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xv,this.transport=null,this.heartbeatIntervalMs=fp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dy,this.ref=0,this.reconnectTimer=null,this.logger=dy,this.conn=null,this.sendBuffer=[],this.serializer=new G$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Kv.websocket}`,this.httpEndpoint=LP(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=F$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:H$}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ed.connecting:return Gl.Connecting;case Ed.open:return Gl.Open;case Ed.closing:return Gl.Closing;default:return Gl.Closed}}isConnected(){return this.connectionState()===Gl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new sw(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(W$,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${o}`.trim(),s),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ba.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([tD],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:U$};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ba.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new RP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,c,h,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Xv,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:fp.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:dy,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:p=>J$[p-1]||eD,this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(p,m)=>m(JSON.stringify(p)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class aw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Dr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class rD extends aw{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qv extends aw{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const ow=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iD=()=>Response,Jv=e=>{if(Array.isArray(e))return e.map(n=>Jv(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Jv(r)}),t},sD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},fy=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},aD=(e,t,n)=>Yt(void 0,void 0,void 0,function*(){const r=yield iD();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new rD(fy(i),s,a))}).catch(i=>{t(new Qv(fy(i),i))}):t(new Qv(fy(e),e))}),oD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(sD(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function xf(e,t,n,r,i,s){return Yt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,oD(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>aD(c,o,r))})})}function Qd(e,t,n,r){return Yt(this,void 0,void 0,function*(){return xf(e,"GET",t,n,r)})}function pa(e,t,n,r,i){return Yt(this,void 0,void 0,function*(){return xf(e,"POST",t,r,i,n)})}function ex(e,t,n,r,i){return Yt(this,void 0,void 0,function*(){return xf(e,"PUT",t,r,i,n)})}function lD(e,t,n,r){return Yt(this,void 0,void 0,function*(){return xf(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lw(e,t,n,r,i){return Yt(this,void 0,void 0,function*(){return xf(e,"DELETE",t,r,i,n)})}class cD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Yt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dr(t))return{data:null,error:t};throw t}})}}var IP;class uD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[IP]="BlobDownloadBuilder",this.promise=null}asStream(){return new cD(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Yt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dr(t))return{data:null,error:t};throw t}})}}IP=Symbol.toStringTag;const hD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},AS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dD{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=ow(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Yt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},AS),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),c&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(c))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const h=this._removeEmptyFolders(n),d=this._getFinalPath(h),p=yield(t=="PUT"?ex:pa)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Yt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:AS.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType);const p=yield ex(this.fetch,o.toString(),c,{headers:d});return{data:{path:s,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Dr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Yt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield pa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new aw("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}update(t,n,r){return Yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Yt(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Yt(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Yt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield pa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Yt(this,void 0,void 0,function*(){try{const i=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(t),c=()=>Qd(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new uD(c,this.shouldThrowOnError)}info(t){return Yt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Qd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}exists(t){return Yt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield lD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r)&&r instanceof Qv){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${h}`)}}}remove(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}list(t,n,r){return Yt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},hD),n),{prefix:t||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}})}listV2(t,n){return Yt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield pa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const $P="2.79.0",DP={"X-Client-Info":`storage-js/${$P}`};class fD{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DP),n),this.fetch=ow(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Yt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Qd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}getBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield Qd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}createBucket(t){return Yt(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Yt(this,void 0,void 0,function*(){try{return{data:yield ex(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class pD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DP),n),this.fetch=ow(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}listBuckets(t){return Yt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Qd(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}})}}const cw={"X-Client-Info":`storage-js/${$P}`,"Content-Type":"application/json"};class zP extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Cs(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class py extends zP{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mD extends zP{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var PS;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(PS||(PS={}));const uw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),gD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},NS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yD=(e,t,n)=>Yt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new py(NS(a),i,o))}).catch(()=>{const a=i+"",o=s.statusText||`HTTP ${i} error`;t(new py(o,i,a))});else{const a=i+"",o=s.statusText||`HTTP ${i} error`;t(new py(o,i,a))}}else t(new mD(NS(e),e))}),bD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(gD(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function vD(e,t,n,r,i,s){return Yt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,bD(t,r,i,s)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const h=c.headers.get("content-type");return!h||!h.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>yD(c,o,r))})})}function Es(e,t,n,r,i){return Yt(this,void 0,void 0,function*(){return vD(e,"POST",t,r,i,n)})}class xD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Yt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Yt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cs(r))return{data:null,error:r};throw r}})}listIndexes(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Yt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cs(r))return{data:null,error:r};throw r}})}}class wD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Yt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getVectors(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}listVectors(t){return Yt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Es(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}queryVectors(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Yt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}}class _D{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}listBuckets(){return Yt(this,arguments,void 0,function*(t={}){try{return{data:yield Es(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Yt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}}class kD extends _D{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new SD(this.url,this.headers,t,this.fetch)}}class SD extends xD{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Yt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Yt(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Yt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Yt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new CD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class CD extends wD{constructor(t,n,r,i,s){super(t,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Yt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Yt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Yt(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Yt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Yt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ED extends fD{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new dD(this.url,this.headers,t,this.fetch)}get vectors(){return new kD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pD(this.url+"/iceberg",this.headers,this.fetch)}}const TD="2.79.0";let Jh="";typeof Deno<"u"?Jh="deno":typeof document<"u"?Jh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jh="react-native":Jh="node";const jD={"X-Client-Info":`supabase-js-${Jh}/${TD}`},AD={headers:jD},PD={schema:"public"},ND={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OD={},RD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),MD=()=>Headers,LD=(e,t,n)=>{const r=RD(n),i=MD();return async(s,a)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let h=new i(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:h}))}};function ID(e){return e.endsWith("/")?e:e+"/"}function $D(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:c,auth:h,realtime:d,global:p}=t,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},h),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function DD(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ID(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const FP="2.79.0",Hc=30*1e3,tx=3,my=tx*Hc,zD="http://localhost:9999",FD="supabase.auth.token",BD={"X-Client-Info":`gotrue-js/${FP}`},nx="X-Supabase-Api-Version",BP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HD=10*60*1e3;class Jd extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Jt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class WD extends Jd{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function VD(e){return Jt(e)&&e.name==="AuthApiError"}class ql extends Jd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Cl extends Jd{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ca extends Cl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GD(e){return Jt(e)&&e.name==="AuthSessionMissingError"}class Ec extends Cl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pp extends Cl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class mp extends Cl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qD(e){return Jt(e)&&e.name==="AuthImplicitGrantRedirectError"}class OS extends Cl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rx extends Cl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function gy(e){return Jt(e)&&e.name==="AuthRetryableFetchError"}class RS extends Cl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ix extends Cl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),MS=` 	
\r=`.split(""),YD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<MS.length;t+=1)e[MS[t].charCodeAt(0)]=-2;for(let t=0;t<Xm.length;t+=1)e[Xm[t].charCodeAt(0)]=t;return e})();function LS(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Xm[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Xm[r]),t.queuedBits-=6}}function UP(e,t,n){const r=YD[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function IS(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{ZD(a,r,n)};for(let a=0;a<e.length;a+=1)UP(e.charCodeAt(a),i,s);return t.join("")}function XD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function KD(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}XD(r,t)}}function ZD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ou(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)UP(e.charCodeAt(i),n,r);return new Uint8Array(t)}function QD(e){const t=[];return KD(e,n=>t.push(n)),new Uint8Array(t)}function Jl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>LS(i,n,r)),LS(null,n,r),t.join("")}function JD(e){return Math.round(Date.now()/1e3)+e}function ez(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Mi=()=>typeof window<"u"&&typeof document<"u",Ol={tested:!1,writable:!1},HP=()=>{if(!Mi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ol.tested)return Ol.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ol.tested=!0,Ol.writable=!0}catch{Ol.tested=!0,Ol.writable=!1}return Ol.writable};function tz(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const WP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),nz=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Rl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fo=async(e,t)=>{await e.removeItem(t)};class Kg{constructor(){this.promise=new Kg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Kg.promiseConstructor=Promise;function yy(e){const t=e.split(".");if(t.length!==3)throw new ix("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!UD.test(t[r]))throw new ix("JWT not in base64url format");return{header:JSON.parse(IS(t[0])),payload:JSON.parse(IS(t[1])),signature:Ou(t[2]),raw:{header:t[0],payload:t[1]}}}async function rz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function iz(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function sz(e){return("0"+e.toString(16)).substr(-2)}function az(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,sz).join("")}async function oz(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function lz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await oz(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tc(e,t,n=!1){const r=az();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Wc(e,`${t}-code-verifier`,i);const s=await lz(r);return[s,r===s?"plain":"s256"]}const cz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uz(e){const t=e.headers.get(nx);if(!t||!t.match(cz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function hz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function dz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jc(e){if(!fz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function by(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pz(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function $S(e){return JSON.parse(JSON.stringify(e))}const Fl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mz=[502,503,504];async function DS(e){var t;if(!nz(e))throw new rx(Fl(e),0);if(mz.includes(e.status))throw new rx(Fl(e),e.status);let n;try{n=await e.json()}catch(s){throw new ql(Fl(s),s)}let r;const i=uz(e);if(i&&i.getTime()>=BP["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new RS(Fl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ca}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new RS(Fl(n),e.status,n.weak_password.reasons);throw new WD(Fl(n),e.status||500,r)}const gz=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function un(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[nx]||(s[nx]=BP["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await yz(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function yz(e,t,n,r,i,s){const a=gz(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new rx(Fl(c),0)}if(o.ok||await DS(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await DS(c)}}function ua(e){var t;let n=null;xz(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=JD(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function zS(e){const t=ua(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Jo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function bz(e){return{data:e,error:null}}function vz(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=ah(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function FS(e){return e}function xz(e){return e.access_token&&e.refresh_token&&e.expires_in}const vy=["global","local","others"];class wz{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=WP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=vy[0]){if(vy.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vy.join(", ")}`);try{return await un(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await un(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Jo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ah(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await un(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:vz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Jt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await un(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Jo})}catch(n){if(Jt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,c;try{const h={nextPage:null,lastPage:0,total:0},d=await un(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:FS});if(d.error)throw d.error;const p=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);h[`${C}Page`]=w}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Jt(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){jc(t);try{return await un(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Jo})}catch(n){if(Jt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){jc(t);try{return await un(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Jo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){jc(t);try{return await un(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Jo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){jc(t.userId);try{const{data:n,error:r}=await un(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){jc(t.userId),jc(t.id);try{return{data:await un(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,a,o,c;try{const h={nextPage:null,lastPage:0,total:0},d=await un(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:FS});if(d.error)throw d.error;const p=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);h[`${C}Page`]=w}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Jt(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await un(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await un(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await un(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await un(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await un(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}}function BS(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ac={debug:!!(globalThis&&HP()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class VP extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _z extends VP{}async function kz(e,t,n){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _z(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ac.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Sz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function GP(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Cz(e){return parseInt(e,16)}function Ez(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Tz(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:c,resources:h,scheme:d,uri:p,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=GP(e.address),v=d?`${d}://${r}`:r,w=e.statement?`${e.statement}
`:"",C=`${v} wants you to sign in with your Ethereum account:
${g}

${w}`;let x=`URI: ${p}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),c&&(x+=`
Request ID: ${c}`),h){let k=`
Resources:`;for(const P of h){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);k+=`
- ${P}`}x+=k}return`${C}
${x}`}class ri extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Km extends ri{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function jz({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ri({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ri({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ri({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ri({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ri({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ri({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ri({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ri({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(qP(a)){if(s.rp.id!==a)return new ri({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ri({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ri({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Az({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ri({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ri({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(qP(r)){if(n.rpId!==r)return new ri({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ri({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Pz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Nz=new Pz;function Oz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=ah(e,["challenge","user","excludeCredentials"]),s=Ou(t).buffer,a=Object.assign(Object.assign({},n),{id:Ou(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const h=r[c];o.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:Ou(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function Rz(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ah(e,["challenge","allowCredentials"]),i=Ou(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Ou(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function Mz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Jl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Jl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Lz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Jl(new Uint8Array(i.authenticatorData)),clientDataJSON:Jl(new Uint8Array(i.clientDataJSON)),signature:Jl(new Uint8Array(i.signature)),userHandle:i.userHandle?Jl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qP(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function US(){var e,t;return!!(Mi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Iz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Km("Browser returned unexpected credential type",t)}:{data:null,error:new Km("Empty credential response",t)}}catch(t){return{data:null,error:jz({error:t,options:e})}}}async function $z(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Km("Browser returned unexpected credential type",t)}:{data:null,error:new Km("Empty credential response",t)}}catch(t){return{data:null,error:Az({error:t,options:e})}}}const Dz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},zz={userVerification:"preferred",hints:["security-key"]};function Zm(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(t(a)){const o=r[s];t(o)?r[s]=Zm(o,a):r[s]=Zm(a)}else r[s]=a}return r}function Fz(e,t){return Zm(Dz,e,t||{})}function Bz(e,t){return Zm(zz,e,t||{})}class Uz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:o};const c=i??Nz.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=Fz(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:p}=await Iz({publicKey:h,signal:c});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const h=Bz(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:p}=await $z(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:c}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new ql("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Jd("rpId is required for WebAuthn authentication")};try{if(!US())return{data:null,error:new ql("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new ql("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Jd("rpId is required for WebAuthn registration")};try{if(!US())return{data:null,error:new ql("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:h}}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new ql("Unexpected error in register",a)}}}}Sz();const Hz={url:zD,storageKey:FD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function HS(e,t,n){return await n()}const Pc={};class ef{get jwks(){var t,n;return(n=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ef.nextInstanceID,ef.nextInstanceID+=1,this.instanceID>0&&Mi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Hz),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new wz({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=WP(i.fetch),this.lock=i.lock||HS,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Mi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=kz:this.lock=HS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Uz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:HP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=BS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=BS(this.memoryStorage)),Mi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${FP}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Mi()&&(n=tz(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Mi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),qD(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Jt(n)?this._returnResult({error:n}):this._returnResult({error:new ql("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ua}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:d,password:p,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Tc(this.storage,this.storageKey)),s=await un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:ua})}else if("phone"in t){const{phone:d,password:p,options:m}=t;s=await un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ua})}else throw new pp("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await un(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zS})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await un(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zS})}else throw new pp("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Ec;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,a,o,c,h,d,p,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:w,wallet:C,statement:x,options:k}=t;let P;if(Mi())if(typeof C=="object")P=C;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")P=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=C}const j=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),M=await P.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=GP(M[0]);let B=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const R=await P.request({method:"eth_chainId"});B=Cz(R)}const D={domain:j.host,address:S,statement:x,uri:j.href,version:"1",chainId:B,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=Tz(D),v=await P.request({method:"personal_sign",params:[Ez(g),S]})}try{const{data:w,error:C}=await un(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ua});if(C)throw C;if(!w||!w.session||!w.user){const x=new Ec;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:C})}catch(w){if(Jt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,i,s,a,o,c,h,d,p,m,g;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:C,wallet:x,statement:k,options:P}=t;let j;if(Mi())if(typeof x=="object")j=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const M=new URL((n=P==null?void 0:P.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),k?{statement:k}:null));let B;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")B=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)B=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)v=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),w=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${M.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=P==null?void 0:P.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=P==null?void 0:P.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((a=P==null?void 0:P.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((o=P==null?void 0:P.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((c=P==null?void 0:P.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((p=(d=P==null?void 0:P.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...P.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:C,error:x}=await un(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Jl(w)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ua});if(x)throw x;if(!C||!C.session||!C.user){const k=new Ec;return this._returnResult({data:{user:null,session:null},error:k})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:x})}catch(C){if(Jt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(t){const n=await Rl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await un(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ua});if(await Fo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Ec;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await un(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ua}),{data:c,error:h}=o;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c||!c.session||!c.user){const d=new Ec;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:h})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:c}=t;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Tc(this.storage,this.storageKey));const{error:p}=await un(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:c}=t,{data:h,error:d}=await un(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:d})}throw new pp("You must provide either an email or phone number.")}catch(o){if(Jt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await un(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ua});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:h,session:c},error:null})}catch(i){if(Jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Tc(this.storage,this.storageKey));const o=await un(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:bz});return this._returnResult(o)}catch(s){if(Jt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ca;const{error:i}=await un(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Jt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await un(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await un(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new pp("You must provide either an email or phone number and a type")}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Rl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<my:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Rl(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=by()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=pz(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await un(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Jo}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ca}:await un(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Jo})})}catch(n){if(Jt(n))return GD(n)&&(await this._removeSession(),await Fo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ca;const a=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Tc(this.storage,this.storageKey));const{data:h,error:d}=await un(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Jo});if(d)throw d;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(Jt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ca;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=yy(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Jt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ca;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Mi())throw new mp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new mp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new OS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new OS("No code detected.");const{data:k,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:c,token_type:h}=t;if(!s||!o||!a||!h)throw new mp("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(o);let m=d+p;c&&(m=parseInt(c));const g=m-d;g*1e3<=Hc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const v=m-p;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:w,error:C}=await this._getUser(s);if(C)throw C;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:a,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(Jt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Rl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(VD(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Fo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=ez(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Tc(this.storage,this.storageKey,!0));try{return await un(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Jt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,c,h,d;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await un(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Mi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Jt(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:c,access_token:h,nonce:d}=t,p=await un(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:c,access_token:h,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ua}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Ec}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(Jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await un(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await iz(async i=>(i>0&&await rz(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await un(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ua})),(i,s)=>{const a=200*Math.pow(2,i);return s&&gy(s)&&Date.now()+a-r<Hc})}catch(r){if(this._debug(n,"error",r),Jt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Mi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Rl(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Rl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Wc(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:by()}else if(i&&!i.user&&!i.user){const a=await Rl(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Fo(this.storage,this.storageKey+"-user"),await Wc(this.storage,this.storageKey,i)):i.user=by()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<my;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${my}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),gy(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Kg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new ca;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),Jt(s)){const a={data:null,error:s};return gy(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Wc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=$S(i);await Wc(this.storage,this.storageKey,s)}else{const i=$S(n);await Wc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Fo(this.storage,this.storageKey),await Fo(this.storage,this.storageKey+"-code-verifier"),await Fo(this.storage,this.storageKey+"-user"),this.userStorage&&await Fo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Mi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Hc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Hc}ms, refresh threshold is ${tx} ticks`),i<=tx&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof VP)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Tc(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await un(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:h}=await un(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Mz(t.webauthn.credential_response):Lz(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await un(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await un(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Oz(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Rz(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=yy(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const h=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await un(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ca})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ca});const a=await un(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Mi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ca});const a=await un(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Mi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+HD>i)return r;const{data:s,error:a}=await un(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:c}}=yy(r);n!=null&&n.allowExpired||hz(s.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:a},error:null}}const d=dz(i.alg),p=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,a,QD(`${o}.${c}`)))throw new ix("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}}ef.nextInstanceID=0;const Wz=ef;class Vz extends Wz{constructor(t){super(t)}}class Gz{constructor(t,n,r){var i,s,a;this.supabaseUrl=t,this.supabaseKey=n;const o=DD(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,h={db:PD,realtime:OD,auth:Object.assign(Object.assign({},ND),{storageKey:c}),global:AD},d=$D(r??{},h);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=LD(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new z$(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ED(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new I$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:o,lock:c,debug:h,throwOnError:d},p,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Vz({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:o,lock:c,debug:h,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new nD(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qz=(e,t,n)=>new Gz(e,t,n);function Yz(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Yz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const WS={DRAFTIFY:"/api/studio-draftify",GEOMETRIC_GENERATE:"/api/studio-generate-geometric"},VS={URL:"https://okakomwfikxmwllvliva.supabase.co",ANON_KEY:""},GS={AUTH_SESSION:"studio_auth_session"},Yl={BLEND_MODE_ENABLED:!1},ui=qz(VS.URL,VS.ANON_KEY),wa={async signIn(e,t){const{data:n,error:r}=await ui.auth.signInWithPassword({email:e,password:t});if(r)throw r;return localStorage.setItem(GS.AUTH_SESSION,JSON.stringify(n.session)),n},async signOut(){await ui.auth.signOut(),localStorage.removeItem(GS.AUTH_SESSION)},async getSession(){const{data:e}=await ui.auth.getSession();return e.session},async updatePassword(e){const{data:t,error:n}=await ui.auth.updateUser({password:e});if(n)throw n;return await ui.auth.updateUser({data:{password_setup_complete:!0}}),t},onAuthStateChange(e){return ui.auth.onAuthStateChange(e)}};async function Zg(){var n,r;const e=await ui.auth.getSession(),t=(r=(n=e==null?void 0:e.data)==null?void 0:n.session)==null?void 0:r.access_token;if(!t)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async function hw(e){const t=await Zg(),n=await fetch("/api/designs/save",{method:"POST",headers:t,body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to save your design. Please check your connection and try again.")}return n.json()}async function Qm({project_id:e,limit:t=50,offset:n=0,search:r}={}){const i=await Zg(),s=new URLSearchParams;e&&s.append("project_id",e),s.append("limit",t),s.append("offset",n),r&&s.append("search",r);const a=await fetch(`/api/designs/list?${s}`,{method:"GET",headers:i});if(!a.ok){const o=await a.json();throw new Error(o.error||"Unable to load your designs. Please refresh the page and try again.")}return a.json()}async function wf(e){const t=await Zg(),n=await fetch(`/api/designs/by-id?id=${e}`,{method:"GET",headers:t});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to open this design. It may have been deleted or you may not have permission to view it.")}return n.json()}async function Xz(e){const t=await Zg(),n=await fetch(`/api/designs/by-id?id=${e}`,{method:"DELETE",headers:t});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to delete this design. Please check your connection and try again.")}return n.json()}class Kz extends je.Component{constructor(n){super(n);Hf(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?u.jsxs("div",{className:"error-boundary",children:[u.jsxs("div",{className:"error-content",children:[u.jsx("h1",{children:"Something went wrong"}),u.jsx("p",{children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),u.jsxs("div",{className:"error-actions",children:[u.jsx("button",{onClick:this.handleReset,className:"btn-primary",children:"Try Again"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"btn-secondary",children:"Refresh Page"})]}),!1]}),u.jsx("style",{jsx:!0,children:`
            .error-boundary {
              min-height: 100vh;
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 2rem;
              background: #f9fafb;
            }

            .error-content {
              max-width: 500px;
              text-align: center;
              background: white;
              padding: 3rem;
              border-radius: 12px;
              box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            h1 {
              color: #1e4a7a;
              margin: 0 0 1rem 0;
              font-size: 1.75rem;
            }

            p {
              color: #6b7280;
              margin: 0 0 2rem 0;
              line-height: 1.6;
            }

            .error-actions {
              display: flex;
              gap: 1rem;
              justify-content: center;
            }

            .btn-primary,
            .btn-secondary {
              padding: 0.75rem 1.5rem;
              border-radius: 6px;
              font-weight: 500;
              cursor: pointer;
              transition: all 0.2s;
              border: none;
            }

            .btn-primary {
              background: #ff6b35;
              color: white;
            }

            .btn-primary:hover {
              background: #e55a2b;
              transform: translateY(-1px);
            }

            .btn-secondary {
              background: white;
              color: #374151;
              border: 1px solid #d1d5db;
            }

            .btn-secondary:hover {
              background: #f9fafb;
            }

            .error-details {
              margin-top: 2rem;
              text-align: left;
              font-size: 0.875rem;
            }

            .error-details summary {
              cursor: pointer;
              color: #6b7280;
              margin-bottom: 0.5rem;
            }

            .error-details pre {
              background: #f3f4f6;
              padding: 1rem;
              border-radius: 4px;
              overflow-x: auto;
              font-size: 0.75rem;
              color: #dc2626;
            }
          `})]}):this.props.children}}const Zz="modulepreload",Qz=function(e){return"/"+e},qS={},Jz=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Qz(c),c in qS)return;qS[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Zz,h||(p.as="script"),p.crossOrigin="",p.href=c,o&&p.setAttribute("nonce",o),document.head.appendChild(p),h)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},YS=e=>{let t;const n=new Set,r=(h,d)=>{const p=typeof h=="function"?h(t):h;if(!Object.is(p,t)){const m=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,m))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h))},c=t=e(r,i,o);return o},eF=e=>e?YS(e):YS,tF=e=>e;function nF(e,t=tF){const n=je.useSyncExternalStore(e.subscribe,je.useCallback(()=>t(e.getState()),[e,t]),je.useCallback(()=>t(e.getInitialState()),[e,t]));return je.useDebugValue(n),n}const XS=e=>{const t=eF(e),n=r=>nF(t,r);return Object.assign(n,t),n},YP=e=>e?XS(e):XS,KS={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},tf=new Map,gp=e=>{const t=tf.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},rF=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=tf.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return tf.set(n.name,i),{type:"tracked",store:e,...i}},iF=(e,t)=>{if(t===void 0)return;const n=tf.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&tf.delete(e))},sF=e=>{var t,n;if(!e)return;const r=e.split(`
`),i=r.findIndex(a=>a.includes("api.setState"));if(i<0)return;const s=((t=r[i+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(s))==null?void 0:n[1]},aF=(e,t={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:a,store:o,...c}=t;let h;try{h=(s??(KS?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return e(n,r,i);const{connection:d,...p}=rF(o,h,c);let m=!0;i.setState=(w,C,x)=>{const k=n(w,C);if(!m)return k;const P=x===void 0?{type:a||sF(new Error().stack)||"anonymous"}:typeof x=="string"?{type:x}:x;return o===void 0?(d==null||d.send(P,r()),k):(d==null||d.send({...P,type:`${o}/${P.type}`},{...gp(c.name),[o]:i.getState()}),k)},i.devtools={cleanup:()=>{d&&typeof d.unsubscribe=="function"&&d.unsubscribe(),iF(c.name,o)}};const g=(...w)=>{const C=m;m=!1,n(...w),m=C},v=e(i.setState,r,i);if(p.type==="untracked"?d==null||d.init(v):(p.stores[p.store]=i,d==null||d.init(Object.fromEntries(Object.entries(p.stores).map(([w,C])=>[w,w===p.store?v:C.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let w=!1;const C=i.dispatch;i.dispatch=(...x)=>{(KS?"production":void 0)!=="production"&&x[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),C(...x)}}return d.subscribe(w=>{var C;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return xy(w.payload,x=>{if(x.type==="__setState"){if(o===void 0){g(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const k=x.state[o];if(k==null)return;JSON.stringify(i.getState())!==JSON.stringify(k)&&g(k);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(x)});case"DISPATCH":switch(w.payload.type){case"RESET":return g(v),o===void 0?d==null?void 0:d.init(i.getState()):d==null?void 0:d.init(gp(c.name));case"COMMIT":if(o===void 0){d==null||d.init(i.getState());return}return d==null?void 0:d.init(gp(c.name));case"ROLLBACK":return xy(w.state,x=>{if(o===void 0){g(x),d==null||d.init(i.getState());return}g(x[o]),d==null||d.init(gp(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return xy(w.state,x=>{if(o===void 0){g(x);return}JSON.stringify(i.getState())!==JSON.stringify(x[o])&&g(x[o])});case"IMPORT_STATE":{const{nextLiftedState:x}=w.payload,k=(C=x.computedStates.slice(-1)[0])==null?void 0:C.state;if(!k)return;g(o===void 0?k:k[o]),d==null||d.send(null,x);return}case"PAUSE_RECORDING":return m=!m}return}}),v},XP=aF,xy=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function KP(e){let t=e%2147483647;return t<=0&&(t+=2147483646),function(){return t=t*16807%2147483647,(t-1)/2147483646}}function ZS(e,t,n){const r=KP(n),i=[],s=.4,a=.5,o=.5;for(let c=0;c<e;c++){const h=c/e*Math.PI*2-Math.PI/2,d=(r()-.5)*.4*t,p=h+d,m=1+(r()-.5)*t*.8,g=s*m,v=a+g*Math.cos(p),w=o+g*Math.sin(p),C=.35/e*(1+t*(r()-.5)),x=p+Math.PI/2,k=(r()-.5)*.3*t,P=x+Math.PI+k,j=x+k;i.push({x:v,y:w,handleIn:{x:Math.cos(P)*C,y:Math.sin(P)*C},handleOut:{x:Math.cos(j)*C,y:Math.sin(j)*C}})}return i}function oF(e,t,n){if(!e||e.length<3)return lF(t,n);const r=[],i=e.length;for(let s=0;s<i;s++){const a=e[s],o=e[(s+1)%i],c=a.x*t,h=a.y*n,d=o.x*t,p=o.y*n,m=c+a.handleOut.x*t,g=h+a.handleOut.y*n,v=d+o.handleIn.x*t,w=p+o.handleIn.y*n;s===0&&r.push(`M ${c.toFixed(2)},${h.toFixed(2)}`),r.push(`C ${m.toFixed(2)},${g.toFixed(2)} ${v.toFixed(2)},${w.toFixed(2)} ${d.toFixed(2)},${p.toFixed(2)}`)}return r.push("Z"),r.join(" ")}function lF(e,t){const n=e/2,r=t/2,i=n,s=r;return`M ${i-n},${s} A ${n},${r} 0 1,1 ${i+n},${s} A ${n},${r} 0 1,1 ${i-n},${s} Z`}function cF(){const n=[];for(let a=0;a<8;a++){const o=a/8*Math.PI*2-Math.PI/2,c=.5+.4*Math.cos(o),h=.5+.4*Math.sin(o),d=o+Math.PI/2;n.push({x:c,y:h,handleIn:{x:Math.cos(d+Math.PI)*.2,y:Math.sin(d+Math.PI)*.2},handleOut:{x:Math.cos(d)*.2,y:Math.sin(d)*.2}})}return n}const Jm={organic:{name:"Organic",description:"Smooth, gentle curves like a pebble",minPoints:6,maxPoints:8,blobinessMin:.15,blobinessMax:.25,handleLengthFactor:.4,radiusVariation:.15},splashy:{name:"Splashy",description:"Irregular edges, some spikes like paint splatter",minPoints:10,maxPoints:12,blobinessMin:.3,blobinessMax:.5,handleLengthFactor:.25,radiusVariation:.35},cloudy:{name:"Cloudy",description:"Soft bumps, fluffy cloud-like appearance",minPoints:8,maxPoints:10,blobinessMin:.2,blobinessMax:.3,handleLengthFactor:.5,radiusVariation:.2},rocky:{name:"Rocky",description:"Angular variations, irregular stone-like edges",minPoints:8,maxPoints:12,blobinessMin:.25,blobinessMax:.4,handleLengthFactor:.2,radiusVariation:.3}};function wy(e,t){const n=Jm[e]||Jm.organic,r=KP(t),i=Math.floor(r()*(n.maxPoints-n.minPoints+1))+n.minPoints,s=n.blobinessMin+r()*(n.blobinessMax-n.blobinessMin),a=[],o=.4,c=.5,h=.5;for(let d=0;d<i;d++){const p=d/i*Math.PI*2-Math.PI/2,m=(r()-.5)*.4*s,g=p+m,v=1+(r()-.5)*n.radiusVariation*2,w=o*v,C=c+w*Math.cos(g),x=h+w*Math.sin(g),P=n.handleLengthFactor/i*(.8+r()*.4),j=g+Math.PI/2,M=(r()-.5)*.3*s,S=j+Math.PI+M,B=j+M;a.push({x:C,y:x,handleIn:{x:Math.cos(S)*P,y:Math.sin(S)*P},handleOut:{x:Math.cos(B)*P,y:Math.sin(B)*P}})}return a}function uF(e,t,n,r){return{x:n?.5-(e-.5):e,y:r?.5-(t-.5):t}}function hF(e,t,n,r){return{x:n?-e:e,y:r?-t:t}}function ZP(e,t,n,r=4){const i=[{index:e,mirrorX:!1,mirrorY:!1,rotationAngle:0}];if(n==="none"||!n)return i;if(n==="horizontal"){const s=(t-e)%t;return s!==e&&i.push({index:s,mirrorX:!0,mirrorY:!1,rotationAngle:0}),i}if(n==="vertical"){const s=(Math.floor(t/2)-e+t)%t;return s!==e&&i.push({index:s,mirrorX:!1,mirrorY:!0,rotationAngle:0}),i}if(n==="radial"){for(let s=1;s<r;s++){const a=Math.round(e+s*t/r)%t;if(a!==e){const o=s*2*Math.PI/r;i.push({index:a,mirrorX:!1,mirrorY:!1,rotationAngle:o})}}return i}return i}function dF(e,t,n,r,i,s=4){if(i==="none"||!i)return e.map((o,c)=>c!==t?o:{...o,x:n,y:r});const a=ZP(t,e.length,i,s);return e.map((o,c)=>{const h=a.find(p=>p.index===c);if(!h)return o;if(h.rotationAngle!==0){const g=n-.5,v=r-.5,w=Math.cos(h.rotationAngle),C=Math.sin(h.rotationAngle);return{...o,x:.5+g*w-v*C,y:.5+g*C+v*w}}const d=uF(n,r,h.mirrorX,h.mirrorY);return{...o,x:d.x,y:d.y}})}function fF(e,t,n,r,i,s,a=4){if(s==="none"||!s)return e.map((c,h)=>h!==t?c:{...c,[n]:{x:r,y:i}});const o=ZP(t,e.length,s,a);return e.map((c,h)=>{const d=o.find(v=>v.index===h);if(!d)return c;let p=n,m=r,g=i;if(d.rotationAngle!==0){const v=Math.cos(d.rotationAngle),w=Math.sin(d.rotationAngle);m=r*v-i*w,g=r*w+i*v}else{const v=hF(r,i,d.mirrorX,d.mirrorY);m=v.x,g=v.y}return{...c,[p]:{x:m,y:g}}})}function QP(e,t,n,r=!0,i=!1){if(!e||e.length<2)return"";const s=[],a=e.length;for(let o=0;o<a;o++){const c=e[o],h=o===a-1,d=r?e[(o+1)%a]:h?null:e[o+1],p=c.x*t,m=c.y*n;if(o===0&&s.push(`M ${p.toFixed(2)},${m.toFixed(2)}`),!d)continue;const g=d.x*t,v=d.y*n;if(i&&c.handleOut&&d.handleIn){const w=p+c.handleOut.x*t,C=m+c.handleOut.y*n,x=g+d.handleIn.x*t,k=v+d.handleIn.y*n;s.push(`C ${w.toFixed(2)},${C.toFixed(2)} ${x.toFixed(2)},${k.toFixed(2)} ${g.toFixed(2)},${v.toFixed(2)}`)}else s.push(`L ${g.toFixed(2)},${v.toFixed(2)}`)}return r&&s.push("Z"),s.join(" ")}function _y(e,t=!0,n=.3){if(!e||e.length<2)return e;const r=e.length,i=e.map(s=>({...s,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}));for(let s=0;s<r;s++){const a=t?e[(s-1+r)%r]:s>0?e[s-1]:e[s];e[s];const o=t?e[(s+1)%r]:s<r-1?e[s+1]:e[s],c=o.x-a.x,h=o.y-a.y,d=n*.5;!t&&s===0?(i[s].handleIn={x:0,y:0},i[s].handleOut={x:c*d,y:h*d}):!t&&s===r-1?(i[s].handleIn={x:-c*d,y:-h*d},i[s].handleOut={x:0,y:0}):(i[s].handleIn={x:-c*d,y:-h*d},i[s].handleOut={x:c*d,y:h*d})}return i}function pF(e,t,n,r){const i={x:n,y:r,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},s=[...e];return s.splice(t,0,i),s}function mF(e,t,n=3){if(e.length<=n)return null;const r=[...e];return r.splice(t,1),r}function gF(e){switch(e){case"l-shape":return[{x:0,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:.5,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:.5,y:.5,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:.5,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:0,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}];case"custom":default:return[{x:0,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:0,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}]}}function QS(e,t={}){switch(e){case"l-shape":{const n=t.cutWidth??.6,r=t.cutHeight??.4;return[{x:0,y:0},{x:n,y:0},{x:n,y:r},{x:1,y:r},{x:1,y:1},{x:0,y:1}]}case"u-shape":{const n=t.cutStart??.35,r=t.cutEnd??.65,i=t.cutHeight??.4;return[{x:0,y:0},{x:n,y:0},{x:n,y:i},{x:r,y:i},{x:r,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}case"t-shape":{const n=t.stemStart??.3,r=t.stemEnd??.7,i=t.stemHeight??.4;return[{x:0,y:0},{x:1,y:0},{x:1,y:i},{x:r,y:i},{x:r,y:1},{x:n,y:1},{x:n,y:i},{x:0,y:i}]}case"rectangle":default:return null}}function yF(e){switch(e){case"l-shape":return{cutWidth:.6,cutHeight:.4};case"u-shape":return{cutStart:.35,cutEnd:.65,cutHeight:.4};case"t-shape":return{stemStart:.3,stemEnd:.7,stemHeight:.4};default:return{}}}const ky={surface:{width_mm:5e4,length_mm:5e4,color:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"},boundary:{type:"rectangle",controlPoints:null}},courts:{},selectedCourtId:null,tracks:{},selectedTrackId:null,motifs:{},selectedMotifId:null,shapes:{},selectedShapeId:null,texts:{},selectedTextId:null,exclusionZones:{},selectedExclusionZoneId:null,groups:{},selectedGroupId:null,selectedElementIds:[],clipboard:null,editingGroupId:null,elementOrder:[],customMarkings:[],backgroundZones:[],designName:"Untitled Design",designDescription:"",designTags:[],history:[],historyIndex:-1,maxHistory:50,showCourtLibrary:!0,showPropertiesPanel:!0,propertiesPanelUserClosed:!1,showColorEditor:!1,snapToGrid:!0,gridSize_mm:100,zoom:1,mobileLibraryOpen:!1,mobilePropertiesOpen:!1,mobileColoursOpen:!1,mobileActiveTab:"courts",standaloneMode:!1,standaloneDesignId:null,pathDrawingMode:!1,activePathId:null,isSaving:!1,lastSaved:null,isDirty:!1,isInteracting:!1,lastSavedHash:null,autosaveTimer:null},nn=YP(XP((e,t)=>({...ky,setSurfaceDimensions:(n,r)=>{e(i=>({surface:{...i.surface,width_mm:n,length_mm:r}})),t().addToHistory()},setSurfaceColor:n=>{e(r=>({surface:{...r.surface,color:n}})),t().addToHistory()},setSurfaceBoundaryPreset:n=>{const r=yF(n),i=QS(n,r);e(s=>({surface:{...s.surface,boundary:{type:n,controlPoints:i,params:r}}})),t().addToHistory()},updateBoundaryParams:n=>{var o;const r=t(),i=(o=r.surface.boundary)==null?void 0:o.type;if(!i||i==="rectangle"||i==="custom")return;const s={...r.surface.boundary.params,...n},a=QS(i,s);e(c=>({surface:{...c.surface,boundary:{...c.surface.boundary,controlPoints:a,params:s}}})),t().addToHistory()},setSurfaceBoundaryPoints:n=>{e(r=>({surface:{...r.surface,boundary:{type:"custom",controlPoints:n}}})),t().addToHistory()},resetSurfaceBoundary:()=>{e(n=>({surface:{...n.surface,boundary:{type:"rectangle",controlPoints:null}}})),t().addToHistory()},addCourt:(n,r)=>{const i=`court-${Date.now()}`,s=d=>({RH01:{tpv_code:"RH01",hex:"#A5362F",name:"Standard Red"},RH02:{tpv_code:"RH02",hex:"#E21F2F",name:"Bright Red"},RH10:{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},RH11:{tpv_code:"RH11",hex:"#3BB44A",name:"Bright Green"},RH12:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"},RH20:{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},RH21:{tpv_code:"RH21",hex:"#493D8C",name:"Purple"},RH22:{tpv_code:"RH22",hex:"#47AFE3",name:"Light Blue"},RH23:{tpv_code:"RH23",hex:"#039DC4",name:"Azure"},RH26:{tpv_code:"RH26",hex:"#00A6A3",name:"Turquoise"},RH30:{tpv_code:"RH30",hex:"#E4C4AA",name:"Standard Beige"},RH31:{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},RH32:{tpv_code:"RH32",hex:"#8B5F3C",name:"Brown"},RH40:{tpv_code:"RH40",hex:"#E5A144",name:"Mustard Yellow"},RH41:{tpv_code:"RH41",hex:"#FFD833",name:"Bright Yellow"},RH50:{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},RH60:{tpv_code:"RH60",hex:"#59595B",name:"Dark Grey"},RH61:{tpv_code:"RH61",hex:"#939598",name:"Light Grey"},RH65:{tpv_code:"RH65",hex:"#D9D9D6",name:"Pale Grey"},RH70:{tpv_code:"RH70",hex:"#231F20",name:"Black"},RH90:{tpv_code:"RH90",hex:"#E8457E",name:"Funky Pink"}})[d]||{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},a={};if(r.defaultLineColor){const d=s(r.defaultLineColor);r.markings.forEach(p=>{a[p.id]=d})}const o={};if(r.defaultLineColor&&r.zones){const d=s(r.defaultLineColor);r.zones.forEach(p=>{o[p.id]=d})}const c=r.defaultSurfaceColor?s(r.defaultSurfaceColor):null,h={id:i,templateId:n,template:r,position:{x:t().surface.width_mm/2-r.dimensions.width_mm/2,y:t().surface.length_mm/2-r.dimensions.length_mm/2},rotation:0,scale:1,lineColorOverrides:a,zoneColorOverrides:o,courtSurfaceColor:c};e(d=>({courts:{...d.courts,[i]:h},elementOrder:[...d.elementOrder,i],selectedCourtId:i,selectedTrackId:null})),t().addToHistory()},removeCourt:n=>{const{[n]:r,...i}=t().courts;e(s=>({courts:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedCourtId:s.selectedCourtId===n?null:s.selectedCourtId})),t().addToHistory()},updateCourtPosition:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],position:r}}}))},updateCourtRotation:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],rotation:r}}}))},updateCourtScale:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],scale:r}}}))},duplicateCourt:n=>{const r=t().courts[n];if(!r)return;const i=`court-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({courts:{...a.courts,[i]:s},elementOrder:[...a.elementOrder,i],selectedCourtId:i,selectedTrackId:null})),t().addToHistory()},duplicateTrack:n=>{const r=t().tracks[n];if(!r)return;const i=`track-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({tracks:{...a.tracks,[i]:s},elementOrder:[...a.elementOrder,i],selectedTrackId:i,selectedCourtId:null})),t().addToHistory()},renameElement:(n,r)=>{n.startsWith("court-")?e(i=>({courts:{...i.courts,[n]:{...i.courts[n],customName:r}}})):n.startsWith("track-")?e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],customName:r}}})):n.startsWith("motif-")?e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],customName:r}}})):n.startsWith("shape-")?e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],customName:r}}})):n.startsWith("text-")?e(i=>({texts:{...i.texts,[n]:{...i.texts[n],customName:r}}})):n.startsWith("exclusion-")&&e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],customName:r}}})),t().addToHistory()},toggleElementLock:n=>{n.startsWith("court-")?e(r=>{var i;return{courts:{...r.courts,[n]:{...r.courts[n],locked:!((i=r.courts[n])!=null&&i.locked)}}}}):n.startsWith("track-")?e(r=>{var i;return{tracks:{...r.tracks,[n]:{...r.tracks[n],locked:!((i=r.tracks[n])!=null&&i.locked)}}}}):n.startsWith("motif-")?e(r=>{var i;return{motifs:{...r.motifs,[n]:{...r.motifs[n],locked:!((i=r.motifs[n])!=null&&i.locked)}}}}):n.startsWith("shape-")?e(r=>{var i;return{shapes:{...r.shapes,[n]:{...r.shapes[n],locked:!((i=r.shapes[n])!=null&&i.locked)}}}}):n.startsWith("text-")?e(r=>{var i;return{texts:{...r.texts,[n]:{...r.texts[n],locked:!((i=r.texts[n])!=null&&i.locked)}}}}):n.startsWith("exclusion-")?e(r=>{var i;return{exclusionZones:{...r.exclusionZones,[n]:{...r.exclusionZones[n],locked:!((i=r.exclusionZones[n])!=null&&i.locked)}}}}):n.startsWith("group-")&&e(r=>{var i;return{groups:{...r.groups,[n]:{...r.groups[n],locked:!((i=r.groups[n])!=null&&i.locked)}}}}),t().addToHistory()},toggleElementVisibility:n=>{n.startsWith("court-")?e(r=>{var i;return{courts:{...r.courts,[n]:{...r.courts[n],visible:((i=r.courts[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("track-")?e(r=>{var i;return{tracks:{...r.tracks,[n]:{...r.tracks[n],visible:((i=r.tracks[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("motif-")?e(r=>{var i;return{motifs:{...r.motifs,[n]:{...r.motifs[n],visible:((i=r.motifs[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("shape-")?e(r=>{var i;return{shapes:{...r.shapes,[n]:{...r.shapes[n],visible:((i=r.shapes[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("text-")?e(r=>{var i;return{texts:{...r.texts,[n]:{...r.texts[n],visible:((i=r.texts[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("exclusion-")&&e(r=>{var i;return{exclusionZones:{...r.exclusionZones,[n]:{...r.exclusionZones[n],visible:((i=r.exclusionZones[n])==null?void 0:i.visible)===!1}}}}),t().addToHistory()},setLineColor:(n,r,i)=>{e(s=>({courts:{...s.courts,[n]:{...s.courts[n],lineColorOverrides:{...s.courts[n].lineColorOverrides,[r]:i}}}})),t().addToHistory()},setZoneColor:(n,r,i)=>{e(s=>({courts:{...s.courts,[n]:{...s.courts[n],zoneColorOverrides:{...s.courts[n].zoneColorOverrides,[r]:i}}}})),t().addToHistory()},resetCourtColors:n=>{e(r=>({courts:{...r.courts,[n]:{...r.courts[n],lineColorOverrides:{},zoneColorOverrides:{}}}})),t().addToHistory()},setCourtSurfaceColor:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],courtSurfaceColor:r}}})),t().addToHistory()},selectCourt:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedCourtId:n,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedCourtId:n,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectCourt:()=>{e({selectedCourtId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},setElementOrder:n=>{e({elementOrder:n})},moveElementUp:n=>{const{elementOrder:r}=t(),i=r.indexOf(n);if(i<r.length-1){const s=[...r];[s[i],s[i+1]]=[s[i+1],s[i]],e({elementOrder:s}),t().addToHistory()}},moveElementDown:n=>{const{elementOrder:r}=t(),i=r.indexOf(n);if(i>0){const s=[...r];[s[i],s[i-1]]=[s[i-1],s[i]],e({elementOrder:s}),t().addToHistory()}},bringToFront:n=>{const{elementOrder:r}=t(),i=r.filter(s=>s!==n);i.push(n),e({elementOrder:i}),t().addToHistory()},sendToBack:n=>{const{elementOrder:r}=t(),i=r.filter(s=>s!==n);i.unshift(n),e({elementOrder:i}),t().addToHistory()},addTrack:(n,r)=>{const i=`track-${Date.now()}`,s=t().surface,a=s.width_mm,o=s.length_mm,c=x=>({RH01:{tpv_code:"RH01",hex:"#A5362F",name:"Standard Red"},RH31:{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},RH30:{tpv_code:"RH30",hex:"#E4C4AA",name:"Standard Beige"},RH20:{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},RH12:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"}})[x]||{tpv_code:x,hex:"#A5362F",name:"Standard Red"},h=r.defaultTrackSurfaceColor?c(r.defaultTrackSurfaceColor):c("RH01"),d=c("RH31"),p=r.trackType==="straight";let m,g,v;const w={enabled:!1,depth_mm:800,lineWidth_mm:50,style:"staggered",direction:"counterclockwise",startPosition:0};if(p){const x=r.parameters.numLanes,k=r.parameters.laneWidth_mm,P=x*k,j=Math.max(a,o)*.9,M=r.parameters.height_mm||1e5,S=Math.min(M,j);m={...r.parameters,width_mm:P,height_mm:S,cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},laneWidth_mm:k,startingBoxes:{...w,...r.parameters.startingBoxes}},v=90,g={x:a/2-P/2,y:o/2-S/2}}else{const x=a*.9,k=o*.9,P=r.parameters.width_mm||25e3,j=r.parameters.height_mm||15e3,M=x/P,S=k/j,B=Math.min(M,S),D=r.parameters.cornerRadius||{topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},R={topLeft:D.topLeft*B,topRight:D.topRight*B,bottomLeft:D.bottomLeft*B,bottomRight:D.bottomRight*B};m={...r.parameters,width_mm:x,height_mm:k,cornerRadius:R,laneWidth_mm:r.parameters.laneWidth_mm,startingBoxes:{...w,...r.parameters.startingBoxes}},v=0,g={x:a/2-x/2,y:o/2-k/2}}const C={id:i,templateId:n,template:r,position:g,rotation:v,parameters:m,trackSurfaceColor:h,laneSurfaceColors:[],trackLineColor:d};e(x=>({tracks:{...x.tracks,[i]:C},elementOrder:[...x.elementOrder,i],selectedTrackId:i,selectedCourtId:null})),t().addToHistory()},removeTrack:n=>{const{[n]:r,...i}=t().tracks;e(s=>({tracks:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedTrackId:s.selectedTrackId===n?null:s.selectedTrackId})),t().addToHistory()},updateTrackParameters:(n,r)=>{e(i=>{var p;const s=i.tracks[n];if(!s)return i;const a=s.parameters,o={...a,...r},c=((p=s.template)==null?void 0:p.trackType)==="straight";let h=s.position,d=s.laneSurfaceColors||[];if(r.numLanes!==void 0&&r.numLanes!==a.numLanes&&r.numLanes<a.numLanes&&(d=d.slice(0,r.numLanes)),c&&r.numLanes!==void 0&&r.numLanes!==a.numLanes){const m=a.laneWidth_mm,g=a.numLanes*m,v=r.numLanes*m;o.width_mm=v;const w=s.position.x+g/2,C=s.position.y+a.height_mm/2;h={x:w-v/2,y:C-o.height_mm/2}}return{tracks:{...i.tracks,[n]:{...s,parameters:o,position:h,laneSurfaceColors:d}}}}),t().addToHistory()},updateTrackPosition:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],position:r}}}))},updateTrackRotation:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],rotation:r}}}))},setTrackSurfaceColor:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],trackSurfaceColor:r}}})),t().addToHistory()},setTrackLineColor:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],trackLineColor:r}}})),t().addToHistory()},setLaneSurfaceColor:(n,r,i)=>{e(s=>{const a=s.tracks[n];if(!a)return s;const o=[...a.laneSurfaceColors||[]];for(;o.length<r;)o.push(null);return o[r-1]=i,{tracks:{...s.tracks,[n]:{...a,laneSurfaceColors:o}}}}),t().addToHistory()},resetLaneSurfaceColors:n=>{e(r=>({tracks:{...r.tracks,[n]:{...r.tracks[n],laneSurfaceColors:[]}}})),t().addToHistory()},selectTrack:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedTrackId:n,selectedCourtId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedTrackId:n,selectedCourtId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectTrack:()=>{e({selectedTrackId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},addMotif:(n,r,i,s,a,o=null,c={})=>{const h=`motif-${Date.now()}`,d=t().surface,p={id:h,type:"motif",sourceDesignId:n,sourceDesignName:r,sourceThumbnailUrl:o,solidSvgContent:c.solidSvgContent||i,blendSvgContent:c.blendSvgContent||null,hasBothVersions:c.hasBothVersions||!1,viewMode:"solid",svgContent:c.solidSvgContent||i,originalWidth_mm:s,originalHeight_mm:a,position:{x:d.width_mm/2-s/2,y:d.length_mm/2-a/2},rotation:0,scale:1};e(m=>({motifs:{...m.motifs,[h]:p},elementOrder:[...m.elementOrder,h],selectedMotifId:h,selectedCourtId:null,selectedTrackId:null})),t().addToHistory()},removeMotif:n=>{const{[n]:r,...i}=t().motifs;e(s=>({motifs:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedMotifId:s.selectedMotifId===n?null:s.selectedMotifId})),t().addToHistory()},updateMotifPosition:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],position:r}}}))},updateMotifRotation:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],rotation:r}}}))},updateMotifScale:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],scale:r}}}))},setMotifViewMode:(n,r)=>{const i=t().motifs[n];if(!i)return;const s=r==="blend"?i.blendSvgContent||i.solidSvgContent:i.solidSvgContent||i.blendSvgContent;e(a=>({motifs:{...a.motifs,[n]:{...a.motifs[n],viewMode:r,svgContent:s}}})),t().addToHistory()},duplicateMotif:n=>{const r=t().motifs[n];if(!r)return;const i=`motif-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({motifs:{...a.motifs,[i]:s},elementOrder:[...a.elementOrder,i],selectedMotifId:i,selectedCourtId:null,selectedTrackId:null})),t().addToHistory()},refreshMotif:async n=>{const r=t().motifs[n];if(!r)return{success:!1,error:"Motif not found"};try{const{fetchMotifFromDesign:i}=await Jz(async()=>{const{fetchMotifFromDesign:c}=await Promise.resolve().then(()=>w9);return{fetchMotifFromDesign:c}},void 0),s=await i(r.sourceDesignId),o=(r.viewMode||"solid")==="blend"?s.blendSvgContent||s.solidSvgContent:s.solidSvgContent||s.blendSvgContent;return e(c=>({motifs:{...c.motifs,[n]:{...c.motifs[n],solidSvgContent:s.solidSvgContent,blendSvgContent:s.blendSvgContent,hasBothVersions:s.hasBothVersions,svgContent:o,sourceThumbnailUrl:s.sourceThumbnailUrl,sourceDesignName:s.sourceDesignName,originalWidth_mm:s.originalWidth_mm,originalHeight_mm:s.originalHeight_mm}},lastModified:Date.now()})),t().addToHistory(),{success:!0}}catch(i){return console.error("[MOTIF] Failed to refresh:",i),{success:!1,error:i.message}}},selectMotif:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedMotifId:n,selectedCourtId:null,selectedTrackId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedMotifId:n,selectedCourtId:null,selectedTrackId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectMotif:()=>{e({selectedMotifId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},addShape:(n="rectangle")=>{const r=`shape-${Date.now()}`,i=t().surface,s=t().shapes,a={rectangle:{sides:4,aspectLocked:!1,width:3e3,height:2e3},square:{sides:4,aspectLocked:!0,width:2e3,height:2e3},circle:{sides:32,aspectLocked:!0,width:2e3,height:2e3},triangle:{sides:3,aspectLocked:!0,width:2e3,height:2e3},pentagon:{sides:5,aspectLocked:!0,width:2e3,height:2e3},hexagon:{sides:6,aspectLocked:!0,width:2e3,height:2e3},polygon:{sides:6,aspectLocked:!0,width:2e3,height:2e3},star:{sides:5,aspectLocked:!0,width:2e3,height:2e3,starMode:!0,innerRadius:.5}},o=[{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},{tpv_code:"RH21",hex:"#493D8C",name:"Purple"},{tpv_code:"RH41",hex:"#FFD833",name:"Bright Yellow"},{tpv_code:"RH26",hex:"#00A6A3",name:"Turquoise"},{tpv_code:"RH02",hex:"#E21F2F",name:"Bright Red"},{tpv_code:"RH90",hex:"#E8457E",name:"Funky Pink"}],c=Object.keys(s).length,h=o[c%o.length];if(n==="blob"){const m=Math.floor(Math.random()*1e5),g="organic",v=wy(g,m),w={id:r,type:"shape",shapeType:"blob",blobStyle:g,seed:m,controlPoints:v,editPointsVisible:!1,numPoints:v.length,blobiness:.2,symmetryMode:"none",radialSymmetryCount:4,width_mm:2e3,height_mm:2e3,position:{x:i.width_mm/2-1e3,y:i.length_mm/2-1e3},rotation:0,fillColor:h,strokeEnabled:!1,strokeColor:null,strokeWidth_mm:50,aspectLocked:!1,locked:!1,visible:!0};e(C=>({shapes:{...C.shapes,[r]:w},elementOrder:[...C.elementOrder,r],selectedShapeId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory();return}const d=a[n]||a.rectangle,p={id:r,type:"shape",shapeType:"polygon",sides:d.sides,width_mm:d.width,height_mm:d.height,cornerRadius:0,starMode:d.starMode||!1,innerRadius:d.innerRadius||.5,position:{x:i.width_mm/2-d.width/2,y:i.length_mm/2-d.height/2},rotation:0,fillColor:h,strokeEnabled:!1,strokeColor:null,strokeWidth_mm:50,aspectLocked:d.aspectLocked,locked:!1,visible:!0};e(m=>({shapes:{...m.shapes,[r]:p},elementOrder:[...m.elementOrder,r],selectedShapeId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory()},removeShape:n=>{const{[n]:r,...i}=t().shapes;e(s=>({shapes:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedShapeId:s.selectedShapeId===n?null:s.selectedShapeId})),t().addToHistory()},updateShapePosition:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],position:r}}}))},updateShapeDimensions:(n,r,i)=>{e(s=>({shapes:{...s.shapes,[n]:{...s.shapes[n],width_mm:r,height_mm:i}}}))},updateShapeSides:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s)return i;const a=Math.max(3,Math.min(32,r));let o=s.width_mm,c=s.height_mm;if(a!==4){const h=Math.min(s.width_mm,s.height_mm);o=h,c=h}return{shapes:{...i.shapes,[n]:{...s,sides:a,width_mm:o,height_mm:c,aspectLocked:a!==4}}}}),t().addToHistory()},updateShapeCornerRadius:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],cornerRadius:Math.max(0,Math.min(100,r))}}})),t().addToHistory()},setShapeStarMode:(n,r)=>{e(i=>{const s=i.shapes[n];return{shapes:{...i.shapes,[n]:{...s,starMode:r,sides:r&&s.sides<3?3:s.sides,innerRadius:s.innerRadius??.5}}}}),t().addToHistory()},setShapeInnerRadius:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],innerRadius:Math.max(.1,Math.min(.9,r))}}})),t().addToHistory()},updateShapeRotation:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],rotation:r}}}))},setShapeFillColor:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],fillColor:r}}})),t().addToHistory()},setShapeStroke:(n,r,i=null,s=50)=>{e(a=>({shapes:{...a.shapes,[n]:{...a.shapes[n],strokeEnabled:r,strokeColor:i,strokeWidth_mm:s}}})),t().addToHistory()},setShapeAspectLock:(n,r)=>{e(i=>{const s=i.shapes[n];return{shapes:{...i.shapes,[n]:{...s,aspectLocked:r}}}}),t().addToHistory()},updateBlobPoints:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=ZS(r,s.blobiness,s.seed);return{shapes:{...i.shapes,[n]:{...s,numPoints:r,controlPoints:a}}}}),t().addToHistory()},updateBlobiness:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=ZS(s.numPoints,r,s.seed);return{shapes:{...i.shapes,[n]:{...s,blobiness:r,controlPoints:a}}}}),t().addToHistory()},randomizeBlob:n=>{e(r=>{const i=r.shapes[n];if(!i||i.shapeType!=="blob")return r;const s=Math.floor(Math.random()*1e5),a=i.blobStyle||"organic",o=wy(a,s);return{shapes:{...r.shapes,[n]:{...i,seed:s,controlPoints:o,numPoints:o.length}}}}),t().addToHistory()},setBlobStyle:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=wy(r,s.seed);return{shapes:{...i.shapes,[n]:{...s,blobStyle:r,controlPoints:a,numPoints:a.length}}}}),t().addToHistory()},setEditPointsVisible:(n,r)=>{e(i=>{const s=i.shapes[n];return!s||s.shapeType!=="blob"&&s.shapeType!=="path"?i:{shapes:{...i.shapes,[n]:{...s,editPointsVisible:r}}}})},resetBlob:n=>{e(r=>{const i=r.shapes[n];if(!i||i.shapeType!=="blob")return r;const s=cF();return{shapes:{...r.shapes,[n]:{...i,blobiness:0,controlPoints:s}}}}),t().addToHistory()},updateBlobControlPoint:(n,r,i,s)=>{e(a=>{const o=a.shapes[n];if(!o||o.shapeType!=="blob"||!o.controlPoints)return a;const c=Math.max(0,Math.min(1,i)),h=Math.max(0,Math.min(1,s)),d=dF(o.controlPoints,r,c,h,o.symmetryMode||"none",o.radialSymmetryCount||4);return{shapes:{...a.shapes,[n]:{...o,controlPoints:d}}}})},updateBlobHandle:(n,r,i,s,a)=>{e(o=>{const c=o.shapes[n];if(!c||c.shapeType!=="blob"||!c.controlPoints)return o;const h=fF(c.controlPoints,r,i,s,a,c.symmetryMode||"none",c.radialSymmetryCount||4);return{shapes:{...o.shapes,[n]:{...c,controlPoints:h}}}})},commitBlobEdit:()=>{t().addToHistory()},setBlobSymmetry:(n,r,i=4)=>{e(s=>{const a=s.shapes[n];return!a||a.shapeType!=="blob"?s:{shapes:{...s.shapes,[n]:{...a,symmetryMode:r,radialSymmetryCount:i}}}}),t().addToHistory()},applyBlobPreset:(n,r)=>{const i=BLOB_PRESETS[r];!i||!i.controlPoints||(e(s=>{const a=s.shapes[n];return!a||a.shapeType!=="blob"?s:{shapes:{...s.shapes,[n]:{...a,numPoints:i.controlPoints.length,blobiness:0,controlPoints:JSON.parse(JSON.stringify(i.controlPoints))}}}}),t().addToHistory())},duplicateShape:n=>{const r=t().shapes[n];if(!r)return;const i=`shape-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({shapes:{...a.shapes,[i]:s},elementOrder:[...a.elementOrder,i],selectedShapeId:i,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory()},selectShape:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectShape:()=>{e({selectedShapeId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},startPathDrawing:()=>{const n=`shape-path-${Date.now()}`,r=t().surface,i=t().shapes,s=[{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},{tpv_code:"RH21",hex:"#493D8C",name:"Purple"}],a=Object.keys(i).length,o=s[a%s.length],c={id:n,type:"shape",shapeType:"path",controlPoints:[],closed:!0,smooth:!1,editPointsVisible:!1,width_mm:r.width_mm,height_mm:r.length_mm,position:{x:0,y:0},rotation:0,fillColor:o,strokeEnabled:!0,strokeColor:{tpv_code:"RH70",hex:"#A8A9AD",name:"Light Grey"},strokeWidth_mm:20,aspectLocked:!1,locked:!1,visible:!0};e({pathDrawingMode:!0,activePathId:n,shapes:{...t().shapes,[n]:c},elementOrder:[...t().elementOrder,n],selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null})},addPointToPath:(n,r)=>{const{activePathId:i,shapes:s,pathDrawingMode:a}=t();if(!a||!i)return;const o=s[i];if(!o||o.shapeType!=="path")return;const c={x:n,y:r,handleIn:{x:0,y:0},handleOut:{x:0,y:0}};e({shapes:{...s,[i]:{...o,controlPoints:[...o.controlPoints,c]}}})},finishPath:()=>{const{activePathId:n,shapes:r,pathDrawingMode:i}=t();if(!i||!n)return;const s=r[n];if(!s)return;if(s.controlPoints.length<3){t().cancelPath();return}const a=s.controlPoints;let o=1/0,c=1/0,h=-1/0,d=-1/0;for(const j of a)o=Math.min(o,j.x),c=Math.min(c,j.y),h=Math.max(h,j.x),d=Math.max(d,j.y);const p=h-o||1,m=d-c||1,g=.05,v=a.map(j=>({...j,x:g+(j.x-o)/p*(1-2*g),y:g+(j.y-c)/m*(1-2*g)})),w=t().surface,C=p*w.width_mm,x=m*w.length_mm,k=o*w.width_mm,P=c*w.length_mm;e({pathDrawingMode:!1,activePathId:null,shapes:{...r,[n]:{...s,controlPoints:v,width_mm:Math.max(500,C),height_mm:Math.max(500,x),position:{x:k,y:P},strokeEnabled:!1}}}),t().addToHistory()},cancelPath:()=>{const{activePathId:n,shapes:r,elementOrder:i}=t();if(!n){e({pathDrawingMode:!1});return}const s={...r};delete s[n],e({pathDrawingMode:!1,activePathId:null,shapes:s,elementOrder:i.filter(a=>a!==n),selectedShapeId:null})},setPathClosed:(n,r)=>{const i=t().shapes[n];!i||i.shapeType!=="path"||(e({shapes:{...t().shapes,[n]:{...i,closed:r}}}),t().addToHistory())},setPathSmooth:(n,r)=>{const i=t().shapes[n];if(!i||i.shapeType!=="path")return;let s=i.controlPoints;r&&i.controlPoints.length>=2?s=_y(i.controlPoints,i.closed,.3):s=i.controlPoints.map(a=>({...a,handleIn:{x:0,y:0},handleOut:{x:0,y:0}})),e({shapes:{...t().shapes,[n]:{...i,smooth:r,controlPoints:s}}}),t().addToHistory()},updatePathControlPoint:(n,r,i,s)=>{const a=t().shapes[n];if(!a||a.shapeType!=="path")return;const o=[...a.controlPoints];o[r]={...o[r],x:i,y:s},e({shapes:{...t().shapes,[n]:{...a,controlPoints:o}}})},updatePathHandle:(n,r,i,s,a)=>{const o=t().shapes[n];if(!o||o.shapeType!=="path")return;const c=[...o.controlPoints];c[r]={...c[r],[i]:{x:s,y:a}},e({shapes:{...t().shapes,[n]:{...o,controlPoints:c}}})},addPointToExistingPath:(n,r,i,s)=>{const a=t().shapes[n];if(!a||a.shapeType!=="path")return;const o=pF(a.controlPoints,r,i,s),c=a.smooth?_y(o,a.closed,.3):o;e({shapes:{...t().shapes,[n]:{...a,controlPoints:c}}}),t().addToHistory()},removePointFromPath:(n,r)=>{const i=t().shapes[n];if(!i||i.shapeType!=="path")return;const s=i.closed?3:2,a=mF(i.controlPoints,r,s);if(!a){console.log("[STORE] Cannot remove point - minimum reached");return}const o=i.smooth?_y(a,i.closed,.3):a;e({shapes:{...t().shapes,[n]:{...i,controlPoints:o}}}),t().addToHistory()},commitPathEdit:()=>{t().addToHistory()},addText:()=>{const{surface:n}=t(),r=`text-${Date.now()}`,i={id:r,type:"text",content:"Text",fontFamily:"Open Sans, sans-serif",fontSize_mm:500,scale_x:1,scale_y:1,fontWeight:"normal",fontStyle:"normal",textAlign:"left",position:{x:n.width_mm/2,y:n.length_mm/2},rotation:0,fillColor:{tpv_code:"RH70",hex:"#1C1C1C",name:"Black"},strokeColor:null,strokeWidth_mm:0,locked:!1,visible:!0,customName:null};e(s=>({texts:{...s.texts,[r]:i},elementOrder:[...s.elementOrder,r],selectedTextId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,showPropertiesPanel:!0})),t().addToHistory()},removeText:n=>{e(r=>{const{[n]:i,...s}=r.texts;return{texts:s,elementOrder:r.elementOrder.filter(a=>a!==n),selectedTextId:r.selectedTextId===n?null:r.selectedTextId}}),t().addToHistory()},selectText:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedTextId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedExclusionZoneId:null}:{selectedTextId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectText:()=>{e({selectedTextId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},updateTextContent:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],content:r}}}))},updateTextPosition:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],position:r}}}))},updateTextScale:(n,r,i)=>{e(s=>({texts:{...s.texts,[n]:{...s.texts[n],scale_x:Math.max(.01,r),scale_y:Math.max(.01,i)}}}))},updateTextFontSize:(n,r)=>{if(!t().texts[n])return;const a=r/500;e(o=>({texts:{...o.texts,[n]:{...o.texts[n],scale_x:Math.max(.01,a),scale_y:Math.max(.01,a)}}})),t().addToHistory()},updateTextFont:(n,r,i,s)=>{e(a=>({texts:{...a.texts,[n]:{...a.texts[n],fontFamily:r,fontWeight:i,fontStyle:s}}})),t().addToHistory()},updateTextAlign:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],textAlign:r}}})),t().addToHistory()},updateTextRotation:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],rotation:r}}}))},setTextFillColor:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],fillColor:r}}})),t().addToHistory()},setTextStrokeColor:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],strokeColor:r}}})),t().addToHistory()},updateTextStrokeWidth:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],strokeWidth_mm:r}}}))},duplicateText:n=>{const{texts:r}=t(),i=r[n];if(!i)return;const s=`text-${Date.now()}`,a={...i,id:s,position:{x:i.position.x+500,y:i.position.y+500},customName:i.customName?`${i.customName} (copy)`:null};e(o=>({texts:{...o.texts,[s]:a},elementOrder:[...o.elementOrder,s],selectedTextId:s,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null})),t().addToHistory()},addExclusionZone:(n="rectangle")=>{const r=`exclusion-${Date.now()}`,i=t().surface,s={rectangle:{shapeType:"polygon",sides:4,width:3e3,height:2e3},square:{shapeType:"polygon",sides:4,width:2e3,height:2e3},circle:{shapeType:"polygon",sides:32,width:2e3,height:2e3},"l-shape":{shapeType:"path",width:4e3,height:3e3},custom:{shapeType:"path",width:3e3,height:3e3}},a=s[n]||s.rectangle,o={id:r,type:"exclusion",shapeType:a.shapeType,sides:a.sides||4,width_mm:a.width,height_mm:a.height,position:{x:i.width_mm/2-a.width/2,y:i.length_mm/2-a.height/2},rotation:0,cornerRadius:0,locked:!1,visible:!0,customName:null,controlPoints:a.shapeType==="path"?gF(n):null};e(c=>({exclusionZones:{...c.exclusionZones,[r]:o},selectedExclusionZoneId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null})),t().addToHistory()},removeExclusionZone:n=>{const{[n]:r,...i}=t().exclusionZones;e(s=>({exclusionZones:i,selectedExclusionZoneId:s.selectedExclusionZoneId===n?null:s.selectedExclusionZoneId})),t().addToHistory()},updateExclusionZonePosition:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],position:r}}}))},updateExclusionZoneDimensions:(n,r,i)=>{e(s=>({exclusionZones:{...s.exclusionZones,[n]:{...s.exclusionZones[n],width_mm:r,height_mm:i}}}))},updateExclusionZoneRotation:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],rotation:r}}}))},updateExclusionZoneCornerRadius:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],cornerRadius:Math.max(0,Math.min(100,r))}}})),t().addToHistory()},selectExclusionZone:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedExclusionZoneId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null}:{selectedExclusionZoneId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,showPropertiesPanel:!0})},deselectExclusionZone:()=>{e({selectedExclusionZoneId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},duplicateExclusionZone:n=>{const r=t().exclusionZones[n];if(!r)return;const i=`exclusion-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500},customName:r.customName?`${r.customName} (copy)`:null};e(a=>({exclusionZones:{...a.exclusionZones,[i]:s},selectedExclusionZoneId:i,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null})),t().addToHistory()},calculateGroupBounds:n=>{var c,h,d,p,m,g;const r=t();let i=1/0,s=1/0,a=-1/0,o=-1/0;for(const v of n)if(v.startsWith("shape-")){const w=r.shapes[v];if(w){const C=w.position.x,x=w.position.y;i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+w.width_mm),o=Math.max(o,x+w.height_mm)}}else if(v.startsWith("text-")){const w=r.texts[v];if(w){const C=w.fontSize_mm||500,x=w.scale_x||1,k=w.scale_y||1,P=w.content||"Text",j=C*.5,S=P.length*j*x,B=C*k;let D,R;const ee=w.textAlign||"left";ee==="center"?(D=w.position.x-S/2,R=w.position.x+S/2):ee==="right"?(D=w.position.x-S,R=w.position.x):(D=w.position.x,R=w.position.x+S);const ue=w.position.y-B,ie=w.position.y+C*.2*k;i=Math.min(i,D),s=Math.min(s,ue),a=Math.max(a,R),o=Math.max(o,ie)}}else if(v.startsWith("court-")){const w=r.courts[v];if(w){const C=w.position.x,x=w.position.y,k=w.scale||1,P=(((h=(c=w.template)==null?void 0:c.dimensions)==null?void 0:h.width_mm)||0)*k,j=(((p=(d=w.template)==null?void 0:d.dimensions)==null?void 0:p.length_mm)||0)*k;i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+P),o=Math.max(o,x+j)}}else if(v.startsWith("track-")){const w=r.tracks[v];if(w){const C=w.position.x,x=w.position.y,k=w.scale||1,P=(((m=w.parameters)==null?void 0:m.width_mm)||5e3)*k,j=(((g=w.parameters)==null?void 0:g.height_mm)||1e4)*k;i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+P),o=Math.max(o,x+j)}}else if(v.startsWith("motif-")){const w=r.motifs[v];if(w){const C=w.position.x,x=w.position.y,k=(w.originalWidth_mm||1e3)*(w.scale||1),P=(w.originalHeight_mm||1e3)*(w.scale||1);i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+k),o=Math.max(o,x+P)}}return i===1/0?{x:0,y:0,width:0,height:0}:{x:i,y:s,width:a-i,height:o-s}},createGroup:(n,r={})=>{if(!n||n.length<2)return null;const i=`group-${Date.now()}`,s=t().calculateGroupBounds(n),a={id:i,type:"group",childIds:[...n],compoundType:r.compoundType||null,generatorSeed:r.generatorSeed||null,customName:r.customName||null,locked:!1,visible:!0,bounds:s};return e(o=>{const c=Math.min(...n.map(d=>o.elementOrder.indexOf(d)).filter(d=>d>=0)),h=o.elementOrder.filter(d=>!n.includes(d));return h.splice(c,0,i),{groups:{...o.groups,[i]:a},elementOrder:h,selectedGroupId:i,selectedShapeId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,selectedElementIds:[]}}),t().addToHistory(),i},ungroup:n=>{const r=t().groups[n];r&&(e(i=>{const s=i.elementOrder.indexOf(n),a=i.elementOrder.filter(h=>h!==n);a.splice(s,0,...r.childIds);const{[n]:o,...c}=i.groups;return{groups:c,elementOrder:a,selectedGroupId:null,selectedElementIds:[...r.childIds]}}),t().addToHistory())},selectGroup:n=>{const{propertiesPanelUserClosed:r}=t();e({selectedGroupId:n,selectedShapeId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,editingGroupId:null,selectedElementIds:[],showPropertiesPanel:!r})},deselectGroup:()=>{const n=t().editingGroupId;n&&t().refreshGroupBounds(n),e({selectedGroupId:null,editingGroupId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},enterGroup:n=>{e({editingGroupId:n,selectedGroupId:null})},exitGroup:()=>{const n=t().editingGroupId;n&&(t().refreshGroupBounds(n),e({editingGroupId:null,selectedGroupId:n,selectedShapeId:null}))},updateGroupPosition:(n,r,i)=>{const s=t().groups[n];s&&e(a=>{const o={...a.shapes},c={...a.texts},h={...a.courts},d={...a.tracks},p={...a.motifs};for(const g of s.childIds)g.startsWith("shape-")&&o[g]?o[g]={...o[g],position:{x:o[g].position.x+r,y:o[g].position.y+i}}:g.startsWith("text-")&&c[g]?c[g]={...c[g],position:{x:c[g].position.x+r,y:c[g].position.y+i}}:g.startsWith("court-")&&h[g]?h[g]={...h[g],position:{x:h[g].position.x+r,y:h[g].position.y+i}}:g.startsWith("track-")&&d[g]?d[g]={...d[g],position:{x:d[g].position.x+r,y:d[g].position.y+i}}:g.startsWith("motif-")&&p[g]&&(p[g]={...p[g],position:{x:p[g].position.x+r,y:p[g].position.y+i}});const m={...s.bounds,x:s.bounds.x+r,y:s.bounds.y+i};return{shapes:o,texts:c,courts:h,tracks:d,motifs:p,groups:{...a.groups,[n]:{...s,bounds:m}}}})},commitGroupMove:()=>{t().addToHistory()},updateGroupScale:(n,r,i,s,a=null)=>{const o=t().groups[n];o&&e(c=>{const h={...c.shapes},d={...c.texts},p={...c.courts},m={...c.tracks},g={...c.motifs};for(const w of o.childIds){const C=a==null?void 0:a[w];if(w.startsWith("shape-")){const x=h[w];if(x){const k=(C==null?void 0:C.position)||x.position,P=(C==null?void 0:C.width_mm)||x.width_mm,j=(C==null?void 0:C.height_mm)||x.height_mm,M=k.x-s.x,S=k.y-s.y;h[w]={...x,position:{x:s.x+M*r,y:s.y+S*i},width_mm:P*r,height_mm:j*i}}}else if(w.startsWith("text-")){const x=d[w];if(x){const k=(C==null?void 0:C.position)||x.position,P=(C==null?void 0:C.width_mm)||x.width_mm||1e3,j=(C==null?void 0:C.height_mm)||x.height_mm||500,M=(C==null?void 0:C.fontSize)||x.fontSize||200,S=k.x-s.x,B=k.y-s.y;d[w]={...x,position:{x:s.x+S*r,y:s.y+B*i},width_mm:P*r,height_mm:j*i,fontSize:M*Math.min(r,i)}}}else if(w.startsWith("court-")){const x=p[w];if(x){const k=(C==null?void 0:C.position)||x.position,P=(C==null?void 0:C.scale)||x.scale||1,j=k.x-s.x,M=k.y-s.y,S=r===1?i:i===1?r:Math.min(r,i);p[w]={...x,position:{x:s.x+j*r,y:s.y+M*i},scale:P*S}}}else if(w.startsWith("track-")){const x=m[w];if(x){const k=(C==null?void 0:C.position)||x.position,P=(C==null?void 0:C.scale)||x.scale||1,j=k.x-s.x,M=k.y-s.y,S=r===1?i:i===1?r:Math.min(r,i);m[w]={...x,position:{x:s.x+j*r,y:s.y+M*i},scale:P*S}}}else if(w.startsWith("motif-")){const x=g[w];if(x){const k=(C==null?void 0:C.position)||x.position,P=(C==null?void 0:C.scale)||x.scale||1,j=k.x-s.x,M=k.y-s.y,S=r===1?i:i===1?r:Math.min(r,i);g[w]={...x,position:{x:s.x+j*r,y:s.y+M*i},scale:P*S}}}}const v=t().calculateGroupBounds(o.childIds);return{shapes:h,texts:d,courts:p,tracks:m,motifs:g,groups:{...c.groups,[n]:{...o,bounds:v}}}})},updateGroupRotation:(n,r,i,s=null)=>{const a=t().groups[n];if(!a)return;const o=(c,h,d,p,m)=>{const g=m*Math.PI/180,v=Math.cos(g),w=Math.sin(g),C=c-d,x=h-p;return{x:d+C*v-x*w,y:p+C*w+x*v}};e(c=>{var v,w,C,x,k,P;const h={...c.shapes},d={...c.texts},p={...c.courts},m={...c.tracks},g={...c.motifs};for(const j of a.childIds){const M=s==null?void 0:s[j];if(j.startsWith("shape-")){const S=h[j];if(S){const B=(M==null?void 0:M.position)||S.position,D=(M==null?void 0:M.rotation)||S.rotation||0,R=B.x+(S.width_mm||0)/2,ee=B.y+(S.height_mm||0)/2,ue=o(R,ee,i.x,i.y,r);h[j]={...S,position:{x:ue.x-(S.width_mm||0)/2,y:ue.y-(S.height_mm||0)/2},rotation:(D+r)%360}}}else if(j.startsWith("text-")){const S=d[j];if(S){const B=(M==null?void 0:M.position)||S.position,D=(M==null?void 0:M.rotation)||S.rotation||0,R=B.x+(S.width_mm||0)/2,ee=B.y+(S.height_mm||0)/2,ue=o(R,ee,i.x,i.y,r);d[j]={...S,position:{x:ue.x-(S.width_mm||0)/2,y:ue.y-(S.height_mm||0)/2},rotation:(D+r)%360}}}else if(j.startsWith("court-")){const S=p[j];if(S){const B=(M==null?void 0:M.position)||S.position,D=(M==null?void 0:M.rotation)||S.rotation||0,R=S.scale||1,ee=(((w=(v=S.template)==null?void 0:v.dimensions)==null?void 0:w.width_mm)||0)*R,ue=(((x=(C=S.template)==null?void 0:C.dimensions)==null?void 0:x.length_mm)||0)*R,ie=B.x+ee/2,ge=B.y+ue/2,H=o(ie,ge,i.x,i.y,r);p[j]={...S,position:{x:H.x-ee/2,y:H.y-ue/2},rotation:(D+r)%360}}}else if(j.startsWith("track-")){const S=m[j];if(S){const B=(M==null?void 0:M.position)||S.position,D=(M==null?void 0:M.rotation)||S.rotation||0,R=S.scale||1,ee=(((k=S.parameters)==null?void 0:k.width_mm)||5e3)*R,ue=(((P=S.parameters)==null?void 0:P.height_mm)||1e4)*R,ie=B.x+ee/2,ge=B.y+ue/2,H=o(ie,ge,i.x,i.y,r);m[j]={...S,position:{x:H.x-ee/2,y:H.y-ue/2},rotation:(D+r)%360}}}else if(j.startsWith("motif-")){const S=g[j];if(S){const B=(M==null?void 0:M.position)||S.position,D=(M==null?void 0:M.rotation)||S.rotation||0,R=S.scale||1,ee=(S.originalWidth_mm||0)*R,ue=(S.originalHeight_mm||0)*R,ie=B.x+ee/2,ge=B.y+ue/2,H=o(ie,ge,i.x,i.y,r);g[j]={...S,position:{x:H.x-ee/2,y:H.y-ue/2},rotation:(D+r)%360}}}}return{shapes:h,texts:d,courts:p,tracks:m,motifs:g}})},addToSelection:n=>{e(r=>{if(r.selectedElementIds.includes(n))return{selectedElementIds:r.selectedElementIds.filter(a=>a!==n)};let i=[...r.selectedElementIds];const s=r.selectedShapeId||r.selectedTextId||r.selectedCourtId||r.selectedTrackId||r.selectedMotifId||r.selectedExclusionZoneId;return s&&!i.includes(s)&&i.push(s),i.push(n),{selectedElementIds:i,selectedShapeId:null,selectedGroupId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null}})},clearMultiSelection:()=>{e({selectedElementIds:[]})},groupSelected:()=>{const{selectedElementIds:n}=t();n.length<2||t().createGroup(n)},alignElements:n=>{const{selectedElementIds:r,shapes:i,texts:s,courts:a,tracks:o,motifs:c}=t();if(r.length<2)return;const h=k=>{const P=k.fontSize_mm||500,j=k.scale_x||1,M=k.scale_y||1,S=k.content||"Text",B=P*.5,D=S.length*B*j,R=P*M,ee=P*1.2*M;let ue=k.position.x;const ie=k.textAlign||"left";return ie==="center"?ue=k.position.x-D/2:ie==="right"&&(ue=k.position.x-D),{x:ue,y:k.position.y-R,width:D,height:ee,baselineOffset:R,alignOffset:k.position.x-ue}},d=r.map(k=>{var P,j,M,S,B,D;if(k.startsWith("shape-")){const R=i[k];if(R)return{id:k,type:"shape",x:R.position.x,y:R.position.y,width:R.width_mm||0,height:R.height_mm||0}}if(k.startsWith("text-")){const R=s[k];if(R){const ee=h(R);return{id:k,type:"text",...ee}}}if(k.startsWith("court-")){const R=a[k];if(R){const ee=R.scale||1;return{id:k,type:"court",x:R.position.x,y:R.position.y,width:(((j=(P=R.template)==null?void 0:P.dimensions)==null?void 0:j.width_mm)||0)*ee,height:(((S=(M=R.template)==null?void 0:M.dimensions)==null?void 0:S.length_mm)||0)*ee}}}if(k.startsWith("track-")){const R=o[k];if(R){const ee=R.scale||1;return{id:k,type:"track",x:R.position.x,y:R.position.y,width:(((B=R.parameters)==null?void 0:B.width_mm)||5e3)*ee,height:(((D=R.parameters)==null?void 0:D.height_mm)||1e4)*ee}}}if(k.startsWith("motif-")){const R=c[k];if(R)return{id:k,type:"motif",x:R.position.x,y:R.position.y,width:(R.originalWidth_mm||1e3)*(R.scale||1),height:(R.originalHeight_mm||1e3)*(R.scale||1)}}return null}).filter(Boolean);if(d.length<2)return;const p=Math.min(...d.map(k=>k.x)),m=Math.max(...d.map(k=>k.x+k.width)),g=Math.min(...d.map(k=>k.y)),v=Math.max(...d.map(k=>k.y+k.height)),w=(p+m)/2,C=(g+v)/2,x={};for(const k of d){let P=k.x,j=k.y;switch(n){case"left":P=p;break;case"center":P=w-k.width/2;break;case"right":P=m-k.width;break;case"top":j=g;break;case"middle":j=C-k.height/2;break;case"bottom":j=v-k.height;break}(P!==k.x||j!==k.y)&&(x[k.id]={x:P,y:j,type:k.type,baselineOffset:k.baselineOffset,alignOffset:k.alignOffset})}e(k=>{const P={...k.shapes},j={...k.texts},M={...k.courts},S={...k.tracks},B={...k.motifs};for(const[D,R]of Object.entries(x))R.type==="shape"&&P[D]?P[D]={...P[D],position:{x:R.x,y:R.y}}:R.type==="text"&&j[D]?j[D]={...j[D],position:{x:R.x+(R.alignOffset||0),y:R.y+(R.baselineOffset||0)}}:R.type==="court"&&M[D]?M[D]={...M[D],position:{x:R.x,y:R.y}}:R.type==="track"&&S[D]?S[D]={...S[D],position:{x:R.x,y:R.y}}:R.type==="motif"&&B[D]&&(B[D]={...B[D],position:{x:R.x,y:R.y}});return{shapes:P,texts:j,courts:M,tracks:S,motifs:B}}),t().addToHistory()},distributeElements:n=>{const{selectedElementIds:r,shapes:i,texts:s,courts:a,tracks:o,motifs:c}=t();if(r.length<3)return;const h=r.map(x=>{var k,P,j,M,S,B;if(x.startsWith("shape-")){const D=i[x];if(D)return{id:x,type:"shape",x:D.position.x,y:D.position.y,width:D.width_mm||0,height:D.height_mm||0}}if(x.startsWith("text-")){const D=s[x];if(D){const R=D.fontSize_mm||500,ee=D.scale_x||1,ue=D.scale_y||1,ie=D.content||"Text",ge=D.textAlign||"left",H=R*.5,Ae=ie.length*H*ee,we=R*ue,Be=R*1.2*ue;let xe,Le=0;ge==="center"?(xe=D.position.x-Ae/2,Le=Ae/2):ge==="right"?(xe=D.position.x-Ae,Le=Ae):(xe=D.position.x,Le=0);const Ce=D.position.y-we;return{id:x,type:"text",x:xe,y:Ce,width:Ae,height:Be,alignOffset:Le,baselineOffset:we}}}if(x.startsWith("court-")){const D=a[x];if(D){const R=D.scale||1;return{id:x,type:"court",x:D.position.x,y:D.position.y,width:(((P=(k=D.template)==null?void 0:k.dimensions)==null?void 0:P.width_mm)||0)*R,height:(((M=(j=D.template)==null?void 0:j.dimensions)==null?void 0:M.length_mm)||0)*R}}}if(x.startsWith("track-")){const D=o[x];if(D){const R=D.scale||1;return{id:x,type:"track",x:D.position.x,y:D.position.y,width:(((S=D.parameters)==null?void 0:S.width_mm)||5e3)*R,height:(((B=D.parameters)==null?void 0:B.height_mm)||1e4)*R}}}if(x.startsWith("motif-")){const D=c[x];if(D)return{id:x,type:"motif",x:D.position.x,y:D.position.y,width:(D.originalWidth_mm||1e3)*(D.scale||1),height:(D.originalHeight_mm||1e3)*(D.scale||1)}}return null}).filter(Boolean);if(h.length<3)return;const d={},p=n==="horizontal"||n==="center-horizontal",m=n==="center-horizontal"||n==="center-vertical",g=[...h].sort((x,k)=>p?m?x.x+x.width/2-(k.x+k.width/2):x.x-k.x:m?x.y+x.height/2-(k.y+k.height/2):x.y-k.y),v=g[0],w=g[g.length-1],C=g.length;if(m){let x,k;p?(x=v.x+v.width/2,k=w.x+w.width/2):(x=v.y+v.height/2,k=w.y+w.height/2);const P=(k-x)/(C-1);for(let j=0;j<g.length;j++){const M=g[j];let S=M.x,B=M.y;p?S=x+j*P-M.width/2:B=x+j*P-M.height/2,(S!==M.x||B!==M.y)&&(d[M.id]={x:S,y:B,type:M.type,alignOffset:M.alignOffset,baselineOffset:M.baselineOffset})}}else{let x,k;p?(x=w.x+w.width-v.x,k=g.reduce((M,S)=>M+S.width,0)):(x=w.y+w.height-v.y,k=g.reduce((M,S)=>M+S.height,0));const P=(x-k)/(C-1);let j=p?v.x:v.y;for(const M of g){let S=M.x,B=M.y;p?(S=j,j+=M.width+P):(B=j,j+=M.height+P),(S!==M.x||B!==M.y)&&(d[M.id]={x:S,y:B,type:M.type,alignOffset:M.alignOffset,baselineOffset:M.baselineOffset})}}e(x=>{const k={...x.shapes},P={...x.texts},j={...x.courts},M={...x.tracks},S={...x.motifs};for(const[B,D]of Object.entries(d))D.type==="shape"&&k[B]?k[B]={...k[B],position:{x:D.x,y:D.y}}:D.type==="text"&&P[B]?P[B]={...P[B],position:{x:D.x+(D.alignOffset||0),y:D.y+(D.baselineOffset||0)}}:D.type==="court"&&j[B]?j[B]={...j[B],position:{x:D.x,y:D.y}}:D.type==="track"&&M[B]?M[B]={...M[B],position:{x:D.x,y:D.y}}:D.type==="motif"&&S[B]&&(S[B]={...S[B],position:{x:D.x,y:D.y}});return{shapes:k,texts:P,courts:j,tracks:M,motifs:S}}),t().addToHistory()},copySelection:()=>{const{selectedElementIds:n,selectedGroupId:r,groups:i,shapes:s,texts:a}=t();if(r){const h=i[r];if(!h)return;const d=h.childIds.map(p=>s[p]?{type:"shape",data:JSON.parse(JSON.stringify(s[p]))}:a[p]?{type:"text",data:JSON.parse(JSON.stringify(a[p]))}:null).filter(Boolean);e({clipboard:{type:"group",groupData:JSON.parse(JSON.stringify(h)),children:d}});return}if(n.length>0){const h=n.map(d=>s[d]?{type:"shape",data:JSON.parse(JSON.stringify(s[d]))}:a[d]?{type:"text",data:JSON.parse(JSON.stringify(a[d]))}:null).filter(Boolean);e({clipboard:{type:"elements",data:h}});return}const{selectedShapeId:o,selectedTextId:c}=t();o&&s[o]?e({clipboard:{type:"elements",data:[{type:"shape",data:JSON.parse(JSON.stringify(s[o]))}]}}):c&&a[c]&&e({clipboard:{type:"elements",data:[{type:"text",data:JSON.parse(JSON.stringify(a[c]))}]}})},pasteClipboard:()=>{const{clipboard:n}=t();if(!n)return;const r=500;if(n.type==="group"){const i=`group-${Date.now()}`,s=[],a=Date.now();e(o=>{const c={...o.shapes},h={...o.texts};let d=[...o.elementOrder];n.children.forEach((m,g)=>{const v=`${m.type}-${a}-${g}`;s.push(v),m.type==="shape"?c[v]={...m.data,id:v,position:{x:m.data.position.x+r,y:m.data.position.y+r}}:m.type==="text"&&(h[v]={...m.data,id:v,position:{x:m.data.position.x+r,y:m.data.position.y+r}})});const p={...n.groupData,id:i,childIds:s,customName:n.groupData.customName?`${n.groupData.customName} (copy)`:"Group (copy)",bounds:{...n.groupData.bounds,x:n.groupData.bounds.x+r,y:n.groupData.bounds.y+r}};return d.push(i),{shapes:c,texts:h,groups:{...o.groups,[i]:p},elementOrder:d,selectedGroupId:i,selectedShapeId:null,selectedTextId:null,selectedElementIds:[]}})}else{const i=Date.now(),s=[];e(a=>{const o={...a.shapes},c={...a.texts};let h=[...a.elementOrder];return n.data.forEach((d,p)=>{const m=`${d.type}-${i}-${p}`;s.push(m),d.type==="shape"?(o[m]={...d.data,id:m,position:{x:d.data.position.x+r,y:d.data.position.y+r}},h.push(m)):d.type==="text"&&(c[m]={...d.data,id:m,position:{x:d.data.position.x+r,y:d.data.position.y+r}},h.push(m))}),{shapes:o,texts:c,elementOrder:h,selectedElementIds:s.length>1?s:[],selectedShapeId:s.length===1&&n.data[0].type==="shape"?s[0]:null,selectedTextId:s.length===1&&n.data[0].type==="text"?s[0]:null,selectedGroupId:null}})}t().addToHistory()},removeGroup:n=>{t().ungroup(n)},deleteGroupWithChildren:n=>{const r=t().groups[n];r&&(e(i=>{const s={...i.shapes},a={...i.texts},o={...i.courts},c={...i.tracks},h={...i.motifs},d={...i.exclusionZones};for(const v of r.childIds)v.startsWith("shape-")?delete s[v]:v.startsWith("text-")?delete a[v]:v.startsWith("court-")?delete o[v]:v.startsWith("track-")?delete c[v]:v.startsWith("motif-")?delete h[v]:v.startsWith("exclusion-")&&delete d[v];const{[n]:p,...m}=i.groups,g=i.elementOrder.filter(v=>v!==n&&!r.childIds.includes(v));return{shapes:s,texts:a,courts:o,tracks:c,motifs:h,exclusionZones:d,groups:m,elementOrder:g,selectedGroupId:null,selectedShapeId:null}}),t().addToHistory())},refreshGroupBounds:n=>{const r=t().groups[n];if(!r)return;const i=t().calculateGroupBounds(r.childIds);e(s=>({groups:{...s.groups,[n]:{...r,bounds:i}}}))},addCustomMarking:n=>{e(r=>({customMarkings:[...r.customMarkings,{...n,id:`custom-${Date.now()}`}]})),t().addToHistory()},removeCustomMarking:n=>{e(r=>({customMarkings:r.customMarkings.filter(i=>i.id!==n)})),t().addToHistory()},addBackgroundZone:n=>{e(r=>({backgroundZones:[...r.backgroundZones,{...n,id:`zone-${Date.now()}`}]})),t().addToHistory()},removeBackgroundZone:n=>{e(r=>({backgroundZones:r.backgroundZones.filter(i=>i.id!==n)})),t().addToHistory()},setDesignName:n=>{e({designName:n})},setDesignDescription:n=>{e({designDescription:n})},setDesignTags:n=>{e({designTags:n})},addToHistory:()=>{const n=t(),r=JSON.parse(JSON.stringify({surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones}));e(i=>{const s=i.history.slice(0,i.historyIndex+1);return s.push(r),s.length>i.maxHistory&&s.shift(),{history:s,historyIndex:s.length-1}}),t().markDirty()},undo:()=>{const{history:n,historyIndex:r}=t();if(r>0){const i=n[r-1];e({surface:i.surface,courts:i.courts,tracks:i.tracks,motifs:i.motifs,shapes:i.shapes,texts:i.texts,exclusionZones:i.exclusionZones,groups:i.groups,elementOrder:i.elementOrder,customMarkings:i.customMarkings,backgroundZones:i.backgroundZones,historyIndex:r-1})}},redo:()=>{const{history:n,historyIndex:r}=t();if(r<n.length-1){const i=n[r+1];e({surface:i.surface,courts:i.courts,tracks:i.tracks,motifs:i.motifs,shapes:i.shapes,texts:i.texts,exclusionZones:i.exclusionZones,groups:i.groups,elementOrder:i.elementOrder,customMarkings:i.customMarkings,backgroundZones:i.backgroundZones,historyIndex:r+1})}},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().history.length-1,selectDesignForSave:()=>{const n=t();return{surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones,designName:n.designName,designDescription:n.designDescription,designTags:n.designTags}},hashDesignState:n=>{const r=JSON.stringify(n);let i=5381;for(let s=0;s<r.length;s++)i=(i<<5)+i+r.charCodeAt(s);return(i>>>0).toString(36)},markDirty:()=>{e({isDirty:!0}),t().scheduleAutosave()},setInteracting:n=>{e({isInteracting:n})},scheduleAutosave:()=>{const n=t();n.autosaveTimer&&clearTimeout(n.autosaveTimer);const r=setTimeout(()=>{const i=t();if(i.isInteracting){t().scheduleAutosave();return}if(i.isDirty){const s=t().selectDesignForSave(),a=t().hashDesignState(s);a!==i.lastSavedHash?(console.log("[AUTOSAVE] Design changed, would save here"),e({isDirty:!1,lastSavedHash:a,lastSaved:new Date().toISOString()})):e({isDirty:!1})}},15e3);e({autosaveTimer:r})},clearAutosaveTimer:()=>{const n=t().autosaveTimer;n&&(clearTimeout(n),e({autosaveTimer:null}))},getComplexityScore:()=>{const n=t(),r=Object.keys(n.courts).length,i=Object.keys(n.tracks).length,s=Object.keys(n.motifs).length,a=Object.keys(n.shapes).length,o=Object.keys(n.texts).length,c=Object.keys(n.exclusionZones).length,h=r+i+s+a+o+c,d=Object.values(n.shapes).filter(g=>g.type==="path"||g.type==="blob").length,p=n.surface.width_mm*n.surface.length_mm/1e6,m=h+s*3+d*2+Math.floor(p/100);return{score:m,elementCount:h,courtCount:r,trackCount:i,motifCount:s,shapeCount:a,textCount:o,pathCount:d,areaSqM:p,isLarge:m>50,isHuge:m>100}},toggleCourtLibrary:()=>{e(n=>({showCourtLibrary:!n.showCourtLibrary}))},togglePropertiesPanel:()=>{e(n=>({showPropertiesPanel:!n.showPropertiesPanel,propertiesPanelUserClosed:!!n.showPropertiesPanel}))},setShowPropertiesPanel:n=>{e({showPropertiesPanel:n,propertiesPanelUserClosed:!n})},setMobileLibraryOpen:n=>e({mobileLibraryOpen:n}),setMobilePropertiesOpen:n=>e({mobilePropertiesOpen:n}),setMobileColoursOpen:n=>e({mobileColoursOpen:n}),setMobileActiveTab:n=>e({mobileActiveTab:n}),closeMobileSheets:()=>e({mobileLibraryOpen:!1,mobilePropertiesOpen:!1,mobileColoursOpen:!1}),toggleColorEditor:()=>{e(n=>({showColorEditor:!n.showColorEditor}))},toggleSnapToGrid:()=>{e(n=>({snapToGrid:!n.snapToGrid}))},setGridSize:n=>{e({gridSize_mm:n})},setZoom:n=>{e({zoom:Math.max(.25,Math.min(5,n))})},toggleStandaloneMode:()=>{e(n=>({standaloneMode:!n.standaloneMode}))},setStandaloneMode:(n,r=null)=>{e({standaloneMode:n,standaloneDesignId:r})},setSaving:n=>{e({isSaving:n})},setLastSaved:n=>{e({lastSaved:n})},loadDesign:n=>{let r=n.elementOrder;!r&&(n.courtOrder||n.trackOrder)&&(r=[...n.trackOrder||[],...n.courtOrder||[]]),e({surface:n.surface||ky.surface,courts:n.courts||{},tracks:n.tracks||{},motifs:n.motifs||{},shapes:n.shapes||{},texts:n.texts||{},exclusionZones:n.exclusionZones||{},groups:n.groups||{},elementOrder:r||[],customMarkings:n.customMarkings||[],backgroundZones:n.backgroundZones||[],designName:n.name||"Untitled Design",designDescription:n.description||"",designTags:n.tags||[],selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,selectedGroupId:null,editingGroupId:null,history:[],historyIndex:-1}),t().addToHistory()},exportDesignData:()=>{const n=t();return{surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones,name:n.designName,description:n.designDescription,tags:n.designTags}},resetDesign:()=>{e(ky)},hasUnsavedChanges:()=>{const n=t();return Object.keys(n.courts).length>0||Object.keys(n.tracks).length>0||Object.keys(n.motifs).length>0||Object.keys(n.shapes).length>0||Object.keys(n.texts).length>0||Object.keys(n.exclusionZones).length>0}}),{name:"SportsDesignStore"})),JS={inputMode:"prompt",prompt:"",lengthMM:5e3,widthMM:5e3,selectedFileName:null,uploadedFileUrl:null,arMapping:null,result:null,jobId:null,blendRecipes:null,blendSvgUrl:null,colorMapping:null,blendEditedColors:new Map,solidRecipes:null,solidSvgUrl:null,solidColorMapping:null,solidEditedColors:new Map,viewMode:"solid",showFinalRecipes:!1,showSolidSummary:!1,regionOverrides:new Map,originalTaggedSvg:null,regionOverridesHistory:[new Map],historyIndex:0,designName:"",currentDesignId:null,hasGeneratedContent:!1,lastModified:null},eg=YP(XP((e,t)=>({...JS,setInputMode:n=>e({inputMode:n}),setPrompt:n=>e({prompt:n,lastModified:Date.now()}),setDimensions:(n,r)=>e({widthMM:n,lengthMM:r,lastModified:Date.now()}),setArMapping:n=>e({arMapping:n}),setSelectedFile:(n,r)=>e({selectedFileName:n,uploadedFileUrl:r,lastModified:Date.now()}),clearSelectedFile:()=>e({selectedFileName:null,uploadedFileUrl:null}),setGenerationResult:(n,r)=>e({result:n,jobId:r,hasGeneratedContent:!0,lastModified:Date.now()}),setResult:n=>e({result:n,hasGeneratedContent:!!n,lastModified:Date.now()}),setJobId:n=>e({jobId:n}),setBlendState:(n,r,i)=>e({blendRecipes:n,colorMapping:r,blendSvgUrl:i,lastModified:Date.now()}),setBlendRecipes:n=>e({blendRecipes:n,lastModified:Date.now()}),setColorMapping:n=>e({colorMapping:n,lastModified:Date.now()}),setBlendSvgUrl:n=>e({blendSvgUrl:n}),setBlendEditedColors:n=>e({blendEditedColors:n,lastModified:Date.now()}),updateBlendSvgUrl:n=>e({blendSvgUrl:n}),setSolidState:(n,r,i)=>e({solidRecipes:n,solidColorMapping:r,solidSvgUrl:i,lastModified:Date.now()}),setSolidRecipes:n=>e({solidRecipes:n,lastModified:Date.now()}),setSolidColorMapping:n=>e({solidColorMapping:n,lastModified:Date.now()}),setSolidSvgUrl:n=>e({solidSvgUrl:n}),setSolidEditedColors:n=>e({solidEditedColors:n,lastModified:Date.now()}),updateSolidSvgUrl:n=>e({solidSvgUrl:n}),setViewMode:n=>{if(n==="blend"){console.log("[STORE] Blend mode disabled - forcing solid mode");return}e({viewMode:n})},setShowFinalRecipes:n=>e({showFinalRecipes:n}),setShowSolidSummary:n=>e({showSolidSummary:n}),setOriginalTaggedSvg:n=>e({originalTaggedSvg:n}),setRegionOverrides:n=>e({regionOverrides:n,lastModified:Date.now()}),addRegionOverride:(n,r)=>{const i=new Map(t().regionOverrides),s=typeof r=="string"?{hex:r}:r;i.set(n,s);const a=t().regionOverridesHistory,o=t().historyIndex,c=a.slice(0,o+1);c.push(new Map(i)),c.length>50&&c.shift(),e({regionOverrides:i,regionOverridesHistory:c,historyIndex:c.length-1,lastModified:Date.now()})},setRegionOverridesHistory:n=>{e(typeof n=="function"?{regionOverridesHistory:n(t().regionOverridesHistory)}:{regionOverridesHistory:n})},setHistoryIndex:n=>{e(typeof n=="function"?{historyIndex:n(t().historyIndex)}:{historyIndex:n})},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().regionOverridesHistory.length-1,undo:()=>{const{historyIndex:n,regionOverridesHistory:r}=t();if(n>0){const i=n-1;e({historyIndex:i,regionOverrides:new Map(r[i])})}},redo:()=>{const{historyIndex:n,regionOverridesHistory:r}=t();if(n<r.length-1){const i=n+1;e({historyIndex:i,regionOverrides:new Map(r[i])})}},setRegionOverridesHistory:(n,r)=>e({regionOverridesHistory:n,historyIndex:r}),setDesignName:n=>e({designName:n}),setCurrentDesignId:n=>e({currentDesignId:n}),loadDesign:n=>{const r=n.regionOverrides||new Map,i=r.size>0?[new Map,new Map(r)]:[new Map],s=r.size>0?1:0;e({inputMode:n.inputMode||"prompt",prompt:n.prompt||"",lengthMM:n.lengthMM||5e3,widthMM:n.widthMM||5e3,uploadedFileUrl:n.selectedFile||null,result:n.result||null,blendRecipes:n.blendRecipes||null,solidRecipes:n.solidRecipes||null,colorMapping:n.colorMapping||null,solidColorMapping:n.solidColorMapping||null,solidEditedColors:n.solidEditedColors||new Map,blendEditedColors:n.blendEditedColors||new Map,blendSvgUrl:n.blendSvgUrl||null,solidSvgUrl:n.solidSvgUrl||null,viewMode:"solid",arMapping:n.arMapping||null,jobId:n.jobId||null,showFinalRecipes:n.showFinalRecipes||!1,showSolidSummary:n.showSolidSummary||!1,hasGeneratedContent:!!n.result,regionOverrides:r,originalTaggedSvg:n.originalTaggedSvg||null,regionOverridesHistory:i,historyIndex:s,lastModified:Date.now()})},exportDesignData:()=>{const n=t();return{inputMode:n.inputMode,prompt:n.prompt,lengthMM:n.lengthMM,widthMM:n.widthMM,uploadedFileUrl:n.uploadedFileUrl,result:n.result,blendRecipes:n.blendRecipes,solidRecipes:n.solidRecipes,colorMapping:n.colorMapping,solidColorMapping:n.solidColorMapping,solidEditedColors:n.solidEditedColors,blendEditedColors:n.blendEditedColors,viewMode:n.viewMode,arMapping:n.arMapping,jobId:n.jobId,showFinalRecipes:n.showFinalRecipes,showSolidSummary:n.showSolidSummary,regionOverrides:n.regionOverrides,designName:n.designName,currentDesignId:n.currentDesignId}},resetDesign:()=>{const{blendSvgUrl:n,solidSvgUrl:r}=t();n&&n.startsWith("blob:")&&URL.revokeObjectURL(n),r&&r.startsWith("blob:")&&URL.revokeObjectURL(r),e({...JS,blendEditedColors:new Map,solidEditedColors:new Map,regionOverrides:new Map,regionOverridesHistory:[new Map]})},hasUnsavedChanges:()=>{const n=t();return n.hasGeneratedContent||n.prompt.trim()!==""||n.selectedFileName!==null}}),{name:"PlaygroundDesignStore"})),JP={"basketball-full":{id:"basketball-full",name:"Basketball (Full Court)",sport:"basketball",standard:"FIBA 2020",category:"court",description:"Official FIBA standard full basketball court with all markings",dimensions:{length_mm:28e3,width_mm:15e3,min_surround_mm:2e3},defaultSurfaceColor:"RH20",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15e3,height:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:14e3,x2:15e3,y2:14e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7500,cy:14e3,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-arc-top",name:"Three-Point Arc (Top)",type:"arc",params:{cx:7500,cy:26425,radius:6750,startAngle:192,endAngle:348},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-arc-bottom",name:"Three-Point Arc (Bottom)",type:"arc",params:{cx:7500,cy:1575,radius:6750,startAngle:12,endAngle:168},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-bottom-left",name:"Three-Point Line Bottom Left",type:"line",params:{x1:900,y1:0,x2:900,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-bottom-right",name:"Three-Point Line Bottom Right",type:"line",params:{x1:14100,y1:0,x2:14100,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-top-left",name:"Three-Point Line Top Left",type:"line",params:{x1:900,y1:25010,x2:900,y2:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-top-right",name:"Three-Point Line Top Right",type:"line",params:{x1:14100,y1:25010,x2:14100,y2:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-top",name:"Free Throw Line (Top)",type:"line",params:{x1:5050,y1:22200,x2:9950,y2:22200},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-bottom",name:"Free Throw Line (Bottom)",type:"line",params:{x1:5050,y1:5800,x2:9950,y2:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle-top",name:"Free Throw Circle (Top)",type:"circle",params:{cx:7500,cy:22200,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle-bottom",name:"Free Throw Circle (Bottom)",type:"circle",params:{cx:7500,cy:5800,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane-top",name:"Key Lane (Top)",type:"rectangle",params:{x:5050,y:22200,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane-bottom",name:"Key Lane (Bottom)",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area-top",name:"Restricted Area (Top)",type:"arc",params:{cx:7500,cy:28e3,radius:1250,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area-bottom",name:"Restricted Area (Bottom)",type:"arc",params:{cx:7500,cy:0,radius:1250,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"key-area-top",name:"Key Area (Top)",type:"rectangle",params:{x:5050,y:22200,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"key-area-bottom",name:"Key Area (Bottom)",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42}]},"netball-full":{id:"netball-full",name:"Netball (Full Court)",sport:"netball",standard:"World Netball 2020",category:"court",description:"Official World Netball standard court with goal circles and thirds",dimensions:{length_mm:30500,width_mm:15250,min_surround_mm:3050},defaultSurfaceColor:"RH01",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15250,height:30500},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"transverse-line-1",name:"Transverse Line 1",type:"line",params:{x1:0,y1:10167,x2:15250,y2:10167},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"transverse-line-2",name:"Transverse Line 2",type:"line",params:{x1:0,y1:20333,x2:15250,y2:20333},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7625,cy:15250,radius:450},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-circle-bottom",name:"Goal Circle (Bottom)",type:"arc",params:{cx:7625,cy:0,radius:4900,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-circle-top",name:"Goal Circle (Top)",type:"arc",params:{cx:7625,cy:30500,radius:4900,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"tennis-doubles":{id:"tennis-doubles",name:"Tennis (Doubles)",sport:"tennis",standard:"ITF 2020",category:"court",description:"Official ITF standard doubles tennis court with all service boxes",dimensions:{length_mm:23770,width_mm:10970,min_surround_mm:3660},defaultSurfaceColor:"RH22",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:10970,height:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"singles-sideline-left",name:"Singles Sideline (Left)",type:"line",params:{x1:1370,y1:0,x2:1370,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"singles-sideline-right",name:"Singles Sideline (Right)",type:"line",params:{x1:9600,y1:0,x2:9600,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:6400,x2:10970,y2:6400},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17370,x2:10970,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:5485,y1:6400,x2:5485,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-bottom",name:"Center Mark (Bottom)",type:"line",params:{x1:5485,y1:0,x2:5485,y2:100},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-top",name:"Center Mark (Top)",type:"line",params:{x1:5485,y1:23670,x2:5485,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"futsal-standard":{id:"futsal-standard",name:"Futsal (5-a-side)",sport:"futsal",standard:"FIFA 2020",category:"court",description:"Official FIFA standard futsal court for international matches",dimensions:{length_mm:4e4,width_mm:2e4,min_surround_mm:1e3},defaultSurfaceColor:"RH50",defaultLineColor:"RH30",defaultLineWidth_mm:80,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:2e4,height:4e4},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:2e4,x2:2e4,y2:2e4},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:1e4,cy:2e4,radius:3e3},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"center-spot",name:"Center Spot",type:"circle",params:{cx:1e4,cy:2e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-area-bottom",name:"Penalty Area (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:6e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-area-top",name:"Penalty Area (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:6e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-mark-bottom",name:"Penalty Mark (Bottom)",type:"circle",params:{cx:1e4,cy:6e3,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-mark-top",name:"Penalty Mark (Top)",type:"circle",params:{cx:1e4,cy:34e3,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"second-penalty-mark-bottom",name:"Second Penalty Mark (Bottom)",type:"circle",params:{cx:1e4,cy:1e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"second-penalty-mark-top",name:"Second Penalty Mark (Top)",type:"circle",params:{cx:1e4,cy:3e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-bl",name:"Corner Arc (Bottom Left)",type:"arc",params:{cx:0,cy:0,radius:250,startAngle:0,endAngle:90},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-br",name:"Corner Arc (Bottom Right)",type:"arc",params:{cx:2e4,cy:0,radius:250,startAngle:90,endAngle:180},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-tl",name:"Corner Arc (Top Left)",type:"arc",params:{cx:0,cy:4e4,radius:250,startAngle:270,endAngle:360},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-tr",name:"Corner Arc (Top Right)",type:"arc",params:{cx:2e4,cy:4e4,radius:250,startAngle:180,endAngle:270},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"}],zones:[]},"volleyball-indoor":{id:"volleyball-indoor",name:"Volleyball (Indoor)",sport:"volleyball",standard:"FIVB",category:"court",description:"Official FIVB standard indoor volleyball court with attack lines",dimensions:{length_mm:18e3,width_mm:9e3,min_surround_mm:3e3},defaultSurfaceColor:"RH40",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:9e3,height:18e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:9e3,x2:9e3,y2:9e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"attack-line-bottom",name:"Attack Line (Bottom)",type:"line",params:{x1:0,y1:6e3,x2:9e3,y2:6e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"attack-line-top",name:"Attack Line (Top)",type:"line",params:{x1:0,y1:12e3,x2:9e3,y2:12e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"badminton-full":{id:"badminton-full",name:"Badminton (Full Court)",sport:"badminton",standard:"BWF",category:"court",description:"Official BWF standard full badminton court with singles and doubles lines",dimensions:{length_mm:13400,width_mm:6100,min_surround_mm:1e3},defaultSurfaceColor:"RH26",defaultLineColor:"RH12",defaultLineWidth_mm:40,markings:[{id:"boundary",name:"Boundary Lines (Doubles)",type:"rectangle",params:{x:0,y:0,width:6100,height:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"boundary"},{id:"singles-sideline-left",name:"Singles Sideline (Left)",type:"line",params:{x1:460,y1:0,x2:460,y2:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"singles-sideline-right",name:"Singles Sideline (Right)",type:"line",params:{x1:5640,y1:0,x2:5640,y2:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"short-service-line-bottom",name:"Short Service Line (Bottom)",type:"line",params:{x1:0,y1:1980,x2:6100,y2:1980},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"short-service-line-top",name:"Short Service Line (Top)",type:"line",params:{x1:0,y1:11420,x2:6100,y2:11420},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"doubles-long-service-line-bottom",name:"Doubles Long Service Line (Bottom)",type:"line",params:{x1:0,y1:760,x2:6100,y2:760},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"doubles-long-service-line-top",name:"Doubles Long Service Line (Top)",type:"line",params:{x1:0,y1:12640,x2:6100,y2:12640},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:3050,y1:1980,x2:3050,y2:11420},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"}],zones:[]},"pickleball-standard":{id:"pickleball-standard",name:"Pickleball",sport:"pickleball",standard:"USA Pickleball",category:"court",description:"Official USA Pickleball standard court with non-volley zone (kitchen)",dimensions:{length_mm:13410,width_mm:6100,min_surround_mm:1e3},defaultSurfaceColor:"RH11",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:6100,height:13410},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"non-volley-zone-line-bottom",name:"Non-Volley Zone Line (Bottom)",type:"line",params:{x1:0,y1:2130,x2:6100,y2:2130},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"non-volley-zone-line-top",name:"Non-Volley Zone Line (Top)",type:"line",params:{x1:0,y1:11280,x2:6100,y2:11280},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-line",name:"Center Line (Net)",type:"line",params:{x1:0,y1:6705,x2:6100,y2:6705},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:3050,y1:0,x2:3050,y2:13410},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"basketball-half":{id:"basketball-half",name:"Basketball (Half Court / 3x3)",sport:"basketball",standard:"FIBA 3x3",category:"court",description:"Half-court basketball for 3x3 games, practice, or space-constrained areas",dimensions:{length_mm:11e3,width_mm:15e3,min_surround_mm:2e3},defaultSurfaceColor:"RH20",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15e3,height:11e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"three-point-arc",name:"Three-Point Arc",type:"arc",params:{cx:7500,cy:1575,radius:6750,startAngle:12,endAngle:168},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-left",name:"Three-Point Line (Left)",type:"line",params:{x1:900,y1:0,x2:900,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-right",name:"Three-Point Line (Right)",type:"line",params:{x1:14100,y1:0,x2:14100,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line",name:"Free Throw Line",type:"line",params:{x1:5050,y1:5800,x2:9950,y2:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle",name:"Free Throw Circle",type:"circle",params:{cx:7500,cy:5800,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane",name:"Key Lane",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area",name:"Restricted Area",type:"arc",params:{cx:7500,cy:0,radius:1250,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"key-area",name:"Key Area",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42}]},"tennis-singles":{id:"tennis-singles",name:"Tennis (Singles)",sport:"tennis",standard:"ITF",category:"court",description:"Singles-only tennis court without doubles alleys",dimensions:{length_mm:23770,width_mm:8230,min_surround_mm:3660},defaultSurfaceColor:"RH22",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:8230,height:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:6400,x2:8230,y2:6400},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17370,x2:8230,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:4115,y1:6400,x2:4115,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-bottom",name:"Center Mark (Bottom)",type:"line",params:{x1:4115,y1:0,x2:4115,y2:100},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-top",name:"Center Mark (Top)",type:"line",params:{x1:4115,y1:23670,x2:4115,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"mini-tennis-red":{id:"mini-tennis-red",name:"Mini Tennis (Red Court)",sport:"tennis",standard:"ITF Play+Stay",category:"court",description:"Beginner/youth court for red stage tennis coaching (36ft)",dimensions:{length_mm:10970,width_mm:5490,min_surround_mm:2e3},defaultSurfaceColor:"RH02",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:5490,height:10970},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"net-line",name:"Net Line",type:"line",params:{x1:0,y1:5485,x2:5490,y2:5485},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:2745,x2:5490,y2:2745},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:8225,x2:5490,y2:8225},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:2745,y1:2745,x2:2745,y2:8225},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"padel-standard":{id:"padel-standard",name:"Padel",sport:"padel",standard:"FIP",category:"court",description:"Official FIP padel court with service boxes",dimensions:{length_mm:2e4,width_mm:1e4,min_surround_mm:0},defaultSurfaceColor:"RH60",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:1e4,height:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"net-line",name:"Net Line",type:"line",params:{x1:0,y1:1e4,x2:1e4,y2:1e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:3e3,x2:1e4,y2:3e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17e3,x2:1e4,y2:17e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line-bottom",name:"Center Service Line (Bottom)",type:"line",params:{x1:5e3,y1:0,x2:5e3,y2:3e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line-top",name:"Center Service Line (Top)",type:"line",params:{x1:5e3,y1:17e3,x2:5e3,y2:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-line",name:"Center Line",type:"line",params:{x1:5e3,y1:3e3,x2:5e3,y2:17e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"handball-standard":{id:"handball-standard",name:"Handball",sport:"handball",standard:"IHF",category:"court",description:"Official IHF handball court with goal areas and penalty lines",dimensions:{length_mm:4e4,width_mm:2e4,min_surround_mm:1e3},defaultSurfaceColor:"RH10",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:2e4,height:4e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:2e4,x2:2e4,y2:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-area-bottom",name:"Goal Area (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:6e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-area-top",name:"Goal Area (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:6e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-bottom",name:"Free-Throw Line (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:9e3,startAngle:0,endAngle:180,dashed:!0,dashPattern:"300 150"},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-top",name:"Free-Throw Line (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:9e3,startAngle:180,endAngle:360,dashed:!0,dashPattern:"300 150"},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"7m-line-bottom",name:"7m Penalty Line (Bottom)",type:"line",params:{x1:9e3,y1:7e3,x2:11e3,y2:7e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"7m-line-top",name:"7m Penalty Line (Top)",type:"line",params:{x1:9e3,y1:33e3,x2:11e3,y2:33e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goalkeeper-line-bottom",name:"Goalkeeper Restriction Line (Bottom)",type:"line",params:{x1:9500,y1:4e3,x2:10500,y2:4e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goalkeeper-line-top",name:"Goalkeeper Restriction Line (Top)",type:"line",params:{x1:9500,y1:36e3,x2:10500,y2:36e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"hockey-d":{id:"hockey-d",name:"Field Hockey D",sport:"hockey",standard:"FIH",category:"overlay",description:"Hockey shooting circle (D) for overlay on sports surfaces",dimensions:{length_mm:14630,width_mm:29260,min_surround_mm:0},defaultSurfaceColor:"RH23",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"shooting-circle",name:"Shooting Circle (D)",type:"arc",params:{cx:14630,cy:0,radius:14630,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-line",name:"Goal Line",type:"line",params:{x1:0,y1:0,x2:29260,y2:0},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"penalty-spot",name:"Penalty Spot",type:"circle",params:{cx:14630,cy:6400,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"hockey-5s":{id:"hockey-5s",name:"Hockey 5s",sport:"hockey",standard:"England Hockey",category:"court",description:"Scaled-down hockey pitch for 5-a-side games",dimensions:{length_mm:55e3,width_mm:41100,min_surround_mm:2e3},defaultSurfaceColor:"RH23",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:41100,height:55e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:27500,x2:41100,y2:27500},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-spot",name:"Center Spot",type:"circle",params:{cx:20550,cy:27500,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"shooting-circle-bottom",name:"Shooting Circle (Bottom)",type:"arc",params:{cx:20550,cy:0,radius:9e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"shooting-circle-top",name:"Shooting Circle (Top)",type:"arc",params:{cx:20550,cy:55e3,radius:9e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"penalty-spot-bottom",name:"Penalty Spot (Bottom)",type:"circle",params:{cx:20550,cy:6400,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"penalty-spot-top",name:"Penalty Spot (Top)",type:"circle",params:{cx:20550,cy:48600,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]}},fi=[{code:"RH01",name:"Standard Red",hex:"#A5362F",R:165,G:54,B:47,L:39.4,a:58.5,b:29},{code:"RH02",name:"Bright Red",hex:"#E21F2F",R:226,G:31,B:47,L:47.4,a:70.1,b:44},{code:"RH10",name:"Standard Green",hex:"#609B63",R:96,G:155,B:99,L:40.5,a:-42.2,b:17.9},{code:"RH11",name:"Bright Green",hex:"#3BB44A",R:59,G:180,B:74,L:62.1,a:-47.7,b:47.2},{code:"RH12",name:"Dark Green",hex:"#006C55",R:0,G:108,B:85,L:39.6,a:-38.3,b:13.1},{code:"RH20",name:"Standard Blue",hex:"#0075BC",R:0,G:117,B:188,L:36.4,a:14.2,b:-46.7},{code:"RH21",name:"Purple",hex:"#493D8C",R:73,G:61,B:140,L:31.5,a:41.9,b:-40.9},{code:"RH22",name:"Light Blue",hex:"#47AFE3",R:71,G:175,B:227,L:55.3,a:-19.1,b:-37.3},{code:"RH23",name:"Azure",hex:"#039DC4",R:3,G:157,B:196,L:47.7,a:-4.8,b:-34.8},{code:"RH26",name:"Turquoise",hex:"#00A6A3",R:0,G:166,B:163,L:58.8,a:-38.4,b:-3},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA",R:228,G:196,B:170,L:75.2,a:3.8,b:24.8},{code:"RH31",name:"Cream",hex:"#E8E3D8",R:232,G:227,B:216,L:91.8,a:-.5,b:12.5},{code:"RH32",name:"Brown",hex:"#8B5F3C",R:139,G:95,B:60,L:40,a:15.9,b:27.1},{code:"RH90",name:"Funky Pink",hex:"#E8457E",R:232,G:69,B:126,L:55,a:66.1,b:4.9},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144",R:229,G:161,B:68,L:66,a:8.4,b:56.3},{code:"RH41",name:"Bright Yellow",hex:"#FFD833",R:255,G:216,B:51,L:86.9,a:-1,b:90.6},{code:"RH50",name:"Orange",hex:"#F15B32",R:241,G:91,B:50,L:63.2,a:49.8,b:60.2},{code:"RH60",name:"Dark Grey",hex:"#59595B",R:89,G:89,B:91,L:34.1,a:-.4,b:-2.4},{code:"RH61",name:"Light Grey",hex:"#939598",R:147,G:149,B:152,L:69,a:-.5,b:-1},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6",R:217,G:217,B:214,L:87.6,a:-.2,b:-.7},{code:"RH70",name:"Black",hex:"#231F20",R:35,G:31,B:32,L:9.1,a:-.3,b:-6.3}];function bF(){return Object.values(JP)}function vF(e){return JP[e]||null}function xF(e,t,n){const{type:r,params:i}=e;switch(r){case"line":return _F(i,t,n);case"rectangle":return kF(i,t,n);case"circle":return SF(i,t,n);case"arc":return CF(i,t,n);case"polyline":return EF(i,t,n);default:return console.warn(`Unknown marking type: ${r}`),null}}function wF(e,t){const{type:n,params:r}=e;switch(n){case"rectangle":return{type:"rect",x:r.x,y:r.y,width:r.width,height:r.height,fill:t};case"circle":return{type:"circle",cx:r.cx,cy:r.cy,r:r.radius,fill:t};case"polygon":return{type:"polygon",points:r.points,fill:t};default:return console.warn(`Unknown zone type: ${n}`),null}}function _F(e,t,n){const r={type:"line",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:t,strokeWidth:n};return e.dashed&&(r.strokeDasharray=e.dashPattern||"200 100"),r}function kF(e,t,n){return{type:"rect",x:e.x,y:e.y,width:e.width,height:e.height,stroke:t,strokeWidth:n,fill:"none"}}function SF(e,t,n){return{type:"circle",cx:e.cx,cy:e.cy,r:e.radius,stroke:t,strokeWidth:n,fill:"none"}}function CF(e,t,n){const{cx:r,cy:i,radius:s,startAngle:a,endAngle:o}=e,c=a*Math.PI/180,h=o*Math.PI/180,d=r+s*Math.cos(c),p=i+s*Math.sin(c),m=r+s*Math.cos(h),g=i+s*Math.sin(h),v=o-a>180?1:0,C={type:"path",d:`M ${d} ${p} A ${s} ${s} 0 ${v} 1 ${m} ${g}`,stroke:t,strokeWidth:n,fill:"none"};return e.dashed&&(C.strokeDasharray=e.dashPattern||"200 100"),C}function EF(e,t,n){return{type:"polyline",points:e.points.map(i=>`${i[0]},${i[1]}`).join(" "),stroke:t,strokeWidth:n,fill:"none"}}function e2(e){if(e&&e.startsWith("#"))return e;const t=fi.find(n=>n.code===e);return t?t.hex:"#000000"}function TF(e){var a;const{template:t,lineColorOverrides:n,zoneColorOverrides:r}=e;if(!t)return console.error("No template provided for court"),{markings:[],zones:[]};const i=t.markings.map(o=>{var p;const c=((p=n[o.id])==null?void 0:p.hex)||t.defaultLineColor,h=e2(c),d=o.lineWidth_mm||t.defaultLineWidth_mm;return{id:o.id,name:o.name,...xF(o,h,d)}}).filter(Boolean),s=((a=t.zones)==null?void 0:a.map(o=>{var d;const c=((d=r[o.id])==null?void 0:d.hex)||o.defaultColor,h=e2(c);return{id:o.id,name:o.name,...wF(o,h)}}).filter(Boolean))||[];return{markings:i,zones:s}}function t2(e,t){return Math.round(e/t)*t}function jF(e,t){return{x:t2(e.x,t),y:t2(e.y,t)}}function eN(e){let t=e%360;return t<0&&(t+=360),t}function yp(e,t,n){const{width_mm:r,length_mm:i}=t,{width_mm:s,length_mm:a}=n,o=500,c=-(r-o),h=s-o,d=-(i-o),p=a-o;return{x:Math.max(c,Math.min(e.x,h)),y:Math.max(d,Math.min(e.y,p))}}function AF(e){const{position:t,rotation:n,scale:r,template:i}=e,s=i.dimensions.width_mm/2,a=i.dimensions.length_mm/2;return`translate(${t.x}, ${t.y}) scale(${r}) rotate(${n}, ${s}, ${a})`}function PF({court:e,svgRef:t}){const{updateCourtRotation:n,updateCourtScale:r,updateCourtPosition:i,addToHistory:s}=nn(),[a,o]=pe.useState(!1),[c,h]=pe.useState(!1),[d,p]=pe.useState(null),[m,g]=pe.useState(null),{template:v,position:w,rotation:C,scale:x}=e,k=v.dimensions.width_mm*x,P=v.dimensions.length_mm*x,j=w.x+v.dimensions.width_mm*x/2,M=w.y+v.dimensions.length_mm*x/2,S=v.dimensions.width_mm/2,B=-1e3,D=(H,ye)=>{if(!t.current)return{x:0,y:0};const Ae=t.current.createSVGPoint();Ae.x=H,Ae.y=ye;const we=Ae.matrixTransform(t.current.getScreenCTM().inverse());return{x:we.x,y:we.y}},R=H=>{H.stopPropagation(),o(!0),g({x:H.clientX,y:H.clientY})},ee=(H,ye)=>{H.stopPropagation(),h(!0),p(ye),g({x:H.clientX,y:H.clientY,initialScale:x,initialWidth:k,initialHeight:P,initialPosition:{...w}})};pe.useEffect(()=>{if(!a&&!c)return;const H=Ae=>{if(a){const we=D(Ae.clientX,Ae.clientY),Be=we.x-j,xe=we.y-M;let Le=Math.atan2(xe,Be)*(180/Math.PI)+90;Le=eN(Le),Ae.shiftKey&&(Le=Math.round(Le/15)*15),n(e.id,Le)}else if(c&&m){const we=D(Ae.clientX,Ae.clientY),Be=D(m.x,m.y),xe=we.x-Be.x,Le=we.y-Be.y;let Ce=m.initialScale,Re={...w};switch(d){case"se":Ce=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm);break;case"nw":Ce=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Re.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*Ce),Re.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*Ce);break;case"ne":Ce=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm),Re.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*Ce);break;case"sw":Ce=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Re.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*Ce);break;case"e":Ce=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm);break;case"w":Ce=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Re.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*Ce);break;case"n":Ce=Math.max(.3,m.initialScale-Le/v.dimensions.length_mm),Re.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*Ce);break;case"s":Ce=Math.max(.3,m.initialScale+Le/v.dimensions.length_mm);break}Ce=Math.min(3,Math.max(.3,Ce)),r(e.id,Ce),(Re.x!==w.x||Re.y!==w.y)&&i(e.id,Re)}},ye=()=>{(a||c)&&s(),o(!1),h(!1),p(null),g(null)};return window.addEventListener("mousemove",H),window.addEventListener("mouseup",ye),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",ye)}},[a,c,m,j,M,e.id,w,x,d]);const ue=[{type:"nw",x:0,y:0,cursor:"nwse-resize"},{type:"n",x:v.dimensions.width_mm/2,y:0,cursor:"ns-resize"},{type:"ne",x:v.dimensions.width_mm,y:0,cursor:"nesw-resize"},{type:"e",x:v.dimensions.width_mm,y:v.dimensions.length_mm/2,cursor:"ew-resize"},{type:"se",x:v.dimensions.width_mm,y:v.dimensions.length_mm,cursor:"nwse-resize"},{type:"s",x:v.dimensions.width_mm/2,y:v.dimensions.length_mm,cursor:"ns-resize"},{type:"sw",x:0,y:v.dimensions.length_mm,cursor:"nesw-resize"},{type:"w",x:0,y:v.dimensions.length_mm/2,cursor:"ew-resize"}],ie=300,ge=250;return u.jsxs("g",{className:"transform-handles",children:[u.jsxs("g",{className:"rotation-handle",onMouseDown:R,style:{cursor:a?"grabbing":"grab"},children:[u.jsx("line",{x1:S,y1:0,x2:S,y2:B+ge,stroke:"#007bff",strokeWidth:30,strokeDasharray:"100 50"}),u.jsx("circle",{cx:S,cy:B,r:ge,fill:"white",stroke:"#007bff",strokeWidth:40}),u.jsx("path",{d:`M ${S-ge*.4} ${B}
              A ${ge*.5} ${ge*.5} 0 1 1 ${S+ge*.4} ${B}`,fill:"none",stroke:"#007bff",strokeWidth:30,strokeLinecap:"round"}),u.jsx("path",{d:`M ${S+ge*.4} ${B}
              L ${S+ge*.6} ${B-ge*.2}
              M ${S+ge*.4} ${B}
              L ${S+ge*.6} ${B+ge*.2}`,fill:"none",stroke:"#007bff",strokeWidth:30,strokeLinecap:"round"})]}),ue.map(H=>u.jsx("rect",{className:`scale-handle scale-handle--${H.type}`,x:H.x-ie/2,y:H.y-ie/2,width:ie,height:ie,fill:"white",stroke:"#007bff",strokeWidth:40,rx:30,ry:30,style:{cursor:c&&d===H.type?"grabbing":H.cursor,pointerEvents:"all"},onMouseDown:ye=>ee(ye,H.type)},H.type)),a&&u.jsxs("text",{x:v.dimensions.width_mm/2,y:-1e3-ge-200,textAnchor:"middle",fontSize:400,fill:"#007bff",fontWeight:"bold",style:{pointerEvents:"none"},children:[Math.round(C),""]}),c&&u.jsxs("text",{x:v.dimensions.width_mm/2,y:v.dimensions.length_mm+600,textAnchor:"middle",fontSize:400,fill:"#007bff",fontWeight:"bold",style:{pointerEvents:"none"},children:[(x*100).toFixed(0),"%"]})]})}function tN(e){const{width_mm:t,height_mm:n,numLanes:r,laneWidth_mm:i,cornerRadius:s={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},lineWidth_mm:a=50}=e,o=[];if(s.topLeft===0&&s.topRight===0&&s.bottomLeft===0&&s.bottomRight===0){const h=r*i;for(let d=0;d<r;d++){const p=d*i;o.push({laneNumber:d+1,innerPath:null,outerPath:NF(i,n,d),perimeter:2*(i+n)/1e3,isParallel:!0,laneX:p,laneWidth:i})}return{lanes:o,totalWidth:h,totalLength:n,usableWidth:h,usableHeight:n,isStraightTrack:!0}}else for(let h=0;h<r;h++){const d=h*i,p=(h+1)*i,m=Math.max(0,t-p*2),g=Math.max(0,n-p*2),v=Math.max(0,t-d*2),w=Math.max(0,n-d*2),C={topLeft:Math.max(0,s.topLeft-p),topRight:Math.max(0,s.topRight-p),bottomLeft:Math.max(0,s.bottomLeft-p),bottomRight:Math.max(0,s.bottomRight-p)},x={topLeft:Math.max(0,s.topLeft-d),topRight:Math.max(0,s.topRight-d),bottomLeft:Math.max(0,s.bottomLeft-d),bottomRight:Math.max(0,s.bottomRight-d)};o.push({laneNumber:h+1,innerPath:n2(m,g,C,p),outerPath:n2(v,w,x,d),perimeter:OF(v,w,x),isParallel:!1})}return{lanes:o,totalWidth:t,totalLength:n,usableWidth:t-r*i*2,usableHeight:n-r*i*2}}function n2(e,t,n,r=0){if(e<=0||t<=0)return`M ${r} ${r} L ${r} ${r}`;const i=Math.min(e/2,t/2),s=Math.min(n.topLeft,i),a=Math.min(n.topRight,i),o=Math.min(n.bottomRight,i),c=Math.min(n.bottomLeft,i),h=r,d=r+e,p=r,m=r+t;return`
    M ${h+s} ${p}
    L ${d-a} ${p}
    ${a>0?`A ${a} ${a} 0 0 1 ${d} ${p+a}`:""}
    L ${d} ${m-o}
    ${o>0?`A ${o} ${o} 0 0 1 ${d-o} ${m}`:""}
    L ${h+c} ${m}
    ${c>0?`A ${c} ${c} 0 0 1 ${h} ${m-c}`:""}
    L ${h} ${p+s}
    ${s>0?`A ${s} ${s} 0 0 1 ${h+s} ${p}`:""}
    Z
  `.trim().replace(/\s+/g," ")}function NF(e,t,n){const r=n*e;return`M ${r} 0 L ${r+e} 0 L ${r+e} ${t} L ${r} ${t} Z`}function OF(e,t,n){if(e<=0||t<=0)return 0;const r=Math.min(e/2,t/2),i=Math.min(n.topLeft,r),s=Math.min(n.topRight,r),a=Math.min(n.bottomRight,r),o=Math.min(n.bottomLeft,r),c=e-i-s,h=t-s-a,d=e-a-o,p=t-o-i,m=Math.PI*i/2,g=Math.PI*s/2,v=Math.PI*a/2,w=Math.PI*o/2;return(c+h+d+p+m+g+v+w)/1e3}function nN(e){if(!e||!e.lanes||e.lanes.length===0)return[];const t=e.lanes.length-1,n=e.lanes[t].perimeter;return e.lanes.map((r,i)=>r.perimeter-n)}function r2(e,t,n){const{width_mm:r,height_mm:i,laneWidth_mm:s,cornerRadius:a={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3}}=n,o=e*s,c=Math.max(0,r-o*2),h=Math.max(0,i-o*2),d=Math.min(c/2,h/2),p=Math.min(Math.max(0,a.topLeft-o),d),m=Math.min(Math.max(0,a.topRight-o),d),g=Math.min(Math.max(0,a.bottomRight-o),d),v=Math.min(Math.max(0,a.bottomLeft-o),d),w=o,C=o+c,x=o,k=o+h,P=[{type:"arc",length:Math.PI*v/2,radius:v,corner:"bottomLeft"},{type:"straight",length:h-v-p,dir:"up"},{type:"arc",length:Math.PI*p/2,radius:p,corner:"topLeft"},{type:"straight",length:c-p-m,dir:"right"},{type:"arc",length:Math.PI*m/2,radius:m,corner:"topRight"},{type:"straight",length:h-m-g,dir:"down"},{type:"arc",length:Math.PI*g/2,radius:g,corner:"bottomRight"},{type:"straight",length:c-g-v,dir:"left"}];let j=t;const M=P.reduce((B,D)=>B+D.length,0);for(;j<0;)j+=M;for(;j>=M;)j-=M;let S=0;for(const B of P){if(j<=S+B.length){const D=j-S,R=B.length>0?D/B.length:0;return B.type==="arc"?RF(B,R,{left:w,right:C,top:x,bottom:k,tl:p,tr:m,br:g,bl:v}):MF(B,R,{left:w,right:C,top:x,bottom:k,tl:p,tr:m,br:g,bl:v})}S+=B.length}return{x:w,y:k-v,angle:-Math.PI/2}}function RF(e,t,n){const{left:r,right:i,top:s,bottom:a,tl:o,tr:c,br:h,bl:d}=n,p=t*(Math.PI/2);switch(e.corner){case"bottomLeft":{const m=r+d,g=a-d,w=Math.PI/2+p;return{x:m+d*Math.cos(w),y:g+d*Math.sin(w),angle:w+Math.PI/2}}case"topLeft":{const m=r+o,g=s+o,w=Math.PI+p;return{x:m+o*Math.cos(w),y:g+o*Math.sin(w),angle:w+Math.PI/2}}case"topRight":{const m=i-c,g=s+c,w=-Math.PI/2+p;return{x:m+c*Math.cos(w),y:g+c*Math.sin(w),angle:w+Math.PI/2}}case"bottomRight":{const m=i-h,g=a-h,w=0+p;return{x:m+h*Math.cos(w),y:g+h*Math.sin(w),angle:w+Math.PI/2}}default:return{x:r,y:s,angle:0}}}function MF(e,t,n){const{left:r,right:i,top:s,bottom:a,tl:o,tr:c,br:h,bl:d}=n;switch(e.dir){case"up":{const p=a-d,m=s+o;return{x:r,y:p+t*(m-p),angle:-Math.PI/2}}case"right":{const p=r+o,m=i-c;return{x:p+t*(m-p),y:s,angle:0}}case"down":{const p=s+c,m=a-h;return{x:i,y:p+t*(m-p),angle:Math.PI/2}}case"left":{const p=i-h,m=r+d;return{x:p+t*(m-p),y:a,angle:Math.PI}}default:return{x:r,y:s,angle:0}}}function i2(e,t,n){const r=r2(e,t,n),i=r2(e+1,t,n);return{x:(r.x+i.x)/2,y:(r.y+i.y)/2,angle:r.angle,innerX:i.x,innerY:i.y,outerX:r.x,outerY:r.y}}function s2(e,t,n){const{width_mm:r,height_mm:i,laneWidth_mm:s,cornerRadius:a={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3}}=n,o=e*s,c=Math.max(0,r-o*2),h=Math.max(0,i-o*2),d=Math.min(c/2,h/2),p=Math.min(Math.max(0,a.topLeft-o),d),m=Math.min(Math.max(0,a.topRight-o),d),g=Math.min(Math.max(0,a.bottomRight-o),d),v=Math.min(Math.max(0,a.bottomLeft-o),d),w=[{type:"arc",length:Math.PI*v/2,corner:"bottomLeft"},{type:"straight",length:h-v-p,dir:"up"},{type:"arc",length:Math.PI*p/2,corner:"topLeft"},{type:"straight",length:c-p-m,dir:"right"},{type:"arc",length:Math.PI*m/2,corner:"topRight"},{type:"straight",length:h-m-g,dir:"down"},{type:"arc",length:Math.PI*g/2,corner:"bottomRight"},{type:"straight",length:c-g-v,dir:"left"}],C=w.reduce((P,j)=>P+j.length,0);let x=t;for(;x<0;)x+=C;for(;x>=C;)x-=C;let k=0;for(let P=0;P<w.length;P++){if(x<=k+w[P].length){const j=x-k,M=w[P].length>0?j/w[P].length:0;return{segmentIndex:P,t:M,segments:w,totalPerimeter:C}}k+=w[P].length}return{segmentIndex:0,t:0,segments:w,totalPerimeter:C}}function a2(e,t,n,r){const i=s2(n,t,r),s=s2(e,0,r);let a=0;for(let h=0;h<i.segmentIndex;h++)a+=s.segments[h].length;const o=s.segments[i.segmentIndex].length;return a+i.t*o}function LF({track:e,svgRef:t}){var H;const{updateTrackParameters:n,updateTrackPosition:r,updateTrackRotation:i,addToHistory:s}=nn(),[a,o]=pe.useState(!1),[c,h]=pe.useState(!1),[d,p]=pe.useState(null),[m,g]=pe.useState(null),{parameters:v,position:w,rotation:C}=e,x=v.width_mm,k=v.height_mm,P=w.x+x/2,j=w.y+k/2,M=x/2,S=-1e3,B=(ye,Ae)=>{if(!t.current)return{x:0,y:0};const we=t.current.createSVGPoint();we.x=ye,we.y=Ae;const Be=we.matrixTransform(t.current.getScreenCTM().inverse());return{x:Be.x,y:Be.y}},D=ye=>{ye.stopPropagation();const Ae=ye.touches?ye.touches[0].clientX:ye.clientX,we=ye.touches?ye.touches[0].clientY:ye.clientY;h(!0),g({x:Ae,y:we})},R=(ye,Ae)=>{var Re;ye.stopPropagation(),o(!0),p(Ae);const we=ye.touches?ye.touches[0].clientX:ye.clientX,Be=ye.touches?ye.touches[0].clientY:ye.clientY,xe=B(we,Be),Le=((Re=e.template)==null?void 0:Re.trackType)==="straight";let Ce={};if(Le){const it=C*Math.PI/180,nt=Math.sin(it),Ue=Math.cos(it),lt=w.x+x/2,de=w.y+k/2,oe=Ae==="n"||Ae==="nw"||Ae==="ne";Ce={fixedEdgeCenter:oe?{x:lt-k/2*nt,y:de+k/2*Ue}:{x:lt+k/2*nt,y:de-k/2*Ue},fixedEdgeIsSouth:oe,sinR:nt,cosR:Ue}}g({screenX:we,screenY:Be,svgX:xe.x,svgY:xe.y,initialWidth:x,initialHeight:k,initialPosition:{...w},initialCornerRadius:{...v.cornerRadius},...Ce})};pe.useEffect(()=>{if(!a&&!c)return;const ye=we=>{var Ne;const Be=we.touches?we.touches[0].clientX:we.clientX,xe=we.touches?we.touches[0].clientY:we.clientY;if(c){const ht=B(Be,xe),jt=ht.x-P,Ct=ht.y-j;let q=Math.atan2(Ct,jt)*(180/Math.PI)+90;q=eN(q),we.shiftKey&&(q=Math.round(q/15)*15),i(e.id,q);return}if(!m)return;const Le=B(Be,xe),Ce=Le.x-m.svgX,Re=Le.y-m.svgY;let it=m.initialWidth,nt=m.initialHeight,Ue={...w},lt={...m.initialCornerRadius};const de=3e3,oe=((Ne=e.template)==null?void 0:Ne.trackType)==="straight";if(oe&&(d==="e"||d==="w"))return;if(oe&&m.fixedEdgeCenter){const{fixedEdgeCenter:ht,fixedEdgeIsSouth:jt,sinR:Ct,cosR:q}=m,Ye=Le.x-ht.x,se=Le.y-ht.y,L=jt?Ct:-Ct,I=jt?-q:q,Q=Ye*L+se*I;nt=Math.max(de,Q);const he=ht.x+nt/2*L,ve=ht.y+nt/2*I;Ue={x:he-it/2,y:ve-nt/2}}else switch(d){case"se":it=Math.max(de,m.initialWidth+Ce),nt=Math.max(de,m.initialHeight+Re);const ht=Math.min(it/m.initialWidth,nt/m.initialHeight);lt={topLeft:m.initialCornerRadius.topLeft*ht,topRight:m.initialCornerRadius.topRight*ht,bottomLeft:m.initialCornerRadius.bottomLeft*ht,bottomRight:m.initialCornerRadius.bottomRight*ht};break;case"nw":it=Math.max(de,m.initialWidth-Ce),nt=Math.max(de,m.initialHeight-Re),Ue.x=m.initialPosition.x+(m.initialWidth-it),Ue.y=m.initialPosition.y+(m.initialHeight-nt);const jt=Math.min(it/m.initialWidth,nt/m.initialHeight);lt={topLeft:m.initialCornerRadius.topLeft*jt,topRight:m.initialCornerRadius.topRight*jt,bottomLeft:m.initialCornerRadius.bottomLeft*jt,bottomRight:m.initialCornerRadius.bottomRight*jt};break;case"ne":it=Math.max(de,m.initialWidth+Ce),nt=Math.max(de,m.initialHeight-Re),Ue.y=m.initialPosition.y+(m.initialHeight-nt);const Ct=Math.min(it/m.initialWidth,nt/m.initialHeight);lt={topLeft:m.initialCornerRadius.topLeft*Ct,topRight:m.initialCornerRadius.topRight*Ct,bottomLeft:m.initialCornerRadius.bottomLeft*Ct,bottomRight:m.initialCornerRadius.bottomRight*Ct};break;case"sw":it=Math.max(de,m.initialWidth-Ce),nt=Math.max(de,m.initialHeight+Re),Ue.x=m.initialPosition.x+(m.initialWidth-it);const q=Math.min(it/m.initialWidth,nt/m.initialHeight);lt={topLeft:m.initialCornerRadius.topLeft*q,topRight:m.initialCornerRadius.topRight*q,bottomLeft:m.initialCornerRadius.bottomLeft*q,bottomRight:m.initialCornerRadius.bottomRight*q};break;case"e":it=Math.max(de,m.initialWidth+Ce);const Ye=it/m.initialWidth;lt={topLeft:m.initialCornerRadius.topLeft*Ye,topRight:m.initialCornerRadius.topRight*Ye,bottomLeft:m.initialCornerRadius.bottomLeft*Ye,bottomRight:m.initialCornerRadius.bottomRight*Ye};break;case"w":it=Math.max(de,m.initialWidth-Ce),Ue.x=m.initialPosition.x+(m.initialWidth-it);const se=it/m.initialWidth;lt={topLeft:m.initialCornerRadius.topLeft*se,topRight:m.initialCornerRadius.topRight*se,bottomLeft:m.initialCornerRadius.bottomLeft*se,bottomRight:m.initialCornerRadius.bottomRight*se};break;case"n":nt=Math.max(de,m.initialHeight-Re),Ue.y=m.initialPosition.y+(m.initialHeight-nt);const L=nt/m.initialHeight;lt={topLeft:m.initialCornerRadius.topLeft*L,topRight:m.initialCornerRadius.topRight*L,bottomLeft:m.initialCornerRadius.bottomLeft*L,bottomRight:m.initialCornerRadius.bottomRight*L};break;case"s":nt=Math.max(de,m.initialHeight+Re);const I=nt/m.initialHeight;lt={topLeft:m.initialCornerRadius.topLeft*I,topRight:m.initialCornerRadius.topRight*I,bottomLeft:m.initialCornerRadius.bottomLeft*I,bottomRight:m.initialCornerRadius.bottomRight*I};break}const We=Math.min(it,nt)/2;lt={topLeft:Math.min(lt.topLeft,We),topRight:Math.min(lt.topRight,We),bottomLeft:Math.min(lt.bottomLeft,We),bottomRight:Math.min(lt.bottomRight,We)},n(e.id,{width_mm:it,height_mm:nt,cornerRadius:lt}),(Ue.x!==w.x||Ue.y!==w.y)&&r(e.id,Ue)},Ae=()=>{(a||c)&&s(),o(!1),h(!1),p(null),g(null)};return window.addEventListener("mousemove",ye),window.addEventListener("mouseup",Ae),window.addEventListener("touchmove",ye,{passive:!1}),window.addEventListener("touchend",Ae),window.addEventListener("touchcancel",Ae),()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",Ae),window.removeEventListener("touchmove",ye),window.removeEventListener("touchend",Ae),window.removeEventListener("touchcancel",Ae)}},[a,m,d,e.id,w,v,n,r,s]);const ee=((H=e.template)==null?void 0:H.trackType)==="straight",ue=[{type:"nw",x:0,y:0,cursor:"nwse-resize"},{type:"n",x:x/2,y:0,cursor:"ns-resize"},{type:"ne",x,y:0,cursor:"nesw-resize"},{type:"e",x,y:k/2,cursor:"ew-resize"},{type:"se",x,y:k,cursor:"nwse-resize"},{type:"s",x:x/2,y:k,cursor:"ns-resize"},{type:"sw",x:0,y:k,cursor:"nesw-resize"},{type:"w",x:0,y:k/2,cursor:"ew-resize"}],ie=ee?ue.filter(ye=>ye.type==="n"||ye.type==="s"):ue,ge=400;return u.jsxs("g",{className:"track-resize-handles",children:[u.jsxs("g",{className:"rotation-handle-group",children:[u.jsx("line",{x1:M,y1:0,x2:M,y2:S,stroke:"#0066CC",strokeWidth:30,strokeDasharray:"100 100",opacity:.5,style:{pointerEvents:"none"}}),u.jsx("circle",{className:"rotation-handle",cx:M,cy:S,r:ge/2,fill:"white",stroke:"#0066CC",strokeWidth:50,style:{cursor:c?"grabbing":"grab",pointerEvents:"all"},onMouseDown:D,onTouchStart:D}),u.jsx("path",{d:`M ${M-100} ${S-50}
              A 100 100 0 1 1 ${M+100} ${S-50}`,fill:"none",stroke:"#0066CC",strokeWidth:40,strokeLinecap:"round",style:{pointerEvents:"none"}}),u.jsx("path",{d:`M ${M+100} ${S-50}
              L ${M+80} ${S-120}
              L ${M+150} ${S-80}
              Z`,fill:"#0066CC",style:{pointerEvents:"none"}})]}),ie.map(ye=>u.jsx("rect",{className:`resize-handle resize-handle--${ye.type}`,x:ye.x-ge/2,y:ye.y-ge/2,width:ge,height:ge,fill:"white",stroke:"#0066CC",strokeWidth:50,rx:40,ry:40,style:{cursor:a&&d===ye.type?"grabbing":ye.cursor,pointerEvents:"all"},onMouseDown:Ae=>R(Ae,ye.type),onTouchStart:Ae=>R(Ae,ye.type)},ye.type)),a&&u.jsxs("text",{x:x/2,y:k+800,textAnchor:"middle",fontSize:400,fill:"#0066CC",fontWeight:"bold",style:{pointerEvents:"none"},children:[(x/1e3).toFixed(1),"m  ",(k/1e3).toFixed(1),"m"]}),c&&u.jsxs("text",{x:x/2,y:-1500,textAnchor:"middle",fontSize:400,fill:"#0066CC",fontWeight:"bold",style:{pointerEvents:"none"},children:[C.toFixed(0),""]})]})}function IF({geometry:e,parameters:t,boxConfig:n,surfaceColor:r,lineColor:i,isStraightTrack:s}){if(!n||!n.enabled)return null;const{depth_mm:a=800,lineWidth_mm:o=50,perLaneOffsets:c=[],style:h="staggered",direction:d="counterclockwise",startPosition:p=0}=n,m="'Black Ops One', 'Impact', sans-serif",g=r||"#A5362F",v=i||"#E8E3D8",w=h==="staggered"||h==="both",C=h==="straight"||h==="both";return u.jsx("g",{className:"starting-boxes",children:e.lanes.map((x,k)=>{const P=k+1;return s?$F(k,P,t,e,a,o,g,v,m,w,C,c,d):DF(k,P,t,e,a,o,g,v,m,w,C,c,d,p)})})}function $F(e,t,n,r,i,s,a,o,c,h,d,p,m){const g=e*n.laneWidth_mm,v=n.laneWidth_mm,w=m==="clockwise",C=w?r.totalLength-i:0,x=w?0:r.totalLength-i,k=(p[e]||0)*1e3,P=[];if(h&&!d){const j=w?C-k:C+k;P.push(u.jsx(bp,{x:g,y:j,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c,flipLine:!w},`stagger-${t}`))}else if(d&&!h)P.push(u.jsx(bp,{x:g,y:C,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c,flipLine:!w},`straight-${t}`));else if(h&&d){const j=w?C-k:C+k;P.push(u.jsx(bp,{x:g,y:j,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c,flipLine:!w},`stagger-${t}`)),P.push(u.jsx(bp,{x:g,y:x,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c,flipLine:w},`straight-${t}`))}return u.jsx("g",{children:P},`lane-boxes-${t}`)}function bp({x:e,y:t,width:n,height:r,laneNumber:i,boxFillColor:s,lineColor:a,lineWidth:o,fontFamily:c,flipLine:h}){const d=h?t+r:t;return u.jsxs("g",{children:[u.jsx("line",{x1:e,y1:d,x2:e+n,y2:d,stroke:a,strokeWidth:o,strokeLinecap:"butt",pointerEvents:"none"}),u.jsx("text",{x:e+n/2,y:t+r/2,fontSize:Math.min(r*.6,n*.5),fill:a,textAnchor:"middle",dominantBaseline:"middle",fontFamily:c,fontWeight:"bold",pointerEvents:"none",opacity:"0.9",children:i})]})}function DF(e,t,n,r,i,s,a,o,c,h,d,p,m,g=0){var D,R;const v=m==="clockwise",w=r.lanes.length-1,C=(((D=r.lanes[w])==null?void 0:D.perimeter)||0)*1e3,x=C/2,k=g/100*C,P=a2(e,k,w,n),M=(((R=r.lanes[e])==null?void 0:R.perimeter)||0)*1e3/2,S=(p[e]||0)*1e3,B=[];if(h&&!d){const ee=v?P+M+S:P+S;B.push(u.jsx(vp,{index:e,laneNumber:t,distance:ee,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c},`stagger-${t}`))}else if(d&&!h){const ee=v?P+M:P;B.push(u.jsx(vp,{index:e,laneNumber:t,distance:ee,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c},`straight-${t}`))}else if(h&&d){const ee=v?P+M+S:P+S,ue=v?k:k+x,ie=a2(e,ue,w,n),ge=ie;B.push(u.jsx(vp,{index:e,laneNumber:t,distance:ee,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c},`stagger-${t}`)),B.push(u.jsx(vp,{index:e,laneNumber:t,distance:ge,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:c},`straight-${t}`))}return u.jsx("g",{children:B},`lane-boxes-${t}`)}function vp({index:e,laneNumber:t,distance:n,depth_mm:r,parameters:i,boxFillColor:s,lineColor:a,lineWidth:o,fontFamily:c}){const h=i2(e,n,i),d=h.angle+Math.PI/2,p=i.laneWidth_mm/2,m=h.x+Math.cos(d)*p,g=h.y+Math.sin(d)*p,v=h.x-Math.cos(d)*p,w=h.y-Math.sin(d)*p,C=i2(e,n+r/2,i);return u.jsxs("g",{children:[u.jsx("line",{x1:m,y1:g,x2:v,y2:w,stroke:a,strokeWidth:o,strokeLinecap:"butt",pointerEvents:"none"}),u.jsx("text",{x:C.x,y:C.y,fontSize:Math.min(r*.6,i.laneWidth_mm*.5),fill:a,textAnchor:"middle",dominantBaseline:"middle",fontFamily:c,fontWeight:"bold",pointerEvents:"none",opacity:"0.9",transform:`rotate(${C.angle*180/Math.PI+90}, ${C.x}, ${C.y})`,children:t})]})}function o2({track:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,svgRef:s}){var D,R,ee;const{parameters:a,position:o,rotation:c,scale:h=1,trackSurfaceColor:d,trackLineColor:p,laneSurfaceColors:m}=e,g=tN(a),v=g.lanes.length>0&&g.lanes[0].isParallel===!0,w=g.totalWidth,C=g.totalLength,x=w/2,k=C/2,P=`translate(${o.x}, ${o.y}) scale(${h}) rotate(${c}, ${x}, ${k})`,j=(d==null?void 0:d.hex)||"#A5362F",M=(p==null?void 0:p.hex)||"#E8E3D8",S=a.lineWidth_mm||50,B=ue=>{const ie=m==null?void 0:m[ue-1];return(ie==null?void 0:ie.hex)||j};return console.log("TrackRenderer - trackSurfaceColor:",d),console.log("TrackRenderer - defaultSurfaceColor:",j),console.log("TrackRenderer - geometry.lanes.length:",g.lanes.length),u.jsxs("g",{className:`track-element ${t?"track-element--selected":""}`,transform:P,style:{cursor:"move"},children:[v?u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"0",y:"0",width:w,height:C,fill:"transparent",pointerEvents:"all",onMouseDown:n,onTouchStart:r,onDoubleClick:i,style:{cursor:"move"}}),g.lanes.map(ue=>u.jsx("path",{d:ue.outerPath,fill:B(ue.laneNumber),stroke:"none",pointerEvents:"none"},`lane-fill-${ue.laneNumber}`))]}):u.jsx(u.Fragment,{children:g.lanes.map((ue,ie)=>{const ge=g.lanes[ie+1],H=ge?ge.outerPath:ue.innerPath,ye=ie===0;return u.jsx("path",{d:`${ue.outerPath} ${H}`,fill:B(ue.laneNumber),fillRule:"evenodd",stroke:"none",pointerEvents:ye?"all":"none",onMouseDown:ye?n:void 0,onTouchStart:ye?r:void 0,onDoubleClick:ye?i:void 0,style:ye?{cursor:"move"}:void 0},`lane-fill-${ue.laneNumber}`)})}),g.lanes.map((ue,ie)=>u.jsx(zF,{lane:ue,lineColor:M,lineWidth:S,isLastLane:ie===g.lanes.length-1,isStraightTrack:v,geometry:g},`stroke-${ue.laneNumber}`)),((D=a.startingBoxes)==null?void 0:D.enabled)&&u.jsx(IF,{geometry:g,parameters:a,boxConfig:{...a.startingBoxes,perLaneOffsets:((R=e.template)==null?void 0:R.trackType)==="curved"?nN(g):[]},surfaceColor:j,lineColor:M,isStraightTrack:((ee=e.template)==null?void 0:ee.trackType)==="straight"}),t&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"-10",y:"-10",width:w+20,height:C+20,fill:"none",stroke:"#0066CC",strokeWidth:"80",strokeDasharray:"400 400",opacity:"0.5",pointerEvents:"none"}),u.jsx(LF,{track:e,svgRef:s})]})]})}function zF({lane:e,lineColor:t,lineWidth:n,isLastLane:r,isStraightTrack:i,geometry:s}){const{innerPath:a,outerPath:o}=e,c=50;return i?u.jsxs("g",{className:"track-lane-stroke",children:[e.laneNumber===1&&u.jsx("line",{x1:e.laneX,y1:0,x2:e.laneX,y2:s.totalLength,stroke:t,strokeWidth:c,pointerEvents:"none"}),u.jsx("line",{x1:e.laneX+e.laneWidth,y1:0,x2:e.laneX+e.laneWidth,y2:s.totalLength,stroke:t,strokeWidth:c,pointerEvents:"none"})]}):u.jsxs("g",{className:"track-lane-stroke",children:[u.jsx("path",{d:o,fill:"none",stroke:t,strokeWidth:c,pointerEvents:"none"}),r&&u.jsx("path",{d:a,fill:"none",stroke:t,strokeWidth:c,pointerEvents:"none"})]})}const FF=200,rN=30,BF=120;function ch(e=1,t=1){const n=1/e,r=FF*n,i=rN*n,s=r*.25;return{size:r,strokeWidth:i,cornerRadius:s}}function UF(e=1){const t=1/e,n=BF*t,r=n*.7,i=rN*.5*t;return{pointSize:n,handleSize:r,strokeWidth:i}}function uh(e){return{distance:e*2.5,size:e*.8,stemWidth:e*.15}}function hh(e=1,t=1){const n=1/e;return{strokeWidth:60*n,dashArray:`${300*n} ${300*n}`,padding:40}}function l2({motif:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{svgContent:c,originalWidth_mm:h,originalHeight_mm:d,position:p,rotation:m,scale:g}=e,v=pe.useMemo(()=>{if(!c)return null;const B=c.match(/viewBox=["']([^"']+)["']/i);if(B){const ee=B[1].split(/\s+/).map(Number);if(ee.length>=4)return{width:ee[2],height:ee[3]}}const D=c.match(/\bwidth=["']?(\d+(?:\.\d+)?)/i),R=c.match(/\bheight=["']?(\d+(?:\.\d+)?)/i);return D&&R?{width:parseFloat(D[1]),height:parseFloat(R[1])}:null},[c]),w=pe.useMemo(()=>{if(!v)return{width:h,height:d};const B=v.width/v.height,D=h/d,R=B>=1,ee=D>=1;if(R!==ee){console.warn("[MOTIF] Orientation mismatch detected - using SVG viewBox aspect ratio"),console.log("[MOTIF] SVG viewBox:",v,"AR:",B.toFixed(2)),console.log("[MOTIF] Physical dims:",h,"",d,"AR:",D.toFixed(2));const ue=h*d,ie=Math.sqrt(ue*B),ge=ie/B;return{width:ie,height:ge}}return{width:h,height:d}},[v,h,d]),C=w.width*(g||1),x=w.height*(g||1),k=C/2,P=x/2,j=`translate(${p.x}, ${p.y}) rotate(${m||0}, ${k}, ${P})`,M=pe.useMemo(()=>{if(!c)return null;try{let B=c;return B=B.replace(/\s+(width|height)=["'][^"']*["']/gi,""),B.includes("viewBox")||(B=B.replace("<svg",`<svg viewBox="0 0 ${w.width} ${w.height}"`)),B}catch(B){return console.error("[MOTIF] Error processing SVG:",B),c}},[c,w]),S=pe.useMemo(()=>{if(!M)return null;try{return`data:image/svg+xml,${encodeURIComponent(M).replace(/'/g,"%27").replace(/"/g,"%22")}`}catch(B){return console.error("[MOTIF] Error creating data URL:",B),null}},[M]);return S?u.jsxs("g",{className:`motif-element ${t?"motif-element--selected":""}`,transform:j,style:{cursor:"move"},children:[u.jsx("image",{href:S,x:"0",y:"0",width:C,height:x,preserveAspectRatio:"xMidYMid meet",pointerEvents:"none"}),u.jsx("rect",{x:"0",y:"0",width:C,height:x,fill:"transparent",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const B=hh(n,g||1);return u.jsx("rect",{x:"-10",y:"-10",width:C+20,height:x+20,fill:"none",stroke:"#9333EA",strokeWidth:B.strokeWidth,strokeDasharray:B.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&u.jsx(HF,{width:C,height:x,zoom:n,scale:g||1,onScaleStart:a,onRotateStart:o})]}):u.jsxs("g",{transform:j,children:[u.jsx("rect",{x:"0",y:"0",width:C,height:x,fill:"#f0f0f0",stroke:"#ccc",strokeWidth:"50",strokeDasharray:"200 200"}),u.jsx("text",{x:C/2,y:x/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:Math.min(C,x)/10,fill:"#999",children:"Motif Error"})]})}function HF({width:e,height:t,zoom:n,scale:r,onScaleStart:i,onRotateStart:s}){const{size:a,strokeWidth:o,cornerRadius:c}=ch(n,r),h=uh(a),d=[{x:-a/2,y:-a/2,corner:"nw",cursor:"nwse-resize"},{x:e-a/2,y:-a/2,corner:"ne",cursor:"nesw-resize"},{x:-a/2,y:t-a/2,corner:"sw",cursor:"nesw-resize"},{x:e-a/2,y:t-a/2,corner:"se",cursor:"nwse-resize"}];return u.jsxs("g",{className:"motif-handles",children:[d.map(p=>u.jsx("rect",{x:p.x,y:p.y,width:a,height:a,fill:"#9333EA",stroke:"#fff",strokeWidth:o,rx:c,style:{cursor:p.cursor},pointerEvents:"all",onMouseDown:m=>{m.stopPropagation(),i==null||i(m,p.corner)},onTouchStart:m=>{m.stopPropagation(),i==null||i(m,p.corner)}},p.corner)),u.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-h.distance+h.size/2,stroke:"#9333EA",strokeWidth:h.stemWidth,pointerEvents:"none"}),u.jsx("circle",{cx:e/2,cy:-h.distance,r:h.size,fill:"#9333EA",stroke:"#fff",strokeWidth:o,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),s==null||s(p)},onTouchStart:p=>{p.stopPropagation(),s==null||s(p)}}),u.jsx("path",{d:`M ${e/2-h.size*.4} ${-h.distance}
            A ${h.size*.4} ${h.size*.4} 0 1 1
            ${e/2+h.size*.4} ${-h.distance}`,fill:"none",stroke:"#fff",strokeWidth:o*.7,strokeLinecap:"round",pointerEvents:"none"}),u.jsx("polygon",{points:`${e/2+h.size*.4},${-h.distance-h.size*.25}
                 ${e/2+h.size*.4},${-h.distance+h.size*.25}
                 ${e/2+h.size*.65},${-h.distance}`,fill:"#fff",pointerEvents:"none"})]})}function iN(e,t,n,r=0,i=!1,s=.5){if(i&&e>=3)return VF(e,t,n,s,r);if(e>=32)return qF(t,n);const a=WF(e,t,n);return r>0?sN(a,r):`M ${a.map(o=>`${o.x},${o.y}`).join(" L ")} Z`}function WF(e,t,n){if(e===4)return[{x:0,y:0},{x:t,y:0},{x:t,y:n},{x:0,y:n}];const r=[],i=2*Math.PI/e,s=-Math.PI/2;for(let v=0;v<e;v++){const w=s+i*v;r.push({x:Math.cos(w),y:Math.sin(w)})}let a=1/0,o=-1/0,c=1/0,h=-1/0;for(const v of r)a=Math.min(a,v.x),o=Math.max(o,v.x),c=Math.min(c,v.y),h=Math.max(h,v.y);const d=o-a,p=h-c,m=t/d,g=n/p;return r.map(v=>({x:(v.x-a)*m,y:(v.y-c)*g}))}function VF(e,t,n,r=.5,i=0){const s=GF(e,t,n,r);return i>0?sN(s,i):`M ${s.map(a=>`${a.x},${a.y}`).join(" L ")} Z`}function GF(e,t,n,r=.5){const i=[],s=e*2,a=2*Math.PI/s,o=-Math.PI/2,c=Math.max(.1,Math.min(.9,r));for(let x=0;x<s;x++){const k=o+a*x,P=x%2===0?1:c;i.push({x:Math.cos(k)*P,y:Math.sin(k)*P})}let h=1/0,d=-1/0,p=1/0,m=-1/0;for(const x of i)h=Math.min(h,x.x),d=Math.max(d,x.x),p=Math.min(p,x.y),m=Math.max(m,x.y);const g=d-h,v=m-p,w=t/g,C=n/v;return i.map(x=>({x:(x.x-h)*w,y:(x.y-p)*C}))}function qF(e,t){const n=e/2,r=t/2,i=n,s=r;return`M ${i-n},${s} A ${n},${r} 0 1,1 ${i+n},${s} A ${n},${r} 0 1,1 ${i-n},${s} Z`}function sN(e,t,n,r){if(e.length<3)return"";let i=1/0;for(let m=0;m<e.length;m++){const g=e[m],v=e[(m+1)%e.length],w=Math.sqrt(Math.pow(v.x-g.x,2)+Math.pow(v.y-g.y,2));i=Math.min(i,w)}const s=i/2,a=t/100*s;if(a<1)return`M ${e.map(m=>`${m.x},${m.y}`).join(" L ")} Z`;const o=[];for(let m=0;m<e.length;m++){const g=e[(m-1+e.length)%e.length],v=e[m],w=e[(m+1)%e.length],C=Sy({x:g.x-v.x,y:g.y-v.y}),x=Sy({x:w.x-v.x,y:w.y-v.y}),k={x:v.x+C.x*a,y:v.y+C.y*a},P={x:v.x+x.x*a,y:v.y+x.y*a};m===0?o.push(`M ${k.x},${k.y}`):o.push(`L ${k.x},${k.y}`),o.push(`Q ${v.x},${v.y} ${P.x},${P.y}`)}const c=e[e.length-1],h=e[0],d=Sy({x:c.x-h.x,y:c.y-h.y}),p={x:h.x+d.x*a,y:h.y+d.y*a};return o.push(`L ${p.x},${p.y}`),o.push("Z"),o.join(" ")}function Sy(e){const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:{x:e.x/t,y:e.y/t}}function YF(e,t=!1){if(t)return e===5?"Star":`${e}-Point Star`;const n={3:"Triangle",4:"Rectangle",5:"Pentagon",6:"Hexagon",7:"Heptagon",8:"Octagon",9:"Nonagon",10:"Decagon",12:"Dodecagon"};return e>=32?"Circle":n[e]?n[e]:`${e}-gon`}function XF(e,t=!1){return t?"":e>=32?"":e===3?"":e===4?"":e===5?"":e===6?"":`${e}`}function c2({shape:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{sides:c,width_mm:h,height_mm:d,cornerRadius:p,starMode:m,innerRadius:g,position:v,rotation:w,fillColor:C,strokeEnabled:x,strokeColor:k,strokeWidth_mm:P}=e,j=pe.useMemo(()=>iN(c,h,d,p,m,g),[c,h,d,p,m,g]),M=h/2,S=d/2,B=`translate(${v.x}, ${v.y}) rotate(${w||0}, ${M}, ${S})`;return u.jsxs("g",{className:`shape-element ${t?"shape-element--selected":""}`,transform:B,style:{cursor:"move"},children:[u.jsx("path",{d:j,fill:(C==null?void 0:C.hex)||"#609B63",stroke:x&&k?k.hex:"none",strokeWidth:x?P:0,pointerEvents:"none"}),u.jsx("path",{d:j,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(P,100),pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const D=hh(n);return u.jsx("rect",{x:"-10",y:"-10",width:h+20,height:d+20,fill:"none",stroke:"#3b82f6",strokeWidth:D.strokeWidth,strokeDasharray:D.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&u.jsx(KF,{width:h,height:d,zoom:n,onScaleStart:a,onRotateStart:o})]})}function KF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=ch(n),c=uh(s),h=[{x:e/2-s/2,y:-s/2,corner:"n",cursor:"ns-resize"},{x:e/2-s/2,y:t-s/2,corner:"s",cursor:"ns-resize"},{x:e-s/2,y:t/2-s/2,corner:"e",cursor:"ew-resize"},{x:-s/2,y:t/2-s/2,corner:"w",cursor:"ew-resize"}];return u.jsxs("g",{className:"shape-handles",children:[h.map(d=>u.jsx("rect",{x:d.x,y:d.y,width:s,height:s,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:d.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,d.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,d.corner)}},d.corner)),u.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-c.distance+c.size/2,stroke:"#3b82f6",strokeWidth:c.stemWidth,pointerEvents:"none"}),u.jsx("circle",{cx:e/2,cy:-c.distance,r:c.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:d=>{d.stopPropagation(),i==null||i(d)},onTouchStart:d=>{d.stopPropagation(),i==null||i(d)}}),u.jsx("path",{d:`M ${e/2-c.size*.4} ${-c.distance}
            A ${c.size*.4} ${c.size*.4} 0 1 1
            ${e/2+c.size*.4} ${-c.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),u.jsx("polygon",{points:`${e/2+c.size*.4},${-c.distance-c.size*.25}
                 ${e/2+c.size*.4},${-c.distance+c.size*.25}
                 ${e/2+c.size*.65},${-c.distance}`,fill:"#fff",pointerEvents:"none"})]})}function aN({controlPoints:e,width:t,height:n,zoom:r=1,onPointDrag:i,onHandleDrag:s,onDragEnd:a,showHandles:o=!0,selectedPointIndex:c,onPointSelect:h,onPointDelete:d}){const[p,m]=pe.useState(null),[g,v]=pe.useState(null),{pointSize:w,handleSize:C,strokeWidth:x}=UF(r),k=pe.useCallback((M,S)=>{M.stopPropagation(),M.preventDefault(),h==null||h(S),m({type:"point",index:S}),v({x:M.clientX,y:M.clientY})},[h]),P=pe.useCallback((M,S)=>{M.preventDefault(),M.stopPropagation(),d==null||d(S)},[d]),j=pe.useCallback((M,S,B)=>{M.stopPropagation(),M.preventDefault(),m({type:"handle",index:S,handleType:B}),v({x:M.clientX,y:M.clientY})},[]);return pe.useEffect(()=>{if(!p)return;const M=B=>{if(!g)return;const D=document.querySelector(".court-canvas__svg");if(!D)return;const R=D.getBoundingClientRect(),ee=D.viewBox.baseVal,ue=ee.width/R.width,ie=ee.height/R.height,ge=(B.clientX-g.x)*ue,H=(B.clientY-g.y)*ie;if(p.type==="point"){const ye=e[p.index],Ae=ye.x+ge/t,we=ye.y+H/n;i==null||i(p.index,Ae,we)}else if(p.type==="handle"){const Ae=e[p.index][p.handleType],we=Ae.x+ge/t,Be=Ae.y+H/n;s==null||s(p.index,p.handleType,we,Be)}v({x:B.clientX,y:B.clientY})},S=()=>{m(null),v(null),a==null||a()};return window.addEventListener("mousemove",M),window.addEventListener("mouseup",S),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",S)}},[p,g,e,t,n,i,s,a]),!e||e.length===0?null:u.jsx("g",{className:"blob-edit-handles",children:e.map((M,S)=>{const B=M.x*t,D=M.y*n,R=B+M.handleIn.x*t,ee=D+M.handleIn.y*n,ue=B+M.handleOut.x*t,ie=D+M.handleOut.y*n,ge=(p==null?void 0:p.type)==="point"&&(p==null?void 0:p.index)===S,H=(p==null?void 0:p.type)==="handle"&&(p==null?void 0:p.index)===S&&(p==null?void 0:p.handleType)==="handleIn",ye=(p==null?void 0:p.type)==="handle"&&(p==null?void 0:p.index)===S&&(p==null?void 0:p.handleType)==="handleOut",Ae=c===S;return u.jsxs("g",{className:"blob-control-point-group",children:[o&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:B,y1:D,x2:R,y2:ee,stroke:"#94a3b8",strokeWidth:x,strokeDasharray:`${x*3} ${x*2}`,pointerEvents:"none",opacity:"0.8"}),u.jsx("line",{x1:B,y1:D,x2:ue,y2:ie,stroke:"#94a3b8",strokeWidth:x,strokeDasharray:`${x*3} ${x*2}`,pointerEvents:"none",opacity:"0.8"}),u.jsx("circle",{cx:R,cy:ee,r:C,fill:H?"#f97316":"#ffffff",stroke:"#64748b",strokeWidth:x,style:{cursor:"crosshair"},pointerEvents:"all",onMouseDown:we=>j(we,S,"handleIn")}),u.jsx("circle",{cx:ue,cy:ie,r:C,fill:ye?"#f97316":"#ffffff",stroke:"#64748b",strokeWidth:x,style:{cursor:"crosshair"},pointerEvents:"all",onMouseDown:we=>j(we,S,"handleOut")})]}),u.jsx("circle",{cx:B,cy:D,r:w,fill:Ae?"#ef4444":ge?"#f97316":"#3b82f6",stroke:"#ffffff",strokeWidth:x*1.3,style:{cursor:"move"},pointerEvents:"all",onMouseDown:we=>k(we,S),onContextMenu:we=>P(we,S)}),u.jsx("text",{x:B,y:D+w*.35,textAnchor:"middle",fontSize:w*.8,fill:"#ffffff",fontWeight:"bold",pointerEvents:"none",children:S+1})]},S)})})}function u2({shape:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o,onPointDrag:c,onHandleDrag:h,onDragEnd:d,selectedPointIndex:p,onPointSelect:m,onPointDelete:g}){const{controlPoints:v,width_mm:w,height_mm:C,position:x,rotation:k,fillColor:P,strokeEnabled:j,strokeColor:M,strokeWidth_mm:S,editPointsVisible:B}=e,D=pe.useMemo(()=>oF(v,w,C),[v,w,C]),R=w/2,ee=C/2,ue=`translate(${x.x}, ${x.y}) rotate(${k||0}, ${R}, ${ee})`;return u.jsxs("g",{className:`blob-element ${t?"blob-element--selected":""}`,transform:ue,style:{cursor:"move"},children:[u.jsx("path",{d:D,fill:(P==null?void 0:P.hex)||"#609B63",stroke:j&&M?M.hex:"none",strokeWidth:j?S:0,pointerEvents:"none"}),u.jsx("path",{d:D,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(S||0,100),pointerEvents:"all",onTouchStart:i,onMouseDown:r,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const ie=hh(n);return u.jsx("rect",{x:"-10",y:"-10",width:w+20,height:C+20,fill:"none",stroke:"#3b82f6",strokeWidth:ie.strokeWidth,strokeDasharray:ie.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&u.jsx(ZF,{width:w,height:C,zoom:n,onScaleStart:a,onRotateStart:o}),t&&v&&B&&u.jsx(aN,{controlPoints:v,width:w,height:C,zoom:n,onPointDrag:c,onHandleDrag:h,onDragEnd:d,showHandles:!0,selectedPointIndex:p,onPointSelect:m,onPointDelete:g})]})}function ZF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=ch(n),c=uh(s),h=[{x:-s/2,y:-s/2,corner:"nw",cursor:"nwse-resize"},{x:e-s/2,y:-s/2,corner:"ne",cursor:"nesw-resize"},{x:-s/2,y:t-s/2,corner:"sw",cursor:"nesw-resize"},{x:e-s/2,y:t-s/2,corner:"se",cursor:"nwse-resize"}];return u.jsxs("g",{className:"blob-resize-handles",children:[h.map(d=>u.jsx("rect",{x:d.x,y:d.y,width:s,height:s,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:d.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,d.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,d.corner)}},d.corner)),u.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-c.distance+c.size/2,stroke:"#3b82f6",strokeWidth:c.stemWidth,pointerEvents:"none"}),u.jsx("circle",{cx:e/2,cy:-c.distance,r:c.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:d=>{d.stopPropagation(),i==null||i(d)},onTouchStart:d=>{d.stopPropagation(),i==null||i(d)}}),u.jsx("path",{d:`M ${e/2-c.size*.4} ${-c.distance}
            A ${c.size*.4} ${c.size*.4} 0 1 1
            ${e/2+c.size*.4} ${-c.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),u.jsx("polygon",{points:`${e/2+c.size*.4},${-c.distance-c.size*.25}
                 ${e/2+c.size*.4},${-c.distance+c.size*.25}
                 ${e/2+c.size*.65},${-c.distance}`,fill:"#fff",pointerEvents:"none"})]})}function h2({shape:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,onScaleStart:s,onRotateStart:a,onPointDrag:o,onHandleDrag:c,onDragEnd:h,selectedPointIndex:d,onPointSelect:p,onPointDelete:m}){const{controlPoints:g,width_mm:v,height_mm:w,position:C,rotation:x,fillColor:k,strokeEnabled:P,strokeColor:j,strokeWidth_mm:M,editPointsVisible:S,closed:B,smooth:D}=e,R=pe.useMemo(()=>!g||g.length<2?"":QP(g,v,w,B,D),[g,v,w,B,D]),ee=v/2,ue=w/2,ie=`translate(${C.x}, ${C.y}) rotate(${x||0}, ${ee}, ${ue})`;return R?u.jsxs("g",{className:`path-element ${t?"path-element--selected":""}`,transform:ie,style:{cursor:"move"},children:[u.jsx("path",{d:R,fill:B?(k==null?void 0:k.hex)||"#609B63":"none",stroke:P&&j?j.hex:B?"none":(k==null?void 0:k.hex)||"#609B63",strokeWidth:P?M:B?0:50,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),u.jsx("path",{d:R,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(M||0,200),pointerEvents:"all",onTouchStart:r,onMouseDown:n,onDoubleClick:i,style:{cursor:"move"}}),t&&u.jsx("rect",{x:"-10",y:"-10",width:v+20,height:w+20,fill:"none",stroke:"#3b82f6",strokeWidth:"80",strokeDasharray:"400 400",opacity:"0.7",pointerEvents:"none"}),t&&u.jsx(QF,{width:v,height:w,onScaleStart:s,onRotateStart:a}),t&&g&&S&&u.jsx(aN,{controlPoints:g,width:v,height:w,onPointDrag:o,onHandleDrag:c,onDragEnd:h,showHandles:D,selectedPointIndex:d,onPointSelect:p,onPointDelete:m})]}):null}function QF({width:e,height:t,onScaleStart:n,onRotateStart:r}){const i=Math.min(e,t)*.08,o=Math.max(150,Math.min(400,i)),c=[{x:-o/2,y:-o/2,corner:"nw",cursor:"nwse-resize"},{x:e-o/2,y:-o/2,corner:"ne",cursor:"nesw-resize"},{x:-o/2,y:t-o/2,corner:"sw",cursor:"nesw-resize"},{x:e-o/2,y:t-o/2,corner:"se",cursor:"nwse-resize"}],h=o*2.5,d=o*.8;return u.jsxs("g",{className:"path-resize-handles",children:[c.map(p=>u.jsx("rect",{x:p.x,y:p.y,width:o,height:o,fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",rx:o/4,style:{cursor:p.cursor},pointerEvents:"all",onMouseDown:m=>{m.stopPropagation(),n==null||n(m,p.corner)},onTouchStart:m=>{m.stopPropagation(),n==null||n(m,p.corner)}},p.corner)),u.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-h+d/2,stroke:"#3b82f6",strokeWidth:"30",pointerEvents:"none"}),u.jsx("circle",{cx:e/2,cy:-h,r:d,fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",style:{cursor:"grab"},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p)}}),u.jsx("path",{d:`M ${e/2-d*.4} ${-h}
            A ${d*.4} ${d*.4} 0 1 1
            ${e/2+d*.4} ${-h}`,fill:"none",stroke:"#fff",strokeWidth:"25",strokeLinecap:"round",pointerEvents:"none"}),u.jsx("polygon",{points:`${e/2+d*.4},${-h-d*.25}
                 ${e/2+d*.4},${-h+d*.25}
                 ${e/2+d*.65},${-h}`,fill:"#fff",pointerEvents:"none"})]})}function bo(e,t,n,r="normal",i="normal"){bo._canvas||(bo._canvas=document.createElement("canvas"),bo._ctx=bo._canvas.getContext("2d"));const s=bo._ctx,a=i==="italic"?"italic ":"",o=r==="bold"?"bold ":"";s.font=`${a}${o}${n}px ${t}`;const c=s.measureText(e||"Double-click to edit");return{width:Math.max(c.width,100),height:n*1.2}}function JF(){return[{name:"Open Sans",family:"Open Sans, sans-serif"},{name:"Roboto",family:"Roboto, sans-serif"},{name:"Montserrat",family:"Montserrat, sans-serif"},{name:"Oswald",family:"Oswald, sans-serif"},{name:"Black Ops One",family:"Black Ops One, sans-serif"},{name:"Playfair Display",family:"Playfair Display, serif"},{name:"Arial",family:"Arial, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, sans-serif"}]}const e9=500,Ya=40;function d2({text:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{content:c,fontFamily:h,fontSize_mm:d,scale_x:p=1,scale_y:m=1,fontWeight:g,fontStyle:v,textAlign:w,position:C,rotation:x,fillColor:k,strokeColor:P,strokeWidth_mm:j}=e,M=d||e9,S=pe.useMemo(()=>bo(c||"Text",h,M,g,v),[c,h,M,g,v]);pe.useMemo(()=>({width:S.width*p,height:M*1.2*m}),[S.width,M,p,m]);const B=pe.useMemo(()=>{switch(w){case"center":return-S.width/2;case"right":return-S.width;default:return 0}},[w,S.width]),D=`translate(${C.x}, ${C.y}) rotate(${x||0}) scale(${p}, ${m})`,R=c||"Text",ee=hh(n,Math.max(p,m));return u.jsxs("g",{className:`text-element ${t?"text-element--selected":""}`,transform:D,children:[u.jsx("text",{x:"0",y:"0",fontFamily:h,fontSize:M,fontWeight:g,fontStyle:v,textAnchor:w==="center"?"middle":w==="right"?"end":"start",fill:(k==null?void 0:k.hex)||"#1C1C1C",stroke:(P==null?void 0:P.hex)||"none",strokeWidth:j||0,strokeLinejoin:"round",strokeLinecap:"round",paintOrder:"stroke fill",style:{cursor:"move",userSelect:"none"},pointerEvents:"none",children:R}),u.jsx("rect",{x:B-Ya/2,y:-M*.85,width:S.width+Ya,height:M*1.2,fill:"transparent",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&u.jsx("rect",{x:B-Ya,y:-M-Ya,width:S.width+Ya*2,height:M*1.2+Ya*2,fill:"none",stroke:"#3b82f6",strokeWidth:ee.strokeWidth,strokeDasharray:ee.dashArray,opacity:"0.7",pointerEvents:"none"}),t&&u.jsx(t9,{bounds:S,fontSize:M,alignOffset:B,scale_x:p,scale_y:m,zoom:n,onScaleStart:a,onRotateStart:o})]})}function t9({bounds:e,fontSize:t,alignOffset:n,scale_x:r,scale_y:i,zoom:s,onScaleStart:a,onRotateStart:o}){const c=Math.max(r,i),{size:h,strokeWidth:d,cornerRadius:p}=ch(s,c),m=uh(h),g=n-Ya,v=-t-Ya,w=e.width+Ya*2,C=t*1.2+Ya*2,x=[{x:g-h/2,y:v-h/2,corner:"nw",cursor:"nwse-resize"},{x:g+w-h/2,y:v-h/2,corner:"ne",cursor:"nesw-resize"},{x:g-h/2,y:v+C-h/2,corner:"sw",cursor:"nesw-resize"},{x:g+w-h/2,y:v+C-h/2,corner:"se",cursor:"nwse-resize"}],k=g+w/2;return u.jsxs("g",{className:"text-handles",children:[x.map(P=>u.jsx("rect",{x:P.x,y:P.y,width:h,height:h,fill:"#3b82f6",stroke:"#fff",strokeWidth:d,rx:p,style:{cursor:P.cursor},pointerEvents:"all",onMouseDown:j=>{j.stopPropagation(),a==null||a(j,P.corner)},onTouchStart:j=>{j.stopPropagation(),a==null||a(j,P.corner)}},P.corner)),u.jsx("line",{x1:k,y1:v,x2:k,y2:v-m.distance+m.size/2,stroke:"#3b82f6",strokeWidth:m.stemWidth,pointerEvents:"none"}),u.jsx("circle",{cx:k,cy:v-m.distance,r:m.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:d,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:P=>{P.stopPropagation(),o==null||o(P)},onTouchStart:P=>{P.stopPropagation(),o==null||o(P)}}),u.jsx("path",{d:`M ${k-m.size*.4} ${v-m.distance}
            A ${m.size*.4} ${m.size*.4} 0 1 1
            ${k+m.size*.4} ${v-m.distance}`,fill:"none",stroke:"#fff",strokeWidth:d*.7,strokeLinecap:"round",pointerEvents:"none"}),u.jsx("polygon",{points:`${k+m.size*.4},${v-m.distance-m.size*.25}
                 ${k+m.size*.4},${v-m.distance+m.size*.25}
                 ${k+m.size*.65},${v-m.distance}`,fill:"#fff",pointerEvents:"none"})]})}function n9({zone:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{id:c,shapeType:h,sides:d,width_mm:p,height_mm:m,cornerRadius:g,position:v,rotation:w,controlPoints:C}=e,x=`exclusion-crosshatch-${c}`,k=pe.useMemo(()=>h==="path"&&C?QP(C,p,m,!0):iN(d||4,p,m,g||0),[h,d,p,m,g,C]),P=p/2,j=m/2,M=`translate(${v.x}, ${v.y}) rotate(${w||0}, ${P}, ${j})`,S=Math.min(p,m)*.02,R=Math.max(100,Math.min(500,S)),ee=R*.15;return u.jsxs("g",{className:`exclusion-zone-element ${t?"exclusion-zone-element--selected":""}`,transform:M,style:{cursor:"move"},children:[u.jsx("defs",{children:u.jsxs("pattern",{id:x,patternUnits:"userSpaceOnUse",width:R,height:R,patternTransform:"rotate(45)",children:[u.jsx("rect",{width:R,height:R,fill:"#e5e5e5"}),u.jsx("line",{x1:"0",y1:"0",x2:"0",y2:R,stroke:"#999",strokeWidth:ee}),u.jsx("line",{x1:R/2,y1:"0",x2:R/2,y2:R,stroke:"#999",strokeWidth:ee})]})}),u.jsx("path",{d:k,fill:`url(#${x})`,stroke:"#666",strokeWidth:"60",strokeDasharray:"200 100",pointerEvents:"none"}),u.jsx("path",{d:k,fill:"transparent",stroke:"transparent",strokeWidth:"200",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const ue=hh(n);return u.jsx("rect",{x:"-10",y:"-10",width:p+20,height:m+20,fill:"none",stroke:"#ef4444",strokeWidth:ue.strokeWidth,strokeDasharray:ue.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&u.jsx(r9,{width:p,height:m,zoom:n,onScaleStart:a,onRotateStart:o})]})}function r9({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=ch(n),c=uh(s),h=[{x:e/2-s/2,y:-s/2,corner:"n",cursor:"ns-resize"},{x:e/2-s/2,y:t-s/2,corner:"s",cursor:"ns-resize"},{x:e-s/2,y:t/2-s/2,corner:"e",cursor:"ew-resize"},{x:-s/2,y:t/2-s/2,corner:"w",cursor:"ew-resize"}];return u.jsxs("g",{className:"exclusion-zone-handles",children:[h.map(d=>u.jsx("rect",{x:d.x,y:d.y,width:s,height:s,fill:"#ef4444",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:d.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,d.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,d.corner)}},d.corner)),u.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-c.distance+c.size/2,stroke:"#ef4444",strokeWidth:c.stemWidth,pointerEvents:"none"}),u.jsx("circle",{cx:e/2,cy:-c.distance,r:c.size,fill:"#ef4444",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:d=>{d.stopPropagation(),i==null||i(d)},onTouchStart:d=>{d.stopPropagation(),i==null||i(d)}}),u.jsx("path",{d:`M ${e/2-c.size*.4} ${-c.distance}
            A ${c.size*.4} ${c.size*.4} 0 1 1
            ${e/2+c.size*.4} ${-c.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),u.jsx("polygon",{points:`${e/2+c.size*.4},${-c.distance-c.size*.25}
                 ${e/2+c.size*.4},${-c.distance+c.size*.25}
                 ${e/2+c.size*.65},${-c.distance}`,fill:"#fff",pointerEvents:"none"})]})}function i9({groupId:e,zoom:t=1,onDragStart:n,onScaleStart:r,onRotateStart:i,screenToSVG:s}){const{groups:a,selectedGroupId:o,editingGroupId:c,shapes:h,selectGroup:d,enterGroup:p,updateGroupPosition:m,commitGroupMove:g}=nn(),v=a[e];if(!v||!v.bounds||c===e)return null;const w=o===e,{x:C,y:x,width:k,height:P}=v.bounds,{size:j,strokeWidth:M,cornerRadius:S}=ch(t),B=uh(j),D=j/2,R=hh(t),ee=j*.8,ue=ye=>{if(ye.stopPropagation(),d(e),!v.locked&&n&&s){const Ae=ye.touches?ye.touches[0].clientX:ye.clientX,we=ye.touches?ye.touches[0].clientY:ye.clientY,Be=s(Ae,we);n(e,{x:Be.x-v.bounds.x,y:Be.y-v.bounds.y})}},ie=ye=>{ye.stopPropagation(),p(e)},ge=(ye,Ae)=>{ye.stopPropagation(),r&&r(ye,e,Ae)},H=ye=>{ye.stopPropagation(),i&&i(ye,e)};return v.childIds.map(ye=>h[ye]).filter(Boolean),u.jsxs("g",{className:"group-element",children:[u.jsx("rect",{x:C,y:x,width:k,height:P,fill:"transparent",stroke:w?"#9333ea":"#a855f7",strokeWidth:w?R.strokeWidth:R.strokeWidth*.5,strokeDasharray:w?"none":R.dashArray,rx:S,ry:S,style:{cursor:"move"},onMouseDown:ue,onTouchStart:ue,onDoubleClick:ie}),!w&&u.jsx("text",{x:C+M,y:x-M,fontSize:ee,fill:"#9333ea",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"500",children:v.compoundType?`${v.compoundType.charAt(0).toUpperCase()+v.compoundType.slice(1)} Group`:v.customName||"Group"}),w&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:C-D,y:x-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"nwse-resize"},onMouseDown:ye=>ge(ye,"nw"),onTouchStart:ye=>ge(ye,"nw")}),u.jsx("rect",{x:C+k-D,y:x-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"nesw-resize"},onMouseDown:ye=>ge(ye,"ne"),onTouchStart:ye=>ge(ye,"ne")}),u.jsx("rect",{x:C-D,y:x+P-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"nesw-resize"},onMouseDown:ye=>ge(ye,"sw"),onTouchStart:ye=>ge(ye,"sw")}),u.jsx("rect",{x:C+k-D,y:x+P-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"nwse-resize"},onMouseDown:ye=>ge(ye,"se"),onTouchStart:ye=>ge(ye,"se")}),u.jsx("rect",{x:C+k/2-D,y:x-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"ns-resize"},onMouseDown:ye=>ge(ye,"n"),onTouchStart:ye=>ge(ye,"n")}),u.jsx("rect",{x:C+k/2-D,y:x+P-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"ns-resize"},onMouseDown:ye=>ge(ye,"s"),onTouchStart:ye=>ge(ye,"s")}),u.jsx("rect",{x:C-D,y:x+P/2-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"ew-resize"},onMouseDown:ye=>ge(ye,"w"),onTouchStart:ye=>ge(ye,"w")}),u.jsx("rect",{x:C+k-D,y:x+P/2-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:M,rx:S,style:{cursor:"ew-resize"},onMouseDown:ye=>ge(ye,"e"),onTouchStart:ye=>ge(ye,"e")}),u.jsx("line",{x1:C+k/2,y1:x,x2:C+k/2,y2:x-B.distance+B.size/2,stroke:"#9333ea",strokeWidth:B.stemWidth}),u.jsx("circle",{cx:C+k/2,cy:x-B.distance,r:B.size,fill:"white",stroke:"#9333ea",strokeWidth:M,style:{cursor:"grab"},onMouseDown:H,onTouchStart:H}),u.jsx("text",{x:C+k/2,y:x-B.distance-j-ee*.5,fontSize:ee,fill:"#9333ea",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"600",textAnchor:"middle",children:v.compoundType?`${v.compoundType.charAt(0).toUpperCase()+v.compoundType.slice(1)}`:v.customName||"Group"}),u.jsxs("g",{transform:`translate(${C+k+D}, ${x-D})`,children:[u.jsx("circle",{cx:0,cy:0,r:D,fill:"#9333ea"}),u.jsx("text",{x:0,y:0,fontSize:ee*.7,fill:"white",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"600",textAnchor:"middle",dominantBaseline:"central",children:v.childIds.length})]})]})]})}function f2(e,t,n){if(!e||e.type==="rectangle"||!e.controlPoints)return null;const r=e.controlPoints;if(!r||r.length<3)return null;const i=r.map(a=>({x:a.x*t,y:a.y*n}));let s=`M ${i[0].x} ${i[0].y}`;for(let a=1;a<i.length;a++)s+=` L ${i[a].x} ${i[a].y}`;return s+=" Z",s}const s9=pe.forwardRef(function(t,n){var Bf,is;const r=pe.useRef(null),i=pe.useRef(null);pe.useImperativeHandle(n,()=>r.current);const[s,a]=pe.useState(1),[o,c]=pe.useState({x:0,y:0}),[h,d]=pe.useState(!1),[p,m]=pe.useState({x:0,y:0}),[g,v]=pe.useState(!1),[w,C]=pe.useState({active:!1,initialDistance:0,initialZoom:1,initialPan:{x:0,y:0},initialCenter:{x:0,y:0}}),[x,k]=pe.useState(!1),[P,j]=pe.useState(null),[M,S]=pe.useState(null),[B,D]=pe.useState(null),[R,ee]=pe.useState(null),[ue,ie]=pe.useState(null),[ge,H]=pe.useState(null),[ye,Ae]=pe.useState(null),[we,Be]=pe.useState(null),xe=pe.useRef(null),[Le,Ce]=pe.useState(null),Re=pe.useRef(null),it=pe.useRef(0),[nt,Ue]=pe.useState(!1),[lt,de]=pe.useState(null),[oe,We]=pe.useState(null),[Ne,ht]=pe.useState(!1),[jt,Ct]=pe.useState(null),[q,Ye]=pe.useState(null),[se,L]=pe.useState(!1),[I,Q]=pe.useState(null),[he,ve]=pe.useState(null),[me,Me]=pe.useState(!1),[Je,De]=pe.useState(null),[l,f]=pe.useState(null),[b,_]=pe.useState(!1),[E,A]=pe.useState(null),[T,N]=pe.useState(null),[$,F]=pe.useState(!1),[G,Z]=pe.useState(null),[Y,W]=pe.useState(null),[X,U]=pe.useState(!1),[K,V]=pe.useState(null),[ne,z]=pe.useState(null),[te,ae]=pe.useState(!1),[ce,re]=pe.useState(null),[be,ke]=pe.useState(null),[Pe,ze]=pe.useState(!1),[_e,$e]=pe.useState(null),[Fe,Xe]=pe.useState(null),[Ze,Qe]=pe.useState(!1),[ft,dt]=pe.useState(null),[Et,xt]=pe.useState(null),[Te,Ke]=pe.useState(null),[mt,Nt]=pe.useState(0),[kt,Bt]=pe.useState(null),{surface:At,courts:Dt,tracks:Ut,motifs:Rt,shapes:Kt,texts:en,exclusionZones:bn,elementOrder:En,selectedCourtId:wt,selectedTrackId:Tn,selectedMotifId:Rn,selectedShapeId:wn,selectedTextId:Er,selectedExclusionZoneId:Or,snapToGrid:sr,gridSize_mm:tr,selectCourt:fr,deselectCourt:ar,selectTrack:Zr,deselectTrack:zn,selectMotif:nr,deselectMotif:gi,selectShape:_i,deselectShape:Qr,selectText:yi,deselectText:Pi,selectExclusionZone:pr,deselectExclusionZone:mr,updateCourtPosition:rr,updateTrackPosition:Jr,updateMotifPosition:Gr,updateMotifScale:yr,updateMotifRotation:Qt,updateShapePosition:$r,updateShapeDimensions:vn,updateShapeRotation:Vn,updateTextPosition:jn,updateTextScale:Gn,updateTextRotation:qr,showPropertiesPanel:Xn,setShowPropertiesPanel:y,updateExclusionZonePosition:O,updateExclusionZoneDimensions:J,updateExclusionZoneRotation:le,updateBlobControlPoint:Se,updateBlobHandle:et,commitBlobEdit:rt,pathDrawingMode:bt,activePathId:_t,addPointToPath:Zt,finishPath:rn,cancelPath:Nn,updatePathControlPoint:or,updatePathHandle:es,commitPathEdit:Ft,removePointFromPath:He,groups:vt,selectedGroupId:$t,selectedElementIds:fn,editingGroupId:Kn,selectGroup:gr,deselectGroup:ni,enterGroup:Vi,exitGroup:xs,addToSelection:ts,clearMultiSelection:lr,updateGroupPosition:$s,updateGroupScale:ns,updateGroupRotation:rs,commitGroupMove:ra,setZoom:Ds,setInteracting:Da}=nn();pe.useEffect(()=>{Ds(s)},[s,Ds]);const cr=pe.useCallback((fe,Ve)=>!Le||Le.id!==Ve||!fe?fe:{...fe,position:{x:fe.position.x+Le.offset.x,y:fe.position.y+Le.offset.y}},[Le]),Ge=pe.useCallback((fe,Ve)=>{const Ee=r.current;if(!Ee||!Ee.getScreenCTM())return{x:0,y:0};const Oe=Ee.createSVGPoint();Oe.x=fe,Oe.y=Ve;const at=Ee.getScreenCTM();if(!at)return{x:0,y:0};const st=Oe.matrixTransform(at.inverse());return{x:st.x,y:st.y}},[]),pt=(fe,Ve)=>{if(fe.stopPropagation(),fe.shiftKey){ts(Ve);return}fn.length>0&&lr(),fr(Ve);const Oe=Dt[Ve];if(Oe!=null&&Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st);j({x:tt.x-Oe.position.x,y:tt.y-Oe.position.y}),S(Ve),k(!0)},ct=(fe,Ve)=>{fe.stopPropagation(),fr(Ve),nn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Tt=(fe,Ve)=>{if(fe.stopPropagation(),fe.shiftKey){ts(Ve);return}fn.length>0&&lr(),Zr(Ve);const Oe=Ut[Ve];if(Oe!=null&&Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st);j({x:tt.x-Oe.position.x,y:tt.y-Oe.position.y}),D(Ve),k(!0)},on=(fe,Ve)=>{fe.stopPropagation(),Zr(Ve),nn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Lt=(fe,Ve)=>{if(fe.stopPropagation(),fe.shiftKey){ts(Ve);return}fn.length>0&&lr(),nr(Ve);const Oe=Rt[Ve];if(Oe!=null&&Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st);j({x:tt.x-Oe.position.x,y:tt.y-Oe.position.y}),ee(Ve),k(!0)},zt=(fe,Ve)=>{fe.stopPropagation(),nr(Ve),nn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Wt=(fe,Ve,Ee)=>{fe.stopPropagation();const Oe=Rt[Ve];if(!Oe||Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st),yt=Oe.originalWidth_mm*(Oe.scale||1),ut=Oe.originalHeight_mm*(Oe.scale||1);let St;switch(Ee){case"nw":St={x:Oe.position.x+yt,y:Oe.position.y+ut};break;case"ne":St={x:Oe.position.x,y:Oe.position.y+ut};break;case"sw":St={x:Oe.position.x+yt,y:Oe.position.y};break;case"se":default:St={x:Oe.position.x,y:Oe.position.y};break}const It=Math.sqrt(Math.pow(tt.x-St.x,2)+Math.pow(tt.y-St.y,2));We({initialDistance:It,originalScale:Oe.scale||1,originalWidth:yt,originalHeight:ut,corner:Ee,anchorPoint:St}),de(Ve),Ue(!0)},An=(fe,Ve)=>{fe.stopPropagation();const Ee=Rt[Ve];if(!Ee||Ee.locked)return;const Oe=fe.touches?fe.touches[0].clientX:fe.clientX,at=fe.touches?fe.touches[0].clientY:fe.clientY,st=Ge(Oe,at),tt=Ee.originalWidth_mm*(Ee.scale||1),yt=Ee.originalHeight_mm*(Ee.scale||1),ut={x:Ee.position.x+tt/2,y:Ee.position.y+yt/2},St=Math.atan2(st.y-ut.y,st.x-ut.x)*(180/Math.PI);Ye({initialAngle:St,originalRotation:Ee.rotation||0,motifCenter:ut}),Ct(Ve),ht(!0)},qn=fe=>{for(const[Ve,Ee]of Object.entries(vt))if(Ee.childIds.includes(fe))return Ve;return null},Yn=qn,Mn=(fe,Ve)=>{fe.stopPropagation();const Ee=Yn(Ve);if(Ee&&Kn!==Ee){gr(Ee);const ut=vt[Ee];if(ut!=null&&ut.locked)return;const St=fe.touches?fe.touches[0].clientX:fe.clientX,It=fe.touches?fe.touches[0].clientY:fe.clientY,sn=Ge(St,It);j({x:sn.x-ut.bounds.x,y:sn.y-ut.bounds.y}),Be(Ee),k(!0);return}if(fe.shiftKey){ts(Ve);return}fn.length>0&&lr(),_i(Ve);const at=Kt[Ve];if(at!=null&&at.locked)return;const st=fe.touches?fe.touches[0].clientX:fe.clientX,tt=fe.touches?fe.touches[0].clientY:fe.clientY,yt=Ge(st,tt);j({x:yt.x-at.position.x,y:yt.y-at.position.y}),ie(Ve),k(!0)},Sn=(fe,Ve)=>{fe.stopPropagation(),_i(Ve),nn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},tn=(fe,Ve,Ee)=>{fe.stopPropagation();const Oe=Kt[Ve];if(!Oe||Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st),{width_mm:yt,height_mm:ut}=Oe;let St;switch(Ee){case"n":St={x:Oe.position.x+yt/2,y:Oe.position.y+ut};break;case"s":St={x:Oe.position.x+yt/2,y:Oe.position.y};break;case"e":St={x:Oe.position.x,y:Oe.position.y+ut/2};break;case"w":St={x:Oe.position.x+yt,y:Oe.position.y+ut/2};break;case"nw":St={x:Oe.position.x+yt,y:Oe.position.y+ut};break;case"ne":St={x:Oe.position.x,y:Oe.position.y+ut};break;case"sw":St={x:Oe.position.x+yt,y:Oe.position.y};break;case"se":default:St={x:Oe.position.x,y:Oe.position.y};break}const It=Math.sqrt(Math.pow(tt.x-St.x,2)+Math.pow(tt.y-St.y,2));ve({initialDistance:It,originalWidth:yt,originalHeight:ut,aspectLocked:Oe.aspectLocked,corner:Ee,anchorPoint:St}),Q(Ve),L(!0)},xn=(fe,Ve)=>{fe.stopPropagation();const Ee=Kt[Ve];if(!Ee||Ee.locked)return;const Oe=fe.touches?fe.touches[0].clientX:fe.clientX,at=fe.touches?fe.touches[0].clientY:fe.clientY,st=Ge(Oe,at),{width_mm:tt,height_mm:yt}=Ee,ut={x:Ee.position.x+tt/2,y:Ee.position.y+yt/2},St=Math.atan2(st.y-ut.y,st.x-ut.x)*(180/Math.PI);f({initialAngle:St,originalRotation:Ee.rotation||0,shapeCenter:ut}),De(Ve),Me(!0)},Gi=(fe,Ve)=>{fe.stopPropagation();const Ee=qn(Ve);if(Ee&&Kn!==Ee){gr(Ee);const ut=vt[Ee];if(ut!=null&&ut.locked)return;const St=fe.touches?fe.touches[0].clientX:fe.clientX,It=fe.touches?fe.touches[0].clientY:fe.clientY,sn=Ge(St,It);j({x:sn.x-ut.bounds.x,y:sn.y-ut.bounds.y}),Be(Ee),k(!0);return}if(fe.shiftKey){ts(Ve);return}fn.length>0&&lr(),yi(Ve);const at=en[Ve];if(at!=null&&at.locked)return;const st=fe.touches?fe.touches[0].clientX:fe.clientX,tt=fe.touches?fe.touches[0].clientY:fe.clientY,yt=Ge(st,tt);j({x:yt.x-at.position.x,y:yt.y-at.position.y}),H(Ve),k(!0)},Io=(fe,Ve)=>{fe.stopPropagation(),yi(Ve),y(!0)},Sh=(fe,Ve,Ee)=>{fe.stopPropagation();const Oe=en[Ve];if(!Oe||Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st),yt=Oe.fontSize_mm||500,ut=bo(Oe.content||"Text",Oe.fontFamily,yt,Oe.fontWeight,Oe.fontStyle),St=Oe.scale_x||1,It=Oe.scale_y||1,sn=ut.width*St,ln=yt*1.2*It;let Gt=Oe.position.x;Oe.textAlign==="center"?Gt-=sn/2:Oe.textAlign==="right"&&(Gt-=sn);const qt=Oe.position.y-yt*It;let Tr;switch(Ee){case"nw":Tr={x:Gt+sn,y:qt+ln};break;case"ne":Tr={x:Gt,y:qt+ln};break;case"sw":Tr={x:Gt+sn,y:qt};break;case"se":default:Tr={x:Gt,y:qt};break}const Ni=Math.sqrt(Math.pow(tt.x-Tr.x,2)+Math.pow(tt.y-Tr.y,2));N({initialDistance:Ni,originalScale:{x:St,y:It},originalPosition:{...Oe.position},baseBounds:ut,baseFontSize:yt,textAlign:Oe.textAlign,corner:Ee,anchorPoint:Tr}),A(Ve),_(!0)},If=(fe,Ve)=>{fe.stopPropagation();const Ee=en[Ve];if(!Ee||Ee.locked)return;const Oe=fe.touches?fe.touches[0].clientX:fe.clientX,at=fe.touches?fe.touches[0].clientY:fe.clientY,st=Ge(Oe,at),tt=bo(Ee.content,Ee.fontFamily,Ee.fontSize_mm,Ee.fontWeight,Ee.fontStyle);let yt=Ee.position.x;Ee.textAlign==="center"?yt=Ee.position.x:Ee.textAlign==="right"?yt=Ee.position.x-tt.width/2:yt=Ee.position.x+tt.width/2;const ut={x:yt,y:Ee.position.y-Ee.fontSize_mm*.4},St=Math.atan2(st.y-ut.y,st.x-ut.x)*(180/Math.PI);W({initialAngle:St,originalRotation:Ee.rotation||0,textCenter:ut}),Z(Ve),F(!0)},jl=(fe,Ve)=>{fe.stopPropagation(),pr(Ve);const Ee=bn[Ve];if(Ee!=null&&Ee.locked)return;const Oe=fe.touches?fe.touches[0].clientX:fe.clientX,at=fe.touches?fe.touches[0].clientY:fe.clientY,st=Ge(Oe,at);j({x:st.x-Ee.position.x,y:st.y-Ee.position.y}),Ae(Ve),k(!0)},$o=(fe,Ve)=>{fe.stopPropagation(),pr(Ve),nn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},$f=(fe,Ve,Ee)=>{fe.stopPropagation();const Oe=bn[Ve];if(!Oe||Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st),{width_mm:yt,height_mm:ut}=Oe;let St;switch(Ee){case"n":St={x:Oe.position.x+yt/2,y:Oe.position.y+ut};break;case"s":St={x:Oe.position.x+yt/2,y:Oe.position.y};break;case"e":St={x:Oe.position.x,y:Oe.position.y+ut/2};break;case"w":St={x:Oe.position.x+yt,y:Oe.position.y+ut/2};break;default:St={x:Oe.position.x,y:Oe.position.y};break}const It=Math.sqrt(Math.pow(tt.x-St.x,2)+Math.pow(tt.y-St.y,2));z({initialDistance:It,originalWidth:yt,originalHeight:ut,corner:Ee,anchorPoint:St}),V(Ve),U(!0)},Df=(fe,Ve)=>{fe.stopPropagation();const Ee=bn[Ve];if(!Ee||Ee.locked)return;const Oe=fe.touches?fe.touches[0].clientX:fe.clientX,at=fe.touches?fe.touches[0].clientY:fe.clientY,st=Ge(Oe,at),{width_mm:tt,height_mm:yt}=Ee,ut={x:Ee.position.x+tt/2,y:Ee.position.y+yt/2},St=Math.atan2(st.y-ut.y,st.x-ut.x)*(180/Math.PI);ke({initialAngle:St,originalRotation:Ee.rotation||0,zoneCenter:ut}),re(Ve),ae(!0)},Ln=(fe,Ve,Ee)=>{fe.stopPropagation();const Oe=vt[Ve];if(!Oe||Oe.locked)return;const at=fe.touches?fe.touches[0].clientX:fe.clientX,st=fe.touches?fe.touches[0].clientY:fe.clientY,tt=Ge(at,st),{x:yt,y:ut,width:St,height:It}=Oe.bounds;let sn;switch(Ee){case"n":sn={x:yt+St/2,y:ut+It};break;case"s":sn={x:yt+St/2,y:ut};break;case"e":sn={x:yt,y:ut+It/2};break;case"w":sn={x:yt+St,y:ut+It/2};break;case"nw":sn={x:yt+St,y:ut+It};break;case"ne":sn={x:yt,y:ut+It};break;case"sw":sn={x:yt+St,y:ut};break;case"se":default:sn={x:yt,y:ut};break}const ln=Math.sqrt(Math.pow(tt.x-sn.x,2)+Math.pow(tt.y-sn.y,2)),Gt={};for(const qt of Oe.childIds)qt.startsWith("shape-")&&Kt[qt]?Gt[qt]={position:{...Kt[qt].position},width_mm:Kt[qt].width_mm,height_mm:Kt[qt].height_mm}:qt.startsWith("text-")&&en[qt]?Gt[qt]={position:{...en[qt].position},width_mm:en[qt].width_mm||1e3,height_mm:en[qt].height_mm||500,fontSize:en[qt].fontSize||200}:qt.startsWith("court-")&&Dt[qt]?Gt[qt]={position:{...Dt[qt].position},scale:Dt[qt].scale||1}:qt.startsWith("track-")&&Ut[qt]?Gt[qt]={position:{...Ut[qt].position},scale:Ut[qt].scale||1}:qt.startsWith("motif-")&&Rt[qt]&&(Gt[qt]={position:{...Rt[qt].position},scale:Rt[qt].scale||1});Xe({initialDistance:ln,originalBounds:{...Oe.bounds},corner:Ee,anchorPoint:sn,originalChildren:Gt}),$e(Ve),ze(!0)},Ch=(fe,Ve)=>{fe.stopPropagation();const Ee=vt[Ve];if(!Ee||Ee.locked)return;const Oe=fe.touches?fe.touches[0].clientX:fe.clientX,at=fe.touches?fe.touches[0].clientY:fe.clientY,st=Ge(Oe,at),{x:tt,y:yt,width:ut,height:St}=Ee.bounds,It={x:tt+ut/2,y:yt+St/2},sn=Math.atan2(st.y-It.y,st.x-It.x)*(180/Math.PI),ln={};for(const Gt of Ee.childIds)Gt.startsWith("shape-")&&Kt[Gt]?ln[Gt]={position:{...Kt[Gt].position},rotation:Kt[Gt].rotation||0}:Gt.startsWith("text-")&&en[Gt]?ln[Gt]={position:{...en[Gt].position},rotation:en[Gt].rotation||0}:Gt.startsWith("court-")&&Dt[Gt]?ln[Gt]={position:{...Dt[Gt].position},rotation:Dt[Gt].rotation||0}:Gt.startsWith("track-")&&Ut[Gt]?ln[Gt]={position:{...Ut[Gt].position},rotation:Ut[Gt].rotation||0}:Gt.startsWith("motif-")&&Rt[Gt]&&(ln[Gt]={position:{...Rt[Gt].position},rotation:Rt[Gt].rotation||0});xt({initialAngle:sn,center:It,originalBounds:{...Ee.bounds},originalChildren:ln}),dt(Ve),Qe(!0)};pe.useEffect(()=>{k(!1),S(null),D(null),ee(null),ie(null),H(null),Ae(null),j(null)},[At.width_mm,At.length_mm]),pe.useEffect(()=>{if(!x||!M&&!B&&!R&&!ue&&!ge&&!ye&&!we)return;Da(!0);const Ee={id:M||B||R||ue||ge||ye||we,type:M?"court":B?"track":R?"motif":ue?"shape":ge?"text":ye?"exclusionZone":we?"group":null,offset:{x:0,y:0}};Ce(Ee),Re.current=Ee;const Oe=st=>{xe.current||(xe.current=requestAnimationFrame(()=>{var Gt,qt,Tr,Ni,uo,Rr;xe.current=null;const tt=st.touches?st.touches[0].clientX:st.clientX,yt=st.touches?st.touches[0].clientY:st.clientY,ut=Ge(tt,yt);let St={x:ut.x-P.x,y:ut.y-P.y};sr&&(St=jF(St,tr));let It=null;if(M?It=(Gt=Dt[M])==null?void 0:Gt.position:B?It=(qt=Ut[B])==null?void 0:qt.position:R?It=(Tr=Rt[R])==null?void 0:Tr.position:ue?It=(Ni=Kt[ue])==null?void 0:Ni.position:ge?It=(uo=en[ge])==null?void 0:uo.position:ye?It=(Rr=bn[ye])==null?void 0:Rr.position:we&&(It={x:0,y:0}),!It)return;const sn={x:St.x-It.x,y:St.y-It.y},ln=Re.current?{...Re.current,offset:sn}:null;Re.current=ln,Ce(ln)}))},at=()=>{xe.current&&(cancelAnimationFrame(xe.current),xe.current=null);const st=Re.current;if(st&&(st.offset.x!==0||st.offset.y!==0)){if(M){const tt=Dt[M];let yt={x:tt.position.x+st.offset.x,y:tt.position.y+st.offset.y};const ut={width_mm:tt.template.dimensions.width_mm*tt.scale,length_mm:tt.template.dimensions.length_mm*tt.scale};yt=yp(yt,ut,At),rr(M,yt)}else if(B){const tt=Ut[B],yt={x:tt.position.x+st.offset.x,y:tt.position.y+st.offset.y};Jr(B,yt)}else if(R){const tt=Rt[R];let yt={x:tt.position.x+st.offset.x,y:tt.position.y+st.offset.y};const ut={width_mm:tt.originalWidth_mm*(tt.scale||1),length_mm:tt.originalHeight_mm*(tt.scale||1)};yt=yp(yt,ut,At),Gr(R,yt)}else if(ue){const tt=Kt[ue];let yt={x:tt.position.x+st.offset.x,y:tt.position.y+st.offset.y};const ut={width_mm:tt.width_mm,length_mm:tt.height_mm};yt=yp(yt,ut,At),$r(ue,yt)}else if(ge){const tt=en[ge],yt={x:tt.position.x+st.offset.x,y:tt.position.y+st.offset.y};jn(ge,yt)}else if(ye){const tt=bn[ye];let yt={x:tt.position.x+st.offset.x,y:tt.position.y+st.offset.y};const ut={width_mm:tt.width_mm,length_mm:tt.height_mm};yt=yp(yt,ut,At),O(ye,yt)}else we&&vt[we]&&($s(we,st.offset.x,st.offset.y),ra(we));nn.getState().addToHistory()}Ce(null),Re.current=null,Da(!1),k(!1),S(null),D(null),ee(null),ie(null),H(null),Ae(null),Be(null),j(null)};return window.addEventListener("mousemove",Oe),window.addEventListener("mouseup",at),window.addEventListener("touchmove",Oe,{passive:!1}),window.addEventListener("touchend",at),window.addEventListener("touchcancel",at),()=>{window.removeEventListener("mousemove",Oe),window.removeEventListener("mouseup",at),window.removeEventListener("touchmove",Oe),window.removeEventListener("touchend",at),window.removeEventListener("touchcancel",at),xe.current&&(cancelAnimationFrame(xe.current),xe.current=null),Re.current=null,Da(!1)}},[x,M,B,R,ue,ge,ye,we,P,Dt,Ut,Rt,Kt,en,bn,vt,sr,tr,At,rr,Jr,Gr,$r,jn,O,$s,ra,Da]),pe.useEffect(()=>{if(!nt||!lt||!oe)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),tt=Rt[lt];if(!tt)return;const ut=Math.sqrt(Math.pow(st.x-oe.anchorPoint.x,2)+Math.pow(st.y-oe.anchorPoint.y,2))/oe.initialDistance;let St=oe.originalScale*ut;St=Math.max(.1,St),St=Math.round(St*100)/100;const It=tt.originalWidth_mm*St,sn=tt.originalHeight_mm*St;let ln;switch(oe.corner){case"nw":ln={x:oe.anchorPoint.x-It,y:oe.anchorPoint.y-sn};break;case"ne":ln={x:oe.anchorPoint.x,y:oe.anchorPoint.y-sn};break;case"sw":ln={x:oe.anchorPoint.x-It,y:oe.anchorPoint.y};break;case"se":default:ln={x:oe.anchorPoint.x,y:oe.anchorPoint.y};break}yr(lt,St),Gr(lt,ln)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),Ue(!1),de(null),We(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[nt,lt,oe,Rt,yr,Gr]),pe.useEffect(()=>{if(!Ne||!jt||!q)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),yt=Math.atan2(st.y-q.motifCenter.y,st.x-q.motifCenter.x)*(180/Math.PI)-q.initialAngle;let ut=q.originalRotation+yt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,Qt(jt,ut)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),ht(!1),Ct(null),Ye(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Ne,jt,q,Qt]),pe.useEffect(()=>{if(!se||!I||!he)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at);if(!Kt[I])return;const ut=Math.sqrt(Math.pow(st.x-he.anchorPoint.x,2)+Math.pow(st.y-he.anchorPoint.y,2))/he.initialDistance;let St,It;const sn=he.corner,ln=["n","s","e","w"].includes(sn);if(he.aspectLocked)St=he.originalWidth*ut,It=he.originalHeight*ut;else if(ln){const qt=Math.abs(st.y-he.anchorPoint.y),Tr=Math.abs(st.x-he.anchorPoint.x);sn==="n"||sn==="s"?(St=he.originalWidth,It=Math.max(100,qt)):(St=Math.max(100,Tr),It=he.originalHeight)}else{const qt=Math.abs(st.x-he.anchorPoint.x),Tr=Math.abs(st.y-he.anchorPoint.y);St=Math.max(100,qt),It=Math.max(100,Tr)}St=Math.round(St),It=Math.round(It);let Gt;switch(sn){case"n":Gt={x:he.anchorPoint.x-St/2,y:he.anchorPoint.y-It};break;case"s":Gt={x:he.anchorPoint.x-St/2,y:he.anchorPoint.y};break;case"e":Gt={x:he.anchorPoint.x,y:he.anchorPoint.y-It/2};break;case"w":Gt={x:he.anchorPoint.x-St,y:he.anchorPoint.y-It/2};break;case"nw":Gt={x:he.anchorPoint.x-St,y:he.anchorPoint.y-It};break;case"ne":Gt={x:he.anchorPoint.x,y:he.anchorPoint.y-It};break;case"sw":Gt={x:he.anchorPoint.x-St,y:he.anchorPoint.y};break;case"se":default:Gt={x:he.anchorPoint.x,y:he.anchorPoint.y};break}vn(I,St,It),$r(I,Gt)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),L(!1),Q(null),ve(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[se,I,he,Kt,vn,$r]),pe.useEffect(()=>{if(!me||!Je||!l)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),yt=Math.atan2(st.y-l.shapeCenter.y,st.x-l.shapeCenter.x)*(180/Math.PI)-l.initialAngle;let ut=l.originalRotation+yt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,Vn(Je,ut)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),Me(!1),De(null),f(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[me,Je,l,Vn]),pe.useEffect(()=>{if(!b||!E||!T)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at);if(!en[E])return;const ut=Math.sqrt(Math.pow(st.x-T.anchorPoint.x,2)+Math.pow(st.y-T.anchorPoint.y,2))/T.initialDistance,St=Math.max(.01,T.originalScale.x*ut),It=Math.max(.01,T.originalScale.y*ut),{baseBounds:sn,baseFontSize:ln,corner:Gt,anchorPoint:qt,textAlign:Tr}=T,Ni=sn.width*St,uo=ln*1.2*It;let Rr={...T.originalPosition};switch(Gt){case"nw":Tr==="left"?Rr.x=qt.x-Ni:Tr==="center"?Rr.x=qt.x-Ni/2:Rr.x=qt.x,Rr.y=qt.y-uo*.17;break;case"ne":Tr==="left"?Rr.x=qt.x:Tr==="center"?Rr.x=qt.x+Ni/2:Rr.x=qt.x+Ni,Rr.y=qt.y-uo*.17;break;case"sw":Tr==="left"?Rr.x=qt.x-Ni:Tr==="center"?Rr.x=qt.x-Ni/2:Rr.x=qt.x,Rr.y=qt.y+ln*It;break;case"se":default:Tr==="left"?Rr.x=qt.x:Tr==="center"?Rr.x=qt.x+Ni/2:Rr.x=qt.x+Ni,Rr.y=qt.y+ln*It;break}Gn(E,St,It),jn(E,Rr)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),_(!1),A(null),N(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[b,E,T,en,Gn,jn]),pe.useEffect(()=>{if(!$||!G||!Y)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),yt=Math.atan2(st.y-Y.textCenter.y,st.x-Y.textCenter.x)*(180/Math.PI)-Y.initialAngle;let ut=Y.originalRotation+yt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,qr(G,ut)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),F(!1),Z(null),W(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[$,G,Y,qr]),pe.useEffect(()=>{if(!X||!K||!ne)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at);if(!bn[K])return;const yt=ne.corner,ut=Math.abs(st.y-ne.anchorPoint.y),St=Math.abs(st.x-ne.anchorPoint.x);let It,sn;yt==="n"||yt==="s"?(It=ne.originalWidth,sn=Math.max(500,ut)):yt==="e"||yt==="w"?(It=Math.max(500,St),sn=ne.originalHeight):(It=Math.max(500,St),sn=Math.max(500,ut)),It=Math.round(It),sn=Math.round(sn);let ln;switch(yt){case"n":ln={x:ne.anchorPoint.x-It/2,y:ne.anchorPoint.y-sn};break;case"s":ln={x:ne.anchorPoint.x-It/2,y:ne.anchorPoint.y};break;case"e":ln={x:ne.anchorPoint.x,y:ne.anchorPoint.y-sn/2};break;case"w":ln={x:ne.anchorPoint.x-It,y:ne.anchorPoint.y-sn/2};break;default:ln={x:ne.anchorPoint.x,y:ne.anchorPoint.y};break}J(K,It,sn),O(K,ln)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),U(!1),V(null),z(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[X,K,ne,bn,J,O]),pe.useEffect(()=>{if(!te||!ce||!be)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),yt=Math.atan2(st.y-be.zoneCenter.y,st.x-be.zoneCenter.x)*(180/Math.PI)-be.initialAngle;let ut=be.originalRotation+yt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,le(ce,ut)},Ve=()=>{const{addToHistory:Ee}=nn.getState();Ee(),it.current=Date.now(),ae(!1),re(null),ke(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[te,ce,be,le]),pe.useEffect(()=>{if(!Pe||!_e||!Fe)return;const fe=Ee=>{const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),{initialDistance:tt,originalBounds:yt,corner:ut,anchorPoint:St,originalChildren:It}=Fe;let ln=Math.sqrt(Math.pow(st.x-St.x,2)+Math.pow(st.y-St.y,2))/tt;ln<.1&&(ln=.1),ln>10&&(ln=10);let Gt=ln,qt=ln;ut==="n"||ut==="s"?Gt=1:(ut==="e"||ut==="w")&&(qt=1),ns(_e,Gt,qt,St,It)},Ve=()=>{const{addToHistory:Ee,refreshGroupBounds:Oe}=nn.getState();Oe(_e),Ee(),it.current=Date.now(),ze(!1),$e(null),Xe(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Pe,_e,Fe,vt,ns]),pe.useEffect(()=>{if(!Ze||!ft||!Et)return;const fe=Ee=>{Ee.preventDefault();const Oe=Ee.touches?Ee.touches[0].clientX:Ee.clientX,at=Ee.touches?Ee.touches[0].clientY:Ee.clientY,st=Ge(Oe,at),{initialAngle:tt,center:yt,originalChildren:ut}=Et;let It=Math.atan2(st.y-yt.y,st.x-yt.x)*(180/Math.PI)-tt;Ee.shiftKey&&(It=Math.round(It/15)*15),rs(ft,It,yt,ut)},Ve=()=>{const{addToHistory:Ee,refreshGroupBounds:Oe}=nn.getState();Oe(ft),Ee(),it.current=Date.now(),Qe(!1),dt(null),xt(null)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",fe,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",fe),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Ze,ft,Et,vt,rs]);const zf=fe=>{var Oe;if(bt&&_t&&(fe.target===fe.currentTarget||fe.target.tagName==="svg"||fe.target.closest("svg"))){fe.preventDefault(),fe.stopPropagation();const at=Date.now(),st=at-mt;if(Nt(at),st<300&&st>0){rn();return}const tt=fe.clientX,yt=fe.clientY,ut=Ge(tt,yt),St=Kt[_t];if(St){const It=(ut.x-St.position.x)/St.width_mm,sn=(ut.y-St.position.y)/St.height_mm,ln=Math.max(-.5,Math.min(1.5,It)),Gt=Math.max(-.5,Math.min(1.5,sn));Zt(ln,Gt)}return}if(Date.now()-it.current<100)return;(fe.target===fe.currentTarget||fe.target.tagName==="svg"||((Oe=fe.target.classList)==null?void 0:Oe.contains("court-canvas__surface"))||fe.target.closest(".court-canvas__scroll-container")===fe.target)&&(ar(),zn(),gi(),Qr(),Pi(),mr(),ni(),lr(),Bt(null))},Ff=()=>{a(fe=>Math.min(fe*1.25,5))},ai=()=>{a(fe=>Math.max(fe/1.25,.25))},za=()=>{a(1),c({x:0,y:0})},_n=fe=>{if(fe.ctrlKey||fe.metaKey){fe.preventDefault();const Ve=fe.deltaY*-.002;a(Ee=>Math.min(Math.max(Ee+Ee*Ve,.25),5))}else{fe.preventDefault();const Ve=1;c(Ee=>({x:Ee.x-fe.deltaX*Ve,y:Ee.y-fe.deltaY*Ve}))}},Eh=fe=>{(fe.button===1||fe.button===0&&g)&&(fe.preventDefault(),fe.stopPropagation(),d(!0),m({x:fe.clientX-o.x,y:fe.clientY-o.y}))},br=fe=>{const Ve=fe[0].clientX-fe[1].clientX,Ee=fe[0].clientY-fe[1].clientY;return Math.sqrt(Ve*Ve+Ee*Ee)},Al=fe=>({x:(fe[0].clientX+fe[1].clientX)/2,y:(fe[0].clientY+fe[1].clientY)/2}),co=fe=>{if(fe.touches.length===2){fe.preventDefault();const Ve=br(fe.touches),Ee=Al(fe.touches);C({active:!0,initialDistance:Ve,initialZoom:s,initialPan:{...o},initialCenter:Ee})}},Yr=fe=>{if(fe.touches.length===2&&w.active){fe.preventDefault();const Ee=br(fe.touches)/w.initialDistance;let Oe=w.initialZoom*Ee;Oe=Math.min(Math.max(Oe,.25),5);const at=Al(fe.touches),st=at.x-w.initialCenter.x,tt=at.y-w.initialCenter.y;a(Oe),c({x:w.initialPan.x+st,y:w.initialPan.y+tt})}},ia=fe=>{fe.touches.length<2&&C({active:!1,initialDistance:0,initialZoom:1,initialPan:{x:0,y:0},initialCenter:{x:0,y:0}})};pe.useEffect(()=>{if(!h)return;const fe=Ee=>{c({x:Ee.clientX-p.x,y:Ee.clientY-p.y})},Ve=()=>{d(!1)};return window.addEventListener("mousemove",fe),window.addEventListener("mouseup",Ve),()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",Ve)}},[h,p]),pe.useEffect(()=>{const fe=Ee=>{if(Ee.code==="Space"&&!Ee.repeat){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;Ee.preventDefault(),v(!0)}if(Ee.code==="Escape"&&bt&&_t&&(Ee.preventDefault(),Nn()),Ee.code==="Enter"&&bt&&_t&&(Ee.preventDefault(),rn()),Ee.code==="Escape"&&Kn&&(Ee.preventDefault(),xs()),(Ee.code==="Delete"||Ee.code==="Backspace")&&wn&&kt!==null){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Oe=Kt[wn];Oe&&(Oe.shapeType==="path"||Oe.shapeType==="blob")&&Oe.editPointsVisible&&(Ee.preventDefault(),He(wn,kt),Bt(null))}if((Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()==="g"&&!Ee.shiftKey){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;fn.length>=2&&(Ee.preventDefault(),nn.getState().groupSelected())}if((Ee.metaKey||Ee.ctrlKey)&&Ee.shiftKey&&Ee.key.toLowerCase()==="g"){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;$t&&(Ee.preventDefault(),nn.getState().ungroup($t))}if((Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()==="c"&&!Ee.shiftKey){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Oe=nn.getState();(Oe.selectedGroupId||Oe.selectedElementIds.length>0||Oe.selectedShapeId||Oe.selectedTextId)&&(Ee.preventDefault(),Oe.copySelection())}if((Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()==="v"&&!Ee.shiftKey){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Oe=nn.getState();Oe.clipboard&&(Ee.preventDefault(),Oe.pasteClipboard())}},Ve=Ee=>{Ee.code==="Space"&&(v(!1),d(!1))};return window.addEventListener("keydown",fe),window.addEventListener("keyup",Ve),()=>{window.removeEventListener("keydown",fe),window.removeEventListener("keyup",Ve)}},[bt,_t,Nn,rn,wn,kt,Kt,He,fn,$t,Kn,xs]);const Sc=fe=>{if(bt&&_t){const Ve=Ge(fe.clientX,fe.clientY);Ke(Ve)}},bi=bt&&_t?Kt[_t]:null,Pl=((Bf=bi==null?void 0:bi.controlPoints)==null?void 0:Bf.length)>0?bi.controlPoints[bi.controlPoints.length-1]:null;return u.jsxs("div",{className:`court-canvas ${bt?"court-canvas--drawing":""}`,onClick:zf,onMouseMove:Sc,children:[bt&&u.jsx("div",{className:"court-canvas__drawing-indicator",children:"Click to add points  Double-click or Enter to finish  Escape to cancel"}),u.jsxs("div",{className:"court-canvas__zoom-controls",children:[u.jsx("button",{onClick:Ff,className:"court-canvas__zoom-btn",title:"Zoom In (Ctrl + Scroll)",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),u.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),u.jsx("path",{d:"m21 21-4.35-4.35"})]})}),u.jsx("button",{onClick:ai,className:"court-canvas__zoom-btn",title:"Zoom Out (Ctrl + Scroll)",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),u.jsx("path",{d:"m21 21-4.35-4.35"})]})}),u.jsx("button",{onClick:za,className:"court-canvas__zoom-btn",title:"Reset View",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M1 4v6h6"}),u.jsx("path",{d:"M23 20v-6h-6"}),u.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}),u.jsxs("span",{className:"court-canvas__zoom-level",title:"Scroll to pan, Ctrl+Scroll to zoom, Space+Drag to pan",children:[Math.round(s*100),"%"]})]}),u.jsx("div",{ref:i,className:"court-canvas__viewport",onWheel:_n,onMouseDown:Eh,onTouchStart:co,onTouchMove:Yr,onTouchEnd:ia,style:{cursor:h?"grabbing":g?"grab":void 0,touchAction:"none"},children:u.jsx("div",{className:"court-canvas__transform-wrapper",style:{transform:`translate(${o.x}px, ${o.y}px) scale(${s})`,transformOrigin:"center center"},children:u.jsxs("svg",{ref:r,className:"court-canvas__svg",viewBox:`0 0 ${At.width_mm} ${At.length_mm}`,preserveAspectRatio:"xMidYMid meet",children:[u.jsx("defs",{children:At.boundary&&At.boundary.type!=="rectangle"&&At.boundary.controlPoints&&u.jsx("clipPath",{id:"surface-boundary-clip",children:u.jsx("path",{d:f2(At.boundary,At.width_mm,At.length_mm)})})}),u.jsx("g",{clipPath:At.boundary&&At.boundary.type!=="rectangle"&&At.boundary.controlPoints?"url(#surface-boundary-clip)":void 0,children:u.jsx("rect",{x:"0",y:"0",width:At.width_mm,height:At.length_mm,fill:At.color.hex,className:"court-canvas__surface"})}),At.boundary&&At.boundary.type!=="rectangle"&&At.boundary.controlPoints&&u.jsx("path",{d:f2(At.boundary,At.width_mm,At.length_mm),fill:"none",stroke:"#94a3b8",strokeWidth:"60",strokeDasharray:"300 200",pointerEvents:"none"}),Object.values(bn).map(fe=>{if(fe.visible===!1)return null;const Ve=cr(fe,fe.id);return u.jsx(n9,{zone:Ve,isSelected:fe.id===Or,zoom:s,onMouseDown:Ee=>jl(Ee,Ve.id),onTouchStart:Ee=>jl(Ee,Ve.id),onDoubleClick:Ee=>$o(Ee,Ve.id),onScaleStart:(Ee,Oe)=>$f(Ee,Ve.id,Oe),onRotateStart:Ee=>Df(Ee,Ve.id)},fe.id)}),En.map(fe=>{if(fe.startsWith("court-")){const Ve=Dt[fe];if(!Ve||Ve.visible===!1)return null;const Ee=fe===wt||fn.includes(fe);return u.jsx(p2,{court:cr(Ve,fe),isSelected:Ee,onMouseDown:Oe=>pt(Oe,fe),onTouchStart:Oe=>pt(Oe,fe),onDoubleClick:Oe=>ct(Oe,fe),svgRef:r},fe)}if(fe.startsWith("track-")){const Ve=Ut[fe];if(!Ve||Ve.visible===!1)return null;const Ee=fe===Tn||fn.includes(fe);return u.jsx(o2,{track:cr(Ve,fe),isSelected:Ee,onMouseDown:Oe=>Tt(Oe,fe),onTouchStart:Oe=>Tt(Oe,fe),onDoubleClick:Oe=>on(Oe,fe),svgRef:r},fe)}if(fe.startsWith("motif-")){const Ve=Rt[fe];if(!Ve||Ve.visible===!1)return null;const Ee=fe===Rn||fn.includes(fe);return u.jsx(l2,{motif:cr(Ve,fe),isSelected:Ee,zoom:s,onMouseDown:Oe=>Lt(Oe,fe),onTouchStart:Oe=>Lt(Oe,fe),onDoubleClick:Oe=>zt(Oe,fe),onScaleStart:(Oe,at)=>Wt(Oe,fe,at),onRotateStart:Oe=>An(Oe,fe)},fe)}if(fe.startsWith("shape-")){const Ve=Kt[fe];if(!Ve||Ve.visible===!1)return null;const Ee=cr(Ve,fe),Oe=fe===wn||fn.includes(fe);return Ee.shapeType==="blob"?u.jsx(u2,{shape:Ee,isSelected:Oe,zoom:s,onMouseDown:at=>Mn(at,fe),onTouchStart:at=>Mn(at,fe),onDoubleClick:at=>Sn(at,fe),onScaleStart:(at,st)=>tn(at,fe,st),onRotateStart:at=>xn(at,fe),onPointDrag:(at,st,tt)=>Se(fe,at,st,tt),onHandleDrag:(at,st,tt,yt)=>et(fe,at,st,tt,yt),onDragEnd:()=>rt(),selectedPointIndex:fe===wn?kt:null,onPointSelect:at=>Bt(at),onPointDelete:at=>He(fe,at)},fe):Ee.shapeType==="path"?u.jsx(h2,{shape:Ee,isSelected:Oe,zoom:s,onMouseDown:at=>Mn(at,fe),onTouchStart:at=>Mn(at,fe),onDoubleClick:at=>Sn(at,fe),onScaleStart:(at,st)=>tn(at,fe,st),onRotateStart:at=>xn(at,fe),onPointDrag:(at,st,tt)=>or(fe,at,st,tt),onHandleDrag:(at,st,tt,yt)=>es(fe,at,st,tt,yt),onDragEnd:()=>Ft(),selectedPointIndex:fe===wn?kt:null,onPointSelect:at=>Bt(at),onPointDelete:at=>He(fe,at)},fe):u.jsx(c2,{shape:Ee,isSelected:Oe,zoom:s,onMouseDown:at=>Mn(at,fe),onTouchStart:at=>Mn(at,fe),onDoubleClick:at=>Sn(at,fe),onScaleStart:(at,st)=>tn(at,fe,st),onRotateStart:at=>xn(at,fe)},fe)}if(fe.startsWith("text-")){const Ve=en[fe];if(!Ve||Ve.visible===!1)return null;const Ee=cr(Ve,fe);return u.jsx(d2,{text:Ee,isSelected:fe===Er||fn.includes(fe),zoom:s,onMouseDown:Oe=>Gi(Oe,fe),onTouchStart:Oe=>Gi(Oe,fe),onDoubleClick:Oe=>Io(Oe,fe),onScaleStart:(Oe,at)=>Sh(Oe,fe,at),onRotateStart:Oe=>If(Oe,fe)},fe)}if(fe.startsWith("group-")){const Ve=vt[fe];if(!Ve||Ve.visible===!1)return null;const Ee=(Le==null?void 0:Le.id)===fe?`translate(${Le.offset.x}, ${Le.offset.y})`:void 0;return u.jsx("g",{transform:Ee,children:Ve.childIds.map(Oe=>{if(Oe.startsWith("shape-")){const at=Kt[Oe];if(!at||at.visible===!1)return null;const st=Oe===wn||fn.includes(Oe);return at.shapeType==="blob"?u.jsx(u2,{shape:at,isSelected:st,zoom:s,onMouseDown:tt=>Mn(tt,Oe),onTouchStart:tt=>Mn(tt,Oe),onDoubleClick:tt=>Sn(tt,Oe),onScaleStart:(tt,yt)=>tn(tt,Oe,yt),onRotateStart:tt=>xn(tt,Oe),onPointDrag:(tt,yt,ut)=>Se(Oe,tt,yt,ut),onHandleDrag:(tt,yt,ut,St)=>et(Oe,tt,yt,ut,St),onDragEnd:()=>rt(),selectedPointIndex:Oe===wn?kt:null,onPointSelect:tt=>Bt(tt),onPointDelete:tt=>He(Oe,tt)},Oe):at.shapeType==="path"?u.jsx(h2,{shape:at,isSelected:st,zoom:s,onMouseDown:tt=>Mn(tt,Oe),onTouchStart:tt=>Mn(tt,Oe),onDoubleClick:tt=>Sn(tt,Oe),onScaleStart:(tt,yt)=>tn(tt,Oe,yt),onRotateStart:tt=>xn(tt,Oe),onPointDrag:(tt,yt,ut)=>or(Oe,tt,yt,ut),onHandleDrag:(tt,yt,ut,St)=>es(Oe,tt,yt,ut,St),onDragEnd:()=>Ft(),selectedPointIndex:Oe===wn?kt:null,onPointSelect:tt=>Bt(tt),onPointDelete:tt=>He(Oe,tt)},Oe):u.jsx(c2,{shape:at,isSelected:st,zoom:s,onMouseDown:tt=>Mn(tt,Oe),onTouchStart:tt=>Mn(tt,Oe),onDoubleClick:tt=>Sn(tt,Oe),onScaleStart:(tt,yt)=>tn(tt,Oe,yt),onRotateStart:tt=>xn(tt,Oe)},Oe)}if(Oe.startsWith("text-")){const at=en[Oe];return!at||at.visible===!1?null:u.jsx(d2,{text:at,isSelected:Oe===Er||fn.includes(Oe),zoom:s,onMouseDown:st=>Gi(st,Oe),onTouchStart:st=>Gi(st,Oe),onDoubleClick:st=>Io(st,Oe),onScaleStart:(st,tt)=>Sh(st,Oe,tt),onRotateStart:st=>If(st,Oe)},Oe)}if(Oe.startsWith("court-")){const at=Dt[Oe];if(!at||at.visible===!1)return null;const st=Oe===wt||fn.includes(Oe);return u.jsx(p2,{court:at,isSelected:st,onMouseDown:tt=>pt(tt,Oe),onTouchStart:tt=>pt(tt,Oe),onDoubleClick:tt=>ct(tt,Oe),svgRef:r},Oe)}if(Oe.startsWith("track-")){const at=Ut[Oe];if(!at||at.visible===!1)return null;const st=Oe===Tn||fn.includes(Oe);return u.jsx(o2,{track:at,isSelected:st,onMouseDown:tt=>Tt(tt,Oe),onTouchStart:tt=>Tt(tt,Oe),onDoubleClick:tt=>on(tt,Oe),svgRef:r},Oe)}if(Oe.startsWith("motif-")){const at=Rt[Oe];if(!at||at.visible===!1)return null;const st=Oe===Rn||fn.includes(Oe);return u.jsx(l2,{motif:at,isSelected:st,zoom:s,onMouseDown:tt=>Lt(tt,Oe),onTouchStart:tt=>Lt(tt,Oe),onDoubleClick:tt=>zt(tt,Oe),onScaleStart:(tt,yt)=>Wt(tt,Oe,yt),onRotateStart:tt=>An(tt,Oe)},Oe)}return null})},fe)}return null}),Object.keys(vt).map(fe=>u.jsx(i9,{groupId:fe,zoom:s,screenToSVG:Ge,onDragStart:(Ve,Ee)=>{j(Ee),Be(Ve),k(!0)},onScaleStart:(Ve,Ee,Oe)=>Ln(Ve,Ee,Oe),onRotateStart:(Ve,Ee)=>Ch(Ve,Ee)},fe)),bt&&bi&&Pl&&Te&&u.jsx("line",{x1:bi.position.x+Pl.x*bi.width_mm,y1:bi.position.y+Pl.y*bi.height_mm,x2:Te.x,y2:Te.y,stroke:"#3b82f6",strokeWidth:"50",strokeDasharray:"100 100",opacity:"0.6",pointerEvents:"none"}),bt&&bi&&((is=bi.controlPoints)==null?void 0:is.map((fe,Ve)=>u.jsx("circle",{cx:bi.position.x+fe.x*bi.width_mm,cy:bi.position.y+fe.y*bi.height_mm,r:"80",fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",pointerEvents:"none"},`preview-point-${Ve}`)))]})})}),u.jsxs("div",{className:"court-canvas__info",children:[u.jsxs("span",{children:[(At.width_mm/1e3).toFixed(1),"m  ",(At.length_mm/1e3).toFixed(1),"m"]}),sr&&u.jsxs("span",{className:"court-canvas__grid-indicator",children:["Grid: ",tr,"mm"]})]}),En.length===0&&u.jsxs("div",{className:"court-canvas__empty-state",children:[u.jsx("div",{className:"court-canvas__empty-icon",children:u.jsxs("svg",{width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("path",{d:"M12 2L14.4 8.4L21 9.6L16.2 14.4L17.6 21L12 17.6L6.4 21L7.8 14.4L3 9.6L9.6 8.4L12 2Z",fill:"rgba(255,255,255,0.15)",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),u.jsx("circle",{cx:"19",cy:"5",r:"1.5",fill:"currentColor",opacity:"0.6"}),u.jsx("circle",{cx:"5",cy:"18",r:"1",fill:"currentColor",opacity:"0.4"}),u.jsx("circle",{cx:"20",cy:"16",r:"0.8",fill:"currentColor",opacity:"0.5"})]})}),u.jsx("h3",{className:"court-canvas__empty-title",children:"Your canvas is ready"}),u.jsx("p",{className:"court-canvas__empty-text",children:"Design your perfect TPV surface in minutes"}),u.jsxs("div",{className:"court-canvas__empty-hints",children:[u.jsxs("div",{className:"court-canvas__hint",children:[u.jsx("span",{className:"court-canvas__hint-icon",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),u.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]})}),u.jsxs("span",{children:["Add ",u.jsx("strong",{children:"Courts"}),", ",u.jsx("strong",{children:"Tracks"}),", ",u.jsx("strong",{children:"Shapes"})," or ",u.jsx("strong",{children:"Designs"})]})]}),u.jsxs("div",{className:"court-canvas__hint",children:[u.jsx("span",{className:"court-canvas__hint-icon",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M12 5v14M5 12h14"})})}),u.jsx("span",{children:"Click elements in the library to place them"})]}),u.jsxs("div",{className:"court-canvas__hint",children:[u.jsx("span",{className:"court-canvas__hint-icon",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M5 9l4 4-4 4"}),u.jsx("path",{d:"M12 4h7a2 2 0 012 2v12a2 2 0 01-2 2h-7"})]})}),u.jsx("span",{children:"Arrange, customise colours and export"})]})]})]})]})});function p2({court:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,svgRef:s}){var h;const{markings:a,zones:o}=TF(e),c=((h=e.courtSurfaceColor)==null?void 0:h.hex)||null;return u.jsxs("g",{className:`court-canvas__court ${t?"court-canvas__court--selected":""}`,transform:AF(e),style:{cursor:"move"},children:[c&&u.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:c,className:"court-canvas__court-surface"}),u.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:"none",pointerEvents:"all",onMouseDown:n,onTouchStart:r,onDoubleClick:i,style:{cursor:"move"}}),o.map(d=>u.jsx(a9,{zone:d},d.id)),a.map(d=>u.jsx(o9,{marking:d},d.id)),t&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:"none",stroke:"#007bff",strokeWidth:"100",strokeDasharray:"400 400",className:"court-canvas__selection-outline"}),u.jsx(PF,{court:e,svgRef:s})]})]})}function a9({zone:e}){switch(e.type){case"rect":return u.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill});case"circle":return u.jsx("circle",{cx:e.cx,cy:e.cy,r:e.r,fill:e.fill});case"polygon":return u.jsx("polygon",{points:e.points,fill:e.fill});default:return null}}function o9({marking:e}){switch(e.type){case"line":return u.jsx("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.stroke,strokeWidth:e.strokeWidth});case"rect":return u.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"circle":return u.jsx("circle",{cx:e.cx,cy:e.cy,r:e.r,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"path":return u.jsx("path",{d:e.d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"polyline":return u.jsx("polyline",{points:e.points,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});default:return null}}const oN={"track-flexible":{id:"track-flexible",name:"Running Track",type:"running-track",trackType:"curved",standard:"Flexible Design",category:"track",description:"Flexible running track - adjust size, lanes, and corner radius to fit your surface",parameters:{numLanes:4,laneWidth_mm:1220,width_mm:25e3,height_mm:15e3,cornerRadius:{topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},lineWidth_mm:50,startingBoxes:{enabled:!1,depth_mm:400,lineWidth_mm:50}},defaultLineColor:"RH31",defaultTrackSurfaceColor:"RH01",calculatedDimensions:{totalWidth_mm:25e3,totalLength_mm:15e3}},"track-straight":{id:"track-straight",name:"Straight Track",type:"running-track",trackType:"straight",standard:"Sprint Track",category:"track",description:"Straight sprint track - perfect for 60m, 100m, or custom length sprints",parameters:{numLanes:6,laneWidth_mm:1220,width_mm:7320,height_mm:1e5,cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},lineWidth_mm:50,startingBoxes:{enabled:!1,depth_mm:400,lineWidth_mm:50}},defaultLineColor:"RH31",defaultTrackSurfaceColor:"RH01",calculatedDimensions:{totalWidth_mm:7320,totalLength_mm:1e5}}};function l9(){return Object.values(oN)}function c9(e){return oN[e]||null}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */var Cy,m2;function g2(){if(m2)return Cy;m2=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:a,create:o}=Object,{apply:c,construct:h}=typeof Reflect<"u"&&Reflect;s||(s=function(Me){return Me}),a||(a=function(Me){return Me}),c||(c=function(Me,Je){for(var De=arguments.length,l=new Array(De>2?De-2:0),f=2;f<De;f++)l[f-2]=arguments[f];return Me.apply(Je,l)}),h||(h=function(Me){for(var Je=arguments.length,De=new Array(Je>1?Je-1:0),l=1;l<Je;l++)De[l-1]=arguments[l];return new Me(...De)});const d=D(Array.prototype.forEach),p=D(Array.prototype.lastIndexOf),m=D(Array.prototype.pop),g=D(Array.prototype.push),v=D(Array.prototype.splice),w=D(String.prototype.toLowerCase),C=D(String.prototype.toString),x=D(String.prototype.match),k=D(String.prototype.replace),P=D(String.prototype.indexOf),j=D(String.prototype.trim),M=D(Object.prototype.hasOwnProperty),S=D(RegExp.prototype.test),B=R(TypeError);function D(me){return function(Me){Me instanceof RegExp&&(Me.lastIndex=0);for(var Je=arguments.length,De=new Array(Je>1?Je-1:0),l=1;l<Je;l++)De[l-1]=arguments[l];return c(me,Me,De)}}function R(me){return function(){for(var Me=arguments.length,Je=new Array(Me),De=0;De<Me;De++)Je[De]=arguments[De];return h(me,Je)}}function ee(me,Me){let Je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w;t&&t(me,null);let De=Me.length;for(;De--;){let l=Me[De];if(typeof l=="string"){const f=Je(l);f!==l&&(n(Me)||(Me[De]=f),l=f)}me[l]=!0}return me}function ue(me){for(let Me=0;Me<me.length;Me++)M(me,Me)||(me[Me]=null);return me}function ie(me){const Me=o(null);for(const[Je,De]of e(me))M(me,Je)&&(Array.isArray(De)?Me[Je]=ue(De):De&&typeof De=="object"&&De.constructor===Object?Me[Je]=ie(De):Me[Je]=De);return Me}function ge(me,Me){for(;me!==null;){const De=i(me,Me);if(De){if(De.get)return D(De.get);if(typeof De.value=="function")return D(De.value)}me=r(me)}function Je(){return null}return Je}const H=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ye=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ae=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),we=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Be=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xe=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Le=s(["#text"]),Ce=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Re=s(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),it=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nt=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ue=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lt=a(/<%[\w\W]*|[\w\W]*%>/gm),de=a(/\$\{[\w\W]*/gm),oe=a(/^data-[\-\w.\u00B7-\uFFFF]+$/),We=a(/^aria-[\-\w]+$/),Ne=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ht=a(/^(?:\w+script|data):/i),jt=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ct=a(/^html$/i),q=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ye=Object.freeze({__proto__:null,ARIA_ATTR:We,ATTR_WHITESPACE:jt,CUSTOM_ELEMENT:q,DATA_ATTR:oe,DOCTYPE_NAME:Ct,ERB_EXPR:lt,IS_ALLOWED_URI:Ne,IS_SCRIPT_OR_DATA:ht,MUSTACHE_EXPR:Ue,TMPLIT_EXPR:de});const se={element:1,text:3,progressingInstruction:7,comment:8,document:9},L=function(){return typeof window>"u"?null:window},I=function(Me,Je){if(typeof Me!="object"||typeof Me.createPolicy!="function")return null;let De=null;const l="data-tt-policy-suffix";Je&&Je.hasAttribute(l)&&(De=Je.getAttribute(l));const f="dompurify"+(De?"#"+De:"");try{return Me.createPolicy(f,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},Q=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function he(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L();const Me=Ft=>he(Ft);if(Me.version="3.3.0",Me.removed=[],!me||!me.document||me.document.nodeType!==se.document||!me.Element)return Me.isSupported=!1,Me;let{document:Je}=me;const De=Je,l=De.currentScript,{DocumentFragment:f,HTMLTemplateElement:b,Node:_,Element:E,NodeFilter:A,NamedNodeMap:T=me.NamedNodeMap||me.MozNamedAttrMap,HTMLFormElement:N,DOMParser:$,trustedTypes:F}=me,G=E.prototype,Z=ge(G,"cloneNode"),Y=ge(G,"remove"),W=ge(G,"nextSibling"),X=ge(G,"childNodes"),U=ge(G,"parentNode");if(typeof b=="function"){const Ft=Je.createElement("template");Ft.content&&Ft.content.ownerDocument&&(Je=Ft.content.ownerDocument)}let K,V="";const{implementation:ne,createNodeIterator:z,createDocumentFragment:te,getElementsByTagName:ae}=Je,{importNode:ce}=De;let re=Q();Me.isSupported=typeof e=="function"&&typeof U=="function"&&ne&&ne.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:ke,TMPLIT_EXPR:Pe,DATA_ATTR:ze,ARIA_ATTR:_e,IS_SCRIPT_OR_DATA:$e,ATTR_WHITESPACE:Fe,CUSTOM_ELEMENT:Xe}=Ye;let{IS_ALLOWED_URI:Ze}=Ye,Qe=null;const ft=ee({},[...H,...ye,...Ae,...Be,...Le]);let dt=null;const Et=ee({},[...Ce,...Re,...it,...nt]);let xt=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,Ke=null;const mt=Object.seal(o(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Nt=!0,kt=!0,Bt=!1,At=!0,Dt=!1,Ut=!0,Rt=!1,Kt=!1,en=!1,bn=!1,En=!1,wt=!1,Tn=!0,Rn=!1;const wn="user-content-";let Er=!0,Or=!1,sr={},tr=null;const fr=ee({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ar=null;const Zr=ee({},["audio","video","img","source","image","track"]);let zn=null;const nr=ee({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gi="http://www.w3.org/1998/Math/MathML",_i="http://www.w3.org/2000/svg",Qr="http://www.w3.org/1999/xhtml";let yi=Qr,Pi=!1,pr=null;const mr=ee({},[gi,_i,Qr],C);let rr=ee({},["mi","mo","mn","ms","mtext"]),Jr=ee({},["annotation-xml"]);const Gr=ee({},["title","style","font","a","script"]);let yr=null;const Qt=["application/xhtml+xml","text/html"],$r="text/html";let vn=null,Vn=null;const jn=Je.createElement("form"),Gn=function(He){return He instanceof RegExp||He instanceof Function},qr=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Vn&&Vn===He)){if((!He||typeof He!="object")&&(He={}),He=ie(He),yr=Qt.indexOf(He.PARSER_MEDIA_TYPE)===-1?$r:He.PARSER_MEDIA_TYPE,vn=yr==="application/xhtml+xml"?C:w,Qe=M(He,"ALLOWED_TAGS")?ee({},He.ALLOWED_TAGS,vn):ft,dt=M(He,"ALLOWED_ATTR")?ee({},He.ALLOWED_ATTR,vn):Et,pr=M(He,"ALLOWED_NAMESPACES")?ee({},He.ALLOWED_NAMESPACES,C):mr,zn=M(He,"ADD_URI_SAFE_ATTR")?ee(ie(nr),He.ADD_URI_SAFE_ATTR,vn):nr,ar=M(He,"ADD_DATA_URI_TAGS")?ee(ie(Zr),He.ADD_DATA_URI_TAGS,vn):Zr,tr=M(He,"FORBID_CONTENTS")?ee({},He.FORBID_CONTENTS,vn):fr,Te=M(He,"FORBID_TAGS")?ee({},He.FORBID_TAGS,vn):ie({}),Ke=M(He,"FORBID_ATTR")?ee({},He.FORBID_ATTR,vn):ie({}),sr=M(He,"USE_PROFILES")?He.USE_PROFILES:!1,Nt=He.ALLOW_ARIA_ATTR!==!1,kt=He.ALLOW_DATA_ATTR!==!1,Bt=He.ALLOW_UNKNOWN_PROTOCOLS||!1,At=He.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Dt=He.SAFE_FOR_TEMPLATES||!1,Ut=He.SAFE_FOR_XML!==!1,Rt=He.WHOLE_DOCUMENT||!1,bn=He.RETURN_DOM||!1,En=He.RETURN_DOM_FRAGMENT||!1,wt=He.RETURN_TRUSTED_TYPE||!1,en=He.FORCE_BODY||!1,Tn=He.SANITIZE_DOM!==!1,Rn=He.SANITIZE_NAMED_PROPS||!1,Er=He.KEEP_CONTENT!==!1,Or=He.IN_PLACE||!1,Ze=He.ALLOWED_URI_REGEXP||Ne,yi=He.NAMESPACE||Qr,rr=He.MATHML_TEXT_INTEGRATION_POINTS||rr,Jr=He.HTML_INTEGRATION_POINTS||Jr,xt=He.CUSTOM_ELEMENT_HANDLING||{},He.CUSTOM_ELEMENT_HANDLING&&Gn(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xt.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&Gn(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xt.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(xt.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dt&&(kt=!1),En&&(bn=!0),sr&&(Qe=ee({},Le),dt=[],sr.html===!0&&(ee(Qe,H),ee(dt,Ce)),sr.svg===!0&&(ee(Qe,ye),ee(dt,Re),ee(dt,nt)),sr.svgFilters===!0&&(ee(Qe,Ae),ee(dt,Re),ee(dt,nt)),sr.mathMl===!0&&(ee(Qe,Be),ee(dt,it),ee(dt,nt))),He.ADD_TAGS&&(typeof He.ADD_TAGS=="function"?mt.tagCheck=He.ADD_TAGS:(Qe===ft&&(Qe=ie(Qe)),ee(Qe,He.ADD_TAGS,vn))),He.ADD_ATTR&&(typeof He.ADD_ATTR=="function"?mt.attributeCheck=He.ADD_ATTR:(dt===Et&&(dt=ie(dt)),ee(dt,He.ADD_ATTR,vn))),He.ADD_URI_SAFE_ATTR&&ee(zn,He.ADD_URI_SAFE_ATTR,vn),He.FORBID_CONTENTS&&(tr===fr&&(tr=ie(tr)),ee(tr,He.FORBID_CONTENTS,vn)),Er&&(Qe["#text"]=!0),Rt&&ee(Qe,["html","head","body"]),Qe.table&&(ee(Qe,["tbody"]),delete Te.tbody),He.TRUSTED_TYPES_POLICY){if(typeof He.TRUSTED_TYPES_POLICY.createHTML!="function")throw B('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof He.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw B('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');K=He.TRUSTED_TYPES_POLICY,V=K.createHTML("")}else K===void 0&&(K=I(F,l)),K!==null&&typeof V=="string"&&(V=K.createHTML(""));s&&s(He),Vn=He}},Xn=ee({},[...ye,...Ae,...we]),y=ee({},[...Be,...xe]),O=function(He){let vt=U(He);(!vt||!vt.tagName)&&(vt={namespaceURI:yi,tagName:"template"});const $t=w(He.tagName),fn=w(vt.tagName);return pr[He.namespaceURI]?He.namespaceURI===_i?vt.namespaceURI===Qr?$t==="svg":vt.namespaceURI===gi?$t==="svg"&&(fn==="annotation-xml"||rr[fn]):!!Xn[$t]:He.namespaceURI===gi?vt.namespaceURI===Qr?$t==="math":vt.namespaceURI===_i?$t==="math"&&Jr[fn]:!!y[$t]:He.namespaceURI===Qr?vt.namespaceURI===_i&&!Jr[fn]||vt.namespaceURI===gi&&!rr[fn]?!1:!y[$t]&&(Gr[$t]||!Xn[$t]):!!(yr==="application/xhtml+xml"&&pr[He.namespaceURI]):!1},J=function(He){g(Me.removed,{element:He});try{U(He).removeChild(He)}catch{Y(He)}},le=function(He,vt){try{g(Me.removed,{attribute:vt.getAttributeNode(He),from:vt})}catch{g(Me.removed,{attribute:null,from:vt})}if(vt.removeAttribute(He),He==="is")if(bn||En)try{J(vt)}catch{}else try{vt.setAttribute(He,"")}catch{}},Se=function(He){let vt=null,$t=null;if(en)He="<remove></remove>"+He;else{const gr=x(He,/^[\r\n\t ]+/);$t=gr&&gr[0]}yr==="application/xhtml+xml"&&yi===Qr&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");const fn=K?K.createHTML(He):He;if(yi===Qr)try{vt=new $().parseFromString(fn,yr)}catch{}if(!vt||!vt.documentElement){vt=ne.createDocument(yi,"template",null);try{vt.documentElement.innerHTML=Pi?V:fn}catch{}}const Kn=vt.body||vt.documentElement;return He&&$t&&Kn.insertBefore(Je.createTextNode($t),Kn.childNodes[0]||null),yi===Qr?ae.call(vt,Rt?"html":"body")[0]:Rt?vt.documentElement:Kn},et=function(He){return z.call(He.ownerDocument||He,He,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},rt=function(He){return He instanceof N&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof T)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function"||typeof He.hasChildNodes!="function")},bt=function(He){return typeof _=="function"&&He instanceof _};function _t(Ft,He,vt){d(Ft,$t=>{$t.call(Me,He,vt,Vn)})}const Zt=function(He){let vt=null;if(_t(re.beforeSanitizeElements,He,null),rt(He))return J(He),!0;const $t=vn(He.nodeName);if(_t(re.uponSanitizeElement,He,{tagName:$t,allowedTags:Qe}),Ut&&He.hasChildNodes()&&!bt(He.firstElementChild)&&S(/<[/\w!]/g,He.innerHTML)&&S(/<[/\w!]/g,He.textContent)||He.nodeType===se.progressingInstruction||Ut&&He.nodeType===se.comment&&S(/<[/\w]/g,He.data))return J(He),!0;if(!(mt.tagCheck instanceof Function&&mt.tagCheck($t))&&(!Qe[$t]||Te[$t])){if(!Te[$t]&&Nn($t)&&(xt.tagNameCheck instanceof RegExp&&S(xt.tagNameCheck,$t)||xt.tagNameCheck instanceof Function&&xt.tagNameCheck($t)))return!1;if(Er&&!tr[$t]){const fn=U(He)||He.parentNode,Kn=X(He)||He.childNodes;if(Kn&&fn){const gr=Kn.length;for(let ni=gr-1;ni>=0;--ni){const Vi=Z(Kn[ni],!0);Vi.__removalCount=(He.__removalCount||0)+1,fn.insertBefore(Vi,W(He))}}}return J(He),!0}return He instanceof E&&!O(He)||($t==="noscript"||$t==="noembed"||$t==="noframes")&&S(/<\/no(script|embed|frames)/i,He.innerHTML)?(J(He),!0):(Dt&&He.nodeType===se.text&&(vt=He.textContent,d([be,ke,Pe],fn=>{vt=k(vt,fn," ")}),He.textContent!==vt&&(g(Me.removed,{element:He.cloneNode()}),He.textContent=vt)),_t(re.afterSanitizeElements,He,null),!1)},rn=function(He,vt,$t){if(Tn&&(vt==="id"||vt==="name")&&($t in Je||$t in jn))return!1;if(!(kt&&!Ke[vt]&&S(ze,vt))){if(!(Nt&&S(_e,vt))){if(!(mt.attributeCheck instanceof Function&&mt.attributeCheck(vt,He))){if(!dt[vt]||Ke[vt]){if(!(Nn(He)&&(xt.tagNameCheck instanceof RegExp&&S(xt.tagNameCheck,He)||xt.tagNameCheck instanceof Function&&xt.tagNameCheck(He))&&(xt.attributeNameCheck instanceof RegExp&&S(xt.attributeNameCheck,vt)||xt.attributeNameCheck instanceof Function&&xt.attributeNameCheck(vt,He))||vt==="is"&&xt.allowCustomizedBuiltInElements&&(xt.tagNameCheck instanceof RegExp&&S(xt.tagNameCheck,$t)||xt.tagNameCheck instanceof Function&&xt.tagNameCheck($t))))return!1}else if(!zn[vt]){if(!S(Ze,k($t,Fe,""))){if(!((vt==="src"||vt==="xlink:href"||vt==="href")&&He!=="script"&&P($t,"data:")===0&&ar[He])){if(!(Bt&&!S($e,k($t,Fe,"")))){if($t)return!1}}}}}}}return!0},Nn=function(He){return He!=="annotation-xml"&&x(He,Xe)},or=function(He){_t(re.beforeSanitizeAttributes,He,null);const{attributes:vt}=He;if(!vt||rt(He))return;const $t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:dt,forceKeepAttr:void 0};let fn=vt.length;for(;fn--;){const Kn=vt[fn],{name:gr,namespaceURI:ni,value:Vi}=Kn,xs=vn(gr),ts=Vi;let lr=gr==="value"?ts:j(ts);if($t.attrName=xs,$t.attrValue=lr,$t.keepAttr=!0,$t.forceKeepAttr=void 0,_t(re.uponSanitizeAttribute,He,$t),lr=$t.attrValue,Rn&&(xs==="id"||xs==="name")&&(le(gr,He),lr=wn+lr),Ut&&S(/((--!?|])>)|<\/(style|title|textarea)/i,lr)){le(gr,He);continue}if(xs==="attributename"&&x(lr,"href")){le(gr,He);continue}if($t.forceKeepAttr)continue;if(!$t.keepAttr){le(gr,He);continue}if(!At&&S(/\/>/i,lr)){le(gr,He);continue}Dt&&d([be,ke,Pe],ns=>{lr=k(lr,ns," ")});const $s=vn(He.nodeName);if(!rn($s,xs,lr)){le(gr,He);continue}if(K&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!ni)switch(F.getAttributeType($s,xs)){case"TrustedHTML":{lr=K.createHTML(lr);break}case"TrustedScriptURL":{lr=K.createScriptURL(lr);break}}if(lr!==ts)try{ni?He.setAttributeNS(ni,gr,lr):He.setAttribute(gr,lr),rt(He)?J(He):m(Me.removed)}catch{le(gr,He)}}_t(re.afterSanitizeAttributes,He,null)},es=function Ft(He){let vt=null;const $t=et(He);for(_t(re.beforeSanitizeShadowDOM,He,null);vt=$t.nextNode();)_t(re.uponSanitizeShadowNode,vt,null),Zt(vt),or(vt),vt.content instanceof f&&Ft(vt.content);_t(re.afterSanitizeShadowDOM,He,null)};return Me.sanitize=function(Ft){let He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=null,$t=null,fn=null,Kn=null;if(Pi=!Ft,Pi&&(Ft="<!-->"),typeof Ft!="string"&&!bt(Ft))if(typeof Ft.toString=="function"){if(Ft=Ft.toString(),typeof Ft!="string")throw B("dirty is not a string, aborting")}else throw B("toString is not a function");if(!Me.isSupported)return Ft;if(Kt||qr(He),Me.removed=[],typeof Ft=="string"&&(Or=!1),Or){if(Ft.nodeName){const Vi=vn(Ft.nodeName);if(!Qe[Vi]||Te[Vi])throw B("root node is forbidden and cannot be sanitized in-place")}}else if(Ft instanceof _)vt=Se("<!---->"),$t=vt.ownerDocument.importNode(Ft,!0),$t.nodeType===se.element&&$t.nodeName==="BODY"||$t.nodeName==="HTML"?vt=$t:vt.appendChild($t);else{if(!bn&&!Dt&&!Rt&&Ft.indexOf("<")===-1)return K&&wt?K.createHTML(Ft):Ft;if(vt=Se(Ft),!vt)return bn?null:wt?V:""}vt&&en&&J(vt.firstChild);const gr=et(Or?Ft:vt);for(;fn=gr.nextNode();)Zt(fn),or(fn),fn.content instanceof f&&es(fn.content);if(Or)return Ft;if(bn){if(En)for(Kn=te.call(vt.ownerDocument);vt.firstChild;)Kn.appendChild(vt.firstChild);else Kn=vt;return(dt.shadowroot||dt.shadowrootmode)&&(Kn=ce.call(De,Kn,!0)),Kn}let ni=Rt?vt.outerHTML:vt.innerHTML;return Rt&&Qe["!doctype"]&&vt.ownerDocument&&vt.ownerDocument.doctype&&vt.ownerDocument.doctype.name&&S(Ct,vt.ownerDocument.doctype.name)&&(ni="<!DOCTYPE "+vt.ownerDocument.doctype.name+`>
`+ni),Dt&&d([be,ke,Pe],Vi=>{ni=k(ni,Vi," ")}),K&&wt?K.createHTML(ni):ni},Me.setConfig=function(){let Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qr(Ft),Kt=!0},Me.clearConfig=function(){Vn=null,Kt=!1},Me.isValidAttribute=function(Ft,He,vt){Vn||qr({});const $t=vn(Ft),fn=vn(He);return rn($t,fn,vt)},Me.addHook=function(Ft,He){typeof He=="function"&&g(re[Ft],He)},Me.removeHook=function(Ft,He){if(He!==void 0){const vt=p(re[Ft],He);return vt===-1?void 0:v(re[Ft],vt,1)[0]}return m(re[Ft])},Me.removeHooks=function(Ft){re[Ft]=[]},Me.removeAllHooks=function(){re=Q()},Me}var ve=he();return Cy=ve,Cy}var u9=self.DOMPurify||(self.DOMPurify=g2().default||g2());const h9=No(u9);function dw(e,t={}){if(!e||typeof e!="string")return console.warn("[SVG-SANITIZE] Invalid input:",typeof e),"";const n={USE_PROFILES:{svg:!0,svgFilters:!0},FORBID_TAGS:["script","foreignObject","iframe","embed"],FORBID_ATTR:["onload","onerror","onclick","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onmousedown","onmouseup","onfocus","onblur","onkeydown","onkeyup","onkeypress","onsubmit","onreset","onselect","onchange","oninput","onanimationstart","onanimationend","onanimationiteration","ontransitionend","ontransitionrun","ontransitionstart","ontransitioncancel","xlink:href",...t.additionalForbiddenAttrs||[]],ALLOW_DATA_ATTR:!0,ALLOW_COMMENTS:!1,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,HOOKS:{afterSanitizeAttributes:r=>{if(r.hasAttribute("href")){const i=r.getAttribute("href");i&&i.toLowerCase().trim().startsWith("javascript:")&&(r.removeAttribute("href"),console.warn("[SVG-SANITIZE] Removed javascript: href"))}if(r.hasAttribute("xlink:href")){const i=r.getAttribute("xlink:href");i&&(i.toLowerCase().trim().startsWith("javascript:")||i.toLowerCase().trim().startsWith("data:text/html"))&&(r.removeAttribute("xlink:href"),console.warn("[SVG-SANITIZE] Removed dangerous xlink:href"))}}},...t};try{const r=h9.sanitize(e,n);if(!r||!r.includes("<svg"))return console.error("[SVG-SANITIZE] Sanitization removed SVG content - input may be malicious"),"";const i=e.length,s=r.length,a=(i-s)/i*100;return a>10&&console.warn(`[SVG-SANITIZE] Removed ${a.toFixed(1)}% of content (${i-s} chars) - possible malicious SVG detected`),r}catch(r){return console.error("[SVG-SANITIZE] Sanitization failed:",r),""}}function d9(e){if(!e||typeof e!="string")return!1;const t=e.toLowerCase(),n=["<script","javascript:","onload=","onerror=","onclick=","onmouseover=","<foreignobject","<iframe","<embed","data:text/html"];for(const r of n)if(t.includes(r))return console.warn(`[SVG-VALIDATE] Dangerous pattern detected: ${r}`),!1;return t.includes("<svg")?!0:(console.warn("[SVG-VALIDATE] Content does not appear to be valid SVG (no <svg> tag found)"),!1)}function f9(e){return e.replace("#","").toLowerCase()}async function Xl(e,t,n=null){try{let r;if(n)r=n;else{const v=await fetch(e);if(!v.ok)throw new Error(`Failed to fetch SVG: ${v.status} ${v.statusText}`);r=await v.text()}const i=dw(r);if(!i)throw new Error("SVG sanitization failed - content rejected");const a=new DOMParser().parseFromString(i,"image/svg+xml"),o=a.querySelector("parsererror");if(o)throw new Error(`SVG parse error: ${o.textContent}`);const c=a.documentElement;if(c.tagName!=="svg")throw new Error("Invalid SVG: root element is not <svg>");const h=p9(c,t),p=new XMLSerializer().serializeToString(a),m=new Blob([p],{type:"image/svg+xml"});return{dataUrl:URL.createObjectURL(m),svgText:p,stats:h}}catch(r){throw console.error("[SVG-RECOLOR] Error:",r),r}}function p9(e,t){const n={totalElements:0,fillsReplaced:0,strokesReplaced:0,stopColorsReplaced:0,stylesProcessed:0,colorsNotMapped:new Set},r=e.querySelectorAll("*");n.totalElements=r.length;for(const a of r){const o=a.getAttribute("fill");if(o&&o!=="none"){const p=Ja(o,t,n.colorsNotMapped);p!==o&&(p==="transparent"||p==="none"?(a.setAttribute("fill","none"),a.setAttribute("fill-opacity","0")):a.setAttribute("fill",p),n.fillsReplaced++)}const c=a.getAttribute("stroke");if(c&&c!=="none"){const p=Ja(c,t,n.colorsNotMapped);p!==c&&(p==="transparent"||p==="none"?(a.setAttribute("stroke","none"),a.setAttribute("stroke-opacity","0")):a.setAttribute("stroke",p),n.strokesReplaced++)}const h=a.getAttribute("stop-color");if(h&&h!=="none"){const p=Ja(h,t,n.colorsNotMapped);p!==h&&(a.setAttribute("stop-color",p),n.stopColorsReplaced++)}const d=a.getAttribute("style");if(d){const p=v2(d,t,n);p!==d&&(a.setAttribute("style",p),n.stylesProcessed++)}}const i=e.querySelectorAll("style");for(const a of i){const o=a.textContent,c=g9(o,t,n);c!==o&&(a.textContent=c,n.stylesProcessed++)}const s=e.querySelectorAll("stop");for(const a of s){const o=a.getAttribute("stop-color");if(o&&o!=="none"){const h=Ja(o,t,n.colorsNotMapped);h!==o&&(a.setAttribute("stop-color",h),n.stopColorsReplaced++)}const c=a.getAttribute("style");if(c&&c.includes("stop-color")){const h=v2(c,t,n);h!==c&&(a.setAttribute("style",h),n.stylesProcessed++)}}return n}function Ja(e,t,n){const r=y9(e);if(!r)return e;const i=`#${r}`,s=t.get(i);if(s)return s.blendHex;const a=y2(r);if(!a)return e;const o=b2(a);let c=null,h=1/0;for(const[d,p]of t.entries()){const m=y2(d.replace("#",""));if(!m)continue;const g=b2(m),v=m9(o,g);if(v<h&&(h=v,c=p),v<=9)return p.blendHex}return c?(n&&n.add(e),c.blendHex):(console.warn(`[SVG-RECOLOR] No mapping found: ${i}`),e)}function y2(e){if(e.length!==6)return null;const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return isNaN(t)||isNaN(n)||isNaN(r)?null:{r:t,g:n,b:r}}function b2(e){let t=e.r/255,n=e.g/255,r=e.b/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;const i=(t*.4124+n*.3576+r*.1805)*100,s=(t*.2126+n*.7152+r*.0722)*100,a=(t*.0193+n*.1192+r*.9505)*100,o=95.047,c=100,h=108.883;let d=i/o,p=s/c,m=a/h;return d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,{L:116*p-16,a:500*(d-p),b:200*(p-m)}}function m9(e,t){const s=Math.PI*2,a=Math.PI,o=(e.L+t.L)/2,c=Math.sqrt(e.a*e.a+e.b*e.b),h=Math.sqrt(t.a*t.a+t.b*t.b),d=(c+h)/2,p=.5*(1-Math.sqrt(Math.pow(d,7)/(Math.pow(d,7)+Math.pow(25,7)))),m=e.a*(1+p),g=t.a*(1+p),v=Math.sqrt(m*m+e.b*e.b),w=Math.sqrt(g*g+t.b*t.b),C=(v+w)/2;let x=Math.atan2(e.b,m);x<0&&(x+=s);let k=Math.atan2(t.b,g);k<0&&(k+=s);const P=Math.abs(x-k)>a?(x+k+s)/2:(x+k)/2,j=1-.17*Math.cos(P-Math.PI/6)+.24*Math.cos(2*P)+.32*Math.cos(3*P+Math.PI/30)-.2*Math.cos(4*P-63*Math.PI/180);let M=k-x;Math.abs(M)>a&&(M=M>0?M-s:M+s);const S=t.L-e.L,B=w-v,D=2*Math.sqrt(v*w)*Math.sin(M/2),R=1+.015*Math.pow(o-50,2)/Math.sqrt(20+Math.pow(o-50,2)),ee=1+.045*C,ue=1+.015*C*j,ie=30*Math.PI/180*Math.exp(-Math.pow((P-275*Math.PI/180)/(25*Math.PI/180),2)),H=-(2*Math.sqrt(Math.pow(C,7)/(Math.pow(C,7)+Math.pow(25,7))))*Math.sin(2*ie);return Math.sqrt(Math.pow(S/(1*R),2)+Math.pow(B/(1*ee),2)+Math.pow(D/(1*ue),2)+H*(B/(1*ee))*(D/(1*ue)))}function v2(e,t,n){let r=e;return r=r.replace(/fill:\s*([^;]+)/gi,(i,s)=>`fill: ${Ja(s.trim(),t,n.colorsNotMapped)}`),r=r.replace(/stroke:\s*([^;]+)/gi,(i,s)=>`stroke: ${Ja(s.trim(),t,n.colorsNotMapped)}`),r=r.replace(/stop-color:\s*([^;]+)/gi,(i,s)=>`stop-color: ${Ja(s.trim(),t,n.colorsNotMapped)}`),r}function g9(e,t,n){let r=e;return r=r.replace(/fill:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`fill: ${Ja(a,t,n.colorsNotMapped)}`}),r=r.replace(/stroke:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`stroke: ${Ja(a,t,n.colorsNotMapped)}`}),r=r.replace(/stop-color:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`stop-color: ${Ja(a,t,n.colorsNotMapped)}`}),r}function y9(e){const t=e.trim().toLowerCase();if(t.match(/^#?[0-9a-f]{6}$/))return f9(t);const n=t.match(/^#?([0-9a-f]{3})$/);if(n)return n[1].split("").map(a=>a+a).join("");const r=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(r){const s=parseInt(r[1],10),a=parseInt(r[2],10),o=parseInt(r[3],10);return b9(s,a,o)}const i={white:"ffffff",black:"000000",red:"ff0000",green:"008000",blue:"0000ff",yellow:"ffff00",cyan:"00ffff",magenta:"ff00ff",gray:"808080",grey:"808080",orange:"ffa500",purple:"800080"};return i[t]?i[t]:null}function b9(e,t,n){const r=i=>Math.max(0,Math.min(255,i)).toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`}function el(e){const n=new DOMParser().parseFromString(e,"image/svg+xml"),r=n.querySelector("parsererror");if(r)return console.error("[SVG-REGION-TAGGER] Parse error:",r.textContent),e;const i=n.documentElement;if(!i.hasAttribute("viewBox")){const o=i.getAttribute("width"),c=i.getAttribute("height");if(o&&c){const h=parseFloat(o),d=parseFloat(c);!isNaN(h)&&!isNaN(d)&&(i.setAttribute("viewBox",`0 0 ${h} ${d}`),console.log(`[SVG-REGION-TAGGER] Added viewBox from dimensions: 0 0 ${h} ${d}`))}else{const h=v9(n);h&&(i.setAttribute("viewBox",`${h.x} ${h.y} ${h.width} ${h.height}`),console.log(`[SVG-REGION-TAGGER] Added viewBox from content bounds: ${h.x} ${h.y} ${h.width} ${h.height}`))}}let s=0;return n.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line").forEach(o=>{o.hasAttribute("data-region-id")||o.setAttribute("data-region-id",`region-${s++}`)}),console.log(`[SVG-REGION-TAGGER] Tagged ${s} regions`),new XMLSerializer().serializeToString(n)}function v9(e){try{const t=e.documentElement.cloneNode(!0),n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",document.body.appendChild(n),n.appendChild(t);const r=t.getBBox();if(document.body.removeChild(n),r.width>0&&r.height>0)return{x:Math.floor(r.x),y:Math.floor(r.y),width:Math.ceil(r.width),height:Math.ceil(r.height)}}catch(t){console.warn("[SVG-REGION-TAGGER] Could not calculate content bounds:",t)}return null}function wu(e,t){if(!t||t.size===0)return e;const r=new DOMParser().parseFromString(e,"image/svg+xml"),i=r.querySelector("parsererror");if(i)return console.error("[SVG-REGION-OVERRIDES] Parse error:",i.textContent),e;let s=0;return t.forEach((a,o)=>{const c=typeof a=="string"?a:a.hex,h=r.querySelector(`[data-region-id="${o}"]`);if(h){const d=c==="transparent"||c==="none";if((h.hasAttribute("fill")||d)&&(d?(h.setAttribute("fill","none"),h.setAttribute("fill-opacity","0")):(h.setAttribute("fill",c),h.removeAttribute("fill-opacity")),s++),h.hasAttribute("stroke")&&h.getAttribute("stroke")!=="none"){const m=h.getAttribute("stroke");m&&m!=="#000"&&m!=="#000000"&&m!=="#fff"&&m!=="#ffffff"&&(d?(h.setAttribute("stroke","none"),h.setAttribute("stroke-opacity","0")):h.setAttribute("stroke",c))}const p=h.getAttribute("style");if(p&&p.includes("fill:"))if(d){const m=p.replace(/fill:\s*[^;]+/,"fill: none");h.setAttribute("style",m)}else{const m=p.replace(/fill:\s*[^;]+/,`fill: ${c}`);h.setAttribute("style",m)}}else console.warn(`[SVG-REGION-OVERRIDES] Region not found: ${o}`)}),console.log(`[SVG-REGION-OVERRIDES] Applied ${s} region overrides`),new XMLSerializer().serializeToString(r)}async function lN(e){var x,k;const t=await wf(e),n=(t==null?void 0:t.design)||t;if(!n)throw new Error("Design not found");if(n.input_mode==="sports_surface")throw new Error("Cannot use a sports surface design as a motif");const r=n.original_svg_url;if(!r||r.startsWith("blob:"))throw new Error("Design does not have a valid original SVG. Please ensure the design was saved after generation.");if(!n.solid_color_mapping&&!n.color_mapping)throw new Error("Design does not have color mappings. Please ensure the design was saved after color mapping.");console.log("[MOTIF] Fetching original SVG from:",r);const i=((x=n.design_data)==null?void 0:x.region_overrides)||n.region_overrides||null,s=((k=n.design_data)==null?void 0:k.original_tagged_svg)||n.original_tagged_svg||null;console.log("[MOTIF] Region overrides:",i?Object.keys(i).length:0,"regions"),console.log("[MOTIF] Original tagged SVG:",s?"present":"not present");const a=i?new Map(Object.entries(i)):null,o=await x9(r);if(!o)throw new Error("Failed to load or sanitize the original SVG.");console.log("[MOTIF] Original SVG loaded, regenerating recolored versions...");let c=null,h=null;if(n.solid_color_mapping&&Object.keys(n.solid_color_mapping).length>0)try{const P=x2(n.solid_color_mapping);console.log("[MOTIF] Solid mapping has",P.size,"colors");const{svgText:j}=await Xl(null,P,o);if(c=j,console.log("[MOTIF] Generated solid SVG:",c.length,"chars"),a&&a.size>0&&c){console.log("[MOTIF] Applying",a.size,"region overrides to solid SVG");let M=c;M=el(c),c=wu(M,a),console.log("[MOTIF] Applied region overrides to solid SVG")}}catch(P){console.error("[MOTIF] Failed to generate solid SVG:",P)}if(n.color_mapping&&Object.keys(n.color_mapping).length>0)try{const P=x2(n.color_mapping);console.log("[MOTIF] Blend mapping has",P.size,"colors");const{svgText:j}=await Xl(null,P,o);if(h=j,console.log("[MOTIF] Generated blend SVG:",h.length,"chars"),a&&a.size>0&&h){console.log("[MOTIF] Applying",a.size,"region overrides to blend SVG");let M=el(h);h=wu(M,a),console.log("[MOTIF] Applied region overrides to blend SVG")}}catch(P){console.error("[MOTIF] Failed to generate blend SVG:",P)}if(!c&&!h)throw new Error("Failed to regenerate TPV-recolored SVG versions.");const d=n.dimensions||{};let p=d.widthMM||d.width_mm||5e3,m=d.lengthMM||d.length_mm||5e3;const g=p===5e3&&m===5e3,v=c||h;if(v){const P=fw(v);if(P&&P.width&&P.height){const j=P.width/P.height;(g||Math.abs(j-1)>.01)&&(j>1?(p=5e3,m=Math.round(5e3/j)):j<1&&(m=5e3,p=Math.round(5e3*j)),console.log("[MOTIF] Corrected dimensions from SVG viewBox:",p,"x",m,"mm (aspect ratio:",j.toFixed(3),")"))}}const w=n.thumbnail_url||n.original_png_url||null,C=c&&h;return{sourceDesignId:e,sourceDesignName:n.name||"Unnamed Design",sourceThumbnailUrl:w,solidSvgContent:c,blendSvgContent:h,svgContent:c||h,hasBothVersions:C,originalWidth_mm:p,originalHeight_mm:m}}function x2(e){const t=new Map;if(!e||typeof e!="object")return t;for(const[n,r]of Object.entries(e)){const i=n.startsWith("#")?n:`#${n}`;t.set(i,r)}return t}async function x9(e){try{console.log("[MOTIF] Fetching SVG from:",e);const t=await fetch(e);if(!t.ok)return console.error("[MOTIF] Failed to fetch SVG:",t.status,t.statusText),null;const n=await t.text();if(console.log("[MOTIF] Fetched content length:",n.length,"chars"),console.log("[MOTIF] Content starts with:",n.substring(0,100)),!d9(n))return console.error("[MOTIF] SVG failed quick validation"),null;const r=dw(n);return r?(console.log("[MOTIF] Sanitized SVG length:",r.length,"chars"),r):(console.error("[MOTIF] SVG sanitization failed"),null)}catch(t){return console.error("[MOTIF] Error fetching SVG:",t),null}}async function cN(e={}){const t=await Qm(e);return{designs:(t.designs||[]).filter(r=>r.input_mode==="sports_surface"?!1:r.thumbnail_url||r.original_svg_url||r.original_png_url),pagination:t.pagination}}function fw(e){if(!e)return null;const t=e.match(/viewBox=["']([^"']+)["']/i);if(t){const i=t[1].split(/\s+/).map(Number);if(i.length>=4)return{width:i[2],height:i[3]}}const n=e.match(/\bwidth=["']?(\d+(?:\.\d+)?)/i),r=e.match(/\bheight=["']?(\d+(?:\.\d+)?)/i);return n&&r?{width:parseFloat(n[1]),height:parseFloat(r[1])}:null}const w9=Object.freeze(Object.defineProperty({__proto__:null,extractSVGDimensions:fw,fetchMotifFromDesign:lN,listPlaygroundDesigns:cN},Symbol.toStringTag,{value:"Module"}));function uN({onOpenGenerator:e,mobileMode:t=!1,modalMode:n=!1,activeTab:r,onItemAdded:i}){const[s,a]=pe.useState(null),[o,c]=pe.useState("courts"),h=t?r:o,d=t?()=>{}:c,[p,m]=pe.useState([]),[g,v]=pe.useState(!1),[w,C]=pe.useState(null),[x,k]=pe.useState(null),{addCourt:P,addTrack:j,addMotif:M,addShape:S,courts:B,tracks:D,motifs:R,shapes:ee}=nn(),ue=Object.keys(B).length,ie=Object.keys(D).length,ge=Object.keys(R).length,H=bF(),ye=l9();pe.useEffect(()=>{h==="designs"&&p.length===0&&!g&&Ae()},[h]);const Ae=async()=>{v(!0),C(null);try{const Ue=await cN({limit:50});m(Ue.designs||[])}catch(Ue){console.error("[MOTIFS] Failed to load designs:",Ue),C(Ue.message||"Failed to load designs")}finally{v(!1)}},we=t||n,Be=Ue=>{const lt=vF(Ue);lt&&(P(Ue,lt),we&&i&&i())},xe=Ue=>{const lt=c9(Ue);lt&&(j(Ue,lt),we&&i&&i())},Le=async Ue=>{if(!x){k(Ue);try{const lt=await lN(Ue);M(lt.sourceDesignId,lt.sourceDesignName,lt.svgContent,lt.originalWidth_mm,lt.originalHeight_mm,lt.sourceThumbnailUrl,{solidSvgContent:lt.solidSvgContent,blendSvgContent:lt.blendSvgContent,hasBothVersions:lt.hasBothVersions}),we&&i&&i()}catch(lt){console.error("[MOTIFS] Failed to add motif:",lt),alert(`Failed to add motif: ${lt.message}`)}finally{k(null)}}},Ce=[{id:"rectangle",name:"Rectangle",icon:""},{id:"square",name:"Square",icon:""},{id:"circle",name:"Circle",icon:""},{id:"triangle",name:"Triangle",icon:""},{id:"pentagon",name:"Pentagon",icon:""},{id:"hexagon",name:"Hexagon",icon:""},{id:"blob",name:"Blob",icon:""}],Re=Object.keys(ee||{}).length,nt=(()=>{switch(h){case"courts":return{title:"Courts",count:ue,hint:"Select a court to add"};case"tracks":return{title:"Tracks",count:ie,hint:"Select a track to add"};case"shapes":return{title:"Shapes",count:Re,hint:"Tap a shape to add it"};case"designs":return{title:"Designs",count:ge,hint:"Add your saved designs as motifs"};default:return{title:"Library",count:0,hint:""}}})();return u.jsxs("div",{className:`court-library ${t?"court-library--mobile":""}`,children:[!t&&u.jsxs("div",{className:"court-library__header",children:[u.jsxs("div",{className:"court-library__header-row",children:[u.jsx("h2",{children:nt.title}),u.jsxs("span",{className:"court-library__count",children:[nt.count," on canvas"]})]}),u.jsx("p",{children:nt.hint})]}),!t&&u.jsxs("div",{className:"court-library__tabs",children:[u.jsx("button",{className:`court-library__tab ${h==="courts"?"court-library__tab--active":""}`,onClick:()=>{d("courts"),a(null)},children:"Courts"}),u.jsx("button",{className:`court-library__tab ${h==="tracks"?"court-library__tab--active":""}`,onClick:()=>{d("tracks"),a(null)},children:"Tracks"}),u.jsx("button",{className:`court-library__tab ${h==="designs"?"court-library__tab--active":""}`,onClick:()=>{d("designs"),a(null)},children:"Designs"})]}),u.jsxs("div",{className:`court-library__list ${t?"court-library__list--mobile":""}`,children:[h==="courts"&&H.map(Ue=>u.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""}`,onClick:()=>we?Be(Ue.id):a(Ue.id),onDoubleClick:()=>!we&&Be(Ue.id),children:[u.jsx("div",{className:"court-library__preview",children:u.jsx(_9,{template:Ue})}),u.jsxs("div",{className:"court-library__info",children:[u.jsx("div",{className:"court-library__name",children:Ue.name}),u.jsxs("div",{className:"court-library__dimensions",children:[(Ue.dimensions.width_mm/1e3).toFixed(1),"m  ",(Ue.dimensions.length_mm/1e3).toFixed(1),"m"]}),u.jsx("div",{className:"court-library__standard",children:Ue.standard})]}),s===Ue.id&&u.jsx("button",{className:"court-library__add-btn",onClick:lt=>{lt.stopPropagation(),Be(Ue.id)},children:"+ ADD"})]},Ue.id)),h==="tracks"&&ye.map(Ue=>u.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""}`,onClick:()=>we?xe(Ue.id):a(Ue.id),onDoubleClick:()=>!we&&xe(Ue.id),children:[u.jsx("div",{className:"court-library__preview",children:u.jsx(S9,{template:Ue})}),u.jsxs("div",{className:"court-library__info",children:[u.jsx("div",{className:"court-library__name",children:Ue.name}),u.jsxs("div",{className:"court-library__standard",children:[Ue.parameters.numLanes," Lanes  ",Ue.standard]}),u.jsx("div",{className:"court-library__note",children:"Scales to fit canvas"})]}),s===Ue.id&&u.jsx("button",{className:"court-library__add-btn",onClick:lt=>{lt.stopPropagation(),xe(Ue.id)},children:"+ ADD"})]},Ue.id)),h==="shapes"&&u.jsx("div",{className:`court-library__shapes-grid ${t?"court-library__shapes-grid--mobile":""}`,children:Ce.map(Ue=>u.jsxs("button",{className:"court-library__shape-btn",onClick:()=>{S(Ue.id),t&&i&&i()},children:[u.jsx("span",{className:"court-library__shape-icon",children:Ue.icon}),u.jsx("span",{className:"court-library__shape-name",children:Ue.name})]},Ue.id))}),h==="designs"&&u.jsxs(u.Fragment,{children:[g&&u.jsxs("div",{className:"court-library__loading",children:[u.jsx("div",{className:"court-library__spinner"}),u.jsx("p",{children:"Loading your designs..."})]}),w&&u.jsxs("div",{className:"court-library__error",children:[u.jsx("p",{children:w}),u.jsx("button",{onClick:Ae,children:"Try Again"})]}),!g&&!w&&p.length===0&&u.jsxs("div",{className:"court-library__empty",children:[u.jsx("p",{children:"No designs found."}),u.jsx("p",{className:"court-library__empty-hint",children:"Generate new designs or save them to use as motifs."})]}),!g&&p.map(Ue=>{var lt,de;return u.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""} ${x===Ue.id?"court-library__item--loading":""}`,onClick:()=>we?Le(Ue.id):a(Ue.id),onDoubleClick:()=>!we&&Le(Ue.id),children:[u.jsx("div",{className:"court-library__preview",children:u.jsx(C9,{design:Ue})}),u.jsxs("div",{className:"court-library__info",children:[u.jsx("div",{className:"court-library__name",children:Ue.name||"Unnamed Design"}),u.jsxs("div",{className:"court-library__dimensions",children:[((((lt=Ue.design_data)==null?void 0:lt.widthMM)||5e3)/1e3).toFixed(1),"m  ",((((de=Ue.design_data)==null?void 0:de.lengthMM)||5e3)/1e3).toFixed(1),"m"]}),u.jsx("div",{className:"court-library__note",children:"Playground Design"})]}),s===Ue.id&&u.jsx("button",{className:"court-library__add-btn",onClick:oe=>{oe.stopPropagation(),Le(Ue.id)},disabled:x===Ue.id,children:x===Ue.id?"Adding...":"+ ADD"})]},Ue.id)})]})]}),!t&&u.jsx("div",{className:"court-library__generate",children:u.jsxs("button",{className:"court-library__generate-btn",onClick:e,children:[u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M12 5v14M5 12h14"})}),"Generate New Design"]})}),!t&&!n&&u.jsx("div",{className:"court-library__footer",children:u.jsxs("p",{className:"court-library__hint",children:[h==="courts"&&"Double-click a court to add it instantly",h==="tracks"&&"Double-click a track to add it instantly",h==="designs"&&"Double-click a design to add it as a motif"]})})]})}function _9({template:e}){const t=e.dimensions.width_mm,n=e.dimensions.length_mm,r=Math.min(62/t,62/n),i=t*r,s=n*r;return u.jsxs("svg",{width:"62",height:"62",viewBox:"0 0 62 62",className:"court-library__svg-preview",children:[u.jsx("rect",{x:(62-i)/2,y:(62-s)/2,width:i,height:s,fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"1.5"}),e.markings.map((a,o)=>u.jsx(k9,{marking:a,scale:r,offsetX:(62-i)/2,offsetY:(62-s)/2},o))]})}function k9({marking:e,scale:t,offsetX:n,offsetY:r}){const{type:i,params:s}=e;switch(i){case"line":return u.jsx("line",{x1:s.x1*t+n,y1:s.y1*t+r,x2:s.x2*t+n,y2:s.y2*t+r,stroke:"#1e293b",strokeWidth:"1.5"});case"rectangle":return u.jsx("rect",{x:s.x*t+n,y:s.y*t+r,width:s.width*t,height:s.height*t,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"});case"circle":return u.jsx("circle",{cx:s.cx*t+n,cy:s.cy*t+r,r:s.radius*t,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"});case"arc":{const{cx:a,cy:o,radius:c,startAngle:h,endAngle:d}=s,p=h*Math.PI/180,m=d*Math.PI/180,g=(a+c*Math.cos(p))*t+n,v=(o+c*Math.sin(p))*t+r,w=(a+c*Math.cos(m))*t+n,C=(o+c*Math.sin(m))*t+r,x=d-h>180?1:0,k=`M ${g} ${v} A ${c*t} ${c*t} 0 ${x} 1 ${w} ${C}`;return u.jsx("path",{d:k,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"})}default:return null}}function S9({template:e}){const{parameters:t}=e,n=t.width_mm,r=t.height_mm,i=Math.min(58/n,58/r),s=n*i,a=r*i,o=t.numLanes,c=t.laneWidth_mm*i,h=t.cornerRadius,p=(h.topLeft+h.topRight+h.bottomLeft+h.bottomRight)/4*i,m=(62-s)/2,g=(62-a)/2;return u.jsxs("svg",{width:"62",height:"62",viewBox:"0 0 62 62",className:"court-library__svg-preview",children:[u.jsx("rect",{x:m,y:g,width:s,height:a,rx:p,fill:"#e5e7eb"}),Array.from({length:o}).map((v,w)=>{const C=w*c,x=Math.max(0,p-C);return u.jsx("rect",{x:m+C,y:g+C,width:Math.max(0,s-C*2),height:Math.max(0,a-C*2),rx:x,stroke:"#1e293b",strokeWidth:"1",fill:"none"},w)})]})}function C9({design:e}){const t=e.thumbnail_url||e.original_png_url;return t?u.jsx("img",{src:t,alt:e.name||"Design preview",className:"court-library__motif-img",style:{width:"62px",height:"62px",objectFit:"contain",borderRadius:"4px",backgroundColor:"#f3f4f6"},onError:n=>{n.target.style.display="none",n.target.nextSibling&&(n.target.nextSibling.style.display="flex")}}):u.jsx("div",{className:"court-library__motif-placeholder",style:{width:"62px",height:"62px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e5e7eb",borderRadius:"4px",color:"#9ca3af",fontSize:"10px",textAlign:"center"},children:"No Preview"})}function E9({isOpen:e,onClose:t,onOpenGenerator:n}){return pe.useEffect(()=>{if(!e)return;const r=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]),pe.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?u.jsx("div",{className:"court-library-modal__overlay",onClick:t,children:u.jsxs("div",{className:"court-library-modal__container",onClick:r=>r.stopPropagation(),children:[u.jsxs("div",{className:"court-library-modal__header",children:[u.jsx("h2",{children:"Element Library"}),u.jsx("p",{children:"Select courts, tracks, or designs to add to your canvas"}),u.jsx("button",{className:"court-library-modal__close",onClick:t,"aria-label":"Close",children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"court-library-modal__content",children:u.jsx(uN,{modalMode:!0,onItemAdded:t,onOpenGenerator:()=>{t(),n()}})})]})}):null}function w2({onEditSourceDesign:e}){var L,I;const{courts:t,tracks:n,motifs:r,shapes:i,texts:s,exclusionZones:a,groups:o,selectedCourtId:c,selectedTrackId:h,selectedMotifId:d,selectedShapeId:p,selectedTextId:m,selectedExclusionZoneId:g,selectedGroupId:v,editingGroupId:w,updateCourtPosition:C,updateCourtRotation:x,updateCourtScale:k,setLineColor:P,setZoneColor:j,setCourtSurfaceColor:M,resetCourtColors:S,removeCourt:B,removeTrack:D,removeMotif:R,updateMotifPosition:ee,updateMotifRotation:ue,updateMotifScale:ie,updateTrackParameters:ge,enterGroup:H,exitGroup:ye,ungroup:Ae,deleteGroupWithChildren:we,addToHistory:Be}=nn(),[xe,Le]=pe.useState("transform"),[Ce,Re]=pe.useState(null);if(v){const Q=o[v];return Q?u.jsx(O9,{group:Q,groupId:v,shapes:i,isEditing:w===v,onEnterGroup:()=>H(v),onExitGroup:()=>ye(),onUngroup:()=>Ae(v),onDelete:()=>we(v)}):null}if(g){const Q=a[g];return Q?u.jsx(N9,{zone:Q,zoneId:g}):null}if(m){const Q=s[m];return Q?u.jsx(P9,{text:Q,textId:m}):null}if(p){const Q=i[p];return Q?u.jsx(A9,{shape:Q,shapeId:p}):null}if(d){const Q=r[d];return Q?u.jsx(j9,{motif:Q,motifId:d,onEditSourceDesign:e}):null}if(h){const Q=n[h];return Q?u.jsx(T9,{track:Q,trackId:h}):null}if(!c)return u.jsx("div",{className:"properties-panel properties-panel--empty",children:u.jsxs("div",{className:"properties-panel__empty-state",children:[u.jsx("p",{children:"No element selected"}),u.jsx("span",{className:"properties-panel__hint",children:"Click on a court, track, or motif to view and edit its properties"})]})});const it=t[c];if(!it)return null;const{position:nt,rotation:Ue,scale:lt,template:de,lineColorOverrides:oe,zoneColorOverrides:We}=it,Ne=(Q,he)=>{const ve=parseFloat(he);isNaN(ve)||C(c,{...nt,[Q]:ve})},ht=Q=>{const he=parseFloat(Q);isNaN(he)||x(c,he)},jt=Q=>{const he=parseFloat(Q);isNaN(he)||he<=0||k(c,he)},Ct=()=>{window.confirm(`Delete ${de.name}? This action cannot be undone.`)&&B(c)},q=Q=>{if(!Ce)return;if(Ce.type==="courtSurface"&&Q===null){M(c,null),Re(null);return}if(!Q)return;const he={tpv_code:Q.code,hex:Q.hex,name:Q.name};Ce.type==="line"?P(c,Ce.id,he):Ce.type==="zone"?j(c,Ce.id,he):Ce.type==="courtSurface"?M(c,he):Ce.type==="allLines"&&de.markings.forEach(ve=>{P(c,ve.id,he)}),Re(null)},Ye=Q=>{const he=oe[Q.id];if(he)return{code:he.tpv_code,hex:he.hex,name:he.name};const ve=fi.find(me=>me.code===de.defaultLineColor);return ve?{code:ve.code,hex:ve.hex,name:ve.name}:null},se=Q=>{const he=We[Q.id];if(he)return{code:he.tpv_code,hex:he.hex,name:he.name};const ve=fi.find(me=>me.code===Q.defaultColor);return ve?{code:ve.code,hex:ve.hex,name:ve.name}:null};return u.jsxs("div",{className:"properties-panel",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsx("h3",{children:"Properties"}),u.jsxs("div",{className:"properties-panel__court-info",children:[u.jsx("span",{className:"court-name",children:de.name}),u.jsx("span",{className:"court-standard",children:de.standard})]})]}),u.jsxs("div",{className:"properties-panel__tabs",children:[u.jsx("button",{className:`tab ${xe==="transform"?"tab--active":""}`,onClick:()=>Le("transform"),children:"Transform"}),u.jsx("button",{className:`tab ${xe==="lines"?"tab--active":""}`,onClick:()=>Le("lines"),children:"Lines"}),u.jsx("button",{className:`tab ${xe==="zones"?"tab--active":""}`,onClick:()=>Le("zones"),children:"Zones"})]}),u.jsxs("div",{className:"properties-panel__content",children:[xe==="transform"&&u.jsxs("div",{className:"properties-section",children:[u.jsx("div",{className:"properties-section__header",children:u.jsx("h4",{children:"Transform"})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Position"}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"X"}),u.jsx("input",{type:"number",value:Math.round(nt.x),onChange:Q=>Ne("x",Q.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"Y"}),u.jsx("input",{type:"number",value:Math.round(nt.y),onChange:Q=>Ne("y",Q.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Rotation"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"360",value:Ue,onChange:Q=>ht(Q.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(Ue),onChange:Q=>ht(Q.target.value),min:"0",max:"360"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Scale"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:lt,onChange:Q=>jt(Q.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:lt.toFixed(2),onChange:Q=>jt(Q.target.value),min:"0.5",max:"2.0",step:"0.1"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Dimensions"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[(de.dimensions.width_mm*lt/1e3).toFixed(1),"m  ",(de.dimensions.length_mm*lt/1e3).toFixed(1),"m"]})})]}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-delete",onClick:Ct,title:"Delete court (Delete key)",children:" Delete Court"})})]}),xe==="lines"&&u.jsxs("div",{className:"properties-section",children:[u.jsxs("div",{className:"properties-section__header",children:[u.jsx("h4",{children:"Line Markings"}),u.jsx("button",{className:"btn-reset",onClick:()=>S(c),title:"Reset all colours to defaults",children:"Reset"})]}),u.jsxs("div",{className:"color-item color-item--all-lines",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:"Change All Lines"}),u.jsx("span",{className:"color-item__hint",children:"Set all lines to same colour"})]}),u.jsx("button",{className:"color-item__swatch color-item__swatch--all",onClick:()=>Re({type:"allLines"}),title:"Change all line colours at once",children:u.jsx("span",{style:{fontSize:"1rem"},children:""})})]}),u.jsx("div",{className:"color-list",children:de.markings.map(Q=>{const he=Ye(Q);return u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:Q.name}),he&&u.jsx("span",{className:"color-item__code",children:he.code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(he==null?void 0:he.hex)||"#000"},onClick:()=>Re({type:"line",id:Q.id}),title:(he==null?void 0:he.name)||"Select colour"})]},Q.id)})})]}),xe==="zones"&&u.jsxs("div",{className:"properties-section",children:[u.jsx("div",{className:"properties-section__header",children:u.jsx("h4",{children:"Fill Colours"})}),u.jsxs("div",{className:"color-item color-item--surface-fill",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:"Court Surface"}),u.jsx("span",{className:"color-item__hint",children:it.courtSurfaceColor?it.courtSurfaceColor.name:"No Fill (transparent)"}),it.courtSurfaceColor&&u.jsx("span",{className:"color-item__code",children:it.courtSurfaceColor.tpv_code})]}),u.jsx("button",{className:`color-item__swatch ${it.courtSurfaceColor?"":"color-item__swatch--no-fill"}`,style:{backgroundColor:((L=it.courtSurfaceColor)==null?void 0:L.hex)||"transparent"},onClick:()=>Re({type:"courtSurface"}),title:((I=it.courtSurfaceColor)==null?void 0:I.name)||"No Fill - Click to select colour"})]}),de.zones&&de.zones.length>0&&u.jsx("div",{className:"properties-section__divider",children:u.jsx("span",{children:"Paint Zones"})}),de.zones&&de.zones.length>0&&u.jsx("div",{className:"color-list",children:de.zones.map(Q=>{var ve;const he=se(Q);return u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:Q.name}),u.jsxs("span",{className:"color-item__area",children:[((ve=Q.area_m2)==null?void 0:ve.toFixed(1))||0," m"]}),he&&u.jsx("span",{className:"color-item__code",children:he.code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(he==null?void 0:he.hex)||"#000"},onClick:()=>Re({type:"zone",id:Q.id}),title:(he==null?void 0:he.name)||"Select colour"})]},Q.id)})})]})]}),Ce&&u.jsx("div",{className:"color-picker-modal",onClick:()=>Re(null),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:Q=>Q.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:Ce.type==="allLines"?"Change All Line Colours":Ce.type==="courtSurface"?"Select Court Fill Colour":"Select TPV Colour"}),u.jsx("button",{onClick:()=>Re(null),children:""})]}),u.jsxs("div",{className:"color-picker-grid",children:[Ce.type==="courtSurface"&&u.jsx("button",{className:"color-picker-swatch color-picker-swatch--no-fill",onClick:()=>q(null),title:"No Fill (transparent)",children:u.jsx("span",{className:"color-picker-swatch__code",children:"None"})}),fi.map(Q=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:Q.hex},onClick:()=>q(Q),title:`${Q.code} - ${Q.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:Q.code})},Q.code))]})]})})]})}function T9({track:e,trackId:t}){var _,E,A;const{updateTrackParameters:n,updateTrackRotation:r,removeTrack:i,setTrackSurfaceColor:s,setTrackLineColor:a,setLaneSurfaceColor:o,resetLaneSurfaceColors:c,addToHistory:h}=nn(),{parameters:d,template:p,trackSurfaceColor:m,trackLineColor:g,laneSurfaceColors:v,rotation:w}=e,[C,x]=je.useState(!0),[k,P]=je.useState(!1),[j,M]=je.useState(!1),[S,B]=je.useState(null),[D,R]=je.useState(""),[ee,ue]=je.useState(""),[ie,ge]=je.useState(""),[H,ye]=je.useState(!1),[Ae,we]=je.useState(!1),[Be,xe]=je.useState(!1),Le=p.trackType==="straight",Ce=tN(d),Re=((_=Ce.lanes[0])==null?void 0:_.perimeter)||0,it=Ce.lanes[Ce.lanes.length-1],nt=(it==null?void 0:it.perimeter)||0,Ue=Le?[]:nN(Ce),lt=T=>{const N=parseInt(T);if(!(isNaN(N)||N<1||N>8))if(Le){const $=N*d.laneWidth_mm;n(t,{numLanes:N,width_mm:$})}else n(t,{numLanes:N})},de=T=>{const N=parseFloat(T)*1e3;return isNaN(N)||N<3e3?!1:(n(t,{width_mm:N}),!0)},oe=T=>{const N=parseFloat(T)*1e3;return isNaN(N)||N<3e3?!1:(n(t,{height_mm:N}),!0)},We=()=>{ye(!0),R((d.width_mm/1e3).toFixed(1))},Ne=()=>{ye(!1),de(D)},ht=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(ye(!1),R((d.width_mm/1e3).toFixed(1)))},jt=()=>{we(!0),ue((d.height_mm/1e3).toFixed(1))},Ct=()=>{we(!1),oe(ee)},q=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(we(!1),ue((d.height_mm/1e3).toFixed(1)))},Ye=T=>{let N=parseFloat(T);return isNaN(N)?!1:(N=(N%360+360)%360,r(t,N),h(),!0)},se=()=>{xe(!0),ge(w.toFixed(0))},L=()=>{xe(!1),Ye(ie)},I=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(xe(!1),ge(w.toFixed(0)))},Q=(T,N)=>{const $=parseFloat(N)*1e3;if(isNaN($)||$<0)return;const F=Math.min(d.width_mm,d.height_mm)/2,G=Math.min($,F);C?n(t,{cornerRadius:{topLeft:G,topRight:G,bottomLeft:G,bottomRight:G}}):n(t,{cornerRadius:{...d.cornerRadius,[T]:G}})},he=()=>{window.confirm(`Delete ${p.name}? This action cannot be undone.`)&&i(t)},ve=T=>{s(t,{tpv_code:T.code,hex:T.hex,name:T.name}),P(!1)},me=T=>{a(t,{tpv_code:T.code,hex:T.hex,name:T.name}),M(!1)},Me=T=>{n(t,{startingBoxes:{...d.startingBoxes,enabled:T}})},Je=T=>{const N=parseFloat(T)*1e3;isNaN(N)||N<100||n(t,{startingBoxes:{...d.startingBoxes,depth_mm:N}})},De=T=>{n(t,{startingBoxes:{...d.startingBoxes,style:T}})},l=T=>{n(t,{startingBoxes:{...d.startingBoxes,direction:T}})},f=T=>{const N=parseFloat(T);isNaN(N)||N<0||N>100||n(t,{startingBoxes:{...d.startingBoxes,startPosition:N}})},b=(d.cornerRadius.topLeft+d.cornerRadius.topRight+d.cornerRadius.bottomLeft+d.cornerRadius.bottomRight)/4;return u.jsxs("div",{className:"properties-panel",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsx("h3",{children:"Track Properties"}),u.jsxs("div",{className:"properties-panel__court-info",children:[u.jsx("span",{className:"court-name",children:p.name}),u.jsx("span",{className:"court-standard",children:p.standard})]})]}),u.jsx("div",{className:"properties-panel__content",children:u.jsxs("div",{className:"properties-section",children:[u.jsx("div",{className:"properties-section__header",children:u.jsx("h4",{children:"Track Parameters"})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Number of Lanes"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"1",max:"8",value:d.numLanes,onChange:T=>lt(T.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:d.numLanes,onChange:T=>lt(T.target.value),min:"1",max:"8"}),u.jsx("span",{className:"property-unit",children:"lanes"})]})]})]}),Le?u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Track Width"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[(d.width_mm/1e3).toFixed(1),"m (Auto-calculated from lanes)"]})})]}):u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Track Width"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:H?D:(d.width_mm/1e3).toFixed(1),onChange:T=>R(T.target.value),onFocus:We,onBlur:Ne,onKeyDown:ht,min:"3",max:"100",step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:Le?"Track Length":"Track Height"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:Ae?ee:(d.height_mm/1e3).toFixed(1),onChange:T=>ue(T.target.value),onFocus:jt,onBlur:Ct,onKeyDown:q,min:"3",max:"100",step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Rotation"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:Be?ie:w.toFixed(0),onChange:T=>ge(T.target.value),onFocus:se,onBlur:L,onKeyDown:I,min:"0",max:"360",step:"15"}),u.jsx("span",{className:"property-unit",children:""})]})]}),!Le&&u.jsxs("div",{className:"property-group",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsx("label",{children:"Corner Radius"}),u.jsx("button",{className:"btn-toggle",onClick:()=>x(!C),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:C?"#0066CC":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:C?"Click to edit corners independently":"Click to lock all corners together",children:C?" Locked":" Independent"})]}),C?u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:(b/1e3).toFixed(2),onChange:T=>Q("topLeft",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]}):u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Top Left"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:(d.cornerRadius.topLeft/1e3).toFixed(2),onChange:T=>Q("topLeft",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Top Right"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:(d.cornerRadius.topRight/1e3).toFixed(2),onChange:T=>Q("topRight",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Bottom Left"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:(d.cornerRadius.bottomLeft/1e3).toFixed(2),onChange:T=>Q("bottomLeft",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Bottom Right"}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("input",{type:"number",value:(d.cornerRadius.bottomRight/1e3).toFixed(2),onChange:T=>Q("bottomRight",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),u.jsx("span",{className:"property-unit",children:"m"})]})]})]})]}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Lane Width"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[(d.laneWidth_mm/1e3).toFixed(2),"m (Fixed)"]})})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Track Surface Colour"}),u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:(m==null?void 0:m.name)||"Select Colour"}),m&&u.jsx("span",{className:"color-item__code",children:m.tpv_code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(m==null?void 0:m.hex)||"#A5362F"},onClick:()=>P(!0),title:(m==null?void 0:m.name)||"Select colour"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsx("label",{style:{margin:0},children:"Lane Colours"}),(v==null?void 0:v.some(T=>T!=null))&&u.jsx("button",{onClick:()=>c(t),title:"Reset all lanes to track surface colour",style:{padding:"0.25rem 0.5rem",fontSize:"0.7rem",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",color:"#64748b"},children:"Reset All"})]}),u.jsx("div",{className:"lane-color-grid",children:Ce.lanes.map(T=>{const N=(v==null?void 0:v[T.laneNumber-1])||m,$=(v==null?void 0:v[T.laneNumber-1])!=null;return u.jsxs("div",{className:"lane-color-item",children:[u.jsxs("span",{className:"lane-number",children:["Lane ",T.laneNumber]}),u.jsx("button",{className:`color-item__swatch lane-swatch ${$?"lane-swatch--override":""}`,style:{backgroundColor:(N==null?void 0:N.hex)||"#A5362F"},onClick:()=>B({laneNumber:T.laneNumber}),title:`${(N==null?void 0:N.name)||"Standard Red"}${$?" (custom)":" (default)"}`}),$&&u.jsx("button",{className:"lane-reset-btn",onClick:()=>o(t,T.laneNumber,null),title:"Reset to track default",children:""})]},T.laneNumber)})}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#94a3b8",marginTop:"0.5rem"},children:"Click a swatch to change lane colour"})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Line Colour"}),u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:(g==null?void 0:g.name)||"Cream"}),g&&u.jsx("span",{className:"color-item__code",children:g.tpv_code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(g==null?void 0:g.hex)||"#E8E3D8"},onClick:()=>M(!0),title:(g==null?void 0:g.name)||"Select colour"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("input",{type:"checkbox",checked:((E=d.startingBoxes)==null?void 0:E.enabled)||!1,onChange:T=>Me(T.target.checked)}),"Show Starting Boxes"]}),((A=d.startingBoxes)==null?void 0:A.enabled)&&u.jsxs("div",{style:{marginTop:"0.75rem"},children:[u.jsxs("div",{className:"property-input-group",style:{marginBottom:"0.75rem"},children:[u.jsx("span",{className:"property-label",style:{fontSize:"0.875rem"},children:"Depth"}),u.jsx("input",{type:"number",value:(d.startingBoxes.depth_mm/1e3).toFixed(2),onChange:T=>Je(T.target.value),min:"0.1",max:"1.0",step:"0.05"}),u.jsx("span",{className:"property-unit",children:"m"})]}),!Le&&u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:"Start Style"}),u.jsxs("select",{value:d.startingBoxes.style||"staggered",onChange:T=>De(T.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",background:"white"},children:[u.jsx("option",{value:"straight",children:"Straight Start"}),u.jsx("option",{value:"staggered",children:"Staggered Start"}),u.jsx("option",{value:"both",children:"Both (opposite ends)"})]})]}),u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:"Direction of Travel"}),u.jsxs("select",{value:d.startingBoxes.direction||"counterclockwise",onChange:T=>l(T.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",background:"white"},children:[u.jsx("option",{value:"counterclockwise",children:"Counterclockwise (Standard)"}),u.jsx("option",{value:"clockwise",children:"Clockwise"})]})]}),!Le&&u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:["Start Position (",d.startingBoxes.startPosition||0,"%)"]}),u.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:d.startingBoxes.startPosition||0,onChange:T=>f(T.target.value),className:"property-slider",style:{width:"100%"}}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#94a3b8",marginTop:"0.25rem"},children:"Slide to adjust where the start line appears around the track"})]}),u.jsx("div",{className:"property-info",style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"Boxes use track surface colour with white starting line and lane numbers"}),!Le&&Ue.length>0&&(d.startingBoxes.style==="staggered"||d.startingBoxes.style==="both")&&u.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"#f8fafc",borderRadius:"4px"},children:[u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.25rem"},children:"Auto-Calculated Staggers:"}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",lineHeight:"1.4"},children:Ue.map((T,N)=>u.jsxs("div",{children:["Lane ",N+1,": ",(T/1e3).toFixed(2),"m"]},N))}),u.jsx("div",{style:{fontSize:"0.65rem",color:"#64748b",marginTop:"0.25rem",fontStyle:"italic"},children:"Outer lanes start ahead to equalize distance"})]})]})]}),u.jsx("div",{className:"property-divider"}),u.jsx("div",{className:"properties-section__header",children:u.jsx("h4",{children:"Calculated Dimensions"})}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Usable Infield"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[(Ce.usableWidth/1e3).toFixed(1),"m  ",(Ce.usableHeight/1e3).toFixed(1),"m"]})})]}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Lane 1 Perimeter"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[Re.toFixed(2),"m"]})})]}),d.numLanes>1&&!Le&&u.jsxs("div",{className:"property-group property-group--info",children:[u.jsxs("label",{children:["Lane ",d.numLanes," Perimeter"]}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[nt.toFixed(2),"m"]})})]}),u.jsx("div",{className:"property-group",children:u.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Use drag handles on the canvas or edit values here. Corner radius auto-adjusts when locked."})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-delete",onClick:he,title:"Delete track (Delete key)",children:" Delete Track"})})]})}),k&&u.jsx("div",{className:"color-picker-modal",onClick:()=>P(!1),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:"Select Track Surface Colour"}),u.jsx("button",{onClick:()=>P(!1),children:""})]}),u.jsx("div",{className:"color-picker-grid",children:fi.map(T=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>ve(T),title:`${T.code} - ${T.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))})]})}),j&&u.jsx("div",{className:"color-picker-modal",onClick:()=>M(!1),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:"Select Line Colour"}),u.jsx("button",{onClick:()=>M(!1),children:""})]}),u.jsx("div",{className:"color-picker-grid",children:fi.map(T=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>me(T),title:`${T.code} - ${T.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))})]})}),S&&u.jsx("div",{className:"color-picker-modal",onClick:()=>B(null),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsxs("h4",{children:["Lane ",S.laneNumber," Surface Colour"]}),u.jsx("button",{onClick:()=>B(null),children:""})]}),u.jsxs("div",{className:"color-picker-grid",children:[u.jsx("button",{className:"color-picker-swatch color-picker-swatch--default",onClick:()=>{o(t,S.laneNumber,null),B(null)},title:"Use track default colour",style:{backgroundColor:(m==null?void 0:m.hex)||"#A5362F"},children:u.jsx("span",{className:"color-picker-swatch__code",children:"Default"})}),fi.map(T=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>{o(t,S.laneNumber,{tpv_code:T.code,hex:T.hex,name:T.name}),B(null)},title:`${T.code} - ${T.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))]})]})})]})}function j9({motif:e,motifId:t,onEditSourceDesign:n}){const{updateMotifPosition:r,updateMotifRotation:i,updateMotifScale:s,removeMotif:a,duplicateMotif:o,refreshMotif:c,setMotifViewMode:h}=nn(),{position:d,rotation:p,scale:m,sourceDesignName:g,sourceDesignId:v,originalWidth_mm:w,originalHeight_mm:C,sourceThumbnailUrl:x,viewMode:k,hasBothVersions:P}=e,[j,M]=je.useState(!1),[S,B]=je.useState(null),D=(we,Be)=>{const xe=parseFloat(Be);isNaN(xe)||r(t,{...d,[we]:xe})},R=we=>{const Be=parseFloat(we);isNaN(Be)||i(t,Be)},ee=we=>{const Be=parseFloat(we);isNaN(Be)||Be<=0||s(t,Be)},ue=()=>{window.confirm("Delete this motif? This action cannot be undone.")&&a(t)},ie=()=>{o(t)},ge=()=>{if(n)n(v);else{if(!v){alert("Source design ID not found");return}window.open(`/studio/?design=${v}`,"_blank")}},H=async()=>{if(!j){M(!0),B(null);try{const we=await c(t);we.success||B(we.error||"Failed to refresh")}catch(we){B(we.message||"Failed to refresh")}finally{M(!1)}}},ye=w*(m||1)/1e3,Ae=C*(m||1)/1e3;return u.jsxs("div",{className:"properties-panel",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsx("h3",{children:"Motif Properties"}),u.jsxs("div",{className:"properties-panel__court-info",children:[u.jsx("span",{className:"court-name",children:g||"Unnamed Motif"}),u.jsx("span",{className:"court-standard",children:"Playground Design"})]})]}),u.jsx("div",{className:"properties-panel__content",children:u.jsxs("div",{className:"properties-section",children:[x&&u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Preview"}),u.jsx("div",{style:{width:"100%",height:"80px",background:"#f3f4f6",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:u.jsx("img",{src:x,alt:g,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]}),Yl.BLEND_MODE_ENABLED,u.jsx("div",{className:"properties-section__header",children:u.jsx("h4",{children:"Transform"})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Position"}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"X"}),u.jsx("input",{type:"number",value:Math.round(d.x),onChange:we=>D("x",we.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"Y"}),u.jsx("input",{type:"number",value:Math.round(d.y),onChange:we=>D("y",we.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Rotation"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"360",value:p||0,onChange:we=>R(we.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(p||0),onChange:we=>R(we.target.value),min:"0",max:"360"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("label",{children:["Scale",u.jsx("span",{style:{fontSize:"0.7rem",color:"#64748b",marginLeft:"0.5rem"},children:"(aspect locked)"})]}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:Math.min(m||1,10),onChange:we=>ee(we.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:(m||1).toFixed(2),onChange:we=>ee(we.target.value),min:"0.1",step:"0.1"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Current Size"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[ye.toFixed(2),"m  ",Ae.toFixed(2),"m"]})})]}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Original Size"}),u.jsx("div",{className:"property-info",children:u.jsxs("span",{children:[(w/1e3).toFixed(2),"m  ",(C/1e3).toFixed(2),"m"]})})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Source Design"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-primary",onClick:ge,title:"Edit the source playground design in a new tab",style:{width:"100%",padding:"0.5rem",background:"var(--color-primary, #1e4a7a)",color:"white",border:"none",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" Edit Source Design"})}),u.jsxs("div",{className:"property-group property-group--actions",children:[u.jsx("button",{className:"btn-secondary",onClick:H,disabled:j,title:"Refresh this motif with the latest version from the source design",style:{width:"100%",padding:"0.5rem",background:j?"#e5e7eb":"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:j?"not-allowed":"pointer",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:j?" Refreshing...":" Refresh from Source"}),S&&u.jsx("div",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem"},children:S}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:"Click after editing the source design to update this motif"})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Actions"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-secondary",onClick:ie,title:"Duplicate motif (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Motif"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-delete",onClick:ue,title:"Delete motif (Delete key)",children:" Delete Motif"})}),u.jsx("div",{className:"property-group",children:u.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:' Tip: Drag the motif on the canvas to reposition. Edit the source design and click "Refresh" to update.'})})]})})]})}function A9({shape:e,shapeId:t}){var W;const{updateShapePosition:n,updateShapeDimensions:r,updateShapeSides:i,updateShapeCornerRadius:s,setShapeStarMode:a,setShapeInnerRadius:o,updateShapeRotation:c,setShapeFillColor:h,setShapeStroke:d,setShapeAspectLock:p,removeShape:m,duplicateShape:g,randomizeBlob:v,setBlobStyle:w,setEditPointsVisible:C,setPathClosed:x,setPathSmooth:k}=nn(),[P,j]=je.useState(!1),[M,S]=je.useState(!1),[B,D]=je.useState(""),[R,ee]=je.useState(""),[ue,ie]=je.useState(!1),[ge,H]=je.useState(!1),{shapeType:ye,sides:Ae,width_mm:we,height_mm:Be,cornerRadius:xe,starMode:Le,innerRadius:Ce,position:Re,rotation:it,fillColor:nt,strokeEnabled:Ue,strokeColor:lt,strokeWidth_mm:de,aspectLocked:oe,blobStyle:We,editPointsVisible:Ne,closed:ht,smooth:jt,controlPoints:Ct}=e,q=ye==="blob",Ye=ye==="path",se=(X,U)=>{const K=parseFloat(U);isNaN(K)||n(t,{...Re,[X]:K})},L=X=>{const U=parseFloat(X);if(isNaN(U)||U<100)return!1;if(oe){const K=Be/we;r(t,U,U*K)}else r(t,U,Be);return!0},I=X=>{const U=parseFloat(X);if(isNaN(U)||U<100)return!1;if(oe){const K=we/Be;r(t,U*K,U)}else r(t,we,U);return!0},Q=()=>{ie(!0),D(we.toFixed(0))},he=()=>{ie(!1),L(B)},ve=X=>{X.key==="Enter"?X.target.blur():X.key==="Escape"&&(ie(!1),D(we.toFixed(0)))},me=()=>{H(!0),ee(Be.toFixed(0))},Me=()=>{H(!1),I(R)},Je=X=>{X.key==="Enter"?X.target.blur():X.key==="Escape"&&(H(!1),ee(Be.toFixed(0)))},De=X=>{const U=parseInt(X);isNaN(U)||U<3||i(t,U)},l=X=>{const U=parseFloat(X);isNaN(U)||U<0||U>100||s(t,U)},f=X=>{const U=parseFloat(X);isNaN(U)||c(t,U)},b=X=>{h(t,{tpv_code:X.code,hex:X.hex,name:X.name}),j(!1)},_=X=>{d(t,!0,{tpv_code:X.code,hex:X.hex,name:X.name},de),S(!1)},E=X=>{X&&!lt?d(t,!0,{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},de):d(t,X,lt,de)},A=X=>{const U=parseFloat(X);isNaN(U)||U<10||d(t,Ue,lt,U)},T=()=>{p(t,!oe)},N=()=>{window.confirm("Delete this shape? This action cannot be undone.")&&m(t)},$=()=>{g(t)},F=[{sides:3,name:"Triangle",icon:""},{sides:4,name:"Rectangle",icon:""},{sides:5,name:"Pentagon",icon:""},{sides:6,name:"Hexagon",icon:""},{sides:8,name:"Octagon",icon:""},{sides:32,name:"Circle",icon:""},{sides:5,name:"Star",icon:"",starMode:!0}],G=X=>{X.starMode?(a(t,!0),Ae!==X.sides&&De(X.sides)):(Le&&a(t,!1),De(X.sides))},Z=X=>{const U=parseFloat(X)/100;o(t,U)},Y=X=>X.starMode?Le&&Ae===X.sides:!Le&&Ae===X.sides;return u.jsxs("div",{className:"properties-panel",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsx("h3",{children:q?"Blob Shape":Ye?"Pen Path":"Shape Properties"}),u.jsxs("div",{className:"properties-panel__court-info",children:[u.jsx("span",{className:"court-name",children:q?((W=Jm[We||"organic"])==null?void 0:W.name)||"Organic":Ye?ht?"Closed Path":"Open Path":YF(Ae,Le)}),u.jsx("span",{className:"court-standard",children:q?" Blob":Ye?` ${(Ct==null?void 0:Ct.length)||0} points`:`${XF(Ae,Le)} ${Ae} ${Le?"points":"sides"}`})]})]}),u.jsx("div",{className:"properties-panel__content",children:u.jsxs("div",{className:"properties-section",children:[q?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Style"}),u.jsx("select",{value:We||"organic",onChange:X=>w(t,X.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",cursor:"pointer",background:"#fff"},children:Object.entries(Jm).map(([X,U])=>u.jsxs("option",{value:X,children:[U.name," - ",U.description]},X))})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("button",{onClick:()=>v(t),style:{width:"100%",padding:"0.75rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1.1rem"},children:""})," New Shape"]}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem",textAlign:"center"},children:"Generate a new random shape in the selected style"})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Ne?"#eff6ff":"#fff"},children:[u.jsx("input",{type:"checkbox",checked:Ne||!1,onChange:X=>C(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("span",{style:{fontSize:"0.875rem"},children:"Edit Points"})]}),Ne&&u.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:"Drag points and handles on canvas for precise control"})]})]}):Ye?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"property-group",children:[u.jsx("label",{style:{marginBottom:"0.5rem",display:"block"},children:"Path Options"}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:ht?"#eff6ff":"#fff",marginBottom:"0.5rem"},children:[u.jsx("input",{type:"checkbox",checked:ht||!1,onChange:X=>x(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("span",{style:{fontSize:"0.875rem"},children:"Closed Path"})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:jt?"#eff6ff":"#fff"},children:[u.jsx("input",{type:"checkbox",checked:jt||!1,onChange:X=>k(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("span",{style:{fontSize:"0.875rem"},children:"Smooth Curves"})]}),jt&&u.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:"Uses bezier curves for smooth transitions"})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Ne?"#eff6ff":"#fff"},children:[u.jsx("input",{type:"checkbox",checked:Ne||!1,onChange:X=>C(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("span",{style:{fontSize:"0.875rem"},children:"Edit Points"})]}),Ne&&u.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:["Drag points to reshape. ",jt?"Drag handles for curve control.":"Enable smooth curves for bezier handles."]})]}),u.jsx("div",{className:"property-group",style:{background:"#f8fafc",padding:"0.75rem",borderRadius:"6px"},children:u.jsxs("div",{style:{fontSize:"0.8125rem",color:"#475569"},children:[u.jsx("strong",{children:(Ct==null?void 0:Ct.length)||0})," control points"]})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Shape Type"}),u.jsx("div",{className:"shape-presets",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"0.5rem"},children:F.map(X=>{const U=Y(X);return u.jsxs("button",{onClick:()=>G(X),title:X.name,style:{padding:"0.5rem",border:U?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:U?"#eff6ff":"#fff",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem"},children:[u.jsx("span",{children:X.icon}),u.jsx("span",{style:{fontSize:"0.65rem",color:"#64748b"},children:X.name})]},`${X.name}-${X.sides}`)})})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:Le?"Number of Points":"Number of Sides"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"3",max:Le?12:32,value:Ae,onChange:X=>De(X.target.value),className:"property-slider"}),u.jsx("div",{className:"property-input-group property-input-group--compact",children:u.jsx("input",{type:"number",value:Ae,onChange:X=>De(X.target.value),min:"3",max:Le?12:32})})]})]}),Le&&u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Star Depth"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"10",max:"90",value:Math.round((Ce||.5)*100),onChange:X=>Z(X.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round((Ce||.5)*100),onChange:X=>Z(X.target.value),min:"10",max:"90"}),u.jsx("span",{className:"property-unit",children:"%"})]})]}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:"Lower values = deeper points, higher = shallower"})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Corner Smoothing"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"100",value:xe,onChange:X=>l(X.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:xe,onChange:X=>l(X.target.value),min:"0",max:"100"}),u.jsx("span",{className:"property-unit",children:"%"})]})]})]})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Dimensions"})}),u.jsxs("div",{className:"property-group",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsx("label",{style:{margin:0},children:"Size"}),u.jsx("button",{onClick:T,style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:oe?"#3b82f6":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:oe?"Aspect ratio locked":"Aspect ratio unlocked",children:oe?" Locked":" Free"})]}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"W"}),u.jsx("input",{type:"number",value:ue?B:we.toFixed(0),onChange:X=>D(X.target.value),onFocus:Q,onBlur:he,onKeyDown:ve,step:"100",min:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"H"}),u.jsx("input",{type:"number",value:ge?R:Be.toFixed(0),onChange:X=>ee(X.target.value),onFocus:me,onBlur:Me,onKeyDown:Je,step:"100",min:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]}),u.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:[(we/1e3).toFixed(2),"m  ",(Be/1e3).toFixed(2),"m"]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Position"}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"X"}),u.jsx("input",{type:"number",value:Math.round(Re.x),onChange:X=>se("x",X.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"Y"}),u.jsx("input",{type:"number",value:Math.round(Re.y),onChange:X=>se("y",X.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Rotation"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"360",value:it||0,onChange:X=>f(X.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(it||0),onChange:X=>f(X.target.value),min:"0",max:"360"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Appearance"})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Fill Colour"}),u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:(nt==null?void 0:nt.name)||"Select Colour"}),nt&&u.jsx("span",{className:"color-item__code",children:nt.tpv_code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(nt==null?void 0:nt.hex)||"#609B63"},onClick:()=>j(!0),title:(nt==null?void 0:nt.name)||"Select colour"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("input",{type:"checkbox",checked:Ue||!1,onChange:X=>E(X.target.checked)}),"Border"]}),Ue&&u.jsxs("div",{style:{marginTop:"0.5rem"},children:[u.jsxs("div",{className:"color-item",style:{marginBottom:"0.5rem"},children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:(lt==null?void 0:lt.name)||"Select Colour"}),lt&&u.jsx("span",{className:"color-item__code",children:lt.tpv_code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(lt==null?void 0:lt.hex)||"#FFFFFF"},onClick:()=>S(!0),title:(lt==null?void 0:lt.name)||"Select colour"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",style:{fontSize:"0.8rem"},children:"Width"}),u.jsx("input",{type:"number",value:de,onChange:X=>A(X.target.value),step:"10",min:"10"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Actions"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-secondary",onClick:$,title:"Duplicate shape (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Shape"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-delete",onClick:N,title:"Delete shape (Delete key)",children:" Delete Shape"})}),u.jsx("div",{className:"property-group",children:u.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Drag corners to resize, drag the rotation handle above the shape to rotate. Hold Shift to snap rotation to 15 increments."})})]})}),P&&u.jsx("div",{className:"color-picker-modal",onClick:()=>j(!1),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:X=>X.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:"Select Fill Colour"}),u.jsx("button",{onClick:()=>j(!1),children:""})]}),u.jsx("div",{className:"color-picker-grid",children:fi.map(X=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:X.hex},onClick:()=>b(X),title:`${X.code} - ${X.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:X.code})},X.code))})]})}),M&&u.jsx("div",{className:"color-picker-modal",onClick:()=>S(!1),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:X=>X.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:"Select Border Colour"}),u.jsx("button",{onClick:()=>S(!1),children:""})]}),u.jsx("div",{className:"color-picker-grid",children:fi.map(X=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:X.hex},onClick:()=>_(X),title:`${X.code} - ${X.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:X.code})},X.code))})]})})]})}function P9({text:e,textId:t}){const{updateTextContent:n,updateTextPosition:r,updateTextScale:i,updateTextFont:s,updateTextAlign:a,updateTextRotation:o,setTextFillColor:c,setTextStrokeColor:h,updateTextStrokeWidth:d,removeText:p,duplicateText:m}=nn(),[g,v]=je.useState(!1),[w,C]=je.useState(!1),{content:x,fontFamily:k,fontSize_mm:P,scale_x:j=1,scale_y:M=1,fontWeight:S,fontStyle:B,textAlign:D,position:R,rotation:ee,fillColor:ue,strokeColor:ie,strokeWidth_mm:ge}=e,H=P||500,ye=bo(x||"Text",k,H,S,B),Ae=Math.round(ye.width*j),we=Math.round(H*1.2*M),Be=JF(),xe=q=>{n(t,q)},Le=(q,Ye)=>{const se=parseFloat(Ye);isNaN(se)||r(t,{...R,[q]:se})},Ce=q=>{const Ye=parseFloat(q);if(isNaN(Ye)||Ye<10)return;const se=Ye/ye.width;i(t,se,se)},Re=q=>{const Ye=parseFloat(q);if(isNaN(Ye)||Ye<10)return;const se=H*1.2,L=Ye/se;i(t,L,L)},it=q=>{s(t,q,S,B)},nt=()=>{s(t,k,S==="bold"?"normal":"bold",B)},Ue=()=>{s(t,k,S,B==="italic"?"normal":"italic")},lt=q=>{a(t,q)},de=q=>{const Ye=parseFloat(q);isNaN(Ye)||o(t,Ye)},oe=q=>{c(t,{tpv_code:q.code,hex:q.hex,name:q.name}),v(!1)},We=q=>{h(t,{tpv_code:q.code,hex:q.hex,name:q.name}),(!ge||ge===0)&&d(t,Math.round(H*M*.05)),C(!1)},Ne=q=>{const Ye=parseFloat(q);isNaN(Ye)||Ye<0||d(t,Ye)},ht=()=>{h(t,null),d(t,0)},jt=()=>{window.confirm("Delete this text? This action cannot be undone.")&&p(t)},Ct=()=>{m(t)};return u.jsxs("div",{className:"properties-panel",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsx("h3",{children:"Text Properties"}),u.jsxs("div",{className:"properties-panel__court-info",children:[u.jsx("span",{className:"court-name",style:{fontFamily:k},children:x||"Text Label"}),u.jsx("span",{className:"court-standard",children:"T Text Element"})]})]}),u.jsx("div",{className:"properties-panel__content",children:u.jsxs("div",{className:"properties-section",children:[u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Text Content"}),u.jsx("input",{type:"text",value:x,onChange:q=>xe(q.target.value),placeholder:"Enter text...",style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontFamily:k,fontSize:"1rem"}})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Typography"})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Font Family"}),u.jsx("select",{value:k,onChange:q=>it(q.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontFamily:"inherit",fontSize:"0.875rem"},children:Be.map(q=>u.jsx("option",{value:q.family,style:{fontFamily:q.family},children:q.name},q.name))})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Size"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u.jsxs("div",{className:"property-input-group property-input-group--compact",style:{flex:1},children:[u.jsx("span",{className:"property-unit",style:{marginRight:"0.25rem"},children:"W"}),u.jsx("input",{type:"number",value:Ae,onChange:q=>Ce(q.target.value),min:"10",step:"10",style:{width:"70px"}}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group property-input-group--compact",style:{flex:1},children:[u.jsx("span",{className:"property-unit",style:{marginRight:"0.25rem"},children:"H"}),u.jsx("input",{type:"number",value:we,onChange:q=>Re(q.target.value),min:"10",step:"10",style:{width:"70px"}}),u.jsx("span",{className:"property-unit",children:"mm"})]})]}),u.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:[" ",(Ae/1e3).toFixed(2),"m  ",(we/1e3).toFixed(2),"m"]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Style"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:nt,style:{flex:1,padding:"0.5rem",border:S==="bold"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:S==="bold"?"#eff6ff":"#fff",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},title:"Bold",children:"B"}),u.jsx("button",{onClick:Ue,style:{flex:1,padding:"0.5rem",border:B==="italic"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:B==="italic"?"#eff6ff":"#fff",fontStyle:"italic",fontSize:"1rem",cursor:"pointer"},title:"Italic",children:"I"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Alignment"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>lt("left"),style:{flex:1,padding:"0.5rem",border:D==="left"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="left"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Left",children:""}),u.jsx("button",{onClick:()=>lt("center"),style:{flex:1,padding:"0.5rem",border:D==="center"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="center"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Center",children:""}),u.jsx("button",{onClick:()=>lt("right"),style:{flex:1,padding:"0.5rem",border:D==="right"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="right"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Right",children:""})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Text Colour"}),u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:(ue==null?void 0:ue.name)||"Select Colour"}),ue&&u.jsx("span",{className:"color-item__code",children:ue.tpv_code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(ue==null?void 0:ue.hex)||"#1C1C1C"},onClick:()=>v(!0),title:(ue==null?void 0:ue.name)||"Select colour"})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Outline"}),ie?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"color-item",children:[u.jsxs("div",{className:"color-item__info",children:[u.jsx("span",{className:"color-item__name",children:ie.name}),u.jsx("span",{className:"color-item__code",children:ie.tpv_code})]}),u.jsx("button",{className:"color-item__swatch",style:{backgroundColor:ie.hex},onClick:()=>C(!0),title:ie.name})]}),u.jsxs("div",{className:"property-input-row",style:{marginTop:"0.5rem"},children:[u.jsx("input",{type:"range",min:"1",max:Math.round(P*.2),step:"1",value:ge||0,onChange:q=>Ne(q.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(ge||0),onChange:q=>Ne(q.target.value),min:"0",step:"1"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]}),u.jsx("button",{onClick:ht,style:{marginTop:"0.5rem",padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626",cursor:"pointer"},children:"Remove Outline"})]}):u.jsx("button",{onClick:()=>C(!0),style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",fontSize:"0.875rem",color:"#6b7280",cursor:"pointer"},children:"+ Add Outline"})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Transform"})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Position"}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"X"}),u.jsx("input",{type:"number",value:Math.round(R.x),onChange:q=>Le("x",q.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"Y"}),u.jsx("input",{type:"number",value:Math.round(R.y),onChange:q=>Le("y",q.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Rotation"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"360",value:ee||0,onChange:q=>de(q.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(ee||0),onChange:q=>de(q.target.value),min:"0",max:"360"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Actions"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-secondary",onClick:Ct,title:"Duplicate text (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Text"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-delete",onClick:jt,title:"Delete text (Delete key)",children:" Delete Text"})}),u.jsx("div",{className:"property-group",children:u.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Drag corners to resize text. Hold Shift while rotating to snap to 15 increments."})})]})}),g&&u.jsx("div",{className:"color-picker-modal",onClick:()=>v(!1),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:q=>q.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:"Select Text Colour"}),u.jsx("button",{onClick:()=>v(!1),children:""})]}),u.jsx("div",{className:"color-picker-grid",children:fi.map(q=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:q.hex},onClick:()=>oe(q),title:`${q.code} - ${q.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:q.code})},q.code))})]})}),w&&u.jsx("div",{className:"color-picker-modal",onClick:()=>C(!1),children:u.jsxs("div",{className:"color-picker-modal__content",onClick:q=>q.stopPropagation(),children:[u.jsxs("div",{className:"color-picker-modal__header",children:[u.jsx("h4",{children:"Select Outline Colour"}),u.jsx("button",{onClick:()=>C(!1),children:""})]}),u.jsx("div",{className:"color-picker-grid",children:fi.map(q=>u.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:q.hex},onClick:()=>We(q),title:`${q.code} - ${q.name}`,children:u.jsx("span",{className:"color-picker-swatch__code",children:q.code})},q.code))})]})})]})}function N9({zone:e,zoneId:t}){const{updateExclusionZonePosition:n,updateExclusionZoneDimensions:r,updateExclusionZoneRotation:i,updateExclusionZoneCornerRadius:s,removeExclusionZone:a,duplicateExclusionZone:o,addToHistory:c}=nn(),{position:h,rotation:d,width_mm:p,height_mm:m,sides:g,cornerRadius:v,customName:w}=e,C=(R,ee)=>{const ue=parseFloat(ee);isNaN(ue)||n(t,{...h,[R]:ue})},x=(R,ee)=>{const ue=parseFloat(ee);isNaN(ue)||ue<500||(R==="width"?r(t,ue,m):r(t,p,ue),c())},k=R=>{const ee=parseFloat(R);isNaN(ee)||(i(t,ee),c())},P=R=>{const ee=parseFloat(R);isNaN(ee)||s(t,ee)},j=()=>{window.confirm("Delete this exclusion zone? This action cannot be undone.")&&a(t)},M=()=>{o(t)},S=p*m/1e6,B=w||"Exclusion Zone",D=g===4?"Rectangle":g>=32?"Circle":`${g}-sided`;return u.jsxs("div",{className:"properties-panel",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsx("h3",{children:"Exclusion Zone"}),u.jsxs("div",{className:"properties-panel__court-info",children:[u.jsx("span",{className:"court-name",children:B}),u.jsx("span",{className:"court-standard",style:{background:"#f87171",color:"white"},children:"Excluded Area"})]})]}),u.jsx("div",{className:"properties-panel__content",children:u.jsxs("div",{className:"properties-section",children:[u.jsx("div",{className:"property-group",style:{background:"#fef2f2",padding:"0.75rem",borderRadius:"6px",marginBottom:"1rem",border:"1px solid #fecaca"},children:u.jsx("p",{style:{fontSize:"0.75rem",color:"#991b1b",margin:0},children:"This area represents a building, planter, or other obstacle. It is excluded from material calculations."})}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Dimensions"}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"W"}),u.jsx("input",{type:"number",value:Math.round(p),onChange:R=>x("width",R.target.value),step:"100",min:"500"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"H"}),u.jsx("input",{type:"number",value:Math.round(m),onChange:R=>x("height",R.target.value),step:"100",min:"500"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Position"}),u.jsxs("div",{className:"property-input-row",children:[u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"X"}),u.jsx("input",{type:"number",value:Math.round(h.x),onChange:R=>C("x",R.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]}),u.jsxs("div",{className:"property-input-group",children:[u.jsx("span",{className:"property-label",children:"Y"}),u.jsx("input",{type:"number",value:Math.round(h.y),onChange:R=>C("y",R.target.value),step:"100"}),u.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Rotation"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"360",value:d||0,onChange:R=>k(R.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(d||0),onChange:R=>k(R.target.value),min:"0",max:"360"}),u.jsx("span",{className:"property-unit",children:""})]})]})]}),g===4&&u.jsxs("div",{className:"property-group",children:[u.jsx("label",{children:"Corner Radius"}),u.jsxs("div",{className:"property-input-row",children:[u.jsx("input",{type:"range",min:"0",max:"100",value:v||0,onChange:R=>P(R.target.value),className:"property-slider"}),u.jsxs("div",{className:"property-input-group property-input-group--compact",children:[u.jsx("input",{type:"number",value:Math.round(v||0),onChange:R=>P(R.target.value),min:"0",max:"100"}),u.jsx("span",{className:"property-unit",children:"%"})]})]})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Exclusion Info"})}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Shape"}),u.jsx("div",{className:"property-info",children:u.jsx("span",{children:D})})]}),u.jsxs("div",{className:"property-group property-group--info",children:[u.jsx("label",{children:"Excluded Area"}),u.jsx("div",{className:"property-info",style:{color:"#dc2626"},children:u.jsxs("span",{children:[S.toFixed(2)," m"]})})]}),u.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:u.jsx("span",{children:"Actions"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-secondary",onClick:M,title:"Duplicate exclusion zone",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:"Duplicate Zone"})}),u.jsx("div",{className:"property-group property-group--actions",children:u.jsx("button",{className:"btn-delete",onClick:j,title:"Delete exclusion zone",children:"Delete Zone"})}),u.jsx("div",{className:"property-group",children:u.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:"Drag the zone on the canvas to reposition. Use handles to resize."})})]})})]})}function O9({group:e,groupId:t,shapes:n,isEditing:r,onEnterGroup:i,onExitGroup:s,onUngroup:a,onDelete:o}){const c=e.customName||"Group",h=e.childIds.map(p=>n[p]).filter(Boolean),d=e.bounds||{width:0,height:0};return u.jsx("div",{className:"properties-panel properties-panel--group",children:u.jsxs("div",{className:"properties-panel__scroll-container",children:[u.jsxs("div",{className:"properties-panel__header",children:[u.jsxs("div",{className:"properties-panel__title-row",children:[u.jsx("span",{className:"properties-panel__icon",style:{color:"#9333ea"},children:""}),u.jsx("h3",{className:"properties-panel__title",children:c})]}),u.jsxs("span",{className:"properties-panel__subtitle",children:[e.childIds.length," element",e.childIds.length!==1?"s":""]})]}),u.jsxs("div",{className:"properties-panel__content",children:[u.jsxs("div",{className:"property-section",children:[u.jsx("div",{className:"property-group",style:{marginBottom:"1rem"},children:r?u.jsx("button",{className:"property-btn property-btn--secondary property-btn--full",onClick:s,style:{borderColor:"#9333ea",color:"#9333ea"},children:" Exit Group Editing"}):u.jsx("button",{className:"property-btn property-btn--primary property-btn--full",onClick:i,style:{background:"#9333ea"},children:"Edit Group Elements"})}),r&&u.jsx("div",{className:"property-hint",style:{fontSize:"0.75rem",color:"#9333ea",marginBottom:"1rem"},children:"Click on individual elements to select and edit them"})]}),u.jsxs("div",{className:"property-section",children:[u.jsx("h4",{className:"property-section__title",children:"Dimensions"}),u.jsxs("div",{className:"property-group",children:[u.jsxs("div",{className:"property-row",children:[u.jsx("label",{className:"property-label",children:"Width"}),u.jsxs("span",{className:"property-value",children:[(d.width/1e3).toFixed(2),"m"]})]}),u.jsxs("div",{className:"property-row",children:[u.jsx("label",{className:"property-label",children:"Height"}),u.jsxs("span",{className:"property-value",children:[(d.height/1e3).toFixed(2),"m"]})]})]})]}),u.jsxs("div",{className:"property-section",children:[u.jsxs("h4",{className:"property-section__title",children:["Elements (",h.length,")"]}),u.jsx("div",{className:"property-group",children:u.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"6px",border:"1px solid #e5e7eb"},children:h.map((p,m)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderBottom:m<h.length-1?"1px solid #f1f5f9":"none",fontSize:"0.8rem"},children:[u.jsx("span",{style:{color:"#9333ea"},children:p.shapeType==="blob"?"":""}),u.jsx("span",{style:{color:"#475569"},children:p.customName||`${p.blobStyle||p.shapeType} ${m+1}`}),u.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.7rem",color:"#9ca3af"},children:[(p.width_mm/1e3).toFixed(1),"m"]})]},p.id))})})]}),u.jsxs("div",{className:"property-section",children:[u.jsx("h4",{className:"property-section__title",children:"Actions"}),u.jsxs("div",{className:"property-group",style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("button",{className:"property-btn property-btn--secondary property-btn--full",onClick:a,title:"Dissolve the group and make elements independent",children:" Ungroup Elements"}),u.jsx("button",{className:"property-btn property-btn--danger property-btn--full",onClick:()=>{confirm(`Delete "${c}" and all its elements?`)&&o()},title:"Delete group and all its elements",children:" Delete Group"})]})]}),u.jsx("div",{className:"property-group",children:u.jsxs("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:[u.jsx("strong",{children:"Tip:"})," Double-click a group to edit its contents. Press Escape to exit.",u.jsx("br",{}),u.jsx("strong",{children:"Shortcuts:"})," G to group, G to ungroup."]})})]})]})})}function R9(){const{courts:e,tracks:t,motifs:n,shapes:r,texts:i,exclusionZones:s,groups:a,elementOrder:o,selectedCourtId:c,selectedTrackId:h,selectedMotifId:d,selectedShapeId:p,selectedTextId:m,selectedExclusionZoneId:g,selectedGroupId:v,editingGroupId:w,setElementOrder:C,selectCourt:x,selectTrack:k,selectMotif:P,selectShape:j,selectText:M,selectExclusionZone:S,selectGroup:B,deselectGroup:D,enterGroup:R,exitGroup:ee,ungroup:ue,deleteGroupWithChildren:ie,bringToFront:ge,sendToBack:H,duplicateCourt:ye,duplicateTrack:Ae,duplicateMotif:we,duplicateShape:Be,duplicateText:xe,removeCourt:Le,removeTrack:Ce,removeMotif:Re,removeShape:it,removeText:nt,removeExclusionZone:Ue,renameElement:lt,toggleElementLock:de,toggleElementVisibility:oe,addToHistory:We}=nn(),[Ne,ht]=pe.useState(null),[jt,Ct]=pe.useState(null),[q,Ye]=pe.useState(null),[se,L]=pe.useState(null),[I,Q]=pe.useState(""),[he,ve]=pe.useState(new Set);pe.useEffect(()=>{const U=()=>Ye(null);if(q)return document.addEventListener("click",U),()=>document.removeEventListener("click",U)},[q]);const me=[...o].filter(U=>!U.startsWith("group-")).reverse(),Me=U=>{var K,V,ne;if(U.startsWith("court-")){const z=e[U];return{type:"court",name:(z==null?void 0:z.customName)||((K=z==null?void 0:z.template)==null?void 0:K.name)||"Unknown Court",icon:"",sport:((V=z==null?void 0:z.template)==null?void 0:V.sport)||"",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(U.startsWith("track-")){const z=t[U];return{type:"track",name:(z==null?void 0:z.customName)||((ne=z==null?void 0:z.template)==null?void 0:ne.name)||"Unknown Track",icon:"",sport:"athletics",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(U.startsWith("motif-")){const z=n[U];return{type:"motif",name:(z==null?void 0:z.customName)||(z==null?void 0:z.sourceDesignName)||"Unknown Motif",icon:"",sport:"playground",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(U.startsWith("shape-")){const z=r[U];let te="Shape",ae="";if((z==null?void 0:z.shapeType)==="blob")te={organic:"Organic Blob",splashy:"Splashy Blob",cloudy:"Cloudy Blob",rocky:"Rocky Blob"}[z.blobStyle]||"Blob",ae="";else if((z==null?void 0:z.shapeType)==="path")te=z.closed?"Custom Shape":"Path",ae="";else if(z!=null&&z.starMode)te=`${z.sides||5}-Point Star`,ae="";else if(z!=null&&z.sides){const ce=z.sides;ce>=32?(te="Circle",ae=""):ce===3?(te="Triangle",ae=""):ce===4?(te="Rectangle",ae=""):ce===5?(te="Pentagon",ae=""):ce===6?(te="Hexagon",ae=""):ce===8?(te="Octagon",ae=""):(te=`${ce}-gon`,ae="")}return{type:"shape",name:(z==null?void 0:z.customName)||te,icon:ae,sport:"shape",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(U.startsWith("text-")){const z=i[U],te=(z==null?void 0:z.content)||"Text Label",ae=te.length>20?te.substring(0,20)+"...":te;return{type:"text",name:(z==null?void 0:z.customName)||ae,icon:"T",sport:"text",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(U.startsWith("exclusion-")){const z=s[U];return{type:"exclusion",name:(z==null?void 0:z.customName)||"Exclusion Zone",icon:"",sport:"exclusion",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}return{type:"unknown",name:"Unknown",icon:"",sport:"",locked:!1,visible:!0}},Je=U=>U===c||U===h||U===d||U===p||U===m||U===g,De=U=>{U.startsWith("court-")?x(U):U.startsWith("track-")?k(U):U.startsWith("motif-")?P(U):U.startsWith("shape-")?j(U):U.startsWith("text-")?M(U):U.startsWith("exclusion-")&&S(U)},l=(U,K)=>{ht(K),U.dataTransfer.effectAllowed="move",U.dataTransfer.setData("text/plain",K),setTimeout(()=>{U.target.classList.add("layer-item--dragging")},0)},f=U=>{U.target.classList.remove("layer-item--dragging"),ht(null),Ct(null)},b=(U,K)=>{U.preventDefault(),U.dataTransfer.dropEffect="move",K!==Ne&&Ct(K)},_=()=>{Ct(null)},E=(U,K)=>{if(U.preventDefault(),!Ne||Ne===K){ht(null),Ct(null);return}const V=[...o],ne=V.indexOf(Ne),z=V.indexOf(K);if(ne===-1||z===-1)return;V.splice(ne,1);const te=me.indexOf(Ne),ae=me.indexOf(K);te<ae,V.splice(z,0,Ne),C(V),We(),ht(null),Ct(null)},A=(U,K)=>{U.stopPropagation(),ge(K),Ye(null)},T=(U,K)=>{U.stopPropagation(),H(K),Ye(null)},N=(U,K)=>{U.stopPropagation(),K.startsWith("court-")?ye(K):K.startsWith("track-")?Ae(K):K.startsWith("motif-")?we(K):K.startsWith("shape-")?Be(K):K.startsWith("text-")&&xe(K),Ye(null)},$=(U,K)=>{U.stopPropagation();const V=Me(K);confirm(`Delete "${V.name}"?`)&&(K.startsWith("court-")?Le(K):K.startsWith("track-")?Ce(K):K.startsWith("motif-")?Re(K):K.startsWith("shape-")?it(K):K.startsWith("text-")?nt(K):K.startsWith("exclusion-")&&Ue(K)),Ye(null)},F=(U,K)=>{U.stopPropagation();const V=Me(K);L(K),Q(V.name),Ye(null)},G=U=>{I.trim()&&lt(U,I.trim()),L(null),Q("")},Z=(U,K)=>{U.key==="Enter"?G(K):U.key==="Escape"&&(L(null),Q(""))},Y=(U,K)=>{U.stopPropagation(),de(K),Ye(null)},W=(U,K)=>{U.stopPropagation(),oe(K),Ye(null)},X=(U,K)=>{U.stopPropagation(),Ye(q===K?null:K)};return me.length===0&&Object.keys(a).length===0?u.jsx("div",{className:"layers-panel layers-panel--empty",children:u.jsxs("div",{className:"layers-panel__empty-state",children:[u.jsx("span",{className:"layers-panel__empty-icon",children:""}),u.jsx("p",{children:"No elements yet"}),u.jsx("span",{className:"layers-panel__empty-hint",children:"Add courts, tracks, motifs, shapes, or text"})]})}):u.jsxs("div",{className:"layers-panel",children:[u.jsxs("div",{className:"layers-panel__header",children:[u.jsx("h4",{children:"Layers"}),u.jsx("span",{className:"layers-panel__count",children:me.length})]}),u.jsx("div",{className:"layers-panel__hint",children:"Drag to reorder layers. Top = front, bottom = back."}),u.jsx("div",{className:"layers-panel__list",children:me.map((U,K)=>{const V=Me(U),ne=Je(U),z=U===jt,te=K===0,ae=K===me.length-1,ce=se===U;return u.jsxs("div",{className:`layer-item ${ne?"layer-item--selected":""} ${z?"layer-item--drag-over":""} ${V.locked?"layer-item--locked":""} ${V.visible?"":"layer-item--hidden"}`,draggable:!V.locked&&!ce,onDragStart:re=>l(re,U),onDragEnd:f,onDragOver:re=>b(re,U),onDragLeave:_,onDrop:re=>E(re,U),onClick:()=>!ce&&De(U),children:[u.jsx("span",{className:`layer-item__handle ${V.locked?"layer-item__handle--disabled":""}`,title:V.locked?"Locked":"Drag to reorder",children:V.locked?"":""}),ce?u.jsx("input",{type:"text",className:"layer-item__rename-input",value:I,onChange:re=>Q(re.target.value),onBlur:()=>G(U),onKeyDown:re=>Z(re,U),autoFocus:!0,onClick:re=>re.stopPropagation()}):u.jsx("span",{className:`layer-item__name ${V.visible?"":"layer-item__name--hidden"}`,children:V.name}),u.jsx("div",{className:"layer-item__indicators",children:!V.visible&&u.jsx("span",{className:"layer-item__indicator",title:"Hidden",children:""})}),u.jsxs("div",{className:"layer-item__actions",children:[u.jsx("button",{className:"layer-item__menu-btn",onClick:re=>X(re,U),title:"More actions",children:""}),q===U&&u.jsxs("div",{className:"layer-item__menu",children:[u.jsx("button",{onClick:re=>A(re,U),disabled:te,children:" Bring to Front"}),u.jsx("button",{onClick:re=>T(re,U),disabled:ae,children:" Send to Back"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:re=>N(re,U),children:" Duplicate"}),u.jsx("button",{onClick:re=>F(re,U),children:" Rename"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:re=>Y(re,U),children:V.locked?" Unlock":" Lock"}),u.jsx("button",{onClick:re=>W(re,U),children:V.visible?" Hide":" Show"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:re=>$(re,U),className:"layer-item__menu-delete",children:" Delete"})]})]})]},U)})}),Object.keys(a).length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"layers-panel__section-divider",children:u.jsx("span",{children:"Groups"})}),u.jsx("div",{className:"layers-panel__list layers-panel__list--groups",children:Object.entries(a).map(([U,K])=>{const V=he.has(U),ne=v===U,z=w===U,te=K.customName||"Group";return u.jsxs("div",{className:"layer-group",children:[u.jsxs("div",{className:`layer-item layer-item--group ${ne?"layer-item--selected":""} ${z?"layer-item--editing":""} ${K.locked?"layer-item--locked":""}`,onClick:()=>!K.locked&&B(U),onDoubleClick:()=>!K.locked&&R(U),children:[u.jsx("button",{className:"layer-item__expand-btn",onClick:ae=>{ae.stopPropagation(),ve(ce=>{const re=new Set(ce);return re.has(U)?re.delete(U):re.add(U),re})},title:V?"Collapse":"Expand",children:V?"":""}),u.jsx("span",{className:"layer-item__handle layer-item__handle--group",children:K.locked?"":""}),u.jsxs("span",{className:"layer-item__name",children:[te,u.jsxs("span",{className:"layer-item__child-count",children:["(",K.childIds.length,")"]})]}),z&&u.jsx("span",{className:"layer-item__edit-indicator",title:"Editing group",children:""}),u.jsxs("div",{className:"layer-item__actions",children:[u.jsx("button",{className:"layer-item__menu-btn",onClick:ae=>X(ae,U),title:"More actions",children:""}),q===U&&u.jsxs("div",{className:"layer-item__menu",children:[u.jsx("button",{onClick:ae=>{ae.stopPropagation(),R(U),Ye(null)},children:" Edit Group"}),u.jsx("button",{onClick:ae=>{ae.stopPropagation(),ue(U),Ye(null)},children:" Ungroup"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:ae=>{ae.stopPropagation(),de(U),Ye(null)},children:K.locked?" Unlock":" Lock"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:ae=>{ae.stopPropagation(),confirm(`Delete group "${te}" and all its contents?`)&&ie(U),Ye(null)},className:"layer-item__menu-delete",children:" Delete Group"})]})]})]}),V&&u.jsx("div",{className:"layer-group__children",children:K.childIds.map(ae=>{const ce=Me(ae),re=ae===p||ae===d;return u.jsxs("div",{className:`layer-item layer-item--child ${re?"layer-item--selected":""}`,onClick:be=>{be.stopPropagation(),z&&De(ae)},children:[u.jsx("span",{className:"layer-item__indent"}),u.jsx("span",{className:"layer-item__handle layer-item__handle--disabled",children:ce.icon}),u.jsx("span",{className:`layer-item__name ${ce.visible?"":"layer-item__name--hidden"}`,children:ce.name})]},ae)})})]},U)})}),w&&u.jsx("div",{className:"layers-panel__exit-group",children:u.jsx("button",{className:"layers-panel__exit-group-btn",onClick:()=>ee(),children:" Exit Group Editing"})})]}),Object.keys(s).length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"layers-panel__section-divider",children:u.jsx("span",{children:"Exclusion Zones"})}),u.jsx("div",{className:"layers-panel__list layers-panel__list--exclusions",children:Object.keys(s).map(U=>{const K=Me(U),V=Je(U);return u.jsxs("div",{className:`layer-item layer-item--exclusion ${V?"layer-item--selected":""} ${K.locked?"layer-item--locked":""} ${K.visible?"":"layer-item--hidden"}`,onClick:()=>De(U),children:[u.jsx("span",{className:"layer-item__handle layer-item__handle--disabled",children:K.icon}),u.jsx("span",{className:`layer-item__name ${K.visible?"":"layer-item__name--hidden"}`,children:K.name}),u.jsx("div",{className:"layer-item__indicators",children:!K.visible&&u.jsx("span",{className:"layer-item__indicator",title:"Hidden",children:""})}),u.jsxs("div",{className:"layer-item__actions",children:[u.jsx("button",{className:"layer-item__menu-btn",onClick:ne=>X(ne,U),title:"More actions",children:""}),q===U&&u.jsxs("div",{className:"layer-item__menu",children:[u.jsx("button",{onClick:ne=>F(ne,U),children:" Rename"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:ne=>Y(ne,U),children:K.locked?" Unlock":" Lock"}),u.jsx("button",{onClick:ne=>W(ne,U),children:K.visible?" Hide":" Show"}),u.jsx("div",{className:"layer-item__menu-divider"}),u.jsx("button",{onClick:ne=>$(ne,U),className:"layer-item__menu-delete",children:" Delete"})]})]})]},U)})})]}),u.jsx("div",{className:"layers-panel__footer",children:u.jsx("span",{className:"layers-panel__shortcut-hint",children:"[ ] to reorder  G to group  G to ungroup"})})]})}async function hN(){var n,r;const e=await ui.auth.getSession(),t=(r=(n=e==null?void 0:e.data)==null?void 0:n.session)==null?void 0:r.access_token;if(!t)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async function dN(e){const t=await hN(),n=await fetch("/api/projects/create",{method:"POST",headers:t,body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to create project. Please check your connection and try again.")}return n.json()}async function pw(){const e=await hN(),t=await fetch("/api/projects/list",{method:"GET",headers:e});if(!t.ok){const n=await t.json();throw new Error(n.error||"Unable to load your projects. Please refresh the page and try again.")}return t.json()}function M9(e,t={}){var n,r;return{type:"sports_surface",version:"1.0",name:t.name||e.name||"Untitled Design",description:t.description||e.description||"",tags:t.tags||e.tags||[],surface:e.surface,courts:L9(e.courts),tracks:I9(e.tracks),motifs:$9(e.motifs),exclusionZones:D9(e.exclusionZones),shapes:z9(e.shapes),texts:F9(e.texts),elementOrder:e.elementOrder||[],customMarkings:e.customMarkings||[],backgroundZones:e.backgroundZones||[],dimensions:{width_mm:((n=e.surface)==null?void 0:n.width_mm)||5e4,length_mm:((r=e.surface)==null?void 0:r.length_mm)||5e4}}}function L9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,templateId:n.templateId,template:n.template,position:n.position,rotation:n.rotation,scale:n.scale,lineColorOverrides:n.lineColorOverrides||{},zoneColorOverrides:n.zoneColorOverrides||{},courtSurfaceColor:n.courtSurfaceColor}])):{}}function I9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,templateId:n.templateId,template:n.template,position:n.position,rotation:n.rotation,parameters:n.parameters,trackSurfaceColor:n.trackSurfaceColor,laneSurfaceColors:n.laneSurfaceColors||[],trackLineColor:n.trackLineColor}])):{}}function $9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,type:"motif",sourceDesignId:n.sourceDesignId,sourceDesignName:n.sourceDesignName,sourceThumbnailUrl:n.sourceThumbnailUrl,svgContent:n.svgContent,originalWidth_mm:n.originalWidth_mm,originalHeight_mm:n.originalHeight_mm,position:n.position,rotation:n.rotation,scale:n.scale}])):{}}function D9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,type:"exclusion",shapeType:n.shapeType,sides:n.sides,width_mm:n.width_mm,height_mm:n.height_mm,position:n.position,rotation:n.rotation,cornerRadius:n.cornerRadius,locked:n.locked,visible:n.visible,customName:n.customName,controlPoints:n.controlPoints}])):{}}function z9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,shapeType:n.shapeType,controlPoints:n.controlPoints,width_mm:n.width_mm,height_mm:n.height_mm,position:n.position,rotation:n.rotation,fillColor:n.fillColor,strokeEnabled:n.strokeEnabled,strokeColor:n.strokeColor,strokeWidth_mm:n.strokeWidth_mm,sides:n.sides,cornerRadius:n.cornerRadius,closed:n.closed,smooth:n.smooth,editPointsVisible:n.editPointsVisible}])):{}}function F9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,content:n.content,fontFamily:n.fontFamily,fontSize_mm:n.fontSize_mm,scale_x:n.scale_x??1,scale_y:n.scale_y??1,fontWeight:n.fontWeight,fontStyle:n.fontStyle,textAlign:n.textAlign,position:n.position,rotation:n.rotation,fillColor:n.fillColor,strokeColor:n.strokeColor,strokeWidth_mm:n.strokeWidth_mm}])):{}}function B9(e){var r,i;const t=[];return e.surface||t.push("Surface configuration is required"),(!((r=e.surface)!=null&&r.width_mm)||!((i=e.surface)!=null&&i.length_mm))&&t.push("Surface dimensions are required"),e.courts&&Object.keys(e.courts).length>0||e.tracks&&Object.keys(e.tracks).length>0||e.motifs&&Object.keys(e.motifs).length>0||t.push("Add at least one court, track, or motif to save"),{valid:t.length===0,errors:t}}async function U9(e,t=400){return new Promise((n,r)=>{try{const i=e.cloneNode(!0);i.querySelectorAll(".court-canvas__court--selected, .transform-handles").forEach(v=>{v.classList.remove("court-canvas__court--selected")}),i.querySelectorAll(".transform-handles").forEach(v=>v.remove());const s=e.getAttribute("viewBox").split(" ").map(Number),a=s[2],o=s[3];let c,h;a>o?(c=t,h=Math.round(o/a*t)):(h=t,c=Math.round(a/o*t)),i.setAttribute("width",c),i.setAttribute("height",h);const d=new XMLSerializer().serializeToString(i),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(p),g=new Image;g.onload=()=>{const v=document.createElement("canvas");v.width=c,v.height=h;const w=v.getContext("2d");w.fillStyle="#ffffff",w.fillRect(0,0,c,h),w.drawImage(g,0,0,c,h),v.toBlob(C=>{URL.revokeObjectURL(m),n(C)},"image/png",.9)},g.onerror=v=>{URL.revokeObjectURL(m),r(new Error("Failed to load SVG for thumbnail"))},g.src=m}catch(i){r(i)}})}async function H9(e){const n=`thumbnails/sports/${`sports-${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`}`,{data:r,error:i}=await ui.storage.from("tpv-studio-uploads").upload(n,e,{cacheControl:"3600",contentType:"image/png",upsert:!1});if(i)throw i;const{data:{publicUrl:s}}=ui.storage.from("tpv-studio-uploads").getPublicUrl(n);return s}function W9({existingDesignId:e=null,initialName:t="",svgRef:n=null,onClose:r,onSaved:i}){const s=nn(Le=>Le.exportDesignData),[a,o]=pe.useState(t),[c,h]=pe.useState(""),[d,p]=pe.useState(""),[m,g]=pe.useState(""),[v,w]=pe.useState(!1),[C,x]=pe.useState([]),[k,P]=pe.useState(!1),[j,M]=pe.useState(""),[S,B]=pe.useState("#1a365d"),[D,R]=pe.useState(!1),[ee,ue]=pe.useState(!1),[ie,ge]=pe.useState(!1),[H,ye]=pe.useState(null);pe.useEffect(()=>{Ae()},[]);const Ae=async()=>{try{const{projects:Le}=await pw();x(Le)}catch(Le){console.error("Failed to load projects:",Le),ye("Failed to load projects")}},we=async()=>{if(!j.trim()){ye("Project name is required");return}ge(!0),ye(null);try{const{project:Le}=await dN({name:j.trim(),color:S});x([Le,...C]),p(Le.id),P(!1),M(""),B("#1a365d")}catch(Le){console.error("Failed to create project:",Le),ye(Le.message)}finally{ge(!1)}},Be=async(Le=!1)=>{if(!a.trim()){ye("Design name is required");return}const Ce=s(),Re=B9(Ce);if(!Re.valid){ye(Re.errors.join(", "));return}Le?ue(!0):R(!0),ye(null);try{let it=null;if(n!=null&&n.current)try{console.log("[SPORTS-SAVE] Generating thumbnail...");const de=await U9(n.current);console.log("[SPORTS-SAVE] Uploading thumbnail..."),it=await H9(de),console.log("[SPORTS-SAVE] Thumbnail uploaded:",it)}catch(de){console.warn("[SPORTS-SAVE] Thumbnail generation failed, continuing without:",de)}const nt=M9(Ce,{name:a.trim(),description:c.trim()||"",tags:m.split(",").map(de=>de.trim()).filter(de=>de)});console.log("[SPORTS-SAVE] Serialized design data:",nt);const Ue={name:a.trim(),description:c.trim()||null,project_id:d||null,tags:m.split(",").map(de=>de.trim()).filter(de=>de),is_public:v,design_data:nt,thumbnail_url:it};e&&!Le&&(Ue.id=e);const lt=await hw(Ue);i&&i(lt,a.trim()),r()}catch(it){console.error("Failed to save design:",it),ye(it.message)}finally{R(!1),ue(!1)}},xe=["#1a365d","#ff6b35","#4a90e2","#50c878","#9b59b6","#e74c3c"];return u.jsx("div",{className:"modal-overlay",onClick:r,children:u.jsxs("div",{className:"modal-content save-design-modal",onClick:Le=>Le.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:e?"Update Design":"Save Design"}),u.jsx("button",{onClick:r,className:"close-button",children:""})]}),u.jsxs("div",{className:"modal-body",children:[H&&u.jsx("div",{className:"error-message",children:H}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-name",children:"Design Name *"}),u.jsx("input",{id:"design-name",type:"text",value:a,onChange:Le=>o(Le.target.value),placeholder:"e.g., Multi-Sport Court Design",autoFocus:!0,disabled:D||ee})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-description",children:"Description"}),u.jsx("textarea",{id:"design-description",value:c,onChange:Le=>h(Le.target.value),placeholder:"Optional notes about this sports surface design...",rows:3,disabled:D||ee})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-project",children:"Project"}),k?u.jsxs("div",{className:"new-project-form",children:[u.jsxs("div",{className:"input-row",children:[u.jsx("input",{type:"text",value:j,onChange:Le=>M(Le.target.value),placeholder:"Project name...",disabled:ie}),u.jsx("div",{className:"color-picker-inline",children:xe.map(Le=>u.jsx("button",{type:"button",className:`color-swatch ${S===Le?"active":""}`,style:{backgroundColor:Le},onClick:()=>B(Le),disabled:ie},Le))})]}),u.jsxs("div",{className:"button-row",children:[u.jsx("button",{type:"button",onClick:we,className:"btn-primary btn-small",disabled:ie,children:ie?"Creating...":"Create"}),u.jsx("button",{type:"button",onClick:()=>P(!1),className:"btn-secondary btn-small",disabled:ie,children:"Cancel"})]})]}):u.jsxs("div",{className:"project-selector",children:[u.jsxs("select",{id:"design-project",value:d,onChange:Le=>p(Le.target.value),disabled:D||ee,children:[u.jsx("option",{value:"",children:"No Project"}),C.map(Le=>u.jsxs("option",{value:Le.id,children:[Le.name," (",Le.design_count," designs)"]},Le.id))]}),u.jsx("button",{type:"button",onClick:()=>P(!0),className:"btn-secondary btn-small",disabled:D||ee,children:"+ New Project"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-tags",children:"Tags"}),u.jsx("input",{id:"design-tags",type:"text",value:m,onChange:Le=>g(Le.target.value),placeholder:"e.g., tennis, multi-sport, school (comma-separated)",disabled:D||ee}),u.jsx("small",{className:"help-text",children:"Separate tags with commas"})]}),u.jsx("div",{className:"form-group checkbox-group",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:v,onChange:Le=>w(Le.target.checked),disabled:D||ee}),u.jsx("span",{children:"Make this design public (shareable link)"})]})})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{onClick:r,className:"btn-secondary",disabled:D||ee,children:"Cancel"}),e&&u.jsx("button",{onClick:()=>Be(!0),className:"btn-secondary",disabled:D||ee,children:ee?"Saving...":"Save as New"}),u.jsx("button",{onClick:()=>Be(!1),className:"btn-primary",disabled:D||ee,children:D?"Saving...":e?"Update":"Save Design"})]})]})})}function mw(e,t){var d,p,m,g;if(!e)throw new Error("SVG element not found");const n=e.cloneNode(!0);n.querySelectorAll('.court-canvas__selection-outline, .transform-handles, .track-resize-handles, [class*="selection"], [class*="handle"]').forEach(v=>v.remove());const i=document.createElementNS("http://www.w3.org/2000/svg","title");i.textContent=(t==null?void 0:t.name)||"Sports Surface Design",n.insertBefore(i,n.firstChild);const s=document.createElementNS("http://www.w3.org/2000/svg","desc");s.textContent=`Generated by TPV Designer. Dimensions: ${(((d=t==null?void 0:t.surface)==null?void 0:d.width_mm)/1e3).toFixed(1)}m  ${(((p=t==null?void 0:t.surface)==null?void 0:p.length_mm)/1e3).toFixed(1)}m`,n.insertBefore(s,n.firstChild.nextSibling),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const a=((m=t==null?void 0:t.surface)==null?void 0:m.width_mm)||5e4,o=((g=t==null?void 0:t.surface)==null?void 0:g.length_mm)||5e4;n.setAttribute("width",`${a}mm`),n.setAttribute("height",`${o}mm`),n.setAttribute("data-tpv-studio","1.0"),n.setAttribute("data-design-type","sports_surface");let h=new XMLSerializer().serializeToString(n);return h=`<?xml version="1.0" encoding="UTF-8"?>
`+h,h}function V9(e,t="sports-surface.svg"){const n=new Blob([e],{type:"image/svg+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}async function G9(e,t,n="sports-surface.png",r=2){return new Promise((i,s)=>{try{const a=mw(e,t),o=document.createElement("canvas"),c=o.getContext("2d"),h=e.getAttribute("viewBox");let d=1200,p=1200;if(h){const[,,w,C]=h.split(" ").map(Number),x=2400,k=C/w;d=Math.min(w/10,x),p=d*k}o.width=d*r,o.height=p*r;const m=new Image,g=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(g);m.onload=()=>{c.fillStyle="#ffffff",c.fillRect(0,0,o.width,o.height),c.drawImage(m,0,0,o.width,o.height),o.toBlob(w=>{if(!w){s(new Error("Failed to create PNG blob"));return}const C=URL.createObjectURL(w),x=document.createElement("a");x.href=C,x.download=n,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),URL.revokeObjectURL(C),i()},"image/png",.95)},m.onerror=w=>{URL.revokeObjectURL(v),s(new Error("Failed to load SVG for PNG conversion"))},m.src=v}catch(a){s(a)}})}function Lh(e,t){const n=(e||"sports-surface").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50),r=new Date().toISOString().split("T")[0];return`${n}_${r}.${t}`}function _2(e){const t=e.querySelectorAll('image[href^="data:image/svg+xml"]');console.log(`[EXPORT] Found ${t.length} motif images to inline`),t.forEach((n,r)=>{try{const i=n.getAttribute("href");if(!i)return;let s;if(i.includes(",")){const j=i.split(",")[1];i.includes("base64")?s=atob(j):s=decodeURIComponent(j)}else{console.warn(`[EXPORT] Motif ${r}: Invalid data URL format`);return}const c=new DOMParser().parseFromString(s,"image/svg+xml").documentElement;if(c.querySelector("parsererror")){console.warn(`[EXPORT] Motif ${r}: SVG parse error`);return}const h=parseFloat(n.getAttribute("x"))||0,d=parseFloat(n.getAttribute("y"))||0,p=parseFloat(n.getAttribute("width")),m=parseFloat(n.getAttribute("height"));if(!p||!m){console.warn(`[EXPORT] Motif ${r}: Missing dimensions`);return}const g=c.getAttribute("viewBox");let v=1,w=1;if(g){const j=g.split(/\s+/).map(Number);if(j.length===4){const[,,M,S]=j;M>0&&S>0&&(v=p/M,w=m/S)}}const C=n.closest("g"),x=(C==null?void 0:C.getAttribute("transform"))||"",k=document.createElementNS("http://www.w3.org/2000/svg","g");k.setAttribute("class","motif-inline"),k.setAttribute("transform",`translate(${h}, ${d}) scale(${v}, ${w})`);const P=c.querySelector("defs");if(P){const j=e.querySelector("defs")||(()=>{const M=document.createElementNS("http://www.w3.org/2000/svg","defs");return e.insertBefore(M,e.firstChild),M})();for(;P.firstChild;)j.appendChild(P.firstChild)}for(;c.firstChild;)c.firstChild.nodeName!=="defs"?k.appendChild(c.firstChild):c.removeChild(c.firstChild);n.parentNode.replaceChild(k,n),console.log(`[EXPORT] Motif ${r}: Inlined successfully (scale: ${v.toFixed(3)}, ${w.toFixed(3)})`)}catch(i){console.warn(`[EXPORT] Failed to inline motif ${r}:`,i.message)}})}function ed(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fN={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(h,d){if(!i[h]){if(!r[h]){var p=typeof ed=="function"&&ed;if(!d&&p)return p(h,!0);if(o)return o(h,!0);var m=new Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m}var g=i[h]={exports:{}};r[h][0].call(g.exports,function(v){var w=r[h][1][v];return a(w||v)},g,g.exports,n,r,i,s)}return i[h].exports}for(var o=typeof ed=="function"&&ed,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var h,d,p,m,g,v,w,C=[],x=0,k=c.length,P=k,j=s.getTypeOf(c)!=="string";x<c.length;)P=k-x,p=j?(h=c[x++],d=x<k?c[x++]:0,x<k?c[x++]:0):(h=c.charCodeAt(x++),d=x<k?c.charCodeAt(x++):0,x<k?c.charCodeAt(x++):0),m=h>>2,g=(3&h)<<4|d>>4,v=1<P?(15&d)<<2|p>>6:64,w=2<P?63&p:64,C.push(o.charAt(m)+o.charAt(g)+o.charAt(v)+o.charAt(w));return C.join("")},i.decode=function(c){var h,d,p,m,g,v,w=0,C=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var k,P=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&P--,c.charAt(c.length-2)===o.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=a.uint8array?new Uint8Array(0|P):new Array(0|P);w<c.length;)h=o.indexOf(c.charAt(w++))<<2|(m=o.indexOf(c.charAt(w++)))>>4,d=(15&m)<<4|(g=o.indexOf(c.charAt(w++)))>>2,p=(3&g)<<6|(v=o.indexOf(c.charAt(w++))),k[C++]=h,g!==64&&(k[C++]=d),v!==64&&(k[C++]=p);return k}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function h(d,p,m,g,v){this.compressedSize=d,this.uncompressedSize=p,this.crc32=m,this.compression=g,this.compressedContent=v}h.prototype={getContentWorker:function(){var d=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return d.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(d,p,m){return d.pipe(new o).pipe(new c("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},r.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var o,c=[],h=0;h<256;h++){o=h;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[h]=o}return c}();r.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(h,d,p,m){var g=a,v=m+p;h^=-1;for(var w=m;w<v;w++)h=h>>>8^g[255&(h^d[w])];return-1^h}(0|c,o,o.length,0):function(h,d,p,m){var g=a,v=m+p;h^=-1;for(var w=m;w<v;w++)h=h>>>8^g[255&(h^d.charCodeAt(w))];return-1^h}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),c=n("./stream/GenericWorker"),h=s?"uint8array":"array";function d(p,m){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}i.magic="\b\0",o.inherits(d,c),d.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,p.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},i.compressWorker=function(p){return new d("Deflate",p)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(g,v){var w,C="";for(w=0;w<v;w++)C+=String.fromCharCode(255&g),g>>>=8;return C}function a(g,v,w,C,x,k){var P,j,M=g.file,S=g.compression,B=k!==h.utf8encode,D=o.transformTo("string",k(M.name)),R=o.transformTo("string",h.utf8encode(M.name)),ee=M.comment,ue=o.transformTo("string",k(ee)),ie=o.transformTo("string",h.utf8encode(ee)),ge=R.length!==M.name.length,H=ie.length!==ee.length,ye="",Ae="",we="",Be=M.dir,xe=M.date,Le={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(Le.crc32=g.crc32,Le.compressedSize=g.compressedSize,Le.uncompressedSize=g.uncompressedSize);var Ce=0;v&&(Ce|=8),B||!ge&&!H||(Ce|=2048);var Re=0,it=0;Be&&(Re|=16),x==="UNIX"?(it=798,Re|=function(Ue,lt){var de=Ue;return Ue||(de=lt?16893:33204),(65535&de)<<16}(M.unixPermissions,Be)):(it=20,Re|=function(Ue){return 63&(Ue||0)}(M.dosPermissions)),P=xe.getUTCHours(),P<<=6,P|=xe.getUTCMinutes(),P<<=5,P|=xe.getUTCSeconds()/2,j=xe.getUTCFullYear()-1980,j<<=4,j|=xe.getUTCMonth()+1,j<<=5,j|=xe.getUTCDate(),ge&&(Ae=s(1,1)+s(d(D),4)+R,ye+="up"+s(Ae.length,2)+Ae),H&&(we=s(1,1)+s(d(ue),4)+ie,ye+="uc"+s(we.length,2)+we);var nt="";return nt+=`
\0`,nt+=s(Ce,2),nt+=S.magic,nt+=s(P,2),nt+=s(j,2),nt+=s(Le.crc32,4),nt+=s(Le.compressedSize,4),nt+=s(Le.uncompressedSize,4),nt+=s(D.length,2),nt+=s(ye.length,2),{fileRecord:p.LOCAL_FILE_HEADER+nt+D+ye,dirRecord:p.CENTRAL_FILE_HEADER+s(it,2)+nt+s(ue.length,2)+"\0\0\0\0"+s(Re,4)+s(C,4)+D+ye+ue}}var o=n("../utils"),c=n("../stream/GenericWorker"),h=n("../utf8"),d=n("../crc32"),p=n("../signature");function m(g,v,w,C){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=C,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,c),m.prototype.push=function(g){var v=g.meta.percent||0,w=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-C-1))/w:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var w=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,w=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(C){return p.DATA_DESCRIPTOR+s(C.crc32,4)+s(C.compressedSize,4)+s(C.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-g,C=function(x,k,P,j,M){var S=o.transformTo("string",M(j));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(k,4)+s(P,4)+s(S.length,2)+S}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(w){v.processChunk(w)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(w){v.error(w)}),this},m.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var w=0;w<v.length;w++)try{v[w].error(g)}catch{}return!0},m.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(o,c,h){var d=new a(c.streamFiles,h,c.platform,c.encodeFileName),p=0;try{o.forEach(function(m,g){p++;var v=function(k,P){var j=k||P,M=s[j];if(!M)throw new Error(j+" is not a valid compression method !");return M}(g.options.compression,c.compression),w=g.options.compressionOptions||c.compressionOptions||{},C=g.dir,x=g.date;g._compressWorker(v,w).withStreamInfo("file",{name:m,dir:C,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=p}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),c=n("./zipEntries"),h=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function p(m){return new a.Promise(function(g,v){var w=m.decompressed.getContentWorker().pipe(new h);w.on("error",function(C){v(C)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(w){var C=new c(g);return C.load(w),C}).then(function(w){var C=[a.Promise.resolve(w)],x=w.files;if(g.checkCRC32)for(var k=0;k<x.length;k++)C.push(p(x[k]));return a.Promise.all(C)}).then(function(w){for(var C=w.shift(),x=C.files,k=0;k<x.length;k++){var P=x[k],j=P.fileNameStr,M=s.resolve(P.fileNameStr);v.file(M,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:g.createFolders}),P.dir||(v.file(M).unsafeOriginalName=j)}return C.zipComment.length&&(v.comment=C.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(c,h){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(o,a),o.prototype._bindStream=function(c){var h=this;(this._stream=c).pause(),c.on("data",function(d){h.push({data:d,meta:{percent:0}})}).on("error",function(d){h.isPaused?this.generatedError=d:h.error(d)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(o,c,h){s.call(this,c),this._helper=o;var d=this;o.on("data",function(p,m){d.push(p)||d._helper.pause(),h&&h(m)}).on("error",function(p){d.emit("error",p)}).on("end",function(){d.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(M,S,B){var D,R=o.getTypeOf(S),ee=o.extend(B||{},d);ee.date=ee.date||new Date,ee.compression!==null&&(ee.compression=ee.compression.toUpperCase()),typeof ee.unixPermissions=="string"&&(ee.unixPermissions=parseInt(ee.unixPermissions,8)),ee.unixPermissions&&16384&ee.unixPermissions&&(ee.dir=!0),ee.dosPermissions&&16&ee.dosPermissions&&(ee.dir=!0),ee.dir&&(M=x(M)),ee.createFolders&&(D=C(M))&&k.call(this,D,!0);var ue=R==="string"&&ee.binary===!1&&ee.base64===!1;B&&B.binary!==void 0||(ee.binary=!ue),(S instanceof p&&S.uncompressedSize===0||ee.dir||!S||S.length===0)&&(ee.base64=!1,ee.binary=!0,S="",ee.compression="STORE",R="string");var ie=null;ie=S instanceof p||S instanceof c?S:v.isNode&&v.isStream(S)?new w(M,S):o.prepareContent(M,S,ee.binary,ee.optimizedBinaryString,ee.base64);var ge=new m(M,ie,ee);this.files[M]=ge}var a=n("./utf8"),o=n("./utils"),c=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),d=n("./defaults"),p=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),C=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var S=M.lastIndexOf("/");return 0<S?M.substring(0,S):""},x=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},k=function(M,S){return S=S!==void 0?S:d.createFolders,M=x(M),this.files[M]||s.call(this,M,null,{dir:!0,createFolders:S}),this.files[M]};function P(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var S,B,D;for(S in this.files)D=this.files[S],(B=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&M(B,D)},filter:function(M){var S=[];return this.forEach(function(B,D){M(B,D)&&S.push(D)}),S},file:function(M,S,B){if(arguments.length!==1)return M=this.root+M,s.call(this,M,S,B),this;if(P(M)){var D=M;return this.filter(function(ee,ue){return!ue.dir&&D.test(ee)})}var R=this.files[this.root+M];return R&&!R.dir?R:null},folder:function(M){if(!M)return this;if(P(M))return this.filter(function(R,ee){return ee.dir&&M.test(R)});var S=this.root+M,B=k.call(this,S),D=this.clone();return D.root=B.name,D},remove:function(M){M=this.root+M;var S=this.files[M];if(S||(M.slice(-1)!=="/"&&(M+="/"),S=this.files[M]),S&&!S.dir)delete this.files[M];else for(var B=this.filter(function(R,ee){return ee.name.slice(0,M.length)===M}),D=0;D<B.length;D++)delete this.files[B[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var S,B={};try{if((B=o.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");o.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var D=B.comment||this.comment||"";S=g.generateWorker(this,B,D)}catch(R){(S=new c("error")).error(R)}return new h(S,B.type||"string",B.mimeType)},generateAsync:function(M,S){return this.generateInternalStream(M).accumulate(S)},generateNodeStream:function(M,S){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(S)}};r.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),h=o.charCodeAt(1),d=o.charCodeAt(2),p=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===c&&this.data[m+1]===h&&this.data[m+2]===d&&this.data[m+3]===p)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),h=o.charCodeAt(1),d=o.charCodeAt(2),p=o.charCodeAt(3),m=this.readData(4);return c===m[0]&&h===m[1]&&d===m[2]&&p===m[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,h=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)h=(h<<8)+this.byteAt(c);return this.index+=o,h},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),c=n("./StringReader"),h=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(p){var m=s.getTypeOf(p);return s.checkSupport(m),m!=="string"||a.uint8array?m==="nodebuffer"?new h(p):a.uint8array?new d(s.transformTo("uint8array",p)):new o(s.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,a),o.prototype.processChunk=function(c){if(c){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+c.data.length}a.prototype.processChunk.call(this,c)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){h.dataIsReady=!0,h.data=d,h.max=d&&d.length||0,h.type=s.getTypeOf(d),h.isPaused||h._tickAndRepeat()},function(d){h.error(d)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h)}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),c=n("../base64"),h=n("../support"),d=n("../external"),p=null;if(h.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,w){return new d.Promise(function(C,x){var k=[],P=v._internalType,j=v._outputType,M=v._mimeType;v.on("data",function(S,B){k.push(S),w&&w(B)}).on("error",function(S){k=[],x(S)}).on("end",function(){try{var S=function(B,D,R){switch(B){case"blob":return s.newBlob(s.transformTo("arraybuffer",D),R);case"base64":return c.encode(D);default:return s.transformTo(B,D)}}(j,function(B,D){var R,ee=0,ue=null,ie=0;for(R=0;R<D.length;R++)ie+=D[R].length;switch(B){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(ue=new Uint8Array(ie),R=0;R<D.length;R++)ue.set(D[R],ee),ee+=D[R].length;return ue;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+B+"'")}}(P,k),M);C(S)}catch(B){x(B)}k=[]}).resume()})}function g(v,w,C){var x=w;switch(w){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=w,this._mimeType=C,s.checkSupport(x),this._worker=v.pipe(new a(x)),v.lock()}catch(k){this._worker=new o("error"),this._worker.error(k)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,w){var C=this;return v==="data"?this._worker.on(v,function(x){w.call(C,x.data,x.meta)}):this._worker.on(v,function(){s.delay(w,arguments,C)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),c=n("./stream/GenericWorker"),h=new Array(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function m(){c.call(this,"utf-8 encode")}i.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var w,C,x,k,P,j=v.length,M=0;for(k=0;k<j;k++)(64512&(C=v.charCodeAt(k)))==55296&&k+1<j&&(64512&(x=v.charCodeAt(k+1)))==56320&&(C=65536+(C-55296<<10)+(x-56320),k++),M+=C<128?1:C<2048?2:C<65536?3:4;for(w=a.uint8array?new Uint8Array(M):new Array(M),k=P=0;P<M;k++)(64512&(C=v.charCodeAt(k)))==55296&&k+1<j&&(64512&(x=v.charCodeAt(k+1)))==56320&&(C=65536+(C-55296<<10)+(x-56320),k++),C<128?w[P++]=C:(C<2048?w[P++]=192|C>>>6:(C<65536?w[P++]=224|C>>>12:(w[P++]=240|C>>>18,w[P++]=128|C>>>12&63),w[P++]=128|C>>>6&63),w[P++]=128|63&C);return w}(g)},i.utf8decode=function(g){return a.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(v){var w,C,x,k,P=v.length,j=new Array(2*P);for(w=C=0;w<P;)if((x=v[w++])<128)j[C++]=x;else if(4<(k=h[x]))j[C++]=65533,w+=k-1;else{for(x&=k===2?31:k===3?15:7;1<k&&w<P;)x=x<<6|63&v[w++],k--;1<k?j[C++]=65533:x<65536?j[C++]=x:(x-=65536,j[C++]=55296|x>>10&1023,j[C++]=56320|1023&x)}return j.length!==C&&(j.subarray?j=j.subarray(0,C):j.length=C),s.applyFromCharCode(j)}(g=s.transformTo(a.uint8array?"uint8array":"array",g))},s.inherits(p,c),p.prototype.processChunk=function(g){var v=s.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var C=function(k,P){var j;for((P=P||k.length)>k.length&&(P=k.length),j=P-1;0<=j&&(192&k[j])==128;)j--;return j<0||j===0?P:j+h[k[j]]>P?j:P}(v),x=v;C!==v.length&&(a.uint8array?(x=v.subarray(0,C),this.leftOver=v.subarray(C,v.length)):(x=v.slice(0,C),this.leftOver=v.slice(C,v.length))),this.push({data:i.utf8decode(x),meta:g.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,s.inherits(m,c),m.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),c=n("./external");function h(w){return w}function d(w,C){for(var x=0;x<w.length;++x)C[x]=255&w.charCodeAt(x);return C}n("setimmediate"),i.newBlob=function(w,C){i.checkSupport("blob");try{return new Blob([w],{type:C})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(w),x.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(w,C,x){var k=[],P=0,j=w.length;if(j<=x)return String.fromCharCode.apply(null,w);for(;P<j;)C==="array"||C==="nodebuffer"?k.push(String.fromCharCode.apply(null,w.slice(P,Math.min(P+x,j)))):k.push(String.fromCharCode.apply(null,w.subarray(P,Math.min(P+x,j)))),P+=x;return k.join("")},stringifyByChar:function(w){for(var C="",x=0;x<w.length;x++)C+=String.fromCharCode(w[x]);return C},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(w){var C=65536,x=i.getTypeOf(w),k=!0;if(x==="uint8array"?k=p.applyCanBeUsed.uint8array:x==="nodebuffer"&&(k=p.applyCanBeUsed.nodebuffer),k)for(;1<C;)try{return p.stringifyByChunk(w,x,C)}catch{C=Math.floor(C/2)}return p.stringifyByChar(w)}function g(w,C){for(var x=0;x<w.length;x++)C[x]=w[x];return C}i.applyFromCharCode=m;var v={};v.string={string:h,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return d(w,new Uint8Array(w.length))},nodebuffer:function(w){return d(w,o.allocBuffer(w.length))}},v.array={string:m,array:h,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(w)}},v.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:h,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:h,nodebuffer:function(w){return o.newBufferFrom(w)}},v.nodebuffer={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:h},i.transformTo=function(w,C){if(C=C||"",!w)return C;i.checkSupport(w);var x=i.getTypeOf(C);return v[x][w](C)},i.resolve=function(w){for(var C=w.split("/"),x=[],k=0;k<C.length;k++){var P=C[k];P==="."||P===""&&k!==0&&k!==C.length-1||(P===".."?x.pop():x.push(P))}return x.join("/")},i.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(w)?"nodebuffer":s.uint8array&&w instanceof Uint8Array?"uint8array":s.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(w){if(!s[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(w){var C,x,k="";for(x=0;x<(w||"").length;x++)k+="\\x"+((C=w.charCodeAt(x))<16?"0":"")+C.toString(16).toUpperCase();return k},i.delay=function(w,C,x){setImmediate(function(){w.apply(x||null,C||[])})},i.inherits=function(w,C){function x(){}x.prototype=C.prototype,w.prototype=new x},i.extend=function(){var w,C,x={};for(w=0;w<arguments.length;w++)for(C in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],C)&&x[C]===void 0&&(x[C]=arguments[w][C]);return x},i.prepareContent=function(w,C,x,k,P){return c.Promise.resolve(C).then(function(j){return s.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new c.Promise(function(M,S){var B=new FileReader;B.onload=function(D){M(D.target.result)},B.onerror=function(D){S(D.target.error)},B.readAsArrayBuffer(j)}):j}).then(function(j){var M=i.getTypeOf(j);return M?(M==="arraybuffer"?j=i.transformTo("uint8array",j):M==="string"&&(P?j=a.decode(j):x&&k!==!0&&(j=function(S){return d(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))}(j))),j):c.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),c=n("./zipEntry"),h=n("./support");function d(p){this.files=[],this.loadOptions=p}d.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(m)+", expected "+a.pretty(p)+")")}},isSignature:function(p,m){var g=this.reader.index;this.reader.setIndex(p);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=h.uint8array?"uint8array":"array",g=a.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,g,v=this.zip64EndOfCentralSize-44;0<v;)p=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),c=n("./crc32"),h=n("./utf8"),d=n("./compressions"),p=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(C){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===C)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,w,C,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),w=g.readInt(2),C=g.readData(w),this.extraFields[v]={id:v,length:w,value:C};g.setIndex(x)},handleUTF8:function(){var g=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var x=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=s(g.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:h.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=s(g.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:h.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(v,w,C){this.name=v,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=w,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),c=n("./utf8"),h=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(v){var w=null,C="string";try{if(!v)throw new Error("No output type specified.");var x=(C=v.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),w=this._decompressWorker();var k=!this._dataBinary;k&&!x&&(w=w.pipe(new c.Utf8EncodeWorker)),!k&&x&&(w=w.pipe(new c.Utf8DecodeWorker))}catch(P){(w=new d("error")).error(P)}return new a(w,C,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof h&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new c.Utf8EncodeWorker)),h.createWorkerFrom(C,v,w)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<p.length;g++)s.prototype[p[g]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var h=0,d=new c(v),p=s.document.createTextNode("");d.observe(p,{characterData:!0}),a=function(){p.data=h=++h%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var w=s.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var m=new s.MessageChannel;m.port1.onmessage=v,a=function(){m.port2.postMessage(0)}}var g=[];function v(){var w,C;o=!0;for(var x=g.length;x;){for(C=g,g=[],w=-1;++w<x;)C[w]();x=g.length}o=!1}r.exports=function(w){g.push(w)!==1||o||a()}}).call(this,typeof Qa<"u"?Qa:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},c=["REJECTED"],h=["FULFILLED"],d=["PENDING"];function p(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==a&&w(this,x)}function m(x,k,P){this.promise=x,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function g(x,k,P){s(function(){var j;try{j=k(P)}catch(M){return o.reject(x,M)}j===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,j)})}function v(x){var k=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof k=="function")return function(){k.apply(x,arguments)}}function w(x,k){var P=!1;function j(B){P||(P=!0,o.reject(x,B))}function M(B){P||(P=!0,o.resolve(x,B))}var S=C(function(){k(M,j)});S.status==="error"&&j(S.value)}function C(x,k){var P={};try{P.value=x(k),P.status="success"}catch(j){P.status="error",P.value=j}return P}(r.exports=p).prototype.finally=function(x){if(typeof x!="function")return this;var k=this.constructor;return this.then(function(P){return k.resolve(x()).then(function(){return P})},function(P){return k.resolve(x()).then(function(){throw P})})},p.prototype.catch=function(x){return this.then(null,x)},p.prototype.then=function(x,k){if(typeof x!="function"&&this.state===h||typeof k!="function"&&this.state===c)return this;var P=new this.constructor(a);return this.state!==d?g(P,this.state===h?x:k,this.outcome):this.queue.push(new m(P,x,k)),P},m.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){o.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},o.resolve=function(x,k){var P=C(v,k);if(P.status==="error")return o.reject(x,P.value);var j=P.value;if(j)w(x,j);else{x.state=h,x.outcome=k;for(var M=-1,S=x.queue.length;++M<S;)x.queue[M].callFulfilled(k)}return x},o.reject=function(x,k){x.state=c,x.outcome=k;for(var P=-1,j=x.queue.length;++P<j;)x.queue[P].callRejected(k);return x},p.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},p.reject=function(x){var k=new this(a);return o.reject(k,x)},p.all=function(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=x.length,j=!1;if(!P)return this.resolve([]);for(var M=new Array(P),S=0,B=-1,D=new this(a);++B<P;)R(x[B],B);return D;function R(ee,ue){k.resolve(ee).then(function(ie){M[ue]=ie,++S!==P||j||(j=!0,o.resolve(D,M))},function(ie){j||(j=!0,o.reject(D,ie))})}},p.race=function(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=x.length,j=!1;if(!P)return this.resolve([]);for(var M=-1,S=new this(a);++M<P;)B=x[M],k.resolve(B).then(function(D){j||(j=!0,o.resolve(S,D))},function(D){j||(j=!0,o.reject(S,D))});var B;return S}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/messages"),h=n("./zlib/zstream"),d=Object.prototype.toString,p=0,m=-1,g=0,v=8;function w(x){if(!(this instanceof w))return new w(x);this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var P=s.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(P!==p)throw new Error(c[P]);if(k.header&&s.deflateSetHeader(this.strm,k.header),k.dictionary){var j;if(j=typeof k.dictionary=="string"?o.string2buf(k.dictionary):d.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(P=s.deflateSetDictionary(this.strm,j))!==p)throw new Error(c[P]);this._dict_set=!0}}function C(x,k){var P=new w(k);if(P.push(x,!0),P.err)throw P.msg||c[P.err];return P.result}w.prototype.push=function(x,k){var P,j,M=this.strm,S=this.options.chunkSize;if(this.ended)return!1;j=k===~~k?k:k===!0?4:0,typeof x=="string"?M.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?M.input=new Uint8Array(x):M.input=x,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new a.Buf8(S),M.next_out=0,M.avail_out=S),(P=s.deflate(M,j))!==1&&P!==p)return this.onEnd(P),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(M.output,M.next_out))):this.onData(a.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&P!==1);return j===4?(P=s.deflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===p):j!==2||(this.onEnd(p),!(M.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=w,i.deflate=C,i.deflateRaw=function(x,k){return(k=k||{}).raw=!0,C(x,k)},i.gzip=function(x,k){return(k=k||{}).gzip=!0,C(x,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/constants"),h=n("./zlib/messages"),d=n("./zlib/zstream"),p=n("./zlib/gzheader"),m=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},w||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||w&&w.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,C.windowBits);if(x!==c.Z_OK)throw new Error(h[x]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function v(w,C){var x=new g(C);if(x.push(w,!0),x.err)throw x.msg||h[x.err];return x.result}g.prototype.push=function(w,C){var x,k,P,j,M,S,B=this.strm,D=this.options.chunkSize,R=this.options.dictionary,ee=!1;if(this.ended)return!1;k=C===~~C?C:C===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof w=="string"?B.input=o.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?B.input=new Uint8Array(w):B.input=w,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new a.Buf8(D),B.next_out=0,B.avail_out=D),(x=s.inflate(B,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&R&&(S=typeof R=="string"?o.string2buf(R):m.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,x=s.inflateSetDictionary(this.strm,S)),x===c.Z_BUF_ERROR&&ee===!0&&(x=c.Z_OK,ee=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&x!==c.Z_STREAM_END&&(B.avail_in!==0||k!==c.Z_FINISH&&k!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=o.utf8border(B.output,B.next_out),j=B.next_out-P,M=o.buf2string(B.output,P),B.next_out=j,B.avail_out=D-j,j&&a.arraySet(B.output,B.output,P,j,0),this.onData(M)):this.onData(a.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(ee=!0)}while((0<B.avail_in||B.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(k=c.Z_FINISH),k===c.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):k!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(B.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Inflate=g,i.inflate=v,i.inflateRaw=function(w,C){return(C=C||{}).raw=!0,v(w,C)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var p in d)d.hasOwnProperty(p)&&(c[p]=d[p])}}return c},i.shrinkBuf=function(c,h){return c.length===h?c:c.subarray?c.subarray(0,h):(c.length=h,c)};var a={arraySet:function(c,h,d,p,m){if(h.subarray&&c.subarray)c.set(h.subarray(d,d+p),m);else for(var g=0;g<p;g++)c[m+g]=h[d+g]},flattenChunks:function(c){var h,d,p,m,g,v;for(h=p=0,d=c.length;h<d;h++)p+=c[h].length;for(v=new Uint8Array(p),h=m=0,d=c.length;h<d;h++)g=c[h],v.set(g,m),m+=g.length;return v}},o={arraySet:function(c,h,d,p,m){for(var g=0;g<p;g++)c[m+g]=h[d+g]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function d(p,m){if(m<65537&&(p.subarray&&o||!p.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(p,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(p[v]);return g}c[254]=c[254]=1,i.string2buf=function(p){var m,g,v,w,C,x=p.length,k=0;for(w=0;w<x;w++)(64512&(g=p.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=p.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),k+=g<128?1:g<2048?2:g<65536?3:4;for(m=new s.Buf8(k),w=C=0;C<k;w++)(64512&(g=p.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=p.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),g<128?m[C++]=g:(g<2048?m[C++]=192|g>>>6:(g<65536?m[C++]=224|g>>>12:(m[C++]=240|g>>>18,m[C++]=128|g>>>12&63),m[C++]=128|g>>>6&63),m[C++]=128|63&g);return m},i.buf2binstring=function(p){return d(p,p.length)},i.binstring2buf=function(p){for(var m=new s.Buf8(p.length),g=0,v=m.length;g<v;g++)m[g]=p.charCodeAt(g);return m},i.buf2string=function(p,m){var g,v,w,C,x=m||p.length,k=new Array(2*x);for(g=v=0;g<x;)if((w=p[g++])<128)k[v++]=w;else if(4<(C=c[w]))k[v++]=65533,g+=C-1;else{for(w&=C===2?31:C===3?15:7;1<C&&g<x;)w=w<<6|63&p[g++],C--;1<C?k[v++]=65533:w<65536?k[v++]=w:(w-=65536,k[v++]=55296|w>>10&1023,k[v++]=56320|1023&w)}return d(k,v)},i.utf8border=function(p,m){var g;for((m=m||p.length)>p.length&&(m=p.length),g=m-1;0<=g&&(192&p[g])==128;)g--;return g<0||g===0?m:g+c[p[g]]>m?g:m}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,o,c){for(var h=65535&s|0,d=s>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;d=d+(h=h+a[c++]|0)|0,--p;);h%=65521,d%=65521}return h|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();r.exports=function(a,o,c,h){var d=s,p=h+c;a^=-1;for(var m=h;m<p;m++)a=a>>>8^d[255&(a^o[m])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),o=n("./trees"),c=n("./adler32"),h=n("./crc32"),d=n("./messages"),p=0,m=4,g=0,v=-2,w=-1,C=4,x=2,k=8,P=9,j=286,M=30,S=19,B=2*j+1,D=15,R=3,ee=258,ue=ee+R+1,ie=42,ge=113,H=1,ye=2,Ae=3,we=4;function Be(q,Ye){return q.msg=d[Ye],Ye}function xe(q){return(q<<1)-(4<q?9:0)}function Le(q){for(var Ye=q.length;0<=--Ye;)q[Ye]=0}function Ce(q){var Ye=q.state,se=Ye.pending;se>q.avail_out&&(se=q.avail_out),se!==0&&(a.arraySet(q.output,Ye.pending_buf,Ye.pending_out,se,q.next_out),q.next_out+=se,Ye.pending_out+=se,q.total_out+=se,q.avail_out-=se,Ye.pending-=se,Ye.pending===0&&(Ye.pending_out=0))}function Re(q,Ye){o._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,Ye),q.block_start=q.strstart,Ce(q.strm)}function it(q,Ye){q.pending_buf[q.pending++]=Ye}function nt(q,Ye){q.pending_buf[q.pending++]=Ye>>>8&255,q.pending_buf[q.pending++]=255&Ye}function Ue(q,Ye){var se,L,I=q.max_chain_length,Q=q.strstart,he=q.prev_length,ve=q.nice_match,me=q.strstart>q.w_size-ue?q.strstart-(q.w_size-ue):0,Me=q.window,Je=q.w_mask,De=q.prev,l=q.strstart+ee,f=Me[Q+he-1],b=Me[Q+he];q.prev_length>=q.good_match&&(I>>=2),ve>q.lookahead&&(ve=q.lookahead);do if(Me[(se=Ye)+he]===b&&Me[se+he-1]===f&&Me[se]===Me[Q]&&Me[++se]===Me[Q+1]){Q+=2,se++;do;while(Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Me[++Q]===Me[++se]&&Q<l);if(L=ee-(l-Q),Q=l-ee,he<L){if(q.match_start=Ye,ve<=(he=L))break;f=Me[Q+he-1],b=Me[Q+he]}}while((Ye=De[Ye&Je])>me&&--I!=0);return he<=q.lookahead?he:q.lookahead}function lt(q){var Ye,se,L,I,Q,he,ve,me,Me,Je,De=q.w_size;do{if(I=q.window_size-q.lookahead-q.strstart,q.strstart>=De+(De-ue)){for(a.arraySet(q.window,q.window,De,De,0),q.match_start-=De,q.strstart-=De,q.block_start-=De,Ye=se=q.hash_size;L=q.head[--Ye],q.head[Ye]=De<=L?L-De:0,--se;);for(Ye=se=De;L=q.prev[--Ye],q.prev[Ye]=De<=L?L-De:0,--se;);I+=De}if(q.strm.avail_in===0)break;if(he=q.strm,ve=q.window,me=q.strstart+q.lookahead,Me=I,Je=void 0,Je=he.avail_in,Me<Je&&(Je=Me),se=Je===0?0:(he.avail_in-=Je,a.arraySet(ve,he.input,he.next_in,Je,me),he.state.wrap===1?he.adler=c(he.adler,ve,Je,me):he.state.wrap===2&&(he.adler=h(he.adler,ve,Je,me)),he.next_in+=Je,he.total_in+=Je,Je),q.lookahead+=se,q.lookahead+q.insert>=R)for(Q=q.strstart-q.insert,q.ins_h=q.window[Q],q.ins_h=(q.ins_h<<q.hash_shift^q.window[Q+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[Q+R-1])&q.hash_mask,q.prev[Q&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=Q,Q++,q.insert--,!(q.lookahead+q.insert<R)););}while(q.lookahead<ue&&q.strm.avail_in!==0)}function de(q,Ye){for(var se,L;;){if(q.lookahead<ue){if(lt(q),q.lookahead<ue&&Ye===p)return H;if(q.lookahead===0)break}if(se=0,q.lookahead>=R&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,se=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),se!==0&&q.strstart-se<=q.w_size-ue&&(q.match_length=Ue(q,se)),q.match_length>=R)if(L=o._tr_tally(q,q.strstart-q.match_start,q.match_length-R),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=R){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,se=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else L=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(L&&(Re(q,!1),q.strm.avail_out===0))return H}return q.insert=q.strstart<R-1?q.strstart:R-1,Ye===m?(Re(q,!0),q.strm.avail_out===0?Ae:we):q.last_lit&&(Re(q,!1),q.strm.avail_out===0)?H:ye}function oe(q,Ye){for(var se,L,I;;){if(q.lookahead<ue){if(lt(q),q.lookahead<ue&&Ye===p)return H;if(q.lookahead===0)break}if(se=0,q.lookahead>=R&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,se=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=R-1,se!==0&&q.prev_length<q.max_lazy_match&&q.strstart-se<=q.w_size-ue&&(q.match_length=Ue(q,se),q.match_length<=5&&(q.strategy===1||q.match_length===R&&4096<q.strstart-q.match_start)&&(q.match_length=R-1)),q.prev_length>=R&&q.match_length<=q.prev_length){for(I=q.strstart+q.lookahead-R,L=o._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-R),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=I&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,se=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=R-1,q.strstart++,L&&(Re(q,!1),q.strm.avail_out===0))return H}else if(q.match_available){if((L=o._tr_tally(q,0,q.window[q.strstart-1]))&&Re(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return H}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(L=o._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<R-1?q.strstart:R-1,Ye===m?(Re(q,!0),q.strm.avail_out===0?Ae:we):q.last_lit&&(Re(q,!1),q.strm.avail_out===0)?H:ye}function We(q,Ye,se,L,I){this.good_length=q,this.max_lazy=Ye,this.nice_length=se,this.max_chain=L,this.func=I}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*B),this.dyn_dtree=new a.Buf16(2*(2*M+1)),this.bl_tree=new a.Buf16(2*(2*S+1)),Le(this.dyn_ltree),Le(this.dyn_dtree),Le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*j+1),Le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*j+1),Le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(q){var Ye;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=x,(Ye=q.state).pending=0,Ye.pending_out=0,Ye.wrap<0&&(Ye.wrap=-Ye.wrap),Ye.status=Ye.wrap?ie:ge,q.adler=Ye.wrap===2?0:1,Ye.last_flush=p,o._tr_init(Ye),g):Be(q,v)}function jt(q){var Ye=ht(q);return Ye===g&&function(se){se.window_size=2*se.w_size,Le(se.head),se.max_lazy_match=s[se.level].max_lazy,se.good_match=s[se.level].good_length,se.nice_match=s[se.level].nice_length,se.max_chain_length=s[se.level].max_chain,se.strstart=0,se.block_start=0,se.lookahead=0,se.insert=0,se.match_length=se.prev_length=R-1,se.match_available=0,se.ins_h=0}(q.state),Ye}function Ct(q,Ye,se,L,I,Q){if(!q)return v;var he=1;if(Ye===w&&(Ye=6),L<0?(he=0,L=-L):15<L&&(he=2,L-=16),I<1||P<I||se!==k||L<8||15<L||Ye<0||9<Ye||Q<0||C<Q)return Be(q,v);L===8&&(L=9);var ve=new Ne;return(q.state=ve).strm=q,ve.wrap=he,ve.gzhead=null,ve.w_bits=L,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=I+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+R-1)/R),ve.window=new a.Buf8(2*ve.w_size),ve.head=new a.Buf16(ve.hash_size),ve.prev=new a.Buf16(ve.w_size),ve.lit_bufsize=1<<I+6,ve.pending_buf_size=4*ve.lit_bufsize,ve.pending_buf=new a.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=Ye,ve.strategy=Q,ve.method=se,jt(q)}s=[new We(0,0,0,0,function(q,Ye){var se=65535;for(se>q.pending_buf_size-5&&(se=q.pending_buf_size-5);;){if(q.lookahead<=1){if(lt(q),q.lookahead===0&&Ye===p)return H;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var L=q.block_start+se;if((q.strstart===0||q.strstart>=L)&&(q.lookahead=q.strstart-L,q.strstart=L,Re(q,!1),q.strm.avail_out===0)||q.strstart-q.block_start>=q.w_size-ue&&(Re(q,!1),q.strm.avail_out===0))return H}return q.insert=0,Ye===m?(Re(q,!0),q.strm.avail_out===0?Ae:we):(q.strstart>q.block_start&&(Re(q,!1),q.strm.avail_out),H)}),new We(4,4,8,4,de),new We(4,5,16,8,de),new We(4,6,32,32,de),new We(4,4,16,16,oe),new We(8,16,32,32,oe),new We(8,16,128,128,oe),new We(8,32,128,256,oe),new We(32,128,258,1024,oe),new We(32,258,258,4096,oe)],i.deflateInit=function(q,Ye){return Ct(q,Ye,k,15,8,0)},i.deflateInit2=Ct,i.deflateReset=jt,i.deflateResetKeep=ht,i.deflateSetHeader=function(q,Ye){return q&&q.state?q.state.wrap!==2?v:(q.state.gzhead=Ye,g):v},i.deflate=function(q,Ye){var se,L,I,Q;if(!q||!q.state||5<Ye||Ye<0)return q?Be(q,v):v;if(L=q.state,!q.output||!q.input&&q.avail_in!==0||L.status===666&&Ye!==m)return Be(q,q.avail_out===0?-5:v);if(L.strm=q,se=L.last_flush,L.last_flush=Ye,L.status===ie)if(L.wrap===2)q.adler=0,it(L,31),it(L,139),it(L,8),L.gzhead?(it(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),it(L,255&L.gzhead.time),it(L,L.gzhead.time>>8&255),it(L,L.gzhead.time>>16&255),it(L,L.gzhead.time>>24&255),it(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),it(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&(it(L,255&L.gzhead.extra.length),it(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(q.adler=h(q.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):(it(L,0),it(L,0),it(L,0),it(L,0),it(L,0),it(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),it(L,3),L.status=ge);else{var he=k+(L.w_bits-8<<4)<<8;he|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(he|=32),he+=31-he%31,L.status=ge,nt(L,he),L.strstart!==0&&(nt(L,q.adler>>>16),nt(L,65535&q.adler)),q.adler=1}if(L.status===69)if(L.gzhead.extra){for(I=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>I&&(q.adler=h(q.adler,L.pending_buf,L.pending-I,I)),Ce(q),I=L.pending,L.pending!==L.pending_buf_size));)it(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>I&&(q.adler=h(q.adler,L.pending_buf,L.pending-I,I)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){I=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>I&&(q.adler=h(q.adler,L.pending_buf,L.pending-I,I)),Ce(q),I=L.pending,L.pending===L.pending_buf_size)){Q=1;break}Q=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,it(L,Q)}while(Q!==0);L.gzhead.hcrc&&L.pending>I&&(q.adler=h(q.adler,L.pending_buf,L.pending-I,I)),Q===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){I=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>I&&(q.adler=h(q.adler,L.pending_buf,L.pending-I,I)),Ce(q),I=L.pending,L.pending===L.pending_buf_size)){Q=1;break}Q=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,it(L,Q)}while(Q!==0);L.gzhead.hcrc&&L.pending>I&&(q.adler=h(q.adler,L.pending_buf,L.pending-I,I)),Q===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&Ce(q),L.pending+2<=L.pending_buf_size&&(it(L,255&q.adler),it(L,q.adler>>8&255),q.adler=0,L.status=ge)):L.status=ge),L.pending!==0){if(Ce(q),q.avail_out===0)return L.last_flush=-1,g}else if(q.avail_in===0&&xe(Ye)<=xe(se)&&Ye!==m)return Be(q,-5);if(L.status===666&&q.avail_in!==0)return Be(q,-5);if(q.avail_in!==0||L.lookahead!==0||Ye!==p&&L.status!==666){var ve=L.strategy===2?function(me,Me){for(var Je;;){if(me.lookahead===0&&(lt(me),me.lookahead===0)){if(Me===p)return H;break}if(me.match_length=0,Je=o._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++,Je&&(Re(me,!1),me.strm.avail_out===0))return H}return me.insert=0,Me===m?(Re(me,!0),me.strm.avail_out===0?Ae:we):me.last_lit&&(Re(me,!1),me.strm.avail_out===0)?H:ye}(L,Ye):L.strategy===3?function(me,Me){for(var Je,De,l,f,b=me.window;;){if(me.lookahead<=ee){if(lt(me),me.lookahead<=ee&&Me===p)return H;if(me.lookahead===0)break}if(me.match_length=0,me.lookahead>=R&&0<me.strstart&&(De=b[l=me.strstart-1])===b[++l]&&De===b[++l]&&De===b[++l]){f=me.strstart+ee;do;while(De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&l<f);me.match_length=ee-(f-l),me.match_length>me.lookahead&&(me.match_length=me.lookahead)}if(me.match_length>=R?(Je=o._tr_tally(me,1,me.match_length-R),me.lookahead-=me.match_length,me.strstart+=me.match_length,me.match_length=0):(Je=o._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++),Je&&(Re(me,!1),me.strm.avail_out===0))return H}return me.insert=0,Me===m?(Re(me,!0),me.strm.avail_out===0?Ae:we):me.last_lit&&(Re(me,!1),me.strm.avail_out===0)?H:ye}(L,Ye):s[L.level].func(L,Ye);if(ve!==Ae&&ve!==we||(L.status=666),ve===H||ve===Ae)return q.avail_out===0&&(L.last_flush=-1),g;if(ve===ye&&(Ye===1?o._tr_align(L):Ye!==5&&(o._tr_stored_block(L,0,0,!1),Ye===3&&(Le(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),Ce(q),q.avail_out===0))return L.last_flush=-1,g}return Ye!==m?g:L.wrap<=0?1:(L.wrap===2?(it(L,255&q.adler),it(L,q.adler>>8&255),it(L,q.adler>>16&255),it(L,q.adler>>24&255),it(L,255&q.total_in),it(L,q.total_in>>8&255),it(L,q.total_in>>16&255),it(L,q.total_in>>24&255)):(nt(L,q.adler>>>16),nt(L,65535&q.adler)),Ce(q),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?g:1)},i.deflateEnd=function(q){var Ye;return q&&q.state?(Ye=q.state.status)!==ie&&Ye!==69&&Ye!==73&&Ye!==91&&Ye!==103&&Ye!==ge&&Ye!==666?Be(q,v):(q.state=null,Ye===ge?Be(q,-3):g):v},i.deflateSetDictionary=function(q,Ye){var se,L,I,Q,he,ve,me,Me,Je=Ye.length;if(!q||!q.state||(Q=(se=q.state).wrap)===2||Q===1&&se.status!==ie||se.lookahead)return v;for(Q===1&&(q.adler=c(q.adler,Ye,Je,0)),se.wrap=0,Je>=se.w_size&&(Q===0&&(Le(se.head),se.strstart=0,se.block_start=0,se.insert=0),Me=new a.Buf8(se.w_size),a.arraySet(Me,Ye,Je-se.w_size,se.w_size,0),Ye=Me,Je=se.w_size),he=q.avail_in,ve=q.next_in,me=q.input,q.avail_in=Je,q.next_in=0,q.input=Ye,lt(se);se.lookahead>=R;){for(L=se.strstart,I=se.lookahead-(R-1);se.ins_h=(se.ins_h<<se.hash_shift^se.window[L+R-1])&se.hash_mask,se.prev[L&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=L,L++,--I;);se.strstart=L,se.lookahead=R-1,lt(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=R-1,se.match_available=0,q.next_in=ve,q.input=me,q.avail_in=he,se.wrap=Q,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var o,c,h,d,p,m,g,v,w,C,x,k,P,j,M,S,B,D,R,ee,ue,ie,ge,H,ye;o=s.state,c=s.next_in,H=s.input,h=c+(s.avail_in-5),d=s.next_out,ye=s.output,p=d-(a-s.avail_out),m=d+(s.avail_out-257),g=o.dmax,v=o.wsize,w=o.whave,C=o.wnext,x=o.window,k=o.hold,P=o.bits,j=o.lencode,M=o.distcode,S=(1<<o.lenbits)-1,B=(1<<o.distbits)-1;e:do{P<15&&(k+=H[c++]<<P,P+=8,k+=H[c++]<<P,P+=8),D=j[k&S];t:for(;;){if(k>>>=R=D>>>24,P-=R,(R=D>>>16&255)===0)ye[d++]=65535&D;else{if(!(16&R)){if(!(64&R)){D=j[(65535&D)+(k&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}ee=65535&D,(R&=15)&&(P<R&&(k+=H[c++]<<P,P+=8),ee+=k&(1<<R)-1,k>>>=R,P-=R),P<15&&(k+=H[c++]<<P,P+=8,k+=H[c++]<<P,P+=8),D=M[k&B];n:for(;;){if(k>>>=R=D>>>24,P-=R,!(16&(R=D>>>16&255))){if(!(64&R)){D=M[(65535&D)+(k&(1<<R)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(ue=65535&D,P<(R&=15)&&(k+=H[c++]<<P,(P+=8)<R&&(k+=H[c++]<<P,P+=8)),g<(ue+=k&(1<<R)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(k>>>=R,P-=R,(R=d-p)<ue){if(w<(R=ue-R)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(ge=x,(ie=0)===C){if(ie+=v-R,R<ee){for(ee-=R;ye[d++]=x[ie++],--R;);ie=d-ue,ge=ye}}else if(C<R){if(ie+=v+C-R,(R-=C)<ee){for(ee-=R;ye[d++]=x[ie++],--R;);if(ie=0,C<ee){for(ee-=R=C;ye[d++]=x[ie++],--R;);ie=d-ue,ge=ye}}}else if(ie+=C-R,R<ee){for(ee-=R;ye[d++]=x[ie++],--R;);ie=d-ue,ge=ye}for(;2<ee;)ye[d++]=ge[ie++],ye[d++]=ge[ie++],ye[d++]=ge[ie++],ee-=3;ee&&(ye[d++]=ge[ie++],1<ee&&(ye[d++]=ge[ie++]))}else{for(ie=d-ue;ye[d++]=ye[ie++],ye[d++]=ye[ie++],ye[d++]=ye[ie++],2<(ee-=3););ee&&(ye[d++]=ye[ie++],1<ee&&(ye[d++]=ye[ie++]))}break}}break}}while(c<h&&d<m);c-=ee=P>>3,k&=(1<<(P-=ee<<3))-1,s.next_in=c,s.next_out=d,s.avail_in=c<h?h-c+5:5-(c-h),s.avail_out=d<m?m-d+257:257-(d-m),o.hold=k,o.bits=P}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),c=n("./inffast"),h=n("./inftrees"),d=1,p=2,m=0,g=-2,v=1,w=852,C=592;function x(ie){return(ie>>>24&255)+(ie>>>8&65280)+((65280&ie)<<8)+((255&ie)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function P(ie){var ge;return ie&&ie.state?(ge=ie.state,ie.total_in=ie.total_out=ge.total=0,ie.msg="",ge.wrap&&(ie.adler=1&ge.wrap),ge.mode=v,ge.last=0,ge.havedict=0,ge.dmax=32768,ge.head=null,ge.hold=0,ge.bits=0,ge.lencode=ge.lendyn=new s.Buf32(w),ge.distcode=ge.distdyn=new s.Buf32(C),ge.sane=1,ge.back=-1,m):g}function j(ie){var ge;return ie&&ie.state?((ge=ie.state).wsize=0,ge.whave=0,ge.wnext=0,P(ie)):g}function M(ie,ge){var H,ye;return ie&&ie.state?(ye=ie.state,ge<0?(H=0,ge=-ge):(H=1+(ge>>4),ge<48&&(ge&=15)),ge&&(ge<8||15<ge)?g:(ye.window!==null&&ye.wbits!==ge&&(ye.window=null),ye.wrap=H,ye.wbits=ge,j(ie))):g}function S(ie,ge){var H,ye;return ie?(ye=new k,(ie.state=ye).window=null,(H=M(ie,ge))!==m&&(ie.state=null),H):g}var B,D,R=!0;function ee(ie){if(R){var ge;for(B=new s.Buf32(512),D=new s.Buf32(32),ge=0;ge<144;)ie.lens[ge++]=8;for(;ge<256;)ie.lens[ge++]=9;for(;ge<280;)ie.lens[ge++]=7;for(;ge<288;)ie.lens[ge++]=8;for(h(d,ie.lens,0,288,B,0,ie.work,{bits:9}),ge=0;ge<32;)ie.lens[ge++]=5;h(p,ie.lens,0,32,D,0,ie.work,{bits:5}),R=!1}ie.lencode=B,ie.lenbits=9,ie.distcode=D,ie.distbits=5}function ue(ie,ge,H,ye){var Ae,we=ie.state;return we.window===null&&(we.wsize=1<<we.wbits,we.wnext=0,we.whave=0,we.window=new s.Buf8(we.wsize)),ye>=we.wsize?(s.arraySet(we.window,ge,H-we.wsize,we.wsize,0),we.wnext=0,we.whave=we.wsize):(ye<(Ae=we.wsize-we.wnext)&&(Ae=ye),s.arraySet(we.window,ge,H-ye,Ae,we.wnext),(ye-=Ae)?(s.arraySet(we.window,ge,H-ye,ye,0),we.wnext=ye,we.whave=we.wsize):(we.wnext+=Ae,we.wnext===we.wsize&&(we.wnext=0),we.whave<we.wsize&&(we.whave+=Ae))),0}i.inflateReset=j,i.inflateReset2=M,i.inflateResetKeep=P,i.inflateInit=function(ie){return S(ie,15)},i.inflateInit2=S,i.inflate=function(ie,ge){var H,ye,Ae,we,Be,xe,Le,Ce,Re,it,nt,Ue,lt,de,oe,We,Ne,ht,jt,Ct,q,Ye,se,L,I=0,Q=new s.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ie||!ie.state||!ie.output||!ie.input&&ie.avail_in!==0)return g;(H=ie.state).mode===12&&(H.mode=13),Be=ie.next_out,Ae=ie.output,Le=ie.avail_out,we=ie.next_in,ye=ie.input,xe=ie.avail_in,Ce=H.hold,Re=H.bits,it=xe,nt=Le,Ye=m;e:for(;;)switch(H.mode){case v:if(H.wrap===0){H.mode=13;break}for(;Re<16;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(2&H.wrap&&Ce===35615){Q[H.check=0]=255&Ce,Q[1]=Ce>>>8&255,H.check=o(H.check,Q,2,0),Re=Ce=0,H.mode=2;break}if(H.flags=0,H.head&&(H.head.done=!1),!(1&H.wrap)||(((255&Ce)<<8)+(Ce>>8))%31){ie.msg="incorrect header check",H.mode=30;break}if((15&Ce)!=8){ie.msg="unknown compression method",H.mode=30;break}if(Re-=4,q=8+(15&(Ce>>>=4)),H.wbits===0)H.wbits=q;else if(q>H.wbits){ie.msg="invalid window size",H.mode=30;break}H.dmax=1<<q,ie.adler=H.check=1,H.mode=512&Ce?10:12,Re=Ce=0;break;case 2:for(;Re<16;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(H.flags=Ce,(255&H.flags)!=8){ie.msg="unknown compression method",H.mode=30;break}if(57344&H.flags){ie.msg="unknown header flags set",H.mode=30;break}H.head&&(H.head.text=Ce>>8&1),512&H.flags&&(Q[0]=255&Ce,Q[1]=Ce>>>8&255,H.check=o(H.check,Q,2,0)),Re=Ce=0,H.mode=3;case 3:for(;Re<32;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}H.head&&(H.head.time=Ce),512&H.flags&&(Q[0]=255&Ce,Q[1]=Ce>>>8&255,Q[2]=Ce>>>16&255,Q[3]=Ce>>>24&255,H.check=o(H.check,Q,4,0)),Re=Ce=0,H.mode=4;case 4:for(;Re<16;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}H.head&&(H.head.xflags=255&Ce,H.head.os=Ce>>8),512&H.flags&&(Q[0]=255&Ce,Q[1]=Ce>>>8&255,H.check=o(H.check,Q,2,0)),Re=Ce=0,H.mode=5;case 5:if(1024&H.flags){for(;Re<16;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}H.length=Ce,H.head&&(H.head.extra_len=Ce),512&H.flags&&(Q[0]=255&Ce,Q[1]=Ce>>>8&255,H.check=o(H.check,Q,2,0)),Re=Ce=0}else H.head&&(H.head.extra=null);H.mode=6;case 6:if(1024&H.flags&&(xe<(Ue=H.length)&&(Ue=xe),Ue&&(H.head&&(q=H.head.extra_len-H.length,H.head.extra||(H.head.extra=new Array(H.head.extra_len)),s.arraySet(H.head.extra,ye,we,Ue,q)),512&H.flags&&(H.check=o(H.check,ye,Ue,we)),xe-=Ue,we+=Ue,H.length-=Ue),H.length))break e;H.length=0,H.mode=7;case 7:if(2048&H.flags){if(xe===0)break e;for(Ue=0;q=ye[we+Ue++],H.head&&q&&H.length<65536&&(H.head.name+=String.fromCharCode(q)),q&&Ue<xe;);if(512&H.flags&&(H.check=o(H.check,ye,Ue,we)),xe-=Ue,we+=Ue,q)break e}else H.head&&(H.head.name=null);H.length=0,H.mode=8;case 8:if(4096&H.flags){if(xe===0)break e;for(Ue=0;q=ye[we+Ue++],H.head&&q&&H.length<65536&&(H.head.comment+=String.fromCharCode(q)),q&&Ue<xe;);if(512&H.flags&&(H.check=o(H.check,ye,Ue,we)),xe-=Ue,we+=Ue,q)break e}else H.head&&(H.head.comment=null);H.mode=9;case 9:if(512&H.flags){for(;Re<16;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(Ce!==(65535&H.check)){ie.msg="header crc mismatch",H.mode=30;break}Re=Ce=0}H.head&&(H.head.hcrc=H.flags>>9&1,H.head.done=!0),ie.adler=H.check=0,H.mode=12;break;case 10:for(;Re<32;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}ie.adler=H.check=x(Ce),Re=Ce=0,H.mode=11;case 11:if(H.havedict===0)return ie.next_out=Be,ie.avail_out=Le,ie.next_in=we,ie.avail_in=xe,H.hold=Ce,H.bits=Re,2;ie.adler=H.check=1,H.mode=12;case 12:if(ge===5||ge===6)break e;case 13:if(H.last){Ce>>>=7&Re,Re-=7&Re,H.mode=27;break}for(;Re<3;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}switch(H.last=1&Ce,Re-=1,3&(Ce>>>=1)){case 0:H.mode=14;break;case 1:if(ee(H),H.mode=20,ge!==6)break;Ce>>>=2,Re-=2;break e;case 2:H.mode=17;break;case 3:ie.msg="invalid block type",H.mode=30}Ce>>>=2,Re-=2;break;case 14:for(Ce>>>=7&Re,Re-=7&Re;Re<32;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if((65535&Ce)!=(Ce>>>16^65535)){ie.msg="invalid stored block lengths",H.mode=30;break}if(H.length=65535&Ce,Re=Ce=0,H.mode=15,ge===6)break e;case 15:H.mode=16;case 16:if(Ue=H.length){if(xe<Ue&&(Ue=xe),Le<Ue&&(Ue=Le),Ue===0)break e;s.arraySet(Ae,ye,we,Ue,Be),xe-=Ue,we+=Ue,Le-=Ue,Be+=Ue,H.length-=Ue;break}H.mode=12;break;case 17:for(;Re<14;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(H.nlen=257+(31&Ce),Ce>>>=5,Re-=5,H.ndist=1+(31&Ce),Ce>>>=5,Re-=5,H.ncode=4+(15&Ce),Ce>>>=4,Re-=4,286<H.nlen||30<H.ndist){ie.msg="too many length or distance symbols",H.mode=30;break}H.have=0,H.mode=18;case 18:for(;H.have<H.ncode;){for(;Re<3;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}H.lens[he[H.have++]]=7&Ce,Ce>>>=3,Re-=3}for(;H.have<19;)H.lens[he[H.have++]]=0;if(H.lencode=H.lendyn,H.lenbits=7,se={bits:H.lenbits},Ye=h(0,H.lens,0,19,H.lencode,0,H.work,se),H.lenbits=se.bits,Ye){ie.msg="invalid code lengths set",H.mode=30;break}H.have=0,H.mode=19;case 19:for(;H.have<H.nlen+H.ndist;){for(;We=(I=H.lencode[Ce&(1<<H.lenbits)-1])>>>16&255,Ne=65535&I,!((oe=I>>>24)<=Re);){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(Ne<16)Ce>>>=oe,Re-=oe,H.lens[H.have++]=Ne;else{if(Ne===16){for(L=oe+2;Re<L;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(Ce>>>=oe,Re-=oe,H.have===0){ie.msg="invalid bit length repeat",H.mode=30;break}q=H.lens[H.have-1],Ue=3+(3&Ce),Ce>>>=2,Re-=2}else if(Ne===17){for(L=oe+3;Re<L;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}Re-=oe,q=0,Ue=3+(7&(Ce>>>=oe)),Ce>>>=3,Re-=3}else{for(L=oe+7;Re<L;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}Re-=oe,q=0,Ue=11+(127&(Ce>>>=oe)),Ce>>>=7,Re-=7}if(H.have+Ue>H.nlen+H.ndist){ie.msg="invalid bit length repeat",H.mode=30;break}for(;Ue--;)H.lens[H.have++]=q}}if(H.mode===30)break;if(H.lens[256]===0){ie.msg="invalid code -- missing end-of-block",H.mode=30;break}if(H.lenbits=9,se={bits:H.lenbits},Ye=h(d,H.lens,0,H.nlen,H.lencode,0,H.work,se),H.lenbits=se.bits,Ye){ie.msg="invalid literal/lengths set",H.mode=30;break}if(H.distbits=6,H.distcode=H.distdyn,se={bits:H.distbits},Ye=h(p,H.lens,H.nlen,H.ndist,H.distcode,0,H.work,se),H.distbits=se.bits,Ye){ie.msg="invalid distances set",H.mode=30;break}if(H.mode=20,ge===6)break e;case 20:H.mode=21;case 21:if(6<=xe&&258<=Le){ie.next_out=Be,ie.avail_out=Le,ie.next_in=we,ie.avail_in=xe,H.hold=Ce,H.bits=Re,c(ie,nt),Be=ie.next_out,Ae=ie.output,Le=ie.avail_out,we=ie.next_in,ye=ie.input,xe=ie.avail_in,Ce=H.hold,Re=H.bits,H.mode===12&&(H.back=-1);break}for(H.back=0;We=(I=H.lencode[Ce&(1<<H.lenbits)-1])>>>16&255,Ne=65535&I,!((oe=I>>>24)<=Re);){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(We&&!(240&We)){for(ht=oe,jt=We,Ct=Ne;We=(I=H.lencode[Ct+((Ce&(1<<ht+jt)-1)>>ht)])>>>16&255,Ne=65535&I,!(ht+(oe=I>>>24)<=Re);){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}Ce>>>=ht,Re-=ht,H.back+=ht}if(Ce>>>=oe,Re-=oe,H.back+=oe,H.length=Ne,We===0){H.mode=26;break}if(32&We){H.back=-1,H.mode=12;break}if(64&We){ie.msg="invalid literal/length code",H.mode=30;break}H.extra=15&We,H.mode=22;case 22:if(H.extra){for(L=H.extra;Re<L;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}H.length+=Ce&(1<<H.extra)-1,Ce>>>=H.extra,Re-=H.extra,H.back+=H.extra}H.was=H.length,H.mode=23;case 23:for(;We=(I=H.distcode[Ce&(1<<H.distbits)-1])>>>16&255,Ne=65535&I,!((oe=I>>>24)<=Re);){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(!(240&We)){for(ht=oe,jt=We,Ct=Ne;We=(I=H.distcode[Ct+((Ce&(1<<ht+jt)-1)>>ht)])>>>16&255,Ne=65535&I,!(ht+(oe=I>>>24)<=Re);){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}Ce>>>=ht,Re-=ht,H.back+=ht}if(Ce>>>=oe,Re-=oe,H.back+=oe,64&We){ie.msg="invalid distance code",H.mode=30;break}H.offset=Ne,H.extra=15&We,H.mode=24;case 24:if(H.extra){for(L=H.extra;Re<L;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}H.offset+=Ce&(1<<H.extra)-1,Ce>>>=H.extra,Re-=H.extra,H.back+=H.extra}if(H.offset>H.dmax){ie.msg="invalid distance too far back",H.mode=30;break}H.mode=25;case 25:if(Le===0)break e;if(Ue=nt-Le,H.offset>Ue){if((Ue=H.offset-Ue)>H.whave&&H.sane){ie.msg="invalid distance too far back",H.mode=30;break}lt=Ue>H.wnext?(Ue-=H.wnext,H.wsize-Ue):H.wnext-Ue,Ue>H.length&&(Ue=H.length),de=H.window}else de=Ae,lt=Be-H.offset,Ue=H.length;for(Le<Ue&&(Ue=Le),Le-=Ue,H.length-=Ue;Ae[Be++]=de[lt++],--Ue;);H.length===0&&(H.mode=21);break;case 26:if(Le===0)break e;Ae[Be++]=H.length,Le--,H.mode=21;break;case 27:if(H.wrap){for(;Re<32;){if(xe===0)break e;xe--,Ce|=ye[we++]<<Re,Re+=8}if(nt-=Le,ie.total_out+=nt,H.total+=nt,nt&&(ie.adler=H.check=H.flags?o(H.check,Ae,nt,Be-nt):a(H.check,Ae,nt,Be-nt)),nt=Le,(H.flags?Ce:x(Ce))!==H.check){ie.msg="incorrect data check",H.mode=30;break}Re=Ce=0}H.mode=28;case 28:if(H.wrap&&H.flags){for(;Re<32;){if(xe===0)break e;xe--,Ce+=ye[we++]<<Re,Re+=8}if(Ce!==(4294967295&H.total)){ie.msg="incorrect length check",H.mode=30;break}Re=Ce=0}H.mode=29;case 29:Ye=1;break e;case 30:Ye=-3;break e;case 31:return-4;case 32:default:return g}return ie.next_out=Be,ie.avail_out=Le,ie.next_in=we,ie.avail_in=xe,H.hold=Ce,H.bits=Re,(H.wsize||nt!==ie.avail_out&&H.mode<30&&(H.mode<27||ge!==4))&&ue(ie,ie.output,ie.next_out,nt-ie.avail_out)?(H.mode=31,-4):(it-=ie.avail_in,nt-=ie.avail_out,ie.total_in+=it,ie.total_out+=nt,H.total+=nt,H.wrap&&nt&&(ie.adler=H.check=H.flags?o(H.check,Ae,nt,ie.next_out-nt):a(H.check,Ae,nt,ie.next_out-nt)),ie.data_type=H.bits+(H.last?64:0)+(H.mode===12?128:0)+(H.mode===20||H.mode===15?256:0),(it==0&&nt===0||ge===4)&&Ye===m&&(Ye=-5),Ye)},i.inflateEnd=function(ie){if(!ie||!ie.state)return g;var ge=ie.state;return ge.window&&(ge.window=null),ie.state=null,m},i.inflateGetHeader=function(ie,ge){var H;return ie&&ie.state&&2&(H=ie.state).wrap?((H.head=ge).done=!1,m):g},i.inflateSetDictionary=function(ie,ge){var H,ye=ge.length;return ie&&ie.state?(H=ie.state).wrap!==0&&H.mode!==11?g:H.mode===11&&a(1,ge,ye,0)!==H.check?-3:ue(ie,ge,ye,ye)?(H.mode=31,-4):(H.havedict=1,m):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,p,m,g,v,w,C,x){var k,P,j,M,S,B,D,R,ee,ue=x.bits,ie=0,ge=0,H=0,ye=0,Ae=0,we=0,Be=0,xe=0,Le=0,Ce=0,Re=null,it=0,nt=new s.Buf16(16),Ue=new s.Buf16(16),lt=null,de=0;for(ie=0;ie<=15;ie++)nt[ie]=0;for(ge=0;ge<g;ge++)nt[p[m+ge]]++;for(Ae=ue,ye=15;1<=ye&&nt[ye]===0;ye--);if(ye<Ae&&(Ae=ye),ye===0)return v[w++]=20971520,v[w++]=20971520,x.bits=1,0;for(H=1;H<ye&&nt[H]===0;H++);for(Ae<H&&(Ae=H),ie=xe=1;ie<=15;ie++)if(xe<<=1,(xe-=nt[ie])<0)return-1;if(0<xe&&(d===0||ye!==1))return-1;for(Ue[1]=0,ie=1;ie<15;ie++)Ue[ie+1]=Ue[ie]+nt[ie];for(ge=0;ge<g;ge++)p[m+ge]!==0&&(C[Ue[p[m+ge]]++]=ge);if(B=d===0?(Re=lt=C,19):d===1?(Re=a,it-=257,lt=o,de-=257,256):(Re=c,lt=h,-1),ie=H,S=w,Be=ge=Ce=0,j=-1,M=(Le=1<<(we=Ae))-1,d===1&&852<Le||d===2&&592<Le)return 1;for(;;){for(D=ie-Be,ee=C[ge]<B?(R=0,C[ge]):C[ge]>B?(R=lt[de+C[ge]],Re[it+C[ge]]):(R=96,0),k=1<<ie-Be,H=P=1<<we;v[S+(Ce>>Be)+(P-=k)]=D<<24|R<<16|ee|0,P!==0;);for(k=1<<ie-1;Ce&k;)k>>=1;if(k!==0?(Ce&=k-1,Ce+=k):Ce=0,ge++,--nt[ie]==0){if(ie===ye)break;ie=p[m+C[ge]]}if(Ae<ie&&(Ce&M)!==j){for(Be===0&&(Be=Ae),S+=H,xe=1<<(we=ie-Be);we+Be<ye&&!((xe-=nt[we+Be])<=0);)we++,xe<<=1;if(Le+=1<<we,d===1&&852<Le||d===2&&592<Le)return 1;v[j=Ce&M]=Ae<<24|we<<16|S-w|0}}return Ce!==0&&(v[S+Ce]=ie-Be<<24|64<<16|0),x.bits=Ae,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,o=1;function c(I){for(var Q=I.length;0<=--Q;)I[Q]=0}var h=0,d=29,p=256,m=p+1+d,g=30,v=19,w=2*m+1,C=15,x=16,k=7,P=256,j=16,M=17,S=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=new Array(2*(m+2));c(ue);var ie=new Array(2*g);c(ie);var ge=new Array(512);c(ge);var H=new Array(256);c(H);var ye=new Array(d);c(ye);var Ae,we,Be,xe=new Array(g);function Le(I,Q,he,ve,me){this.static_tree=I,this.extra_bits=Q,this.extra_base=he,this.elems=ve,this.max_length=me,this.has_stree=I&&I.length}function Ce(I,Q){this.dyn_tree=I,this.max_code=0,this.stat_desc=Q}function Re(I){return I<256?ge[I]:ge[256+(I>>>7)]}function it(I,Q){I.pending_buf[I.pending++]=255&Q,I.pending_buf[I.pending++]=Q>>>8&255}function nt(I,Q,he){I.bi_valid>x-he?(I.bi_buf|=Q<<I.bi_valid&65535,it(I,I.bi_buf),I.bi_buf=Q>>x-I.bi_valid,I.bi_valid+=he-x):(I.bi_buf|=Q<<I.bi_valid&65535,I.bi_valid+=he)}function Ue(I,Q,he){nt(I,he[2*Q],he[2*Q+1])}function lt(I,Q){for(var he=0;he|=1&I,I>>>=1,he<<=1,0<--Q;);return he>>>1}function de(I,Q,he){var ve,me,Me=new Array(C+1),Je=0;for(ve=1;ve<=C;ve++)Me[ve]=Je=Je+he[ve-1]<<1;for(me=0;me<=Q;me++){var De=I[2*me+1];De!==0&&(I[2*me]=lt(Me[De]++,De))}}function oe(I){var Q;for(Q=0;Q<m;Q++)I.dyn_ltree[2*Q]=0;for(Q=0;Q<g;Q++)I.dyn_dtree[2*Q]=0;for(Q=0;Q<v;Q++)I.bl_tree[2*Q]=0;I.dyn_ltree[2*P]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function We(I){8<I.bi_valid?it(I,I.bi_buf):0<I.bi_valid&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function Ne(I,Q,he,ve){var me=2*Q,Me=2*he;return I[me]<I[Me]||I[me]===I[Me]&&ve[Q]<=ve[he]}function ht(I,Q,he){for(var ve=I.heap[he],me=he<<1;me<=I.heap_len&&(me<I.heap_len&&Ne(Q,I.heap[me+1],I.heap[me],I.depth)&&me++,!Ne(Q,ve,I.heap[me],I.depth));)I.heap[he]=I.heap[me],he=me,me<<=1;I.heap[he]=ve}function jt(I,Q,he){var ve,me,Me,Je,De=0;if(I.last_lit!==0)for(;ve=I.pending_buf[I.d_buf+2*De]<<8|I.pending_buf[I.d_buf+2*De+1],me=I.pending_buf[I.l_buf+De],De++,ve===0?Ue(I,me,Q):(Ue(I,(Me=H[me])+p+1,Q),(Je=B[Me])!==0&&nt(I,me-=ye[Me],Je),Ue(I,Me=Re(--ve),he),(Je=D[Me])!==0&&nt(I,ve-=xe[Me],Je)),De<I.last_lit;);Ue(I,P,Q)}function Ct(I,Q){var he,ve,me,Me=Q.dyn_tree,Je=Q.stat_desc.static_tree,De=Q.stat_desc.has_stree,l=Q.stat_desc.elems,f=-1;for(I.heap_len=0,I.heap_max=w,he=0;he<l;he++)Me[2*he]!==0?(I.heap[++I.heap_len]=f=he,I.depth[he]=0):Me[2*he+1]=0;for(;I.heap_len<2;)Me[2*(me=I.heap[++I.heap_len]=f<2?++f:0)]=1,I.depth[me]=0,I.opt_len--,De&&(I.static_len-=Je[2*me+1]);for(Q.max_code=f,he=I.heap_len>>1;1<=he;he--)ht(I,Me,he);for(me=l;he=I.heap[1],I.heap[1]=I.heap[I.heap_len--],ht(I,Me,1),ve=I.heap[1],I.heap[--I.heap_max]=he,I.heap[--I.heap_max]=ve,Me[2*me]=Me[2*he]+Me[2*ve],I.depth[me]=(I.depth[he]>=I.depth[ve]?I.depth[he]:I.depth[ve])+1,Me[2*he+1]=Me[2*ve+1]=me,I.heap[1]=me++,ht(I,Me,1),2<=I.heap_len;);I.heap[--I.heap_max]=I.heap[1],function(b,_){var E,A,T,N,$,F,G=_.dyn_tree,Z=_.max_code,Y=_.stat_desc.static_tree,W=_.stat_desc.has_stree,X=_.stat_desc.extra_bits,U=_.stat_desc.extra_base,K=_.stat_desc.max_length,V=0;for(N=0;N<=C;N++)b.bl_count[N]=0;for(G[2*b.heap[b.heap_max]+1]=0,E=b.heap_max+1;E<w;E++)K<(N=G[2*G[2*(A=b.heap[E])+1]+1]+1)&&(N=K,V++),G[2*A+1]=N,Z<A||(b.bl_count[N]++,$=0,U<=A&&($=X[A-U]),F=G[2*A],b.opt_len+=F*(N+$),W&&(b.static_len+=F*(Y[2*A+1]+$)));if(V!==0){do{for(N=K-1;b.bl_count[N]===0;)N--;b.bl_count[N]--,b.bl_count[N+1]+=2,b.bl_count[K]--,V-=2}while(0<V);for(N=K;N!==0;N--)for(A=b.bl_count[N];A!==0;)Z<(T=b.heap[--E])||(G[2*T+1]!==N&&(b.opt_len+=(N-G[2*T+1])*G[2*T],G[2*T+1]=N),A--)}}(I,Q),de(Me,f,I.bl_count)}function q(I,Q,he){var ve,me,Me=-1,Je=Q[1],De=0,l=7,f=4;for(Je===0&&(l=138,f=3),Q[2*(he+1)+1]=65535,ve=0;ve<=he;ve++)me=Je,Je=Q[2*(ve+1)+1],++De<l&&me===Je||(De<f?I.bl_tree[2*me]+=De:me!==0?(me!==Me&&I.bl_tree[2*me]++,I.bl_tree[2*j]++):De<=10?I.bl_tree[2*M]++:I.bl_tree[2*S]++,Me=me,f=(De=0)===Je?(l=138,3):me===Je?(l=6,3):(l=7,4))}function Ye(I,Q,he){var ve,me,Me=-1,Je=Q[1],De=0,l=7,f=4;for(Je===0&&(l=138,f=3),ve=0;ve<=he;ve++)if(me=Je,Je=Q[2*(ve+1)+1],!(++De<l&&me===Je)){if(De<f)for(;Ue(I,me,I.bl_tree),--De!=0;);else me!==0?(me!==Me&&(Ue(I,me,I.bl_tree),De--),Ue(I,j,I.bl_tree),nt(I,De-3,2)):De<=10?(Ue(I,M,I.bl_tree),nt(I,De-3,3)):(Ue(I,S,I.bl_tree),nt(I,De-11,7));Me=me,f=(De=0)===Je?(l=138,3):me===Je?(l=6,3):(l=7,4)}}c(xe);var se=!1;function L(I,Q,he,ve){nt(I,(h<<1)+(ve?1:0),3),function(me,Me,Je,De){We(me),it(me,Je),it(me,~Je),s.arraySet(me.pending_buf,me.window,Me,Je,me.pending),me.pending+=Je}(I,Q,he)}i._tr_init=function(I){se||(function(){var Q,he,ve,me,Me,Je=new Array(C+1);for(me=ve=0;me<d-1;me++)for(ye[me]=ve,Q=0;Q<1<<B[me];Q++)H[ve++]=me;for(H[ve-1]=me,me=Me=0;me<16;me++)for(xe[me]=Me,Q=0;Q<1<<D[me];Q++)ge[Me++]=me;for(Me>>=7;me<g;me++)for(xe[me]=Me<<7,Q=0;Q<1<<D[me]-7;Q++)ge[256+Me++]=me;for(he=0;he<=C;he++)Je[he]=0;for(Q=0;Q<=143;)ue[2*Q+1]=8,Q++,Je[8]++;for(;Q<=255;)ue[2*Q+1]=9,Q++,Je[9]++;for(;Q<=279;)ue[2*Q+1]=7,Q++,Je[7]++;for(;Q<=287;)ue[2*Q+1]=8,Q++,Je[8]++;for(de(ue,m+1,Je),Q=0;Q<g;Q++)ie[2*Q+1]=5,ie[2*Q]=lt(Q,5);Ae=new Le(ue,B,p+1,m,C),we=new Le(ie,D,0,g,C),Be=new Le(new Array(0),R,0,v,k)}(),se=!0),I.l_desc=new Ce(I.dyn_ltree,Ae),I.d_desc=new Ce(I.dyn_dtree,we),I.bl_desc=new Ce(I.bl_tree,Be),I.bi_buf=0,I.bi_valid=0,oe(I)},i._tr_stored_block=L,i._tr_flush_block=function(I,Q,he,ve){var me,Me,Je=0;0<I.level?(I.strm.data_type===2&&(I.strm.data_type=function(De){var l,f=4093624447;for(l=0;l<=31;l++,f>>>=1)if(1&f&&De.dyn_ltree[2*l]!==0)return a;if(De.dyn_ltree[18]!==0||De.dyn_ltree[20]!==0||De.dyn_ltree[26]!==0)return o;for(l=32;l<p;l++)if(De.dyn_ltree[2*l]!==0)return o;return a}(I)),Ct(I,I.l_desc),Ct(I,I.d_desc),Je=function(De){var l;for(q(De,De.dyn_ltree,De.l_desc.max_code),q(De,De.dyn_dtree,De.d_desc.max_code),Ct(De,De.bl_desc),l=v-1;3<=l&&De.bl_tree[2*ee[l]+1]===0;l--);return De.opt_len+=3*(l+1)+5+5+4,l}(I),me=I.opt_len+3+7>>>3,(Me=I.static_len+3+7>>>3)<=me&&(me=Me)):me=Me=he+5,he+4<=me&&Q!==-1?L(I,Q,he,ve):I.strategy===4||Me===me?(nt(I,2+(ve?1:0),3),jt(I,ue,ie)):(nt(I,4+(ve?1:0),3),function(De,l,f,b){var _;for(nt(De,l-257,5),nt(De,f-1,5),nt(De,b-4,4),_=0;_<b;_++)nt(De,De.bl_tree[2*ee[_]+1],3);Ye(De,De.dyn_ltree,l-1),Ye(De,De.dyn_dtree,f-1)}(I,I.l_desc.max_code+1,I.d_desc.max_code+1,Je+1),jt(I,I.dyn_ltree,I.dyn_dtree)),oe(I),ve&&We(I)},i._tr_tally=function(I,Q,he){return I.pending_buf[I.d_buf+2*I.last_lit]=Q>>>8&255,I.pending_buf[I.d_buf+2*I.last_lit+1]=255&Q,I.pending_buf[I.l_buf+I.last_lit]=255&he,I.last_lit++,Q===0?I.dyn_ltree[2*he]++:(I.matches++,Q--,I.dyn_ltree[2*(H[he]+p+1)]++,I.dyn_dtree[2*Re(Q)]++),I.last_lit===I.lit_bufsize-1},i._tr_align=function(I){nt(I,2,3),Ue(I,P,ue),function(Q){Q.bi_valid===16?(it(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(I)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,o){if(!a.setImmediate){var c,h,d,p,m=1,g={},v=!1,w=a.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(a);C=C&&C.setTimeout?C:a,c={}.toString.call(a.process)==="[object process]"?function(j){process.nextTick(function(){k(j)})}:function(){if(a.postMessage&&!a.importScripts){var j=!0,M=a.onmessage;return a.onmessage=function(){j=!1},a.postMessage("","*"),a.onmessage=M,j}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",P,!1):a.attachEvent("onmessage",P),function(j){a.postMessage(p+j,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(j){k(j.data)},function(j){d.port2.postMessage(j)}):w&&"onreadystatechange"in w.createElement("script")?(h=w.documentElement,function(j){var M=w.createElement("script");M.onreadystatechange=function(){k(j),M.onreadystatechange=null,h.removeChild(M),M=null},h.appendChild(M)}):function(j){setTimeout(k,0,j)},C.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var M=new Array(arguments.length-1),S=0;S<M.length;S++)M[S]=arguments[S+1];var B={callback:j,args:M};return g[m]=B,c(m),m++},C.clearImmediate=x}function x(j){delete g[j]}function k(j){if(v)setTimeout(k,0,j);else{var M=g[j];if(M){v=!0;try{(function(S){var B=S.callback,D=S.args;switch(D.length){case 0:B();break;case 1:B(D[0]);break;case 2:B(D[0],D[1]);break;case 3:B(D[0],D[1],D[2]);break;default:B.apply(o,D)}})(M)}finally{x(j),v=!1}}}}function P(j){j.source===a&&typeof j.data=="string"&&j.data.indexOf(p)===0&&k(+j.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Qa<"u"?Qa:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(fN);var q9=fN.exports;const Y9=No(q9);function X9(e){let t="",n=e;for(;n>=0;)t=String.fromCharCode(n%26+65)+t,n=Math.floor(n/26)-1;return t}function K9(e,t){return`${X9(e)}${t+1}`}async function pN(e,t,n="design"){const i=Math.ceil(t.width/1e3),s=Math.ceil(t.length/1e3);console.log(`[SLICER] Creating ${i}${s} grid (${i*s} tiles) for ${t.width}mm  ${t.length}mm design`);const c=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!c)throw new Error("Invalid SVG content");const h=c.getAttribute("viewBox");let d,p;if(h){const B=h.split(/\s+/).map(Number);d=B[2],p=B[3]}else d=parseFloat(c.getAttribute("width"))||1024,p=parseFloat(c.getAttribute("height"))||1024;console.log(`[SLICER] SVG internal dimensions: ${d}  ${p}`);const m=d/t.width,g=p/t.length,v=1e3*m,w=1e3*g;console.log(`[SLICER] Tile size in SVG units: ${v}  ${w}`);const C=c.innerHTML,x=c.getAttribute("xmlns")||"http://www.w3.org/2000/svg",k=new Y9,P=k.folder("tiles"),j=[];for(let B=0;B<s;B++){const D=[];for(let R=0;R<i;R++){const ee=K9(R,B);D.push(ee);const ue=R*v,ie=B*w,ge=`${ue} ${ie} ${v} ${w}`,H=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="${x}" viewBox="${ge}" width="1000mm" height="1000mm">
  <defs>
    <clipPath id="tile-clip">
      <rect x="${ue}" y="${ie}" width="${v}" height="${w}"/>
    </clipPath>
  </defs>
  <g clip-path="url(#tile-clip)">
${C}
  </g>
</svg>`,ye=`${mN(n)}_${ee}.svg`;P.file(ye,H)}j.push(D)}const M=Z9(j,t,n);k.file("layout-guide.txt",M);const S=await k.generateAsync({type:"blob"});return console.log(`[SLICER] Created ZIP with ${i*s} tiles`),S}function Z9(e,t,n){const r=e.length,i=e[0].length;let s=`TPV Studio - Tile Layout Guide
================================

Design: ${n}
Total Size: ${t.width}mm  ${t.length}mm (${t.width/1e3}m  ${t.length/1e3}m)
Tile Size: 1000mm  1000mm (1m  1m)
Grid: ${i} columns  ${r} rows (${i*r} tiles)

Layout (view from above):
-------------------------

`;const a=6;s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`;for(let o=0;o<r;o++){s+="";for(let c=0;c<i;c++){const h=e[o][c],d=a-h.length,p=Math.floor(d/2),m=d-p;s+=" ".repeat(p)+h+" ".repeat(m)+""}s+=`
`,o<r-1?s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`:s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`}return s+=`
Installation Notes:
-------------------
- Each tile is exactly 1m  1m
- Tiles are named by column (A-Z) and row (1-${r})
- Start from top-left corner (A1) when laying out
- Tiles align perfectly when placed edge-to-edge
- Edge tiles may contain partial content if design isn't exactly divisible by 1m

Generated by TPV Studio
`,s}function mN(e){return e.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"-").substring(0,50)}function gN(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function Q9(e,t,n="design"){try{const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch SVG: ${r.statusText}`);const i=await r.text(),s=await pN(i,t,n),a=`${mN(n)}-tiles-1mx1m.zip`;return gN(s,a),console.log(`[SLICER] Downloaded ${a}`),!0}catch(r){throw console.error("[SLICER] Failed to download tiles:",r),r}}var al;let J9=(al=class{static next(){return(++al.seed).toString(16).toUpperCase()}static peek(){return(al.seed+1).toString(16).toUpperCase()}},Hf(al,"seed",0),al);var gw=J9;const e7=gw;let t7=class{constructor(t=null){this.handle=e7.next(),this.ownerObjectHandle="0",this.subclassMarkers=[],t&&(Array.isArray(t)?this.subclassMarkers.push(...t):this.subclassMarkers.push(t))}tags(t){t.push(5,this.handle),t.push(330,this.ownerObjectHandle);for(const n of this.subclassMarkers)t.push(100,n)}};var Vr=t7;const n7=Vr;let r7=class extends n7{constructor(t,n,r){super(["AcDbSymbolTableRecord","AcDbLinetypeTableRecord"]),this.name=t,this.description=n,this.elements=r}tags(t){t.push(0,"LTYPE"),super.tags(t),t.push(2,this.name),t.push(3,this.description),t.push(70,0),t.push(72,65),t.push(73,this.elements.length),t.push(40,this.getElementsSum()),this.elements.forEach(n=>{t.push(49,n),t.push(74,0)})}getElementsSum(){return this.elements.reduce((t,n)=>t+Math.abs(n),0)}};var i7=r7;const s7=Vr;let a7=class extends s7{constructor(t,n,r=null){super(["AcDbSymbolTableRecord","AcDbLayerTableRecord"]),this.name=t,this.colorNumber=n,this.lineTypeName=r,this.shapes=[],this.trueColor=-1}tags(t){t.push(0,"LAYER"),super.tags(t),t.push(2,this.name),this.trueColor!==-1?t.push(420,this.trueColor):t.push(62,this.colorNumber),t.push(70,0),this.lineTypeName&&t.push(6,this.lineTypeName),t.push(390,1)}setTrueColor(t){this.trueColor=t}addShape(t){this.shapes.push(t),t.layer=this}getShapes(){return this.shapes}shapesTags(t,n){for(const r of this.shapes)r.ownerObjectHandle=t.handle,r.tags(n)}};var o7=a7;const l7=Vr;let c7=class extends l7{constructor(t){super("AcDbSymbolTable"),this.name=t,this.elements=[]}add(t){t.ownerObjectHandle=this.handle,this.elements.push(t)}tags(t){t.push(0,"TABLE"),t.push(2,this.name),super.tags(t),t.push(70,this.elements.length),this.elements.forEach(n=>{n.tags(t)}),t.push(0,"ENDTAB")}};var yN=c7;const u7=Vr,h7=yN;let d7=class extends h7{constructor(t){super(t),this.subclassMarkers.push("AcDbDimStyleTable")}tags(t){t.push(0,"TABLE"),t.push(2,this.name),u7.prototype.tags.call(this,t),t.push(70,this.elements.length),t.push(71,1);for(const n of this.elements)n.tags(t);t.push(0,"ENDTAB")}};var f7=d7;const p7=Vr;let m7=class extends p7{constructor(n){super(["AcDbSymbolTableRecord","AcDbTextStyleTableRecord"]);Hf(this,"fontFileName","txt");this.name=n}tags(n){n.push(0,"STYLE"),super.tags(n),n.push(2,this.name),n.push(70,0),n.push(40,0),n.push(41,1),n.push(50,0),n.push(71,0),n.push(42,1),n.push(3,this.fontFileName),n.push(4,"")}};var g7=m7;const y7=Vr;let b7=class extends y7{constructor(t,n){super(["AcDbSymbolTableRecord","AcDbViewportTableRecord"]),this.name=t,this.height=n}tags(t){t.push(0,"VPORT"),super.tags(t),t.push(2,this.name),t.push(40,this.height),t.push(70,0)}};var v7=b7;const x7=Vr;let w7=class extends x7{constructor(t){super(["AcDbSymbolTableRecord","AcDbRegAppTableRecord"]),this.name=t}tags(t){t.push(0,"APPID"),super.tags(t),t.push(2,this.name),t.push(70,0)}};var _7=w7;const k2=Vr;let k7=class extends k2{constructor(t){super(["AcDbEntity","AcDbBlockBegin"]),this.name=t,this.end=new k2(["AcDbEntity","AcDbBlockEnd"]),this.recordHandle=null}tags(t){t.push(0,"BLOCK"),super.tags(t),t.push(2,this.name),t.push(70,0),t.point(0,0),t.push(3,this.name),t.push(1,""),t.push(0,"ENDBLK"),this.end.tags(t)}};var S7=k7;const C7=Vr;let E7=class extends C7{constructor(t){super(["AcDbSymbolTableRecord","AcDbBlockTableRecord"]),this.name=t}tags(t){t.push(0,"BLOCK_RECORD"),super.tags(t),t.push(2,this.name),t.push(70,0),t.push(280,0),t.push(281,1)}};var T7=E7;const j7=Vr;let A7=class extends j7{constructor(){super("AcDbDictionary"),this.children={}}addChildDictionary(t,n){n.ownerObjectHandle=this.handle,this.children[t]=n}tags(t){t.push(0,"DICTIONARY"),super.tags(t),t.push(281,1);const n=Object.entries(this.children);for(const i of n){const[s,a]=i;t.push(3,s),t.push(350,a.handle)}const r=Object.values(this.children);for(const i of r)i.tags(t)}};var P7=A7;const N7=Vr;let O7=class extends N7{constructor(t,n,r,i){super(["AcDbEntity","AcDbLine"]),this.x1=t,this.y1=n,this.x2=r,this.y2=i}tags(t){t.push(0,"LINE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,0)}};var R7=O7;const M7=Vr;let L7=class extends M7{constructor(t,n,r,i,s,a){super(["AcDbEntity","AcDbLine"]),this.x1=t,this.y1=n,this.z1=r,this.x2=i,this.y2=s,this.z2=a}tags(t){t.push(0,"LINE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1,this.z1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,this.z2)}};var I7=L7;const $7=Vr;let D7=class extends $7{constructor(t,n,r,i,s){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.r=r,this.startAngle=i,this.endAngle=s}tags(t){t.push(0,"ARC"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.r),t.push(100,"AcDbArc"),t.push(50,this.startAngle),t.push(51,this.endAngle)}};var z7=D7;const F7=Vr;let B7=class extends F7{constructor(t,n,r){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.r=r}tags(t){t.push(0,"CIRCLE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.r)}};var U7=B7;const H7=Vr;let W7=class extends H7{constructor(t,n,r,i,s,a,o,c){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.z=r,this.r=i,this.thickness=s,this.extrusionDirectionX=a,this.extrusionDirectionY=o,this.extrusionDirectionZ=c}tags(t){t.push(0,"CIRCLE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y,this.z),t.push(40,this.r),t.push(39,this.thickness),t.push(210,this.extrusionDirectionX),t.push(220,this.extrusionDirectionY),t.push(230,this.extrusionDirectionZ)}};var V7=W7;const G7=Vr,S2=["left","center","right"],C2=["baseline","bottom","middle","top"];let q7=class extends G7{constructor(t,n,r,i,s,a="left",o="baseline"){super(["AcDbEntity","AcDbText"]),this.x=t,this.y=n,this.height=r,this.rotation=i,this.value=s,this.hAlign=a,this.vAlign=o}tags(t){t.push(0,"TEXT"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.height),t.push(1,this.value),t.push(50,this.rotation),S2.includes(this.hAlign,1)||C2.includes(this.vAlign,1)?(t.push(72,Math.max(S2.indexOf(this.hAlign),0)),t.push(11,this.x),t.push(21,this.y),t.push(31,0),t.push(100,"AcDbText"),t.push(73,Math.max(C2.indexOf(this.vAlign),0))):t.push(100,"AcDbText")}};var Y7=q7;const X7=Vr;let K7=class extends X7{constructor(t,n=!1,r=0,i=0){super(["AcDbEntity","AcDbPolyline"]),this.points=t,this.closed=n,this.startWidth=r,this.endWidth=i}tags(t){t.push(0,"LWPOLYLINE"),super.tags(t),t.push(8,this.layer.name),t.push(6,"ByLayer"),t.push(62,256),t.push(370,-1),t.push(90,this.points.length),t.push(70,this.closed?1:0),this.points.forEach(n=>{const[r,i,s]=n;t.push(10,r),t.push(20,i),(this.startWidth!==0||this.endWidth!==0)&&(t.push(40,this.startWidth),t.push(41,this.endWidth)),s!==void 0&&t.push(42,s)})}};var Z7=K7;const Q7=Vr;let J7=class extends Q7{constructor(t,n,r){super(["AcDbEntity","AcDbVertex","AcDb3dPolylineVertex"]),this.x=t,this.y=n,this.z=r}tags(t){t.push(0,"VERTEX"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y,this.z),t.push(70,32)}};var eB=J7;const tB=Vr,nB=gw,rB=eB;let iB=class extends tB{constructor(t){super(["AcDbEntity","AcDb3dPolyline"]),this.verticies=t.map(n=>{const[r,i,s]=n,a=new rB(r,i,s);return a.ownerObjectHandle=this.handle,a}),this.seqendHandle=nB.next()}tags(t){t.push(0,"POLYLINE"),super.tags(t),t.push(8,this.layer.name),t.push(66,1),t.push(70,0),t.point(0,0),this.verticies.forEach(n=>{n.layer=this.layer,n.tags(t)}),t.push(0,"SEQEND"),t.push(5,this.seqendHandle),t.push(100,"AcDbEntity"),t.push(8,this.layer.name)}};var sB=iB;const aB=Vr;let oB=class extends aB{constructor(t,n,r,i,s,a,o,c,h,d,p,m){super(["AcDbEntity","AcDbFace"]),this.x1=t,this.y1=n,this.z1=r,this.x2=i,this.y2=s,this.z2=a,this.x3=o,this.y3=c,this.z3=h,this.x4=d,this.y4=p,this.z4=m}tags(t){t.push(0,"3DFACE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1,this.z1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,this.z2),t.push(12,this.x3),t.push(22,this.y3),t.push(32,this.z3),t.push(13,this.x4),t.push(23,this.y4),t.push(33,this.z4)}};var lB=oB;const cB=Vr;let uB=class extends cB{constructor(t,n){super(["AcDbEntity","AcDbPoint"]),this.x=t,this.y=n}tags(t){t.push(0,"POINT"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y)}};var hB=uB;const dB=Vr;let fB=class extends dB{constructor(t,n=3,r=null,i=null,s=[]){if(super(["AcDbEntity","AcDbSpline"]),t.length<n+1)throw new Error(`For degree ${n} spline, expected at least ${n+1} control points, but received only ${t.length}`);if(r==null){r=[];for(let p=0;p<n+1;p++)r.push(0);for(let p=1;p<t.length-n;p++)r.push(p);for(let p=0;p<n+1;p++)r.push(t.length-n)}if(r.length!==t.length+n+1)throw new Error(`Invalid knot vector length. Expected ${t.length+n+1} but received ${r.length}.`);this.controlPoints=t,this.knots=r,this.fitPoints=s,this.degree=n,this.weights=i;const a=0,o=0,c=this.weights?1:0,h=1,d=0;this.type=a*1+o*2+c*4+h*8+d*16}tags(t){t.push(0,"SPLINE"),super.tags(t),t.push(8,this.layer.name),t.push(210,0),t.push(220,0),t.push(230,1),t.push(70,this.type),t.push(71,this.degree),t.push(72,this.knots.length),t.push(73,this.controlPoints.length),t.push(74,this.fitPoints.length),t.push(42,1e-7),t.push(43,1e-7),t.push(44,1e-10),this.knots.forEach(n=>{t.push(40,n)}),this.weights&&this.weights.forEach(n=>{t.push(41,n)}),this.controlPoints.forEach(n=>{t.point(n[0],n[1])})}};var pB=fB;const mB=Vr;let gB=class extends mB{constructor(t,n,r,i,s,a,o){super(["AcDbEntity","AcDbEllipse"]),this.x=t,this.y=n,this.majorAxisX=r,this.majorAxisY=i,this.axisRatio=s,this.startAngle=a,this.endAngle=o}tags(t){t.push(0,"ELLIPSE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(11,this.majorAxisX),t.push(21,this.majorAxisY),t.push(31,0),t.push(40,this.axisRatio),t.push(41,this.startAngle),t.push(42,this.endAngle)}};var yB=gB;let bB=class{constructor(){this.lines=[]}point(t,n,r=0){this.push(10,t),this.push(20,n),this.push(30,r)}start(t){this.push(0,"SECTION"),this.push(2,t)}end(){this.push(0,"ENDSEC")}addHeaderVariable(t,n){this.push(9,`$${t}`),n.forEach(r=>{this.push(r[0],r[1])})}push(t,n){this.lines.push(t,n)}toDxfString(){return this.lines.join(`
`)}};var vB=bB;const xB=i7,wB=o7,xp=yN,_B=f7,kB=g7,SB=v7,CB=_7,EB=S7,TB=T7,E2=P7,jB=R7,AB=I7,PB=z7,NB=U7,OB=V7,RB=Y7,wp=Z7,MB=sB,LB=lB,IB=hB,$B=pB,DB=yB,zB=vB,FB=gw;let Gu=class Bl{constructor(){this.layers={},this.activeLayer=null,this.lineTypes={},this.headers={},this.tables={},this.blocks={},this.dictionary=new E2,this.setUnits("Unitless");for(const t of Bl.LINE_TYPES)this.addLineType(t.name,t.description,t.elements);for(const t of Bl.LAYERS)this.addLayer(t.name,t.colorNumber,t.lineTypeName);this.setActiveLayer("0"),this.generateAutocadExtras()}addLineType(t,n,r){return this.lineTypes[t]=new xB(t,n,r),this}addLayer(t,n,r){return this.layers[t]=new wB(t,n,r),this}setActiveLayer(t){return this.activeLayer=this.layers[t],this}addTable(t){const n=new xp(t);return this.tables[t]=n,n}addBlock(t){const n=new EB(t);return this.blocks[t]=n,n}drawLine(t,n,r,i){return this.activeLayer.addShape(new jB(t,n,r,i)),this}drawLine3d(t,n,r,i,s,a){return this.activeLayer.addShape(new AB(t,n,r,i,s,a)),this}drawPoint(t,n){return this.activeLayer.addShape(new IB(t,n)),this}drawRect(t,n,r,i,s,a){const o=r-t,c=i-n;a=a||0;let h=null;return s?h=new wp([[t+o-s,n,a],[t+o,n+s],[t+o,n+c-s,a],[t+o-s,n+c],[t+s,n+c,a],[t,n+c-s],[t,n+s,a],[t+s,n]],!0):h=new wp([[t,n],[t,n+c],[t+o,n+c],[t+o,n]],!0),this.activeLayer.addShape(h),this}drawPolygon(t,n,r,i,s=0,a=!1){const o=2*Math.PI/r,c=[];let h=i;const d=s*Math.PI/180;a&&(h=i/Math.cos(Math.PI/r));for(let p=0;p<r;p++)c.push([t+h*Math.sin(d+p*o),n+h*Math.cos(d+p*o)]);return this.activeLayer.addShape(new wp(c,!0)),this}drawArc(t,n,r,i,s){return this.activeLayer.addShape(new PB(t,n,r,i,s)),this}drawCircle(t,n,r){return this.activeLayer.addShape(new NB(t,n,r)),this}drawCylinder(t,n,r,i,s,a,o,c){return this.activeLayer.addShape(new OB(t,n,r,i,s,a,o,c)),this}drawText(t,n,r,i,s,a="left",o="baseline"){return this.activeLayer.addShape(new RB(t,n,r,i,s,a,o)),this}drawPolyline(t,n=!1,r=0,i=0){return this.activeLayer.addShape(new wp(t,n,r,i)),this}drawPolyline3d(t){return t.forEach(n=>{if(n.length!==3)throw"Require 3D coordinates"}),this.activeLayer.addShape(new MB(t)),this}setTrueColor(t){return this.activeLayer.setTrueColor(t),this}drawSpline(t,n=3,r=null,i=null,s=[]){return this.activeLayer.addShape(new $B(t,n,r,i,s)),this}drawEllipse(t,n,r,i,s,a=0,o=2*Math.PI){return this.activeLayer.addShape(new DB(t,n,r,i,s,a,o)),this}drawFace(t,n,r,i,s,a,o,c,h,d,p,m){return this.activeLayer.addShape(new LB(t,n,r,i,s,a,o,c,h,d,p,m)),this}_ltypeTable(){const t=new xp("LTYPE"),n=Object.values(this.lineTypes);for(const r of n)t.add(r);return t}_layerTable(t){const n=new xp("LAYER"),r=Object.values(this.layers);for(const i of r)n.add(i);return n}header(t,n){return this.headers[t]=n,this}setUnits(t){return typeof Bl.UNITS[t]<"u"?Bl.UNITS[t]:Bl.UNITS.Unitless,this.header("INSUNITS",[[70,Bl.UNITS[t]]]),this}generateAutocadExtras(){this.headers.ACADVER||this.header("ACADVER",[[1,"AC1021"]]),this.lineTypes.ByBlock||this.addLineType("ByBlock","",[]),this.lineTypes.ByLayer||this.addLineType("ByLayer","",[]);let t=this.tables.VPORT;t||(t=this.addTable("VPORT"));let n=this.tables.STYLE;n||(n=this.addTable("STYLE")),this.tables.VIEW||this.addTable("VIEW"),this.tables.UCS||this.addTable("UCS");let r=this.tables.APPID;if(r||(r=this.addTable("APPID")),!this.tables.DIMSTYLE){const s=new _B("DIMSTYLE");this.tables.DIMSTYLE=s}t.add(new SB("*ACTIVE",1e3)),n.add(new kB("standard")),r.add(new CB("ACAD")),this.modelSpace=this.addBlock("*Model_Space"),this.addBlock("*Paper_Space");const i=new E2;this.dictionary.addChildDictionary("ACAD_GROUP",i)}_tagsManager(){const t=new zB,n=new xp("BLOCK_RECORD"),r=Object.values(this.blocks);for(const h of r){const d=new TB(h.name);n.add(d)}const i=this._ltypeTable(),s=this._layerTable();t.start("HEADER"),t.addHeaderVariable("HANDSEED",[[5,FB.peek()]]);const a=Object.entries(this.headers);for(const h of a){const[d,p]=h;t.addHeaderVariable(d,p)}t.end(),t.start("CLASSES"),t.end(),t.start("TABLES"),i.tags(t),s.tags(t);const o=Object.values(this.tables);for(const h of o)h.tags(t);n.tags(t),t.end(),t.start("BLOCKS");for(const h of r)h.tags(t);t.end(),t.start("ENTITIES");const c=Object.values(this.layers);for(const h of c)h.shapesTags(this.modelSpace,t);return t.end(),t.start("OBJECTS"),this.dictionary.tags(t),t.end(),t.push(0,"EOF"),t}toDxfString(){return this._tagsManager().toDxfString()}};Gu.ACI={LAYER:0,RED:1,YELLOW:2,GREEN:3,CYAN:4,BLUE:5,MAGENTA:6,WHITE:7};Gu.LINE_TYPES=[{name:"CONTINUOUS",description:"______",elements:[]},{name:"DASHED",description:"_ _ _ ",elements:[5,-5]},{name:"DOTTED",description:". . . ",elements:[0,-5]}];Gu.LAYERS=[{name:"0",colorNumber:Gu.ACI.WHITE,lineTypeName:"CONTINUOUS"}];Gu.UNITS={Unitless:0,Inches:1,Feet:2,Miles:3,Millimeters:4,Centimeters:5,Meters:6,Kilometers:7,Microinches:8,Mils:9,Yards:10,Angstroms:11,Nanometers:12,Microns:13,Decimeters:14,Decameters:15,Hectometers:16,Gigameters:17,"Astronomical units":18,"Light years":19,Parsecs:20};var BB=Gu,UB=BB;const HB=No(UB);function WB(e,t=2){if(!e)return[];const n=[];let r=[],i=0,s=0,a=0,o=0;const c=VB(e);for(const h of c){const d=h.type,p=h.args;switch(d){case"M":r.length>0&&n.push(r),i=p[0],s=p[1],a=i,o=s,r=[{x:i,y:s}];break;case"m":r.length>0&&n.push(r),i+=p[0],s+=p[1],a=i,o=s,r=[{x:i,y:s}];break;case"L":i=p[0],s=p[1],r.push({x:i,y:s});break;case"l":i+=p[0],s+=p[1],r.push({x:i,y:s});break;case"H":i=p[0],r.push({x:i,y:s});break;case"h":i+=p[0],r.push({x:i,y:s});break;case"V":s=p[0],r.push({x:i,y:s});break;case"v":s+=p[0],r.push({x:i,y:s});break;case"C":{const m=sx(i,s,p[0],p[1],p[2],p[3],p[4],p[5],t);r.push(...m.slice(1)),i=p[4],s=p[5]}break;case"c":{const m=sx(i,s,i+p[0],s+p[1],i+p[2],s+p[3],i+p[4],s+p[5],t);r.push(...m.slice(1)),i+=p[4],s+=p[5]}break;case"Q":{const m=T2(i,s,p[0],p[1],p[2],p[3],t);r.push(...m.slice(1)),i=p[2],s=p[3]}break;case"q":{const m=T2(i,s,i+p[0],s+p[1],i+p[2],s+p[3],t);r.push(...m.slice(1)),i+=p[2],s+=p[3]}break;case"A":{const m=j2(i,s,p[0],p[1],p[2],p[3],p[4],p[5],p[6],t);r.push(...m.slice(1)),i=p[5],s=p[6]}break;case"a":{const m=i+p[5],g=s+p[6],v=j2(i,s,p[0],p[1],p[2],p[3],p[4],m,g,t);r.push(...v.slice(1)),i=m,s=g}break;case"Z":case"z":r.length>0&&(r.push({x:a,y:o}),i=a,s=o);break}}return r.length>0&&n.push(r),n}function VB(e){const t=[],n=/([MmLlHhVvCcSsQqTtAaZz])([^MmLlHhVvCcSsQqTtAaZz]*)/g,r=[...e.matchAll(n)];for(const i of r){const s=i[1],o=i[2].trim().split(/[\s,]+/).filter(c=>c.length>0).map(Number);t.push({type:s,args:o})}return t}function sx(e,t,n,r,i,s,a,o,c){const h=[{x:e,y:t}];return ax(e,t,n,r,i,s,a,o,c,h),h.push({x:a,y:o}),h}function ax(e,t,n,r,i,s,a,o,c,h){const d=a-e,p=o-t;if(Math.sqrt(d*d+p*p)<.001)return;const g=A2(n,r,e,t,a,o),v=A2(i,s,e,t,a,o);if(g<c&&v<c)return;const w=(e+n)/2,C=(t+r)/2,x=(n+i)/2,k=(r+s)/2,P=(i+a)/2,j=(s+o)/2,M=(w+x)/2,S=(C+k)/2,B=(x+P)/2,D=(k+j)/2,R=(M+B)/2,ee=(S+D)/2;ax(e,t,w,C,M,S,R,ee,c,h),h.push({x:R,y:ee}),ax(R,ee,B,D,P,j,a,o,c,h)}function T2(e,t,n,r,i,s,a){const o=e+.6666666666666666*(n-e),c=t+2/3*(r-t),h=i+2/3*(n-i),d=s+2/3*(r-s);return sx(e,t,o,c,h,d,i,s,a)}function j2(e,t,n,r,i,s,a,o,c,h){if(n===0||r===0)return[{x:e,y:t},{x:o,y:c}];const d=GB(e,t,n,r,i,s,a,o,c);if(!d)return[{x:e,y:t},{x:o,y:c}];const{cx:p,cy:m,theta1:g,dtheta:v,rx:w,ry:C}=d,x=i*Math.PI/180,k=(w+C)/2,P=Math.abs(v)*k,j=Math.max(4,Math.ceil(P/(2*Math.sqrt(2*h*k)))),M=[];for(let S=0;S<=j;S++){const B=g+v*S/j,D=Math.cos(B),R=Math.sin(B),ee=Math.cos(x),ue=Math.sin(x),ie=p+w*D*ee-C*R*ue,ge=m+w*D*ue+C*R*ee;M.push({x:ie,y:ge})}return M}function GB(e,t,n,r,i,s,a,o,c){const h=i*Math.PI/180,d=Math.cos(h),p=Math.sin(h),m=(e-o)/2,g=(t-c)/2,v=d*m+p*g,w=-p*m+d*g;n=Math.abs(n),r=Math.abs(r);const C=v*v/(n*n)+w*w/(r*r);if(C>1){const Le=Math.sqrt(C);n*=Le,r*=Le}const x=n*n,k=r*r,P=v*v,j=w*w;let M=(x*k-x*j-k*P)/(x*j+k*P);M<0&&(M=0);const S=(s!==a?1:-1)*Math.sqrt(M),B=S*(n*w)/r,D=S*-(r*v)/n,R=d*B-p*D+(e+o)/2,ee=p*B+d*D+(t+c)/2,ue=(v-B)/n,ie=(w-D)/r,ge=(-v-B)/n,H=(-w-D)/r,ye=Math.sqrt(ue*ue+ie*ie),Ae=(ie>=0?1:-1)*Math.acos(ue/ye),we=ue*ge+ie*H,Be=ue*H-ie*ge;let xe=Math.acos(Math.max(-1,Math.min(1,we/(ye*Math.sqrt(ge*ge+H*H)))));return Be<0&&(xe=-xe),!a&&xe>0&&(xe-=2*Math.PI),a&&xe<0&&(xe+=2*Math.PI),{cx:R,cy:ee,theta1:Ae,dtheta:xe,rx:n,ry:r}}function A2(e,t,n,r,i,s){const a=i-n,o=s-r,c=Math.sqrt(a*a+o*o);return c===0?Math.sqrt((e-n)**2+(t-r)**2):Math.abs((o*e-a*t+i*r-s*n)/c)}function qB(e,t,n,r,i=0,s=0){if(e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0,r=parseFloat(r)||0,i=parseFloat(i)||0,s=parseFloat(s)||i,i===0&&s===0)return[{x:e,y:t},{x:e+n,y:t},{x:e+n,y:t+r},{x:e,y:t+r},{x:e,y:t}];i=Math.min(i,n/2),s=Math.min(s,r/2);const a=[],o=8;for(let c=0;c<=o;c++){const h=-Math.PI/2+Math.PI/2*(c/o);a.push({x:e+n-i+i*Math.cos(h),y:t+s+s*Math.sin(h)})}for(let c=0;c<=o;c++){const h=0+Math.PI/2*(c/o);a.push({x:e+n-i+i*Math.cos(h),y:t+r-s+s*Math.sin(h)})}for(let c=0;c<=o;c++){const h=Math.PI/2+Math.PI/2*(c/o);a.push({x:e+i+i*Math.cos(h),y:t+r-s+s*Math.sin(h)})}for(let c=0;c<=o;c++){const h=Math.PI+Math.PI/2*(c/o);a.push({x:e+i+i*Math.cos(h),y:t+s+s*Math.sin(h)})}return a.push(a[0]),a}function YB(e,t,n,r=32){e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0;const i=[];for(let s=0;s<=r;s++){const a=2*Math.PI*s/r;i.push({x:e+n*Math.cos(a),y:t+n*Math.sin(a)})}return i}function XB(e,t,n,r,i=32){e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0,r=parseFloat(r)||0;const s=[];for(let a=0;a<=i;a++){const o=2*Math.PI*a/i;s.push({x:e+n*Math.cos(o),y:t+r*Math.sin(o)})}return s}function KB(e){if(!e)return[];const t=e.trim().split(/[\s,]+/).map(Number),n=[];for(let r=0;r<t.length;r+=2)r+1<t.length&&n.push({x:t[r],y:t[r+1]});return n.length>0&&n.push({x:n[0].x,y:n[0].y}),n}function ZB(e){if(!e)return[];const t=e.trim().split(/[\s,]+/).map(Number),n=[];for(let r=0;r<t.length;r+=2)r+1<t.length&&n.push({x:t[r],y:t[r+1]});return n}function QB(e,t,n,r){return[{x:parseFloat(e)||0,y:parseFloat(t)||0},{x:parseFloat(n)||0,y:parseFloat(r)||0}]}function tg(e,t){if(!t||!e.length)return e;const n=JB(t);return e.map(r=>tU(r,n))}function JB(e){let t=[1,0,0,1,0,0];const n=e.match(/\w+\([^)]+\)/g)||[];for(const r of n){const i=r.match(/(\w+)\(([^)]+)\)/);if(!i)continue;const s=i[1],a=i[2].split(/[\s,]+/).map(Number);let o;switch(s){case"translate":o=[1,0,0,1,a[0]||0,a[1]||0];break;case"scale":o=[a[0]||1,0,0,a[1]??a[0]??1,0,0];break;case"rotate":const c=(a[0]||0)*Math.PI/180,h=Math.cos(c),d=Math.sin(c);if(a.length===3){const p=a[1],m=a[2];o=[h,d,-d,h,p-h*p+d*m,m-d*p-h*m]}else o=[h,d,-d,h,0,0];break;case"matrix":for(o=a.slice(0,6);o.length<6;)o.push(0);break;default:continue}t=eU(t,o)}return t}function eU(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function tU(e,t){return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}let _p=[];const Ey={"#A5362F":"RH01","#E21F2F":"RH02","#609B63":"RH10","#3BB44A":"RH11","#006C55":"RH12","#0075BC":"RH20","#493D8C":"RH21","#47AFE3":"RH22","#039DC4":"RH23","#00A6A3":"RH26","#E4C4AA":"RH30","#E8E3D8":"RH31","#8B5F3C":"RH32","#E5A144":"RH40","#FFD833":"RH41","#F15B32":"RH50","#59595B":"RH60","#939598":"RH61","#D9D9D6":"RH65","#231F20":"RH70","#E8457E":"RH90"},Ty={RH01:1,RH02:1,RH10:3,RH11:3,RH12:3,RH20:5,RH21:6,RH22:4,RH23:4,RH26:4,RH30:52,RH31:7,RH32:38,RH40:2,RH41:2,RH50:30,RH60:8,RH61:8,RH65:9,RH70:250,RH90:6,OUTER_BORDER:2,NOTES:4,TEXT_OUTLINES:7,OTHER_COLORS:7};function nU(e,t){const{widthMm:n,lengthMm:r,designName:i="TPV Design",seed:s,motifs:a}=t;_p=[];const o=new HB,c=sU(e),h=n/c.width,d=r/c.height,p=new Map,m=e.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line");let g=0,v=0,w=0;for(const x of m){const k=x.getAttribute("display"),P=x.getAttribute("visibility");if(k==="none"||P==="hidden")continue;const j=x.getAttribute("class")||"";if(j.includes("handle")||j.includes("selection"))continue;const M=vN(x);if(!M||M==="none"||M==="transparent"){v++;continue}const B=xN(M)||"OTHER_COLORS";p.has(B)||p.set(B,[]);let D;try{D=wN(x)}catch(ge){console.warn("[DXF] Error converting element:",ge),w++;continue}if(!D||D.length===0){w++;continue}const R=bN(x),ue=(R?tg(D,R):D).filter(ge=>isFinite(ge.x)&&isFinite(ge.y)&&!isNaN(ge.x)&&!isNaN(ge.y));if(ue.length<2){w++;continue}const ie=ue.map(ge=>({x:ge.x*h,y:r-ge.y*d}));p.get(B).push(ie),g++}const C=e.querySelectorAll("text");if(C.length>0){_p.push(`${C.length} text element(s) were converted to outlines. Edit text in CAD if needed.`);for(const x of C)try{const k=rU(x,h,d,r);k&&(p.has("TEXT_OUTLINES")||p.set("TEXT_OUTLINES",[]),p.get("TEXT_OUTLINES").push(k),g++)}catch(k){console.warn("[DXF] Error converting text:",k)}}if(a&&Object.keys(a).length>0){let x=0,k=0;for(const[P,j]of Object.entries(a)){if(!j.svgContent){k++;continue}try{const M=iU(j,h,d,r);for(const{layerName:S,vertices:B}of M)p.has(S)||p.set(S,[]),p.get(S).push(B),g++;x++}catch(M){console.warn(`[DXF] Error processing motif ${P}:`,M),k++}}x>0&&console.log(`[DXF] Processed ${x} motif(s)`),k>0&&_p.push(`${k} motif(s) could not be fully exported due to missing or invalid SVG content.`)}for(const[x,k]of p){const P=Ty[x]||7;try{o.addLayer(x,P,"CONTINUOUS"),o.setActiveLayer(x)}catch(j){console.warn(`[DXF] Error creating layer ${x}:`,j);continue}for(const j of k)if(j.length>=2)try{const M=j.length>2&&Math.abs(j[0].x-j[j.length-1].x)<.01&&Math.abs(j[0].y-j[j.length-1].y)<.01,S=j.map(D=>[D.x,D.y]);M&&S.length>1&&S.pop();const B=S.filter(D=>isFinite(D[0])&&isFinite(D[1])&&!isNaN(D[0])&&!isNaN(D[1]));B.length>=2&&o.drawPolyline(B,M)}catch(M){console.warn("[DXF] Error drawing polyline:",M)}}try{o.addLayer("OUTER_BORDER",Ty.OUTER_BORDER,"CONTINUOUS"),o.setActiveLayer("OUTER_BORDER"),o.drawPolyline([[0,0],[n,0],[n,r],[0,r]],!0)}catch(x){console.warn("[DXF] Error adding border:",x)}try{o.addLayer("NOTES",Ty.NOTES,"CONTINUOUS"),o.setActiveLayer("NOTES");const x=[`Project: ${i}`,`Size: ${(n/1e3).toFixed(2)}m x ${(r/1e3).toFixed(2)}m`,`Generated: ${new Date().toISOString().split("T")[0]}`,s?`Seed: ${s}`:null,"TPV Studio | rosehilltpv.com"].filter(Boolean).join("\\P");o.drawText(10,-50,100,0,x)}catch(x){console.warn("[DXF] Error adding notes:",x)}return console.log(`[DXF] Export complete: ${g} elements processed, ${v} transparent skipped, ${w} invalid skipped`),{dxfContent:o.toDxfString(),warnings:_p}}function bN(e){const t=[];let n=e;for(;n&&n.getAttribute;){const r=n.getAttribute("transform");r&&t.unshift(r),n=n.parentElement}return t.length>0?t.join(" "):null}function rU(e,t,n,r){try{const i=e.getBBox?e.getBBox():null;if(i&&i.width>0&&i.height>0){const s=bN(e);let a=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height},{x:i.x,y:i.y}];return s&&(a=tg(a,s)),a.map(o=>({x:o.x*t,y:r-o.y*n}))}}catch(i){console.warn("[DXF] Could not get text bounds:",i)}return null}function iU(e,t,n,r){const i=[],{svgContent:s,position:a,rotation:o,scale:c,originalWidth_mm:h,originalHeight_mm:d}=e,g=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("svg");if(!g)return console.warn("[DXF] Could not parse motif SVG"),i;const v=g.getAttribute("viewBox");let w={width:100,height:100};if(v){const D=v.split(/\s+/).map(Number);D.length>=4&&(w={width:D[2],height:D[3]})}const C=(h||1e3)*(c||1),x=(d||1e3)*(c||1),k=C/w.width,P=x/w.height,j=C/2,M=x/2,S=`translate(${a.x}, ${a.y}) rotate(${o||0}, ${j}, ${M})`,B=g.querySelectorAll("path, rect, circle, ellipse, polygon, polyline");for(const D of B){const R=D.getAttribute("display"),ee=D.getAttribute("visibility");if(R==="none"||ee==="hidden")continue;const ue=vN(D);if(!ue||ue==="none"||ue==="transparent")continue;const ge=xN(ue)||"OTHER_COLORS";let H;try{H=wN(D)}catch{continue}if(!H||H.length===0)continue;const ye=D.getAttribute("transform");ye&&(H=tg(H,ye)),H=H.map(Be=>({x:Be.x*k,y:Be.y*P})),H=tg(H,S);const Ae=H.filter(Be=>isFinite(Be.x)&&isFinite(Be.y)&&!isNaN(Be.x)&&!isNaN(Be.y));if(Ae.length<2)continue;const we=Ae.map(Be=>({x:Be.x*t,y:r-Be.y*n}));i.push({layerName:ge,vertices:we})}return i}function sU(e){const t=e.getAttribute("viewBox");if(t){const[i,s,a,o]=t.split(/\s+/).map(Number);return{minX:i,minY:s,width:a,height:o}}const n=parseFloat(e.getAttribute("width"))||1e3,r=parseFloat(e.getAttribute("height"))||1e3;return{minX:0,minY:0,width:n,height:r}}function vN(e){const t=e.getAttribute("style");if(t){const r=t.match(/fill:\s*([^;]+)/i);if(r)return P2(r[1].trim())}const n=e.getAttribute("fill");return n?P2(n):"#000000"}function P2(e){if(!e)return null;if(e.startsWith("#"))return e.length===4?"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]:e.toUpperCase();const t=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);if(t){const n=parseInt(t[1]).toString(16).padStart(2,"0"),r=parseInt(t[2]).toString(16).padStart(2,"0"),i=parseInt(t[3]).toString(16).padStart(2,"0");return`#${n}${r}${i}`.toUpperCase()}return e}function xN(e){if(!e)return null;const t=e.toUpperCase();if(Ey[t])return Ey[t];let n=null,r=1/0;const i=N2(t);if(!i)return null;for(const[s,a]of Object.entries(Ey)){const o=N2(s);if(!o)continue;const c=Math.sqrt(Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));c<r&&(r=c,n=a)}return r<=50?n:null}function N2(e){if(!e||!e.startsWith("#"))return null;const t=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function wN(e){switch(e.tagName.toLowerCase()){case"path":const n=e.getAttribute("d"),r=WB(n,2);return r.length>0?r[0]:[];case"rect":return qB(e.getAttribute("x"),e.getAttribute("y"),e.getAttribute("width"),e.getAttribute("height"),e.getAttribute("rx"),e.getAttribute("ry"));case"circle":return YB(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("r"),32);case"ellipse":return XB(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("rx"),e.getAttribute("ry"),32);case"polygon":return KB(e.getAttribute("points"));case"polyline":return ZB(e.getAttribute("points"));case"line":return QB(e.getAttribute("x1"),e.getAttribute("y1"),e.getAttribute("x2"),e.getAttribute("y2"));default:return[]}}function aU(e,t="design.dxf"){const n=new Blob([e],{type:"application/dxf"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}function oU(e){const t=e.cloneNode(!0),n=[".court-canvas__selection-outline",".transform-handles",".track-resize-handles",'[class*="selection"]','[class*="handle"]',"[stroke-dasharray]"];for(const r of n)t.querySelectorAll(r).forEach(i=>i.remove());return t}async function lU(e){const t=Object.values(e||{});return t.length===0?[]:(await Promise.all(t.map(async r=>{try{const i=await wf(r.sourceDesignId),s=(i==null?void 0:i.design)||i;if(!s)return console.warn(`[EXPORT] Could not fetch design for motif ${r.id}`),null;console.log("[EXPORT] Loaded design for motif:",s.name),console.log("[EXPORT] Design has solid_recipes:",!!s.solid_recipes),console.log("[EXPORT] Design has blend_recipes:",!!s.blend_recipes);const a=r.scale||1,o=r.originalWidth_mm*a/1e3,c=r.originalHeight_mm*a/1e3,h=o*c,d=r.viewMode||"solid",p=d==="blend"?s.blend_recipes:s.solid_recipes;return console.log(`[EXPORT] Using ${d} recipes:`,(p==null?void 0:p.length)||0,"recipes"),{id:r.id,name:r.customName||r.sourceDesignName||s.name||"Motif",areaM2:h,viewMode:d,widthM:o,heightM:c,recipes:p||[]}}catch(i){return console.error(`[EXPORT] Error processing motif ${r.id}:`,i),null}}))).filter(Boolean)}function O2({svgRef:e}){const[t,n]=pe.useState(!1),[r,i]=pe.useState(null),s=pe.useRef(null),a=nn(j=>j.exportDesignData),o=nn(j=>j.surface),c=nn(j=>j.designName),h=nn(j=>j.motifs),d=nn(j=>j.shapes),p=nn(j=>j.texts),m=nn(j=>j.exclusionZones);pe.useEffect(()=>{const j=M=>{s.current&&!s.current.contains(M.target)&&n(!1)};return t&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[t]);const g=()=>e!=null&&e.current?e.current:document.querySelector(".court-canvas__svg"),v=async()=>{i("svg");try{const j=g();if(!j)throw new Error("Canvas not found");const M=a(),S=mw(j,M),B=Lh(M.name,"svg");V9(S,B)}catch(j){console.error("SVG export failed:",j),alert("Failed to export SVG: "+j.message)}finally{i(null),n(!1)}},w=async()=>{i("png");try{const j=g();if(!j)throw new Error("Canvas not found");const M=a(),S=Lh(M.name,"png");await G9(j,M,S,2)}catch(j){console.error("PNG export failed:",j),alert("Failed to export PNG: "+j.message)}finally{i(null),n(!1)}},C=async()=>{i("pdf"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const M=await wa.getSession();if(!(M!=null&&M.access_token))throw new Error("Authentication required for PDF export");const S=a(),B=S.name||"TPV Design",D=j.cloneNode(!0);D.querySelectorAll('[class*="selected"], .transform-handles, .track-resize-handles, .court-canvas__selection-outline, [class*="selection"], [class*="handle"]').forEach(ye=>ye.remove()),D.setAttribute("xmlns","http://www.w3.org/2000/svg"),D.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),_2(D);const R=new XMLSerializer().serializeToString(D);console.log("[EXPORT] Courts in state:",Object.keys(S.courts).length),console.log("[EXPORT] SVG contains court elements:",R.includes("court-canvas__court")),console.log("[EXPORT] Generating PDF report via API...");const ee=await lU(h);console.log("[EXPORT] Motifs for PDF:",ee.length);const ue=await fetch("/api/export-sports-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M.access_token}`},body:JSON.stringify({svgString:R,designName:B,surface:S.surface,courts:S.courts,tracks:S.tracks,shapes:d,texts:p,motifs:ee,exclusionZones:m,dimensions:{widthMM:S.surface.width_mm,lengthMM:S.surface.length_mm}})});if(!ue.ok){const ye=await ue.json().catch(()=>({error:"Unknown error"}));throw new Error(ye.error||`Server error: ${ue.status}`)}const ie=await ue.blob(),ge=Lh(B,"pdf"),H=document.createElement("a");H.href=URL.createObjectURL(ie),H.download=ge,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(H.href),console.log("[EXPORT] PDF downloaded:",ge)}catch(j){console.error("PDF export failed:",j),alert("Failed to export PDF: "+j.message)}finally{i(null)}},x=async()=>{i("tiles"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const S=new XMLSerializer().serializeToString(j),B={width:o.width_mm,length:o.length_mm},D=c||"sports-surface",R=await pN(S,B,D),ee=`${D.replace(/[^a-zA-Z0-9-_]/g,"-")}-tiles-1mx1m.zip`;gN(R,ee),console.log("[EXPORT] Tiles ZIP downloaded:",ee)}catch(j){console.error("Tiles export failed:",j),alert("Failed to export tiles: "+j.message)}finally{i(null)}},k=async()=>{i("dxf"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const M=a(),S=oU(j),B=nU(S,{widthMm:M.surface.width_mm,lengthMm:M.surface.length_mm,designName:M.name||"Sports Surface",seed:M.seed,motifs:h}),D=Lh(M.name,"dxf");if(aU(B.dxfContent,D),console.log("[EXPORT] DXF downloaded:",D),B.warnings&&B.warnings.length>0){const R=`DXF Export Notes:

`+B.warnings.join(`

`);alert(R)}}catch(j){console.error("DXF export failed:",j),alert("Failed to export DXF: "+j.message)}finally{i(null)}},P=async()=>{i("canvas-pdf"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const M=await wa.getSession();if(!(M!=null&&M.access_token))throw new Error("Authentication required for PDF export");const S=a(),B=S.name||"TPV Design",D=j.cloneNode(!0);D.querySelectorAll('[class*="selected"], .transform-handles, .track-resize-handles, .court-canvas__selection-outline, [class*="selection"], [class*="handle"]').forEach(H=>H.remove()),D.setAttribute("xmlns","http://www.w3.org/2000/svg"),D.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),_2(D);const R=new XMLSerializer().serializeToString(D),ee=await fetch("/api/export-canvas-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M.access_token}`},body:JSON.stringify({svgString:R,designName:B,widthMm:S.surface.width_mm,lengthMm:S.surface.length_mm,designType:"sports"})});if(!ee.ok){const H=await ee.json().catch(()=>({error:"Unknown error"}));throw new Error(H.error||`Server error: ${ee.status}`)}const ue=await ee.blob(),ie=Lh(B,"pdf").replace(".pdf","-canvas.pdf"),ge=document.createElement("a");ge.href=URL.createObjectURL(ue),ge.download=ie,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(ge.href),console.log("[EXPORT] Canvas PDF downloaded:",ie)}catch(j){console.error("Canvas PDF export failed:",j),alert("Failed to export Canvas PDF: "+j.message)}finally{i(null)}};return u.jsxs("div",{className:"export-menu",ref:s,children:[u.jsxs("button",{className:"sports-toolbar__btn-export",onClick:()=>n(!t),title:"Export Design",children:["Export",u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:t?"M18 15l-6-6-6 6":"M6 9l6 6 6-6"})})]}),t&&u.jsxs("div",{className:"export-menu__dropdown",children:[u.jsxs("button",{className:"export-menu__item",onClick:v,disabled:r!==null,children:[u.jsx("span",{className:"export-menu__icon",children:""}),u.jsxs("div",{className:"export-menu__item-content",children:[u.jsx("span",{className:"export-menu__item-title",children:r==="svg"?"Exporting...":"Download SVG"}),u.jsx("span",{className:"export-menu__item-desc",children:"Vector format for CAD/printing"})]})]}),u.jsxs("button",{className:"export-menu__item",onClick:w,disabled:r!==null,children:[u.jsx("span",{className:"export-menu__icon",children:""}),u.jsxs("div",{className:"export-menu__item-content",children:[u.jsx("span",{className:"export-menu__item-title",children:r==="png"?"Exporting...":"Download PNG"}),u.jsx("span",{className:"export-menu__item-desc",children:"High-res image for presentations"})]})]}),u.jsxs("button",{className:"export-menu__item",onClick:x,disabled:r!==null,children:[u.jsx("span",{className:"export-menu__icon",children:""}),u.jsxs("div",{className:"export-menu__item-content",children:[u.jsx("span",{className:"export-menu__item-title",children:r==="tiles"?"Generating...":"Download Tiles ZIP"}),u.jsx("span",{className:"export-menu__item-desc",children:"1m1m SVG tiles for large-format printing"})]})]}),u.jsx("div",{className:"export-menu__divider"}),u.jsxs("button",{className:"export-menu__item",onClick:C,disabled:r!==null,children:[u.jsx("span",{className:"export-menu__icon",children:""}),u.jsxs("div",{className:"export-menu__item-content",children:[u.jsx("span",{className:"export-menu__item-title",children:r==="pdf"?"Generating...":"Materials Report (PDF)"}),u.jsx("span",{className:"export-menu__item-desc",children:"TPV quantities & specifications"})]})]}),u.jsxs("button",{className:"export-menu__item",onClick:P,disabled:r!==null,children:[u.jsx("span",{className:"export-menu__icon",children:""}),u.jsxs("div",{className:"export-menu__item-content",children:[u.jsx("span",{className:"export-menu__item-title",children:r==="canvas-pdf"?"Generating...":"Canvas PDF (1:100)"}),u.jsx("span",{className:"export-menu__item-desc",children:"Scaled design with dimensions"})]})]}),u.jsx("div",{className:"export-menu__divider"}),u.jsxs("button",{className:"export-menu__item",onClick:k,disabled:r!==null,children:[u.jsx("span",{className:"export-menu__icon",children:""}),u.jsxs("div",{className:"export-menu__item-content",children:[u.jsx("span",{className:"export-menu__item-title",children:r==="dxf"?"Exporting...":"Download DXF"}),u.jsx("span",{className:"export-menu__item-desc",children:"CAD format for AutoCAD/Rhino"})]})]})]})]})}function cU({isOpen:e,onClose:t}){if(!e)return null;const n=[{category:"Selection",items:[{keys:["Delete"],description:"Remove selected element"},{keys:["Escape"],description:"Deselect / exit group edit"}]},{category:"Edit",items:[{keys:["Ctrl","Z"],description:"Undo"},{keys:["Ctrl","Shift","Z"],description:"Redo"},{keys:["Ctrl","D"],description:"Duplicate selected"},{keys:["Ctrl","C"],description:"Copy selection"},{keys:["Ctrl","V"],description:"Paste"}]},{category:"Groups",items:[{keys:["Ctrl","G"],description:"Group selected elements"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group"}]},{category:"Move",items:[{keys:["Arrow Keys"],description:"Nudge element (10mm)"},{keys:["Shift","Arrow Keys"],description:"Large nudge (100mm)"}]},{category:"Layers",items:[{keys:["["],description:"Send backward"},{keys:["]"],description:"Bring forward"}]},{category:"View",items:[{keys:["G"],description:"Toggle snap to grid"},{keys:["?"],description:"Show this help"}]}],i=navigator.platform.toUpperCase().indexOf("MAC")>=0?"":"Ctrl";return u.jsx("div",{className:"keyboard-shortcuts-overlay",onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:u.jsxs("div",{className:"keyboard-shortcuts-modal",onClick:s=>s.stopPropagation(),style:{background:"#fff",borderRadius:"8px",padding:"24px",maxWidth:"480px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[u.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:600},children:"Keyboard Shortcuts"}),u.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"4px 8px",color:"#666"},"aria-label":"Close",children:""})]}),n.map(s=>u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",color:"#666",marginBottom:"8px",letterSpacing:"0.5px"},children:s.category}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.items.map((a,o)=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[u.jsx("span",{style:{color:"#333",fontSize:"0.9rem"},children:a.description}),u.jsx("div",{style:{display:"flex",gap:"4px"},children:a.keys.map((c,h)=>u.jsx("kbd",{style:{display:"inline-block",padding:"4px 8px",fontSize:"0.75rem",fontFamily:"system-ui, -apple-system, sans-serif",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",minWidth:"24px",textAlign:"center"},children:c==="Ctrl"?i:c},h))})]},o))})]},s.category)),u.jsxs("p",{style:{fontSize:"0.8rem",color:"#888",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #eee",marginBottom:0},children:["Press ",u.jsx("kbd",{style:{padding:"2px 6px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.75rem"},children:"?"})," at any time to show this help"]})]})})}class uU{async _getAuthHeaders(){const t=await wa.getSession(),n={"Content-Type":"application/json"};return t!=null&&t.access_token&&(n.Authorization=`Bearer ${t.access_token}`),n}async generateRecraft(t){const n={prompt:t.prompt,width_mm:t.widthMM||5e3,length_mm:t.lengthMM||5e3,max_colours:t.maxColours||6,seed:t.seed||null},r=await this._getAuthHeaders(),i=await fetch("/api/recraft-generate",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Recraft generation failed")}return i.json()}async vectorizeImage(t){const n={image_url:t.image_url,width_mm:t.width_mm||5e3,length_mm:t.length_mm||5e3,seed:t.seed||null},r=await this._getAuthHeaders(),i=await fetch("/api/recraft-vectorize",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Vectorization failed")}return i.json()}async processUploadedSVG(t){const n={svg_url:t.svg_url,width_mm:t.width_mm||5e3,length_mm:t.length_mm||5e3},r=await this._getAuthHeaders(),i=await fetch("/api/process-uploaded-svg",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"SVG processing failed")}return i.json()}async getRecraftStatus(t){const n=await this._getAuthHeaders(),r=await fetch(`/api/studio-job-status?jobId=${t}`,{headers:n});if(!r.ok){const i=await r.json();throw new Error(i.error||"Status fetch failed")}return r.json()}async waitForRecraftCompletion(t,n=null,r=2e3,i=null){return new Promise((s,a)=>{let o=null;i&&i.addEventListener("abort",()=>{o&&clearTimeout(o),a(new DOMException("Polling aborted","AbortError"))});const c=async()=>{var h,d;if(i!=null&&i.aborted){a(new DOMException("Polling aborted","AbortError"));return}try{const p=await this.getRecraftStatus(t);n&&n(p),p.status==="completed"?((h=p.result)==null?void 0:h.svg_url)?s(p):a(new Error("Job completed but no output received")):p.status==="failed"?(d=p.result)!=null&&d.svg_url?s(p):a(new Error(p.error||"Job failed")):(p.status==="retrying"||p.status==="pending"||p.status==="queued"||p.status,o=setTimeout(c,r))}catch(p){a(p)}};c()})}async matchColor(t,n=2){const r=await fetch("/api/match-color",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hex:t,max_components:n})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Color matching failed")}return r.json()}async generateDesignName(t){const n={prompt:t.prompt,colors:t.colors||[],dimensions:t.dimensions||{}},r=await this._getAuthHeaders(),i=await fetch("/api/generate-design-name",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Name generation failed")}return i.json()}async inspireSimpleCreateJob(t){const n={prompt:t.prompt,surface:{width_mm:t.lengthMM||5e3,height_mm:t.widthMM||5e3},max_colours:t.maxColours||6,try_simpler:t.trySimpler||!1};t.seed&&(n.seed=t.seed);const r=await fetch("/api/studio-inspire-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to start design generation. Please check your connection and try again.")}return r.json()}async inspireSimpleGetStatus(t){const n=await this._getAuthHeaders(),r=await fetch(`/api/studio-job-status?jobId=${t}`,{headers:n});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to check generation status. Please try again.")}return r.json()}async inspireSimpleWaitForCompletion(t,n=null,r=2e3){return new Promise((i,s)=>{const a=async()=>{var o;try{const c=await this.inspireSimpleGetStatus(t);n&&n(c),c.status==="completed"?((o=c.result)==null?void 0:o.final_url)?(console.log("[API] Job complete with JPG output, resolving"),i(c)):(console.log("[API] Job completed but no output received"),s(new Error("Job completed but no output received"))):c.status==="failed"?s(new Error(c.error||"Job failed")):setTimeout(a,r)}catch(c){s(c)}};a()})}async draftify(t){const n=await fetch(WS.DRAFTIFY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Unable to convert image to vector format. Please try a different image.")}return n.json()}async generateGeometric(t){const n={brief:t.prompt||t.brief,canvas:{width_mm:t.lengthMM||5e3,height_mm:t.widthMM||5e3},options:{mood:t.mood||"playful",composition:t.composition||"mixed",colorCount:t.maxColours||t.colorCount||5,seed:t.seed},validate:!0},r=await fetch(WS.GEOMETRIC_GENERATE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to generate design. Please try a different prompt or settings.")}return r.json()}}const Ml=new uU;function hU({recipes:e,onClose:t}){if(!e||e.length===0)return u.jsxs("div",{className:"solid-summary-empty",children:[u.jsx("p",{children:"No colours in design."}),u.jsx("button",{onClick:t,className:"close-button",children:"Close"})]});const n=e.reduce((r,i)=>r+i.targetColor.areaPct,0);return u.jsxs("div",{className:"solid-color-summary",children:[u.jsxs("div",{className:"summary-header",children:[u.jsx("h3",{children:"TPV Colours Used"}),u.jsx("button",{onClick:t,className:"close-button-icon",children:""})]}),u.jsx("div",{className:"summary-info",children:u.jsxs("p",{className:"summary-description",children:["This design uses ",u.jsx("strong",{children:e.length})," pure TPV colour",e.length!==1?"s":""," (no blending required)"]})}),u.jsx("div",{className:"colors-list",children:e.map((r,i)=>{const s=r.chosenRecipe.components[0],a=r.targetColor.areaPct;return u.jsxs("div",{className:"color-item",children:[u.jsx("div",{className:"color-swatch",style:{backgroundColor:r.blendColor.hex},title:`${s.code} - ${s.name}`}),u.jsxs("div",{className:"color-details",children:[u.jsxs("div",{className:"color-primary",children:[u.jsx("span",{className:"color-code",children:s.code}),u.jsx("span",{className:"color-name",children:s.name})]}),u.jsxs("div",{className:"color-secondary",children:[u.jsx("span",{className:"hex-value",children:r.blendColor.hex}),u.jsxs("span",{className:"coverage-badge",children:[a.toFixed(1),"%"]})]})]})]},i)})}),u.jsxs("div",{className:"summary-footer",children:[u.jsxs("div",{className:"footer-stat",children:[u.jsx("span",{className:"stat-label",children:"Total Coverage:"}),u.jsxs("span",{className:"stat-value",children:[n.toFixed(1),"%"]})]}),u.jsxs("div",{className:"footer-stat",children:[u.jsx("span",{className:"stat-label",children:"TPV Colours:"}),u.jsx("span",{className:"stat-value",children:e.length})]})]}),u.jsx("style",{jsx:!0,children:`
        .solid-color-summary {
          background: #fff;
          border-radius: 8px;
          border: 1px solid #ddd;
          padding: 2rem;
          max-width: 800px;
          margin: 2rem auto;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .solid-summary-empty {
          background: #fff;
          border-radius: 8px;
          padding: 2rem;
          text-align: center;
        }

        .summary-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          padding-bottom: 1rem;
          border-bottom: 2px solid #1a365d;
        }

        .summary-header h3 {
          margin: 0;
          color: #1a365d;
          font-size: 1.8rem;
        }

        .close-button-icon {
          background: none;
          border: none;
          font-size: 2rem;
          color: #666;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          line-height: 1;
          transition: color 0.2s;
        }

        .close-button-icon:hover {
          color: #333;
        }

        .summary-info {
          background: #f9f9f9;
          padding: 1rem;
          border-radius: 6px;
          margin-bottom: 1.5rem;
        }

        .summary-description {
          margin: 0;
          color: #333;
          font-size: 1rem;
          line-height: 1.5;
        }

        /* Colors List */
        .colors-list {
          display: flex;
          flex-direction: column;
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        .color-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
          border: 1px solid #e0e0e0;
          transition: all 0.2s;
        }

        .color-item:hover {
          border-color: #ff6b35;
          box-shadow: 0 2px 8px rgba(255, 107, 53, 0.15);
        }

        .color-swatch {
          width: 60px;
          height: 60px;
          border-radius: 8px;
          border: 2px solid #ddd;
          flex-shrink: 0;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .color-details {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .color-primary {
          display: flex;
          align-items: baseline;
          gap: 0.5rem;
        }

        .color-code {
          font-family: 'Courier New', monospace;
          font-weight: 700;
          font-size: 1.2rem;
          color: #1a365d;
        }

        .color-name {
          font-size: 1.1rem;
          color: #333;
          font-weight: 500;
        }

        .color-secondary {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .hex-value {
          font-family: 'Courier New', monospace;
          font-size: 0.9rem;
          color: #666;
        }

        .coverage-badge {
          background: #ff6b35;
          color: white;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-weight: 600;
          font-size: 0.9rem;
        }

        /* Summary Footer */
        .summary-footer {
          display: flex;
          justify-content: space-around;
          padding: 1.5rem;
          background: #f9f9f9;
          border-radius: 6px;
          border: 2px solid #ff6b35;
        }

        .footer-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
        }

        .stat-label {
          font-size: 0.9rem;
          color: #666;
          font-weight: 500;
        }

        .stat-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: #1a365d;
        }

        .close-button {
          padding: 0.75rem 1.5rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 4px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .close-button:hover {
          background: #e55a25;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
          .solid-color-summary {
            padding: 1rem;
          }

          .summary-header h3 {
            font-size: 1.4rem;
          }

          .color-item {
            flex-direction: column;
            align-items: flex-start;
          }

          .color-swatch {
            width: 100%;
            height: 50px;
          }

          .summary-footer {
            flex-direction: column;
            gap: 1rem;
          }
        }
      `})]})}function yw({content:e,position:t="top"}){const[n,r]=pe.useState(!1);return u.jsxs("div",{className:"help-icon-container",children:[u.jsx("button",{className:"help-icon",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:i=>{i.preventDefault(),i.stopPropagation(),r(!n)},type:"button","aria-label":"Help",children:"?"}),n&&u.jsx("div",{className:`help-tooltip help-tooltip-${t}`,children:e}),u.jsx("style",{children:`
        .help-icon-container {
          position: relative;
          display: inline-block;
        }

        .help-icon {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 18px;
          height: 18px;
          border-radius: 50%;
          background: #6b7280;
          color: white;
          border: none;
          font-size: 12px;
          font-weight: 600;
          cursor: help;
          transition: all 0.2s;
          padding: 0;
          line-height: 1;
        }

        .help-icon:hover {
          background: #374151;
          transform: scale(1.1);
        }

        .help-tooltip {
          position: absolute;
          z-index: 1000;
          background: #1f2937;
          color: white;
          padding: 0.75rem 1rem;
          border-radius: 6px;
          font-size: 0.875rem;
          line-height: 1.5;
          max-width: 300px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          pointer-events: none;
          white-space: normal;
        }

        .help-tooltip-top {
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
        }

        .help-tooltip-top::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          border: 6px solid transparent;
          border-top-color: #1f2937;
        }

        .help-tooltip-bottom {
          top: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
        }

        .help-tooltip-bottom::after {
          content: '';
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          border: 6px solid transparent;
          border-bottom-color: #1f2937;
        }

        .help-tooltip-right {
          left: calc(100% + 8px);
          top: 50%;
          transform: translateY(-50%);
        }

        .help-tooltip-right::after {
          content: '';
          position: absolute;
          right: 100%;
          top: 50%;
          transform: translateY(-50%);
          border: 6px solid transparent;
          border-right-color: #1f2937;
        }

        .help-tooltip-left {
          right: calc(100% + 8px);
          top: 50%;
          transform: translateY(-50%);
        }

        .help-tooltip-left::after {
          content: '';
          position: absolute;
          left: 100%;
          top: 50%;
          transform: translateY(-50%);
          border: 6px solid transparent;
          border-left-color: #1f2937;
        }

        @media (max-width: 768px) {
          .help-tooltip {
            max-width: 250px;
            font-size: 0.8125rem;
            padding: 0.625rem 0.875rem;
          }
        }
      `})]})}function dU({recipes:e,mode:t="blend",onColorClick:n,selectedColor:r,editedColors:i,onResetAll:s}){if(!e||e.length===0)return null;const a=m=>!i||i.size===0?!1:i.has(m.originalColor.hex.toLowerCase()),o=m=>{if(!i||i.size===0)return!1;const g=i.get(m.originalColor.hex.toLowerCase());return(g==null?void 0:g.newHex)==="transparent"||(g==null?void 0:g.newHex)==="none"},c=i&&i.size>0,h=m=>{const g=m.toLowerCase();return fi.find(v=>v.hex.toLowerCase()===g)},d=m=>{if(o(m))return"Transparent";if(t==="solid"){const g=h(m.blendColor.hex);if(g)return`${g.code} - ${g.name}`}return m.blendColor.hex},p=m=>{if(!r)return!1;const g=r.blendHex||r.hex;return m.blendColor.hex===g||m.targetColor.hex===g};return u.jsxs("div",{className:"color-legend",children:[u.jsxs("div",{className:"legend-header",children:[u.jsxs("div",{className:"legend-header-left",children:[u.jsx("span",{className:"legend-title",children:"Colours"}),u.jsx(yw,{content:"Click any colour to edit all instances of that colour across the design. Changes apply to every region using that colour.",position:"right"}),n&&u.jsx("span",{className:"edit-hint",children:"(click to edit)"})]}),c&&s&&u.jsx("button",{onClick:s,className:"reset-all-btn",title:"Reset all colours to original",children:"Reset All"})]}),u.jsx("div",{className:"legend-colors",children:e.map((m,g)=>u.jsxs("div",{className:`color-item ${n?"clickable":""} ${p(m)?"selected":""}`,onClick:()=>{n&&n({hex:m.targetColor.hex,originalHex:m.originalColor.hex,blendHex:m.blendColor.hex,areaPct:m.targetColor.areaPct,recipe:m.chosenRecipe,targetColor:m.targetColor,isAddedFromEdit:m.isAddedFromEdit||!1,chosenRecipe:m.chosenRecipe},"palette")},title:n?"Click to edit this colour":"",children:[u.jsxs("div",{className:"color-swatch-wrapper",children:[u.jsx("div",{className:`color-swatch ${o(m)?"transparent-swatch":""}`,style:o(m)?{}:{backgroundColor:m.blendColor.hex}}),o(m)&&u.jsx("span",{className:"transparent-indicator",title:"Made transparent",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",width:"14",height:"14",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"20"})]})}),a(m)&&!o(m)&&u.jsx("span",{className:"edit-indicator",title:"Colour has been modified",children:u.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:u.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})})]}),u.jsxs("div",{className:"color-info",children:[u.jsx("span",{className:t==="solid"?"tpv-label":"hex-value",children:d(m)}),u.jsxs("span",{className:"coverage",children:[m.targetColor.areaPct.toFixed(1),"%"]})]})]},g))}),u.jsx("style",{jsx:!0,children:`
        .color-legend {
          background: rgba(255, 255, 255, 0.95);
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1rem;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          width: 100%;
        }

        .legend-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 0.5rem;
          margin-bottom: 0.75rem;
          padding-bottom: 0.5rem;
          border-bottom: 1px solid #e0e0e0;
        }

        .legend-header-left {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .legend-title {
          font-weight: 600;
          color: #1a365d;
          font-size: 0.95rem;
        }

        .edit-hint {
          font-size: 0.75rem;
          color: #ff6b35;
          font-weight: normal;
        }

        .reset-all-btn {
          padding: 0.25rem 0.5rem;
          font-size: 0.7rem;
          font-weight: 600;
          color: #ff6b35;
          background: #fff5f0;
          border: 1px solid #ff6b35;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .reset-all-btn:hover {
          background: #ff6b35;
          color: white;
        }

        .legend-colors {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
          gap: 0.75rem;
        }

        .color-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.5rem;
          border-radius: 4px;
          background: white;
          border: 1px solid #e8e8e8;
          transition: all 0.2s;
        }

        .color-item.clickable {
          cursor: pointer;
        }

        .color-item.clickable:hover {
          border-color: #ff6b35;
          background: #fff9f7;
          box-shadow: 0 2px 4px rgba(255, 107, 53, 0.15);
          transform: translateY(-2px);
        }

        .color-item.selected {
          border-color: #ff6b35;
          border-width: 2px;
          background: #fff9f7;
          box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
          transform: translateY(-2px);
        }

        .color-swatch-wrapper {
          position: relative;
          flex-shrink: 0;
        }

        .color-swatch {
          width: 40px;
          height: 40px;
          border-radius: 4px;
          border: 2px solid #ddd;
        }

        .color-swatch.transparent-swatch {
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
          border-color: #999;
        }

        .transparent-indicator {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 18px;
          height: 18px;
          background: #6b7280;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .transparent-indicator svg {
          width: 12px;
          height: 12px;
        }

        .edit-indicator {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 16px;
          height: 16px;
          background: #ff6b35;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .edit-indicator svg {
          width: 10px;
          height: 10px;
        }

        .color-info {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          font-size: 0.85rem;
        }

        .hex-value {
          font-family: 'Courier New', monospace;
          font-weight: 600;
          color: #333;
        }

        .tpv-label {
          font-weight: 600;
          color: #1a365d;
          font-size: 0.9rem;
        }

        .coverage {
          color: #666;
          font-size: 0.8rem;
        }

        /* Mobile - compact horizontal grid of swatches */
        @media (max-width: 768px) {
          .color-legend {
            padding: 0.75rem;
          }

          .legend-header {
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
          }

          .legend-title {
            font-size: 0.85rem;
          }

          .edit-hint {
            font-size: 0.7rem;
          }

          .reset-all-btn {
            font-size: 0.65rem;
            padding: 0.2rem 0.4rem;
            min-height: 28px;
          }

          /* Horizontal scrolling grid of swatches */
          .legend-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: flex-start;
          }

          .color-item {
            flex-direction: column;
            padding: 0.25rem;
            border-radius: 6px;
            width: auto;
            min-width: 44px;
          }

          /* Hide text info on mobile - just show swatches */
          .color-info {
            display: none;
          }

          .color-swatch {
            width: 44px;
            height: 44px;
            border-radius: 6px;
          }

          .color-item.selected {
            transform: none;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.4);
          }

          .color-item.clickable:hover {
            transform: none;
          }

          .edit-indicator {
            top: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
          }

          .edit-indicator svg {
            width: 8px;
            height: 8px;
          }
        }

        @media (max-width: 480px) {
          .color-legend {
            padding: 0.5rem;
          }

          .legend-colors {
            gap: 0.35rem;
          }

          .color-swatch {
            width: 40px;
            height: 40px;
          }

          .color-item {
            min-width: 40px;
          }
        }
      `})]})}const fU=[{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH70",name:"Black",hex:"#231F20"}];function pU({blendSvgUrl:e,recipes:t,mode:n="blend",onColorClick:r,onRegionClick:i,onEyedropperCancel:s,onMakeTransparent:a,onTrueCutout:o,isCutoutProcessing:c=!1,cutoutError:h=null,onSelectTPVColor:d,selectedColor:p,editedColors:m,onResetAll:g,designName:v="",onNameChange:w,isNameLoading:C=!1,onInSituClick:x,eyedropperActive:k=!1,eyedropperRegion:P=null,onRegionUndo:j,onRegionRedo:M,canUndo:S=!1,canRedo:B=!1,regionOverridesCount:D=0}){const[R,ee]=pe.useState(null),[ue,ie]=pe.useState(null),ge=pe.useRef(null),H=pe.useRef(null);pe.useRef(null);const[ye,Ae]=pe.useState(1),[we,Be]=pe.useState({x:0,y:0}),[xe,Le]=pe.useState(!1),[Ce,Re]=pe.useState({x:0,y:0}),it=pe.useRef(null),nt=pe.useRef(!1),[Ue,lt]=pe.useState(()=>localStorage.getItem("tpv_color_editing_tip_dismissed")!=="true"),de=()=>{lt(!1),localStorage.setItem("tpv_color_editing_tip_dismissed","true")};pe.useEffect(()=>{if(!e){ie(null);return}(async()=>{try{const Me=await(await fetch(e)).text();ie(Me);const Je=Me.includes("data-region-id"),De=(Me.match(/data-region-id/g)||[]).length;console.log("[SVGPreview] Fetched inline SVG content - length:",Me.length,"hasRegionTags:",Je,"regionCount:",De)}catch(me){console.error("[SVGPreview] Failed to fetch SVG content:",me),ie(null)}})()},[e]);const oe=pe.useMemo(()=>{if(!ue)return null;console.log("[SVGPreview] Sanitizing SVG content...");const ve=dw(ue);return ve?(console.log("[SVGPreview] SVG sanitization complete - length:",ve.length),console.log("[SVGPreview] Sanitized content preview:",ve.substring(0,200)),ve.includes("<svg")?ve.replace(/<svg([^>]*)>/i,(Me,Je)=>(Je.includes("width=")||(Je+=' width="100%"'),Je.includes("height=")||(Je+=' height="100%"'),`<svg${Je}>`)):(console.error("[SVGPreview] Sanitized SVG does not contain <svg> tag!"),null)):(console.error("[SVGPreview] SVG sanitization failed - content rejected"),null)},[ue]);pe.useEffect(()=>{if(!p||!e){ee(null);return}(async()=>{try{console.log("[SVGPreview] Creating highlight for color:",p);const me=new Image;me.crossOrigin="anonymous";const Me=new Promise(($,F)=>{me.onload=()=>{console.log("[SVGPreview] Image loaded:",me.width,"x",me.height),$()},me.onerror=G=>{console.error("[SVGPreview] Image load error:",G),F(G)}});me.src=e,await Me;const Je=document.createElement("canvas");Je.width=me.naturalWidth||me.width||1e3,Je.height=me.naturalHeight||me.height||1e3;const De=Je.getContext("2d");De.drawImage(me,0,0);const f=De.getImageData(0,0,Je.width,Je.height).data,b=p.hex,_=We(b);console.log("[SVGPreview] Target color:",b,_);const E=new Set;let A=0;for(let $=0;$<Je.height;$++)for(let F=0;F<Je.width;F++){const G=($*Je.width+F)*4,Z=f[G],Y=f[G+1],W=f[G+2];f[G+3]>0&&Ne(Z,Y,W,_)&&(E.add(`${F},${$}`),A++)}if(console.log("[SVGPreview] Matched pixels:",A),A===0){console.warn("[SVGPreview] No pixels matched the target color"),ee(null);return}const T=De.createImageData(Je.width,Je.height);for(let $=0;$<Je.height;$++)for(let F=0;F<Je.width;F++){const G=($*Je.width+F)*4;E.has(`${F},${$}`)&&(!E.has(`${F-1},${$}`)||!E.has(`${F+1},${$}`)||!E.has(`${F},${$-1}`)||!E.has(`${F},${$+1}`))&&(T.data[G]=255,T.data[G+1]=0,T.data[G+2]=255,T.data[G+3]=255)}De.clearRect(0,0,Je.width,Je.height),De.putImageData(T,0,0);const N=Je.toDataURL();console.log("[SVGPreview] Highlight mask created"),ee(N)}catch(me){console.error("[SVGPreview] Failed to create highlight mask:",me),ee(null)}})()},[p,e]);const We=ve=>{const me=ve.replace("#","");return{r:parseInt(me.substring(0,2),16),g:parseInt(me.substring(2,4),16),b:parseInt(me.substring(4,6),16)}},Ne=(ve,me,Me,Je)=>Math.abs(ve-Je.r)<=50&&Math.abs(me-Je.g)<=50&&Math.abs(Me-Je.b)<=50,ht=async(ve,me)=>{try{if(!ge.current||!e)return null;const Me=new Image;Me.crossOrigin="anonymous";const Je=new Promise(($,F)=>{Me.onload=$,Me.onerror=F});Me.src=e,await Je;const De=document.createElement("canvas");De.width=Me.naturalWidth||Me.width||1e3,De.height=Me.naturalHeight||Me.height||1e3;const l=De.getContext("2d");l.drawImage(Me,0,0);const f=ge.current.getBoundingClientRect(),b=De.width/f.width,_=De.height/f.height,E=Math.floor(ve*b),A=Math.floor(me*_),N=l.getImageData(E,A,1,1).data;return{r:N[0],g:N[1],b:N[2],a:N[3]}}catch(Me){return console.error("[SVGPreview] Failed to get color at position:",Me),null}},jt=()=>{Ae(ve=>Math.min(ve*1.5,5))},Ct=()=>{Ae(ve=>Math.max(ve/1.5,.5))},q=()=>{Ae(1),Be({x:0,y:0})},Ye=ve=>{ve.preventDefault();const me=ve.deltaY*-.001;Ae(Me=>Math.min(Math.max(Me+me,.5),5))},se=ve=>{ve.button===0&&(Le(!0),Re({x:ve.clientX-we.x,y:ve.clientY-we.y}),nt.current=!1)},L=ve=>{if(!xe)return;const me=Math.abs(ve.clientX-(Ce.x+we.x)),Me=Math.abs(ve.clientY-(Ce.y+we.y));(me>5||Me>5)&&(nt.current=!0),Be({x:ve.clientX-Ce.x,y:ve.clientY-Ce.y})},I=()=>{Le(!1)};pe.useEffect(()=>{if(xe)return document.addEventListener("mousemove",L),document.addEventListener("mouseup",I),()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",I)}},[xe,Ce,we]);const Q=ve=>{let me=ve;for(;me&&me!==H.current;){if(me.hasAttribute&&me.hasAttribute("data-region-id"))return me;me=me.parentElement}return null},he=async ve=>{var b,_;if(nt.current){console.log("[SVGPreview] Click ignored - was dragging");return}if(console.log("[SVGPreview] Click detected - onRegionClick:",!!i,"inlineSvgContent:",!!ue,"target:",ve.target.tagName),i&&ue){console.log("[SVGPreview] Attempting region detection on target:",ve.target);const E=Q(ve.target);if(console.log("[SVGPreview] Found region element:",E),E){const A=E.getAttribute("data-region-id"),T=E.getAttribute("fill")||((_=(b=E.getAttribute("style"))==null?void 0:b.match(/fill:\s*([^;]+)/))==null?void 0:_[1]);console.log("[SVGPreview] Region clicked:",A,"fill:",T),i({regionId:A,sourceColor:T,element:E});return}else console.log("[SVGPreview] No region element found from target")}else console.log("[SVGPreview] Region detection skipped - onRegionClick:",!!i,"inlineSvgContent:",!!ue);if(!r||!t||t.length===0)return;const me=ve.currentTarget.getBoundingClientRect(),Me=ve.clientX-me.left,Je=ve.clientY-me.top;console.log("[SVGPreview] Clicked at:",Me,Je);const De=await ht(Me,Je);if(!De||De.a===0){console.log("[SVGPreview] Clicked on transparent area");return}console.log("[SVGPreview] Clicked color:",De);let l=null,f=1/0;for(const E of t){const A=E.targetColor.hex,T=We(A);if(Ne(De.r,De.g,De.b,T)){const N=Math.sqrt(Math.pow(De.r-T.r,2)+Math.pow(De.g-T.g,2)+Math.pow(De.b-T.b,2));N<f&&(f=N,l=E)}}l?(console.log("[SVGPreview] Matched recipe:",l.targetColor.hex),r({hex:l.targetColor.hex,originalHex:l.originalColor.hex,blendHex:l.blendColor.hex,areaPct:l.targetColor.areaPct,recipe:l.chosenRecipe,targetColor:l.targetColor,isAddedFromEdit:l.isAddedFromEdit||!1,chosenRecipe:l.chosenRecipe})):console.log("[SVGPreview] No matching recipe found for clicked color")};return e?u.jsxs("div",{className:"svg-preview",children:[u.jsxs("div",{className:"preview-header",children:[u.jsxs("div",{className:"design-name-container",children:[w?u.jsx("input",{type:"text",className:"design-name-input",value:v,onChange:ve=>w(ve.target.value),placeholder:C?"Generating name...":"Enter project name"}):u.jsx("h3",{children:v||"TPV Blend Design"}),C&&u.jsx("span",{className:"name-loading",children:"Generating..."})]}),p&&u.jsxs("span",{className:"editing-hint",children:["Editing: ",p.hex||p.blendHex]})]}),Ue&&r&&u.jsxs("div",{className:"color-editing-tip",children:[u.jsx("div",{className:"tip-icon",children:""}),u.jsxs("div",{className:"tip-content",children:[u.jsx("strong",{children:"Tip:"})," Click colours in the legend below to edit all instances, or click directly on the design to edit individual regions."]}),u.jsx("button",{onClick:de,className:"tip-close",title:"Dismiss tip",children:""})]}),u.jsxs("div",{className:"svg-display-container",children:[u.jsxs("div",{className:"svg-panel",children:[u.jsxs("div",{className:"zoom-controls",children:[u.jsx("button",{onClick:jt,className:"zoom-btn",title:"Zoom In",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),u.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),u.jsx("path",{d:"m21 21-4.35-4.35"})]})}),u.jsx("button",{onClick:Ct,className:"zoom-btn",title:"Zoom Out",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),u.jsx("path",{d:"m21 21-4.35-4.35"})]})}),u.jsx("button",{onClick:q,className:"zoom-btn",title:"Reset View",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M1 4v6h6"}),u.jsx("path",{d:"M23 20v-6h-6"}),u.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}),u.jsxs("span",{className:"zoom-level",children:[Math.round(ye*100),"%"]})]}),D>0&&u.jsxs("div",{className:"undo-redo-controls",children:[u.jsx("button",{onClick:j,className:"undo-redo-btn",title:"Undo (Ctrl+Z)",disabled:!S,children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 7v6h6"}),u.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),u.jsx("button",{onClick:M,className:"undo-redo-btn",title:"Redo (Ctrl+Y)",disabled:!B,children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M21 7v6h-6"}),u.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})]})})]}),x&&u.jsxs("button",{onClick:x,className:"in-situ-btn",title:"Upload a photo of your installation site and see how this design will look in place with realistic perspective",children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("path",{d:"m21 15-5-5L5 21"})]}),u.jsx("span",{children:"Preview In-Situ"})]}),u.jsx("div",{ref:it,className:"svg-wrapper",onWheel:Ye,children:u.jsxs("div",{className:"svg-image-container",onClick:he,onMouseDown:se,style:{transform:`translate(${we.x}px, ${we.y}px) scale(${ye})`,cursor:xe?"grabbing":ye>1?"grab":k?"crosshair":r?"pointer":"default"},children:[oe?u.jsx("div",{ref:H,className:"svg-inline-container",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:oe}}):u.jsx("img",{ref:ge,src:e,alt:"TPV blend design",className:"svg-image"}),R&&u.jsx("img",{src:R,alt:"Colour highlight",className:"svg-highlight-mask"})]})}),k&&P&&u.jsx("div",{className:"eyedropper-overlay",children:u.jsxs("div",{className:"eyedropper-content",children:[u.jsx("div",{className:"eyedropper-header",children:u.jsxs("div",{className:"eyedropper-color-indicator",children:[u.jsx("div",{className:"eyedropper-color-swatch",style:{backgroundColor:P.sourceColor}}),u.jsx("span",{children:"Click another area to copy its colour, or select a TPV colour:"})]})}),u.jsx("div",{className:"eyedropper-palette",children:u.jsx("div",{className:"palette-grid",children:fU.map(ve=>u.jsx("button",{className:"palette-swatch",style:{backgroundColor:ve.hex},onClick:me=>{me.stopPropagation(),d&&d({hex:ve.hex,code:ve.code,name:ve.name})},title:`${ve.name} (${ve.code})`},ve.code))})}),u.jsxs("div",{className:"eyedropper-actions",children:[u.jsxs("div",{className:"transparency-options",children:[u.jsxs("button",{className:"eyedropper-transparent",onClick:ve=>{ve.stopPropagation(),a&&a()},title:"Make region visually transparent (reversible, fast)",children:[u.jsx("span",{className:"transparent-icon",children:""}),"Transparent (Visual)"]}),o&&u.jsx("button",{className:"eyedropper-cutout",onClick:ve=>{ve.stopPropagation(),o()},disabled:c,title:"Remove geometry completely - fixes hidden shapes (slower, irreversible)",children:c?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"cutout-spinner"}),"Cutting..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"cutout-icon",children:""}),"True Cut-out"]})})]}),h&&u.jsx("div",{className:"cutout-error",children:h}),u.jsx("button",{className:"eyedropper-cancel",onClick:ve=>{ve.stopPropagation(),s&&s()},children:"Cancel (Esc)"})]})]})})]}),t&&t.length>0&&u.jsx("div",{className:"legend-sidebar",children:u.jsx(dU,{recipes:t,mode:n,onColorClick:r,selectedColor:p,editedColors:m,onResetAll:g})})]}),u.jsx("style",{jsx:!0,children:`
        .svg-preview {
          background: #fff;
          border-radius: 8px;
          border: 1px solid #ddd;
          padding: 1.5rem;
          margin-top: 1.5rem;
        }

        .preview-header {
          margin-bottom: 1.5rem;
          display: flex;
          align-items: center;
          justify-content: space-between;
          flex-wrap: wrap;
          gap: 0.5rem;
        }

        .design-name-container {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          flex: 1;
        }

        .preview-header h3 {
          margin: 0;
          color: #1a365d;
          font-size: 1.5rem;
        }

        .design-name-input {
          font-family: var(--font-heading), 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          color: #1a365d;
          border: none;
          border-bottom: 2px solid transparent;
          background: transparent;
          padding: 0.25rem 0;
          width: 100%;
          max-width: 400px;
          transition: border-color 0.2s;
        }

        .design-name-input:hover {
          border-bottom-color: #e5e7eb;
        }

        .design-name-input:focus {
          outline: none;
          border-bottom-color: #ff6b35;
        }

        .design-name-input::placeholder {
          color: #9ca3af;
          font-weight: normal;
        }

        .name-loading {
          font-size: 0.75rem;
          color: #9ca3af;
          font-style: italic;
        }

        /* Color Editing Tip Banner */
        .color-editing-tip {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.875rem 1rem;
          background: linear-gradient(to right, #fff7ed, #fffbeb);
          border: 1px solid #fed7aa;
          border-radius: 6px;
          margin-bottom: 1rem;
          font-size: 0.875rem;
          line-height: 1.5;
        }

        .tip-icon {
          font-size: 1.25rem;
          flex-shrink: 0;
        }

        .tip-content {
          flex: 1;
          color: #78350f;
        }

        .tip-content strong {
          color: #92400e;
        }

        .tip-close {
          background: none;
          border: none;
          font-size: 1.5rem;
          color: #92400e;
          cursor: pointer;
          padding: 0;
          line-height: 1;
          opacity: 0.6;
          transition: opacity 0.2s;
          flex-shrink: 0;
        }

        .tip-close:hover {
          opacity: 1;
        }

        /* SVG Display */
        .svg-display-container {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          align-items: stretch;
        }

        .svg-panel {
          position: relative;
          flex: 1;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          overflow: hidden;
          background: #fafafa;
        }

        /* Zoom Controls */
        .zoom-controls {
          position: absolute;
          top: 1rem;
          right: 1rem;
          display: flex;
          gap: 0.5rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
          z-index: 10;
          align-items: center;
        }

        .zoom-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          padding: 0;
          background: white;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          cursor: pointer;
          color: #1a365d;
          transition: all 0.2s ease;
        }

        .zoom-btn:hover {
          background: #f8fafc;
          border-color: #1e4a7a;
          transform: translateY(-1px);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .zoom-btn:active {
          transform: translateY(0);
        }

        .zoom-btn svg {
          width: 20px;
          height: 20px;
        }

        .zoom-level {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1a365d;
          min-width: 50px;
          text-align: center;
          padding: 0 0.5rem;
        }

        /* Undo/Redo Controls */
        .undo-redo-controls {
          position: absolute;
          top: 5rem;
          right: 1rem;
          display: flex;
          gap: 0.5rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
          z-index: 10;
        }

        .undo-redo-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          padding: 0;
          background: white;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          cursor: pointer;
          color: #1a365d;
          transition: all 0.2s ease;
        }

        .undo-redo-btn:hover:not(:disabled) {
          background: #f8fafc;
          border-color: #1e4a7a;
          transform: translateY(-1px);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .undo-redo-btn:active:not(:disabled) {
          transform: translateY(0);
        }

        .undo-redo-btn:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }

        .undo-redo-btn svg {
          width: 20px;
          height: 20px;
        }

        .in-situ-btn {
          position: absolute;
          top: 1rem;
          left: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          box-shadow: 0 2px 12px rgba(255, 107, 53, 0.3);
          z-index: 10;
          transition: all 0.2s ease;
        }

        .in-situ-btn:hover {
          background: #e55a2b;
          transform: translateY(-1px);
          box-shadow: 0 4px 16px rgba(255, 107, 53, 0.4);
        }

        .in-situ-btn:active {
          transform: translateY(0);
        }

        .in-situ-btn svg {
          width: 18px;
          height: 18px;
        }

        .svg-wrapper {
          padding: 2rem;
          background: white;
          min-height: 400px;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: relative;
        }

        .svg-image-container {
          position: relative;
          display: inline-block;
          user-select: none;
          transition: transform 0.1s ease-out;
          transform-origin: center center;
        }

        .svg-image {
          max-width: 100%;
          height: auto;
          display: block;
          border-radius: 4px;
          pointer-events: ${r?"auto":"none"};
        }

        .svg-inline-container {
          max-width: 100%;
          display: block;
          border-radius: 4px;
        }

        .svg-inline-container svg {
          max-width: 100%;
          height: auto;
          display: block;
        }

        .svg-highlight-mask {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          border-radius: 4px;
          filter: drop-shadow(0 0 3px rgba(255, 0, 255, 0.8)) drop-shadow(0 0 1px rgba(0, 0, 0, 0.6));
          animation: pulse 2s ease-in-out infinite;
        }

        .eyedropper-overlay {
          position: absolute;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 100;
        }

        .eyedropper-content {
          background: white;
          border-radius: 12px;
          padding: 16px 20px;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
          display: flex;
          flex-direction: column;
          gap: 12px;
          border: 2px solid #3b82f6;
          max-width: 320px;
        }

        .eyedropper-header {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .eyedropper-color-indicator {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 0.9rem;
          font-weight: 500;
          color: #111827;
        }

        .eyedropper-color-swatch {
          width: 28px;
          height: 28px;
          border-radius: 6px;
          border: 2px solid #d1d5db;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          flex-shrink: 0;
        }

        .eyedropper-palette {
          padding: 10px;
          background: #f9fafb;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .palette-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 4px;
        }

        .palette-swatch {
          width: 32px;
          height: 32px;
          border: 2px solid rgba(0, 0, 0, 0.15);
          border-radius: 4px;
          cursor: pointer;
          padding: 0;
          transition: all 0.15s ease;
        }

        .palette-swatch:hover {
          transform: scale(1.15);
          z-index: 1;
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);
          border-color: #3b82f6;
        }

        .eyedropper-cancel {
          padding: 8px 16px;
          background: #ef4444;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-cancel:hover {
          background: #dc2626;
          box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
        }

        .eyedropper-actions {
          display: flex;
          flex-direction: column;
          gap: 8px;
          align-items: center;
          justify-content: center;
        }

        .eyedropper-transparent {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: linear-gradient(135deg, #f3f4f6 25%, #d1d5db 25%, #d1d5db 50%, #f3f4f6 50%, #f3f4f6 75%, #d1d5db 75%);
          background-size: 8px 8px;
          color: #374151;
          border: 2px solid #6b7280;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-transparent:hover {
          border-color: #374151;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
          transform: translateY(-1px);
        }

        .transparent-icon {
          width: 16px;
          height: 16px;
          background: linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
                      linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
          border: 1px solid #999;
          border-radius: 2px;
          display: inline-block;
          font-size: 0;
        }

        .transparency-options {
          display: flex;
          gap: 6px;
          flex-wrap: wrap;
          justify-content: center;
        }

        .eyedropper-cutout {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: #fef3c7;
          color: #92400e;
          border: 2px solid #f59e0b;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-cutout:hover:not(:disabled) {
          background: #fde68a;
          border-color: #d97706;
          box-shadow: 0 2px 6px rgba(245, 158, 11, 0.3);
          transform: translateY(-1px);
        }

        .eyedropper-cutout:disabled {
          opacity: 0.7;
          cursor: not-allowed;
        }

        .cutout-icon {
          font-size: 1rem;
        }

        .cutout-spinner {
          width: 14px;
          height: 14px;
          border: 2px solid rgba(146, 64, 14, 0.3);
          border-top-color: #92400e;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .cutout-error {
          width: 100%;
          padding: 6px 10px;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 4px;
          color: #dc2626;
          font-size: 0.8rem;
          text-align: center;
          margin-top: 6px;
        }

        @keyframes pulse {
          0%, 100% {
            opacity: 0.8;
          }
          50% {
            opacity: 1;
          }
        }

        .editing-hint {
          font-size: 0.9rem;
          color: #ff6b35;
          font-weight: 500;
          margin-left: 1rem;
        }

        .legend-sidebar {
          width: 100%;
        }

        @media (max-width: 768px) {
          .svg-preview {
            padding: 0.5rem;
            margin-top: 0.75rem;
            border-radius: 6px;
          }

          .preview-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
          }

          .preview-header h3 {
            font-size: 1.1rem;
          }

          .design-name-input {
            font-size: 1.1rem;
            max-width: 100%;
          }

          .editing-hint {
            margin-left: 0;
            font-size: 0.75rem;
          }

          .svg-panel {
            border: none;
            border-radius: 0;
          }

          .svg-wrapper {
            padding: 0;
            min-height: auto;
          }

          /* Position zoom controls at bottom-right on mobile */
          .zoom-controls {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            top: auto;
            flex-direction: column;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            z-index: 50;
          }

          /* Position undo/redo controls above zoom on mobile */
          .undo-redo-controls {
            position: fixed;
            bottom: 12rem;
            right: 1rem;
            top: auto;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            z-index: 50;
          }

          /* Make buttons circular and compact on mobile */
          .zoom-btn,
          .undo-redo-btn {
            width: 44px;
            height: 44px;
            padding: 0;
            border-radius: 50%;
            min-width: unset;
            font-size: 1.1rem;
          }

          /* Hide text labels on mobile */
          .zoom-btn span {
            display: none;
          }

          /* In-situ button - compact on mobile */
          .in-situ-btn {
            padding: 0.4rem;
            font-size: 0;
            top: 0.5rem;
            left: 0.5rem;
            border-radius: 50%;
            width: 36px;
            height: 36px;
          }

          .in-situ-btn span {
            display: none;
          }

          .in-situ-btn svg {
            width: 18px;
            height: 18px;
          }

          .svg-image-container {
            /* Allow zoom on mobile via buttons */
            cursor: default !important;
          }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
          .svg-preview {
            padding: 0.25rem;
            margin-top: 0.5rem;
          }

          .preview-header {
            padding: 0 0.25rem;
          }

          .preview-header h3 {
            font-size: 1rem;
          }

          .design-name-input {
            font-size: 1rem;
          }
        }
      `})]}):null}var Vs={},_f={},mU=typeof Qa=="object"&&Qa&&Qa.Object===Object&&Qa,_N=mU,gU=_N,yU=typeof self=="object"&&self&&self.Object===Object&&self,bU=gU||yU||Function("return this")(),oo=bU,vU=oo,xU=vU.Symbol,kf=xU,R2=kf,kN=Object.prototype,wU=kN.hasOwnProperty,_U=kN.toString,Ih=R2?R2.toStringTag:void 0;function kU(e){var t=wU.call(e,Ih),n=e[Ih];try{e[Ih]=void 0;var r=!0}catch{}var i=_U.call(e);return r&&(t?e[Ih]=n:delete e[Ih]),i}var SU=kU,CU=Object.prototype,EU=CU.toString;function TU(e){return EU.call(e)}var jU=TU,M2=kf,AU=SU,PU=jU,NU="[object Null]",OU="[object Undefined]",L2=M2?M2.toStringTag:void 0;function RU(e){return e==null?e===void 0?OU:NU:L2&&L2 in Object(e)?AU(e):PU(e)}var yc=RU,MU=Array.isArray,Ma=MU;function LU(e){return e!=null&&typeof e=="object"}var Ro=LU,IU=yc,$U=Ma,DU=Ro,zU="[object String]";function FU(e){return typeof e=="string"||!$U(e)&&DU(e)&&IU(e)==zU}var BU=FU;function UU(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++i];if(n(s[c],c,s)===!1)break}return t}}var HU=UU,WU=HU,VU=WU(),GU=VU;function qU(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var YU=qU,XU=yc,KU=Ro,ZU="[object Arguments]";function QU(e){return KU(e)&&XU(e)==ZU}var JU=QU,I2=JU,eH=Ro,SN=Object.prototype,tH=SN.hasOwnProperty,nH=SN.propertyIsEnumerable,rH=I2(function(){return arguments}())?I2:function(e){return eH(e)&&tH.call(e,"callee")&&!nH.call(e,"callee")},CN=rH,ng={exports:{}};function iH(){return!1}var sH=iH;ng.exports;(function(e,t){var n=oo,r=sH,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?n.Buffer:void 0,c=o?o.isBuffer:void 0,h=c||r;e.exports=h})(ng,ng.exports);var bw=ng.exports,aH=9007199254740991,oH=/^(?:0|[1-9]\d*)$/;function lH(e,t){var n=typeof e;return t=t??aH,!!t&&(n=="number"||n!="symbol"&&oH.test(e))&&e>-1&&e%1==0&&e<t}var EN=lH,cH=9007199254740991;function uH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=cH}var vw=uH,hH=yc,dH=vw,fH=Ro,pH="[object Arguments]",mH="[object Array]",gH="[object Boolean]",yH="[object Date]",bH="[object Error]",vH="[object Function]",xH="[object Map]",wH="[object Number]",_H="[object Object]",kH="[object RegExp]",SH="[object Set]",CH="[object String]",EH="[object WeakMap]",TH="[object ArrayBuffer]",jH="[object DataView]",AH="[object Float32Array]",PH="[object Float64Array]",NH="[object Int8Array]",OH="[object Int16Array]",RH="[object Int32Array]",MH="[object Uint8Array]",LH="[object Uint8ClampedArray]",IH="[object Uint16Array]",$H="[object Uint32Array]",Ar={};Ar[AH]=Ar[PH]=Ar[NH]=Ar[OH]=Ar[RH]=Ar[MH]=Ar[LH]=Ar[IH]=Ar[$H]=!0;Ar[pH]=Ar[mH]=Ar[TH]=Ar[gH]=Ar[jH]=Ar[yH]=Ar[bH]=Ar[vH]=Ar[xH]=Ar[wH]=Ar[_H]=Ar[kH]=Ar[SH]=Ar[CH]=Ar[EH]=!1;function DH(e){return fH(e)&&dH(e.length)&&!!Ar[hH(e)]}var zH=DH;function FH(e){return function(t){return e(t)}}var xw=FH,rg={exports:{}};rg.exports;(function(e,t){var n=_N,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o})(rg,rg.exports);var ww=rg.exports,BH=zH,UH=xw,$2=ww,D2=$2&&$2.isTypedArray,HH=D2?UH(D2):BH,TN=HH,WH=YU,VH=CN,GH=Ma,qH=bw,YH=EN,XH=TN,KH=Object.prototype,ZH=KH.hasOwnProperty;function QH(e,t){var n=GH(e),r=!n&&VH(e),i=!n&&!r&&qH(e),s=!n&&!r&&!i&&XH(e),a=n||r||i||s,o=a?WH(e.length,String):[],c=o.length;for(var h in e)(t||ZH.call(e,h))&&!(a&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||YH(h,c)))&&o.push(h);return o}var jN=QH,JH=Object.prototype;function eW(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||JH;return e===n}var _w=eW;function tW(e,t){return function(n){return e(t(n))}}var AN=tW,nW=AN,rW=nW(Object.keys,Object),iW=rW,sW=_w,aW=iW,oW=Object.prototype,lW=oW.hasOwnProperty;function cW(e){if(!sW(e))return aW(e);var t=[];for(var n in Object(e))lW.call(e,n)&&n!="constructor"&&t.push(n);return t}var uW=cW;function hW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var dh=hW,dW=yc,fW=dh,pW="[object AsyncFunction]",mW="[object Function]",gW="[object GeneratorFunction]",yW="[object Proxy]";function bW(e){if(!fW(e))return!1;var t=dW(e);return t==mW||t==gW||t==pW||t==yW}var PN=bW,vW=PN,xW=vw;function wW(e){return e!=null&&xW(e.length)&&!vW(e)}var Qg=wW,_W=jN,kW=uW,SW=Qg;function CW(e){return SW(e)?_W(e):kW(e)}var Sf=CW,EW=GU,TW=Sf;function jW(e,t){return e&&EW(e,t,TW)}var NN=jW;function AW(e){return e}var ON=AW,PW=ON;function NW(e){return typeof e=="function"?e:PW}var OW=NW,RW=NN,MW=OW;function LW(e,t){return e&&RW(e,MW(t))}var kw=LW,IW=AN,$W=IW(Object.getPrototypeOf,Object),Sw=$W,DW=yc,zW=Sw,FW=Ro,BW="[object Object]",UW=Function.prototype,HW=Object.prototype,RN=UW.toString,WW=HW.hasOwnProperty,VW=RN.call(Object);function GW(e){if(!FW(e)||DW(e)!=BW)return!1;var t=zW(e);if(t===null)return!0;var n=WW.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&RN.call(n)==VW}var qW=GW;function YW(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var MN=YW;function XW(){this.__data__=[],this.size=0}var KW=XW;function ZW(e,t){return e===t||e!==e&&t!==t}var Cw=ZW,QW=Cw;function JW(e,t){for(var n=e.length;n--;)if(QW(e[n][0],t))return n;return-1}var Jg=JW,eV=Jg,tV=Array.prototype,nV=tV.splice;function rV(e){var t=this.__data__,n=eV(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():nV.call(t,n,1),--this.size,!0}var iV=rV,sV=Jg;function aV(e){var t=this.__data__,n=sV(t,e);return n<0?void 0:t[n][1]}var oV=aV,lV=Jg;function cV(e){return lV(this.__data__,e)>-1}var uV=cV,hV=Jg;function dV(e,t){var n=this.__data__,r=hV(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var fV=dV,pV=KW,mV=iV,gV=oV,yV=uV,bV=fV;function fh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fh.prototype.clear=pV;fh.prototype.delete=mV;fh.prototype.get=gV;fh.prototype.has=yV;fh.prototype.set=bV;var e0=fh,vV=e0;function xV(){this.__data__=new vV,this.size=0}var wV=xV;function _V(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var kV=_V;function SV(e){return this.__data__.get(e)}var CV=SV;function EV(e){return this.__data__.has(e)}var TV=EV,jV=oo,AV=jV["__core-js_shared__"],PV=AV,jy=PV,z2=function(){var e=/[^.]+$/.exec(jy&&jy.keys&&jy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function NV(e){return!!z2&&z2 in e}var OV=NV,RV=Function.prototype,MV=RV.toString;function LV(e){if(e!=null){try{return MV.call(e)}catch{}try{return e+""}catch{}}return""}var LN=LV,IV=PN,$V=OV,DV=dh,zV=LN,FV=/[\\^$.*+?()[\]{}|]/g,BV=/^\[object .+?Constructor\]$/,UV=Function.prototype,HV=Object.prototype,WV=UV.toString,VV=HV.hasOwnProperty,GV=RegExp("^"+WV.call(VV).replace(FV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qV(e){if(!DV(e)||$V(e))return!1;var t=IV(e)?GV:BV;return t.test(zV(e))}var YV=qV;function XV(e,t){return e==null?void 0:e[t]}var KV=XV,ZV=YV,QV=KV;function JV(e,t){var n=QV(e,t);return ZV(n)?n:void 0}var bc=JV,eG=bc,tG=oo,nG=eG(tG,"Map"),Ew=nG,rG=bc,iG=rG(Object,"create"),t0=iG,F2=t0;function sG(){this.__data__=F2?F2(null):{},this.size=0}var aG=sG;function oG(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lG=oG,cG=t0,uG="__lodash_hash_undefined__",hG=Object.prototype,dG=hG.hasOwnProperty;function fG(e){var t=this.__data__;if(cG){var n=t[e];return n===uG?void 0:n}return dG.call(t,e)?t[e]:void 0}var pG=fG,mG=t0,gG=Object.prototype,yG=gG.hasOwnProperty;function bG(e){var t=this.__data__;return mG?t[e]!==void 0:yG.call(t,e)}var vG=bG,xG=t0,wG="__lodash_hash_undefined__";function _G(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xG&&t===void 0?wG:t,this}var kG=_G,SG=aG,CG=lG,EG=pG,TG=vG,jG=kG;function ph(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ph.prototype.clear=SG;ph.prototype.delete=CG;ph.prototype.get=EG;ph.prototype.has=TG;ph.prototype.set=jG;var AG=ph,B2=AG,PG=e0,NG=Ew;function OG(){this.size=0,this.__data__={hash:new B2,map:new(NG||PG),string:new B2}}var RG=OG;function MG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var LG=MG,IG=LG;function $G(e,t){var n=e.__data__;return IG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var n0=$G,DG=n0;function zG(e){var t=DG(this,e).delete(e);return this.size-=t?1:0,t}var FG=zG,BG=n0;function UG(e){return BG(this,e).get(e)}var HG=UG,WG=n0;function VG(e){return WG(this,e).has(e)}var GG=VG,qG=n0;function YG(e,t){var n=qG(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var XG=YG,KG=RG,ZG=FG,QG=HG,JG=GG,eq=XG;function mh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mh.prototype.clear=KG;mh.prototype.delete=ZG;mh.prototype.get=QG;mh.prototype.has=JG;mh.prototype.set=eq;var Tw=mh,tq=e0,nq=Ew,rq=Tw,iq=200;function sq(e,t){var n=this.__data__;if(n instanceof tq){var r=n.__data__;if(!nq||r.length<iq-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new rq(r)}return n.set(e,t),this.size=n.size,this}var aq=sq,oq=e0,lq=wV,cq=kV,uq=CV,hq=TV,dq=aq;function gh(e){var t=this.__data__=new oq(e);this.size=t.size}gh.prototype.clear=lq;gh.prototype.delete=cq;gh.prototype.get=uq;gh.prototype.has=hq;gh.prototype.set=dq;var jw=gh,fq="__lodash_hash_undefined__";function pq(e){return this.__data__.set(e,fq),this}var mq=pq;function gq(e){return this.__data__.has(e)}var yq=gq,bq=Tw,vq=mq,xq=yq;function ig(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new bq;++t<n;)this.add(e[t])}ig.prototype.add=ig.prototype.push=vq;ig.prototype.has=xq;var wq=ig;function _q(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var kq=_q;function Sq(e,t){return e.has(t)}var Cq=Sq,Eq=wq,Tq=kq,jq=Cq,Aq=1,Pq=2;function Nq(e,t,n,r,i,s){var a=n&Aq,o=e.length,c=t.length;if(o!=c&&!(a&&c>o))return!1;var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=-1,m=!0,g=n&Pq?new Eq:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var v=e[p],w=t[p];if(r)var C=a?r(w,v,p,t,e,s):r(v,w,p,e,t,s);if(C!==void 0){if(C)continue;m=!1;break}if(g){if(!Tq(t,function(x,k){if(!jq(g,k)&&(v===x||i(v,x,n,r,s)))return g.push(k)})){m=!1;break}}else if(!(v===w||i(v,w,n,r,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var IN=Nq,Oq=oo,Rq=Oq.Uint8Array,$N=Rq;function Mq(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var Lq=Mq;function Iq(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var $q=Iq,U2=kf,H2=$N,Dq=Cw,zq=IN,Fq=Lq,Bq=$q,Uq=1,Hq=2,Wq="[object Boolean]",Vq="[object Date]",Gq="[object Error]",qq="[object Map]",Yq="[object Number]",Xq="[object RegExp]",Kq="[object Set]",Zq="[object String]",Qq="[object Symbol]",Jq="[object ArrayBuffer]",eY="[object DataView]",W2=U2?U2.prototype:void 0,Ay=W2?W2.valueOf:void 0;function tY(e,t,n,r,i,s,a){switch(n){case eY:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jq:return!(e.byteLength!=t.byteLength||!s(new H2(e),new H2(t)));case Wq:case Vq:case Yq:return Dq(+e,+t);case Gq:return e.name==t.name&&e.message==t.message;case Xq:case Zq:return e==t+"";case qq:var o=Fq;case Kq:var c=r&Uq;if(o||(o=Bq),e.size!=t.size&&!c)return!1;var h=a.get(e);if(h)return h==t;r|=Hq,a.set(e,t);var d=zq(o(e),o(t),r,i,s,a);return a.delete(e),d;case Qq:if(Ay)return Ay.call(e)==Ay.call(t)}return!1}var nY=tY;function rY(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var DN=rY,iY=DN,sY=Ma;function aY(e,t,n){var r=t(e);return sY(e)?r:iY(r,n(e))}var zN=aY;function oY(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}var lY=oY;function cY(){return[]}var FN=cY,uY=lY,hY=FN,dY=Object.prototype,fY=dY.propertyIsEnumerable,V2=Object.getOwnPropertySymbols,pY=V2?function(e){return e==null?[]:(e=Object(e),uY(V2(e),function(t){return fY.call(e,t)}))}:hY,Aw=pY,mY=zN,gY=Aw,yY=Sf;function bY(e){return mY(e,yY,gY)}var BN=bY,G2=BN,vY=1,xY=Object.prototype,wY=xY.hasOwnProperty;function _Y(e,t,n,r,i,s){var a=n&vY,o=G2(e),c=o.length,h=G2(t),d=h.length;if(c!=d&&!a)return!1;for(var p=c;p--;){var m=o[p];if(!(a?m in t:wY.call(t,m)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var w=!0;s.set(e,t),s.set(t,e);for(var C=a;++p<c;){m=o[p];var x=e[m],k=t[m];if(r)var P=a?r(k,x,m,t,e,s):r(x,k,m,e,t,s);if(!(P===void 0?x===k||i(x,k,n,r,s):P)){w=!1;break}C||(C=m=="constructor")}if(w&&!C){var j=e.constructor,M=t.constructor;j!=M&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof M=="function"&&M instanceof M)&&(w=!1)}return s.delete(e),s.delete(t),w}var kY=_Y,SY=bc,CY=oo,EY=SY(CY,"DataView"),TY=EY,jY=bc,AY=oo,PY=jY(AY,"Promise"),NY=PY,OY=bc,RY=oo,MY=OY(RY,"Set"),LY=MY,IY=bc,$Y=oo,DY=IY($Y,"WeakMap"),zY=DY,ox=TY,lx=Ew,cx=NY,ux=LY,hx=zY,UN=yc,yh=LN,q2="[object Map]",FY="[object Object]",Y2="[object Promise]",X2="[object Set]",K2="[object WeakMap]",Z2="[object DataView]",BY=yh(ox),UY=yh(lx),HY=yh(cx),WY=yh(ux),VY=yh(hx),Ul=UN;(ox&&Ul(new ox(new ArrayBuffer(1)))!=Z2||lx&&Ul(new lx)!=q2||cx&&Ul(cx.resolve())!=Y2||ux&&Ul(new ux)!=X2||hx&&Ul(new hx)!=K2)&&(Ul=function(e){var t=UN(e),n=t==FY?e.constructor:void 0,r=n?yh(n):"";if(r)switch(r){case BY:return Z2;case UY:return q2;case HY:return Y2;case WY:return X2;case VY:return K2}return t});var r0=Ul,Py=jw,GY=IN,qY=nY,YY=kY,Q2=r0,J2=Ma,eC=bw,XY=TN,KY=1,tC="[object Arguments]",nC="[object Array]",kp="[object Object]",ZY=Object.prototype,rC=ZY.hasOwnProperty;function QY(e,t,n,r,i,s){var a=J2(e),o=J2(t),c=a?nC:Q2(e),h=o?nC:Q2(t);c=c==tC?kp:c,h=h==tC?kp:h;var d=c==kp,p=h==kp,m=c==h;if(m&&eC(e)){if(!eC(t))return!1;a=!0,d=!1}if(m&&!d)return s||(s=new Py),a||XY(e)?GY(e,t,n,r,i,s):qY(e,t,c,n,r,i,s);if(!(n&KY)){var g=d&&rC.call(e,"__wrapped__"),v=p&&rC.call(t,"__wrapped__");if(g||v){var w=g?e.value():e,C=v?t.value():t;return s||(s=new Py),i(w,C,n,r,s)}}return m?(s||(s=new Py),YY(e,t,n,r,i,s)):!1}var JY=QY,eX=JY,iC=Ro;function HN(e,t,n,r,i){return e===t?!0:e==null||t==null||!iC(e)&&!iC(t)?e!==e&&t!==t:eX(e,t,n,r,HN,i)}var WN=HN,tX=jw,nX=WN,rX=1,iX=2;function sX(e,t,n,r){var i=n.length,s=i,a=!r;if(e==null)return!s;for(e=Object(e);i--;){var o=n[i];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){o=n[i];var c=o[0],h=e[c],d=o[1];if(a&&o[2]){if(h===void 0&&!(c in e))return!1}else{var p=new tX;if(r)var m=r(h,d,c,e,t,p);if(!(m===void 0?nX(d,h,rX|iX,r,p):m))return!1}}return!0}var aX=sX,oX=dh;function lX(e){return e===e&&!oX(e)}var VN=lX,cX=VN,uX=Sf;function hX(e){for(var t=uX(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,cX(i)]}return t}var dX=hX;function fX(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var GN=fX,pX=aX,mX=dX,gX=GN;function yX(e){var t=mX(e);return t.length==1&&t[0][2]?gX(t[0][0],t[0][1]):function(n){return n===e||pX(n,e,t)}}var bX=yX,vX=yc,xX=Ro,wX="[object Symbol]";function _X(e){return typeof e=="symbol"||xX(e)&&vX(e)==wX}var Pw=_X,kX=Ma,SX=Pw,CX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,EX=/^\w*$/;function TX(e,t){if(kX(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||SX(e)?!0:EX.test(e)||!CX.test(e)||t!=null&&e in Object(t)}var Nw=TX,qN=Tw,jX="Expected a function";function Ow(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(jX);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Ow.Cache||qN),n}Ow.Cache=qN;var AX=Ow,PX=AX,NX=500;function OX(e){var t=PX(e,function(r){return n.size===NX&&n.clear(),r}),n=t.cache;return t}var RX=OX,MX=RX,LX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IX=/\\(\\)?/g,$X=MX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(LX,function(n,r,i,s){t.push(i?s.replace(IX,"$1"):r||n)}),t}),DX=$X,sC=kf,zX=MN,FX=Ma,BX=Pw,aC=sC?sC.prototype:void 0,oC=aC?aC.toString:void 0;function YN(e){if(typeof e=="string")return e;if(FX(e))return zX(e,YN)+"";if(BX(e))return oC?oC.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var UX=YN,HX=UX;function WX(e){return e==null?"":HX(e)}var VX=WX,GX=Ma,qX=Nw,YX=DX,XX=VX;function KX(e,t){return GX(e)?e:qX(e,t)?[e]:YX(XX(e))}var XN=KX,ZX=Pw;function QX(e){if(typeof e=="string"||ZX(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var i0=QX,JX=XN,eK=i0;function tK(e,t){t=JX(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[eK(t[n++])];return n&&n==r?e:void 0}var KN=tK,nK=KN;function rK(e,t,n){var r=e==null?void 0:nK(e,t);return r===void 0?n:r}var iK=rK;function sK(e,t){return e!=null&&t in Object(e)}var aK=sK,oK=XN,lK=CN,cK=Ma,uK=EN,hK=vw,dK=i0;function fK(e,t,n){t=oK(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=dK(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&hK(i)&&uK(a,i)&&(cK(e)||lK(e)))}var pK=fK,mK=aK,gK=pK;function yK(e,t){return e!=null&&gK(e,t,mK)}var bK=yK,vK=WN,xK=iK,wK=bK,_K=Nw,kK=VN,SK=GN,CK=i0,EK=1,TK=2;function jK(e,t){return _K(e)&&kK(t)?SK(CK(e),t):function(n){var r=xK(n,e);return r===void 0&&r===t?wK(n,e):vK(t,r,EK|TK)}}var AK=jK;function PK(e){return function(t){return t==null?void 0:t[e]}}var NK=PK,OK=KN;function RK(e){return function(t){return OK(t,e)}}var MK=RK,LK=NK,IK=MK,$K=Nw,DK=i0;function zK(e){return $K(e)?LK(DK(e)):IK(e)}var FK=zK,BK=bX,UK=AK,HK=ON,WK=Ma,VK=FK;function GK(e){return typeof e=="function"?e:e==null?HK:typeof e=="object"?WK(e)?UK(e[0],e[1]):BK(e):VK(e)}var qK=GK,YK=Qg;function XK(e,t){return function(n,r){if(n==null)return n;if(!YK(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var KK=XK,ZK=NN,QK=KK,JK=QK(ZK),eZ=JK,tZ=eZ,nZ=Qg;function rZ(e,t){var n=-1,r=nZ(e)?Array(e.length):[];return tZ(e,function(i,s,a){r[++n]=t(i,s,a)}),r}var iZ=rZ,sZ=MN,aZ=qK,oZ=iZ,lZ=Ma;function cZ(e,t){var n=lZ(e)?sZ:oZ;return n(e,aZ(t))}var uZ=cZ;Object.defineProperty(_f,"__esModule",{value:!0});_f.flattenNames=void 0;var hZ=BU,dZ=s0(hZ),fZ=kw,pZ=s0(fZ),mZ=qW,gZ=s0(mZ),yZ=uZ,bZ=s0(yZ);function s0(e){return e&&e.__esModule?e:{default:e}}var vZ=_f.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,bZ.default)(t,function(r){Array.isArray(r)?e(r).map(function(i){return n.push(i)}):(0,gZ.default)(r)?(0,pZ.default)(r,function(i,s){i===!0&&n.push(s),n.push(s+"-"+i)}):(0,dZ.default)(r)&&n.push(r)}),n};_f.default=vZ;var Cf={};function xZ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var wZ=xZ,_Z=bc,kZ=function(){try{var e=_Z(Object,"defineProperty");return e({},"",{}),e}catch{}}(),SZ=kZ,lC=SZ;function CZ(e,t,n){t=="__proto__"&&lC?lC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ZN=CZ,EZ=ZN,TZ=Cw,jZ=Object.prototype,AZ=jZ.hasOwnProperty;function PZ(e,t,n){var r=e[t];(!(AZ.call(e,t)&&TZ(r,n))||n===void 0&&!(t in e))&&EZ(e,t,n)}var QN=PZ,NZ=QN,OZ=ZN;function RZ(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(n[o],e[o],o,n,e):void 0;c===void 0&&(c=e[o]),i?OZ(n,o,c):NZ(n,o,c)}return n}var a0=RZ,MZ=a0,LZ=Sf;function IZ(e,t){return e&&MZ(t,LZ(t),e)}var $Z=IZ;function DZ(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var zZ=DZ,FZ=dh,BZ=_w,UZ=zZ,HZ=Object.prototype,WZ=HZ.hasOwnProperty;function VZ(e){if(!FZ(e))return UZ(e);var t=BZ(e),n=[];for(var r in e)r=="constructor"&&(t||!WZ.call(e,r))||n.push(r);return n}var GZ=VZ,qZ=jN,YZ=GZ,XZ=Qg;function KZ(e){return XZ(e)?qZ(e,!0):YZ(e)}var Rw=KZ,ZZ=a0,QZ=Rw;function JZ(e,t){return e&&ZZ(t,QZ(t),e)}var eQ=JZ,sg={exports:{}};sg.exports;(function(e,t){var n=oo,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(h,d){if(d)return h.slice();var p=h.length,m=o?o(p):new h.constructor(p);return h.copy(m),m}e.exports=c})(sg,sg.exports);var tQ=sg.exports;function nQ(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var rQ=nQ,iQ=a0,sQ=Aw;function aQ(e,t){return iQ(e,sQ(e),t)}var oQ=aQ,lQ=DN,cQ=Sw,uQ=Aw,hQ=FN,dQ=Object.getOwnPropertySymbols,fQ=dQ?function(e){for(var t=[];e;)lQ(t,uQ(e)),e=cQ(e);return t}:hQ,JN=fQ,pQ=a0,mQ=JN;function gQ(e,t){return pQ(e,mQ(e),t)}var yQ=gQ,bQ=zN,vQ=JN,xQ=Rw;function wQ(e){return bQ(e,xQ,vQ)}var _Q=wQ,kQ=Object.prototype,SQ=kQ.hasOwnProperty;function CQ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&SQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var EQ=CQ,cC=$N;function TQ(e){var t=new e.constructor(e.byteLength);return new cC(t).set(new cC(e)),t}var Mw=TQ,jQ=Mw;function AQ(e,t){var n=t?jQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var PQ=AQ,NQ=/\w*$/;function OQ(e){var t=new e.constructor(e.source,NQ.exec(e));return t.lastIndex=e.lastIndex,t}var RQ=OQ,uC=kf,hC=uC?uC.prototype:void 0,dC=hC?hC.valueOf:void 0;function MQ(e){return dC?Object(dC.call(e)):{}}var LQ=MQ,IQ=Mw;function $Q(e,t){var n=t?IQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var DQ=$Q,zQ=Mw,FQ=PQ,BQ=RQ,UQ=LQ,HQ=DQ,WQ="[object Boolean]",VQ="[object Date]",GQ="[object Map]",qQ="[object Number]",YQ="[object RegExp]",XQ="[object Set]",KQ="[object String]",ZQ="[object Symbol]",QQ="[object ArrayBuffer]",JQ="[object DataView]",eJ="[object Float32Array]",tJ="[object Float64Array]",nJ="[object Int8Array]",rJ="[object Int16Array]",iJ="[object Int32Array]",sJ="[object Uint8Array]",aJ="[object Uint8ClampedArray]",oJ="[object Uint16Array]",lJ="[object Uint32Array]";function cJ(e,t,n){var r=e.constructor;switch(t){case QQ:return zQ(e);case WQ:case VQ:return new r(+e);case JQ:return FQ(e,n);case eJ:case tJ:case nJ:case rJ:case iJ:case sJ:case aJ:case oJ:case lJ:return HQ(e,n);case GQ:return new r;case qQ:case KQ:return new r(e);case YQ:return BQ(e);case XQ:return new r;case ZQ:return UQ(e)}}var uJ=cJ,hJ=dh,fC=Object.create,dJ=function(){function e(){}return function(t){if(!hJ(t))return{};if(fC)return fC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),fJ=dJ,pJ=fJ,mJ=Sw,gJ=_w;function yJ(e){return typeof e.constructor=="function"&&!gJ(e)?pJ(mJ(e)):{}}var bJ=yJ,vJ=r0,xJ=Ro,wJ="[object Map]";function _J(e){return xJ(e)&&vJ(e)==wJ}var kJ=_J,SJ=kJ,CJ=xw,pC=ww,mC=pC&&pC.isMap,EJ=mC?CJ(mC):SJ,TJ=EJ,jJ=r0,AJ=Ro,PJ="[object Set]";function NJ(e){return AJ(e)&&jJ(e)==PJ}var OJ=NJ,RJ=OJ,MJ=xw,gC=ww,yC=gC&&gC.isSet,LJ=yC?MJ(yC):RJ,IJ=LJ,$J=jw,DJ=wZ,zJ=QN,FJ=$Z,BJ=eQ,UJ=tQ,HJ=rQ,WJ=oQ,VJ=yQ,GJ=BN,qJ=_Q,YJ=r0,XJ=EQ,KJ=uJ,ZJ=bJ,QJ=Ma,JJ=bw,eee=TJ,tee=dh,nee=IJ,ree=Sf,iee=Rw,see=1,aee=2,oee=4,eO="[object Arguments]",lee="[object Array]",cee="[object Boolean]",uee="[object Date]",hee="[object Error]",tO="[object Function]",dee="[object GeneratorFunction]",fee="[object Map]",pee="[object Number]",nO="[object Object]",mee="[object RegExp]",gee="[object Set]",yee="[object String]",bee="[object Symbol]",vee="[object WeakMap]",xee="[object ArrayBuffer]",wee="[object DataView]",_ee="[object Float32Array]",kee="[object Float64Array]",See="[object Int8Array]",Cee="[object Int16Array]",Eee="[object Int32Array]",Tee="[object Uint8Array]",jee="[object Uint8ClampedArray]",Aee="[object Uint16Array]",Pee="[object Uint32Array]",_r={};_r[eO]=_r[lee]=_r[xee]=_r[wee]=_r[cee]=_r[uee]=_r[_ee]=_r[kee]=_r[See]=_r[Cee]=_r[Eee]=_r[fee]=_r[pee]=_r[nO]=_r[mee]=_r[gee]=_r[yee]=_r[bee]=_r[Tee]=_r[jee]=_r[Aee]=_r[Pee]=!0;_r[hee]=_r[tO]=_r[vee]=!1;function cm(e,t,n,r,i,s){var a,o=t&see,c=t&aee,h=t&oee;if(n&&(a=i?n(e,r,i,s):n(e)),a!==void 0)return a;if(!tee(e))return e;var d=QJ(e);if(d){if(a=XJ(e),!o)return HJ(e,a)}else{var p=YJ(e),m=p==tO||p==dee;if(JJ(e))return UJ(e,o);if(p==nO||p==eO||m&&!i){if(a=c||m?{}:ZJ(e),!o)return c?VJ(e,BJ(a,e)):WJ(e,FJ(a,e))}else{if(!_r[p])return i?e:{};a=KJ(e,p,o)}}s||(s=new $J);var g=s.get(e);if(g)return g;s.set(e,a),nee(e)?e.forEach(function(C){a.add(cm(C,t,n,C,e,s))}):eee(e)&&e.forEach(function(C,x){a.set(x,cm(C,t,n,x,e,s))});var v=h?c?qJ:GJ:c?iee:ree,w=d?void 0:v(e);return DJ(w||e,function(C,x){w&&(x=C,C=e[x]),zJ(a,x,cm(C,t,n,x,e,s))}),a}var Nee=cm,Oee=Nee,Ree=1,Mee=4;function Lee(e){return Oee(e,Ree|Mee)}var Iee=Lee;Object.defineProperty(Cf,"__esModule",{value:!0});Cf.mergeClasses=void 0;var $ee=kw,Dee=rO($ee),zee=Iee,Fee=rO(zee),Bee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function rO(e){return e&&e.__esModule?e:{default:e}}var Uee=Cf.mergeClasses=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t.default&&(0,Fee.default)(t.default)||{};return n.map(function(i){var s=t[i];return s&&(0,Dee.default)(s,function(a,o){r[o]||(r[o]={}),r[o]=Bee({},r[o],s[o])}),i}),r};Cf.default=Uee;var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.autoprefix=void 0;var Hee=kw,bC=Vee(Hee),Wee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Vee(e){return e&&e.__esModule?e:{default:e}}var Gee={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var n=t&&t.split(" ");return{position:"absolute",top:n&&n[0],right:n&&n[1],bottom:n&&n[2],left:n&&n[3]}},extend:function(t,n){var r=n[t];return r||{extend:t}}},qee=Ef.autoprefix=function(t){var n={};return(0,bC.default)(t,function(r,i){var s={};(0,bC.default)(r,function(a,o){var c=Gee[o];c?s=Wee({},s,c(a)):s[o]=a}),n[i]=s}),n};Ef.default=qee;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.hover=void 0;var Yee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xee=pe,Ny=Kee(Xee);function Kee(e){return e&&e.__esModule?e:{default:e}}function Zee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Qee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jee=Tf.hover=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Qee(i,r);function i(){var s,a,o,c;Zee(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return c=(a=(o=vC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),o),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return Ny.default.createElement(n,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},Ny.default.createElement(t,Yee({},o.props,o.state)))},a),vC(o,c)}return i}(Ny.default.Component)};Tf.default=Jee;var jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.active=void 0;var ete=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tte=pe,Oy=nte(tte);function nte(e){return e&&e.__esModule?e:{default:e}}function rte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ite(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ste=jf.active=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){ite(i,r);function i(){var s,a,o,c;rte(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return c=(a=(o=xC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),o),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return Oy.default.createElement(n,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},Oy.default.createElement(t,ete({},o.props,o.state)))},a),xC(o,c)}return i}(Oy.default.Component)};jf.default=ste;var Lw={};Object.defineProperty(Lw,"__esModule",{value:!0});var ate=function(t,n){var r={},i=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=o};return t===0&&i("first-child"),t===n-1&&i("last-child"),(t===0||t%2===0)&&i("even"),Math.abs(t%2)===1&&i("odd"),i("nth-child",t),r};Lw.default=ate;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ReactCSS=Vs.loop=Vs.handleActive=Iw=Vs.handleHover=Vs.hover=void 0;var ote=_f,lte=bh(ote),cte=Cf,ute=bh(cte),hte=Ef,dte=bh(hte),fte=Tf,iO=bh(fte),pte=jf,mte=bh(pte),gte=Lw,yte=bh(gte);function bh(e){return e&&e.__esModule?e:{default:e}}Vs.hover=iO.default;var Iw=Vs.handleHover=iO.default;Vs.handleActive=mte.default;Vs.loop=yte.default;var bte=Vs.ReactCSS=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=(0,lte.default)(r),a=(0,ute.default)(t,s);return(0,dte.default)(a)},yn=Vs.default=bte,vte=function(t,n,r,i,s){var a=s.clientWidth,o=s.clientHeight,c=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,h=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=c-(s.getBoundingClientRect().left+window.pageXOffset),p=h-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var m=void 0;if(p<0?m=0:p>o?m=1:m=Math.round(p*100/o)/100,n.a!==m)return{h:n.h,s:n.s,l:n.l,a:m,source:"rgb"}}else{var g=void 0;if(d<0?g=0:d>a?g=1:g=Math.round(d*100/a)/100,i!==g)return{h:n.h,s:n.s,l:n.l,a:g,source:"rgb"}}return null},Ry={},xte=function(t,n,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var a=s.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,s.width,s.height),a.fillStyle=n,a.fillRect(0,0,r,r),a.translate(r,r),a.fillRect(0,0,r,r),s.toDataURL()):null},wte=function(t,n,r,i){var s=t+"-"+n+"-"+r+(i?"-server":"");if(Ry[s])return Ry[s];var a=xte(t,n,r,i);return Ry[s]=a,a},wC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh=function(t){var n=t.white,r=t.grey,i=t.size,s=t.renderers,a=t.borderRadius,o=t.boxShadow,c=t.children,h=yn({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+wte(n,r,i,s.canvas)+") center left"}}});return pe.isValidElement(c)?je.cloneElement(c,wC({},c.props,{style:wC({},c.props.style,h.grid)})):je.createElement("div",{style:h.grid})};vh.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var _te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $w=function(e){Cte(t,e);function t(){var n,r,i,s;Ste(this,t);for(var a=arguments.length,o=Array(a),c=0;c<a;c++)o[c]=arguments[c];return s=(r=(i=_C(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(o))),i),i.handleChange=function(h){var d=vte(h,i.props.hsl,i.props.direction,i.props.a,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),_C(i,s)}return kte(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=yn({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:_te({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return je.createElement("div",{style:s.alpha},je.createElement("div",{style:s.checkboard},je.createElement(vh,{renderers:this.props.renderers})),je.createElement("div",{style:s.gradient}),je.createElement("div",{style:s.container,ref:function(o){return r.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("div",{style:s.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:s.slider}))))}}]),t}(pe.PureComponent||pe.Component),Ete=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Tte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ate(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Pte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Nte=1,sO=38,Ote=40,Rte=[sO,Ote],Mte=function(t){return Rte.indexOf(t)>-1},Lte=function(t){return Number(String(t).replace(/%/g,""))},Ite=1,$n=function(e){Pte(t,e);function t(n){jte(this,t);var r=Ate(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=Lte(i.target.value);if(!isNaN(s)&&Mte(i.keyCode)){var a=r.getArrowOffset(),o=i.keyCode===sO?s+a:s-a;r.setUpdatedValue(o,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+Ite++,r}return Ete(t,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return Tte({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Nte}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=yn({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return je.createElement("div",{style:i.wrap},je.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return r.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?je.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(pe.PureComponent||pe.Component),$te=function(t,n,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=o-(i.getBoundingClientRect().left+window.pageXOffset),d=c-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var p=void 0;if(d<0)p=359;else if(d>a)p=0;else{var m=-(d*100/a)+100;p=360*m/100}if(r.h!==p)return{h:p,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var g=void 0;if(h<0)g=0;else if(h>s)g=359;else{var v=h*100/s;g=360*v/100}if(r.h!==g)return{h:g,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},Dte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function zte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Fte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xh=function(e){Fte(t,e);function t(){var n,r,i,s;zte(this,t);for(var a=arguments.length,o=Array(a),c=0;c<a;c++)o[c]=arguments[c];return s=(r=(i=kC(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(o))),i),i.handleChange=function(h){var d=$te(h,i.props.direction,i.props.hsl,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),kC(i,s)}return Dte(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,a=yn({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return je.createElement("div",{style:a.hue},je.createElement("div",{className:"hue-"+s,style:a.container,ref:function(c){return r.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),je.createElement("div",{style:a.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:a.slider}))))}}]),t}(pe.PureComponent||pe.Component),aO={exports:{}},Bte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ute=Bte,Hte=Ute;function oO(){}function lO(){}lO.resetWarningCache=oO;var Wte=function(){function e(r,i,s,a,o,c){if(c!==Hte){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lO,resetWarningCache:oO};return n.PropTypes=n,n};aO.exports=Wte();var Vte=aO.exports;const Mt=No(Vte);function Gte(){this.__data__=[],this.size=0}function Af(e,t){return e===t||e!==e&&t!==t}function o0(e,t){for(var n=e.length;n--;)if(Af(e[n][0],t))return n;return-1}var qte=Array.prototype,Yte=qte.splice;function Xte(e){var t=this.__data__,n=o0(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Yte.call(t,n,1),--this.size,!0}function Kte(e){var t=this.__data__,n=o0(t,e);return n<0?void 0:t[n][1]}function Zte(e){return o0(this.__data__,e)>-1}function Qte(e,t){var n=this.__data__,r=o0(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Mo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Mo.prototype.clear=Gte;Mo.prototype.delete=Xte;Mo.prototype.get=Kte;Mo.prototype.has=Zte;Mo.prototype.set=Qte;function Jte(){this.__data__=new Mo,this.size=0}function ene(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function tne(e){return this.__data__.get(e)}function nne(e){return this.__data__.has(e)}var cO=typeof global=="object"&&global&&global.Object===Object&&global,rne=typeof self=="object"&&self&&self.Object===Object&&self,La=cO||rne||Function("return this")(),yl=La.Symbol,uO=Object.prototype,ine=uO.hasOwnProperty,sne=uO.toString,$h=yl?yl.toStringTag:void 0;function ane(e){var t=ine.call(e,$h),n=e[$h];try{e[$h]=void 0;var r=!0}catch{}var i=sne.call(e);return r&&(t?e[$h]=n:delete e[$h]),i}var one=Object.prototype,lne=one.toString;function cne(e){return lne.call(e)}var une="[object Null]",hne="[object Undefined]",SC=yl?yl.toStringTag:void 0;function vc(e){return e==null?e===void 0?hne:une:SC&&SC in Object(e)?ane(e):cne(e)}function Qs(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var dne="[object AsyncFunction]",fne="[object Function]",pne="[object GeneratorFunction]",mne="[object Proxy]";function Dw(e){if(!Qs(e))return!1;var t=vc(e);return t==fne||t==pne||t==dne||t==mne}var My=La["__core-js_shared__"],CC=function(){var e=/[^.]+$/.exec(My&&My.keys&&My.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function gne(e){return!!CC&&CC in e}var yne=Function.prototype,bne=yne.toString;function xc(e){if(e!=null){try{return bne.call(e)}catch{}try{return e+""}catch{}}return""}var vne=/[\\^$.*+?()[\]{}|]/g,xne=/^\[object .+?Constructor\]$/,wne=Function.prototype,_ne=Object.prototype,kne=wne.toString,Sne=_ne.hasOwnProperty,Cne=RegExp("^"+kne.call(Sne).replace(vne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ene(e){if(!Qs(e)||gne(e))return!1;var t=Dw(e)?Cne:xne;return t.test(xc(e))}function Tne(e,t){return e==null?void 0:e[t]}function wc(e,t){var n=Tne(e,t);return Ene(n)?n:void 0}var nf=wc(La,"Map"),rf=wc(Object,"create");function jne(){this.__data__=rf?rf(null):{},this.size=0}function Ane(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Pne="__lodash_hash_undefined__",Nne=Object.prototype,One=Nne.hasOwnProperty;function Rne(e){var t=this.__data__;if(rf){var n=t[e];return n===Pne?void 0:n}return One.call(t,e)?t[e]:void 0}var Mne=Object.prototype,Lne=Mne.hasOwnProperty;function Ine(e){var t=this.__data__;return rf?t[e]!==void 0:Lne.call(t,e)}var $ne="__lodash_hash_undefined__";function Dne(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rf&&t===void 0?$ne:t,this}function hc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}hc.prototype.clear=jne;hc.prototype.delete=Ane;hc.prototype.get=Rne;hc.prototype.has=Ine;hc.prototype.set=Dne;function zne(){this.size=0,this.__data__={hash:new hc,map:new(nf||Mo),string:new hc}}function Fne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function l0(e,t){var n=e.__data__;return Fne(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Bne(e){var t=l0(this,e).delete(e);return this.size-=t?1:0,t}function Une(e){return l0(this,e).get(e)}function Hne(e){return l0(this,e).has(e)}function Wne(e,t){var n=l0(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Lo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Lo.prototype.clear=zne;Lo.prototype.delete=Bne;Lo.prototype.get=Une;Lo.prototype.has=Hne;Lo.prototype.set=Wne;var Vne=200;function Gne(e,t){var n=this.__data__;if(n instanceof Mo){var r=n.__data__;if(!nf||r.length<Vne-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Lo(r)}return n.set(e,t),this.size=n.size,this}function so(e){var t=this.__data__=new Mo(e);this.size=t.size}so.prototype.clear=Jte;so.prototype.delete=ene;so.prototype.get=tne;so.prototype.has=nne;so.prototype.set=Gne;var ag=function(){try{var e=wc(Object,"defineProperty");return e({},"",{}),e}catch{}}();function zw(e,t,n){t=="__proto__"&&ag?ag(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function dx(e,t,n){(n!==void 0&&!Af(e[t],n)||n===void 0&&!(t in e))&&zw(e,t,n)}function qne(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return t}}var hO=qne(),dO=typeof As=="object"&&As&&!As.nodeType&&As,EC=dO&&typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,Yne=EC&&EC.exports===dO,TC=Yne?La.Buffer:void 0;TC&&TC.allocUnsafe;function Xne(e,t){return e.slice()}var og=La.Uint8Array;function Kne(e){var t=new e.constructor(e.byteLength);return new og(t).set(new og(e)),t}function Zne(e,t){var n=Kne(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function Qne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var jC=Object.create,Jne=function(){function e(){}return function(t){if(!Qs(t))return{};if(jC)return jC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function fO(e,t){return function(n){return e(t(n))}}var pO=fO(Object.getPrototypeOf,Object),ere=Object.prototype;function Fw(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ere;return e===n}function tre(e){return typeof e.constructor=="function"&&!Fw(e)?Jne(pO(e)):{}}function bl(e){return e!=null&&typeof e=="object"}var nre="[object Arguments]";function AC(e){return bl(e)&&vc(e)==nre}var mO=Object.prototype,rre=mO.hasOwnProperty,ire=mO.propertyIsEnumerable,lg=AC(function(){return arguments}())?AC:function(e){return bl(e)&&rre.call(e,"callee")&&!ire.call(e,"callee")},Rs=Array.isArray,sre=9007199254740991;function Bw(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sre}function wh(e){return e!=null&&Bw(e.length)&&!Dw(e)}function are(e){return bl(e)&&wh(e)}function ore(){return!1}var gO=typeof As=="object"&&As&&!As.nodeType&&As,PC=gO&&typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,lre=PC&&PC.exports===gO,NC=lre?La.Buffer:void 0,cre=NC?NC.isBuffer:void 0,cg=cre||ore,ure="[object Object]",hre=Function.prototype,dre=Object.prototype,yO=hre.toString,fre=dre.hasOwnProperty,pre=yO.call(Object);function mre(e){if(!bl(e)||vc(e)!=ure)return!1;var t=pO(e);if(t===null)return!0;var n=fre.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&yO.call(n)==pre}var gre="[object Arguments]",yre="[object Array]",bre="[object Boolean]",vre="[object Date]",xre="[object Error]",wre="[object Function]",_re="[object Map]",kre="[object Number]",Sre="[object Object]",Cre="[object RegExp]",Ere="[object Set]",Tre="[object String]",jre="[object WeakMap]",Are="[object ArrayBuffer]",Pre="[object DataView]",Nre="[object Float32Array]",Ore="[object Float64Array]",Rre="[object Int8Array]",Mre="[object Int16Array]",Lre="[object Int32Array]",Ire="[object Uint8Array]",$re="[object Uint8ClampedArray]",Dre="[object Uint16Array]",zre="[object Uint32Array]",Pr={};Pr[Nre]=Pr[Ore]=Pr[Rre]=Pr[Mre]=Pr[Lre]=Pr[Ire]=Pr[$re]=Pr[Dre]=Pr[zre]=!0;Pr[gre]=Pr[yre]=Pr[Are]=Pr[bre]=Pr[Pre]=Pr[vre]=Pr[xre]=Pr[wre]=Pr[_re]=Pr[kre]=Pr[Sre]=Pr[Cre]=Pr[Ere]=Pr[Tre]=Pr[jre]=!1;function Fre(e){return bl(e)&&Bw(e.length)&&!!Pr[vc(e)]}function Bre(e){return function(t){return e(t)}}var bO=typeof As=="object"&&As&&!As.nodeType&&As,Ad=bO&&typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,Ure=Ad&&Ad.exports===bO,Ly=Ure&&cO.process,OC=function(){try{var e=Ad&&Ad.require&&Ad.require("util").types;return e||Ly&&Ly.binding&&Ly.binding("util")}catch{}}(),RC=OC&&OC.isTypedArray,Uw=RC?Bre(RC):Fre;function fx(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Hre=Object.prototype,Wre=Hre.hasOwnProperty;function Vre(e,t,n){var r=e[t];(!(Wre.call(e,t)&&Af(r,n))||n===void 0&&!(t in e))&&zw(e,t,n)}function Gre(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=void 0;c===void 0&&(c=e[o]),i?zw(n,o,c):Vre(n,o,c)}return n}function qre(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Yre=9007199254740991,Xre=/^(?:0|[1-9]\d*)$/;function Hw(e,t){var n=typeof e;return t=t??Yre,!!t&&(n=="number"||n!="symbol"&&Xre.test(e))&&e>-1&&e%1==0&&e<t}var Kre=Object.prototype,Zre=Kre.hasOwnProperty;function vO(e,t){var n=Rs(e),r=!n&&lg(e),i=!n&&!r&&cg(e),s=!n&&!r&&!i&&Uw(e),a=n||r||i||s,o=a?qre(e.length,String):[],c=o.length;for(var h in e)(t||Zre.call(e,h))&&!(a&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Hw(h,c)))&&o.push(h);return o}function Qre(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Jre=Object.prototype,eie=Jre.hasOwnProperty;function tie(e){if(!Qs(e))return Qre(e);var t=Fw(e),n=[];for(var r in e)r=="constructor"&&(t||!eie.call(e,r))||n.push(r);return n}function xO(e){return wh(e)?vO(e,!0):tie(e)}function nie(e){return Gre(e,xO(e))}function rie(e,t,n,r,i,s,a){var o=fx(e,n),c=fx(t,n),h=a.get(c);if(h){dx(e,n,h);return}var d=s?s(o,c,n+"",e,t,a):void 0,p=d===void 0;if(p){var m=Rs(c),g=!m&&cg(c),v=!m&&!g&&Uw(c);d=c,m||g||v?Rs(o)?d=o:are(o)?d=Qne(o):g?(p=!1,d=Xne(c)):v?(p=!1,d=Zne(c)):d=[]:mre(c)||lg(c)?(d=o,lg(o)?d=nie(o):(!Qs(o)||Dw(o))&&(d=tre(c))):p=!1}p&&(a.set(c,d),i(d,c,r,s,a),a.delete(c)),dx(e,n,d)}function wO(e,t,n,r,i){e!==t&&hO(t,function(s,a){if(i||(i=new so),Qs(s))rie(e,t,a,n,wO,r,i);else{var o=r?r(fx(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),dx(e,a,o)}},xO)}function c0(e){return e}function iie(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var MC=Math.max;function sie(e,t,n){return t=MC(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=MC(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),iie(e,this,o)}}function aie(e){return function(){return e}}var oie=ag?function(e,t){return ag(e,"toString",{configurable:!0,enumerable:!1,value:aie(t),writable:!0})}:c0,lie=800,cie=16,uie=Date.now;function hie(e){var t=0,n=0;return function(){var r=uie(),i=cie-(r-n);if(n=r,i>0){if(++t>=lie)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var die=hie(oie);function fie(e,t){return die(sie(e,t,c0),e+"")}function pie(e,t,n){if(!Qs(n))return!1;var r=typeof t;return(r=="number"?wh(n)&&Hw(t,n.length):r=="string"&&t in n)?Af(n[t],e):!1}function mie(e){return fie(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&pie(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var ys=mie(function(e,t,n){wO(e,t,n)}),Pf=function(t){var n=t.zDepth,r=t.radius,i=t.background,s=t.children,a=t.styles,o=a===void 0?{}:a,c=yn(ys({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":n===1});return je.createElement("div",{style:c.wrap},je.createElement("div",{style:c.bg}),je.createElement("div",{style:c.content},s))};Pf.propTypes={background:Mt.string,zDepth:Mt.oneOf([0,1,2,3,4,5]),radius:Mt.number,styles:Mt.object};Pf.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Iy=function(){return La.Date.now()},gie=/\s/;function yie(e){for(var t=e.length;t--&&gie.test(e.charAt(t)););return t}var bie=/^\s+/;function vie(e){return e&&e.slice(0,yie(e)+1).replace(bie,"")}var xie="[object Symbol]";function u0(e){return typeof e=="symbol"||bl(e)&&vc(e)==xie}var LC=NaN,wie=/^[-+]0x[0-9a-f]+$/i,_ie=/^0b[01]+$/i,kie=/^0o[0-7]+$/i,Sie=parseInt;function IC(e){if(typeof e=="number")return e;if(u0(e))return LC;if(Qs(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qs(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=vie(e);var n=_ie.test(e);return n||kie.test(e)?Sie(e.slice(2),n?2:8):wie.test(e)?LC:+e}var Cie="Expected a function",Eie=Math.max,Tie=Math.min;function _O(e,t,n){var r,i,s,a,o,c,h=0,d=!1,p=!1,m=!0;if(typeof e!="function")throw new TypeError(Cie);t=IC(t)||0,Qs(n)&&(d=!!n.leading,p="maxWait"in n,s=p?Eie(IC(n.maxWait)||0,t):s,m="trailing"in n?!!n.trailing:m);function g(S){var B=r,D=i;return r=i=void 0,h=S,a=e.apply(D,B),a}function v(S){return h=S,o=setTimeout(x,t),d?g(S):a}function w(S){var B=S-c,D=S-h,R=t-B;return p?Tie(R,s-D):R}function C(S){var B=S-c,D=S-h;return c===void 0||B>=t||B<0||p&&D>=s}function x(){var S=Iy();if(C(S))return k(S);o=setTimeout(x,w(S))}function k(S){return o=void 0,m&&r?g(S):(r=i=void 0,a)}function P(){o!==void 0&&clearTimeout(o),h=0,r=c=i=o=void 0}function j(){return o===void 0?a:k(Iy())}function M(){var S=Iy(),B=C(S);if(r=arguments,i=this,c=S,B){if(o===void 0)return v(c);if(p)return clearTimeout(o),o=setTimeout(x,t),g(c)}return o===void 0&&(o=setTimeout(x,t)),a}return M.cancel=P,M.flush=j,M}var jie="Expected a function";function Aie(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(jie);return Qs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_O(e,t,{leading:r,maxWait:t,trailing:i})}var Pie=function(t,n,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=o-(r.getBoundingClientRect().left+window.pageXOffset),d=c-(r.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>s&&(h=s),d<0?d=0:d>a&&(d=a);var p=h/s,m=1-d/a;return{h:n.h,s:p,v:m,a:n.a,source:"hsv"}},Nie=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h0=function(e){Mie(t,e);function t(n){Oie(this,t);var r=Rie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,Pie(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Aie(function(i,s,a){i(s,a)},50),r}return Nie(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,a=i.white,o=i.black,c=i.pointer,h=i.circle,d=yn({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:a,black:o,pointer:c,circle:h}},{custom:!!this.props.style});return je.createElement("div",{style:d.color,ref:function(m){return r.container=m},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),je.createElement("div",{style:d.white,className:"saturation-white"},je.createElement("div",{style:d.black,className:"saturation-black"}),je.createElement("div",{style:d.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:d.circle}))))}}]),t}(pe.PureComponent||pe.Component);function Lie(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Iie=fO(Object.keys,Object),$ie=Object.prototype,Die=$ie.hasOwnProperty;function zie(e){if(!Fw(e))return Iie(e);var t=[];for(var n in Object(e))Die.call(e,n)&&n!="constructor"&&t.push(n);return t}function Ww(e){return wh(e)?vO(e):zie(e)}function Fie(e,t){return e&&hO(e,t,Ww)}function Bie(e,t){return function(n,r){if(n==null)return n;if(!wh(n))return e(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var kO=Bie(Fie);function Uie(e){return typeof e=="function"?e:c0}function Hie(e,t){var n=Rs(e)?Lie:kO;return n(e,Uie(t))}function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}var Wie=/^\s+/,Vie=/\s+$/;function Xt(e,t){if(e=e||"",t=t||{},e instanceof Xt)return e;if(!(this instanceof Xt))return new Xt(e,t);var n=Gie(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Xt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,s,a,o;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(t){return this._a=SO(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=DC(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=DC(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=$C(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=$C(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return zC(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Kie(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Lr(this._r,255)*100)+"%",g:Math.round(Lr(this._g,255)*100)+"%",b:Math.round(Lr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Lr(this._r,255)*100)+"%, "+Math.round(Lr(this._g,255)*100)+"%, "+Math.round(Lr(this._b,255)*100)+"%)":"rgba("+Math.round(Lr(this._r,255)*100)+"%, "+Math.round(Lr(this._g,255)*100)+"%, "+Math.round(Lr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:lse[zC(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+FC(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var s=Xt(t);r="#"+FC(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Xt(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(ese,arguments)},brighten:function(){return this._applyModification(tse,arguments)},darken:function(){return this._applyModification(nse,arguments)},desaturate:function(){return this._applyModification(Zie,arguments)},saturate:function(){return this._applyModification(Qie,arguments)},greyscale:function(){return this._applyModification(Jie,arguments)},spin:function(){return this._applyModification(rse,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(ase,arguments)},complement:function(){return this._applyCombination(ise,arguments)},monochromatic:function(){return this._applyCombination(ose,arguments)},splitcomplement:function(){return this._applyCombination(sse,arguments)},triad:function(){return this._applyCombination(BC,[3])},tetrad:function(){return this._applyCombination(BC,[4])}};Xt.fromRatio=function(e,t){if(ug(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=td(e[r]));e=n}return Xt(e,t)};function Gie(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof e=="string"&&(e=dse(e)),ug(e)=="object"&&(ho(e.r)&&ho(e.g)&&ho(e.b)?(t=qie(e.r,e.g,e.b),a=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ho(e.h)&&ho(e.s)&&ho(e.v)?(r=td(e.s),i=td(e.v),t=Xie(e.h,r,i),a=!0,o="hsv"):ho(e.h)&&ho(e.s)&&ho(e.l)&&(r=td(e.s),s=td(e.l),t=Yie(e.h,r,s),a=!0,o="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=SO(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function qie(e,t,n){return{r:Lr(e,255)*255,g:Lr(t,255)*255,b:Lr(n,255)*255}}function $C(e,t,n){e=Lr(e,255),t=Lr(t,255),n=Lr(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var c=r-i;switch(a=o>.5?c/(2-r-i):c/(r+i),r){case e:s=(t-n)/c+(t<n?6:0);break;case t:s=(n-e)/c+2;break;case n:s=(e-t)/c+4;break}s/=6}return{h:s,s:a,l:o}}function Yie(e,t,n){var r,i,s;e=Lr(e,360),t=Lr(t,100),n=Lr(n,100);function a(h,d,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(d-h)*6*p:p<1/2?d:p<2/3?h+(d-h)*(2/3-p)*6:h}if(t===0)r=i=s=n;else{var o=n<.5?n*(1+t):n+t-n*t,c=2*n-o;r=a(c,o,e+1/3),i=a(c,o,e),s=a(c,o,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function DC(e,t,n){e=Lr(e,255),t=Lr(t,255),n=Lr(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=r,c=r-i;if(a=r===0?0:c/r,r==i)s=0;else{switch(r){case e:s=(t-n)/c+(t<n?6:0);break;case t:s=(n-e)/c+2;break;case n:s=(e-t)/c+4;break}s/=6}return{h:s,s:a,v:o}}function Xie(e,t,n){e=Lr(e,360)*6,t=Lr(t,100),n=Lr(n,100);var r=Math.floor(e),i=e-r,s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),c=r%6,h=[n,a,s,s,o,n][c],d=[o,n,n,a,s,s][c],p=[s,s,o,n,n,a][c];return{r:h*255,g:d*255,b:p*255}}function zC(e,t,n,r){var i=[_a(Math.round(e).toString(16)),_a(Math.round(t).toString(16)),_a(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Kie(e,t,n,r,i){var s=[_a(Math.round(e).toString(16)),_a(Math.round(t).toString(16)),_a(Math.round(n).toString(16)),_a(CO(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function FC(e,t,n,r){var i=[_a(CO(r)),_a(Math.round(e).toString(16)),_a(Math.round(t).toString(16)),_a(Math.round(n).toString(16))];return i.join("")}Xt.equals=function(e,t){return!e||!t?!1:Xt(e).toRgbString()==Xt(t).toRgbString()};Xt.random=function(){return Xt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Zie(e,t){t=t===0?0:t||10;var n=Xt(e).toHsl();return n.s-=t/100,n.s=d0(n.s),Xt(n)}function Qie(e,t){t=t===0?0:t||10;var n=Xt(e).toHsl();return n.s+=t/100,n.s=d0(n.s),Xt(n)}function Jie(e){return Xt(e).desaturate(100)}function ese(e,t){t=t===0?0:t||10;var n=Xt(e).toHsl();return n.l+=t/100,n.l=d0(n.l),Xt(n)}function tse(e,t){t=t===0?0:t||10;var n=Xt(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),Xt(n)}function nse(e,t){t=t===0?0:t||10;var n=Xt(e).toHsl();return n.l-=t/100,n.l=d0(n.l),Xt(n)}function rse(e,t){var n=Xt(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Xt(n)}function ise(e){var t=Xt(e).toHsl();return t.h=(t.h+180)%360,Xt(t)}function BC(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Xt(e).toHsl(),r=[Xt(e)],i=360/t,s=1;s<t;s++)r.push(Xt({h:(n.h+s*i)%360,s:n.s,l:n.l}));return r}function sse(e){var t=Xt(e).toHsl(),n=t.h;return[Xt(e),Xt({h:(n+72)%360,s:t.s,l:t.l}),Xt({h:(n+216)%360,s:t.s,l:t.l})]}function ase(e,t,n){t=t||6,n=n||30;var r=Xt(e).toHsl(),i=360/n,s=[Xt(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(Xt(r));return s}function ose(e,t){t=t||6;for(var n=Xt(e).toHsv(),r=n.h,i=n.s,s=n.v,a=[],o=1/t;t--;)a.push(Xt({h:r,s:i,v:s})),s=(s+o)%1;return a}Xt.mix=function(e,t,n){n=n===0?0:n||50;var r=Xt(e).toRgb(),i=Xt(t).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Xt(a)};Xt.readability=function(e,t){var n=Xt(e),r=Xt(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Xt.isReadable=function(e,t,n){var r=Xt.readability(e,t),i,s;switch(s=!1,i=fse(n),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Xt.mostReadable=function(e,t,n){var r=null,i=0,s,a,o,c;n=n||{},a=n.includeFallbackColors,o=n.level,c=n.size;for(var h=0;h<t.length;h++)s=Xt.readability(e,t[h]),s>i&&(i=s,r=Xt(t[h]));return Xt.isReadable(e,r,{level:o,size:c})||!a?r:(n.includeFallbackColors=!1,Xt.mostReadable(e,["#fff","#000"],n))};var px=Xt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},lse=Xt.hexNames=cse(px);function cse(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function SO(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Lr(e,t){use(e)&&(e="100%");var n=hse(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function d0(e){return Math.min(1,Math.max(0,e))}function ws(e){return parseInt(e,16)}function use(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function hse(e){return typeof e=="string"&&e.indexOf("%")!=-1}function _a(e){return e.length==1?"0"+e:""+e}function td(e){return e<=1&&(e=e*100+"%"),e}function CO(e){return Math.round(parseFloat(e)*255).toString(16)}function UC(e){return ws(e)/255}var ha=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ho(e){return!!ha.CSS_UNIT.exec(e)}function dse(e){e=e.replace(Wie,"").replace(Vie,"").toLowerCase();var t=!1;if(px[e])e=px[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=ha.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=ha.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ha.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=ha.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ha.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=ha.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ha.hex8.exec(e))?{r:ws(n[1]),g:ws(n[2]),b:ws(n[3]),a:UC(n[4]),format:t?"name":"hex8"}:(n=ha.hex6.exec(e))?{r:ws(n[1]),g:ws(n[2]),b:ws(n[3]),format:t?"name":"hex"}:(n=ha.hex4.exec(e))?{r:ws(n[1]+""+n[1]),g:ws(n[2]+""+n[2]),b:ws(n[3]+""+n[3]),a:UC(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=ha.hex3.exec(e))?{r:ws(n[1]+""+n[1]),g:ws(n[2]+""+n[2]),b:ws(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function fse(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var HC=function(t){var n=["r","g","b","a","h","s","l","v"],r=0,i=0;return Hie(n,function(s){if(t[s]&&(r+=1,isNaN(t[s])||(i+=1),s==="s"||s==="l")){var a=/^\d+%$/;a.test(t[s])&&(i+=1)}}),r===i?t:!1},nd=function(t,n){var r=t.hex?Xt(t.hex):Xt(t),i=r.toHsl(),s=r.toHsv(),a=r.toRgb(),o=r.toHex();i.s===0&&(i.h=n||0,s.h=n||0);var c=o==="000000"&&a.a===0;return{hsl:i,hex:c?"transparent":"#"+o,rgb:a,hsv:s,oldHue:t.h||n||i.h,source:t.source}},El=function(t){if(t==="transparent")return!0;var n=String(t).charAt(0)==="#"?1:0;return t.length!==4+n&&t.length<7+n&&Xt(t).isValid()},Vw=function(t){if(!t)return"#fff";var n=nd(t);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},$y=function(t,n){var r=t.replace("","");return Xt(n+" ("+r+")")._ok},Dh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pse=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function mse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gse(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bs=function(t){var n=function(r){yse(i,r);function i(s){mse(this,i);var a=gse(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(o,c){var h=HC(o);if(h){var d=nd(o,o.h||a.state.oldHue);a.setState(d),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,d,c),a.props.onChange&&a.props.onChange(d,c)}},a.handleSwatchHover=function(o,c){var h=HC(o);if(h){var d=nd(o,o.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(d,c)}},a.state=Dh({},nd(s.color,0)),a.debounce=_O(function(o,c,h){o(c,h)},100),a}return pse(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),je.createElement(t,Dh({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,o){return Dh({},nd(a.color,o.oldHue))}}]),i}(pe.PureComponent||pe.Component);return n.propTypes=Dh({},t.propTypes),n.defaultProps=Dh({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},bse=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vse=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function xse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _se=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){wse(i,r);function i(){var s,a,o,c;xse(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return c=(a=(o=WC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),o),o.state={focus:!1},o.handleFocus=function(){return o.setState({focus:!0})},o.handleBlur=function(){return o.setState({focus:!1})},a),WC(o,c)}return vse(i,[{key:"render",value:function(){return je.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},je.createElement(t,bse({},this.props,this.state)))}}]),i}(je.Component)},VC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kse=13,Sse=function(t){var n=t.color,r=t.style,i=t.onClick,s=i===void 0?function(){}:i,a=t.onHover,o=t.title,c=o===void 0?n:o,h=t.children,d=t.focus,p=t.focusStyle,m=p===void 0?{}:p,g=n==="transparent",v=yn({default:{swatch:VC({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,d?m:{})}}),w=function(j){return s(n,j)},C=function(j){return j.keyCode===kse&&s(n,j)},x=function(j){return a(n,j)},k={};return a&&(k.onMouseOver=x),je.createElement("div",VC({style:v.swatch,onClick:w,title:c,tabIndex:0,onKeyDown:C},k),h,g&&je.createElement(vh,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const _c=_se(Sse);var Cse=function(t){var n=t.direction,r=yn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return je.createElement("div",{style:r.picker})},Ese=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EO=function(t){var n=t.rgb,r=t.hsl,i=t.width,s=t.height,a=t.onChange,o=t.direction,c=t.style,h=t.renderers,d=t.pointer,p=t.className,m=p===void 0?"":p,g=yn({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:c}}});return je.createElement("div",{style:g.picker,className:"alpha-picker "+m},je.createElement($w,Ese({},g.alpha,{rgb:n,hsl:r,pointer:d,renderers:h,onChange:a,direction:o})))};EO.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Cse};bs(EO);function TO(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Tse="__lodash_hash_undefined__";function jse(e){return this.__data__.set(e,Tse),this}function Ase(e){return this.__data__.has(e)}function hg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Lo;++t<n;)this.add(e[t])}hg.prototype.add=hg.prototype.push=jse;hg.prototype.has=Ase;function Pse(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Nse(e,t){return e.has(t)}var Ose=1,Rse=2;function jO(e,t,n,r,i,s){var a=n&Ose,o=e.length,c=t.length;if(o!=c&&!(a&&c>o))return!1;var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=-1,m=!0,g=n&Rse?new hg:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var v=e[p],w=t[p];if(r)var C=a?r(w,v,p,t,e,s):r(v,w,p,e,t,s);if(C!==void 0){if(C)continue;m=!1;break}if(g){if(!Pse(t,function(x,k){if(!Nse(g,k)&&(v===x||i(v,x,n,r,s)))return g.push(k)})){m=!1;break}}else if(!(v===w||i(v,w,n,r,s))){m=!1;break}}return s.delete(e),s.delete(t),m}function Mse(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Lse(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Ise=1,$se=2,Dse="[object Boolean]",zse="[object Date]",Fse="[object Error]",Bse="[object Map]",Use="[object Number]",Hse="[object RegExp]",Wse="[object Set]",Vse="[object String]",Gse="[object Symbol]",qse="[object ArrayBuffer]",Yse="[object DataView]",GC=yl?yl.prototype:void 0,Dy=GC?GC.valueOf:void 0;function Xse(e,t,n,r,i,s,a){switch(n){case Yse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qse:return!(e.byteLength!=t.byteLength||!s(new og(e),new og(t)));case Dse:case zse:case Use:return Af(+e,+t);case Fse:return e.name==t.name&&e.message==t.message;case Hse:case Vse:return e==t+"";case Bse:var o=Mse;case Wse:var c=r&Ise;if(o||(o=Lse),e.size!=t.size&&!c)return!1;var h=a.get(e);if(h)return h==t;r|=$se,a.set(e,t);var d=jO(o(e),o(t),r,i,s,a);return a.delete(e),d;case Gse:if(Dy)return Dy.call(e)==Dy.call(t)}return!1}function Kse(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Zse(e,t,n){var r=t(e);return Rs(e)?r:Kse(r,n(e))}function Qse(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Jse(){return[]}var eae=Object.prototype,tae=eae.propertyIsEnumerable,qC=Object.getOwnPropertySymbols,nae=qC?function(e){return e==null?[]:(e=Object(e),Qse(qC(e),function(t){return tae.call(e,t)}))}:Jse;function YC(e){return Zse(e,Ww,nae)}var rae=1,iae=Object.prototype,sae=iae.hasOwnProperty;function aae(e,t,n,r,i,s){var a=n&rae,o=YC(e),c=o.length,h=YC(t),d=h.length;if(c!=d&&!a)return!1;for(var p=c;p--;){var m=o[p];if(!(a?m in t:sae.call(t,m)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var w=!0;s.set(e,t),s.set(t,e);for(var C=a;++p<c;){m=o[p];var x=e[m],k=t[m];if(r)var P=a?r(k,x,m,t,e,s):r(x,k,m,e,t,s);if(!(P===void 0?x===k||i(x,k,n,r,s):P)){w=!1;break}C||(C=m=="constructor")}if(w&&!C){var j=e.constructor,M=t.constructor;j!=M&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof M=="function"&&M instanceof M)&&(w=!1)}return s.delete(e),s.delete(t),w}var mx=wc(La,"DataView"),gx=wc(La,"Promise"),yx=wc(La,"Set"),bx=wc(La,"WeakMap"),XC="[object Map]",oae="[object Object]",KC="[object Promise]",ZC="[object Set]",QC="[object WeakMap]",JC="[object DataView]",lae=xc(mx),cae=xc(nf),uae=xc(gx),hae=xc(yx),dae=xc(bx),Xo=vc;(mx&&Xo(new mx(new ArrayBuffer(1)))!=JC||nf&&Xo(new nf)!=XC||gx&&Xo(gx.resolve())!=KC||yx&&Xo(new yx)!=ZC||bx&&Xo(new bx)!=QC)&&(Xo=function(e){var t=vc(e),n=t==oae?e.constructor:void 0,r=n?xc(n):"";if(r)switch(r){case lae:return JC;case cae:return XC;case uae:return KC;case hae:return ZC;case dae:return QC}return t});var fae=1,eE="[object Arguments]",tE="[object Array]",Sp="[object Object]",pae=Object.prototype,nE=pae.hasOwnProperty;function mae(e,t,n,r,i,s){var a=Rs(e),o=Rs(t),c=a?tE:Xo(e),h=o?tE:Xo(t);c=c==eE?Sp:c,h=h==eE?Sp:h;var d=c==Sp,p=h==Sp,m=c==h;if(m&&cg(e)){if(!cg(t))return!1;a=!0,d=!1}if(m&&!d)return s||(s=new so),a||Uw(e)?jO(e,t,n,r,i,s):Xse(e,t,c,n,r,i,s);if(!(n&fae)){var g=d&&nE.call(e,"__wrapped__"),v=p&&nE.call(t,"__wrapped__");if(g||v){var w=g?e.value():e,C=v?t.value():t;return s||(s=new so),i(w,C,n,r,s)}}return m?(s||(s=new so),aae(e,t,n,r,i,s)):!1}function Gw(e,t,n,r,i){return e===t?!0:e==null||t==null||!bl(e)&&!bl(t)?e!==e&&t!==t:mae(e,t,n,r,Gw,i)}var gae=1,yae=2;function bae(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=n[i];var o=a[0],c=e[o],h=a[1];if(a[2]){if(c===void 0&&!(o in e))return!1}else{var d=new so,p;if(!(p===void 0?Gw(h,c,gae|yae,r,d):p))return!1}}return!0}function AO(e){return e===e&&!Qs(e)}function vae(e){for(var t=Ww(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,AO(i)]}return t}function PO(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function xae(e){var t=vae(e);return t.length==1&&t[0][2]?PO(t[0][0],t[0][1]):function(n){return n===e||bae(n,e,t)}}var wae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_ae=/^\w*$/;function qw(e,t){if(Rs(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||u0(e)?!0:_ae.test(e)||!wae.test(e)||t!=null&&e in Object(t)}var kae="Expected a function";function Yw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(kae);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Yw.Cache||Lo),n}Yw.Cache=Lo;var Sae=500;function Cae(e){var t=Yw(e,function(r){return n.size===Sae&&n.clear(),r}),n=t.cache;return t}var Eae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tae=/\\(\\)?/g,jae=Cae(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Eae,function(n,r,i,s){t.push(i?s.replace(Tae,"$1"):r||n)}),t}),rE=yl?yl.prototype:void 0,iE=rE?rE.toString:void 0;function NO(e){if(typeof e=="string")return e;if(Rs(e))return TO(e,NO)+"";if(u0(e))return iE?iE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Aae(e){return e==null?"":NO(e)}function OO(e,t){return Rs(e)?e:qw(e,t)?[e]:jae(Aae(e))}function f0(e){if(typeof e=="string"||u0(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function RO(e,t){t=OO(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[f0(t[n++])];return n&&n==r?e:void 0}function Pae(e,t,n){var r=e==null?void 0:RO(e,t);return r===void 0?n:r}function Nae(e,t){return e!=null&&t in Object(e)}function Oae(e,t,n){t=OO(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=f0(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Bw(i)&&Hw(a,i)&&(Rs(e)||lg(e)))}function Rae(e,t){return e!=null&&Oae(e,t,Nae)}var Mae=1,Lae=2;function Iae(e,t){return qw(e)&&AO(t)?PO(f0(e),t):function(n){var r=Pae(n,e);return r===void 0&&r===t?Rae(n,e):Gw(t,r,Mae|Lae)}}function $ae(e){return function(t){return t==null?void 0:t[e]}}function Dae(e){return function(t){return RO(t,e)}}function zae(e){return qw(e)?$ae(f0(e)):Dae(e)}function Fae(e){return typeof e=="function"?e:e==null?c0:typeof e=="object"?Rs(e)?Iae(e[0],e[1]):xae(e):zae(e)}function Bae(e,t){var n=-1,r=wh(e)?Array(e.length):[];return kO(e,function(i,s,a){r[++n]=t(i,s,a)}),r}function kc(e,t){var n=Rs(e)?TO:Bae;return n(e,Fae(t))}var Uae=function(t){var n=t.colors,r=t.onClick,i=t.onSwatchHover,s=yn({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return je.createElement("div",{style:s.swatches},kc(n,function(a){return je.createElement(_c,{key:a,color:a,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+a}})}),je.createElement("div",{style:s.clear}))},Xw=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.hex,s=t.colors,a=t.width,o=t.triangle,c=t.styles,h=c===void 0?{}:c,d=t.className,p=d===void 0?"":d,m=i==="transparent",g=function(C,x){El(C)&&n({hex:C,source:"hex"},x)},v=yn(ys({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Vw(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},h),{"hide-triangle":o==="hide"});return je.createElement("div",{style:v.card,className:"block-picker "+p},je.createElement("div",{style:v.triangle}),je.createElement("div",{style:v.head},m&&je.createElement(vh,{borderRadius:"6px 6px 0 0"}),je.createElement("div",{style:v.label},i)),je.createElement("div",{style:v.body},je.createElement(Uae,{colors:s,onClick:g,onSwatchHover:r}),je.createElement($n,{style:{input:v.input},value:i,onChange:g})))};Xw.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),colors:Mt.arrayOf(Mt.string),triangle:Mt.oneOf(["top","hide"]),styles:Mt.object};Xw.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};bs(Xw);var Vc={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Gc={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},qc={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Yc={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Xc={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Kc={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Zc={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Qc={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Jc={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},rd={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},eu={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},tu={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},nu={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},ru={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},iu={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},su={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},au={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},ou={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},MO=function(t){var n=t.color,r=t.onClick,i=t.onSwatchHover,s=t.hover,a=t.active,o=t.circleSize,c=t.circleSpacing,h=yn({default:{swatch:{width:o,height:o,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:s,active:a});return je.createElement("div",{style:h.swatch},je.createElement(_c,{style:h.Swatch,color:n,onClick:r,onHover:i,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+n}}))};MO.defaultProps={circleSize:28,circleSpacing:14};const Hae=Iw(MO);var Kw=function(t){var n=t.width,r=t.onChange,i=t.onSwatchHover,s=t.colors,a=t.hex,o=t.circleSize,c=t.styles,h=c===void 0?{}:c,d=t.circleSpacing,p=t.className,m=p===void 0?"":p,g=yn(ys({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}},h)),v=function(C,x){return r({hex:C,source:"hex"},x)};return je.createElement("div",{style:g.card,className:"circle-picker "+m},kc(s,function(w){return je.createElement(Hae,{key:w,color:w,onClick:v,onSwatchHover:i,active:a===w.toLowerCase(),circleSize:o,circleSpacing:d})}))};Kw.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),circleSize:Mt.number,circleSpacing:Mt.number,styles:Mt.object};Kw.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Vc[500],Gc[500],qc[500],Yc[500],Xc[500],Kc[500],Zc[500],Qc[500],Jc[500],rd[500],eu[500],tu[500],nu[500],ru[500],iu[500],su[500],au[500],ou[500]],styles:{}};bs(Kw);function sE(e){return e===void 0}var LO={};Object.defineProperty(LO,"__esModule",{value:!0});var aE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wae=pe,oE=Vae(Wae);function Vae(e){return e&&e.__esModule?e:{default:e}}function Gae(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Cp=24,qae=LO.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Cp:r,s=e.height,a=s===void 0?Cp:s,o=e.style,c=o===void 0?{}:o,h=Gae(e,["fill","width","height","style"]);return oE.default.createElement("svg",aE({viewBox:"0 0 "+Cp+" "+Cp,style:aE({fill:n,width:i,height:a},c)},h),oE.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Yae=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Xae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Zae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var IO=function(e){Zae(t,e);function t(n){Xae(this,t);var r=Kae(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?El(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(sE(i.s)?r.props.hsl.s:i.s),l:Number(sE(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return Yae(t,[{key:"render",value:function(){var r=this,i=yn({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),je.createElement("div",{style:i.alpha},je.createElement($n,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($n,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),je.createElement("div",{style:i.alpha},je.createElement($n,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),je.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,je.createElement("div",{style:i.toggle},je.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(o){return r.icon=o}},je.createElement(qae,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t}(je.Component);IO.defaultProps={view:"hex"};var lE=function(){var t=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return je.createElement("div",{style:t.picker})},Qae=function(){var t=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return je.createElement("div",{style:t.picker})},Zw=function(t){var n=t.width,r=t.onChange,i=t.disableAlpha,s=t.rgb,a=t.hsl,o=t.hsv,c=t.hex,h=t.renderers,d=t.styles,p=d===void 0?{}:d,m=t.className,g=m===void 0?"":m,v=t.defaultView,w=yn(ys({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},p),{disableAlpha:i});return je.createElement("div",{style:w.picker,className:"chrome-picker "+g},je.createElement("div",{style:w.saturation},je.createElement(h0,{style:w.Saturation,hsl:a,hsv:o,pointer:Qae,onChange:r})),je.createElement("div",{style:w.body},je.createElement("div",{style:w.controls,className:"flexbox-fix"},je.createElement("div",{style:w.color},je.createElement("div",{style:w.swatch},je.createElement("div",{style:w.active}),je.createElement(vh,{renderers:h}))),je.createElement("div",{style:w.toggles},je.createElement("div",{style:w.hue},je.createElement(xh,{style:w.Hue,hsl:a,pointer:lE,onChange:r})),je.createElement("div",{style:w.alpha},je.createElement($w,{style:w.Alpha,rgb:s,hsl:a,pointer:lE,renderers:h,onChange:r})))),je.createElement(IO,{rgb:s,hsl:a,hex:c,view:v,onChange:r,disableAlpha:i})))};Zw.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),disableAlpha:Mt.bool,styles:Mt.object,defaultView:Mt.oneOf(["hex","rgb","hsl"])};Zw.defaultProps={width:225,disableAlpha:!1,styles:{}};bs(Zw);var Jae=function(t){var n=t.color,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=t.active,o=yn({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Vw(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return je.createElement(_c,{style:o.color,color:n,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},je.createElement("div",{style:o.dot}))},eoe=function(t){var n=t.hex,r=t.rgb,i=t.onChange,s=yn({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(c,h){c.r||c.g||c.b?i({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,source:"rgb"},h):i({hex:c.hex,source:"hex"},h)};return je.createElement("div",{style:s.fields,className:"flexbox-fix"},je.createElement("div",{style:s.active}),je.createElement($n,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:n,onChange:a}),je.createElement($n,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:a}),je.createElement($n,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:a}),je.createElement($n,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:a}))},Qw=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.colors,s=t.hex,a=t.rgb,o=t.styles,c=o===void 0?{}:o,h=t.className,d=h===void 0?"":h,p=yn(ys({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),m=function(v,w){v.hex?El(v.hex)&&n({hex:v.hex,source:"hex"},w):n(v,w)};return je.createElement(Pf,{style:p.Compact,styles:c},je.createElement("div",{style:p.compact,className:"compact-picker "+d},je.createElement("div",null,kc(i,function(g){return je.createElement(Jae,{key:g,color:g,active:g.toLowerCase()===s,onClick:m,onSwatchHover:r})}),je.createElement("div",{style:p.clear})),je.createElement(eoe,{hex:s,rgb:a,onChange:m})))};Qw.propTypes={colors:Mt.arrayOf(Mt.string),styles:Mt.object};Qw.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};bs(Qw);var toe=function(t){var n=t.hover,r=t.color,i=t.onClick,s=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=yn({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:n});return je.createElement("div",{style:o.swatch},je.createElement(_c,{color:r,onClick:i,onHover:s,focusStyle:a}))};const noe=Iw(toe);var Jw=function(t){var n=t.width,r=t.colors,i=t.onChange,s=t.onSwatchHover,a=t.triangle,o=t.styles,c=o===void 0?{}:o,h=t.className,d=h===void 0?"":h,p=yn(ys({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),m=function(v,w){return i({hex:v,source:"hex"},w)};return je.createElement("div",{style:p.card,className:"github-picker "+d},je.createElement("div",{style:p.triangleShadow}),je.createElement("div",{style:p.triangle}),kc(r,function(g){return je.createElement(noe,{color:g,key:g,onClick:m,onSwatchHover:s})}))};Jw.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),colors:Mt.arrayOf(Mt.string),triangle:Mt.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Mt.object};Jw.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};bs(Jw);var roe=function(t){var n=t.direction,r=yn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return je.createElement("div",{style:r.picker})},ioe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e_=function(t){var n=t.width,r=t.height,i=t.onChange,s=t.hsl,a=t.direction,o=t.pointer,c=t.styles,h=c===void 0?{}:c,d=t.className,p=d===void 0?"":d,m=yn(ys({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},h)),g=function(w){return i({a:1,h:w.h,l:.5,s:1})};return je.createElement("div",{style:m.picker,className:"hue-picker "+p},je.createElement(xh,ioe({},m.hue,{hsl:s,pointer:o,onChange:g,direction:a})))};e_.propTypes={styles:Mt.object};e_.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:roe,styles:{}};bs(e_);var soe=function(t){var n=t.onChange,r=t.hex,i=t.rgb,s=t.styles,a=s===void 0?{}:s,o=t.className,c=o===void 0?"":o,h=yn(ys({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),d=function(m,g){m.hex?El(m.hex)&&n({hex:m.hex,source:"hex"},g):(m.r||m.g||m.b)&&n({r:m.r||i.r,g:m.g||i.g,b:m.b||i.b,source:"rgb"},g)};return je.createElement(Pf,{styles:a},je.createElement("div",{style:h.material,className:"material-picker "+c},je.createElement($n,{style:{wrap:h.HEXwrap,input:h.HEXinput,label:h.HEXlabel},label:"hex",value:r,onChange:d}),je.createElement("div",{style:h.split,className:"flexbox-fix"},je.createElement("div",{style:h.third},je.createElement($n,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"r",value:i.r,onChange:d})),je.createElement("div",{style:h.third},je.createElement($n,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"g",value:i.g,onChange:d})),je.createElement("div",{style:h.third},je.createElement($n,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"b",value:i.b,onChange:d})))))};bs(soe);var aoe=function(t){var n=t.onChange,r=t.rgb,i=t.hsv,s=t.hex,a=yn({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(h,d){h["#"]?El(h["#"])&&n({hex:h["#"],source:"hex"},d):h.r||h.g||h.b?n({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,source:"rgb"},d):(h.h||h.s||h.v)&&n({h:h.h||i.h,s:h.s||i.s,v:h.v||i.v,source:"hsv"},d)};return je.createElement("div",{style:a.fields},je.createElement($n,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:o}),je.createElement($n,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:o}),je.createElement($n,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:o}),je.createElement("div",{style:a.divider}),je.createElement($n,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:o}),je.createElement($n,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:o}),je.createElement($n,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:o}),je.createElement("div",{style:a.divider}),je.createElement($n,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:s.replace("#",""),onChange:o}),je.createElement("div",{style:a.fieldSymbols},je.createElement("div",{style:a.symbol},""),je.createElement("div",{style:a.symbol},"%"),je.createElement("div",{style:a.symbol},"%")))},ooe=function(t){var n=t.hsl,r=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return je.createElement("div",{style:r.picker})},loe=function(){var t=yn({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return je.createElement("div",{style:t.pointer},je.createElement("div",{style:t.left},je.createElement("div",{style:t.leftInside})),je.createElement("div",{style:t.right},je.createElement("div",{style:t.rightInside})))},cE=function(t){var n=t.onClick,r=t.label,i=t.children,s=t.active,a=yn({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return je.createElement("div",{style:a.button,onClick:n},r||i)},coe=function(t){var n=t.rgb,r=t.currentColor,i=yn({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return je.createElement("div",null,je.createElement("div",{style:i.label},"new"),je.createElement("div",{style:i.swatches},je.createElement("div",{style:i.new}),je.createElement("div",{style:i.current})),je.createElement("div",{style:i.label},"current"))},uoe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function hoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function doe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function foe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var t_=function(e){foe(t,e);function t(n){hoe(this,t);var r=doe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:n.hex},r}return uoe(t,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,a=r.className,o=a===void 0?"":a,c=yn(ys({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return je.createElement("div",{style:c.picker,className:"photoshop-picker "+o},je.createElement("div",{style:c.head},this.props.header),je.createElement("div",{style:c.body,className:"flexbox-fix"},je.createElement("div",{style:c.saturation},je.createElement(h0,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:ooe,onChange:this.props.onChange})),je.createElement("div",{style:c.hue},je.createElement(xh,{direction:"vertical",hsl:this.props.hsl,pointer:loe,onChange:this.props.onChange})),je.createElement("div",{style:c.controls},je.createElement("div",{style:c.top,className:"flexbox-fix"},je.createElement("div",{style:c.previews},je.createElement(coe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),je.createElement("div",{style:c.actions},je.createElement(cE,{label:"OK",onClick:this.props.onAccept,active:!0}),je.createElement(cE,{label:"Cancel",onClick:this.props.onCancel}),je.createElement(aoe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(je.Component);t_.propTypes={header:Mt.string,styles:Mt.object};t_.defaultProps={header:"Color Picker",styles:{}};bs(t_);var poe=function(t){var n=t.onChange,r=t.rgb,i=t.hsl,s=t.hex,a=t.disableAlpha,o=yn({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),c=function(d,p){d.hex?El(d.hex)&&n({hex:d.hex,source:"hex"},p):d.r||d.g||d.b?n({r:d.r||r.r,g:d.g||r.g,b:d.b||r.b,a:r.a,source:"rgb"},p):d.a&&(d.a<0?d.a=0:d.a>100&&(d.a=100),d.a/=100,n({h:i.h,s:i.s,l:i.l,a:d.a,source:"rgb"},p))};return je.createElement("div",{style:o.fields,className:"flexbox-fix"},je.createElement("div",{style:o.double},je.createElement($n,{style:{input:o.input,label:o.label},label:"hex",value:s.replace("#",""),onChange:c})),je.createElement("div",{style:o.single},je.createElement($n,{style:{input:o.input,label:o.label},label:"r",value:r.r,onChange:c,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:o.single},je.createElement($n,{style:{input:o.input,label:o.label},label:"g",value:r.g,onChange:c,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:o.single},je.createElement($n,{style:{input:o.input,label:o.label},label:"b",value:r.b,onChange:c,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:o.alpha},je.createElement($n,{style:{input:o.input,label:o.label},label:"a",value:Math.round(r.a*100),onChange:c,dragLabel:"true",dragMax:"100"})))},moe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$O=function(t){var n=t.colors,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=yn({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),o=function(h,d){i({hex:h,source:"hex"},d)};return je.createElement("div",{style:a.colors,className:"flexbox-fix"},n.map(function(c){var h=typeof c=="string"?{color:c}:c,d=""+h.color+(h.title||"");return je.createElement("div",{key:d,style:a.swatchWrap},je.createElement(_c,moe({},h,{style:a.swatch,onClick:o,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+h.color}})))}))};$O.propTypes={colors:Mt.arrayOf(Mt.oneOfType([Mt.string,Mt.shape({color:Mt.string,title:Mt.string})])).isRequired};var goe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n_=function(t){var n=t.width,r=t.rgb,i=t.hex,s=t.hsv,a=t.hsl,o=t.onChange,c=t.onSwatchHover,h=t.disableAlpha,d=t.presetColors,p=t.renderers,m=t.styles,g=m===void 0?{}:m,v=t.className,w=v===void 0?"":v,C=yn(ys({default:goe({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},g),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},g),{disableAlpha:h});return je.createElement("div",{style:C.picker,className:"sketch-picker "+w},je.createElement("div",{style:C.saturation},je.createElement(h0,{style:C.Saturation,hsl:a,hsv:s,onChange:o})),je.createElement("div",{style:C.controls,className:"flexbox-fix"},je.createElement("div",{style:C.sliders},je.createElement("div",{style:C.hue},je.createElement(xh,{style:C.Hue,hsl:a,onChange:o})),je.createElement("div",{style:C.alpha},je.createElement($w,{style:C.Alpha,rgb:r,hsl:a,renderers:p,onChange:o}))),je.createElement("div",{style:C.color},je.createElement(vh,null),je.createElement("div",{style:C.activeColor}))),je.createElement(poe,{rgb:r,hsl:a,hex:i,onChange:o,disableAlpha:h}),je.createElement($O,{colors:d,onClick:o,onSwatchHover:c}))};n_.propTypes={disableAlpha:Mt.bool,width:Mt.oneOfType([Mt.string,Mt.number]),styles:Mt.object};n_.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};bs(n_);var zh=function(t){var n=t.hsl,r=t.offset,i=t.onClick,s=i===void 0?function(){}:i,a=t.active,o=t.first,c=t.last,h=yn({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:c}),d=function(m){return s({h:n.h,s:.5,l:r,source:"hsl"},m)};return je.createElement("div",{style:h.swatch,onClick:d})},yoe=function(t){var n=t.onClick,r=t.hsl,i=yn({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return je.createElement("div",{style:i.swatches},je.createElement("div",{style:i.swatch},je.createElement(zh,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:n,first:!0})),je.createElement("div",{style:i.swatch},je.createElement(zh,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:n})),je.createElement("div",{style:i.swatch},je.createElement(zh,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:n})),je.createElement("div",{style:i.swatch},je.createElement(zh,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:n})),je.createElement("div",{style:i.swatch},je.createElement(zh,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:n,last:!0})),je.createElement("div",{style:i.clear}))},boe=function(){var t=yn({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return je.createElement("div",{style:t.picker})},r_=function(t){var n=t.hsl,r=t.onChange,i=t.pointer,s=t.styles,a=s===void 0?{}:s,o=t.className,c=o===void 0?"":o,h=yn(ys({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return je.createElement("div",{style:h.wrap||{},className:"slider-picker "+c},je.createElement("div",{style:h.hue},je.createElement(xh,{style:h.Hue,hsl:n,pointer:i,onChange:r})),je.createElement("div",{style:h.swatches},je.createElement(yoe,{hsl:n,onClick:r})))};r_.propTypes={styles:Mt.object};r_.defaultProps={pointer:boe,styles:{}};bs(r_);var DO={};Object.defineProperty(DO,"__esModule",{value:!0});var uE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},voe=pe,hE=xoe(voe);function xoe(e){return e&&e.__esModule?e:{default:e}}function woe(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Ep=24,_oe=DO.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Ep:r,s=e.height,a=s===void 0?Ep:s,o=e.style,c=o===void 0?{}:o,h=woe(e,["fill","width","height","style"]);return hE.default.createElement("svg",uE({viewBox:"0 0 "+Ep+" "+Ep,style:uE({fill:n,width:i,height:a},c)},h),hE.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},koe=function(t){var n=t.color,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=t.first,o=t.last,c=t.active,h=yn({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:Vw(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:c,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return je.createElement(_c,{color:n,style:h.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},je.createElement("div",{style:h.check},je.createElement(_oe,null)))},Soe=function(t){var n=t.onClick,r=t.onSwatchHover,i=t.group,s=t.active,a=yn({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return je.createElement("div",{style:a.group},kc(i,function(o,c){return je.createElement(koe,{key:o,color:o,active:o.toLowerCase()===s,first:c===0,last:c===i.length-1,onClick:n,onSwatchHover:r})}))},i_=function(t){var n=t.width,r=t.height,i=t.onChange,s=t.onSwatchHover,a=t.colors,o=t.hex,c=t.styles,h=c===void 0?{}:c,d=t.className,p=d===void 0?"":d,m=yn(ys({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},h)),g=function(w,C){return i({hex:w,source:"hex"},C)};return je.createElement("div",{style:m.picker,className:"swatches-picker "+p},je.createElement(Pf,null,je.createElement("div",{style:m.overflow},je.createElement("div",{style:m.body},kc(a,function(v){return je.createElement(Soe,{key:v.toString(),group:v,active:o,onClick:g,onSwatchHover:s})}),je.createElement("div",{style:m.clear})))))};i_.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),height:Mt.oneOfType([Mt.string,Mt.number]),colors:Mt.arrayOf(Mt.arrayOf(Mt.string)),styles:Mt.object};i_.defaultProps={width:320,height:240,colors:[[Vc[900],Vc[700],Vc[500],Vc[300],Vc[100]],[Gc[900],Gc[700],Gc[500],Gc[300],Gc[100]],[qc[900],qc[700],qc[500],qc[300],qc[100]],[Yc[900],Yc[700],Yc[500],Yc[300],Yc[100]],[Xc[900],Xc[700],Xc[500],Xc[300],Xc[100]],[Kc[900],Kc[700],Kc[500],Kc[300],Kc[100]],[Zc[900],Zc[700],Zc[500],Zc[300],Zc[100]],[Qc[900],Qc[700],Qc[500],Qc[300],Qc[100]],[Jc[900],Jc[700],Jc[500],Jc[300],Jc[100]],["#194D33",rd[700],rd[500],rd[300],rd[100]],[eu[900],eu[700],eu[500],eu[300],eu[100]],[tu[900],tu[700],tu[500],tu[300],tu[100]],[nu[900],nu[700],nu[500],nu[300],nu[100]],[ru[900],ru[700],ru[500],ru[300],ru[100]],[iu[900],iu[700],iu[500],iu[300],iu[100]],[su[900],su[700],su[500],su[300],su[100]],[au[900],au[700],au[500],au[300],au[100]],[ou[900],ou[700],ou[500],ou[300],ou[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};bs(i_);var s_=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.hex,s=t.colors,a=t.width,o=t.triangle,c=t.styles,h=c===void 0?{}:c,d=t.className,p=d===void 0?"":d,m=yn(ys({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},h),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right"}),g=function(w,C){El(w)&&n({hex:w,source:"hex"},C)};return je.createElement("div",{style:m.card,className:"twitter-picker "+p},je.createElement("div",{style:m.triangleShadow}),je.createElement("div",{style:m.triangle}),je.createElement("div",{style:m.body},kc(s,function(v,w){return je.createElement(_c,{key:w,color:v,hex:v,style:m.swatch,onClick:g,onHover:r,focusStyle:{boxShadow:"0 0 4px "+v}})}),je.createElement("div",{style:m.hash},"#"),je.createElement($n,{label:null,style:{input:m.input},value:i.replace("#",""),onChange:g}),je.createElement("div",{style:m.clear})))};s_.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),triangle:Mt.oneOf(["hide","top-left","top-right"]),colors:Mt.arrayOf(Mt.string),styles:Mt.object};s_.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};bs(s_);var a_=function(t){var n=yn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return je.createElement("div",{style:n.picker})};a_.propTypes={hsl:Mt.shape({h:Mt.number,s:Mt.number,l:Mt.number,a:Mt.number})};a_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var o_=function(t){var n=yn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return je.createElement("div",{style:n.picker})};o_.propTypes={hsl:Mt.shape({h:Mt.number,s:Mt.number,l:Mt.number,a:Mt.number})};o_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Coe=function(t){var n=t.onChange,r=t.rgb,i=t.hsl,s=t.hex,a=t.hsv,o=function(g,v){if(g.hex)El(g.hex)&&n({hex:g.hex,source:"hex"},v);else if(g.rgb){var w=g.rgb.split(",");$y(g.rgb,"rgb")&&n({r:w[0],g:w[1],b:w[2],a:1,source:"rgb"},v)}else if(g.hsv){var C=g.hsv.split(",");$y(g.hsv,"hsv")&&(C[2]=C[2].replace("%",""),C[1]=C[1].replace("%",""),C[0]=C[0].replace("",""),C[1]==1?C[1]=.01:C[2]==1&&(C[2]=.01),n({h:Number(C[0]),s:Number(C[1]),v:Number(C[2]),source:"hsv"},v))}else if(g.hsl){var x=g.hsl.split(",");$y(g.hsl,"hsl")&&(x[2]=x[2].replace("%",""),x[1]=x[1].replace("%",""),x[0]=x[0].replace("",""),p[1]==1?p[1]=.01:p[2]==1&&(p[2]=.01),n({h:Number(x[0]),s:Number(x[1]),v:Number(x[2]),source:"hsl"},v))}},c=yn({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),h=r.r+", "+r.g+", "+r.b,d=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",p=Math.round(a.h)+", "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return je.createElement("div",{style:c.wrap,className:"flexbox-fix"},je.createElement("div",{style:c.fields},je.createElement("div",{style:c.double},je.createElement($n,{style:{input:c.input,label:c.label},label:"hex",value:s,onChange:o})),je.createElement("div",{style:c.column},je.createElement("div",{style:c.single},je.createElement($n,{style:{input:c.input2,label:c.label2},label:"rgb",value:h,onChange:o})),je.createElement("div",{style:c.single},je.createElement($n,{style:{input:c.input2,label:c.label2},label:"hsv",value:p,onChange:o})),je.createElement("div",{style:c.single},je.createElement($n,{style:{input:c.input2,label:c.label2},label:"hsl",value:d,onChange:o})))))},l_=function(t){var n=t.width,r=t.onChange,i=t.rgb,s=t.hsl,a=t.hsv,o=t.hex,c=t.header,h=t.styles,d=h===void 0?{}:h,p=t.className,m=p===void 0?"":p,g=yn(ys({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},d));return je.createElement("div",{style:g.picker,className:"google-picker "+m},je.createElement("div",{style:g.head},c),je.createElement("div",{style:g.swatch}),je.createElement("div",{style:g.saturation},je.createElement(h0,{hsl:s,hsv:a,pointer:a_,onChange:r})),je.createElement("div",{style:g.body},je.createElement("div",{style:g.controls,className:"flexbox-fix"},je.createElement("div",{style:g.hue},je.createElement(xh,{style:g.Hue,hsl:s,radius:"4px",pointer:o_,onChange:r}))),je.createElement(Coe,{rgb:i,hsl:s,hex:o,hsv:a,onChange:r})))};l_.propTypes={width:Mt.oneOfType([Mt.string,Mt.number]),styles:Mt.object,header:Mt.string};l_.defaultProps={width:652,styles:{},header:"Color picker"};bs(l_);function Eoe({color:e,mode:t="blend",onColorChange:n,onClose:r}){var d;const[i,s]=pe.useState((e==null?void 0:e.hex)||"#000000");pe.useEffect(()=>{e!=null&&e.hex&&s(e.hex)},[e==null?void 0:e.hex]);const a=()=>{e!=null&&e.originalHex&&(s(e.originalHex),n&&n(e.originalHex))},o=p=>{const m=p.hex;s(m),n&&n(m)},c=()=>{s("transparent"),n&&n("transparent")},h=i==="transparent"||i==="none";return e?u.jsxs("div",{className:"color-editor-panel",children:[u.jsxs("div",{className:"editor-header",children:[u.jsx("h3",{children:"Edit Colour"}),u.jsx("button",{onClick:r,className:"close-button",children:""})]}),u.jsxs("div",{className:"editor-content",children:[u.jsxs("div",{className:"color-info-section",children:[u.jsx("div",{className:"color-display",children:u.jsxs("div",{className:"swatch-pair",children:[u.jsxs("div",{className:"swatch-group",children:[u.jsx("div",{className:"swatch original",style:{backgroundColor:e.originalHex||e.hex},title:"Original colour"}),u.jsx("span",{className:"swatch-label",children:"Original"})]}),u.jsx("span",{className:"arrow",children:""}),u.jsxs("div",{className:"swatch-group",children:[u.jsx("div",{className:`swatch current ${h?"transparent-preview":""}`,style:h?{}:{backgroundColor:i},title:"Current colour"}),u.jsx("span",{className:"swatch-label",children:h?"Transparent":"Current"})]})]})}),u.jsxs("div",{className:"color-details",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"label",children:"Hex:"}),u.jsx("span",{className:"value",children:i})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"label",children:"Coverage:"}),u.jsxs("span",{className:"value",children:[((d=e.areaPct)==null?void 0:d.toFixed(1))||0,"%"]})]})]})]}),u.jsxs("div",{className:"transparent-section",children:[u.jsx("h4",{children:"Remove Fill"}),u.jsxs("button",{className:`transparent-option ${h?"selected":""}`,onClick:c,title:"Make this area transparent (remove fill)",children:[u.jsx("div",{className:"transparent-swatch"}),u.jsx("span",{children:"Make Transparent"})]})]}),u.jsxs("div",{className:"tpv-palette-section",children:[u.jsx("h4",{children:"Standard TPV Colours"}),u.jsx("p",{className:"palette-description",children:"Select a pure TPV colour (no blending required)"}),u.jsx("div",{className:"tpv-color-grid",children:fi.map(p=>u.jsxs("div",{className:`tpv-color-item ${i.toLowerCase()===p.hex.toLowerCase()?"selected":""}`,onClick:()=>o(p),title:`${p.code} - ${p.name}`,children:[u.jsx("div",{className:"tpv-color-swatch",style:{backgroundColor:p.hex}}),u.jsx("span",{className:"tpv-color-code",children:p.code})]},p.code))})]}),Yl.BLEND_MODE_ENABLED,u.jsxs("div",{className:"solid-mode-info",children:[u.jsx("h4",{children:"Solid Mode Editing"}),u.jsx("p",{className:"info-description",children:"Select from the standard TPV colours above. Only solid TPV colours are available."}),u.jsx("button",{onClick:a,className:"reset-button",children:"Reset to Original Colour"})]})]}),u.jsx("style",{jsx:!0,children:`
        .color-editor-panel {
          position: fixed;
          top: 0;
          right: 0;
          width: 400px;
          height: 100vh;
          background: white;
          box-shadow: -4px 0 12px rgba(0, 0, 0, 0.15);
          z-index: 1000;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .editor-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1.5rem;
          border-bottom: 2px solid #1a365d;
          background: #f9f9f9;
        }

        .editor-header h3 {
          font-family: 'Overpass', sans-serif;
          margin: 0;
          color: #1e4a7a;
          font-size: 1.5rem;
          font-weight: 600;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 2rem;
          color: #666;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          line-height: 1;
          transition: color 0.2s;
        }

        .close-button:hover {
          color: #333;
        }

        .editor-content {
          flex: 1;
          overflow-y: auto;
          padding: 1.5rem;
        }

        /* Color Info Section */
        .color-info-section {
          margin-bottom: 2rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .color-display {
          margin-bottom: 1rem;
        }

        .swatch-pair {
          display: flex;
          align-items: center;
          gap: 1rem;
          justify-content: center;
        }

        .swatch-group {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
        }

        .swatch {
          width: 60px;
          height: 60px;
          border-radius: 8px;
          border: 3px solid #ddd;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .swatch.original {
          border-color: #999;
        }

        .swatch.current {
          border-color: #ff6b35;
        }

        .swatch.transparent-preview {
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 10px 10px;
          background-position: 0 0, 5px 5px;
          background-color: white;
        }

        .swatch-label {
          font-size: 0.85rem;
          color: #666;
          font-weight: 500;
        }

        .arrow {
          font-size: 1.5rem;
          color: #666;
          font-weight: bold;
        }

        .color-details {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .detail-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-size: 0.95rem;
        }

        .detail-row .label {
          font-weight: 600;
          color: #666;
        }

        .detail-row .value {
          font-family: 'Courier New', monospace;
          color: #333;
        }

        /* Transparent Section */
        .transparent-section {
          margin-bottom: 1.5rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .transparent-section h4 {
          margin: 0 0 0.75rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .transparent-option {
          display: flex;
          align-items: center;
          gap: 12px;
          width: 100%;
          padding: 12px 16px;
          background: white;
          border: 2px solid #d1d5db;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s;
          font-size: 0.95rem;
          font-weight: 500;
          color: #374151;
        }

        .transparent-option:hover {
          border-color: #6b7280;
          background: #fafafa;
        }

        .transparent-option.selected {
          border-color: #ff6b35;
          background: #fff5f0;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .transparent-swatch {
          width: 32px;
          height: 32px;
          border-radius: 4px;
          border: 1px solid #999;
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
        }

        /* TPV Palette Section */
        .tpv-palette-section {
          margin-bottom: 2rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .tpv-palette-section h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .palette-description {
          margin: 0 0 1rem 0;
          font-size: 0.85rem;
          color: #666;
        }

        .tpv-color-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 0.75rem;
        }

        .tpv-color-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.4rem;
          padding: 0.5rem;
          border: 2px solid transparent;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s;
          background: white;
        }

        .tpv-color-item:hover {
          border-color: #ff6b35;
          transform: translateY(-2px);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tpv-color-item.selected {
          border-color: #ff6b35;
          background: #fff5f0;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .tpv-color-swatch {
          width: 100%;
          height: 50px;
          border-radius: 4px;
          border: 1px solid rgba(0, 0, 0, 0.1);
          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tpv-color-code {
          font-size: 0.75rem;
          font-weight: 600;
          color: #1a365d;
          font-family: 'Courier New', monospace;
        }

        /* Picker Section */
        .picker-section {
          margin-bottom: 1rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .picker-section h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .picker-description {
          margin: 0 0 1rem 0;
          font-size: 0.85rem;
          color: #666;
        }

        .picker-section :global(.chrome-picker) {
          box-shadow: none !important;
          width: 100% !important;
        }

        .reset-button {
          width: 100%;
          padding: 0.75rem;
          margin-top: 1rem;
          background: #e0e0e0;
          color: #333;
          border: none;
          border-radius: 4px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .reset-button:hover {
          background: #d0d0d0;
        }

        /* Solid Mode Info */
        .solid-mode-info {
          margin-bottom: 1rem;
          padding: 1rem;
          background: #fff5f0;
          border: 2px solid #ff6b35;
          border-radius: 6px;
        }

        .solid-mode-info h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .info-description {
          margin: 0;
          font-size: 0.85rem;
          color: #666;
          line-height: 1.5;
        }

        /* Mobile Responsive - Fullscreen Modal */
        @media (max-width: 768px) {
          .color-editor-panel {
            width: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 0;
          }

          .editor-header {
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 10;
          }

          .editor-header h3 {
            font-size: 1.25rem;
          }

          /* Larger close button for touch */
          .close-button {
            width: 44px;
            height: 44px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .editor-content {
            padding: 1rem;
          }

          /* Color swatches - larger for touch */
          .swatch {
            width: 50px;
            height: 50px;
          }

          .color-info-section {
            padding: 0.75rem;
            margin-bottom: 1.5rem;
          }

          /* TPV color grid - better touch targets */
          .tpv-color-grid {
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
          }

          .tpv-color-item {
            padding: 0.4rem;
            min-height: 44px;
          }

          .tpv-color-swatch {
            height: 36px;
          }

          .tpv-color-code {
            font-size: 0.65rem;
          }

          .tpv-palette-section {
            padding: 0.75rem;
            margin-bottom: 1.5rem;
          }

          .tpv-palette-section h4 {
            font-size: 0.9rem;
          }

          .palette-description {
            font-size: 0.8rem;
          }

          /* Picker section */
          .picker-section {
            padding: 0.75rem;
          }

          .picker-section h4 {
            font-size: 0.9rem;
          }

          .picker-description {
            font-size: 0.8rem;
          }

          /* Larger reset button for touch */
          .reset-button {
            min-height: 44px;
            font-size: 0.9rem;
          }

          .solid-mode-info {
            padding: 0.75rem;
          }

          .solid-mode-info h4 {
            font-size: 0.9rem;
          }

          .info-description {
            font-size: 0.8rem;
          }
        }

        /* Extra small screens */
        @media (max-width: 400px) {
          .tpv-color-grid {
            grid-template-columns: repeat(3, 1fr);
          }

          .tpv-color-swatch {
            height: 44px;
          }

          .swatch {
            width: 44px;
            height: 44px;
          }

          .swatch-pair {
            gap: 0.5rem;
          }

          .arrow {
            font-size: 1.2rem;
          }
        }
      `})]}):null}const Toe=fi;new Map(Toe.map((e,t)=>[e.code,t]));function zO(e){const{inputMode:t,prompt:n,selectedFile:r,lengthMM:i,widthMM:s,result:a,viewMode:o,blendRecipes:c,solidRecipes:h,colorMapping:d,solidColorMapping:p,solidEditedColors:m,blendEditedColors:g,blendSvgUrl:v,solidSvgUrl:w,arMapping:C,jobId:x,inSituData:k,regionOverrides:P,originalTaggedSvg:j,originalUnflattenedSvg:M}=e,S=B=>B?B instanceof Map?Object.fromEntries(B):B:null;return{input_mode:t,prompt:n||null,uploaded_file_url:(r==null?void 0:r.url)||null,dimensions:{widthMM:s,lengthMM:i},original_svg_url:(a==null?void 0:a.svg_url)||null,original_png_url:(a==null?void 0:a.png_url)||null,thumbnail_url:(a==null?void 0:a.thumb_url)||null,blend_recipes:c||null,solid_recipes:h||null,color_mapping:S(d),solid_color_mapping:S(p),solid_color_edits:S(m),blend_color_edits:S(g),final_blend_svg_url:v||null,final_solid_svg_url:w||null,preferred_view_mode:o||"solid",aspect_ratio_mapping:C||null,job_id:x||null,in_situ:k?{room_photo_url:k.room_photo_url||null,mask_url:k.mask_url||null,floor_dimensions_m:k.floor_dimensions_m||null,preview_url:k.preview_url||null,blend_opacity:k.blend_opacity||20,perspective_corners:k.perspective_corners||null}:null,region_overrides:S(P),original_tagged_svg:j||null,original_unflattened_svg:M||null}}function vx(e){var a,o;const t=c=>c?c instanceof Map?c:new Map(Object.entries(c)):new Map,n=c=>{var h;return e[c]??((h=e.design_data)==null?void 0:h[c])},r=n("region_overrides"),i=n("original_tagged_svg"),s=n("original_unflattened_svg");return{inputMode:e.input_mode||n("input_mode"),prompt:n("prompt")||"",selectedFile:n("uploaded_file_url")?{url:n("uploaded_file_url"),name:n("uploaded_file_url").split("/").pop()}:null,lengthMM:((a=n("dimensions"))==null?void 0:a.lengthMM)||0,widthMM:((o=n("dimensions"))==null?void 0:o.widthMM)||0,result:{svg_url:n("original_svg_url"),png_url:n("original_png_url"),thumbnail_url:n("thumbnail_url")},blendRecipes:n("blend_recipes")||null,solidRecipes:n("solid_recipes")||null,colorMapping:t(n("color_mapping")),solidColorMapping:t(n("solid_color_mapping")),solidEditedColors:t(n("solid_color_edits")),blendEditedColors:t(n("blend_color_edits")),blendSvgUrl:null,solidSvgUrl:null,viewMode:"solid",arMapping:n("aspect_ratio_mapping"),jobId:n("job_id"),inSituData:n("in_situ")||null,regionOverrides:t(r),originalTaggedSvg:i||null,originalUnflattenedSvg:s||null,generating:!1,generatingBlends:!1,showFinalRecipes:!!e.blend_recipes,showSolidSummary:!!e.solid_recipes,colorEditorOpen:!1,selectedColor:null}}function joe(e){var n;const t=[];return e.inputMode||t.push("Input mode is required"),(!(e.widthMM>0)||!(e.lengthMM>0))&&t.push("Surface dimensions are required"),(n=e.result)!=null&&n.svg_url||t.push("No design to save - generate a design first"),{valid:t.length===0,errors:t}}function Aoe({currentState:e,existingDesignId:t=null,initialName:n="",onClose:r,onSaved:i}){const[s,a]=pe.useState(n),[o,c]=pe.useState(""),[h,d]=pe.useState(""),[p,m]=pe.useState(""),[g,v]=pe.useState(!1),[w,C]=pe.useState([]),[x,k]=pe.useState(!1),[P,j]=pe.useState(""),[M,S]=pe.useState("#1a365d"),[B,D]=pe.useState(!1),[R,ee]=pe.useState(!1),[ue,ie]=pe.useState(!1),[ge,H]=pe.useState(null);pe.useEffect(()=>{ye()},[]);const ye=async()=>{try{const{projects:xe}=await pw();C(xe)}catch(xe){console.error("Failed to load projects:",xe),H("Failed to load projects")}},Ae=async()=>{if(!P.trim()){H("Project name is required");return}ie(!0),H(null);try{const{project:xe}=await dN({name:P.trim(),color:M});C([xe,...w]),d(xe.id),k(!1),j(""),S("#1a365d")}catch(xe){console.error("Failed to create project:",xe),H(xe.message)}finally{ie(!1)}},we=async(xe=!1)=>{if(!s.trim()){H("Design name is required");return}const Le=joe(e);if(!Le.valid){H(Le.errors.join(", "));return}xe?ee(!0):D(!0),H(null);try{const Ce=zO(e);console.log("[SAVE-MODAL] Serialized design data:",Ce),console.log("[SAVE-MODAL] SVG URL from serialized data:",Ce.original_svg_url);const Re={name:s.trim(),description:o.trim()||null,project_id:h||null,tags:p.split(",").map(nt=>nt.trim()).filter(nt=>nt),is_public:g,design_data:Ce};console.log("[SAVE-MODAL] Full save payload:",Re),t&&!xe&&(Re.id=t);const it=await hw(Re);i&&i(it,s.trim()),r()}catch(Ce){console.error("Failed to save design:",Ce),H(Ce.message)}finally{D(!1),ee(!1)}},Be=["#1a365d","#ff6b35","#4a90e2","#50c878","#9b59b6","#e74c3c"];return u.jsx("div",{className:"modal-overlay",onClick:r,children:u.jsxs("div",{className:"modal-content save-design-modal",onClick:xe=>xe.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:t?"Update Design":"Save Design"}),u.jsx("button",{onClick:r,className:"close-button",children:""})]}),u.jsxs("div",{className:"modal-body",children:[ge&&u.jsx("div",{className:"error-message",children:ge}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-name",children:"Design Name *"}),u.jsx("input",{id:"design-name",type:"text",value:s,onChange:xe=>a(xe.target.value),placeholder:"e.g., Playground Design A",autoFocus:!0,disabled:B||R})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-description",children:"Description"}),u.jsx("textarea",{id:"design-description",value:o,onChange:xe=>c(xe.target.value),placeholder:"Optional notes about this design...",rows:3,disabled:B||R})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-project",children:"Project"}),x?u.jsxs("div",{className:"new-project-form",children:[u.jsxs("div",{className:"input-row",children:[u.jsx("input",{type:"text",value:P,onChange:xe=>j(xe.target.value),placeholder:"Project name...",disabled:ue}),u.jsx("div",{className:"color-picker-inline",children:Be.map(xe=>u.jsx("button",{type:"button",className:`color-swatch ${M===xe?"active":""}`,style:{backgroundColor:xe},onClick:()=>S(xe),disabled:ue},xe))})]}),u.jsxs("div",{className:"button-row",children:[u.jsx("button",{type:"button",onClick:Ae,className:"btn-primary btn-small",disabled:ue,children:ue?"Creating...":"Create"}),u.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn-secondary btn-small",disabled:ue,children:"Cancel"})]})]}):u.jsxs("div",{className:"project-selector",children:[u.jsxs("select",{id:"design-project",value:h,onChange:xe=>d(xe.target.value),disabled:B||R,children:[u.jsx("option",{value:"",children:"No Project"}),w.map(xe=>u.jsxs("option",{value:xe.id,children:[xe.name," (",xe.design_count," designs)"]},xe.id))]}),u.jsx("button",{type:"button",onClick:()=>k(!0),className:"btn-secondary btn-small",disabled:B||R,children:"+ New Project"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-tags",children:"Tags"}),u.jsx("input",{id:"design-tags",type:"text",value:p,onChange:xe=>m(xe.target.value),placeholder:"e.g., playground, vibrant, geometric (comma-separated)",disabled:B||R}),u.jsx("small",{className:"help-text",children:"Separate tags with commas"})]}),u.jsx("div",{className:"form-group checkbox-group",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:g,onChange:xe=>v(xe.target.checked),disabled:B||R}),u.jsx("span",{children:"Make this design public (shareable link)"})]})})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{onClick:r,className:"btn-secondary",disabled:B||R,children:"Cancel"}),t&&u.jsx("button",{onClick:()=>we(!0),className:"btn-secondary",disabled:B||R,children:R?"Saving...":"Save as New"}),u.jsx("button",{onClick:()=>we(!1),className:"btn-primary",disabled:B||R,children:B?"Saving...":t?"Update":"Save Design"})]})]})})}const Poe=10*1024*1024,Noe=["image/jpeg","image/png","image/jpg"];function Ooe({onPhotoUploaded:e,disabled:t=!1}){const[n,r]=pe.useState(!1),[i,s]=pe.useState(!1),[a,o]=pe.useState(null),[c,h]=pe.useState(null),d=pe.useRef(null),p=k=>{k.preventDefault(),t||r(!0)},m=k=>{k.preventDefault(),r(!1)},g=async k=>{if(k.preventDefault(),r(!1),t)return;const P=k.dataTransfer.files;P.length>0&&await C(P[0])},v=()=>{!t&&d.current&&d.current.click()},w=async k=>{k.target.files.length>0&&await C(k.target.files[0])},C=async k=>{if(o(null),!Noe.includes(k.type)){o("Please upload a JPG or PNG image");return}if(k.size>Poe){o("Image must be under 10MB");return}const P=URL.createObjectURL(k);h(P),console.log("[IN-SITU-UPLOADER] Loading local file to get dimensions...");const j=await new Promise((M,S)=>{const B=new Image;B.onload=()=>{console.log("[IN-SITU-UPLOADER] Local image loaded, dimensions:",B.naturalWidth,"x",B.naturalHeight),M({width:B.naturalWidth,height:B.naturalHeight})},B.onerror=D=>{console.error("[IN-SITU-UPLOADER] Failed to load local image:",D),S(new Error("Failed to read image dimensions"))},B.src=P});s(!0);try{const S=`in-situ-photos/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${k.type.split("/")[1]}`}`,{data:B,error:D}=await ui.storage.from("tpv-studio-uploads").upload(S,k,{cacheControl:"3600",upsert:!1});if(D)throw D;const{data:{publicUrl:R}}=ui.storage.from("tpv-studio-uploads").getPublicUrl(S);console.log("[IN-SITU-UPLOADER] Photo uploaded:",R),console.log("[IN-SITU-UPLOADER] Using dimensions from local file:",j),console.log("[IN-SITU-UPLOADER] Passing local blob URL for fast preview"),console.log("[IN-SITU-UPLOADER] Calling onPhotoUploaded callback..."),e({url:P,supabaseUrl:R,width:j.width,height:j.height,filename:k.name})}catch(M){console.error("[IN-SITU-UPLOADER] Upload failed:",M),o(M.message||"Upload failed"),URL.revokeObjectURL(P),h(null)}finally{s(!1)}},x=()=>{c&&URL.revokeObjectURL(c),h(null),o(null)};return u.jsxs("div",{className:"in-situ-uploader",children:[c?u.jsxs("div",{className:"preview-container",children:[u.jsx("img",{src:c,alt:"Site preview",className:"preview-image"}),i&&u.jsxs("div",{className:"upload-overlay",children:[u.jsx("div",{className:"upload-spinner"}),u.jsx("p",{children:"Uploading..."})]}),!i&&u.jsx("button",{className:"clear-button",onClick:x,title:"Remove photo",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}):u.jsxs("div",{className:`upload-zone ${n?"dragging":""} ${t?"disabled":""}`,onDragOver:p,onDragLeave:m,onDrop:g,onClick:v,children:[u.jsx("input",{ref:d,type:"file",accept:"image/jpeg,image/png",onChange:w,style:{display:"none"},disabled:t}),u.jsx("div",{className:"upload-icon",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),u.jsxs("div",{className:"upload-text",children:[u.jsx("p",{className:"primary",children:n?"Drop photo here":"Upload site photo"}),u.jsx("p",{className:"secondary",children:"Drag & drop or click to browse"}),u.jsx("p",{className:"hint",children:"JPG or PNG, max 10MB"})]})]}),a&&u.jsx("div",{className:"error-message",children:a}),u.jsx("style",{children:`
        .in-situ-uploader {
          width: 100%;
        }

        .upload-zone {
          border: 2px dashed #d1d5db;
          border-radius: 8px;
          padding: 2rem;
          text-align: center;
          cursor: pointer;
          transition: all 0.2s;
          background: #f9fafb;
        }

        .upload-zone:hover {
          border-color: #ff6b35;
          background: #fff7f5;
        }

        .upload-zone.dragging {
          border-color: #ff6b35;
          background: #fff7f5;
          border-style: solid;
        }

        .upload-zone.disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .upload-zone.disabled:hover {
          border-color: #d1d5db;
          background: #f9fafb;
        }

        .upload-icon {
          width: 48px;
          height: 48px;
          margin: 0 auto 1rem;
          color: #9ca3af;
        }

        .upload-zone:hover .upload-icon {
          color: #ff6b35;
        }

        .upload-text .primary {
          font-size: 1rem;
          font-weight: 600;
          color: #374151;
          margin: 0 0 0.25rem;
        }

        .upload-text .secondary {
          font-size: 0.875rem;
          color: #6b7280;
          margin: 0 0 0.5rem;
        }

        .upload-text .hint {
          font-size: 0.75rem;
          color: #9ca3af;
          margin: 0;
        }

        .preview-container {
          position: relative;
          border-radius: 8px;
          overflow: hidden;
        }

        .preview-image {
          width: 100%;
          display: block;
          border-radius: 8px;
        }

        .upload-overlay {
          position: absolute;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
        }

        .upload-spinner {
          width: 32px;
          height: 32px;
          border: 3px solid rgba(255, 255, 255, 0.3);
          border-top-color: white;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 0.5rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .clear-button {
          position: absolute;
          top: 0.5rem;
          right: 0.5rem;
          width: 32px;
          height: 32px;
          border-radius: 50%;
          background: rgba(0, 0, 0, 0.6);
          border: none;
          cursor: pointer;
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background 0.2s;
        }

        .clear-button:hover {
          background: rgba(0, 0, 0, 0.8);
        }

        .clear-button svg {
          width: 16px;
          height: 16px;
        }

        .error-message {
          margin-top: 0.75rem;
          padding: 0.5rem 0.75rem;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 4px;
          color: #dc2626;
          font-size: 0.875rem;
        }
      `})]})}function Roe(e,t){const[n,r,i,s,a,o,c,h]=e,[d,p,m,g,v,w,C,x]=t,k=[[n,r,1,0,0,0,-d*n,-d*r],[0,0,0,n,r,1,-p*n,-p*r],[i,s,1,0,0,0,-m*i,-m*s],[0,0,0,i,s,1,-g*i,-g*s],[a,o,1,0,0,0,-v*a,-v*o],[0,0,0,a,o,1,-w*a,-w*o],[c,h,1,0,0,0,-C*c,-C*h],[0,0,0,c,h,1,-x*c,-x*h]],j=Moe(k,[d,p,m,g,v,w,C,x]);return function(S,B){const D=j[6]*S+j[7]*B+1,R=(j[0]*S+j[1]*B+j[2])/D,ee=(j[3]*S+j[4]*B+j[5])/D;return[R,ee]}}function Moe(e,t){const n=e.length,r=e.map((s,a)=>[...s,t[a]]);for(let s=0;s<n;s++){let a=s;for(let o=s+1;o<n;o++)Math.abs(r[o][s])>Math.abs(r[a][s])&&(a=o);[r[s],r[a]]=[r[a],r[s]];for(let o=s+1;o<n;o++){const c=r[o][s]/r[s][s];for(let h=s;h<=n;h++)r[o][h]-=c*r[s][h]}}const i=new Array(n);for(let s=n-1;s>=0;s--){i[s]=r[s][n];for(let a=s+1;a<n;a++)i[s]-=r[s][a]*i[a];i[s]/=r[s][s]}return i}function c_(e){return new Promise((t,n)=>{const r=new Image;!e.startsWith("blob:")&&!e.startsWith("data:")?(r.crossOrigin="anonymous",console.log("[LOAD-IMAGE] Loading external URL with CORS:",e.substring(0,50))):console.log("[LOAD-IMAGE] Loading local URL (blob/data):",e.substring(0,50)),r.onload=()=>{console.log("[LOAD-IMAGE] Successfully loaded image:",e.substring(0,50)),t(r)},r.onerror=()=>{console.error("[LOAD-IMAGE] Failed to load image:",e),n(new Error(`Failed to load image: ${e}`))},r.src=e})}async function FO(e,t=1536){console.log("[RASTERIZE-SVG] Starting SVG rasterization:",e.substring(0,50),"maxSize:",t);const n=await c_(e),{naturalWidth:r,naturalHeight:i}=n;console.log("[RASTERIZE-SVG] SVG loaded with dimensions:",r,"x",i);const s=Math.min(1,t/Math.max(r,i)),a=Math.round(r*s),o=Math.round(i*s);console.log("[RASTERIZE-SVG] Scaling to:",a,"x",o,"(scale:",s.toFixed(2),")");const c=document.createElement("canvas");return c.width=a,c.height=o,c.getContext("2d").drawImage(n,0,0,a,o),console.log("[RASTERIZE-SVG] Drew SVG to canvas"),new Promise((d,p)=>{const m=new Image;m.onload=()=>{console.log("[RASTERIZE-SVG] Successfully rasterized SVG to PNG"),d(m)},m.onerror=g=>{console.error("[RASTERIZE-SVG] Failed to convert canvas to image:",g),p(g)},m.src=c.toDataURL("image/png")})}function BO({photoCtx:e,photoImg:t,designImg:n,quad:r,opacity:i,shape:s,lighting:a}){const o=e.canvas;e.clearRect(0,0,o.width,o.height),e.drawImage(t,0,0,o.width,o.height);const c=n.width,h=n.height,d=[0,0,c,0,c,h,0,h],p=[r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y],m=Roe(d,p),g=10,v=c/g,w=h/g,C=document.createElement("canvas");if(C.width=c,C.height=h,C.getContext("2d").drawImage(n,0,0),e.save(),e.globalAlpha=i,a&&a.enabled){const P=a.strength||.6,j=1+(a.baseBrightness-1)*P,M=1+(a.baseContrast-1)*P;e.filter=`brightness(${j}) contrast(${M})`}const k=s&&s.length>=3?s:r;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(let P=1;P<k.length;P++)e.lineTo(k[P].x,k[P].y);e.closePath(),e.clip();for(let P=0;P<g;P++)for(let j=0;j<g;j++){const M=P*v,S=j*w,B=(P+1)*v,D=(j+1)*w,R=m(M,S),ee=m(B,S),ue=m(B,D),ie=m(M,D);dE(e,C,M,S,B,S,M,D,R[0],R[1],ee[0],ee[1],ie[0],ie[1]),dE(e,C,B,S,B,D,M,D,ee[0],ee[1],ue[0],ue[1],ie[0],ie[1])}e.restore()}function dE(e,t,n,r,i,s,a,o,c,h,d,p,m,g){e.save(),e.beginPath(),e.moveTo(c,h),e.lineTo(d,p),e.lineTo(m,g),e.closePath(),e.clip();const v=(n-a)*(s-o)-(i-a)*(r-o);if(Math.abs(v)<.001){e.restore();return}const w=((c-m)*(s-o)-(d-m)*(r-o))/v,C=((h-g)*(s-o)-(p-g)*(r-o))/v,x=((n-a)*(d-m)-(i-a)*(c-m))/v,k=((n-a)*(p-g)-(i-a)*(h-g))/v,P=c-w*n-x*r,j=h-C*n-k*r;e.setTransform(w,C,x,k,P,j),e.drawImage(t,0,0),e.restore()}function Loe(e,t="tpv-in-situ-preview.png"){e.toBlob(n=>{const r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},"image/png")}function Ioe(e,t,n,r){const i=n/r,s=e*.6,a=t*.6;let o,c;i>s/a?(o=s,c=s/i):(c=a,o=a*i);const h=(e-o)/2,d=(t-c)/2;return[{x:h,y:d},{x:h+o,y:d},{x:h+o,y:d+c},{x:h,y:d+c}]}function $oe(e,t,n){let r=!1;for(let i=0,s=n.length-1;i<n.length;s=i++){const a=n[i].x,o=n[i].y,c=n[s].x,h=n[s].y;o>t!=h>t&&e<(c-a)*(t-o)/(h-o)+a&&(r=!r)}return r}function Doe(e,t,n){e/=255,t/=255,n/=255;const r=Math.max(e,t,n),i=Math.min(e,t,n),s=(r+i)/2;if(r===i)return{h:0,s:0,l:s};const a=r-i,o=s>.5?a/(2-r-i):a/(r+i);let c;switch(r){case e:c=((t-n)/a+(t<n?6:0))/6;break;case t:c=((n-e)/a+2)/6;break;case n:c=((e-t)/a+4)/6;break}return{h:c,s:o,l:s}}function zoe(e,t,n=2e3){if(!e||!t||t.length<3)return{avgLightness:.5,avgContrastProxy:.5};const r=Math.floor(Math.min(...t.map(k=>k.x))),i=Math.ceil(Math.max(...t.map(k=>k.x))),s=Math.floor(Math.min(...t.map(k=>k.y))),a=Math.ceil(Math.max(...t.map(k=>k.y))),o=i-r,c=a-s;if(o<=0||c<=0)return{avgLightness:.5,avgContrastProxy:.5};let h;try{h=e.getImageData(r,s,o,c)}catch(k){return console.warn("[LIGHTING] Failed to get image data:",k),{avgLightness:.5,avgContrastProxy:.5}}const d=h.data,p=[];let m=0;const g=n*5;for(;p.length<n&&m<g;){m++;const k=r+Math.random()*o,P=s+Math.random()*c;if(!$oe(k,P,t))continue;const j=Math.floor(k-r),S=(Math.floor(P-s)*o+j)*4;if(S<0||S>=d.length-3)continue;const B=d[S],D=d[S+1],R=d[S+2],{l:ee}=Doe(B,D,R);p.push(ee)}if(p.length===0)return{avgLightness:.5,avgContrastProxy:.5};const v=p.reduce((k,P)=>k+P,0)/p.length,w=p.reduce((k,P)=>k+Math.pow(P-v,2),0)/p.length,C=Math.sqrt(w),x=Math.min(1,C/.25);return{avgLightness:v,avgContrastProxy:x}}function Foe(e){let t=1,n=1;const i=e.avgLightness-.5;return t+=i*.6,n+=(e.avgContrastProxy-.5)*.4,t=Math.max(.7,Math.min(1.3,t)),n=Math.max(.8,Math.min(1.25,n)),{brightness:t,contrast:n}}const Boe=100;function Uoe({photoUrl:e,svgUrl:t,designSizeMm:n,initialQuad:r,initialShape:i,initialOpacity:s=.8,initialLighting:a,onChange:o}){const[c,h]=pe.useState(null),[d,p]=pe.useState(null),[m,g]=pe.useState(r||null),[v,w]=pe.useState(i||null),[C,x]=pe.useState(Math.max(.3,Math.min(1,s))),[k,P]=pe.useState(a||{enabled:!1,strength:.6,baseBrightness:1,baseContrast:1}),[j,M]=pe.useState(!0),[S,B]=pe.useState(null),[D,R]=pe.useState(1),[ee,ue]=pe.useState("corners"),[ie,ge]=pe.useState(null),[H,ye]=pe.useState(!1),[Ae,we]=pe.useState(null),[Be,xe]=pe.useState(null),Le=pe.useRef(null),Ce=pe.useRef(null),Re=pe.useRef(null),[it,nt]=pe.useState([]),Ue=20;pe.useEffect(()=>{lt()},[e,t]),pe.useEffect(()=>{c&&d&&m&&de()},[c,d,m,v,C,k,ee,ie,H,Be]),pe.useEffect(()=>{if(!c||!m||m.length!==4)return;const l=document.createElement("canvas");l.width=c.naturalWidth,l.height=c.naturalHeight;const f=l.getContext("2d");f.drawImage(c,0,0);const b=zoe(f,m),{brightness:_,contrast:E}=Foe(b);P(A=>({...A,baseBrightness:_,baseContrast:E}))},[c,JSON.stringify(m)]),pe.useEffect(()=>{const l=f=>{if(ee==="shape"&&(f.key==="Delete"||f.key==="Backspace")&&Be!==null&&v&&v.length>3){f.preventDefault();const b=v.filter((_,E)=>E!==Be);w(b),xe(null),We(m,C,b)}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[ee,Be,v,m,C]);const lt=async()=>{var l;console.log("[FOUR-POINT] Starting to load images - photo:",e==null?void 0:e.substring(0,50),"svg:",t==null?void 0:t.substring(0,50)),M(!0),B(null);try{console.log("[FOUR-POINT] Loading photo and rasterizing SVG...");const[f,b]=await Promise.all([c_(e),FO(t,1536)]);console.log("[FOUR-POINT] Both images loaded successfully - photo:",f.naturalWidth,"x",f.naturalHeight,"design:",b.naturalWidth,"x",b.naturalHeight),h(f),p(b);const _=((l=Ce.current)==null?void 0:l.clientWidth)||800,E=500,A=_/f.naturalWidth,T=E/f.naturalHeight,N=Math.min(1,A,T);if(R(N),console.log("[FOUR-POINT] Display scale set to:",N.toFixed(3)),r)console.log("[FOUR-POINT] Using provided initial quad");else{const $=Ioe(f.naturalWidth,f.naturalHeight,n.width_mm,n.length_mm);g($),console.log("[FOUR-POINT] Initialized default quad")}}catch(f){console.error("[FOUR-POINT] Failed to load images:",f),B(f.message)}finally{M(!1),console.log("[FOUR-POINT] Loading complete")}},de=()=>{const l=Le.current;if(!l||!c||!d||!m)return;l.width=c.naturalWidth,l.height=c.naturalHeight;const f=l.getContext("2d");BO({photoCtx:f,photoImg:c,designImg:d,quad:m,opacity:C,shape:v,lighting:k}),oe(f)},oe=l=>{if(!m)return;l.setTransform(1,0,0,1,0,0);const f=Math.max(8,Math.min(15,c.naturalWidth/80));if(ee==="corners"){l.strokeStyle="rgba(255, 255, 255, 0.8)",l.lineWidth=2,l.setLineDash([5,5]),l.beginPath(),l.moveTo(m[0].x,m[0].y),l.lineTo(m[1].x,m[1].y),l.lineTo(m[2].x,m[2].y),l.lineTo(m[3].x,m[3].y),l.closePath(),l.stroke(),l.setLineDash([]);const b=["TL","TR","BR","BL"];m.forEach((_,E)=>{l.beginPath(),l.arc(_.x,_.y,f,0,Math.PI*2),l.fillStyle=ie===E?"#ff6b35":"rgba(255, 107, 53, 0.9)",l.fill(),l.strokeStyle="white",l.lineWidth=2,l.stroke(),l.fillStyle="white",l.font="10px sans-serif",l.textAlign="center",l.textBaseline="middle",l.fillText(b[E],_.x,_.y)})}else{const b=v||m;l.strokeStyle="rgba(34, 197, 94, 0.8)",l.lineWidth=2,l.setLineDash([]),l.beginPath(),l.moveTo(b[0].x,b[0].y);for(let _=1;_<b.length;_++)l.lineTo(b[_].x,b[_].y);l.closePath(),l.stroke(),b.forEach((_,E)=>{l.beginPath(),l.arc(_.x,_.y,f*.8,0,Math.PI*2),Be===E?l.fillStyle="#22c55e":ie===E?l.fillStyle="#16a34a":l.fillStyle="rgba(34, 197, 94, 0.9)",l.fill(),l.strokeStyle="white",l.lineWidth=2,l.stroke()}),l.strokeStyle="rgba(255, 107, 53, 0.3)",l.lineWidth=1,l.setLineDash([3,3]),l.beginPath(),l.moveTo(m[0].x,m[0].y),l.lineTo(m[1].x,m[1].y),l.lineTo(m[2].x,m[2].y),l.lineTo(m[3].x,m[3].y),l.closePath(),l.stroke(),l.setLineDash([])}},We=pe.useCallback((l,f,b,_)=>{Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{o&&o({quad:l,opacity:f,shape:b,lighting:_||k})},Boe)},[o,k]),Ne=pe.useCallback(()=>{nt(l=>{const f=[...l,{quad:[...m],shape:v?[...v]:null,opacity:C,lighting:{...k}}];return f.length>Ue?f.slice(-Ue):f})},[m,v,C,k]),ht=()=>{if(it.length===0)return;const l=it[it.length-1];nt(f=>f.slice(0,-1)),g(l.quad),w(l.shape),x(l.opacity),P(l.lighting),We(l.quad,l.opacity,l.shape,l.lighting)},jt=(l,f)=>({x:l/D,y:f/D}),Ct=(l,f,b)=>{if(!b)return-1;const _=25/D;for(let E=0;E<b.length;E++){const A=b[E].x-l,T=b[E].y-f;if(Math.sqrt(A*A+T*T)<_)return E}return-1},q=(l,f,b)=>{if(!b||b.length<3)return!1;let _=!1;for(let E=0,A=b.length-1;E<b.length;A=E++){const T=b[E].x,N=b[E].y,$=b[A].x,F=b[A].y;N>f!=F>f&&l<($-T)*(f-N)/(F-N)+T&&(_=!_)}return _},Ye=l=>{if(ee!=="shape"||!v||v.length<=3)return;const f=Le.current;if(!f)return;const b=f.getBoundingClientRect(),_=l.clientX-b.left,E=l.clientY-b.top,{x:A,y:T}=jt(_,E),N=Ct(A,T,v);if(N>=0){Ne();const $=v.filter((G,Z)=>Z!==N);w($),xe(null);const F=Q(m,$);F!==m?(g(F),We(F,C,$)):We(m,C,$)}},se=l=>{const f=Le.current;if(!f)return;const b=f.getBoundingClientRect(),_=l.clientX-b.left,E=l.clientY-b.top,{x:A,y:T}=jt(_,E);if(ee==="corners"){const N=Ct(A,T,m);N>=0?(Ne(),ge(N),f.setPointerCapture(l.pointerId)):q(A,T,m)&&(Ne(),ye(!0),we({x:A,y:T}),f.setPointerCapture(l.pointerId))}else{const N=v||m,$=Ct(A,T,N);if($>=0)Ne(),ge($),xe($),f.setPointerCapture(l.pointerId);else{Ne();let F=0,G=1/0;for(let X=0;X<N.length;X++){const U=(X+1)%N.length,K=ve(A,T,N[X].x,N[X].y,N[U].x,N[U].y);K<G&&(G=K,F=U)}const Z={x:A,y:T},Y=[...N];Y.splice(F,0,Z),w(Y),xe(F);const W=Q(m,Y);W!==m?(g(W),We(W,C,Y)):We(m,C,Y)}}},L=l=>{if(ie===null&&!H)return;const f=Le.current;if(!f)return;const b=f.getBoundingClientRect(),_=l.clientX-b.left,E=l.clientY-b.top,{x:A,y:T}=jt(_,E),N=Math.max(0,Math.min(c.naturalWidth,A)),$=Math.max(0,Math.min(c.naturalHeight,T));if(ee==="corners"){if(H&&Ae){const F=N-Ae.x,G=$-Ae.y,Z=m.map(W=>({x:Math.max(0,Math.min(c.naturalWidth,W.x+F)),y:Math.max(0,Math.min(c.naturalHeight,W.y+G))}));let Y=v;v&&(Y=v.map(W=>({x:Math.max(0,Math.min(c.naturalWidth,W.x+F)),y:Math.max(0,Math.min(c.naturalHeight,W.y+G))})),w(Y)),g(Z),we({x:N,y:$}),We(Z,C,Y)}else if(ie!==null){const F=[...m];F[ie]={x:N,y:$},g(F),We(F,C,v)}}else{const G=[...v||m];G[ie]={x:N,y:$},w(G),We(m,C,G)}},I=l=>{if(ie!==null||H){const f=Le.current;if(f&&f.releasePointerCapture(l.pointerId),ee==="shape"&&v&&ie!==null){const b=Q(m,v);b!==m&&(g(b),We(b,C,v))}ge(null),ye(!1),we(null)}},Q=(l,f)=>{if(!f||f.length<3||!l)return l;const b=l.reduce((W,X)=>W+X.x,0)/4,_=l.reduce((W,X)=>W+X.y,0)/4,E=f.reduce((W,X)=>W+X.x,0)/f.length,A=f.reduce((W,X)=>W+X.y,0)/f.length;let T=1;for(const W of f){const X=W.x-b,U=W.y-_,K=Math.sqrt(X*X+U*U);if(K<1)continue;const V=he(b,_,X,U,l);if(V>0&&K>V){const ne=K/V;T=Math.max(T,ne)}}let N=1/0;for(const W of f){const X=W.x-b,U=W.y-_,K=Math.sqrt(X*X+U*U);if(K<1)continue;const V=he(b,_,X,U,l);if(V>0){const ne=K/V;N=Math.min(N,ne)}}let $=T;if(T<=1&&N<1/0&&($=N),Math.abs($-1)<.01)return l;const F=l.map(W=>({x:b+(W.x-b)*$,y:_+(W.y-_)*$})),G=E-b,Z=A-_;return F.map(W=>({x:W.x+G,y:W.y+Z}))},he=(l,f,b,_,E)=>{let A=1/0;for(let T=0;T<4;T++){const N=E[T],$=E[(T+1)%4],F=$.x-N.x,G=$.y-N.y,Z=b*G-_*F;if(Math.abs(Z)<1e-4)continue;const Y=((N.x-l)*G-(N.y-f)*F)/Z,W=((N.x-l)*_-(N.y-f)*b)/Z;Y>0&&W>=0&&W<=1&&(A=Math.min(A,Y*Math.sqrt(b*b+_*_)))}return A===1/0?0:A},ve=(l,f,b,_,E,A)=>{const T=l-b,N=f-_,$=E-b,F=A-_,G=T*$+N*F,Z=$*$+F*F;let Y=Z!==0?G/Z:-1,W,X;return Y<0?(W=b,X=_):Y>1?(W=E,X=A):(W=b+Y*$,X=_+Y*F),Math.sqrt((l-W)**2+(f-X)**2)},me=()=>{ee==="corners"?(v||w([...m]),ue("shape"),xe(null)):(ue("corners"),xe(null))},Me=l=>{const f=Math.max(.3,Math.min(1,parseFloat(l.target.value)/100));x(f),We(m,f,v)},Je=l=>{const f={...k,enabled:l.target.checked};P(f),We(m,C,v,f)},De=l=>{const f={...k,strength:parseFloat(l.target.value)/100};P(f),We(m,C,v,f)};return j?u.jsxs("div",{className:"four-point-editor loading",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Loading preview..."})]}):S?u.jsx("div",{className:"four-point-editor error",children:u.jsxs("p",{children:["Failed to load: ",S]})}):u.jsxs("div",{className:"four-point-editor",ref:Ce,children:[u.jsxs("div",{className:"editor-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h3",{children:"Position Your Design"}),u.jsx(yw,{content:u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Corners Mode:"})," Drag the 4 corner handles (TL, TR, BR, BL) to position your design with perspective. You can also drag inside the design to move all corners at once."]}),u.jsxs("p",{style:{marginTop:"0.5rem"},children:[u.jsx("strong",{children:"Refine Shape Mode:"})," Click anywhere to add new vertices for precise shape control. Drag existing vertices to adjust. Double-click or press Delete/Backspace on a vertex to remove it."]}),u.jsxs("p",{style:{marginTop:"0.5rem"},children:[u.jsx("strong",{children:"Overlay Opacity:"})," Adjust transparency to see how the design blends with your photo."]}),u.jsxs("p",{style:{marginTop:"0.5rem"},children:[u.jsx("strong",{children:"Match Floor Lighting:"})," Automatically adjusts design brightness to match your floor's lighting conditions."]})]}),position:"right"})]}),u.jsx("p",{className:"instructions",children:ee==="corners"?"Drag the corner handles (TL, TR, BR, BL) to position the design. Drag inside to move all corners.":"Click to add vertices, drag to move them, double-click or press Delete to remove."})]}),u.jsx("div",{className:"canvas-container",children:u.jsx("canvas",{ref:Le,onPointerDown:se,onPointerMove:L,onPointerUp:I,onPointerLeave:I,onDoubleClick:Ye,style:{width:`${((c==null?void 0:c.naturalWidth)||800)*D}px`,height:`${((c==null?void 0:c.naturalHeight)||600)*D}px`,cursor:ie!==null||H?"grabbing":ee==="shape"?"crosshair":"move",touchAction:"none"}})}),u.jsxs("div",{className:"controls",children:[u.jsxs("div",{className:"mode-toggle",children:[u.jsx("button",{className:`toggle-btn ${ee==="corners"?"active":""}`,onClick:()=>ue("corners"),children:"Corners"}),u.jsx("button",{className:`toggle-btn ${ee==="shape"?"active":""}`,onClick:me,children:"Refine Shape"}),u.jsx("button",{className:"toggle-btn undo-btn",onClick:ht,disabled:it.length===0,title:"Undo last change",children:"Undo"})]}),u.jsxs("div",{className:"opacity-control",children:[u.jsxs("label",{children:["Overlay Opacity",u.jsxs("span",{className:"value",children:[Math.round(C*100),"%"]})]}),u.jsx("input",{type:"range",min:"30",max:"100",value:Math.round(C*100),onChange:Me})]}),u.jsxs("div",{className:"lighting-control",children:[u.jsxs("label",{className:"checkbox-label",children:[u.jsx("input",{type:"checkbox",checked:k.enabled,onChange:Je}),"Match floor lighting"]}),k.enabled&&u.jsxs("div",{className:"lighting-slider",children:[u.jsxs("label",{children:["Strength",u.jsxs("span",{className:"value",children:[Math.round(k.strength*100),"%"]})]}),u.jsx("input",{type:"range",min:"0",max:"100",value:Math.round(k.strength*100),onChange:De})]})]})]}),u.jsx("style",{children:`
        .four-point-editor {
          display: flex;
          flex-direction: column;
          height: 100%;
        }

        .four-point-editor.loading,
        .four-point-editor.error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 400px;
          color: #6b7280;
        }

        .four-point-editor .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid #e5e7eb;
          border-top-color: #ff6b35;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .editor-header {
          padding-bottom: 1rem;
          border-bottom: 1px solid #e5e7eb;
          margin-bottom: 1rem;
        }

        .editor-header .header-title {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 0.5rem;
        }

        .editor-header h3 {
          margin: 0;
          font-size: 1.125rem;
          color: #1e4a7a;
        }

        .editor-header .instructions {
          margin: 0;
          font-size: 0.875rem;
          color: #6b7280;
        }

        .canvas-container {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f3f4f6;
          border-radius: 8px;
          overflow: hidden;
          min-height: 400px;
        }

        .canvas-container canvas {
          display: block;
        }

        .controls {
          padding-top: 1rem;
          border-top: 1px solid #e5e7eb;
          margin-top: 1rem;
          display: flex;
          flex-direction: column;
          gap: 1rem;
        }

        .mode-toggle {
          display: flex;
          gap: 0.5rem;
        }

        .toggle-btn {
          padding: 0.5rem 1rem;
          border: 1px solid #d1d5db;
          background: white;
          border-radius: 4px;
          font-size: 0.875rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .toggle-btn:hover {
          background: #f9fafb;
        }

        .toggle-btn.active {
          background: #ff6b35;
          color: white;
          border-color: #ff6b35;
        }

        .toggle-btn:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }

        .toggle-btn:disabled:hover {
          background: white;
        }

        .opacity-control {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .opacity-control label {
          display: flex;
          justify-content: space-between;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
        }

        .opacity-control .value {
          font-weight: 400;
          color: #6b7280;
        }

        .opacity-control input[type="range"] {
          width: 100%;
          height: 6px;
          border-radius: 3px;
          background: #e5e7eb;
          outline: none;
          -webkit-appearance: none;
        }

        .opacity-control input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: #ff6b35;
          cursor: pointer;
        }

        .lighting-control {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .checkbox-label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
          cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
          width: 16px;
          height: 16px;
          cursor: pointer;
        }

        .lighting-slider {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          padding-left: 1.5rem;
        }

        .lighting-slider label {
          display: flex;
          justify-content: space-between;
          font-size: 0.8rem;
          color: #6b7280;
        }

        .lighting-slider .value {
          font-weight: 400;
        }

        .lighting-slider input[type="range"] {
          width: 100%;
          height: 6px;
          border-radius: 3px;
          background: #e5e7eb;
          outline: none;
          -webkit-appearance: none;
        }

        .lighting-slider input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #22c55e;
          cursor: pointer;
        }
      `})]})}const Ba={UPLOAD:"upload",POSITION:"position"};function UO({designUrl:e,designDimensions:t,onClose:n,onSaved:r}){const[i,s]=pe.useState(Ba.UPLOAD),[a,o]=pe.useState(null),[c,h]=pe.useState(null),[d,p]=pe.useState(null),[m,g]=pe.useState(.8),[v,w]=pe.useState({enabled:!1,strength:.6,baseBrightness:1,baseContrast:1}),[C,x]=pe.useState(!1),k=pe.useRef(null);pe.useEffect(()=>{if(e){console.log("[IN-SITU-MODAL] Design URL received:",e==null?void 0:e.substring(0,50));const R=new Image;!e.startsWith("blob:")&&!e.startsWith("data:")&&(R.crossOrigin="anonymous"),R.src=e}else console.warn("[IN-SITU-MODAL] No design URL provided")},[e]);const P=R=>{console.log("[IN-SITU-MODAL] Photo uploaded:",R),o(R),console.log("[IN-SITU-MODAL] Advancing to POSITION step, designUrl:",e==null?void 0:e.substring(0,50)),s(Ba.POSITION)},j=({quad:R,opacity:ee,shape:ue,lighting:ie})=>{h(R),g(ee),p(ue),ie&&w(ie)},M=async()=>{if(!a||!c)return null;try{console.log("[InSitu] Loading design from URL:",e);const[R,ee]=await Promise.all([c_(a.url),FO(e,1536)]);console.log("[InSitu] Successfully loaded design image");const ue=document.createElement("canvas");ue.width=R.naturalWidth,ue.height=R.naturalHeight;const ie=ue.getContext("2d");return BO({photoCtx:ie,photoImg:R,designImg:ee,quad:c,opacity:m,shape:d,lighting:v}),ue}catch(R){return console.error("[InSitu] Failed to generate canvas:",R),alert(`Failed to load design: ${R.message}`),null}},S=async()=>{const R=await M();R&&Loe(R,"tpv-in-situ-preview.png")},B=async()=>{if(!(!c||!a)){x(!0);try{const R=await M();if(!R)throw new Error("Failed to generate preview");const ee=await new Promise(ye=>R.toBlob(ye,"image/png")),ie=`in-situ-previews/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`}`,{error:ge}=await ui.storage.from("tpv-studio-uploads").upload(ie,ee,{contentType:"image/png",cacheControl:"3600"});if(ge)throw ge;const{data:{publicUrl:H}}=ui.storage.from("tpv-studio-uploads").getPublicUrl(ie);r&&r({photo_url:a.supabaseUrl||a.url,quad:c,shape:d,opacity:m,lighting:v,preview_url:H}),n()}catch(R){console.error("[IN-SITU] Save failed:",R),alert("Failed to save preview: "+R.message)}finally{x(!1)}}},D=()=>{switch(i){case Ba.UPLOAD:return"Upload Site Photo";case Ba.POSITION:return"Position Your Design";default:return"In-Situ Preview"}};return u.jsxs("div",{className:"modal-overlay in-situ-modal-overlay",onClick:n,children:[u.jsxs("div",{className:"modal-content in-situ-modal",onClick:R=>R.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"header-left",children:[u.jsx("h2",{children:D()}),u.jsxs("div",{className:"step-indicator",children:[u.jsx("span",{className:i===Ba.UPLOAD?"active":"completed",children:"1. Upload"}),u.jsx("span",{className:i===Ba.POSITION?"active":"",children:"2. Position"})]})]}),u.jsx("button",{onClick:n,className:"close-button",children:""})]}),u.jsxs("div",{className:"modal-body",children:[i===Ba.UPLOAD&&u.jsxs("div",{className:"upload-step",children:[u.jsx("p",{className:"step-description",children:"Upload a photo of your site to see how your TPV design will look when installed. For best results, use a photo taken from above or at a slight angle showing the floor area clearly."}),u.jsx(Ooe,{onPhotoUploaded:P})]}),i===Ba.POSITION&&a&&u.jsx(Uoe,{ref:k,photoUrl:a.url,svgUrl:e,designSizeMm:{width_mm:t.width,length_mm:t.length},initialOpacity:.8,onChange:j})]}),i===Ba.POSITION&&u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{onClick:()=>s(Ba.UPLOAD),className:"btn-secondary",children:"Back"}),u.jsxs("div",{className:"footer-actions",children:[u.jsx("button",{onClick:S,disabled:!c,className:"btn-secondary",children:"Download PNG"}),u.jsx("button",{onClick:B,disabled:!c||C,className:"btn-primary",children:C?"Saving...":"Save to Project"})]})]})]}),u.jsx("style",{children:`
        .in-situ-modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 1rem;
        }

        .in-situ-modal {
          background: white;
          border-radius: 12px;
          width: 100%;
          max-width: 1000px;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .in-situ-modal .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          padding: 1.25rem 1.5rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .header-left {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .in-situ-modal .modal-header h2 {
          margin: 0;
          font-size: 1.25rem;
          color: #1e4a7a;
        }

        .step-indicator {
          display: flex;
          gap: 1rem;
          font-size: 0.75rem;
        }

        .step-indicator span {
          color: #9ca3af;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
        }

        .step-indicator span.active {
          background: #fff7f5;
          color: #ff6b35;
          font-weight: 500;
        }

        .step-indicator span.completed {
          color: #22c55e;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 1.5rem;
          cursor: pointer;
          color: #9ca3af;
          padding: 0;
          line-height: 1;
        }

        .close-button:hover {
          color: #374151;
        }

        .modal-body {
          flex: 1;
          padding: 1.5rem;
          overflow-y: auto;
          min-height: 500px;
        }

        .upload-step {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }

        .step-description {
          margin: 0;
          font-size: 0.875rem;
          color: #6b7280;
          line-height: 1.6;
        }

        .modal-footer {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 1.5rem;
          border-top: 1px solid #e5e7eb;
          background: #f9fafb;
          border-radius: 0 0 12px 12px;
        }

        .footer-actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary {
          padding: 0.5rem 1rem;
          border-radius: 4px;
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          border: none;
        }

        .btn-primary {
          background: #ff6b35;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #e55a2b;
        }

        .btn-primary:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        .btn-secondary {
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
        }

        .btn-secondary:hover:not(:disabled) {
          background: #f9fafb;
        }

        .btn-secondary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
          .in-situ-modal {
            max-width: 100%;
            max-height: 100vh;
            border-radius: 0;
          }

          .modal-body {
            padding: 1rem;
          }

          .step-indicator {
            display: none;
          }

          .modal-footer {
            border-radius: 0;
          }
        }
      `})]})}function Hoe({isOpen:e,onClose:t,onConfirm:n,aspectRatio:r,defaultLongestSide:i=5e3}){const[s,a]=pe.useState(i),[o,c]=pe.useState(i/1e3),d=(w=>{if(!r||r<=0)return{width:w,length:w};if(r>=1){const C=w,x=Math.round(w/r);return{width:C,length:x}}else{const C=w;return{width:Math.round(w*r),length:C}}})(s),p=r>=1?"landscape":"portrait",m=r>=1?`${r.toFixed(1)}:1`:`1:${(1/r).toFixed(1)}`,g=w=>{const C=parseFloat(w.target.value)||0;c(C),a(Math.round(C*1e3))},v=()=>{n(d.width,d.length),t()};return e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"dimension-modal-overlay",onClick:t,children:u.jsxs("div",{className:"dimension-modal",onClick:w=>w.stopPropagation(),children:[u.jsxs("div",{className:"dimension-modal-header",children:[u.jsxs("div",{className:"dimension-modal-title",children:[u.jsx("h2",{children:"Set Installation Size"}),u.jsx(yw,{content:u.jsxs("div",{children:[u.jsx("p",{children:u.jsx("strong",{children:"Why specify dimensions?"})}),u.jsx("p",{style:{marginTop:"0.5rem"},children:"Accurate dimensions are essential for:"}),u.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.25rem"},children:[u.jsx("li",{children:"Calculating exact material quantities"}),u.jsx("li",{children:"Generating PDF specifications for manufacturers"}),u.jsx("li",{children:"Slicing designs into 1m1m installation tiles"})]}),u.jsxs("p",{style:{marginTop:"0.5rem"},children:[u.jsx("strong",{children:"Tip:"})," Typical playground installations range from 3m to 20m on the longest side."]})]}),position:"bottom"})]}),u.jsx("button",{className:"dimension-modal-close",onClick:t,"aria-label":"Close",children:""})]}),u.jsxs("div",{className:"dimension-modal-body",children:[u.jsx("div",{className:"dimension-info",children:u.jsxs("p",{className:"dimension-aspect",children:["Your design has a ",u.jsxs("strong",{children:[m," ",p]})," aspect ratio"]})}),u.jsxs("div",{className:"dimension-input-group",children:[u.jsx("label",{htmlFor:"longest-dimension",children:"Installation Size (Longest Side)"}),u.jsxs("div",{className:"dimension-input-wrapper",children:[u.jsx("input",{id:"longest-dimension",type:"number",min:"0.1",max:"50",step:"0.1",value:o,onChange:g,className:"dimension-input"}),u.jsx("span",{className:"dimension-unit",children:"meters"})]}),u.jsx("p",{className:"dimension-help",children:"Enter the measurement of the longest side of your installation area. The other dimension will be calculated automatically based on your design's aspect ratio."})]}),u.jsxs("div",{className:"dimension-preview",children:[u.jsx("div",{className:"dimension-preview-title",children:"Calculated Dimensions:"}),u.jsxs("div",{className:"dimension-preview-values",children:[u.jsxs("div",{className:"dimension-preview-item",children:[u.jsx("span",{className:"dimension-preview-label",children:"Width:"}),u.jsxs("span",{className:"dimension-preview-value",children:[(d.width/1e3).toFixed(2),"m"]})]}),u.jsxs("div",{className:"dimension-preview-item",children:[u.jsx("span",{className:"dimension-preview-label",children:"Length:"}),u.jsxs("span",{className:"dimension-preview-value",children:[(d.length/1e3).toFixed(2),"m"]})]}),u.jsxs("div",{className:"dimension-preview-item",children:[u.jsx("span",{className:"dimension-preview-label",children:"Total Area:"}),u.jsxs("span",{className:"dimension-preview-value",children:[(d.width*d.length/1e6).toFixed(2),"m"]})]})]})]}),u.jsxs("div",{className:"dimension-note",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"8",cy:"8",r:"7"}),u.jsx("line",{x1:"8",y1:"11",x2:"8",y2:"8"}),u.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),u.jsx("p",{children:"These dimensions will be used to calculate material quantities for your PDF specification and to slice your design into 1m1m installation tiles."})]})]}),u.jsxs("div",{className:"dimension-modal-footer",children:[u.jsx("button",{className:"dimension-btn dimension-btn-secondary",onClick:t,children:"Cancel"}),u.jsx("button",{className:"dimension-btn dimension-btn-primary",onClick:v,disabled:o<=0,children:"Confirm Size"})]})]})}),u.jsx("style",{children:`
        .dimension-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
        backdrop-filter: blur(4px);
      }

      .dimension-modal {
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        animation: dimensionModalSlideIn 0.3s ease-out;
      }

      @keyframes dimensionModalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .dimension-modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px;
        border-bottom: 1px solid #e5e7eb;
      }

      .dimension-modal-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .dimension-modal-header h2 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
        color: #111827;
      }

      .dimension-modal-close {
        background: none;
        border: none;
        font-size: 2rem;
        line-height: 1;
        color: #9ca3af;
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        transition: all 0.2s;
      }

      .dimension-modal-close:hover {
        background: #f3f4f6;
        color: #111827;
      }

      .dimension-modal-body {
        padding: 24px;
        overflow-y: auto;
        flex: 1;
      }

      .dimension-info {
        background: #f0f9ff;
        border: 1px solid #bae6fd;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 24px;
      }

      .dimension-aspect {
        margin: 0;
        color: #0c4a6e;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .dimension-input-group {
        margin-bottom: 24px;
      }

      .dimension-input-group label {
        display: block;
        font-weight: 600;
        color: #374151;
        margin-bottom: 8px;
        font-size: 0.95rem;
      }

      .dimension-input-wrapper {
        position: relative;
        display: flex;
        align-items: center;
      }

      .dimension-input {
        width: 100%;
        padding: 12px 16px;
        padding-right: 70px;
        font-size: 1.1rem;
        border: 2px solid #d1d5db;
        border-radius: 10px;
        transition: all 0.2s;
        font-family: inherit;
      }

      .dimension-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .dimension-unit {
        position: absolute;
        right: 16px;
        color: #6b7280;
        font-weight: 500;
        pointer-events: none;
      }

      .dimension-help {
        margin: 8px 0 0 0;
        font-size: 0.85rem;
        color: #6b7280;
      }

      .dimension-preview {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .dimension-preview-title {
        font-weight: 600;
        color: #374151;
        margin-bottom: 16px;
        font-size: 0.95rem;
      }

      .dimension-preview-values {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .dimension-preview-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
      }

      .dimension-preview-label {
        color: #6b7280;
        font-size: 0.9rem;
      }

      .dimension-preview-value {
        font-weight: 600;
        color: #111827;
        font-size: 1.05rem;
      }

      .dimension-note {
        display: flex;
        gap: 12px;
        padding: 16px;
        background: #fffbeb;
        border: 1px solid #fde68a;
        border-radius: 10px;
      }

      .dimension-note svg {
        flex-shrink: 0;
        margin-top: 2px;
        color: #f59e0b;
      }

      .dimension-note p {
        margin: 0;
        font-size: 0.85rem;
        color: #78350f;
        line-height: 1.5;
      }

      .dimension-modal-footer {
        padding: 20px 24px;
        border-top: 1px solid #e5e7eb;
        display: flex;
        gap: 12px;
        justify-content: flex-end;
      }

      .dimension-btn {
        padding: 10px 24px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
        font-family: inherit;
      }

      .dimension-btn-secondary {
        background: white;
        border: 1px solid #d1d5db;
        color: #374151;
      }

      .dimension-btn-secondary:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }

      .dimension-btn-primary {
        background: #3b82f6;
        color: white;
      }

      .dimension-btn-primary:hover {
        background: #2563eb;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .dimension-btn-primary:disabled {
        background: #9ca3af;
        cursor: not-allowed;
        box-shadow: none;
      }

      @media (max-width: 640px) {
        .dimension-modal {
          max-width: none;
          width: 100%;
          margin: 0;
          max-height: 100vh;
          border-radius: 0;
        }

        .dimension-modal-header {
          padding: 20px;
        }

        .dimension-modal-header h2 {
          font-size: 1.25rem;
        }

        .dimension-modal-body {
          padding: 20px;
        }

        .dimension-modal-footer {
          flex-direction: column-reverse;
          padding: 16px 20px;
        }

        .dimension-btn {
          width: 100%;
        }
      }
      `})]}):null}const HO={},Woe=Object.freeze(Object.defineProperty({__proto__:null,default:HO},Symbol.toStringTag,{value:"Module"})),Ao=Symbol(),ao=(e,t,n)=>{const r=t[e.type];if(!(r!=null&&r.enter&&r.enter(e,n)===Ao)){if(e.type==="root")for(const i of e.children)ao(i,t,e);if(e.type==="element"&&n.children.includes(e))for(const i of e.children)ao(i,t,e);r!=null&&r.exit&&r.exit(e,n)}},WO=(e,t,n,r,i)=>{for(const s of n){const a=r==null?void 0:r[s.name];if(a===!1)continue;const o={...s.params,...i,...a},c=s.fn(e,o,t);c!=null&&ao(e,c)}},Voe=({name:e,plugins:t})=>({name:e,isPreset:!0,plugins:Object.freeze(t),fn:(n,r,i)=>{const{floatPrecision:s,overrides:a}=r,o={};if(s!=null&&(o.floatPrecision=s),a){const c=t.map(({name:h})=>h);for(const h of Object.keys(a))c.includes(h)||console.warn(`You are trying to configure ${h} which is not part of ${e}.
Try to put it before or after, for example

plugins: [
  {
    name: '${e}',
  },
  '${h}'
]
`)}WO(n,i,t,a,o)}});var pi;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(pi||(pi={}));function Goe(e){return e.type===pi.Tag||e.type===pi.Script||e.type===pi.Style}const qoe=pi.Root,Yoe=pi.Text,Xoe=pi.Directive,Koe=pi.Comment,Zoe=pi.Script,Qoe=pi.Style,Joe=pi.Tag,ele=pi.CDATA,tle=pi.Doctype;function Xs(e){return Goe(e)}function u_(e){return e.type===pi.CDATA}function qu(e){return e.type===pi.Text}function VO(e){return e.type===pi.Comment}function nle(e){return e.type===pi.Root}function Aa(e){return Object.prototype.hasOwnProperty.call(e,"children")}const fE=/["&'<>$\x80-\uFFFF]/g,rle=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),ile=String.prototype.codePointAt!=null?(e,t)=>e.codePointAt(t):(e,t)=>(e.charCodeAt(t)&64512)===55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function GO(e){let t="",n=0,r;for(;(r=fE.exec(e))!==null;){const i=r.index,s=e.charCodeAt(i),a=rle.get(s);a!==void 0?(t+=e.substring(n,i)+a,n=i+1):(t+=`${e.substring(n,i)}&#x${ile(e,i).toString(16)};`,n=fE.lastIndex+=+((s&64512)===55296))}return t+e.substr(n)}function qO(e,t){return function(r){let i,s=0,a="";for(;i=e.exec(r);)s!==i.index&&(a+=r.substring(s,i.index)),a+=t.get(i[0].charCodeAt(0)),s=i.index+1;return a+r.substring(s)}}const sle=qO(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),ale=qO(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),ole=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),lle=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),cle=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function ule(e){return e.replace(/"/g,"&quot;")}function hle(e,t){var n;if(!e)return;const r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?ule:t.xmlMode||t.encodeEntities!=="utf8"?GO:sle;return Object.keys(e).map(i=>{var s,a;const o=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(a=lle.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&o===""?i:`${i}="${r(o)}"`}).join(" ")}const pE=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function h_(e,t={}){const n="length"in e?e:[e];let r="";for(let i=0;i<n.length;i++)r+=dle(n[i],t);return r}function dle(e,t){switch(e.type){case qoe:return h_(e.children,t);case tle:case Xoe:return gle(e);case Koe:return vle(e);case ele:return ble(e);case Zoe:case Qoe:case Joe:return mle(e,t);case Yoe:return yle(e,t)}}const fle=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),ple=new Set(["svg","math"]);function mle(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=ole.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&fle.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&ple.has(e.name)&&(t={...t,xmlMode:"foreign"});let r=`<${e.name}`;const i=hle(e.attribs,t);return i&&(r+=` ${i}`),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&pE.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=h_(e.children,t)),(t.xmlMode||!pE.has(e.name))&&(r+=`</${e.name}>`)),r}function gle(e){return`<${e.data}>`}function yle(e,t){var n;let r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&cle.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?GO(r):ale(r)),r}function ble(e){return`<![CDATA[${e.children[0].data}]]>`}function vle(e){return`<!--${e.data}-->`}function YO(e,t){return h_(e,t)}function xle(e,t){return Aa(e)?e.children.map(n=>YO(n,t)).join(""):""}function um(e){return Array.isArray(e)?e.map(um).join(""):Xs(e)?e.name==="br"?`
`:um(e.children):u_(e)?um(e.children):qu(e)?e.data:""}function dg(e){return Array.isArray(e)?e.map(dg).join(""):Aa(e)&&!VO(e)?dg(e.children):qu(e)?e.data:""}function xx(e){return Array.isArray(e)?e.map(xx).join(""):Aa(e)&&(e.type===pi.Tag||u_(e))?xx(e.children):qu(e)?e.data:""}function XO(e){return Aa(e)?e.children:[]}function KO(e){return e.parent||null}function wle(e){const t=KO(e);if(t!=null)return XO(t);const n=[e];let{prev:r,next:i}=e;for(;r!=null;)n.unshift(r),{prev:r}=r;for(;i!=null;)n.push(i),{next:i}=i;return n}function _le(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function kle(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}function Sle(e){return e.name}function Cle(e){let{next:t}=e;for(;t!==null&&!Xs(t);)({next:t}=t);return t}function Ele(e){let{prev:t}=e;for(;t!==null&&!Xs(t);)({prev:t}=t);return t}function Nf(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function Tle(e,t){const n=t.prev=e.prev;n&&(n.next=t);const r=t.next=e.next;r&&(r.prev=t);const i=t.parent=e.parent;if(i){const s=i.children;s[s.lastIndexOf(e)]=t,e.parent=null}}function jle(e,t){if(Nf(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}function Ale(e,t){Nf(t);const{parent:n}=e,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){const i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)}function Ple(e,t){if(Nf(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){const n=e.children[1];n.prev=t,t.next=n}else t.next=null}function Nle(e,t){Nf(t);const{parent:n}=e;if(n){const r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}function Of(e,t,n=!0,r=1/0){return ZO(e,Array.isArray(t)?t:[t],n,r)}function ZO(e,t,n,r){const i=[],s=[Array.isArray(t)?t:[t]],a=[0];for(;;){if(a[0]>=s[0].length){if(a.length===1)return i;s.shift(),a.shift();continue}const o=s[0][a[0]++];if(e(o)&&(i.push(o),--r<=0))return i;n&&Aa(o)&&o.children.length>0&&(a.unshift(0),s.unshift(o.children))}}function Ole(e,t){return t.find(e)}function d_(e,t,n=!0){const r=Array.isArray(t)?t:[t];for(let i=0;i<r.length;i++){const s=r[i];if(Xs(s)&&e(s))return s;if(n&&Aa(s)&&s.children.length>0){const a=d_(e,s.children,!0);if(a)return a}}return null}function QO(e,t){return(Array.isArray(t)?t:[t]).some(n=>Xs(n)&&e(n)||Aa(n)&&QO(e,n.children))}function Rle(e,t){const n=[],r=[Array.isArray(t)?t:[t]],i=[0];for(;;){if(i[0]>=r[0].length){if(r.length===1)return n;r.shift(),i.shift();continue}const s=r[0][i[0]++];Xs(s)&&e(s)&&n.push(s),Aa(s)&&s.children.length>0&&(i.unshift(0),r.unshift(s.children))}}const fg={tag_name(e){return typeof e=="function"?t=>Xs(t)&&e(t.name):e==="*"?Xs:t=>Xs(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>qu(t)&&e(t.data):t=>qu(t)&&t.data===e}};function f_(e,t){return typeof t=="function"?n=>Xs(n)&&t(n.attribs[e]):n=>Xs(n)&&n.attribs[e]===t}function Mle(e,t){return n=>e(n)||t(n)}function JO(e){const t=Object.keys(e).map(n=>{const r=e[n];return Object.prototype.hasOwnProperty.call(fg,n)?fg[n](r):f_(n,r)});return t.length===0?null:t.reduce(Mle)}function Lle(e,t){const n=JO(e);return n?n(t):!0}function Ile(e,t,n,r=1/0){const i=JO(e);return i?Of(i,t,n,r):[]}function $le(e,t,n=!0){return Array.isArray(t)||(t=[t]),d_(f_("id",e),t,n)}function _h(e,t,n=!0,r=1/0){return Of(fg.tag_name(e),t,n,r)}function Dle(e,t,n=!0,r=1/0){return Of(f_("class",e),t,n,r)}function zle(e,t,n=!0,r=1/0){return Of(fg.tag_type(e),t,n,r)}function Fle(e){let t=e.length;for(;--t>=0;){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0){e.splice(t,1);continue}for(let r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e}var Us;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(Us||(Us={}));function eR(e,t){const n=[],r=[];if(e===t)return 0;let i=Aa(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=Aa(t)?t:t.parent;i;)r.unshift(i),i=i.parent;const s=Math.min(n.length,r.length);let a=0;for(;a<s&&n[a]===r[a];)a++;if(a===0)return Us.DISCONNECTED;const o=n[a-1],c=o.children,h=n[a],d=r[a];return c.indexOf(h)>c.indexOf(d)?o===t?Us.FOLLOWING|Us.CONTAINED_BY:Us.FOLLOWING:o===e?Us.PRECEDING|Us.CONTAINS:Us.PRECEDING}function Ble(e){return e=e.filter((t,n,r)=>!r.includes(t,n+1)),e.sort((t,n)=>{const r=eR(t,n);return r&Us.PRECEDING?-1:r&Us.FOLLOWING?1:0}),e}function Ule(e){const t=pg(qle,e);return t?t.name==="feed"?Hle(t):Wle(t):null}function Hle(e){var t;const n=e.children,r={type:"atom",items:_h("entry",n).map(a=>{var o;const{children:c}=a,h={media:tR(c)};ss(h,"id","id",c),ss(h,"title","title",c);const d=(o=pg("link",c))===null||o===void 0?void 0:o.attribs.href;d&&(h.link=d);const p=sl("summary",c)||sl("content",c);p&&(h.description=p);const m=sl("updated",c);return m&&(h.pubDate=new Date(m)),h})};ss(r,"id","id",n),ss(r,"title","title",n);const i=(t=pg("link",n))===null||t===void 0?void 0:t.attribs.href;i&&(r.link=i),ss(r,"description","subtitle",n);const s=sl("updated",n);return s&&(r.updated=new Date(s)),ss(r,"author","email",n,!0),r}function Wle(e){var t,n;const r=(n=(t=pg("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],i={type:e.name.substr(0,3),id:"",items:_h("item",e.children).map(a=>{const{children:o}=a,c={media:tR(o)};ss(c,"id","guid",o),ss(c,"title","title",o),ss(c,"link","link",o),ss(c,"description","description",o);const h=sl("pubDate",o)||sl("dc:date",o);return h&&(c.pubDate=new Date(h)),c})};ss(i,"title","title",r),ss(i,"link","link",r),ss(i,"description","description",r);const s=sl("lastBuildDate",r);return s&&(i.updated=new Date(s)),ss(i,"author","managingEditor",r,!0),i}const Vle=["url","type","lang"],Gle=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function tR(e){return _h("media:content",e).map(t=>{const{attribs:n}=t,r={medium:n.medium,isDefault:!!n.isDefault};for(const i of Vle)n[i]&&(r[i]=n[i]);for(const i of Gle)n[i]&&(r[i]=parseInt(n[i],10));return n.expression&&(r.expression=n.expression),r})}function pg(e,t){return _h(e,t,!0,1)[0]}function sl(e,t,n=!1){return dg(_h(e,t,n,1)).trim()}function ss(e,t,n,r,i=!1){const s=sl(n,r,i);s&&(e[t]=s)}function qle(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}const nR=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return Us},append:Ale,appendChild:jle,compareDocumentPosition:eR,existsOne:QO,filter:Of,find:ZO,findAll:Rle,findOne:d_,findOneChild:Ole,getAttributeValue:_le,getChildren:XO,getElementById:$le,getElements:Ile,getElementsByClassName:Dle,getElementsByTagName:_h,getElementsByTagType:zle,getFeed:Ule,getInnerHTML:xle,getName:Sle,getOuterHTML:YO,getParent:KO,getSiblings:wle,getText:um,hasAttrib:kle,hasChildren:Aa,innerText:xx,isCDATA:u_,isComment:VO,isDocument:nle,isTag:Xs,isText:qu,nextElementSibling:Cle,prepend:Nle,prependChild:Ple,prevElementSibling:Ele,removeElement:Nf,removeSubsets:Fle,replaceElement:Tle,testElement:Lle,textContent:dg,uniqueSort:Ble},Symbol.toStringTag,{value:"Module"}));var Yle={trueFunc:function(){return!0},falseFunc:function(){return!1}};const Cn=No(Yle);var hn;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(hn||(hn={}));var hi;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(hi||(hi={}));const mE=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Xle=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Kle=new Map([[126,hi.Element],[94,hi.Start],[36,hi.End],[42,hi.Any],[33,hi.Not],[124,hi.Hyphen]]),Zle=new Set(["has","not","matches","is","where","host","host-context"]);function rR(e){switch(e.type){case hn.Adjacent:case hn.Child:case hn.Descendant:case hn.Parent:case hn.Sibling:case hn.ColumnCombinator:return!0;default:return!1}}const Qle=new Set(["contains","icontains"]);function Jle(e,t,n){const r=parseInt(t,16)-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)}function Fh(e){return e.replace(Xle,Jle)}function zy(e){return e===39||e===34}function gE(e){return e===32||e===9||e===10||e===12||e===13}function sf(e){const t=[],n=iR(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function iR(e,t,n){let r=[];function i(m){const g=t.slice(n+m).match(mE);if(!g)throw new Error(`Expected name, found ${t.slice(n)}`);const[v]=g;return n+=m+v.length,Fh(v)}function s(m){for(n+=m;n<t.length&&gE(t.charCodeAt(n));)n++}function a(){n+=1;const m=n;let g=1;for(;g>0&&n<t.length;n++)t.charCodeAt(n)===40&&!o(n)?g++:t.charCodeAt(n)===41&&!o(n)&&g--;if(g)throw new Error("Parenthesis not matched");return Fh(t.slice(m,n-1))}function o(m){let g=0;for(;t.charCodeAt(--m)===92;)g++;return(g&1)===1}function c(){if(r.length>0&&rR(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function h(m){if(r.length>0&&r[r.length-1].type===hn.Descendant){r[r.length-1].type=m;return}c(),r.push({type:m})}function d(m,g){r.push({type:hn.Attribute,name:m,action:g,value:i(1),namespace:null,ignoreCase:"quirks"})}function p(){if(r.length&&r[r.length-1].type===hn.Descendant&&r.pop(),r.length===0)throw new Error("Empty sub-selector");e.push(r)}if(s(0),t.length===n)return n;e:for(;n<t.length;){const m=t.charCodeAt(n);switch(m){case 32:case 9:case 10:case 12:case 13:{(r.length===0||r[0].type!==hn.Descendant)&&(c(),r.push({type:hn.Descendant})),s(1);break}case 62:{h(hn.Child),s(1);break}case 60:{h(hn.Parent),s(1);break}case 126:{h(hn.Sibling),s(1);break}case 43:{h(hn.Adjacent),s(1);break}case 46:{d("class",hi.Element);break}case 35:{d("id",hi.Equals);break}case 91:{s(1);let g,v=null;t.charCodeAt(n)===124?g=i(1):t.startsWith("*|",n)?(v="*",g=i(2)):(g=i(0),t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==61&&(v=g,g=i(1))),s(0);let w=hi.Exists;const C=Kle.get(t.charCodeAt(n));if(C){if(w=C,t.charCodeAt(n+1)!==61)throw new Error("Expected `=`");s(2)}else t.charCodeAt(n)===61&&(w=hi.Equals,s(1));let x="",k=null;if(w!=="exists"){if(zy(t.charCodeAt(n))){const M=t.charCodeAt(n);let S=n+1;for(;S<t.length&&(t.charCodeAt(S)!==M||o(S));)S+=1;if(t.charCodeAt(S)!==M)throw new Error("Attribute value didn't end");x=Fh(t.slice(n+1,S)),n=S+1}else{const M=n;for(;n<t.length&&(!gE(t.charCodeAt(n))&&t.charCodeAt(n)!==93||o(n));)n+=1;x=Fh(t.slice(M,n))}s(0);const j=t.charCodeAt(n)|32;j===115?(k=!1,s(1)):j===105&&(k=!0,s(1))}if(t.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const P={type:hn.Attribute,name:g,action:w,value:x,namespace:v,ignoreCase:k};r.push(P);break}case 58:{if(t.charCodeAt(n+1)===58){r.push({type:hn.PseudoElement,name:i(2).toLowerCase(),data:t.charCodeAt(n)===40?a():null});continue}const g=i(1).toLowerCase();let v=null;if(t.charCodeAt(n)===40)if(Zle.has(g)){if(zy(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${g} cannot be quoted`);if(v=[],n=iR(v,t,n+1),t.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${g} (${t})`);n+=1}else{if(v=a(),Qle.has(g)){const w=v.charCodeAt(0);w===v.charCodeAt(v.length-1)&&zy(w)&&(v=v.slice(1,-1))}v=Fh(v)}r.push({type:hn.Pseudo,name:g,data:v});break}case 44:{p(),r=[],s(1);break}default:{if(t.startsWith("/*",n)){const w=t.indexOf("*/",n+2);if(w<0)throw new Error("Comment was not terminated");n=w+2,r.length===0&&s(0);break}let g=null,v;if(m===42)n+=1,v="*";else if(m===124){if(v="",t.charCodeAt(n+1)===124){h(hn.ColumnCombinator),s(2);break}}else if(mE.test(t.slice(n)))v=i(0);else break e;t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==124&&(g=v,t.charCodeAt(n+1)===42?(v="*",n+=2):v=i(1)),r.push(v==="*"?{type:hn.Universal,namespace:g}:{type:hn.Tag,name:v,namespace:g})}}}return p(),n}const sR=new Map([[hn.Universal,50],[hn.Tag,30],[hn.Attribute,1],[hn.Pseudo,0]]);function p_(e){return!sR.has(e.type)}const ece=new Map([[hi.Exists,10],[hi.Equals,8],[hi.Not,7],[hi.Start,6],[hi.End,6],[hi.Any,5]]);function tce(e){const t=e.map(aR);for(let n=1;n<e.length;n++){const r=t[n];if(!(r<0))for(let i=n-1;i>=0&&r<t[i];i--){const s=e[i+1];e[i+1]=e[i],e[i]=s,t[i+1]=t[i],t[i]=r}}}function aR(e){var t,n;let r=(t=sR.get(e.type))!==null&&t!==void 0?t:-1;return e.type===hn.Attribute?(r=(n=ece.get(e.action))!==null&&n!==void 0?n:4,e.action===hi.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===hn.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map(i=>Math.min(...i.map(aR)))),r<0&&(r=0)):r=2:r=3),r}const nce=/[-[\]{}()*+?.,\\^$|#\s]/g;function yE(e){return e.replace(nce,"\\$&")}const rce=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Ll(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&rce.has(e.name)}const ice={equals(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return Ll(t,n)?(s=s.toLowerCase(),a=>{const o=r.getAttributeValue(a,i);return o!=null&&o.length===s.length&&o.toLowerCase()===s&&e(a)}):a=>r.getAttributeValue(a,i)===s&&e(a)},hyphen(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=s.length;return Ll(t,n)?(s=s.toLowerCase(),function(c){const h=r.getAttributeValue(c,i);return h!=null&&(h.length===a||h.charAt(a)==="-")&&h.substr(0,a).toLowerCase()===s&&e(c)}):function(c){const h=r.getAttributeValue(c,i);return h!=null&&(h.length===a||h.charAt(a)==="-")&&h.substr(0,a)===s&&e(c)}},element(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(/\s/.test(s))return Cn.falseFunc;const a=new RegExp(`(?:^|\\s)${yE(s)}(?:$|\\s)`,Ll(t,n)?"i":"");return function(c){const h=r.getAttributeValue(c,i);return h!=null&&h.length>=s.length&&a.test(h)&&e(c)}},exists(e,{name:t},{adapter:n}){return r=>n.hasAttrib(r,t)&&e(r)},start(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=s.length;return a===0?Cn.falseFunc:Ll(t,n)?(s=s.toLowerCase(),o=>{const c=r.getAttributeValue(o,i);return c!=null&&c.length>=a&&c.substr(0,a).toLowerCase()===s&&e(o)}):o=>{var c;return!!(!((c=r.getAttributeValue(o,i))===null||c===void 0)&&c.startsWith(s))&&e(o)}},end(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=-s.length;return a===0?Cn.falseFunc:Ll(t,n)?(s=s.toLowerCase(),o=>{var c;return((c=r.getAttributeValue(o,i))===null||c===void 0?void 0:c.substr(a).toLowerCase())===s&&e(o)}):o=>{var c;return!!(!((c=r.getAttributeValue(o,i))===null||c===void 0)&&c.endsWith(s))&&e(o)}},any(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(s==="")return Cn.falseFunc;if(Ll(t,n)){const a=new RegExp(yE(s),"i");return function(c){const h=r.getAttributeValue(c,i);return h!=null&&h.length>=s.length&&a.test(h)&&e(c)}}return a=>{var o;return!!(!((o=r.getAttributeValue(a,i))===null||o===void 0)&&o.includes(s))&&e(a)}},not(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return s===""?a=>!!r.getAttributeValue(a,i)&&e(a):Ll(t,n)?(s=s.toLowerCase(),a=>{const o=r.getAttributeValue(a,i);return(o==null||o.length!==s.length||o.toLowerCase()!==s)&&e(a)}):a=>r.getAttributeValue(a,i)!==s&&e(a)}},sce=new Set([9,10,12,13,32]),bE=48,ace=57;function oce(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let t=0,n=0,r=s(),i=a();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=r*(i??1),o(),t<e.length?(r=s(),o(),i=a()):r=i=0),i===null||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,r*i];function s(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function a(){const c=t;let h=0;for(;t<e.length&&e.charCodeAt(t)>=bE&&e.charCodeAt(t)<=ace;)h=h*10+(e.charCodeAt(t)-bE),t++;return t===c?null:h}function o(){for(;t<e.length&&sce.has(e.charCodeAt(t));)t++}}function lce(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return Cn.falseFunc;if(t===-1)return s=>s<=n;if(t===0)return s=>s===n;if(t===1)return n<0?Cn.trueFunc:s=>s>=n;const r=Math.abs(t),i=(n%r+r)%r;return t>1?s=>s>=n&&s%r===i:s=>s<=n&&s%r===i}function Tp(e){return lce(oce(e))}function jp(e,t){return n=>{const r=t.getParent(n);return r!=null&&t.isTag(r)&&e(n)}}const wx={contains(e,t,{adapter:n}){return function(i){return e(i)&&n.getText(i).includes(t)}},icontains(e,t,{adapter:n}){const r=t.toLowerCase();return function(s){return e(s)&&n.getText(s).toLowerCase().includes(r)}},"nth-child"(e,t,{adapter:n,equals:r}){const i=Tp(t);return i===Cn.falseFunc?Cn.falseFunc:i===Cn.trueFunc?jp(e,n):function(a){const o=n.getSiblings(a);let c=0;for(let h=0;h<o.length&&!r(a,o[h]);h++)n.isTag(o[h])&&c++;return i(c)&&e(a)}},"nth-last-child"(e,t,{adapter:n,equals:r}){const i=Tp(t);return i===Cn.falseFunc?Cn.falseFunc:i===Cn.trueFunc?jp(e,n):function(a){const o=n.getSiblings(a);let c=0;for(let h=o.length-1;h>=0&&!r(a,o[h]);h--)n.isTag(o[h])&&c++;return i(c)&&e(a)}},"nth-of-type"(e,t,{adapter:n,equals:r}){const i=Tp(t);return i===Cn.falseFunc?Cn.falseFunc:i===Cn.trueFunc?jp(e,n):function(a){const o=n.getSiblings(a);let c=0;for(let h=0;h<o.length;h++){const d=o[h];if(r(a,d))break;n.isTag(d)&&n.getName(d)===n.getName(a)&&c++}return i(c)&&e(a)}},"nth-last-of-type"(e,t,{adapter:n,equals:r}){const i=Tp(t);return i===Cn.falseFunc?Cn.falseFunc:i===Cn.trueFunc?jp(e,n):function(a){const o=n.getSiblings(a);let c=0;for(let h=o.length-1;h>=0;h--){const d=o[h];if(r(a,d))break;n.isTag(d)&&n.getName(d)===n.getName(a)&&c++}return i(c)&&e(a)}},root(e,t,{adapter:n}){return r=>{const i=n.getParent(r);return(i==null||!n.isTag(i))&&e(r)}},scope(e,t,n,r){const{equals:i}=n;return!r||r.length===0?wx.root(e,t,n):r.length===1?s=>i(r[0],s)&&e(s):s=>r.includes(s)&&e(s)},hover:Fy("isHovered"),visited:Fy("isVisited"),active:Fy("isActive")};function Fy(e){return function(n,r,{adapter:i}){const s=i[e];return typeof s!="function"?Cn.falseFunc:function(o){return s(o)&&n(o)}}}const vE={empty(e,{adapter:t}){return!t.getChildren(e).some(n=>t.isTag(n)||t.getText(n)!=="")},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return t.prevElementSibling(e)==null;const r=t.getSiblings(e).find(i=>t.isTag(i));return r!=null&&n(e,r)},"last-child"(e,{adapter:t,equals:n}){const r=t.getSiblings(e);for(let i=r.length-1;i>=0;i--){if(n(e,r[i]))return!0;if(t.isTag(r[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=0;s<r.length;s++){const a=r[s];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=r.length-1;s>=0;s--){const a=r[s];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const r=t.getName(e);return t.getSiblings(e).every(i=>n(e,i)||!t.isTag(i)||t.getName(i)!==r)},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every(r=>n(e,r)||!t.isTag(r))}};function xE(e,t,n,r){if(n===null){if(e.length>r)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===r)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const cce={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},oR={};function lR(e,t){return e===Cn.falseFunc?Cn.falseFunc:n=>t.isTag(n)&&e(n)}function cR(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function _x(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const By=(e,t,n,r,i)=>{const s=i(t,_x(n),r);return s===Cn.trueFunc?e:s===Cn.falseFunc?Cn.falseFunc:a=>s(a)&&e(a)},Uy={is:By,matches:By,where:By,not(e,t,n,r,i){const s=i(t,_x(n),r);return s===Cn.falseFunc?e:s===Cn.trueFunc?Cn.falseFunc:a=>!s(a)&&e(a)},has(e,t,n,r,i){const{adapter:s}=n,a=_x(n);a.relativeSelector=!0;const o=t.some(d=>d.some(p_))?[oR]:void 0,c=i(t,a,o);if(c===Cn.falseFunc)return Cn.falseFunc;const h=lR(c,s);if(o&&c!==Cn.trueFunc){const{shouldTestNextSiblings:d=!1}=c;return p=>{if(!e(p))return!1;o[0]=p;const m=s.getChildren(p),g=d?[...m,...cR(p,s)]:m;return s.existsOne(h,g)}}return d=>e(d)&&s.existsOne(h,s.getChildren(d))}};function uce(e,t,n,r,i){var s;const{name:a,data:o}=t;if(Array.isArray(o)){if(!(a in Uy))throw new Error(`Unknown pseudo-class :${a}(${o})`);return Uy[a](e,o,n,r,i)}const c=(s=n.pseudos)===null||s===void 0?void 0:s[a],h=typeof c=="string"?c:cce[a];if(typeof h=="string"){if(o!=null)throw new Error(`Pseudo ${a} doesn't have any arguments`);const d=sf(h);return Uy.is(e,d,n,r,i)}if(typeof c=="function")return xE(c,a,o,1),d=>c(d,o)&&e(d);if(a in wx)return wx[a](e,o,n,r);if(a in vE){const d=vE[a];return xE(d,a,o,2),p=>d(p,n,o)&&e(p)}throw new Error(`Unknown pseudo-class :${a}`)}function Hy(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function hce(e,t,n,r,i){const{adapter:s,equals:a}=n;switch(t.type){case hn.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case hn.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case hn.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),ice[t.action](e,t,n)}case hn.Pseudo:return uce(e,t,n,r,i);case hn.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:o}=t;return(!n.xmlMode||n.lowerCaseTags)&&(o=o.toLowerCase()),function(h){return s.getName(h)===o&&e(h)}}case hn.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(h){let d=h;for(;d=Hy(d,s);)if(e(d))return!0;return!1};const o=new WeakSet;return function(h){let d=h;for(;d=Hy(d,s);)if(!o.has(d)){if(s.isTag(d)&&e(d))return!0;o.add(d)}return!1}}case"_flexibleDescendant":return function(c){let h=c;do if(e(h))return!0;while(h=Hy(h,s));return!1};case hn.Parent:return function(c){return s.getChildren(c).some(h=>s.isTag(h)&&e(h))};case hn.Child:return function(c){const h=s.getParent(c);return h!=null&&s.isTag(h)&&e(h)};case hn.Sibling:return function(c){const h=s.getSiblings(c);for(let d=0;d<h.length;d++){const p=h[d];if(a(c,p))break;if(s.isTag(p)&&e(p))return!0}return!1};case hn.Adjacent:return s.prevElementSibling?function(c){const h=s.prevElementSibling(c);return h!=null&&e(h)}:function(c){const h=s.getSiblings(c);let d;for(let p=0;p<h.length;p++){const m=h[p];if(a(c,m))break;s.isTag(m)&&(d=m)}return!!d&&e(d)};case hn.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function dce(e,t,n){const r=uR(e,t,n);return lR(r,t.adapter)}function uR(e,t,n){const r=typeof e=="string"?sf(e):e;return dR(r,t,n)}function hR(e){return e.type===hn.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(t=>t.some(hR)))}const fce={type:hn.Descendant},pce={type:"_flexibleDescendant"},mce={type:hn.Pseudo,name:"scope",data:null};function gce(e,{adapter:t},n){const r=!!(n!=null&&n.every(i=>{const s=t.isTag(i)&&t.getParent(i);return i===oR||s&&t.isTag(s)}));for(const i of e){if(!(i.length>0&&p_(i[0])&&i[0].type!==hn.Descendant))if(r&&!i.some(hR))i.unshift(fce);else continue;i.unshift(mce)}}function dR(e,t,n){var r;e.forEach(tce),n=(r=t.context)!==null&&r!==void 0?r:n;const i=Array.isArray(n),s=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)gce(e,t,s);else if(e.some(c=>c.length>0&&p_(c[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const o=e.map(c=>{if(c.length>=2){const[h,d]=c;h.type!==hn.Pseudo||h.name!=="scope"||(i&&d.type===hn.Descendant?c[1]=pce:(d.type===hn.Adjacent||d.type===hn.Sibling)&&(a=!0))}return yce(c,t,s)}).reduce(bce,Cn.falseFunc);return o.shouldTestNextSiblings=a,o}function yce(e,t,n){var r;return e.reduce((i,s)=>i===Cn.falseFunc?Cn.falseFunc:hce(i,s,t,n,dR),(r=t.rootFunc)!==null&&r!==void 0?r:Cn.trueFunc)}function bce(e,t){return t===Cn.falseFunc||e===Cn.trueFunc?e:e===Cn.falseFunc||t===Cn.trueFunc?t:function(r){return e(r)||t(r)}}const fR=(e,t)=>e===t,vce={adapter:nR,equals:fR};function pR(e){var t,n,r,i;const s=e??vce;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=nR),(n=s.equals)!==null&&n!==void 0||(s.equals=(i=(r=s.adapter)===null||r===void 0?void 0:r.equals)!==null&&i!==void 0?i:fR),s}function mR(e){return function(n,r,i){const s=pR(i);typeof n!="function"&&(n=uR(n,s,r));const a=xce(r,s.adapter,n.shouldTestNextSiblings);return e(n,a,s)}}function xce(e,t,n=!1){return n&&(e=wce(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function wce(e,t){const n=Array.isArray(e)?e.slice(0):[e],r=n.length;for(let i=0;i<r;i++){const s=cR(n[i],t);n.push(...s)}return n}const _ce=mR((e,t,n)=>e===Cn.falseFunc||!t||t.length===0?[]:n.adapter.findAll(e,t)),kce=mR((e,t,n)=>e===Cn.falseFunc||!t||t.length===0?null:n.adapter.findOne(e,t));function Sce(e,t,n){const r=pR(n);return(typeof t=="function"?t:dce(t,r))(e)}function Cce(e){const t=new Map;for(const n of e.children)t.set(n,e),ao(n,{element:{enter:(r,i)=>{t.set(r,i)}}},e);return t}const p0=e=>e.type==="element",gR=(e,t)=>t.some(n=>p0(n)&&(e(n)||gR(e,af(n)))),Ece=(e,t)=>e.attributes[t],af=e=>e.children||[],Tce=e=>e.name,jce=e=>e.children[0].type==="text"||e.children[0].type==="cdata"?e.children[0].value:"",Ace=(e,t)=>e.attributes[t]!==void 0,yR=(e,t)=>{const n=[];for(const r of t)p0(r)&&(e(r)&&n.push(r),n.push(...yR(e,af(r))));return n},bR=(e,t)=>{for(const n of t)if(p0(n)){if(e(n))return n;const r=bR(e,af(n));if(r)return r}return null};function Pce(e,t){const n=s=>(t||(t=Cce(e)),t.get(s)||null);return{isTag:p0,existsOne:gR,getAttributeValue:Ece,getChildren:af,getName:Tce,getParent:n,getSiblings:s=>{const a=n(s);return a?af(a):[]},getText:jce,hasAttrib:Ace,removeSubsets:s=>{let a=s.length,o,c,h;for(;--a>-1;){for(o=c=s[a],s[a]=null,h=!0;c;){if(s.includes(c)){h=!1,s.splice(a,1);break}c=n(c)}h&&(s[a]=o)}return s},findAll:yR,findOne:bR}}function m_(e,t){return{xmlMode:!0,adapter:Pce(e,t)}}const of=(e,t,n)=>_ce(t,e,m_(e,n)),vR=(e,t,n)=>kce(t,e,m_(e,n)),Nce=(e,t,n)=>Sce(e,t,m_(e,n)),Bn=(e,t)=>{t.children=t.children.filter(n=>n!==e)},Oce="removeDoctype",Rce="removes doctype declaration",Mce=()=>({doctype:{enter:(e,t)=>{Bn(e,t)}}}),xR=Object.freeze(Object.defineProperty({__proto__:null,description:Rce,fn:Mce,name:Oce},Symbol.toStringTag,{value:"Module"})),Lce="removeXMLProcInst",Ice="removes XML processing instructions",$ce=()=>({instruction:{enter:(e,t)=>{e.name==="xml"&&Bn(e,t)}}}),wR=Object.freeze(Object.defineProperty({__proto__:null,description:Ice,fn:$ce,name:Lce},Symbol.toStringTag,{value:"Module"})),Dce="removeComments",zce="removes comments",Fce=[/^!/],Bce=(e,t)=>{const{preservePatterns:n=Fce}=t;return{comment:{enter:(r,i)=>{if(n){if(!Array.isArray(n))throw Error(`Expected array in removeComments preservePatterns parameter but received ${n}`);if(n.some(a=>new RegExp(a).test(r.value)))return}Bn(r,i)}}}},_R=Object.freeze(Object.defineProperty({__proto__:null,description:zce,fn:Bce,name:Dce},Symbol.toStringTag,{value:"Module"})),Tl={animation:new Set(["animate","animateColor","animateMotion","animateTransform","set"]),descriptive:new Set(["desc","metadata","title"]),shape:new Set(["circle","ellipse","line","path","polygon","polyline","rect"]),structural:new Set(["defs","g","svg","symbol","use"]),paintServer:new Set(["hatch","linearGradient","meshGradient","pattern","radialGradient","solidColor"]),nonRendering:new Set(["clipPath","filter","linearGradient","marker","mask","pattern","radialGradient","solidColor","symbol"]),container:new Set(["a","defs","foreignObject","g","marker","mask","missing-glyph","pattern","svg","switch","symbol"]),textContent:new Set(["a","altGlyph","altGlyphDef","altGlyphItem","glyph","glyphRef","text","textPath","tref","tspan"]),textContentChild:new Set(["altGlyph","textPath","tref","tspan"]),lightSource:new Set(["feDiffuseLighting","feDistantLight","fePointLight","feSpecularLighting","feSpotLight"]),filterPrimitive:new Set(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"])},kR=new Set([...Tl.textContent,"pre","title"]),g_=new Set(["glyph","missing-glyph","path"]),zi={animationAddition:new Set(["additive","accumulate"]),animationAttributeTarget:new Set(["attributeType","attributeName"]),animationEvent:new Set(["onbegin","onend","onrepeat","onload"]),animationTiming:new Set(["begin","dur","end","fill","max","min","repeatCount","repeatDur","restart"]),animationValue:new Set(["by","calcMode","from","keySplines","keyTimes","to","values"]),conditionalProcessing:new Set(["requiredExtensions","requiredFeatures","systemLanguage"]),core:new Set(["id","tabindex","xml:base","xml:lang","xml:space"]),graphicalEvent:new Set(["onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup"]),presentation:new Set(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-overflow","text-rendering","transform-origin","transform","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"]),xlink:new Set(["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"]),documentEvent:new Set(["onabort","onerror","onresize","onscroll","onunload","onzoom"]),documentElementEvent:new Set(["oncopy","oncut","onpaste"]),globalEvent:new Set(["oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting"]),filterPrimitive:new Set(["x","y","width","height","result"]),transferFunction:new Set(["amplitude","exponent","intercept","offset","slope","tableValues","type"])},y_={core:{"xml:space":"default"},presentation:{clip:"auto","clip-path":"none","clip-rule":"nonzero",mask:"none",opacity:"1","stop-color":"#000","stop-opacity":"1","fill-opacity":"1","fill-rule":"nonzero",fill:"#000",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","paint-order":"normal","vector-effect":"none",display:"inline",visibility:"visible","marker-start":"none","marker-mid":"none","marker-end":"none","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","image-rendering":"auto","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","font-size-adjust":"none",kerning:"auto","letter-spacing":"normal","word-spacing":"normal","text-decoration":"none","text-anchor":"start","text-overflow":"clip","writing-mode":"lr-tb","glyph-orientation-vertical":"auto","glyph-orientation-horizontal":"0deg",direction:"ltr","unicode-bidi":"normal","dominant-baseline":"auto","alignment-baseline":"baseline","baseline-shift":"baseline"},transferFunction:{slope:"1",intercept:"0",amplitude:"1",exponent:"1",offset:"0"}},Uce={animationAttributeTarget:{unsafe:new Set(["attributeType"])},conditionalProcessing:{unsafe:new Set(["requiredFeatures"])},core:{unsafe:new Set(["xml:base","xml:lang","xml:space"])},presentation:{unsafe:new Set(["clip","color-profile","enable-background","glyph-orientation-horizontal","glyph-orientation-vertical","kerning"])}},b_={a:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","style","target","transform"]),defaults:{target:"_self"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view","tspan"])},altGlyph:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","format","glyphRef","rotate","style","x","y"])},altGlyphDef:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef"])},altGlyphItem:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef","altGlyphItem"])},animate:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateColor:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateMotion:{attrsGroups:new Set(["animationAddition","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","keyPoints","origin","path","rotate"]),defaults:{rotate:"0"},contentGroups:new Set(["descriptive"]),content:new Set(["mpath"])},animateTransform:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","type"]),contentGroups:new Set(["descriptive"])},circle:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","r","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},clipPath:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","clipPathUnits","externalResourcesRequired","style","transform"]),defaults:{clipPathUnits:"userSpaceOnUse"},contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["text","use"])},"color-profile":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["local","name","rendering-intent"]),defaults:{name:"sRGB","rendering-intent":"auto"},deprecated:{unsafe:new Set(["name"])},contentGroups:new Set(["descriptive"])},cursor:{attrsGroups:new Set(["core","conditionalProcessing","xlink"]),attrs:new Set(["externalResourcesRequired","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["descriptive"])},defs:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},desc:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},ellipse:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","rx","ry","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},feBlend:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","in2","mode"]),defaults:{mode:"normal"},content:new Set(["animate","set"])},feColorMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","type","values"]),defaults:{type:"matrix"},content:new Set(["animate","set"])},feComponentTransfer:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["feFuncA","feFuncB","feFuncG","feFuncR"])},feComposite:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","k1","k2","k3","k4","operator","style"]),defaults:{operator:"over",k1:"0",k2:"0",k3:"0",k4:"0"},content:new Set(["animate","set"])},feConvolveMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelMatrix","order","style","bias","divisor","edgeMode","targetX","targetY","kernelUnitLength","preserveAlpha"]),defaults:{order:"3",bias:"0",edgeMode:"duplicate",preserveAlpha:"false"},content:new Set(["animate","set"])},feDiffuseLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","diffuseConstant","in","kernelUnitLength","style","surfaceScale"]),defaults:{surfaceScale:"1",diffuseConstant:"1"},contentGroups:new Set(["descriptive"]),content:new Set(["feDistantLight","fePointLight","feSpotLight"])},feDisplacementMap:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","scale","style","xChannelSelector","yChannelSelector"]),defaults:{scale:"0",xChannelSelector:"A",yChannelSelector:"A"},content:new Set(["animate","set"])},feDistantLight:{attrsGroups:new Set(["core"]),attrs:new Set(["azimuth","elevation"]),defaults:{azimuth:"0",elevation:"0"},content:new Set(["animate","set"])},feFlood:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["animate","animateColor","set"])},feFuncA:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncB:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncG:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncR:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feGaussianBlur:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","stdDeviation"]),defaults:{stdDeviation:"0"},content:new Set(["set","animate"])},feImage:{attrsGroups:new Set(["core","presentation","filterPrimitive","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","preserveAspectRatio","style","xlink:href"]),defaults:{preserveAspectRatio:"xMidYMid meet"},content:new Set(["animate","animateTransform","set"])},feMerge:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["feMergeNode"])},feMergeNode:{attrsGroups:new Set(["core"]),attrs:new Set(["in"]),content:new Set(["animate","set"])},feMorphology:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","operator","radius"]),defaults:{operator:"erode",radius:"0"},content:new Set(["animate","set"])},feOffset:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","dx","dy"]),defaults:{dx:"0",dy:"0"},content:new Set(["animate","set"])},fePointLight:{attrsGroups:new Set(["core"]),attrs:new Set(["x","y","z"]),defaults:{x:"0",y:"0",z:"0"},content:new Set(["animate","set"])},feSpecularLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelUnitLength","specularConstant","specularExponent","style","surfaceScale"]),defaults:{surfaceScale:"1",specularConstant:"1",specularExponent:"1"},contentGroups:new Set(["descriptive","lightSource"])},feSpotLight:{attrsGroups:new Set(["core"]),attrs:new Set(["limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","y","z"]),defaults:{x:"0",y:"0",z:"0",pointsAtX:"0",pointsAtY:"0",pointsAtZ:"0",specularExponent:"1"},content:new Set(["animate","set"])},feTile:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["animate","set"])},feTurbulence:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["baseFrequency","class","numOctaves","seed","stitchTiles","style","type"]),defaults:{baseFrequency:"0",numOctaves:"1",seed:"0",stitchTiles:"noStitch",type:"turbulence"},content:new Set(["animate","set"])},filter:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","filterRes","filterUnits","height","href","primitiveUnits","style","width","x","xlink:href","y"]),defaults:{primitiveUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},deprecated:{unsafe:new Set(["filterRes"])},contentGroups:new Set(["descriptive","filterPrimitive"]),content:new Set(["animate","set"])},font:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","style","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"horiz-origin-x":"0","horiz-origin-y":"0"},deprecated:{unsafe:new Set(["horiz-origin-x","horiz-origin-y","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["descriptive"]),content:new Set(["font-face","glyph","hkern","missing-glyph","vkern"])},"font-face":{attrsGroups:new Set(["core"]),attrs:new Set(["font-family","font-style","font-variant","font-weight","font-stretch","font-size","unicode-range","units-per-em","panose-1","stemv","stemh","slope","cap-height","x-height","accent-height","ascent","descent","widths","bbox","ideographic","alphabetic","mathematical","hanging","v-ideographic","v-alphabetic","v-mathematical","v-hanging","underline-position","underline-thickness","strikethrough-position","strikethrough-thickness","overline-position","overline-thickness"]),defaults:{"font-style":"all","font-variant":"normal","font-weight":"all","font-stretch":"normal","unicode-range":"U+0-10FFFF","units-per-em":"1000","panose-1":"0 0 0 0 0 0 0 0 0 0",slope:"0"},deprecated:{unsafe:new Set(["accent-height","alphabetic","ascent","bbox","cap-height","descent","hanging","ideographic","mathematical","panose-1","slope","stemh","stemv","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height"])},contentGroups:new Set(["descriptive"]),content:new Set(["font-face-src"])},"font-face-format":{attrsGroups:new Set(["core"]),attrs:new Set(["string"]),deprecated:{unsafe:new Set(["string"])}},"font-face-name":{attrsGroups:new Set(["core"]),attrs:new Set(["name"]),deprecated:{unsafe:new Set(["name"])}},"font-face-src":{attrsGroups:new Set(["core"]),content:new Set(["font-face-name","font-face-uri"])},"font-face-uri":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["href","xlink:href"]),content:new Set(["font-face-format"])},foreignObject:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","style","transform","width","x","y"]),defaults:{x:"0",y:"0"}},g:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyph:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["arabic-form","class","d","glyph-name","horiz-adv-x","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"arabic-form":"initial"},deprecated:{unsafe:new Set(["arabic-form","glyph-name","horiz-adv-x","orientation","unicode","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyphRef:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),deprecated:{unsafe:new Set(["horiz-adv-x","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},hatch:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","hatchContentUnits","hatchUnits","pitch","rotate","style","transform","x","y"]),defaults:{hatchUnits:"objectBoundingBox",hatchContentUnits:"userSpaceOnUse",x:"0",y:"0",pitch:"0",rotate:"0"},contentGroups:new Set(["animation","descriptive"]),content:new Set(["hatchPath"])},hatchPath:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","d","offset"]),defaults:{offset:"0"},contentGroups:new Set(["animation","descriptive"])},hkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"]),deprecated:{unsafe:new Set(["g1","g2","k","u1","u2"])}},image:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","preserveAspectRatio","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive"])},line:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform","x1","x2","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"0",y2:"0"},contentGroups:new Set(["animation","descriptive"])},linearGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","gradientTransform","gradientUnits","href","spreadMethod","style","x1","x2","xlink:href","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"100%",y2:"0",spreadMethod:"pad"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},marker:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{markerUnits:"strokeWidth",refX:"0",refY:"0",markerWidth:"3",markerHeight:"3"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mask:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","mask-type","maskContentUnits","maskUnits","style","width","x","y"]),defaults:{maskUnits:"objectBoundingBox",maskContentUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},metadata:{attrsGroups:new Set(["core"])},"missing-glyph":{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),deprecated:{unsafe:new Set(["horiz-adv-x","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mpath:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","href","xlink:href"]),contentGroups:new Set(["descriptive"])},path:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","d","externalResourcesRequired","pathLength","style","transform"]),contentGroups:new Set(["animation","descriptive"])},pattern:{attrsGroups:new Set(["conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","style","viewBox","width","x","xlink:href","y"]),defaults:{patternUnits:"objectBoundingBox",patternContentUnits:"userSpaceOnUse",x:"0",y:"0",width:"0",height:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},polygon:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},polyline:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},radialGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","fr","fx","fy","gradientTransform","gradientUnits","href","r","spreadMethod","style","xlink:href"]),defaults:{gradientUnits:"objectBoundingBox",cx:"50%",cy:"50%",r:"50%"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},meshGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","x","y","gradientUnits","transform"]),contentGroups:new Set(["descriptive","paintServer","animation"]),content:new Set(["meshRow"])},meshRow:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["meshPatch"])},meshPatch:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["stop"])},rect:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","rx","ry","style","transform","width","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},script:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","type","href","xlink:href"])},set:{attrsGroups:new Set(["animation","animationAttributeTarget","animationTiming","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","to"]),contentGroups:new Set(["descriptive"])},solidColor:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["paintServer"])},stop:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style","offset","path"]),content:new Set(["animate","animateColor","set"])},style:{attrsGroups:new Set(["core"]),attrs:new Set(["type","media","title"]),defaults:{type:"text/css"}},svg:{attrsGroups:new Set(["conditionalProcessing","core","documentEvent","graphicalEvent","presentation"]),attrs:new Set(["baseProfile","class","contentScriptType","contentStyleType","height","preserveAspectRatio","style","version","viewBox","width","x","y","zoomAndPan"]),defaults:{x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",zoomAndPan:"magnify",version:"1.1",baseProfile:"none",contentScriptType:"application/ecmascript",contentStyleType:"text/css"},deprecated:{safe:new Set(["version"]),unsafe:new Set(["baseProfile","contentScriptType","contentStyleType","zoomAndPan"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},switch:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["a","foreignObject","g","image","svg","switch","text","use"])},symbol:{attrsGroups:new Set(["core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{refX:"0",refY:"0"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},text:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","transform","x","y"]),defaults:{x:"0",y:"0",lengthAdjust:"spacing"},contentGroups:new Set(["animation","descriptive","textContentChild"]),content:new Set(["a"])},textPath:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","d","externalResourcesRequired","href","method","spacing","startOffset","style","xlink:href"]),defaults:{startOffset:"0",method:"align",spacing:"exact"},contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},title:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},tref:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","style","xlink:href"]),contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateColor","set"])},tspan:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","x","y"]),contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},use:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},view:{attrsGroups:new Set(["core"]),attrs:new Set(["externalResourcesRequired","preserveAspectRatio","viewBox","viewTarget","zoomAndPan"]),deprecated:{unsafe:new Set(["viewTarget","zoomAndPan"])},contentGroups:new Set(["descriptive"])},vkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"]),deprecated:{unsafe:new Set(["g1","g2","k","u1","u2"])}}},wE=new Set(["http://creativecommons.org/ns#","http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd","http://krita.org/namespaces/svg/krita","http://ns.adobe.com/AdobeIllustrator/10.0/","http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/","http://ns.adobe.com/Extensibility/1.0/","http://ns.adobe.com/Flows/1.0/","http://ns.adobe.com/GenericCustomNamespace/1.0/","http://ns.adobe.com/Graphs/1.0/","http://ns.adobe.com/ImageReplacement/1.0/","http://ns.adobe.com/SaveForWeb/1.0/","http://ns.adobe.com/Variables/1.0/","http://ns.adobe.com/XPath/1.0/","http://purl.org/dc/elements/1.1/","http://schemas.microsoft.com/visio/2003/SVGExtensions/","http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","http://taptrix.com/vectorillustrator/svg_extensions","http://www.bohemiancoding.com/sketch/ns","http://www.figma.com/figma/ns","http://www.inkscape.org/namespaces/inkscape","http://www.serif.com/","http://www.vector.evaxdesign.sk","http://www.w3.org/1999/02/22-rdf-syntax-ns#","https://boxy-svg.com"]),m0=new Set(["clip-path","color-profile","fill","filter","marker-end","marker-mid","marker-start","mask","stroke","style"]),g0=new Set(["clip-rule","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","dominant-baseline","fill-opacity","fill-rule","fill","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","font","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","marker-end","marker-mid","marker-start","marker","paint-order","pointer-events","shape-rendering","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-rendering","transform","visibility","word-spacing","writing-mode"]),v_=new Set(["clip-path","display","filter","mask","opacity","text-decoration","transform","unicode-bidi"]),_E={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#639",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},kE={"#f0ffff":"azure","#f5f5dc":"beige","#ffe4c4":"bisque","#a52a2a":"brown","#ff7f50":"coral","#ffd700":"gold","#808080":"gray","#008000":"green","#4b0082":"indigo","#fffff0":"ivory","#f0e68c":"khaki","#faf0e6":"linen","#800000":"maroon","#000080":"navy","#808000":"olive","#ffa500":"orange","#da70d6":"orchid","#cd853f":"peru","#ffc0cb":"pink","#dda0dd":"plum","#800080":"purple","#f00":"red","#ff0000":"red","#fa8072":"salmon","#a0522d":"sienna","#c0c0c0":"silver","#fffafa":"snow","#d2b48c":"tan","#008080":"teal","#ff6347":"tomato","#ee82ee":"violet","#f5deb3":"wheat"},kx=new Set(["color","fill","flood-color","lighting-color","stop-color","stroke"]),SE={treeStructural:new Set(["empty","first-child","first-of-type","last-child","last-of-type","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","root"]),functional:new Set(["is","not","where","has"])},tl=0,Ot=1,kn=2,ii=3,kr=4,Ia=5,y0=6,$i=7,as=8,Dn=9,pn=10,zr=11,On=12,Hr=13,Rf=14,os=15,Bi=16,Ui=17,vs=18,na=19,Pa=20,er=21,dn=22,Ai=23,Js=24,Ti=25,Hce=0;function Ci(e){return e>=48&&e<=57}function vl(e){return Ci(e)||e>=65&&e<=70||e>=97&&e<=102}function x_(e){return e>=65&&e<=90}function Wce(e){return e>=97&&e<=122}function Vce(e){return x_(e)||Wce(e)}function Gce(e){return e>=128}function mg(e){return Vce(e)||Gce(e)||e===95}function SR(e){return mg(e)||Ci(e)||e===45}function qce(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function gg(e){return e===10||e===13||e===12}function dc(e){return gg(e)||e===32||e===9}function eo(e,t){return!(e!==92||gg(t)||t===Hce)}function hm(e,t,n){return e===45?mg(t)||t===45||eo(t,n):mg(e)?!0:e===92?eo(e,t):!1}function Wy(e,t,n){return e===43||e===45?Ci(t)?2:t===46&&Ci(n)?3:0:e===46?Ci(t)?2:0:Ci(e)?1:0}function CR(e){return e===65279||e===65534?1:0}const Sx=new Array(128),Yce=128,dm=130,ER=131,w_=132,TR=133;for(let e=0;e<Sx.length;e++)Sx[e]=dc(e)&&dm||Ci(e)&&ER||mg(e)&&w_||qce(e)&&TR||e||Yce;function Vy(e){return e<128?Sx[e]:w_}function Ru(e,t){return t<e.length?e.charCodeAt(t):0}function Cx(e,t,n){return n===13&&Ru(e,t+1)===10?2:1}function Mu(e,t,n){let r=e.charCodeAt(t);return x_(r)&&(r=r|32),r===n}function lf(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const s=r.charCodeAt(i-t);let a=e.charCodeAt(i);if(x_(a)&&(a=a|32),a!==s)return!1}return!0}function Xce(e,t){for(;t>=0&&dc(e.charCodeAt(t));t--);return t+1}function Ap(e,t){for(;t<e.length&&dc(e.charCodeAt(t));t++);return t}function Gy(e,t){for(;t<e.length&&Ci(e.charCodeAt(t));t++);return t}function Yu(e,t){if(t+=2,vl(Ru(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&vl(Ru(e,t));t++);const n=Ru(e,t);dc(n)&&(t+=Cx(e,t,n))}return t}function Pp(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!SR(n)){if(eo(n,Ru(e,t+1))){t=Yu(e,t)-1;continue}break}}return t}function b0(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),Ci(n)&&(t=Gy(e,t+1),n=e.charCodeAt(t)),n===46&&Ci(e.charCodeAt(t+1))&&(t+=2,t=Gy(e,t)),Mu(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),Ci(n)&&(t=Gy(e,t+1+r+1))}return t}function qy(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}eo(n,Ru(e,t+1))&&(t=Yu(e,t))}return t}function jR(e){if(e.length===1&&!vl(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const AR=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token","comment-token"],Kce=16*1024;function yg(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,Kce)):e}const CE=10,Zce=12,EE=13;function TE(e){const t=e.source,n=t.length,r=t.length>0?CR(t.charCodeAt(0)):0,i=yg(e.lines,n),s=yg(e.columns,n);let a=e.startLine,o=e.startColumn;for(let c=r;c<n;c++){const h=t.charCodeAt(c);i[c]=a,s[c]=o++,(h===CE||h===EE||h===Zce)&&(h===EE&&c+1<n&&t.charCodeAt(c+1)===CE&&(c++,i[c]=a,s[c]=o),a++,o=1)}i[n]=a,s[n]=o,e.lines=i,e.columns=s,e.computed=!0}let Qce=class{constructor(t,n,r,i){this.setSource(t,n,r,i),this.lines=null,this.columns=null}setSource(t="",n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||TE(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||TE(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}};const Ua=16777215,Ha=24,fc=new Uint8Array(32);fc[kn]=dn;fc[er]=dn;fc[na]=Pa;fc[Ai]=Js;function jE(e){return fc[e]!==0}let Jce=class{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=yg(this.offsetAndType,t.length+1),s=yg(this.balance,t.length+1);let a=0,o=-1,c=0,h=t.length;this.offsetAndType=null,this.balance=null,s.fill(0),n(t,(d,p,m)=>{const g=a++;if(i[g]=d<<Ha|m,o===-1&&(o=p),s[g]=h,d===c){const v=s[h];s[h]=g,h=v,c=fc[i[v]>>Ha]}else jE(d)&&(h=g,c=fc[d])}),i[a]=tl<<Ha|r,s[a]=a;for(let d=0;d<a;d++){const p=s[d];if(p<=d){const m=s[p];m!==d&&(s[d]=m)}else p>a&&(s[d]=a)}this.source=t,this.firstCharOffset=o===-1?0:o,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>Ha:tl}lookupTypeNonSC(t){for(let n=this.tokenIndex;n<this.tokenCount;n++){const r=this.offsetAndType[n]>>Ha;if(r!==Hr&&r!==Ti&&t--===0)return r}return tl}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&Ua:this.source.length}lookupOffsetNonSC(t){for(let n=this.tokenIndex;n<this.tokenCount;n++){const r=this.offsetAndType[n]>>Ha;if(r!==Hr&&r!==Ti&&t--===0)return n-this.tokenIndex}return tl}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?lf(this.source,this.offsetAndType[t-1]&Ua,this.offsetAndType[t]&Ua,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&Ua:this.offsetAndType[this.tokenCount]&Ua:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===Dn&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===Dn&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&Ua,n=this.offsetAndType[n],this.tokenType=n>>Ha,this.tokenEnd=n&Ua):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>Ha,this.tokenEnd=t&Ua):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=tl,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Hr||this.tokenType===Ti;)this.next()}skipUntilBalanced(t,n){let r=t,i=0,s=0;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(s=r>0?this.offsetAndType[r-1]&Ua:this.firstCharOffset,n(this.source.charCodeAt(s))){case 1:break e;case 2:r++;break e;default:jE(this.offsetAndType[r]>>Ha)&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,s=this.offsetAndType[n],a=s&Ua,o=s>>Ha;r=a,t(o,i,a,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,s)=>{t[s]={idx:s,type:AR[n],chunk:this.source.substring(r,i),balance:this.balance[s]}}),t}};function v0(e,t){function n(p){return p<o?e.charCodeAt(p):0}function r(){if(h=b0(e,h),hm(n(h),n(h+1),n(h+2))){d=On,h=Pp(e,h);return}if(n(h)===37){d=zr,h++;return}d=pn}function i(){const p=h;if(h=Pp(e,h),lf(e,p,h,"url")&&n(h)===40){if(h=Ap(e,h+1),n(h)===34||n(h)===39){d=kn,h=p+4;return}a();return}if(n(h)===40){d=kn,h++;return}d=Ot}function s(p){for(p||(p=n(h++)),d=Ia;h<e.length;h++){const m=e.charCodeAt(h);switch(Vy(m)){case p:h++;return;case dm:if(gg(m)){h+=Cx(e,h,m),d=y0;return}break;case 92:if(h===e.length-1)break;const g=n(h+1);gg(g)?h+=Cx(e,h+1,g):eo(m,g)&&(h=Yu(e,h)-1);break}}}function a(){for(d=$i,h=Ap(e,h);h<e.length;h++){const p=e.charCodeAt(h);switch(Vy(p)){case 41:h++;return;case dm:if(h=Ap(e,h),n(h)===41||h>=e.length){h<e.length&&h++;return}h=qy(e,h),d=as;return;case 34:case 39:case 40:case TR:h=qy(e,h),d=as;return;case 92:if(eo(p,n(h+1))){h=Yu(e,h)-1;break}h=qy(e,h),d=as;return}}}e=String(e||"");const o=e.length;let c=CR(n(0)),h=c,d;for(;h<o;){const p=e.charCodeAt(h);switch(Vy(p)){case dm:d=Hr,h=Ap(e,h+1);break;case 34:s();break;case 35:SR(n(h+1))||eo(n(h+1),n(h+2))?(d=kr,h=Pp(e,h+1)):(d=Dn,h++);break;case 39:s();break;case 40:d=er,h++;break;case 41:d=dn,h++;break;case 43:Wy(p,n(h+1),n(h+2))?r():(d=Dn,h++);break;case 44:d=vs,h++;break;case 45:Wy(p,n(h+1),n(h+2))?r():n(h+1)===45&&n(h+2)===62?(d=os,h=h+3):hm(p,n(h+1),n(h+2))?i():(d=Dn,h++);break;case 46:Wy(p,n(h+1),n(h+2))?r():(d=Dn,h++);break;case 47:n(h+1)===42?(d=Ti,h=e.indexOf("*/",h+2),h=h===-1?e.length:h+2):(d=Dn,h++);break;case 58:d=Bi,h++;break;case 59:d=Ui,h++;break;case 60:n(h+1)===33&&n(h+2)===45&&n(h+3)===45?(d=Rf,h=h+4):(d=Dn,h++);break;case 64:hm(n(h+1),n(h+2),n(h+3))?(d=ii,h=Pp(e,h+1)):(d=Dn,h++);break;case 91:d=na,h++;break;case 92:eo(p,n(h+1))?i():(d=Dn,h++);break;case 93:d=Pa,h++;break;case 123:d=Ai,h++;break;case 125:d=Js,h++;break;case ER:r();break;case w_:i();break;default:d=Dn,h++}t(d,c,c=h)}}let Nc=null,ko=class da{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return da.createItem(t)}allocateCursor(t,n){let r;return Nc!==null?(r=Nc,Nc=Nc.cursor,r.prev=t,r.next=n,r.cursor=this.cursor):r={prev:t,next:n,cursor:this.cursor},this.cursor=r,r}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Nc,Nc=t}updateCursors(t,n,r,i){let{cursor:s}=this;for(;s!==null;)s.prev===t&&(s.prev=n),s.next===r&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let n=this.head;n!==null;n=n.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let r of t){const i=da.createItem(r);n!==null?n.next=i:this.head=i,i.prev=n,n=i}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,n=this){const r=this.allocateCursor(null,this.head);for(;r.next!==null;){const i=r.next;r.next=i.next,t.call(n,i.data,i,this)}this.releaseCursor()}forEachRight(t,n=this){const r=this.allocateCursor(this.tail,null);for(;r.prev!==null;){const i=r.prev;r.prev=i.prev,t.call(n,i.data,i,this)}this.releaseCursor()}reduce(t,n,r=this){let i=this.allocateCursor(null,this.head),s=n,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(t,n,r=this){let i=this.allocateCursor(this.tail,null),s=n,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}some(t,n=this){for(let r=this.head;r!==null;r=r.next)if(t.call(n,r.data,r,this))return!0;return!1}map(t,n=this){const r=new da;for(let i=this.head;i!==null;i=i.next)r.appendData(t.call(n,i.data,i,this));return r}filter(t,n=this){const r=new da;for(let i=this.head;i!==null;i=i.next)t.call(n,i.data,i,this)&&r.appendData(i.data);return r}nextUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(null,t);for(;i.next!==null;){const s=i.next;if(i.next=s.next,n.call(r,s.data,s,this))break}this.releaseCursor()}prevUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(t,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,n.call(r,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new da;for(let n of this)t.appendData(n);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(da.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(da.createItem(t))}insert(t,n=null){if(n!==null)if(this.updateCursors(n.prev,t,n,t),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=t,n.prev=t,t.next=n,this.updateCursors(null,t)}else n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(da.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(da.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(da.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,n){return t.head===null?this:(n!=null?(this.updateCursors(n.prev,t.tail,n,t.head),n.prev!==null?(n.prev.next=t.head,t.head.prev=n.prev):this.head=t.head,n.prev=t.tail,t.tail.next=n):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,n){"head"in n?this.insertList(n,t):this.insert(n,t),this.remove(t)}};function x0(e,t){const n=Object.create(SyntaxError.prototype),r=new Error;return Object.assign(n,{name:e,message:t,get stack(){return(r.stack||"").replace(/^(.+\n){1,3}/,`${e}: ${t}
`)}})}const Yy=100,AE=60,PE="    ";function NE({source:e,line:t,column:n,baseLine:r,baseColumn:i},s){function a(v,w){return h.slice(v,w).map((C,x)=>String(v+x+1).padStart(m)+" |"+C).join(`
`)}const o=`
`.repeat(Math.max(r-1,0)),c=" ".repeat(Math.max(i-1,0)),h=(o+c+e).split(/\r\n?|\n|\f/),d=Math.max(1,t-s)-1,p=Math.min(t+s,h.length+1),m=Math.max(4,String(p).length)+1;let g=0;n+=(PE.length-1)*(h[t-1].substr(0,n-1).match(/\t/g)||[]).length,n>Yy&&(g=n-AE+3,n=AE-2);for(let v=d;v<=p;v++)v>=0&&v<h.length&&(h[v]=h[v].replace(/\t/g,PE),h[v]=(g>0&&h[v].length>g?"":"")+h[v].substr(g,Yy-2)+(h[v].length>g+Yy-1?"":""));return[a(d,t),new Array(n+m+2).join("-")+"^",a(t,p)].filter(Boolean).join(`
`).replace(/^(\s+\d+\s+\|\n)+/,"").replace(/\n(\s+\d+\s+\|)+$/,"")}function OE(e,t,n,r,i,s=1,a=1){return Object.assign(x0("SyntaxError",e),{source:t,offset:n,line:r,column:i,sourceFragment(c){return NE({source:t,line:r,column:i,baseLine:s,baseColumn:a},isNaN(c)?0:c)},get formattedMessage(){return`Parse error: ${e}
`+NE({source:t,line:r,column:i,baseLine:s,baseColumn:a},2)}})}function eue(e){const t=this.createList();let n=!1;const r={recognizer:e};for(;!this.eof;){switch(this.tokenType){case Ti:this.next();continue;case Hr:n=!0,this.next();continue}let i=e.getNode.call(this,r);if(i===void 0)break;n&&(e.onWhiteSpace&&e.onWhiteSpace.call(this,i,t,r),n=!1),t.push(i)}return n&&e.onWhiteSpace&&e.onWhiteSpace.call(this,null,t,r),t}const RE=()=>{},tue=33,nue=35,Xy=59,ME=123,LE=0;function rue(e){return function(){return this[e]()}}function Ky(e){const t=Object.create(null);for(const n of Object.keys(e)){const r=e[n],i=r.parse||r;i&&(t[n]=i)}return t}function iue(e){const t={context:Object.create(null),features:Object.assign(Object.create(null),e.features),scope:Object.assign(Object.create(null),e.scope),atrule:Ky(e.atrule),pseudo:Ky(e.pseudo),node:Ky(e.node)};for(const[n,r]of Object.entries(e.parseContext))switch(typeof r){case"function":t.context[n]=r;break;case"string":t.context[n]=rue(r);break}return{config:t,...t,...t.node}}function sue(e){let t="",n="<unknown>",r=!1,i=RE,s=!1;const a=new Qce,o=Object.assign(new Jce,iue(e||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:eue,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(h){return h===ME?1:0},consumeUntilLeftCurlyBracketOrSemicolon(h){return h===ME||h===Xy?1:0},consumeUntilExclamationMarkOrSemicolon(h){return h===tue||h===Xy?1:0},consumeUntilSemicolonIncluded(h){return h===Xy?2:0},createList(){return new ko},createSingleNodeList(h){return new ko().appendData(h)},getFirstListNode(h){return h&&h.first},getLastListNode(h){return h&&h.last},parseWithFallback(h,d){const p=this.tokenIndex;try{return h.call(this)}catch(m){if(s)throw m;this.skip(p-this.tokenIndex);const g=d.call(this);return s=!0,i(m,g),s=!1,g}},lookupNonWSType(h){let d;do if(d=this.lookupType(h++),d!==Hr&&d!==Ti)return d;while(d!==LE);return LE},charCodeAt(h){return h>=0&&h<t.length?t.charCodeAt(h):0},substring(h,d){return t.substring(h,d)},substrToCursor(h){return this.source.substring(h,this.tokenStart)},cmpChar(h,d){return Mu(t,h,d)},cmpStr(h,d,p){return lf(t,h,d,p)},consume(h){const d=this.tokenStart;return this.eat(h),this.substrToCursor(d)},consumeFunctionName(){const h=t.substring(this.tokenStart,this.tokenEnd-1);return this.eat(kn),h},consumeNumber(h){const d=t.substring(this.tokenStart,b0(t,this.tokenStart));return this.eat(h),d},eat(h){if(this.tokenType!==h){const d=AR[h].slice(0,-6).replace(/-/g," ").replace(/^./,g=>g.toUpperCase());let p=`${/[[\](){}]/.test(d)?`"${d}"`:d} is expected`,m=this.tokenStart;switch(h){case Ot:this.tokenType===kn||this.tokenType===$i?(m=this.tokenEnd-1,p="Identifier is expected but function found"):p="Identifier is expected";break;case kr:this.isDelim(nue)&&(this.next(),m++,p="Name is expected");break;case zr:this.tokenType===pn&&(m=this.tokenEnd,p="Percent sign is expected");break}this.error(p,m)}this.next()},eatIdent(h){(this.tokenType!==Ot||this.lookupValue(0,h)===!1)&&this.error(`Identifier "${h}" is expected`),this.next()},eatDelim(h){this.isDelim(h)||this.error(`Delim "${String.fromCharCode(h)}" is expected`),this.next()},getLocation(h,d){return r?a.getLocationRange(h,d,n):null},getLocationFromList(h){if(r){const d=this.getFirstListNode(h),p=this.getLastListNode(h);return a.getLocationRange(d!==null?d.loc.start.offset-a.startOffset:this.tokenStart,p!==null?p.loc.end.offset-a.startOffset:this.tokenStart,n)}return null},error(h,d){const p=typeof d<"u"&&d<t.length?a.getLocation(d):this.eof?a.getLocation(Xce(t,t.length-1)):a.getLocation(this.tokenStart);throw new OE(h||"Unexpected input",t,p.offset,p.line,p.column,a.startLine,a.startColumn)}});return Object.assign(function(h,d){t=h,d=d||{},o.setSource(t,v0),a.setSource(t,d.offset,d.line,d.column),n=d.filename||"<unknown>",r=!!d.positions,i=typeof d.onParseError=="function"?d.onParseError:RE,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in d?!!d.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in d?!!d.parseRulePrelude:!0,o.parseValue="parseValue"in d?!!d.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in d?!!d.parseCustomProperty:!1;const{context:p="default",onComment:m}=d;if(!(p in o.context))throw new Error("Unknown context `"+p+"`");typeof m=="function"&&o.forEachToken((v,w,C)=>{if(v===Ti){const x=o.getLocation(w,C),k=lf(t,C-2,C,"*/")?t.slice(w+2,C-2):t.slice(w+2,C);m(k,x)}});const g=o.context[p].call(o,d);return o.eof||o.error(),g},{SyntaxError:OE,config:o.config})}var __={},k_={},IE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");k_.encode=function(e){if(0<=e&&e<IE.length)return IE[e];throw new TypeError("Must be between 0 and 63: "+e)};k_.decode=function(e){var t=65,n=90,r=97,i=122,s=48,a=57,o=43,c=47,h=26,d=52;return t<=e&&e<=n?e-t:r<=e&&e<=i?e-r+h:s<=e&&e<=a?e-s+d:e==o?62:e==c?63:-1};var PR=k_,S_=5,NR=1<<S_,OR=NR-1,RR=NR;function aue(e){return e<0?(-e<<1)+1:(e<<1)+0}function oue(e){var t=(e&1)===1,n=e>>1;return t?-n:n}__.encode=function(t){var n="",r,i=aue(t);do r=i&OR,i>>>=S_,i>0&&(r|=RR),n+=PR.encode(r);while(i>0);return n};__.decode=function(t,n,r){var i=t.length,s=0,a=0,o,c;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=PR.decode(t.charCodeAt(n++)),c===-1)throw new Error("Invalid base64 digit: "+t.charAt(n-1));o=!!(c&RR),c&=OR,s=s+(c<<a),a+=S_}while(o);r.value=oue(s),r.rest=n};var w0={};(function(e){function t(D,R,ee){if(R in D)return D[R];if(arguments.length===3)return ee;throw new Error('"'+R+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function i(D){var R=D.match(n);return R?{scheme:R[1],auth:R[2],host:R[3],port:R[4],path:R[5]}:null}e.urlParse=i;function s(D){var R="";return D.scheme&&(R+=D.scheme+":"),R+="//",D.auth&&(R+=D.auth+"@"),D.host&&(R+=D.host),D.port&&(R+=":"+D.port),D.path&&(R+=D.path),R}e.urlGenerate=s;var a=32;function o(D){var R=[];return function(ee){for(var ue=0;ue<R.length;ue++)if(R[ue].input===ee){var ie=R[0];return R[0]=R[ue],R[ue]=ie,R[0].result}var ge=D(ee);return R.unshift({input:ee,result:ge}),R.length>a&&R.pop(),ge}}var c=o(function(R){var ee=R,ue=i(R);if(ue){if(!ue.path)return R;ee=ue.path}for(var ie=e.isAbsolute(ee),ge=[],H=0,ye=0;;)if(H=ye,ye=ee.indexOf("/",H),ye===-1){ge.push(ee.slice(H));break}else for(ge.push(ee.slice(H,ye));ye<ee.length&&ee[ye]==="/";)ye++;for(var Ae,we=0,ye=ge.length-1;ye>=0;ye--)Ae=ge[ye],Ae==="."?ge.splice(ye,1):Ae===".."?we++:we>0&&(Ae===""?(ge.splice(ye+1,we),we=0):(ge.splice(ye,2),we--));return ee=ge.join("/"),ee===""&&(ee=ie?"/":"."),ue?(ue.path=ee,s(ue)):ee});e.normalize=c;function h(D,R){D===""&&(D="."),R===""&&(R=".");var ee=i(R),ue=i(D);if(ue&&(D=ue.path||"/"),ee&&!ee.scheme)return ue&&(ee.scheme=ue.scheme),s(ee);if(ee||R.match(r))return R;if(ue&&!ue.host&&!ue.path)return ue.host=R,s(ue);var ie=R.charAt(0)==="/"?R:c(D.replace(/\/+$/,"")+"/"+R);return ue?(ue.path=ie,s(ue)):ie}e.join=h,e.isAbsolute=function(D){return D.charAt(0)==="/"||n.test(D)};function d(D,R){D===""&&(D="."),D=D.replace(/\/$/,"");for(var ee=0;R.indexOf(D+"/")!==0;){var ue=D.lastIndexOf("/");if(ue<0||(D=D.slice(0,ue),D.match(/^([^\/]+:\/)?\/*$/)))return R;++ee}return Array(ee+1).join("../")+R.substr(D.length+1)}e.relative=d;var p=function(){var D=Object.create(null);return!("__proto__"in D)}();function m(D){return D}function g(D){return w(D)?"$"+D:D}e.toSetString=p?m:g;function v(D){return w(D)?D.slice(1):D}e.fromSetString=p?m:v;function w(D){if(!D)return!1;var R=D.length;if(R<9||D.charCodeAt(R-1)!==95||D.charCodeAt(R-2)!==95||D.charCodeAt(R-3)!==111||D.charCodeAt(R-4)!==116||D.charCodeAt(R-5)!==111||D.charCodeAt(R-6)!==114||D.charCodeAt(R-7)!==112||D.charCodeAt(R-8)!==95||D.charCodeAt(R-9)!==95)return!1;for(var ee=R-10;ee>=0;ee--)if(D.charCodeAt(ee)!==36)return!1;return!0}function C(D,R,ee){var ue=j(D.source,R.source);return ue!==0||(ue=D.originalLine-R.originalLine,ue!==0)||(ue=D.originalColumn-R.originalColumn,ue!==0||ee)||(ue=D.generatedColumn-R.generatedColumn,ue!==0)||(ue=D.generatedLine-R.generatedLine,ue!==0)?ue:j(D.name,R.name)}e.compareByOriginalPositions=C;function x(D,R,ee){var ue;return ue=D.originalLine-R.originalLine,ue!==0||(ue=D.originalColumn-R.originalColumn,ue!==0||ee)||(ue=D.generatedColumn-R.generatedColumn,ue!==0)||(ue=D.generatedLine-R.generatedLine,ue!==0)?ue:j(D.name,R.name)}e.compareByOriginalPositionsNoSource=x;function k(D,R,ee){var ue=D.generatedLine-R.generatedLine;return ue!==0||(ue=D.generatedColumn-R.generatedColumn,ue!==0||ee)||(ue=j(D.source,R.source),ue!==0)||(ue=D.originalLine-R.originalLine,ue!==0)||(ue=D.originalColumn-R.originalColumn,ue!==0)?ue:j(D.name,R.name)}e.compareByGeneratedPositionsDeflated=k;function P(D,R,ee){var ue=D.generatedColumn-R.generatedColumn;return ue!==0||ee||(ue=j(D.source,R.source),ue!==0)||(ue=D.originalLine-R.originalLine,ue!==0)||(ue=D.originalColumn-R.originalColumn,ue!==0)?ue:j(D.name,R.name)}e.compareByGeneratedPositionsDeflatedNoLine=P;function j(D,R){return D===R?0:D===null?1:R===null?-1:D>R?1:-1}function M(D,R){var ee=D.generatedLine-R.generatedLine;return ee!==0||(ee=D.generatedColumn-R.generatedColumn,ee!==0)||(ee=j(D.source,R.source),ee!==0)||(ee=D.originalLine-R.originalLine,ee!==0)||(ee=D.originalColumn-R.originalColumn,ee!==0)?ee:j(D.name,R.name)}e.compareByGeneratedPositionsInflated=M;function S(D){return JSON.parse(D.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=S;function B(D,R,ee){if(R=R||"",D&&(D[D.length-1]!=="/"&&R[0]!=="/"&&(D+="/"),R=D+R),ee){var ue=i(ee);if(!ue)throw new Error("sourceMapURL could not be parsed");if(ue.path){var ie=ue.path.lastIndexOf("/");ie>=0&&(ue.path=ue.path.substring(0,ie+1))}R=h(s(ue),R)}return c(R)}e.computeSourceURL=B})(w0);var MR={},C_=w0,E_=Object.prototype.hasOwnProperty,rc=typeof Map<"u";function Po(){this._array=[],this._set=rc?new Map:Object.create(null)}Po.fromArray=function(t,n){for(var r=new Po,i=0,s=t.length;i<s;i++)r.add(t[i],n);return r};Po.prototype.size=function(){return rc?this._set.size:Object.getOwnPropertyNames(this._set).length};Po.prototype.add=function(t,n){var r=rc?t:C_.toSetString(t),i=rc?this.has(t):E_.call(this._set,r),s=this._array.length;(!i||n)&&this._array.push(t),i||(rc?this._set.set(t,s):this._set[r]=s)};Po.prototype.has=function(t){if(rc)return this._set.has(t);var n=C_.toSetString(t);return E_.call(this._set,n)};Po.prototype.indexOf=function(t){if(rc){var n=this._set.get(t);if(n>=0)return n}else{var r=C_.toSetString(t);if(E_.call(this._set,r))return this._set[r]}throw new Error('"'+t+'" is not in the set.')};Po.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};Po.prototype.toArray=function(){return this._array.slice()};MR.ArraySet=Po;var LR={},IR=w0;function lue(e,t){var n=e.generatedLine,r=t.generatedLine,i=e.generatedColumn,s=t.generatedColumn;return r>n||r==n&&s>=i||IR.compareByGeneratedPositionsInflated(e,t)<=0}function _0(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}_0.prototype.unsortedForEach=function(t,n){this._array.forEach(t,n)};_0.prototype.add=function(t){lue(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};_0.prototype.toArray=function(){return this._sorted||(this._array.sort(IR.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};LR.MappingList=_0;var Bh=__,ti=w0,bg=MR.ArraySet,cue=LR.MappingList;function ea(e){e||(e={}),this._file=ti.getArg(e,"file",null),this._sourceRoot=ti.getArg(e,"sourceRoot",null),this._skipValidation=ti.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=ti.getArg(e,"ignoreInvalidMapping",!1),this._sources=new bg,this._names=new bg,this._mappings=new cue,this._sourcesContents=null}ea.prototype._version=3;ea.fromSourceMap=function(t,n){var r=t.sourceRoot,i=new ea(Object.assign(n||{},{file:t.file,sourceRoot:r}));return t.eachMapping(function(s){var a={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(a.source=s.source,r!=null&&(a.source=ti.relative(r,a.source)),a.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(a.name=s.name)),i.addMapping(a)}),t.sources.forEach(function(s){var a=s;r!==null&&(a=ti.relative(r,s)),i._sources.has(a)||i._sources.add(a);var o=t.sourceContentFor(s);o!=null&&i.setSourceContent(s,o)}),i};ea.prototype.addMapping=function(t){var n=ti.getArg(t,"generated"),r=ti.getArg(t,"original",null),i=ti.getArg(t,"source",null),s=ti.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(n,r,i,s)===!1||(i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:s}))};ea.prototype.setSourceContent=function(t,n){var r=t;this._sourceRoot!=null&&(r=ti.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[ti.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[ti.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};ea.prototype.applySourceMap=function(t,n,r){var i=n;if(n==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=t.file}var s=this._sourceRoot;s!=null&&(i=ti.relative(s,i));var a=new bg,o=new bg;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var h=t.originalPositionFor({line:c.originalLine,column:c.originalColumn});h.source!=null&&(c.source=h.source,r!=null&&(c.source=ti.join(r,c.source)),s!=null&&(c.source=ti.relative(s,c.source)),c.originalLine=h.line,c.originalColumn=h.column,h.name!=null&&(c.name=h.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!o.has(p)&&o.add(p)},this),this._sources=a,this._names=o,t.sources.forEach(function(c){var h=t.sourceContentFor(c);h!=null&&(r!=null&&(c=ti.join(r,c)),s!=null&&(c=ti.relative(s,c)),this.setSourceContent(c,h))},this)};ea.prototype._validateMapping=function(t,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number"){var s="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!n&&!r&&!i)){if(t&&"line"in t&&"column"in t&&n&&"line"in n&&"column"in n&&t.line>0&&t.column>=0&&n.line>0&&n.column>=0&&r)return;var s="Invalid mapping: "+JSON.stringify({generated:t,source:r,original:n,name:i});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}};ea.prototype._serializeMappings=function(){for(var t=0,n=1,r=0,i=0,s=0,a=0,o="",c,h,d,p,m=this._mappings.toArray(),g=0,v=m.length;g<v;g++){if(h=m[g],c="",h.generatedLine!==n)for(t=0;h.generatedLine!==n;)c+=";",n++;else if(g>0){if(!ti.compareByGeneratedPositionsInflated(h,m[g-1]))continue;c+=","}c+=Bh.encode(h.generatedColumn-t),t=h.generatedColumn,h.source!=null&&(p=this._sources.indexOf(h.source),c+=Bh.encode(p-a),a=p,c+=Bh.encode(h.originalLine-1-i),i=h.originalLine-1,c+=Bh.encode(h.originalColumn-r),r=h.originalColumn,h.name!=null&&(d=this._names.indexOf(h.name),c+=Bh.encode(d-s),s=d)),o+=c}return o};ea.prototype._generateSourcesContent=function(t,n){return t.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=ti.relative(n,r));var i=ti.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};ea.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};ea.prototype.toString=function(){return JSON.stringify(this.toJSON())};var $R=ea;const $E=new Set(["Atrule","Selector","Declaration"]);function uue(e){const t=new $R,n={line:1,column:0},r={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,c=!1;const h=e.node;e.node=function(m){if(m.loc&&m.loc.start&&$E.has(m.type)){const g=m.loc.start.line,v=m.loc.start.column-1;(r.line!==g||r.column!==v)&&(r.line=g,r.column=v,n.line=a,n.column=o,c&&(c=!1,(n.line!==i.line||n.column!==i.column)&&t.addMapping(s)),c=!0,t.addMapping({source:m.loc.source,original:r,generated:n}))}h.call(this,m),c&&$E.has(m.type)&&(i.line=a,i.column=o)};const d=e.emit;e.emit=function(m,g,v){for(let w=0;w<m.length;w++)m.charCodeAt(w)===10?(a++,o=0):o++;d(m,g,v)};const p=e.result;return e.result=function(){return c&&t.addMapping(s),{css:p(),map:t}},e}const hue=43,due=45,Zy=(e,t)=>{if(e===Dn&&(e=t),typeof e=="string"){const n=e.charCodeAt(0);return n>127?32768:n<<8}return e},DR=[[Ot,Ot],[Ot,kn],[Ot,$i],[Ot,as],[Ot,"-"],[Ot,pn],[Ot,zr],[Ot,On],[Ot,os],[Ot,er],[ii,Ot],[ii,kn],[ii,$i],[ii,as],[ii,"-"],[ii,pn],[ii,zr],[ii,On],[ii,os],[kr,Ot],[kr,kn],[kr,$i],[kr,as],[kr,"-"],[kr,pn],[kr,zr],[kr,On],[kr,os],[On,Ot],[On,kn],[On,$i],[On,as],[On,"-"],[On,pn],[On,zr],[On,On],[On,os],["#",Ot],["#",kn],["#",$i],["#",as],["#","-"],["#",pn],["#",zr],["#",On],["#",os],["-",Ot],["-",kn],["-",$i],["-",as],["-","-"],["-",pn],["-",zr],["-",On],["-",os],[pn,Ot],[pn,kn],[pn,$i],[pn,as],[pn,pn],[pn,zr],[pn,On],[pn,"%"],[pn,os],["@",Ot],["@",kn],["@",$i],["@",as],["@","-"],["@",os],[".",pn],[".",zr],[".",On],["+",pn],["+",zr],["+",On],["/","*"]],fue=DR.concat([[Ot,kr],[On,kr],[kr,kr],[ii,er],[ii,Ia],[ii,Bi],[zr,zr],[zr,On],[zr,kn],[zr,"-"],[dn,Ot],[dn,kn],[dn,zr],[dn,On],[dn,kr],[dn,"-"]]);function zR(e){const t=new Set(e.map(([n,r])=>Zy(n)<<16|Zy(r)));return function(n,r,i){const s=Zy(r,i),a=i.charCodeAt(0);return(a===due&&r!==Ot&&r!==kn&&r!==os||a===hue?t.has(n<<16|a<<8):t.has(n<<16|s))&&this.emit(" ",Hr,!0),s}}const pue=zR(DR),FR=zR(fue),DE=Object.freeze(Object.defineProperty({__proto__:null,safe:FR,spec:pue},Symbol.toStringTag,{value:"Module"})),mue=92;function gue(e,t){if(typeof t=="function"){let n=null;e.children.forEach(r=>{n!==null&&t.call(this,n),this.node(r),n=r});return}e.children.forEach(this.node,this)}function yue(e){v0(e,(t,n,r)=>{this.token(t,e.slice(n,r))})}function bue(e){const t=new Map;for(let[n,r]of Object.entries(e.node))typeof(r.generate||r)=="function"&&t.set(n,r.generate||r);return function(n,r){let i="",s=0,a={node(c){if(t.has(c.type))t.get(c.type).call(o,c);else throw new Error("Unknown node type: "+c.type)},tokenBefore:FR,token(c,h){s=this.tokenBefore(s,c,h),this.emit(h,c,!1),c===Dn&&h.charCodeAt(0)===mue&&this.emit(`
`,Hr,!0)},emit(c){i+=c},result(){return i}};r&&(typeof r.decorator=="function"&&(a=r.decorator(a)),r.sourceMap&&(a=uue(a)),r.mode in DE&&(a.tokenBefore=DE[r.mode]));const o={node:c=>a.node(c),children:gue,token:(c,h)=>a.token(c,h),tokenize:yue};return a.node(n),a.result()}}function vue(e){return{fromPlainObject(t){return e(t,{enter(n){n.children&&!(n.children instanceof ko)&&(n.children=new ko().fromArray(n.children))}}),t},toPlainObject(t){return e(t,{leave(n){n.children&&n.children instanceof ko&&(n.children=n.children.toArray())}}),t}}}const{hasOwnProperty:T_}=Object.prototype,id=function(){};function zE(e){return typeof e=="function"?e:id}function FE(e,t){return function(n,r,i){n.type===t&&e.call(this,n,r,i)}}function xue(e,t){const n=t.structure,r=[];for(const i in n){if(T_.call(n,i)===!1)continue;let s=n[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&r.push(a)}return r.length?{context:t.walkContext,fields:r}:null}function wue(e){const t={};for(const n in e.node)if(T_.call(e.node,n)){const r=e.node[n];if(!r.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");t[n]=xue(n,r)}return t}function BE(e,t){const n=e.fields.slice(),r=e.context,i=typeof r=="string";return t&&n.reverse(),function(s,a,o,c){let h;i&&(h=a[r],a[r]=s);for(const d of n){const p=s[d.name];if(!d.nullable||p){if(d.type==="list"){if(t?p.reduceRight(c,!1):p.reduce(c,!1))return!0}else if(o(p))return!0}}i&&(a[r]=h)}}function UE({StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}){return{Atrule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Rule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Declaration:{StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}}}function _ue(e){const t=wue(e),n={},r={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const h in t)T_.call(t,h)&&t[h]!==null&&(n[h]=BE(t[h],!1),r[h]=BE(t[h],!0));const a=UE(n),o=UE(r),c=function(h,d){function p(x,k,P){const j=m.call(C,x,k,P);return j===i?!0:j===s?!1:!!(v.hasOwnProperty(x.type)&&v[x.type](x,C,p,w)||g.call(C,x,k,P)===i)}let m=id,g=id,v=n,w=(x,k,P,j)=>x||p(k,P,j);const C={break:i,skip:s,root:h,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof d=="function")m=d;else if(d&&(m=zE(d.enter),g=zE(d.leave),d.reverse&&(v=r),d.visit)){if(a.hasOwnProperty(d.visit))v=d.reverse?o[d.visit]:a[d.visit];else if(!t.hasOwnProperty(d.visit))throw new Error("Bad value `"+d.visit+"` for `visit` option (should be: "+Object.keys(t).sort().join(", ")+")");m=FE(m,d.visit),g=FE(g,d.visit)}if(m===id&&g===id)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");p(h)};return c.break=i,c.skip=s,c.find=function(h,d){let p=null;return c(h,function(m,g,v){if(d.call(this,m,g,v))return p=m,i}),p},c.findLast=function(h,d){let p=null;return c(h,{reverse:!0,enter(m,g,v){if(d.call(this,m,g,v))return p=m,i}}),p},c.findAll=function(h,d){const p=[];return c(h,function(m,g,v){d.call(this,m,g,v)&&p.push(m)}),p},c}function kue(e){return e}function Sue(e){const{min:t,max:n,comma:r}=e;return t===0&&n===0?r?"#?":"*":t===0&&n===1?"?":t===1&&n===0?r?"#":"+":t===1&&n===1?"":(r?"#":"")+(t===n?"{"+t+"}":"{"+t+","+(n!==0?n:"")+"}")}function Cue(e){switch(e.type){case"Range":return" ["+(e.min===null?"-":e.min)+","+(e.max===null?"":e.max)+"]";default:throw new Error("Unknown node type `"+e.type+"`")}}function Eue(e,t,n,r){const i=e.combinator===" "||r?e.combinator:" "+e.combinator+" ",s=e.terms.map(a=>vg(a,t,n,r)).join(i);return e.explicit||n?(r||s[0]===","?"[":"[ ")+s+(r?"]":" ]"):s}function vg(e,t,n,r){let i;switch(e.type){case"Group":i=Eue(e,t,n,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return vg(e.term,t,n,r)+t(Sue(e),e);case"Boolean":i="<boolean-expr["+vg(e.term,t,n,r)+"]>";break;case"Type":i="<"+e.name+(e.opts?t(Cue(e.opts),e.opts):"")+">";break;case"Property":i="<'"+e.name+"'>";break;case"Keyword":i=e.name;break;case"AtKeyword":i="@"+e.name;break;case"Function":i=e.name+"(";break;case"String":case"Token":i=e.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return t(i,e)}function j_(e,t){let n=kue,r=!1,i=!1;return typeof t=="function"?n=t:t&&(r=!!t.forceBraces,i=!!t.compact,typeof t.decorate=="function"&&(n=t.decorate)),vg(e,n,r,i)}const HE={offset:0,line:1,column:1};function Tue(e,t){const n=e.tokens,r=e.longestMatch,i=r<n.length&&n[r].node||null,s=i!==t?i:null;let a=0,o=0,c=0,h="",d,p;for(let m=0;m<n.length;m++){const g=n[m].value;m===r&&(o=g.length,a=h.length),s!==null&&n[m].node===s&&(m<=r?c++:c=0),h+=g}return r===n.length||c>1?(d=Np(s||t,"end")||sd(HE,h),p=sd(d)):(d=Np(s,"start")||sd(Np(t,"start")||HE,h.slice(0,a)),p=Np(s,"end")||sd(d,h.substr(a,o))),{css:h,mismatchOffset:a,mismatchLength:o,start:d,end:p}}function Np(e,t){const n=e&&e.loc&&e.loc[t];return n?"line"in n?sd(n):n:null}function sd({offset:e,line:t,column:n},r){const i={offset:e,line:t,column:n};if(r){const s=r.split(/\n|\r\n?|\f/);i.offset+=r.length,i.line+=s.length-1,i.column=s.length===1?i.column+r.length:s.pop().length+1}return i}const Uh=function(e,t){const n=x0("SyntaxReferenceError",e+(t?" `"+t+"`":""));return n.reference=t,n},jue=function(e,t,n,r){const i=x0("SyntaxMatchError",e),{css:s,mismatchOffset:a,mismatchLength:o,start:c,end:h}=Tue(r,n);return i.rawMessage=e,i.syntax=t?j_(t):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=e+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,c),i.loc={source:n&&n.loc&&n.loc.source||"<unknown>",start:c,end:h},i},Op=new Map,Oc=new Map,xg=45,Qy=Aue,WE=Pue;function A_(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===xg&&e.charCodeAt(t+1)===xg}function BR(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===xg&&e.charCodeAt(t+1)!==xg){const n=e.indexOf("-",t+2);if(n!==-1)return e.substring(t,n+1)}return""}function Aue(e){if(Op.has(e))return Op.get(e);const t=e.toLowerCase();let n=Op.get(t);if(n===void 0){const r=A_(t,0),i=r?"":BR(t,0);n=Object.freeze({basename:t.substr(i.length),name:t,prefix:i,vendor:i,custom:r})}return Op.set(e,n),n}function Pue(e){if(Oc.has(e))return Oc.get(e);let t=e,n=e[0];n==="/"?n=e[1]==="/"?"//":"/":n!=="_"&&n!=="*"&&n!=="$"&&n!=="#"&&n!=="+"&&n!=="&"&&(n="");const r=A_(t,n.length);if(!r&&(t=t.toLowerCase(),Oc.has(t))){const o=Oc.get(t);return Oc.set(e,o),o}const i=r?"":BR(t,n.length),s=t.substr(0,n.length+i.length),a=Object.freeze({basename:t.substr(s.length),name:t.substr(n.length),hack:n,vendor:i,prefix:s,custom:r});return Oc.set(e,a),a}const P_=["initial","inherit","unset","revert","revert-layer"],cf=43,Ga=45,Jy=110,Rc=!0,Nue=!1;function Ex(e,t){return e!==null&&e.type===Dn&&e.value.charCodeAt(0)===t}function Pd(e,t,n){for(;e!==null&&(e.type===Hr||e.type===Ti);)e=n(++t);return t}function Vo(e,t,n,r){if(!e)return 0;const i=e.value.charCodeAt(t);if(i===cf||i===Ga){if(n)return 0;t++}for(;t<e.value.length;t++)if(!Ci(e.value.charCodeAt(t)))return 0;return r+1}function eb(e,t,n){let r=!1,i=Pd(e,t,n);if(e=n(i),e===null)return t;if(e.type!==pn)if(Ex(e,cf)||Ex(e,Ga)){if(r=!0,i=Pd(n(++i),i,n),e=n(i),e===null||e.type!==pn)return 0}else return t;if(!r){const s=e.value.charCodeAt(0);if(s!==cf&&s!==Ga)return 0}return Vo(e,r?0:1,r,i)}function Oue(e,t){let n=0;if(!e)return 0;if(e.type===pn)return Vo(e,0,Nue,n);if(e.type===Ot&&e.value.charCodeAt(0)===Ga){if(!Mu(e.value,1,Jy))return 0;switch(e.value.length){case 2:return eb(t(++n),n,t);case 3:return e.value.charCodeAt(2)!==Ga?0:(n=Pd(t(++n),n,t),e=t(n),Vo(e,0,Rc,n));default:return e.value.charCodeAt(2)!==Ga?0:Vo(e,3,Rc,n)}}else if(e.type===Ot||Ex(e,cf)&&t(n+1).type===Ot){if(e.type!==Ot&&(e=t(++n)),e===null||!Mu(e.value,0,Jy))return 0;switch(e.value.length){case 1:return eb(t(++n),n,t);case 2:return e.value.charCodeAt(1)!==Ga?0:(n=Pd(t(++n),n,t),e=t(n),Vo(e,0,Rc,n));default:return e.value.charCodeAt(1)!==Ga?0:Vo(e,2,Rc,n)}}else if(e.type===On){let r=e.value.charCodeAt(0),i=r===cf||r===Ga?1:0,s=i;for(;s<e.value.length&&Ci(e.value.charCodeAt(s));s++);return s===i||!Mu(e.value,s,Jy)?0:s+1===e.value.length?eb(t(++n),n,t):e.value.charCodeAt(s+1)!==Ga?0:s+2===e.value.length?(n=Pd(t(++n),n,t),e=t(n),Vo(e,0,Rc,n)):Vo(e,s+2,Rc,n)}return 0}const Rue=43,UR=45,HR=63,Mue=117;function Tx(e,t){return e!==null&&e.type===Dn&&e.value.charCodeAt(0)===t}function Lue(e,t){return e.value.charCodeAt(0)===t}function ad(e,t,n){let r=0;for(let i=t;i<e.value.length;i++){const s=e.value.charCodeAt(i);if(s===UR&&n&&r!==0)return ad(e,t+r+1,!1),6;if(!vl(s)||++r>6)return 0}return r}function Rp(e,t,n){if(!e)return 0;for(;Tx(n(t),HR);){if(++e>6)return 0;t++}return t}function Iue(e,t){let n=0;if(e===null||e.type!==Ot||!Mu(e.value,0,Mue)||(e=t(++n),e===null))return 0;if(Tx(e,Rue))return e=t(++n),e===null?0:e.type===Ot?Rp(ad(e,0,!0),++n,t):Tx(e,HR)?Rp(1,++n,t):0;if(e.type===pn){const r=ad(e,1,!0);return r===0?0:(e=t(++n),e===null?n:e.type===On||e.type===pn?!Lue(e,UR)||!ad(e,1,!1)?0:n+1:Rp(r,n,t))}return e.type===On?Rp(ad(e,1,!0),++n,t):0}const $ue=["calc(","-moz-calc(","-webkit-calc("],N_=new Map([[kn,dn],[er,dn],[na,Pa],[Ai,Js]]);function Ca(e,t){return t<e.length?e.charCodeAt(t):0}function WR(e,t){return lf(e,0,e.length,t)}function VR(e,t){for(let n=0;n<t.length;n++)if(WR(e,t[n]))return!0;return!1}function GR(e,t){return t!==e.length-2?!1:Ca(e,t)===92&&Ci(Ca(e,t+1))}function k0(e,t,n){if(e&&e.type==="Range"){const r=Number(n!==void 0&&n!==t.length?t.substr(0,n):t);if(isNaN(r)||e.min!==null&&r<e.min&&typeof e.min!="string"||e.max!==null&&r>e.max&&typeof e.max!="string")return!0}return!1}function Due(e,t){let n=0,r=[],i=0;e:do{switch(e.type){case Js:case dn:case Pa:if(e.type!==n)break e;if(n=r.pop(),r.length===0){i++;break e}break;case kn:case er:case na:case Ai:r.push(n),n=N_.get(e.type);break}i++}while(e=t(i));return i}function Bs(e){return function(t,n,r){return t===null?0:t.type===kn&&VR(t.value,$ue)?Due(t,n):e(t,n,r)}}function wr(e){return function(t){return t===null||t.type!==e?0:1}}function zue(e){if(e===null||e.type!==Ot)return 0;const t=e.value.toLowerCase();return VR(t,P_)||WR(t,"default")?0:1}function qR(e){return e===null||e.type!==Ot||Ca(e.value,0)!==45||Ca(e.value,1)!==45?0:1}function Fue(e){return!qR(e)||e.value==="--"?0:1}function Bue(e){if(e===null||e.type!==kr)return 0;const t=e.value.length;if(t!==4&&t!==5&&t!==7&&t!==9)return 0;for(let n=1;n<t;n++)if(!vl(Ca(e.value,n)))return 0;return 1}function Uue(e){return e===null||e.type!==kr||!hm(Ca(e.value,1),Ca(e.value,2),Ca(e.value,3))?0:1}function Hue(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case y0:case as:break e;case Js:case dn:case Pa:if(e.type!==n)break e;n=r.pop();break;case Ui:if(n===0)break e;break;case Dn:if(n===0&&e.value==="!")break e;break;case kn:case er:case na:case Ai:r.push(n),n=N_.get(e.type);break}i++}while(e=t(i));return i}function Wue(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case y0:case as:break e;case Js:case dn:case Pa:if(e.type!==n)break e;n=r.pop();break;case kn:case er:case na:case Ai:r.push(n),n=N_.get(e.type);break}i++}while(e=t(i));return i}function fo(e){return e&&(e=new Set(e)),function(t,n,r){if(t===null||t.type!==On)return 0;const i=b0(t.value,0);if(e!==null){const s=t.value.indexOf("\\",i),a=s===-1||!GR(t.value,s)?t.value.substr(i):t.value.substring(i,s);if(e.has(a.toLowerCase())===!1)return 0}return k0(r,t.value,i)?0:1}}function Vue(e,t,n){return e===null||e.type!==zr||k0(n,e.value,e.value.length-1)?0:1}function YR(e){return typeof e!="function"&&(e=function(){return 0}),function(t,n,r){return t!==null&&t.type===pn&&Number(t.value)===0?1:e(t,n,r)}}function Gue(e,t,n){if(e===null)return 0;const r=b0(e.value,0);return!(r===e.value.length)&&!GR(e.value,r)||k0(n,e.value,r)?0:1}function que(e,t,n){if(e===null||e.type!==pn)return 0;let r=Ca(e.value,0)===43||Ca(e.value,0)===45?1:0;for(;r<e.value.length;r++)if(!Ci(Ca(e.value,r)))return 0;return k0(n,e.value,r)?0:1}const Yue={"ident-token":wr(Ot),"function-token":wr(kn),"at-keyword-token":wr(ii),"hash-token":wr(kr),"string-token":wr(Ia),"bad-string-token":wr(y0),"url-token":wr($i),"bad-url-token":wr(as),"delim-token":wr(Dn),"number-token":wr(pn),"percentage-token":wr(zr),"dimension-token":wr(On),"whitespace-token":wr(Hr),"CDO-token":wr(Rf),"CDC-token":wr(os),"colon-token":wr(Bi),"semicolon-token":wr(Ui),"comma-token":wr(vs),"[-token":wr(na),"]-token":wr(Pa),"(-token":wr(er),")-token":wr(dn),"{-token":wr(Ai),"}-token":wr(Js)},Xue={string:wr(Ia),ident:wr(Ot),percentage:Bs(Vue),zero:YR(),number:Bs(Gue),integer:Bs(que),"custom-ident":zue,"dashed-ident":qR,"custom-property-name":Fue,"hex-color":Bue,"id-selector":Uue,"an-plus-b":Oue,urange:Iue,"declaration-value":Hue,"any-value":Wue};function Kue(e){const{angle:t,decibel:n,frequency:r,flex:i,length:s,resolution:a,semitones:o,time:c}=e||{};return{dimension:Bs(fo(null)),angle:Bs(fo(t)),decibel:Bs(fo(n)),frequency:Bs(fo(r)),flex:Bs(fo(i)),length:Bs(YR(fo(s))),resolution:Bs(fo(a)),semitones:Bs(fo(o)),time:Bs(fo(c))}}function Zue(e){return{...Yue,...Xue,...Kue(e)}}const Que=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],Jue=["deg","grad","rad","turn"],ehe=["s","ms"],the=["hz","khz"],nhe=["dpi","dpcm","dppx","x"],rhe=["fr"],ihe=["db"],she=["st"],VE=Object.freeze(Object.defineProperty({__proto__:null,angle:Jue,decibel:ihe,flex:rhe,frequency:the,length:Que,resolution:nhe,semitones:she,time:ehe},Symbol.toStringTag,{value:"Module"}));function ahe(e,t,n){return Object.assign(x0("SyntaxError",e),{input:t,offset:n,rawMessage:e,message:e+`
  `+t+`
--`+new Array((n||t.length)+1).join("-")+"^"})}const ohe=9,lhe=10,che=12,uhe=13,hhe=32,GE=new Uint8Array(128).map((e,t)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(t))?1:0);class dhe{constructor(t){this.str=t,this.pos=0}charCodeAt(t){return t<this.str.length?this.str.charCodeAt(t):0}charCode(){return this.charCodeAt(this.pos)}isNameCharCode(t=this.charCode()){return t<128&&GE[t]===1}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(t){return this.charCodeAt(this.findWsEnd(t))}skipWs(){this.pos=this.findWsEnd(this.pos)}findWsEnd(t){for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n!==uhe&&n!==lhe&&n!==che&&n!==hhe&&n!==ohe)break}return t}substringToPos(t){return this.str.substring(this.pos,this.pos=t)}eat(t){this.charCode()!==t&&this.error("Expect `"+String.fromCharCode(t)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(t){throw new ahe(t,this.str,this.pos)}scanSpaces(){return this.substringToPos(this.findWsEnd(this.pos))}scanWord(){let t=this.pos;for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n>=128||GE[n]===0)break}return this.pos===t&&this.error("Expect a keyword"),this.substringToPos(t)}scanNumber(){let t=this.pos;for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n<48||n>57)break}return this.pos===t&&this.error("Expect a number"),this.substringToPos(t)}scanString(){const t=this.str.indexOf("'",this.pos+1);return t===-1&&(this.pos=this.str.length,this.error("Expect an apostrophe")),this.substringToPos(t+1)}}const fhe=9,phe=10,mhe=12,ghe=13,yhe=32,XR=33,O_=35,qE=38,wg=39,KR=40,bhe=41,ZR=42,R_=43,M_=44,YE=45,L_=60,jx=62,Ax=63,vhe=64,uf=91,hf=93,_g=123,XE=124,KE=125,ZE=8734,QE={" ":1,"&&":2,"||":3,"|":4};function JE(e){let t=null,n=null;return e.eat(_g),e.skipWs(),t=e.scanNumber(e),e.skipWs(),e.charCode()===M_?(e.pos++,e.skipWs(),e.charCode()!==KE&&(n=e.scanNumber(e),e.skipWs())):n=t,e.eat(KE),{min:Number(t),max:n?Number(n):0}}function xhe(e){let t=null,n=!1;switch(e.charCode()){case ZR:e.pos++,t={min:0,max:0};break;case R_:e.pos++,t={min:1,max:0};break;case Ax:e.pos++,t={min:0,max:1};break;case O_:e.pos++,n=!0,e.charCode()===_g?t=JE(e):e.charCode()===Ax?(e.pos++,t={min:0,max:0}):t={min:1,max:0};break;case _g:t=JE(e);break;default:return null}return{type:"Multiplier",comma:n,min:t.min,max:t.max,term:null}}function xl(e,t){const n=xhe(e);return n!==null?(n.term=t,e.charCode()===O_&&e.charCodeAt(e.pos-1)===R_?xl(e,n):n):t}function tb(e){const t=e.peek();return t===""?null:xl(e,{type:"Token",value:t})}function whe(e){let t;return e.eat(L_),e.eat(wg),t=e.scanWord(),e.eat(wg),e.eat(jx),xl(e,{type:"Property",name:t})}function _he(e){let t=null,n=null,r=1;return e.eat(uf),e.charCode()===YE&&(e.peek(),r=-1),r==-1&&e.charCode()===ZE?e.peek():(t=r*Number(e.scanNumber(e)),e.isNameCharCode()&&(t+=e.scanWord())),e.skipWs(),e.eat(M_),e.skipWs(),e.charCode()===ZE?e.peek():(r=1,e.charCode()===YE&&(e.peek(),r=-1),n=r*Number(e.scanNumber(e)),e.isNameCharCode()&&(n+=e.scanWord())),e.eat(hf),{type:"Range",min:t,max:n}}function khe(e){let t,n=null;if(e.eat(L_),t=e.scanWord(),t==="boolean-expr"){e.eat(uf);const r=I_(e,hf);return e.eat(hf),e.eat(jx),xl(e,{type:"Boolean",term:r.terms.length===1?r.terms[0]:r})}return e.charCode()===KR&&e.nextCharCode()===bhe&&(e.pos+=2,t+="()"),e.charCodeAt(e.findWsEnd(e.pos))===uf&&(e.skipWs(),n=_he(e)),e.eat(jx),xl(e,{type:"Type",name:t,opts:n})}function She(e){const t=e.scanWord();return e.charCode()===KR?(e.pos++,{type:"Function",name:t}):xl(e,{type:"Keyword",name:t})}function Che(e,t){function n(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let r;for(t=Object.keys(t).sort((i,s)=>QE[i]-QE[s]);t.length>0;){r=t.shift();let i=0,s=0;for(;i<e.length;i++){const a=e[i];a.type==="Combinator"&&(a.value===r?(s===-1&&(s=i-1),e.splice(i,1),i--):(s!==-1&&i-s>1&&(e.splice(s,i-s,n(e.slice(s,i),r)),i=s+1),s=-1))}s!==-1&&t.length&&e.splice(s,i-s,n(e.slice(s,i),r))}return r}function I_(e,t){const n=Object.create(null),r=[];let i,s=null,a=e.pos;for(;e.charCode()!==t&&(i=The(e,t));)i.type!=="Spaces"&&(i.type==="Combinator"?((s===null||s.type==="Combinator")&&(e.pos=a,e.error("Unexpected combinator")),n[i.value]=!0):s!==null&&s.type!=="Combinator"&&(n[" "]=!0,r.push({type:"Combinator",value:" "})),r.push(i),s=i,a=e.pos);return s!==null&&s.type==="Combinator"&&(e.pos-=a,e.error("Unexpected combinator")),{type:"Group",terms:r,combinator:Che(r,n)||" ",disallowEmpty:!1,explicit:!1}}function Ehe(e,t){let n;return e.eat(uf),n=I_(e,t),e.eat(hf),n.explicit=!0,e.charCode()===XR&&(e.pos++,n.disallowEmpty=!0),n}function The(e,t){let n=e.charCode();switch(n){case hf:break;case uf:return xl(e,Ehe(e,t));case L_:return e.nextCharCode()===wg?whe(e):khe(e);case XE:return{type:"Combinator",value:e.substringToPos(e.pos+(e.nextCharCode()===XE?2:1))};case qE:return e.pos++,e.eat(qE),{type:"Combinator",value:"&&"};case M_:return e.pos++,{type:"Comma"};case wg:return xl(e,{type:"String",value:e.scanString()});case yhe:case fhe:case phe:case ghe:case mhe:return{type:"Spaces",value:e.scanSpaces()};case vhe:return n=e.nextCharCode(),e.isNameCharCode(n)?(e.pos++,{type:"AtKeyword",name:e.scanWord()}):tb(e);case ZR:case R_:case Ax:case O_:case XR:break;case _g:if(n=e.nextCharCode(),n<48||n>57)return tb(e);break;default:return e.isNameCharCode(n)?She(e):tb(e)}}function QR(e){const t=new dhe(e),n=I_(t);return t.pos!==e.length&&t.error("Unexpected input"),n.terms.length===1&&n.terms[0].type==="Group"?n.terms[0]:n}const od=function(){};function eT(e){return typeof e=="function"?e:od}function jhe(e,t,n){function r(a){switch(i.call(n,a),a.type){case"Group":a.terms.forEach(r);break;case"Multiplier":case"Boolean":r(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(n,a)}let i=od,s=od;if(typeof t=="function"?i=t:t&&(i=eT(t.enter),s=eT(t.leave)),i===od&&s===od)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");r(e)}const Ahe={decorator(e){const t=[];let n=null;return{...e,node(r){const i=n;n=r,e.node.call(this,r),n=i},emit(r,i,s){t.push({type:i,value:r,node:s?null:n})},result(){return t}}}};function Phe(e){const t=[];return v0(e,(n,r,i)=>t.push({type:n,value:e.slice(r,i),node:null})),t}function Nhe(e,t){return typeof e=="string"?Phe(e):t.generate(e,Ahe)}const Qn={type:"Match"},ur={type:"Mismatch"},$_={type:"DisallowEmpty"},Ohe=40,Rhe=41;function Li(e,t,n){return t===Qn&&n===ur||e===Qn&&t===Qn&&n===Qn?e:(e.type==="If"&&e.else===ur&&t===Qn&&(t=e.then,e=e.match),{type:"If",match:e,then:t,else:n})}function JR(e){return e.length>2&&e.charCodeAt(e.length-2)===Ohe&&e.charCodeAt(e.length-1)===Rhe}function tT(e){return e.type==="Keyword"||e.type==="AtKeyword"||e.type==="Function"||e.type==="Type"&&JR(e.name)}function Bo(e,t=" ",n=!1){return{type:"Group",terms:e,combinator:t,disallowEmpty:!1,explicit:n}}function Nd(e,t,n=new Set){if(!n.has(e))switch(n.add(e),e.type){case"If":e.match=Nd(e.match,t,n),e.then=Nd(e.then,t,n),e.else=Nd(e.else,t,n);break;case"Type":return t[e.name]||e}return e}function Px(e,t,n){switch(e){case" ":{let r=Qn;for(let i=t.length-1;i>=0;i--){const s=t[i];r=Li(s,r,ur)}return r}case"|":{let r=ur,i=null;for(let s=t.length-1;s>=0;s--){let a=t[s];if(tT(a)&&(i===null&&s>0&&tT(t[s-1])&&(i=Object.create(null),r=Li({type:"Enum",map:i},Qn,r)),i!==null)){const o=(JR(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,r=Li(a,Qn,r)}return r}case"&&":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!0};let r=ur;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Px(e,t.filter(function(o){return o!==s}),!1):a=Qn,r=Li(s,a,r)}return r}case"||":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!1};let r=n?Qn:ur;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Px(e,t.filter(function(o){return o!==s}),!0):a=Qn,r=Li(s,a,r)}return r}}}function Mhe(e){let t=Qn,n=_u(e.term);if(e.max===0)n=Li(n,$_,ur),t=Li(n,null,ur),t.then=Li(Qn,Qn,t),e.comma&&(t.then.else=Li({type:"Comma",syntax:e},t,ur));else for(let r=e.min||1;r<=e.max;r++)e.comma&&t!==Qn&&(t=Li({type:"Comma",syntax:e},t,ur)),t=Li(n,Li(Qn,Qn,t),ur);if(e.min===0)t=Li(Qn,Qn,t);else for(let r=0;r<e.min-1;r++)e.comma&&t!==Qn&&(t=Li({type:"Comma",syntax:e},t,ur)),t=Li(n,t,ur);return t}function _u(e){if(typeof e=="function")return{type:"Generic",fn:e};switch(e.type){case"Group":{let t=Px(e.combinator,e.terms.map(_u),!1);return e.disallowEmpty&&(t=Li(t,$_,ur)),t}case"Multiplier":return Mhe(e);case"Boolean":{const t=_u(e.term),n=_u(Bo([Bo([{type:"Keyword",name:"not"},{type:"Type",name:"!boolean-group"}]),Bo([{type:"Type",name:"!boolean-group"},Bo([{type:"Multiplier",comma:!1,min:0,max:0,term:Bo([{type:"Keyword",name:"and"},{type:"Type",name:"!boolean-group"}])},{type:"Multiplier",comma:!1,min:0,max:0,term:Bo([{type:"Keyword",name:"or"},{type:"Type",name:"!boolean-group"}])}],"|")])],"|")),r=_u(Bo([{type:"Type",name:"!term"},Bo([{type:"Token",value:"("},{type:"Type",name:"!self"},{type:"Token",value:")"}]),{type:"Type",name:"general-enclosed"}],"|"));return Nd(r,{"!term":t,"!self":n}),Nd(n,{"!boolean-group":r}),n}case"Type":case"Property":return{type:e.type,name:e.name,syntax:e};case"Keyword":return{type:e.type,name:e.name.toLowerCase(),syntax:e};case"AtKeyword":return{type:e.type,name:"@"+e.name.toLowerCase(),syntax:e};case"Function":return{type:e.type,name:e.name.toLowerCase()+"(",syntax:e};case"String":return e.value.length===3?{type:"Token",value:e.value.charAt(1),syntax:e}:{type:e.type,value:e.value.substr(1,e.value.length-2).replace(/\\'/g,"'"),syntax:e};case"Token":return{type:e.type,value:e.value,syntax:e};case"Comma":return{type:e.type,syntax:e};default:throw new Error("Unknown node type:",e.type)}}function Mp(e,t){return typeof e=="string"&&(e=QR(e)),{type:"MatchGraph",match:_u(e),syntax:t||null,source:e}}const{hasOwnProperty:nT}=Object.prototype,Lhe=0,Ihe=1,Nx=2,eM=3,rT="Match",$he="Mismatch",Dhe="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",iT=15e3;function zhe(e){let t=null,n=null,r=e;for(;r!==null;)n=r.prev,r.prev=t,t=r,r=n;return t}function nb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=t.charCodeAt(n);let i=e.charCodeAt(n);if(i>=65&&i<=90&&(i=i|32),i!==r)return!1}return!0}function Fhe(e){return e.type!==Dn?!1:e.value!=="?"}function sT(e){return e===null?!0:e.type===vs||e.type===kn||e.type===er||e.type===na||e.type===Ai||Fhe(e)}function aT(e){return e===null?!0:e.type===dn||e.type===Pa||e.type===Js||e.type===Dn&&e.value==="/"}function Bhe(e,t,n){function r(){do k++,x=k<e.length?e[k]:null;while(x!==null&&(x.type===Hr||x.type===Ti))}function i(M){const S=k+M;return S<e.length?e[S]:null}function s(M,S){return{nextState:M,matchStack:j,syntaxStack:p,thenStack:m,tokenIndex:k,prev:S}}function a(M){m={nextState:M,matchStack:j,syntaxStack:p,prev:m}}function o(M){g=s(M,g)}function c(){j={type:Ihe,syntax:t.syntax,token:x,prev:j},r(),v=null,k>P&&(P=k)}function h(){p={syntax:t.syntax,opts:t.syntax.opts||p!==null&&p.opts||null,prev:p},j={type:Nx,syntax:t.syntax,token:j.token,prev:j}}function d(){j.type===Nx?j=j.prev:j={type:eM,syntax:p.syntax,token:j.token,prev:j},p=p.prev}let p=null,m=null,g=null,v=null,w=0,C=null,x=null,k=-1,P=0,j={type:Lhe,syntax:null,token:null,prev:null};for(r();C===null&&++w<iT;)switch(t.type){case"Match":if(m===null){if(x!==null&&(k!==e.length-1||x.value!=="\\0"&&x.value!=="\\9")){t=ur;break}C=rT;break}if(t=m.nextState,t===$_)if(m.matchStack===j){t=ur;break}else t=Qn;for(;m.syntaxStack!==p;)d();m=m.prev;break;case"Mismatch":if(v!==null&&v!==!1)(g===null||k>g.tokenIndex)&&(g=v,v=!1);else if(g===null){C=$he;break}t=g.nextState,m=g.thenStack,p=g.syntaxStack,j=g.matchStack,k=g.tokenIndex,x=k<e.length?e[k]:null,g=g.prev;break;case"MatchGraph":t=t.match;break;case"If":t.else!==ur&&o(t.else),t.then!==Qn&&a(t.then),t=t.match;break;case"MatchOnce":t={type:"MatchOnceBuffer",syntax:t,index:0,mask:0};break;case"MatchOnceBuffer":{const B=t.syntax.terms;if(t.index===B.length){if(t.mask===0||t.syntax.all){t=ur;break}t=Qn;break}if(t.mask===(1<<B.length)-1){t=Qn;break}for(;t.index<B.length;t.index++){const D=1<<t.index;if(!(t.mask&D)){o(t),a({type:"AddMatchOnce",syntax:t.syntax,mask:t.mask|D}),t=B[t.index++];break}}break}case"AddMatchOnce":t={type:"MatchOnceBuffer",syntax:t.syntax,index:0,mask:t.mask};break;case"Enum":if(x!==null){let B=x.value.toLowerCase();if(B.indexOf("\\")!==-1&&(B=B.replace(/\\[09].*$/,"")),nT.call(t.map,B)){t=t.map[B];break}}t=ur;break;case"Generic":{const B=p!==null?p.opts:null,D=k+Math.floor(t.fn(x,i,B));if(!isNaN(D)&&D>k){for(;k<D;)c();t=Qn}else t=ur;break}case"Type":case"Property":{const B=t.type==="Type"?"types":"properties",D=nT.call(n,B)?n[B][t.name]:null;if(!D||!D.match)throw new Error("Bad syntax reference: "+(t.type==="Type"?"<"+t.name+">":"<'"+t.name+"'>"));if(v!==!1&&x!==null&&t.type==="Type"&&(t.name==="custom-ident"&&x.type===Ot||t.name==="length"&&x.value==="0")){v===null&&(v=s(t,g)),t=ur;break}h(),t=D.matchRef||D.match;break}case"Keyword":{const B=t.name;if(x!==null){let D=x.value;if(D.indexOf("\\")!==-1&&(D=D.replace(/\\[09].*$/,"")),nb(D,B)){c(),t=Qn;break}}t=ur;break}case"AtKeyword":case"Function":if(x!==null&&nb(x.value,t.name)){c(),t=Qn;break}t=ur;break;case"Token":if(x!==null&&x.value===t.value){c(),t=Qn;break}t=ur;break;case"Comma":x!==null&&x.type===vs?sT(j.token)?t=ur:(c(),t=aT(x)?ur:Qn):t=sT(j.token)||aT(x)?Qn:ur;break;case"String":let M="",S=k;for(;S<e.length&&M.length<t.value.length;S++)M+=e[S].value;if(nb(M,t.value)){for(;k<S;)c();t=Qn}else t=ur;break;default:throw new Error("Unknown node type: "+t.type)}switch(C){case null:console.warn("[csstree-match] BREAK after "+iT+" iterations"),C=Dhe,j=null;break;case rT:for(;p!==null;)d();break;default:j=null}return{tokens:e,reason:C,iterations:w,match:j,longestMatch:P}}function oT(e,t,n){const r=Bhe(e,t,n||{});if(r.match===null)return r;let i=r.match,s=r.match={syntax:t.syntax||null,match:[]};const a=[s];for(i=zhe(i).prev;i!==null;){switch(i.type){case Nx:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case eM:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return r}function tM(e){function t(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function n(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(n(i.match[s]))return t(i.syntax)&&r.unshift(i.syntax),!0}else if(i.node===e)return r=t(i.syntax)?[i.syntax]:[],!0;return!1}let r=null;return this.matched!==null&&n(this.matched),r}function Uhe(e,t){return D_(this,e,n=>n.type==="Type"&&n.name===t)}function Hhe(e,t){return D_(this,e,n=>n.type==="Property"&&n.name===t)}function Whe(e){return D_(this,e,t=>t.type==="Keyword")}function D_(e,t,n){const r=tM.call(e,t);return r===null?!1:r.some(n)}const Vhe=Object.freeze(Object.defineProperty({__proto__:null,getTrace:tM,isKeyword:Whe,isProperty:Hhe,isType:Uhe},Symbol.toStringTag,{value:"Module"}));function nM(e){return"node"in e?e.node:nM(e.match[0])}function rM(e){return"node"in e?e.node:rM(e.match[e.match.length-1])}function lT(e,t,n,r,i){function s(o){if(o.syntax!==null&&o.syntax.type===r&&o.syntax.name===i){const c=nM(o),h=rM(o);e.syntax.walk(t,function(d,p,m){if(d===c){const g=new ko;do{if(g.appendData(p.data),p.data===h)break;p=p.next}while(p!==null);a.push({parent:m,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return n.matched!==null&&s(n.matched),a}const{hasOwnProperty:Od}=Object.prototype;function rb(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&e>=0}function cT(e){return!!e&&rb(e.offset)&&rb(e.line)&&rb(e.column)}function Ghe(e,t){return function(r,i){if(!r||r.constructor!==Object)return i(r,"Type of node should be an Object");for(let s in r){let a=!0;if(Od.call(r,s)!==!1){if(s==="type")r.type!==e&&i(r,"Wrong node type `"+r.type+"`, expected `"+e+"`");else if(s==="loc"){if(r.loc===null)continue;if(r.loc&&r.loc.constructor===Object)if(typeof r.loc.source!="string")s+=".source";else if(!cT(r.loc.start))s+=".start";else if(!cT(r.loc.end))s+=".end";else continue;a=!1}else if(t.hasOwnProperty(s)){a=!1;for(let o=0;!a&&o<t[s].length;o++){const c=t[s][o];switch(c){case String:a=typeof r[s]=="string";break;case Boolean:a=typeof r[s]=="boolean";break;case null:a=r[s]===null;break;default:typeof c=="string"?a=r[s]&&r[s].type===c:Array.isArray(c)&&(a=r[s]instanceof ko)}}}else i(r,"Unknown field `"+s+"` for "+e+" node type");a||i(r,"Bad value for `"+e+"."+s+"`")}}for(const s in t)Od.call(t,s)&&Od.call(r,s)===!1&&i(r,"Field `"+e+"."+s+"` is missed")}}function iM(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i===String||i===Boolean)n.push(i.name.toLowerCase());else if(i===null)n.push("null");else if(typeof i=="string")n.push(i);else if(Array.isArray(i))n.push("List<"+(iM(i,t)||"any")+">");else throw new Error("Wrong value `"+i+"` in `"+t+"` structure definition")}return n.join(" | ")}function qhe(e,t){const n=t.structure,r={type:String,loc:!0},i={type:'"'+e+'"'};for(const s in n){if(Od.call(n,s)===!1)continue;const a=r[s]=Array.isArray(n[s])?n[s].slice():[n[s]];i[s]=iM(a,e+"."+s)}return{docs:i,check:Ghe(e,r)}}function Yhe(e){const t={};if(e.node){for(const n in e.node)if(Od.call(e.node,n)){const r=e.node[n];if(r.structure)t[n]=qhe(n,r);else throw new Error("Missed `structure` field in `"+n+"` node type definition")}}return t}function Ox(e,t,n){const r={};for(const i in e)e[i].syntax&&(r[i]=n?e[i].syntax:j_(e[i].syntax,{compact:t}));return r}function Xhe(e,t,n){const r={};for(const[i,s]of Object.entries(e))r[i]={prelude:s.prelude&&(n?s.prelude.syntax:j_(s.prelude.syntax,{compact:t})),descriptors:s.descriptors&&Ox(s.descriptors,t,n)};return r}function Khe(e){for(let t=0;t<e.length;t++)if(e[t].value.toLowerCase()==="var(")return!0;return!1}function Zhe(e){const t=e.terms[0];return e.explicit===!1&&e.terms.length===1&&t.type==="Multiplier"&&t.comma===!0}function ma(e,t,n){return{matched:e,iterations:n,error:t,...Vhe}}function Mc(e,t,n,r){const i=Nhe(n,e.syntax);let s;return Khe(i)?ma(null,new Error("Matching for a tree with var() is not supported")):(r&&(s=oT(i,e.cssWideKeywordsSyntax,e)),(!r||!s.match)&&(s=oT(i,t.match,e),!s.match)?ma(null,new jue(s.reason,t.syntax,n,s),s.iterations):ma(s.match,null,s.iterations))}let uT=class{constructor(t,n,r){if(this.cssWideKeywords=P_,this.syntax=n,this.generic=!1,this.units={...VE},this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=r||Yhe(t),t){if(t.cssWideKeywords&&(this.cssWideKeywords=t.cssWideKeywords),t.units)for(const i of Object.keys(VE))Array.isArray(t.units[i])&&(this.units[i]=t.units[i]);if(t.types)for(const[i,s]of Object.entries(t.types))this.addType_(i,s);if(t.generic){this.generic=!0;for(const[i,s]of Object.entries(Zue(this.units)))this.addType_(i,s)}if(t.atrules)for(const[i,s]of Object.entries(t.atrules))this.addAtrule_(i,s);if(t.properties)for(const[i,s]of Object.entries(t.properties))this.addProperty_(i,s)}this.cssWideKeywordsSyntax=Mp(this.cssWideKeywords.join(" |  "))}checkStructure(t){function n(s,a){i.push({node:s,message:a})}const r=this.structure,i=[];return this.syntax.walk(t,function(s){r.hasOwnProperty(s.type)?r[s.type].check(s,n):n(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(t,n,r,i=null){const s={type:n,name:r},a={type:n,name:r,parent:i,serializable:typeof t=="string"||t&&typeof t.type=="string",syntax:null,match:null,matchRef:null};return typeof t=="function"?a.match=Mp(t,s):(typeof t=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:QR(t)}),a.syntax}}):a.syntax=t,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:Mp(a.syntax,s)}),a.match}}),n==="Property"&&Object.defineProperty(a,"matchRef",{get(){const o=a.syntax,c=Zhe(o)?Mp({...o,terms:[o.terms[0].term]},s):null;return Object.defineProperty(a,"matchRef",{value:c}),c}})),a}addAtrule_(t,n){n&&(this.atrules[t]={type:"Atrule",name:t,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",t):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((r,i)=>(r[i]=this.createDescriptor(n.descriptors[i],"AtruleDescriptor",i,t),r),Object.create(null)):null})}addProperty_(t,n){n&&(this.properties[t]=this.createDescriptor(n,"Property",t))}addType_(t,n){n&&(this.types[t]=this.createDescriptor(n,"Type",t))}checkAtruleName(t){if(!this.getAtrule(t))return new Uh("Unknown at-rule","@"+t)}checkAtrulePrelude(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t);if(!i.prelude&&n)return new SyntaxError("At-rule `@"+t+"` should not contain a prelude");if(i.prelude&&!n&&!Mc(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+t+"` should contain a prelude")}checkAtruleDescriptorName(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t),s=Qy(n);if(!i.descriptors)return new SyntaxError("At-rule `@"+t+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new Uh("Unknown at-rule descriptor",n)}checkPropertyName(t){if(!this.getProperty(t))return new Uh("Unknown property",t)}matchAtrulePrelude(t,n){const r=this.checkAtrulePrelude(t,n);if(r)return ma(null,r);const i=this.getAtrule(t);return i.prelude?Mc(this,i.prelude,n||"",!1):ma(null,null)}matchAtruleDescriptor(t,n,r){const i=this.checkAtruleDescriptorName(t,n);if(i)return ma(null,i);const s=this.getAtrule(t),a=Qy(n);return Mc(this,s.descriptors[a.name]||s.descriptors[a.basename],r,!1)}matchDeclaration(t){return t.type!=="Declaration"?ma(null,new Error("Not a Declaration node")):this.matchProperty(t.property,t.value)}matchProperty(t,n){if(WE(t).custom)return ma(null,new Error("Lexer matching doesn't applicable for custom properties"));const r=this.checkPropertyName(t);return r?ma(null,r):Mc(this,this.getProperty(t),n,!0)}matchType(t,n){const r=this.getType(t);return r?Mc(this,r,n,!1):ma(null,new Uh("Unknown type",t))}match(t,n){return typeof t!="string"&&(!t||!t.type)?ma(null,new Uh("Bad syntax")):((typeof t=="string"||!t.match)&&(t=this.createDescriptor(t,"Type","anonymous")),Mc(this,t,n,!1))}findValueFragments(t,n,r,i){return lT(this,n,this.matchProperty(t,n),r,i)}findDeclarationValueFragments(t,n,r){return lT(this,t.value,this.matchDeclaration(t),n,r)}findAllFragments(t,n,r){const i=[];return this.syntax.walk(t,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,n,r))}}),i}getAtrule(t,n=!0){const r=Qy(t);return(r.vendor&&n?this.atrules[r.name]||this.atrules[r.basename]:this.atrules[r.name])||null}getAtrulePrelude(t,n=!0){const r=this.getAtrule(t,n);return r&&r.prelude||null}getAtruleDescriptor(t,n){return this.atrules.hasOwnProperty(t)&&this.atrules.declarators&&this.atrules[t].declarators[n]||null}getProperty(t,n=!0){const r=WE(t);return(r.vendor&&n?this.properties[r.name]||this.properties[r.basename]:this.properties[r.name])||null}getType(t){return hasOwnProperty.call(this.types,t)?this.types[t]:null}validate(){function t(c,h){return h?`<${c}>`:`<'${c}'>`}function n(c,h,d,p){if(d.has(h))return d.get(h);d.set(h,!1),p.syntax!==null&&jhe(p.syntax,function(m){if(m.type!=="Type"&&m.type!=="Property")return;const g=m.type==="Type"?c.types:c.properties,v=m.type==="Type"?i:s;hasOwnProperty.call(g,m.name)?n(c,m.name,v,g[m.name])&&(r.push(`${t(h,d===i)} used broken syntax definition ${t(m.name,m.type==="Type")}`),d.set(h,!0)):(r.push(`${t(h,d===i)} used missed syntax definition ${t(m.name,m.type==="Type")}`),d.set(h,!0))},this)}const r=[];let i=new Map,s=new Map;for(const c in this.types)n(this,c,i,this.types[c]);for(const c in this.properties)n(this,c,s,this.properties[c]);const a=[...i.keys()].filter(c=>i.get(c)),o=[...s.keys()].filter(c=>s.get(c));return a.length||o.length?{errors:r,types:a,properties:o}:null}dump(t,n){return{generic:this.generic,cssWideKeywords:this.cssWideKeywords,units:this.units,types:Ox(this.types,!n,t),properties:Ox(this.properties,!n,t),atrules:Xhe(this.atrules,!n,t)}}toString(){return JSON.stringify(this.dump())}};function ib(e,t){return typeof t=="string"&&/^\s*\|/.test(t)?typeof e=="string"?e+t:t.replace(/^\s*\|\s*/,""):t||null}function hT(e,t){const n=Object.create(null);for(const[r,i]of Object.entries(e))if(i){n[r]={};for(const s of Object.keys(i))t.includes(s)&&(n[r][s]=i[s])}return n}function Rx(e,t){const n={...e};for(const[r,i]of Object.entries(t))switch(r){case"generic":n[r]=!!i;break;case"cssWideKeywords":n[r]=e[r]?[...e[r],...i]:i||[];break;case"units":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]=Array.isArray(a)?a:[];break;case"atrules":n[r]={...e[r]};for(const[s,a]of Object.entries(i)){const o=n[r][s]||{},c=n[r][s]={prelude:o.prelude||null,descriptors:{...o.descriptors}};if(a){c.prelude=a.prelude?ib(c.prelude,a.prelude):c.prelude||null;for(const[h,d]of Object.entries(a.descriptors||{}))c.descriptors[h]=d?ib(c.descriptors[h],d):null;Object.keys(c.descriptors).length||(c.descriptors=null)}}break;case"types":case"properties":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]=ib(n[r][s],a);break;case"scope":case"features":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]={...n[r][s],...a};break;case"parseContext":n[r]={...e[r],...i};break;case"atrule":case"pseudo":n[r]={...e[r],...hT(i,["parse"])};break;case"node":n[r]={...e[r],...hT(i,["name","structure","parse","generate","walkContext"])};break}return n}function sM(e){const t=sue(e),n=_ue(e),r=bue(e),{fromPlainObject:i,toPlainObject:s}=vue(n),a={lexer:null,createLexer:o=>new uT(o,a,a.lexer.structure),tokenize:v0,parse:t,generate:r,walk:n,find:n.find,findLast:n.findLast,findAll:n.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const c=Rx({},e);return sM(typeof o=="function"?o(c):Rx(c,o))}};return a.lexer=new uT({generic:e.generic,cssWideKeywords:e.cssWideKeywords,units:e.units,types:e.types,atrules:e.atrules,properties:e.properties,node:e.node},a),a}const Qhe=e=>sM(Rx({},e)),Jhe={generic:!0,cssWideKeywords:["initial","inherit","unset","revert","revert-layer"],units:{angle:["deg","grad","rad","turn"],decibel:["db"],flex:["fr"],frequency:["hz","khz"],length:["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],resolution:["dpi","dpcm","dppx","x"],semitones:["st"],time:["s","ms"]},types:{"abs()":"abs( <calc-sum> )","absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","acos()":"acos( <calc-sum> )","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>","asin()":"asin( <calc-sum> )","atan()":"atan( <calc-sum> )","atan2()":"atan2( <calc-sum> , <calc-sum> )",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?",axis:"block|inline|x|y","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<xywh()>|<rect()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )","calc-constant":"e|pi|infinity|-infinity|NaN","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<color-base>|currentColor|<system-color>|<device-cmyk()>|<light-dark()>|<-non-standard-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>","color-interpolation-method":"in [<rectangular-color-space>|<polar-color-space> <hue-interpolation-method>?|<custom-color-space>]",combinator:"'>'|'+'|'~'|['|' '|']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<complex-selector-unit> [<combinator>? <complex-selector-unit>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )","cos()":"cos( <calc-sum> )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","exp()":"exp( <calc-sum> )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value>? )]|[( <any-value>? )]","generic-family":"<generic-script-specific>|<generic-complete>|<generic-incomplete>|<-non-standard-generic-family>","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hue-interpolation-method":"[shorter|longer|increasing|decreasing] hue","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )","hypot()":"hypot( <calc-sum># )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length-percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>|<timeline-range-name> <percentage>","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","light-dark()":"light-dark( <color> , <color> )","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [[<angle>|to <side-or-corner>]||<color-interpolation-method>]? , <color-stop-list> )","log()":"log( <calc-sum> , <calc-sum>? )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )","mod()":"mod( <calc-sum> , <calc-sum> )","name-repeat":"repeat( [<integer [1,]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( [<length [0,]>|none] )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )","polar-color-space":"hsl|hwb|lch|oklch",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pow()":"pow( <calc-sum> , <calc-sum> )","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>|<legacy-pseudo-element-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )",ratio:"<number [0,]> [/ <number [0,]>]?","ray()":"ray( <angle>&&<ray-size>?&&contain?&&[at <position>]? )","ray-size":"closest-side|closest-corner|farthest-side|farthest-corner|sides","rectangular-color-space":"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|lab|oklab|xyz|xyz-d50|xyz-d65","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","rem()":"rem( <calc-sum> , <calc-sum> )","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","reversed-counter-name":"reversed( <counter-name> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","round()":"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )","rounding-strategy":"nearest|up|down|to-zero","saturate()":"saturate( <number-percentage> )","scale()":"scale( [<number>|<percentage>]#{1,2} )","scale3d()":"scale3d( [<number>|<percentage>]#{3} )","scaleX()":"scaleX( [<number>|<percentage>] )","scaleY()":"scaleY( [<number>|<percentage>] )","scaleZ()":"scaleZ( [<number>|<percentage>] )","scroll()":"scroll( [<axis>||<scroller>]? )",scroller:"root|nearest|self","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","sign()":"sign( <calc-sum> )","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","sin()":"sin( <calc-sum> )","single-animation":"<'animation-duration'>||<easing-function>||<'animation-delay'>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]||<single-animation-timeline>","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<dashed-ident>|<scroll()>|<view()>","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>||<transition-behavior-value>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","sqrt()":"sqrt( <calc-sum> )","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>","system-color":"AccentColor|AccentColorText|ActiveText|ButtonBorder|ButtonFace|ButtonText|Canvas|CanvasText|Field|FieldText|GrayText|Highlight|HighlightText|LinkText|Mark|MarkText|SelectedItem|SelectedItemText|VisitedText","tan()":"tan( <calc-sum> )",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-range-name":"cover|contain|entry|exit|entry-crossing|exit-crossing","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","transition-behavior-value":"normal|allow-discrete","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","view()":"view( [<axis>||<'view-timeline-inset'>]? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"overlay|-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-size":"intrinsic|min-intrinsic|-webkit-fill-available|-webkit-fit-content|-webkit-min-content|-webkit-max-content|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","absolute-color-base":"<hex-color>|<absolute-color-function>|<named-color>|transparent","absolute-color-function":"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>",age:"child|young|old","anchor-name":"<dashed-ident>","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text",bottom:"<length>|auto","container-name":"<custom-ident>","container-condition":"not <query-in-parens>|<query-in-parens> [[and <query-in-parens>]*|[or <query-in-parens>]*]","coord-box":"content-box|padding-box|border-box|fill-box|stroke-box|view-box","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral","generic-script-specific":"generic( kai )|generic( fangsong )|generic( nastaliq )","generic-complete":"serif|sans-serif|system-ui|cursive|fantasy|math|monospace","generic-incomplete":"ui-serif|ui-sans-serif|ui-monospace|ui-rounded","-non-standard-generic-family":"-apple-system|BlinkMacSystemFont",left:"<length>|auto","color-base":"<hex-color>|<color-function>|<named-color>|<color-mix()>|transparent","color-function":"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>","device-cmyk()":"<legacy-device-cmyk-syntax>|<modern-device-cmyk-syntax>","legacy-device-cmyk-syntax":"device-cmyk( <number>#{4} )","modern-device-cmyk-syntax":"device-cmyk( <cmyk-component>{4} [/ [<alpha-value>|none]]? )","cmyk-component":"<number>|<percentage>|none","color-mix()":"color-mix( <color-interpolation-method> , [<color>&&<percentage [0,100]>?]#{2} )","color-space":"<rectangular-color-space>|<polar-color-space>|<custom-color-space>","custom-color-space":"<dashed-ident>",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke","palette-identifier":"<dashed-ident>",right:"<length>|auto","scope-start":"<forgiving-selector-list>","scope-end":"<forgiving-selector-list>","forgiving-selector-list":"<complex-real-selector-list>","forgiving-relative-selector-list":"<relative-real-selector-list>","selector-list":"<complex-selector-list>","complex-real-selector-list":"<complex-real-selector>#","simple-selector-list":"<simple-selector>#","relative-real-selector-list":"<relative-real-selector>#","complex-selector-unit":"[<compound-selector>? <pseudo-compound-selector>*]!","complex-real-selector":"<compound-selector> [<combinator>? <compound-selector>]*","relative-real-selector":"<combinator>? <complex-real-selector>","pseudo-compound-selector":"<pseudo-element-selector> <pseudo-class-selector>*","simple-selector":"<type-selector>|<subclass-selector>","legacy-pseudo-element-selector":"':' [before|after|first-line|first-letter]","single-animation-composition":"replace|add|accumulate","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,]>","color()":"color( <colorspace-params> [/ [<alpha-value>|none]]? )","colorspace-params":"[<predefined-rgb-params>|<xyz-params>]","predefined-rgb-params":"<predefined-rgb> [<number>|<percentage>|none]{3}","predefined-rgb":"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020","xyz-params":"<xyz-space> [<number>|<percentage>|none]{3}","xyz-space":"xyz|xyz-d50|xyz-d65","oklab()":"oklab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","oklch()":"oklch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","offset-path":"<ray()>|<url>|<basic-shape>","rect()":"rect( [<length-percentage>|auto]{4} [round <'border-radius'>]? )","xywh()":"xywh( <length-percentage>{2} <length-percentage [0,]>{2} [round <'border-radius'>]? )","query-in-parens":"( <container-condition> )|( <size-feature> )|style( <style-query> )|<general-enclosed>","size-feature":"<mf-plain>|<mf-boolean>|<mf-range>","style-feature":"<declaration>","style-query":"<style-condition>|<style-feature>","style-condition":"not <style-in-parens>|<style-in-parens> [[and <style-in-parens>]*|[or <style-in-parens>]*]","style-in-parens":"( <style-condition> )|( <style-feature> )|<general-enclosed>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box","inset-area":"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]","position-area":"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|center|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|center|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]","anchor()":"anchor( <anchor-element>?&&<anchor-side> , <length-percentage>? )","anchor-side":"inside|outside|top|left|right|bottom|start|end|self-start|self-end|<percentage>|center","anchor-size()":"anchor-size( [<anchor-element>||<anchor-size>]? , <length-percentage>? )","anchor-size":"width|height|block|inline|self-block|self-inline","anchor-element":"<dashed-ident>","try-size":"most-width|most-height|most-block-size|most-inline-size","try-tactic":"flip-block||flip-inline||flip-start","font-variant-css2":"normal|small-caps","font-width-css3":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded","system-family-name":"caption|icon|menu|message-box|small-caption|status-bar"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer","anchor-name":"none|<dashed-ident>#","anchor-scope":"none|all|<dashed-ident>#",animation:"<single-animation>#","animation-composition":"<single-animation-composition>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-range":"[<'animation-range-start'> <'animation-range-end'>?]#","animation-range-end":"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#","animation-range-start":"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto||<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end",caret:"<'caret-color'>||<'caret-shape'>","caret-color":"auto|<color>","caret-shape":"auto|bar|block|underscore",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none","clip-rule":"nonzero|evenodd",color:"<color>","color-interpolation-filters":"auto|sRGB|linearRGB","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[[size||inline-size]||layout||style||paint]","contain-intrinsic-size":"[auto? [none|<length>]]{1,2}","contain-intrinsic-block-size":"auto? [none|<length>]","contain-intrinsic-height":"auto? [none|<length>]","contain-intrinsic-inline-size":"auto? [none|<length>]","contain-intrinsic-width":"auto? [none|<length>]",container:"<'container-name'> [/ <'container-type'>]?","container-name":"none|<custom-ident>+","container-type":"normal||[size|inline-size]",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",d:"none|path( <string> )",cx:"<length>|<percentage>",cy:"<length>|<percentage>",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge","empty-cells":"show|hide","field-sizing":"content|fixed",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css2>||<'font-weight'>||<font-width-css3>]? <'font-size'> [/ <'line-height'>]? <'font-family'>#]|<system-family-name>|<-non-standard-font>","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-palette":"normal|light|dark|<palette-identifier>","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps||position]","font-synthesis-position":"auto|none","font-synthesis-small-caps":"auto|none","font-synthesis-style":"auto|none","font-synthesis-weight":"auto|none","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-emoji":"normal|text|emoji|unicode","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none|preserve-parent-color",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","hyphenate-character":"auto|<string>","hyphenate-limit-chars":"[auto|<integer>]{1,3}",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>","interpolate-size":"numeric-only|allow-keywords",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-depth":"auto-add|add( <integer> )|<integer>","math-shift":"normal|compact","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|<offset-path>||<coord-box>","offset-position":"normal|auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-width'>||<'outline-style'>||<'outline-color'>]","outline-color":"auto|<color>","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto",overlay:"none|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>",page:"auto|<custom-ident>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky","position-anchor":"auto|<anchor-name>","position-area":"none|<position-area>","position-try":"<'position-try-order'>? <'position-try-fallbacks'>","position-try-fallbacks":"none|[[<dashed-ident>||<try-tactic>]|<'position-area'>]#","position-try-order":"normal|<try-size>","position-visibility":"always|[anchors-valid||anchors-visible||no-overflow]","print-color-adjust":"economy|exact",quotes:"none|auto|[<string> <string>]+",r:"<length>|<percentage>",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",rx:"<length>|<percentage>",ry:"<length>|<percentage>",scale:"none|[<number>|<percentage>]{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","scroll-timeline":"[<'scroll-timeline-name'>||<'scroll-timeline-axis'>]#","scroll-timeline-axis":"[block|inline|x|y]#","scroll-timeline-name":"[none|<dashed-ident>]#","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<'opacity'>","stroke-width":"<svg-length>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-anchor":"start|middle|end","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"auto|[over|under]&&[right|left]?","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-spacing-trim":"space-all|normal|space-first|trim-start|trim-both|trim-all|auto","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]","text-wrap":"<'text-wrap-mode'>||<'text-wrap-style'>","text-wrap-mode":"auto|wrap|nowrap","text-wrap-style":"auto|balance|stable|pretty","timeline-scope":"none|<dashed-ident>#",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-behavior":"<transition-behavior-value>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vector-effect":"none|non-scaling-stroke|non-scaling-size|non-rotation|fixed-position","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>","view-timeline":"[<'view-timeline-name'> <'view-timeline-axis'>?]#","view-timeline-axis":"[block|inline|x|y]#","view-timeline-inset":"[[auto|<length-percentage>]{1,2}]#","view-timeline-name":"none|<dashed-ident>#","view-transition-name":"none|<custom-ident>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces|[<'white-space-collapse'>||<'text-wrap'>||<'white-space-trim'>]","white-space-collapse":"collapse|discard|preserve|preserve-breaks|preserve-spaces|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word|auto-phrase","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>",x:"<length>|<percentage>",y:"<length>|<percentage>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|never|always","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]","white-space-trim":"none|discard-before||discard-after||discard-inner"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-palette-values":{prelude:"<dashed-ident>",descriptors:{"base-palette":"light|dark|<integer [0,]>","font-family":"<family-name>#","override-colors":"[<integer [0,]> <absolute-color-base>]#"}},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]","page-orientation":"upright|rotate-left|rotate-right",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},"position-try":{prelude:"<dashed-ident>",descriptors:{top:"<'top'>",left:"<'left'>",bottom:"<'bottom'>",right:"<'right'>","inset-block-start":"<'inset-block-start'>","inset-block-end":"<'inset-block-end'>","inset-inline-start":"<'inset-inline-start'>","inset-inline-end":"<'inset-inline-end'>","inset-block":"<'inset-block'>","inset-inline":"<'inset-inline'>",inset:"<'inset'>","margin-top":"<'margin-top'>","margin-left":"<'margin-left'>","margin-bottom":"<'margin-bottom'>","margin-right":"<'margin-right'>","margin-block-start":"<'margin-block-start'>","margin-block-end":"<'margin-block-end'>","margin-inline-start":"<'margin-inline-start'>","margin-inline-end":"<'margin-inline-end'>",margin:"<'margin'>","margin-block":"<'margin-block'>","margin-inline":"<'margin-inline'>",width:"<'width'>",height:"<'height'>","min-width":"<'min-width'>","min-height":"<'min-height'>","max-width":"<'max-width'>","max-height":"<'max-height'>","block-size":"<'block-size'>","inline-size":"<'inline-size'>","min-block-size":"<'min-block-size'>","min-inline-size":"<'min-inline-size'>","max-block-size":"<'max-block-size'>","max-inline-size":"<'max-inline-size'>","align-self":"<'align-self'>|anchor-center","justify-self":"<'justify-self'>|anchor-center"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<declaration-value>?"}},scope:{prelude:"[( <scope-start> )]? [to ( <scope-end> )]?",descriptors:null},"starting-style":{prelude:null,descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},container:{prelude:"[<container-name>]? <container-condition>",descriptors:null},nest:{prelude:"<complex-selector-list>",descriptors:null}}},Ka=43,ks=45,fm=110,Hl=!0,ede=!1;function pm(e,t){let n=this.tokenStart+e;const r=this.charCodeAt(n);for((r===Ka||r===ks)&&(t&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)Ci(this.charCodeAt(n))||this.error("Integer is expected",n)}function ku(e){return pm.call(this,0,e)}function Uo(e,t){if(!this.cmpChar(this.tokenStart+e,t)){let n="";switch(t){case fm:n="N is expected";break;case ks:n="HyphenMinus is expected";break}this.error(n,this.tokenStart+e)}}function sb(){let e=0,t=0,n=this.tokenType;for(;n===Hr||n===Ti;)n=this.lookupType(++e);if(n!==pn)if(this.isDelim(Ka,e)||this.isDelim(ks,e)){t=this.isDelim(Ka,e)?Ka:ks;do n=this.lookupType(++e);while(n===Hr||n===Ti);n!==pn&&(this.skip(e),ku.call(this,Hl))}else return null;return e>0&&this.skip(e),t===0&&(n=this.charCodeAt(this.tokenStart),n!==Ka&&n!==ks&&this.error("Number sign is expected")),ku.call(this,t!==0),t===ks?"-"+this.consume(pn):this.consume(pn)}const tde="AnPlusB",nde={a:[String,null],b:[String,null]};function aM(){const e=this.tokenStart;let t=null,n=null;if(this.tokenType===pn)ku.call(this,ede),n=this.consume(pn);else if(this.tokenType===Ot&&this.cmpChar(this.tokenStart,ks))switch(t="-1",Uo.call(this,1,fm),this.tokenEnd-this.tokenStart){case 2:this.next(),n=sb.call(this);break;case 3:Uo.call(this,2,ks),this.next(),this.skipSC(),ku.call(this,Hl),n="-"+this.consume(pn);break;default:Uo.call(this,2,ks),pm.call(this,3,Hl),this.next(),n=this.substrToCursor(e+2)}else if(this.tokenType===Ot||this.isDelim(Ka)&&this.lookupType(1)===Ot){let r=0;switch(t="1",this.isDelim(Ka)&&(r=1,this.next()),Uo.call(this,0,fm),this.tokenEnd-this.tokenStart){case 1:this.next(),n=sb.call(this);break;case 2:Uo.call(this,1,ks),this.next(),this.skipSC(),ku.call(this,Hl),n="-"+this.consume(pn);break;default:Uo.call(this,1,ks),pm.call(this,2,Hl),this.next(),n=this.substrToCursor(e+r+1)}}else if(this.tokenType===On){const r=this.charCodeAt(this.tokenStart),i=r===Ka||r===ks;let s=this.tokenStart+i;for(;s<this.tokenEnd&&Ci(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),Uo.call(this,s-this.tokenStart,fm),t=this.substring(e,s),s+1===this.tokenEnd?(this.next(),n=sb.call(this)):(Uo.call(this,s-this.tokenStart+1,ks),s+2===this.tokenEnd?(this.next(),this.skipSC(),ku.call(this,Hl),n="-"+this.consume(pn)):(pm.call(this,s-this.tokenStart+2,Hl),this.next(),n=this.substrToCursor(s+1)))}else this.error();return t!==null&&t.charCodeAt(0)===Ka&&(t=t.substr(1)),n!==null&&n.charCodeAt(0)===Ka&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(e,this.tokenStart),a:t,b:n}}function rde(e){if(e.a){const t=e.a==="+1"&&"n"||e.a==="1"&&"n"||e.a==="-1"&&"-n"||e.a+"n";if(e.b){const n=e.b[0]==="-"||e.b[0]==="+"?e.b:"+"+e.b;this.tokenize(t+n)}else this.tokenize(t)}else this.tokenize(e.b)}const ide=Object.freeze(Object.defineProperty({__proto__:null,generate:rde,name:tde,parse:aM,structure:nde},Symbol.toStringTag,{value:"Module"}));function dT(){return this.Raw(this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function sde(){for(let e=1,t;t=this.lookupType(e);e++){if(t===Js)return!0;if(t===Ai||t===ii)return!1}return!1}const ade="Atrule",ode="atrule",lde={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function oM(e=!1){const t=this.tokenStart;let n,r,i=null,s=null;switch(this.eat(ii),n=this.substrToCursor(t+1),r=n.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==Ai&&this.tokenType!==Ui&&(this.parseAtrulePrelude?i=this.parseWithFallback(this.AtrulePrelude.bind(this,n,e),dT):i=dT.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case Ui:this.next();break;case Ai:hasOwnProperty.call(this.atrule,r)&&typeof this.atrule[r].block=="function"?s=this.atrule[r].block.call(this,e):s=this.Block(sde.call(this));break}return{type:"Atrule",loc:this.getLocation(t,this.tokenStart),name:n,prelude:i,block:s}}function cde(e){this.token(ii,"@"+e.name),e.prelude!==null&&this.node(e.prelude),e.block?this.node(e.block):this.token(Ui,";")}const ude=Object.freeze(Object.defineProperty({__proto__:null,generate:cde,name:ade,parse:oM,structure:lde,walkContext:ode},Symbol.toStringTag,{value:"Module"})),hde="AtrulePrelude",dde="atrulePrelude",fde={children:[[]]};function lM(e){let t=null;return e!==null&&(e=e.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,e)&&typeof this.atrule[e].prelude=="function"?t=this.atrule[e].prelude.call(this):t=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Ai&&this.tokenType!==Ui&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(t),children:t}}function pde(e){this.children(e)}const mde=Object.freeze(Object.defineProperty({__proto__:null,generate:pde,name:hde,parse:lM,structure:fde,walkContext:dde},Symbol.toStringTag,{value:"Module"})),gde=36,cM=42,mm=61,yde=94,Mx=124,bde=126;function vde(){this.eof&&this.error("Unexpected end of input");const e=this.tokenStart;let t=!1;return this.isDelim(cM)?(t=!0,this.next()):this.isDelim(Mx)||this.eat(Ot),this.isDelim(Mx)?this.charCodeAt(this.tokenStart+1)!==mm?(this.next(),this.eat(Ot)):t&&this.error("Identifier is expected",this.tokenEnd):t&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function xde(){const e=this.tokenStart,t=this.charCodeAt(e);return t!==mm&&t!==bde&&t!==yde&&t!==gde&&t!==cM&&t!==Mx&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),t!==mm&&(this.isDelim(mm)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(e)}const wde="AttributeSelector",_de={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function uM(){const e=this.tokenStart;let t,n=null,r=null,i=null;return this.eat(na),this.skipSC(),t=vde.call(this),this.skipSC(),this.tokenType!==Pa&&(this.tokenType!==Ot&&(n=xde.call(this),this.skipSC(),r=this.tokenType===Ia?this.String():this.Identifier(),this.skipSC()),this.tokenType===Ot&&(i=this.consume(Ot),this.skipSC())),this.eat(Pa),{type:"AttributeSelector",loc:this.getLocation(e,this.tokenStart),name:t,matcher:n,value:r,flags:i}}function kde(e){this.token(Dn,"["),this.node(e.name),e.matcher!==null&&(this.tokenize(e.matcher),this.node(e.value)),e.flags!==null&&this.token(Ot,e.flags),this.token(Dn,"]")}const Sde=Object.freeze(Object.defineProperty({__proto__:null,generate:kde,name:wde,parse:uM,structure:_de},Symbol.toStringTag,{value:"Module"})),Cde=38;function hM(){return this.Raw(null,!0)}function fT(){return this.parseWithFallback(this.Rule,hM)}function pT(){return this.Raw(this.consumeUntilSemicolonIncluded,!0)}function Ede(){if(this.tokenType===Ui)return pT.call(this,this.tokenIndex);const e=this.parseWithFallback(this.Declaration,pT);return this.tokenType===Ui&&this.next(),e}const Tde="Block",jde="block",Ade={children:[["Atrule","Rule","Declaration"]]};function dM(e){const t=e?Ede:fT,n=this.tokenStart;let r=this.createList();this.eat(Ai);e:for(;!this.eof;)switch(this.tokenType){case Js:break e;case Hr:case Ti:this.next();break;case ii:r.push(this.parseWithFallback(this.Atrule.bind(this,e),hM));break;default:e&&this.isDelim(Cde)?r.push(fT.call(this)):r.push(t.call(this))}return this.eof||this.eat(Js),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:r}}function Pde(e){this.token(Ai,"{"),this.children(e,t=>{t.type==="Declaration"&&this.token(Ui,";")}),this.token(Js,"}")}const Nde=Object.freeze(Object.defineProperty({__proto__:null,generate:Pde,name:Tde,parse:dM,structure:Ade,walkContext:jde},Symbol.toStringTag,{value:"Module"})),Ode="Brackets",Rde={children:[[]]};function fM(e,t){const n=this.tokenStart;let r=null;return this.eat(na),r=e.call(this,t),this.eof||this.eat(Pa),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:r}}function Mde(e){this.token(Dn,"["),this.children(e),this.token(Dn,"]")}const Lde=Object.freeze(Object.defineProperty({__proto__:null,generate:Mde,name:Ode,parse:fM,structure:Rde},Symbol.toStringTag,{value:"Module"})),Ide="CDC",$de=[];function pM(){const e=this.tokenStart;return this.eat(os),{type:"CDC",loc:this.getLocation(e,this.tokenStart)}}function Dde(){this.token(os,"-->")}const zde=Object.freeze(Object.defineProperty({__proto__:null,generate:Dde,name:Ide,parse:pM,structure:$de},Symbol.toStringTag,{value:"Module"})),Fde="CDO",Bde=[];function mM(){const e=this.tokenStart;return this.eat(Rf),{type:"CDO",loc:this.getLocation(e,this.tokenStart)}}function Ude(){this.token(Rf,"<!--")}const Hde=Object.freeze(Object.defineProperty({__proto__:null,generate:Ude,name:Fde,parse:mM,structure:Bde},Symbol.toStringTag,{value:"Module"})),Wde=46,Vde="ClassSelector",Gde={name:String};function gM(){return this.eatDelim(Wde),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Ot)}}function qde(e){this.token(Dn,"."),this.token(Ot,e.name)}const Yde=Object.freeze(Object.defineProperty({__proto__:null,generate:qde,name:Vde,parse:gM,structure:Gde},Symbol.toStringTag,{value:"Module"})),Xde=43,mT=47,Kde=62,Zde=126,Qde="Combinator",Jde={name:String};function yM(){const e=this.tokenStart;let t;switch(this.tokenType){case Hr:t=" ";break;case Dn:switch(this.charCodeAt(this.tokenStart)){case Kde:case Xde:case Zde:this.next();break;case mT:this.next(),this.eatIdent("deep"),this.eatDelim(mT);break;default:this.error("Combinator is expected")}t=this.substrToCursor(e);break}return{type:"Combinator",loc:this.getLocation(e,this.tokenStart),name:t}}function efe(e){this.tokenize(e.name)}const tfe=Object.freeze(Object.defineProperty({__proto__:null,generate:efe,name:Qde,parse:yM,structure:Jde},Symbol.toStringTag,{value:"Module"})),nfe=42,rfe=47,ife="Comment",sfe={value:String};function bM(){const e=this.tokenStart;let t=this.tokenEnd;return this.eat(Ti),t-e+2>=2&&this.charCodeAt(t-2)===nfe&&this.charCodeAt(t-1)===rfe&&(t-=2),{type:"Comment",loc:this.getLocation(e,this.tokenStart),value:this.substring(e+2,t)}}function afe(e){this.token(Ti,"/*"+e.value+"*/")}const ofe=Object.freeze(Object.defineProperty({__proto__:null,generate:afe,name:ife,parse:bM,structure:sfe},Symbol.toStringTag,{value:"Module"})),lfe=new Set([Bi,dn,tl]),cfe="Condition",ufe={kind:String,children:[["Identifier","Feature","FeatureFunction","FeatureRange","SupportsDeclaration"]]};function gT(e){return this.lookupTypeNonSC(1)===Ot&&lfe.has(this.lookupTypeNonSC(2))?this.Feature(e):this.FeatureRange(e)}const hfe={media:gT,container:gT,supports(){return this.SupportsDeclaration()}};function vM(e="media"){const t=this.createList();e:for(;!this.eof;)switch(this.tokenType){case Ti:case Hr:this.next();continue;case Ot:t.push(this.Identifier());break;case er:{let n=this.parseWithFallback(()=>hfe[e].call(this,e),()=>null);n||(n=this.parseWithFallback(()=>{this.eat(er);const r=this.Condition(e);return this.eat(dn),r},()=>this.GeneralEnclosed(e))),t.push(n);break}case kn:{let n=this.parseWithFallback(()=>this.FeatureFunction(e),()=>null);n||(n=this.GeneralEnclosed(e)),t.push(n);break}default:break e}return t.isEmpty&&this.error("Condition is expected"),{type:"Condition",loc:this.getLocationFromList(t),kind:e,children:t}}function dfe(e){e.children.forEach(t=>{t.type==="Condition"?(this.token(er,"("),this.node(t),this.token(dn,")")):this.node(t)})}const ffe=Object.freeze(Object.defineProperty({__proto__:null,generate:dfe,name:cfe,parse:vM,structure:ufe},Symbol.toStringTag,{value:"Module"})),xM=33,pfe=35,mfe=36,gfe=38,yfe=42,bfe=43,yT=47;function vfe(){return this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!0)}function xfe(){return this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!1)}function wfe(){const e=this.tokenIndex,t=this.Value();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==Ui&&this.isDelim(xM)===!1&&this.isBalanceEdge(e)===!1&&this.error(),t}const _fe="Declaration",kfe="declaration",Sfe={important:[Boolean,String],property:String,value:["Value","Raw"]};function wM(){const e=this.tokenStart,t=this.tokenIndex,n=Efe.call(this),r=A_(n),i=r?this.parseCustomProperty:this.parseValue,s=r?xfe:vfe;let a=!1,o;this.skipSC(),this.eat(Bi);const c=this.tokenIndex;if(r||this.skipSC(),i?o=this.parseWithFallback(wfe,s):o=s.call(this,this.tokenIndex),r&&o.type==="Value"&&o.children.isEmpty){for(let h=c-this.tokenIndex;h<=0;h++)if(this.lookupType(h)===Hr){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(xM)&&(a=Tfe.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==Ui&&this.isBalanceEdge(t)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(e,this.tokenStart),important:a,property:n,value:o}}function Cfe(e){this.token(Ot,e.property),this.token(Bi,":"),this.node(e.value),e.important&&(this.token(Dn,"!"),this.token(Ot,e.important===!0?"important":e.important))}function Efe(){const e=this.tokenStart;if(this.tokenType===Dn)switch(this.charCodeAt(this.tokenStart)){case yfe:case mfe:case bfe:case pfe:case gfe:this.next();break;case yT:this.next(),this.isDelim(yT)&&this.next();break}return this.tokenType===kr?this.eat(kr):this.eat(Ot),this.substrToCursor(e)}function Tfe(){this.eat(Dn),this.skipSC();const e=this.consume(Ot);return e==="important"?!0:e}const jfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Cfe,name:_fe,parse:wM,structure:Sfe,walkContext:kfe},Symbol.toStringTag,{value:"Module"})),Afe=38;function ab(){return this.Raw(this.consumeUntilSemicolonIncluded,!0)}const Pfe="DeclarationList",Nfe={children:[["Declaration","Atrule","Rule"]]};function _M(){const e=this.createList();for(;!this.eof;)switch(this.tokenType){case Hr:case Ti:case Ui:this.next();break;case ii:e.push(this.parseWithFallback(this.Atrule.bind(this,!0),ab));break;default:this.isDelim(Afe)?e.push(this.parseWithFallback(this.Rule,ab)):e.push(this.parseWithFallback(this.Declaration,ab))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}}function Ofe(e){this.children(e,t=>{t.type==="Declaration"&&this.token(Ui,";")})}const Rfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ofe,name:Pfe,parse:_M,structure:Nfe},Symbol.toStringTag,{value:"Module"})),Mfe="Dimension",Lfe={value:String,unit:String};function kM(){const e=this.tokenStart,t=this.consumeNumber(On);return{type:"Dimension",loc:this.getLocation(e,this.tokenStart),value:t,unit:this.substring(e+t.length,this.tokenStart)}}function Ife(e){this.token(On,e.value+e.unit)}const $fe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ife,name:Mfe,parse:kM,structure:Lfe},Symbol.toStringTag,{value:"Module"})),Dfe=47,zfe="Feature",Ffe={kind:String,name:String,value:["Identifier","Number","Dimension","Ratio","Function",null]};function SM(e){const t=this.tokenStart;let n,r=null;if(this.eat(er),this.skipSC(),n=this.consume(Ot),this.skipSC(),this.tokenType!==dn){switch(this.eat(Bi),this.skipSC(),this.tokenType){case pn:this.lookupNonWSType(1)===Dn?r=this.Ratio():r=this.Number();break;case On:r=this.Dimension();break;case Ot:r=this.Identifier();break;case kn:r=this.parseWithFallback(()=>{const i=this.Function(this.readSequence,this.scope.Value);return this.skipSC(),this.isDelim(Dfe)&&this.error(),i},()=>this.Ratio());break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eof||this.eat(dn),{type:"Feature",loc:this.getLocation(t,this.tokenStart),kind:e,name:n,value:r}}function Bfe(e){this.token(er,"("),this.token(Ot,e.name),e.value!==null&&(this.token(Bi,":"),this.node(e.value)),this.token(dn,")")}const Ufe=Object.freeze(Object.defineProperty({__proto__:null,generate:Bfe,name:zfe,parse:SM,structure:Ffe},Symbol.toStringTag,{value:"Module"})),Hfe="FeatureFunction",Wfe={kind:String,feature:String,value:["Declaration","Selector"]};function Vfe(e,t){const r=(this.features[e]||{})[t];return typeof r!="function"&&this.error(`Unknown feature ${t}()`),r}function CM(e="unknown"){const t=this.tokenStart,n=this.consumeFunctionName(),r=Vfe.call(this,e,n.toLowerCase());this.skipSC();const i=this.parseWithFallback(()=>{const s=this.tokenIndex,a=r.call(this);return this.eof===!1&&this.isBalanceEdge(s)===!1&&this.error(),a},()=>this.Raw(null,!1));return this.eof||this.eat(dn),{type:"FeatureFunction",loc:this.getLocation(t,this.tokenStart),kind:e,feature:n,value:i}}function Gfe(e){this.token(kn,e.feature+"("),this.node(e.value),this.token(dn,")")}const qfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Gfe,name:Hfe,parse:CM,structure:Wfe},Symbol.toStringTag,{value:"Module"})),bT=47,Yfe=60,vT=61,Xfe=62,Kfe="FeatureRange",Zfe={kind:String,left:["Identifier","Number","Dimension","Ratio","Function"],leftComparison:String,middle:["Identifier","Number","Dimension","Ratio","Function"],rightComparison:[String,null],right:["Identifier","Number","Dimension","Ratio","Function",null]};function ob(){switch(this.skipSC(),this.tokenType){case pn:return this.isDelim(bT,this.lookupOffsetNonSC(1))?this.Ratio():this.Number();case On:return this.Dimension();case Ot:return this.Identifier();case kn:return this.parseWithFallback(()=>{const e=this.Function(this.readSequence,this.scope.Value);return this.skipSC(),this.isDelim(bT)&&this.error(),e},()=>this.Ratio());default:this.error("Number, dimension, ratio or identifier is expected")}}function xT(e){if(this.skipSC(),this.isDelim(Yfe)||this.isDelim(Xfe)){const t=this.source[this.tokenStart];return this.next(),this.isDelim(vT)?(this.next(),t+"="):t}if(this.isDelim(vT))return"=";this.error(`Expected ${e?'":", ':""}"<", ">", "=" or ")"`)}function EM(e="unknown"){const t=this.tokenStart;this.skipSC(),this.eat(er);const n=ob.call(this),r=xT.call(this,n.type==="Identifier"),i=ob.call(this);let s=null,a=null;return this.lookupNonWSType(0)!==dn&&(s=xT.call(this),a=ob.call(this)),this.skipSC(),this.eat(dn),{type:"FeatureRange",loc:this.getLocation(t,this.tokenStart),kind:e,left:n,leftComparison:r,middle:i,rightComparison:s,right:a}}function Qfe(e){this.token(er,"("),this.node(e.left),this.tokenize(e.leftComparison),this.node(e.middle),e.right&&(this.tokenize(e.rightComparison),this.node(e.right)),this.token(dn,")")}const Jfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Qfe,name:Kfe,parse:EM,structure:Zfe},Symbol.toStringTag,{value:"Module"})),epe="Function",tpe="function",npe={name:String,children:[[]]};function TM(e,t){const n=this.tokenStart,r=this.consumeFunctionName(),i=r.toLowerCase();let s;return s=t.hasOwnProperty(i)?t[i].call(this,t):e.call(this,t),this.eof||this.eat(dn),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:r,children:s}}function rpe(e){this.token(kn,e.name+"("),this.children(e),this.token(dn,")")}const ipe=Object.freeze(Object.defineProperty({__proto__:null,generate:rpe,name:epe,parse:TM,structure:npe,walkContext:tpe},Symbol.toStringTag,{value:"Module"})),spe="GeneralEnclosed",ape={kind:String,function:[String,null],children:[[]]};function jM(e){const t=this.tokenStart;let n=null;this.tokenType===kn?n=this.consumeFunctionName():this.eat(er);const r=this.parseWithFallback(()=>{const i=this.tokenIndex,s=this.readSequence(this.scope.Value);return this.eof===!1&&this.isBalanceEdge(i)===!1&&this.error(),s},()=>this.createSingleNodeList(this.Raw(null,!1)));return this.eof||this.eat(dn),{type:"GeneralEnclosed",loc:this.getLocation(t,this.tokenStart),kind:e,function:n,children:r}}function ope(e){e.function?this.token(kn,e.function+"("):this.token(er,"("),this.children(e),this.token(dn,")")}const lpe=Object.freeze(Object.defineProperty({__proto__:null,generate:ope,name:spe,parse:jM,structure:ape},Symbol.toStringTag,{value:"Module"})),cpe="XXX",upe="Hash",hpe={value:String};function AM(){const e=this.tokenStart;return this.eat(kr),{type:"Hash",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e+1)}}function dpe(e){this.token(kr,"#"+e.value)}const fpe=Object.freeze(Object.defineProperty({__proto__:null,generate:dpe,name:upe,parse:AM,structure:hpe,xxx:cpe},Symbol.toStringTag,{value:"Module"})),ppe="Identifier",mpe={name:String};function PM(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Ot)}}function gpe(e){this.token(Ot,e.name)}const ype=Object.freeze(Object.defineProperty({__proto__:null,generate:gpe,name:ppe,parse:PM,structure:mpe},Symbol.toStringTag,{value:"Module"})),bpe="IdSelector",vpe={name:String};function NM(){const e=this.tokenStart;return this.eat(kr),{type:"IdSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e+1)}}function xpe(e){this.token(Dn,"#"+e.name)}const wpe=Object.freeze(Object.defineProperty({__proto__:null,generate:xpe,name:bpe,parse:NM,structure:vpe},Symbol.toStringTag,{value:"Module"})),_pe=46,kpe="Layer",Spe={name:String};function OM(){let e=this.tokenStart,t=this.consume(Ot);for(;this.isDelim(_pe);)this.eat(Dn),t+="."+this.consume(Ot);return{type:"Layer",loc:this.getLocation(e,this.tokenStart),name:t}}function Cpe(e){this.tokenize(e.name)}const Epe=Object.freeze(Object.defineProperty({__proto__:null,generate:Cpe,name:kpe,parse:OM,structure:Spe},Symbol.toStringTag,{value:"Module"})),Tpe="LayerList",jpe={children:[["Layer"]]};function RM(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.Layer()),this.lookupTypeNonSC(0)===vs);)this.skipSC(),this.next(),this.skipSC();return{type:"LayerList",loc:this.getLocationFromList(e),children:e}}function Ape(e){this.children(e,()=>this.token(vs,","))}const Ppe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ape,name:Tpe,parse:RM,structure:jpe},Symbol.toStringTag,{value:"Module"})),Npe="MediaQuery",Ope={modifier:[String,null],mediaType:[String,null],condition:["Condition",null]};function MM(){const e=this.tokenStart;let t=null,n=null,r=null;if(this.skipSC(),this.tokenType===Ot&&this.lookupTypeNonSC(1)!==er){const i=this.consume(Ot),s=i.toLowerCase();switch(s==="not"||s==="only"?(this.skipSC(),t=s,n=this.consume(Ot)):n=i,this.lookupTypeNonSC(0)){case Ot:{this.skipSC(),this.eatIdent("and"),r=this.Condition("media");break}case Ai:case Ui:case vs:case tl:break;default:this.error("Identifier or parenthesis is expected")}}else switch(this.tokenType){case Ot:case er:case kn:{r=this.Condition("media");break}case Ai:case Ui:case tl:break;default:this.error("Identifier or parenthesis is expected")}return{type:"MediaQuery",loc:this.getLocation(e,this.tokenStart),modifier:t,mediaType:n,condition:r}}function Rpe(e){e.mediaType?(e.modifier&&this.token(Ot,e.modifier),this.token(Ot,e.mediaType),e.condition&&(this.token(Ot,"and"),this.node(e.condition))):e.condition&&this.node(e.condition)}const Mpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Rpe,name:Npe,parse:MM,structure:Ope},Symbol.toStringTag,{value:"Module"})),Lpe="MediaQueryList",Ipe={children:[["MediaQuery"]]};function LM(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery()),this.tokenType===vs);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}}function $pe(e){this.children(e,()=>this.token(vs,","))}const Dpe=Object.freeze(Object.defineProperty({__proto__:null,generate:$pe,name:Lpe,parse:LM,structure:Ipe},Symbol.toStringTag,{value:"Module"})),zpe=38,Fpe="NestingSelector",Bpe={};function IM(){const e=this.tokenStart;return this.eatDelim(zpe),{type:"NestingSelector",loc:this.getLocation(e,this.tokenStart)}}function Upe(){this.token(Dn,"&")}const Hpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Upe,name:Fpe,parse:IM,structure:Bpe},Symbol.toStringTag,{value:"Module"})),Wpe="Nth",Vpe={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function $M(){this.skipSC();const e=this.tokenStart;let t=e,n=null,r;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?r=this.Identifier():r=this.AnPlusB(),t=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),n=this.SelectorList(),t=this.tokenStart),{type:"Nth",loc:this.getLocation(e,t),nth:r,selector:n}}function Gpe(e){this.node(e.nth),e.selector!==null&&(this.token(Ot,"of"),this.node(e.selector))}const qpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Gpe,name:Wpe,parse:$M,structure:Vpe},Symbol.toStringTag,{value:"Module"})),Ype="Number",Xpe={value:String};function DM(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(pn)}}function Kpe(e){this.token(pn,e.value)}const Zpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Kpe,name:Ype,parse:DM,structure:Xpe},Symbol.toStringTag,{value:"Module"})),Qpe="Operator",Jpe={value:String};function zM(){const e=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function eme(e){this.tokenize(e.value)}const tme=Object.freeze(Object.defineProperty({__proto__:null,generate:eme,name:Qpe,parse:zM,structure:Jpe},Symbol.toStringTag,{value:"Module"})),nme="Parentheses",rme={children:[[]]};function FM(e,t){const n=this.tokenStart;let r=null;return this.eat(er),r=e.call(this,t),this.eof||this.eat(dn),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:r}}function ime(e){this.token(er,"("),this.children(e),this.token(dn,")")}const sme=Object.freeze(Object.defineProperty({__proto__:null,generate:ime,name:nme,parse:FM,structure:rme},Symbol.toStringTag,{value:"Module"})),ame="Percentage",ome={value:String};function BM(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(zr)}}function lme(e){this.token(zr,e.value+"%")}const cme=Object.freeze(Object.defineProperty({__proto__:null,generate:lme,name:ame,parse:BM,structure:ome},Symbol.toStringTag,{value:"Module"})),ume="PseudoClassSelector",hme="function",dme={name:String,children:[["Raw"],null]};function UM(){const e=this.tokenStart;let t=null,n,r;return this.eat(Bi),this.tokenType===kn?(n=this.consumeFunctionName(),r=n.toLowerCase(),this.lookupNonWSType(0)==dn?t=this.createList():hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(null,!1))),this.eat(dn)):n=this.consume(Ot),{type:"PseudoClassSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function fme(e){this.token(Bi,":"),e.children===null?this.token(Ot,e.name):(this.token(kn,e.name+"("),this.children(e),this.token(dn,")"))}const pme=Object.freeze(Object.defineProperty({__proto__:null,generate:fme,name:ume,parse:UM,structure:dme,walkContext:hme},Symbol.toStringTag,{value:"Module"})),mme="PseudoElementSelector",gme="function",yme={name:String,children:[["Raw"],null]};function HM(){const e=this.tokenStart;let t=null,n,r;return this.eat(Bi),this.eat(Bi),this.tokenType===kn?(n=this.consumeFunctionName(),r=n.toLowerCase(),this.lookupNonWSType(0)==dn?t=this.createList():hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(null,!1))),this.eat(dn)):n=this.consume(Ot),{type:"PseudoElementSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function bme(e){this.token(Bi,":"),this.token(Bi,":"),e.children===null?this.token(Ot,e.name):(this.token(kn,e.name+"("),this.children(e),this.token(dn,")"))}const vme=Object.freeze(Object.defineProperty({__proto__:null,generate:bme,name:mme,parse:HM,structure:yme,walkContext:gme},Symbol.toStringTag,{value:"Module"})),wT=47;function _T(){switch(this.skipSC(),this.tokenType){case pn:return this.Number();case kn:return this.Function(this.readSequence,this.scope.Value);default:this.error("Number of function is expected")}}const xme="Ratio",wme={left:["Number","Function"],right:["Number","Function",null]};function WM(){const e=this.tokenStart,t=_T.call(this);let n=null;return this.skipSC(),this.isDelim(wT)&&(this.eatDelim(wT),n=_T.call(this)),{type:"Ratio",loc:this.getLocation(e,this.tokenStart),left:t,right:n}}function _me(e){this.node(e.left),this.token(Dn,"/"),e.right?this.node(e.right):this.node(pn,1)}const kme=Object.freeze(Object.defineProperty({__proto__:null,generate:_me,name:xme,parse:WM,structure:wme},Symbol.toStringTag,{value:"Module"}));function Sme(){return this.tokenIndex>0&&this.lookupType(-1)===Hr?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const Cme="Raw",Eme={value:String};function VM(e,t){const n=this.getTokenStart(this.tokenIndex);let r;return this.skipUntilBalanced(this.tokenIndex,e||this.consumeUntilBalanceEnd),t&&this.tokenStart>n?r=Sme.call(this):r=this.tokenStart,{type:"Raw",loc:this.getLocation(n,r),value:this.substring(n,r)}}function Tme(e){this.tokenize(e.value)}const jme=Object.freeze(Object.defineProperty({__proto__:null,generate:Tme,name:Cme,parse:VM,structure:Eme},Symbol.toStringTag,{value:"Module"}));function kT(){return this.Raw(this.consumeUntilLeftCurlyBracket,!0)}function Ame(){const e=this.SelectorList();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==Ai&&this.error(),e}const Pme="Rule",Nme="rule",Ome={prelude:["SelectorList","Raw"],block:["Block"]};function GM(){const e=this.tokenIndex,t=this.tokenStart;let n,r;return this.parseRulePrelude?n=this.parseWithFallback(Ame,kT):n=kT.call(this,e),r=this.Block(!0),{type:"Rule",loc:this.getLocation(t,this.tokenStart),prelude:n,block:r}}function Rme(e){this.node(e.prelude),this.node(e.block)}const Mme=Object.freeze(Object.defineProperty({__proto__:null,generate:Rme,name:Pme,parse:GM,structure:Ome,walkContext:Nme},Symbol.toStringTag,{value:"Module"})),Lme="Scope",Ime={root:["SelectorList","Raw",null],limit:["SelectorList","Raw",null]};function qM(){let e=null,t=null;this.skipSC();const n=this.tokenStart;return this.tokenType===er&&(this.next(),this.skipSC(),e=this.parseWithFallback(this.SelectorList,()=>this.Raw(!1,!0)),this.skipSC(),this.eat(dn)),this.lookupNonWSType(0)===Ot&&(this.skipSC(),this.eatIdent("to"),this.skipSC(),this.eat(er),this.skipSC(),t=this.parseWithFallback(this.SelectorList,()=>this.Raw(!1,!0)),this.skipSC(),this.eat(dn)),{type:"Scope",loc:this.getLocation(n,this.tokenStart),root:e,limit:t}}function $me(e){e.root&&(this.token(er,"("),this.node(e.root),this.token(dn,")")),e.limit&&(this.token(Ot,"to"),this.token(er,"("),this.node(e.limit),this.token(dn,")"))}const Dme=Object.freeze(Object.defineProperty({__proto__:null,generate:$me,name:Lme,parse:qM,structure:Ime},Symbol.toStringTag,{value:"Module"})),zme="Selector",Fme={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator"]]};function YM(){const e=this.readSequence(this.scope.Selector);return this.getFirstListNode(e)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}}function Bme(e){this.children(e)}const Ume=Object.freeze(Object.defineProperty({__proto__:null,generate:Bme,name:zme,parse:YM,structure:Fme},Symbol.toStringTag,{value:"Module"})),Hme="SelectorList",Wme="selector",Vme={children:[["Selector","Raw"]]};function XM(){const e=this.createList();for(;!this.eof;){if(e.push(this.Selector()),this.tokenType===vs){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}}function Gme(e){this.children(e,()=>this.token(vs,","))}const qme=Object.freeze(Object.defineProperty({__proto__:null,generate:Gme,name:Hme,parse:XM,structure:Vme,walkContext:Wme},Symbol.toStringTag,{value:"Module"})),Lx=92,KM=34,Yme=39;function ZM(e){const t=e.length,n=e.charCodeAt(0),r=n===KM||n===Yme?1:0,i=r===1&&t>1&&e.charCodeAt(t-1)===n?t-2:t-1;let s="";for(let a=r;a<=i;a++){let o=e.charCodeAt(a);if(o===Lx){if(a===i){a!==t-1&&(s=e.substr(a+1));break}if(o=e.charCodeAt(++a),eo(Lx,o)){const c=a-1,h=Yu(e,c);a=h-1,s+=jR(e.substring(c+1,h))}else o===13&&e.charCodeAt(a+1)===10&&a++}else s+=e[a]}return s}function Xme(e,t){const n='"',r=KM;let i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);if(o===0){i+="";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===r||o===Lx?(i+="\\"+e.charAt(a),s=!1):(s&&(vl(o)||dc(o))&&(i+=" "),i+=e.charAt(a),s=!1)}return n+i+n}const Kme="String",Zme={value:String};function QM(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:ZM(this.consume(Ia))}}function Qme(e){this.token(Ia,Xme(e.value))}const Jme=Object.freeze(Object.defineProperty({__proto__:null,generate:Qme,name:Kme,parse:QM,structure:Zme},Symbol.toStringTag,{value:"Module"})),ege=33;function ST(){return this.Raw(null,!1)}const tge="StyleSheet",nge="stylesheet",rge={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function JM(){const e=this.tokenStart,t=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case Hr:this.next();continue;case Ti:if(this.charCodeAt(this.tokenStart+2)!==ege){this.next();continue}n=this.Comment();break;case Rf:n=this.CDO();break;case os:n=this.CDC();break;case ii:n=this.parseWithFallback(this.Atrule,ST);break;default:n=this.parseWithFallback(this.Rule,ST)}t.push(n)}return{type:"StyleSheet",loc:this.getLocation(e,this.tokenStart),children:t}}function ige(e){this.children(e)}const sge=Object.freeze(Object.defineProperty({__proto__:null,generate:ige,name:tge,parse:JM,structure:rge,walkContext:nge},Symbol.toStringTag,{value:"Module"})),age="SupportsDeclaration",oge={declaration:"Declaration"};function e4(){const e=this.tokenStart;this.eat(er),this.skipSC();const t=this.Declaration();return this.eof||this.eat(dn),{type:"SupportsDeclaration",loc:this.getLocation(e,this.tokenStart),declaration:t}}function lge(e){this.token(er,"("),this.node(e.declaration),this.token(dn,")")}const cge=Object.freeze(Object.defineProperty({__proto__:null,generate:lge,name:age,parse:e4,structure:oge},Symbol.toStringTag,{value:"Module"})),uge=42,CT=124;function lb(){this.tokenType!==Ot&&this.isDelim(uge)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const hge="TypeSelector",dge={name:String};function t4(){const e=this.tokenStart;return this.isDelim(CT)?(this.next(),lb.call(this)):(lb.call(this),this.isDelim(CT)&&(this.next(),lb.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function fge(e){this.tokenize(e.name)}const pge=Object.freeze(Object.defineProperty({__proto__:null,generate:fge,name:hge,parse:t4,structure:dge},Symbol.toStringTag,{value:"Module"})),n4=43,r4=45,Ix=63;function ld(e,t){let n=0;for(let r=this.tokenStart+e;r<this.tokenEnd;r++){const i=this.charCodeAt(r);if(i===r4&&t&&n!==0)return ld.call(this,e+n+1,!1),-1;vl(i)||this.error(t&&n!==0?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",r),++n>6&&this.error("Too many hex digits",r)}return this.next(),n}function Lp(e){let t=0;for(;this.isDelim(Ix);)++t>e&&this.error("Too many question marks"),this.next()}function mge(e){this.charCodeAt(this.tokenStart)!==e&&this.error((e===n4?"Plus sign":"Hyphen minus")+" is expected")}function gge(){let e=0;switch(this.tokenType){case pn:if(e=ld.call(this,1,!0),this.isDelim(Ix)){Lp.call(this,6-e);break}if(this.tokenType===On||this.tokenType===pn){mge.call(this,r4),ld.call(this,1,!1);break}break;case On:e=ld.call(this,1,!0),e>0&&Lp.call(this,6-e);break;default:if(this.eatDelim(n4),this.tokenType===Ot){e=ld.call(this,0,!0),e>0&&Lp.call(this,6-e);break}if(this.isDelim(Ix)){this.next(),Lp.call(this,5);break}this.error("Hex digit or question mark is expected")}}const yge="UnicodeRange",bge={value:String};function i4(){const e=this.tokenStart;return this.eatIdent("u"),gge.call(this),{type:"UnicodeRange",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function vge(e){this.tokenize(e.value)}const xge=Object.freeze(Object.defineProperty({__proto__:null,generate:vge,name:yge,parse:i4,structure:bge},Symbol.toStringTag,{value:"Module"})),wge=32,$x=92,_ge=34,kge=39,Sge=40,s4=41;function Cge(e){const t=e.length;let n=4,r=e.charCodeAt(t-1)===s4?t-2:t-1,i="";for(;n<r&&dc(e.charCodeAt(n));)n++;for(;n<r&&dc(e.charCodeAt(r));)r--;for(let s=n;s<=r;s++){let a=e.charCodeAt(s);if(a===$x){if(s===r){s!==t-1&&(i=e.substr(s+1));break}if(a=e.charCodeAt(++s),eo($x,a)){const o=s-1,c=Yu(e,o);s=c-1,i+=jR(e.substring(o+1,c))}else a===13&&e.charCodeAt(s+1)===10&&s++}else i+=e[s]}return i}function Ege(e){let t="",n=!1;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===0){t+="";continue}if(i<=31||i===127){t+="\\"+i.toString(16),n=!0;continue}i===wge||i===$x||i===_ge||i===kge||i===Sge||i===s4?(t+="\\"+e.charAt(r),n=!1):(n&&vl(i)&&(t+=" "),t+=e.charAt(r),n=!1)}return"url("+t+")"}const Tge="Url",jge={value:String};function a4(){const e=this.tokenStart;let t;switch(this.tokenType){case $i:t=Cge(this.consume($i));break;case kn:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(kn),this.skipSC(),t=ZM(this.consume(Ia)),this.skipSC(),this.eof||this.eat(dn);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(e,this.tokenStart),value:t}}function Age(e){this.token($i,Ege(e.value))}const Pge=Object.freeze(Object.defineProperty({__proto__:null,generate:Age,name:Tge,parse:a4,structure:jge},Symbol.toStringTag,{value:"Module"})),Nge="Value",Oge={children:[[]]};function o4(){const e=this.tokenStart,t=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(e,this.tokenStart),children:t}}function Rge(e){this.children(e)}const Mge=Object.freeze(Object.defineProperty({__proto__:null,generate:Rge,name:Nge,parse:o4,structure:Oge},Symbol.toStringTag,{value:"Module"})),Lge=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),Ige="WhiteSpace",$ge={value:String};function l4(){return this.eat(Hr),Lge}function Dge(e){this.token(Hr,e.value)}const zge=Object.freeze(Object.defineProperty({__proto__:null,generate:Dge,name:Ige,parse:l4,structure:$ge},Symbol.toStringTag,{value:"Module"})),c4=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:ide,Atrule:ude,AtrulePrelude:mde,AttributeSelector:Sde,Block:Nde,Brackets:Lde,CDC:zde,CDO:Hde,ClassSelector:Yde,Combinator:tfe,Comment:ofe,Condition:ffe,Declaration:jfe,DeclarationList:Rfe,Dimension:$fe,Feature:Ufe,FeatureFunction:qfe,FeatureRange:Jfe,Function:ipe,GeneralEnclosed:lpe,Hash:fpe,IdSelector:wpe,Identifier:ype,Layer:Epe,LayerList:Ppe,MediaQuery:Mpe,MediaQueryList:Dpe,NestingSelector:Hpe,Nth:qpe,Number:Zpe,Operator:tme,Parentheses:sme,Percentage:cme,PseudoClassSelector:pme,PseudoElementSelector:vme,Ratio:kme,Raw:jme,Rule:Mme,Scope:Dme,Selector:Ume,SelectorList:qme,String:Jme,StyleSheet:sge,SupportsDeclaration:cge,TypeSelector:pge,UnicodeRange:xge,Url:Pge,Value:Mge,WhiteSpace:zge},Symbol.toStringTag,{value:"Module"})),Fge={generic:!0,cssWideKeywords:P_,...Jhe,node:c4},Bge=35,Uge=42,ET=43,Hge=45,Wge=47,Vge=117;function u4(e){switch(this.tokenType){case kr:return this.Hash();case vs:return this.Operator();case er:return this.Parentheses(this.readSequence,e.recognizer);case na:return this.Brackets(this.readSequence,e.recognizer);case Ia:return this.String();case On:return this.Dimension();case zr:return this.Percentage();case pn:return this.Number();case kn:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,e.recognizer);case $i:return this.Url();case Ot:return this.cmpChar(this.tokenStart,Vge)&&this.cmpChar(this.tokenStart+1,ET)?this.UnicodeRange():this.Identifier();case Dn:{const t=this.charCodeAt(this.tokenStart);if(t===Wge||t===Uge||t===ET||t===Hge)return this.Operator();t===Bge&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const Gge={getNode:u4},qge=35,Yge=38,Xge=42,Kge=43,Zge=47,TT=46,Qge=62,Jge=124,e0e=126;function t0e(e,t){t.last!==null&&t.last.type!=="Combinator"&&e!==null&&e.type!=="Combinator"&&t.push({type:"Combinator",loc:null,name:" "})}function n0e(){switch(this.tokenType){case na:return this.AttributeSelector();case kr:return this.IdSelector();case Bi:return this.lookupType(1)===Bi?this.PseudoElementSelector():this.PseudoClassSelector();case Ot:return this.TypeSelector();case pn:case zr:return this.Percentage();case On:this.charCodeAt(this.tokenStart)===TT&&this.error("Identifier is expected",this.tokenStart+1);break;case Dn:{switch(this.charCodeAt(this.tokenStart)){case Kge:case Qge:case e0e:case Zge:return this.Combinator();case TT:return this.ClassSelector();case Xge:case Jge:return this.TypeSelector();case qge:return this.IdSelector();case Yge:return this.NestingSelector()}break}}}const r0e={onWhiteSpace:t0e,getNode:n0e};function i0e(){return this.createSingleNodeList(this.Raw(null,!1))}function s0e(){const e=this.createList();if(this.skipSC(),e.push(this.Identifier()),this.skipSC(),this.tokenType===vs){e.push(this.Operator());const t=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!1);if(n.type==="Value"&&n.children.isEmpty){for(let r=t-this.tokenIndex;r<=0;r++)if(this.lookupType(r)===Hr){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}e.push(n)}return e}function jT(e){return e!==null&&e.type==="Operator"&&(e.value[e.value.length-1]==="-"||e.value[e.value.length-1]==="+")}const a0e={getNode:u4,onWhiteSpace(e,t){jT(e)&&(e.value=" "+e.value),jT(t.last)&&(t.last.value+=" ")},expression:i0e,var:s0e},o0e=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:Gge,Selector:r0e,Value:a0e},Symbol.toStringTag,{value:"Module"})),l0e=new Set(["none","and","not","or"]),c0e={parse:{prelude(){const e=this.createList();if(this.tokenType===Ot){const t=this.substring(this.tokenStart,this.tokenEnd);l0e.has(t.toLowerCase())||e.push(this.Identifier())}return e.push(this.Condition("container")),e},block(e=!1){return this.Block(e)}}},u0e={parse:{prelude:null,block(){return this.Block(!0)}}};function cb(e,t){return this.parseWithFallback(()=>{try{return e.call(this)}finally{this.skipSC(),this.lookupNonWSType(0)!==dn&&this.error()}},t||(()=>this.Raw(null,!0)))}const AT={layer(){this.skipSC();const e=this.createList(),t=cb.call(this,this.Layer);return(t.type!=="Raw"||t.value!=="")&&e.push(t),e},supports(){this.skipSC();const e=this.createList(),t=cb.call(this,this.Declaration,()=>cb.call(this,()=>this.Condition("supports")));return(t.type!=="Raw"||t.value!=="")&&e.push(t),e}},h0e={parse:{prelude(){const e=this.createList();switch(this.tokenType){case Ia:e.push(this.String());break;case $i:case kn:e.push(this.Url());break;default:this.error("String or url() is expected")}return this.skipSC(),this.tokenType===Ot&&this.cmpStr(this.tokenStart,this.tokenEnd,"layer")?e.push(this.Identifier()):this.tokenType===kn&&this.cmpStr(this.tokenStart,this.tokenEnd,"layer(")&&e.push(this.Function(null,AT)),this.skipSC(),this.tokenType===kn&&this.cmpStr(this.tokenStart,this.tokenEnd,"supports(")&&e.push(this.Function(null,AT)),(this.lookupNonWSType(0)===Ot||this.lookupNonWSType(0)===er)&&e.push(this.MediaQueryList()),e},block:null}},d0e={parse:{prelude(){return this.createSingleNodeList(this.LayerList())},block(){return this.Block(!1)}}},f0e={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(e=!1){return this.Block(e)}}},p0e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},m0e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},g0e={parse:{prelude(){return this.createSingleNodeList(this.Scope())},block(e=!1){return this.Block(e)}}},y0e={parse:{prelude:null,block(e=!1){return this.Block(e)}}},b0e={parse:{prelude(){return this.createSingleNodeList(this.Condition("supports"))},block(e=!1){return this.Block(e)}}},v0e={container:c0e,"font-face":u0e,import:h0e,layer:d0e,media:f0e,nest:p0e,page:m0e,scope:g0e,"starting-style":y0e,supports:b0e};function x0e(){const e=this.createList();this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Ot:e.push(this.Identifier());break;case Ia:e.push(this.String());break;case vs:e.push(this.Operator());break;case dn:break e;default:this.error("Identifier, string or comma is expected")}this.skipSC()}return e}const Il={parse(){return this.createSingleNodeList(this.SelectorList())}},ub={parse(){return this.createSingleNodeList(this.Selector())}},w0e={parse(){return this.createSingleNodeList(this.Identifier())}},_0e={parse:x0e},Ip={parse(){return this.createSingleNodeList(this.Nth())}},k0e={dir:w0e,has:Il,lang:_0e,matches:Il,is:Il,"-moz-any":Il,"-webkit-any":Il,where:Il,not:Il,"nth-child":Ip,"nth-last-child":Ip,"nth-last-of-type":Ip,"nth-of-type":Ip,slotted:ub,host:ub,"host-context":ub},S0e=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:aM,Atrule:oM,AtrulePrelude:lM,AttributeSelector:uM,Block:dM,Brackets:fM,CDC:pM,CDO:mM,ClassSelector:gM,Combinator:yM,Comment:bM,Condition:vM,Declaration:wM,DeclarationList:_M,Dimension:kM,Feature:SM,FeatureFunction:CM,FeatureRange:EM,Function:TM,GeneralEnclosed:jM,Hash:AM,IdSelector:NM,Identifier:PM,Layer:OM,LayerList:RM,MediaQuery:MM,MediaQueryList:LM,NestingSelector:IM,Nth:$M,Number:DM,Operator:zM,Parentheses:FM,Percentage:BM,PseudoClassSelector:UM,PseudoElementSelector:HM,Ratio:WM,Raw:VM,Rule:GM,Scope:qM,Selector:YM,SelectorList:XM,String:QM,StyleSheet:JM,SupportsDeclaration:e4,TypeSelector:t4,UnicodeRange:i4,Url:a4,Value:o4,WhiteSpace:l4},Symbol.toStringTag,{value:"Module"})),C0e={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(e){return this.AtrulePrelude(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",condition(e){return this.Condition(e.kind)},rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},features:{supports:{selector(){return this.Selector()}},container:{style(){return this.Declaration()}}},scope:o0e,atrule:v0e,pseudo:k0e,node:S0e},E0e={node:c4},T0e=Qhe({...Fge,...C0e,...E0e});function Dx(e){const t={};for(const n of Object.keys(e)){let r=e[n];r&&(Array.isArray(r)||r instanceof ko?r=r.map(Dx):r.constructor===Object&&(r=Dx(r))),t[n]=r}return t}const{tokenize:Nje,parse:Xu,generate:Ts,lexer:Oje,createLexer:Rje,walk:qs,find:Mje,findLast:Lje,findAll:Ije,toPlainObject:$je,fromPlainObject:Dje,fork:zje}=T0e,hb=0,Ht=1,Fn=2,li=3,Sr=4,Na=5,S0=6,Si=7,ls=8,Hn=9,mn=10,Fr=11,In=12,Kr=13,Mf=14,cs=15,Hi=16,ms=17,lo=18,Is=19,Oa=20,mi=21,dr=22,Wi=23,ta=24,Zi=25,j0e=0;function xi(e){return e>=48&&e<=57}function wl(e){return xi(e)||e>=65&&e<=70||e>=97&&e<=102}function z_(e){return e>=65&&e<=90}function A0e(e){return e>=97&&e<=122}function P0e(e){return z_(e)||A0e(e)}function N0e(e){return e>=128}function kg(e){return P0e(e)||N0e(e)||e===95}function h4(e){return kg(e)||xi(e)||e===45}function O0e(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function Sg(e){return e===10||e===13||e===12}function pc(e){return Sg(e)||e===32||e===9}function to(e,t){return!(e!==92||Sg(t)||t===j0e)}function gm(e,t,n){return e===45?kg(t)||t===45||to(t,n):kg(e)?!0:e===92?to(e,t):!1}function db(e,t,n){return e===43||e===45?xi(t)?2:t===46&&xi(n)?3:0:e===46?xi(t)?2:0:xi(e)?1:0}function d4(e){return e===65279||e===65534?1:0}const zx=new Array(128),R0e=128,ym=130,f4=131,F_=132,p4=133;for(let e=0;e<zx.length;e++)zx[e]=pc(e)&&ym||xi(e)&&f4||kg(e)&&F_||O0e(e)&&p4||e||R0e;function fb(e){return e<128?zx[e]:F_}function Lu(e,t){return t<e.length?e.charCodeAt(t):0}function Fx(e,t,n){return n===13&&Lu(e,t+1)===10?2:1}function Iu(e,t,n){let r=e.charCodeAt(t);return z_(r)&&(r=r|32),r===n}function df(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const s=r.charCodeAt(i-t);let a=e.charCodeAt(i);if(z_(a)&&(a=a|32),a!==s)return!1}return!0}function M0e(e,t){for(;t>=0&&pc(e.charCodeAt(t));t--);return t+1}function $p(e,t){for(;t<e.length&&pc(e.charCodeAt(t));t++);return t}function pb(e,t){for(;t<e.length&&xi(e.charCodeAt(t));t++);return t}function Ku(e,t){if(t+=2,wl(Lu(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&wl(Lu(e,t));t++);const n=Lu(e,t);pc(n)&&(t+=Fx(e,t,n))}return t}function Dp(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!h4(n)){if(to(n,Lu(e,t+1))){t=Ku(e,t)-1;continue}break}}return t}function C0(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),xi(n)&&(t=pb(e,t+1),n=e.charCodeAt(t)),n===46&&xi(e.charCodeAt(t+1))&&(t+=2,t=pb(e,t)),Iu(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),xi(n)&&(t=pb(e,t+1+r+1))}return t}function mb(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}to(n,Lu(e,t+1))&&(t=Ku(e,t))}return t}function m4(e){if(e.length===1&&!wl(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const g4=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"],L0e=16*1024;function Cg(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,L0e)):e}const PT=10,I0e=12,NT=13;function OT(e){const t=e.source,n=t.length,r=t.length>0?d4(t.charCodeAt(0)):0,i=Cg(e.lines,n),s=Cg(e.columns,n);let a=e.startLine,o=e.startColumn;for(let c=r;c<n;c++){const h=t.charCodeAt(c);i[c]=a,s[c]=o++,(h===PT||h===NT||h===I0e)&&(h===NT&&c+1<n&&t.charCodeAt(c+1)===PT&&(c++,i[c]=a,s[c]=o),a++,o=1)}i[n]=a,s[n]=o,e.lines=i,e.columns=s,e.computed=!0}class $0e{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(t,n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||OT(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||OT(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}}const zs=16777215,Ho=24,D0e=new Map([[Fn,dr],[mi,dr],[Is,Oa],[Wi,ta]]);class z0e{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=Cg(this.offsetAndType,t.length+1),s=Cg(this.balance,t.length+1);let a=0,o=0,c=0,h=-1;for(this.offsetAndType=null,this.balance=null,n(t,(d,p,m)=>{switch(d){default:s[a]=r;break;case o:{let g=c&zs;for(c=s[g],o=c>>Ho,s[a]=g,s[g++]=a;g<a;g++)s[g]===r&&(s[g]=a);break}case mi:case Fn:case Is:case Wi:s[a]=c,o=D0e.get(d),c=o<<Ho|a;break}i[a++]=d<<Ho|m,h===-1&&(h=p)}),i[a]=hb<<Ho|r,s[a]=r,s[r]=r;c!==0;){const d=c&zs;c=s[d],s[d]=r}this.source=t,this.firstCharOffset=h===-1?0:h,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>Ho:hb}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&zs:this.source.length}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?df(this.source,this.offsetAndType[t-1]&zs,this.offsetAndType[t]&zs,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&zs:this.offsetAndType[this.tokenCount]&zs:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===Hn&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===Hn&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&zs,n=this.offsetAndType[n],this.tokenType=n>>Ho,this.tokenEnd=n&zs):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>Ho,this.tokenEnd=t&zs):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=hb,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Kr||this.tokenType===Zi;)this.next()}skipUntilBalanced(t,n){let r=t,i,s;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(s=r>0?this.offsetAndType[r-1]&zs:this.firstCharOffset,n(this.source.charCodeAt(s))){case 1:break e;case 2:r++;break e;default:this.balance[i]===r&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,s=this.offsetAndType[n],a=s&zs,o=s>>Ho;r=a,t(o,i,a,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,s)=>{t[s]={idx:s,type:g4[n],chunk:this.source.substring(r,i),balance:this.balance[s]}}),t}}function E0(e,t){function n(p){return p<o?e.charCodeAt(p):0}function r(){if(h=C0(e,h),gm(n(h),n(h+1),n(h+2))){d=In,h=Dp(e,h);return}if(n(h)===37){d=Fr,h++;return}d=mn}function i(){const p=h;if(h=Dp(e,h),df(e,p,h,"url")&&n(h)===40){if(h=$p(e,h+1),n(h)===34||n(h)===39){d=Fn,h=p+4;return}a();return}if(n(h)===40){d=Fn,h++;return}d=Ht}function s(p){for(p||(p=n(h++)),d=Na;h<e.length;h++){const m=e.charCodeAt(h);switch(fb(m)){case p:h++;return;case ym:if(Sg(m)){h+=Fx(e,h,m),d=S0;return}break;case 92:if(h===e.length-1)break;const g=n(h+1);Sg(g)?h+=Fx(e,h+1,g):to(m,g)&&(h=Ku(e,h)-1);break}}}function a(){for(d=Si,h=$p(e,h);h<e.length;h++){const p=e.charCodeAt(h);switch(fb(p)){case 41:h++;return;case ym:if(h=$p(e,h),n(h)===41||h>=e.length){h<e.length&&h++;return}h=mb(e,h),d=ls;return;case 34:case 39:case 40:case p4:h=mb(e,h),d=ls;return;case 92:if(to(p,n(h+1))){h=Ku(e,h)-1;break}h=mb(e,h),d=ls;return}}}e=String(e||"");const o=e.length;let c=d4(n(0)),h=c,d;for(;h<o;){const p=e.charCodeAt(h);switch(fb(p)){case ym:d=Kr,h=$p(e,h+1);break;case 34:s();break;case 35:h4(n(h+1))||to(n(h+1),n(h+2))?(d=Sr,h=Dp(e,h+1)):(d=Hn,h++);break;case 39:s();break;case 40:d=mi,h++;break;case 41:d=dr,h++;break;case 43:db(p,n(h+1),n(h+2))?r():(d=Hn,h++);break;case 44:d=lo,h++;break;case 45:db(p,n(h+1),n(h+2))?r():n(h+1)===45&&n(h+2)===62?(d=cs,h=h+3):gm(p,n(h+1),n(h+2))?i():(d=Hn,h++);break;case 46:db(p,n(h+1),n(h+2))?r():(d=Hn,h++);break;case 47:n(h+1)===42?(d=Zi,h=e.indexOf("*/",h+2),h=h===-1?e.length:h+2):(d=Hn,h++);break;case 58:d=Hi,h++;break;case 59:d=ms,h++;break;case 60:n(h+1)===33&&n(h+2)===45&&n(h+3)===45?(d=Mf,h=h+4):(d=Hn,h++);break;case 64:gm(n(h+1),n(h+2),n(h+3))?(d=li,h=Dp(e,h+1)):(d=Hn,h++);break;case 91:d=Is,h++;break;case 92:to(p,n(h+1))?i():(d=Hn,h++);break;case 93:d=Oa,h++;break;case 123:d=Wi,h++;break;case 125:d=ta,h++;break;case f4:r();break;case F_:i();break;default:d=Hn,h++}t(d,c,c=h)}}let Lc=null;class Un{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return Un.createItem(t)}allocateCursor(t,n){let r;return Lc!==null?(r=Lc,Lc=Lc.cursor,r.prev=t,r.next=n,r.cursor=this.cursor):r={prev:t,next:n,cursor:this.cursor},this.cursor=r,r}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Lc,Lc=t}updateCursors(t,n,r,i){let{cursor:s}=this;for(;s!==null;)s.prev===t&&(s.prev=n),s.next===r&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let n=this.head;n!==null;n=n.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let r of t){const i=Un.createItem(r);n!==null?n.next=i:this.head=i,i.prev=n,n=i}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,n=this){const r=this.allocateCursor(null,this.head);for(;r.next!==null;){const i=r.next;r.next=i.next,t.call(n,i.data,i,this)}this.releaseCursor()}forEachRight(t,n=this){const r=this.allocateCursor(this.tail,null);for(;r.prev!==null;){const i=r.prev;r.prev=i.prev,t.call(n,i.data,i,this)}this.releaseCursor()}reduce(t,n,r=this){let i=this.allocateCursor(null,this.head),s=n,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(t,n,r=this){let i=this.allocateCursor(this.tail,null),s=n,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}some(t,n=this){for(let r=this.head;r!==null;r=r.next)if(t.call(n,r.data,r,this))return!0;return!1}map(t,n=this){const r=new Un;for(let i=this.head;i!==null;i=i.next)r.appendData(t.call(n,i.data,i,this));return r}filter(t,n=this){const r=new Un;for(let i=this.head;i!==null;i=i.next)t.call(n,i.data,i,this)&&r.appendData(i.data);return r}nextUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(null,t);for(;i.next!==null;){const s=i.next;if(i.next=s.next,n.call(r,s.data,s,this))break}this.releaseCursor()}prevUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(t,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,n.call(r,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new Un;for(let n of this)t.appendData(n);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(Un.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(Un.createItem(t))}insert(t,n=null){if(n!==null)if(this.updateCursors(n.prev,t,n,t),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=t,n.prev=t,t.next=n,this.updateCursors(null,t)}else n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(Un.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(Un.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(Un.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,n){return t.head===null?this:(n!=null?(this.updateCursors(n.prev,t.tail,n,t.head),n.prev!==null?(n.prev.next=t.head,t.head.prev=n.prev):this.head=t.head,n.prev=t.tail,t.tail.next=n):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,n){"head"in n?this.insertList(n,t):this.insert(n,t),this.remove(t)}}function T0(e,t){const n=Object.create(SyntaxError.prototype),r=new Error;return Object.assign(n,{name:e,message:t,get stack(){return(r.stack||"").replace(/^(.+\n){1,3}/,`${e}: ${t}
`)}})}const gb=100,RT=60,MT="    ";function LT({source:e,line:t,column:n},r){function i(d,p){return s.slice(d,p).map((m,g)=>String(d+g+1).padStart(c)+" |"+m).join(`
`)}const s=e.split(/\r\n?|\n|\f/),a=Math.max(1,t-r)-1,o=Math.min(t+r,s.length+1),c=Math.max(4,String(o).length)+1;let h=0;n+=(MT.length-1)*(s[t-1].substr(0,n-1).match(/\t/g)||[]).length,n>gb&&(h=n-RT+3,n=RT-2);for(let d=a;d<=o;d++)d>=0&&d<s.length&&(s[d]=s[d].replace(/\t/g,MT),s[d]=(h>0&&s[d].length>h?"":"")+s[d].substr(h,gb-2)+(s[d].length>h+gb-1?"":""));return[i(a,t),new Array(n+c+2).join("-")+"^",i(t,o)].filter(Boolean).join(`
`)}function IT(e,t,n,r,i){return Object.assign(T0("SyntaxError",e),{source:t,offset:n,line:r,column:i,sourceFragment(a){return LT({source:t,line:r,column:i},isNaN(a)?0:a)},get formattedMessage(){return`Parse error: ${e}
`+LT({source:t,line:r,column:i},2)}})}function F0e(e){const t=this.createList();let n=!1;const r={recognizer:e};for(;!this.eof;){switch(this.tokenType){case Zi:this.next();continue;case Kr:n=!0,this.next();continue}let i=e.getNode.call(this,r);if(i===void 0)break;n&&(e.onWhiteSpace&&e.onWhiteSpace.call(this,i,t,r),n=!1),t.push(i)}return n&&e.onWhiteSpace&&e.onWhiteSpace.call(this,null,t,r),t}const $T=()=>{},B0e=33,U0e=35,yb=59,DT=123,zT=0;function H0e(e){return function(){return this[e]()}}function bb(e){const t=Object.create(null);for(const n in e){const r=e[n],i=r.parse||r;i&&(t[n]=i)}return t}function W0e(e){const t={context:Object.create(null),scope:Object.assign(Object.create(null),e.scope),atrule:bb(e.atrule),pseudo:bb(e.pseudo),node:bb(e.node)};for(const n in e.parseContext)switch(typeof e.parseContext[n]){case"function":t.context[n]=e.parseContext[n];break;case"string":t.context[n]=H0e(e.parseContext[n]);break}return{config:t,...t,...t.node}}function V0e(e){let t="",n="<unknown>",r=!1,i=$T,s=!1;const a=new $0e,o=Object.assign(new z0e,W0e(e||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:F0e,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(h){return h===DT?1:0},consumeUntilLeftCurlyBracketOrSemicolon(h){return h===DT||h===yb?1:0},consumeUntilExclamationMarkOrSemicolon(h){return h===B0e||h===yb?1:0},consumeUntilSemicolonIncluded(h){return h===yb?2:0},createList(){return new Un},createSingleNodeList(h){return new Un().appendData(h)},getFirstListNode(h){return h&&h.first},getLastListNode(h){return h&&h.last},parseWithFallback(h,d){const p=this.tokenIndex;try{return h.call(this)}catch(m){if(s)throw m;const g=d.call(this,p);return s=!0,i(m,g),s=!1,g}},lookupNonWSType(h){let d;do if(d=this.lookupType(h++),d!==Kr)return d;while(d!==zT);return zT},charCodeAt(h){return h>=0&&h<t.length?t.charCodeAt(h):0},substring(h,d){return t.substring(h,d)},substrToCursor(h){return this.source.substring(h,this.tokenStart)},cmpChar(h,d){return Iu(t,h,d)},cmpStr(h,d,p){return df(t,h,d,p)},consume(h){const d=this.tokenStart;return this.eat(h),this.substrToCursor(d)},consumeFunctionName(){const h=t.substring(this.tokenStart,this.tokenEnd-1);return this.eat(Fn),h},consumeNumber(h){const d=t.substring(this.tokenStart,C0(t,this.tokenStart));return this.eat(h),d},eat(h){if(this.tokenType!==h){const d=g4[h].slice(0,-6).replace(/-/g," ").replace(/^./,g=>g.toUpperCase());let p=`${/[[\](){}]/.test(d)?`"${d}"`:d} is expected`,m=this.tokenStart;switch(h){case Ht:this.tokenType===Fn||this.tokenType===Si?(m=this.tokenEnd-1,p="Identifier is expected but function found"):p="Identifier is expected";break;case Sr:this.isDelim(U0e)&&(this.next(),m++,p="Name is expected");break;case Fr:this.tokenType===mn&&(m=this.tokenEnd,p="Percent sign is expected");break}this.error(p,m)}this.next()},eatIdent(h){(this.tokenType!==Ht||this.lookupValue(0,h)===!1)&&this.error(`Identifier "${h}" is expected`),this.next()},eatDelim(h){this.isDelim(h)||this.error(`Delim "${String.fromCharCode(h)}" is expected`),this.next()},getLocation(h,d){return r?a.getLocationRange(h,d,n):null},getLocationFromList(h){if(r){const d=this.getFirstListNode(h),p=this.getLastListNode(h);return a.getLocationRange(d!==null?d.loc.start.offset-a.startOffset:this.tokenStart,p!==null?p.loc.end.offset-a.startOffset:this.tokenStart,n)}return null},error(h,d){const p=typeof d<"u"&&d<t.length?a.getLocation(d):this.eof?a.getLocation(M0e(t,t.length-1)):a.getLocation(this.tokenStart);throw new IT(h||"Unexpected input",t,p.offset,p.line,p.column)}});return Object.assign(function(h,d){t=h,d=d||{},o.setSource(t,E0),a.setSource(t,d.offset,d.line,d.column),n=d.filename||"<unknown>",r=!!d.positions,i=typeof d.onParseError=="function"?d.onParseError:$T,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in d?!!d.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in d?!!d.parseRulePrelude:!0,o.parseValue="parseValue"in d?!!d.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in d?!!d.parseCustomProperty:!1;const{context:p="default",onComment:m}=d;if(!(p in o.context))throw new Error("Unknown context `"+p+"`");typeof m=="function"&&o.forEachToken((v,w,C)=>{if(v===Zi){const x=o.getLocation(w,C),k=df(t,C-2,C,"*/")?t.slice(w+2,C-2):t.slice(w+2,C);m(k,x)}});const g=o.context[p].call(o,d);return o.eof||o.error(),g},{SyntaxError:IT,config:o.config})}const FT=new Set(["Atrule","Selector","Declaration"]);function G0e(e){const t=new $R,n={line:1,column:0},r={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,c=!1;const h=e.node;e.node=function(m){if(m.loc&&m.loc.start&&FT.has(m.type)){const g=m.loc.start.line,v=m.loc.start.column-1;(r.line!==g||r.column!==v)&&(r.line=g,r.column=v,n.line=a,n.column=o,c&&(c=!1,(n.line!==i.line||n.column!==i.column)&&t.addMapping(s)),c=!0,t.addMapping({source:m.loc.source,original:r,generated:n}))}h.call(this,m),c&&FT.has(m.type)&&(i.line=a,i.column=o)};const d=e.emit;e.emit=function(m,g,v){for(let w=0;w<m.length;w++)m.charCodeAt(w)===10?(a++,o=0):o++;d(m,g,v)};const p=e.result;return e.result=function(){return c&&t.addMapping(s),{css:p(),map:t}},e}const q0e=43,Y0e=45,vb=(e,t)=>{if(e===Hn&&(e=t),typeof e=="string"){const n=e.charCodeAt(0);return n>127?32768:n<<8}return e},y4=[[Ht,Ht],[Ht,Fn],[Ht,Si],[Ht,ls],[Ht,"-"],[Ht,mn],[Ht,Fr],[Ht,In],[Ht,cs],[Ht,mi],[li,Ht],[li,Fn],[li,Si],[li,ls],[li,"-"],[li,mn],[li,Fr],[li,In],[li,cs],[Sr,Ht],[Sr,Fn],[Sr,Si],[Sr,ls],[Sr,"-"],[Sr,mn],[Sr,Fr],[Sr,In],[Sr,cs],[In,Ht],[In,Fn],[In,Si],[In,ls],[In,"-"],[In,mn],[In,Fr],[In,In],[In,cs],["#",Ht],["#",Fn],["#",Si],["#",ls],["#","-"],["#",mn],["#",Fr],["#",In],["#",cs],["-",Ht],["-",Fn],["-",Si],["-",ls],["-","-"],["-",mn],["-",Fr],["-",In],["-",cs],[mn,Ht],[mn,Fn],[mn,Si],[mn,ls],[mn,mn],[mn,Fr],[mn,In],[mn,"%"],[mn,cs],["@",Ht],["@",Fn],["@",Si],["@",ls],["@","-"],["@",cs],[".",mn],[".",Fr],[".",In],["+",mn],["+",Fr],["+",In],["/","*"]],X0e=y4.concat([[Ht,Sr],[In,Sr],[Sr,Sr],[li,mi],[li,Na],[li,Hi],[Fr,Fr],[Fr,In],[Fr,Fn],[Fr,"-"],[dr,Ht],[dr,Fn],[dr,Fr],[dr,In],[dr,Sr],[dr,"-"]]);function b4(e){const t=new Set(e.map(([n,r])=>vb(n)<<16|vb(r)));return function(n,r,i){const s=vb(r,i),a=i.charCodeAt(0);return(a===Y0e&&r!==Ht&&r!==Fn&&r!==cs||a===q0e?t.has(n<<16|a<<8):t.has(n<<16|s))&&this.emit(" ",Kr,!0),s}}const K0e=b4(y4),v4=b4(X0e),BT=Object.freeze(Object.defineProperty({__proto__:null,safe:v4,spec:K0e},Symbol.toStringTag,{value:"Module"})),Z0e=92;function Q0e(e,t){if(typeof t=="function"){let n=null;e.children.forEach(r=>{n!==null&&t.call(this,n),this.node(r),n=r});return}e.children.forEach(this.node,this)}function J0e(e){E0(e,(t,n,r)=>{this.token(t,e.slice(n,r))})}function eye(e){const t=new Map;for(let n in e.node){const r=e.node[n];typeof(r.generate||r)=="function"&&t.set(n,r.generate||r)}return function(n,r){let i="",s=0,a={node(c){if(t.has(c.type))t.get(c.type).call(o,c);else throw new Error("Unknown node type: "+c.type)},tokenBefore:v4,token(c,h){s=this.tokenBefore(s,c,h),this.emit(h,c,!1),c===Hn&&h.charCodeAt(0)===Z0e&&this.emit(`
`,Kr,!0)},emit(c){i+=c},result(){return i}};r&&(typeof r.decorator=="function"&&(a=r.decorator(a)),r.sourceMap&&(a=G0e(a)),r.mode in BT&&(a.tokenBefore=BT[r.mode]));const o={node:c=>a.node(c),children:Q0e,token:(c,h)=>a.token(c,h),tokenize:J0e};return a.node(n),a.result()}}function tye(e){return{fromPlainObject(t){return e(t,{enter(n){n.children&&!(n.children instanceof Un)&&(n.children=new Un().fromArray(n.children))}}),t},toPlainObject(t){return e(t,{leave(n){n.children&&n.children instanceof Un&&(n.children=n.children.toArray())}}),t}}}const{hasOwnProperty:B_}=Object.prototype,cd=function(){};function UT(e){return typeof e=="function"?e:cd}function HT(e,t){return function(n,r,i){n.type===t&&e.call(this,n,r,i)}}function nye(e,t){const n=t.structure,r=[];for(const i in n){if(B_.call(n,i)===!1)continue;let s=n[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&r.push(a)}return r.length?{context:t.walkContext,fields:r}:null}function rye(e){const t={};for(const n in e.node)if(B_.call(e.node,n)){const r=e.node[n];if(!r.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");t[n]=nye(n,r)}return t}function WT(e,t){const n=e.fields.slice(),r=e.context,i=typeof r=="string";return t&&n.reverse(),function(s,a,o,c){let h;i&&(h=a[r],a[r]=s);for(const d of n){const p=s[d.name];if(!d.nullable||p){if(d.type==="list"){if(t?p.reduceRight(c,!1):p.reduce(c,!1))return!0}else if(o(p))return!0}}i&&(a[r]=h)}}function VT({StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}){return{Atrule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Rule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Declaration:{StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}}}function iye(e){const t=rye(e),n={},r={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const h in t)B_.call(t,h)&&t[h]!==null&&(n[h]=WT(t[h],!1),r[h]=WT(t[h],!0));const a=VT(n),o=VT(r),c=function(h,d){function p(x,k,P){const j=m.call(C,x,k,P);return j===i?!0:j===s?!1:!!(v.hasOwnProperty(x.type)&&v[x.type](x,C,p,w)||g.call(C,x,k,P)===i)}let m=cd,g=cd,v=n,w=(x,k,P,j)=>x||p(k,P,j);const C={break:i,skip:s,root:h,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof d=="function")m=d;else if(d&&(m=UT(d.enter),g=UT(d.leave),d.reverse&&(v=r),d.visit)){if(a.hasOwnProperty(d.visit))v=d.reverse?o[d.visit]:a[d.visit];else if(!t.hasOwnProperty(d.visit))throw new Error("Bad value `"+d.visit+"` for `visit` option (should be: "+Object.keys(t).sort().join(", ")+")");m=HT(m,d.visit),g=HT(g,d.visit)}if(m===cd&&g===cd)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");p(h)};return c.break=i,c.skip=s,c.find=function(h,d){let p=null;return c(h,function(m,g,v){if(d.call(this,m,g,v))return p=m,i}),p},c.findLast=function(h,d){let p=null;return c(h,{reverse:!0,enter(m,g,v){if(d.call(this,m,g,v))return p=m,i}}),p},c.findAll=function(h,d){const p=[];return c(h,function(m,g,v){d.call(this,m,g,v)&&p.push(m)}),p},c}function sye(e){return e}function aye(e){const{min:t,max:n,comma:r}=e;return t===0&&n===0?r?"#?":"*":t===0&&n===1?"?":t===1&&n===0?r?"#":"+":t===1&&n===1?"":(r?"#":"")+(t===n?"{"+t+"}":"{"+t+","+(n!==0?n:"")+"}")}function oye(e){switch(e.type){case"Range":return" ["+(e.min===null?"-":e.min)+","+(e.max===null?"":e.max)+"]";default:throw new Error("Unknown node type `"+e.type+"`")}}function lye(e,t,n,r){const i=e.combinator===" "||r?e.combinator:" "+e.combinator+" ",s=e.terms.map(a=>U_(a,t,n,r)).join(i);return e.explicit||n?(r||s[0]===","?"[":"[ ")+s+(r?"]":" ]"):s}function U_(e,t,n,r){let i;switch(e.type){case"Group":i=lye(e,t,n,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return U_(e.term,t,n,r)+t(aye(e),e);case"Type":i="<"+e.name+(e.opts?t(oye(e.opts),e.opts):"")+">";break;case"Property":i="<'"+e.name+"'>";break;case"Keyword":i=e.name;break;case"AtKeyword":i="@"+e.name;break;case"Function":i=e.name+"(";break;case"String":case"Token":i=e.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return t(i,e)}function H_(e,t){let n=sye,r=!1,i=!1;return typeof t=="function"?n=t:t&&(r=!!t.forceBraces,i=!!t.compact,typeof t.decorate=="function"&&(n=t.decorate)),U_(e,n,r,i)}const GT={offset:0,line:1,column:1};function cye(e,t){const n=e.tokens,r=e.longestMatch,i=r<n.length&&n[r].node||null,s=i!==t?i:null;let a=0,o=0,c=0,h="",d,p;for(let m=0;m<n.length;m++){const g=n[m].value;m===r&&(o=g.length,a=h.length),s!==null&&n[m].node===s&&(m<=r?c++:c=0),h+=g}return r===n.length||c>1?(d=zp(s||t,"end")||ud(GT,h),p=ud(d)):(d=zp(s,"start")||ud(zp(t,"start")||GT,h.slice(0,a)),p=zp(s,"end")||ud(d,h.substr(a,o))),{css:h,mismatchOffset:a,mismatchLength:o,start:d,end:p}}function zp(e,t){const n=e&&e.loc&&e.loc[t];return n?"line"in n?ud(n):n:null}function ud({offset:e,line:t,column:n},r){const i={offset:e,line:t,column:n};if(r){const s=r.split(/\n|\r\n?|\f/);i.offset+=r.length,i.line+=s.length-1,i.column=s.length===1?i.column+r.length:s.pop().length+1}return i}const Hh=function(e,t){const n=T0("SyntaxReferenceError",e+(t?" `"+t+"`":""));return n.reference=t,n},uye=function(e,t,n,r){const i=T0("SyntaxMatchError",e),{css:s,mismatchOffset:a,mismatchLength:o,start:c,end:h}=cye(r,n);return i.rawMessage=e,i.syntax=t?H_(t):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=e+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,c),i.loc={source:n&&n.loc&&n.loc.source||"<unknown>",start:c,end:h},i},Fp=new Map,Ic=new Map,Eg=45,Ea=hye,Zu=dye;function W_(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===Eg&&e.charCodeAt(t+1)===Eg}function x4(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===Eg&&e.charCodeAt(t+1)!==Eg){const n=e.indexOf("-",t+2);if(n!==-1)return e.substring(t,n+1)}return""}function hye(e){if(Fp.has(e))return Fp.get(e);const t=e.toLowerCase();let n=Fp.get(t);if(n===void 0){const r=W_(t,0),i=r?"":x4(t,0);n=Object.freeze({basename:t.substr(i.length),name:t,prefix:i,vendor:i,custom:r})}return Fp.set(e,n),n}function dye(e){if(Ic.has(e))return Ic.get(e);let t=e,n=e[0];n==="/"?n=e[1]==="/"?"//":"/":n!=="_"&&n!=="*"&&n!=="$"&&n!=="#"&&n!=="+"&&n!=="&"&&(n="");const r=W_(t,n.length);if(!r&&(t=t.toLowerCase(),Ic.has(t))){const o=Ic.get(t);return Ic.set(e,o),o}const i=r?"":x4(t,n.length),s=t.substr(0,n.length+i.length),a=Object.freeze({basename:t.substr(s.length),name:t.substr(n.length),hack:n,vendor:i,prefix:s,custom:r});return Ic.set(e,a),a}const w4=["initial","inherit","unset","revert","revert-layer"],ff=43,qa=45,xb=110,$c=!0,fye=!1;function Bx(e,t){return e!==null&&e.type===Hn&&e.value.charCodeAt(0)===t}function Rd(e,t,n){for(;e!==null&&(e.type===Kr||e.type===Zi);)e=n(++t);return t}function Go(e,t,n,r){if(!e)return 0;const i=e.value.charCodeAt(t);if(i===ff||i===qa){if(n)return 0;t++}for(;t<e.value.length;t++)if(!xi(e.value.charCodeAt(t)))return 0;return r+1}function wb(e,t,n){let r=!1,i=Rd(e,t,n);if(e=n(i),e===null)return t;if(e.type!==mn)if(Bx(e,ff)||Bx(e,qa)){if(r=!0,i=Rd(n(++i),i,n),e=n(i),e===null||e.type!==mn)return 0}else return t;if(!r){const s=e.value.charCodeAt(0);if(s!==ff&&s!==qa)return 0}return Go(e,r?0:1,r,i)}function pye(e,t){let n=0;if(!e)return 0;if(e.type===mn)return Go(e,0,fye,n);if(e.type===Ht&&e.value.charCodeAt(0)===qa){if(!Iu(e.value,1,xb))return 0;switch(e.value.length){case 2:return wb(t(++n),n,t);case 3:return e.value.charCodeAt(2)!==qa?0:(n=Rd(t(++n),n,t),e=t(n),Go(e,0,$c,n));default:return e.value.charCodeAt(2)!==qa?0:Go(e,3,$c,n)}}else if(e.type===Ht||Bx(e,ff)&&t(n+1).type===Ht){if(e.type!==Ht&&(e=t(++n)),e===null||!Iu(e.value,0,xb))return 0;switch(e.value.length){case 1:return wb(t(++n),n,t);case 2:return e.value.charCodeAt(1)!==qa?0:(n=Rd(t(++n),n,t),e=t(n),Go(e,0,$c,n));default:return e.value.charCodeAt(1)!==qa?0:Go(e,2,$c,n)}}else if(e.type===In){let r=e.value.charCodeAt(0),i=r===ff||r===qa?1:0,s=i;for(;s<e.value.length&&xi(e.value.charCodeAt(s));s++);return s===i||!Iu(e.value,s,xb)?0:s+1===e.value.length?wb(t(++n),n,t):e.value.charCodeAt(s+1)!==qa?0:s+2===e.value.length?(n=Rd(t(++n),n,t),e=t(n),Go(e,0,$c,n)):Go(e,s+2,$c,n)}return 0}const mye=43,_4=45,k4=63,gye=117;function Ux(e,t){return e!==null&&e.type===Hn&&e.value.charCodeAt(0)===t}function yye(e,t){return e.value.charCodeAt(0)===t}function hd(e,t,n){let r=0;for(let i=t;i<e.value.length;i++){const s=e.value.charCodeAt(i);if(s===_4&&n&&r!==0)return hd(e,t+r+1,!1),6;if(!wl(s)||++r>6)return 0}return r}function Bp(e,t,n){if(!e)return 0;for(;Ux(n(t),k4);){if(++e>6)return 0;t++}return t}function bye(e,t){let n=0;if(e===null||e.type!==Ht||!Iu(e.value,0,gye)||(e=t(++n),e===null))return 0;if(Ux(e,mye))return e=t(++n),e===null?0:e.type===Ht?Bp(hd(e,0,!0),++n,t):Ux(e,k4)?Bp(1,++n,t):0;if(e.type===mn){const r=hd(e,1,!0);return r===0?0:(e=t(++n),e===null?n:e.type===In||e.type===mn?!yye(e,_4)||!hd(e,1,!1)?0:n+1:Bp(r,n,t))}return e.type===In?Bp(hd(e,1,!0),++n,t):0}const vye=["calc(","-moz-calc(","-webkit-calc("],V_=new Map([[Fn,dr],[mi,dr],[Is,Oa],[Wi,ta]]),xye=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],wye=["deg","grad","rad","turn"],_ye=["s","ms"],kye=["hz","khz"],Sye=["dpi","dpcm","dppx","x"],Cye=["fr"],Eye=["db"],Tye=["st"];function Ta(e,t){return t<e.length?e.charCodeAt(t):0}function S4(e,t){return df(e,0,e.length,t)}function C4(e,t){for(let n=0;n<t.length;n++)if(S4(e,t[n]))return!0;return!1}function E4(e,t){return t!==e.length-2?!1:Ta(e,t)===92&&xi(Ta(e,t+1))}function j0(e,t,n){if(e&&e.type==="Range"){const r=Number(n!==void 0&&n!==t.length?t.substr(0,n):t);if(isNaN(r)||e.min!==null&&r<e.min&&typeof e.min!="string"||e.max!==null&&r>e.max&&typeof e.max!="string")return!0}return!1}function jye(e,t){let n=0,r=[],i=0;e:do{switch(e.type){case ta:case dr:case Oa:if(e.type!==n)break e;if(n=r.pop(),r.length===0){i++;break e}break;case Fn:case mi:case Is:case Wi:r.push(n),n=V_.get(e.type);break}i++}while(e=t(i));return i}function Fs(e){return function(t,n,r){return t===null?0:t.type===Fn&&C4(t.value,vye)?jye(t,n):e(t,n,r)}}function vr(e){return function(t){return t===null||t.type!==e?0:1}}function Aye(e){if(e===null||e.type!==Ht)return 0;const t=e.value.toLowerCase();return C4(t,w4)||S4(t,"default")?0:1}function Pye(e){return e===null||e.type!==Ht||Ta(e.value,0)!==45||Ta(e.value,1)!==45?0:1}function Nye(e){if(e===null||e.type!==Sr)return 0;const t=e.value.length;if(t!==4&&t!==5&&t!==7&&t!==9)return 0;for(let n=1;n<t;n++)if(!wl(Ta(e.value,n)))return 0;return 1}function Oye(e){return e===null||e.type!==Sr||!gm(Ta(e.value,1),Ta(e.value,2),Ta(e.value,3))?0:1}function Rye(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case S0:case ls:break e;case ta:case dr:case Oa:if(e.type!==n)break e;n=r.pop();break;case ms:if(n===0)break e;break;case Hn:if(n===0&&e.value==="!")break e;break;case Fn:case mi:case Is:case Wi:r.push(n),n=V_.get(e.type);break}i++}while(e=t(i));return i}function Mye(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case S0:case ls:break e;case ta:case dr:case Oa:if(e.type!==n)break e;n=r.pop();break;case Fn:case mi:case Is:case Wi:r.push(n),n=V_.get(e.type);break}i++}while(e=t(i));return i}function po(e){return e&&(e=new Set(e)),function(t,n,r){if(t===null||t.type!==In)return 0;const i=C0(t.value,0);if(e!==null){const s=t.value.indexOf("\\",i),a=s===-1||!E4(t.value,s)?t.value.substr(i):t.value.substring(i,s);if(e.has(a.toLowerCase())===!1)return 0}return j0(r,t.value,i)?0:1}}function Lye(e,t,n){return e===null||e.type!==Fr||j0(n,e.value,e.value.length-1)?0:1}function qT(e){return typeof e!="function"&&(e=function(){return 0}),function(t,n,r){return t!==null&&t.type===mn&&Number(t.value)===0?1:e(t,n,r)}}function Iye(e,t,n){if(e===null)return 0;const r=C0(e.value,0);return!(r===e.value.length)&&!E4(e.value,r)||j0(n,e.value,r)?0:1}function $ye(e,t,n){if(e===null||e.type!==mn)return 0;let r=Ta(e.value,0)===43||Ta(e.value,0)===45?1:0;for(;r<e.value.length;r++)if(!xi(Ta(e.value,r)))return 0;return j0(n,e.value,r)?0:1}const YT={"ident-token":vr(Ht),"function-token":vr(Fn),"at-keyword-token":vr(li),"hash-token":vr(Sr),"string-token":vr(Na),"bad-string-token":vr(S0),"url-token":vr(Si),"bad-url-token":vr(ls),"delim-token":vr(Hn),"number-token":vr(mn),"percentage-token":vr(Fr),"dimension-token":vr(In),"whitespace-token":vr(Kr),"CDO-token":vr(Mf),"CDC-token":vr(cs),"colon-token":vr(Hi),"semicolon-token":vr(ms),"comma-token":vr(lo),"[-token":vr(Is),"]-token":vr(Oa),"(-token":vr(mi),")-token":vr(dr),"{-token":vr(Wi),"}-token":vr(ta),string:vr(Na),ident:vr(Ht),"custom-ident":Aye,"custom-property-name":Pye,"hex-color":Nye,"id-selector":Oye,"an-plus-b":pye,urange:bye,"declaration-value":Rye,"any-value":Mye,dimension:Fs(po(null)),angle:Fs(po(wye)),decibel:Fs(po(Eye)),frequency:Fs(po(kye)),flex:Fs(po(Cye)),length:Fs(qT(po(xye))),resolution:Fs(po(Sye)),semitones:Fs(po(Tye)),time:Fs(po(_ye)),percentage:Fs(Lye),zero:qT(),number:Fs(Iye),integer:Fs($ye)};function Dye(e,t,n){return Object.assign(T0("SyntaxError",e),{input:t,offset:n,rawMessage:e,message:e+`
  `+t+`
--`+new Array((n||t.length)+1).join("-")+"^"})}const zye=9,Fye=10,Bye=12,Uye=13,Hye=32;class Wye{constructor(t){this.str=t,this.pos=0}charCodeAt(t){return t<this.str.length?this.str.charCodeAt(t):0}charCode(){return this.charCodeAt(this.pos)}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(t){return this.charCodeAt(this.findWsEnd(t))}findWsEnd(t){for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n!==Uye&&n!==Fye&&n!==Bye&&n!==Hye&&n!==zye)break}return t}substringToPos(t){return this.str.substring(this.pos,this.pos=t)}eat(t){this.charCode()!==t&&this.error("Expect `"+String.fromCharCode(t)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(t){throw new Dye(t,this.str,this.pos)}}const Vye=9,Gye=10,qye=12,Yye=13,Xye=32,T4=33,G_=35,XT=38,Tg=39,j4=40,Kye=41,A4=42,q_=43,Y_=44,KT=45,X_=60,P4=62,Hx=63,Zye=64,A0=91,K_=93,jg=123,ZT=124,QT=125,JT=8734,pf=new Uint8Array(128).map((e,t)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(t))?1:0),e5={" ":1,"&&":2,"||":3,"|":4};function Ag(e){return e.substringToPos(e.findWsEnd(e.pos))}function Qu(e){let t=e.pos;for(;t<e.str.length;t++){const n=e.str.charCodeAt(t);if(n>=128||pf[n]===0)break}return e.pos===t&&e.error("Expect a keyword"),e.substringToPos(t)}function Pg(e){let t=e.pos;for(;t<e.str.length;t++){const n=e.str.charCodeAt(t);if(n<48||n>57)break}return e.pos===t&&e.error("Expect a number"),e.substringToPos(t)}function Qye(e){const t=e.str.indexOf("'",e.pos+1);return t===-1&&(e.pos=e.str.length,e.error("Expect an apostrophe")),e.substringToPos(t+1)}function t5(e){let t=null,n=null;return e.eat(jg),t=Pg(e),e.charCode()===Y_?(e.pos++,e.charCode()!==QT&&(n=Pg(e))):n=t,e.eat(QT),{min:Number(t),max:n?Number(n):0}}function Jye(e){let t=null,n=!1;switch(e.charCode()){case A4:e.pos++,t={min:0,max:0};break;case q_:e.pos++,t={min:1,max:0};break;case Hx:e.pos++,t={min:0,max:1};break;case G_:e.pos++,n=!0,e.charCode()===jg?t=t5(e):e.charCode()===Hx?(e.pos++,t={min:0,max:0}):t={min:1,max:0};break;case jg:t=t5(e);break;default:return null}return{type:"Multiplier",comma:n,min:t.min,max:t.max,term:null}}function Ju(e,t){const n=Jye(e);return n!==null?(n.term=t,e.charCode()===G_&&e.charCodeAt(e.pos-1)===q_?Ju(e,n):n):t}function _b(e){const t=e.peek();return t===""?null:{type:"Token",value:t}}function ebe(e){let t;return e.eat(X_),e.eat(Tg),t=Qu(e),e.eat(Tg),e.eat(P4),Ju(e,{type:"Property",name:t})}function tbe(e){let t=null,n=null,r=1;return e.eat(A0),e.charCode()===KT&&(e.peek(),r=-1),r==-1&&e.charCode()===JT?e.peek():(t=r*Number(Pg(e)),pf[e.charCode()]!==0&&(t+=Qu(e))),Ag(e),e.eat(Y_),Ag(e),e.charCode()===JT?e.peek():(r=1,e.charCode()===KT&&(e.peek(),r=-1),n=r*Number(Pg(e)),pf[e.charCode()]!==0&&(n+=Qu(e))),e.eat(K_),{type:"Range",min:t,max:n}}function nbe(e){let t,n=null;return e.eat(X_),t=Qu(e),e.charCode()===j4&&e.nextCharCode()===Kye&&(e.pos+=2,t+="()"),e.charCodeAt(e.findWsEnd(e.pos))===A0&&(Ag(e),n=tbe(e)),e.eat(P4),Ju(e,{type:"Type",name:t,opts:n})}function rbe(e){const t=Qu(e);return e.charCode()===j4?(e.pos++,{type:"Function",name:t}):Ju(e,{type:"Keyword",name:t})}function ibe(e,t){function n(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let r;for(t=Object.keys(t).sort((i,s)=>e5[i]-e5[s]);t.length>0;){r=t.shift();let i=0,s=0;for(;i<e.length;i++){const a=e[i];a.type==="Combinator"&&(a.value===r?(s===-1&&(s=i-1),e.splice(i,1),i--):(s!==-1&&i-s>1&&(e.splice(s,i-s,n(e.slice(s,i),r)),i=s+1),s=-1))}s!==-1&&t.length&&e.splice(s,i-s,n(e.slice(s,i),r))}return r}function N4(e){const t=[],n={};let r,i=null,s=e.pos;for(;r=abe(e);)r.type!=="Spaces"&&(r.type==="Combinator"?((i===null||i.type==="Combinator")&&(e.pos=s,e.error("Unexpected combinator")),n[r.value]=!0):i!==null&&i.type!=="Combinator"&&(n[" "]=!0,t.push({type:"Combinator",value:" "})),t.push(r),i=r,s=e.pos);return i!==null&&i.type==="Combinator"&&(e.pos-=s,e.error("Unexpected combinator")),{type:"Group",terms:t,combinator:ibe(t,n)||" ",disallowEmpty:!1,explicit:!1}}function sbe(e){let t;return e.eat(A0),t=N4(e),e.eat(K_),t.explicit=!0,e.charCode()===T4&&(e.pos++,t.disallowEmpty=!0),t}function abe(e){let t=e.charCode();if(t<128&&pf[t]===1)return rbe(e);switch(t){case K_:break;case A0:return Ju(e,sbe(e));case X_:return e.nextCharCode()===Tg?ebe(e):nbe(e);case ZT:return{type:"Combinator",value:e.substringToPos(e.pos+(e.nextCharCode()===ZT?2:1))};case XT:return e.pos++,e.eat(XT),{type:"Combinator",value:"&&"};case Y_:return e.pos++,{type:"Comma"};case Tg:return Ju(e,{type:"String",value:Qye(e)});case Xye:case Vye:case Gye:case Yye:case qye:return{type:"Spaces",value:Ag(e)};case Zye:return t=e.nextCharCode(),t<128&&pf[t]===1?(e.pos++,{type:"AtKeyword",name:Qu(e)}):_b(e);case A4:case q_:case Hx:case G_:case T4:break;case jg:if(t=e.nextCharCode(),t<48||t>57)return _b(e);break;default:return _b(e)}}function O4(e){const t=new Wye(e),n=N4(t);return t.pos!==e.length&&t.error("Unexpected input"),n.terms.length===1&&n.terms[0].type==="Group"?n.terms[0]:n}const dd=function(){};function n5(e){return typeof e=="function"?e:dd}function obe(e,t,n){function r(a){switch(i.call(n,a),a.type){case"Group":a.terms.forEach(r);break;case"Multiplier":r(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(n,a)}let i=dd,s=dd;if(typeof t=="function"?i=t:t&&(i=n5(t.enter),s=n5(t.leave)),i===dd&&s===dd)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");r(e)}const lbe={decorator(e){const t=[];let n=null;return{...e,node(r){const i=n;n=r,e.node.call(this,r),n=i},emit(r,i,s){t.push({type:i,value:r,node:s?null:n})},result(){return t}}}};function cbe(e){const t=[];return E0(e,(n,r,i)=>t.push({type:n,value:e.slice(r,i),node:null})),t}function ube(e,t){return typeof e=="string"?cbe(e):t.generate(e,lbe)}const Jn={type:"Match"},hr={type:"Mismatch"},Z_={type:"DisallowEmpty"},hbe=40,dbe=41;function Ii(e,t,n){return t===Jn&&n===hr||e===Jn&&t===Jn&&n===Jn?e:(e.type==="If"&&e.else===hr&&t===Jn&&(t=e.then,e=e.match),{type:"If",match:e,then:t,else:n})}function R4(e){return e.length>2&&e.charCodeAt(e.length-2)===hbe&&e.charCodeAt(e.length-1)===dbe}function r5(e){return e.type==="Keyword"||e.type==="AtKeyword"||e.type==="Function"||e.type==="Type"&&R4(e.name)}function Wx(e,t,n){switch(e){case" ":{let r=Jn;for(let i=t.length-1;i>=0;i--){const s=t[i];r=Ii(s,r,hr)}return r}case"|":{let r=hr,i=null;for(let s=t.length-1;s>=0;s--){let a=t[s];if(r5(a)&&(i===null&&s>0&&r5(t[s-1])&&(i=Object.create(null),r=Ii({type:"Enum",map:i},Jn,r)),i!==null)){const o=(R4(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,r=Ii(a,Jn,r)}return r}case"&&":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!0};let r=hr;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Wx(e,t.filter(function(o){return o!==s}),!1):a=Jn,r=Ii(s,a,r)}return r}case"||":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!1};let r=n?Jn:hr;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Wx(e,t.filter(function(o){return o!==s}),!0):a=Jn,r=Ii(s,a,r)}return r}}}function fbe(e){let t=Jn,n=Q_(e.term);if(e.max===0)n=Ii(n,Z_,hr),t=Ii(n,null,hr),t.then=Ii(Jn,Jn,t),e.comma&&(t.then.else=Ii({type:"Comma",syntax:e},t,hr));else for(let r=e.min||1;r<=e.max;r++)e.comma&&t!==Jn&&(t=Ii({type:"Comma",syntax:e},t,hr)),t=Ii(n,Ii(Jn,Jn,t),hr);if(e.min===0)t=Ii(Jn,Jn,t);else for(let r=0;r<e.min-1;r++)e.comma&&t!==Jn&&(t=Ii({type:"Comma",syntax:e},t,hr)),t=Ii(n,t,hr);return t}function Q_(e){if(typeof e=="function")return{type:"Generic",fn:e};switch(e.type){case"Group":{let t=Wx(e.combinator,e.terms.map(Q_),!1);return e.disallowEmpty&&(t=Ii(t,Z_,hr)),t}case"Multiplier":return fbe(e);case"Type":case"Property":return{type:e.type,name:e.name,syntax:e};case"Keyword":return{type:e.type,name:e.name.toLowerCase(),syntax:e};case"AtKeyword":return{type:e.type,name:"@"+e.name.toLowerCase(),syntax:e};case"Function":return{type:e.type,name:e.name.toLowerCase()+"(",syntax:e};case"String":return e.value.length===3?{type:"Token",value:e.value.charAt(1),syntax:e}:{type:e.type,value:e.value.substr(1,e.value.length-2).replace(/\\'/g,"'"),syntax:e};case"Token":return{type:e.type,value:e.value,syntax:e};case"Comma":return{type:e.type,syntax:e};default:throw new Error("Unknown node type:",e.type)}}function Vx(e,t){return typeof e=="string"&&(e=O4(e)),{type:"MatchGraph",match:Q_(e),syntax:t||null,source:e}}const{hasOwnProperty:i5}=Object.prototype,pbe=0,mbe=1,Gx=2,M4=3,s5="Match",gbe="Mismatch",ybe="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",a5=15e3;function bbe(e){let t=null,n=null,r=e;for(;r!==null;)n=r.prev,r.prev=t,t=r,r=n;return t}function kb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=t.charCodeAt(n);let i=e.charCodeAt(n);if(i>=65&&i<=90&&(i=i|32),i!==r)return!1}return!0}function vbe(e){return e.type!==Hn?!1:e.value!=="?"}function o5(e){return e===null?!0:e.type===lo||e.type===Fn||e.type===mi||e.type===Is||e.type===Wi||vbe(e)}function l5(e){return e===null?!0:e.type===dr||e.type===Oa||e.type===ta||e.type===Hn&&e.value==="/"}function xbe(e,t,n){function r(){do k++,x=k<e.length?e[k]:null;while(x!==null&&(x.type===Kr||x.type===Zi))}function i(M){const S=k+M;return S<e.length?e[S]:null}function s(M,S){return{nextState:M,matchStack:j,syntaxStack:p,thenStack:m,tokenIndex:k,prev:S}}function a(M){m={nextState:M,matchStack:j,syntaxStack:p,prev:m}}function o(M){g=s(M,g)}function c(){j={type:mbe,syntax:t.syntax,token:x,prev:j},r(),v=null,k>P&&(P=k)}function h(){p={syntax:t.syntax,opts:t.syntax.opts||p!==null&&p.opts||null,prev:p},j={type:Gx,syntax:t.syntax,token:j.token,prev:j}}function d(){j.type===Gx?j=j.prev:j={type:M4,syntax:p.syntax,token:j.token,prev:j},p=p.prev}let p=null,m=null,g=null,v=null,w=0,C=null,x=null,k=-1,P=0,j={type:pbe,syntax:null,token:null,prev:null};for(r();C===null&&++w<a5;)switch(t.type){case"Match":if(m===null){if(x!==null&&(k!==e.length-1||x.value!=="\\0"&&x.value!=="\\9")){t=hr;break}C=s5;break}if(t=m.nextState,t===Z_)if(m.matchStack===j){t=hr;break}else t=Jn;for(;m.syntaxStack!==p;)d();m=m.prev;break;case"Mismatch":if(v!==null&&v!==!1)(g===null||k>g.tokenIndex)&&(g=v,v=!1);else if(g===null){C=gbe;break}t=g.nextState,m=g.thenStack,p=g.syntaxStack,j=g.matchStack,k=g.tokenIndex,x=k<e.length?e[k]:null,g=g.prev;break;case"MatchGraph":t=t.match;break;case"If":t.else!==hr&&o(t.else),t.then!==Jn&&a(t.then),t=t.match;break;case"MatchOnce":t={type:"MatchOnceBuffer",syntax:t,index:0,mask:0};break;case"MatchOnceBuffer":{const B=t.syntax.terms;if(t.index===B.length){if(t.mask===0||t.syntax.all){t=hr;break}t=Jn;break}if(t.mask===(1<<B.length)-1){t=Jn;break}for(;t.index<B.length;t.index++){const D=1<<t.index;if(!(t.mask&D)){o(t),a({type:"AddMatchOnce",syntax:t.syntax,mask:t.mask|D}),t=B[t.index++];break}}break}case"AddMatchOnce":t={type:"MatchOnceBuffer",syntax:t.syntax,index:0,mask:t.mask};break;case"Enum":if(x!==null){let B=x.value.toLowerCase();if(B.indexOf("\\")!==-1&&(B=B.replace(/\\[09].*$/,"")),i5.call(t.map,B)){t=t.map[B];break}}t=hr;break;case"Generic":{const B=p!==null?p.opts:null,D=k+Math.floor(t.fn(x,i,B));if(!isNaN(D)&&D>k){for(;k<D;)c();t=Jn}else t=hr;break}case"Type":case"Property":{const B=t.type==="Type"?"types":"properties",D=i5.call(n,B)?n[B][t.name]:null;if(!D||!D.match)throw new Error("Bad syntax reference: "+(t.type==="Type"?"<"+t.name+">":"<'"+t.name+"'>"));if(v!==!1&&x!==null&&t.type==="Type"&&(t.name==="custom-ident"&&x.type===Ht||t.name==="length"&&x.value==="0")){v===null&&(v=s(t,g)),t=hr;break}h(),t=D.match;break}case"Keyword":{const B=t.name;if(x!==null){let D=x.value;if(D.indexOf("\\")!==-1&&(D=D.replace(/\\[09].*$/,"")),kb(D,B)){c(),t=Jn;break}}t=hr;break}case"AtKeyword":case"Function":if(x!==null&&kb(x.value,t.name)){c(),t=Jn;break}t=hr;break;case"Token":if(x!==null&&x.value===t.value){c(),t=Jn;break}t=hr;break;case"Comma":x!==null&&x.type===lo?o5(j.token)?t=hr:(c(),t=l5(x)?hr:Jn):t=o5(j.token)||l5(x)?Jn:hr;break;case"String":let M="",S=k;for(;S<e.length&&M.length<t.value.length;S++)M+=e[S].value;if(kb(M,t.value)){for(;k<S;)c();t=Jn}else t=hr;break;default:throw new Error("Unknown node type: "+t.type)}switch(C){case null:console.warn("[csstree-match] BREAK after "+a5+" iterations"),C=ybe,j=null;break;case s5:for(;p!==null;)d();break;default:j=null}return{tokens:e,reason:C,iterations:w,match:j,longestMatch:P}}function c5(e,t,n){const r=xbe(e,t,n||{});if(r.match===null)return r;let i=r.match,s=r.match={syntax:t.syntax||null,match:[]};const a=[s];for(i=bbe(i).prev;i!==null;){switch(i.type){case Gx:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case M4:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return r}function L4(e){function t(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function n(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(n(i.match[s]))return t(i.syntax)&&r.unshift(i.syntax),!0}else if(i.node===e)return r=t(i.syntax)?[i.syntax]:[],!0;return!1}let r=null;return this.matched!==null&&n(this.matched),r}function wbe(e,t){return J_(this,e,n=>n.type==="Type"&&n.name===t)}function _be(e,t){return J_(this,e,n=>n.type==="Property"&&n.name===t)}function kbe(e){return J_(this,e,t=>t.type==="Keyword")}function J_(e,t,n){const r=L4.call(e,t);return r===null?!1:r.some(n)}const Sbe=Object.freeze(Object.defineProperty({__proto__:null,getTrace:L4,isKeyword:kbe,isProperty:_be,isType:wbe},Symbol.toStringTag,{value:"Module"}));function I4(e){return"node"in e?e.node:I4(e.match[0])}function $4(e){return"node"in e?e.node:$4(e.match[e.match.length-1])}function u5(e,t,n,r,i){function s(o){if(o.syntax!==null&&o.syntax.type===r&&o.syntax.name===i){const c=I4(o),h=$4(o);e.syntax.walk(t,function(d,p,m){if(d===c){const g=new Un;do{if(g.appendData(p.data),p.data===h)break;p=p.next}while(p!==null);a.push({parent:m,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return n.matched!==null&&s(n.matched),a}const{hasOwnProperty:Md}=Object.prototype;function Sb(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&e>=0}function h5(e){return!!e&&Sb(e.offset)&&Sb(e.line)&&Sb(e.column)}function Cbe(e,t){return function(r,i){if(!r||r.constructor!==Object)return i(r,"Type of node should be an Object");for(let s in r){let a=!0;if(Md.call(r,s)!==!1){if(s==="type")r.type!==e&&i(r,"Wrong node type `"+r.type+"`, expected `"+e+"`");else if(s==="loc"){if(r.loc===null)continue;if(r.loc&&r.loc.constructor===Object)if(typeof r.loc.source!="string")s+=".source";else if(!h5(r.loc.start))s+=".start";else if(!h5(r.loc.end))s+=".end";else continue;a=!1}else if(t.hasOwnProperty(s)){a=!1;for(let o=0;!a&&o<t[s].length;o++){const c=t[s][o];switch(c){case String:a=typeof r[s]=="string";break;case Boolean:a=typeof r[s]=="boolean";break;case null:a=r[s]===null;break;default:typeof c=="string"?a=r[s]&&r[s].type===c:Array.isArray(c)&&(a=r[s]instanceof Un)}}}else i(r,"Unknown field `"+s+"` for "+e+" node type");a||i(r,"Bad value for `"+e+"."+s+"`")}}for(const s in t)Md.call(t,s)&&Md.call(r,s)===!1&&i(r,"Field `"+e+"."+s+"` is missed")}}function Ebe(e,t){const n=t.structure,r={type:String,loc:!0},i={type:'"'+e+'"'};for(const s in n){if(Md.call(n,s)===!1)continue;const a=[],o=r[s]=Array.isArray(n[s])?n[s].slice():[n[s]];for(let c=0;c<o.length;c++){const h=o[c];if(h===String||h===Boolean)a.push(h.name);else if(h===null)a.push("null");else if(typeof h=="string")a.push("<"+h+">");else if(Array.isArray(h))a.push("List");else throw new Error("Wrong value `"+h+"` in `"+e+"."+s+"` structure definition")}i[s]=a.join(" | ")}return{docs:i,check:Cbe(e,r)}}function Tbe(e){const t={};if(e.node){for(const n in e.node)if(Md.call(e.node,n)){const r=e.node[n];if(r.structure)t[n]=Ebe(n,r);else throw new Error("Missed `structure` field in `"+n+"` node type definition")}}return t}const jbe=Vx(w4.join(" | "));function qx(e,t,n){const r={};for(const i in e)e[i].syntax&&(r[i]=n?e[i].syntax:H_(e[i].syntax,{compact:t}));return r}function Abe(e,t,n){const r={};for(const[i,s]of Object.entries(e))r[i]={prelude:s.prelude&&(n?s.prelude.syntax:H_(s.prelude.syntax,{compact:t})),descriptors:s.descriptors&&qx(s.descriptors,t,n)};return r}function Pbe(e){for(let t=0;t<e.length;t++)if(e[t].value.toLowerCase()==="var(")return!0;return!1}function ga(e,t,n){return{matched:e,iterations:n,error:t,...Sbe}}function Dc(e,t,n,r){const i=ube(n,e.syntax);let s;return Pbe(i)?ga(null,new Error("Matching for a tree with var() is not supported")):(r&&(s=c5(i,e.cssWideKeywordsSyntax,e)),(!r||!s.match)&&(s=c5(i,t.match,e),!s.match)?ga(null,new uye(s.reason,t.syntax,n,s),s.iterations):ga(s.match,null,s.iterations))}class d5{constructor(t,n,r){if(this.cssWideKeywordsSyntax=jbe,this.syntax=n,this.generic=!1,this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=r||Tbe(t),t){if(t.types)for(const i in t.types)this.addType_(i,t.types[i]);if(t.generic){this.generic=!0;for(const i in YT)this.addType_(i,YT[i])}if(t.atrules)for(const i in t.atrules)this.addAtrule_(i,t.atrules[i]);if(t.properties)for(const i in t.properties)this.addProperty_(i,t.properties[i])}}checkStructure(t){function n(s,a){i.push({node:s,message:a})}const r=this.structure,i=[];return this.syntax.walk(t,function(s){r.hasOwnProperty(s.type)?r[s.type].check(s,n):n(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(t,n,r,i=null){const s={type:n,name:r},a={type:n,name:r,parent:i,serializable:typeof t=="string"||t&&typeof t.type=="string",syntax:null,match:null};return typeof t=="function"?a.match=Vx(t,s):(typeof t=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:O4(t)}),a.syntax}}):a.syntax=t,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:Vx(a.syntax,s)}),a.match}})),a}addAtrule_(t,n){n&&(this.atrules[t]={type:"Atrule",name:t,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",t):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((r,i)=>(r[i]=this.createDescriptor(n.descriptors[i],"AtruleDescriptor",i,t),r),Object.create(null)):null})}addProperty_(t,n){n&&(this.properties[t]=this.createDescriptor(n,"Property",t))}addType_(t,n){n&&(this.types[t]=this.createDescriptor(n,"Type",t))}checkAtruleName(t){if(!this.getAtrule(t))return new Hh("Unknown at-rule","@"+t)}checkAtrulePrelude(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t);if(!i.prelude&&n)return new SyntaxError("At-rule `@"+t+"` should not contain a prelude");if(i.prelude&&!n&&!Dc(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+t+"` should contain a prelude")}checkAtruleDescriptorName(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t),s=Ea(n);if(!i.descriptors)return new SyntaxError("At-rule `@"+t+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new Hh("Unknown at-rule descriptor",n)}checkPropertyName(t){if(!this.getProperty(t))return new Hh("Unknown property",t)}matchAtrulePrelude(t,n){const r=this.checkAtrulePrelude(t,n);if(r)return ga(null,r);const i=this.getAtrule(t);return i.prelude?Dc(this,i.prelude,n||"",!1):ga(null,null)}matchAtruleDescriptor(t,n,r){const i=this.checkAtruleDescriptorName(t,n);if(i)return ga(null,i);const s=this.getAtrule(t),a=Ea(n);return Dc(this,s.descriptors[a.name]||s.descriptors[a.basename],r,!1)}matchDeclaration(t){return t.type!=="Declaration"?ga(null,new Error("Not a Declaration node")):this.matchProperty(t.property,t.value)}matchProperty(t,n){if(Zu(t).custom)return ga(null,new Error("Lexer matching doesn't applicable for custom properties"));const r=this.checkPropertyName(t);return r?ga(null,r):Dc(this,this.getProperty(t),n,!0)}matchType(t,n){const r=this.getType(t);return r?Dc(this,r,n,!1):ga(null,new Hh("Unknown type",t))}match(t,n){return typeof t!="string"&&(!t||!t.type)?ga(null,new Hh("Bad syntax")):((typeof t=="string"||!t.match)&&(t=this.createDescriptor(t,"Type","anonymous")),Dc(this,t,n,!1))}findValueFragments(t,n,r,i){return u5(this,n,this.matchProperty(t,n),r,i)}findDeclarationValueFragments(t,n,r){return u5(this,t.value,this.matchDeclaration(t),n,r)}findAllFragments(t,n,r){const i=[];return this.syntax.walk(t,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,n,r))}}),i}getAtrule(t,n=!0){const r=Ea(t);return(r.vendor&&n?this.atrules[r.name]||this.atrules[r.basename]:this.atrules[r.name])||null}getAtrulePrelude(t,n=!0){const r=this.getAtrule(t,n);return r&&r.prelude||null}getAtruleDescriptor(t,n){return this.atrules.hasOwnProperty(t)&&this.atrules.declarators&&this.atrules[t].declarators[n]||null}getProperty(t,n=!0){const r=Zu(t);return(r.vendor&&n?this.properties[r.name]||this.properties[r.basename]:this.properties[r.name])||null}getType(t){return hasOwnProperty.call(this.types,t)?this.types[t]:null}validate(){function t(i,s,a,o){if(a.has(s))return a.get(s);a.set(s,!1),o.syntax!==null&&obe(o.syntax,function(c){if(c.type!=="Type"&&c.type!=="Property")return;const h=c.type==="Type"?i.types:i.properties,d=c.type==="Type"?n:r;(!hasOwnProperty.call(h,c.name)||t(i,c.name,d,h[c.name]))&&a.set(s,!0)},this)}let n=new Map,r=new Map;for(const i in this.types)t(this,i,n,this.types[i]);for(const i in this.properties)t(this,i,r,this.properties[i]);return n=[...n.keys()].filter(i=>n.get(i)),r=[...r.keys()].filter(i=>r.get(i)),n.length||r.length?{types:n,properties:r}:null}dump(t,n){return{generic:this.generic,types:qx(this.types,!n,t),properties:qx(this.properties,!n,t),atrules:Abe(this.atrules,!n,t)}}toString(){return JSON.stringify(this.dump())}}const{hasOwnProperty:$u}=Object.prototype,Nbe={generic:!0,types:Yx,atrules:{prelude:p5,descriptors:p5},properties:Yx,parseContext:Obe,scope:z4,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function P0(e){return e&&e.constructor===Object}function D4(e){return P0(e)?{...e}:e}function Obe(e,t){return Object.assign(e,t)}function z4(e,t){for(const n in t)$u.call(t,n)&&(P0(e[n])?z4(e[n],t[n]):e[n]=D4(t[n]));return e}function f5(e,t){return typeof t=="string"&&/^\s*\|/.test(t)?typeof e=="string"?e+t:t.replace(/^\s*\|\s*/,""):t||null}function Yx(e,t){if(typeof t=="string")return f5(e,t);const n={...e};for(let r in t)$u.call(t,r)&&(n[r]=f5($u.call(e,r)?e[r]:void 0,t[r]));return n}function p5(e,t){const n=Yx(e,t);return!P0(n)||Object.keys(n).length?n:null}function fd(e,t,n){for(const r in n)if($u.call(n,r)!==!1){if(n[r]===!0)$u.call(t,r)&&(e[r]=D4(t[r]));else if(n[r]){if(typeof n[r]=="function"){const i=n[r];e[r]=i({},e[r]),e[r]=i(e[r]||{},t[r])}else if(P0(n[r])){const i={};for(let s in e[r])i[s]=fd({},e[r][s],n[r]);for(let s in t[r])i[s]=fd(i[s]||{},t[r][s],n[r]);e[r]=i}else if(Array.isArray(n[r])){const i={},s=n[r].reduce(function(a,o){return a[o]=!0,a},{});for(const[a,o]of Object.entries(e[r]||{}))i[a]={},o&&fd(i[a],o,s);for(const a in t[r])$u.call(t[r],a)&&(i[a]||(i[a]={}),t[r]&&t[r][a]&&fd(i[a],t[r][a],s));e[r]=i}}}return e}const Xx=(e,t)=>fd(e,t,Nbe);function F4(e){const t=V0e(e),n=iye(e),r=eye(e),{fromPlainObject:i,toPlainObject:s}=tye(n),a={lexer:null,createLexer:o=>new d5(o,a,a.lexer.structure),tokenize:E0,parse:t,generate:r,walk:n,find:n.find,findLast:n.findLast,findAll:n.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const c=Xx({},e);return F4(typeof o=="function"?o(c,Object.assign):Xx(c,o))}};return a.lexer=new d5({generic:!0,types:e.types,atrules:e.atrules,properties:e.properties,node:e.node},a),a}const Rbe=e=>F4(Xx({},e)),Mbe={generic:!0,types:{"absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|( <calc-sum> )","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>",combinator:"'>'|'+'|'~'|['||']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<compound-selector> [<combinator>? <compound-selector>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fit-content()":"fit-content( [<length>|<percentage>] )","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value> )]|( <ident> <any-value> )","generic-family":"serif|sans-serif|cursive|fantasy|monospace|-apple-system","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length>|<percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length>|<percentage>|min-content|max-content|auto] , [<length>|<percentage>|<flex>|min-content|max-content|auto] )","name-repeat":"repeat( [<integer [1,]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( <length> )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","saturate()":"saturate( <number-percentage> )","scale()":"scale( <number> , <number>? )","scale3d()":"scale3d( <number> , <number> , <number> )","scaleX()":"scaleX( <number> )","scaleY()":"scaleY( <number> )","scaleZ()":"scaleZ( <number> )","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","single-animation":"<time>||<easing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<timeline-name>","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-name":"<custom-ident>|<string>","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( [<length>|<percentage>] )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-width":"fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-webkit-mask-clip-style":"border|border-box|padding|padding-box|content|content-box|text","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","-ms-filter":"<string>",age:"child|young|old","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text","border-radius":"<length-percentage>{1,2}",bottom:"<length>|auto","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )",left:"<length>|auto","mask-image":"<mask-reference>#",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke",ratio:"<number [0,]> [/ <number [0,]>]?","reversed-counter-name":"reversed( <counter-name> )",right:"<length>|auto","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto","track-group":"'(' [<string>* <track-minmax> <string>*]+ ')' ['[' <positive-integer> ']']?|<track-minmax>","track-list-v0":"[<string>* <track-group> <string>*]+|none","track-minmax":"minmax( <track-breadth> , <track-breadth> )|auto|<track-breadth>|fit-content",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,]>","positive-integer":"<integer [0,]>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer",animation:"<single-animation>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto|<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-overflow":"clip|ellipsis|<string>","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end","caret-color":"auto|<color>",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none",color:"<color>","print-color-adjust":"economy|exact","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance|balance-all","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[size||layout||style||paint]",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","empty-cells":"show|hide",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps]","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","hyphenate-character":"auto|<string>",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|ray( [<angle>&&<size>&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]","offset-position":"auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-color'>||<'outline-style'>||<'outline-width'>]","outline-color":"<color>|invert","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky",quotes:"none|auto|[<string> <string>]+",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",scale:"none|<number>{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"[over|under]&&[right|left]","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|fill|stretch|intrinsic|-moz-max-content|-webkit-max-content|-moz-fit-content|-webkit-fit-content","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+","clip-rule":"nonzero|evenodd",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|none|normal","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<number-zero-one>","stroke-width":"<svg-length>","text-anchor":"start|middle|end","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<string>"}},"scroll-timeline":{prelude:"<timeline-name>",descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},viewport:{prelude:null,descriptors:{height:"<viewport-length>{1,2}","max-height":"<viewport-length>","max-width":"<viewport-length>","max-zoom":"auto|<number>|<percentage>","min-height":"<viewport-length>","min-width":"<viewport-length>","min-zoom":"auto|<number>|<percentage>",orientation:"auto|portrait|landscape","user-zoom":"zoom|fixed","viewport-fit":"auto|contain|cover",width:"<viewport-length>{1,2}",zoom:"auto|<number>|<percentage>"}}}},Za=43,Ss=45,bm=110,Wl=!0,Lbe=!1;function vm(e,t){let n=this.tokenStart+e;const r=this.charCodeAt(n);for((r===Za||r===Ss)&&(t&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)xi(this.charCodeAt(n))||this.error("Integer is expected",n)}function Su(e){return vm.call(this,0,e)}function Wo(e,t){if(!this.cmpChar(this.tokenStart+e,t)){let n="";switch(t){case bm:n="N is expected";break;case Ss:n="HyphenMinus is expected";break}this.error(n,this.tokenStart+e)}}function Cb(){let e=0,t=0,n=this.tokenType;for(;n===Kr||n===Zi;)n=this.lookupType(++e);if(n!==mn)if(this.isDelim(Za,e)||this.isDelim(Ss,e)){t=this.isDelim(Za,e)?Za:Ss;do n=this.lookupType(++e);while(n===Kr||n===Zi);n!==mn&&(this.skip(e),Su.call(this,Wl))}else return null;return e>0&&this.skip(e),t===0&&(n=this.charCodeAt(this.tokenStart),n!==Za&&n!==Ss&&this.error("Number sign is expected")),Su.call(this,t!==0),t===Ss?"-"+this.consume(mn):this.consume(mn)}const Ibe="AnPlusB",$be={a:[String,null],b:[String,null]};function B4(){const e=this.tokenStart;let t=null,n=null;if(this.tokenType===mn)Su.call(this,Lbe),n=this.consume(mn);else if(this.tokenType===Ht&&this.cmpChar(this.tokenStart,Ss))switch(t="-1",Wo.call(this,1,bm),this.tokenEnd-this.tokenStart){case 2:this.next(),n=Cb.call(this);break;case 3:Wo.call(this,2,Ss),this.next(),this.skipSC(),Su.call(this,Wl),n="-"+this.consume(mn);break;default:Wo.call(this,2,Ss),vm.call(this,3,Wl),this.next(),n=this.substrToCursor(e+2)}else if(this.tokenType===Ht||this.isDelim(Za)&&this.lookupType(1)===Ht){let r=0;switch(t="1",this.isDelim(Za)&&(r=1,this.next()),Wo.call(this,0,bm),this.tokenEnd-this.tokenStart){case 1:this.next(),n=Cb.call(this);break;case 2:Wo.call(this,1,Ss),this.next(),this.skipSC(),Su.call(this,Wl),n="-"+this.consume(mn);break;default:Wo.call(this,1,Ss),vm.call(this,2,Wl),this.next(),n=this.substrToCursor(e+r+1)}}else if(this.tokenType===In){const r=this.charCodeAt(this.tokenStart),i=r===Za||r===Ss;let s=this.tokenStart+i;for(;s<this.tokenEnd&&xi(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),Wo.call(this,s-this.tokenStart,bm),t=this.substring(e,s),s+1===this.tokenEnd?(this.next(),n=Cb.call(this)):(Wo.call(this,s-this.tokenStart+1,Ss),s+2===this.tokenEnd?(this.next(),this.skipSC(),Su.call(this,Wl),n="-"+this.consume(mn)):(vm.call(this,s-this.tokenStart+2,Wl),this.next(),n=this.substrToCursor(s+1)))}else this.error();return t!==null&&t.charCodeAt(0)===Za&&(t=t.substr(1)),n!==null&&n.charCodeAt(0)===Za&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(e,this.tokenStart),a:t,b:n}}function Dbe(e){if(e.a){const t=e.a==="+1"&&"n"||e.a==="1"&&"n"||e.a==="-1"&&"-n"||e.a+"n";if(e.b){const n=e.b[0]==="-"||e.b[0]==="+"?e.b:"+"+e.b;this.tokenize(t+n)}else this.tokenize(t)}else this.tokenize(e.b)}const zbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Dbe,name:Ibe,parse:B4,structure:$be},Symbol.toStringTag,{value:"Module"}));function m5(e){return this.Raw(e,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function Fbe(){for(let e=1,t;t=this.lookupType(e);e++){if(t===ta)return!0;if(t===Wi||t===li)return!1}return!1}const Bbe="Atrule",Ube="atrule",Hbe={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function U4(){const e=this.tokenStart;let t,n,r=null,i=null;switch(this.eat(li),t=this.substrToCursor(e+1),n=t.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==Wi&&this.tokenType!==ms&&(this.parseAtrulePrelude?r=this.parseWithFallback(this.AtrulePrelude.bind(this,t),m5):r=m5.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case ms:this.next();break;case Wi:hasOwnProperty.call(this.atrule,n)&&typeof this.atrule[n].block=="function"?i=this.atrule[n].block.call(this):i=this.Block(Fbe.call(this));break}return{type:"Atrule",loc:this.getLocation(e,this.tokenStart),name:t,prelude:r,block:i}}function Wbe(e){this.token(li,"@"+e.name),e.prelude!==null&&this.node(e.prelude),e.block?this.node(e.block):this.token(ms,";")}const Vbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Wbe,name:Bbe,parse:U4,structure:Hbe,walkContext:Ube},Symbol.toStringTag,{value:"Module"})),Gbe="AtrulePrelude",qbe="atrulePrelude",Ybe={children:[[]]};function H4(e){let t=null;return e!==null&&(e=e.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,e)&&typeof this.atrule[e].prelude=="function"?t=this.atrule[e].prelude.call(this):t=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Wi&&this.tokenType!==ms&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(t),children:t}}function Xbe(e){this.children(e)}const Kbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Xbe,name:Gbe,parse:H4,structure:Ybe,walkContext:qbe},Symbol.toStringTag,{value:"Module"})),Zbe=36,W4=42,xm=61,Qbe=94,Kx=124,Jbe=126;function eve(){this.eof&&this.error("Unexpected end of input");const e=this.tokenStart;let t=!1;return this.isDelim(W4)?(t=!0,this.next()):this.isDelim(Kx)||this.eat(Ht),this.isDelim(Kx)?this.charCodeAt(this.tokenStart+1)!==xm?(this.next(),this.eat(Ht)):t&&this.error("Identifier is expected",this.tokenEnd):t&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function tve(){const e=this.tokenStart,t=this.charCodeAt(e);return t!==xm&&t!==Jbe&&t!==Qbe&&t!==Zbe&&t!==W4&&t!==Kx&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),t!==xm&&(this.isDelim(xm)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(e)}const nve="AttributeSelector",rve={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function V4(){const e=this.tokenStart;let t,n=null,r=null,i=null;return this.eat(Is),this.skipSC(),t=eve.call(this),this.skipSC(),this.tokenType!==Oa&&(this.tokenType!==Ht&&(n=tve.call(this),this.skipSC(),r=this.tokenType===Na?this.String():this.Identifier(),this.skipSC()),this.tokenType===Ht&&(i=this.consume(Ht),this.skipSC())),this.eat(Oa),{type:"AttributeSelector",loc:this.getLocation(e,this.tokenStart),name:t,matcher:n,value:r,flags:i}}function ive(e){this.token(Hn,"["),this.node(e.name),e.matcher!==null&&(this.tokenize(e.matcher),this.node(e.value)),e.flags!==null&&this.token(Ht,e.flags),this.token(Hn,"]")}const sve=Object.freeze(Object.defineProperty({__proto__:null,generate:ive,name:nve,parse:V4,structure:rve},Symbol.toStringTag,{value:"Module"}));function G4(e){return this.Raw(e,null,!0)}function ave(){return this.parseWithFallback(this.Rule,G4)}function g5(e){return this.Raw(e,this.consumeUntilSemicolonIncluded,!0)}function ove(){if(this.tokenType===ms)return g5.call(this,this.tokenIndex);const e=this.parseWithFallback(this.Declaration,g5);return this.tokenType===ms&&this.next(),e}const lve="Block",cve="block",uve={children:[["Atrule","Rule","Declaration"]]};function q4(e){const t=e?ove:ave,n=this.tokenStart;let r=this.createList();this.eat(Wi);e:for(;!this.eof;)switch(this.tokenType){case ta:break e;case Kr:case Zi:this.next();break;case li:r.push(this.parseWithFallback(this.Atrule,G4));break;default:r.push(t.call(this))}return this.eof||this.eat(ta),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:r}}function hve(e){this.token(Wi,"{"),this.children(e,t=>{t.type==="Declaration"&&this.token(ms,";")}),this.token(ta,"}")}const dve=Object.freeze(Object.defineProperty({__proto__:null,generate:hve,name:lve,parse:q4,structure:uve,walkContext:cve},Symbol.toStringTag,{value:"Module"})),fve="Brackets",pve={children:[[]]};function Y4(e,t){const n=this.tokenStart;let r=null;return this.eat(Is),r=e.call(this,t),this.eof||this.eat(Oa),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:r}}function mve(e){this.token(Hn,"["),this.children(e),this.token(Hn,"]")}const gve=Object.freeze(Object.defineProperty({__proto__:null,generate:mve,name:fve,parse:Y4,structure:pve},Symbol.toStringTag,{value:"Module"})),yve="CDC",bve=[];function X4(){const e=this.tokenStart;return this.eat(cs),{type:"CDC",loc:this.getLocation(e,this.tokenStart)}}function vve(){this.token(cs,"-->")}const xve=Object.freeze(Object.defineProperty({__proto__:null,generate:vve,name:yve,parse:X4,structure:bve},Symbol.toStringTag,{value:"Module"})),wve="CDO",_ve=[];function K4(){const e=this.tokenStart;return this.eat(Mf),{type:"CDO",loc:this.getLocation(e,this.tokenStart)}}function kve(){this.token(Mf,"<!--")}const Sve=Object.freeze(Object.defineProperty({__proto__:null,generate:kve,name:wve,parse:K4,structure:_ve},Symbol.toStringTag,{value:"Module"})),Cve=46,Eve="ClassSelector",Tve={name:String};function Z4(){return this.eatDelim(Cve),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Ht)}}function jve(e){this.token(Hn,"."),this.token(Ht,e.name)}const Ave=Object.freeze(Object.defineProperty({__proto__:null,generate:jve,name:Eve,parse:Z4,structure:Tve},Symbol.toStringTag,{value:"Module"})),Pve=43,y5=47,Nve=62,Ove=126,Rve="Combinator",Mve={name:String};function Q4(){const e=this.tokenStart;let t;switch(this.tokenType){case Kr:t=" ";break;case Hn:switch(this.charCodeAt(this.tokenStart)){case Nve:case Pve:case Ove:this.next();break;case y5:this.next(),this.eatIdent("deep"),this.eatDelim(y5);break;default:this.error("Combinator is expected")}t=this.substrToCursor(e);break}return{type:"Combinator",loc:this.getLocation(e,this.tokenStart),name:t}}function Lve(e){this.tokenize(e.name)}const Ive=Object.freeze(Object.defineProperty({__proto__:null,generate:Lve,name:Rve,parse:Q4,structure:Mve},Symbol.toStringTag,{value:"Module"})),$ve=42,Dve=47,zve="Comment",Fve={value:String};function J4(){const e=this.tokenStart;let t=this.tokenEnd;return this.eat(Zi),t-e+2>=2&&this.charCodeAt(t-2)===$ve&&this.charCodeAt(t-1)===Dve&&(t-=2),{type:"Comment",loc:this.getLocation(e,this.tokenStart),value:this.substring(e+2,t)}}function Bve(e){this.token(Zi,"/*"+e.value+"*/")}const Uve=Object.freeze(Object.defineProperty({__proto__:null,generate:Bve,name:zve,parse:J4,structure:Fve},Symbol.toStringTag,{value:"Module"})),e6=33,Hve=35,Wve=36,Vve=38,Gve=42,qve=43,b5=47;function Yve(e){return this.Raw(e,this.consumeUntilExclamationMarkOrSemicolon,!0)}function Xve(e){return this.Raw(e,this.consumeUntilExclamationMarkOrSemicolon,!1)}function Kve(){const e=this.tokenIndex,t=this.Value();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==ms&&this.isDelim(e6)===!1&&this.isBalanceEdge(e)===!1&&this.error(),t}const Zve="Declaration",Qve="declaration",Jve={important:[Boolean,String],property:String,value:["Value","Raw"]};function t6(){const e=this.tokenStart,t=this.tokenIndex,n=txe.call(this),r=W_(n),i=r?this.parseCustomProperty:this.parseValue,s=r?Xve:Yve;let a=!1,o;this.skipSC(),this.eat(Hi);const c=this.tokenIndex;if(r||this.skipSC(),i?o=this.parseWithFallback(Kve,s):o=s.call(this,this.tokenIndex),r&&o.type==="Value"&&o.children.isEmpty){for(let h=c-this.tokenIndex;h<=0;h++)if(this.lookupType(h)===Kr){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(e6)&&(a=nxe.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==ms&&this.isBalanceEdge(t)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(e,this.tokenStart),important:a,property:n,value:o}}function exe(e){this.token(Ht,e.property),this.token(Hi,":"),this.node(e.value),e.important&&(this.token(Hn,"!"),this.token(Ht,e.important===!0?"important":e.important))}function txe(){const e=this.tokenStart;if(this.tokenType===Hn)switch(this.charCodeAt(this.tokenStart)){case Gve:case Wve:case qve:case Hve:case Vve:this.next();break;case b5:this.next(),this.isDelim(b5)&&this.next();break}return this.tokenType===Sr?this.eat(Sr):this.eat(Ht),this.substrToCursor(e)}function nxe(){this.eat(Hn),this.skipSC();const e=this.consume(Ht);return e==="important"?!0:e}const rxe=Object.freeze(Object.defineProperty({__proto__:null,generate:exe,name:Zve,parse:t6,structure:Jve,walkContext:Qve},Symbol.toStringTag,{value:"Module"}));function ixe(e){return this.Raw(e,this.consumeUntilSemicolonIncluded,!0)}const sxe="DeclarationList",axe={children:[["Declaration"]]};function n6(){const e=this.createList();for(;!this.eof;)switch(this.tokenType){case Kr:case Zi:case ms:this.next();break;default:e.push(this.parseWithFallback(this.Declaration,ixe))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}}function oxe(e){this.children(e,t=>{t.type==="Declaration"&&this.token(ms,";")})}const lxe=Object.freeze(Object.defineProperty({__proto__:null,generate:oxe,name:sxe,parse:n6,structure:axe},Symbol.toStringTag,{value:"Module"})),cxe="Dimension",uxe={value:String,unit:String};function r6(){const e=this.tokenStart,t=this.consumeNumber(In);return{type:"Dimension",loc:this.getLocation(e,this.tokenStart),value:t,unit:this.substring(e+t.length,this.tokenStart)}}function hxe(e){this.token(In,e.value+e.unit)}const dxe=Object.freeze(Object.defineProperty({__proto__:null,generate:hxe,name:cxe,parse:r6,structure:uxe},Symbol.toStringTag,{value:"Module"})),fxe="Function",pxe="function",mxe={name:String,children:[[]]};function i6(e,t){const n=this.tokenStart,r=this.consumeFunctionName(),i=r.toLowerCase();let s;return s=t.hasOwnProperty(i)?t[i].call(this,t):e.call(this,t),this.eof||this.eat(dr),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:r,children:s}}function gxe(e){this.token(Fn,e.name+"("),this.children(e),this.token(dr,")")}const yxe=Object.freeze(Object.defineProperty({__proto__:null,generate:gxe,name:fxe,parse:i6,structure:mxe,walkContext:pxe},Symbol.toStringTag,{value:"Module"})),bxe="XXX",vxe="Hash",xxe={value:String};function s6(){const e=this.tokenStart;return this.eat(Sr),{type:"Hash",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e+1)}}function wxe(e){this.token(Sr,"#"+e.value)}const _xe=Object.freeze(Object.defineProperty({__proto__:null,generate:wxe,name:vxe,parse:s6,structure:xxe,xxx:bxe},Symbol.toStringTag,{value:"Module"})),kxe="Identifier",Sxe={name:String};function a6(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Ht)}}function Cxe(e){this.token(Ht,e.name)}const Exe=Object.freeze(Object.defineProperty({__proto__:null,generate:Cxe,name:kxe,parse:a6,structure:Sxe},Symbol.toStringTag,{value:"Module"})),Txe="IdSelector",jxe={name:String};function o6(){const e=this.tokenStart;return this.eat(Sr),{type:"IdSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e+1)}}function Axe(e){this.token(Hn,"#"+e.name)}const Pxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Axe,name:Txe,parse:o6,structure:jxe},Symbol.toStringTag,{value:"Module"})),Nxe="MediaFeature",Oxe={name:String,value:["Identifier","Number","Dimension","Ratio",null]};function l6(){const e=this.tokenStart;let t,n=null;if(this.eat(mi),this.skipSC(),t=this.consume(Ht),this.skipSC(),this.tokenType!==dr){switch(this.eat(Hi),this.skipSC(),this.tokenType){case mn:this.lookupNonWSType(1)===Hn?n=this.Ratio():n=this.Number();break;case In:n=this.Dimension();break;case Ht:n=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(dr),{type:"MediaFeature",loc:this.getLocation(e,this.tokenStart),name:t,value:n}}function Rxe(e){this.token(mi,"("),this.token(Ht,e.name),e.value!==null&&(this.token(Hi,":"),this.node(e.value)),this.token(dr,")")}const Mxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Rxe,name:Nxe,parse:l6,structure:Oxe},Symbol.toStringTag,{value:"Module"})),Lxe="MediaQuery",Ixe={children:[["Identifier","MediaFeature","WhiteSpace"]]};function c6(){const e=this.createList();let t=null;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Zi:case Kr:this.next();continue;case Ht:t=this.Identifier();break;case mi:t=this.MediaFeature();break;default:break e}e.push(t)}return t===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(e),children:e}}function $xe(e){this.children(e)}const Dxe=Object.freeze(Object.defineProperty({__proto__:null,generate:$xe,name:Lxe,parse:c6,structure:Ixe},Symbol.toStringTag,{value:"Module"})),zxe="MediaQueryList",Fxe={children:[["MediaQuery"]]};function u6(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery()),this.tokenType===lo);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}}function Bxe(e){this.children(e,()=>this.token(lo,","))}const Uxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Bxe,name:zxe,parse:u6,structure:Fxe},Symbol.toStringTag,{value:"Module"})),Hxe="Nth",Wxe={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function h6(){this.skipSC();const e=this.tokenStart;let t=e,n=null,r;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?r=this.Identifier():r=this.AnPlusB(),t=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),n=this.SelectorList(),t=this.tokenStart),{type:"Nth",loc:this.getLocation(e,t),nth:r,selector:n}}function Vxe(e){this.node(e.nth),e.selector!==null&&(this.token(Ht,"of"),this.node(e.selector))}const Gxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Vxe,name:Hxe,parse:h6,structure:Wxe},Symbol.toStringTag,{value:"Module"})),qxe="Number",Yxe={value:String};function d6(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(mn)}}function Xxe(e){this.token(mn,e.value)}const Kxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Xxe,name:qxe,parse:d6,structure:Yxe},Symbol.toStringTag,{value:"Module"})),Zxe="Operator",Qxe={value:String};function f6(){const e=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function Jxe(e){this.tokenize(e.value)}const e1e=Object.freeze(Object.defineProperty({__proto__:null,generate:Jxe,name:Zxe,parse:f6,structure:Qxe},Symbol.toStringTag,{value:"Module"})),t1e="Parentheses",n1e={children:[[]]};function p6(e,t){const n=this.tokenStart;let r=null;return this.eat(mi),r=e.call(this,t),this.eof||this.eat(dr),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:r}}function r1e(e){this.token(mi,"("),this.children(e),this.token(dr,")")}const i1e=Object.freeze(Object.defineProperty({__proto__:null,generate:r1e,name:t1e,parse:p6,structure:n1e},Symbol.toStringTag,{value:"Module"})),s1e="Percentage",a1e={value:String};function m6(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(Fr)}}function o1e(e){this.token(Fr,e.value+"%")}const l1e=Object.freeze(Object.defineProperty({__proto__:null,generate:o1e,name:s1e,parse:m6,structure:a1e},Symbol.toStringTag,{value:"Module"})),c1e="PseudoClassSelector",u1e="function",h1e={name:String,children:[["Raw"],null]};function g6(){const e=this.tokenStart;let t=null,n,r;return this.eat(Hi),this.tokenType===Fn?(n=this.consumeFunctionName(),r=n.toLowerCase(),hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(this.tokenIndex,null,!1))),this.eat(dr)):n=this.consume(Ht),{type:"PseudoClassSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function d1e(e){this.token(Hi,":"),e.children===null?this.token(Ht,e.name):(this.token(Fn,e.name+"("),this.children(e),this.token(dr,")"))}const f1e=Object.freeze(Object.defineProperty({__proto__:null,generate:d1e,name:c1e,parse:g6,structure:h1e,walkContext:u1e},Symbol.toStringTag,{value:"Module"})),p1e="PseudoElementSelector",m1e="function",g1e={name:String,children:[["Raw"],null]};function y6(){const e=this.tokenStart;let t=null,n,r;return this.eat(Hi),this.eat(Hi),this.tokenType===Fn?(n=this.consumeFunctionName(),r=n.toLowerCase(),hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(this.tokenIndex,null,!1))),this.eat(dr)):n=this.consume(Ht),{type:"PseudoElementSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function y1e(e){this.token(Hi,":"),this.token(Hi,":"),e.children===null?this.token(Ht,e.name):(this.token(Fn,e.name+"("),this.children(e),this.token(dr,")"))}const b1e=Object.freeze(Object.defineProperty({__proto__:null,generate:y1e,name:p1e,parse:y6,structure:g1e,walkContext:m1e},Symbol.toStringTag,{value:"Module"})),v1e=47,x1e=46;function v5(){this.skipSC();const e=this.consume(mn);for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);!xi(n)&&n!==x1e&&this.error("Unsigned number is expected",this.tokenStart-e.length+t)}return Number(e)===0&&this.error("Zero number is not allowed",this.tokenStart-e.length),e}const w1e="Ratio",_1e={left:String,right:String};function b6(){const e=this.tokenStart,t=v5.call(this);let n;return this.skipSC(),this.eatDelim(v1e),n=v5.call(this),{type:"Ratio",loc:this.getLocation(e,this.tokenStart),left:t,right:n}}function k1e(e){this.token(mn,e.left),this.token(Hn,"/"),this.token(mn,e.right)}const S1e=Object.freeze(Object.defineProperty({__proto__:null,generate:k1e,name:w1e,parse:b6,structure:_1e},Symbol.toStringTag,{value:"Module"}));function C1e(){return this.tokenIndex>0&&this.lookupType(-1)===Kr?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const E1e="Raw",T1e={value:String};function v6(e,t,n){const r=this.getTokenStart(e);let i;return this.skipUntilBalanced(e,t||this.consumeUntilBalanceEnd),n&&this.tokenStart>r?i=C1e.call(this):i=this.tokenStart,{type:"Raw",loc:this.getLocation(r,i),value:this.substring(r,i)}}function j1e(e){this.tokenize(e.value)}const A1e=Object.freeze(Object.defineProperty({__proto__:null,generate:j1e,name:E1e,parse:v6,structure:T1e},Symbol.toStringTag,{value:"Module"}));function x5(e){return this.Raw(e,this.consumeUntilLeftCurlyBracket,!0)}function P1e(){const e=this.SelectorList();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==Wi&&this.error(),e}const N1e="Rule",O1e="rule",R1e={prelude:["SelectorList","Raw"],block:["Block"]};function x6(){const e=this.tokenIndex,t=this.tokenStart;let n,r;return this.parseRulePrelude?n=this.parseWithFallback(P1e,x5):n=x5.call(this,e),r=this.Block(!0),{type:"Rule",loc:this.getLocation(t,this.tokenStart),prelude:n,block:r}}function M1e(e){this.node(e.prelude),this.node(e.block)}const L1e=Object.freeze(Object.defineProperty({__proto__:null,generate:M1e,name:N1e,parse:x6,structure:R1e,walkContext:O1e},Symbol.toStringTag,{value:"Module"})),I1e="Selector",$1e={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]};function w6(){const e=this.readSequence(this.scope.Selector);return this.getFirstListNode(e)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}}function D1e(e){this.children(e)}const z1e=Object.freeze(Object.defineProperty({__proto__:null,generate:D1e,name:I1e,parse:w6,structure:$1e},Symbol.toStringTag,{value:"Module"})),F1e="SelectorList",B1e="selector",U1e={children:[["Selector","Raw"]]};function _6(){const e=this.createList();for(;!this.eof;){if(e.push(this.Selector()),this.tokenType===lo){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}}function H1e(e){this.children(e,()=>this.token(lo,","))}const W1e=Object.freeze(Object.defineProperty({__proto__:null,generate:H1e,name:F1e,parse:_6,structure:U1e,walkContext:B1e},Symbol.toStringTag,{value:"Module"})),Zx=92,k6=34,S6=39;function C6(e){const t=e.length,n=e.charCodeAt(0),r=n===k6||n===S6?1:0,i=r===1&&t>1&&e.charCodeAt(t-1)===n?t-2:t-1;let s="";for(let a=r;a<=i;a++){let o=e.charCodeAt(a);if(o===Zx){if(a===i){a!==t-1&&(s=e.substr(a+1));break}if(o=e.charCodeAt(++a),to(Zx,o)){const c=a-1,h=Ku(e,c);a=h-1,s+=m4(e.substring(c+1,h))}else o===13&&e.charCodeAt(a+1)===10&&a++}else s+=e[a]}return s}function Qx(e,t){const n=t?"'":'"',r=t?S6:k6;let i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);if(o===0){i+="";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===r||o===Zx?(i+="\\"+e.charAt(a),s=!1):(s&&(wl(o)||pc(o))&&(i+=" "),i+=e.charAt(a),s=!1)}return n+i+n}const V1e="String",G1e={value:String};function E6(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:C6(this.consume(Na))}}function q1e(e){this.token(Na,Qx(e.value))}const Y1e=Object.freeze(Object.defineProperty({__proto__:null,generate:q1e,name:V1e,parse:E6,structure:G1e},Symbol.toStringTag,{value:"Module"})),X1e=33;function w5(e){return this.Raw(e,null,!1)}const K1e="StyleSheet",Z1e="stylesheet",Q1e={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function T6(){const e=this.tokenStart,t=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case Kr:this.next();continue;case Zi:if(this.charCodeAt(this.tokenStart+2)!==X1e){this.next();continue}n=this.Comment();break;case Mf:n=this.CDO();break;case cs:n=this.CDC();break;case li:n=this.parseWithFallback(this.Atrule,w5);break;default:n=this.parseWithFallback(this.Rule,w5)}t.push(n)}return{type:"StyleSheet",loc:this.getLocation(e,this.tokenStart),children:t}}function J1e(e){this.children(e)}const ewe=Object.freeze(Object.defineProperty({__proto__:null,generate:J1e,name:K1e,parse:T6,structure:Q1e,walkContext:Z1e},Symbol.toStringTag,{value:"Module"})),twe=42,_5=124;function Eb(){this.tokenType!==Ht&&this.isDelim(twe)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const nwe="TypeSelector",rwe={name:String};function j6(){const e=this.tokenStart;return this.isDelim(_5)?(this.next(),Eb.call(this)):(Eb.call(this),this.isDelim(_5)&&(this.next(),Eb.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function iwe(e){this.tokenize(e.name)}const swe=Object.freeze(Object.defineProperty({__proto__:null,generate:iwe,name:nwe,parse:j6,structure:rwe},Symbol.toStringTag,{value:"Module"})),A6=43,P6=45,Jx=63;function pd(e,t){let n=0;for(let r=this.tokenStart+e;r<this.tokenEnd;r++){const i=this.charCodeAt(r);if(i===P6&&t&&n!==0)return pd.call(this,e+n+1,!1),-1;wl(i)||this.error(t&&n!==0?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",r),++n>6&&this.error("Too many hex digits",r)}return this.next(),n}function Up(e){let t=0;for(;this.isDelim(Jx);)++t>e&&this.error("Too many question marks"),this.next()}function awe(e){this.charCodeAt(this.tokenStart)!==e&&this.error((e===A6?"Plus sign":"Hyphen minus")+" is expected")}function owe(){let e=0;switch(this.tokenType){case mn:if(e=pd.call(this,1,!0),this.isDelim(Jx)){Up.call(this,6-e);break}if(this.tokenType===In||this.tokenType===mn){awe.call(this,P6),pd.call(this,1,!1);break}break;case In:e=pd.call(this,1,!0),e>0&&Up.call(this,6-e);break;default:if(this.eatDelim(A6),this.tokenType===Ht){e=pd.call(this,0,!0),e>0&&Up.call(this,6-e);break}if(this.isDelim(Jx)){this.next(),Up.call(this,5);break}this.error("Hex digit or question mark is expected")}}const lwe="UnicodeRange",cwe={value:String};function N6(){const e=this.tokenStart;return this.eatIdent("u"),owe.call(this),{type:"UnicodeRange",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function uwe(e){this.tokenize(e.value)}const hwe=Object.freeze(Object.defineProperty({__proto__:null,generate:uwe,name:lwe,parse:N6,structure:cwe},Symbol.toStringTag,{value:"Module"})),dwe=32,e1=92,fwe=34,pwe=39,mwe=40,O6=41;function gwe(e){const t=e.length;let n=4,r=e.charCodeAt(t-1)===O6?t-2:t-1,i="";for(;n<r&&pc(e.charCodeAt(n));)n++;for(;n<r&&pc(e.charCodeAt(r));)r--;for(let s=n;s<=r;s++){let a=e.charCodeAt(s);if(a===e1){if(s===r){s!==t-1&&(i=e.substr(s+1));break}if(a=e.charCodeAt(++s),to(e1,a)){const o=s-1,c=Ku(e,o);s=c-1,i+=m4(e.substring(o+1,c))}else a===13&&e.charCodeAt(s+1)===10&&s++}else i+=e[s]}return i}function R6(e){let t="",n=!1;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===0){t+="";continue}if(i<=31||i===127){t+="\\"+i.toString(16),n=!0;continue}i===dwe||i===e1||i===fwe||i===pwe||i===mwe||i===O6?(t+="\\"+e.charAt(r),n=!1):(n&&wl(i)&&(t+=" "),t+=e.charAt(r),n=!1)}return"url("+t+")"}const ywe="Url",bwe={value:String};function M6(){const e=this.tokenStart;let t;switch(this.tokenType){case Si:t=gwe(this.consume(Si));break;case Fn:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(Fn),this.skipSC(),t=C6(this.consume(Na)),this.skipSC(),this.eof||this.eat(dr);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(e,this.tokenStart),value:t}}function vwe(e){this.token(Si,R6(e.value))}const xwe=Object.freeze(Object.defineProperty({__proto__:null,generate:vwe,name:ywe,parse:M6,structure:bwe},Symbol.toStringTag,{value:"Module"})),wwe="Value",_we={children:[[]]};function L6(){const e=this.tokenStart,t=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(e,this.tokenStart),children:t}}function kwe(e){this.children(e)}const Swe=Object.freeze(Object.defineProperty({__proto__:null,generate:kwe,name:wwe,parse:L6,structure:_we},Symbol.toStringTag,{value:"Module"})),Cwe=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),Ewe="WhiteSpace",Twe={value:String};function I6(){return this.eat(Kr),Cwe}function jwe(e){this.token(Kr,e.value)}const Awe=Object.freeze(Object.defineProperty({__proto__:null,generate:jwe,name:Ewe,parse:I6,structure:Twe},Symbol.toStringTag,{value:"Module"})),$6=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:zbe,Atrule:Vbe,AtrulePrelude:Kbe,AttributeSelector:sve,Block:dve,Brackets:gve,CDC:xve,CDO:Sve,ClassSelector:Ave,Combinator:Ive,Comment:Uve,Declaration:rxe,DeclarationList:lxe,Dimension:dxe,Function:yxe,Hash:_xe,IdSelector:Pxe,Identifier:Exe,MediaFeature:Mxe,MediaQuery:Dxe,MediaQueryList:Uxe,Nth:Gxe,Number:Kxe,Operator:e1e,Parentheses:i1e,Percentage:l1e,PseudoClassSelector:f1e,PseudoElementSelector:b1e,Ratio:S1e,Raw:A1e,Rule:L1e,Selector:z1e,SelectorList:W1e,String:Y1e,StyleSheet:ewe,TypeSelector:swe,UnicodeRange:hwe,Url:xwe,Value:Swe,WhiteSpace:Awe},Symbol.toStringTag,{value:"Module"})),Pwe={generic:!0,...Mbe,node:$6},Nwe=35,Owe=42,k5=43,Rwe=45,Mwe=47,Lwe=117;function D6(e){switch(this.tokenType){case Sr:return this.Hash();case lo:return this.Operator();case mi:return this.Parentheses(this.readSequence,e.recognizer);case Is:return this.Brackets(this.readSequence,e.recognizer);case Na:return this.String();case In:return this.Dimension();case Fr:return this.Percentage();case mn:return this.Number();case Fn:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,e.recognizer);case Si:return this.Url();case Ht:return this.cmpChar(this.tokenStart,Lwe)&&this.cmpChar(this.tokenStart+1,k5)?this.UnicodeRange():this.Identifier();case Hn:{const t=this.charCodeAt(this.tokenStart);if(t===Mwe||t===Owe||t===k5||t===Rwe)return this.Operator();t===Nwe&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const Iwe={getNode:D6},$we=35,Dwe=42,zwe=43,Fwe=47,S5=46,Bwe=62,Uwe=124,Hwe=126;function Wwe(e,t){t.last!==null&&t.last.type!=="Combinator"&&e!==null&&e.type!=="Combinator"&&t.push({type:"Combinator",loc:null,name:" "})}function Vwe(){switch(this.tokenType){case Is:return this.AttributeSelector();case Sr:return this.IdSelector();case Hi:return this.lookupType(1)===Hi?this.PseudoElementSelector():this.PseudoClassSelector();case Ht:return this.TypeSelector();case mn:case Fr:return this.Percentage();case In:this.charCodeAt(this.tokenStart)===S5&&this.error("Identifier is expected",this.tokenStart+1);break;case Hn:{switch(this.charCodeAt(this.tokenStart)){case zwe:case Bwe:case Hwe:case Fwe:return this.Combinator();case S5:return this.ClassSelector();case Dwe:case Uwe:return this.TypeSelector();case $we:return this.IdSelector()}break}}}const Gwe={onWhiteSpace:Wwe,getNode:Vwe};function qwe(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function Ywe(){const e=this.createList();if(this.skipSC(),e.push(this.Identifier()),this.skipSC(),this.tokenType===lo){e.push(this.Operator());const t=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if(n.type==="Value"&&n.children.isEmpty){for(let r=t-this.tokenIndex;r<=0;r++)if(this.lookupType(r)===Kr){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}e.push(n)}return e}function C5(e){return e!==null&&e.type==="Operator"&&(e.value[e.value.length-1]==="-"||e.value[e.value.length-1]==="+")}const Xwe={getNode:D6,onWhiteSpace(e,t){C5(e)&&(e.value=" "+e.value),C5(t.last)&&(t.last.value+=" ")},expression:qwe,var:Ywe},Kwe=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:Iwe,Selector:Gwe,Value:Xwe},Symbol.toStringTag,{value:"Module"})),Zwe={parse:{prelude:null,block(){return this.Block(!0)}}},Qwe={parse:{prelude(){const e=this.createList();switch(this.skipSC(),this.tokenType){case Na:e.push(this.String());break;case Si:case Fn:e.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===Ht||this.lookupNonWSType(0)===mi)&&e.push(this.MediaQueryList()),e},block:null}},Jwe={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(){return this.Block(!1)}}},e_e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};function t_e(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function n_e(){return this.skipSC(),this.tokenType===Ht&&this.lookupNonWSType(1)===Hi?this.createSingleNodeList(this.Declaration()):z6.call(this)}function z6(){const e=this.createList();let t;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Zi:case Kr:this.next();continue;case Fn:t=this.Function(t_e,this.scope.AtrulePrelude);break;case Ht:t=this.Identifier();break;case mi:t=this.Parentheses(n_e,this.scope.AtrulePrelude);break;default:break e}e.push(t)}return e}const r_e={parse:{prelude(){const e=z6.call(this);return this.getFirstListNode(e)===null&&this.error("Condition is expected"),e},block(){return this.Block(!1)}}},i_e={"font-face":Zwe,import:Qwe,media:Jwe,page:e_e,supports:r_e},$l={parse(){return this.createSingleNodeList(this.SelectorList())}},s_e={parse(){return this.createSingleNodeList(this.Selector())}},E5={parse(){return this.createSingleNodeList(this.Identifier())}},Hp={parse(){return this.createSingleNodeList(this.Nth())}},a_e={dir:E5,has:$l,lang:E5,matches:$l,is:$l,"-moz-any":$l,"-webkit-any":$l,where:$l,not:$l,"nth-child":Hp,"nth-last-child":Hp,"nth-last-of-type":Hp,"nth-of-type":Hp,slotted:s_e},o_e=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:B4,Atrule:U4,AtrulePrelude:H4,AttributeSelector:V4,Block:q4,Brackets:Y4,CDC:X4,CDO:K4,ClassSelector:Z4,Combinator:Q4,Comment:J4,Declaration:t6,DeclarationList:n6,Dimension:r6,Function:i6,Hash:s6,IdSelector:o6,Identifier:a6,MediaFeature:l6,MediaQuery:c6,MediaQueryList:u6,Nth:h6,Number:d6,Operator:f6,Parentheses:p6,Percentage:m6,PseudoClassSelector:g6,PseudoElementSelector:y6,Ratio:b6,Raw:v6,Rule:x6,Selector:w6,SelectorList:_6,String:E6,StyleSheet:T6,TypeSelector:j6,UnicodeRange:N6,Url:M6,Value:L6,WhiteSpace:I6},Symbol.toStringTag,{value:"Module"})),l_e={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(e){return this.AtrulePrelude(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:Kwe,atrule:i_e,pseudo:a_e,node:o_e},c_e={node:$6},u_e=Rbe({...Pwe,...l_e,...c_e});function t1(e){const t={};for(const n in e){let r=e[n];r&&(Array.isArray(r)||r instanceof Un?r=r.map(t1):r.constructor===Object&&(r=t1(r))),t[n]=r}return t}const{tokenize:Fje,parse:h_e,generate:no,lexer:F6,createLexer:Bje,walk:gs,find:Uje,findLast:Hje,findAll:Wje,toPlainObject:Vje,fromPlainObject:Gje,fork:d_e}=u_e,{hasOwnProperty:f_e}=Object.prototype;function Tb(e,t){const n=Object.create(null);if(!Array.isArray(e))return null;for(let r of e)t&&(r=r.toLowerCase()),n[r]=!0;return n}function T5(e){if(!e)return null;const t=Tb(e.tags,!0),n=Tb(e.ids),r=Tb(e.classes);return t===null&&n===null&&r===null?null:{tags:t,ids:n,classes:r}}function p_e(e){let t=!1;if(e.scopes&&Array.isArray(e.scopes)){t=Object.create(null);for(let n=0;n<e.scopes.length;n++){const r=e.scopes[n];if(!r||!Array.isArray(r))throw new Error("Wrong usage format");for(const i of r){if(f_e.call(t,i))throw new Error(`Class can't be used for several scopes: ${i}`);t[i]=n+1}}}return{whitelist:T5(e),blacklist:T5(e.blacklist),scopes:t}}function ec(e){return!e||!e.children||e.children.isEmpty}function j5(e,t){return e!==null&&e.children===t}function m_e(e,t,n){if(e.block&&(this.stylesheet!==null&&(this.stylesheet.firstAtrulesAllowed=!1),ec(e.block))){n.remove(t);return}switch(e.name){case"charset":if(ec(e.prelude)){n.remove(t);return}if(t.prev){n.remove(t);return}break;case"import":if(this.stylesheet===null||!this.stylesheet.firstAtrulesAllowed){n.remove(t);return}n.prevUntil(t.prev,function(r){if(!(r.type==="Atrule"&&(r.name==="import"||r.name==="charset")))return this.root.firstAtrulesAllowed=!1,n.remove(t),!0},this);break;default:{const r=Ea(e.name).basename;(r==="keyframes"||r==="media"||r==="supports")&&(ec(e.prelude)||ec(e.block))&&n.remove(t)}}}function g_e(e,t,n){n.remove(t)}function y_e(e,t,n){if(e.value.children&&e.value.children.isEmpty){n.remove(t);return}Zu(e.property).custom&&/\S/.test(e.value.value)&&(e.value.value=e.value.value.trim())}function b_e(e,t,n){(j5(this.stylesheet,n)||j5(this.block,n))&&n.remove(t)}const{hasOwnProperty:zc}=Object.prototype,v_e=new Set(["keyframes"]);function B6(e,t){return e.children.forEach((n,r,i)=>{let s=!1;gs(n,function(a){if(this.selector===null||this.selector===e)switch(a.type){case"SelectorList":(this.function===null||this.function.name.toLowerCase()!=="not")&&B6(a,t)&&(s=!0);break;case"ClassSelector":t.whitelist!==null&&t.whitelist.classes!==null&&!zc.call(t.whitelist.classes,a.name)&&(s=!0),t.blacklist!==null&&t.blacklist.classes!==null&&zc.call(t.blacklist.classes,a.name)&&(s=!0);break;case"IdSelector":t.whitelist!==null&&t.whitelist.ids!==null&&!zc.call(t.whitelist.ids,a.name)&&(s=!0),t.blacklist!==null&&t.blacklist.ids!==null&&zc.call(t.blacklist.ids,a.name)&&(s=!0);break;case"TypeSelector":a.name.charAt(a.name.length-1)!=="*"&&(t.whitelist!==null&&t.whitelist.tags!==null&&!zc.call(t.whitelist.tags,a.name.toLowerCase())&&(s=!0),t.blacklist!==null&&t.blacklist.tags!==null&&zc.call(t.blacklist.tags,a.name.toLowerCase())&&(s=!0));break}}),s&&i.remove(r)}),e.children.isEmpty}function x_e(e,t,n,r){if(ec(e.prelude)||ec(e.block)){n.remove(t);return}if(this.atrule&&v_e.has(Ea(this.atrule.name).basename))return;const{usage:i}=r;if(i&&(i.whitelist!==null||i.blacklist!==null)&&(B6(e.prelude,i),ec(e.prelude))){n.remove(t);return}}function w_e(e,t,n){if(t.data.name!=="*")return;const i=t.next&&t.next.data.type;(i==="IdSelector"||i==="ClassSelector"||i==="AttributeSelector"||i==="PseudoClassSelector"||i==="PseudoElementSelector")&&n.remove(t)}function __e(e,t,n){n.remove(t)}const A5={Atrule:m_e,Comment:g_e,Declaration:y_e,Raw:b_e,Rule:x_e,TypeSelector:w_e,WhiteSpace:__e};function k_e(e,t){gs(e,{leave(n,r,i){A5.hasOwnProperty(n.type)&&A5[n.type].call(this,n,r,i,t)}})}function S_e(e){e.block.children.forEach(t=>{t.prelude.children.forEach(n=>{n.children.forEach((r,i)=>{r.type==="Percentage"&&r.value==="100"?i.data={type:"TypeSelector",loc:r.loc,name:"to"}:r.type==="TypeSelector"&&r.name==="from"&&(i.data={type:"Percentage",loc:r.loc,value:"0"})})})})}function C_e(e){Ea(e.name).basename==="keyframes"&&S_e(e)}const E_e=/^(-?\d|--)|[\u0000-\u002c\u002e\u002f\u003A-\u0040\u005B-\u005E\u0060\u007B-\u009f]/;function T_e(e){return e===""||e==="-"?!1:!E_e.test(e)}function j_e(e){const t=e.value;!t||t.type!=="String"||T_e(t.value)&&(e.value={type:"Identifier",loc:t.loc,name:t.value})}function A_e(e){const t=e.children;t.forEachRight(function(n,r){if(n.type==="Identifier"){if(n.name==="bold")r.data={type:"Number",loc:n.loc,value:"700"};else if(n.name==="normal"){const i=r.prev;i&&i.data.type==="Operator"&&i.data.value==="/"&&this.remove(i),this.remove(r)}}}),t.isEmpty&&t.insert(t.createItem({type:"Identifier",name:"normal"}))}function P_e(e){const t=e.children.head.data;if(t.type==="Identifier")switch(t.name){case"normal":e.children.head.data={type:"Number",loc:t.loc,value:"400"};break;case"bold":e.children.head.data={type:"Number",loc:t.loc,value:"700"};break}}function N_e(e){function t(){r.length||r.unshift({type:"Number",loc:null,value:"0"},{type:"Number",loc:null,value:"0"}),n.push.apply(n,r),r=[]}let n=[],r=[];e.children.forEach(i=>{if(i.type==="Operator"&&i.value===","){t(),n.push(i);return}i.type==="Identifier"&&(i.name==="transparent"||i.name==="none"||i.name==="repeat"||i.name==="scroll")||r.push(i)}),t(),e.children=new Un().fromArray(n)}function P5(e){e.children.forEach((t,n,r)=>{t.type==="Identifier"&&t.name.toLowerCase()==="none"&&(r.head===r.tail?n.data={type:"Number",loc:t.loc,value:"0"}:r.remove(n))})}const N5={font:A_e,"font-weight":P_e,background:N_e,border:P5,outline:P5};function O_e(e){if(!this.declaration)return;const t=Zu(this.declaration.property);N5.hasOwnProperty(t.basename)&&N5[t.basename](e)}const R_e=/^(?:\+|(-))?0*(\d*)(?:\.0*|(\.\d*?)0*)?$/;function N0(e,t){const n=R_e;return e=String(e).replace(n,"$1$2$3"),(e===""||e==="-")&&(e="0"),e}function M_e(e){e.value=N0(e.value)}const L_e=new Set(["calc","min","max","clamp"]),I_e=new Set(["px","mm","cm","in","pt","pc","em","ex","ch","rem","vh","vw","vmin","vmax","vm"]);function $_e(e,t){const n=N0(e.value);if(e.value=n,n==="0"&&this.declaration!==null&&this.atrulePrelude===null){const r=e.unit.toLowerCase();if(!I_e.has(r)||this.declaration.property==="-ms-flex"||this.declaration.property==="flex"||this.function&&L_e.has(this.function.name))return;t.data={type:"Number",loc:e.loc,value:n}}}const D_e=new Set(["width","min-width","max-width","height","min-height","max-height","flex","-ms-flex"]);function z_e(e,t){e.value=N0(e.value),e.value==="0"&&this.declaration&&!D_e.has(this.declaration.property)&&(t.data={type:"Number",loc:e.loc,value:e.value},F6.matchDeclaration(this.declaration).isType(t.data,"length")||(t.data=e))}function F_e(e){e.value=e.value.replace(/\\/g,"/")}const O5={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R5={8e5:"maroon",800080:"purple",808e3:"olive",808080:"gray","00ffff":"cyan",f0ffff:"azure",f5f5dc:"beige",ffe4c4:"bisque","000000":"black","0000ff":"blue",a52a2a:"brown",ff7f50:"coral",ffd700:"gold","008000":"green","4b0082":"indigo",fffff0:"ivory",f0e68c:"khaki","00ff00":"lime",faf0e6:"linen","000080":"navy",ffa500:"orange",da70d6:"orchid",cd853f:"peru",ffc0cb:"pink",dda0dd:"plum",f00:"red",ff0000:"red",fa8072:"salmon",a0522d:"sienna",c0c0c0:"silver",fffafa:"snow",d2b48c:"tan","008080":"teal",ff6347:"tomato",ee82ee:"violet",f5deb3:"wheat",ffffff:"white",ffff00:"yellow"};function jb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function M5(e,t,n,r){let i,s,a;if(t===0)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,c=2*n-o;i=jb(c,o,e+1/3),s=jb(c,o,e),a=jb(c,o,e-1/3)}return[Math.round(i*255),Math.round(s*255),Math.round(a*255),r]}function Ab(e){return e=e.toString(16),e.length===1?"0"+e:e}function Pb(e,t,n){let r=e.head,i=[],s=!1;for(;r!==null;){const{type:a,value:o}=r.data;switch(a){case"Number":case"Percentage":if(s)return;s=!0,i.push({type:a,value:Number(o)});break;case"Operator":if(o===","){if(!s)return;s=!1}else if(s||o!=="+")return;break;default:return}r=r.next}if(i.length===t){if(i.length===4){if(i[3].type!=="Number")return;i[3].type="Alpha"}if(n){if(i[0].type!==i[1].type||i[0].type!==i[2].type)return}else{if(i[0].type!=="Number"||i[1].type!=="Percentage"||i[2].type!=="Percentage")return;i[0].type="Angle"}return i.map(function(a){let o=Math.max(0,a.value);switch(a.type){case"Number":o=Math.min(o,255);break;case"Percentage":if(o=Math.min(o,100)/100,!n)return o;o=255*o;break;case"Angle":return(o%360+360)%360/360;case"Alpha":return Math.min(o,1)}return Math.round(o)})}}function B_e(e,t){let n=e.name,r;if(n==="rgba"||n==="hsla"){if(r=Pb(e.children,4,n==="rgba"),!r)return;if(n==="hsla"&&(r=M5(...r),e.name="rgba"),r[3]===0){const i=this.function&&this.function.name;if(r[0]===0&&r[1]===0&&r[2]===0||!/^(?:to|from|color-stop)$|gradient$/i.test(i)){t.data={type:"Identifier",loc:e.loc,name:"transparent"};return}}if(r[3]!==1){e.children.forEach((i,s,a)=>{if(i.type==="Operator"){i.value!==","&&a.remove(s);return}s.data={type:"Number",loc:i.loc,value:N0(r.shift())}});return}n="rgb"}if(n==="hsl"){if(r=r||Pb(e.children,3,!1),!r)return;r=M5(...r),n="rgb"}if(n==="rgb"){if(r=r||Pb(e.children,3,!0),!r)return;t.data={type:"Hash",loc:e.loc,value:Ab(r[0])+Ab(r[1])+Ab(r[2])},U6(t.data,t)}}function U_e(e,t){if(this.declaration===null)return;let n=e.name.toLowerCase();if(O5.hasOwnProperty(n)&&F6.matchDeclaration(this.declaration).isType(e,"color")){const r=O5[n];r.length+1<=n.length?t.data={type:"Hash",loc:e.loc,value:r}:(n==="grey"&&(n="gray"),e.name=n)}}function U6(e,t){let n=e.value.toLowerCase();n.length===6&&n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&(n=n[0]+n[2]+n[4]),R5[n]?t.data={type:"Identifier",loc:e.loc,name:R5[n]}:e.value=n}const L5={Atrule:C_e,AttributeSelector:j_e,Value:O_e,Dimension:$_e,Percentage:z_e,Number:M_e,Url:F_e,Hash:U6,Identifier:U_e,Function:B_e};function H_e(e){gs(e,{leave(t,n,r){L5.hasOwnProperty(t.type)&&L5[t.type].call(this,t,n,r)}})}class W_e{constructor(){this.map=new Map}resolve(t){let n=this.map.get(t);return n===void 0&&(n=this.map.size+1,this.map.set(t,n)),n}}function V_e(){const e=new W_e;return function(n){const r=no(n);return n.id=e.resolve(r),n.length=r.length,n.fingerprint=null,n}}function G_e(e){return e.type==="Raw"?h_e(e.value,{context:"selectorList"}):e}function q_e(e,t){for(let n=0;n<3;n++)if(e[n]!==t[n])return e[n]>t[n]?e:t;return e}function I5(e){return G_e(e).children.reduce((t,n)=>q_e(eh(n),t),[0,0,0])}function eh(e){let t=0,n=0,r=0;return e.children.forEach(i=>{switch(i.type){case"IdSelector":t++;break;case"ClassSelector":case"AttributeSelector":n++;break;case"PseudoClassSelector":switch(i.name.toLowerCase()){case"not":case"has":case"is":case"matches":case"-webkit-any":case"-moz-any":{const[s,a,o]=I5(i.children.first);t+=s,n+=a,r+=o;break}case"nth-child":case"nth-last-child":{const s=i.children.first;if(s.type==="Nth"&&s.selector){const[a,o,c]=I5(s.selector);t+=a,n+=o+1,r+=c}else n++;break}case"where":break;case"before":case"after":case"first-line":case"first-letter":r++;break;default:n++}break;case"TypeSelector":i.name.endsWith("*")||r++;break;case"PseudoElementSelector":r++;break}}),[t,n,r]}const Y_e=new Set(["first-letter","first-line","after","before"]),X_e=new Set(["link","visited","hover","active","first-letter","first-line","after","before"]);function K_e(e,t){const n=new Set;e.prelude.children.forEach(function(r){let i="*",s=0;r.children.forEach(function(a){switch(a.type){case"ClassSelector":if(t&&t.scopes){const o=t.scopes[a.name]||0;if(s!==0&&o!==s)throw new Error("Selector can't has classes from different scopes: "+no(r));s=o}break;case"PseudoClassSelector":{const o=a.name.toLowerCase();X_e.has(o)||n.add(`:${o}`);break}case"PseudoElementSelector":{const o=a.name.toLowerCase();Y_e.has(o)||n.add(`::${o}`);break}case"TypeSelector":i=a.name.toLowerCase();break;case"AttributeSelector":a.flags&&n.add(`[${a.flags.toLowerCase()}]`);break;case"Combinator":i="*";break}}),r.compareMarker=eh(r).toString(),r.id=null,r.id=no(r),s&&(r.compareMarker+=":"+s),i!=="*"&&(r.compareMarker+=","+i)}),e.pseudoSignature=n.size>0?[...n].sort().join(","):!1}function Z_e(e,t){const n=V_e();return gs(e,{visit:"Rule",enter(r){r.block.children.forEach(n),K_e(r,t.usage)}}),gs(e,{visit:"Atrule",enter(r){r.prelude&&(r.prelude.id=null,r.prelude.id=no(r.prelude)),Ea(r.name).basename==="keyframes"&&(r.block.avoidRulesMerge=!0,r.block.children.forEach(function(i){i.prelude.children.forEach(function(s){s.compareMarker=s.id})}))}}),{declaration:n}}const{hasOwnProperty:$5}=Object.prototype;function D5(e,t,n,r){const i=t.data,s=Ea(i.name).basename,a=i.name.toLowerCase()+"/"+(i.prelude?i.prelude.id:null);$5.call(e,s)||(e[s]=Object.create(null)),r&&delete e[s][a],$5.call(e[s],a)||(e[s][a]=new Un),e[s][a].append(n.remove(t))}function Q_e(e,t){const n=Object.create(null);let r=null;e.children.forEach(function(i,s,a){if(i.type==="Atrule"){const o=Ea(i.name).basename;switch(o){case"keyframes":D5(n,s,a,!0);return;case"media":if(t.forceMediaMerge){D5(n,s,a,!1);return}break}r===null&&o!=="charset"&&o!=="import"&&(r=s)}else r===null&&(r=s)});for(const i in n)for(const s in n[i])e.children.insertList(n[i][s],i==="media"?null:r)}function z5(e){return e.type==="Atrule"&&e.name==="media"}function J_e(e,t,n){if(!z5(e))return;const r=t.prev&&t.prev.data;!r||!z5(r)||e.prelude&&r.prelude&&e.prelude.id===r.prelude.id&&(r.block.children.appendList(e.block.children),n.remove(t))}function eke(e,t){Q_e(e,t),gs(e,{visit:"Atrule",reverse:!0,enter:J_e})}const{hasOwnProperty:tke}=Object.prototype;function H6(e,t){let n=e.head,r=t.head;for(;n!==null&&r!==null&&n.data.id===r.data.id;)n=n.next,r=r.next;return n===null&&r===null}function W6(e,t){let n=e.head,r=t.head;for(;n!==null&&r!==null&&n.data.id===r.data.id;)n=n.next,r=r.next;return n===null&&r===null}function nke(e,t){const n={eq:[],ne1:[],ne2:[],ne2overrided:[]},r=Object.create(null),i=Object.create(null);for(let s=t.head;s;s=s.next)i[s.data.id]=!0;for(let s=e.head;s;s=s.next){const a=s.data;a.fingerprint&&(r[a.fingerprint]=a.important),i[a.id]?(i[a.id]=!1,n.eq.push(a)):n.ne1.push(a)}for(let s=t.head;s;s=s.next){const a=s.data;i[a.id]&&((!tke.call(r,a.fingerprint)||!r[a.fingerprint]&&a.important)&&n.ne2.push(a),n.ne2overrided.push(a))}return n}function md(e,t){return t.forEach(n=>{const r=n.id;let i=e.head;for(;i;){const s=i.data.id;if(s===r)return;if(s>r)break;i=i.next}e.insert(e.createItem(n),i)}),e}function V6(e,t){let n=e.head;for(;n!==null;){let r=t.head;for(;r!==null;){if(n.data.compareMarker===r.data.compareMarker)return!0;r=r.next}n=n.next}return!1}function O0(e){switch(e.type){case"Rule":return V6(e.prelude.children,this);case"Atrule":if(e.block)return e.block.children.some(O0,this);break;case"Declaration":return!1}return!0}function rke(e,t,n){const r=e.prelude.children,i=e.block.children;n.prevUntil(t.prev,function(s){if(s.type!=="Rule")return O0.call(r,s);const a=s.prelude.children,o=s.block.children;if(e.pseudoSignature===s.pseudoSignature){if(H6(a,r))return o.appendList(i),n.remove(t),!0;if(W6(i,o))return md(a,r),n.remove(t),!0}return V6(r,a)})}function ike(e){gs(e,{visit:"Rule",enter:rke})}function ske(e,t,n){const r=e.prelude.children;for(;r.head!==r.tail;){const i=new Un;i.insert(r.remove(r.head)),n.insert(n.createItem({type:"Rule",loc:e.loc,prelude:{type:"SelectorList",loc:e.prelude.loc,children:i},block:{type:"Block",loc:e.block.loc,children:e.block.children.copy()},pseudoSignature:e.pseudoSignature}),t)}}function ake(e){gs(e,{visit:"Rule",reverse:!0,enter:ske})}const G6=1,oke=2,Fc=0,Wh=1,Nb=2,Wp=3,F5=["top","right","bottom","left"],lke={"margin-top":"top","margin-right":"right","margin-bottom":"bottom","margin-left":"left","padding-top":"top","padding-right":"right","padding-bottom":"bottom","padding-left":"left","border-top-color":"top","border-right-color":"right","border-bottom-color":"bottom","border-left-color":"left","border-top-width":"top","border-right-width":"right","border-bottom-width":"bottom","border-left-width":"left","border-top-style":"top","border-right-style":"right","border-bottom-style":"bottom","border-left-style":"left"},B5={margin:"margin","margin-top":"margin","margin-right":"margin","margin-bottom":"margin","margin-left":"margin",padding:"padding","padding-top":"padding","padding-right":"padding","padding-bottom":"padding","padding-left":"padding","border-color":"border-color","border-top-color":"border-color","border-right-color":"border-color","border-bottom-color":"border-color","border-left-color":"border-color","border-width":"border-width","border-top-width":"border-width","border-right-width":"border-width","border-bottom-width":"border-width","border-left-width":"border-width","border-style":"border-style","border-top-style":"border-style","border-right-style":"border-style","border-bottom-style":"border-style","border-left-style":"border-style"};class cke{constructor(t){this.name=t,this.loc=null,this.iehack=void 0,this.sides={top:null,right:null,bottom:null,left:null}}getValueSequence(t,n){const r=[];let i="";return t.value.type!=="Value"||t.value.children.some(function(a){let o=!1;switch(a.type){case"Identifier":switch(a.name){case"\\0":case"\\9":i=a.name;return;case"inherit":case"initial":case"unset":case"revert":o=a.name;break}break;case"Dimension":switch(a.unit){case"rem":case"vw":case"vh":case"vmin":case"vmax":case"vm":o=a.unit;break}break;case"Hash":case"Number":case"Percentage":break;case"Function":if(a.name==="var")return!0;o=a.name;break;default:return!0}r.push({node:a,special:o,important:t.important})})||r.length>n||typeof this.iehack=="string"&&this.iehack!==i?!1:(this.iehack=i,r)}canOverride(t,n){const r=this.sides[t];return!r||n.important&&!r.important}add(t,n){function r(){const i=this.sides,s=lke[t];if(s){if(!(s in i))return!1;const a=this.getValueSequence(n,1);if(!a||!a.length)return!1;for(const o in i)if(i[o]!==null&&i[o].special!==a[0].special)return!1;return this.canOverride(s,a[0])&&(i[s]=a[0]),!0}else if(t===this.name){const a=this.getValueSequence(n,4);if(!a||!a.length)return!1;switch(a.length){case 1:a[Wh]=a[Fc],a[Nb]=a[Fc],a[Wp]=a[Fc];break;case 2:a[Nb]=a[Fc],a[Wp]=a[Wh];break;case 3:a[Wp]=a[Wh];break}for(let o=0;o<4;o++)for(const c in i)if(i[c]!==null&&i[c].special!==a[o].special)return!1;for(let o=0;o<4;o++)this.canOverride(F5[o],a[o])&&(i[F5[o]]=a[o]);return!0}}return r.call(this)?(this.loc||(this.loc=n.loc),!0):!1}isOkToMinimize(){const t=this.sides.top,n=this.sides.right,r=this.sides.bottom,i=this.sides.left;if(t&&n&&r&&i){const s=t.important+n.important+r.important+i.important;return s===0||s===4}return!1}getValue(){const t=new Un,n=this.sides,r=[n.top,n.right,n.bottom,n.left],i=[no(n.top.node),no(n.right.node),no(n.bottom.node),no(n.left.node)];i[Wp]===i[Wh]&&(r.pop(),i[Nb]===i[Fc]&&(r.pop(),i[Wh]===i[Fc]&&r.pop()));for(let s=0;s<r.length;s++)t.appendData(r[s].node);return this.iehack&&t.appendData({type:"Identifier",loc:null,name:this.iehack}),{type:"Value",loc:null,children:t}}getDeclaration(){return{type:"Declaration",loc:this.loc,important:this.sides.top.important,property:this.name,value:this.getValue()}}}function uke(e,t,n,r){const i=e.block.children,s=e.prelude.children.first.id;return e.block.children.forEachRight(function(a,o){const c=a.property;if(!B5.hasOwnProperty(c))return;const h=B5[c];let d,p;if((!r||s===r)&&h in t&&(p=oke,d=t[h]),(!d||!d.add(c,a))&&(p=G6,d=new cke(h),!d.add(c,a))){r=null;return}t[h]=d,n.push({operation:p,block:i,item:o,shorthand:d}),r=s}),r}function hke(e,t){e.forEach(function(n){const r=n.shorthand;r.isOkToMinimize()&&(n.operation===G6?n.item.data=t(r.getDeclaration()):n.block.remove(n.item))})}function dke(e,t){const n={},r=[];gs(e,{visit:"Rule",reverse:!0,enter(i){const s=this.block||this.stylesheet,a=(i.pseudoSignature||"")+"|"+i.prelude.children.first.id;let o,c;n.hasOwnProperty(s.id)?o=n[s.id]:(o={lastShortSelector:null},n[s.id]=o),o.hasOwnProperty(a)?c=o[a]:(c={},o[a]=c),o.lastShortSelector=uke.call(this,i,c,r,o.lastShortSelector)}}),hke(r,t.declaration)}let fke=1;const pke=new Set(["src"]),U5={display:/table|ruby|flex|-(flex)?box$|grid|contents|run-in/i,"text-align":/^(start|end|match-parent|justify-all)$/i},H5={cursor:["auto","crosshair","default","move","text","wait","help","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","pointer","progress","not-allowed","no-drop","vertical-text","all-scroll","col-resize","row-resize"],overflow:["hidden","visible","scroll","auto"],position:["static","relative","absolute","fixed"]},W5={"border-width":["border"],"border-style":["border"],"border-color":["border"],"border-top":["border"],"border-right":["border"],"border-bottom":["border"],"border-left":["border"],"border-top-width":["border-top","border-width","border"],"border-right-width":["border-right","border-width","border"],"border-bottom-width":["border-bottom","border-width","border"],"border-left-width":["border-left","border-width","border"],"border-top-style":["border-top","border-style","border"],"border-right-style":["border-right","border-style","border"],"border-bottom-style":["border-bottom","border-style","border"],"border-left-style":["border-left","border-style","border"],"border-top-color":["border-top","border-color","border"],"border-right-color":["border-right","border-color","border"],"border-bottom-color":["border-bottom","border-color","border"],"border-left-color":["border-left","border-color","border"],"margin-top":["margin"],"margin-right":["margin"],"margin-bottom":["margin"],"margin-left":["margin"],"padding-top":["padding"],"padding-right":["padding"],"padding-bottom":["padding"],"padding-left":["padding"],"font-style":["font"],"font-variant":["font"],"font-weight":["font"],"font-size":["font"],"font-family":["font"],"list-style-type":["list-style"],"list-style-position":["list-style"],"list-style-image":["list-style"]};function q6(e,t,n){const r=Zu(e).basename;if(r==="background")return e+":"+no(t.value);const i=t.id;let s=n[i];if(!s){switch(t.value.type){case"Value":const a={};let o="",c="",h=!1;t.value.children.forEach(function d(p){switch(p.type){case"Value":case"Brackets":case"Parentheses":p.children.forEach(d);break;case"Raw":h=!0;break;case"Identifier":{const{name:m}=p;o||(o=Ea(m).vendor),/\\[09]/.test(m)&&(c=RegExp.lastMatch),H5.hasOwnProperty(r)?H5[r].indexOf(m)===-1&&(a[m]=!0):U5.hasOwnProperty(r)&&U5[r].test(m)&&(a[m]=!0);break}case"Function":{let{name:m}=p;o||(o=Ea(m).vendor),m==="rect"&&(p.children.some(v=>v.type==="Operator"&&v.value===",")||(m="rect-backward")),a[m+"()"]=!0,p.children.forEach(d);break}case"Dimension":{const{unit:m}=p;switch(/\\[09]/.test(m)&&(c=RegExp.lastMatch),m){case"rem":case"vw":case"vh":case"vmin":case"vmax":case"vm":a[m]=!0;break}break}}}),s=h?"!"+fke++:"!"+Object.keys(a).sort()+"|"+c+o;break;case"Raw":s="!"+t.value.value;break;default:s=no(t.value)}n[i]=s}return e+s}function mke(e,t,n){const r=Zu(t.property);if(W5.hasOwnProperty(r.basename)){const i=W5[r.basename];for(const s of i){const a=q6(r.prefix+s,t,n),o=e.hasOwnProperty(a)?e[a]:null;if(o&&(!t.important||o.item.data.important))return o}}}function gke(e,t,n,r,i){const s=e.block.children;s.forEachRight(function(a,o){const{property:c}=a,h=q6(c,a,i),d=r[h];d&&!pke.has(c)?a.important&&!d.item.data.important?(r[h]={block:s,item:o},d.block.remove(d.item)):s.remove(o):mke(r,a,i)?s.remove(o):(a.fingerprint=h,r[h]={block:s,item:o})}),s.isEmpty&&n.remove(t)}function yke(e){const t={},n=Object.create(null);gs(e,{visit:"Rule",reverse:!0,enter(r,i,s){const a=this.block||this.stylesheet,o=(r.pseudoSignature||"")+"|"+r.prelude.children.first.id;let c,h;t.hasOwnProperty(a.id)?c=t[a.id]:(c={},t[a.id]=c),c.hasOwnProperty(o)?h=c[o]:(h={},c[o]=h),gke.call(this,r,i,s,h,n)}})}function bke(e,t,n){const r=e.prelude.children,i=e.block.children,s=r.first.compareMarker,a={};n.nextUntil(t.next,function(o,c){if(o.type!=="Rule")return O0.call(r,o);if(e.pseudoSignature!==o.pseudoSignature)return!0;const h=o.prelude.children.head,d=o.block.children,p=h.data.compareMarker;if(p in a)return!0;if(r.head===r.tail&&r.first.id===h.data.id){i.appendList(d),n.remove(c);return}if(W6(i,d)){const m=h.data.id;r.some((g,v)=>{const w=g.id;if(m<w)return r.insert(h,v),!0;if(!v.next)return r.insert(h),!0}),n.remove(c);return}if(p===s)return!0;a[p]=!0})}function vke(e){gs(e,{visit:"Rule",enter:bke})}function Ob(e){return e.reduce((t,n)=>t+n.id.length+1,0)-1}function Rb(e){let t=0;for(const n of e)t+=n.length;return t+e.length-1}function xke(e,t,n){const r=this.block!==null?this.block.avoidRulesMerge:!1,i=e.prelude.children,s=e.block,a=Object.create(null);let o=!0,c=!0;n.prevUntil(t.prev,function(h,d){const p=h.block,m=h.type;if(m!=="Rule"){const w=O0.call(i,h);return!w&&m==="Atrule"&&p&&gs(p,{visit:"Rule",enter(C){C.prelude.children.forEach(x=>{a[x.compareMarker]=!0})}}),w}if(e.pseudoSignature!==h.pseudoSignature)return!0;const g=h.prelude.children;if(c=!g.some(w=>w.compareMarker in a),!c&&!o)return!0;if(o&&H6(g,i))return p.children.appendList(s.children),n.remove(t),!0;const v=nke(s.children,p.children);if(v.eq.length){if(!v.ne1.length&&!v.ne2.length)return c&&(md(i,g),n.remove(d)),!0;if(!r)if(v.ne1.length&&!v.ne2.length){const w=Ob(i),C=Rb(v.eq);o&&w<C&&(md(g,i),s.children.fromArray(v.ne1))}else if(!v.ne1.length&&v.ne2.length){const w=Ob(g),C=Rb(v.eq);c&&w<C&&(md(i,g),p.children.fromArray(v.ne2))}else{const w={type:"SelectorList",loc:null,children:md(g.copy(),i)},C=Ob(w.children)+2;if(Rb(v.eq)>=C){const k=n.createItem({type:"Rule",loc:null,prelude:w,block:{type:"Block",loc:null,children:new Un().fromArray(v.eq)},pseudoSignature:e.pseudoSignature});return s.children.fromArray(v.ne1),p.children.fromArray(v.ne2overrided),o?n.insert(k,d):n.insert(k,t),!0}}}o&&(o=!g.some(w=>i.some(C=>C.compareMarker===w.compareMarker))),g.forEach(w=>{a[w.compareMarker]=!0})})}function wke(e){gs(e,{visit:"Rule",reverse:!0,enter:xke})}function _ke(e,t){const n=Z_e(e,t);t.logger("prepare",e),eke(e,t),t.logger("mergeAtrule",e),ike(e),t.logger("initialMergeRuleset",e),ake(e),t.logger("disjoinRuleset",e),dke(e,n),t.logger("restructShorthand",e),yke(e),t.logger("restructBlock",e),vke(e),t.logger("mergeRuleset",e),wke(e),t.logger("restructRuleset",e)}function kke(e,t){const n=new Un;let r=!1,i;return e.nextUntil(e.head,(s,a,o)=>{if(s.type==="Comment"){if(!t||s.value.charAt(0)!=="!"){o.remove(a);return}if(r||i)return!0;o.remove(a),i=s;return}s.type!=="WhiteSpace"&&(r=!0),n.insert(o.remove(a))}),{comment:i,stylesheet:{type:"StyleSheet",loc:null,children:n}}}function Ske(e,t,n,r){r.logger(`Compress block #${n}`,null,!0);let i=1;return e.type==="StyleSheet"&&(e.firstAtrulesAllowed=t,e.id=i++),gs(e,{visit:"Atrule",enter(s){s.block!==null&&(s.block.id=i++)}}),r.logger("init",e),k_e(e,r),r.logger("clean",e),H_e(e),r.logger("replace",e),r.restructuring&&_ke(e,r),e}function Cke(e){let t="comments"in e?e.comments:"exclamation";return typeof t=="boolean"?t=t?"exclamation":!1:t!=="exclamation"&&t!=="first-exclamation"&&(t=!1),t}function Eke(e){return"restructure"in e?e.restructure:"restructuring"in e?e.restructuring:!0}function Tke(e){return new Un().appendData({type:"Rule",loc:null,prelude:{type:"SelectorList",loc:null,children:new Un().appendData({type:"Selector",loc:null,children:new Un().appendData({type:"TypeSelector",loc:null,name:"x"})})},block:e})}function jke(e,t){e=e||{type:"StyleSheet",loc:null,children:new Un},t=t||{};const n={logger:typeof t.logger=="function"?t.logger:function(){},restructuring:Eke(t),forceMediaMerge:!!t.forceMediaMerge,usage:t.usage?p_e(t.usage):!1},r=new Un;let i=Cke(t),s=!0,a,o,c=1,h;t.clone&&(e=t1(e)),e.type==="StyleSheet"?(a=e.children,e.children=r):a=Tke(e);do{if(o=kke(a,!!i),Ske(o.stylesheet,s,c++,n),h=o.stylesheet.children,o.comment&&(r.isEmpty||r.insert(Un.createItem({type:"Raw",value:`
`})),r.insert(Un.createItem(o.comment)),h.isEmpty||r.insert(Un.createItem({type:"Raw",value:`
`}))),s&&!h.isEmpty){const d=h.last;(d.type!=="Atrule"||d.name!=="import"&&d.name!=="charset")&&(s=!1)}i!=="exclamation"&&(i=!1),r.appendList(h)}while(!a.isEmpty);return{ast:e}}function V5(e){const t=Qx(e,!0),n=Qx(e);return t.length<n.length?t:n}const{lexer:Ake,tokenize:Pke,parse:Nke,generate:Oke,walk:Rke,find:Mke,findLast:Lke,findAll:Ike,fromPlainObject:$ke,toPlainObject:Dke}=d_e({node:{String:{generate(e){this.token(Na,V5(e.value))}},Url:{generate(e){const t=R6(e.value),n=V5(e.value);this.token(Si,t.length<=n.length+5?t:"url("+n+")")}}}}),zke=Object.freeze(Object.defineProperty({__proto__:null,compress:jke,find:Mke,findAll:Ike,findLast:Lke,fromPlainObject:$ke,generate:Oke,lexer:Ake,parse:Nke,specificity:eh,toPlainObject:Dke,tokenize:Pke,walk:Rke},Symbol.toStringTag,{value:"Module"})),{parse:Fke,generate:n1,compress:Bke}=zke;function Bc(e,t,n,r){return t.debug&&console.error(`## ${e} done in %d ms
`,Date.now()-n),r}function Uke(e){let t;return function(r,i){let s=r;if(i&&(s=`[${((Date.now()-t)/1e3).toFixed(3)}s] ${s}`),e>1&&i){let a=n1(i);e===2&&a.length>256&&(a=a.substr(0,256)+"..."),s+=`
  ${a}
`}console.error(s),t=Date.now()}}function Hke(e){return e={...e},typeof e.logger!="function"&&e.debug&&(e.logger=Uke(e.debug)),e}function G5(e,t,n){Array.isArray(n)||(n=[n]),n.forEach(r=>r(e,t))}function Y6(e,t,n){n=n||{};const r=n.filename||"<unknown>";let i;const s=Bc("parsing",n,Date.now(),Fke(t,{context:e,filename:r,positions:!!n.sourceMap}));n.beforeCompress&&Bc("beforeCompress",n,Date.now(),G5(s,n,n.beforeCompress));const a=Bc("compress",n,Date.now(),Bke(s,Hke(n)));return n.afterCompress&&Bc("afterCompress",n,Date.now(),G5(a,n,n.afterCompress)),n.sourceMap?i=Bc("generate(sourceMap: true)",n,Date.now(),(()=>{const o=n1(a.ast,{sourceMap:!0});return o.map._file=r,o.map.setSourceContent(r,t),o})()):i=Bc("generate",n,Date.now(),{css:n1(a.ast),map:null}),i}function Wke(e,t){return Y6("stylesheet",e,t)}function Vke(e,t){return Y6("declarationList",e,t)}const Vp=qs.skip,q5=(e,t)=>{const n=[];e.block.children.forEach(i=>{i.type==="Declaration"&&n.push({name:i.property,value:Ts(i.value),important:i.important===!0})});const r=[];return qs(e.prelude,i=>{if(i.type==="Selector"){const s=Dx(i);let a=!1;qs(s,(o,c,h)=>{o.type==="PseudoClassSelector"&&(a=!0,h.remove(c))}),r.push({specificity:eh(i),dynamic:a||t,selector:Ts(s),declarations:n})}}),r},Gke=(e,t)=>{const n=[],r=Xu(e,{parseValue:!1,parseAtrulePrelude:!1});return qs(r,i=>{if(i.type==="Rule")return n.push(...q5(i,t||!1)),Vp;if(i.type==="Atrule")return["keyframes","-webkit-keyframes","-o-keyframes","-moz-keyframes"].includes(i.name)||qs(i,s=>{if(s.type==="Rule")return n.push(...q5(s,t||!0)),Vp}),Vp}),n},qke=e=>{const t=[],n=Xu(e,{context:"declarationList",parseValue:!1});return qs(n,r=>{r.type==="Declaration"&&t.push({name:r.property,value:Ts(r.value),important:r.important===!0})}),t},Y5=(e,t,n)=>{const r={},i=new Map;for(const[a,o]of Object.entries(t.attributes))zi.presentation.has(a)&&(r[a]={type:"static",inherited:!1,value:o},i.set(a,!1));for(const{selector:a,declarations:o,dynamic:c}of e.rules)if(Nce(t,a,n))for(const{name:h,value:d,important:p}of o){const m=r[h];if(!(m&&m.type==="dynamic")){if(c){r[h]={type:"dynamic",inherited:!1};continue}(m==null||p===!0||i.get(h)===!1)&&(r[h]={type:"static",inherited:!1,value:d},i.set(h,p))}}const s=t.attributes.style==null?[]:qke(t.attributes.style);for(const{name:a,value:o,important:c}of s){const h=r[a];h&&h.type==="dynamic"||(h==null||c===!0||i.get(a)===!1)&&(r[a]={type:"static",inherited:!1,value:o},i.set(a,c))}return r},X6=(e,t)=>{for(let n=0;n<4;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},$a=e=>{const t=[],n=new Map;return ao(e,{element:{enter:(r,i)=>{if(n.set(r,i),r.name==="style"&&(r.attributes.type==null||r.attributes.type===""||r.attributes.type==="text/css")){const s=r.attributes.media!=null&&r.attributes.media!=="all";for(const a of r.children)(a.type==="text"||a.type==="cdata")&&t.push(...Gke(a.value,s))}}}}),t.sort((r,i)=>X6(r.specificity,i.specificity)),{rules:t,parents:n}},Ra=(e,t)=>{const{parents:n}=e,r=Y5(e,t,n);let i=n.get(t);for(;i!=null&&i.type!=="root";){const s=Y5(e,i,n);for(const[a,o]of Object.entries(s))r[a]==null&&g0.has(a)&&!v_.has(a)&&(r[a]={...o,inherited:!0});i=n.get(i)}return r},Mb=(e,t,n=null,r=!1)=>{const i=sf(typeof e=="string"?e:Ts(e.data));for(const s of i)if(s.some((o,c)=>r&&(c===s.length-1||!rR(s[c+1]))||o.type!=="attribute"||o.name!==t?!1:n==null?!0:o.value===n))return!0;return!1},Yke="removeDeprecatedAttrs",Xke="removes deprecated attributes";function Kke(e){const t=new Set;return e.rules.forEach(n=>{sf(n.selector).forEach(i=>{i.forEach(s=>{s.type==="attribute"&&t.add(s.name)})})}),t}function X5(e,t,n,r){t&&(t.safe&&t.safe.forEach(i=>{r.has(i)||delete e.attributes[i]}),n.removeUnsafe&&t.unsafe&&t.unsafe.forEach(i=>{r.has(i)||delete e.attributes[i]}))}function Zke(e,t){const n=$a(e),r=Kke(n);return{element:{enter:i=>{const s=b_[i.name];s&&(s.attrsGroups.has("core")&&i.attributes["xml:lang"]&&!r.has("xml:lang")&&i.attributes.lang&&delete i.attributes["xml:lang"],s.attrsGroups.forEach(a=>{X5(i,Uce[a],t,r)}),X5(i,s.deprecated,t,r))}}}}const K6=Object.freeze(Object.defineProperty({__proto__:null,description:Xke,fn:Zke,name:Yke},Symbol.toStringTag,{value:"Module"})),Qke="removeMetadata",Jke="removes <metadata>",eSe=()=>({element:{enter:(e,t)=>{e.name==="metadata"&&Bn(e,t)}}}),Z6=Object.freeze(Object.defineProperty({__proto__:null,description:Jke,fn:eSe,name:Qke},Symbol.toStringTag,{value:"Module"})),tSe="removeEditorsNSData",nSe="removes editors namespaces, elements and attributes",rSe=(e,t)=>{let n=[...wE];Array.isArray(t.additionalNamespaces)&&(n=[...wE,...t.additionalNamespaces]);const r=[];return{element:{enter:(i,s)=>{if(i.name==="svg")for(const[a,o]of Object.entries(i.attributes))a.startsWith("xmlns:")&&n.includes(o)&&(r.push(a.slice(6)),delete i.attributes[a]);for(const a of Object.keys(i.attributes))if(a.includes(":")){const[o]=a.split(":");r.includes(o)&&delete i.attributes[a]}if(i.name.includes(":")){const[a]=i.name.split(":");r.includes(a)&&Bn(i,s)}}}}},Q6=Object.freeze(Object.defineProperty({__proto__:null,description:nSe,fn:rSe,name:tSe},Symbol.toStringTag,{value:"Module"})),iSe="cleanupAttrs",sSe="cleanups attributes from newlines, trailing and repeating spaces",aSe=/(\S)\r?\n(\S)/g,oSe=/\r?\n/g,lSe=/\s{2,}/g,cSe=(e,t)=>{const{newlines:n=!0,trim:r=!0,spaces:i=!0}=t;return{element:{enter:s=>{for(const a of Object.keys(s.attributes))n&&(s.attributes[a]=s.attributes[a].replace(aSe,(o,c,h)=>c+" "+h),s.attributes[a]=s.attributes[a].replace(oSe,"")),r&&(s.attributes[a]=s.attributes[a].trim()),i&&(s.attributes[a]=s.attributes[a].replace(lSe," "))}}}},J6=Object.freeze(Object.defineProperty({__proto__:null,description:sSe,fn:cSe,name:iSe},Symbol.toStringTag,{value:"Module"})),uSe="mergeStyles",hSe="merge multiple style elements into one",dSe=()=>{let e=null,t="",n="text";return{element:{enter:(r,i)=>{if(r.name==="foreignObject")return Ao;if(r.name!=="style"||r.attributes.type!=null&&r.attributes.type!==""&&r.attributes.type!=="text/css")return;let s="";for(const a of r.children)a.type==="text"&&(s+=a.value),a.type==="cdata"&&(n="cdata",s+=a.value);if(s.trim().length===0){Bn(r,i);return}if(r.attributes.media==null?t+=s:(t+=`@media ${r.attributes.media}{${s}}`,delete r.attributes.media),e==null)e=r;else{Bn(r,i);const a={type:n,value:t};e.children=[a]}}}}},eL=Object.freeze(Object.defineProperty({__proto__:null,description:hSe,fn:dSe,name:uSe},Symbol.toStringTag,{value:"Module"})),fSe="inlineStyles",pSe="inline styles (additional options)",mSe=[...SE.functional,...SE.treeStructural],gSe=(e,t)=>{const{onlyMatchedOnce:n=!0,removeMatchedSelectors:r=!0,useMqs:i=["","screen"],usePseudos:s=[""]}=t,a=[],o=[];return{element:{enter:(c,h)=>{if(c.name==="foreignObject")return Ao;if(c.name!=="style"||c.children.length===0||c.attributes.type!=null&&c.attributes.type!==""&&c.attributes.type!=="text/css")return;const d=c.children.filter(m=>m.type==="text"||m.type==="cdata").map(m=>m.value).join("");let p=null;try{p=Xu(d,{parseValue:!1,parseCustomProperty:!1})}catch{return}p.type==="StyleSheet"&&a.push({node:c,parentNode:h,cssAst:p}),qs(p,{visit:"Rule",enter(m){const g=this.atrule;let v="";g!=null&&(v=g.name,g.prelude!=null&&(v+=` ${Ts(g.prelude)}`)),i.includes(v)&&m.prelude.type==="SelectorList"&&m.prelude.children.forEach((w,C)=>{if(w.type==="Selector"){const x=[];w.children.forEach((P,j,M)=>{(P.type==="PseudoClassSelector"||P.type==="PseudoElementSelector")&&!mSe.includes(P.name)&&x.push({item:j,list:M})});const k=Ts({type:"Selector",children:new ko().fromArray(x.map(P=>P.item.data))});if(s.includes(k))for(const P of x)P.list.remove(P.item);o.push({node:w,rule:m,item:C})}})}})}},root:{exit:()=>{if(a.length===0)return;const c=o.slice().sort((h,d)=>{const p=eh(h.item.data),m=eh(d.item.data);return X6(p,m)}).reverse();for(const h of c){const d=Ts(h.item.data),p=[];try{for(const m of of(e,d))m.type==="element"&&p.push(m)}catch{continue}if(p.length!==0&&!(n&&p.length>1)){for(const m of p){const g=Xu(m.attributes.style??"",{context:"declarationList",parseValue:!1});if(g.type!=="DeclarationList")continue;const v=new Map;let w;qs(g,{visit:"Declaration",enter(x,k){w==null&&(w=k),v.set(x.property.toLowerCase(),k)}}),qs(h.rule,{visit:"Declaration",enter(x){const k=x.property;zi.presentation.has(k)&&!o.some(M=>Mb(M.item,k))&&delete m.attributes[k];const P=v.get(k),j=g.children.createItem(x);P==null?g.children.insert(j,w):P.data.important!==!0&&x.important===!0&&(g.children.replace(P,j),v.set(k,j))}});const C=Ts(g);C.length!==0&&(m.attributes.style=C)}r&&p.length!==0&&h.rule.prelude.type==="SelectorList"&&h.rule.prelude.children.remove(h.item),h.matchedElements=p}}if(r){for(const h of c)if(h.matchedElements!=null&&!(n&&h.matchedElements.length>1))for(const d of h.matchedElements){const p=new Set(d.attributes.class==null?null:d.attributes.class.split(" "));for(const g of h.node.children)g.type==="ClassSelector"&&!o.some(v=>Mb(v.item,"class",g.name,!0))&&p.delete(g.name);p.size===0?delete d.attributes.class:d.attributes.class=Array.from(p).join(" ");const m=h.node.children.first;(m==null?void 0:m.type)==="IdSelector"&&d.attributes.id===m.name&&!o.some(g=>Mb(g.item,"id",m.name,!0))&&delete d.attributes.id}for(const h of a)if(qs(h.cssAst,{visit:"Rule",enter:function(d,p,m){d.type==="Rule"&&d.prelude.type==="SelectorList"&&d.prelude.children.isEmpty&&m.remove(p)}}),h.cssAst.children.isEmpty)Bn(h.node,h.parentNode);else{const d=h.node.children[0];(d.type==="text"||d.type==="cdata")&&(d.value=Ts(h.cssAst))}}}}}},tL=Object.freeze(Object.defineProperty({__proto__:null,description:pSe,fn:gSe,name:fSe},Symbol.toStringTag,{value:"Module"})),nL=/\burl\((["'])?#(.+?)\1\)/g,ySe=/^#(.+?)$/,bSe=/(\w+)\.[a-zA-Z]/,vSe=(e,t)=>{let n="data:image/svg+xml";return!t||t==="base64"?(n+=";base64,",e=n+Buffer.from(e).toString("base64")):t==="enc"?e=n+","+encodeURIComponent(e):t==="unenc"&&(e=n+","+e),e},th=(e,t,n)=>{let r="",i,s;return e.forEach((a,o)=>{i=" ",o==0&&(i=""),t.noSpaceAfterFlags&&n=="a";const c=t.leadingZero?ic(a):a.toString();t.negativeExtraSpace&&i!=""&&(a<0||c.charAt(0)==="."&&s%1!==0)&&(i=""),s=a,r+=i+c}),r},ic=e=>{const t=e.toString();return 0<e&&e<1&&t.startsWith("0")?t.slice(1):-1<e&&e<0&&t[1]==="0"?t[0]+t.slice(2):t},R0=e=>e.name==="script"&&e.children.length!==0||e.name==="a"&&Object.entries(e.attributes).some(([r,i])=>(r==="href"||r.endsWith(":href"))&&i!=null&&i.trimStart().startsWith("javascript:"))?!0:[...zi.animationEvent,...zi.documentEvent,...zi.documentElementEvent,...zi.globalEvent,...zi.graphicalEvent].some(n=>e.attributes[n]!=null),M0=e=>new RegExp(nL).test(e),rL=(e,t)=>{const n=[];if(m0.has(e)){const r=t.matchAll(nL);for(const i of r)n.push(i[2])}if(e==="href"||e.endsWith(":href")){const r=ySe.exec(t);r!=null&&n.push(r[1])}if(e==="begin"){const r=bSe.exec(t);r!=null&&n.push(r[1])}return n.map(r=>decodeURI(r))},So=(e,t)=>{const n=10**t;return Math.round(e*n)/n},xSe="minifyStyles",wSe="minifies styles and removes unused styles",_Se=(e,{usage:t,...n})=>{const r=new Map,i=[],s=new Set,a=new Set,o=new Set;let c=!0,h=!0,d=!0,p=!1;typeof t=="boolean"?(c=t,h=t,d=t):t&&(c=t.tags==null?!0:t.tags,h=t.ids==null?!0:t.ids,d=t.classes==null?!0:t.classes,p=t.force==null?!1:t.force);let m=!1;return{element:{enter:(g,v)=>{if(R0(g)&&(m=!0),s.add(g.name),g.attributes.id!=null&&a.add(g.attributes.id),g.attributes.class!=null)for(const w of g.attributes.class.split(/\s+/))o.add(w);g.name==="style"&&g.children.length!==0?r.set(g,v):g.attributes.style!=null&&i.push(g)}},root:{exit:()=>{const g={};(!m||p)&&(c&&(g.tags=Array.from(s)),h&&(g.ids=Array.from(a)),d&&(g.classes=Array.from(o)));for(const[v,w]of r.entries())if(v.children[0].type==="text"||v.children[0].type==="cdata"){const C=v.children[0].value,x=Wke(C,{...n,usage:g}).css;if(x.length===0){Bn(v,w);continue}C.indexOf(">")>=0||C.indexOf("<")>=0?(v.children[0].type="cdata",v.children[0].value=x):(v.children[0].type="text",v.children[0].value=x)}for(const v of i){const w=v.attributes.style;v.attributes.style=Vke(w,{...n}).css}}}}},iL=Object.freeze(Object.defineProperty({__proto__:null,description:wSe,fn:_Se,name:xSe},Symbol.toStringTag,{value:"Module"})),kSe="cleanupIds",SSe="removes unused IDs and minifies used",sL=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],K5=sL.length-1,CSe=(e,t)=>{for(const n of t)if(e.startsWith(n))return!0;return!1},ESe=e=>{if(e==null)return[0];e[e.length-1]+=1;for(let t=e.length-1;t>0;t--)e[t]>K5&&(e[t]=0,e[t-1]!==void 0&&e[t-1]++);return e[0]>K5&&(e[0]=0,e.unshift(0)),e},TSe=e=>e.map(t=>sL[t]).join(""),jSe=(e,t)=>{const{remove:n=!0,minify:r=!0,preserve:i=[],preservePrefixes:s=[],force:a=!1}=t,o=new Set(Array.isArray(i)?i:i?[i]:[]),c=Array.isArray(s)?s:s?[s]:[],h=new Map,d=new Map;let p=!1;return{element:{enter:m=>{if(!a){if(m.name==="style"&&m.children.length!==0||R0(m)){p=!0;return}if(m.name==="svg"){let g=!0;for(const v of m.children)if(v.type!=="element"||v.name!=="defs"){g=!1;break}if(g)return Ao}}for(const[g,v]of Object.entries(m.attributes))if(g==="id"){const w=v;h.has(w)?delete m.attributes.id:h.set(w,m)}else{const w=rL(g,v);for(const C of w){let x=d.get(C);x==null&&(x=[],d.set(C,x)),x.push({element:m,name:g})}}}},root:{exit:()=>{if(p)return;const m=v=>o.has(v)||CSe(v,c);let g=null;for(const[v,w]of d){const C=h.get(v);if(C!=null){if(r&&m(v)===!1){let x;do g=ESe(g),x=TSe(g);while(m(x)||d.has(x)&&h.get(x)==null);C.attributes.id=x;for(const{element:k,name:P}of w){const j=k.attributes[P];j.includes("#")?k.attributes[P]=j.replace(`#${encodeURI(v)}`,`#${x}`).replace(`#${v}`,`#${x}`):k.attributes[P]=j.replace(`${v}.`,`${x}.`)}}h.delete(v)}}if(n)for(const[v,w]of h)m(v)===!1&&delete w.attributes.id}}}},aL=Object.freeze(Object.defineProperty({__proto__:null,description:SSe,fn:jSe,name:kSe},Symbol.toStringTag,{value:"Module"})),ASe="removeUselessDefs",PSe="removes elements in <defs> without id",NSe=()=>({element:{enter:(e,t)=>{if(e.name==="defs"||Tl.nonRendering.has(e.name)&&e.attributes.id==null){const n=[];oL(e,n),n.length===0&&Bn(e,t),e.children=n}}}}),oL=(e,t)=>{for(const n of e.children)n.type==="element"&&(n.attributes.id!=null||n.name==="style"?t.push(n):oL(n,t))},lL=Object.freeze(Object.defineProperty({__proto__:null,description:PSe,fn:NSe,name:ASe},Symbol.toStringTag,{value:"Module"})),OSe="cleanupNumericValues",RSe='rounds numeric values to the fixed precision, removes default "px" units',MSe=/^([-+]?\d*\.?\d+([eE][-+]?\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,Z5={cm:96/2.54,mm:96/25.4,in:96,pt:4/3,pc:16,px:1},LSe=(e,t)=>{const{floatPrecision:n=3,leadingZero:r=!0,defaultPx:i=!0,convertToPx:s=!0}=t;return{element:{enter:a=>{if(a.attributes.viewBox!=null){const o=a.attributes.viewBox.trim().split(/(?:\s,?|,)\s*/g);a.attributes.viewBox=o.map(c=>{const h=Number(c);return Number.isNaN(h)?c:Number(h.toFixed(n))}).join(" ")}for(const[o,c]of Object.entries(a.attributes)){if(o==="version")continue;const h=MSe.exec(c);if(h){let d=Number(Number(h[1]).toFixed(n)),m=h[3]||"";if(s&&m!==""&&m in Z5){const v=Number((Z5[m]*Number(h[1])).toFixed(n));v.toString().length<h[0].length&&(d=v,m="px")}let g;r?g=ic(d):g=d.toString(),i&&m==="px"&&(m=""),a.attributes[o]=g+m}}}}}},cL=Object.freeze(Object.defineProperty({__proto__:null,description:RSe,fn:LSe,name:OSe},Symbol.toStringTag,{value:"Module"})),ISe="convertColors",$Se="converts colors: rgb() to #rrggbb and #rrggbb to #rgb",Lb="([+-]?(?:\\d*\\.\\d+|\\d+\\.?)%?)",Q5="(?:\\s*,\\s*|\\s+)",DSe=new RegExp("^rgb\\(\\s*"+Lb+Q5+Lb+Q5+Lb+"\\s*\\)$"),zSe=/^#(([a-fA-F0-9])\2){3}$/,FSe=([e,t,n])=>"#"+((256+e<<8|t)<<8|n).toString(16).slice(1).toUpperCase(),BSe=(e,t)=>{const{currentColor:n=!1,names2hex:r=!0,rgb2hex:i=!0,convertCase:s="lower",shorthex:a=!0,shortname:o=!0}=t;let c=0;return{element:{enter:h=>{h.name==="mask"&&c++;for(const[d,p]of Object.entries(h.attributes))if(kx.has(d)){let m=p;if(n&&c===0){let g;typeof n=="string"?g=m===n:n instanceof RegExp?g=n.exec(m)!=null:g=m!=="none",g&&(m="currentColor")}if(r){const g=m.toLowerCase();_E[g]!=null&&(m=_E[g])}if(i){const g=m.match(DSe);if(g!=null){const v=g.slice(1,4).map(w=>{let C;return w.indexOf("%")>-1?C=Math.round(parseFloat(w)*2.55):C=Number(w),Math.max(0,Math.min(C,255))});m=FSe(v)}}if(s&&!M0(m)&&m!=="currentColor"&&(s==="lower"?m=m.toLowerCase():s==="upper"&&(m=m.toUpperCase())),a){const g=zSe.exec(m);g!=null&&(m="#"+g[0][1]+g[0][3]+g[0][5])}if(o){const g=m.toLowerCase();kE[g]!=null&&(m=kE[g])}h.attributes[d]=m}},exit:h=>{h.name==="mask"&&c--}}}},uL=Object.freeze(Object.defineProperty({__proto__:null,description:$Se,fn:BSe,name:ISe},Symbol.toStringTag,{value:"Module"})),USe="removeUnknownsAndDefaults",HSe="removes unknown elements content and attributes, removes attrs with default values",r1=new Map,hL=new Map,dL=new Map;for(const[e,t]of Object.entries(b_)){const n=new Set;if(t.content)for(const s of t.content)n.add(s);if(t.contentGroups)for(const s of t.contentGroups){const a=Tl[s];if(a)for(const o of a)n.add(o)}const r=new Set;if(t.attrs)for(const s of t.attrs)r.add(s);const i=new Map;if(t.defaults)for(const[s,a]of Object.entries(t.defaults))i.set(s,a);for(const s of t.attrsGroups){const a=zi[s];if(a)for(const c of a)r.add(c);const o=y_[s];if(o)for(const[c,h]of Object.entries(o))i.set(c,h)}r1.set(e,n),hL.set(e,r),dL.set(e,i)}const WSe=(e,t)=>{const{unknownContent:n=!0,unknownAttrs:r=!0,defaultAttrs:i=!0,defaultMarkupDeclarations:s=!0,uselessOverrides:a=!0,keepDataAttrs:o=!0,keepAriaAttrs:c=!0,keepRoleAttr:h=!1}=t,d=$a(e);return{instruction:{enter:p=>{s&&(p.value=p.value.replace(/\s*standalone\s*=\s*(["'])no\1/,""))}},element:{enter:(p,m)=>{if(p.name.includes(":"))return;if(p.name==="foreignObject")return Ao;if(n&&m.type==="element"){const C=r1.get(m.name);if(C==null||C.size===0){if(r1.get(p.name)==null){Bn(p,m);return}}else if(C.has(p.name)===!1){Bn(p,m);return}}const g=hL.get(p.name),v=dL.get(p.name),w=m.type==="element"?Ra(d,m):null;for(const[C,x]of Object.entries(p.attributes))if(!(o&&C.startsWith("data-"))&&!(c&&C.startsWith("aria-"))&&!(h&&C==="role")&&C!=="xmlns"){if(C.includes(":")){const[k]=C.split(":");if(k!=="xml"&&k!=="xlink")continue}if(r&&g&&g.has(C)===!1&&delete p.attributes[C],i&&p.attributes.id==null&&v&&v.get(C)===x&&(w==null?void 0:w[C])==null&&delete p.attributes[C],a&&p.attributes.id==null){const k=w==null?void 0:w[C];v_.has(C)===!1&&k!=null&&k.type==="static"&&k.value===x&&delete p.attributes[C]}}}}}},fL=Object.freeze(Object.defineProperty({__proto__:null,description:HSe,fn:WSe,name:USe},Symbol.toStringTag,{value:"Module"})),VSe="removeNonInheritableGroupAttrs",GSe="removes non-inheritable group's presentational attributes",qSe=()=>({element:{enter:e=>{if(e.name==="g")for(const t of Object.keys(e.attributes))zi.presentation.has(t)&&!g0.has(t)&&!v_.has(t)&&delete e.attributes[t]}}}),pL=Object.freeze(Object.defineProperty({__proto__:null,description:GSe,fn:qSe,name:VSe},Symbol.toStringTag,{value:"Module"})),YSe="removeUselessStrokeAndFill",XSe="removes useless stroke and fill attributes",KSe=(e,t)=>{const{stroke:n=!0,fill:r=!0,removeNone:i=!1}=t;let s=!1;if(ao(e,{element:{enter:o=>{(o.name==="style"||R0(o))&&(s=!0)}}}),s)return null;const a=$a(e);return{element:{enter:(o,c)=>{if(o.attributes.id!=null)return Ao;if(!Tl.shape.has(o.name))return;const h=Ra(a,o),d=h.stroke,p=h["stroke-opacity"],m=h["stroke-width"],g=h["marker-end"],v=h.fill,w=h["fill-opacity"],C=c.type==="element"?Ra(a,c):null,x=C==null?null:C.stroke;if(n&&(d==null||d.type==="static"&&d.value=="none"||p!=null&&p.type==="static"&&p.value==="0"||m!=null&&m.type==="static"&&m.value==="0")&&(m!=null&&m.type==="static"&&m.value==="0"||g==null)){for(const k of Object.keys(o.attributes))k.startsWith("stroke")&&delete o.attributes[k];x!=null&&x.type==="static"&&x.value!=="none"&&(o.attributes.stroke="none")}if(r&&(v!=null&&v.type==="static"&&v.value==="none"||w!=null&&w.type==="static"&&w.value==="0")){for(const k of Object.keys(o.attributes))k.startsWith("fill-")&&delete o.attributes[k];(v==null||v.type==="static"&&v.value!=="none")&&(o.attributes.fill="none")}i&&(d==null||o.attributes.stroke==="none")&&(v!=null&&v.type==="static"&&v.value==="none"||o.attributes.fill==="none")&&Bn(o,c)}}}},mL=Object.freeze(Object.defineProperty({__proto__:null,description:XSe,fn:KSe,name:YSe},Symbol.toStringTag,{value:"Module"})),ZSe="cleanupEnableBackground",QSe="remove or cleanup enable-background attribute when possible",JSe=/^new\s0\s0\s([-+]?\d*\.?\d+([eE][-+]?\d+)?)\s([-+]?\d*\.?\d+([eE][-+]?\d+)?)$/,e2e=e=>{let t=!1;return ao(e,{element:{enter:n=>{n.name==="filter"&&(t=!0)}}}),{element:{enter:n=>{let r=null,i=null;if(n.attributes.style!=null&&(r=Xu(n.attributes.style,{context:"declarationList"}),r.type==="DeclarationList")){const a=[];qs(r,(o,c)=>{o.type==="Declaration"&&o.property==="enable-background"&&(a.push(c),i=c)});for(let o=0;o<a.length-1;o++)r.children.remove(a[o])}if(!t){delete n.attributes["enable-background"],(r==null?void 0:r.type)==="DeclarationList"&&(i&&r.children.remove(i),r.children.isEmpty?delete n.attributes.style:n.attributes.style=Ts(r));return}const s=n.attributes.width!=null&&n.attributes.height!=null;if((n.name==="svg"||n.name==="mask"||n.name==="pattern")&&s){const a=n.attributes["enable-background"],o=J5(a,n.name,n.attributes.width,n.attributes.height);if(o?n.attributes["enable-background"]=o:delete n.attributes["enable-background"],(r==null?void 0:r.type)==="DeclarationList"&&i){const c=Ts(i.data.value),h=J5(c,n.name,n.attributes.width,n.attributes.height);h?i.data.value={type:"Raw",value:h}:r.children.remove(i)}}(r==null?void 0:r.type)==="DeclarationList"&&(r.children.isEmpty?delete n.attributes.style:n.attributes.style=Ts(r))}}}},J5=(e,t,n,r)=>{const i=JSe.exec(e);return i!=null&&n===i[1]&&r===i[3]?t==="svg"?void 0:"new":e},gL=Object.freeze(Object.defineProperty({__proto__:null,description:QSe,fn:e2e,name:ZSe},Symbol.toStringTag,{value:"Module"})),yL={M:2,m:2,Z:0,z:0,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2,A:7,a:7},t2e=e=>e in yL,n2e=e=>e===" "||e==="	"||e==="\r"||e===`
`,bL=e=>{const t=e.codePointAt(0);return t==null?!1:48<=t&&t<=57},Ib=(e,t)=>{let n=t,r="",i="none";for(;n<e.length;n+=1){const a=e[n];if(a==="+"||a==="-"){if(i==="none"){i="sign",r+=a;continue}if(i==="e"){i="exponent_sign",r+=a;continue}}if(bL(a)){if(i==="none"||i==="sign"||i==="whole"){i="whole",r+=a;continue}if(i==="decimal_point"||i==="decimal"){i="decimal",r+=a;continue}if(i==="e"||i==="exponent_sign"||i==="exponent"){i="exponent",r+=a;continue}}if(a==="."&&(i==="none"||i==="sign"||i==="whole")){i="decimal_point",r+=a;continue}if((a==="E"||a=="e")&&(i==="whole"||i==="decimal_point"||i==="decimal")){i="e",r+=a;continue}break}const s=Number.parseFloat(r);return Number.isNaN(s)?[t,null]:[n-1,s]},ek=e=>{const t=[];let n=null,r=[],i=0,s=!1,a=!1;for(let o=0;o<e.length;o+=1){const c=e.charAt(o);if(n2e(c))continue;if(s&&c===","){if(a)break;a=!0;continue}if(t2e(c)){if(a)return t;if(n==null){if(c!=="M"&&c!=="m")return t}else if(r.length!==0)return t;n=c,r=[],i=yL[n],s=!1,i===0&&t.push({command:n,args:r});continue}if(n==null)return t;let h=o,d=null;if(n==="A"||n==="a"){const p=r.length;(p===0||p===1)&&c!=="+"&&c!=="-"&&([h,d]=Ib(e,o)),(p===2||p===5||p===6)&&([h,d]=Ib(e,o)),(p===3||p===4)&&(c==="0"&&(d=0),c==="1"&&(d=1))}else[h,d]=Ib(e,o);if(d==null)return t;r.push(d),s=!0,a=!1,o=h,r.length===i&&(t.push({command:n,args:r}),n==="M"&&(n="L"),n==="m"&&(n="l"),r=[])}return t},r2e=(e,t)=>(t!=null&&(e=So(e,t)),{roundedStr:ic(e),rounded:e}),Gp=(e,t,n,r)=>{let i="",s;for(let a=0;a<t.length;a++){const{roundedStr:o,rounded:c}=r2e(t[a],n);r&&(e==="A"||e==="a")&&(a%7===4||a%7===5)||a===0||c<0||!Number.isInteger(s)&&!bL(o[0])?i+=o:i+=` ${o}`,s=c}return i},lu=({pathData:e,precision:t,disableSpaceAfterFlags:n})=>{if(e.length===1){const{command:s,args:a}=e[0];return s+Gp(s,a,t,n)}let r="",i={...e[0]};e[1].command==="L"?i.command="M":e[1].command==="l"&&(i.command="m");for(let s=1;s<e.length;s++){const{command:a,args:o}=e[s];i.command===a&&i.command!=="M"&&i.command!=="m"||i.command==="M"&&a==="L"||i.command==="m"&&a==="l"?(i.args=[...i.args,...o],s===e.length-1&&(r+=i.command+Gp(i.command,i.args,t,n))):(r+=i.command+Gp(i.command,i.args,t,n),s===e.length-1?r+=a+Gp(a,o,t,n):i={command:a,args:o})}return r},i2e=Tl.nonRendering,s2e="removeHiddenElems",a2e="removes hidden elements (zero sized, with absent attributes)",o2e=(e,t)=>{const{isHidden:n=!0,displayNone:r=!0,opacity0:i=!0,circleR0:s=!0,ellipseRX0:a=!0,ellipseRY0:o=!0,rectWidth0:c=!0,rectHeight0:h=!0,patternWidth0:d=!0,patternHeight0:p=!0,imageWidth0:m=!0,imageHeight0:g=!0,pathEmptyD:v=!0,polylineEmptyPoints:w=!0,polygonEmptyPoints:C=!0}=t,x=$a(e),k=new Map,P=new Set,j=new Map,M=new Set,S=new Map;let B=!1;function D(ee){if(M.has(ee.attributes.id))return!1;for(const ue of ee.children)if(ue.type==="element"&&!D(ue))return!1;return!0}function R(ee,ue){ee.type==="element"&&ee.attributes.id!=null&&ue.type==="element"&&ue.name==="defs"&&P.add(ee.attributes.id),Bn(ee,ue)}return ao(e,{element:{enter:(ee,ue)=>{if(i2e.has(ee.name))return k.set(ee,ue),Ao;const ie=Ra(x,ee);if(i&&ie.opacity&&ie.opacity.type==="static"&&ie.opacity.value==="0"){if(ee.name==="path")return k.set(ee,ue),Ao;R(ee,ue)}}}}),{element:{enter:(ee,ue)=>{if(ee.name==="style"&&ee.children.length!==0||R0(ee)){B=!0;return}if(ee.name==="defs"&&j.set(ee,ue),ee.name==="use")for(const ge of Object.keys(ee.attributes)){if(ge!=="href"&&!ge.endsWith(":href"))continue;const ye=ee.attributes[ge].slice(1);let Ae=S.get(ye);Ae||(Ae=[],S.set(ye,Ae)),Ae.push({node:ee,parentNode:ue})}const ie=Ra(x,ee);if(n&&ie.visibility&&ie.visibility.type==="static"&&ie.visibility.value==="hidden"&&vR(ee,"[visibility=visible]")==null){R(ee,ue);return}if(r&&ie.display&&ie.display.type==="static"&&ie.display.value==="none"&&ee.name!=="marker"){R(ee,ue);return}if(s&&ee.name==="circle"&&ee.children.length===0&&ee.attributes.r==="0"){R(ee,ue);return}if(a&&ee.name==="ellipse"&&ee.children.length===0&&ee.attributes.rx==="0"){R(ee,ue);return}if(o&&ee.name==="ellipse"&&ee.children.length===0&&ee.attributes.ry==="0"){R(ee,ue);return}if(c&&ee.name==="rect"&&ee.children.length===0&&ee.attributes.width==="0"){R(ee,ue);return}if(h&&c&&ee.name==="rect"&&ee.children.length===0&&ee.attributes.height==="0"){R(ee,ue);return}if(d&&ee.name==="pattern"&&ee.attributes.width==="0"){R(ee,ue);return}if(p&&ee.name==="pattern"&&ee.attributes.height==="0"){R(ee,ue);return}if(m&&ee.name==="image"&&ee.attributes.width==="0"){R(ee,ue);return}if(g&&ee.name==="image"&&ee.attributes.height==="0"){R(ee,ue);return}if(v&&ee.name==="path"){if(ee.attributes.d==null){R(ee,ue);return}const ge=ek(ee.attributes.d);if(ge.length===0){R(ee,ue);return}if(ge.length===1&&ie["marker-start"]==null&&ie["marker-end"]==null){R(ee,ue);return}}if(w&&ee.name==="polyline"&&ee.attributes.points==null){R(ee,ue);return}if(C&&ee.name==="polygon"&&ee.attributes.points==null){R(ee,ue);return}for(const[ge,H]of Object.entries(ee.attributes)){const ye=rL(ge,H);for(const Ae of ye)M.add(Ae)}}},root:{exit:()=>{for(const ee of P){const ue=S.get(ee);if(ue)for(const{node:ie,parentNode:ge}of ue)Bn(ie,ge)}if(!B)for(const[ee,ue]of k.entries())D(ee)&&Bn(ee,ue);for(const[ee,ue]of j.entries())ee.children.length===0&&Bn(ee,ue)}}}},vL=Object.freeze(Object.defineProperty({__proto__:null,description:a2e,fn:o2e,name:s2e},Symbol.toStringTag,{value:"Module"})),l2e="removeEmptyText",c2e="removes empty <text> elements",u2e=(e,t)=>{const{text:n=!0,tspan:r=!0,tref:i=!0}=t;return{element:{enter:(s,a)=>{n&&s.name==="text"&&s.children.length===0&&Bn(s,a),r&&s.name==="tspan"&&s.children.length===0&&Bn(s,a),i&&s.name==="tref"&&s.attributes["xlink:href"]==null&&Bn(s,a)}}}},xL=Object.freeze(Object.defineProperty({__proto__:null,description:c2e,fn:u2e,name:l2e},Symbol.toStringTag,{value:"Module"})),h2e="convertShapeToPath",d2e="converts basic shapes to more compact path form",f2e=/[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,p2e=(e,t)=>{const{convertArcs:n=!1,floatPrecision:r}=t;return{element:{enter:(i,s)=>{if(i.name==="rect"&&i.attributes.width!=null&&i.attributes.height!=null&&i.attributes.rx==null&&i.attributes.ry==null){const a=Number(i.attributes.x||"0"),o=Number(i.attributes.y||"0"),c=Number(i.attributes.width),h=Number(i.attributes.height);if(Number.isNaN(a-o+c-h))return;const d=[{command:"M",args:[a,o]},{command:"H",args:[a+c]},{command:"V",args:[o+h]},{command:"H",args:[a]},{command:"z",args:[]}];i.name="path",i.attributes.d=lu({pathData:d,precision:r}),delete i.attributes.x,delete i.attributes.y,delete i.attributes.width,delete i.attributes.height}if(i.name==="line"){const a=Number(i.attributes.x1||"0"),o=Number(i.attributes.y1||"0"),c=Number(i.attributes.x2||"0"),h=Number(i.attributes.y2||"0");if(Number.isNaN(a-o+c-h))return;const d=[{command:"M",args:[a,o]},{command:"L",args:[c,h]}];i.name="path",i.attributes.d=lu({pathData:d,precision:r}),delete i.attributes.x1,delete i.attributes.y1,delete i.attributes.x2,delete i.attributes.y2}if((i.name==="polyline"||i.name==="polygon")&&i.attributes.points!=null){const a=(i.attributes.points.match(f2e)||[]).map(Number);if(a.length<4){Bn(i,s);return}const o=[];for(let c=0;c<a.length;c+=2)o.push({command:c===0?"M":"L",args:a.slice(c,c+2)});i.name==="polygon"&&o.push({command:"z",args:[]}),i.name="path",i.attributes.d=lu({pathData:o,precision:r}),delete i.attributes.points}if(i.name==="circle"&&n){const a=Number(i.attributes.cx||"0"),o=Number(i.attributes.cy||"0"),c=Number(i.attributes.r||"0");if(Number.isNaN(a-o+c))return;const h=[{command:"M",args:[a,o-c]},{command:"A",args:[c,c,0,1,0,a,o+c]},{command:"A",args:[c,c,0,1,0,a,o-c]},{command:"z",args:[]}];i.name="path",i.attributes.d=lu({pathData:h,precision:r}),delete i.attributes.cx,delete i.attributes.cy,delete i.attributes.r}if(i.name==="ellipse"&&n){const a=Number(i.attributes.cx||"0"),o=Number(i.attributes.cy||"0"),c=Number(i.attributes.rx||"0"),h=Number(i.attributes.ry||"0");if(Number.isNaN(a-o+c-h))return;const d=[{command:"M",args:[a,o-h]},{command:"A",args:[c,h,0,1,0,a,o+h]},{command:"A",args:[c,h,0,1,0,a,o-h]},{command:"z",args:[]}];i.name="path",i.attributes.d=lu({pathData:d,precision:r}),delete i.attributes.cx,delete i.attributes.cy,delete i.attributes.rx,delete i.attributes.ry}}}}},wL=Object.freeze(Object.defineProperty({__proto__:null,description:d2e,fn:p2e,name:h2e},Symbol.toStringTag,{value:"Module"})),m2e="convertEllipseToCircle",g2e="converts non-eccentric <ellipse>s to <circle>s",y2e=()=>({element:{enter:e=>{if(e.name==="ellipse"){const t=e.attributes.rx||"0",n=e.attributes.ry||"0";if(t===n||t==="auto"||n==="auto"){e.name="circle";const r=t==="auto"?n:t;delete e.attributes.rx,delete e.attributes.ry,e.attributes.r=r}}}}}),_L=Object.freeze(Object.defineProperty({__proto__:null,description:g2e,fn:y2e,name:m2e},Symbol.toStringTag,{value:"Module"})),b2e="moveElemsAttrsToGroup",v2e="Move common attributes of group children to the group",x2e=e=>{let t=!1;return ao(e,{element:{enter:n=>{n.name==="style"&&(t=!0)}}}),{element:{exit:n=>{if(n.name!=="g"||n.children.length<=1||t)return;const r=new Map;let i=!0,s=!0;for(const a of n.children)if(a.type==="element")if(g_.has(a.name)||(s=!1),i){i=!1;for(const[o,c]of Object.entries(a.attributes))g0.has(o)&&r.set(o,c)}else for(const[o,c]of r)a.attributes[o]!==c&&r.delete(o);(n.attributes.filter!=null||n.attributes["clip-path"]!=null||n.attributes.mask!=null)&&r.delete("transform"),s&&r.delete("transform");for(const[a,o]of r)a==="transform"?n.attributes.transform!=null?n.attributes.transform=`${n.attributes.transform} ${o}`:n.attributes.transform=o:n.attributes[a]=o;for(const a of n.children)if(a.type==="element")for(const[o]of r)delete a.attributes[o]}}}},kL=Object.freeze(Object.defineProperty({__proto__:null,description:v2e,fn:x2e,name:b2e},Symbol.toStringTag,{value:"Module"})),w2e="moveGroupAttrsToElems",_2e="moves some group attributes to the content elements",k2e=[...g_,"g","text"],S2e=()=>({element:{enter:e=>{if(e.name==="g"&&e.children.length!==0&&e.attributes.transform!=null&&Object.entries(e.attributes).some(([t,n])=>m0.has(t)&&M0(n))===!1&&e.children.every(t=>t.type==="element"&&k2e.includes(t.name)&&t.attributes.id==null)){for(const t of e.children){const n=e.attributes.transform;t.type==="element"&&(t.attributes.transform!=null?t.attributes.transform=`${n} ${t.attributes.transform}`:t.attributes.transform=n)}delete e.attributes.transform}}}}),SL=Object.freeze(Object.defineProperty({__proto__:null,description:_2e,fn:S2e,name:w2e},Symbol.toStringTag,{value:"Module"})),C2e="collapseGroups",E2e="collapses useless groups",CL=(e,t)=>{if(e.type==="element"){if(Tl.animation.has(e.name)&&e.attributes.attributeName===t)return!0;for(const n of e.children)if(CL(n,t))return!0}return!1},T2e=e=>{const t=$a(e);return{element:{exit:(n,r)=>{if(!(r.type==="root"||r.name==="switch")&&!(n.name!=="g"||n.children.length===0)){if(Object.keys(n.attributes).length!==0&&n.children.length===1){const i=n.children[0],s=!!(n.attributes.filter||Ra(t,n).filter);if(i.type==="element"&&i.attributes.id==null&&!s&&(n.attributes.class==null||i.attributes.class==null)&&(n.attributes["clip-path"]==null&&n.attributes.mask==null||i.name==="g"&&n.attributes.transform==null&&i.attributes.transform==null)){const a={...i.attributes};for(const[o,c]of Object.entries(n.attributes)){if(CL(i,o))return;if(a[o]==null)a[o]=c;else if(o==="transform")a[o]=c+" "+a[o];else if(a[o]==="inherit")a[o]=c;else if(!g0.has(o)&&a[o]!==c)return}n.attributes={},i.attributes=a}}if(Object.keys(n.attributes).length===0){for(const s of n.children)if(s.type==="element"&&Tl.animation.has(s.name))return;const i=r.children.indexOf(n);r.children.splice(i,1,...n.children)}}}}}},EL=Object.freeze(Object.defineProperty({__proto__:null,description:E2e,fn:T2e,name:C2e},Symbol.toStringTag,{value:"Module"}));let Wa;const Ng=e=>{if(e.pathJS)return e.pathJS;const t=[],n=ek(e.attributes.d);for(const{command:r,args:i}of n)t.push({command:r,args:i});return t.length&&t[0].command=="m"&&(t[0].command="M"),e.pathJS=t,t},ej=e=>{const t=[],n=[0,0],r=[0,0];for(let{command:i,args:s}of e)s=s.slice(),i==="m"&&(s[0]+=r[0],s[1]+=r[1],i="M"),i==="M"&&(r[0]=s[0],r[1]=s[1],n[0]=r[0],n[1]=r[1]),i==="h"&&(s[0]+=r[0],i="H"),i==="H"&&(r[0]=s[0]),i==="v"&&(s[0]+=r[1],i="V"),i==="V"&&(r[1]=s[0]),i==="l"&&(s[0]+=r[0],s[1]+=r[1],i="L"),i==="L"&&(r[0]=s[0],r[1]=s[1]),i==="c"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],s[4]+=r[0],s[5]+=r[1],i="C"),i==="C"&&(r[0]=s[4],r[1]=s[5]),i==="s"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],i="S"),i==="S"&&(r[0]=s[2],r[1]=s[3]),i==="q"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],i="Q"),i==="Q"&&(r[0]=s[2],r[1]=s[3]),i==="t"&&(s[0]+=r[0],s[1]+=r[1],i="T"),i==="T"&&(r[0]=s[0],r[1]=s[1]),i==="a"&&(s[5]+=r[0],s[6]+=r[1],i="A"),i==="A"&&(r[0]=s[5],r[1]=s[6]),(i==="z"||i==="Z")&&(r[0]=n[0],r[1]=n[1],i="z"),t.push({command:i,args:s});return t},TL=function(e,t,n){e.pathJS=t;const r=[];for(const i of t){if(r.length!==0&&(i.command==="M"||i.command==="m")){const s=r[r.length-1];(s.command==="M"||s.command==="m")&&r.pop()}r.push({command:i.command,args:i.args})}e.attributes.d=lu({pathData:r,precision:n.floatPrecision,disableSpaceAfterFlags:n.noSpaceAfterFlags})};function Uc(e,t){return e[0]=t[t.length-2],e[1]=t[t.length-1],e}const jL=function(e,t){const n=tj(ej(e)),r=tj(ej(t));if(n.maxX<=r.minX||r.maxX<=n.minX||n.maxY<=r.minY||r.maxY<=n.minY||n.list.every(c=>r.list.every(h=>c.list[c.maxX][0]<=h.list[h.minX][0]||h.list[h.maxX][0]<=c.list[c.minX][0]||c.list[c.maxY][1]<=h.list[h.minY][1]||h.list[h.maxY][1]<=c.list[c.minY][1])))return!1;const i=n.list.map(nj),s=r.list.map(nj);return i.some(function(c){return c.list.length<3?!1:s.some(function(h){if(h.list.length<3)return!1;const d=[a(c,h,[1,0])],p=nh(d[0]);let m=1e4;for(;;){if(m--==0)return console.error("Error: infinite loop while processing mergePaths plugin."),!0;if(d.push(a(c,h,p)),nl(p,d[d.length-1])<=0)return!1;if(j2e(d,p))return!0}})});function a(c,h,d){return wm(o(c,d),o(h,nh(d)))}function o(c,h){let d=h[1]>=0?h[0]<0?c.maxY:c.maxX:h[0]<0?c.minX:c.minY,p=-1/0,m;for(;(m=nl(c.list[d],h))>p;)p=m,d=++d%c.list.length;return c.list[(d||c.list.length)-1]}};function j2e(e,t){if(e.length==2){const n=e[1],r=e[0],i=nh(e[1]),s=wm(r,n);nl(i,s)>0?Uc(t,$b(s,n)):(Uc(t,i),e.shift())}else{const n=e[2],r=e[1],i=e[0],s=wm(r,n),a=wm(i,n),o=nh(n),c=$b(s,a),h=$b(a,s);if(nl(c,o)>0)nl(s,o)>0?(Uc(t,c),e.shift()):(Uc(t,o),e.splice(0,2));else if(nl(h,o)>0)nl(a,o)>0?(Uc(t,h),e.splice(1,1)):(Uc(t,o),e.splice(0,2));else return!0}return!1}function nh(e){return[-e[0],-e[1]]}function wm(e,t){return[e[0]-t[0],e[1]-t[1]]}function nl(e,t){return e[0]*t[0]+e[1]*t[1]}function $b(e,t){const n=[-e[1],e[0]];return nl(n,nh(t))<0?nh(n):n}function tj(e){const t={list:[],minX:0,minY:0,maxX:0,maxY:0},n=(i,s)=>{(!i.list.length||s[1]>i.list[i.maxY][1])&&(i.maxY=i.list.length,t.maxY=t.list.length?Math.max(s[1],t.maxY):s[1]),(!i.list.length||s[0]>i.list[i.maxX][0])&&(i.maxX=i.list.length,t.maxX=t.list.length?Math.max(s[0],t.maxX):s[0]),(!i.list.length||s[1]<i.list[i.minY][1])&&(i.minY=i.list.length,t.minY=t.list.length?Math.min(s[1],t.minY):s[1]),(!i.list.length||s[0]<i.list[i.minX][0])&&(i.minX=i.list.length,t.minX=t.list.length?Math.min(s[0],t.minX):s[0]),i.list.push(s)};for(let i=0;i<e.length;i+=1){const s=e[i];let a=t.list.length===0?{list:[],minX:0,minY:0,maxX:0,maxY:0}:t.list[t.list.length-1];const o=i===0?null:e[i-1];let c=a.list.length===0?null:a.list[a.list.length-1];const h=s.args;let d=c;const p=(m,g)=>m+(c==null?0:c[g%2]);switch(s.command){case"M":a={list:[],minX:0,minY:0,maxX:0,maxY:0},t.list.push(a);break;case"H":c!=null&&n(a,[h[0],c[1]]);break;case"V":c!=null&&n(a,[c[0],h[0]]);break;case"Q":n(a,h.slice(0,2)),Wa=[h[2]-h[0],h[3]-h[1]];break;case"T":c!=null&&o!=null&&(o.command=="Q"||o.command=="T")&&(d=[c[0]+Wa[0],c[1]+Wa[1]],n(a,d),Wa=[h[0]-d[0],h[1]-d[1]]);break;case"C":c!=null&&n(a,[.5*(c[0]+h[0]),.5*(c[1]+h[1])]),n(a,[.5*(h[0]+h[2]),.5*(h[1]+h[3])]),n(a,[.5*(h[2]+h[4]),.5*(h[3]+h[5])]),Wa=[h[4]-h[2],h[5]-h[3]];break;case"S":c!=null&&o!=null&&(o.command=="C"||o.command=="S")&&(n(a,[c[0]+.5*Wa[0],c[1]+.5*Wa[1]]),d=[c[0]+Wa[0],c[1]+Wa[1]]),d!=null&&n(a,[.5*(d[0]+h[0]),.5*(d[1]+h[1])]),n(a,[.5*(h[0]+h[2]),.5*(h[1]+h[3])]),Wa=[h[2]-h[0],h[3]-h[1]];break;case"A":if(c!=null){const m=AL.apply(0,c.concat(h));for(var r;(r=m.splice(0,6).map(p)).length;)c!=null&&n(a,[.5*(c[0]+r[0]),.5*(c[1]+r[1])]),n(a,[.5*(r[0]+r[2]),.5*(r[1]+r[3])]),n(a,[.5*(r[2]+r[4]),.5*(r[3]+r[5])]),m.length&&n(a,c=r.slice(-2))}break}h.length>=2&&n(a,h.slice(-2))}return t}function nj(e){e.list.sort(function(h,d){return h[0]==d[0]?h[1]-d[1]:h[0]-d[0]});const t=[];let n=0,r=0;for(let h=0;h<e.list.length;h++){for(;t.length>=2&&rj(t[t.length-2],t[t.length-1],e.list[h])<=0;)t.pop();e.list[h][1]<e.list[n][1]&&(n=h,r=t.length),t.push(e.list[h])}const i=[];let s=e.list.length-1,a=0;for(let h=e.list.length;h--;){for(;i.length>=2&&rj(i[i.length-2],i[i.length-1],e.list[h])<=0;)i.pop();e.list[h][1]>e.list[s][1]&&(s=h,a=i.length),i.push(e.list[h])}i.pop(),t.pop();const o=t.concat(i);return{list:o,minX:0,maxX:t.length,minY:r,maxY:(t.length+a)%o.length}}function rj(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}const AL=(e,t,n,r,i,s,a,o,c,h)=>{const d=Math.PI*120/180,p=Math.PI/180*(+i||0);let m=[];const g=(ie,ge,H)=>ie*Math.cos(H)-ge*Math.sin(H),v=(ie,ge,H)=>ie*Math.sin(H)+ge*Math.cos(H);if(h)x=h[0],k=h[1],w=h[2],C=h[3];else{e=g(e,t,-p),t=v(e,t,-p),o=g(o,c,-p),c=v(o,c,-p);const ie=(e-o)/2,ge=(t-c)/2;let H=ie*ie/(n*n)+ge*ge/(r*r);H>1&&(H=Math.sqrt(H),n=H*n,r=H*r);const ye=n*n,Ae=r*r,we=(s==a?-1:1)*Math.sqrt(Math.abs((ye*Ae-ye*ge*ge-Ae*ie*ie)/(ye*ge*ge+Ae*ie*ie)));var w=we*n*ge/r+(e+o)/2,C=we*-r*ie/n+(t+c)/2,x=Math.asin(Number(((t-C)/r).toFixed(9))),k=Math.asin(Number(((c-C)/r).toFixed(9)));x=e<w?Math.PI-x:x,k=o<w?Math.PI-k:k,x<0&&(x=Math.PI*2+x),k<0&&(k=Math.PI*2+k),a&&x>k&&(x=x-Math.PI*2),!a&&k>x&&(k=k-Math.PI*2)}let P=k-x;if(Math.abs(P)>d){const ie=k,ge=o,H=c;k=x+d*(a&&k>x?1:-1),o=w+n*Math.cos(k),c=C+r*Math.sin(k),m=AL(o,c,n,r,i,0,a,ge,H,[k,ie,w,C])}P=k-x;const j=Math.cos(x),M=Math.sin(x),S=Math.cos(k),B=Math.sin(k),D=Math.tan(P/4),R=4/3*n*D,ee=4/3*r*D,ue=[-R*M,ee*j,o+R*B-e,c-ee*S-t,o-e,c-t];if(h)return ue.concat(m);{m=ue.concat(m);const ie=[];for(let ge=0,H=m.length;ge<H;ge++)ie[ge]=ge%2?v(m[ge-1],m[ge],p):g(m[ge],m[ge+1],p);return ie}},A2e=new Set(["matrix","rotate","scale","skewX","skewY","translate"]),P2e=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,N2e=/[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,PL=e=>{const t=[];let n=null;for(const r of e.split(P2e))if(r)if(A2e.has(r))n={name:r,data:[]},t.push(n);else{let i;for(;i=N2e.exec(r);)i=Number(i),n!=null&&n.data.push(i)}return n==null||n.data.length==0?[]:t},NL=e=>{const t=e.map(r=>r.name==="matrix"?r.data:z2e(r));return{name:"matrix",data:t.length>0?t.reduce(OL):[]}},Xi={rad:e=>e*Math.PI/180,deg:e=>e*180/Math.PI,cos:e=>Math.cos(Xi.rad(e)),acos:(e,t)=>So(Xi.deg(Math.acos(e)),t),sin:e=>Math.sin(Xi.rad(e)),asin:(e,t)=>So(Xi.deg(Math.asin(e)),t),tan:e=>Math.tan(Xi.rad(e)),atan:(e,t)=>So(Xi.deg(Math.atan(e)),t)},O2e=e=>{const t=[],n=R2e(e),r=M2e(e);return n&&t.push(n),r&&t.push(r),t},R2e=e=>{const t=e.data,[n,r,i,s,a,o]=t,c=n*s-r*i;if(c===0)return;const h=Math.hypot(n,r);if(h===0)return;const d=[],p=n/h;if((a||o)&&d.push({name:"translate",data:[a,o]}),p!==1){const w=Math.acos(p);d.push({name:"rotate",data:[Xi.deg(r<0?-w:w),0,0]})}const m=h,g=c/m;(m!==1||g!==1)&&d.push({name:"scale",data:[m,g]});const v=n*i+r*s;return v&&d.push({name:"skewX",data:[Xi.deg(Math.atan(v/(n*n+r*r)))]}),d},M2e=e=>{const t=e.data,[n,r,i,s,a,o]=t,c=n*s-r*i;if(c===0)return;const h=Math.hypot(i,s);if(h===0)return;const d=[];(a||o)&&d.push({name:"translate",data:[a,o]});const p=Math.PI/2-(s<0?-1:1)*Math.acos(-i/h);d.push({name:"rotate",data:[Xi.deg(p),0,0]});const m=c/h,g=h;(m!==1||g!==1)&&d.push({name:"scale",data:[m,g]});const v=n*i+r*s;return v&&d.push({name:"skewY",data:[Xi.deg(Math.atan(v/(i*i+s*s)))]}),d},L2e=(e,t,n)=>{const r=Xi.rad(n),i=1-Math.cos(r),s=Math.sin(r),a=(i*t+s*e)/(i*i+s*s),o=(e-s*a)/i;return{name:"rotate",data:[n,o,a]}},I2e=e=>{switch(e.name){case"rotate":case"skewX":case"skewY":return e.data[0]===0;case"scale":return e.data[0]===1&&e.data[1]===1;case"translate":return e.data[0]===0&&e.data[1]===0}return!1},$2e=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(I2e(i))continue;const s=i.data;switch(i.name){case"rotate":switch(s[0]){case 180:case-180:{const a=e[r+1];a&&a.name==="scale"?(n.push(ij(a.data.map(o=>-o))),r++):n.push({name:"scale",data:[-1]})}continue}n.push({name:"rotate",data:s.slice(0,s[1]||s[2]?3:1)});break;case"scale":n.push(ij(s));break;case"skewX":case"skewY":n.push({name:i.name,data:[s[0]]});break;case"translate":{const a=e[r+1];if(a&&a.name==="rotate"&&a.data[0]!==180&&a.data[0]!==-180&&a.data[0]!==0&&a.data[1]===0&&a.data[2]===0){const o=t[r].data;n.push(L2e(o[0],o[1],t[r+1].data[0])),r++;continue}}n.push({name:"translate",data:s.slice(0,s[1]?2:1)});break}}return n.length?n:[{name:"scale",data:[1]}]},ij=e=>({name:"scale",data:e.slice(0,e[0]===e[1]?1:2)}),D2e=(e,t)=>{const n=O2e(e);let r,i=Number.MAX_VALUE;for(const s of n){const a=s.map(h=>{const d={name:h.name,data:[...h.data]};return L0(d,t)}),o=$2e(a,s),c=Og(o,t).length;c<i&&(r=o,i=c)}return r??[e]},z2e=e=>{if(e.name==="matrix")return e.data;switch(e.name){case"translate":return[1,0,0,1,e.data[0],e.data[1]||0];case"scale":return[e.data[0],0,0,e.data[1]??e.data[0],0,0];case"rotate":var t=Xi.cos(e.data[0]),n=Xi.sin(e.data[0]),r=e.data[1]||0,i=e.data[2]||0;return[t,n,-n,t,(1-t)*r+n*i,(1-t)*i-n*r];case"skewX":return[1,0,Xi.tan(e.data[0]),1,0,0];case"skewY":return[1,Xi.tan(e.data[0]),0,1,0,0];default:throw Error(`Unknown transform ${e.name}`)}},sj=(e,t,n)=>{const r=t[5]-e[0],i=t[6]-e[1];let s=t[0],a=t[1];const o=t[2]*Math.PI/180,c=Math.cos(o),h=Math.sin(o);if(s>0&&a>0){let w=Math.pow(r*c+i*h,2)/(4*s*s)+Math.pow(i*c-r*h,2)/(4*a*a);w>1&&(w=Math.sqrt(w),s*=w,a*=w)}const d=[s*c,s*h,-a*h,a*c,0,0],p=OL(n,d),m=p[2]*p[2]+p[3]*p[3],g=p[0]*p[0]+p[1]*p[1]+m,v=Math.hypot(p[0]-p[3],p[1]+p[2])*Math.hypot(p[0]+p[3],p[1]-p[2]);if(!v)t[0]=t[1]=Math.sqrt(g/2),t[2]=0;else{const w=(g+v)/2,C=(g-v)/2,x=Math.abs(w-m)>1e-6,k=(x?w:C)-m,P=p[0]*p[2]+p[1]*p[3],j=p[0]*k+p[2]*P,M=p[1]*k+p[3]*P;t[0]=Math.sqrt(w),t[1]=Math.sqrt(C),t[2]=((x?M<0:j>0)?-1:1)*Math.acos((x?j:M)/Math.hypot(j,M))*180/Math.PI}return n[0]<0!=n[3]<0&&(t[4]=1-t[4]),t},OL=(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],L0=(e,t)=>{switch(e.name){case"translate":e.data=Db(e.data,t);break;case"rotate":e.data=[...aj(e.data.slice(0,1),t),...Db(e.data.slice(1),t)];break;case"skewX":case"skewY":e.data=aj(e.data,t);break;case"scale":e.data=oj(e.data,t);break;case"matrix":e.data=[...oj(e.data.slice(0,4),t),...Db(e.data.slice(4),t)];break}return e},aj=(e,t)=>t.degPrecision!=null&&t.degPrecision>=1&&t.floatPrecision<20?nk(t.degPrecision,e):tk(e),Db=(e,t)=>t.floatPrecision>=1&&t.floatPrecision<20?nk(t.floatPrecision,e):tk(e),oj=(e,t)=>t.transformPrecision>=1&&t.floatPrecision<20?nk(t.transformPrecision,e):tk(e),tk=e=>e.map(Math.round),nk=(e,t)=>{for(let n=t.length,r=+Math.pow(.1,e).toFixed(e);n--;)if(So(t[n],e)!==t[n]){const i=+t[n].toFixed(e-1);t[n]=+Math.abs(i-t[n]).toFixed(e+1)>=r?+t[n].toFixed(e):i}return t},Og=(e,t)=>e.map(r=>(L0(r,t),`${r.name}(${th(r.data,t)})`)).join(""),zb=/[-+]?(\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,F2e=(e,t)=>{const n=$a(e);return{element:{enter:r=>{var m,g,v,w;if(r.attributes.d==null||r.attributes.id!=null||r.attributes.transform==null||r.attributes.transform===""||r.attributes.style!=null||Object.entries(r.attributes).some(([C,x])=>m0.has(C)&&M0(x)))return;const i=Ra(n,r),s=i.transform;if(s.type==="static"&&s.value!==r.attributes.transform)return;const a=NL(PL(r.attributes.transform)),o=((m=i.stroke)==null?void 0:m.type)==="static"?i.stroke.value:null,c=((g=i["stroke-width"])==null?void 0:g.type)==="static"?i["stroke-width"].value:null,h=t.transformPrecision;if(((v=i.stroke)==null?void 0:v.type)==="dynamic"||((w=i["stroke-width"])==null?void 0:w.type)==="dynamic")return;const d=Number(Math.hypot(a.data[0],a.data[1]).toFixed(h));if(o&&o!="none"){if(!t.applyTransformsStroked||(a.data[0]!==a.data[3]||a.data[1]!==-a.data[2])&&(a.data[0]!==-a.data[3]||a.data[1]!==a.data[2]))return;d!==1&&r.attributes["vector-effect"]!=="non-scaling-stroke"&&(r.attributes["stroke-width"]=(c||y_.presentation["stroke-width"]).trim().replace(zb,C=>ic(Number(C)*d)),r.attributes["stroke-dashoffset"]!=null&&(r.attributes["stroke-dashoffset"]=r.attributes["stroke-dashoffset"].trim().replace(zb,C=>ic(Number(C)*d))),r.attributes["stroke-dasharray"]!=null&&(r.attributes["stroke-dasharray"]=r.attributes["stroke-dasharray"].trim().replace(zb,C=>ic(Number(C)*d))))}const p=Ng(r);B2e(p,a.data),delete r.attributes.transform}}}},oa=(e,t,n)=>{const r=e[0]*t+e[2]*n+e[4],i=e[1]*t+e[3]*n+e[5];return[r,i]},la=(e,t,n)=>{const r=e[0]*t+e[2]*n,i=e[1]*t+e[3]*n;return[r,i]},B2e=(e,t)=>{const n=[0,0],r=[0,0];for(const i of e){let{command:s,args:a}=i;if(s==="M"){r[0]=a[0],r[1]=a[1],n[0]=r[0],n[1]=r[1];const[o,c]=oa(t,a[0],a[1]);a[0]=o,a[1]=c}if(s==="m"){r[0]+=a[0],r[1]+=a[1],n[0]=r[0],n[1]=r[1];const[o,c]=la(t,a[0],a[1]);a[0]=o,a[1]=c}if(s==="H"&&(s="L",a=[a[0],r[1]]),s==="h"&&(s="l",a=[a[0],0]),s==="V"&&(s="L",a=[r[0],a[0]]),s==="v"&&(s="l",a=[0,a[0]]),s==="L"){r[0]=a[0],r[1]=a[1];const[o,c]=oa(t,a[0],a[1]);a[0]=o,a[1]=c}if(s==="l"){r[0]+=a[0],r[1]+=a[1];const[o,c]=la(t,a[0],a[1]);a[0]=o,a[1]=c}if(s==="C"){r[0]=a[4],r[1]=a[5];const[o,c]=oa(t,a[0],a[1]),[h,d]=oa(t,a[2],a[3]),[p,m]=oa(t,a[4],a[5]);a[0]=o,a[1]=c,a[2]=h,a[3]=d,a[4]=p,a[5]=m}if(s==="c"){r[0]+=a[4],r[1]+=a[5];const[o,c]=la(t,a[0],a[1]),[h,d]=la(t,a[2],a[3]),[p,m]=la(t,a[4],a[5]);a[0]=o,a[1]=c,a[2]=h,a[3]=d,a[4]=p,a[5]=m}if(s==="S"){r[0]=a[2],r[1]=a[3];const[o,c]=oa(t,a[0],a[1]),[h,d]=oa(t,a[2],a[3]);a[0]=o,a[1]=c,a[2]=h,a[3]=d}if(s==="s"){r[0]+=a[2],r[1]+=a[3];const[o,c]=la(t,a[0],a[1]),[h,d]=la(t,a[2],a[3]);a[0]=o,a[1]=c,a[2]=h,a[3]=d}if(s==="Q"){r[0]=a[2],r[1]=a[3];const[o,c]=oa(t,a[0],a[1]),[h,d]=oa(t,a[2],a[3]);a[0]=o,a[1]=c,a[2]=h,a[3]=d}if(s==="q"){r[0]+=a[2],r[1]+=a[3];const[o,c]=la(t,a[0],a[1]),[h,d]=la(t,a[2],a[3]);a[0]=o,a[1]=c,a[2]=h,a[3]=d}if(s==="T"){r[0]=a[0],r[1]=a[1];const[o,c]=oa(t,a[0],a[1]);a[0]=o,a[1]=c}if(s==="t"){r[0]+=a[0],r[1]+=a[1];const[o,c]=la(t,a[0],a[1]);a[0]=o,a[1]=c}if(s==="A"){if(sj(r,a,t),r[0]=a[5],r[1]=a[6],Math.abs(a[2])>80){const h=a[0],d=a[2];a[0]=a[1],a[1]=h,a[2]=d+(d>0?-90:90)}const[o,c]=oa(t,a[5],a[6]);a[5]=o,a[6]=c}if(s==="a"){if(sj([0,0],a,t),r[0]+=a[5],r[1]+=a[6],Math.abs(a[2])>80){const h=a[0],d=a[2];a[0]=a[1],a[1]=h,a[2]=d+(d>0?-90:90)}const[o,c]=la(t,a[5],a[6]);a[5]=o,a[6]=c}(s==="z"||s==="Z")&&(r[0]=n[0],r[1]=n[1]),i.command=s,i.args=a}},U2e="convertPathData",H2e="optimizes path data: writes in shorter form, applies transformations";let vo,va,Mr,rk,ik;const W2e=(e,t)=>{const{applyTransforms:n=!0,applyTransformsStroked:r=!0,makeArcs:i={threshold:2.5,tolerance:.5},straightCurves:s=!0,convertToQ:a=!0,lineShorthands:o=!0,convertToZ:c=!0,curveSmoothShorthands:h=!0,floatPrecision:d=3,transformPrecision:p=5,smartArcRounding:m=!0,removeUseless:g=!0,collapseRepeated:v=!0,utilizeAbsolute:w=!0,leadingZero:C=!0,negativeExtraSpace:x=!0,noSpaceAfterFlags:k=!1,forceAbsolutePath:P=!1}=t,j={applyTransforms:n,applyTransformsStroked:r,makeArcs:i,straightCurves:s,convertToQ:a,lineShorthands:o,convertToZ:c,curveSmoothShorthands:h,floatPrecision:d,transformPrecision:p,smartArcRounding:m,removeUseless:g,collapseRepeated:v,utilizeAbsolute:w,leadingZero:C,negativeExtraSpace:x,noSpaceAfterFlags:k,forceAbsolutePath:P};n&&ao(e,F2e(e,{transformPrecision:p,applyTransformsStroked:r}));const M=$a(e);return{element:{enter:S=>{var B,D;if(g_.has(S.name)&&S.attributes.d!=null){const R=Ra(M,S);va=d,Mr=va!==!1?+Math.pow(.1,va).toFixed(va):.01,vo=va&&va>0&&va<20?Y2e:X2e,i&&(rk=i.threshold,ik=i.tolerance);const ee=R["marker-mid"]!=null,ue=R.stroke&&(R.stroke.type==="dynamic"||R.stroke.value!=="none"),ie=R["stroke-linecap"]&&(R["stroke-linecap"].type==="dynamic"||R["stroke-linecap"].value!=="butt"),ge=ue&&ie,H=ue?((B=R["stroke-linecap"])==null?void 0:B.type)==="static"&&R["stroke-linecap"].value==="round"&&((D=R["stroke-linejoin"])==null?void 0:D.type)==="static"&&R["stroke-linejoin"].value==="round":!0;let ye=Ng(S);if(ye.length){const Ae=ye.some(xe=>xe.command!=="m"&&xe.command!=="M");V2e(ye),ye=G2e(ye,j,{isSafeToUseZ:H,maybeHasStrokeAndLinecap:ge,hasMarkerMid:ee}),w&&(ye=q2e(ye,j)),(S.attributes["marker-start"]!=null||S.attributes["marker-end"]!=null)&&Ae&&ye.every(xe=>xe.command==="m"||xe.command==="M")&&ye.push({command:"z",args:[]}),TL(S,ye,j)}}}}}},V2e=e=>{const t=[0,0],n=[0,0];let r=[0,0];for(let i=0;i<e.length;i+=1){const s=e[i];let{command:a,args:o}=s;a==="m"&&(n[0]+=o[0],n[1]+=o[1],t[0]=n[0],t[1]=n[1]),a==="M"&&(i!==0&&(a="m"),o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1],t[0]=n[0],t[1]=n[1]),a==="l"&&(n[0]+=o[0],n[1]+=o[1]),a==="L"&&(a="l",o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1]),a==="h"&&(n[0]+=o[0]),a==="H"&&(a="h",o[0]-=n[0],n[0]+=o[0]),a==="v"&&(n[1]+=o[0]),a==="V"&&(a="v",o[0]-=n[1],n[1]+=o[0]),a==="c"&&(n[0]+=o[4],n[1]+=o[5]),a==="C"&&(a="c",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],o[4]-=n[0],o[5]-=n[1],n[0]+=o[4],n[1]+=o[5]),a==="s"&&(n[0]+=o[2],n[1]+=o[3]),a==="S"&&(a="s",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],n[0]+=o[2],n[1]+=o[3]),a==="q"&&(n[0]+=o[2],n[1]+=o[3]),a==="Q"&&(a="q",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],n[0]+=o[2],n[1]+=o[3]),a==="t"&&(n[0]+=o[0],n[1]+=o[1]),a==="T"&&(a="t",o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1]),a==="a"&&(n[0]+=o[5],n[1]+=o[6]),a==="A"&&(a="a",o[5]-=n[0],o[6]-=n[1],n[0]+=o[5],n[1]+=o[6]),(a==="Z"||a==="z")&&(n[0]=t[0],n[1]=t[1]),s.command=a,s.args=o,s.base=r,s.coords=[n[0],n[1]],r=s.coords}return e};function G2e(e,t,{isSafeToUseZ:n,maybeHasStrokeAndLinecap:r,hasMarkerMid:i}){const s=Z2e.bind(null,t),a=[0,0],o=[0,0];let c={},h;return e=e.filter(function(d,p,m){const g=h;let v=d.command,w=d.args,C=m[p+1];if(v!=="Z"&&v!=="z"){let k=w,P;if(v==="s"){k=[0,0].concat(w);const M=c.args,S=M.length;k[0]=M[S-2]-M[S-4],k[1]=M[S-1]-M[S-3]}if(t.makeArcs&&(v=="c"||v=="s")&&Fb(k)&&(P=K2e(k))){const M=vo([P.radius])[0];let S=Ub(k,P);const B=k[5]*k[0]-k[4]*k[1]>0?1:0;let D={command:"a",args:[M,M,0,0,B,k[4],k[5]],coords:d.coords.slice(),base:d.base};const R=[D],ee=[P.center[0]-k[4],P.center[1]-k[5]],ue={center:ee,radius:P.radius},ie=[d];let ge=0,H="",ye;if(c.command=="c"&&Fb(c.args)&&uj(c.args,P)||c.command=="a"&&c.sdata&&uj(c.sdata,P)){ie.unshift(c),D.base=c.base,D.args[5]=D.coords[0]-D.base[0],D.args[6]=D.coords[1]-D.base[1];const Ae=c.command=="a"?c.sdata:c.args,we=Ub(Ae,{center:[Ae[4]+P.center[0],Ae[5]+P.center[1]],radius:P.radius});S+=we,S>Math.PI&&(D.args[3]=1),ge=1}for(var x=p;(C=m[++x])&&(C.command==="c"||C.command==="s");){let Ae=C.args;if(C.command=="s"&&(ye=Vh({command:"s",args:C.args.slice()},m[x-1].args),Ae=ye.args,ye.args=Ae.slice(0,2),H=s([ye])),Fb(Ae)&&ML(Ae,ue)){if(S+=Ub(Ae,ue),S-2*Math.PI>.001)break;if(S>Math.PI&&(D.args[3]=1),ie.push(C),2*Math.PI-S>.001)D.coords=C.coords,D.args[5]=D.coords[0]-D.base[0],D.args[6]=D.coords[1]-D.base[1];else{D.args[5]=2*(ue.center[0]-Ae[4]),D.args[6]=2*(ue.center[1]-Ae[5]),D.coords=[D.base[0]+D.args[5],D.base[1]+D.args[6]],D={command:"a",args:[M,M,0,0,B,C.coords[0]-D.coords[0],C.coords[1]-D.coords[1]],coords:C.coords,base:D.coords},R.push(D),x++;break}ee[0]-=Ae[4],ee[1]-=Ae[5]}else break}if((s(R)+H).length<s(ie).length){if(m[x]&&m[x].command=="s"&&Vh(m[x],m[x-1].args),ge){const Ae=R.shift();vo(Ae.args),a[0]+=Ae.args[5]-c.args[c.args.length-2],a[1]+=Ae.args[6]-c.args[c.args.length-1],c.command="a",c.args=Ae.args,d.base=c.coords=Ae.coords}if(D=R.shift(),ie.length==1?d.sdata=k.slice():ie.length-1-ge>0&&m.splice(p+1,ie.length-1-ge,...R),!D)return!1;v="a",w=D.args,d.coords=D.coords}}if(va!==!1){if(v==="m"||v==="l"||v==="t"||v==="q"||v==="s"||v==="c")for(let M=w.length;M--;)w[M]+=d.base[M%2]-a[M%2];else v=="h"?w[0]+=d.base[0]-a[0]:v=="v"?w[0]+=d.base[1]-a[1]:v=="a"&&(w[5]+=d.base[0]-a[0],w[6]+=d.base[1]-a[1]);vo(w),v=="h"?a[0]+=w[0]:v=="v"?a[1]+=w[0]:(a[0]+=w[w.length-2],a[1]+=w[w.length-1]),vo(a),(v==="M"||v==="m")&&(o[0]=a[0],o[1]=a[1])}const j=v==="a"?lj(w):void 0;if(t.smartArcRounding&&j!==void 0&&va)for(let M=va;M>=0;M--){const S=So(w[0],M),B=lj([S,S,...w.slice(2)]);if(Math.abs(j-B)<Mr)w[0]=S,w[1]=S;else break}if(t.straightCurves&&(v==="c"&&Bb(w)||v==="s"&&Bb(k)?(C&&C.command=="s"&&Vh(C,w),v="l",w=w.slice(-2)):v==="q"&&Bb(w)?(C&&C.command=="t"&&Vh(C,w),v="l",w=w.slice(-2)):(v==="t"&&c.command!=="q"&&c.command!=="t"||v==="a"&&(w[0]===0||w[1]===0||j!==void 0&&j<Mr))&&(v="l",w=w.slice(-2))),t.convertToQ&&v=="c"){const M=.75*(d.base[0]+w[0])-.25*d.base[0],S=.75*(d.base[0]+w[2])-.25*(d.base[0]+w[4]);if(Math.abs(M-S)<Mr*2){const B=.75*(d.base[1]+w[1])-.25*d.base[1],D=.75*(d.base[1]+w[3])-.25*(d.base[1]+w[5]);if(Math.abs(B-D)<Mr*2){const R=w.slice();R.splice(0,4,M+S-d.base[0],B+D-d.base[1]),vo(R);const ee=th(w,t).length;th(R,t).length<ee&&(v="q",w=R,C&&C.command=="s"&&Vh(C,w))}}}if(t.lineShorthands&&v==="l"&&(w[1]===0?(v="h",w.pop()):w[0]===0&&(v="v",w.shift())),t.collapseRepeated&&i===!1&&(v==="m"||v==="h"||v==="v")&&c.command&&v==c.command.toLowerCase()&&(v!="h"&&v!="v"||c.args[0]>=0==w[0]>=0))return c.args[0]+=w[0],v!="h"&&v!="v"&&(c.args[1]+=w[1]),c.coords=d.coords,m[p]=c,!1;if(t.curveSmoothShorthands&&c.command){if(v==="c")(c.command==="c"&&Math.abs(w[0]- -(c.args[2]-c.args[4]))<Mr&&Math.abs(w[1]- -(c.args[3]-c.args[5]))<Mr||c.command==="s"&&Math.abs(w[0]- -(c.args[0]-c.args[2]))<Mr&&Math.abs(w[1]- -(c.args[1]-c.args[3]))<Mr||c.command!=="c"&&c.command!=="s"&&Math.abs(w[0])<Mr&&Math.abs(w[1])<Mr)&&(v="s",w=w.slice(2));else if(v==="q"){if(c.command==="q"&&Math.abs(w[0]-(c.args[2]-c.args[0]))<Mr&&Math.abs(w[1]-(c.args[3]-c.args[1]))<Mr)v="t",w=w.slice(2);else if(c.command==="t"){const M=cj(g,d.base),S=[w[0]+d.base[0],w[1]+d.base[1]];Math.abs(M[0]-S[0])<Mr&&Math.abs(M[1]-S[1])<Mr&&(v="t",w=w.slice(2))}}}if(t.removeUseless&&!r&&((v==="l"||v==="h"||v==="v"||v==="q"||v==="t"||v==="c"||v==="s")&&w.every(function(M){return M===0})||v==="a"&&w[5]===0&&w[6]===0))return m[p]=c,!1;t.convertToZ&&(n||(C==null?void 0:C.command)==="Z"||(C==null?void 0:C.command)==="z")&&(v==="l"||v==="h"||v==="v")&&Math.abs(o[0]-d.coords[0])<Mr&&Math.abs(o[1]-d.coords[1])<Mr&&(v="z",w=[]),d.command=v,d.args=w}else if(a[0]=o[0],a[1]=o[1],c.command==="Z"||c.command==="z")return!1;return(v==="Z"||v==="z")&&t.removeUseless&&n&&Math.abs(d.base[0]-d.coords[0])<Mr/10&&Math.abs(d.base[1]-d.coords[1])<Mr/10?!1:(v==="q"?h=[w[0]+d.base[0],w[1]+d.base[1]]:v==="t"?g?h=cj(g,d.base):h=d.coords:h=void 0,c=d,!0)}),e}function q2e(e,t){let n=e[0];return e=e.filter(function(r,i){if(i==0)return!0;if(r.command==="Z"||r.command==="z")return n=r,!0;const s=r.command,a=r.args,o=a.slice(),c=a.slice();if(s==="m"||s==="l"||s==="t"||s==="q"||s==="s"||s==="c")for(let p=o.length;p--;)o[p]+=r.base[p%2];else s=="h"?o[0]+=r.base[0]:s=="v"?o[0]+=r.base[1]:s=="a"&&(o[5]+=r.base[0],o[6]+=r.base[1]);vo(o),vo(c);const h=th(o,t),d=th(c,t);return(t.forceAbsolutePath||h.length<d.length&&!(t.negativeExtraSpace&&s==n.command&&n.command.charCodeAt(0)>96&&h.length==d.length-1&&(a[0]<0||Math.floor(a[0])===0&&!Number.isInteger(a[0])&&n.args[n.args.length-1]%1)))&&(r.command=s.toUpperCase(),r.args=o),n=r,!0}),e}function Fb(e){const t=RL([0,0,e[2],e[3],e[0],e[1],e[4],e[5]]);return t!=null&&e[2]<t[0]==t[0]<0&&e[3]<t[1]==t[1]<0&&e[4]<t[0]==t[0]<e[0]&&e[5]<t[1]==t[1]<e[1]}function RL(e){const t=e[1]-e[3],n=e[2]-e[0],r=e[0]*e[3]-e[2]*e[1],i=e[5]-e[7],s=e[6]-e[4],a=e[4]*e[7]-e[5]*e[6],o=t*s-i*n;if(!o)return;const c=[(n*a-s*r)/o,(t*a-i*r)/-o];if(!isNaN(c[0])&&!isNaN(c[1])&&isFinite(c[0])&&isFinite(c[1]))return c}function Y2e(e){const t=va||0;for(let n=e.length;n-- >0;){const r=So(e[n],t);if(r!==e[n]){const i=So(e[n],t-1);e[n]=So(Math.abs(i-e[n]),t+1)>=Mr?r:i}}return e}function X2e(e){for(let t=e.length;t-- >0;)e[t]=Math.round(e[t]);return e}function Bb(e){let t=e.length-2;const n=-e[t+1],r=e[t],i=1/(n*n+r*r);if(t<=1||!isFinite(i))return!1;for(;(t-=2)>=0;)if(Math.sqrt(Math.pow(n*e[t]+r*e[t+1],2)*i)>Mr)return!1;return!0}function lj(e){if(e[3]===1)return;const[t,n]=e;if(Math.abs(t-n)>Mr)return;const r=Math.hypot(e[5],e[6]);if(!(r>t*2))return t-Math.sqrt(t**2-.25*r**2)}function Vh(e,t){switch(e.command){case"s":e.command="c";break;case"t":e.command="q";break}return e.args.unshift(t[t.length-2]-t[t.length-4],t[t.length-1]-t[t.length-3]),e}function i1(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function cj(e,t){return[2*t[0]-e[0],2*t[1]-e[1]]}function s1(e,t){const n=t*t,r=n*t,i=1-t,s=i*i;return[3*s*t*e[0]+3*i*n*e[2]+r*e[4],3*s*t*e[1]+3*i*n*e[3]+r*e[5]]}function K2e(e){const t=s1(e,.5),n=[t[0]/2,t[1]/2],r=[(t[0]+e[4])/2,(t[1]+e[5])/2],i=RL([n[0],n[1],n[0]+n[1],n[1]-n[0],r[0],r[1],r[0]+(r[1]-t[1]),r[1]-(r[0]-t[0])]),s=i&&i1([0,0],i),a=Math.min(rk*Mr,ik*s/100);if(i&&s<1e15&&[1/4,3/4].every(function(o){return Math.abs(i1(s1(e,o),i)-s)<=a}))return{center:i,radius:s}}function ML(e,t){const n=Math.min(rk*Mr,ik*t.radius/100);return[0,1/4,1/2,3/4,1].every(function(r){return Math.abs(i1(s1(e,r),t.center)-t.radius)<=n})}function uj(e,t){return ML(e,{center:[t.center[0]+e[4],t.center[1]+e[5]],radius:t.radius})}function Ub(e,t){const n=-t.center[0],r=-t.center[1],i=e[4]-t.center[0],s=e[5]-t.center[1];return Math.acos((n*i+r*s)/Math.sqrt((n*n+r*r)*(i*i+s*s)))}function Z2e(e,t){return t.reduce(function(n,r){let i="";return r.args&&(i=th(vo(r.args.slice()),e)),n+r.command+i},"")}const LL=Object.freeze(Object.defineProperty({__proto__:null,description:H2e,fn:W2e,name:U2e},Symbol.toStringTag,{value:"Module"})),Q2e="convertTransform",J2e="collapses multiple transformations and optimizes it",eCe=(e,t)=>{const{convertToShorts:n=!0,degPrecision:r,floatPrecision:i=3,transformPrecision:s=5,matrixToTransform:a=!0,shortTranslate:o=!0,shortScale:c=!0,shortRotate:h=!0,removeUseless:d=!0,collapseIntoOne:p=!0,leadingZero:m=!0,negativeExtraSpace:g=!1}=t,v={convertToShorts:n,degPrecision:r,floatPrecision:i,transformPrecision:s,matrixToTransform:a,shortTranslate:o,shortScale:c,shortRotate:h,removeUseless:d,collapseIntoOne:p,leadingZero:m,negativeExtraSpace:g};return{element:{enter:w=>{w.attributes.transform!=null&&Hb(w,"transform",v),w.attributes.gradientTransform!=null&&Hb(w,"gradientTransform",v),w.attributes.patternTransform!=null&&Hb(w,"patternTransform",v)}}}},Hb=(e,t,n)=>{let r=PL(e.attributes[t]);n=tCe(r,n),n.collapseIntoOne&&r.length>1&&(r=[NL(r)]),n.convertToShorts?r=rCe(r,n):r.forEach(i=>L0(i,n)),n.removeUseless&&(r=iCe(r)),r.length?e.attributes[t]=Og(r,n):delete e.attributes[t]},tCe=(e,{...t})=>{const n=[];for(const i of e)i.name=="matrix"&&n.push(...i.data.slice(0,4));let r=t.transformPrecision;return n.length&&(t.transformPrecision=Math.min(t.transformPrecision,Math.max.apply(Math,n.map(nCe))||t.transformPrecision),r=Math.max.apply(Math,n.map(i=>i.toString().replace(/\D+/g,"").length))),t.degPrecision==null&&(t.degPrecision=Math.max(0,Math.min(t.floatPrecision,r-2))),t},nCe=e=>{const t=e.toString();return t.slice(t.indexOf(".")).length-1},rCe=(e,t)=>{var n;for(let r=0;r<e.length;r++){let i=e[r];if(t.matrixToTransform&&i.name==="matrix"){const s=D2e(i,t);Og(s,t).length<=Og([i],t).length&&e.splice(r,1,...s),i=e[r]}L0(i,t),t.shortTranslate&&i.name==="translate"&&i.data.length===2&&!i.data[1]&&i.data.pop(),t.shortScale&&i.name==="scale"&&i.data.length===2&&i.data[0]===i.data[1]&&i.data.pop(),t.shortRotate&&((n=e[r-2])==null?void 0:n.name)==="translate"&&e[r-1].name==="rotate"&&e[r].name==="translate"&&e[r-2].data[0]===-e[r].data[0]&&e[r-2].data[1]===-e[r].data[1]&&(e.splice(r-2,3,{name:"rotate",data:[e[r-1].data[0],e[r-2].data[0],e[r-2].data[1]]}),r-=2)}return e},iCe=e=>e.filter(t=>!(["translate","rotate","skewX","skewY"].indexOf(t.name)>-1&&(t.data.length==1||t.name=="rotate")&&!t.data[0]||t.name=="translate"&&!t.data[0]&&!t.data[1]||t.name=="scale"&&t.data[0]==1&&(t.data.length<2||t.data[1]==1)||t.name=="matrix"&&t.data[0]==1&&t.data[3]==1&&!(t.data[1]||t.data[2]||t.data[4]||t.data[5]))),IL=Object.freeze(Object.defineProperty({__proto__:null,description:J2e,fn:eCe,name:Q2e},Symbol.toStringTag,{value:"Module"})),sCe="removeEmptyAttrs",aCe="removes empty attributes",oCe=()=>({element:{enter:e=>{for(const[t,n]of Object.entries(e.attributes))n===""&&!zi.conditionalProcessing.has(t)&&delete e.attributes[t]}}}),$L=Object.freeze(Object.defineProperty({__proto__:null,description:aCe,fn:oCe,name:sCe},Symbol.toStringTag,{value:"Module"})),lCe="removeEmptyContainers",cCe="removes empty container elements",uCe=e=>{const t=$a(e);return{element:{exit:(n,r)=>{n.name==="svg"||!Tl.container.has(n.name)||n.children.length!==0||n.name==="pattern"&&Object.keys(n.attributes).length!==0||n.name==="mask"&&n.attributes.id!=null||r.type==="element"&&r.name==="switch"||n.name==="g"&&(n.attributes.filter!=null||Ra(t,n).filter)||Bn(n,r)}}}},DL=Object.freeze(Object.defineProperty({__proto__:null,description:cCe,fn:uCe,name:lCe},Symbol.toStringTag,{value:"Module"})),hCe="mergePaths",dCe="merges multiple paths in one if possible";function fCe(e,t){const n=e[t];return(n==null?void 0:n.type)==="static"?M0(n.value):!1}const pCe=(e,t)=>{const{force:n=!1,floatPrecision:r=3,noSpaceAfterFlags:i=!1}=t,s=$a(e);return{element:{enter:a=>{if(a.children.length<=1)return;const o=[];let c=a.children[0],h=null;const d=(p,m)=>{TL(p,m,{floatPrecision:r,noSpaceAfterFlags:i}),h=null};for(let p=1;p<a.children.length;p++){const m=a.children[p];if(c.type!=="element"||c.name!=="path"||c.children.length!==0||c.attributes.d==null){h&&c.type==="element"&&d(c,h),c=m;continue}if(m.type!=="element"||m.name!=="path"||m.children.length!==0||m.attributes.d==null){h&&d(c,h),c=m;continue}const g=Ra(s,m);if(g["marker-start"]||g["marker-mid"]||g["marker-end"]||g["clip-path"]||g.mask||g["mask-image"]||["fill","filter","stroke"].some(k=>fCe(g,k))){h&&d(c,h),c=m;continue}const v=Object.keys(m.attributes);if(v.length!==Object.keys(c.attributes).length){h&&d(c,h),c=m;continue}if(v.some(k=>k!=="d"&&c.type==="element"&&c.attributes[k]!==m.attributes[k])){h&&d(c,h),c=m;continue}const C=h!=null,x=Ng(m);if(h=h??Ng(c),n||!jL(h,x)){h.push(...x),o.push(m);continue}C&&d(c,h),c=m,h=null}h&&c.type==="element"&&d(c,h),a.children=a.children.filter(p=>!o.includes(p))}}}},zL=Object.freeze(Object.defineProperty({__proto__:null,description:dCe,fn:pCe,name:hCe},Symbol.toStringTag,{value:"Module"})),mCe="removeUnusedNS",gCe="removes unused namespaces declaration",yCe=()=>{const e=new Set;return{element:{enter:(t,n)=>{if(t.name==="svg"&&n.type==="root"){for(const r of Object.keys(t.attributes))if(r.startsWith("xmlns:")){const i=r.slice(6);e.add(i)}}if(e.size!==0){if(t.name.includes(":")){const[r]=t.name.split(":");e.has(r)&&e.delete(r)}for(const r of Object.keys(t.attributes))if(r.includes(":")){const[i]=r.split(":");e.delete(i)}}},exit:(t,n)=>{if(t.name==="svg"&&n.type==="root")for(const r of e)delete t.attributes[`xmlns:${r}`]}}}},FL=Object.freeze(Object.defineProperty({__proto__:null,description:gCe,fn:yCe,name:mCe},Symbol.toStringTag,{value:"Module"})),bCe="sortAttrs",vCe="Sort element attributes for better compression",xCe=(e,t)=>{const{order:n=["id","width","height","x","x1","x2","y","y1","y2","cx","cy","r","fill","stroke","marker","d","points"],xmlnsOrder:r="front"}=t,i=a=>{if(r==="front"){if(a==="xmlns")return 3;if(a.startsWith("xmlns:"))return 2}return a.includes(":")?1:0},s=([a],[o])=>{const c=i(a),d=i(o)-c;if(d!==0)return d;const[p]=a.split("-"),[m]=o.split("-");if(p!==m){const g=n.includes(p)?1:0,v=n.includes(m)?1:0;if(g===1&&v===1)return n.indexOf(p)-n.indexOf(m);const w=v-g;if(w!==0)return w}return a<o?-1:1};return{element:{enter:a=>{const o=Object.entries(a.attributes);o.sort(s);const c={};for(const[h,d]of o)c[h]=d;a.attributes=c}}}},BL=Object.freeze(Object.defineProperty({__proto__:null,description:vCe,fn:xCe,name:bCe},Symbol.toStringTag,{value:"Module"})),wCe="sortDefsChildren",_Ce="Sorts children of <defs> to improve compression",kCe=()=>({element:{enter:e=>{if(e.name==="defs"){const t=new Map;for(const n of e.children)if(n.type==="element"){const r=t.get(n.name);r==null?t.set(n.name,1):t.set(n.name,r+1)}e.children.sort((n,r)=>{if(n.type!=="element"||r.type!=="element")return 0;const i=t.get(n.name),s=t.get(r.name);if(i!=null&&s!=null){const o=s-i;if(o!==0)return o}const a=r.name.length-n.name.length;return a!==0?a:n.name!==r.name?n.name>r.name?-1:1:0})}}}}),UL=Object.freeze(Object.defineProperty({__proto__:null,description:_Ce,fn:kCe,name:wCe},Symbol.toStringTag,{value:"Module"})),SCe="removeDesc",CCe="removes <desc>",ECe=/^(Created with|Created using)/,TCe=(e,t)=>{const{removeAny:n=!1}=t;return{element:{enter:(r,i)=>{r.name==="desc"&&(n||r.children.length===0||r.children[0].type==="text"&&ECe.test(r.children[0].value))&&Bn(r,i)}}}},HL=Object.freeze(Object.defineProperty({__proto__:null,description:CCe,fn:TCe,name:SCe},Symbol.toStringTag,{value:"Module"})),jCe=Voe({name:"preset-default",plugins:[xR,wR,_R,K6,Z6,Q6,J6,eL,tL,iL,aL,lL,cL,uL,fL,pL,mL,gL,vL,xL,wL,_L,kL,SL,EL,LL,IL,$L,DL,zL,FL,BL,UL,HL]}),ACe="addAttributesToSVGElement",PCe="adds attributes to an outer <svg> element",NCe=`Error in plugin "addAttributesToSVGElement": absent parameters.
It should have a list of "attributes" or one "attribute".
Config example:

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attribute: "mySvg"
    }
  }
]

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attributes: ["mySvg", "size-big"]
    }
  }
]

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attributes: [
        {
          focusable: false
        },
        {
          'data-image': icon
        }
      ]
    }
  }
]
`,OCe=(e,t)=>{if(!Array.isArray(t.attributes)&&!t.attribute)return console.error(NCe),null;const n=t.attributes||[t.attribute];return{element:{enter:(r,i)=>{if(r.name==="svg"&&i.type==="root"){for(const s of n)if(typeof s=="string"&&r.attributes[s]==null&&(r.attributes[s]=void 0),typeof s=="object")for(const a of Object.keys(s))r.attributes[a]==null&&(r.attributes[a]=s[a])}}}}},RCe=Object.freeze(Object.defineProperty({__proto__:null,description:PCe,fn:OCe,name:ACe},Symbol.toStringTag,{value:"Module"})),MCe="addClassesToSVGElement",LCe="adds classnames to an outer <svg> element",ICe=`Error in plugin "addClassesToSVGElement": absent parameters.
It should have a list of classes in "classNames" or one "className".
Config example:

plugins: [
  {
    name: "addClassesToSVGElement",
    params: {
      className: "mySvg"
    }
  }
]

plugins: [
  {
    name: "addClassesToSVGElement",
    params: {
      classNames: ["mySvg", "size-big"]
    }
  }
]
`,$Ce=(e,t,n)=>{if(!(Array.isArray(t.classNames)&&t.classNames.length!==0)&&!t.className)return console.error(ICe),null;const r=t.classNames||[t.className];return{element:{enter:(i,s)=>{if(i.name==="svg"&&s.type==="root"){const a=new Set(i.attributes.class==null?null:i.attributes.class.split(" "));for(const o of r)if(o!=null){const c=typeof o=="string"?o:o(i,n);a.add(c)}i.attributes.class=Array.from(a).join(" ")}}}}},DCe=Object.freeze(Object.defineProperty({__proto__:null,description:LCe,fn:$Ce,name:MCe},Symbol.toStringTag,{value:"Module"})),zCe="cleanupListOfValues",FCe="rounds list of values to the fixed precision",BCe=/^([-+]?\d*\.?\d+([eE][-+]?\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,UCe=/\s+,?\s*|,\s*/,hj={cm:96/2.54,mm:96/25.4,in:96,pt:4/3,pc:16,px:1},HCe=(e,t)=>{const{floatPrecision:n=3,leadingZero:r=!0,defaultPx:i=!0,convertToPx:s=!0}=t,a=o=>{const c=[];for(const h of o.split(UCe)){const d=h.match(BCe),p=h.match(/new/);if(d){let m=Number(Number(d[1]).toFixed(n)),v=d[3]||"";if(s&&v&&v in hj){const C=Number((hj[v]*Number(d[1])).toFixed(n));C.toString().length<d[0].length&&(m=C,v="px")}let w;r?w=ic(m):w=m.toString(),i&&v==="px"&&(v=""),c.push(w+v)}else p?c.push("new"):h&&c.push(h)}return c.join(" ")};return{element:{enter:o=>{o.attributes.points!=null&&(o.attributes.points=a(o.attributes.points)),o.attributes["enable-background"]!=null&&(o.attributes["enable-background"]=a(o.attributes["enable-background"])),o.attributes.viewBox!=null&&(o.attributes.viewBox=a(o.attributes.viewBox)),o.attributes["stroke-dasharray"]!=null&&(o.attributes["stroke-dasharray"]=a(o.attributes["stroke-dasharray"])),o.attributes.dx!=null&&(o.attributes.dx=a(o.attributes.dx)),o.attributes.dy!=null&&(o.attributes.dy=a(o.attributes.dy)),o.attributes.x!=null&&(o.attributes.x=a(o.attributes.x)),o.attributes.y!=null&&(o.attributes.y=a(o.attributes.y))}}}},WCe=Object.freeze(Object.defineProperty({__proto__:null,description:FCe,fn:HCe,name:zCe},Symbol.toStringTag,{value:"Module"})),VCe="convertOneStopGradients",GCe="converts one-stop (single color) gradients to a plain color",qCe=e=>{const t=$a(e),n=new Set,r=new Map,i=new Map;let s=0;return{element:{enter:(a,o)=>{if(a.attributes["xlink:href"]!=null&&s++,a.name==="defs"){r.set(a,o);return}if(a.name!=="linearGradient"&&a.name!=="radialGradient")return;const c=a.children.filter(k=>k.type==="element"&&k.name==="stop"),h=a.attributes["xlink:href"]||a.attributes.href,d=c.length===0&&h!=null&&h.startsWith("#")?vR(e,h):a;if(d==null||d.type!=="element"){i.set(a,o);return}const p=d.children.filter(k=>k.type==="element"&&k.name==="stop");if(p.length!==1||p[0].type!=="element")return;o.type==="element"&&o.name==="defs"&&n.add(o),i.set(a,o);let m;const g=Ra(t,p[0])["stop-color"];g!=null&&g.type==="static"&&(m=g.value);const v=`url(#${a.attributes.id})`,w=[...kx].map(k=>`[${k}="${v}"]`).join(","),C=of(e,w);for(const k of C)if(k.type==="element")for(const P of kx)k.attributes[P]===v&&(m!=null?k.attributes[P]=m:delete k.attributes[P]);const x=of(e,`[style*=${v}]`);for(const k of x)k.type==="element"&&(k.attributes.style=k.attributes.style.replace(v,m||y_.presentation["stop-color"]))},exit:a=>{if(a.name==="svg"){for(const[o,c]of i.entries())o.attributes["xlink:href"]!=null&&s--,Bn(o,c);s===0&&delete a.attributes["xmlns:xlink"];for(const[o,c]of r.entries())n.has(o)&&o.children.length===0&&Bn(o,c)}}}}},YCe=Object.freeze(Object.defineProperty({__proto__:null,description:GCe,fn:qCe,name:VCe},Symbol.toStringTag,{value:"Module"})),XCe="convertStyleToAttrs",KCe="converts style to attributes",Lf=(...e)=>"(?:"+e.join("|")+")",ZCe=zi.presentation,kh="\\\\(?:[0-9a-f]{1,6}\\s?|\\r\\n|.)",QCe="\\s*("+Lf("[^:;\\\\]",kh)+"*?)\\s*",I0="'(?:[^'\\n\\r\\\\]|"+kh+")*?(?:'|$)",$0='"(?:[^"\\n\\r\\\\]|'+kh+')*?(?:"|$)',JCe=new RegExp("^"+Lf(I0,$0)+"$"),eEe="\\("+Lf(`[^'"()\\\\]+`,kh,I0,$0)+"*?\\)",tEe="\\s*("+Lf(`[^!'"();\\\\]+?`,kh,I0,$0,eEe,"[^;]*?")+"*?)",nEe="\\s*(?:;\\s*|$)",rEe="(\\s*!important(?![-(\\w]))?",dj=new RegExp(QCe+":"+tEe+rEe+nEe,"ig"),iEe=new RegExp(Lf(kh,I0,$0,"/\\*[^]*?\\*/"),"ig"),sEe=(e,t)=>{const{keepImportant:n=!1}=t;return{element:{enter:r=>{if(r.attributes.style!=null){let s=[];const a={},o=r.attributes.style.replace(iEe,c=>c[0]=="/"?"":c[0]=="\\"&&/[-g-z]/i.test(c[1])?c[1]:c);dj.lastIndex=0;for(var i;i=dj.exec(o);)(!n||!i[3])&&s.push([i[1],i[2]]);s.length&&(s=s.filter(function(c){if(c[0]){const h=c[0].toLowerCase();let d=c[1];if(JCe.test(d)&&(d=d.slice(1,-1)),ZCe.has(h))return a[h]=d,!1}return!0}),Object.assign(r.attributes,a),s.length?r.attributes.style=s.map(c=>c.join(":")).join(";"):delete r.attributes.style)}}}}},aEe=Object.freeze(Object.defineProperty({__proto__:null,description:KCe,fn:sEe,name:XCe},Symbol.toStringTag,{value:"Module"})),oEe="prefixIds",lEe="prefix IDs",cEe=e=>{const t=/[/\\]?([^/\\]+)$/.exec(e);return t?t[1]:""},uEe=e=>e.replace(/[. ]/g,"_"),hEe=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e,gd=(e,t)=>{const n=e(t);return t.startsWith(n)?t:n+t},Wb=(e,t)=>t.startsWith("#")?"#"+gd(e,t.slice(1)):null,dEe=(e,t,n,r,i,s)=>{if(typeof r=="function"){let a=s.get(e);return a!=null||(a=r(t,n)+i,s.set(e,a)),a}return typeof r=="string"?r+i:r===!1?"":n.path!=null&&n.path.length>0?uEe(cEe(n.path))+i:"prefix"+i},fEe=(e,t,n)=>{const{delim:r="__",prefix:i,prefixIds:s=!0,prefixClassNames:a=!0}=t,o=new Map;return{element:{enter:c=>{const h=d=>dEe(d,c,n,i,r,o);if(c.name==="style"){if(c.children.length===0)return;for(const d of c.children){if(d.type!=="text"&&d.type!=="cdata")continue;const p=d.value;let m;try{m=Xu(p,{parseValue:!0,parseCustomProperty:!1})}catch{return}qs(m,g=>{if(s&&g.type==="IdSelector"||a&&g.type==="ClassSelector"){g.name=gd(h,g.name);return}if(g.type==="Url"&&g.value.length>0){const v=Wb(h,hEe(g.value));v!=null&&(g.value=v)}}),d.value=Ts(m)}}s&&c.attributes.id!=null&&c.attributes.id.length!==0&&(c.attributes.id=gd(h,c.attributes.id)),a&&c.attributes.class!=null&&c.attributes.class.length!==0&&(c.attributes.class=c.attributes.class.split(/\s+/).map(d=>gd(h,d)).join(" "));for(const d of["href","xlink:href"])if(c.attributes[d]!=null&&c.attributes[d].length!==0){const p=Wb(h,c.attributes[d]);p!=null&&(c.attributes[d]=p)}for(const d of m0)c.attributes[d]!=null&&c.attributes[d].length!==0&&(c.attributes[d]=c.attributes[d].replace(/\burl\((["'])?(#.+?)\1\)/gi,(p,m,g)=>{const v=Wb(h,g);return v==null?p:`url(${v})`}));for(const d of["begin","end"])if(c.attributes[d]!=null&&c.attributes[d].length!==0){const p=c.attributes[d].split(/\s*;\s+/).map(m=>{if(m.endsWith(".end")||m.endsWith(".start")){const[g,v]=m.split(".");return`${gd(h,g)}.${v}`}return m});c.attributes[d]=p.join("; ")}}}}},pEe=Object.freeze(Object.defineProperty({__proto__:null,description:lEe,fn:fEe,name:oEe},Symbol.toStringTag,{value:"Module"})),mEe="removeAttributesBySelector",gEe="removes attributes of elements that match a css selector",yEe=(e,t)=>{const n=Array.isArray(t.selectors)?t.selectors:[t];for(const{selector:r,attributes:i}of n){const s=of(e,r);for(const a of s)if(a.type==="element")if(Array.isArray(i))for(const o of i)delete a.attributes[o];else delete a.attributes[i]}return{}},bEe=Object.freeze(Object.defineProperty({__proto__:null,description:gEe,fn:yEe,name:mEe},Symbol.toStringTag,{value:"Module"})),vEe="removeAttrs",xEe="removes specified attributes",wEe=":",_Ee=`Warning: The plugin "removeAttrs" requires the "attrs" parameter.
It should have a pattern to remove, otherwise the plugin is a noop.
Config example:

plugins: [
  {
    name: "removeAttrs",
    params: {
      attrs: "(fill|stroke)"
    }
  }
]
`,kEe=(e,t)=>{if(typeof t.attrs>"u")return console.warn(_Ee),null;const n=typeof t.elemSeparator=="string"?t.elemSeparator:wEe,r=typeof t.preserveCurrentColor=="boolean"?t.preserveCurrentColor:!1,i=Array.isArray(t.attrs)?t.attrs:[t.attrs];return{element:{enter:s=>{for(let a of i){a.includes(n)?a.split(n).length<3&&(a=[a,".*"].join(n)):a=[".*",a,".*"].join(n);const o=a.split(n).map(c=>(c==="*"&&(c=".*"),new RegExp(["^",c,"$"].join(""),"i")));if(o[0].test(s.name))for(const[c,h]of Object.entries(s.attributes)){const d=h.toLowerCase()==="currentcolor",p=r&&c=="fill"&&d,m=r&&c=="stroke"&&d;!p&&!m&&o[1].test(c)&&o[2].test(h)&&delete s.attributes[c]}}}}}},SEe=Object.freeze(Object.defineProperty({__proto__:null,description:xEe,fn:kEe,name:vEe},Symbol.toStringTag,{value:"Module"})),CEe="removeDimensions",EEe="removes width and height in presence of viewBox (opposite to removeViewBox)",TEe=()=>({element:{enter:e=>{if(e.name==="svg"){if(e.attributes.viewBox!=null)delete e.attributes.width,delete e.attributes.height;else if(e.attributes.width!=null&&e.attributes.height!=null&&Number.isNaN(Number(e.attributes.width))===!1&&Number.isNaN(Number(e.attributes.height))===!1){const t=Number(e.attributes.width),n=Number(e.attributes.height);e.attributes.viewBox=`0 0 ${t} ${n}`,delete e.attributes.width,delete e.attributes.height}}}}}),jEe=Object.freeze(Object.defineProperty({__proto__:null,description:EEe,fn:TEe,name:CEe},Symbol.toStringTag,{value:"Module"})),AEe="removeElementsByAttr",PEe="removes arbitrary elements by ID or className (disabled by default)",NEe=(e,t)=>{const n=t.id==null?[]:Array.isArray(t.id)?t.id:[t.id],r=t.class==null?[]:Array.isArray(t.class)?t.class:[t.class];return{element:{enter:(i,s)=>{if(i.attributes.id!=null&&n.length!==0&&n.includes(i.attributes.id)&&Bn(i,s),i.attributes.class&&r.length!==0){const a=i.attributes.class.split(" ");for(const o of r)if(a.includes(o)){Bn(i,s);break}}}}}},OEe=Object.freeze(Object.defineProperty({__proto__:null,description:PEe,fn:NEe,name:AEe},Symbol.toStringTag,{value:"Module"})),REe="removeOffCanvasPaths",MEe="removes elements that are drawn outside of the viewBox (disabled by default)",LEe=()=>{let e=null;return{element:{enter:(t,n)=>{if(t.name==="svg"&&n.type==="root"){let r="";t.attributes.viewBox!=null?r=t.attributes.viewBox:t.attributes.height!=null&&t.attributes.width!=null&&(r=`0 0 ${t.attributes.width} ${t.attributes.height}`),r=r.replace(/[,+]|px/g," ").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"");const i=/^(-?\d*\.?\d+) (-?\d*\.?\d+) (\d*\.?\d+) (\d*\.?\d+)$/.exec(r);if(i==null)return;const s=Number.parseFloat(i[1]),a=Number.parseFloat(i[2]),o=Number.parseFloat(i[3]),c=Number.parseFloat(i[4]);e={left:s,top:a,right:s+o,bottom:a+c,width:o,height:c}}if(t.attributes.transform!=null)return Ao;if(t.name==="path"&&t.attributes.d!=null&&e!=null){const r=ek(t.attributes.d);let i=!1;for(const d of r)if(d.command==="M"){const[p,m]=d.args;p>=e.left&&p<=e.right&&m>=e.top&&m<=e.bottom&&(i=!0)}if(i)return;r.length===2&&r.push({command:"z",args:[]});const{left:s,top:a,width:o,height:c}=e;jL([{command:"M",args:[s,a]},{command:"h",args:[o]},{command:"v",args:[c]},{command:"H",args:[s]},{command:"z",args:[]}],r)===!1&&Bn(t,n)}}}}},IEe=Object.freeze(Object.defineProperty({__proto__:null,description:MEe,fn:LEe,name:REe},Symbol.toStringTag,{value:"Module"})),$Ee="removeRasterImages",DEe="removes raster images (disabled by default)",zEe=()=>({element:{enter:(e,t)=>{e.name==="image"&&e.attributes["xlink:href"]!=null&&/(\.|image\/)(jpe?g|png|gif)/.test(e.attributes["xlink:href"])&&Bn(e,t)}}}),FEe=Object.freeze(Object.defineProperty({__proto__:null,description:DEe,fn:zEe,name:$Ee},Symbol.toStringTag,{value:"Module"})),BEe="removeScripts",UEe="removes scripts (disabled by default)",HEe=[...zi.animationEvent,...zi.documentEvent,...zi.documentElementEvent,...zi.globalEvent,...zi.graphicalEvent],WEe=()=>({element:{enter:(e,t)=>{if(e.name==="script"){Bn(e,t);return}for(const n of HEe)e.attributes[n]!=null&&delete e.attributes[n]},exit:(e,t)=>{if(e.name==="a"){for(const n of Object.keys(e.attributes))if(n==="href"||n.endsWith(":href")){if(e.attributes[n]==null||!e.attributes[n].trimStart().startsWith("javascript:"))continue;const r=t.children.indexOf(e),i=e.children.filter(s=>s.type!=="text");t.children.splice(r,1,...i)}}}}}),VEe=Object.freeze(Object.defineProperty({__proto__:null,description:UEe,fn:WEe,name:BEe},Symbol.toStringTag,{value:"Module"})),GEe="removeStyleElement",qEe="removes <style> element (disabled by default)",YEe=()=>({element:{enter:(e,t)=>{e.name==="style"&&Bn(e,t)}}}),XEe=Object.freeze(Object.defineProperty({__proto__:null,description:qEe,fn:YEe,name:GEe},Symbol.toStringTag,{value:"Module"})),KEe="removeTitle",ZEe="removes <title>",QEe=()=>({element:{enter:(e,t)=>{e.name==="title"&&Bn(e,t)}}}),JEe=Object.freeze(Object.defineProperty({__proto__:null,description:ZEe,fn:QEe,name:KEe},Symbol.toStringTag,{value:"Module"})),eTe="removeViewBox",tTe="removes viewBox attribute when possible",nTe=new Set(["pattern","svg","symbol"]),rTe=()=>({element:{enter:(e,t)=>{if(nTe.has(e.name)&&e.attributes.viewBox!=null&&e.attributes.width!=null&&e.attributes.height!=null){if(e.name==="svg"&&t.type!=="root")return;const n=e.attributes.viewBox.split(/[ ,]+/g);n[0]==="0"&&n[1]==="0"&&e.attributes.width.replace(/px$/,"")===n[2]&&e.attributes.height.replace(/px$/,"")===n[3]&&delete e.attributes.viewBox}}}}),iTe=Object.freeze(Object.defineProperty({__proto__:null,description:tTe,fn:rTe,name:eTe},Symbol.toStringTag,{value:"Module"})),sTe="removeXlink",aTe="remove xlink namespace and replaces attributes with the SVG 2 equivalent where applicable",fj="http://www.w3.org/1999/xlink",oTe={new:"_blank",replace:"_self"},lTe=new Set(["cursor","filter","font-face-uri","glyphRef","tref"]),Vb=(e,t,n)=>t.map(r=>`${r}:${n}`).filter(r=>e.attributes[r]!=null),cTe=(e,t)=>{const{includeLegacy:n}=t,r=[],i=[],s=[];return{element:{enter:a=>{var p,m;for(const[g,v]of Object.entries(a.attributes))if(g.startsWith("xmlns:")){const w=g.split(":",2)[1];if(v===fj){r.push(w);continue}r.includes(w)&&i.push(w)}if(i.some(g=>r.includes(g)))return;const o=Vb(a,r,"show");let c=a.attributes.target!=null;for(let g=o.length-1;g>=0;g--){const v=o[g],w=a.attributes[v],C=oTe[w];if(c||C==null){delete a.attributes[v];continue}C!==((m=(p=b_[a.name])==null?void 0:p.defaults)==null?void 0:m.target)&&(a.attributes.target=C),delete a.attributes[v],c=!0}const h=Vb(a,r,"title");for(let g=h.length-1;g>=0;g--){const v=h[g],w=a.attributes[v];if(a.children.filter(k=>k.type==="element"&&k.name==="title").length>0){delete a.attributes[v];continue}const x={type:"element",name:"title",attributes:{},children:[{type:"text",value:w}]};Object.defineProperty(x,"parentNode",{writable:!0,value:a}),a.children.unshift(x),delete a.attributes[v]}const d=Vb(a,r,"href");if(d.length>0&&lTe.has(a.name)&&!n){d.map(g=>g.split(":",1)[0]).forEach(g=>s.push(g));return}for(let g=d.length-1;g>=0;g--){const v=d[g],w=a.attributes[v];if(a.attributes.href!=null){delete a.attributes[v];continue}a.attributes.href=w,delete a.attributes[v]}},exit:a=>{for(const[o,c]of Object.entries(a.attributes)){const[h,d]=o.split(":",2);if(r.includes(h)&&!i.includes(h)&&!s.includes(h)&&!n){delete a.attributes[o];continue}if(o.startsWith("xmlns:")&&!s.includes(d)){if(c===fj){const p=r.indexOf(d);r.splice(p,1),delete a.attributes[o];continue}if(i.includes(h)){const p=i.indexOf(d);i.splice(p,1)}}}}}}},uTe=Object.freeze(Object.defineProperty({__proto__:null,description:aTe,fn:cTe,name:sTe},Symbol.toStringTag,{value:"Module"})),hTe="removeXMLNS",dTe="removes xmlns attribute (for inline svg, disabled by default)",fTe=()=>({element:{enter:e=>{e.name==="svg"&&delete e.attributes.xmlns}}}),pTe=Object.freeze(Object.defineProperty({__proto__:null,description:dTe,fn:fTe,name:hTe},Symbol.toStringTag,{value:"Module"})),mTe="reusePaths",gTe="Finds <path> elements with the same d, fill, and stroke, and converts them to <use> elements referencing a single <path> def.",yTe=e=>{const t=$a(e),n=new Map;let r;const i=new Set;return{element:{enter:(s,a)=>{if(s.name==="path"&&s.attributes.d!=null){const o=s.attributes.d,c=s.attributes.fill||"",h=s.attributes.stroke||"",d=o+";s:"+h+";f:"+c;let p=n.get(d);p==null&&(p=[],n.set(d,p)),p.push(s)}if(r==null&&s.name==="defs"&&a.type==="element"&&a.name==="svg"&&(r=s),s.name==="use")for(const o of["href","xlink:href"]){const c=s.attributes[o];c!=null&&c.startsWith("#")&&c.length>1&&i.add(c.slice(1))}},exit:(s,a)=>{if(s.name==="svg"&&a.type==="root"){let o=r;o==null&&(o={type:"element",name:"defs",attributes:{},children:[]});let c=0;for(const h of n.values())if(h.length>1){const d={type:"element",name:"path",attributes:{},children:[]};for(const m of["fill","stroke","d"])h[0].attributes[m]!=null&&(d.attributes[m]=h[0].attributes[m]);const p=h[0].attributes.id;p==null||i.has(p)||t.rules.some(m=>m.selector===`#${p}`)?d.attributes.id="reuse-"+c++:(d.attributes.id=p,delete h[0].attributes.id),o.children.push(d);for(const m of h){if(delete m.attributes.d,delete m.attributes.stroke,delete m.attributes.fill,o.children.includes(m)&&m.children.length===0){if(Object.keys(m.attributes).length===0){Bn(m,o);continue}if(Object.keys(m.attributes).length===1&&m.attributes.id!=null){Bn(m,o);const g=`[xlink\\:href=#${m.attributes.id}], [href=#${m.attributes.id}]`;for(const v of of(s,g))if(v.type==="element")for(const w of["href","xlink:href"])v.attributes[w]!=null&&(v.attributes[w]="#"+d.attributes.id);continue}}m.name="use",m.attributes["xlink:href"]="#"+d.attributes.id}}o.children.length!==0&&(s.attributes["xmlns:xlink"]==null&&(s.attributes["xmlns:xlink"]="http://www.w3.org/1999/xlink"),r==null&&s.children.unshift(o))}}}}},bTe=Object.freeze(Object.defineProperty({__proto__:null,description:gTe,fn:yTe,name:mTe},Symbol.toStringTag,{value:"Module"})),vTe=Object.freeze([jCe,RCe,DCe,J6,gL,aL,WCe,cL,EL,uL,_L,YCe,LL,wL,aEe,IL,tL,zL,eL,iL,kL,SL,pEe,bEe,SEe,_R,K6,HL,jEe,xR,Q6,OEe,$L,DL,xL,vL,Z6,pL,IEe,FEe,VEe,XEe,JEe,fL,FL,lL,mL,iTe,uTe,pTe,wR,bTe,BL,UL]);var WL={};const a1=Oj(Woe);var Gb={},qp={exports:{}},qb={},Gh={},pj;function xTe(){if(pj)return Gh;pj=1,Gh.byteLength=o,Gh.toByteArray=h,Gh.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function a(g){var v=g.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=v);var C=w===v?0:4-w%4;return[w,C]}function o(g){var v=a(g),w=v[0],C=v[1];return(w+C)*3/4-C}function c(g,v,w){return(v+w)*3/4-w}function h(g){var v,w=a(g),C=w[0],x=w[1],k=new n(c(g,C,x)),P=0,j=x>0?C-4:C,M;for(M=0;M<j;M+=4)v=t[g.charCodeAt(M)]<<18|t[g.charCodeAt(M+1)]<<12|t[g.charCodeAt(M+2)]<<6|t[g.charCodeAt(M+3)],k[P++]=v>>16&255,k[P++]=v>>8&255,k[P++]=v&255;return x===2&&(v=t[g.charCodeAt(M)]<<2|t[g.charCodeAt(M+1)]>>4,k[P++]=v&255),x===1&&(v=t[g.charCodeAt(M)]<<10|t[g.charCodeAt(M+1)]<<4|t[g.charCodeAt(M+2)]>>2,k[P++]=v>>8&255,k[P++]=v&255),k}function d(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function p(g,v,w){for(var C,x=[],k=v;k<w;k+=3)C=(g[k]<<16&16711680)+(g[k+1]<<8&65280)+(g[k+2]&255),x.push(d(C));return x.join("")}function m(g){for(var v,w=g.length,C=w%3,x=[],k=16383,P=0,j=w-C;P<j;P+=k)x.push(p(g,P,P+k>j?j:P+k));return C===1?(v=g[w-1],x.push(e[v>>2]+e[v<<4&63]+"==")):C===2&&(v=(g[w-2]<<8)+g[w-1],x.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),x.join("")}return Gh}var Yp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var mj;function wTe(){return mj||(mj=1,Yp.read=function(e,t,n,r,i){var s,a,o=i*8-r-1,c=(1<<o)-1,h=c>>1,d=-7,p=n?i-1:0,m=n?-1:1,g=e[t+p];for(p+=m,s=g&(1<<-d)-1,g>>=-d,d+=o;d>0;s=s*256+e[t+p],p+=m,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;d>0;a=a*256+e[t+p],p+=m,d-=8);if(s===0)s=1-h;else{if(s===c)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-h}return(g?-1:1)*a*Math.pow(2,s-r)},Yp.write=function(e,t,n,r,i,s){var a,o,c,h=s*8-i-1,d=(1<<h)-1,p=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+p>=1?t+=m/c:t+=m*Math.pow(2,1-p),t*c>=2&&(a++,c/=2),a+p>=d?(o=0,a=d):a+p>=1?(o=(t*c-1)*Math.pow(2,i),a=a+p):(o=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+g]=o&255,g+=v,o/=256,i-=8);for(a=a<<i|o,h+=i;h>0;e[n+g]=a&255,g+=v,a/=256,h-=8);e[n+g-v]|=w*128}),Yp}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var gj;function _Te(){return gj||(gj=1,function(e){var t=xTe(),n=wTe(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var se=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(se,L),se.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');var L=new Uint8Array(se);return Object.setPrototypeOf(L,o.prototype),L}function o(se,L,I){if(typeof se=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(se)}return c(se,L,I)}o.poolSize=8192;function c(se,L,I){if(typeof se=="string")return m(se,L);if(ArrayBuffer.isView(se))return v(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(Ct(se,ArrayBuffer)||se&&Ct(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ct(se,SharedArrayBuffer)||se&&Ct(se.buffer,SharedArrayBuffer)))return w(se,L,I);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=se.valueOf&&se.valueOf();if(Q!=null&&Q!==se)return o.from(Q,L,I);var he=C(se);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return o.from(se[Symbol.toPrimitive]("string"),L,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}o.from=function(se,L,I){return c(se,L,I)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function h(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function d(se,L,I){return h(se),se<=0?a(se):L!==void 0?typeof I=="string"?a(se).fill(L,I):a(se).fill(L):a(se)}o.alloc=function(se,L,I){return d(se,L,I)};function p(se){return h(se),a(se<0?0:x(se)|0)}o.allocUnsafe=function(se){return p(se)},o.allocUnsafeSlow=function(se){return p(se)};function m(se,L){if((typeof L!="string"||L==="")&&(L="utf8"),!o.isEncoding(L))throw new TypeError("Unknown encoding: "+L);var I=P(se,L)|0,Q=a(I),he=Q.write(se,L);return he!==I&&(Q=Q.slice(0,he)),Q}function g(se){for(var L=se.length<0?0:x(se.length)|0,I=a(L),Q=0;Q<L;Q+=1)I[Q]=se[Q]&255;return I}function v(se){if(Ct(se,Uint8Array)){var L=new Uint8Array(se);return w(L.buffer,L.byteOffset,L.byteLength)}return g(se)}function w(se,L,I){if(L<0||se.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<L+(I||0))throw new RangeError('"length" is outside of buffer bounds');var Q;return L===void 0&&I===void 0?Q=new Uint8Array(se):I===void 0?Q=new Uint8Array(se,L):Q=new Uint8Array(se,L,I),Object.setPrototypeOf(Q,o.prototype),Q}function C(se){if(o.isBuffer(se)){var L=x(se.length)|0,I=a(L);return I.length===0||se.copy(I,0,0,L),I}if(se.length!==void 0)return typeof se.length!="number"||q(se.length)?a(0):g(se);if(se.type==="Buffer"&&Array.isArray(se.data))return g(se.data)}function x(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function k(se){return+se!=se&&(se=0),o.alloc(+se)}o.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==o.prototype},o.compare=function(L,I){if(Ct(L,Uint8Array)&&(L=o.from(L,L.offset,L.byteLength)),Ct(I,Uint8Array)&&(I=o.from(I,I.offset,I.byteLength)),!o.isBuffer(L)||!o.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===I)return 0;for(var Q=L.length,he=I.length,ve=0,me=Math.min(Q,he);ve<me;++ve)if(L[ve]!==I[ve]){Q=L[ve],he=I[ve];break}return Q<he?-1:he<Q?1:0},o.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(L,I){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return o.alloc(0);var Q;if(I===void 0)for(I=0,Q=0;Q<L.length;++Q)I+=L[Q].length;var he=o.allocUnsafe(I),ve=0;for(Q=0;Q<L.length;++Q){var me=L[Q];if(Ct(me,Uint8Array))ve+me.length>he.length?o.from(me).copy(he,ve):Uint8Array.prototype.set.call(he,me,ve);else if(o.isBuffer(me))me.copy(he,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=me.length}return he};function P(se,L){if(o.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||Ct(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var I=se.length,Q=arguments.length>2&&arguments[2]===!0;if(!Q&&I===0)return 0;for(var he=!1;;)switch(L){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return oe(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return ht(se).length;default:if(he)return Q?-1:oe(se).length;L=(""+L).toLowerCase(),he=!0}}o.byteLength=P;function j(se,L,I){var Q=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,L>>>=0,I<=L))return"";for(se||(se="utf8");;)switch(se){case"hex":return xe(this,L,I);case"utf8":case"utf-8":return H(this,L,I);case"ascii":return we(this,L,I);case"latin1":case"binary":return Be(this,L,I);case"base64":return ge(this,L,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,L,I);default:if(Q)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),Q=!0}}o.prototype._isBuffer=!0;function M(se,L,I){var Q=se[L];se[L]=se[I],se[I]=Q}o.prototype.swap16=function(){var L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<L;I+=2)M(this,I,I+1);return this},o.prototype.swap32=function(){var L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<L;I+=4)M(this,I,I+3),M(this,I+1,I+2);return this},o.prototype.swap64=function(){var L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<L;I+=8)M(this,I,I+7),M(this,I+1,I+6),M(this,I+2,I+5),M(this,I+3,I+4);return this},o.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?H(this,0,L):j.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(L){if(!o.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:o.compare(this,L)===0},o.prototype.inspect=function(){var L="",I=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(L+=" ... "),"<Buffer "+L+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(L,I,Q,he,ve){if(Ct(L,Uint8Array)&&(L=o.from(L,L.offset,L.byteLength)),!o.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(I===void 0&&(I=0),Q===void 0&&(Q=L?L.length:0),he===void 0&&(he=0),ve===void 0&&(ve=this.length),I<0||Q>L.length||he<0||ve>this.length)throw new RangeError("out of range index");if(he>=ve&&I>=Q)return 0;if(he>=ve)return-1;if(I>=Q)return 1;if(I>>>=0,Q>>>=0,he>>>=0,ve>>>=0,this===L)return 0;for(var me=ve-he,Me=Q-I,Je=Math.min(me,Me),De=this.slice(he,ve),l=L.slice(I,Q),f=0;f<Je;++f)if(De[f]!==l[f]){me=De[f],Me=l[f];break}return me<Me?-1:Me<me?1:0};function S(se,L,I,Q,he){if(se.length===0)return-1;if(typeof I=="string"?(Q=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,q(I)&&(I=he?0:se.length-1),I<0&&(I=se.length+I),I>=se.length){if(he)return-1;I=se.length-1}else if(I<0)if(he)I=0;else return-1;if(typeof L=="string"&&(L=o.from(L,Q)),o.isBuffer(L))return L.length===0?-1:B(se,L,I,Q,he);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(se,L,I):Uint8Array.prototype.lastIndexOf.call(se,L,I):B(se,[L],I,Q,he);throw new TypeError("val must be string, number or Buffer")}function B(se,L,I,Q,he){var ve=1,me=se.length,Me=L.length;if(Q!==void 0&&(Q=String(Q).toLowerCase(),Q==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(se.length<2||L.length<2)return-1;ve=2,me/=2,Me/=2,I/=2}function Je(_,E){return ve===1?_[E]:_.readUInt16BE(E*ve)}var De;if(he){var l=-1;for(De=I;De<me;De++)if(Je(se,De)===Je(L,l===-1?0:De-l)){if(l===-1&&(l=De),De-l+1===Me)return l*ve}else l!==-1&&(De-=De-l),l=-1}else for(I+Me>me&&(I=me-Me),De=I;De>=0;De--){for(var f=!0,b=0;b<Me;b++)if(Je(se,De+b)!==Je(L,b)){f=!1;break}if(f)return De}return-1}o.prototype.includes=function(L,I,Q){return this.indexOf(L,I,Q)!==-1},o.prototype.indexOf=function(L,I,Q){return S(this,L,I,Q,!0)},o.prototype.lastIndexOf=function(L,I,Q){return S(this,L,I,Q,!1)};function D(se,L,I,Q){I=Number(I)||0;var he=se.length-I;Q?(Q=Number(Q),Q>he&&(Q=he)):Q=he;var ve=L.length;Q>ve/2&&(Q=ve/2);for(var me=0;me<Q;++me){var Me=parseInt(L.substr(me*2,2),16);if(q(Me))return me;se[I+me]=Me}return me}function R(se,L,I,Q){return jt(oe(L,se.length-I),se,I,Q)}function ee(se,L,I,Q){return jt(We(L),se,I,Q)}function ue(se,L,I,Q){return jt(ht(L),se,I,Q)}function ie(se,L,I,Q){return jt(Ne(L,se.length-I),se,I,Q)}o.prototype.write=function(L,I,Q,he){if(I===void 0)he="utf8",Q=this.length,I=0;else if(Q===void 0&&typeof I=="string")he=I,Q=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(Q)?(Q=Q>>>0,he===void 0&&(he="utf8")):(he=Q,Q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ve=this.length-I;if((Q===void 0||Q>ve)&&(Q=ve),L.length>0&&(Q<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var me=!1;;)switch(he){case"hex":return D(this,L,I,Q);case"utf8":case"utf-8":return R(this,L,I,Q);case"ascii":case"latin1":case"binary":return ee(this,L,I,Q);case"base64":return ue(this,L,I,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,L,I,Q);default:if(me)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),me=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(se,L,I){return L===0&&I===se.length?t.fromByteArray(se):t.fromByteArray(se.slice(L,I))}function H(se,L,I){I=Math.min(se.length,I);for(var Q=[],he=L;he<I;){var ve=se[he],me=null,Me=ve>239?4:ve>223?3:ve>191?2:1;if(he+Me<=I){var Je,De,l,f;switch(Me){case 1:ve<128&&(me=ve);break;case 2:Je=se[he+1],(Je&192)===128&&(f=(ve&31)<<6|Je&63,f>127&&(me=f));break;case 3:Je=se[he+1],De=se[he+2],(Je&192)===128&&(De&192)===128&&(f=(ve&15)<<12|(Je&63)<<6|De&63,f>2047&&(f<55296||f>57343)&&(me=f));break;case 4:Je=se[he+1],De=se[he+2],l=se[he+3],(Je&192)===128&&(De&192)===128&&(l&192)===128&&(f=(ve&15)<<18|(Je&63)<<12|(De&63)<<6|l&63,f>65535&&f<1114112&&(me=f))}}me===null?(me=65533,Me=1):me>65535&&(me-=65536,Q.push(me>>>10&1023|55296),me=56320|me&1023),Q.push(me),he+=Me}return Ae(Q)}var ye=4096;function Ae(se){var L=se.length;if(L<=ye)return String.fromCharCode.apply(String,se);for(var I="",Q=0;Q<L;)I+=String.fromCharCode.apply(String,se.slice(Q,Q+=ye));return I}function we(se,L,I){var Q="";I=Math.min(se.length,I);for(var he=L;he<I;++he)Q+=String.fromCharCode(se[he]&127);return Q}function Be(se,L,I){var Q="";I=Math.min(se.length,I);for(var he=L;he<I;++he)Q+=String.fromCharCode(se[he]);return Q}function xe(se,L,I){var Q=se.length;(!L||L<0)&&(L=0),(!I||I<0||I>Q)&&(I=Q);for(var he="",ve=L;ve<I;++ve)he+=Ye[se[ve]];return he}function Le(se,L,I){for(var Q=se.slice(L,I),he="",ve=0;ve<Q.length-1;ve+=2)he+=String.fromCharCode(Q[ve]+Q[ve+1]*256);return he}o.prototype.slice=function(L,I){var Q=this.length;L=~~L,I=I===void 0?Q:~~I,L<0?(L+=Q,L<0&&(L=0)):L>Q&&(L=Q),I<0?(I+=Q,I<0&&(I=0)):I>Q&&(I=Q),I<L&&(I=L);var he=this.subarray(L,I);return Object.setPrototypeOf(he,o.prototype),he};function Ce(se,L,I){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+L>I)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(L,I,Q){L=L>>>0,I=I>>>0,Q||Ce(L,I,this.length);for(var he=this[L],ve=1,me=0;++me<I&&(ve*=256);)he+=this[L+me]*ve;return he},o.prototype.readUintBE=o.prototype.readUIntBE=function(L,I,Q){L=L>>>0,I=I>>>0,Q||Ce(L,I,this.length);for(var he=this[L+--I],ve=1;I>0&&(ve*=256);)he+=this[L+--I]*ve;return he},o.prototype.readUint8=o.prototype.readUInt8=function(L,I){return L=L>>>0,I||Ce(L,1,this.length),this[L]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(L,I){return L=L>>>0,I||Ce(L,2,this.length),this[L]|this[L+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(L,I){return L=L>>>0,I||Ce(L,2,this.length),this[L]<<8|this[L+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(L,I){return L=L>>>0,I||Ce(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(L,I){return L=L>>>0,I||Ce(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},o.prototype.readIntLE=function(L,I,Q){L=L>>>0,I=I>>>0,Q||Ce(L,I,this.length);for(var he=this[L],ve=1,me=0;++me<I&&(ve*=256);)he+=this[L+me]*ve;return ve*=128,he>=ve&&(he-=Math.pow(2,8*I)),he},o.prototype.readIntBE=function(L,I,Q){L=L>>>0,I=I>>>0,Q||Ce(L,I,this.length);for(var he=I,ve=1,me=this[L+--he];he>0&&(ve*=256);)me+=this[L+--he]*ve;return ve*=128,me>=ve&&(me-=Math.pow(2,8*I)),me},o.prototype.readInt8=function(L,I){return L=L>>>0,I||Ce(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},o.prototype.readInt16LE=function(L,I){L=L>>>0,I||Ce(L,2,this.length);var Q=this[L]|this[L+1]<<8;return Q&32768?Q|4294901760:Q},o.prototype.readInt16BE=function(L,I){L=L>>>0,I||Ce(L,2,this.length);var Q=this[L+1]|this[L]<<8;return Q&32768?Q|4294901760:Q},o.prototype.readInt32LE=function(L,I){return L=L>>>0,I||Ce(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},o.prototype.readInt32BE=function(L,I){return L=L>>>0,I||Ce(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},o.prototype.readFloatLE=function(L,I){return L=L>>>0,I||Ce(L,4,this.length),n.read(this,L,!0,23,4)},o.prototype.readFloatBE=function(L,I){return L=L>>>0,I||Ce(L,4,this.length),n.read(this,L,!1,23,4)},o.prototype.readDoubleLE=function(L,I){return L=L>>>0,I||Ce(L,8,this.length),n.read(this,L,!0,52,8)},o.prototype.readDoubleBE=function(L,I){return L=L>>>0,I||Ce(L,8,this.length),n.read(this,L,!1,52,8)};function Re(se,L,I,Q,he,ve){if(!o.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>he||L<ve)throw new RangeError('"value" argument is out of bounds');if(I+Q>se.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(L,I,Q,he){if(L=+L,I=I>>>0,Q=Q>>>0,!he){var ve=Math.pow(2,8*Q)-1;Re(this,L,I,Q,ve,0)}var me=1,Me=0;for(this[I]=L&255;++Me<Q&&(me*=256);)this[I+Me]=L/me&255;return I+Q},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(L,I,Q,he){if(L=+L,I=I>>>0,Q=Q>>>0,!he){var ve=Math.pow(2,8*Q)-1;Re(this,L,I,Q,ve,0)}var me=Q-1,Me=1;for(this[I+me]=L&255;--me>=0&&(Me*=256);)this[I+me]=L/Me&255;return I+Q},o.prototype.writeUint8=o.prototype.writeUInt8=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,1,255,0),this[I]=L&255,I+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,2,65535,0),this[I]=L&255,this[I+1]=L>>>8,I+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,2,65535,0),this[I]=L>>>8,this[I+1]=L&255,I+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,4,4294967295,0),this[I+3]=L>>>24,this[I+2]=L>>>16,this[I+1]=L>>>8,this[I]=L&255,I+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,4,4294967295,0),this[I]=L>>>24,this[I+1]=L>>>16,this[I+2]=L>>>8,this[I+3]=L&255,I+4},o.prototype.writeIntLE=function(L,I,Q,he){if(L=+L,I=I>>>0,!he){var ve=Math.pow(2,8*Q-1);Re(this,L,I,Q,ve-1,-ve)}var me=0,Me=1,Je=0;for(this[I]=L&255;++me<Q&&(Me*=256);)L<0&&Je===0&&this[I+me-1]!==0&&(Je=1),this[I+me]=(L/Me>>0)-Je&255;return I+Q},o.prototype.writeIntBE=function(L,I,Q,he){if(L=+L,I=I>>>0,!he){var ve=Math.pow(2,8*Q-1);Re(this,L,I,Q,ve-1,-ve)}var me=Q-1,Me=1,Je=0;for(this[I+me]=L&255;--me>=0&&(Me*=256);)L<0&&Je===0&&this[I+me+1]!==0&&(Je=1),this[I+me]=(L/Me>>0)-Je&255;return I+Q},o.prototype.writeInt8=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,1,127,-128),L<0&&(L=255+L+1),this[I]=L&255,I+1},o.prototype.writeInt16LE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,2,32767,-32768),this[I]=L&255,this[I+1]=L>>>8,I+2},o.prototype.writeInt16BE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,2,32767,-32768),this[I]=L>>>8,this[I+1]=L&255,I+2},o.prototype.writeInt32LE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,4,2147483647,-2147483648),this[I]=L&255,this[I+1]=L>>>8,this[I+2]=L>>>16,this[I+3]=L>>>24,I+4},o.prototype.writeInt32BE=function(L,I,Q){return L=+L,I=I>>>0,Q||Re(this,L,I,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[I]=L>>>24,this[I+1]=L>>>16,this[I+2]=L>>>8,this[I+3]=L&255,I+4};function it(se,L,I,Q,he,ve){if(I+Q>se.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function nt(se,L,I,Q,he){return L=+L,I=I>>>0,he||it(se,L,I,4),n.write(se,L,I,Q,23,4),I+4}o.prototype.writeFloatLE=function(L,I,Q){return nt(this,L,I,!0,Q)},o.prototype.writeFloatBE=function(L,I,Q){return nt(this,L,I,!1,Q)};function Ue(se,L,I,Q,he){return L=+L,I=I>>>0,he||it(se,L,I,8),n.write(se,L,I,Q,52,8),I+8}o.prototype.writeDoubleLE=function(L,I,Q){return Ue(this,L,I,!0,Q)},o.prototype.writeDoubleBE=function(L,I,Q){return Ue(this,L,I,!1,Q)},o.prototype.copy=function(L,I,Q,he){if(!o.isBuffer(L))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!he&&he!==0&&(he=this.length),I>=L.length&&(I=L.length),I||(I=0),he>0&&he<Q&&(he=Q),he===Q||L.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),L.length-I<he-Q&&(he=L.length-I+Q);var ve=he-Q;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,Q,he):Uint8Array.prototype.set.call(L,this.subarray(Q,he),I),ve},o.prototype.fill=function(L,I,Q,he){if(typeof L=="string"){if(typeof I=="string"?(he=I,I=0,Q=this.length):typeof Q=="string"&&(he=Q,Q=this.length),he!==void 0&&typeof he!="string")throw new TypeError("encoding must be a string");if(typeof he=="string"&&!o.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(L.length===1){var ve=L.charCodeAt(0);(he==="utf8"&&ve<128||he==="latin1")&&(L=ve)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(I<0||this.length<I||this.length<Q)throw new RangeError("Out of range index");if(Q<=I)return this;I=I>>>0,Q=Q===void 0?this.length:Q>>>0,L||(L=0);var me;if(typeof L=="number")for(me=I;me<Q;++me)this[me]=L;else{var Me=o.isBuffer(L)?L:o.from(L,he),Je=Me.length;if(Je===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(me=0;me<Q-I;++me)this[me+I]=Me[me%Je]}return this};var lt=/[^+/0-9A-Za-z-_]/g;function de(se){if(se=se.split("=")[0],se=se.trim().replace(lt,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function oe(se,L){L=L||1/0;for(var I,Q=se.length,he=null,ve=[],me=0;me<Q;++me){if(I=se.charCodeAt(me),I>55295&&I<57344){if(!he){if(I>56319){(L-=3)>-1&&ve.push(239,191,189);continue}else if(me+1===Q){(L-=3)>-1&&ve.push(239,191,189);continue}he=I;continue}if(I<56320){(L-=3)>-1&&ve.push(239,191,189),he=I;continue}I=(he-55296<<10|I-56320)+65536}else he&&(L-=3)>-1&&ve.push(239,191,189);if(he=null,I<128){if((L-=1)<0)break;ve.push(I)}else if(I<2048){if((L-=2)<0)break;ve.push(I>>6|192,I&63|128)}else if(I<65536){if((L-=3)<0)break;ve.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((L-=4)<0)break;ve.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return ve}function We(se){for(var L=[],I=0;I<se.length;++I)L.push(se.charCodeAt(I)&255);return L}function Ne(se,L){for(var I,Q,he,ve=[],me=0;me<se.length&&!((L-=2)<0);++me)I=se.charCodeAt(me),Q=I>>8,he=I%256,ve.push(he),ve.push(Q);return ve}function ht(se){return t.toByteArray(de(se))}function jt(se,L,I,Q){for(var he=0;he<Q&&!(he+I>=L.length||he>=se.length);++he)L[he+I]=se[he];return he}function Ct(se,L){return se instanceof L||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===L.name}function q(se){return se!==se}var Ye=function(){for(var se="0123456789abcdef",L=new Array(256),I=0;I<16;++I)for(var Q=I*16,he=0;he<16;++he)L[Q+he]=se[I]+se[he];return L}()}(qb)),qb}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var yj;function kTe(){return yj||(yj=1,function(e,t){var n=_Te(),r=n.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s);function s(a,o,c){return r(a,o,c)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var h=r(a);return o!==void 0?typeof c=="string"?h.fill(o,c):h.fill(o):h.fill(0),h},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(qp,qp.exports)),qp.exports}var bj;function STe(){if(bj)return Gb;bj=1;var e=kTe().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var k;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(k)return;x=(""+x).toLowerCase(),k=!0}}function r(x){var k=n(x);if(typeof k!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return k||x}Gb.StringDecoder=i;function i(x){this.encoding=r(x);var k;switch(this.encoding){case"utf16le":this.text=p,this.end=m,k=4;break;case"utf8":this.fillLast=c,k=4;break;case"base64":this.text=g,this.end=v,k=3;break;default:this.write=w,this.end=C;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(k)}i.prototype.write=function(x){if(x.length===0)return"";var k,P;if(this.lastNeed){if(k=this.fillLast(x),k===void 0)return"";P=this.lastNeed,this.lastNeed=0}else P=0;return P<x.length?k?k+this.text(x,P):this.text(x,P):k||""},i.prototype.end=d,i.prototype.text=h,i.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function s(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function a(x,k,P){var j=k.length-1;if(j<P)return 0;var M=s(k[j]);return M>=0?(M>0&&(x.lastNeed=M-1),M):--j<P||M===-2?0:(M=s(k[j]),M>=0?(M>0&&(x.lastNeed=M-2),M):--j<P||M===-2?0:(M=s(k[j]),M>=0?(M>0&&(M===2?M=0:x.lastNeed=M-3),M):0))}function o(x,k,P){if((k[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return x.lastNeed=2,""}}function c(x){var k=this.lastTotal-this.lastNeed,P=o(this,x);if(P!==void 0)return P;if(this.lastNeed<=x.length)return x.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,k,0,x.length),this.lastNeed-=x.length}function h(x,k){var P=a(this,x,k);if(!this.lastNeed)return x.toString("utf8",k);this.lastTotal=P;var j=x.length-(P-this.lastNeed);return x.copy(this.lastChar,0,j),x.toString("utf8",k,j)}function d(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+"":k}function p(x,k){if((x.length-k)%2===0){var P=x.toString("utf16le",k);if(P){var j=P.charCodeAt(P.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],P.slice(0,-1)}return P}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",k,x.length-1)}function m(x){var k=x&&x.length?this.write(x):"";if(this.lastNeed){var P=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,P)}return k}function g(x,k){var P=(x.length-k)%3;return P===0?x.toString("base64",k):(this.lastNeed=3-P,this.lastTotal=3,P===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",k,x.length-P))}function v(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function w(x){return x.toString(this.encoding)}function C(x){return x&&x.length?this.write(x):""}return Gb}(function(e){(function(t){t.parser=function(de,oe){return new r(de,oe)},t.SAXParser=r,t.SAXStream=d,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(de,oe){if(!(this instanceof r))return new r(de,oe);var We=this;s(We),We.q=We.c="",We.bufferCheckPosition=t.MAX_BUFFER_LENGTH,We.opt=oe||{},We.opt.lowercase=We.opt.lowercase||We.opt.lowercasetags,We.looseCase=We.opt.lowercase?"toLowerCase":"toUpperCase",We.tags=[],We.closed=We.closedRoot=We.sawRoot=!1,We.tag=We.error=null,We.strict=!!de,We.noscript=!!(de||We.opt.noscript),We.state=R.BEGIN,We.strictEntities=We.opt.strictEntities,We.ENTITIES=We.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),We.attribList=[],We.opt.xmlns&&(We.ns=Object.create(w)),We.opt.unquotedAttributeValues===void 0&&(We.opt.unquotedAttributeValues=!de),We.trackPosition=We.opt.position!==!1,We.trackPosition&&(We.position=We.line=We.column=0),ue(We,"onready")}Object.create||(Object.create=function(de){function oe(){}oe.prototype=de;var We=new oe;return We}),Object.keys||(Object.keys=function(de){var oe=[];for(var We in de)de.hasOwnProperty(We)&&oe.push(We);return oe});function i(de){for(var oe=Math.max(t.MAX_BUFFER_LENGTH,10),We=0,Ne=0,ht=n.length;Ne<ht;Ne++){var jt=de[n[Ne]].length;if(jt>oe)switch(n[Ne]){case"textNode":ge(de);break;case"cdata":ie(de,"oncdata",de.cdata),de.cdata="";break;case"script":ie(de,"onscript",de.script),de.script="";break;default:ye(de,"Max buffer length exceeded: "+n[Ne])}We=Math.max(We,jt)}var Ct=t.MAX_BUFFER_LENGTH-We;de.bufferCheckPosition=Ct+de.position}function s(de){for(var oe=0,We=n.length;oe<We;oe++)de[n[oe]]=""}function a(de){ge(de),de.cdata!==""&&(ie(de,"oncdata",de.cdata),de.cdata=""),de.script!==""&&(ie(de,"onscript",de.script),de.script="")}r.prototype={end:function(){Ae(this)},write:lt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var o;try{o=a1.Stream}catch{o=function(){}}o||(o=function(){});var c=t.EVENTS.filter(function(de){return de!=="error"&&de!=="end"});function h(de,oe){return new d(de,oe)}function d(de,oe){if(!(this instanceof d))return new d(de,oe);o.apply(this),this._parser=new r(de,oe),this.writable=!0,this.readable=!0;var We=this;this._parser.onend=function(){We.emit("end")},this._parser.onerror=function(Ne){We.emit("error",Ne),We._parser.error=null},this._decoder=null,c.forEach(function(Ne){Object.defineProperty(We,"on"+Ne,{get:function(){return We._parser["on"+Ne]},set:function(ht){if(!ht)return We.removeAllListeners(Ne),We._parser["on"+Ne]=ht,ht;We.on(Ne,ht)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(o.prototype,{constructor:{value:d}}),d.prototype.write=function(de){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(de)){if(!this._decoder){var oe=STe().StringDecoder;this._decoder=new oe("utf8")}de=this._decoder.write(de)}return this._parser.write(de.toString()),this.emit("data",de),!0},d.prototype.end=function(de){return de&&de.length&&this.write(de),this._parser.end(),!0},d.prototype.on=function(de,oe){var We=this;return!We._parser["on"+de]&&c.indexOf(de)!==-1&&(We._parser["on"+de]=function(){var Ne=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Ne.splice(0,0,de),We.emit.apply(We,Ne)}),o.prototype.on.call(We,de,oe)};var p="[CDATA[",m="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",w={xml:g,xmlns:v},C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function j(de){return de===" "||de===`
`||de==="\r"||de==="	"}function M(de){return de==='"'||de==="'"}function S(de){return de===">"||j(de)}function B(de,oe){return de.test(oe)}function D(de,oe){return!B(de,oe)}var R=0;t.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(de){var oe=t.ENTITIES[de],We=typeof oe=="number"?String.fromCharCode(oe):oe;t.ENTITIES[de]=We});for(var ee in t.STATE)t.STATE[t.STATE[ee]]=ee;R=t.STATE;function ue(de,oe,We){de[oe]&&de[oe](We)}function ie(de,oe,We){de.textNode&&ge(de),ue(de,oe,We)}function ge(de){de.textNode=H(de.opt,de.textNode),de.textNode&&ue(de,"ontext",de.textNode),de.textNode=""}function H(de,oe){return de.trim&&(oe=oe.trim()),de.normalize&&(oe=oe.replace(/\s+/g," ")),oe}function ye(de,oe){return ge(de),de.trackPosition&&(oe+=`
Line: `+de.line+`
Column: `+de.column+`
Char: `+de.c),oe=new Error(oe),de.error=oe,ue(de,"onerror",oe),de}function Ae(de){return de.sawRoot&&!de.closedRoot&&we(de,"Unclosed root tag"),de.state!==R.BEGIN&&de.state!==R.BEGIN_WHITESPACE&&de.state!==R.TEXT&&ye(de,"Unexpected end"),ge(de),de.c="",de.closed=!0,ue(de,"onend"),r.call(de,de.strict,de.opt),de}function we(de,oe){if(typeof de!="object"||!(de instanceof r))throw new Error("bad call to strictFail");de.strict&&ye(de,oe)}function Be(de){de.strict||(de.tagName=de.tagName[de.looseCase]());var oe=de.tags[de.tags.length-1]||de,We=de.tag={name:de.tagName,attributes:{}};de.opt.xmlns&&(We.ns=oe.ns),de.attribList.length=0,ie(de,"onopentagstart",We)}function xe(de,oe){var We=de.indexOf(":"),Ne=We<0?["",de]:de.split(":"),ht=Ne[0],jt=Ne[1];return oe&&de==="xmlns"&&(ht="xmlns",jt=""),{prefix:ht,local:jt}}function Le(de){if(de.strict||(de.attribName=de.attribName[de.looseCase]()),de.attribList.indexOf(de.attribName)!==-1||de.tag.attributes.hasOwnProperty(de.attribName)){de.attribName=de.attribValue="";return}if(de.opt.xmlns){var oe=xe(de.attribName,!0),We=oe.prefix,Ne=oe.local;if(We==="xmlns")if(Ne==="xml"&&de.attribValue!==g)we(de,"xml: prefix must be bound to "+g+`
Actual: `+de.attribValue);else if(Ne==="xmlns"&&de.attribValue!==v)we(de,"xmlns: prefix must be bound to "+v+`
Actual: `+de.attribValue);else{var ht=de.tag,jt=de.tags[de.tags.length-1]||de;ht.ns===jt.ns&&(ht.ns=Object.create(jt.ns)),ht.ns[Ne]=de.attribValue}de.attribList.push([de.attribName,de.attribValue])}else de.tag.attributes[de.attribName]=de.attribValue,ie(de,"onattribute",{name:de.attribName,value:de.attribValue});de.attribName=de.attribValue=""}function Ce(de,oe){if(de.opt.xmlns){var We=de.tag,Ne=xe(de.tagName);We.prefix=Ne.prefix,We.local=Ne.local,We.uri=We.ns[Ne.prefix]||"",We.prefix&&!We.uri&&(we(de,"Unbound namespace prefix: "+JSON.stringify(de.tagName)),We.uri=Ne.prefix);var ht=de.tags[de.tags.length-1]||de;We.ns&&ht.ns!==We.ns&&Object.keys(We.ns).forEach(function(me){ie(de,"onopennamespace",{prefix:me,uri:We.ns[me]})});for(var jt=0,Ct=de.attribList.length;jt<Ct;jt++){var q=de.attribList[jt],Ye=q[0],se=q[1],L=xe(Ye,!0),I=L.prefix,Q=L.local,he=I===""?"":We.ns[I]||"",ve={name:Ye,value:se,prefix:I,local:Q,uri:he};I&&I!=="xmlns"&&!he&&(we(de,"Unbound namespace prefix: "+JSON.stringify(I)),ve.uri=I),de.tag.attributes[Ye]=ve,ie(de,"onattribute",ve)}de.attribList.length=0}de.tag.isSelfClosing=!!oe,de.sawRoot=!0,de.tags.push(de.tag),ie(de,"onopentag",de.tag),oe||(!de.noscript&&de.tagName.toLowerCase()==="script"?de.state=R.SCRIPT:de.state=R.TEXT,de.tag=null,de.tagName=""),de.attribName=de.attribValue="",de.attribList.length=0}function Re(de){if(!de.tagName){we(de,"Weird empty close tag."),de.textNode+="</>",de.state=R.TEXT;return}if(de.script){if(de.tagName!=="script"){de.script+="</"+de.tagName+">",de.tagName="",de.state=R.SCRIPT;return}ie(de,"onscript",de.script),de.script=""}var oe=de.tags.length,We=de.tagName;de.strict||(We=We[de.looseCase]());for(var Ne=We;oe--;){var ht=de.tags[oe];if(ht.name!==Ne)we(de,"Unexpected close tag");else break}if(oe<0){we(de,"Unmatched closing tag: "+de.tagName),de.textNode+="</"+de.tagName+">",de.state=R.TEXT;return}de.tagName=We;for(var jt=de.tags.length;jt-- >oe;){var Ct=de.tag=de.tags.pop();de.tagName=de.tag.name,ie(de,"onclosetag",de.tagName);var q={};for(var Ye in Ct.ns)q[Ye]=Ct.ns[Ye];var se=de.tags[de.tags.length-1]||de;de.opt.xmlns&&Ct.ns!==se.ns&&Object.keys(Ct.ns).forEach(function(L){var I=Ct.ns[L];ie(de,"onclosenamespace",{prefix:L,uri:I})})}oe===0&&(de.closedRoot=!0),de.tagName=de.attribValue=de.attribName="",de.attribList.length=0,de.state=R.TEXT}function it(de){var oe=de.entity,We=oe.toLowerCase(),Ne,ht="";return de.ENTITIES[oe]?de.ENTITIES[oe]:de.ENTITIES[We]?de.ENTITIES[We]:(oe=We,oe.charAt(0)==="#"&&(oe.charAt(1)==="x"?(oe=oe.slice(2),Ne=parseInt(oe,16),ht=Ne.toString(16)):(oe=oe.slice(1),Ne=parseInt(oe,10),ht=Ne.toString(10))),oe=oe.replace(/^0+/,""),isNaN(Ne)||ht.toLowerCase()!==oe||Ne<0||Ne>1114111?(we(de,"Invalid character entity"),"&"+de.entity+";"):String.fromCodePoint(Ne))}function nt(de,oe){oe==="<"?(de.state=R.OPEN_WAKA,de.startTagPosition=de.position):j(oe)||(we(de,"Non-whitespace before first tag."),de.textNode=oe,de.state=R.TEXT)}function Ue(de,oe){var We="";return oe<de.length&&(We=de.charAt(oe)),We}function lt(de){var oe=this;if(this.error)throw this.error;if(oe.closed)return ye(oe,"Cannot write after close. Assign an onready handler.");if(de===null)return Ae(oe);typeof de=="object"&&(de=de.toString());for(var We=0,Ne="";Ne=Ue(de,We++),oe.c=Ne,!!Ne;)switch(oe.trackPosition&&(oe.position++,Ne===`
`?(oe.line++,oe.column=0):oe.column++),oe.state){case R.BEGIN:if(oe.state=R.BEGIN_WHITESPACE,Ne==="\uFEFF")continue;nt(oe,Ne);continue;case R.BEGIN_WHITESPACE:nt(oe,Ne);continue;case R.TEXT:if(oe.sawRoot&&!oe.closedRoot){for(var jt=We-1;Ne&&Ne!=="<"&&Ne!=="&";)Ne=Ue(de,We++),Ne&&oe.trackPosition&&(oe.position++,Ne===`
`?(oe.line++,oe.column=0):oe.column++);oe.textNode+=de.substring(jt,We-1)}Ne==="<"&&!(oe.sawRoot&&oe.closedRoot&&!oe.strict)?(oe.state=R.OPEN_WAKA,oe.startTagPosition=oe.position):(!j(Ne)&&(!oe.sawRoot||oe.closedRoot)&&we(oe,"Text data outside of root node."),Ne==="&"?oe.state=R.TEXT_ENTITY:oe.textNode+=Ne);continue;case R.SCRIPT:Ne==="<"?oe.state=R.SCRIPT_ENDING:oe.script+=Ne;continue;case R.SCRIPT_ENDING:Ne==="/"?oe.state=R.CLOSE_TAG:(oe.script+="<"+Ne,oe.state=R.SCRIPT);continue;case R.OPEN_WAKA:if(Ne==="!")oe.state=R.SGML_DECL,oe.sgmlDecl="";else if(!j(Ne))if(B(C,Ne))oe.state=R.OPEN_TAG,oe.tagName=Ne;else if(Ne==="/")oe.state=R.CLOSE_TAG,oe.tagName="";else if(Ne==="?")oe.state=R.PROC_INST,oe.procInstName=oe.procInstBody="";else{if(we(oe,"Unencoded <"),oe.startTagPosition+1<oe.position){var ht=oe.position-oe.startTagPosition;Ne=new Array(ht).join(" ")+Ne}oe.textNode+="<"+Ne,oe.state=R.TEXT}continue;case R.SGML_DECL:if(oe.sgmlDecl+Ne==="--"){oe.state=R.COMMENT,oe.comment="",oe.sgmlDecl="";continue}oe.doctype&&oe.doctype!==!0&&oe.sgmlDecl?(oe.state=R.DOCTYPE_DTD,oe.doctype+="<!"+oe.sgmlDecl+Ne,oe.sgmlDecl=""):(oe.sgmlDecl+Ne).toUpperCase()===p?(ie(oe,"onopencdata"),oe.state=R.CDATA,oe.sgmlDecl="",oe.cdata=""):(oe.sgmlDecl+Ne).toUpperCase()===m?(oe.state=R.DOCTYPE,(oe.doctype||oe.sawRoot)&&we(oe,"Inappropriately located doctype declaration"),oe.doctype="",oe.sgmlDecl=""):Ne===">"?(ie(oe,"onsgmldeclaration",oe.sgmlDecl),oe.sgmlDecl="",oe.state=R.TEXT):(M(Ne)&&(oe.state=R.SGML_DECL_QUOTED),oe.sgmlDecl+=Ne);continue;case R.SGML_DECL_QUOTED:Ne===oe.q&&(oe.state=R.SGML_DECL,oe.q=""),oe.sgmlDecl+=Ne;continue;case R.DOCTYPE:Ne===">"?(oe.state=R.TEXT,ie(oe,"ondoctype",oe.doctype),oe.doctype=!0):(oe.doctype+=Ne,Ne==="["?oe.state=R.DOCTYPE_DTD:M(Ne)&&(oe.state=R.DOCTYPE_QUOTED,oe.q=Ne));continue;case R.DOCTYPE_QUOTED:oe.doctype+=Ne,Ne===oe.q&&(oe.q="",oe.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:Ne==="]"?(oe.doctype+=Ne,oe.state=R.DOCTYPE):Ne==="<"?(oe.state=R.OPEN_WAKA,oe.startTagPosition=oe.position):M(Ne)?(oe.doctype+=Ne,oe.state=R.DOCTYPE_DTD_QUOTED,oe.q=Ne):oe.doctype+=Ne;continue;case R.DOCTYPE_DTD_QUOTED:oe.doctype+=Ne,Ne===oe.q&&(oe.state=R.DOCTYPE_DTD,oe.q="");continue;case R.COMMENT:Ne==="-"?oe.state=R.COMMENT_ENDING:oe.comment+=Ne;continue;case R.COMMENT_ENDING:Ne==="-"?(oe.state=R.COMMENT_ENDED,oe.comment=H(oe.opt,oe.comment),oe.comment&&ie(oe,"oncomment",oe.comment),oe.comment=""):(oe.comment+="-"+Ne,oe.state=R.COMMENT);continue;case R.COMMENT_ENDED:Ne!==">"?(we(oe,"Malformed comment"),oe.comment+="--"+Ne,oe.state=R.COMMENT):oe.doctype&&oe.doctype!==!0?oe.state=R.DOCTYPE_DTD:oe.state=R.TEXT;continue;case R.CDATA:for(var jt=We-1;Ne&&Ne!=="]";)Ne=Ue(de,We++),Ne&&oe.trackPosition&&(oe.position++,Ne===`
`?(oe.line++,oe.column=0):oe.column++);oe.cdata+=de.substring(jt,We-1),Ne==="]"&&(oe.state=R.CDATA_ENDING);continue;case R.CDATA_ENDING:Ne==="]"?oe.state=R.CDATA_ENDING_2:(oe.cdata+="]"+Ne,oe.state=R.CDATA);continue;case R.CDATA_ENDING_2:Ne===">"?(oe.cdata&&ie(oe,"oncdata",oe.cdata),ie(oe,"onclosecdata"),oe.cdata="",oe.state=R.TEXT):Ne==="]"?oe.cdata+="]":(oe.cdata+="]]"+Ne,oe.state=R.CDATA);continue;case R.PROC_INST:Ne==="?"?oe.state=R.PROC_INST_ENDING:j(Ne)?oe.state=R.PROC_INST_BODY:oe.procInstName+=Ne;continue;case R.PROC_INST_BODY:if(!oe.procInstBody&&j(Ne))continue;Ne==="?"?oe.state=R.PROC_INST_ENDING:oe.procInstBody+=Ne;continue;case R.PROC_INST_ENDING:Ne===">"?(ie(oe,"onprocessinginstruction",{name:oe.procInstName,body:oe.procInstBody}),oe.procInstName=oe.procInstBody="",oe.state=R.TEXT):(oe.procInstBody+="?"+Ne,oe.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:B(x,Ne)?oe.tagName+=Ne:(Be(oe),Ne===">"?Ce(oe):Ne==="/"?oe.state=R.OPEN_TAG_SLASH:(j(Ne)||we(oe,"Invalid character in tag name"),oe.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:Ne===">"?(Ce(oe,!0),Re(oe)):(we(oe,"Forward-slash in opening tag not followed by >"),oe.state=R.ATTRIB);continue;case R.ATTRIB:if(j(Ne))continue;Ne===">"?Ce(oe):Ne==="/"?oe.state=R.OPEN_TAG_SLASH:B(C,Ne)?(oe.attribName=Ne,oe.attribValue="",oe.state=R.ATTRIB_NAME):we(oe,"Invalid attribute name");continue;case R.ATTRIB_NAME:Ne==="="?oe.state=R.ATTRIB_VALUE:Ne===">"?(we(oe,"Attribute without value"),oe.attribValue=oe.attribName,Le(oe),Ce(oe)):j(Ne)?oe.state=R.ATTRIB_NAME_SAW_WHITE:B(x,Ne)?oe.attribName+=Ne:we(oe,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if(Ne==="=")oe.state=R.ATTRIB_VALUE;else{if(j(Ne))continue;we(oe,"Attribute without value"),oe.tag.attributes[oe.attribName]="",oe.attribValue="",ie(oe,"onattribute",{name:oe.attribName,value:""}),oe.attribName="",Ne===">"?Ce(oe):B(C,Ne)?(oe.attribName=Ne,oe.state=R.ATTRIB_NAME):(we(oe,"Invalid attribute name"),oe.state=R.ATTRIB)}continue;case R.ATTRIB_VALUE:if(j(Ne))continue;M(Ne)?(oe.q=Ne,oe.state=R.ATTRIB_VALUE_QUOTED):(oe.opt.unquotedAttributeValues||ye(oe,"Unquoted attribute value"),oe.state=R.ATTRIB_VALUE_UNQUOTED,oe.attribValue=Ne);continue;case R.ATTRIB_VALUE_QUOTED:if(Ne!==oe.q){Ne==="&"?oe.state=R.ATTRIB_VALUE_ENTITY_Q:oe.attribValue+=Ne;continue}Le(oe),oe.q="",oe.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:j(Ne)?oe.state=R.ATTRIB:Ne===">"?Ce(oe):Ne==="/"?oe.state=R.OPEN_TAG_SLASH:B(C,Ne)?(we(oe,"No whitespace between attributes"),oe.attribName=Ne,oe.attribValue="",oe.state=R.ATTRIB_NAME):we(oe,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(!S(Ne)){Ne==="&"?oe.state=R.ATTRIB_VALUE_ENTITY_U:oe.attribValue+=Ne;continue}Le(oe),Ne===">"?Ce(oe):oe.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(oe.tagName)Ne===">"?Re(oe):B(x,Ne)?oe.tagName+=Ne:oe.script?(oe.script+="</"+oe.tagName,oe.tagName="",oe.state=R.SCRIPT):(j(Ne)||we(oe,"Invalid tagname in closing tag"),oe.state=R.CLOSE_TAG_SAW_WHITE);else{if(j(Ne))continue;D(C,Ne)?oe.script?(oe.script+="</"+Ne,oe.state=R.SCRIPT):we(oe,"Invalid tagname in closing tag."):oe.tagName=Ne}continue;case R.CLOSE_TAG_SAW_WHITE:if(j(Ne))continue;Ne===">"?Re(oe):we(oe,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:var Ct,q;switch(oe.state){case R.TEXT_ENTITY:Ct=R.TEXT,q="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:Ct=R.ATTRIB_VALUE_QUOTED,q="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:Ct=R.ATTRIB_VALUE_UNQUOTED,q="attribValue";break}if(Ne===";"){var Ye=it(oe);oe.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(Ye)?(oe.entity="",oe.state=Ct,oe.write(Ye)):(oe[q]+=Ye,oe.entity="",oe.state=Ct)}else B(oe.entity.length?P:k,Ne)?oe.entity+=Ne:(we(oe,"Invalid character in entity name"),oe[q]+="&"+oe.entity+Ne,oe.entity="",oe.state=Ct);continue;default:throw new Error(oe,"Unknown state: "+oe.state)}return oe.position>=oe.bufferCheckPosition&&i(oe),oe}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var de=String.fromCharCode,oe=Math.floor,We=function(){var Ne=16384,ht=[],jt,Ct,q=-1,Ye=arguments.length;if(!Ye)return"";for(var se="";++q<Ye;){var L=Number(arguments[q]);if(!isFinite(L)||L<0||L>1114111||oe(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?ht.push(L):(L-=65536,jt=(L>>10)+55296,Ct=L%1024+56320,ht.push(jt,Ct)),(q+1===Ye||ht.length>Ne)&&(se+=de.apply(null,ht),ht.length=0)}return se};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:We,configurable:!0,writable:!0}):String.fromCodePoint=We}()})(e)})(WL);const CTe=No(WL);class sk extends Error{constructor(t,n,r,i,s){super(t),this.name="SvgoParserError",this.message=`${s||"<input>"}:${n}:${r}: ${t}`,this.reason=t,this.line=n,this.column=r,this.source=i,Error.captureStackTrace&&Error.captureStackTrace(this,sk)}toString(){const t=this.source.split(/\r?\n/),n=Math.max(this.line-3,0),r=Math.min(this.line+2,t.length),i=String(r).length,s=Math.max(this.column-54,0),a=Math.max(this.column+20,80),o=t.slice(n,r).map((c,h)=>{const d=c.slice(s,a);let p="",m="";s!==0&&(p=s>c.length-1?" ":""),a<c.length-1&&(m="");const g=n+1+h,v=` ${g.toString().padStart(i)} | `;if(g===this.line){const w=v.replace(/[^|]/g," "),C=(p+c.slice(s,this.column-1)).replace(/[^\t]/g," "),x=w+C;return`>${v}${p}${d}${m}
 ${x}^`}return` ${v}${p}${d}${m}`}).join(`
`);return`${this.name}: ${this.message}

${o}
`}}const Yb=/<!ENTITY\s+(\S+)\s+(?:'([^']+)'|"([^"]+)")\s*>/g,vj={strict:!0,trim:!1,normalize:!1,lowercase:!0,xmlns:!0,position:!0,unparsedEntities:!0},ETe=(e,t)=>{const n=CTe.parser(vj.strict,vj),r={type:"root",children:[]};let i=r;const s=[r],a=o=>{i.children.push(o)};return n.ondoctype=o=>{a({type:"doctype",name:"svg",data:{doctype:o}});const h=o.indexOf("[");if(h>=0){Yb.lastIndex=h;let d=Yb.exec(e);for(;d!=null;)n.ENTITIES[d[1]]=d[2]||d[3],d=Yb.exec(e)}},n.onprocessinginstruction=o=>{const c={type:"instruction",name:o.name,value:o.body};a(c)},n.oncomment=o=>{const c={type:"comment",value:o.trim()};a(c)},n.oncdata=o=>{a({type:"cdata",value:o})},n.onopentag=o=>{const c={type:"element",name:o.name,attributes:{},children:[]};for(const[h,d]of Object.entries(o.attributes))c.attributes[h]=d.value;a(c),i=c,s.push(c)},n.ontext=o=>{if(i.type==="element")if(kR.has(i.name))a({type:"text",value:o});else{const c=o.trim();c!==""&&a({type:"text",value:c})}},n.onclosetag=()=>{s.pop(),i=s[s.length-1]},n.onerror=o=>{const c=o.message.split(`
`)[0],h=new sk(c,n.line+1,n.column,e,t);if(o.message.indexOf("Unexpected end")===-1)throw h},n.write(e).close(),r},TTe=e=>jTe[e],Vl={doctypeStart:"<!DOCTYPE",doctypeEnd:">",procInstStart:"<?",procInstEnd:"?>",tagOpenStart:"<",tagOpenEnd:">",tagCloseStart:"</",tagCloseEnd:">",tagShortStart:"<",tagShortEnd:"/>",attrStart:'="',attrEnd:'"',commentStart:"<!--",commentEnd:"-->",cdataStart:"<![CDATA[",cdataEnd:"]]>",textStart:"",textEnd:"",indent:4,regEntities:/[&'"<>]/g,regValEntities:/[&"<>]/g,encodeEntity:TTe,pretty:!1,useShortTags:!0,eol:"lf",finalNewline:!1},jTe={"&":"&amp;","'":"&apos;",'"':"&quot;",">":"&gt;","<":"&lt;"},ATe=(e,t={})=>{const n={...Vl,...t},r=n.indent;let i="    ";typeof r=="number"&&Number.isNaN(r)===!1?i=r<0?"	":" ".repeat(r):typeof r=="string"&&(i=r);const s={indent:i,textContext:null,indentLevel:0},a=n.eol==="crlf"?`\r
`:`
`;n.pretty&&(n.doctypeEnd+=a,n.procInstEnd+=a,n.commentEnd+=a,n.cdataEnd+=a,n.tagShortEnd+=a,n.tagOpenEnd+=a,n.tagCloseEnd+=a,n.textEnd+=a);let o=VL(e,n,s);return n.finalNewline&&o.length>0&&!o.endsWith(`
`)&&(o+=a),o},VL=(e,t,n)=>{let r="";n.indentLevel++;for(const i of e.children)switch(i.type){case"element":r+=MTe(i,t,n);break;case"text":r+=LTe(i,t,n);break;case"doctype":r+=PTe(i,t);break;case"instruction":r+=NTe(i,t);break;case"comment":r+=OTe(i,t);break;case"cdata":r+=RTe(i,t,n)}return n.indentLevel--,r},Cu=(e,t)=>{let n="";return e.pretty&&t.textContext==null&&(n=t.indent.repeat(t.indentLevel-1)),n},PTe=(e,t)=>t.doctypeStart+e.data.doctype+t.doctypeEnd,NTe=(e,t)=>t.procInstStart+e.name+" "+e.value+t.procInstEnd,OTe=(e,t)=>t.commentStart+e.value+t.commentEnd,RTe=(e,t,n)=>Cu(t,n)+t.cdataStart+e.value+t.cdataEnd,MTe=(e,t,n)=>{if(e.children.length===0)return t.useShortTags?Cu(t,n)+t.tagShortStart+e.name+Xb(e,t)+t.tagShortEnd:Cu(t,n)+t.tagShortStart+e.name+Xb(e,t)+t.tagOpenEnd+t.tagCloseStart+e.name+t.tagCloseEnd;let r=t.tagOpenStart,i=t.tagOpenEnd,s=t.tagCloseStart,a=t.tagCloseEnd,o=Cu(t,n),c=Cu(t,n);n.textContext?(r=Vl.tagOpenStart,i=Vl.tagOpenEnd,s=Vl.tagCloseStart,a=Vl.tagCloseEnd,o=""):kR.has(e.name)&&(i=Vl.tagOpenEnd,s=Vl.tagCloseStart,c="",n.textContext=e);const h=VL(e,t,n);return n.textContext===e&&(n.textContext=null),o+r+e.name+Xb(e,t)+i+h+c+s+e.name+a},Xb=(e,t)=>{let n="";for(const[r,i]of Object.entries(e.attributes))if(n+=" "+r,i!==void 0){const s=i.toString().replace(t.regValEntities,t.encodeEntity);n+=t.attrStart+s+t.attrEnd}return n},LTe=(e,t,n)=>Cu(t,n)+t.textStart+e.value.replace(t.regEntities,t.encodeEntity)+(n.textContext?"":t.textEnd),o1=new Map;for(const e of vTe)o1.set(e.name,e);function xj(e){return e==="removeScriptElement"?(console.warn("Warning: removeScriptElement has been renamed to removeScripts, please update your SVGO config"),o1.get("removeScripts")):o1.get(e)}const ITe=e=>{if(typeof e=="string"){const t=xj(e);if(t==null)throw Error(`Unknown builtin plugin "${e}" specified.`);return{name:e,params:{},fn:t.fn}}if(typeof e=="object"&&e!=null){if(e.name==null)throw Error("Plugin name must be specified");let t=e.fn;if(t==null){const n=xj(e.name);if(n==null)throw Error(`Unknown builtin plugin "${e.name}" specified.`);t=n.fn}return{name:e.name,params:e.params,fn:t}}return null},$Te=(e,t)=>{if(t==null&&(t={}),typeof t!="object")throw Error("Config should be an object");const n=t.multipass?10:1;let r=Number.POSITIVE_INFINITY,i="";const s={};t.path!=null&&(s.path=t.path);for(let a=0;a<n;a+=1){s.multipassCount=a;const o=ETe(e,t.path),c=t.plugins||["preset-default"];if(!Array.isArray(c))throw Error("malformed config, `plugins` property must be an array.\nSee more info here: https://github.com/svg/svgo#configuration");const h=c.filter(p=>p!=null).map(ITe);h.length<c.length&&console.warn("Warning: plugins list includes null or undefined elements, these will be ignored.");const d={};if(t.floatPrecision!=null&&(d.floatPrecision=t.floatPrecision),WO(o,s,h,null,d),i=ATe(o,t.js2svg),i.length<r)e=i,r=i.length;else break}return t.datauri&&(i=vSe(i,t.datauri)),{data:i}},DTe=(e,t)=>{if(t==null&&(t={}),typeof t!="object")throw Error("Config should be an object");return $Te(e,{...t,js2svg:{eol:HO.EOL===`\r
`?"crlf":"lf",...t.js2svg}})},zTe={plugins:["cleanupAttrs","removeDoctype","removeXMLProcInst","removeComments","removeMetadata","removeEditorsNSData","removeEmptyAttrs","removeEmptyContainers","removeUnusedNS",{name:"cleanupNumericValues",params:{floatPrecision:3,leadingZero:!0,defaultPx:!0,convertToPx:!1}},{name:"convertTransform",params:{convertToShorts:!0,floatPrecision:3,transformPrecision:5,matrixToTransform:!0,shortTranslate:!0,shortScale:!0,shortRotate:!0,removeUseless:!0,collapseIntoOne:!1,leadingZero:!0,negativeExtraSpace:!1}},{name:"convertShapeToPath",params:{convertArcs:!1}},{name:"convertPathData",params:{applyTransforms:!0,applyTransformsStroked:!0,makeArcs:!1,straightCurves:!0,lineShorthands:!0,curveSmoothShorthands:!0,floatPrecision:3,transformPrecision:5,removeUseless:!0,collapseRepeated:!0,utilizeAbsolute:!0,leadingZero:!0,negativeExtraSpace:!0,noSpaceAfterFlags:!1,forceAbsolutePath:!1}}],multipass:!1,floatPrecision:3};function Kb(e,t={}){if(!e||typeof e!="string")return console.warn("[SVG-NORMALIZE] Invalid input:",typeof e),e||"";if(!e.includes("<svg"))return console.warn("[SVG-NORMALIZE] Input does not appear to be SVG"),e;try{const n=e.length,r={...zTe,...t},i=DTe(e,r);if(!i||!i.data)return console.error("[SVG-NORMALIZE] SVGO returned no output"),e;const s=i.data.length,a=n-s,o=(a/n*100).toFixed(1);return console.log(`[SVG-NORMALIZE] Optimized: ${n}  ${s} bytes (saved ${a} bytes, ${o}%)`),i.data.includes("<svg")?i.data:(console.error("[SVG-NORMALIZE] Output is not valid SVG, returning original"),e)}catch(n){return console.error("[SVG-NORMALIZE] Optimization failed:",n.message),e}}const Ko={SIMPLE_MAX:500,MODERATE_MAX:1500,COMPLEX_MAX:1e4};function FTe(e){if(!e)return 0;const t=e.match(/[MmLlHhVvCcSsQqTtAaZz]/g);return t?t.length:0}function BTe(e){if(!e)return[];const t=[],n=e.match(/[MmLlHhVvCcSsQqTtAaZz][^MmLlHhVvCcSsQqTtAaZz]*/g)||[];for(const r of n){const i=r[0],s=r.slice(1).trim().split(/[\s,]+/).filter(Boolean).map(Number);t.push({command:i,args:s,raw:r})}return t}function UTe(e){if(!e)return null;const t=BTe(e);if(t.length===0)return null;let n=1/0,r=1/0,i=-1/0,s=-1/0,a=0,o=0;for(const c of t){const{command:h,args:d}=c,p=h===h.toLowerCase();switch(h.toUpperCase()){case"M":case"L":case"T":d.length>=2&&(a=p?a+d[0]:d[0],o=p?o+d[1]:d[1]);break;case"H":d.length>=1&&(a=p?a+d[0]:d[0]);break;case"V":d.length>=1&&(o=p?o+d[0]:d[0]);break;case"C":if(d.length>=6){for(let g=0;g<d.length;g+=2){const v=p?a+d[g]:d[g],w=p?o+d[g+1]:d[g+1];n=Math.min(n,v),r=Math.min(r,w),i=Math.max(i,v),s=Math.max(s,w)}a=p?a+d[d.length-2]:d[d.length-2],o=p?o+d[d.length-1]:d[d.length-1]}break;case"S":case"Q":d.length>=4&&(a=p?a+d[d.length-2]:d[d.length-2],o=p?o+d[d.length-1]:d[d.length-1]);break;case"A":d.length>=7&&(a=p?a+d[5]:d[5],o=p?o+d[6]:d[6]);break}n=Math.min(n,a),r=Math.min(r,o),i=Math.max(i,a),s=Math.max(s,o)}return!isFinite(n)||!isFinite(r)?null:{minX:n,minY:r,maxX:i,maxY:s,width:i-n,height:s-r}}function HTe(e){const t=Array.from(e.querySelectorAll("path, rect, circle, ellipse, polygon"));if(t.length<2)return{hasHiddenShapes:!1,hiddenCount:0,details:[]};const n=t.map((i,s)=>{const a=i.getAttribute("d");let c=a?UTe(a):null;if(!c){const h=i.tagName.toLowerCase();if(h==="rect"){const d=parseFloat(i.getAttribute("x"))||0,p=parseFloat(i.getAttribute("y"))||0,m=parseFloat(i.getAttribute("width"))||0,g=parseFloat(i.getAttribute("height"))||0;c={minX:d,minY:p,maxX:d+m,maxY:p+g,width:m,height:g}}else if(h==="circle"){const d=parseFloat(i.getAttribute("cx"))||0,p=parseFloat(i.getAttribute("cy"))||0,m=parseFloat(i.getAttribute("r"))||0;c={minX:d-m,minY:p-m,maxX:d+m,maxY:p+m,width:m*2,height:m*2}}else if(h==="ellipse"){const d=parseFloat(i.getAttribute("cx"))||0,p=parseFloat(i.getAttribute("cy"))||0,m=parseFloat(i.getAttribute("rx"))||0,g=parseFloat(i.getAttribute("ry"))||0;c={minX:d-m,minY:p-g,maxX:d+m,maxY:p+g,width:m*2,height:g*2}}}return{element:i,index:s,bounds:c,regionId:i.getAttribute("data-region-id"),fill:i.getAttribute("fill")||"none",fillOpacity:parseFloat(i.getAttribute("fill-opacity"))||1}}).filter(i=>i.bounds),r=[];for(let i=0;i<n.length;i++){const s=n[i];if(!(s.fill==="none"||s.fillOpacity===0))for(let a=i+1;a<n.length;a++){const o=n[a];if(!(o.fill==="none"||o.fillOpacity===0)&&o.bounds.minX<=s.bounds.minX&&o.bounds.minY<=s.bounds.minY&&o.bounds.maxX>=s.bounds.maxX&&o.bounds.maxY>=s.bounds.maxY){r.push({hiddenIndex:i,hiddenRegion:s.regionId,coveringIndex:a,coveringRegion:o.regionId});break}}}return{hasHiddenShapes:r.length>0,hiddenCount:r.length,details:r}}function ak(e){let t;if(typeof e=="string"){const g=new DOMParser().parseFromString(e,"image/svg+xml");if(g.querySelector("parsererror"))return{valid:!1,error:"SVG parse error",pathCount:0,totalSegments:0,estimatedComplexity:"unknown",warnings:["Failed to parse SVG"]};t=g.documentElement}else if(e instanceof Element)t=e;else return{valid:!1,error:"Invalid input",pathCount:0,totalSegments:0,estimatedComplexity:"unknown",warnings:["Input must be SVG string or Element"]};const n=t.querySelectorAll("path"),r=t.querySelectorAll("rect, circle, ellipse, polygon, polyline, line"),i=t.querySelectorAll("g");let s=0,a=0;const o=[];n.forEach((m,g)=>{const v=m.getAttribute("d"),w=FTe(v);s+=w,a=Math.max(a,w),o.push({index:g,segments:w,regionId:m.getAttribute("data-region-id")})});const c=r.length*4;s+=c;let h;s<=Ko.SIMPLE_MAX?h="simple":s<=Ko.MODERATE_MAX?h="moderate":s<=Ko.COMPLEX_MAX?h="complex":h="very_complex";const d=HTe(t),p=[];return s>Ko.MODERATE_MAX&&p.push(`High segment count (${s}) may slow boolean operations`),s>Ko.COMPLEX_MAX&&p.push('Consider using "Flatten Artwork" before boolean operations'),a>500&&p.push(`Complex path detected (${a} segments in single path)`),d.hasHiddenShapes&&p.push(`${d.hiddenCount} potentially hidden shape(s) detected`),i.length>20&&p.push(`Deep nesting detected (${i.length} groups)`),{valid:!0,pathCount:n.length,shapeCount:r.length,groupCount:i.length,totalSegments:s,maxSegmentsInPath:a,estimatedComplexity:h,hasHiddenShapes:d.hasHiddenShapes,hiddenShapeCount:d.hiddenCount,hiddenShapeDetails:d.details,warnings:p,thresholds:Ko,complexityColor:WTe(h),complexityLabel:VTe(h)}}function WTe(e){switch(e){case"simple":return"#22c55e";case"moderate":return"#eab308";case"complex":return"#f97316";case"very_complex":return"#ef4444";default:return"#6b7280"}}function VTe(e){switch(e){case"simple":return"Simple";case"moderate":return"Moderate";case"complex":return"Complex";case"very_complex":return"Very Complex";default:return"Unknown"}}function GL(e){return!e||!e.valid?{blocked:!0,reason:"Invalid SVG analysis"}:e.totalSegments>Ko.COMPLEX_MAX?{blocked:!0,reason:`Too complex for boolean operations (${e.totalSegments} segments). Use "Flatten Artwork" first.`}:{blocked:!1,reason:null}}function qL(e){return!e||!e.valid?{warn:!1,message:null}:e.totalSegments>Ko.MODERATE_MAX?{warn:!0,message:`This operation may take a moment (${e.totalSegments} segments)`}:{warn:!1,message:null}}function GTe({svgContent:e,showDetails:t=!1,compact:n=!1}){const[r,i]=pe.useState(t),[s,a]=pe.useState(null);if(pe.useEffect(()=>{if(!e){a(null);return}const C=ak(e);a(C),C.valid&&console.log("[ComplexityBadge] SVG Analysis:",{paths:C.pathCount,segments:C.totalSegments,complexity:C.estimatedComplexity,warnings:C.warnings})},[e]),!e||!s||!s.valid)return null;const{pathCount:o,shapeCount:c,totalSegments:h,estimatedComplexity:d,complexityColor:p,complexityLabel:m,hasHiddenShapes:g,hiddenShapeCount:v,warnings:w}=s;return n?u.jsx("span",{className:"complexity-badge-compact",title:`${h} segments, ${o} paths`,style:{backgroundColor:p},children:m}):u.jsxs("div",{className:"complexity-badge",children:[u.jsxs("button",{className:"complexity-badge-toggle",onClick:()=>i(!r),style:{borderColor:p},children:[u.jsx("span",{className:"complexity-dot",style:{backgroundColor:p}}),u.jsx("span",{className:"complexity-label",children:m}),u.jsxs("span",{className:"complexity-segments",children:[h," seg"]}),u.jsx("span",{className:"complexity-chevron",children:r?"":""})]}),r&&u.jsxs("div",{className:"complexity-details",children:[u.jsxs("div",{className:"complexity-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-label",children:"Paths"}),u.jsx("span",{className:"stat-value",children:o})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-label",children:"Shapes"}),u.jsx("span",{className:"stat-value",children:c})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-label",children:"Segments"}),u.jsx("span",{className:"stat-value",children:h})]})]}),g&&u.jsxs("div",{className:"complexity-warning",children:[u.jsx("span",{className:"warning-icon",children:""}),u.jsxs("span",{children:[v," potentially hidden shape(s)"]})]}),w.length>0&&u.jsx("div",{className:"complexity-warnings",children:w.map((C,x)=>u.jsxs("div",{className:"complexity-warning",children:[u.jsx("span",{className:"warning-icon",children:""}),u.jsx("span",{children:C})]},x))}),d==="very_complex"&&u.jsxs("div",{className:"complexity-suggestion",children:[u.jsx("strong",{children:"Tip:"}),' Consider using "Flatten Artwork" to simplify this design before editing.']})]}),u.jsx("style",{jsx:!0,children:`
        .complexity-badge {
          display: inline-block;
          font-size: 0.75rem;
        }

        .complexity-badge-toggle {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.25rem 0.5rem;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 4px;
          cursor: pointer;
          font-size: 0.75rem;
          color: #475569;
          transition: all 0.15s ease;
        }

        .complexity-badge-toggle:hover {
          background: #f1f5f9;
        }

        .complexity-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          flex-shrink: 0;
        }

        .complexity-label {
          font-weight: 600;
        }

        .complexity-segments {
          color: #94a3b8;
        }

        .complexity-chevron {
          font-size: 0.6rem;
          color: #94a3b8;
        }

        .complexity-details {
          margin-top: 0.5rem;
          padding: 0.75rem;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 6px;
        }

        .complexity-stats {
          display: flex;
          gap: 1rem;
          margin-bottom: 0.5rem;
        }

        .stat {
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .stat-label {
          font-size: 0.65rem;
          color: #94a3b8;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .stat-value {
          font-size: 1rem;
          font-weight: 600;
          color: #1e293b;
        }

        .complexity-warnings {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        .complexity-warning {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.375rem 0.5rem;
          background: #fef3c7;
          border-radius: 4px;
          font-size: 0.7rem;
          color: #92400e;
        }

        .warning-icon {
          font-size: 0.8rem;
        }

        .complexity-suggestion {
          margin-top: 0.5rem;
          padding: 0.5rem;
          background: #dbeafe;
          border-radius: 4px;
          font-size: 0.7rem;
          color: #1e40af;
        }

        .complexity-badge-compact {
          display: inline-block;
          padding: 0.125rem 0.375rem;
          font-size: 0.65rem;
          font-weight: 600;
          color: white;
          border-radius: 3px;
          text-transform: uppercase;
          letter-spacing: 0.03em;
        }
      `})]})}var YL={exports:{}};(function(e){(function(){function t(){var n=this;this.versionnumber="1.2.6",this.imageToSVG=function(r,i,s){s=n.checkoptions(s),n.loadImage(r,function(a){i(n.imagedataToSVG(n.getImgdata(a),s))},s)},this.imagedataToSVG=function(r,i){i=n.checkoptions(i);var s=n.imagedataToTracedata(r,i);return n.getsvgstring(s,i)},this.imageToTracedata=function(r,i,s){s=n.checkoptions(s),n.loadImage(r,function(a){i(n.imagedataToTracedata(n.getImgdata(a),s))},s)},this.imagedataToTracedata=function(r,i){i=n.checkoptions(i);var s=n.colorquantization(r,i);if(i.layering===0)for(var a={layers:[],palette:s.palette,width:s.array[0].length-2,height:s.array.length-2},o=0;o<s.palette.length;o++){var c=n.batchtracepaths(n.internodes(n.pathscan(n.layeringstep(s,o),i.pathomit),i),i.ltres,i.qtres);a.layers.push(c)}else{var h=n.layering(s);i.layercontainerid&&n.drawLayers(h,n.specpalette,i.scale,i.layercontainerid);var d=n.batchpathscan(h,i.pathomit),p=n.batchinternodes(d,i),a={layers:n.batchtracelayers(p,i.ltres,i.qtres),palette:s.palette,width:r.width,height:r.height}}return a},this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.checkoptions=function(r){r=r||{},typeof r=="string"&&(r=r.toLowerCase(),n.optionpresets[r]?r=n.optionpresets[r]:r={});for(var i=Object.keys(n.optionpresets.default),s=0;s<i.length;s++)r.hasOwnProperty(i[s])||(r[i[s]]=n.optionpresets.default[i[s]]);return r},this.colorquantization=function(r,i){var s=[],a=0,o,c,h,d=[],p=r.width*r.height,m,g,v,w,C;if(r.data.length<p*4){for(var x=new Uint8ClampedArray(p*4),k=0;k<p;k++)x[k*4]=r.data[k*3],x[k*4+1]=r.data[k*3+1],x[k*4+2]=r.data[k*3+2],x[k*4+3]=255;r.data=x}for(g=0;g<r.height+2;g++)for(s[g]=[],m=0;m<r.width+2;m++)s[g][m]=-1;for(i.pal?C=i.pal:i.colorsampling===0?C=n.generatepalette(i.numberofcolors):i.colorsampling===1?C=n.samplepalette(i.numberofcolors,r):C=n.samplepalette2(i.numberofcolors,r),i.blurradius>0&&(r=n.blur(r,i.blurradius,i.blurdelta)),w=0;w<i.colorquantcycles;w++){if(w>0)for(v=0;v<C.length;v++)d[v].n>0&&(C[v]={r:Math.floor(d[v].r/d[v].n),g:Math.floor(d[v].g/d[v].n),b:Math.floor(d[v].b/d[v].n),a:Math.floor(d[v].a/d[v].n)}),d[v].n/p<i.mincolorratio&&w<i.colorquantcycles-1&&(C[v]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(m=0;m<C.length;m++)d[m]={r:0,g:0,b:0,a:0,n:0};for(g=0;g<r.height;g++)for(m=0;m<r.width;m++){for(a=(g*r.width+m)*4,h=0,c=1024,v=0;v<C.length;v++)o=Math.abs(C[v].r-r.data[a])+Math.abs(C[v].g-r.data[a+1])+Math.abs(C[v].b-r.data[a+2])+Math.abs(C[v].a-r.data[a+3]),o<c&&(c=o,h=v);d[h].r+=r.data[a],d[h].g+=r.data[a+1],d[h].b+=r.data[a+2],d[h].a+=r.data[a+3],d[h].n++,s[g+1][m+1]=h}}return{array:s,palette:C}},this.samplepalette=function(r,i){for(var s,a=[],o=0;o<r;o++)s=Math.floor(Math.random()*i.data.length/4)*4,a.push({r:i.data[s],g:i.data[s+1],b:i.data[s+2],a:i.data[s+3]});return a},this.samplepalette2=function(r,i){for(var s,a=[],o=Math.ceil(Math.sqrt(r)),c=Math.ceil(r/o),h=i.width/(o+1),d=i.height/(c+1),p=0;p<c;p++)for(var m=0;m<o&&a.length!==r;m++)s=Math.floor((p+1)*d*i.width+(m+1)*h)*4,a.push({r:i.data[s],g:i.data[s+1],b:i.data[s+2],a:i.data[s+3]});return a},this.generatepalette=function(r){var i=[],s,a,o;if(r<8)for(var c=Math.floor(255/(r-1)),h=0;h<r;h++)i.push({r:h*c,g:h*c,b:h*c,a:255});else{var d=Math.floor(Math.pow(r,.3333333333333333)),p=Math.floor(255/(d-1)),m=r-d*d*d;for(s=0;s<d;s++)for(a=0;a<d;a++)for(o=0;o<d;o++)i.push({r:s*p,g:a*p,b:o*p,a:255});for(s=0;s<m;s++)i.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return i},this.layering=function(r){var i=[],s=0,a=r.array.length,o=r.array[0].length,c,h,d,p,m,g,v,w,C,x,k;for(k=0;k<r.palette.length;k++)for(i[k]=[],x=0;x<a;x++)for(i[k][x]=[],C=0;C<o;C++)i[k][x][C]=0;for(x=1;x<a-1;x++)for(C=1;C<o-1;C++)s=r.array[x][C],c=r.array[x-1][C-1]===s?1:0,h=r.array[x-1][C]===s?1:0,d=r.array[x-1][C+1]===s?1:0,p=r.array[x][C-1]===s?1:0,m=r.array[x][C+1]===s?1:0,g=r.array[x+1][C-1]===s?1:0,v=r.array[x+1][C]===s?1:0,w=r.array[x+1][C+1]===s?1:0,i[s][x+1][C+1]=1+m*2+w*4+v*8,p||(i[s][x+1][C]=2+v*4+g*8),h||(i[s][x][C+1]=0+d*2+m*4+8),c||(i[s][x][C]=0+h*2+4+p*8);return i},this.layeringstep=function(r,i){var s=[],a=r.array.length,o=r.array[0].length,c,h;for(h=0;h<a;h++)for(s[h]=[],c=0;c<o;c++)s[h][c]=0;for(h=1;h<a;h++)for(c=1;c<o;c++)s[h][c]=(r.array[h-1][c-1]===i?1:0)+(r.array[h-1][c]===i?2:0)+(r.array[h][c-1]===i?8:0)+(r.array[h][c]===i?4:0);return s},this.pointinpoly=function(r,i){for(var s=!1,a=0,o=i.length-1;a<i.length;o=a++)s=i[a].y>r.y!=i[o].y>r.y&&r.x<(i[o].x-i[a].x)*(r.y-i[a].y)/(i[o].y-i[a].y)+i[a].x?!s:s;return s},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.pathscan=function(r,i){for(var s=[],a=0,o=0,c=0,h=0,d=r[0].length,p=r.length,m=0,g=!0,v=!1,w,C=0;C<p;C++)for(var x=0;x<d;x++)if(r[C][x]==4||r[C][x]==11)for(c=x,h=C,s[a]={},s[a].points=[],s[a].boundingbox=[c,h,c,h],s[a].holechildren=[],g=!1,o=0,v=r[C][x]==11,m=1;!g;){if(s[a].points[o]={},s[a].points[o].x=c-1,s[a].points[o].y=h-1,s[a].points[o].t=r[h][c],c-1<s[a].boundingbox[0]&&(s[a].boundingbox[0]=c-1),c-1>s[a].boundingbox[2]&&(s[a].boundingbox[2]=c-1),h-1<s[a].boundingbox[1]&&(s[a].boundingbox[1]=h-1),h-1>s[a].boundingbox[3]&&(s[a].boundingbox[3]=h-1),w=n.pathscan_combined_lookup[r[h][c]][m],r[h][c]=w[0],m=w[1],c+=w[2],h+=w[3],c-1===s[a].points[0].x&&h-1===s[a].points[0].y)if(g=!0,s[a].points.length<i)s.pop();else{if(s[a].isholepath=!!v,v){for(var k=0,P=[-1,-1,d+1,p+1],j=0;j<a;j++)!s[j].isholepath&&n.boundingboxincludes(s[j].boundingbox,s[a].boundingbox)&&n.boundingboxincludes(P,s[j].boundingbox)&&n.pointinpoly(s[a].points[0],s[j].points)&&(k=j,P=s[j].boundingbox);s[k].holechildren.push(a)}a++}o++}return s},this.boundingboxincludes=function(r,i){return r[0]<i[0]&&r[1]<i[1]&&r[2]>i[2]&&r[3]>i[3]},this.batchpathscan=function(r,i){var s=[];for(var a in r)r.hasOwnProperty(a)&&(s[a]=n.pathscan(r[a],i));return s},this.internodes=function(r,i){var s=[],a=0,o=0,c=0,h=0,d=0,p,m;for(p=0;p<r.length;p++)for(s[p]={},s[p].points=[],s[p].boundingbox=r[p].boundingbox,s[p].holechildren=r[p].holechildren,s[p].isholepath=r[p].isholepath,a=r[p].points.length,m=0;m<a;m++)o=(m+1)%a,c=(m+2)%a,h=(m-1+a)%a,d=(m-2+a)%a,i.rightangleenhance&&n.testrightangle(r[p],d,h,m,o,c)&&(s[p].points.length>0&&(s[p].points[s[p].points.length-1].linesegment=n.getdirection(s[p].points[s[p].points.length-1].x,s[p].points[s[p].points.length-1].y,r[p].points[m].x,r[p].points[m].y)),s[p].points.push({x:r[p].points[m].x,y:r[p].points[m].y,linesegment:n.getdirection(r[p].points[m].x,r[p].points[m].y,(r[p].points[m].x+r[p].points[o].x)/2,(r[p].points[m].y+r[p].points[o].y)/2)})),s[p].points.push({x:(r[p].points[m].x+r[p].points[o].x)/2,y:(r[p].points[m].y+r[p].points[o].y)/2,linesegment:n.getdirection((r[p].points[m].x+r[p].points[o].x)/2,(r[p].points[m].y+r[p].points[o].y)/2,(r[p].points[o].x+r[p].points[c].x)/2,(r[p].points[o].y+r[p].points[c].y)/2)});return s},this.testrightangle=function(r,i,s,a,o,c){return r.points[a].x===r.points[i].x&&r.points[a].x===r.points[s].x&&r.points[a].y===r.points[o].y&&r.points[a].y===r.points[c].y||r.points[a].y===r.points[i].y&&r.points[a].y===r.points[s].y&&r.points[a].x===r.points[o].x&&r.points[a].x===r.points[c].x},this.getdirection=function(r,i,s,a){var o=8;return r<s?i<a?o=1:i>a?o=7:o=0:r>s?i<a?o=3:i>a?o=5:o=4:i<a?o=2:i>a?o=6:o=8,o},this.batchinternodes=function(r,i){var s=[];for(var a in r)r.hasOwnProperty(a)&&(s[a]=n.internodes(r[a],i));return s},this.tracepath=function(r,i,s){var a=0,o,c,h,d={};for(d.segments=[],d.boundingbox=r.boundingbox,d.holechildren=r.holechildren,d.isholepath=r.isholepath;a<r.points.length;){for(o=r.points[a].linesegment,c=-1,h=a+1;(r.points[h].linesegment===o||r.points[h].linesegment===c||c===-1)&&h<r.points.length-1;)r.points[h].linesegment!==o&&c===-1&&(c=r.points[h].linesegment),h++;h===r.points.length-1&&(h=0),d.segments=d.segments.concat(n.fitseq(r,i,s,a,h)),h>0?a=h:a=r.points.length}return d},this.fitseq=function(r,i,s,a,o){if(o>r.points.length||o<0)return[];var c=a,h=0,d=!0,p,m,g,v=o-a;v<0&&(v+=r.points.length);for(var w=(r.points[o].x-r.points[a].x)/v,C=(r.points[o].y-r.points[a].y)/v,x=(a+1)%r.points.length,k;x!=o;)k=x-a,k<0&&(k+=r.points.length),p=r.points[a].x+w*k,m=r.points[a].y+C*k,g=(r.points[x].x-p)*(r.points[x].x-p)+(r.points[x].y-m)*(r.points[x].y-m),g>i&&(d=!1),g>h&&(c=x,h=g),x=(x+1)%r.points.length;if(d)return[{type:"L",x1:r.points[a].x,y1:r.points[a].y,x2:r.points[o].x,y2:r.points[o].y}];var P=c;d=!0,h=0;var j=(P-a)/v,M=(1-j)*(1-j),S=2*(1-j)*j,B=j*j,D=(M*r.points[a].x+B*r.points[o].x-r.points[P].x)/-S,R=(M*r.points[a].y+B*r.points[o].y-r.points[P].y)/-S;for(x=a+1;x!=o;)j=(x-a)/v,M=(1-j)*(1-j),S=2*(1-j)*j,B=j*j,p=M*r.points[a].x+S*D+B*r.points[o].x,m=M*r.points[a].y+S*R+B*r.points[o].y,g=(r.points[x].x-p)*(r.points[x].x-p)+(r.points[x].y-m)*(r.points[x].y-m),g>s&&(d=!1),g>h&&(c=x,h=g),x=(x+1)%r.points.length;if(d)return[{type:"Q",x1:r.points[a].x,y1:r.points[a].y,x2:D,y2:R,x3:r.points[o].x,y3:r.points[o].y}];var ee=P;return n.fitseq(r,i,s,a,ee).concat(n.fitseq(r,i,s,ee,o))},this.batchtracepaths=function(r,i,s){var a=[];for(var o in r)r.hasOwnProperty(o)&&a.push(n.tracepath(r[o],i,s));return a},this.batchtracelayers=function(r,i,s){var a=[];for(var o in r)r.hasOwnProperty(o)&&(a[o]=n.batchtracepaths(r[o],i,s));return a},this.roundtodec=function(r,i){return+r.toFixed(i)},this.svgpathstring=function(r,i,s,a){var o=r.layers[i],c=o[s],h="",d;if(a.linefilter&&c.segments.length<3)return h;if(h="<path "+(a.desc?'desc="l '+i+" p "+s+'" ':"")+n.tosvgcolorstr(r.palette[i],a)+'d="',a.roundcoords===-1){for(h+="M "+c.segments[0].x1*a.scale+" "+c.segments[0].y1*a.scale+" ",d=0;d<c.segments.length;d++)h+=c.segments[d].type+" "+c.segments[d].x2*a.scale+" "+c.segments[d].y2*a.scale+" ",c.segments[d].hasOwnProperty("x3")&&(h+=c.segments[d].x3*a.scale+" "+c.segments[d].y3*a.scale+" ");h+="Z "}else{for(h+="M "+n.roundtodec(c.segments[0].x1*a.scale,a.roundcoords)+" "+n.roundtodec(c.segments[0].y1*a.scale,a.roundcoords)+" ",d=0;d<c.segments.length;d++)h+=c.segments[d].type+" "+n.roundtodec(c.segments[d].x2*a.scale,a.roundcoords)+" "+n.roundtodec(c.segments[d].y2*a.scale,a.roundcoords)+" ",c.segments[d].hasOwnProperty("x3")&&(h+=n.roundtodec(c.segments[d].x3*a.scale,a.roundcoords)+" "+n.roundtodec(c.segments[d].y3*a.scale,a.roundcoords)+" ");h+="Z "}for(var p=0;p<c.holechildren.length;p++){var m=o[c.holechildren[p]];if(a.roundcoords===-1)for(m.segments[m.segments.length-1].hasOwnProperty("x3")?h+="M "+m.segments[m.segments.length-1].x3*a.scale+" "+m.segments[m.segments.length-1].y3*a.scale+" ":h+="M "+m.segments[m.segments.length-1].x2*a.scale+" "+m.segments[m.segments.length-1].y2*a.scale+" ",d=m.segments.length-1;d>=0;d--)h+=m.segments[d].type+" ",m.segments[d].hasOwnProperty("x3")&&(h+=m.segments[d].x2*a.scale+" "+m.segments[d].y2*a.scale+" "),h+=m.segments[d].x1*a.scale+" "+m.segments[d].y1*a.scale+" ";else for(m.segments[m.segments.length-1].hasOwnProperty("x3")?h+="M "+n.roundtodec(m.segments[m.segments.length-1].x3*a.scale)+" "+n.roundtodec(m.segments[m.segments.length-1].y3*a.scale)+" ":h+="M "+n.roundtodec(m.segments[m.segments.length-1].x2*a.scale)+" "+n.roundtodec(m.segments[m.segments.length-1].y2*a.scale)+" ",d=m.segments.length-1;d>=0;d--)h+=m.segments[d].type+" ",m.segments[d].hasOwnProperty("x3")&&(h+=n.roundtodec(m.segments[d].x2*a.scale)+" "+n.roundtodec(m.segments[d].y2*a.scale)+" "),h+=n.roundtodec(m.segments[d].x1*a.scale)+" "+n.roundtodec(m.segments[d].y1*a.scale)+" ";h+="Z "}if(h+='" />',a.lcpr||a.qcpr){for(d=0;d<c.segments.length;d++)c.segments[d].hasOwnProperty("x3")&&a.qcpr&&(h+='<circle cx="'+c.segments[d].x2*a.scale+'" cy="'+c.segments[d].y2*a.scale+'" r="'+a.qcpr+'" fill="cyan" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<circle cx="'+c.segments[d].x3*a.scale+'" cy="'+c.segments[d].y3*a.scale+'" r="'+a.qcpr+'" fill="white" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<line x1="'+c.segments[d].x1*a.scale+'" y1="'+c.segments[d].y1*a.scale+'" x2="'+c.segments[d].x2*a.scale+'" y2="'+c.segments[d].y2*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />',h+='<line x1="'+c.segments[d].x2*a.scale+'" y1="'+c.segments[d].y2*a.scale+'" x2="'+c.segments[d].x3*a.scale+'" y2="'+c.segments[d].y3*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />'),!c.segments[d].hasOwnProperty("x3")&&a.lcpr&&(h+='<circle cx="'+c.segments[d].x2*a.scale+'" cy="'+c.segments[d].y2*a.scale+'" r="'+a.lcpr+'" fill="white" stroke-width="'+a.lcpr*.2+'" stroke="black" />');for(var p=0;p<c.holechildren.length;p++){var m=o[c.holechildren[p]];for(d=0;d<m.segments.length;d++)m.segments[d].hasOwnProperty("x3")&&a.qcpr&&(h+='<circle cx="'+m.segments[d].x2*a.scale+'" cy="'+m.segments[d].y2*a.scale+'" r="'+a.qcpr+'" fill="cyan" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<circle cx="'+m.segments[d].x3*a.scale+'" cy="'+m.segments[d].y3*a.scale+'" r="'+a.qcpr+'" fill="white" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<line x1="'+m.segments[d].x1*a.scale+'" y1="'+m.segments[d].y1*a.scale+'" x2="'+m.segments[d].x2*a.scale+'" y2="'+m.segments[d].y2*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />',h+='<line x1="'+m.segments[d].x2*a.scale+'" y1="'+m.segments[d].y2*a.scale+'" x2="'+m.segments[d].x3*a.scale+'" y2="'+m.segments[d].y3*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />'),!m.segments[d].hasOwnProperty("x3")&&a.lcpr&&(h+='<circle cx="'+m.segments[d].x2*a.scale+'" cy="'+m.segments[d].y2*a.scale+'" r="'+a.lcpr+'" fill="white" stroke-width="'+a.lcpr*.2+'" stroke="black" />')}}return h},this.getsvgstring=function(r,i){i=n.checkoptions(i);for(var s=r.width*i.scale,a=r.height*i.scale,o="<svg "+(i.viewbox?'viewBox="0 0 '+s+" "+a+'" ':'width="'+s+'" height="'+a+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+n.versionnumber+'" >',c=0;c<r.layers.length;c++)for(var h=0;h<r.layers[c].length;h++)r.layers[c][h].isholepath||(o+=n.svgpathstring(r,c,h,i));return o+="</svg>",o},this.compareNumbers=function(r,i){return r-i},this.torgbastr=function(r){return"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"},this.tosvgcolorstr=function(r,i){return'fill="rgb('+r.r+","+r.g+","+r.b+')" stroke="rgb('+r.r+","+r.g+","+r.b+')" stroke-width="'+i.strokewidth+'" opacity="'+r.a/255+'" '},this.appendSVGString=function(r,i){var s;i?(s=document.getElementById(i),s||(s=document.createElement("div"),s.id=i,document.body.appendChild(s))):(s=document.createElement("div"),document.body.appendChild(s)),s.innerHTML+=r},this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.blur=function(r,i,s){var a,o,c,h,d,p,m,g,v,w,C={width:r.width,height:r.height,data:[]};if(i=Math.floor(i),i<1)return r;i>5&&(i=5),s=Math.abs(s),s>1024&&(s=1024);var x=n.gks[i-1];for(o=0;o<r.height;o++)for(a=0;a<r.width;a++){for(p=0,m=0,g=0,v=0,w=0,c=-i;c<i+1;c++)a+c>0&&a+c<r.width&&(d=(o*r.width+a+c)*4,p+=r.data[d]*x[c+i],m+=r.data[d+1]*x[c+i],g+=r.data[d+2]*x[c+i],v+=r.data[d+3]*x[c+i],w+=x[c+i]);d=(o*r.width+a)*4,C.data[d]=Math.floor(p/w),C.data[d+1]=Math.floor(m/w),C.data[d+2]=Math.floor(g/w),C.data[d+3]=Math.floor(v/w)}var k=new Uint8ClampedArray(C.data);for(o=0;o<r.height;o++)for(a=0;a<r.width;a++){for(p=0,m=0,g=0,v=0,w=0,c=-i;c<i+1;c++)o+c>0&&o+c<r.height&&(d=((o+c)*r.width+a)*4,p+=k[d]*x[c+i],m+=k[d+1]*x[c+i],g+=k[d+2]*x[c+i],v+=k[d+3]*x[c+i],w+=x[c+i]);d=(o*r.width+a)*4,C.data[d]=Math.floor(p/w),C.data[d+1]=Math.floor(m/w),C.data[d+2]=Math.floor(g/w),C.data[d+3]=Math.floor(v/w)}for(o=0;o<r.height;o++)for(a=0;a<r.width;a++)d=(o*r.width+a)*4,h=Math.abs(C.data[d]-r.data[d])+Math.abs(C.data[d+1]-r.data[d+1])+Math.abs(C.data[d+2]-r.data[d+2])+Math.abs(C.data[d+3]-r.data[d+3]),h>s&&(C.data[d]=r.data[d],C.data[d+1]=r.data[d+1],C.data[d+2]=r.data[d+2],C.data[d+3]=r.data[d+3]);return C},this.loadImage=function(r,i,s){var a=new Image;s&&s.corsenabled&&(a.crossOrigin="Anonymous"),a.onload=function(){var o=document.createElement("canvas");o.width=a.width,o.height=a.height;var c=o.getContext("2d");c.drawImage(a,0,0),i(o)},a.src=r},this.getImgdata=function(r){var i=r.getContext("2d");return i.getImageData(0,0,r.width,r.height)},this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}],this.drawLayers=function(r,i,s,a){s=s||1;var o,c,h,d,p,m;a?(m=document.getElementById(a),m||(m=document.createElement("div"),m.id=a,document.body.appendChild(m))):(m=document.createElement("div"),document.body.appendChild(m));for(p in r)if(r.hasOwnProperty(p)){o=r[p][0].length,c=r[p].length;var g=document.createElement("canvas");g.width=o*s,g.height=c*s;var v=g.getContext("2d");for(d=0;d<c;d++)for(h=0;h<o;h++)v.fillStyle=n.torgbastr(i[r[p][d][h]%i.length]),v.fillRect(h*s,d*s,s,s);m.appendChild(g)}}}e.exports=new t})()})(YL);var qTe=YL.exports;const YTe=No(qTe),XL=4096,XTe=25,wj={fast:{colorsampling:2,numberofcolors:24,mincolorratio:0,colorquantcycles:1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,blurradius:0,blurdelta:20,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0},clean:{colorsampling:1,numberofcolors:32,mincolorratio:0,colorquantcycles:3,ltres:.5,qtres:.5,pathomit:4,rightangleenhance:!0,blurradius:1,blurdelta:20,strokewidth:1,linefilter:!1,scale:1,roundcoords:2,viewbox:!1,desc:!1,lcpr:0,qcpr:0}};function KTe(e,t,n,r,i,s){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-i,2)+Math.pow(n-s,2))}function KL(e,t,n){let r=null,i=1/0;for(const s of fi){const a=KTe(e,t,n,s.R,s.G,s.B);a<i&&(i=a,r=s)}return r}function ZTe(e,t=128){const n=e.data,r=new Uint8ClampedArray(n.length),i=new Map;for(let s=0;s<n.length;s+=4){const a=n[s],o=n[s+1],c=n[s+2];if(n[s+3]<t){r[s]=255,r[s+1]=255,r[s+2]=255,r[s+3]=0;continue}const d=`${a},${o},${c}`;let p=i.get(d);p||(p=KL(a,o,c),i.set(d,p)),r[s]=p.R,r[s+1]=p.G,r[s+2]=p.B,r[s+3]=255}return console.log(`[FLATTEN] Quantized to ${i.size} unique colors mapped to TPV palette`),new ImageData(r,e.width,e.height)}async function QTe(e,t=XL){return new Promise((n,r)=>{const a=new DOMParser().parseFromString(e,"image/svg+xml").documentElement;let o,c;const h=a.getAttribute("viewBox");if(h){const k=h.split(/\s+/).map(Number);o=k[2],c=k[3]}else o=parseFloat(a.getAttribute("width"))||1e3,c=parseFloat(a.getAttribute("height"))||1e3;const d=t/Math.max(o,c),p=Math.round(o*d),m=Math.round(c*d);console.log(`[FLATTEN] Rendering SVG ${o}x${c} to canvas ${p}x${m}`);const g=document.createElement("canvas");g.width=p,g.height=m;const v=g.getContext("2d");v.fillStyle="#ffffff",v.fillRect(0,0,p,m);const w=new Image,C=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),x=URL.createObjectURL(C);w.onload=()=>{v.drawImage(w,0,0,p,m),URL.revokeObjectURL(x),n({canvas:g,width:p,height:m,originalWidth:o,originalHeight:c})},w.onerror=()=>{URL.revokeObjectURL(x),r(new Error("Failed to load SVG for rasterization"))},w.src=x})}function JTe(e,t=XTe){const r=new DOMParser().parseFromString(e,"image/svg+xml"),s=r.documentElement.querySelectorAll("path");let a=0;return s.forEach(o=>{try{const c=o.getAttribute("d");if(!c)return;const h=c.match(/-?\d+\.?\d*/g);if(!h||h.length<4){o.remove(),a++;return}const d=h.map(Number);let p=1/0,m=-1/0,g=1/0,v=-1/0;for(let k=0;k<d.length-1;k+=2){const P=d[k],j=d[k+1];p=Math.min(p,P),m=Math.max(m,P),g=Math.min(g,j),v=Math.max(v,j)}const w=m-p,C=v-g;w*C<t&&(o.remove(),a++)}catch{}}),a>0&&console.log(`[FLATTEN] Removed ${a} small paths (speckle cleanup)`),new XMLSerializer().serializeToString(r)}function e5e(e,t,n){const i=new DOMParser().parseFromString(e,"image/svg+xml"),s=i.documentElement,a=s.getAttribute("width"),o=s.getAttribute("height");console.log(`[FLATTEN] structureSvg - canvas: ${t}x${n}, existing: ${a}x${o}`);const c=a?parseFloat(a):t,h=o?parseFloat(o):n;return s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("viewBox",`0 0 ${c} ${h}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("data-flattened","true"),s.setAttribute("data-flatten-date",new Date().toISOString()),console.log(`[FLATTEN] Final viewBox: 0 0 ${c} ${h}`),new XMLSerializer().serializeToString(i)}async function t5e(e,t={}){const{quality:n="fast",resolution:r=XL,quantize:i=!0,onProgress:s=()=>{}}=t,a=Date.now(),o={quality:n,resolution:r,quantized:i,originalSize:e.length,finalSize:0,processingTime:0};try{s(5),console.log(`[FLATTEN] Starting flatten (quality: ${n}, resolution: ${r})`),s(10);const{canvas:c,width:h,height:d,originalWidth:p,originalHeight:m}=await QTe(e,r),g=c.getContext("2d");s(20);let v=g.getImageData(0,0,h,d);i&&(s(30),v=ZTe(v),g.putImageData(v,0,0)),s(50);const w=wj[n]||wj.fast,C=YTe.imagedataToSVG(v,w);s(80);let x=JTe(C);return s(90),x=e5e(x,h,d),s(100),o.finalSize=x.length,o.processingTime=Date.now()-a,console.log(`[FLATTEN] Complete in ${o.processingTime}ms`),console.log(`[FLATTEN] Size: ${o.originalSize} to ${o.finalSize} bytes`),{svg:x,stats:o}}catch(c){throw console.error("[FLATTEN] Error:",c),c}}function Zb(e){return e.includes('data-flattened="true"')}function n5e(e){const r=new DOMParser().parseFromString(e,"image/svg+xml").documentElement,i=new Map;r.querySelectorAll("path, rect, circle, ellipse, polygon").forEach(h=>{let d=h.getAttribute("fill");if(!d){const p=h.getAttribute("style");if(p){const m=p.match(/fill:\s*([^;]+)/);m&&(d=m[1].trim())}}if(d&&d!=="none"&&d!=="transparent"){if(d=d.toLowerCase(),d.startsWith("rgb")){const m=d.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);m&&(d="#"+[m[1],m[2],m[3]].map(g=>parseInt(g).toString(16).padStart(2,"0")).join(""))}const p=i.get(d)||0;i.set(d,p+1)}});const a=Array.from(i.values()).reduce((h,d)=>h+d,0),o=[],c=new Map;return i.forEach((h,d)=>{const p=r5e(d),m=a>0?Math.round(h/a*100):0;p&&(o.push({targetColor:{hex:d,areaPct:m},originalColor:{hex:d},blendColor:{hex:p.hex},chosenRecipe:{components:[{code:p.code,name:p.name,hex:p.hex,pct:100}],hex:p.hex},tpvCode:p.code,tpvName:p.name}),c.set(d,{blendHex:p.hex}))}),o.sort((h,d)=>d.targetColor.areaPct-h.targetColor.areaPct),console.log(`[FLATTEN] Built ${o.length} recipes from flattened SVG`),{recipes:o,colorMapping:c}}function r5e(e){const t=e.replace("#",""),n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return KL(n,r,i)}var ZL={exports:{}},Xp={exports:{}},_j;function i5e(){return _j||(_j=1,function(e,t){(function(n,r){r(t)})(Qa,function(n){var r=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],i=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],s="-----------------------------------------------------------------------------------------------------------------------------------------------------",a="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},c="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",h={5:c,"5module":c+" export import",6:c+" const class extends export import super"},d=/^in(stanceof)?$/,p=new RegExp("["+a+"]"),m=new RegExp("["+a+s+"]");function g(y,O){for(var J=65536,le=0;le<O.length;le+=2){if(J+=O[le],J>y)return!1;if(J+=O[le+1],J>=y)return!0}return!1}function v(y,O){return y<65?y===36:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&p.test(String.fromCharCode(y)):O===!1?!1:g(y,i)}function w(y,O){return y<48?y===36:y<58?!0:y<65?!1:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&m.test(String.fromCharCode(y)):O===!1?!1:g(y,i)||g(y,r)}var C=function(O,J){J===void 0&&(J={}),this.label=O,this.keyword=J.keyword,this.beforeExpr=!!J.beforeExpr,this.startsExpr=!!J.startsExpr,this.isLoop=!!J.isLoop,this.isAssign=!!J.isAssign,this.prefix=!!J.prefix,this.postfix=!!J.postfix,this.binop=J.binop||null,this.updateContext=null};function x(y,O){return new C(y,{beforeExpr:!0,binop:O})}var k={beforeExpr:!0},P={startsExpr:!0},j={};function M(y,O){return O===void 0&&(O={}),O.keyword=y,j[y]=new C(y,O)}var S={num:new C("num",P),regexp:new C("regexp",P),string:new C("string",P),name:new C("name",P),privateId:new C("privateId",P),eof:new C("eof"),bracketL:new C("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new C("]"),braceL:new C("{",{beforeExpr:!0,startsExpr:!0}),braceR:new C("}"),parenL:new C("(",{beforeExpr:!0,startsExpr:!0}),parenR:new C(")"),comma:new C(",",k),semi:new C(";",k),colon:new C(":",k),dot:new C("."),question:new C("?",k),questionDot:new C("?."),arrow:new C("=>",k),template:new C("template"),invalidTemplate:new C("invalidTemplate"),ellipsis:new C("...",k),backQuote:new C("`",P),dollarBraceL:new C("${",{beforeExpr:!0,startsExpr:!0}),eq:new C("=",{beforeExpr:!0,isAssign:!0}),assign:new C("_=",{beforeExpr:!0,isAssign:!0}),incDec:new C("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new C("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:x("||",1),logicalAND:x("&&",2),bitwiseOR:x("|",3),bitwiseXOR:x("^",4),bitwiseAND:x("&",5),equality:x("==/!=/===/!==",6),relational:x("</>/<=/>=",7),bitShift:x("<</>>/>>>",8),plusMin:new C("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:x("%",10),star:x("*",10),slash:x("/",10),starstar:new C("**",{beforeExpr:!0}),coalesce:x("??",1),_break:M("break"),_case:M("case",k),_catch:M("catch"),_continue:M("continue"),_debugger:M("debugger"),_default:M("default",k),_do:M("do",{isLoop:!0,beforeExpr:!0}),_else:M("else",k),_finally:M("finally"),_for:M("for",{isLoop:!0}),_function:M("function",P),_if:M("if"),_return:M("return",k),_switch:M("switch"),_throw:M("throw",k),_try:M("try"),_var:M("var"),_const:M("const"),_while:M("while",{isLoop:!0}),_with:M("with"),_new:M("new",{beforeExpr:!0,startsExpr:!0}),_this:M("this",P),_super:M("super",P),_class:M("class",P),_extends:M("extends",k),_export:M("export"),_import:M("import",P),_null:M("null",P),_true:M("true",P),_false:M("false",P),_in:M("in",{beforeExpr:!0,binop:7}),_instanceof:M("instanceof",{beforeExpr:!0,binop:7}),_typeof:M("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:M("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:M("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},B=/\r\n?|\n|\u2028|\u2029/,D=new RegExp(B.source,"g");function R(y){return y===10||y===13||y===8232||y===8233}function ee(y,O,J){J===void 0&&(J=y.length);for(var le=O;le<J;le++){var Se=y.charCodeAt(le);if(R(Se))return le<J-1&&Se===13&&y.charCodeAt(le+1)===10?le+2:le+1}return-1}var ue=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ie=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ge=Object.prototype,H=ge.hasOwnProperty,ye=ge.toString,Ae=Object.hasOwn||function(y,O){return H.call(y,O)},we=Array.isArray||function(y){return ye.call(y)==="[object Array]"},Be=Object.create(null);function xe(y){return Be[y]||(Be[y]=new RegExp("^(?:"+y.replace(/ /g,"|")+")$"))}function Le(y){return y<=65535?String.fromCharCode(y):(y-=65536,String.fromCharCode((y>>10)+55296,(y&1023)+56320))}var Ce=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Re=function(O,J){this.line=O,this.column=J};Re.prototype.offset=function(O){return new Re(this.line,this.column+O)};var it=function(O,J,le){this.start=J,this.end=le,O.sourceFile!==null&&(this.source=O.sourceFile)};function nt(y,O){for(var J=1,le=0;;){var Se=ee(y,le,O);if(Se<0)return new Re(J,O-le);++J,le=Se}}var Ue={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},lt=!1;function de(y){var O={};for(var J in Ue)O[J]=y&&Ae(y,J)?y[J]:Ue[J];if(O.ecmaVersion==="latest"?O.ecmaVersion=1e8:O.ecmaVersion==null?(!lt&&typeof console=="object"&&console.warn&&(lt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),O.ecmaVersion=11):O.ecmaVersion>=2015&&(O.ecmaVersion-=2009),O.allowReserved==null&&(O.allowReserved=O.ecmaVersion<5),(!y||y.allowHashBang==null)&&(O.allowHashBang=O.ecmaVersion>=14),we(O.onToken)){var le=O.onToken;O.onToken=function(Se){return le.push(Se)}}return we(O.onComment)&&(O.onComment=oe(O,O.onComment)),O}function oe(y,O){return function(J,le,Se,et,rt,bt){var _t={type:J?"Block":"Line",value:le,start:Se,end:et};y.locations&&(_t.loc=new it(this,rt,bt)),y.ranges&&(_t.range=[Se,et]),O.push(_t)}}var We=1,Ne=2,ht=4,jt=8,Ct=16,q=32,Ye=64,se=128,L=256,I=512,Q=We|Ne|L;function he(y,O){return Ne|(y?ht:0)|(O?jt:0)}var ve=0,me=1,Me=2,Je=3,De=4,l=5,f=function(O,J,le){this.options=O=de(O),this.sourceFile=O.sourceFile,this.keywords=xe(h[O.ecmaVersion>=6?6:O.sourceType==="module"?"5module":5]);var Se="";O.allowReserved!==!0&&(Se=o[O.ecmaVersion>=6?6:O.ecmaVersion===5?5:3],O.sourceType==="module"&&(Se+=" await")),this.reservedWords=xe(Se);var et=(Se?Se+" ":"")+o.strict;this.reservedWordsStrict=xe(et),this.reservedWordsStrictBind=xe(et+" "+o.strictBind),this.input=String(J),this.containsEsc=!1,le?(this.pos=le,this.lineStart=this.input.lastIndexOf(`
`,le-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(B).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=S.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=O.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&O.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(We),this.regexpState=null,this.privateNameStack=[]},b={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};f.prototype.parse=function(){var O=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(O)},b.inFunction.get=function(){return(this.currentVarScope().flags&Ne)>0},b.inGenerator.get=function(){return(this.currentVarScope().flags&jt)>0},b.inAsync.get=function(){return(this.currentVarScope().flags&ht)>0},b.canAwait.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var O=this.scopeStack[y],J=O.flags;if(J&(L|I))return!1;if(J&Ne)return(J&ht)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},b.allowSuper.get=function(){var y=this.currentThisScope(),O=y.flags;return(O&Ye)>0||this.options.allowSuperOutsideMethod},b.allowDirectSuper.get=function(){return(this.currentThisScope().flags&se)>0},b.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},b.allowNewDotTarget.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var O=this.scopeStack[y],J=O.flags;if(J&(L|I)||J&Ne&&!(J&Ct))return!0}return!1},b.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&L)>0},f.extend=function(){for(var O=[],J=arguments.length;J--;)O[J]=arguments[J];for(var le=this,Se=0;Se<O.length;Se++)le=O[Se](le);return le},f.parse=function(O,J){return new this(J,O).parse()},f.parseExpressionAt=function(O,J,le){var Se=new this(le,O,J);return Se.nextToken(),Se.parseExpression()},f.tokenizer=function(O,J){return new this(J,O)},Object.defineProperties(f.prototype,b);var _=f.prototype,E=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;_.strictDirective=function(y){if(this.options.ecmaVersion<5)return!1;for(;;){ie.lastIndex=y,y+=ie.exec(this.input)[0].length;var O=E.exec(this.input.slice(y));if(!O)return!1;if((O[1]||O[2])==="use strict"){ie.lastIndex=y+O[0].length;var J=ie.exec(this.input),le=J.index+J[0].length,Se=this.input.charAt(le);return Se===";"||Se==="}"||B.test(J[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Se)||Se==="!"&&this.input.charAt(le+1)==="=")}y+=O[0].length,ie.lastIndex=y,y+=ie.exec(this.input)[0].length,this.input[y]===";"&&y++}},_.eat=function(y){return this.type===y?(this.next(),!0):!1},_.isContextual=function(y){return this.type===S.name&&this.value===y&&!this.containsEsc},_.eatContextual=function(y){return this.isContextual(y)?(this.next(),!0):!1},_.expectContextual=function(y){this.eatContextual(y)||this.unexpected()},_.canInsertSemicolon=function(){return this.type===S.eof||this.type===S.braceR||B.test(this.input.slice(this.lastTokEnd,this.start))},_.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},_.semicolon=function(){!this.eat(S.semi)&&!this.insertSemicolon()&&this.unexpected()},_.afterTrailingComma=function(y,O){if(this.type===y)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),O||this.next(),!0},_.expect=function(y){this.eat(y)||this.unexpected()},_.unexpected=function(y){this.raise(y??this.start,"Unexpected token")};var A=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};_.checkPatternErrors=function(y,O){if(y){y.trailingComma>-1&&this.raiseRecoverable(y.trailingComma,"Comma is not permitted after the rest element");var J=O?y.parenthesizedAssign:y.parenthesizedBind;J>-1&&this.raiseRecoverable(J,O?"Assigning to rvalue":"Parenthesized pattern")}},_.checkExpressionErrors=function(y,O){if(!y)return!1;var J=y.shorthandAssign,le=y.doubleProto;if(!O)return J>=0||le>=0;J>=0&&this.raise(J,"Shorthand property assignments are valid only in destructuring patterns"),le>=0&&this.raiseRecoverable(le,"Redefinition of __proto__ property")},_.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},_.isSimpleAssignTarget=function(y){return y.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(y.expression):y.type==="Identifier"||y.type==="MemberExpression"};var T=f.prototype;T.parseTopLevel=function(y){var O=Object.create(null);for(y.body||(y.body=[]);this.type!==S.eof;){var J=this.parseStatement(null,!0,O);y.body.push(J)}if(this.inModule)for(var le=0,Se=Object.keys(this.undefinedExports);le<Se.length;le+=1){var et=Se[le];this.raiseRecoverable(this.undefinedExports[et].start,"Export '"+et+"' is not defined")}return this.adaptDirectivePrologue(y.body),this.next(),y.sourceType=this.options.sourceType,this.finishNode(y,"Program")};var N={kind:"loop"},$={kind:"switch"};T.isLet=function(y){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ie.lastIndex=this.pos;var O=ie.exec(this.input),J=this.pos+O[0].length,le=this.input.charCodeAt(J);if(le===91||le===92)return!0;if(y)return!1;if(le===123||le>55295&&le<56320)return!0;if(v(le,!0)){for(var Se=J+1;w(le=this.input.charCodeAt(Se),!0);)++Se;if(le===92||le>55295&&le<56320)return!0;var et=this.input.slice(J,Se);if(!d.test(et))return!0}return!1},T.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ie.lastIndex=this.pos;var y=ie.exec(this.input),O=this.pos+y[0].length,J;return!B.test(this.input.slice(this.pos,O))&&this.input.slice(O,O+8)==="function"&&(O+8===this.input.length||!(w(J=this.input.charCodeAt(O+8))||J>55295&&J<56320))},T.isUsingKeyword=function(y,O){if(this.options.ecmaVersion<17||!this.isContextual(y?"await":"using"))return!1;ie.lastIndex=this.pos;var J=ie.exec(this.input),le=this.pos+J[0].length;if(B.test(this.input.slice(this.pos,le)))return!1;if(y){var Se=le+5,et;if(this.input.slice(le,Se)!=="using"||Se===this.input.length||w(et=this.input.charCodeAt(Se))||et>55295&&et<56320)return!1;ie.lastIndex=Se;var rt=ie.exec(this.input);if(rt&&B.test(this.input.slice(Se,Se+rt[0].length)))return!1}if(O){var bt=le+2,_t;if(this.input.slice(le,bt)==="of"&&(bt===this.input.length||!w(_t=this.input.charCodeAt(bt))&&!(_t>55295&&_t<56320)))return!1}var Zt=this.input.charCodeAt(le);return v(Zt,!0)||Zt===92},T.isAwaitUsing=function(y){return this.isUsingKeyword(!0,y)},T.isUsing=function(y){return this.isUsingKeyword(!1,y)},T.parseStatement=function(y,O,J){var le=this.type,Se=this.startNode(),et;switch(this.isLet(y)&&(le=S._var,et="let"),le){case S._break:case S._continue:return this.parseBreakContinueStatement(Se,le.keyword);case S._debugger:return this.parseDebuggerStatement(Se);case S._do:return this.parseDoStatement(Se);case S._for:return this.parseForStatement(Se);case S._function:return y&&(this.strict||y!=="if"&&y!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Se,!1,!y);case S._class:return y&&this.unexpected(),this.parseClass(Se,!0);case S._if:return this.parseIfStatement(Se);case S._return:return this.parseReturnStatement(Se);case S._switch:return this.parseSwitchStatement(Se);case S._throw:return this.parseThrowStatement(Se);case S._try:return this.parseTryStatement(Se);case S._const:case S._var:return et=et||this.value,y&&et!=="var"&&this.unexpected(),this.parseVarStatement(Se,et);case S._while:return this.parseWhileStatement(Se);case S._with:return this.parseWithStatement(Se);case S.braceL:return this.parseBlock(!0,Se);case S.semi:return this.parseEmptyStatement(Se);case S._export:case S._import:if(this.options.ecmaVersion>10&&le===S._import){ie.lastIndex=this.pos;var rt=ie.exec(this.input),bt=this.pos+rt[0].length,_t=this.input.charCodeAt(bt);if(_t===40||_t===46)return this.parseExpressionStatement(Se,this.parseExpression())}return this.options.allowImportExportEverywhere||(O||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),le===S._import?this.parseImport(Se):this.parseExport(Se,J);default:if(this.isAsyncFunction())return y&&this.unexpected(),this.next(),this.parseFunctionStatement(Se,!0,!y);var Zt=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(Zt)return O&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),Zt==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(Se,!1,Zt),this.semicolon(),this.finishNode(Se,"VariableDeclaration");var rn=this.value,Nn=this.parseExpression();return le===S.name&&Nn.type==="Identifier"&&this.eat(S.colon)?this.parseLabeledStatement(Se,rn,Nn,y):this.parseExpressionStatement(Se,Nn)}},T.parseBreakContinueStatement=function(y,O){var J=O==="break";this.next(),this.eat(S.semi)||this.insertSemicolon()?y.label=null:this.type!==S.name?this.unexpected():(y.label=this.parseIdent(),this.semicolon());for(var le=0;le<this.labels.length;++le){var Se=this.labels[le];if((y.label==null||Se.name===y.label.name)&&(Se.kind!=null&&(J||Se.kind==="loop")||y.label&&J))break}return le===this.labels.length&&this.raise(y.start,"Unsyntactic "+O),this.finishNode(y,J?"BreakStatement":"ContinueStatement")},T.parseDebuggerStatement=function(y){return this.next(),this.semicolon(),this.finishNode(y,"DebuggerStatement")},T.parseDoStatement=function(y){return this.next(),this.labels.push(N),y.body=this.parseStatement("do"),this.labels.pop(),this.expect(S._while),y.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(S.semi):this.semicolon(),this.finishNode(y,"DoWhileStatement")},T.parseForStatement=function(y){this.next();var O=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(N),this.enterScope(0),this.expect(S.parenL),this.type===S.semi)return O>-1&&this.unexpected(O),this.parseFor(y,null);var J=this.isLet();if(this.type===S._var||this.type===S._const||J){var le=this.startNode(),Se=J?"let":this.value;return this.next(),this.parseVar(le,!0,Se),this.finishNode(le,"VariableDeclaration"),this.parseForAfterInit(y,le,O)}var et=this.isContextual("let"),rt=!1,bt=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(bt){var _t=this.startNode();return this.next(),bt==="await using"&&this.next(),this.parseVar(_t,!0,bt),this.finishNode(_t,"VariableDeclaration"),this.parseForAfterInit(y,_t,O)}var Zt=this.containsEsc,rn=new A,Nn=this.start,or=O>-1?this.parseExprSubscripts(rn,"await"):this.parseExpression(!0,rn);return this.type===S._in||(rt=this.options.ecmaVersion>=6&&this.isContextual("of"))?(O>-1?(this.type===S._in&&this.unexpected(O),y.await=!0):rt&&this.options.ecmaVersion>=8&&(or.start===Nn&&!Zt&&or.type==="Identifier"&&or.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(y.await=!1)),et&&rt&&this.raise(or.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(or,!1,rn),this.checkLValPattern(or),this.parseForIn(y,or)):(this.checkExpressionErrors(rn,!0),O>-1&&this.unexpected(O),this.parseFor(y,or))},T.parseForAfterInit=function(y,O,J){return(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&O.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===S._in?J>-1&&this.unexpected(J):y.await=J>-1),this.parseForIn(y,O)):(J>-1&&this.unexpected(J),this.parseFor(y,O))},T.parseFunctionStatement=function(y,O,J){return this.next(),this.parseFunction(y,G|(J?0:Z),!1,O)},T.parseIfStatement=function(y){return this.next(),y.test=this.parseParenExpression(),y.consequent=this.parseStatement("if"),y.alternate=this.eat(S._else)?this.parseStatement("if"):null,this.finishNode(y,"IfStatement")},T.parseReturnStatement=function(y){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(S.semi)||this.insertSemicolon()?y.argument=null:(y.argument=this.parseExpression(),this.semicolon()),this.finishNode(y,"ReturnStatement")},T.parseSwitchStatement=function(y){this.next(),y.discriminant=this.parseParenExpression(),y.cases=[],this.expect(S.braceL),this.labels.push($),this.enterScope(0);for(var O,J=!1;this.type!==S.braceR;)if(this.type===S._case||this.type===S._default){var le=this.type===S._case;O&&this.finishNode(O,"SwitchCase"),y.cases.push(O=this.startNode()),O.consequent=[],this.next(),le?O.test=this.parseExpression():(J&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),J=!0,O.test=null),this.expect(S.colon)}else O||this.unexpected(),O.consequent.push(this.parseStatement(null));return this.exitScope(),O&&this.finishNode(O,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(y,"SwitchStatement")},T.parseThrowStatement=function(y){return this.next(),B.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),y.argument=this.parseExpression(),this.semicolon(),this.finishNode(y,"ThrowStatement")};var F=[];T.parseCatchClauseParam=function(){var y=this.parseBindingAtom(),O=y.type==="Identifier";return this.enterScope(O?q:0),this.checkLValPattern(y,O?De:Me),this.expect(S.parenR),y},T.parseTryStatement=function(y){if(this.next(),y.block=this.parseBlock(),y.handler=null,this.type===S._catch){var O=this.startNode();this.next(),this.eat(S.parenL)?O.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),O.param=null,this.enterScope(0)),O.body=this.parseBlock(!1),this.exitScope(),y.handler=this.finishNode(O,"CatchClause")}return y.finalizer=this.eat(S._finally)?this.parseBlock():null,!y.handler&&!y.finalizer&&this.raise(y.start,"Missing catch or finally clause"),this.finishNode(y,"TryStatement")},T.parseVarStatement=function(y,O,J){return this.next(),this.parseVar(y,!1,O,J),this.semicolon(),this.finishNode(y,"VariableDeclaration")},T.parseWhileStatement=function(y){return this.next(),y.test=this.parseParenExpression(),this.labels.push(N),y.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(y,"WhileStatement")},T.parseWithStatement=function(y){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),y.object=this.parseParenExpression(),y.body=this.parseStatement("with"),this.finishNode(y,"WithStatement")},T.parseEmptyStatement=function(y){return this.next(),this.finishNode(y,"EmptyStatement")},T.parseLabeledStatement=function(y,O,J,le){for(var Se=0,et=this.labels;Se<et.length;Se+=1){var rt=et[Se];rt.name===O&&this.raise(J.start,"Label '"+O+"' is already declared")}for(var bt=this.type.isLoop?"loop":this.type===S._switch?"switch":null,_t=this.labels.length-1;_t>=0;_t--){var Zt=this.labels[_t];if(Zt.statementStart===y.start)Zt.statementStart=this.start,Zt.kind=bt;else break}return this.labels.push({name:O,kind:bt,statementStart:this.start}),y.body=this.parseStatement(le?le.indexOf("label")===-1?le+"label":le:"label"),this.labels.pop(),y.label=J,this.finishNode(y,"LabeledStatement")},T.parseExpressionStatement=function(y,O){return y.expression=O,this.semicolon(),this.finishNode(y,"ExpressionStatement")},T.parseBlock=function(y,O,J){for(y===void 0&&(y=!0),O===void 0&&(O=this.startNode()),O.body=[],this.expect(S.braceL),y&&this.enterScope(0);this.type!==S.braceR;){var le=this.parseStatement(null);O.body.push(le)}return J&&(this.strict=!1),this.next(),y&&this.exitScope(),this.finishNode(O,"BlockStatement")},T.parseFor=function(y,O){return y.init=O,this.expect(S.semi),y.test=this.type===S.semi?null:this.parseExpression(),this.expect(S.semi),y.update=this.type===S.parenR?null:this.parseExpression(),this.expect(S.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,"ForStatement")},T.parseForIn=function(y,O){var J=this.type===S._in;return this.next(),O.type==="VariableDeclaration"&&O.declarations[0].init!=null&&(!J||this.options.ecmaVersion<8||this.strict||O.kind!=="var"||O.declarations[0].id.type!=="Identifier")&&this.raise(O.start,(J?"for-in":"for-of")+" loop variable declaration may not have an initializer"),y.left=O,y.right=J?this.parseExpression():this.parseMaybeAssign(),this.expect(S.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,J?"ForInStatement":"ForOfStatement")},T.parseVar=function(y,O,J,le){for(y.declarations=[],y.kind=J;;){var Se=this.startNode();if(this.parseVarId(Se,J),this.eat(S.eq)?Se.init=this.parseMaybeAssign(O):!le&&J==="const"&&!(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!le&&(J==="using"||J==="await using")&&this.options.ecmaVersion>=17&&this.type!==S._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+J+" declaration"):!le&&Se.id.type!=="Identifier"&&!(O&&(this.type===S._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Se.init=null,y.declarations.push(this.finishNode(Se,"VariableDeclarator")),!this.eat(S.comma))break}return y},T.parseVarId=function(y,O){y.id=O==="using"||O==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(y.id,O==="var"?me:Me,!1)};var G=1,Z=2,Y=4;T.parseFunction=function(y,O,J,le,Se){this.initFunction(y),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!le)&&(this.type===S.star&&O&Z&&this.unexpected(),y.generator=this.eat(S.star)),this.options.ecmaVersion>=8&&(y.async=!!le),O&G&&(y.id=O&Y&&this.type!==S.name?null:this.parseIdent(),y.id&&!(O&Z)&&this.checkLValSimple(y.id,this.strict||y.generator||y.async?this.treatFunctionsAsVar?me:Me:Je));var et=this.yieldPos,rt=this.awaitPos,bt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(he(y.async,y.generator)),O&G||(y.id=this.type===S.name?this.parseIdent():null),this.parseFunctionParams(y),this.parseFunctionBody(y,J,!1,Se),this.yieldPos=et,this.awaitPos=rt,this.awaitIdentPos=bt,this.finishNode(y,O&G?"FunctionDeclaration":"FunctionExpression")},T.parseFunctionParams=function(y){this.expect(S.parenL),y.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},T.parseClass=function(y,O){this.next();var J=this.strict;this.strict=!0,this.parseClassId(y,O),this.parseClassSuper(y);var le=this.enterClassBody(),Se=this.startNode(),et=!1;for(Se.body=[],this.expect(S.braceL);this.type!==S.braceR;){var rt=this.parseClassElement(y.superClass!==null);rt&&(Se.body.push(rt),rt.type==="MethodDefinition"&&rt.kind==="constructor"?(et&&this.raiseRecoverable(rt.start,"Duplicate constructor in the same class"),et=!0):rt.key&&rt.key.type==="PrivateIdentifier"&&W(le,rt)&&this.raiseRecoverable(rt.key.start,"Identifier '#"+rt.key.name+"' has already been declared"))}return this.strict=J,this.next(),y.body=this.finishNode(Se,"ClassBody"),this.exitClassBody(),this.finishNode(y,O?"ClassDeclaration":"ClassExpression")},T.parseClassElement=function(y){if(this.eat(S.semi))return null;var O=this.options.ecmaVersion,J=this.startNode(),le="",Se=!1,et=!1,rt="method",bt=!1;if(this.eatContextual("static")){if(O>=13&&this.eat(S.braceL))return this.parseClassStaticBlock(J),J;this.isClassElementNameStart()||this.type===S.star?bt=!0:le="static"}if(J.static=bt,!le&&O>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===S.star)&&!this.canInsertSemicolon()?et=!0:le="async"),!le&&(O>=9||!et)&&this.eat(S.star)&&(Se=!0),!le&&!et&&!Se){var _t=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?rt=_t:le=_t)}if(le?(J.computed=!1,J.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),J.key.name=le,this.finishNode(J.key,"Identifier")):this.parseClassElementName(J),O<13||this.type===S.parenL||rt!=="method"||Se||et){var Zt=!J.static&&X(J,"constructor"),rn=Zt&&y;Zt&&rt!=="method"&&this.raise(J.key.start,"Constructor can't have get/set modifier"),J.kind=Zt?"constructor":rt,this.parseClassMethod(J,Se,et,rn)}else this.parseClassField(J);return J},T.isClassElementNameStart=function(){return this.type===S.name||this.type===S.privateId||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword},T.parseClassElementName=function(y){this.type===S.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),y.computed=!1,y.key=this.parsePrivateIdent()):this.parsePropertyName(y)},T.parseClassMethod=function(y,O,J,le){var Se=y.key;y.kind==="constructor"?(O&&this.raise(Se.start,"Constructor can't be a generator"),J&&this.raise(Se.start,"Constructor can't be an async method")):y.static&&X(y,"prototype")&&this.raise(Se.start,"Classes may not have a static property named prototype");var et=y.value=this.parseMethod(O,J,le);return y.kind==="get"&&et.params.length!==0&&this.raiseRecoverable(et.start,"getter should have no params"),y.kind==="set"&&et.params.length!==1&&this.raiseRecoverable(et.start,"setter should have exactly one param"),y.kind==="set"&&et.params[0].type==="RestElement"&&this.raiseRecoverable(et.params[0].start,"Setter cannot use rest params"),this.finishNode(y,"MethodDefinition")},T.parseClassField=function(y){return X(y,"constructor")?this.raise(y.key.start,"Classes can't have a field named 'constructor'"):y.static&&X(y,"prototype")&&this.raise(y.key.start,"Classes can't have a static field named 'prototype'"),this.eat(S.eq)?(this.enterScope(I|Ye),y.value=this.parseMaybeAssign(),this.exitScope()):y.value=null,this.semicolon(),this.finishNode(y,"PropertyDefinition")},T.parseClassStaticBlock=function(y){y.body=[];var O=this.labels;for(this.labels=[],this.enterScope(L|Ye);this.type!==S.braceR;){var J=this.parseStatement(null);y.body.push(J)}return this.next(),this.exitScope(),this.labels=O,this.finishNode(y,"StaticBlock")},T.parseClassId=function(y,O){this.type===S.name?(y.id=this.parseIdent(),O&&this.checkLValSimple(y.id,Me,!1)):(O===!0&&this.unexpected(),y.id=null)},T.parseClassSuper=function(y){y.superClass=this.eat(S._extends)?this.parseExprSubscripts(null,!1):null},T.enterClassBody=function(){var y={declared:Object.create(null),used:[]};return this.privateNameStack.push(y),y.declared},T.exitClassBody=function(){var y=this.privateNameStack.pop(),O=y.declared,J=y.used;if(this.options.checkPrivateFields)for(var le=this.privateNameStack.length,Se=le===0?null:this.privateNameStack[le-1],et=0;et<J.length;++et){var rt=J[et];Ae(O,rt.name)||(Se?Se.used.push(rt):this.raiseRecoverable(rt.start,"Private field '#"+rt.name+"' must be declared in an enclosing class"))}};function W(y,O){var J=O.key.name,le=y[J],Se="true";return O.type==="MethodDefinition"&&(O.kind==="get"||O.kind==="set")&&(Se=(O.static?"s":"i")+O.kind),le==="iget"&&Se==="iset"||le==="iset"&&Se==="iget"||le==="sget"&&Se==="sset"||le==="sset"&&Se==="sget"?(y[J]="true",!1):le?!0:(y[J]=Se,!1)}function X(y,O){var J=y.computed,le=y.key;return!J&&(le.type==="Identifier"&&le.name===O||le.type==="Literal"&&le.value===O)}T.parseExportAllDeclaration=function(y,O){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(y.exported=this.parseModuleExportName(),this.checkExport(O,y.exported,this.lastTokStart)):y.exported=null),this.expectContextual("from"),this.type!==S.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ExportAllDeclaration")},T.parseExport=function(y,O){if(this.next(),this.eat(S.star))return this.parseExportAllDeclaration(y,O);if(this.eat(S._default))return this.checkExport(O,"default",this.lastTokStart),y.declaration=this.parseExportDefaultDeclaration(),this.finishNode(y,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())y.declaration=this.parseExportDeclaration(y),y.declaration.type==="VariableDeclaration"?this.checkVariableExport(O,y.declaration.declarations):this.checkExport(O,y.declaration.id,y.declaration.id.start),y.specifiers=[],y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[]);else{if(y.declaration=null,y.specifiers=this.parseExportSpecifiers(O),this.eatContextual("from"))this.type!==S.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause());else{for(var J=0,le=y.specifiers;J<le.length;J+=1){var Se=le[J];this.checkUnreserved(Se.local),this.checkLocalExport(Se.local),Se.local.type==="Literal"&&this.raise(Se.local.start,"A string literal cannot be used as an exported binding without `from`.")}y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[])}this.semicolon()}return this.finishNode(y,"ExportNamedDeclaration")},T.parseExportDeclaration=function(y){return this.parseStatement(null)},T.parseExportDefaultDeclaration=function(){var y;if(this.type===S._function||(y=this.isAsyncFunction())){var O=this.startNode();return this.next(),y&&this.next(),this.parseFunction(O,G|Y,!1,y)}else if(this.type===S._class){var J=this.startNode();return this.parseClass(J,"nullableID")}else{var le=this.parseMaybeAssign();return this.semicolon(),le}},T.checkExport=function(y,O,J){y&&(typeof O!="string"&&(O=O.type==="Identifier"?O.name:O.value),Ae(y,O)&&this.raiseRecoverable(J,"Duplicate export '"+O+"'"),y[O]=!0)},T.checkPatternExport=function(y,O){var J=O.type;if(J==="Identifier")this.checkExport(y,O,O.start);else if(J==="ObjectPattern")for(var le=0,Se=O.properties;le<Se.length;le+=1){var et=Se[le];this.checkPatternExport(y,et)}else if(J==="ArrayPattern")for(var rt=0,bt=O.elements;rt<bt.length;rt+=1){var _t=bt[rt];_t&&this.checkPatternExport(y,_t)}else J==="Property"?this.checkPatternExport(y,O.value):J==="AssignmentPattern"?this.checkPatternExport(y,O.left):J==="RestElement"&&this.checkPatternExport(y,O.argument)},T.checkVariableExport=function(y,O){if(y)for(var J=0,le=O;J<le.length;J+=1){var Se=le[J];this.checkPatternExport(y,Se.id)}},T.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},T.parseExportSpecifier=function(y){var O=this.startNode();return O.local=this.parseModuleExportName(),O.exported=this.eatContextual("as")?this.parseModuleExportName():O.local,this.checkExport(y,O.exported,O.exported.start),this.finishNode(O,"ExportSpecifier")},T.parseExportSpecifiers=function(y){var O=[],J=!0;for(this.expect(S.braceL);!this.eat(S.braceR);){if(J)J=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;O.push(this.parseExportSpecifier(y))}return O},T.parseImport=function(y){return this.next(),this.type===S.string?(y.specifiers=F,y.source=this.parseExprAtom()):(y.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),y.source=this.type===S.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ImportDeclaration")},T.parseImportSpecifier=function(){var y=this.startNode();return y.imported=this.parseModuleExportName(),this.eatContextual("as")?y.local=this.parseIdent():(this.checkUnreserved(y.imported),y.local=y.imported),this.checkLValSimple(y.local,Me),this.finishNode(y,"ImportSpecifier")},T.parseImportDefaultSpecifier=function(){var y=this.startNode();return y.local=this.parseIdent(),this.checkLValSimple(y.local,Me),this.finishNode(y,"ImportDefaultSpecifier")},T.parseImportNamespaceSpecifier=function(){var y=this.startNode();return this.next(),this.expectContextual("as"),y.local=this.parseIdent(),this.checkLValSimple(y.local,Me),this.finishNode(y,"ImportNamespaceSpecifier")},T.parseImportSpecifiers=function(){var y=[],O=!0;if(this.type===S.name&&(y.push(this.parseImportDefaultSpecifier()),!this.eat(S.comma)))return y;if(this.type===S.star)return y.push(this.parseImportNamespaceSpecifier()),y;for(this.expect(S.braceL);!this.eat(S.braceR);){if(O)O=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;y.push(this.parseImportSpecifier())}return y},T.parseWithClause=function(){var y=[];if(!this.eat(S._with))return y;this.expect(S.braceL);for(var O={},J=!0;!this.eat(S.braceR);){if(J)J=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var le=this.parseImportAttribute(),Se=le.key.type==="Identifier"?le.key.name:le.key.value;Ae(O,Se)&&this.raiseRecoverable(le.key.start,"Duplicate attribute key '"+Se+"'"),O[Se]=!0,y.push(le)}return y},T.parseImportAttribute=function(){var y=this.startNode();return y.key=this.type===S.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(S.colon),this.type!==S.string&&this.unexpected(),y.value=this.parseExprAtom(),this.finishNode(y,"ImportAttribute")},T.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===S.string){var y=this.parseLiteral(this.value);return Ce.test(y.value)&&this.raise(y.start,"An export name cannot include a lone surrogate."),y}return this.parseIdent(!0)},T.adaptDirectivePrologue=function(y){for(var O=0;O<y.length&&this.isDirectiveCandidate(y[O]);++O)y[O].directive=y[O].expression.raw.slice(1,-1)},T.isDirectiveCandidate=function(y){return this.options.ecmaVersion>=5&&y.type==="ExpressionStatement"&&y.expression.type==="Literal"&&typeof y.expression.value=="string"&&(this.input[y.start]==='"'||this.input[y.start]==="'")};var U=f.prototype;U.toAssignable=function(y,O,J){if(this.options.ecmaVersion>=6&&y)switch(y.type){case"Identifier":this.inAsync&&y.name==="await"&&this.raise(y.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":y.type="ObjectPattern",J&&this.checkPatternErrors(J,!0);for(var le=0,Se=y.properties;le<Se.length;le+=1){var et=Se[le];this.toAssignable(et,O),et.type==="RestElement"&&(et.argument.type==="ArrayPattern"||et.argument.type==="ObjectPattern")&&this.raise(et.argument.start,"Unexpected token")}break;case"Property":y.kind!=="init"&&this.raise(y.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(y.value,O);break;case"ArrayExpression":y.type="ArrayPattern",J&&this.checkPatternErrors(J,!0),this.toAssignableList(y.elements,O);break;case"SpreadElement":y.type="RestElement",this.toAssignable(y.argument,O),y.argument.type==="AssignmentPattern"&&this.raise(y.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":y.operator!=="="&&this.raise(y.left.end,"Only '=' operator can be used for specifying default value."),y.type="AssignmentPattern",delete y.operator,this.toAssignable(y.left,O);break;case"ParenthesizedExpression":this.toAssignable(y.expression,O,J);break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!O)break;default:this.raise(y.start,"Assigning to rvalue")}else J&&this.checkPatternErrors(J,!0);return y},U.toAssignableList=function(y,O){for(var J=y.length,le=0;le<J;le++){var Se=y[le];Se&&this.toAssignable(Se,O)}if(J){var et=y[J-1];this.options.ecmaVersion===6&&O&&et&&et.type==="RestElement"&&et.argument.type!=="Identifier"&&this.unexpected(et.argument.start)}return y},U.parseSpread=function(y){var O=this.startNode();return this.next(),O.argument=this.parseMaybeAssign(!1,y),this.finishNode(O,"SpreadElement")},U.parseRestBinding=function(){var y=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==S.name&&this.unexpected(),y.argument=this.parseBindingAtom(),this.finishNode(y,"RestElement")},U.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case S.bracketL:var y=this.startNode();return this.next(),y.elements=this.parseBindingList(S.bracketR,!0,!0),this.finishNode(y,"ArrayPattern");case S.braceL:return this.parseObj(!0)}return this.parseIdent()},U.parseBindingList=function(y,O,J,le){for(var Se=[],et=!0;!this.eat(y);)if(et?et=!1:this.expect(S.comma),O&&this.type===S.comma)Se.push(null);else{if(J&&this.afterTrailingComma(y))break;if(this.type===S.ellipsis){var rt=this.parseRestBinding();this.parseBindingListItem(rt),Se.push(rt),this.type===S.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(y);break}else Se.push(this.parseAssignableListItem(le))}return Se},U.parseAssignableListItem=function(y){var O=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(O),O},U.parseBindingListItem=function(y){return y},U.parseMaybeDefault=function(y,O,J){if(J=J||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(S.eq))return J;var le=this.startNodeAt(y,O);return le.left=J,le.right=this.parseMaybeAssign(),this.finishNode(le,"AssignmentPattern")},U.checkLValSimple=function(y,O,J){O===void 0&&(O=ve);var le=O!==ve;switch(y.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(y.name)&&this.raiseRecoverable(y.start,(le?"Binding ":"Assigning to ")+y.name+" in strict mode"),le&&(O===Me&&y.name==="let"&&this.raiseRecoverable(y.start,"let is disallowed as a lexically bound name"),J&&(Ae(J,y.name)&&this.raiseRecoverable(y.start,"Argument name clash"),J[y.name]=!0),O!==l&&this.declareName(y.name,O,y.start));break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":le&&this.raiseRecoverable(y.start,"Binding member expression");break;case"ParenthesizedExpression":return le&&this.raiseRecoverable(y.start,"Binding parenthesized expression"),this.checkLValSimple(y.expression,O,J);default:this.raise(y.start,(le?"Binding":"Assigning to")+" rvalue")}},U.checkLValPattern=function(y,O,J){switch(O===void 0&&(O=ve),y.type){case"ObjectPattern":for(var le=0,Se=y.properties;le<Se.length;le+=1){var et=Se[le];this.checkLValInnerPattern(et,O,J)}break;case"ArrayPattern":for(var rt=0,bt=y.elements;rt<bt.length;rt+=1){var _t=bt[rt];_t&&this.checkLValInnerPattern(_t,O,J)}break;default:this.checkLValSimple(y,O,J)}},U.checkLValInnerPattern=function(y,O,J){switch(O===void 0&&(O=ve),y.type){case"Property":this.checkLValInnerPattern(y.value,O,J);break;case"AssignmentPattern":this.checkLValPattern(y.left,O,J);break;case"RestElement":this.checkLValPattern(y.argument,O,J);break;default:this.checkLValPattern(y,O,J)}};var K=function(O,J,le,Se,et){this.token=O,this.isExpr=!!J,this.preserveSpace=!!le,this.override=Se,this.generator=!!et},V={b_stat:new K("{",!1),b_expr:new K("{",!0),b_tmpl:new K("${",!1),p_stat:new K("(",!1),p_expr:new K("(",!0),q_tmpl:new K("`",!0,!0,function(y){return y.tryReadTemplateToken()}),f_stat:new K("function",!1),f_expr:new K("function",!0),f_expr_gen:new K("function",!0,!1,null,!0),f_gen:new K("function",!1,!1,null,!0)},ne=f.prototype;ne.initialContext=function(){return[V.b_stat]},ne.curContext=function(){return this.context[this.context.length-1]},ne.braceIsBlock=function(y){var O=this.curContext();return O===V.f_expr||O===V.f_stat?!0:y===S.colon&&(O===V.b_stat||O===V.b_expr)?!O.isExpr:y===S._return||y===S.name&&this.exprAllowed?B.test(this.input.slice(this.lastTokEnd,this.start)):y===S._else||y===S.semi||y===S.eof||y===S.parenR||y===S.arrow?!0:y===S.braceL?O===V.b_stat:y===S._var||y===S._const||y===S.name?!1:!this.exprAllowed},ne.inGeneratorContext=function(){for(var y=this.context.length-1;y>=1;y--){var O=this.context[y];if(O.token==="function")return O.generator}return!1},ne.updateContext=function(y){var O,J=this.type;J.keyword&&y===S.dot?this.exprAllowed=!1:(O=J.updateContext)?O.call(this,y):this.exprAllowed=J.beforeExpr},ne.overrideContext=function(y){this.curContext()!==y&&(this.context[this.context.length-1]=y)},S.parenR.updateContext=S.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var y=this.context.pop();y===V.b_stat&&this.curContext().token==="function"&&(y=this.context.pop()),this.exprAllowed=!y.isExpr},S.braceL.updateContext=function(y){this.context.push(this.braceIsBlock(y)?V.b_stat:V.b_expr),this.exprAllowed=!0},S.dollarBraceL.updateContext=function(){this.context.push(V.b_tmpl),this.exprAllowed=!0},S.parenL.updateContext=function(y){var O=y===S._if||y===S._for||y===S._with||y===S._while;this.context.push(O?V.p_stat:V.p_expr),this.exprAllowed=!0},S.incDec.updateContext=function(){},S._function.updateContext=S._class.updateContext=function(y){y.beforeExpr&&y!==S._else&&!(y===S.semi&&this.curContext()!==V.p_stat)&&!(y===S._return&&B.test(this.input.slice(this.lastTokEnd,this.start)))&&!((y===S.colon||y===S.braceL)&&this.curContext()===V.b_stat)?this.context.push(V.f_expr):this.context.push(V.f_stat),this.exprAllowed=!1},S.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},S.backQuote.updateContext=function(){this.curContext()===V.q_tmpl?this.context.pop():this.context.push(V.q_tmpl),this.exprAllowed=!1},S.star.updateContext=function(y){if(y===S._function){var O=this.context.length-1;this.context[O]===V.f_expr?this.context[O]=V.f_expr_gen:this.context[O]=V.f_gen}this.exprAllowed=!0},S.name.updateContext=function(y){var O=!1;this.options.ecmaVersion>=6&&y!==S.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(O=!0),this.exprAllowed=O};var z=f.prototype;z.checkPropClash=function(y,O,J){if(!(this.options.ecmaVersion>=9&&y.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(y.computed||y.method||y.shorthand))){var le=y.key,Se;switch(le.type){case"Identifier":Se=le.name;break;case"Literal":Se=String(le.value);break;default:return}var et=y.kind;if(this.options.ecmaVersion>=6){Se==="__proto__"&&et==="init"&&(O.proto&&(J?J.doubleProto<0&&(J.doubleProto=le.start):this.raiseRecoverable(le.start,"Redefinition of __proto__ property")),O.proto=!0);return}Se="$"+Se;var rt=O[Se];if(rt){var bt;et==="init"?bt=this.strict&&rt.init||rt.get||rt.set:bt=rt.init||rt[et],bt&&this.raiseRecoverable(le.start,"Redefinition of property")}else rt=O[Se]={init:!1,get:!1,set:!1};rt[et]=!0}},z.parseExpression=function(y,O){var J=this.start,le=this.startLoc,Se=this.parseMaybeAssign(y,O);if(this.type===S.comma){var et=this.startNodeAt(J,le);for(et.expressions=[Se];this.eat(S.comma);)et.expressions.push(this.parseMaybeAssign(y,O));return this.finishNode(et,"SequenceExpression")}return Se},z.parseMaybeAssign=function(y,O,J){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(y);this.exprAllowed=!1}var le=!1,Se=-1,et=-1,rt=-1;O?(Se=O.parenthesizedAssign,et=O.trailingComma,rt=O.doubleProto,O.parenthesizedAssign=O.trailingComma=-1):(O=new A,le=!0);var bt=this.start,_t=this.startLoc;(this.type===S.parenL||this.type===S.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=y==="await");var Zt=this.parseMaybeConditional(y,O);if(J&&(Zt=J.call(this,Zt,bt,_t)),this.type.isAssign){var rn=this.startNodeAt(bt,_t);return rn.operator=this.value,this.type===S.eq&&(Zt=this.toAssignable(Zt,!1,O)),le||(O.parenthesizedAssign=O.trailingComma=O.doubleProto=-1),O.shorthandAssign>=Zt.start&&(O.shorthandAssign=-1),this.type===S.eq?this.checkLValPattern(Zt):this.checkLValSimple(Zt),rn.left=Zt,this.next(),rn.right=this.parseMaybeAssign(y),rt>-1&&(O.doubleProto=rt),this.finishNode(rn,"AssignmentExpression")}else le&&this.checkExpressionErrors(O,!0);return Se>-1&&(O.parenthesizedAssign=Se),et>-1&&(O.trailingComma=et),Zt},z.parseMaybeConditional=function(y,O){var J=this.start,le=this.startLoc,Se=this.parseExprOps(y,O);if(this.checkExpressionErrors(O))return Se;if(this.eat(S.question)){var et=this.startNodeAt(J,le);return et.test=Se,et.consequent=this.parseMaybeAssign(),this.expect(S.colon),et.alternate=this.parseMaybeAssign(y),this.finishNode(et,"ConditionalExpression")}return Se},z.parseExprOps=function(y,O){var J=this.start,le=this.startLoc,Se=this.parseMaybeUnary(O,!1,!1,y);return this.checkExpressionErrors(O)||Se.start===J&&Se.type==="ArrowFunctionExpression"?Se:this.parseExprOp(Se,J,le,-1,y)},z.parseExprOp=function(y,O,J,le,Se){var et=this.type.binop;if(et!=null&&(!Se||this.type!==S._in)&&et>le){var rt=this.type===S.logicalOR||this.type===S.logicalAND,bt=this.type===S.coalesce;bt&&(et=S.logicalAND.binop);var _t=this.value;this.next();var Zt=this.start,rn=this.startLoc,Nn=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,Se),Zt,rn,et,Se),or=this.buildBinary(O,J,y,Nn,_t,rt||bt);return(rt&&this.type===S.coalesce||bt&&(this.type===S.logicalOR||this.type===S.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(or,O,J,le,Se)}return y},z.buildBinary=function(y,O,J,le,Se,et){le.type==="PrivateIdentifier"&&this.raise(le.start,"Private identifier can only be left side of binary expression");var rt=this.startNodeAt(y,O);return rt.left=J,rt.operator=Se,rt.right=le,this.finishNode(rt,et?"LogicalExpression":"BinaryExpression")},z.parseMaybeUnary=function(y,O,J,le){var Se=this.start,et=this.startLoc,rt;if(this.isContextual("await")&&this.canAwait)rt=this.parseAwait(le),O=!0;else if(this.type.prefix){var bt=this.startNode(),_t=this.type===S.incDec;bt.operator=this.value,bt.prefix=!0,this.next(),bt.argument=this.parseMaybeUnary(null,!0,_t,le),this.checkExpressionErrors(y,!0),_t?this.checkLValSimple(bt.argument):this.strict&&bt.operator==="delete"&&te(bt.argument)?this.raiseRecoverable(bt.start,"Deleting local variable in strict mode"):bt.operator==="delete"&&ae(bt.argument)?this.raiseRecoverable(bt.start,"Private fields can not be deleted"):O=!0,rt=this.finishNode(bt,_t?"UpdateExpression":"UnaryExpression")}else if(!O&&this.type===S.privateId)(le||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),rt=this.parsePrivateIdent(),this.type!==S._in&&this.unexpected();else{if(rt=this.parseExprSubscripts(y,le),this.checkExpressionErrors(y))return rt;for(;this.type.postfix&&!this.canInsertSemicolon();){var Zt=this.startNodeAt(Se,et);Zt.operator=this.value,Zt.prefix=!1,Zt.argument=rt,this.checkLValSimple(rt),this.next(),rt=this.finishNode(Zt,"UpdateExpression")}}if(!J&&this.eat(S.starstar))if(O)this.unexpected(this.lastTokStart);else return this.buildBinary(Se,et,rt,this.parseMaybeUnary(null,!1,!1,le),"**",!1);else return rt};function te(y){return y.type==="Identifier"||y.type==="ParenthesizedExpression"&&te(y.expression)}function ae(y){return y.type==="MemberExpression"&&y.property.type==="PrivateIdentifier"||y.type==="ChainExpression"&&ae(y.expression)||y.type==="ParenthesizedExpression"&&ae(y.expression)}z.parseExprSubscripts=function(y,O){var J=this.start,le=this.startLoc,Se=this.parseExprAtom(y,O);if(Se.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Se;var et=this.parseSubscripts(Se,J,le,!1,O);return y&&et.type==="MemberExpression"&&(y.parenthesizedAssign>=et.start&&(y.parenthesizedAssign=-1),y.parenthesizedBind>=et.start&&(y.parenthesizedBind=-1),y.trailingComma>=et.start&&(y.trailingComma=-1)),et},z.parseSubscripts=function(y,O,J,le,Se){for(var et=this.options.ecmaVersion>=8&&y.type==="Identifier"&&y.name==="async"&&this.lastTokEnd===y.end&&!this.canInsertSemicolon()&&y.end-y.start===5&&this.potentialArrowAt===y.start,rt=!1;;){var bt=this.parseSubscript(y,O,J,le,et,rt,Se);if(bt.optional&&(rt=!0),bt===y||bt.type==="ArrowFunctionExpression"){if(rt){var _t=this.startNodeAt(O,J);_t.expression=bt,bt=this.finishNode(_t,"ChainExpression")}return bt}y=bt}},z.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(S.arrow)},z.parseSubscriptAsyncArrow=function(y,O,J,le){return this.parseArrowExpression(this.startNodeAt(y,O),J,!0,le)},z.parseSubscript=function(y,O,J,le,Se,et,rt){var bt=this.options.ecmaVersion>=11,_t=bt&&this.eat(S.questionDot);le&&_t&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Zt=this.eat(S.bracketL);if(Zt||_t&&this.type!==S.parenL&&this.type!==S.backQuote||this.eat(S.dot)){var rn=this.startNodeAt(O,J);rn.object=y,Zt?(rn.property=this.parseExpression(),this.expect(S.bracketR)):this.type===S.privateId&&y.type!=="Super"?rn.property=this.parsePrivateIdent():rn.property=this.parseIdent(this.options.allowReserved!=="never"),rn.computed=!!Zt,bt&&(rn.optional=_t),y=this.finishNode(rn,"MemberExpression")}else if(!le&&this.eat(S.parenL)){var Nn=new A,or=this.yieldPos,es=this.awaitPos,Ft=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var He=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1,Nn);if(Se&&!_t&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Nn,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=or,this.awaitPos=es,this.awaitIdentPos=Ft,this.parseSubscriptAsyncArrow(O,J,He,rt);this.checkExpressionErrors(Nn,!0),this.yieldPos=or||this.yieldPos,this.awaitPos=es||this.awaitPos,this.awaitIdentPos=Ft||this.awaitIdentPos;var vt=this.startNodeAt(O,J);vt.callee=y,vt.arguments=He,bt&&(vt.optional=_t),y=this.finishNode(vt,"CallExpression")}else if(this.type===S.backQuote){(_t||et)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var $t=this.startNodeAt(O,J);$t.tag=y,$t.quasi=this.parseTemplate({isTagged:!0}),y=this.finishNode($t,"TaggedTemplateExpression")}return y},z.parseExprAtom=function(y,O,J){this.type===S.slash&&this.readRegexp();var le,Se=this.potentialArrowAt===this.start;switch(this.type){case S._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),le=this.startNode(),this.next(),this.type===S.parenL&&!this.allowDirectSuper&&this.raise(le.start,"super() call outside constructor of a subclass"),this.type!==S.dot&&this.type!==S.bracketL&&this.type!==S.parenL&&this.unexpected(),this.finishNode(le,"Super");case S._this:return le=this.startNode(),this.next(),this.finishNode(le,"ThisExpression");case S.name:var et=this.start,rt=this.startLoc,bt=this.containsEsc,_t=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!bt&&_t.name==="async"&&!this.canInsertSemicolon()&&this.eat(S._function))return this.overrideContext(V.f_expr),this.parseFunction(this.startNodeAt(et,rt),0,!1,!0,O);if(Se&&!this.canInsertSemicolon()){if(this.eat(S.arrow))return this.parseArrowExpression(this.startNodeAt(et,rt),[_t],!1,O);if(this.options.ecmaVersion>=8&&_t.name==="async"&&this.type===S.name&&!bt&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return _t=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(S.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(et,rt),[_t],!0,O)}return _t;case S.regexp:var Zt=this.value;return le=this.parseLiteral(Zt.value),le.regex={pattern:Zt.pattern,flags:Zt.flags},le;case S.num:case S.string:return this.parseLiteral(this.value);case S._null:case S._true:case S._false:return le=this.startNode(),le.value=this.type===S._null?null:this.type===S._true,le.raw=this.type.keyword,this.next(),this.finishNode(le,"Literal");case S.parenL:var rn=this.start,Nn=this.parseParenAndDistinguishExpression(Se,O);return y&&(y.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Nn)&&(y.parenthesizedAssign=rn),y.parenthesizedBind<0&&(y.parenthesizedBind=rn)),Nn;case S.bracketL:return le=this.startNode(),this.next(),le.elements=this.parseExprList(S.bracketR,!0,!0,y),this.finishNode(le,"ArrayExpression");case S.braceL:return this.overrideContext(V.b_expr),this.parseObj(!1,y);case S._function:return le=this.startNode(),this.next(),this.parseFunction(le,0);case S._class:return this.parseClass(this.startNode(),!1);case S._new:return this.parseNew();case S.backQuote:return this.parseTemplate();case S._import:return this.options.ecmaVersion>=11?this.parseExprImport(J):this.unexpected();default:return this.parseExprAtomDefault()}},z.parseExprAtomDefault=function(){this.unexpected()},z.parseExprImport=function(y){var O=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===S.parenL&&!y)return this.parseDynamicImport(O);if(this.type===S.dot){var J=this.startNodeAt(O.start,O.loc&&O.loc.start);return J.name="import",O.meta=this.finishNode(J,"Identifier"),this.parseImportMeta(O)}else this.unexpected()},z.parseDynamicImport=function(y){if(this.next(),y.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(S.parenR)?y.options=null:(this.expect(S.comma),this.afterTrailingComma(S.parenR)?y.options=null:(y.options=this.parseMaybeAssign(),this.eat(S.parenR)||(this.expect(S.comma),this.afterTrailingComma(S.parenR)||this.unexpected())));else if(!this.eat(S.parenR)){var O=this.start;this.eat(S.comma)&&this.eat(S.parenR)?this.raiseRecoverable(O,"Trailing comma is not allowed in import()"):this.unexpected(O)}return this.finishNode(y,"ImportExpression")},z.parseImportMeta=function(y){this.next();var O=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="meta"&&this.raiseRecoverable(y.property.start,"The only valid meta property for import is 'import.meta'"),O&&this.raiseRecoverable(y.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(y.start,"Cannot use 'import.meta' outside a module"),this.finishNode(y,"MetaProperty")},z.parseLiteral=function(y){var O=this.startNode();return O.value=y,O.raw=this.input.slice(this.start,this.end),O.raw.charCodeAt(O.raw.length-1)===110&&(O.bigint=O.value!=null?O.value.toString():O.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(O,"Literal")},z.parseParenExpression=function(){this.expect(S.parenL);var y=this.parseExpression();return this.expect(S.parenR),y},z.shouldParseArrow=function(y){return!this.canInsertSemicolon()},z.parseParenAndDistinguishExpression=function(y,O){var J=this.start,le=this.startLoc,Se,et=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var rt=this.start,bt=this.startLoc,_t=[],Zt=!0,rn=!1,Nn=new A,or=this.yieldPos,es=this.awaitPos,Ft;for(this.yieldPos=0,this.awaitPos=0;this.type!==S.parenR;)if(Zt?Zt=!1:this.expect(S.comma),et&&this.afterTrailingComma(S.parenR,!0)){rn=!0;break}else if(this.type===S.ellipsis){Ft=this.start,_t.push(this.parseParenItem(this.parseRestBinding())),this.type===S.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else _t.push(this.parseMaybeAssign(!1,Nn,this.parseParenItem));var He=this.lastTokEnd,vt=this.lastTokEndLoc;if(this.expect(S.parenR),y&&this.shouldParseArrow(_t)&&this.eat(S.arrow))return this.checkPatternErrors(Nn,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=or,this.awaitPos=es,this.parseParenArrowList(J,le,_t,O);(!_t.length||rn)&&this.unexpected(this.lastTokStart),Ft&&this.unexpected(Ft),this.checkExpressionErrors(Nn,!0),this.yieldPos=or||this.yieldPos,this.awaitPos=es||this.awaitPos,_t.length>1?(Se=this.startNodeAt(rt,bt),Se.expressions=_t,this.finishNodeAt(Se,"SequenceExpression",He,vt)):Se=_t[0]}else Se=this.parseParenExpression();if(this.options.preserveParens){var $t=this.startNodeAt(J,le);return $t.expression=Se,this.finishNode($t,"ParenthesizedExpression")}else return Se},z.parseParenItem=function(y){return y},z.parseParenArrowList=function(y,O,J,le){return this.parseArrowExpression(this.startNodeAt(y,O),J,!1,le)};var ce=[];z.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var y=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===S.dot){var O=this.startNodeAt(y.start,y.loc&&y.loc.start);O.name="new",y.meta=this.finishNode(O,"Identifier"),this.next();var J=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="target"&&this.raiseRecoverable(y.property.start,"The only valid meta property for new is 'new.target'"),J&&this.raiseRecoverable(y.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(y.start,"'new.target' can only be used in functions and class static block"),this.finishNode(y,"MetaProperty")}var le=this.start,Se=this.startLoc;return y.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),le,Se,!0,!1),this.eat(S.parenL)?y.arguments=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1):y.arguments=ce,this.finishNode(y,"NewExpression")},z.parseTemplateElement=function(y){var O=y.isTagged,J=this.startNode();return this.type===S.invalidTemplate?(O||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),J.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):J.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),J.tail=this.type===S.backQuote,this.finishNode(J,"TemplateElement")},z.parseTemplate=function(y){y===void 0&&(y={});var O=y.isTagged;O===void 0&&(O=!1);var J=this.startNode();this.next(),J.expressions=[];var le=this.parseTemplateElement({isTagged:O});for(J.quasis=[le];!le.tail;)this.type===S.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(S.dollarBraceL),J.expressions.push(this.parseExpression()),this.expect(S.braceR),J.quasis.push(le=this.parseTemplateElement({isTagged:O}));return this.next(),this.finishNode(J,"TemplateLiteral")},z.isAsyncProp=function(y){return!y.computed&&y.key.type==="Identifier"&&y.key.name==="async"&&(this.type===S.name||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===S.star)&&!B.test(this.input.slice(this.lastTokEnd,this.start))},z.parseObj=function(y,O){var J=this.startNode(),le=!0,Se={};for(J.properties=[],this.next();!this.eat(S.braceR);){if(le)le=!1;else if(this.expect(S.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(S.braceR))break;var et=this.parseProperty(y,O);y||this.checkPropClash(et,Se,O),J.properties.push(et)}return this.finishNode(J,y?"ObjectPattern":"ObjectExpression")},z.parseProperty=function(y,O){var J=this.startNode(),le,Se,et,rt;if(this.options.ecmaVersion>=9&&this.eat(S.ellipsis))return y?(J.argument=this.parseIdent(!1),this.type===S.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(J,"RestElement")):(J.argument=this.parseMaybeAssign(!1,O),this.type===S.comma&&O&&O.trailingComma<0&&(O.trailingComma=this.start),this.finishNode(J,"SpreadElement"));this.options.ecmaVersion>=6&&(J.method=!1,J.shorthand=!1,(y||O)&&(et=this.start,rt=this.startLoc),y||(le=this.eat(S.star)));var bt=this.containsEsc;return this.parsePropertyName(J),!y&&!bt&&this.options.ecmaVersion>=8&&!le&&this.isAsyncProp(J)?(Se=!0,le=this.options.ecmaVersion>=9&&this.eat(S.star),this.parsePropertyName(J)):Se=!1,this.parsePropertyValue(J,y,le,Se,et,rt,O,bt),this.finishNode(J,"Property")},z.parseGetterSetter=function(y){var O=y.key.name;this.parsePropertyName(y),y.value=this.parseMethod(!1),y.kind=O;var J=y.kind==="get"?0:1;if(y.value.params.length!==J){var le=y.value.start;y.kind==="get"?this.raiseRecoverable(le,"getter should have no params"):this.raiseRecoverable(le,"setter should have exactly one param")}else y.kind==="set"&&y.value.params[0].type==="RestElement"&&this.raiseRecoverable(y.value.params[0].start,"Setter cannot use rest params")},z.parsePropertyValue=function(y,O,J,le,Se,et,rt,bt){(J||le)&&this.type===S.colon&&this.unexpected(),this.eat(S.colon)?(y.value=O?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,rt),y.kind="init"):this.options.ecmaVersion>=6&&this.type===S.parenL?(O&&this.unexpected(),y.method=!0,y.value=this.parseMethod(J,le),y.kind="init"):!O&&!bt&&this.options.ecmaVersion>=5&&!y.computed&&y.key.type==="Identifier"&&(y.key.name==="get"||y.key.name==="set")&&this.type!==S.comma&&this.type!==S.braceR&&this.type!==S.eq?((J||le)&&this.unexpected(),this.parseGetterSetter(y)):this.options.ecmaVersion>=6&&!y.computed&&y.key.type==="Identifier"?((J||le)&&this.unexpected(),this.checkUnreserved(y.key),y.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Se),O?y.value=this.parseMaybeDefault(Se,et,this.copyNode(y.key)):this.type===S.eq&&rt?(rt.shorthandAssign<0&&(rt.shorthandAssign=this.start),y.value=this.parseMaybeDefault(Se,et,this.copyNode(y.key))):y.value=this.copyNode(y.key),y.kind="init",y.shorthand=!0):this.unexpected()},z.parsePropertyName=function(y){if(this.options.ecmaVersion>=6){if(this.eat(S.bracketL))return y.computed=!0,y.key=this.parseMaybeAssign(),this.expect(S.bracketR),y.key;y.computed=!1}return y.key=this.type===S.num||this.type===S.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},z.initFunction=function(y){y.id=null,this.options.ecmaVersion>=6&&(y.generator=y.expression=!1),this.options.ecmaVersion>=8&&(y.async=!1)},z.parseMethod=function(y,O,J){var le=this.startNode(),Se=this.yieldPos,et=this.awaitPos,rt=this.awaitIdentPos;return this.initFunction(le),this.options.ecmaVersion>=6&&(le.generator=y),this.options.ecmaVersion>=8&&(le.async=!!O),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(he(O,le.generator)|Ye|(J?se:0)),this.expect(S.parenL),le.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(le,!1,!0,!1),this.yieldPos=Se,this.awaitPos=et,this.awaitIdentPos=rt,this.finishNode(le,"FunctionExpression")},z.parseArrowExpression=function(y,O,J,le){var Se=this.yieldPos,et=this.awaitPos,rt=this.awaitIdentPos;return this.enterScope(he(J,!1)|Ct),this.initFunction(y),this.options.ecmaVersion>=8&&(y.async=!!J),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,y.params=this.toAssignableList(O,!0),this.parseFunctionBody(y,!0,!1,le),this.yieldPos=Se,this.awaitPos=et,this.awaitIdentPos=rt,this.finishNode(y,"ArrowFunctionExpression")},z.parseFunctionBody=function(y,O,J,le){var Se=O&&this.type!==S.braceL,et=this.strict,rt=!1;if(Se)y.body=this.parseMaybeAssign(le),y.expression=!0,this.checkParams(y,!1);else{var bt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(y.params);(!et||bt)&&(rt=this.strictDirective(this.end),rt&&bt&&this.raiseRecoverable(y.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var _t=this.labels;this.labels=[],rt&&(this.strict=!0),this.checkParams(y,!et&&!rt&&!O&&!J&&this.isSimpleParamList(y.params)),this.strict&&y.id&&this.checkLValSimple(y.id,l),y.body=this.parseBlock(!1,void 0,rt&&!et),y.expression=!1,this.adaptDirectivePrologue(y.body.body),this.labels=_t}this.exitScope()},z.isSimpleParamList=function(y){for(var O=0,J=y;O<J.length;O+=1){var le=J[O];if(le.type!=="Identifier")return!1}return!0},z.checkParams=function(y,O){for(var J=Object.create(null),le=0,Se=y.params;le<Se.length;le+=1){var et=Se[le];this.checkLValInnerPattern(et,me,O?null:J)}},z.parseExprList=function(y,O,J,le){for(var Se=[],et=!0;!this.eat(y);){if(et)et=!1;else if(this.expect(S.comma),O&&this.afterTrailingComma(y))break;var rt=void 0;J&&this.type===S.comma?rt=null:this.type===S.ellipsis?(rt=this.parseSpread(le),le&&this.type===S.comma&&le.trailingComma<0&&(le.trailingComma=this.start)):rt=this.parseMaybeAssign(!1,le),Se.push(rt)}return Se},z.checkUnreserved=function(y){var O=y.start,J=y.end,le=y.name;if(this.inGenerator&&le==="yield"&&this.raiseRecoverable(O,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&le==="await"&&this.raiseRecoverable(O,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Q)&&le==="arguments"&&this.raiseRecoverable(O,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(le==="arguments"||le==="await")&&this.raise(O,"Cannot use "+le+" in class static initialization block"),this.keywords.test(le)&&this.raise(O,"Unexpected keyword '"+le+"'"),!(this.options.ecmaVersion<6&&this.input.slice(O,J).indexOf("\\")!==-1)){var Se=this.strict?this.reservedWordsStrict:this.reservedWords;Se.test(le)&&(!this.inAsync&&le==="await"&&this.raiseRecoverable(O,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(O,"The keyword '"+le+"' is reserved"))}},z.parseIdent=function(y){var O=this.parseIdentNode();return this.next(!!y),this.finishNode(O,"Identifier"),y||(this.checkUnreserved(O),O.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=O.start)),O},z.parseIdentNode=function(){var y=this.startNode();return this.type===S.name?y.name=this.value:this.type.keyword?(y.name=this.type.keyword,(y.name==="class"||y.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=S.name):this.unexpected(),y},z.parsePrivateIdent=function(){var y=this.startNode();return this.type===S.privateId?y.name=this.value:this.unexpected(),this.next(),this.finishNode(y,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(y.start,"Private field '#"+y.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(y)),y},z.parseYield=function(y){this.yieldPos||(this.yieldPos=this.start);var O=this.startNode();return this.next(),this.type===S.semi||this.canInsertSemicolon()||this.type!==S.star&&!this.type.startsExpr?(O.delegate=!1,O.argument=null):(O.delegate=this.eat(S.star),O.argument=this.parseMaybeAssign(y)),this.finishNode(O,"YieldExpression")},z.parseAwait=function(y){this.awaitPos||(this.awaitPos=this.start);var O=this.startNode();return this.next(),O.argument=this.parseMaybeUnary(null,!0,!1,y),this.finishNode(O,"AwaitExpression")};var re=f.prototype;re.raise=function(y,O){var J=nt(this.input,y);O+=" ("+J.line+":"+J.column+")",this.sourceFile&&(O+=" in "+this.sourceFile);var le=new SyntaxError(O);throw le.pos=y,le.loc=J,le.raisedAt=this.pos,le},re.raiseRecoverable=re.raise,re.curPosition=function(){if(this.options.locations)return new Re(this.curLine,this.pos-this.lineStart)};var be=f.prototype,ke=function(O){this.flags=O,this.var=[],this.lexical=[],this.functions=[]};be.enterScope=function(y){this.scopeStack.push(new ke(y))},be.exitScope=function(){this.scopeStack.pop()},be.treatFunctionsAsVarInScope=function(y){return y.flags&Ne||!this.inModule&&y.flags&We},be.declareName=function(y,O,J){var le=!1;if(O===Me){var Se=this.currentScope();le=Se.lexical.indexOf(y)>-1||Se.functions.indexOf(y)>-1||Se.var.indexOf(y)>-1,Se.lexical.push(y),this.inModule&&Se.flags&We&&delete this.undefinedExports[y]}else if(O===De){var et=this.currentScope();et.lexical.push(y)}else if(O===Je){var rt=this.currentScope();this.treatFunctionsAsVar?le=rt.lexical.indexOf(y)>-1:le=rt.lexical.indexOf(y)>-1||rt.var.indexOf(y)>-1,rt.functions.push(y)}else for(var bt=this.scopeStack.length-1;bt>=0;--bt){var _t=this.scopeStack[bt];if(_t.lexical.indexOf(y)>-1&&!(_t.flags&q&&_t.lexical[0]===y)||!this.treatFunctionsAsVarInScope(_t)&&_t.functions.indexOf(y)>-1){le=!0;break}if(_t.var.push(y),this.inModule&&_t.flags&We&&delete this.undefinedExports[y],_t.flags&Q)break}le&&this.raiseRecoverable(J,"Identifier '"+y+"' has already been declared")},be.checkLocalExport=function(y){this.scopeStack[0].lexical.indexOf(y.name)===-1&&this.scopeStack[0].var.indexOf(y.name)===-1&&(this.undefinedExports[y.name]=y)},be.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},be.currentVarScope=function(){for(var y=this.scopeStack.length-1;;y--){var O=this.scopeStack[y];if(O.flags&(Q|I|L))return O}},be.currentThisScope=function(){for(var y=this.scopeStack.length-1;;y--){var O=this.scopeStack[y];if(O.flags&(Q|I|L)&&!(O.flags&Ct))return O}};var Pe=function(O,J,le){this.type="",this.start=J,this.end=0,O.options.locations&&(this.loc=new it(O,le)),O.options.directSourceFile&&(this.sourceFile=O.options.directSourceFile),O.options.ranges&&(this.range=[J,0])},ze=f.prototype;ze.startNode=function(){return new Pe(this,this.start,this.startLoc)},ze.startNodeAt=function(y,O){return new Pe(this,y,O)};function _e(y,O,J,le){return y.type=O,y.end=J,this.options.locations&&(y.loc.end=le),this.options.ranges&&(y.range[1]=J),y}ze.finishNode=function(y,O){return _e.call(this,y,O,this.lastTokEnd,this.lastTokEndLoc)},ze.finishNodeAt=function(y,O,J,le){return _e.call(this,y,O,J,le)},ze.copyNode=function(y){var O=new Pe(this,y.start,this.startLoc);for(var J in y)O[J]=y[J];return O};var $e="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",Fe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Xe=Fe+" Extended_Pictographic",Ze=Xe,Qe=Ze+" EBase EComp EMod EPres ExtPict",ft=Qe,dt=ft,Et={9:Fe,10:Xe,11:Ze,12:Qe,13:ft,14:dt},xt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Te={9:"",10:"",11:"",12:"",13:"",14:xt},Ke="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",mt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Nt=mt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",kt=Nt+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Bt=kt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",At=Bt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Dt=At+" "+$e,Ut={9:mt,10:Nt,11:kt,12:Bt,13:At,14:Dt},Rt={};function Kt(y){var O=Rt[y]={binary:xe(Et[y]+" "+Ke),binaryOfStrings:xe(Te[y]),nonBinary:{General_Category:xe(Ke),Script:xe(Ut[y])}};O.nonBinary.Script_Extensions=O.nonBinary.Script,O.nonBinary.gc=O.nonBinary.General_Category,O.nonBinary.sc=O.nonBinary.Script,O.nonBinary.scx=O.nonBinary.Script_Extensions}for(var en=0,bn=[9,10,11,12,13,14];en<bn.length;en+=1){var En=bn[en];Kt(En)}var wt=f.prototype,Tn=function(O,J){this.parent=O,this.base=J||this};Tn.prototype.separatedFrom=function(O){for(var J=this;J;J=J.parent)for(var le=O;le;le=le.parent)if(J.base===le.base&&J!==le)return!0;return!1},Tn.prototype.sibling=function(){return new Tn(this.parent,this.base)};var Rn=function(O){this.parser=O,this.validFlags="gim"+(O.options.ecmaVersion>=6?"uy":"")+(O.options.ecmaVersion>=9?"s":"")+(O.options.ecmaVersion>=13?"d":"")+(O.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Rt[O.options.ecmaVersion>=14?14:O.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Rn.prototype.reset=function(O,J,le){var Se=le.indexOf("v")!==-1,et=le.indexOf("u")!==-1;this.start=O|0,this.source=J+"",this.flags=le,Se&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=et&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=et&&this.parser.options.ecmaVersion>=9)},Rn.prototype.raise=function(O){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+O)},Rn.prototype.at=function(O,J){J===void 0&&(J=!1);var le=this.source,Se=le.length;if(O>=Se)return-1;var et=le.charCodeAt(O);if(!(J||this.switchU)||et<=55295||et>=57344||O+1>=Se)return et;var rt=le.charCodeAt(O+1);return rt>=56320&&rt<=57343?(et<<10)+rt-56613888:et},Rn.prototype.nextIndex=function(O,J){J===void 0&&(J=!1);var le=this.source,Se=le.length;if(O>=Se)return Se;var et=le.charCodeAt(O),rt;return!(J||this.switchU)||et<=55295||et>=57344||O+1>=Se||(rt=le.charCodeAt(O+1))<56320||rt>57343?O+1:O+2},Rn.prototype.current=function(O){return O===void 0&&(O=!1),this.at(this.pos,O)},Rn.prototype.lookahead=function(O){return O===void 0&&(O=!1),this.at(this.nextIndex(this.pos,O),O)},Rn.prototype.advance=function(O){O===void 0&&(O=!1),this.pos=this.nextIndex(this.pos,O)},Rn.prototype.eat=function(O,J){return J===void 0&&(J=!1),this.current(J)===O?(this.advance(J),!0):!1},Rn.prototype.eatChars=function(O,J){J===void 0&&(J=!1);for(var le=this.pos,Se=0,et=O;Se<et.length;Se+=1){var rt=et[Se],bt=this.at(le,J);if(bt===-1||bt!==rt)return!1;le=this.nextIndex(le,J)}return this.pos=le,!0},wt.validateRegExpFlags=function(y){for(var O=y.validFlags,J=y.flags,le=!1,Se=!1,et=0;et<J.length;et++){var rt=J.charAt(et);O.indexOf(rt)===-1&&this.raise(y.start,"Invalid regular expression flag"),J.indexOf(rt,et+1)>-1&&this.raise(y.start,"Duplicate regular expression flag"),rt==="u"&&(le=!0),rt==="v"&&(Se=!0)}this.options.ecmaVersion>=15&&le&&Se&&this.raise(y.start,"Invalid regular expression flag")};function wn(y){for(var O in y)return!0;return!1}wt.validateRegExpPattern=function(y){this.regexp_pattern(y),!y.switchN&&this.options.ecmaVersion>=9&&wn(y.groupNames)&&(y.switchN=!0,this.regexp_pattern(y))},wt.regexp_pattern=function(y){y.pos=0,y.lastIntValue=0,y.lastStringValue="",y.lastAssertionIsQuantifiable=!1,y.numCapturingParens=0,y.maxBackReference=0,y.groupNames=Object.create(null),y.backReferenceNames.length=0,y.branchID=null,this.regexp_disjunction(y),y.pos!==y.source.length&&(y.eat(41)&&y.raise("Unmatched ')'"),(y.eat(93)||y.eat(125))&&y.raise("Lone quantifier brackets")),y.maxBackReference>y.numCapturingParens&&y.raise("Invalid escape");for(var O=0,J=y.backReferenceNames;O<J.length;O+=1){var le=J[O];y.groupNames[le]||y.raise("Invalid named capture referenced")}},wt.regexp_disjunction=function(y){var O=this.options.ecmaVersion>=16;for(O&&(y.branchID=new Tn(y.branchID,null)),this.regexp_alternative(y);y.eat(124);)O&&(y.branchID=y.branchID.sibling()),this.regexp_alternative(y);O&&(y.branchID=y.branchID.parent),this.regexp_eatQuantifier(y,!0)&&y.raise("Nothing to repeat"),y.eat(123)&&y.raise("Lone quantifier brackets")},wt.regexp_alternative=function(y){for(;y.pos<y.source.length&&this.regexp_eatTerm(y););},wt.regexp_eatTerm=function(y){return this.regexp_eatAssertion(y)?(y.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(y)&&y.switchU&&y.raise("Invalid quantifier"),!0):(y.switchU?this.regexp_eatAtom(y):this.regexp_eatExtendedAtom(y))?(this.regexp_eatQuantifier(y),!0):!1},wt.regexp_eatAssertion=function(y){var O=y.pos;if(y.lastAssertionIsQuantifiable=!1,y.eat(94)||y.eat(36))return!0;if(y.eat(92)){if(y.eat(66)||y.eat(98))return!0;y.pos=O}if(y.eat(40)&&y.eat(63)){var J=!1;if(this.options.ecmaVersion>=9&&(J=y.eat(60)),y.eat(61)||y.eat(33))return this.regexp_disjunction(y),y.eat(41)||y.raise("Unterminated group"),y.lastAssertionIsQuantifiable=!J,!0}return y.pos=O,!1},wt.regexp_eatQuantifier=function(y,O){return O===void 0&&(O=!1),this.regexp_eatQuantifierPrefix(y,O)?(y.eat(63),!0):!1},wt.regexp_eatQuantifierPrefix=function(y,O){return y.eat(42)||y.eat(43)||y.eat(63)||this.regexp_eatBracedQuantifier(y,O)},wt.regexp_eatBracedQuantifier=function(y,O){var J=y.pos;if(y.eat(123)){var le=0,Se=-1;if(this.regexp_eatDecimalDigits(y)&&(le=y.lastIntValue,y.eat(44)&&this.regexp_eatDecimalDigits(y)&&(Se=y.lastIntValue),y.eat(125)))return Se!==-1&&Se<le&&!O&&y.raise("numbers out of order in {} quantifier"),!0;y.switchU&&!O&&y.raise("Incomplete quantifier"),y.pos=J}return!1},wt.regexp_eatAtom=function(y){return this.regexp_eatPatternCharacters(y)||y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)},wt.regexp_eatReverseSolidusAtomEscape=function(y){var O=y.pos;if(y.eat(92)){if(this.regexp_eatAtomEscape(y))return!0;y.pos=O}return!1},wt.regexp_eatUncapturingGroup=function(y){var O=y.pos;if(y.eat(40)){if(y.eat(63)){if(this.options.ecmaVersion>=16){var J=this.regexp_eatModifiers(y),le=y.eat(45);if(J||le){for(var Se=0;Se<J.length;Se++){var et=J.charAt(Se);J.indexOf(et,Se+1)>-1&&y.raise("Duplicate regular expression modifiers")}if(le){var rt=this.regexp_eatModifiers(y);!J&&!rt&&y.current()===58&&y.raise("Invalid regular expression modifiers");for(var bt=0;bt<rt.length;bt++){var _t=rt.charAt(bt);(rt.indexOf(_t,bt+1)>-1||J.indexOf(_t)>-1)&&y.raise("Duplicate regular expression modifiers")}}}}if(y.eat(58)){if(this.regexp_disjunction(y),y.eat(41))return!0;y.raise("Unterminated group")}}y.pos=O}return!1},wt.regexp_eatCapturingGroup=function(y){if(y.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(y):y.current()===63&&y.raise("Invalid group"),this.regexp_disjunction(y),y.eat(41))return y.numCapturingParens+=1,!0;y.raise("Unterminated group")}return!1},wt.regexp_eatModifiers=function(y){for(var O="",J=0;(J=y.current())!==-1&&Er(J);)O+=Le(J),y.advance();return O};function Er(y){return y===105||y===109||y===115}wt.regexp_eatExtendedAtom=function(y){return y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)||this.regexp_eatInvalidBracedQuantifier(y)||this.regexp_eatExtendedPatternCharacter(y)},wt.regexp_eatInvalidBracedQuantifier=function(y){return this.regexp_eatBracedQuantifier(y,!0)&&y.raise("Nothing to repeat"),!1},wt.regexp_eatSyntaxCharacter=function(y){var O=y.current();return Or(O)?(y.lastIntValue=O,y.advance(),!0):!1};function Or(y){return y===36||y>=40&&y<=43||y===46||y===63||y>=91&&y<=94||y>=123&&y<=125}wt.regexp_eatPatternCharacters=function(y){for(var O=y.pos,J=0;(J=y.current())!==-1&&!Or(J);)y.advance();return y.pos!==O},wt.regexp_eatExtendedPatternCharacter=function(y){var O=y.current();return O!==-1&&O!==36&&!(O>=40&&O<=43)&&O!==46&&O!==63&&O!==91&&O!==94&&O!==124?(y.advance(),!0):!1},wt.regexp_groupSpecifier=function(y){if(y.eat(63)){this.regexp_eatGroupName(y)||y.raise("Invalid group");var O=this.options.ecmaVersion>=16,J=y.groupNames[y.lastStringValue];if(J)if(O)for(var le=0,Se=J;le<Se.length;le+=1){var et=Se[le];et.separatedFrom(y.branchID)||y.raise("Duplicate capture group name")}else y.raise("Duplicate capture group name");O?(J||(y.groupNames[y.lastStringValue]=[])).push(y.branchID):y.groupNames[y.lastStringValue]=!0}},wt.regexp_eatGroupName=function(y){if(y.lastStringValue="",y.eat(60)){if(this.regexp_eatRegExpIdentifierName(y)&&y.eat(62))return!0;y.raise("Invalid capture group name")}return!1},wt.regexp_eatRegExpIdentifierName=function(y){if(y.lastStringValue="",this.regexp_eatRegExpIdentifierStart(y)){for(y.lastStringValue+=Le(y.lastIntValue);this.regexp_eatRegExpIdentifierPart(y);)y.lastStringValue+=Le(y.lastIntValue);return!0}return!1},wt.regexp_eatRegExpIdentifierStart=function(y){var O=y.pos,J=this.options.ecmaVersion>=11,le=y.current(J);return y.advance(J),le===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,J)&&(le=y.lastIntValue),sr(le)?(y.lastIntValue=le,!0):(y.pos=O,!1)};function sr(y){return v(y,!0)||y===36||y===95}wt.regexp_eatRegExpIdentifierPart=function(y){var O=y.pos,J=this.options.ecmaVersion>=11,le=y.current(J);return y.advance(J),le===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,J)&&(le=y.lastIntValue),tr(le)?(y.lastIntValue=le,!0):(y.pos=O,!1)};function tr(y){return w(y,!0)||y===36||y===95||y===8204||y===8205}wt.regexp_eatAtomEscape=function(y){return this.regexp_eatBackReference(y)||this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)||y.switchN&&this.regexp_eatKGroupName(y)?!0:(y.switchU&&(y.current()===99&&y.raise("Invalid unicode escape"),y.raise("Invalid escape")),!1)},wt.regexp_eatBackReference=function(y){var O=y.pos;if(this.regexp_eatDecimalEscape(y)){var J=y.lastIntValue;if(y.switchU)return J>y.maxBackReference&&(y.maxBackReference=J),!0;if(J<=y.numCapturingParens)return!0;y.pos=O}return!1},wt.regexp_eatKGroupName=function(y){if(y.eat(107)){if(this.regexp_eatGroupName(y))return y.backReferenceNames.push(y.lastStringValue),!0;y.raise("Invalid named reference")}return!1},wt.regexp_eatCharacterEscape=function(y){return this.regexp_eatControlEscape(y)||this.regexp_eatCControlLetter(y)||this.regexp_eatZero(y)||this.regexp_eatHexEscapeSequence(y)||this.regexp_eatRegExpUnicodeEscapeSequence(y,!1)||!y.switchU&&this.regexp_eatLegacyOctalEscapeSequence(y)||this.regexp_eatIdentityEscape(y)},wt.regexp_eatCControlLetter=function(y){var O=y.pos;if(y.eat(99)){if(this.regexp_eatControlLetter(y))return!0;y.pos=O}return!1},wt.regexp_eatZero=function(y){return y.current()===48&&!mr(y.lookahead())?(y.lastIntValue=0,y.advance(),!0):!1},wt.regexp_eatControlEscape=function(y){var O=y.current();return O===116?(y.lastIntValue=9,y.advance(),!0):O===110?(y.lastIntValue=10,y.advance(),!0):O===118?(y.lastIntValue=11,y.advance(),!0):O===102?(y.lastIntValue=12,y.advance(),!0):O===114?(y.lastIntValue=13,y.advance(),!0):!1},wt.regexp_eatControlLetter=function(y){var O=y.current();return fr(O)?(y.lastIntValue=O%32,y.advance(),!0):!1};function fr(y){return y>=65&&y<=90||y>=97&&y<=122}wt.regexp_eatRegExpUnicodeEscapeSequence=function(y,O){O===void 0&&(O=!1);var J=y.pos,le=O||y.switchU;if(y.eat(117)){if(this.regexp_eatFixedHexDigits(y,4)){var Se=y.lastIntValue;if(le&&Se>=55296&&Se<=56319){var et=y.pos;if(y.eat(92)&&y.eat(117)&&this.regexp_eatFixedHexDigits(y,4)){var rt=y.lastIntValue;if(rt>=56320&&rt<=57343)return y.lastIntValue=(Se-55296)*1024+(rt-56320)+65536,!0}y.pos=et,y.lastIntValue=Se}return!0}if(le&&y.eat(123)&&this.regexp_eatHexDigits(y)&&y.eat(125)&&ar(y.lastIntValue))return!0;le&&y.raise("Invalid unicode escape"),y.pos=J}return!1};function ar(y){return y>=0&&y<=1114111}wt.regexp_eatIdentityEscape=function(y){if(y.switchU)return this.regexp_eatSyntaxCharacter(y)?!0:y.eat(47)?(y.lastIntValue=47,!0):!1;var O=y.current();return O!==99&&(!y.switchN||O!==107)?(y.lastIntValue=O,y.advance(),!0):!1},wt.regexp_eatDecimalEscape=function(y){y.lastIntValue=0;var O=y.current();if(O>=49&&O<=57){do y.lastIntValue=10*y.lastIntValue+(O-48),y.advance();while((O=y.current())>=48&&O<=57);return!0}return!1};var Zr=0,zn=1,nr=2;wt.regexp_eatCharacterClassEscape=function(y){var O=y.current();if(gi(O))return y.lastIntValue=-1,y.advance(),zn;var J=!1;if(y.switchU&&this.options.ecmaVersion>=9&&((J=O===80)||O===112)){y.lastIntValue=-1,y.advance();var le;if(y.eat(123)&&(le=this.regexp_eatUnicodePropertyValueExpression(y))&&y.eat(125))return J&&le===nr&&y.raise("Invalid property name"),le;y.raise("Invalid property name")}return Zr};function gi(y){return y===100||y===68||y===115||y===83||y===119||y===87}wt.regexp_eatUnicodePropertyValueExpression=function(y){var O=y.pos;if(this.regexp_eatUnicodePropertyName(y)&&y.eat(61)){var J=y.lastStringValue;if(this.regexp_eatUnicodePropertyValue(y)){var le=y.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(y,J,le),zn}}if(y.pos=O,this.regexp_eatLoneUnicodePropertyNameOrValue(y)){var Se=y.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(y,Se)}return Zr},wt.regexp_validateUnicodePropertyNameAndValue=function(y,O,J){Ae(y.unicodeProperties.nonBinary,O)||y.raise("Invalid property name"),y.unicodeProperties.nonBinary[O].test(J)||y.raise("Invalid property value")},wt.regexp_validateUnicodePropertyNameOrValue=function(y,O){if(y.unicodeProperties.binary.test(O))return zn;if(y.switchV&&y.unicodeProperties.binaryOfStrings.test(O))return nr;y.raise("Invalid property name")},wt.regexp_eatUnicodePropertyName=function(y){var O=0;for(y.lastStringValue="";_i(O=y.current());)y.lastStringValue+=Le(O),y.advance();return y.lastStringValue!==""};function _i(y){return fr(y)||y===95}wt.regexp_eatUnicodePropertyValue=function(y){var O=0;for(y.lastStringValue="";Qr(O=y.current());)y.lastStringValue+=Le(O),y.advance();return y.lastStringValue!==""};function Qr(y){return _i(y)||mr(y)}wt.regexp_eatLoneUnicodePropertyNameOrValue=function(y){return this.regexp_eatUnicodePropertyValue(y)},wt.regexp_eatCharacterClass=function(y){if(y.eat(91)){var O=y.eat(94),J=this.regexp_classContents(y);return y.eat(93)||y.raise("Unterminated character class"),O&&J===nr&&y.raise("Negated character class may contain strings"),!0}return!1},wt.regexp_classContents=function(y){return y.current()===93?zn:y.switchV?this.regexp_classSetExpression(y):(this.regexp_nonEmptyClassRanges(y),zn)},wt.regexp_nonEmptyClassRanges=function(y){for(;this.regexp_eatClassAtom(y);){var O=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassAtom(y)){var J=y.lastIntValue;y.switchU&&(O===-1||J===-1)&&y.raise("Invalid character class"),O!==-1&&J!==-1&&O>J&&y.raise("Range out of order in character class")}}},wt.regexp_eatClassAtom=function(y){var O=y.pos;if(y.eat(92)){if(this.regexp_eatClassEscape(y))return!0;if(y.switchU){var J=y.current();(J===99||Gr(J))&&y.raise("Invalid class escape"),y.raise("Invalid escape")}y.pos=O}var le=y.current();return le!==93?(y.lastIntValue=le,y.advance(),!0):!1},wt.regexp_eatClassEscape=function(y){var O=y.pos;if(y.eat(98))return y.lastIntValue=8,!0;if(y.switchU&&y.eat(45))return y.lastIntValue=45,!0;if(!y.switchU&&y.eat(99)){if(this.regexp_eatClassControlLetter(y))return!0;y.pos=O}return this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)},wt.regexp_classSetExpression=function(y){var O=zn,J;if(!this.regexp_eatClassSetRange(y))if(J=this.regexp_eatClassSetOperand(y)){J===nr&&(O=nr);for(var le=y.pos;y.eatChars([38,38]);){if(y.current()!==38&&(J=this.regexp_eatClassSetOperand(y))){J!==nr&&(O=zn);continue}y.raise("Invalid character in character class")}if(le!==y.pos)return O;for(;y.eatChars([45,45]);)this.regexp_eatClassSetOperand(y)||y.raise("Invalid character in character class");if(le!==y.pos)return O}else y.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(y)){if(J=this.regexp_eatClassSetOperand(y),!J)return O;J===nr&&(O=nr)}},wt.regexp_eatClassSetRange=function(y){var O=y.pos;if(this.regexp_eatClassSetCharacter(y)){var J=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassSetCharacter(y)){var le=y.lastIntValue;return J!==-1&&le!==-1&&J>le&&y.raise("Range out of order in character class"),!0}y.pos=O}return!1},wt.regexp_eatClassSetOperand=function(y){return this.regexp_eatClassSetCharacter(y)?zn:this.regexp_eatClassStringDisjunction(y)||this.regexp_eatNestedClass(y)},wt.regexp_eatNestedClass=function(y){var O=y.pos;if(y.eat(91)){var J=y.eat(94),le=this.regexp_classContents(y);if(y.eat(93))return J&&le===nr&&y.raise("Negated character class may contain strings"),le;y.pos=O}if(y.eat(92)){var Se=this.regexp_eatCharacterClassEscape(y);if(Se)return Se;y.pos=O}return null},wt.regexp_eatClassStringDisjunction=function(y){var O=y.pos;if(y.eatChars([92,113])){if(y.eat(123)){var J=this.regexp_classStringDisjunctionContents(y);if(y.eat(125))return J}else y.raise("Invalid escape");y.pos=O}return null},wt.regexp_classStringDisjunctionContents=function(y){for(var O=this.regexp_classString(y);y.eat(124);)this.regexp_classString(y)===nr&&(O=nr);return O},wt.regexp_classString=function(y){for(var O=0;this.regexp_eatClassSetCharacter(y);)O++;return O===1?zn:nr},wt.regexp_eatClassSetCharacter=function(y){var O=y.pos;if(y.eat(92))return this.regexp_eatCharacterEscape(y)||this.regexp_eatClassSetReservedPunctuator(y)?!0:y.eat(98)?(y.lastIntValue=8,!0):(y.pos=O,!1);var J=y.current();return J<0||J===y.lookahead()&&yi(J)||Pi(J)?!1:(y.advance(),y.lastIntValue=J,!0)};function yi(y){return y===33||y>=35&&y<=38||y>=42&&y<=44||y===46||y>=58&&y<=64||y===94||y===96||y===126}function Pi(y){return y===40||y===41||y===45||y===47||y>=91&&y<=93||y>=123&&y<=125}wt.regexp_eatClassSetReservedPunctuator=function(y){var O=y.current();return pr(O)?(y.lastIntValue=O,y.advance(),!0):!1};function pr(y){return y===33||y===35||y===37||y===38||y===44||y===45||y>=58&&y<=62||y===64||y===96||y===126}wt.regexp_eatClassControlLetter=function(y){var O=y.current();return mr(O)||O===95?(y.lastIntValue=O%32,y.advance(),!0):!1},wt.regexp_eatHexEscapeSequence=function(y){var O=y.pos;if(y.eat(120)){if(this.regexp_eatFixedHexDigits(y,2))return!0;y.switchU&&y.raise("Invalid escape"),y.pos=O}return!1},wt.regexp_eatDecimalDigits=function(y){var O=y.pos,J=0;for(y.lastIntValue=0;mr(J=y.current());)y.lastIntValue=10*y.lastIntValue+(J-48),y.advance();return y.pos!==O};function mr(y){return y>=48&&y<=57}wt.regexp_eatHexDigits=function(y){var O=y.pos,J=0;for(y.lastIntValue=0;rr(J=y.current());)y.lastIntValue=16*y.lastIntValue+Jr(J),y.advance();return y.pos!==O};function rr(y){return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function Jr(y){return y>=65&&y<=70?10+(y-65):y>=97&&y<=102?10+(y-97):y-48}wt.regexp_eatLegacyOctalEscapeSequence=function(y){if(this.regexp_eatOctalDigit(y)){var O=y.lastIntValue;if(this.regexp_eatOctalDigit(y)){var J=y.lastIntValue;O<=3&&this.regexp_eatOctalDigit(y)?y.lastIntValue=O*64+J*8+y.lastIntValue:y.lastIntValue=O*8+J}else y.lastIntValue=O;return!0}return!1},wt.regexp_eatOctalDigit=function(y){var O=y.current();return Gr(O)?(y.lastIntValue=O-48,y.advance(),!0):(y.lastIntValue=0,!1)};function Gr(y){return y>=48&&y<=55}wt.regexp_eatFixedHexDigits=function(y,O){var J=y.pos;y.lastIntValue=0;for(var le=0;le<O;++le){var Se=y.current();if(!rr(Se))return y.pos=J,!1;y.lastIntValue=16*y.lastIntValue+Jr(Se),y.advance()}return!0};var yr=function(O){this.type=O.type,this.value=O.value,this.start=O.start,this.end=O.end,O.options.locations&&(this.loc=new it(O,O.startLoc,O.endLoc)),O.options.ranges&&(this.range=[O.start,O.end])},Qt=f.prototype;Qt.next=function(y){!y&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new yr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Qt.getToken=function(){return this.next(),new yr(this)},typeof Symbol<"u"&&(Qt[Symbol.iterator]=function(){var y=this;return{next:function(){var O=y.getToken();return{done:O.type===S.eof,value:O}}}}),Qt.nextToken=function(){var y=this.curContext();if((!y||!y.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(S.eof);if(y.override)return y.override(this);this.readToken(this.fullCharCodeAtPos())},Qt.readToken=function(y){return v(y,this.options.ecmaVersion>=6)||y===92?this.readWord():this.getTokenFromCode(y)},Qt.fullCharCodeAtPos=function(){var y=this.input.charCodeAt(this.pos);if(y<=55295||y>=56320)return y;var O=this.input.charCodeAt(this.pos+1);return O<=56319||O>=57344?y:(y<<10)+O-56613888},Qt.skipBlockComment=function(){var y=this.options.onComment&&this.curPosition(),O=this.pos,J=this.input.indexOf("*/",this.pos+=2);if(J===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=J+2,this.options.locations)for(var le=void 0,Se=O;(le=ee(this.input,Se,this.pos))>-1;)++this.curLine,Se=this.lineStart=le;this.options.onComment&&this.options.onComment(!0,this.input.slice(O+2,J),O,this.pos,y,this.curPosition())},Qt.skipLineComment=function(y){for(var O=this.pos,J=this.options.onComment&&this.curPosition(),le=this.input.charCodeAt(this.pos+=y);this.pos<this.input.length&&!R(le);)le=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(O+y,this.pos),O,this.pos,J,this.curPosition())},Qt.skipSpace=function(){e:for(;this.pos<this.input.length;){var y=this.input.charCodeAt(this.pos);switch(y){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(y>8&&y<14||y>=5760&&ue.test(String.fromCharCode(y)))++this.pos;else break e}}},Qt.finishToken=function(y,O){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var J=this.type;this.type=y,this.value=O,this.updateContext(J)},Qt.readToken_dot=function(){var y=this.input.charCodeAt(this.pos+1);if(y>=48&&y<=57)return this.readNumber(!0);var O=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&y===46&&O===46?(this.pos+=3,this.finishToken(S.ellipsis)):(++this.pos,this.finishToken(S.dot))},Qt.readToken_slash=function(){var y=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):y===61?this.finishOp(S.assign,2):this.finishOp(S.slash,1)},Qt.readToken_mult_modulo_exp=function(y){var O=this.input.charCodeAt(this.pos+1),J=1,le=y===42?S.star:S.modulo;return this.options.ecmaVersion>=7&&y===42&&O===42&&(++J,le=S.starstar,O=this.input.charCodeAt(this.pos+2)),O===61?this.finishOp(S.assign,J+1):this.finishOp(le,J)},Qt.readToken_pipe_amp=function(y){var O=this.input.charCodeAt(this.pos+1);if(O===y){if(this.options.ecmaVersion>=12){var J=this.input.charCodeAt(this.pos+2);if(J===61)return this.finishOp(S.assign,3)}return this.finishOp(y===124?S.logicalOR:S.logicalAND,2)}return O===61?this.finishOp(S.assign,2):this.finishOp(y===124?S.bitwiseOR:S.bitwiseAND,1)},Qt.readToken_caret=function(){var y=this.input.charCodeAt(this.pos+1);return y===61?this.finishOp(S.assign,2):this.finishOp(S.bitwiseXOR,1)},Qt.readToken_plus_min=function(y){var O=this.input.charCodeAt(this.pos+1);return O===y?O===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||B.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(S.incDec,2):O===61?this.finishOp(S.assign,2):this.finishOp(S.plusMin,1)},Qt.readToken_lt_gt=function(y){var O=this.input.charCodeAt(this.pos+1),J=1;return O===y?(J=y===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+J)===61?this.finishOp(S.assign,J+1):this.finishOp(S.bitShift,J)):O===33&&y===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(O===61&&(J=2),this.finishOp(S.relational,J))},Qt.readToken_eq_excl=function(y){var O=this.input.charCodeAt(this.pos+1);return O===61?this.finishOp(S.equality,this.input.charCodeAt(this.pos+2)===61?3:2):y===61&&O===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(S.arrow)):this.finishOp(y===61?S.eq:S.prefix,1)},Qt.readToken_question=function(){var y=this.options.ecmaVersion;if(y>=11){var O=this.input.charCodeAt(this.pos+1);if(O===46){var J=this.input.charCodeAt(this.pos+2);if(J<48||J>57)return this.finishOp(S.questionDot,2)}if(O===63){if(y>=12){var le=this.input.charCodeAt(this.pos+2);if(le===61)return this.finishOp(S.assign,3)}return this.finishOp(S.coalesce,2)}}return this.finishOp(S.question,1)},Qt.readToken_numberSign=function(){var y=this.options.ecmaVersion,O=35;if(y>=13&&(++this.pos,O=this.fullCharCodeAtPos(),v(O,!0)||O===92))return this.finishToken(S.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Le(O)+"'")},Qt.getTokenFromCode=function(y){switch(y){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(S.parenL);case 41:return++this.pos,this.finishToken(S.parenR);case 59:return++this.pos,this.finishToken(S.semi);case 44:return++this.pos,this.finishToken(S.comma);case 91:return++this.pos,this.finishToken(S.bracketL);case 93:return++this.pos,this.finishToken(S.bracketR);case 123:return++this.pos,this.finishToken(S.braceL);case 125:return++this.pos,this.finishToken(S.braceR);case 58:return++this.pos,this.finishToken(S.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(S.backQuote);case 48:var O=this.input.charCodeAt(this.pos+1);if(O===120||O===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(O===111||O===79)return this.readRadixNumber(8);if(O===98||O===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(y);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(y);case 124:case 38:return this.readToken_pipe_amp(y);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(y);case 60:case 62:return this.readToken_lt_gt(y);case 61:case 33:return this.readToken_eq_excl(y);case 63:return this.readToken_question();case 126:return this.finishOp(S.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Le(y)+"'")},Qt.finishOp=function(y,O){var J=this.input.slice(this.pos,this.pos+O);return this.pos+=O,this.finishToken(y,J)},Qt.readRegexp=function(){for(var y,O,J=this.pos;;){this.pos>=this.input.length&&this.raise(J,"Unterminated regular expression");var le=this.input.charAt(this.pos);if(B.test(le)&&this.raise(J,"Unterminated regular expression"),y)y=!1;else{if(le==="[")O=!0;else if(le==="]"&&O)O=!1;else if(le==="/"&&!O)break;y=le==="\\"}++this.pos}var Se=this.input.slice(J,this.pos);++this.pos;var et=this.pos,rt=this.readWord1();this.containsEsc&&this.unexpected(et);var bt=this.regexpState||(this.regexpState=new Rn(this));bt.reset(J,Se,rt),this.validateRegExpFlags(bt),this.validateRegExpPattern(bt);var _t=null;try{_t=new RegExp(Se,rt)}catch{}return this.finishToken(S.regexp,{pattern:Se,flags:rt,value:_t})},Qt.readInt=function(y,O,J){for(var le=this.options.ecmaVersion>=12&&O===void 0,Se=J&&this.input.charCodeAt(this.pos)===48,et=this.pos,rt=0,bt=0,_t=0,Zt=O??1/0;_t<Zt;++_t,++this.pos){var rn=this.input.charCodeAt(this.pos),Nn=void 0;if(le&&rn===95){Se&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),bt===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),_t===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),bt=rn;continue}if(rn>=97?Nn=rn-97+10:rn>=65?Nn=rn-65+10:rn>=48&&rn<=57?Nn=rn-48:Nn=1/0,Nn>=y)break;bt=rn,rt=rt*y+Nn}return le&&bt===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===et||O!=null&&this.pos-et!==O?null:rt};function $r(y,O){return O?parseInt(y,8):parseFloat(y.replace(/_/g,""))}function vn(y){return typeof BigInt!="function"?null:BigInt(y.replace(/_/g,""))}Qt.readRadixNumber=function(y){var O=this.pos;this.pos+=2;var J=this.readInt(y);return J==null&&this.raise(this.start+2,"Expected number in radix "+y),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(J=vn(this.input.slice(O,this.pos)),++this.pos):v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,J)},Qt.readNumber=function(y){var O=this.pos;!y&&this.readInt(10,void 0,!0)===null&&this.raise(O,"Invalid number");var J=this.pos-O>=2&&this.input.charCodeAt(O)===48;J&&this.strict&&this.raise(O,"Invalid number");var le=this.input.charCodeAt(this.pos);if(!J&&!y&&this.options.ecmaVersion>=11&&le===110){var Se=vn(this.input.slice(O,this.pos));return++this.pos,v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,Se)}J&&/[89]/.test(this.input.slice(O,this.pos))&&(J=!1),le===46&&!J&&(++this.pos,this.readInt(10),le=this.input.charCodeAt(this.pos)),(le===69||le===101)&&!J&&(le=this.input.charCodeAt(++this.pos),(le===43||le===45)&&++this.pos,this.readInt(10)===null&&this.raise(O,"Invalid number")),v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var et=$r(this.input.slice(O,this.pos),J);return this.finishToken(S.num,et)},Qt.readCodePoint=function(){var y=this.input.charCodeAt(this.pos),O;if(y===123){this.options.ecmaVersion<6&&this.unexpected();var J=++this.pos;O=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,O>1114111&&this.invalidStringToken(J,"Code point out of bounds")}else O=this.readHexChar(4);return O},Qt.readString=function(y){for(var O="",J=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var le=this.input.charCodeAt(this.pos);if(le===y)break;le===92?(O+=this.input.slice(J,this.pos),O+=this.readEscapedChar(!1),J=this.pos):le===8232||le===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(R(le)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return O+=this.input.slice(J,this.pos++),this.finishToken(S.string,O)};var Vn={};Qt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(y){if(y===Vn)this.readInvalidTemplateToken();else throw y}this.inTemplateElement=!1},Qt.invalidStringToken=function(y,O){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Vn;this.raise(y,O)},Qt.readTmplToken=function(){for(var y="",O=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var J=this.input.charCodeAt(this.pos);if(J===96||J===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===S.template||this.type===S.invalidTemplate)?J===36?(this.pos+=2,this.finishToken(S.dollarBraceL)):(++this.pos,this.finishToken(S.backQuote)):(y+=this.input.slice(O,this.pos),this.finishToken(S.template,y));if(J===92)y+=this.input.slice(O,this.pos),y+=this.readEscapedChar(!0),O=this.pos;else if(R(J)){switch(y+=this.input.slice(O,this.pos),++this.pos,J){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:y+=`
`;break;default:y+=String.fromCharCode(J);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),O=this.pos}else++this.pos}},Qt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(S.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Qt.readEscapedChar=function(y){var O=this.input.charCodeAt(++this.pos);switch(++this.pos,O){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Le(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),y){var J=this.pos-1;this.invalidStringToken(J,"Invalid escape sequence in template string")}default:if(O>=48&&O<=55){var le=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Se=parseInt(le,8);return Se>255&&(le=le.slice(0,-1),Se=parseInt(le,8)),this.pos+=le.length-1,O=this.input.charCodeAt(this.pos),(le!=="0"||O===56||O===57)&&(this.strict||y)&&this.invalidStringToken(this.pos-1-le.length,y?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Se)}return R(O)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(O)}},Qt.readHexChar=function(y){var O=this.pos,J=this.readInt(16,y);return J===null&&this.invalidStringToken(O,"Bad character escape sequence"),J},Qt.readWord1=function(){this.containsEsc=!1;for(var y="",O=!0,J=this.pos,le=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Se=this.fullCharCodeAtPos();if(w(Se,le))this.pos+=Se<=65535?1:2;else if(Se===92){this.containsEsc=!0,y+=this.input.slice(J,this.pos);var et=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var rt=this.readCodePoint();(O?v:w)(rt,le)||this.invalidStringToken(et,"Invalid Unicode escape"),y+=Le(rt),J=this.pos}else break;O=!1}return y+this.input.slice(J,this.pos)},Qt.readWord=function(){var y=this.readWord1(),O=S.name;return this.keywords.test(y)&&(O=j[y]),this.finishToken(O,y)};var jn="8.15.0";f.acorn={Parser:f,version:jn,defaultOptions:Ue,Position:Re,SourceLocation:it,getLineInfo:nt,Node:Pe,TokenType:C,tokTypes:S,keywordTypes:j,TokContext:K,tokContexts:V,isIdentifierChar:w,isIdentifierStart:v,Token:yr,isNewLine:R,lineBreak:B,lineBreakG:D,nonASCIIwhitespace:ue};function Gn(y,O){return f.parse(y,O)}function qr(y,O,J){return f.parseExpressionAt(y,O,J)}function Xn(y,O){return f.tokenizer(y,O)}n.Node=Pe,n.Parser=f,n.Position=Re,n.SourceLocation=it,n.TokContext=K,n.Token=yr,n.TokenType=C,n.defaultOptions=Ue,n.getLineInfo=nt,n.isIdentifierChar=w,n.isIdentifierStart=v,n.isNewLine=R,n.keywordTypes=j,n.lineBreak=B,n.lineBreakG=D,n.nonASCIIwhitespace=ue,n.parse=Gn,n.parseExpressionAt=qr,n.tokContexts=V,n.tokTypes=S,n.tokenizer=Xn,n.version=jn})}(Xp,Xp.exports)),Xp.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(t,n){t=t||a1;var r=t.window,i=t.document,s=new function(){var l=/^(statics|enumerable|beans|preserve)$/,f=[],b=f.slice,_=Object.create,E=Object.getOwnPropertyDescriptor,A=Object.defineProperty,T=f.forEach||function(Y,W){for(var X=0,U=this.length;X<U;X++)Y.call(W,this[X],X,this)},N=function(Y,W){for(var X in this)this.hasOwnProperty(X)&&Y.call(W,this[X],X,this)},$=Object.assign||function(Y){for(var W=1,X=arguments.length;W<X;W++){var U=arguments[W];for(var K in U)U.hasOwnProperty(K)&&(Y[K]=U[K])}return Y},F=function(Y,W,X){if(Y){var U=E(Y,"length");(U&&typeof U.value=="number"?T:N).call(Y,W,X=X||Y)}return X};function G(Y,W,X,U,K){var V={};function ne(re,be){be=be||(be=E(W,re))&&(be.get?be:be.value),typeof be=="string"&&be[0]==="#"&&(be=Y[be.substring(1)]||be);var ke=typeof be=="function",Pe=be,ze=K||ke&&!be.base?be&&be.get?re in Y:Y[re]:null,_e;(!K||!ze)&&(ke&&ze&&(be.base=ze),ke&&U!==!1&&(_e=re.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(V[_e[3].toLowerCase()+_e[4]]=_e[2]),(!Pe||ke||!Pe.get||typeof Pe.get!="function"||!Z.isPlainObject(Pe))&&(Pe={value:Pe,writable:!0}),(E(Y,re)||{configurable:!0}).configurable&&(Pe.configurable=!0,Pe.enumerable=X??!_e),A(Y,re,Pe))}if(W){for(var z in W)W.hasOwnProperty(z)&&!l.test(z)&&ne(z);for(var z in V){var te=V[z],ae=Y["set"+te],ce=Y["get"+te]||ae&&Y["is"+te];ce&&(U===!0||ce.length===0)&&ne(z,{get:ce,set:ae})}}return Y}function Z(){for(var Y=0,W=arguments.length;Y<W;Y++){var X=arguments[Y];X&&$(this,X)}return this}return G(Z,{inject:function(Y){if(Y){var W=Y.statics===!0?Y:Y.statics,X=Y.beans,U=Y.preserve;W!==Y&&G(this.prototype,Y,Y.enumerable,X,U),G(this,W,null,X,U)}for(var K=1,V=arguments.length;K<V;K++)this.inject(arguments[K]);return this},extend:function(){for(var Y=this,W,X,U=0,K,V=arguments.length;U<V&&!(W&&X);U++)K=arguments[U],W=W||K.initialize,X=X||K.prototype;return W=W||function(){Y.apply(this,arguments)},X=W.prototype=X||_(this.prototype),A(X,"constructor",{value:W,writable:!0,configurable:!0}),G(W,this),arguments.length&&this.inject.apply(W,arguments),W.base=Y,W}}).inject({enumerable:!1,initialize:Z,set:Z,inject:function(){for(var Y=0,W=arguments.length;Y<W;Y++){var X=arguments[Y];X&&G(this,X,X.enumerable,X.beans,X.preserve)}return this},extend:function(){var Y=_(this);return Y.inject.apply(Y,arguments)},each:function(Y,W){return F(this,Y,W)},clone:function(){return new this.constructor(this)},statics:{set:$,each:F,create:_,define:A,describe:E,clone:function(Y){return $(new Y.constructor,Y)},isPlainObject:function(Y){var W=Y!=null&&Y.constructor;return W&&(W===Object||W===Z||W.name==="Object")},pick:function(Y,W){return Y!==n?Y:W},slice:function(Y,W,X){return b.call(Y,W,X)}}})};e.exports=s,s.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(l,f){if(!/^_/.test(f)){var b=typeof l;this.push(f+": "+(b==="number"?d.instance.number(l):b==="string"?"'"+l+"'":l))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(l){return s.importJSON(l,this)},exportJSON:function(l){return s.exportJSON(this,l)},toJSON:function(){return s.serialize(this)},set:function(l,f){return l&&s.filter(this,l,f,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function l(){var f=l.base.apply(this,arguments),b=f.prototype._class;return b&&!s.exports[b]&&(s.exports[b]=f),f},equals:function(l,f){if(l===f)return!0;if(l&&l.equals)return l.equals(f);if(f&&f.equals)return f.equals(l);if(l&&f&&typeof l=="object"&&typeof f=="object"){if(Array.isArray(l)&&Array.isArray(f)){var b=l.length;if(b!==f.length)return!1;for(;b--;)if(!s.equals(l[b],f[b]))return!1}else{var _=Object.keys(l),b=_.length;if(b!==Object.keys(f).length)return!1;for(;b--;){var E=_[b];if(!(f.hasOwnProperty(E)&&s.equals(l[E],f[E])))return!1}}return!0}return!1},read:function(l,f,b,_){if(this===s){var E=this.peek(l,f);return l.__index++,E}var A=this.prototype,T=A._readIndex,N=f||T&&l.__index||0,$=l.length,F=l[N];if(_=_||$-N,F instanceof this||b&&b.readNull&&F==null&&_<=1)return T&&(l.__index=N+1),F&&b&&b.clone?F.clone():F;if(F=s.create(A),T&&(F.__read=!0),F=F.initialize.apply(F,N>0||N+_<$?s.slice(l,N,N+_):l)||F,T){l.__index=N+F.__read;var G=F.__filtered;G&&(l.__filtered=G,F.__filtered=n),F.__read=n}return F},peek:function(l,f){return l[l.__index=f||l.__index||0]},remain:function(l){return l.length-(l.__index||0)},readList:function(l,f,b,_){for(var E=[],A,T=f||0,N=_?T+_:l.length,$=T;$<N;$++)E.push(Array.isArray(A=l[$])?this.read(A,0,b):this.read(l,$,b,1));return E},readNamed:function(l,f,b,_,E){var A=this.getNamed(l,f),T=A!==n;if(T){var N=l.__filtered;if(!N){var $=this.getSource(l);N=l.__filtered=s.create($),N.__unfiltered=$}N[f]=n}return this.read(T?[A]:l,b,_,E)},readSupported:function(l,f){var b=this.getSource(l),_=this,E=!1;return b&&Object.keys(b).forEach(function(A){if(A in f){var T=_.readNamed(l,A);T!==n&&(f[A]=T),E=!0}}),E},getSource:function(l){var f=l.__source;if(f===n){var b=l.length===1&&l[0];f=l.__source=b&&s.isPlainObject(b)?b:null}return f},getNamed:function(l,f){var b=this.getSource(l);if(b)return f?b[f]:l.__filtered||b},hasNamed:function(l,f){return!!this.getNamed(l,f)},filter:function(l,f,b,_){var E;function A(G){if(!(b&&G in b)&&!(E&&G in E)){var Z=f[G];Z!==n&&(l[G]=Z)}}if(_){for(var T={},N=0,$,F=_.length;N<F;N++)($=_[N])in f&&(A($),T[$]=!0);E=T}return Object.keys(f.__unfiltered||f).forEach(A),l},isPlainValue:function(l,f){return s.isPlainObject(l)||Array.isArray(l)||f&&typeof l=="string"},serialize:function(l,f,b,_){f=f||{};var E=!_,A;if(E&&(f.formatter=new d(f.precision),_={length:0,definitions:{},references:{},add:function(Z,Y){var W="#"+Z._id,X=this.references[W];if(!X){this.length++;var U=Y.call(Z),K=Z._class;K&&U[0]!==K&&U.unshift(K),this.definitions[W]=U,X=this.references[W]=[W]}return X}}),l&&l._serialize){A=l._serialize(f,_);var T=l._class;T&&!l._compactSerialize&&(E||!b)&&A[0]!==T&&A.unshift(T)}else if(Array.isArray(l)){A=[];for(var N=0,$=l.length;N<$;N++)A[N]=s.serialize(l[N],f,b,_)}else if(s.isPlainObject(l)){A={};for(var F=Object.keys(l),N=0,$=F.length;N<$;N++){var G=F[N];A[G]=s.serialize(l[G],f,b,_)}}else typeof l=="number"?A=f.formatter.number(l,f.precision):A=l;return E&&_.length>0?[["dictionary",_.definitions],A]:A},deserialize:function(l,f,b,_,E){var A=l,T=!b,N=T&&l&&l.length&&l[0][0]==="dictionary";if(b=b||{},Array.isArray(l)){var $=l[0],F=$==="dictionary";if(l.length==1&&/^#/.test($))return b.dictionary[$];$=s.exports[$],A=[];for(var G=$?1:0,Z=l.length;G<Z;G++)A.push(s.deserialize(l[G],f,b,F,N));if($){var Y=A;f?A=f($,Y,T||E):A=new $(Y)}}else if(s.isPlainObject(l)){A={},_&&(b.dictionary=A);for(var W in l)A[W]=s.deserialize(l[W],f,b)}return N?A[1]:A},exportJSON:function(l,f){var b=s.serialize(l,f);return f&&f.asString==!1?b:JSON.stringify(b)},importJSON:function(l,f){return s.deserialize(typeof l=="string"?JSON.parse(l):l,function(b,_,E){var A=E&&f&&f.constructor===b,T=A?f:s.create(b.prototype);if(_.length===1&&T instanceof S&&(A||!(T instanceof D))){var N=_[0];s.isPlainObject(N)&&(N.insert=!1,A&&(_=_.concat([S.INSERT])))}return(A?T.set:b).apply(T,_),A&&(f=null),T})},push:function(l,f){var b=f.length;if(b<4096)l.push.apply(l,f);else{var _=l.length;l.length+=b;for(var E=0;E<b;E++)l[_+E]=f[E]}return l},splice:function(l,f,b,_){var E=f&&f.length,A=b===n;b=A?l.length:b,b>l.length&&(b=l.length);for(var T=0;T<E;T++)f[T]._index=b+T;if(A)return s.push(l,f),[];var N=[b,_];f&&s.push(N,f);for(var $=l.splice.apply(l,N),T=0,F=$.length;T<F;T++)$[T]._index=n;for(var T=b+E,F=l.length;T<F;T++)l[T]._index=T;return $},capitalize:function(l){return l.replace(/\b[a-z]/g,function(f){return f.toUpperCase()})},camelize:function(l){return l.replace(/-(.)/g,function(f,b){return b.toUpperCase()})},hyphenate:function(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(l,f){if(typeof l!="string")s.each(l,function(A,T){this.on(T,A)},this);else{var b=this._eventTypes,_=b&&b[l],E=this._callbacks=this._callbacks||{};E=E[l]=E[l]||[],E.indexOf(f)===-1&&(E.push(f),_&&_.install&&E.length===1&&_.install.call(this,l))}return this},off:function(l,f){if(typeof l!="string"){s.each(l,function(T,N){this.off(N,T)},this);return}var b=this._eventTypes,_=b&&b[l],E=this._callbacks&&this._callbacks[l],A;return E&&(!f||(A=E.indexOf(f))!==-1&&E.length===1?(_&&_.uninstall&&_.uninstall.call(this,l),delete this._callbacks[l]):A!==-1&&E.splice(A,1)),this},once:function(l,f){return this.on(l,function b(){f.apply(this,arguments),this.off(l,b)})},emit:function(l,f){var b=this._callbacks&&this._callbacks[l];if(!b)return!1;var _=s.slice(arguments,1),E=f&&f.target&&!f.currentTarget;b=b.slice(),E&&(f.currentTarget=this);for(var A=0,T=b.length;A<T;A++)if(b[A].apply(this,_)==!1){f&&f.stop&&f.stop();break}return E&&delete f.currentTarget,!0},responds:function(l){return!!(this._callbacks&&this._callbacks[l])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(l){var f=this._eventTypes,b=this._callbacks,_=l?"install":"uninstall";if(f){for(var E in b)if(b[E].length>0){var A=f[E],T=A&&A[_];T&&T.call(this,E)}}},statics:{inject:function l(f){var b=f._events;if(b){var _={};s.each(b,function(E,A){var T=typeof E=="string",N=T?E:A,$=s.capitalize(N),F=N.substring(2).toLowerCase();_[F]=T?{}:E,N="_"+N,f["get"+$]=function(){return this[N]},f["set"+$]=function(G){var Z=this[N];Z&&this.off(F,Z),G&&this.on(F,G),this[N]=G}}),f._eventTypes=_}return l.base.apply(this,arguments)}}},o=s.extend({_class:"PaperScope",initialize:function l(){De=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=l._id++,l._scopes[this._id]=this;var f=l.prototype;if(!this.support){var b=ve.getContext(1,1)||{};f.support={nativeDash:"setLineDash"in b||"mozDash"in b,nativeBlendModes:me.nativeModes},ve.release(b)}if(!this.agent){var _=t.navigator.userAgent.toLowerCase(),E=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(_)||[])[0],A=E==="darwin"?"mac":E,T=f.agent=f.browser={platform:A};A&&(T[A]=!0),_.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(N,$,F,G,Z){if(!T.chrome){var Y=$==="opera"?G:/^(node|trident)$/.test($)?Z:F;T.version=Y,T.versionNumber=parseFloat(Y),$={trident:"msie",jsdom:"node"}[$]||$,T.name=$,T[$]=!0}}),T.chrome&&delete T.webkit,T.atom&&delete T.chrome}},version:"0.12.18",getView:function(){var l=this.project;return l&&l._view},getPaper:function(){return this},execute:function(l,f){var b=De.PaperScript.execute(l,this,f);return ht.updateFocus(),b},install:function(l){var f=this;s.each(["project","view","tool"],function(_){s.define(l,_,{configurable:!0,get:function(){return f[_]}})});for(var b in this)!/^_/.test(b)&&this[b]&&(l[b]=this[b])},setup:function(l){return De=this,this.project=new M(l),this},createCanvas:function(l,f){return ve.getCanvas(l,f)},activate:function(){De=this},clear:function(){for(var l=this.projects,f=this.tools,b=l.length-1;b>=0;b--)l[b].remove();for(var b=f.length-1;b>=0;b--)f[b].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function l(f){return f+="Attribute",function(b,_){return b[f](_)||b[f]("data-paper-"+_)}}return{_scopes:{},_id:0,get:function(f){return this._scopes[f]||null},getAttribute:l("get"),hasAttribute:l("has")}}}),c=s.extend(a,{initialize:function(l){this._scope=De,this._index=this._scope[this._list].push(this)-1,(l||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var l=this._scope[this._reference];return l&&l!==this&&l.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",l),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),h={findItemBoundsCollisions:function(l,f,b){function _(T){for(var N=new Array(T.length),$=0;$<T.length;$++){var F=T[$].getBounds();N[$]=[F.left,F.top,F.right,F.bottom]}return N}var E=_(l),A=!f||f===l?E:_(f);return this.findBoundsCollisions(E,A,b||0)},findCurveBoundsCollisions:function(l,f,b,_){function E(Y){for(var W=Math.min,X=Math.max,U=new Array(Y.length),K=0;K<Y.length;K++){var V=Y[K];U[K]=[W(V[0],V[2],V[4],V[6]),W(V[1],V[3],V[5],V[7]),X(V[0],V[2],V[4],V[6]),X(V[1],V[3],V[5],V[7])]}return U}var A=E(l),T=!f||f===l?A:E(f);if(_){for(var N=this.findBoundsCollisions(A,T,b||0,!1,!0),$=this.findBoundsCollisions(A,T,b||0,!0,!0),F=[],G=0,Z=N.length;G<Z;G++)F[G]={hor:N[G],ver:$[G]};return F}return this.findBoundsCollisions(A,T,b||0)},findBoundsCollisions:function(l,f,b,_,E){var A=!f||l===f,T=A?l:l.concat(f),N=l.length,$=T.length;function F(dt,Et,xt){for(var Te=0,Ke=dt.length;Te<Ke;){var mt=Ke+Te>>>1;T[dt[mt]][Et]<xt?Te=mt+1:Ke=mt}return Te-1}for(var G=_?1:0,Z=G+2,Y=_?0:1,W=Y+2,X=new Array($),U=0;U<$;U++)X[U]=U;X.sort(function(dt,Et){return T[dt][G]-T[Et][G]});for(var K=[],V=new Array(N),U=0;U<$;U++){var ne=X[U],z=T[ne],te=A?ne:ne-N,ae=ne<N,ce=A||!ae,re=ae?[]:null;if(K.length){var be=F(K,Z,z[G]-b)+1;if(K.splice(0,be),A&&E){re=re.concat(K);for(var ke=0;ke<K.length;ke++){var Pe=K[ke];V[Pe].push(te)}}else for(var ze=z[W],_e=z[Y],ke=0;ke<K.length;ke++){var Pe=K[ke],$e=T[Pe],Fe=Pe<N,Xe=A||Pe>=N;(E||(ae&&Xe||ce&&Fe)&&ze>=$e[Y]-b&&_e<=$e[W]+b)&&(ae&&Xe&&re.push(A?Pe:Pe-N),ce&&Fe&&V[Pe].push(te))}}if(ae&&(l===f&&re.push(ne),V[ne]=re),K.length){var Ze=z[Z],Qe=F(K,Z,Ze);K.splice(Qe+1,0,ne)}else K.push(ne)}for(var U=0;U<V.length;U++){var ft=V[U];ft&&ft.sort(function(Et,xt){return Et-xt})}return V}},d=s.extend({initialize:function(l){this.precision=s.pick(l,5),this.multiplier=Math.pow(10,this.precision)},number:function(l){return this.precision<16?Math.round(l*this.multiplier)/this.multiplier:l},pair:function(l,f,b){return this.number(l)+(b||",")+this.number(f)},point:function(l,f){return this.number(l.x)+(f||",")+this.number(l.y)},size:function(l,f){return this.number(l.width)+(f||",")+this.number(l.height)},rectangle:function(l,f){return this.point(l,f)+(f||",")+this.size(l,f)}});d.instance=new d;var p=new function(){var l=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],f=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],b=Math.abs,_=Math.sqrt,E=Math.pow,A=Math.log2||function(Z){return Math.log(Z)*Math.LOG2E},T=1e-12,N=112e-18;function $(Z,Y,W){return Z<Y?Y:Z>W?W:Z}function F(Z,Y,W){function X(be){var ke=be*134217729,Pe=be-ke,ze=Pe+ke,_e=be-ze;return[ze,_e]}var U=Y*Y-Z*W,K=Y*Y+Z*W;if(b(U)*3<K){var V=X(Z),ne=X(Y),z=X(W),te=Y*Y,ae=ne[0]*ne[0]-te+2*ne[0]*ne[1]+ne[1]*ne[1],ce=Z*W,re=V[0]*z[0]-ce+V[0]*z[1]+V[1]*z[0]+V[1]*z[1];U=te-ce+(ae-re)}return U}function G(){var Z=Math.max.apply(Math,arguments);return Z&&(Z<1e-8||Z>1e8)?E(2,-Math.round(A(Z))):0}return{EPSILON:T,MACHINE_EPSILON:N,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(_(2)-1)/3,isZero:function(Z){return Z>=-T&&Z<=T},isMachineZero:function(Z){return Z>=-N&&Z<=N},clamp:$,integrate:function(Z,Y,W,X){for(var U=l[X-2],K=f[X-2],V=(W-Y)*.5,ne=V+Y,z=0,te=X+1>>1,ae=X&1?K[z++]*Z(ne):0;z<te;){var ce=V*U[z];ae+=K[z++]*(Z(ne+ce)+Z(ne-ce))}return V*ae},findRoot:function(Z,Y,W,X,U,K,V){for(var ne=0;ne<K;ne++){var z=Z(W),te=z/Y(W),ae=W-te;if(b(te)<V){W=ae;break}z>0?(U=W,W=ae<=X?(X+U)*.5:ae):(X=W,W=ae>=U?(X+U)*.5:ae)}return $(W,X,U)},solveQuadratic:function(Z,Y,W,X,U,K){var V,ne=1/0;if(b(Z)<T){if(b(Y)<T)return b(W)<T?-1:0;V=-W/Y}else{Y*=-.5;var z=F(Z,Y,W);if(z&&b(z)<N){var te=G(b(Z),b(Y),b(W));te&&(Z*=te,Y*=te,W*=te,z=F(Z,Y,W))}if(z>=-N){var ae=z<0?0:_(z),ce=Y+(Y<0?-ae:ae);ce===0?(V=W/Z,ne=-V):(V=ce/Z,ne=W/ce)}}var re=0,be=U==null,ke=U-T,Pe=K+T;return isFinite(V)&&(be||V>ke&&V<Pe)&&(X[re++]=be?V:$(V,U,K)),ne!==V&&isFinite(ne)&&(be||ne>ke&&ne<Pe)&&(X[re++]=be?ne:$(ne,U,K)),re},solveCubic:function(Z,Y,W,X,U,K,V){var ne=G(b(Z),b(Y),b(W),b(X)),z,te,ae,ce,re;ne&&(Z*=ne,Y*=ne,W*=ne,X*=ne);function be(Qe){z=Qe;var ft=Z*z;te=ft+Y,ae=te*z+W,ce=(ft+te)*z+ae,re=ae*z+X}if(b(Z)<T)Z=Y,te=W,ae=X,z=1/0;else if(b(X)<T)te=Y,ae=W,z=0;else{be(-(Y/Z)/3);var ke=re/Z,Pe=E(b(ke),1/3),ze=ke<0?-1:1,_e=-ce/Z,$e=_e>0?1.324717957244746*Math.max(Pe,_(_e)):Pe,Fe=z-ze*$e;if(Fe!==z){do be(Fe),Fe=ce===0?z:z-re/ce/(1+N);while(ze*Fe>ze*z);b(Z)*z*z>b(X/z)&&(ae=-X/z,te=(ae-W)/z)}}var Xe=p.solveQuadratic(Z,te,ae,U,K,V),Ze=K==null;return isFinite(z)&&(Xe===0||Xe>0&&z!==U[0]&&z!==U[1])&&(Ze||z>K-T&&z<V+T)&&(U[Xe++]=Ze?z:$(z,K,V)),Xe}}},m={_id:1,_pools:{},get:function(l){if(l){var f=this._pools[l];return f||(f=this._pools[l]={_id:1}),f._id++}else return this._id++}},g=s.extend({_class:"Point",_readIndex:!0,initialize:function(f,b){var _=typeof f,E=this.__read,A=0;if(_==="number"){var T=typeof b=="number";this._set(f,T?b:f),E&&(A=T?2:1)}else if(_==="undefined"||f===null)this._set(0,0),E&&(A=f===null?1:0);else{var N=_==="string"?f.split(/[\s,]+/)||[]:f;A=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"x"in N?this._set(N.x||0,N.y||0):"width"in N?this._set(N.width||0,N.height||0):"angle"in N?(this._set(N.length||0,0),this.setAngle(N.angle||0)):(this._set(0,0),A=0)}return E&&(this.__read=A),this},set:"#initialize",_set:function(l,f){return this.x=l,this.y=f,this},equals:function(l){return this===l||l&&(this.x===l.x&&this.y===l.y||Array.isArray(l)&&this.x===l[0]&&this.y===l[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var l=d.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+" }"},_serialize:function(l){var f=l.formatter;return[f.number(this.x),f.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(l){if(this.isZero()){var f=this._angle||0;this._set(Math.cos(f)*l,Math.sin(f)*l)}else{var b=l/this.getLength();p.isZero(b)&&this.getAngle(),this._set(this.x*b,this.y*b)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(l){this.setAngleInRadians.call(this,l*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var l=g.read(arguments),f=this.getLength()*l.getLength();if(p.isZero(f))return NaN;var b=this.dot(l)/f;return Math.acos(b<-1?-1:b>1?1:b)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(l){if(this._angle=l,!this.isZero()){var f=this.getLength();this._set(Math.cos(l)*f,Math.sin(l)*f)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var l=g.read(arguments);return Math.atan2(this.cross(l),this.dot(l))*180/Math.PI},getDistance:function(){var l=arguments,f=g.read(l),b=f.x-this.x,_=f.y-this.y,E=b*b+_*_,A=s.read(l);return A?E:Math.sqrt(E)},normalize:function(l){l===n&&(l=1);var f=this.getLength(),b=f!==0?l/f:0,_=new g(this.x*b,this.y*b);return b>=0&&(_._angle=this._angle),_},rotate:function(l,f){if(l===0)return this.clone();l=l*Math.PI/180;var b=f?this.subtract(f):this,_=Math.sin(l),E=Math.cos(l);return b=new g(b.x*E-b.y*_,b.x*_+b.y*E),f?b.add(f):b},transform:function(l){return l?l._transformPoint(this):this},add:function(){var l=g.read(arguments);return new g(this.x+l.x,this.y+l.y)},subtract:function(){var l=g.read(arguments);return new g(this.x-l.x,this.y-l.y)},multiply:function(){var l=g.read(arguments);return new g(this.x*l.x,this.y*l.y)},divide:function(){var l=g.read(arguments);return new g(this.x/l.x,this.y/l.y)},modulo:function(){var l=g.read(arguments);return new g(this.x%l.x,this.y%l.y)},negate:function(){return new g(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var l=arguments,f=g.read(l),b=s.read(l);return this.getDistance(f)<=b},isCollinear:function(){var l=g.read(arguments);return g.isCollinear(this.x,this.y,l.x,l.y)},isColinear:"#isCollinear",isOrthogonal:function(){var l=g.read(arguments);return g.isOrthogonal(this.x,this.y,l.x,l.y)},isZero:function(){var l=p.isZero;return l(this.x)&&l(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(l){return this.x*(l>1&&l<4?-1:1)>=0&&this.y*(l>2?-1:1)>=0},dot:function(){var l=g.read(arguments);return this.x*l.x+this.y*l.y},cross:function(){var l=g.read(arguments);return this.x*l.y-this.y*l.x},project:function(){var l=g.read(arguments),f=l.isZero()?0:this.dot(l)/l.dot(l);return new g(l.x*f,l.y*f)},statics:{min:function(){var l=arguments,f=g.read(l),b=g.read(l);return new g(Math.min(f.x,b.x),Math.min(f.y,b.y))},max:function(){var l=arguments,f=g.read(l),b=g.read(l);return new g(Math.max(f.x,b.x),Math.max(f.y,b.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(l,f,b,_){return Math.abs(l*_-f*b)<=Math.sqrt((l*l+f*f)*(b*b+_*_))*1e-8},isOrthogonal:function(l,f,b,_){return Math.abs(l*b+f*_)<=Math.sqrt((l*l+f*f)*(b*b+_*_))*1e-8}}},s.each(["round","ceil","floor","abs"],function(l){var f=Math[l];this[l]=function(){return new g(f(this.x),f(this.y))}},{})),v=g.extend({initialize:function(f,b,_,E){this._x=f,this._y=b,this._owner=_,this._setter=E},_set:function(l,f,b){return this._x=l,this._y=f,b||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),w=s.extend({_class:"Size",_readIndex:!0,initialize:function(f,b){var _=typeof f,E=this.__read,A=0;if(_==="number"){var T=typeof b=="number";this._set(f,T?b:f),E&&(A=T?2:1)}else if(_==="undefined"||f===null)this._set(0,0),E&&(A=f===null?1:0);else{var N=_==="string"?f.split(/[\s,]+/)||[]:f;A=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"width"in N?this._set(N.width||0,N.height||0):"x"in N?this._set(N.x||0,N.y||0):(this._set(0,0),A=0)}return E&&(this.__read=A),this},set:"#initialize",_set:function(l,f){return this.width=l,this.height=f,this},equals:function(l){return l===this||l&&(this.width===l.width&&this.height===l.height||Array.isArray(l)&&this.width===l[0]&&this.height===l[1])||!1},clone:function(){return new w(this.width,this.height)},toString:function(){var l=d.instance;return"{ width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var f=l.formatter;return[f.number(this.width),f.number(this.height)]},add:function(){var l=w.read(arguments);return new w(this.width+l.width,this.height+l.height)},subtract:function(){var l=w.read(arguments);return new w(this.width-l.width,this.height-l.height)},multiply:function(){var l=w.read(arguments);return new w(this.width*l.width,this.height*l.height)},divide:function(){var l=w.read(arguments);return new w(this.width/l.width,this.height/l.height)},modulo:function(){var l=w.read(arguments);return new w(this.width%l.width,this.height%l.height)},negate:function(){return new w(-this.width,-this.height)},isZero:function(){var l=p.isZero;return l(this.width)&&l(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(l,f){return new w(Math.min(l.width,f.width),Math.min(l.height,f.height))},max:function(l,f){return new w(Math.max(l.width,f.width),Math.max(l.height,f.height))},random:function(){return new w(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(l){var f=Math[l];this[l]=function(){return new w(f(this.width),f(this.height))}},{})),C=w.extend({initialize:function(f,b,_,E){this._width=f,this._height=b,this._owner=_,this._setter=E},_set:function(l,f,b){return this._width=l,this._height=f,b||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(l){this._width=l,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(l){this._height=l,this._owner[this._setter](this)}}),x=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(f,b,_,E){var A=arguments,T=typeof f,N;if(T==="number"?(this._set(f,b,_,E),N=4):T==="undefined"||f===null?(this._set(0,0,0,0),N=f===null?1:0):A.length===1&&(Array.isArray(f)?(this._set.apply(this,f),N=1):f.x!==n||f.width!==n?(this._set(f.x||0,f.y||0,f.width||0,f.height||0),N=1):f.from===n&&f.to===n&&(this._set(0,0,0,0),s.readSupported(A,this)&&(N=1))),N===n){var $=g.readNamed(A,"from"),F=s.peek(A),G=$.x,Z=$.y,Y,W;if(F&&F.x!==n||s.hasNamed(A,"to")){var X=g.readNamed(A,"to");Y=X.x-G,W=X.y-Z,Y<0&&(G=X.x,Y=-Y),W<0&&(Z=X.y,W=-W)}else{var U=w.read(A);Y=U.width,W=U.height}this._set(G,Z,Y,W),N=A.__index}var K=A.__filtered;return K&&(this.__filtered=K),this.__read&&(this.__read=N),this},set:"#initialize",_set:function(l,f,b,_){return this.x=l,this.y=f,this.width=b,this.height=_,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(l){var f=s.isPlainValue(l)?x.read(arguments):l;return f===this||f&&this.x===f.x&&this.y===f.y&&this.width===f.width&&this.height===f.height||!1},toString:function(){var l=d.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+", width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var f=l.formatter;return[f.number(this.x),f.number(this.y),f.number(this.width),f.number(this.height)]},getPoint:function(l){var f=l?g:v;return new f(this.x,this.y,this,"setPoint")},setPoint:function(){var l=g.read(arguments);this.x=l.x,this.y=l.y},getSize:function(l){var f=l?w:C;return new f(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var l=w.read(arguments),f=this._sx,b=this._sy,_=l.width,E=l.height;f&&(this.x+=(this.width-_)*f),b&&(this.y+=(this.height-E)*b),this.width=_,this.height=E,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(l){if(!this._fw){var f=l-this.x;this.width-=this._sx===.5?f*2:f}this.x=l,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(l){if(!this._fh){var f=l-this.y;this.height-=this._sy===.5?f*2:f}this.y=l,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(l){if(!this._fw){var f=l-this.x;this.width=this._sx===.5?f*2:f}this.x=l-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(l){if(!this._fh){var f=l-this.y;this.height=this._sy===.5?f*2:f}this.y=l-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(l){this._fw||this._sx===.5?this.x=l-this.width/2:(this._sx&&(this.x+=(l-this.x)*2*this._sx),this.width=(l-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(l){this._fh||this._sy===.5?this.y=l-this.height/2:(this._sy&&(this.y+=(l-this.y)*2*this._sy),this.height=(l-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(l){var f=l?g:v;return new f(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var l=g.read(arguments);return this.setCenterX(l.x),this.setCenterY(l.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(l){return l&&l.width!==n||(Array.isArray(l)?l:arguments).length===4?this._containsRectangle(x.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(l){var f=l.x,b=l.y;return f>=this.x&&b>=this.y&&f<=this.x+this.width&&b<=this.y+this.height},_containsRectangle:function(l){var f=l.x,b=l.y;return f>=this.x&&b>=this.y&&f+l.width<=this.x+this.width&&b+l.height<=this.y+this.height},intersects:function(){var l=x.read(arguments),f=s.read(arguments)||0;return l.x+l.width>this.x-f&&l.y+l.height>this.y-f&&l.x<this.x+this.width+f&&l.y<this.y+this.height+f},intersect:function(){var l=x.read(arguments),f=Math.max(this.x,l.x),b=Math.max(this.y,l.y),_=Math.min(this.x+this.width,l.x+l.width),E=Math.min(this.y+this.height,l.y+l.height);return new x(f,b,_-f,E-b)},unite:function(){var l=x.read(arguments),f=Math.min(this.x,l.x),b=Math.min(this.y,l.y),_=Math.max(this.x+this.width,l.x+l.width),E=Math.max(this.y+this.height,l.y+l.height);return new x(f,b,_-f,E-b)},include:function(){var l=g.read(arguments),f=Math.min(this.x,l.x),b=Math.min(this.y,l.y),_=Math.max(this.x+this.width,l.x),E=Math.max(this.y+this.height,l.y);return new x(f,b,_-f,E-b)},expand:function(){var l=w.read(arguments),f=l.width,b=l.height;return new x(this.x-f/2,this.y-b/2,this.width+f,this.height+b)},scale:function(l,f){return this.expand(this.width*l-this.width,this.height*(f===n?l:f)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(l,f){var b=l.join(""),_=/^[RL]/.test(b);f>=4&&(l[1]+=_?"Y":"X");var E=l[_?0:1],A=l[_?1:0],T="get"+E,N="get"+A,$="set"+E,F="set"+A,G="get"+b,Z="set"+b;this[G]=function(Y){var W=Y?g:v;return new W(this[T](),this[N](),this,Z)},this[Z]=function(){var Y=g.read(arguments);this[$](Y.x),this[F](Y.y)}},{beans:!0})),k=x.extend({initialize:function(f,b,_,E,A,T){this._set(f,b,_,E,!0),this._owner=A,this._setter=T},_set:function(l,f,b,_,E){return this._x=l,this._y=f,this._width=b,this._height=_,E||this._owner[this._setter](this),this}},new function(){var l=x.prototype;return s.each(["x","y","width","height"],function(f){var b=s.capitalize(f),_="_"+f;this["get"+b]=function(){return this[_]},this["set"+b]=function(E){this[_]=E,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(f){var b="set"+f;this[b]=function(){this._dontNotify=!0,l[b].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(f){var b=this._owner;b._changeSelection&&b._changeSelection(2,f)}}))}),P=s.extend({_class:"Matrix",initialize:function l(f,b){var _=arguments,E=_.length,A=!0;if(E>=6?this._set.apply(this,_):E===1||E===2?f instanceof l?this._set(f._a,f._b,f._c,f._d,f._tx,f._ty,b):Array.isArray(f)?this._set.apply(this,b?f.concat([b]):f):A=!1:E?A=!1:this.reset(),!A)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(l,f,b,_,E,A,T){return this._a=l,this._b=f,this._c=b,this._d=_,this._tx=E,this._ty=A,T||this._changed(),this},_serialize:function(l,f){return s.serialize(this.getValues(),l,!0,f)},_changed:function(){var l=this._owner;l&&(l._applyMatrix?l.transform(null,!0):l._changed(25))},clone:function(){return new P(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(l){return l===this||l&&this._a===l._a&&this._b===l._b&&this._c===l._c&&this._d===l._d&&this._tx===l._tx&&this._ty===l._ty},toString:function(){var l=d.instance;return"[["+[l.number(this._a),l.number(this._c),l.number(this._tx)].join(", ")+"], ["+[l.number(this._b),l.number(this._d),l.number(this._ty)].join(", ")+"]]"},reset:function(l){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,l||this._changed(),this},apply:function(l,f){var b=this._owner;return b?(b.transform(null,s.pick(l,!0),f),this.isIdentity()):!1},translate:function(){var l=g.read(arguments),f=l.x,b=l.y;return this._tx+=f*this._a+b*this._c,this._ty+=f*this._b+b*this._d,this._changed(),this},scale:function(){var l=arguments,f=g.read(l),b=g.read(l,0,{readNull:!0});return b&&this.translate(b),this._a*=f.x,this._b*=f.x,this._c*=f.y,this._d*=f.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(l){l*=Math.PI/180;var f=g.read(arguments,1),b=f.x,_=f.y,E=Math.cos(l),A=Math.sin(l),T=b-b*E+_*A,N=_-b*A-_*E,$=this._a,F=this._b,G=this._c,Z=this._d;return this._a=E*$+A*G,this._b=E*F+A*Z,this._c=-A*$+E*G,this._d=-A*F+E*Z,this._tx+=T*$+N*G,this._ty+=T*F+N*Z,this._changed(),this},shear:function(){var l=arguments,f=g.read(l),b=g.read(l,0,{readNull:!0});b&&this.translate(b);var _=this._a,E=this._b;return this._a+=f.y*this._c,this._b+=f.y*this._d,this._c+=f.x*_,this._d+=f.x*E,b&&this.translate(b.negate()),this._changed(),this},skew:function(){var l=arguments,f=g.read(l),b=g.read(l,0,{readNull:!0}),_=Math.PI/180,E=new g(Math.tan(f.x*_),Math.tan(f.y*_));return this.shear(E,b)},append:function(l,f){if(l){var b=this._a,_=this._b,E=this._c,A=this._d,T=l._a,N=l._c,$=l._b,F=l._d,G=l._tx,Z=l._ty;this._a=T*b+$*E,this._c=N*b+F*E,this._b=T*_+$*A,this._d=N*_+F*A,this._tx+=G*b+Z*E,this._ty+=G*_+Z*A,f||this._changed()}return this},prepend:function(l,f){if(l){var b=this._a,_=this._b,E=this._c,A=this._d,T=this._tx,N=this._ty,$=l._a,F=l._c,G=l._b,Z=l._d,Y=l._tx,W=l._ty;this._a=$*b+F*_,this._c=$*E+F*A,this._b=G*b+Z*_,this._d=G*E+Z*A,this._tx=$*T+F*N+Y,this._ty=G*T+Z*N+W,f||this._changed()}return this},appended:function(l){return this.clone().append(l)},prepended:function(l){return this.clone().prepend(l)},invert:function(){var l=this._a,f=this._b,b=this._c,_=this._d,E=this._tx,A=this._ty,T=l*_-f*b,N=null;return T&&!isNaN(T)&&isFinite(E)&&isFinite(A)&&(this._a=_/T,this._b=-f/T,this._c=-b/T,this._d=l/T,this._tx=(b*A-_*E)/T,this._ty=(f*E-l*A)/T,N=this),N},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new P(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var l=this._a*this._d-this._c*this._b;return l&&!isNaN(l)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(l,f,b){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(l,f,b)},_transformPoint:function(l,f,b){var _=l.x,E=l.y;return f||(f=new g),f._set(_*this._a+E*this._c+this._tx,_*this._b+E*this._d+this._ty,b)},_transformCoordinates:function(l,f,b){for(var _=0,E=2*b;_<E;_+=2){var A=l[_],T=l[_+1];f[_]=A*this._a+T*this._c+this._tx,f[_+1]=A*this._b+T*this._d+this._ty}return f},_transformCorners:function(l){var f=l.x,b=l.y,_=f+l.width,E=b+l.height,A=[f,b,_,b,_,E,f,E];return this._transformCoordinates(A,A,4)},_transformBounds:function(l,f,b){for(var _=this._transformCorners(l),E=_.slice(0,2),A=E.slice(),T=2;T<8;T++){var N=_[T],$=T&1;N<E[$]?E[$]=N:N>A[$]&&(A[$]=N)}return f||(f=new x),f._set(E[0],E[1],A[0]-E[0],A[1]-E[1],b)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(l,f,b){var _=this._a,E=this._b,A=this._c,T=this._d,N=this._tx,$=this._ty,F=_*T-E*A,G=null;if(F&&!isNaN(F)&&isFinite(N)&&isFinite($)){var Z=l.x-this._tx,Y=l.y-this._ty;f||(f=new g),G=f._set((Z*T-Y*A)/F,(Y*_-Z*E)/F,b)}return G},decompose:function(){var l=this._a,f=this._b,b=this._c,_=this._d,E=l*_-f*b,A=Math.sqrt,T=Math.atan2,N=180/Math.PI,$,F,G;if(l!==0||f!==0){var Z=A(l*l+f*f);$=Math.acos(l/Z)*(f>0?1:-1),F=[Z,E/Z],G=[T(l*b+f*_,Z*Z),0]}else if(b!==0||_!==0){var Y=A(b*b+_*_);$=Math.asin(b/Y)*(_>0?1:-1),F=[E/Y,Y],G=[0,T(l*b+f*_,Y*Y)]}else $=0,G=F=[0,0];return{translation:this.getTranslation(),rotation:$*N,scaling:new g(F),skewing:new g(G[0]*N,G[1]*N)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(l){this.isIdentity()||l.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(l){var f=s.capitalize(l),b="_"+l;this["get"+f]=function(){return this[b]},this["set"+f]=function(_){this[b]=_,this._changed()}},{})),j=s.extend({_class:"Line",initialize:function(f,b,_,E,A){var T=!1;arguments.length>=4?(this._px=f,this._py=b,this._vx=_,this._vy=E,T=A):(this._px=f.x,this._py=f.y,this._vx=b.x,this._vy=b.y,T=_),T||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(l,f){return j.intersect(this._px,this._py,this._vx,this._vy,l._px,l._py,l._vx,l._vy,!0,f)},getSide:function(l,f){return j.getSide(this._px,this._py,this._vx,this._vy,l.x,l.y,!0,f)},getDistance:function(l){return Math.abs(this.getSignedDistance(l))},getSignedDistance:function(l){return j.getSignedDistance(this._px,this._py,this._vx,this._vy,l.x,l.y,!0)},isCollinear:function(l){return g.isCollinear(this._vx,this._vy,l._vx,l._vy)},isOrthogonal:function(l){return g.isOrthogonal(this._vx,this._vy,l._vx,l._vy)},statics:{intersect:function(l,f,b,_,E,A,T,N,$,F){$||(b-=l,_-=f,T-=E,N-=A);var G=b*N-_*T;if(!p.isMachineZero(G)){var Z=l-E,Y=f-A,W=(T*Y-N*Z)/G,X=(b*Y-_*Z)/G,U=1e-12,K=-U,V=1+U;if(F||K<W&&W<V&&K<X&&X<V)return F||(W=W<=0?0:W>=1?1:W),new g(l+W*b,f+W*_)}},getSide:function(l,f,b,_,E,A,T,N){T||(b-=l,_-=f);var $=E-l,F=A-f,G=$*_-F*b;return!N&&p.isMachineZero(G)&&(G=($*b+$*b)/(b*b+_*_),G>=0&&G<=1&&(G=0)),G<0?-1:G>0?1:0},getSignedDistance:function(l,f,b,_,E,A,T){return T||(b-=l,_-=f),b===0?_>0?E-l:l-E:_===0?b<0?A-f:f-A:((E-l)*_-(A-f)*b)/(_>b?_*Math.sqrt(1+b*b/(_*_)):b*Math.sqrt(1+_*_/(b*b)))},getDistance:function(l,f,b,_,E,A,T){return Math.abs(j.getSignedDistance(l,f,b,_,E,A,T))}}}),M=c.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(f){c.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new oe(null,null,this),this._view=ht.create(this,f||ve.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(l,f){return s.serialize(this._children,l,!0,f)},_changed:function(l,f){if(l&1){var b=this._view;b&&(b._needsUpdate=!0,!b._requested&&b._autoUpdate&&b.requestUpdate())}var _=this._changes;if(_&&f){var E=this._changesById,A=f._id,T=E[A];T?T.flags|=l:_.push(E[A]={item:f,flags:l})}},clear:function(){for(var l=this._children,f=l.length-1;f>=0;f--)l[f].remove()},isEmpty:function(){return!this._children.length},remove:function l(){return l.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(l){this._currentStyle.set(l)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new D({project:this,insert:!0})},getSymbolDefinitions:function(){var l=[],f={};return this.getItems({class:ue,match:function(b){var _=b._definition,E=_._id;return f[E]||(f[E]=!0,l.push(_)),!1}}),l},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var l=this._selectionItems,f=[];for(var b in l){var _=l[b],E=_._selection;E&1&&_.isInserted()?f.push(_):E||this._updateSelection(_)}return f},_updateSelection:function(l){var f=l._id,b=this._selectionItems;l._selection?b[f]!==l&&(this._selectionCount++,b[f]=l):b[f]===l&&(this._selectionCount--,delete b[f])},selectAll:function(){for(var l=this._children,f=0,b=l.length;f<b;f++)l[f].setFullySelected(!0)},deselectAll:function(){var l=this._selectionItems;for(var f in l)l[f].setFullySelected(!1)},addLayer:function(l){return this.insertLayer(n,l)},insertLayer:function(l,f){if(f instanceof D){f._remove(!1,!0),s.splice(this._children,[f],l,0),f._setProject(this,!0);var b=f._name;b&&f.setName(b),this._changes&&f._changed(5),this._activeLayer||(this._activeLayer=f)}else f=null;return f},_insertItem:function(l,f,b){return f=this.insertLayer(l,f)||(this._activeLayer||this._insertItem(n,new D(S.NO_INSERT),!0)).insertChild(l,f),b&&f.activate&&f.activate(),f},getItems:function(l){return S._getItems(this,l)},getItem:function(l){return S._getItems(this,l,null,null,!0)[0]||null},importJSON:function(l){this.activate();var f=this._activeLayer;return s.importJSON(l,f&&f.isEmpty()&&f)},removeOn:function(l){var f=this._removeSets;if(f){l==="mouseup"&&(f.mousedrag=null);var b=f[l];if(b){for(var _ in b){var E=b[_];for(var A in f){var T=f[A];T&&T!=b&&delete T[E._id]}E.remove()}f[l]=null}}},draw:function(l,f,b){this._updateVersion++,l.save(),f.applyToContext(l);for(var _=this._children,E=new s({offset:new g(0,0),pixelRatio:b,viewMatrix:f.isIdentity()?null:f,matrices:[new P],updateMatrix:!0}),A=0,T=_.length;A<T;A++)_[A].draw(l,E);if(l.restore(),this._selectionCount>0){l.save(),l.strokeWidth=1;var N=this._selectionItems,$=this._scope.settings.handleSize,F=this._updateVersion;for(var G in N)N[G]._drawSelection(l,f,$,N,F);l.restore()}}}),S=s.extend(a,{statics:{extend:function l(f){return f._serializeFields&&(f._serializeFields=s.set({},this.prototype._serializeFields,f._serializeFields)),l.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new P,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var l=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(l,function(f){this._events[f]={install:function(b){this.getView()._countItemEvent(b,1)},uninstall:function(b){this.getView()._countItemEvent(b,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:l}})},{initialize:function(){},_initialize:function(l,f){var b=l&&s.isPlainObject(l),_=b&&l.internal===!0,E=this._matrix=new P,A=b&&l.project||De.project,T=De.settings;return this._id=_?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&T.applyMatrix,f&&E.translate(f),E._owner=this,this._style=new oe(A._currentStyle,this,A),_||b&&l.insert==!1||!T.insertItems&&!(b&&l.insert==!0)?this._setProject(A):(b&&l.parent||A)._insertItem(n,this,!0),b&&l!==S.NO_INSERT&&l!==S.INSERT&&this.set(l,{internal:!0,insert:!0,project:!0,parent:!0}),b},_serialize:function(l,f){var b={},_=this;function E(A){for(var T in A){var N=_[T];s.equals(N,T==="leading"?A.fontSize*1.2:A[T])||(b[T]=s.serialize(N,l,T!=="data",f))}}return E(this._serializeFields),this instanceof B||E(this._style._defaults),[this._class,b]},_changed:function(l){var f=this._symbol,b=this._parent||f,_=this._project;l&8&&(this._bounds=this._position=this._decomposed=n),l&16&&(this._globalMatrix=n),b&&l&72&&S._clearBoundsCache(b),l&2&&S._clearBoundsCache(this),_&&_._changed(l,this),f&&f._changed(l)},getId:function(){return this._id},getName:function(){return this._name},setName:function(l){if(this._name&&this._removeNamed(),l===+l+"")throw new Error("Names consisting only of numbers are not supported.");var f=this._getOwner();if(l&&f){var b=f._children,_=f._namedChildren;(_[l]=_[l]||[]).push(this),l in b||(b[l]=this)}this._name=l||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(l){this.getStyle().set(l)}},s.each(["locked","visible","blendMode","opacity","guide"],function(l){var f=s.capitalize(l),b="_"+l,_={locked:256,visible:265};this["get"+f]=function(){return this[b]},this["set"+f]=function(E){E!=this[b]&&(this[b]=E,this._changed(_[l]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(l){if(l!==this._selection){this._selection=l;var f=this._project;f&&(f._updateSelection(this),this._changed(257))}},_changeSelection:function(l,f){var b=this._selection;this.setSelection(f?b|l:b&~l)},isSelected:function(){if(this._selectChildren){for(var l=this._children,f=0,b=l.length;f<b;f++)if(l[f].isSelected())return!0}return!!(this._selection&1)},setSelected:function(l){if(this._selectChildren)for(var f=this._children,b=0,_=f.length;b<_;b++)f[b].setSelected(l);this._changeSelection(1,l)},isFullySelected:function(){var l=this._children,f=!!(this._selection&1);if(l&&f){for(var b=0,_=l.length;b<_;b++)if(!l[b].isFullySelected())return!1;return!0}return f},setFullySelected:function(l){var f=this._children;if(f)for(var b=0,_=f.length;b<_;b++)f[b].setFullySelected(l);this._changeSelection(1,l)},isClipMask:function(){return this._clipMask},setClipMask:function(l){this._clipMask!=(l=!!l)&&(this._clipMask=l,l&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(l){this._data=l},getPosition:function(l){var f=l?g:v,b=this._position||(this._position=this._getPositionFromBounds());return new f(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(l){return this._pivot?this._matrix._transformPoint(this._pivot):(l||this.getBounds()).getCenter(!0)},getPivot:function(){var l=this._pivot;return l?new v(l.x,l.y,this,"setPivot"):null},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(l,f){this[f]=function(b){return this.getBounds(b,l)}},{beans:!0,getBounds:function(l,f){var b=f||l instanceof P,_=s.set({},b?f:l,this._boundsOptions);(!_.stroke||this.getStrokeScaling())&&(_.cacheItem=this);var E=this._getCachedBounds(b&&l,_).rect;return arguments.length?E:new k(E.x,E.y,E.width,E.height,this,"setBounds")},setBounds:function(){var l=x.read(arguments),f=this.getBounds(),b=this._matrix,_=new P,E=l.getCenter();_.translate(E),(l.width!=f.width||l.height!=f.height)&&(b.isInvertible()||(b.set(b._backup||new P().translate(b.getTranslation())),f=this.getBounds()),_.scale(f.width!==0?l.width/f.width:0,f.height!==0?l.height/f.height:0)),E=f.getCenter(),_.translate(-E.x,-E.y),this.transform(_)},_getBounds:function(l,f){var b=this._children;return!b||!b.length?new x:(S._updateBoundsCache(this,f.cacheItem),S._getBounds(b,l,f))},_getBoundsCacheKey:function(l,f){return[l.stroke?1:0,l.handle?1:0,f?1:0].join("")},_getCachedBounds:function(l,f,b){l=l&&l._orNullIfIdentity();var _=f.internal&&!b,E=f.cacheItem,A=_?null:this._matrix._orNullIfIdentity(),T=E&&(!l||l.equals(A))&&this._getBoundsCacheKey(f,_),N=this._bounds;if(S._updateBoundsCache(this._parent||this._symbol,E),T&&N&&T in N){var $=N[T];return{rect:$.rect.clone(),nonscaling:$.nonscaling}}var F=this._getBounds(l||A,f),G=F.rect||F,Z=this._style,Y=F.nonscaling||Z.hasStroke()&&!Z.getStrokeScaling();if(T){N||(this._bounds=N={});var $=N[T]={rect:G.clone(),nonscaling:Y,internal:_}}return{rect:G,nonscaling:Y}},_getStrokeMatrix:function(l,f){var b=this.getStrokeScaling()?null:f&&f.internal?this:this._parent||this._symbol&&this._symbol._item,_=b?b.getViewMatrix().invert():l;return _&&_._shiftless()},statics:{_updateBoundsCache:function(l,f){if(l&&f){var b=f._id,_=l._boundsCache=l._boundsCache||{ids:{},list:[]};_.ids[b]||(_.list.push(f),_.ids[b]=f)}},_clearBoundsCache:function(l){var f=l._boundsCache;if(f){l._bounds=l._position=l._boundsCache=n;for(var b=0,_=f.list,E=_.length;b<E;b++){var A=_[b];A!==l&&(A._bounds=A._position=n,A._boundsCache&&S._clearBoundsCache(A))}}},_getBounds:function(l,f,b){var _=1/0,E=-_,A=_,T=E,N=!1;b=b||{};for(var $=0,F=l.length;$<F;$++){var G=l[$];if(G._visible&&!G.isEmpty(!0)){var Z=G._getCachedBounds(f&&f.appended(G._matrix),b,!0),Y=Z.rect;_=Math.min(Y.x,_),A=Math.min(Y.y,A),E=Math.max(Y.x+Y.width,E),T=Math.max(Y.y+Y.height,T),Z.nonscaling&&(N=!0)}}return{rect:isFinite(_)?new x(_,A,E-_,T-A):new x,nonscaling:N}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var l=this._decompose();return l?l.rotation:0},setRotation:function(l){var f=this.getRotation();if(f!=null&&l!=null){var b=this._decomposed;this.rotate(l-f),b&&(b.rotation=l,this._decomposed=b)}},getScaling:function(){var l=this._decompose(),f=l&&l.scaling;return new v(f?f.x:1,f?f.y:1,this,"setScaling")},setScaling:function(){var l=this.getScaling(),f=g.read(arguments,0,{clone:!0,readNull:!0});if(l&&f&&!l.equals(f)){var b=this.getRotation(),_=this._decomposed,E=new P,A=p.isZero;if(A(l.x)||A(l.y))E.translate(_.translation),b&&E.rotate(b),E.scale(f.x,f.y),this._matrix.set(E);else{var T=this.getPosition(!0);E.translate(T),b&&E.rotate(b),E.scale(f.x/l.x,f.y/l.y),b&&E.rotate(-b),E.translate(T.negate()),this.transform(E)}_&&(_.scaling=f,this._decomposed=_)}},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},getGlobalMatrix:function(l){var f=this._globalMatrix;if(f)for(var b=this._parent,_=[];b;){if(!b._globalMatrix){f=null;for(var E=0,A=_.length;E<A;E++)_[E]._globalMatrix=null;break}_.push(b),b=b._parent}if(!f){f=this._globalMatrix=this._matrix.clone();var b=this._parent;b&&f.prepend(b.getGlobalMatrix(!0))}return l?f:f.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(l){(this._applyMatrix=this._canApplyMatrix&&!!l)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(l,f){if(this._project!==l){this._project&&this._installEvents(!1),this._project=l;for(var b=this._children,_=0,E=b&&b.length;_<E;_++)b[_]._setProject(l);f=!0}f&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function l(f){l.base.call(this,f);for(var b=this._children,_=0,E=b&&b.length;_<E;_++)b[_]._installEvents(f)},getLayer:function(){for(var l=this;l=l._parent;)if(l instanceof D)return l;return null},getParent:function(){return this._parent},setParent:function(l){return l.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(l){this.removeChildren(),this.addChildren(l)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var l=this._getOwner();return l&&l._children[this._index+1]||null},getPreviousSibling:function(){var l=this._getOwner();return l&&l._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(l){var f=this._parent,b=f&&f._children;b&&f.insertChildren(l in b?l:n,[this])},equals:function(l){return l===this||l&&this._class===l._class&&this._style.equals(l._style)&&this._matrix.equals(l._matrix)&&this._locked===l._locked&&this._visible===l._visible&&this._blendMode===l._blendMode&&this._opacity===l._opacity&&this._clipMask===l._clipMask&&this._guide===l._guide&&this._equals(l)||!1},_equals:function(l){return s.equals(this._children,l._children)},clone:function(l){var f=new this.constructor(S.NO_INSERT),b=this._children,_=s.pick(l?l.insert:n,l===n||l===!0),E=s.pick(l?l.deep:n,!0);b&&f.copyAttributes(this),(!b||E)&&f.copyContent(this),b||f.copyAttributes(this),_&&f.insertAbove(this);var A=this._name,T=this._parent;if(A&&T){for(var b=T._children,N=A,$=1;b[A];)A=N+" "+$++;A!==N&&f.setName(A)}return f},copyContent:function(l){for(var f=l._children,b=0,_=f&&f.length;b<_;b++)this.addChild(f[b].clone(!1),!0)},copyAttributes:function(l,f){this.setStyle(l._style);for(var b=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],_=0,E=b.length;_<E;_++){var A=b[_];l.hasOwnProperty(A)&&(this[A]=l[A])}f||this._matrix.set(l._matrix,!0),this.setApplyMatrix(l._applyMatrix),this.setPivot(l._pivot),this.setSelection(l._selection);var T=l._data,N=l._name;this._data=T?s.clone(T):null,N&&this.setName(N)},rasterize:function(l,f){var b,_,E;s.isPlainObject(l)?(b=l.resolution,_=l.insert,E=l.raster):(b=l,_=f),E||(E=new ee(S.NO_INSERT));var A=this.getStrokeBounds(),T=(b||this.getView().getResolution())/72,N=A.getTopLeft().floor(),$=A.getBottomRight().ceil(),F=new w($.subtract(N)),G=F.multiply(T);if(E.setSize(G,!0),!G.isZero()){var Z=E.getContext(!0),Y=new P().scale(T).translate(N.negate());Z.save(),Y.applyToContext(Z),this.draw(Z,new s({matrices:[Y]})),Z.restore()}return E._matrix.set(new P().translate(N.add(F.divide(2))).scale(1/T)),(_===n||_)&&E.insertAbove(this),E},contains:function(){var l=this._matrix;return l.isInvertible()&&!!this._contains(l._inverseTransform(g.read(arguments)))},_contains:function(l){var f=this._children;if(f){for(var b=f.length-1;b>=0;b--)if(f[b].contains(l))return!0;return!1}return l.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new xe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(l,f){return l instanceof S?this._asPathItem().getIntersections(l._asPathItem(),null,f,!0).length>0:!1}},new function(){function l(){var _=arguments;return this._hitTest(g.read(_),ge.getOptions(_))}function f(){var _=arguments,E=g.read(_),A=ge.getOptions(_),T=[];return this._hitTest(E,new s({all:T},A)),T}function b(_,E,A,T){var N=this._children;if(N)for(var $=N.length-1;$>=0;$--){var F=N[$],G=F!==T&&F._hitTest(_,E,A);if(G&&!E.all)return G}return null}return M.inject({hitTest:l,hitTestAll:f,_hitTest:b}),{hitTest:l,hitTestAll:f,_hitTestChildren:b}},{_hitTest:function(l,f,b){if(this._locked||!this._visible||this._guide&&!f.guides||this.isEmpty())return null;var _=this._matrix,E=b?b.appended(_):this.getGlobalMatrix().prepend(this.getView()._matrix),A=Math.max(f.tolerance,1e-12),T=f._tolerancePadding=new w(xe._getStrokePadding(A,_._shiftless().invert()));if(l=_._inverseTransform(l),!l||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(T.multiply(2))._containsPoint(l))return null;var N=!(f.guides&&!this._guide||f.selected&&!this.isSelected()||f.type&&f.type!==s.hyphenate(this._class)||f.class&&!(this instanceof f.class)),$=f.match,F=this,G,Z;function Y(z){return z&&$&&!$(z)&&(z=null),z&&f.all&&f.all.push(z),z}function W(z,te){var ae=te?G["get"+te]():F.getPosition();if(l.subtract(ae).divide(T).length<=1)return new ge(z,F,{name:te?s.hyphenate(te):z,point:ae})}var X=f.position,U=f.center,K=f.bounds;if(N&&this._parent&&(X||U||K)){if((U||K)&&(G=this.getInternalBounds()),Z=X&&W("position")||U&&W("center","Center"),!Z&&K)for(var V=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],ne=0;ne<8&&!Z;ne++)Z=W("bounds",V[ne]);Z=Y(Z)}return Z||(Z=this._hitTestChildren(l,f,E)||N&&Y(this._hitTestSelf(l,f,E,this.getStrokeScaling()?null:E._shiftless().invert()))||null),Z&&Z.point&&(Z.point=_.transform(Z.point)),Z},_hitTestSelf:function(l,f){if(f.fill&&this.hasFill()&&this._contains(l))return new ge("fill",this)},matches:function(l,f){function b(T,N){for(var $ in T)if(T.hasOwnProperty($)){var F=T[$],G=N[$];if(s.isPlainObject(F)&&s.isPlainObject(G)){if(!b(F,G))return!1}else if(!s.equals(F,G))return!1}return!0}var _=typeof l;if(_==="object"){for(var E in l)if(l.hasOwnProperty(E)&&!this.matches(E,l[E]))return!1;return!0}else{if(_==="function")return l(this);if(l==="match")return f(this);var A=/^(empty|editable)$/.test(l)?this["is"+s.capitalize(l)]():l==="type"?s.hyphenate(this._class):this[l];if(l==="class"){if(typeof f=="function")return this instanceof f;A=this._class}if(typeof f=="function")return!!f(A);if(f){if(f.test)return f.test(A);if(s.isPlainObject(f))return b(f,A)}return s.equals(A,f)}},getItems:function(l){return S._getItems(this,l,this._matrix)},getItem:function(l){return S._getItems(this,l,this._matrix,null,!0)[0]||null},statics:{_getItems:function l(f,b,_,E,A){if(!E){var T=typeof b=="object"&&b,N=T&&T.overlapping,$=T&&T.inside,F=N||$,Y=F&&x.read([F]);E={items:[],recursive:T&&T.recursive!==!1,inside:!!$,overlapping:!!N,rect:Y,path:N&&new xe.Rectangle({rectangle:Y,insert:!1})},T&&(b=s.filter({},b,{recursive:!0,inside:!0,overlapping:!0}))}var G=f._children,Z=E.items,Y=E.rect;_=Y&&(_||new P);for(var W=0,X=G&&G.length;W<X;W++){var U=G[W],K=_&&_.appended(U._matrix),V=!0;if(Y){var F=U.getBounds(K);if(!Y.intersects(F))continue;Y.contains(F)||E.overlapping&&(F.contains(Y)||E.path.intersects(U,K))||(V=!1)}if(V&&U.matches(b)&&(Z.push(U),A)||(E.recursive!==!1&&l(U,b,K,E,A),A&&Z.length>0))break}return Z}}},{importJSON:function(l){var f=s.importJSON(l,this);return f!==this?this.addChild(f):f},addChild:function(l){return this.insertChild(n,l)},insertChild:function(l,f){var b=f?this.insertChildren(l,[f]):null;return b&&b[0]},addChildren:function(l){return this.insertChildren(this._children.length,l)},insertChildren:function(l,f){var b=this._children;if(b&&f&&f.length>0){f=s.slice(f);for(var _={},E=f.length-1;E>=0;E--){var A=f[E],T=A&&A._id;!A||_[T]?f.splice(E,1):(A._remove(!1,!0),_[T]=!0)}s.splice(b,f,l,0);for(var N=this._project,$=N._changes,E=0,F=f.length;E<F;E++){var A=f[E],G=A._name;A._parent=this,A._setProject(N,!0),G&&A.setName(G),$&&A._changed(5)}this._changed(11)}else f=null;return f},_insertItem:"#insertChild",_insertAt:function(l,f){var b=l&&l._getOwner(),_=l!==this&&b?this:null;return _&&(_._remove(!1,!0),b._insertItem(l._index+f,_)),_},insertAbove:function(l){return this._insertAt(l,1)},insertBelow:function(l){return this._insertAt(l,0)},sendToBack:function(){var l=this._getOwner();return l?l._insertItem(0,this):null},bringToFront:function(){var l=this._getOwner();return l?l._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(l){return this.insertChild(0,l)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(l){return l._insertItem(n,this)},copyTo:function(l){return this.clone(!1).addTo(l)},reduce:function(l){var f=this._children;if(f&&f.length===1){var b=f[0].reduce(l);return this._parent?(b.insertAbove(this),this.remove()):b.remove(),b}return this},_removeNamed:function(){var l=this._getOwner();if(l){var f=l._children,b=l._namedChildren,_=this._name,E=b[_],A=E?E.indexOf(this):-1;A!==-1&&(f[_]==this&&delete f[_],E.splice(A,1),E.length?f[_]=E[0]:delete b[_])}},_remove:function(l,f){var b=this._getOwner(),_=this._project,E=this._index;return this._style&&this._style._dispose(),b?(this._name&&this._removeNamed(),E!=null&&(_._activeLayer===this&&(_._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(b._children,null,E,1)),this._installEvents(!1),l&&_._changes&&this._changed(5),f&&b._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(l){var f=l&&l.insertBelow(this);return f&&this.remove(),f},removeChildren:function(l,f){if(!this._children)return null;l=l||0,f=s.pick(f,this._children.length);for(var b=s.splice(this._children,null,l,f-l),_=b.length-1;_>=0;_--)b[_]._remove(!0,!1);return b.length>0&&this._changed(11),b},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var l=0,f=this._children.length;l<f;l++)this._children[l]._index=l;this._changed(11)}},isEmpty:function(l){var f=this._children,b=f?f.length:0;if(l){for(var _=0;_<b;_++)if(!f[_].isEmpty(l))return!1;return!0}return!b},isEditable:function(){for(var l=this;l;){if(!l._visible||l._locked)return!1;l=l._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(l){function f(T){var N=[];do N.unshift(T);while(T=T._parent);return N}for(var b=f(this),_=f(l),E=0,A=Math.min(b.length,_.length);E<A;E++)if(b[E]!=_[E])return b[E]._index<_[E]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(l){return this._getOrder(l)===-1},isBelow:function(l){return this._getOrder(l)===1},isParent:function(l){return this._parent===l},isChild:function(l){return l&&l._parent===this},isDescendant:function(l){for(var f=this;f=f._parent;)if(f===l)return!0;return!1},isAncestor:function(l){return l?l.isDescendant(this):!1},isSibling:function(l){return this._parent===l._parent},isGroupedWith:function(l){for(var f=this._parent;f;){if(f._parent&&/^(Group|Layer|CompoundPath)$/.test(f._class)&&l.isDescendant(f))return!0;f=f._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(l){var f=l==="rotate";this[l]=function(){var b=arguments,_=(f?s:g).read(b),E=g.read(b,0,{readNull:!0});return this.transform(new P()[l](_,E||this.getPosition(!0)))}},{translate:function(){var l=new P;return this.transform(l.translate.apply(l,arguments))},transform:function(l,f,b){var _=this._matrix,E=l&&!l.isIdentity(),A=b&&this._canApplyMatrix||this._applyMatrix&&(E||!_.isIdentity()||f&&this._children);if(!E&&!A)return this;if(E){!l.isInvertible()&&_.isInvertible()&&(_._backup=_.getValues()),_.prepend(l,!0);var T=this._style,N=T.getFillColor(!0),$=T.getStrokeColor(!0);N&&N.transform(l),$&&$.transform(l)}if(A&&(A=this._transformContent(_,f,b))){var F=this._pivot;F&&_._transformPoint(F,F,!0),_.reset(!0),b&&this._canApplyMatrix&&(this._applyMatrix=!0)}var G=this._bounds,Z=this._position;(E||A)&&this._changed(25);var Y=E&&G&&l.decompose();if(Y&&Y.skewing.isZero()&&Y.rotation%90===0){for(var W in G){var X=G[W];if(X.nonscaling)delete G[W];else if(A||!X.internal){var U=X.rect;l._transformBounds(U,U)}}this._bounds=G;var K=G[this._getBoundsCacheKey(this._boundsOptions||{})];K&&(this._position=this._getPositionFromBounds(K.rect))}else E&&Z&&this._pivot&&(this._position=l._transformPoint(Z,Z));return this},_transformContent:function(l,f,b){var _=this._children;if(_){for(var E=0,A=_.length;E<A;E++)_[E].transform(l,f,b);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(l,f){l=x.read(arguments);var b=this.getBounds(),_=b.height/b.width,E=l.height/l.width,A=(f?_>E:_<E)?l.width/b.width:l.height/b.height,T=new x(new g,new w(b.width*A,b.height*A));T.setCenter(l.getCenter()),this.setBounds(T)}}),{_setStyles:function(l,f,b){var _=this._style,E=this._matrix;if(_.hasFill()&&(l.fillStyle=_.getFillColor().toCanvasStyle(l,E)),_.hasStroke()){l.strokeStyle=_.getStrokeColor().toCanvasStyle(l,E),l.lineWidth=_.getStrokeWidth();var A=_.getStrokeJoin(),T=_.getStrokeCap(),N=_.getMiterLimit();if(A&&(l.lineJoin=A),T&&(l.lineCap=T),N&&(l.miterLimit=N),De.support.nativeDash){var $=_.getDashArray(),F=_.getDashOffset();$&&$.length&&("setLineDash"in l?(l.setLineDash($),l.lineDashOffset=F):(l.mozDash=$,l.mozDashOffset=F))}}if(_.hasShadow()){var G=f.pixelRatio||1,Z=b._shiftless().prepend(new P().scale(G,G)),Y=Z.transform(new g(_.getShadowBlur(),0)),W=Z.transform(this.getShadowOffset());l.shadowColor=_.getShadowColor().toCanvasStyle(l),l.shadowBlur=Y.getLength(),l.shadowOffsetX=W.x,l.shadowOffsetY=W.y}},draw:function(l,f,b){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var _=f.matrices,E=f.viewMatrix,A=this._matrix,T=_[_.length-1].appended(A);if(T.isInvertible()){E=E?E.appended(T):T,_.push(T),f.updateMatrix&&(this._globalMatrix=T);var N=this._blendMode,$=p.clamp(this._opacity,0,1),F=N==="normal",G=me.nativeModes[N],Z=F&&$===1||f.dontStart||f.clip||(G||F&&$<1)&&this._canComposite(),Y=f.pixelRatio||1,W,X,U;if(!Z){var K=this.getStrokeBounds(E);if(!K.width||!K.height){_.pop();return}U=f.offset,X=f.offset=K.getTopLeft().floor(),W=l,l=ve.getContext(K.getSize().ceil().add(1).multiply(Y)),Y!==1&&l.scale(Y,Y)}l.save();var V=b?b.appended(A):this._canScaleStroke&&!this.getStrokeScaling(!0)&&E,ne=!Z&&f.clipItem,z=!V||ne;if(Z?(l.globalAlpha=$,G&&(l.globalCompositeOperation=N)):z&&l.translate(-X.x,-X.y),z&&(Z?A:E).applyToContext(l),ne&&f.clipItem.draw(l,f.extend({clip:!0})),V){l.setTransform(Y,0,0,Y,0,0);var te=f.offset;te&&l.translate(-te.x,-te.y)}this._draw(l,f,E,V),l.restore(),_.pop(),f.clip&&!f.dontFinish&&l.clip(this.getFillRule()),Z||(me.process(N,l,W,$,X.subtract(U).multiply(Y)),ve.release(l),f.offset=U)}}},_isUpdated:function(l){var f=this._parent;if(f instanceof Le)return f._isUpdated(l);var b=this._updateVersion===l;return!b&&f&&f._visible&&f._isUpdated(l)&&(this._updateVersion=l,b=!0),b},_drawSelection:function(l,f,b,_,E){var A=this._selection,T=A&1,N=A&2||T&&this._selectBounds,$=A&4;if(this._drawSelected||(T=!1),(T||N||$)&&this._isUpdated(E)){var F,G=this.getSelectedColor(!0)||(F=this.getLayer())&&F.getSelectedColor(!0),Z=f.appended(this.getGlobalMatrix(!0)),Y=b/2;if(l.strokeStyle=l.fillStyle=G?G.toCanvasStyle(l):"#009dec",T&&this._drawSelected(l,Z,_),$){var W=this.getPosition(!0),X=this._parent,U=X?X.localToGlobal(W):W,K=U.x,V=U.y;l.beginPath(),l.arc(K,V,Y,0,Math.PI*2,!0),l.stroke();for(var ne=[[0,-1],[1,0],[0,1],[-1,0]],z=Y,te=b+1,ae=0;ae<4;ae++){var ce=ne[ae],re=ce[0],be=ce[1];l.moveTo(K+re*z,V+be*z),l.lineTo(K+re*te,V+be*te),l.stroke()}}if(N){var ke=Z._transformCorners(this.getInternalBounds());l.beginPath();for(var ae=0;ae<8;ae++)l[ae?"lineTo":"moveTo"](ke[ae],ke[++ae]);l.closePath(),l.stroke();for(var ae=0;ae<8;ae++)l.fillRect(ke[ae]-Y,ke[++ae]-Y,b,b)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(l){this["removeOn"+s.capitalize(l)]=function(){var f={};return f[l]=!0,this.removeOn(f)}},{removeOn:function(l){for(var f in l)if(l[f]){var b="mouse"+f,_=this._project,E=_._removeSets=_._removeSets||{};E[b]=E[b]||{},E[b][this._id]=this}return this}}),{tween:function(l,f,b){b||(b=f,f=l,l=null,b||(b=f,f=null));var _=b&&b.easing,E=b&&b.start,A=b!=null&&(typeof b=="number"?b:b.duration),T=new Q(this,l,f,A,_,E);function N($){T._handleFrame($.time*1e3),T.running||this.off("frame",N)}return A&&this.on("frame",N),T},tweenTo:function(l,f){return this.tween(null,l,f)},tweenFrom:function(l,f){return this.tween(l,null,f)}}),B=S.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(f){this._children=[],this._namedChildren={},this._initialize(f)||this.addChildren(Array.isArray(f)?f:arguments)},_changed:function l(f){l.base.call(this,f),f&2050&&(this._clipItem=n)},_getClipItem:function(){var l=this._clipItem;if(l===n){l=null;for(var f=this._children,b=0,_=f.length;b<_;b++)if(f[b]._clipMask){l=f[b];break}this._clipItem=l}return l},isClipped:function(){return!!this._getClipItem()},setClipped:function(l){var f=this.getFirstChild();f&&f.setClipMask(l)},_getBounds:function l(f,b){var _=this._getClipItem();return _?_._getCachedBounds(_._matrix.prepended(f),s.set({},b,{stroke:!1})):l.base.call(this,f,b)},_hitTestChildren:function l(f,b,_){var E=this._getClipItem();return(!E||E.contains(f))&&l.base.call(this,f,b,_,E)},_draw:function(l,f){var b=f.clip,_=!b&&this._getClipItem();f=f.extend({clipItem:_,clip:!1}),b?(l.beginPath(),f.dontStart=f.dontFinish=!0):_&&_.draw(l,f.extend({clip:!0}));for(var E=this._children,A=0,T=E.length;A<T;A++){var N=E[A];N!==_&&N.draw(l,f)}}}),D=B.extend({_class:"Layer",initialize:function(){B.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function l(){return this._parent?l.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),R=S.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(f,b){this._initialize(f,b)},_equals:function(l){return this._type===l._type&&this._size.equals(l._size)&&s.equals(this._radius,l._radius)},copyContent:function(l){this.setType(l._type),this.setSize(l._size),this.setRadius(l._radius)},getType:function(){return this._type},setType:function(l){this._type=l},getShape:"#getType",setShape:"#setType",getSize:function(){var l=this._size;return new C(l.width,l.height,this,"setSize")},setSize:function(){var l=w.read(arguments);if(!this._size)this._size=l.clone();else if(!this._size.equals(l)){var f=this._type,b=l.width,_=l.height;f==="rectangle"?this._radius.set(w.min(this._radius,l.divide(2).abs())):f==="circle"?(b=_=(b+_)/2,this._radius=b/2):f==="ellipse"&&this._radius._set(b/2,_/2),this._size._set(b,_),this._changed(9)}},getRadius:function(){var l=this._radius;return this._type==="circle"?l:new C(l.width,l.height,this,"setRadius")},setRadius:function(l){var f=this._type;if(f==="circle"){if(l===this._radius)return;var b=l*2;this._radius=l,this._size._set(b,b)}else if(l=w.read(arguments),!this._radius)this._radius=l.clone();else{if(this._radius.equals(l))return;if(this._radius.set(l),f==="rectangle"){var b=w.max(this._size,l.multiply(2));this._size.set(b)}else f==="ellipse"&&this._size._set(l.width*2,l.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(l){var f=new xe[s.capitalize(this._type)]({center:new g,size:this._size,radius:this._radius,insert:!1});return f.copyAttributes(this),De.settings.applyMatrix&&f.setApplyMatrix(!0),(l===n||l)&&f.insertAbove(this),f},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(l,f,b,_){var E=this._style,A=E.hasFill(),T=E.hasStroke(),N=f.dontFinish||f.clip,$=!_;if(A||T||N){var F=this._type,G=this._radius,Z=F==="circle";if(f.dontStart||l.beginPath(),$&&Z)l.arc(0,0,G,0,Math.PI*2,!0);else{var Y=Z?G:G.width,W=Z?G:G.height,X=this._size,U=X.width,K=X.height;if($&&F==="rectangle"&&Y===0&&W===0)l.rect(-U/2,-K/2,U,K);else{var V=U/2,ne=K/2,z=1-.5522847498307936,te=Y*z,ae=W*z,ce=[-V,-ne+W,-V,-ne+ae,-V+te,-ne,-V+Y,-ne,V-Y,-ne,V-te,-ne,V,-ne+ae,V,-ne+W,V,ne-W,V,ne-ae,V-te,ne,V-Y,ne,-V+Y,ne,-V+te,ne,-V,ne-ae,-V,ne-W];_&&_.transform(ce,ce,32),l.moveTo(ce[0],ce[1]),l.bezierCurveTo(ce[2],ce[3],ce[4],ce[5],ce[6],ce[7]),V!==Y&&l.lineTo(ce[8],ce[9]),l.bezierCurveTo(ce[10],ce[11],ce[12],ce[13],ce[14],ce[15]),ne!==W&&l.lineTo(ce[16],ce[17]),l.bezierCurveTo(ce[18],ce[19],ce[20],ce[21],ce[22],ce[23]),V!==Y&&l.lineTo(ce[24],ce[25]),l.bezierCurveTo(ce[26],ce[27],ce[28],ce[29],ce[30],ce[31])}}l.closePath()}!N&&(A||T)&&(this._setStyles(l,f,b),A&&(l.fill(E.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),T&&l.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(l,f){var b=new x(this._size).setCenter(0,0),_=this._style,E=f.stroke&&_.hasStroke()&&_.getStrokeWidth();return l&&(b=l._transformBounds(b)),E?b.expand(xe._getStrokePadding(E,this._getStrokeMatrix(l,f))):b}},new function(){function l(b,_,E){var A=b._radius;if(!A.isZero())for(var T=b._size.divide(2),N=1;N<=4;N++){var $=new g(N>1&&N<4?-1:1,N>2?-1:1),F=$.multiply(T),G=F.subtract($.multiply(A)),Z=new x(E?F.add($.multiply(E)):F,G);if(Z.contains(_))return{point:G,quadrant:N}}}function f(b,_,E,A){var T=b.divide(_);return(!A||T.isInQuadrant(A))&&T.subtract(T.normalize()).multiply(_).divide(E).length<=1}return{_contains:function b(_){if(this._type==="rectangle"){var E=l(this,_);return E?_.subtract(E.point).divide(this._radius).getLength()<=1:b.base.call(this,_)}else return _.divide(this.size).getLength()<=.5},_hitTestSelf:function b(_,E,A,T){var N=!1,$=this._style,F=E.stroke&&$.hasStroke(),G=E.fill&&$.hasFill();if(F||G){var Z=this._type,Y=this._radius,W=F?$.getStrokeWidth()/2:0,X=E._tolerancePadding.add(xe._getStrokePadding(W,!$.getStrokeScaling()&&T));if(Z==="rectangle"){var U=X.multiply(2),K=l(this,_,U);if(K)N=f(_.subtract(K.point),Y,X,K.quadrant);else{var V=new x(this._size).setCenter(0,0),ne=V.expand(U),z=V.expand(U.negate());N=ne._containsPoint(_)&&!z._containsPoint(_)}}else N=f(_,Y,X)}return N?new ge(F?"stroke":"fill",this):b.base.apply(this,arguments)}}},{statics:new function(){function l(f,b,_,E,A){var T=s.create(R.prototype);return T._type=f,T._size=_,T._radius=E,T._initialize(s.getNamed(A),b),T}return{Circle:function(){var f=arguments,b=g.readNamed(f,"center"),_=s.readNamed(f,"radius");return l("circle",b,new w(_*2),_,f)},Rectangle:function(){var f=arguments,b=x.readNamed(f,"rectangle"),_=w.min(w.readNamed(f,"radius"),b.getSize(!0).divide(2));return l("rectangle",b.getCenter(!0),b.getSize(!0),_,f)},Ellipse:function(){var f=arguments,b=R._readEllipse(f),_=b.radius;return l("ellipse",b.center,_.multiply(2),_,f)},_readEllipse:function(f){var b,_;if(s.hasNamed(f,"radius"))b=g.readNamed(f,"center"),_=w.readNamed(f,"radius");else{var E=x.readNamed(f,"rectangle");b=E.getCenter(!0),_=E.getSize(!0).divide(2)}return{center:b,radius:_}}}}}),ee=S.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(f,b){if(!this._initialize(f,b!==n&&g.read(arguments))){var _,E=typeof f,A=E==="string"?i.getElementById(f):E==="object"?f:null;if(A&&A!==S.NO_INSERT){if(A.getContext||A.naturalHeight!=null)_=A;else if(A){var T=w.read(arguments);T.isZero()||(_=ve.getCanvas(T))}}_?this.setImage(_):this.setSource(f)}this._size||(this._size=new w,this._loaded=!1)},_equals:function(l){return this.getSource()===l.getSource()},copyContent:function(l){var f=l._image,b=l._canvas;if(f)this._setImage(f);else if(b){var _=ve.getCanvas(l._size);_.getContext("2d").drawImage(b,0,0),this._setImage(_)}this._crossOrigin=l._crossOrigin},getSize:function(){var l=this._size;return new C(l?l.width:0,l?l.height:0,this,"setSize")},setSize:function(l,f){var b=w.read(arguments);if(b.equals(this._size))f&&this.clear();else if(b.width>0&&b.height>0){var _=!f&&this.getElement();this._setImage(ve.getCanvas(b)),_&&this.getContext(!0).drawImage(_,0,0,b.width,b.height)}else this._canvas&&ve.release(this._canvas),this._size=b.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(l){this.setSize(l,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(l){this.setSize(this.getWidth(),l)},getLoaded:function(){return this._loaded},isEmpty:function(){var l=this._size;return!l||l.width===0&&l.height===0},getResolution:function(){var l=this._matrix,f=new g(0,0).transform(l),b=new g(1,0).transform(l).subtract(f),_=new g(0,1).transform(l).subtract(f);return new w(72/b.getLength(),72/_.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(l){var f=this;function b(_){var E=f.getView(),A=_&&_.type||"load";E&&f.responds(A)&&(De=E._scope,f.emit(A,new Ct(_)))}this._setImage(l),this._loaded?setTimeout(b,0):l&&Ne.add(l,{load:function(_){f._setImage(l),b(_)},error:b})},_setImage:function(l){this._canvas&&ve.release(this._canvas),l&&l.getContext?(this._image=null,this._canvas=l,this._loaded=!0):(this._image=l,this._canvas=null,this._loaded=!!(l&&l.src&&l.complete)),this._size=new w(l?l.naturalWidth||l.width:0,l?l.naturalHeight||l.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var l=ve.getContext(this._size);try{this._image&&l.drawImage(this._image,0,0),this._canvas=l.canvas}catch{ve.release(l)}}return this._canvas},setCanvas:"#setImage",getContext:function(l){return this._context||(this._context=this.getCanvas().getContext("2d")),l&&(this._image=null,this._changed(1025)),this._context},setContext:function(l){this._context=l},getSource:function(){var l=this._image;return l&&l.src||this.toDataURL()},setSource:function(l){var f=new t.Image,b=this._crossOrigin;b&&(f.crossOrigin=b),l&&(f.src=l),this.setImage(f)},getCrossOrigin:function(){var l=this._image;return l&&l.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(l){this._crossOrigin=l;var f=this._image;f&&(f.crossOrigin=l)},getSmoothing:function(){return this._smoothing},setSmoothing:function(l){this._smoothing=typeof l=="string"?l:l?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var l=x.read(arguments),f=ve.getContext(l.getSize());return f.drawImage(this.getCanvas(),l.x,l.y,l.width,l.height,0,0,l.width,l.height),f.canvas},getSubRaster:function(){var l=x.read(arguments),f=new ee(S.NO_INSERT);return f._setImage(this.getSubCanvas(l)),f.translate(l.getCenter().subtract(this.getSize().divide(2))),f._matrix.prepend(this._matrix),f.insertAbove(this),f},toDataURL:function(){var l=this._image,f=l&&l.src;if(/^data:/.test(f))return f;var b=this.getCanvas();return b?b.toDataURL.apply(b,arguments):null},drawImage:function(l){var f=g.read(arguments,1);this.getContext(!0).drawImage(l,f.x,f.y)},getAverageColor:function(l){var f,b;if(l?l instanceof Be?(b=l,f=l.getBounds()):typeof l=="object"&&("width"in l?f=new x(l):"x"in l&&(f=new x(l.x-.5,l.y-.5,1,1))):f=this.getBounds(),!f)return null;var _=32,E=Math.min(f.width,_),A=Math.min(f.height,_),T=ee._sampleContext;T?T.clearRect(0,0,_+1,_+1):T=ee._sampleContext=ve.getContext(new w(_)),T.save();var N=new P().scale(E/f.width,A/f.height).translate(-f.x,-f.y);N.applyToContext(T),b&&b.draw(T,new s({clip:!0,matrices:[N]})),this._matrix.applyToContext(T);var $=this.getElement(),F=this._size;$&&T.drawImage($,-F.width/2,-F.height/2),T.restore();for(var G=T.getImageData(.5,.5,Math.ceil(E),Math.ceil(A)).data,Z=[0,0,0],Y=0,W=0,X=G.length;W<X;W+=4){var U=G[W+3];Y+=U,U/=255,Z[0]+=G[W]*U,Z[1]+=G[W+1]*U,Z[2]+=G[W+2]*U}for(var W=0;W<3;W++)Z[W]/=Y;return Y?Ue.read(Z):null},getPixel:function(){var l=g.read(arguments),f=this.getContext().getImageData(l.x,l.y,1,1).data;return new Ue("rgb",[f[0]/255,f[1]/255,f[2]/255],f[3]/255)},setPixel:function(){var l=arguments,f=g.read(l),b=Ue.read(l),_=b._convert("rgb"),E=b._alpha,A=this.getContext(!0),T=A.createImageData(1,1),N=T.data;N[0]=_[0]*255,N[1]=_[1]*255,N[2]=_[2]*255,N[3]=E!=null?E*255:255,A.putImageData(T,f.x,f.y)},clear:function(){var l=this._size;this.getContext(!0).clearRect(0,0,l.width+1,l.height+1)},createImageData:function(){var l=w.read(arguments);return this.getContext().createImageData(l.width,l.height)},getImageData:function(){var l=x.read(arguments);return l.isEmpty()&&(l=new x(this._size)),this.getContext().getImageData(l.x,l.y,l.width,l.height)},putImageData:function(l){var f=g.read(arguments,1);this.getContext(!0).putImageData(l,f.x,f.y)},setImageData:function(l){this.setSize(l),this.getContext(!0).putImageData(l,0,0)},_getBounds:function(l,f){var b=new x(this._size).setCenter(0,0);return l?l._transformBounds(b):b},_hitTestSelf:function(l){if(this._contains(l)){var f=this;return new ge("pixel",f,{offset:l.add(f._size.divide(2)).round(),color:{get:function(){return f.getPixel(this.offset)}}})}},_draw:function(l,f,b){var _=this.getElement();if(_&&_.width>0&&_.height>0){l.globalAlpha=p.clamp(this._opacity,0,1),this._setStyles(l,f,b);var E=this._smoothing,A=E==="off";We.setPrefixed(l,A?"imageSmoothingEnabled":"imageSmoothingQuality",A?!1:E),l.drawImage(_,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ue=S.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(f,b){this._initialize(f,b!==n&&g.read(arguments,1))||this.setDefinition(f instanceof ie?f:new ie(f))},_equals:function(l){return this._definition===l._definition},copyContent:function(l){this.setDefinition(l._definition)},getDefinition:function(){return this._definition},setDefinition:function(l){this._definition=l,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(l,f){var b=this._definition._item;return b._getCachedBounds(b._matrix.prepended(l),f)},_hitTestSelf:function(l,f,b){var _=f.extend({all:!1}),E=this._definition._item._hitTest(l,_,b);return E&&(E.item=this),E},_draw:function(l,f){this._definition._item.draw(l,f)}}),ie=s.extend({_class:"SymbolDefinition",initialize:function(f,b){this._id=m.get(),this.project=De.project,f&&this.setItem(f,b)},_serialize:function(l,f){return f.add(this,function(){return s.serialize([this._class,this._item],l,!1,f)})},_changed:function(l){l&8&&S._clearBoundsCache(this),l&1&&this.project._changed(l)},getItem:function(){return this._item},setItem:function(l,f){l._symbol&&(l=l.clone()),this._item&&(this._item._symbol=null),this._item=l,l.remove(),l.setSelected(!1),f||l.setPosition(new g),l._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(l){return new ue(this,l)},clone:function(){return new ie(this._item.clone(!1))},equals:function(l){return l===this||l&&this._item.equals(l._item)||!1}}),ge=s.extend({_class:"HitResult",initialize:function(f,b,_){this.type=f,this.item=b,_&&this.inject(_)},statics:{getOptions:function(l){var f=l&&s.read(l);return new s({type:null,tolerance:De.settings.hitTolerance,fill:!f,stroke:!f,segments:!f,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},f)}}}),H=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(f,b,_,E,A,T){var N=arguments.length,$,F,G,Z;N>0&&(f==null||typeof f=="object"?N===1&&f&&"point"in f?($=f.point,F=f.handleIn,G=f.handleOut,Z=f.selection):($=f,F=b,G=_,Z=E):($=[f,b],F=_!==n?[_,E]:null,G=A!==n?[A,T]:null)),new ye($,this,"_point"),new ye(F,this,"_handleIn"),new ye(G,this,"_handleOut"),Z&&this.setSelection(Z)},_serialize:function(l,f){var b=this._point,_=this._selection,E=_||this.hasHandles()?[b,this._handleIn,this._handleOut]:b;return _&&E.push(_),s.serialize(E,l,!0,f)},_changed:function(l){var f=this._path;if(f){var b=f._curves,_=this._index,E;b&&((!l||l===this._point||l===this._handleIn)&&(E=_>0?b[_-1]:f._closed?b[b.length-1]:null)&&E._changed(),(!l||l===this._point||l===this._handleOut)&&(E=b[_])&&E._changed()),f._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(g.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(g.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(g.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var l=this._handleIn,f=this._handleOut;return!l.isZero()&&!f.isZero()&&l.isCollinear(f)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(l){var f=this._selection,b=this._path;this._selection=l=l||0,b&&l!==f&&(b._updateSelection(this,f,l),b._changed(257))},_changeSelection:function(l,f){var b=this._selection;this.setSelection(f?b|l:b&~l)},isSelected:function(){return!!(this._selection&7)},setSelected:function(l){this._changeSelection(7,l)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var l=this._path,f=this._index;return l?(f>0&&!l._closed&&f===l._segments.length-1&&f--,l.getCurves()[f]||null):null},getLocation:function(){var l=this.getCurve();return l?new we(l,this===l._segment1?0:1):null},getNext:function(){var l=this._path&&this._path._segments;return l&&(l[this._index+1]||this._path._closed&&l[0])||null},smooth:function(l,f,b){var _=l||{},E=_.type,A=_.factor,T=this.getPrevious(),N=this.getNext(),$=(T||this)._point,F=this._point,G=(N||this)._point,Z=$.getDistance(F),Y=F.getDistance(G);if(!E||E==="catmull-rom"){var W=A===n?.5:A,X=Math.pow(Z,W),U=X*X,K=Math.pow(Y,W),V=K*K;if(!f&&T){var ne=2*V+3*K*X+U,z=3*K*(K+X);this.setHandleIn(z!==0?new g((V*$._x+ne*F._x-U*G._x)/z-F._x,(V*$._y+ne*F._y-U*G._y)/z-F._y):new g)}if(!b&&N){var ne=2*U+3*X*K+V,z=3*X*(X+K);this.setHandleOut(z!==0?new g((U*G._x+ne*F._x-V*$._x)/z-F._x,(U*G._y+ne*F._y-V*$._y)/z-F._y):new g)}}else if(E==="geometric"){if(T&&N){var te=$.subtract(G),ae=A===n?.4:A,ce=ae*Z/(Z+Y);f||this.setHandleIn(te.multiply(ce)),b||this.setHandleOut(te.multiply(ce-ae))}}else throw new Error("Smoothing method '"+E+"' not supported.")},getPrevious:function(){var l=this._path&&this._path._segments;return l&&(l[this._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var l=this._path;return l&&this._index===l._segments.length-1||!1},reverse:function(){var l=this._handleIn,f=this._handleOut,b=l.clone();l.set(f),f.set(b)},reversed:function(){return new H(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new H(this._point,this._handleIn,this._handleOut)},equals:function(l){return l===this||l&&this._class===l._class&&this._point.equals(l._point)&&this._handleIn.equals(l._handleIn)&&this._handleOut.equals(l._handleOut)||!1},toString:function(){var l=["point: "+this._point];return this._handleIn.isZero()||l.push("handleIn: "+this._handleIn),this._handleOut.isZero()||l.push("handleOut: "+this._handleOut),"{ "+l.join(", ")+" }"},transform:function(l){this._transformCoordinates(l,new Array(6),!0),this._changed()},interpolate:function(l,f,b){var _=1-b,E=b,A=l._point,T=f._point,N=l._handleIn,$=f._handleIn,F=f._handleOut,G=l._handleOut;this._point._set(_*A._x+E*T._x,_*A._y+E*T._y,!0),this._handleIn._set(_*N._x+E*$._x,_*N._y+E*$._y,!0),this._handleOut._set(_*G._x+E*F._x,_*G._y+E*F._y,!0),this._changed()},_transformCoordinates:function(l,f,b){var _=this._point,E=!b||!this._handleIn.isZero()?this._handleIn:null,A=!b||!this._handleOut.isZero()?this._handleOut:null,T=_._x,N=_._y,$=2;return f[0]=T,f[1]=N,E&&(f[$++]=E._x+T,f[$++]=E._y+N),A&&(f[$++]=A._x+T,f[$++]=A._y+N),l&&(l._transformCoordinates(f,f,$/2),T=f[0],N=f[1],b?(_._x=T,_._y=N,$=2,E&&(E._x=f[$++]-T,E._y=f[$++]-N),A&&(A._x=f[$++]-T,A._y=f[$++]-N)):(E||(f[$++]=T,f[$++]=N),A||(f[$++]=T,f[$++]=N))),f}}),ye=g.extend({initialize:function(f,b,_){var E,A,T;if(!f)E=A=0;else if((E=f[0])!==n)A=f[1];else{var N=f;(E=N.x)===n&&(N=g.read(arguments),E=N.x),A=N.y,T=N.selected}this._x=E,this._y=A,this._owner=b,b[_]=this,T&&this.setSelected(!0)},_set:function(l,f){return this._x=l,this._y=f,this._owner._changed(this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner._changed(this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner._changed(this)},isZero:function(){var l=p.isZero;return l(this._x)&&l(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){var l=this._owner;return this===l._point?1:this===l._handleIn?2:this===l._handleOut?4:0}}),Ae=s.extend({_class:"Curve",beans:!0,initialize:function(f,b,_,E,A,T,N,$){var F=arguments.length,G,Z,Y,W,X,U;F===3?(this._path=f,G=b,Z=_):F?F===1?"segment1"in f?(G=new H(f.segment1),Z=new H(f.segment2)):"point1"in f?(Y=f.point1,X=f.handle1,U=f.handle2,W=f.point2):Array.isArray(f)&&(Y=[f[0],f[1]],W=[f[6],f[7]],X=[f[2]-f[0],f[3]-f[1]],U=[f[4]-f[6],f[5]-f[7]]):F===2?(G=new H(f),Z=new H(b)):F===4?(Y=f,X=b,U=_,W=E):F===8&&(Y=[f,b],W=[N,$],X=[_-f,E-b],U=[A-N,T-$]):(G=new H,Z=new H),this._segment1=G||new H(Y,null,X),this._segment2=Z||new H(W,U,null)},_serialize:function(l,f){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],l,!0,f)},_changed:function(){this._length=this._bounds=n},clone:function(){return new Ae(this._segment1,this._segment2)},toString:function(){var l=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||l.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||l.push("handle2: "+this._segment2._handleIn),l.push("point2: "+this._segment2._point),"{ "+l.join(", ")+" }"},classify:function(){return Ae.classify(this.getValues())},remove:function(){var l=!1;if(this._path){var f=this._segment2,b=f._handleOut;l=f.remove(),l&&this._segment1._handleOut.set(b)}return l},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(g.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(g.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(g.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(g.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index+1]||this._path._closed&&l[0])||null},getPrevious:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var l=this._path;return l&&this._segment1._index===l._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(l){this.getPoint1().setSelected(l),this.getHandle1().setSelected(l),this.getHandle2().setSelected(l),this.getPoint2().setSelected(l)},getValues:function(l){return Ae.getValues(this._segment1,this._segment2,l)},getPoints:function(){for(var l=this.getValues(),f=[],b=0;b<8;b+=2)f.push(new g(l[b],l[b+1]));return f}},{getLength:function(){return this._length==null&&(this._length=Ae.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Ae.getArea(this.getValues())},getLine:function(){return new j(this._segment1._point,this._segment2._point)},getPart:function(l,f){return new Ae(Ae.getPart(this.getValues(),l,f))},getPartLength:function(l,f){return Ae.getLength(this.getValues(),l,f)},divideAt:function(l){return this.divideAtTime(l&&l.curve===this?l.time:this.getTimeAt(l))},divideAtTime:function(l,f){var b=1e-8,_=1-b,E=null;if(l>=b&&l<=_){var A=Ae.subdivide(this.getValues(),l),T=A[0],N=A[1],$=f||this.hasHandles(),F=this._segment1,G=this._segment2,Z=this._path;$&&(F._handleOut._set(T[2]-T[0],T[3]-T[1]),G._handleIn._set(N[4]-N[6],N[5]-N[7]));var Y=T[6],W=T[7],X=new H(new g(Y,W),$&&new g(T[4]-Y,T[5]-W),$&&new g(N[2]-Y,N[3]-W));Z?(Z.insert(F._index+1,X),E=this.getNext()):(this._segment2=X,this._changed(),E=new Ae(X,G))}return E},splitAt:function(l){var f=this._path;return f?f.splitAt(l):null},splitAtTime:function(l){return this.splitAt(this.getLocationAtTime(l))},divide:function(l,f){return this.divideAtTime(l===n?.5:f?l:this.getTimeAt(l))},split:function(l,f){return this.splitAtTime(l===n?.5:f?l:this.getTimeAt(l))},reversed:function(){return new Ae(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(l,f,b,_){var E=l._point,A=l._handleOut,T=f._handleIn,N=f._point,$=E.x,F=E.y,G=N.x,Z=N.y,Y=_?[$,F,$,F,G,Z,G,Z]:[$,F,$+A._x,F+A._y,G+T._x,Z+T._y,G,Z];return b&&b._transformCoordinates(Y,Y,4),Y},subdivide:function(l,f){var b=l[0],_=l[1],E=l[2],A=l[3],T=l[4],N=l[5],$=l[6],F=l[7];f===n&&(f=.5);var G=1-f,Z=G*b+f*E,Y=G*_+f*A,W=G*E+f*T,X=G*A+f*N,U=G*T+f*$,K=G*N+f*F,V=G*Z+f*W,ne=G*Y+f*X,z=G*W+f*U,te=G*X+f*K,ae=G*V+f*z,ce=G*ne+f*te;return[[b,_,Z,Y,V,ne,ae,ce],[ae,ce,z,te,U,K,$,F]]},getMonoCurves:function(l,f){var b=[],_=f?0:1,E=l[_+0],A=l[_+2],T=l[_+4],N=l[_+6];if(E>=A==A>=T&&A>=T==T>=N||Ae.isStraight(l))b.push(l);else{var $=3*(A-T)-E+N,F=2*(E+T)-4*A,G=A-E,Z=1e-8,Y=1-Z,W=[],X=p.solveQuadratic($,F,G,W,Z,Y);if(!X)b.push(l);else{W.sort();var U=W[0],K=Ae.subdivide(l,U);b.push(K[0]),X>1&&(U=(W[1]-U)/(1-U),K=Ae.subdivide(K[1],U),b.push(K[0])),b.push(K[1])}}return b},solveCubic:function(l,f,b,_,E,A){var T=l[f],N=l[f+2],$=l[f+4],F=l[f+6],G=0;if(!(T<b&&F<b&&N<b&&$<b||T>b&&F>b&&N>b&&$>b)){var Z=3*(N-T),Y=3*($-N)-Z,W=F-T-Z-Y;G=p.solveCubic(W,Y,Z,T-b,_,E,A)}return G},getTimeOf:function(l,f){var b=new g(l[0],l[1]),_=new g(l[6],l[7]),E=1e-12,A=1e-7,T=f.isClose(b,E)?0:f.isClose(_,E)?1:null;if(T===null)for(var N=[f.x,f.y],$=[],F=0;F<2;F++)for(var G=Ae.solveCubic(l,F,N[F],$,0,1),Z=0;Z<G;Z++){var Y=$[Z];if(f.isClose(Ae.getPoint(l,Y),A))return Y}return f.isClose(b,A)?0:f.isClose(_,A)?1:null},getNearestTime:function(l,f){if(Ae.isStraight(l)){var b=l[0],_=l[1],E=l[6],A=l[7],T=E-b,N=A-_,$=T*T+N*N;if($===0)return 0;var F=((f.x-b)*T+(f.y-_)*N)/$;return F<1e-12?0:F>.999999999999?1:Ae.getTimeOf(l,new g(b+F*T,_+F*N))}var G=100,Z=1/0,Y=0;function W(K){if(K>=0&&K<=1){var V=f.getDistance(Ae.getPoint(l,K),!0);if(V<Z)return Z=V,Y=K,!0}}for(var X=0;X<=G;X++)W(X/G);for(var U=1/(G*2);U>1e-8;)!W(Y-U)&&!W(Y+U)&&(U/=2);return Y},getPart:function(l,f,b){var _=f>b;if(_){var E=f;f=b,b=E}return f>0&&(l=Ae.subdivide(l,f)[1]),b<1&&(l=Ae.subdivide(l,(b-f)/(1-f))[0]),_?[l[6],l[7],l[4],l[5],l[2],l[3],l[0],l[1]]:l},isFlatEnough:function(l,f){var b=l[0],_=l[1],E=l[2],A=l[3],T=l[4],N=l[5],$=l[6],F=l[7],G=3*E-2*b-$,Z=3*A-2*_-F,Y=3*T-2*$-b,W=3*N-2*F-_;return Math.max(G*G,Y*Y)+Math.max(Z*Z,W*W)<=16*f*f},getArea:function(l){var f=l[0],b=l[1],_=l[2],E=l[3],A=l[4],T=l[5],N=l[6],$=l[7];return 3*(($-b)*(_+A)-(N-f)*(E+T)+E*(f-A)-_*(b-T)+$*(A+f/3)-N*(T+b/3))/20},getBounds:function(l){for(var f=l.slice(0,2),b=f.slice(),_=[0,0],E=0;E<2;E++)Ae._addBounds(l[E],l[E+2],l[E+4],l[E+6],E,0,f,b,_);return new x(f[0],f[1],b[0]-f[0],b[1]-f[1])},_addBounds:function(l,f,b,_,E,A,T,N,$){function F(ae,ce){var re=ae-ce,be=ae+ce;re<T[E]&&(T[E]=re),be>N[E]&&(N[E]=be)}A/=2;var G=T[E]+A,Z=N[E]-A;if(l<G||f<G||b<G||_<G||l>Z||f>Z||b>Z||_>Z)if(f<l!=f<_&&b<l!=b<_)F(l,0),F(_,0);else{var Y=3*(f-b)-l+_,W=2*(l+b)-4*f,X=f-l,U=p.solveQuadratic(Y,W,X,$),K=1e-8,V=1-K;F(_,0);for(var ne=0;ne<U;ne++){var z=$[ne],te=1-z;K<=z&&z<=V&&F(te*te*te*l+3*te*te*z*f+3*te*z*z*b+z*z*z*_,A)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(l){this[l]=function(){this._bounds||(this._bounds={});var f=this._bounds[l];return f||(f=this._bounds[l]=xe[l]([this._segment1,this._segment2],!1,this._path)),f.clone()}},{}),s.each({isStraight:function(l,f,b,_){if(f.isZero()&&b.isZero())return!0;var E=_.subtract(l);if(E.isZero())return!1;if(E.isCollinear(f)&&E.isCollinear(b)){var A=new j(l,_),T=1e-7;if(A.getDistance(l.add(f))<T&&A.getDistance(_.add(b))<T){var N=E.dot(E),$=E.dot(f)/N,F=E.dot(b)/N;return $>=0&&$<=1&&F<=0&&F>=-1}}return!1},isLinear:function(l,f,b,_){var E=_.subtract(l).divide(3);return f.equals(E)&&b.negate().equals(E)}},function(l,f){this[f]=function(b){var _=this._segment1,E=this._segment2;return l(_._point,_._handleOut,E._handleIn,E._point,b)},this.statics[f]=function(b,_){var E=b[0],A=b[1],T=b[6],N=b[7];return l(new g(E,A),new g(b[2]-E,b[3]-A),new g(b[4]-T,b[5]-N),new g(T,N),_)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(l){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(l||0)},isCollinear:function(l){return l&&this.isStraight()&&l.isStraight()&&this.getLine().isCollinear(l.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(l,f){return this.getLocationAtTime(f?l:this.getTimeAt(l))},getLocationAtTime:function(l){return l!=null&&l>=0&&l<=1?new we(this,l):null},getTimeAt:function(l,f){return Ae.getTimeAt(this.getValues(),l,f)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var l=g.read(arguments);return l.isZero()?[]:Ae.getTimesWithTangent(this.getValues(),l)},getOffsetAtTime:function(l){return this.getPartLength(0,l)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getTimeOf:function(){return Ae.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var l=g.read(arguments),f=this.getValues(),b=Ae.getNearestTime(f,l),_=Ae.getPoint(f,b);return new we(this,b,_,null,l.getDistance(_))},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()}},new function(){var l=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(l,function(f){this[f+"At"]=function(b,_){var E=this.getValues();return Ae[f](E,_?b:Ae.getTimeAt(E,b))},this[f+"AtTime"]=function(b){return Ae[f](this.getValues(),b)}},{statics:{_evaluateMethods:l}})},new function(){function l(_){var E=_[0],A=_[1],T=_[2],N=_[3],$=_[4],F=_[5],G=_[6],Z=_[7],Y=9*(T-$)+3*(G-E),W=6*(E+$)-12*T,X=3*(T-E),U=9*(N-F)+3*(Z-A),K=6*(A+F)-12*N,V=3*(N-A);return function(ne){var z=(Y*ne+W)*ne+X,te=(U*ne+K)*ne+V;return Math.sqrt(z*z+te*te)}}function f(_,E){return Math.max(2,Math.min(16,Math.ceil(Math.abs(E-_)*32)))}function b(_,E,A,T){if(E==null||E<0||E>1)return null;var N=_[0],$=_[1],F=_[2],G=_[3],Z=_[4],Y=_[5],W=_[6],X=_[7],U=p.isZero;U(F-N)&&U(G-$)&&(F=N,G=$),U(Z-W)&&U(Y-X)&&(Z=W,Y=X);var K=3*(F-N),V=3*(Z-F)-K,ne=W-N-K-V,z=3*(G-$),te=3*(Y-G)-z,ae=X-$-z-te,ce,re;if(A===0)ce=E===0?N:E===1?W:((ne*E+V)*E+K)*E+N,re=E===0?$:E===1?X:((ae*E+te)*E+z)*E+$;else{var be=1e-8,ke=1-be;if(E<be?(ce=K,re=z):E>ke?(ce=3*(W-Z),re=3*(X-Y)):(ce=(3*ne*E+2*V)*E+K,re=(3*ae*E+2*te)*E+z),T){ce===0&&re===0&&(E<be||E>ke)&&(ce=Z-F,re=Y-G);var Pe=Math.sqrt(ce*ce+re*re);Pe&&(ce/=Pe,re/=Pe)}if(A===3){var Z=6*ne*E+2*V,Y=6*ae*E+2*te,ze=Math.pow(ce*ce+re*re,3/2);ce=ze!==0?(ce*Y-re*Z)/ze:0,re=0}}return A===2?new g(re,-ce):new g(ce,re)}return{statics:{classify:function(_){var E=_[0],A=_[1],T=_[2],N=_[3],$=_[4],F=_[5],G=_[6],Z=_[7],Y=E*(Z-F)+A*($-G)+G*F-Z*$,W=T*(A-Z)+N*(G-E)+E*Z-A*G,X=$*(N-A)+F*(E-T)+T*A-N*E,U=3*X,K=U-W,V=K-W+Y,ne=Math.sqrt(V*V+K*K+U*U),z=ne!==0?1/ne:0,te=p.isZero,ae="serpentine";V*=z,K*=z,U*=z;function ce(Pe,ze,_e){var $e=ze!==n,Fe=$e&&ze>0&&ze<1,Xe=$e&&_e>0&&_e<1;return $e&&(!(Fe||Xe)||Pe==="loop"&&!(Fe&&Xe))&&(Pe="arch",Fe=Xe=!1),{type:Pe,roots:Fe||Xe?Fe&&Xe?ze<_e?[ze,_e]:[_e,ze]:[Fe?ze:_e]:null}}if(te(V))return te(K)?ce(te(U)?"line":"quadratic"):ce(ae,U/(3*K));var re=3*K*K-4*V*U;if(te(re))return ce("cusp",K/(2*V));var be=re>0?Math.sqrt(re/3):Math.sqrt(-re),ke=2*V;return ce(re>0?ae:"loop",(K+be)/ke,(K-be)/ke)},getLength:function(_,E,A,T){if(E===n&&(E=0),A===n&&(A=1),Ae.isStraight(_)){var N=_;A<1&&(N=Ae.subdivide(N,A)[0],E/=A),E>0&&(N=Ae.subdivide(N,E)[1]);var $=N[6]-N[0],F=N[7]-N[1];return Math.sqrt($*$+F*F)}return p.integrate(T||l(_),E,A,f(E,A))},getTimeAt:function(_,E,A){if(A===n&&(A=E<0?1:0),E===0)return A;var T=Math.abs,N=1e-12,$=E>0,F=$?A:0,G=$?1:A,Z=l(_),Y=Ae.getLength(_,F,G,Z),W=T(E)-Y;if(T(W)<N)return $?G:F;if(W>N)return null;var X=E/Y,U=0;function K(V){return U+=p.integrate(Z,A,V,f(A,V)),A=V,U-E}return p.findRoot(K,Z,A+X,F,G,32,1e-12)},getPoint:function(_,E){return b(_,E,0,!1)},getTangent:function(_,E){return b(_,E,1,!0)},getWeightedTangent:function(_,E){return b(_,E,1,!1)},getNormal:function(_,E){return b(_,E,2,!0)},getWeightedNormal:function(_,E){return b(_,E,2,!1)},getCurvature:function(_,E){return b(_,E,3,!1).x},getPeaks:function(_){var E=_[0],A=_[1],T=_[2],N=_[3],$=_[4],F=_[5],G=_[6],Z=_[7],Y=-E+3*T-3*$+G,W=3*E-6*T+3*$,X=-3*E+3*T,U=-A+3*N-3*F+Z,K=3*A-6*N+3*F,V=-3*A+3*N,ne=1e-8,z=1-ne,te=[];return p.solveCubic(9*(Y*Y+U*U),9*(Y*W+K*U),2*(W*W+K*K)+3*(X*Y+V*U),X*W+K*V,te,ne,z),te.sort()}}}},new function(){function l(W,X,U,K,V,ne,z){var te=!z&&U.getPrevious()===V,ae=!z&&U!==V&&U.getNext()===V,ce=1e-8,re=1-ce;if(K!==null&&K>=(te?ce:0)&&K<=(ae?re:1)&&ne!==null&&ne>=(ae?ce:0)&&ne<=(te?re:1)){var be=new we(U,K,null,z),ke=new we(V,ne,null,z);be._intersection=ke,ke._intersection=be,(!X||X(be))&&we.insert(W,be,!0)}}function f(W,X,U,K,V,ne,z,te,ae,ce,re,be,ke){if(++ae>=4096||++te>=40)return ae;var Pe=1e-9,ze=X[0],_e=X[1],$e=X[6],Fe=X[7],Xe=j.getSignedDistance,Ze=Xe(ze,_e,$e,Fe,X[2],X[3]),Qe=Xe(ze,_e,$e,Fe,X[4],X[5]),ft=Ze*Qe>0?3/4:4/9,dt=ft*Math.min(0,Ze,Qe),Et=ft*Math.max(0,Ze,Qe),xt=Xe(ze,_e,$e,Fe,W[0],W[1]),Te=Xe(ze,_e,$e,Fe,W[2],W[3]),Ke=Xe(ze,_e,$e,Fe,W[4],W[5]),mt=Xe(ze,_e,$e,Fe,W[6],W[7]),Nt=b(xt,Te,Ke,mt),kt=Nt[0],Bt=Nt[1],At,Dt;if(Ze===0&&Qe===0&&xt===0&&Te===0&&Ke===0&&mt===0||(At=_(kt,Bt,dt,Et))==null||(Dt=_(kt.reverse(),Bt.reverse(),dt,Et))==null)return ae;var Ut=ce+(re-ce)*At,Rt=ce+(re-ce)*Dt;if(Math.max(ke-be,Rt-Ut)<Pe){var Kt=(Ut+Rt)/2,en=(be+ke)/2;l(V,ne,z?K:U,z?en:Kt,z?U:K,z?Kt:en)}else{W=Ae.getPart(W,At,Dt);var bn=ke-be;if(Dt-At>.8)if(Rt-Ut>bn){var En=Ae.subdivide(W,.5),Kt=(Ut+Rt)/2;ae=f(X,En[0],K,U,V,ne,!z,te,ae,be,ke,Ut,Kt),ae=f(X,En[1],K,U,V,ne,!z,te,ae,be,ke,Kt,Rt)}else{var En=Ae.subdivide(X,.5),en=(be+ke)/2;ae=f(En[0],W,K,U,V,ne,!z,te,ae,be,en,Ut,Rt),ae=f(En[1],W,K,U,V,ne,!z,te,ae,en,ke,Ut,Rt)}else bn===0||bn>=Pe?ae=f(X,W,K,U,V,ne,!z,te,ae,be,ke,Ut,Rt):ae=f(W,X,U,K,V,ne,z,te,ae,Ut,Rt,be,ke)}return ae}function b(W,X,U,K){var V=[0,W],ne=[1/3,X],z=[2/3,U],te=[1,K],ae=X-(2*W+K)/3,ce=U-(W+2*K)/3,re;if(ae*ce<0)re=[[V,ne,te],[V,z,te]];else{var be=ae/ce;re=[be>=2?[V,ne,te]:be<=.5?[V,z,te]:[V,ne,z,te],[V,te]]}return(ae||ce)<0?re.reverse():re}function _(W,X,U,K){return W[0][1]<U?E(W,!0,U):X[0][1]>K?E(X,!1,K):W[0][0]}function E(W,X,U){for(var K=W[0][0],V=W[0][1],ne=1,z=W.length;ne<z;ne++){var te=W[ne][0],ae=W[ne][1];if(X?ae>=U:ae<=U)return ae===U?te:K+(U-V)*(te-K)/(ae-V);K=te,V=ae}return null}function A(W,X,U,K,V){var ne=p.isZero;if(ne(K)&&ne(V)){var z=Ae.getTimeOf(W,new g(X,U));return z===null?[]:[z]}for(var te=Math.atan2(-V,K),ae=Math.sin(te),ce=Math.cos(te),re=[],be=[],ke=0;ke<8;ke+=2){var Pe=W[ke]-X,ze=W[ke+1]-U;re.push(Pe*ce-ze*ae,Pe*ae+ze*ce)}return Ae.solveCubic(re,1,0,be,0,1),be}function T(W,X,U,K,V,ne,z){for(var te=X[0],ae=X[1],ce=X[6],re=X[7],be=A(W,te,ae,ce-te,re-ae),ke=0,Pe=be.length;ke<Pe;ke++){var ze=be[ke],_e=Ae.getPoint(W,ze),$e=Ae.getTimeOf(X,_e);$e!==null&&l(V,ne,z?K:U,z?$e:ze,z?U:K,z?ze:$e)}}function N(W,X,U,K,V,ne){var z=j.intersect(W[0],W[1],W[6],W[7],X[0],X[1],X[6],X[7]);z&&l(V,ne,U,Ae.getTimeOf(W,z),K,Ae.getTimeOf(X,z))}function $(W,X,U,K,V,ne){var z=1e-12,te=Math.min,ae=Math.max;if(ae(W[0],W[2],W[4],W[6])+z>te(X[0],X[2],X[4],X[6])&&te(W[0],W[2],W[4],W[6])-z<ae(X[0],X[2],X[4],X[6])&&ae(W[1],W[3],W[5],W[7])+z>te(X[1],X[3],X[5],X[7])&&te(W[1],W[3],W[5],W[7])-z<ae(X[1],X[3],X[5],X[7])){var ce=Z(W,X);if(ce)for(var re=0;re<2;re++){var be=ce[re];l(V,ne,U,be[0],K,be[1],!0)}else{var ke=Ae.isStraight(W),Pe=Ae.isStraight(X),ze=ke&&Pe,_e=ke&&!Pe,$e=V.length;if((ze?N:ke||Pe?T:f)(_e?X:W,_e?W:X,_e?K:U,_e?U:K,V,ne,_e,0,0,0,1,0,1),!ze||V.length===$e)for(var re=0;re<4;re++){var Fe=re>>1,Xe=re&1,Ze=Fe*6,Qe=Xe*6,ft=new g(W[Ze],W[Ze+1]),dt=new g(X[Qe],X[Qe+1]);ft.isClose(dt,z)&&l(V,ne,U,Fe,K,Xe)}}}return V}function F(W,X,U,K){var V=Ae.classify(W);if(V.type==="loop"){var ne=V.roots;l(U,K,X,ne[0],X,ne[1])}return U}function G(W,X,U,K,V,ne){var z=1e-7,te=!X;te&&(X=W);for(var ae=W.length,ce=X.length,re=new Array(ae),be=te?re:new Array(ce),ke=[],Pe=0;Pe<ae;Pe++)re[Pe]=W[Pe].getValues(K);if(!te)for(var Pe=0;Pe<ce;Pe++)be[Pe]=X[Pe].getValues(V);for(var ze=h.findCurveBoundsCollisions(re,be,z),_e=0;_e<ae;_e++){var $e=W[_e],Fe=re[_e];te&&F(Fe,$e,ke,U);var Xe=ze[_e];if(Xe)for(var Ze=0;Ze<Xe.length;Ze++){if(ne&&ke.length)return ke;var Qe=Xe[Ze];if(!te||Qe>_e){var ft=X[Qe],dt=be[Qe];$(Fe,dt,$e,ft,ke,U)}}}return ke}function Z(W,X){function U(mt){var Nt=mt[6]-mt[0],kt=mt[7]-mt[1];return Nt*Nt+kt*kt}var K=Math.abs,V=j.getDistance,ne=1e-8,z=1e-7,te=Ae.isStraight(W),ae=Ae.isStraight(X),ce=te&&ae,re=U(W)<U(X),be=re?X:W,ke=re?W:X,Pe=be[0],ze=be[1],_e=be[6]-Pe,$e=be[7]-ze;if(V(Pe,ze,_e,$e,ke[0],ke[1],!0)<z&&V(Pe,ze,_e,$e,ke[6],ke[7],!0)<z)!ce&&V(Pe,ze,_e,$e,be[2],be[3],!0)<z&&V(Pe,ze,_e,$e,be[4],be[5],!0)<z&&V(Pe,ze,_e,$e,ke[2],ke[3],!0)<z&&V(Pe,ze,_e,$e,ke[4],ke[5],!0)<z&&(te=ae=ce=!0);else if(ce)return null;if(te^ae)return null;for(var Fe=[W,X],Xe=[],Ze=0;Ze<4&&Xe.length<2;Ze++){var Qe=Ze&1,ft=Qe^1,dt=Ze>>1,Et=Ae.getTimeOf(Fe[Qe],new g(Fe[ft][dt?6:0],Fe[ft][dt?7:1]));if(Et!=null){var xt=Qe?[dt,Et]:[Et,dt];(!Xe.length||K(xt[0]-Xe[0][0])>ne&&K(xt[1]-Xe[0][1])>ne)&&Xe.push(xt)}if(Ze>2&&!Xe.length)break}if(Xe.length!==2)Xe=null;else if(!ce){var Te=Ae.getPart(W,Xe[0][0],Xe[1][0]),Ke=Ae.getPart(X,Xe[0][1],Xe[1][1]);(K(Ke[2]-Te[2])>z||K(Ke[3]-Te[3])>z||K(Ke[4]-Te[4])>z||K(Ke[5]-Te[5])>z)&&(Xe=null)}return Xe}function Y(W,X){var U=W[0],K=W[1],V=W[2],ne=W[3],z=W[4],te=W[5],ae=W[6],ce=W[7],re=X.normalize(),be=re.x,ke=re.y,Pe=3*ae-9*z+9*V-3*U,ze=3*ce-9*te+9*ne-3*K,_e=6*z-12*V+6*U,$e=6*te-12*ne+6*K,Fe=3*V-3*U,Xe=3*ne-3*K,Ze=2*Pe*ke-2*ze*be,Qe=[];if(Math.abs(Ze)<p.CURVETIME_EPSILON){var ft=Pe*Xe-ze*Fe,Ze=Pe*$e-ze*_e;if(Ze!=0){var dt=-ft/Ze;dt>=0&&dt<=1&&Qe.push(dt)}}else{var Et=(_e*_e-4*Pe*Fe)*ke*ke+(-2*_e*$e+4*ze*Fe+4*Pe*Xe)*be*ke+($e*$e-4*ze*Xe)*be*be,xt=_e*ke-$e*be;if(Et>=0&&Ze!=0){var Te=Math.sqrt(Et),Ke=-(xt+Te)/Ze,mt=(-xt+Te)/Ze;Ke>=0&&Ke<=1&&Qe.push(Ke),mt>=0&&mt<=1&&Qe.push(mt)}}return Qe}return{getIntersections:function(W){var X=this.getValues(),U=W&&W!==this&&W.getValues();return U?$(X,U,this,W,[]):F(X,this,[])},statics:{getOverlaps:Z,getIntersections:G,getCurveLineIntersections:A,getTimesWithTangent:Y}}}),we=s.extend({_class:"CurveLocation",initialize:function(f,b,_,E,A){if(b>=.99999999){var T=f.getNext();T&&(b=0,f=T)}this._setCurve(f),this._time=b,this._point=_||f.getPointAtTime(b),this._overlap=E,this._distance=A,this._intersection=this._next=this._previous=null},_setPath:function(l){this._path=l,this._version=l?l._version:0},_setCurve:function(l){this._setPath(l._path),this._curve=l,this._segment=null,this._segment1=l._segment1,this._segment2=l._segment2},_setSegment:function(l){var f=l.getCurve();f?this._setCurve(f):(this._setPath(l._path),this._segment1=l,this._segment2=null),this._segment=l,this._time=l===this._segment1?0:1,this._point=l._point.clone()},getSegment:function(){var l=this._segment;if(!l){var f=this.getCurve(),b=this.getTime();b===0?l=f._segment1:b===1?l=f._segment2:b!=null&&(l=f.getPartLength(0,b)<f.getPartLength(b,1)?f._segment1:f._segment2),this._segment=l}return l},getCurve:function(){var l=this._path,f=this;l&&l._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function b(_){var E=_&&_.getCurve();if(E&&(f._time=E.getTimeOf(f._point))!=null)return f._setCurve(E),E}return this._curve||b(this._segment)||b(this._segment1)||b(this._segment2.getPrevious())},getPath:function(){var l=this.getCurve();return l&&l._path},getIndex:function(){var l=this.getCurve();return l&&l.getIndex()},getTime:function(){var l=this.getCurve(),f=this._time;return l&&f==null?this._time=l.getTimeOf(this._point):f},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var l=this._offset;if(l==null){l=0;var f=this.getPath(),b=this.getIndex();if(f&&b!=null)for(var _=f.getCurves(),E=0;E<b;E++)l+=_[E].getLength();this._offset=l+=this.getCurveOffset()}return l},getCurveOffset:function(){var l=this._curveOffset;if(l==null){var f=this.getCurve(),b=this.getTime();this._curveOffset=l=b!=null&&f&&f.getPartLength(0,b)}return l},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var l=this.getCurve(),f=l&&l.divideAtTime(this.getTime());return f&&this._setSegment(f._segment1),f},split:function(){var l=this.getCurve(),f=l._path,b=l&&l.splitAtTime(this.getTime());return b&&this._setSegment(f.getLastSegment()),b},equals:function(l,f){var b=this===l;if(!b&&l instanceof we){var _=this.getCurve(),E=l.getCurve(),A=_._path,T=E._path;if(A===T){var N=Math.abs,$=1e-7,F=N(this.getOffset()-l.getOffset()),G=!f&&this._intersection,Z=!f&&l._intersection;b=(F<$||A&&N(A.getLength()-F)<$)&&(!G&&!Z||G&&Z&&G.equals(Z,!0))}}return b},toString:function(){var l=[],f=this.getPoint(),b=d.instance;f&&l.push("point: "+f);var _=this.getIndex();_!=null&&l.push("index: "+_);var E=this.getTime();return E!=null&&l.push("time: "+b.number(E)),this._distance!=null&&l.push("distance: "+b.number(this._distance)),"{ "+l.join(", ")+" }"},isTouching:function(){var l=this._intersection;if(l&&this.getTangent().isCollinear(l.getTangent())){var f=this.getCurve(),b=l.getCurve();return!(f.isStraight()&&b.isStraight()&&f.getLine().intersect(b.getLine()))}return!1},isCrossing:function(){var l=this._intersection;if(!l)return!1;var f=this.getTime(),b=l.getTime(),_=1e-8,E=1-_,A=f>=_&&f<=E,T=b>=_&&b<=E;if(A&&T)return!this.isTouching();var N=this.getCurve(),$=N&&f<_?N.getPrevious():N,F=l.getCurve(),G=F&&b<_?F.getPrevious():F;if(f>E&&(N=N.getNext()),b>E&&(F=F.getNext()),!$||!N||!G||!F)return!1;var Z=[];function Y(be,ke){var Pe=be.getValues(),ze=Ae.classify(Pe).roots||Ae.getPeaks(Pe),_e=ze.length,$e=Ae.getLength(Pe,ke&&_e?ze[_e-1]:0,!ke&&_e?ze[0]:1);Z.push(_e?$e:$e/32)}function W(be,ke,Pe){return ke<Pe?be>ke&&be<Pe:be>ke||be<Pe}A||(Y($,!0),Y(N,!1)),T||(Y(G,!0),Y(F,!1));var X=this.getPoint(),U=Math.min.apply(Math,Z),K=A?N.getTangentAtTime(f):N.getPointAt(U).subtract(X),V=A?K.negate():$.getPointAt(-U).subtract(X),ne=T?F.getTangentAtTime(b):F.getPointAt(U).subtract(X),z=T?ne.negate():G.getPointAt(-U).subtract(X),te=V.getAngle(),ae=K.getAngle(),ce=z.getAngle(),re=ne.getAngle();return!!(A?W(te,ce,re)^W(ae,ce,re)&&W(te,re,ce)^W(ae,re,ce):W(ce,te,ae)^W(re,te,ae)&&W(ce,ae,te)^W(re,ae,te))},hasOverlap:function(){return!!this._overlap}},s.each(Ae._evaluateMethods,function(l){var f=l+"At";this[l]=function(){var b=this.getCurve(),_=this.getTime();return _!=null&&b&&b[f](_,!0)}},{preserve:!0}),new function(){function l(f,b,_){var E=f.length,A=0,T=E-1;function N(X,U){for(var K=X+U;K>=-1&&K<=E;K+=U){var V=f[(K%E+E)%E];if(!b.getPoint().isClose(V.getPoint(),1e-7))break;if(b.equals(V))return V}return null}for(;A<=T;){var $=A+T>>>1,F=f[$],G;if(_&&(G=b.equals(F)?F:N($,-1)||N($,1)))return b._overlap&&(G._overlap=G._intersection._overlap=!0),G;var Z=b.getPath(),Y=F.getPath(),W=Z!==Y?Z._id-Y._id:b.getIndex()+b.getTime()-(F.getIndex()+F.getTime());W<0?T=$-1:A=$+1}return f.splice(A,0,b),b}return{statics:{insert:l,expand:function(f){for(var b=f.slice(),_=f.length-1;_>=0;_--)l(b,f[_]._intersection,!1);return b}}}}),Be=S.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(l){var f,b,_;if(s.isPlainObject(l)?(b=l.segments,f=l.pathData):Array.isArray(l)?b=l:typeof l=="string"&&(f=l),b){var E=b[0];_=E&&Array.isArray(E[0])}else f&&(_=(f.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(f));var A=_?Le:xe;return new A(l)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(l){this.isClockwise()!=(l=!!l)&&this.reverse()},setPathData:function(l){var f=l&&l.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),b,_=!1,E,A,T=new g,N=new g;function $(z,te){var ae=+b[z];return _&&(ae+=T[te]),ae}function F(z){return new g($(z,"x"),$(z+1,"y"))}this.clear();for(var G=0,Z=f&&f.length;G<Z;G++){var Y=f[G],W=Y[0],X=W.toLowerCase();b=Y.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var U=b&&b.length;switch(_=W===X,E==="z"&&!/[mz]/.test(X)&&this.moveTo(T),X){case"m":case"l":for(var K=X==="m",V=0;V<U;V+=2)this[K?"moveTo":"lineTo"](T=F(V)),K&&(N=T,K=!1);A=T;break;case"h":case"v":var ne=X==="h"?"x":"y";T=T.clone();for(var V=0;V<U;V++)T[ne]=$(V,ne),this.lineTo(T);A=T;break;case"c":for(var V=0;V<U;V+=6)this.cubicCurveTo(F(V),A=F(V+2),T=F(V+4));break;case"s":for(var V=0;V<U;V+=4)this.cubicCurveTo(/[cs]/.test(E)?T.multiply(2).subtract(A):T,A=F(V),T=F(V+2)),E=X;break;case"q":for(var V=0;V<U;V+=4)this.quadraticCurveTo(A=F(V),T=F(V+2));break;case"t":for(var V=0;V<U;V+=2)this.quadraticCurveTo(A=/[qt]/.test(E)?T.multiply(2).subtract(A):T,T=F(V)),E=X;break;case"a":for(var V=0;V<U;V+=7)this.arcTo(T=F(V+5),new w(+b[V],+b[V+1]),+b[V+2],+b[V+4],+b[V+3]);break;case"z":this.closePath(1e-12),T=N;break}E=X}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(l){var f=l.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(l):{};return f.onPath||!!(this.getFillRule()==="evenodd"?f.windingL&1||f.windingR&1:f.winding)},getIntersections:function(l,f,b,_){var E=this===l||!l,A=this._matrix._orNullIfIdentity(),T=E?A:(b||l._matrix)._orNullIfIdentity();return E||this.getBounds(A).intersects(l.getBounds(T),1e-12)?Ae.getIntersections(this.getCurves(),!E&&l.getCurves(),f,A,T,_):[]},getCrossings:function(l){return this.getIntersections(l,function(f){return f.isCrossing()})},getNearestLocation:function(){for(var l=g.read(arguments),f=this.getCurves(),b=1/0,_=null,E=0,A=f.length;E<A;E++){var T=f[E].getNearestLocation(l);T._distance<b&&(b=T._distance,_=T)}return _},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()},interpolate:function(l,f,b){var _=!this._children,E=_?"_segments":"_children",A=l[E],T=f[E],N=this[E];if(!A||!T||A.length!==T.length)throw new Error("Invalid operands in interpolate() call: "+l+", "+f);var $=N.length,F=T.length;if($<F)for(var G=_?H:xe,Z=$;Z<F;Z++)this.add(new G);else $>F&&this[_?"removeSegments":"removeChildren"](F,$);for(var Z=0;Z<F;Z++)N[Z].interpolate(A[Z],T[Z],b);_&&(this.setClosed(l._closed),this._changed(9))},compare:function(l){var f=!1;if(l){var b=this._children||[this],_=l._children?l._children.slice():[l],E=b.length,A=_.length,T=[],N=0;f=!0;for(var $=h.findItemBoundsCollisions(b,_,p.GEOMETRIC_EPSILON),F=E-1;F>=0&&f;F--){var G=b[F];f=!1;var Z=$[F];if(Z)for(var Y=Z.length-1;Y>=0&&!f;Y--)G.compare(_[Z[Y]])&&(T[Z[Y]]||(T[Z[Y]]=!0,N++),f=!0)}f=f&&N===A}return f}}),xe=Be.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(f){this._closed=!1,this._segments=[],this._version=0;var b=arguments,_=Array.isArray(f)?typeof f[0]=="object"?f:b:f&&f.size===n&&(f.x!==n||f.point!==n)?b:null;_&&_.length>0?this.setSegments(_):(this._curves=n,this._segmentSelection=0,!_&&typeof f=="string"&&(this.setPathData(f),f=null)),this._initialize(!_&&f)},_equals:function(l){return this._closed===l._closed&&s.equals(this._segments,l._segments)},copyContent:function(l){this.setSegments(l._segments),this._closed=l._closed},_changed:function l(f){if(l.base.call(this,f),f&8){if(this._length=this._area=n,f&32)this._version++;else if(this._curves)for(var b=0,_=this._curves.length;b<_;b++)this._curves[b]._changed()}else f&64&&(this._bounds=n)},getStyle:function(){var l=this._parent;return(l instanceof Le?l:this)._style},getSegments:function(){return this._segments},setSegments:function(l){var f=this.isFullySelected(),b=l&&l.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,b){var _=l[b-1];typeof _=="boolean"&&(this.setClosed(_),b--),this._add(H.readList(l,0,{},b))}f&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var l=this._curves,f=this._segments;if(!l){var b=this._countCurves();l=this._curves=new Array(b);for(var _=0;_<b;_++)l[_]=new Ae(this,f[_],f[_+1]||f[0])}return l},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var l=this.getCurves();return l[l.length-1]},isClosed:function(){return this._closed},setClosed:function(l){if(this._closed!=(l=!!l)){if(this._closed=l,this._curves){var f=this._curves.length=this._countCurves();l&&(this._curves[f-1]=new Ae(this,this._segments[f-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(l,f){var b=this._segments,_=b.length,E=new d(f),A=new Array(6),T=!0,N,$,F,G,Z,Y,W,X,U=[];function K(ne,z){if(ne._transformCoordinates(l,A),N=A[0],$=A[1],T)U.push("M"+E.pair(N,$)),T=!1;else if(Z=A[2],Y=A[3],Z===N&&Y===$&&W===F&&X===G){if(!z){var te=N-F,ae=$-G;U.push(te===0?"v"+E.number(ae):ae===0?"h"+E.number(te):"l"+E.pair(te,ae))}}else U.push("c"+E.pair(W-F,X-G)+" "+E.pair(Z-F,Y-G)+" "+E.pair(N-F,$-G));F=N,G=$,W=A[4],X=A[5]}if(!_)return"";for(var V=0;V<_;V++)K(b[V]);return this._closed&&_>0&&(K(b[0],!0),U.push("z")),U.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(l){for(var f=this._segments,b=new Array(6),_=0,E=f.length;_<E;_++)f[_]._transformCoordinates(l,b,!0);return!0},_add:function(l,T){for(var b=this._segments,_=this._curves,E=l.length,A=T==null,T=A?b.length:T,N=0;N<E;N++){var $=l[N];$._path&&($=l[N]=$.clone()),$._path=this,$._index=T+N,$._selection&&this._updateSelection($,0,$._selection)}if(A)s.push(b,l);else{b.splice.apply(b,[T,0].concat(l));for(var N=T+E,F=b.length;N<F;N++)b[N]._index=N}if(_){var G=this._countCurves(),Z=T>0&&T+E-1===G?T-1:T,Y=Z,W=Math.min(Z+E,G);l._curves&&(_.splice.apply(_,[Z,0].concat(l._curves)),Y+=l._curves.length);for(var N=Y;N<W;N++)_.splice(N,0,new Ae(this,null,null));this._adjustCurves(Z,W)}return this._changed(41),l},_adjustCurves:function(l,f){for(var b=this._segments,_=this._curves,E,A=l;A<f;A++)E=_[A],E._path=this,E._segment1=b[A],E._segment2=b[A+1]||b[0],E._changed();(E=_[this._closed&&!l?b.length-1:l-1])&&(E._segment2=b[l]||b[0],E._changed()),(E=_[f])&&(E._segment1=b[f],E._changed())},_countCurves:function(){var l=this._segments.length;return!this._closed&&l>0?l-1:l},add:function(l){var f=arguments;return f.length>1&&typeof l!="number"?this._add(H.readList(f)):this._add([H.read(f)])[0]},insert:function(l,f){var b=arguments;return b.length>2&&typeof f!="number"?this._add(H.readList(b,1),l):this._add([H.read(b,1)],l)[0]},addSegment:function(){return this._add([H.read(arguments)])[0]},insertSegment:function(l){return this._add([H.read(arguments,1)],l)[0]},addSegments:function(l){return this._add(H.readList(l))},insertSegments:function(l,f){return this._add(H.readList(f),l)},removeSegment:function(l){return this.removeSegments(l,l+1)[0]||null},removeSegments:function(l,f,b){l=l||0,f=s.pick(f,this._segments.length);var _=this._segments,E=this._curves,A=_.length,T=_.splice(l,f-l),N=T.length;if(!N)return T;for(var $=0;$<N;$++){var F=T[$];F._selection&&this._updateSelection(F,F._selection,0),F._index=F._path=null}for(var $=l,G=_.length;$<G;$++)_[$]._index=$;if(E){for(var Z=l>0&&f===A+(this._closed?1:0)?l-1:l,E=E.splice(Z,N),$=E.length-1;$>=0;$--)E[$]._path=null;b&&(T._curves=E.slice(1)),this._adjustCurves(Z,Z)}return this._changed(41),T},clear:"#removeSegments",hasHandles:function(){for(var l=this._segments,f=0,b=l.length;f<b;f++)if(l[f].hasHandles())return!0;return!1},clearHandles:function(){for(var l=this._segments,f=0,b=l.length;f<b;f++)l[f].clearHandles()},getLength:function(){if(this._length==null){for(var l=this.getCurves(),f=0,b=0,_=l.length;b<_;b++)f+=l[b].getLength();this._length=f}return this._length},getArea:function(){var l=this._area;if(l==null){var f=this._segments,b=this._closed;l=0;for(var _=0,E=f.length;_<E;_++){var A=_+1===E;l+=Ae.getArea(Ae.getValues(f[_],f[A?0:_+1],null,A&&!b))}this._area=l}return l},isFullySelected:function(){var l=this._segments.length;return this.isSelected()&&l>0&&this._segmentSelection===l*7},setFullySelected:function(l){l&&this._selectSegments(!0),this.setSelected(l)},setSelection:function l(f){f&1||this._selectSegments(!1),l.base.call(this,f)},_selectSegments:function(l){var f=this._segments,b=f.length,_=l?7:0;this._segmentSelection=_*b;for(var E=0;E<b;E++)f[E]._selection=_},_updateSelection:function(l,f,b){l._selection=b;var _=this._segmentSelection+=b-f;_>0&&this.setSelected(!0)},divideAt:function(l){var f=this.getLocationAt(l),b;return f&&(b=f.getCurve().divideAt(f.getCurveOffset()))?b._segment1:null},splitAt:function(l){var f=this.getLocationAt(l),b=f&&f.index,_=f&&f.time,E=1e-8,A=1-E;_>A&&(b++,_=0);var T=this.getCurves();if(b>=0&&b<T.length){_>=E&&T[b++].divideAtTime(_);var N=this.removeSegments(b,this._segments.length,!0),$;return this._closed?(this.setClosed(!1),$=this):($=new xe(S.NO_INSERT),$.insertAbove(this),$.copyAttributes(this)),$._add(N,0),this.addSegment(N[0]),$}return null},split:function(l,f){var b,_=f===n?l:(b=this.getCurves()[l])&&b.getLocationAtTime(f);return _!=null?this.splitAt(_):null},join:function(l,f){var b=f||0;if(l&&l!==this){var _=l._segments,E=this.getLastSegment(),A=l.getLastSegment();if(!A)return this;E&&E._point.isClose(A._point,b)&&l.reverse();var T=l.getFirstSegment();if(E&&E._point.isClose(T._point,b))E.setHandleOut(T._handleOut),this._add(_.slice(1));else{var N=this.getFirstSegment();N&&N._point.isClose(T._point,b)&&l.reverse(),A=l.getLastSegment(),N&&N._point.isClose(A._point,b)?(N.setHandleIn(A._handleIn),this._add(_.slice(0,_.length-1),0)):this._add(_.slice())}l._closed&&this._add([_[0]]),l.remove()}var $=this.getFirstSegment(),F=this.getLastSegment();return $!==F&&$._point.isClose(F._point,b)&&($.setHandleIn(F._handleIn),F.remove(),this.setClosed(!0)),this},reduce:function(l){for(var f=this.getCurves(),b=l&&l.simplify,_=b?1e-7:0,E=f.length-1;E>=0;E--){var A=f[E];!A.hasHandles()&&(!A.hasLength(_)||b&&A.isCollinear(A.getNext()))&&A.remove()}return this},reverse:function(){this._segments.reverse();for(var l=0,f=this._segments.length;l<f;l++){var b=this._segments[l],_=b._handleIn;b._handleIn=b._handleOut,b._handleOut=_,b._index=l}this._curves=null,this._changed(9)},flatten:function(l){for(var f=new Ce(this,l||.25,256,!0),b=f.parts,_=b.length,E=[],A=0;A<_;A++)E.push(new H(b[A].curve.slice(0,2)));!this._closed&&_>0&&E.push(new H(b[_-1].curve.slice(6))),this.setSegments(E)},simplify:function(l){var f=new Re(this).fit(l||2.5);return f&&this.setSegments(f),!!f},smooth:function(l){var f=this,b=l||{},_=b.type||"asymmetric",E=this._segments,A=E.length,T=this._closed;function N(kt,Bt){var At=kt&&kt.index;if(At!=null){var Dt=kt.path;if(Dt&&Dt!==f)throw new Error(kt._class+" "+At+" of "+Dt+" is not part of "+f);Bt&&kt instanceof Ae&&At++}else At=typeof kt=="number"?kt:Bt;return Math.min(At<0&&T?At%A:At<0?At+A:At,A-1)}var $=T&&b.from===n&&b.to===n,F=N(b.from,0),G=N(b.to,A-1);if(F>G)if(T)F-=A;else{var Z=F;F=G,G=Z}if(/^(?:asymmetric|continuous)$/.test(_)){var Y=_==="asymmetric",W=Math.min,X=G-F+1,U=X-1,K=$?W(X,4):1,V=K,ne=K,z=[];if(T||(V=W(1,F),ne=W(1,A-G-1)),U+=V+ne,U<=1)return;for(var te=0,ae=F-V;te<=U;te++,ae++)z[te]=E[(ae<0?ae+A:ae)%A]._point;for(var ce=z[0]._x+2*z[1]._x,re=z[0]._y+2*z[1]._y,be=2,ke=U-1,Pe=[ce],ze=[re],_e=[be],$e=[],Fe=[],te=1;te<U;te++){var Xe=te<ke,Ze=Xe||Y?1:2,Qe=Xe?4:Y?2:7,ft=Xe?4:Y?3:8,dt=Xe?2:Y?0:1,Et=Ze/be;be=_e[te]=Qe-Et,ce=Pe[te]=ft*z[te]._x+dt*z[te+1]._x-Et*ce,re=ze[te]=ft*z[te]._y+dt*z[te+1]._y-Et*re}$e[ke]=Pe[ke]/_e[ke],Fe[ke]=ze[ke]/_e[ke];for(var te=U-2;te>=0;te--)$e[te]=(Pe[te]-$e[te+1])/_e[te],Fe[te]=(ze[te]-Fe[te+1])/_e[te];$e[U]=(3*z[U]._x-$e[ke])/2,Fe[U]=(3*z[U]._y-Fe[ke])/2;for(var te=V,xt=U-ne,ae=F;te<=xt;te++,ae++){var Te=E[ae<0?ae+A:ae],Ke=Te._point,mt=$e[te]-Ke._x,Nt=Fe[te]-Ke._y;($||te<xt)&&Te.setHandleOut(mt,Nt),($||te>V)&&Te.setHandleIn(-mt,-Nt)}}else for(var te=F;te<=G;te++)E[te<0?te+A:te].smooth(b,!$&&te===F,!$&&te===G)},toShape:function(l){if(!this._closed)return null;var f=this._segments,b,_,E,A;function T(Y,W){var X=f[Y],U=X.getNext(),K=f[W],V=K.getNext();return X._handleOut.isZero()&&U._handleIn.isZero()&&K._handleOut.isZero()&&V._handleIn.isZero()&&U._point.subtract(X._point).isCollinear(V._point.subtract(K._point))}function N(Y){var W=f[Y],X=W.getPrevious(),U=W.getNext();return X._handleOut.isZero()&&W._handleIn.isZero()&&W._handleOut.isZero()&&U._handleIn.isZero()&&W._point.subtract(X._point).isOrthogonal(U._point.subtract(W._point))}function $(Y){var W=f[Y],X=W.getNext(),U=W._handleOut,K=X._handleIn,V=.5522847498307936;if(U.isOrthogonal(K)){var ne=W._point,z=X._point,te=new j(ne,U,!0).intersect(new j(z,K,!0),!0);return te&&p.isZero(U.getLength()/te.subtract(ne).getLength()-V)&&p.isZero(K.getLength()/te.subtract(z).getLength()-V)}return!1}function F(Y,W){return f[Y]._point.getDistance(f[W]._point)}if(!this.hasHandles()&&f.length===4&&T(0,2)&&T(1,3)&&N(1)?(b=R.Rectangle,_=new w(F(0,3),F(0,1)),A=f[1]._point.add(f[2]._point).divide(2)):f.length===8&&$(0)&&$(2)&&$(4)&&$(6)&&T(1,5)&&T(3,7)?(b=R.Rectangle,_=new w(F(1,6),F(0,3)),E=_.subtract(new w(F(0,7),F(1,2))).divide(2),A=f[3]._point.add(f[4]._point).divide(2)):f.length===4&&$(0)&&$(1)&&$(2)&&$(3)&&(p.isZero(F(0,2)-F(1,3))?(b=R.Circle,E=F(0,2)/2):(b=R.Ellipse,E=new w(F(2,0)/2,F(3,1)/2)),A=f[1]._point),b){var G=this.getPosition(!0),Z=new b({center:G,size:_,radius:E,insert:!1});return Z.copyAttributes(this,!0),Z._matrix.prepend(this._matrix),Z.rotate(A.subtract(G).getAngle()+90),(l===n||l)&&Z.insertAbove(this),Z}return null},toPath:"#clone",compare:function l(f){if(!f||f instanceof Le)return l.base.call(this,f);var b=this.getCurves(),_=f.getCurves(),E=b.length,A=_.length;if(!E||!A)return E==A;for(var T=b[0].getValues(),N=[],$=0,F,G=0,Z,Y=0;Y<A;Y++){var K=_[Y].getValues();N.push(K);var W=Ae.getOverlaps(T,K);if(W){F=!Y&&W[0][0]>0?A-1:Y,Z=W[0][1];break}}for(var X=Math.abs,U=1e-8,K=N[F],V;T&&K;){var W=Ae.getOverlaps(T,K);if(W){var ne=W[0][0];if(X(ne-G)<U){G=W[1][0],G===1&&(T=++$<E?b[$].getValues():null,G=0);var z=W[0][1];if(X(z-Z)<U){if(V||(V=[F,z]),Z=W[1][1],Z===1&&(++F>=A&&(F=0),K=N[F]||_[F].getValues(),Z=0),!T)return V[0]===F&&V[1]===Z;continue}}}break}return!1},_hitTestSelf:function(l,f,b,_){var E=this,A=this.getStyle(),T=this._segments,N=T.length,$=this._closed,F=f._tolerancePadding,G=F,Z,Y,W,X,U,K,V=f.stroke&&A.hasStroke(),ne=f.fill&&A.hasFill(),z=f.curves,te=V?A.getStrokeWidth()/2:ne&&f.tolerance>0||z?0:null;te!==null&&(te>0?(Z=A.getStrokeJoin(),Y=A.getStrokeCap(),W=A.getMiterLimit(),G=G.add(xe._getStrokePadding(te,_))):Z=Y="round");function ae($e,Fe){return l.subtract($e).divide(Fe).length<=1}function ce($e,Fe,Xe){if(!f.selected||Fe.isSelected()){var Ze=$e._point;if(Fe!==Ze&&(Fe=Fe.add(Ze)),ae(Fe,G))return new ge(Xe,E,{segment:$e,point:Fe})}}function re($e,Fe){return(Fe||f.segments)&&ce($e,$e._point,"segment")||!Fe&&f.handles&&(ce($e,$e._handleIn,"handle-in")||ce($e,$e._handleOut,"handle-out"))}function be($e){X.add($e)}function ke($e){var Fe=$||$e._index>0&&$e._index<N-1;if((Fe?Z:Y)==="round")return ae($e._point,G);if(X=new xe({internal:!0,closed:!0}),Fe?$e.isSmooth()||xe._addBevelJoin($e,Z,te,W,null,_,be,!0):Y==="square"&&xe._addSquareCap($e,Y,te,null,_,be,!0),!X.isEmpty()){var Xe;return X.contains(l)||(Xe=X.getNearestLocation(l))&&ae(Xe.getPoint(),F)}}if(f.ends&&!f.segments&&!$){if(K=re(T[0],!0)||re(T[N-1],!0))return K}else if(f.segments||f.handles){for(var Pe=0;Pe<N;Pe++)if(K=re(T[Pe]))return K}if(te!==null){if(U=this.getNearestLocation(l),U){var ze=U.getTime();ze===0||ze===1&&N>1?ke(U.getSegment())||(U=null):ae(U.getPoint(),G)||(U=null)}if(!U&&Z==="miter"&&N>1)for(var Pe=0;Pe<N;Pe++){var _e=T[Pe];if(l.getDistance(_e._point)<=W*te&&ke(_e)){U=_e.getLocation();break}}}return!U&&ne&&this._contains(l)||U&&!V&&!z?new ge("fill",this):U?new ge(V?"stroke":"curve",this,{location:U,point:U.getPoint()}):null}},s.each(Ae._evaluateMethods,function(l){this[l+"At"]=function(f){var b=this.getLocationAt(f);return b&&b[l]()}},{beans:!1,getLocationOf:function(){for(var l=g.read(arguments),f=this.getCurves(),b=0,_=f.length;b<_;b++){var E=f[b].getLocationOf(l);if(E)return E}return null},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getLocationAt:function(l){if(typeof l=="number"){for(var f=this.getCurves(),b=0,_=0,E=f.length;_<E;_++){var A=b,T=f[_];if(b+=T.getLength(),b>l)return T.getLocationAt(l-A)}if(f.length>0&&l<=this.getLength())return new we(f[f.length-1],1)}else if(l&&l.getPath&&l.getPath()===this)return l;return null},getOffsetsWithTangent:function(){var l=g.read(arguments);if(l.isZero())return[];for(var f=[],b=0,_=this.getCurves(),E=0,A=_.length;E<A;E++){for(var T=_[E],N=T.getTimesWithTangent(l),$=0,F=N.length;$<F;$++){var G=b+T.getOffsetAtTime(N[$]);f.indexOf(G)<0&&f.push(G)}b+=T.length}return f}}),new function(){function l(b,_,E,A){if(A<=0)return;var T=A/2,N=A-2,$=T-1,F=new Array(6),G,Z;function Y(ne){var z=F[ne],te=F[ne+1];(G!=z||Z!=te)&&(b.beginPath(),b.moveTo(G,Z),b.lineTo(z,te),b.stroke(),b.beginPath(),b.arc(z,te,T,0,Math.PI*2,!0),b.fill())}for(var W=0,X=_.length;W<X;W++){var U=_[W],K=U._selection;if(U._transformCoordinates(E,F),G=F[0],Z=F[1],K&2&&Y(2),K&4&&Y(4),b.fillRect(G-T,Z-T,A,A),N>0&&!(K&1)){var V=b.fillStyle;b.fillStyle="#ffffff",b.fillRect(G-$,Z-$,N,N),b.fillStyle=V}}}function f(b,_,E){var A=_._segments,T=A.length,N=new Array(6),$=!0,F,G,Z,Y,W,X,U,K;function V(z){if(E)z._transformCoordinates(E,N),F=N[0],G=N[1];else{var te=z._point;F=te._x,G=te._y}if($)b.moveTo(F,G),$=!1;else{if(E)W=N[2],X=N[3];else{var ae=z._handleIn;W=F+ae._x,X=G+ae._y}W===F&&X===G&&U===Z&&K===Y?b.lineTo(F,G):b.bezierCurveTo(U,K,W,X,F,G)}if(Z=F,Y=G,E)U=N[4],K=N[5];else{var ae=z._handleOut;U=Z+ae._x,K=Y+ae._y}}for(var ne=0;ne<T;ne++)V(A[ne]);_._closed&&T>0&&V(A[0])}return{_draw:function(b,_,E,A){var T=_.dontStart,N=_.dontFinish||_.clip,$=this.getStyle(),F=$.hasFill(),G=$.hasStroke(),Z=$.getDashArray(),Y=!De.support.nativeDash&&G&&Z&&Z.length;T||b.beginPath(),(F||G&&!Y||N)&&(f(b,this,A),this._closed&&b.closePath());function W(z){return Z[(z%Y+Y)%Y]}if(!N&&(F||G)&&(this._setStyles(b,_,E),F&&(b.fill($.getFillRule()),b.shadowColor="rgba(0,0,0,0)"),G)){if(Y){T||b.beginPath();for(var X=new Ce(this,.25,32,!1,A),U=X.length,K=-$.getDashOffset(),V,ne=0;K>0;)K-=W(ne--)+W(ne--);for(;K<U;)V=K+W(ne++),(K>0||V>0)&&X.drawPart(b,Math.max(K,0),Math.max(V,0)),K=V+W(ne++)}b.stroke()}},_drawSelected:function(b,_){b.beginPath(),f(b,this,_),b.stroke(),l(b,this._segments,_,De.settings.handleSize)}}},new function(){function l(f){var b=f._segments;if(!b.length)throw new Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var f=this._segments;f.length===1&&this.removeSegment(0),f.length||this._add([new H(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new H(g.read(arguments))])},cubicCurveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),E=g.read(f),A=l(this);A.setHandleOut(b.subtract(A._point)),this._add([new H(E,_.subtract(E))])},quadraticCurveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),E=l(this)._point;this.cubicCurveTo(b.add(E.subtract(b).multiply(1/3)),b.add(_.subtract(b).multiply(1/3)),_)},curveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),E=s.pick(s.read(f),.5),A=1-E,T=l(this)._point,N=b.subtract(T.multiply(A*A)).subtract(_.multiply(E*E)).divide(2*E*A);if(N.isNaN())throw new Error("Cannot put a curve through points with parameter = "+E);this.quadraticCurveTo(N,_)},arcTo:function(){var f=arguments,b=Math.abs,_=Math.sqrt,E=l(this),A=E._point,T=g.read(f),N,$=s.peek(f),F=s.pick($,!0),G,Z,Y,W;if(typeof F=="boolean")var X=A.add(T).divide(2),N=X.add(X.subtract(A).rotate(F?-90:90));else if(s.remain(f)<=2)N=T,T=g.read(f);else if(!A.equals(T)){var U=w.read(f),K=p.isZero;if(K(U.width)||K(U.height))return this.lineTo(T);var V=s.read(f),F=!!s.read(f),ne=!!s.read(f),X=A.add(T).divide(2),z=A.subtract(X).rotate(-V),te=z.x,ae=z.y,ce=b(U.width),re=b(U.height),be=ce*ce,ke=re*re,Pe=te*te,ze=ae*ae,_e=_(Pe/be+ze/ke);if(_e>1&&(ce*=_e,re*=_e,be=ce*ce,ke=re*re),_e=(be*ke-be*ze-ke*Pe)/(be*ze+ke*Pe),b(_e)<1e-12&&(_e=0),_e<0)throw new Error("Cannot create an arc with the given arguments");G=new g(ce*ae/re,-re*te/ce).multiply((ne===F?-1:1)*_(_e)).rotate(V).add(X),W=new P().translate(G).rotate(V).scale(ce,re),Y=W._inverseTransform(A),Z=Y.getDirectedAngle(W._inverseTransform(T)),!F&&Z>0?Z-=360:F&&Z<0&&(Z+=360)}if(N){var $e=new j(A.add(N).divide(2),N.subtract(A).rotate(90),!0),Fe=new j(N.add(T).divide(2),T.subtract(N).rotate(90),!0),Xe=new j(A,T),Ze=Xe.getSide(N);if(G=$e.intersect(Fe,!0),!G){if(!Ze)return this.lineTo(T);throw new Error("Cannot create an arc with the given arguments")}Y=A.subtract(G),Z=Y.getDirectedAngle(T.subtract(G));var Qe=Xe.getSide(G,!0);Qe===0?Z=Ze*b(Z):Ze===Qe&&(Z+=Z<0?360:-360)}if(Z){for(var ft=1e-5,dt=b(Z),Et=dt>=360?4:Math.ceil((dt-ft)/90),xt=Z/Et,Te=xt*Math.PI/360,Ke=4/3*Math.sin(Te)/(1+Math.cos(Te)),mt=[],Nt=0;Nt<=Et;Nt++){var z=T,kt=null;if(Nt<Et&&(kt=Y.rotate(90).multiply(Ke),W?(z=W._transformPoint(Y),kt=W._transformPoint(Y.add(kt)).subtract(z)):z=G.add(Y)),!Nt)E.setHandleOut(kt);else{var Bt=Y.rotate(-90).multiply(Ke);W&&(Bt=W._transformPoint(Y.add(Bt)).subtract(z)),mt.push(new H(z,Bt,kt))}Y=Y.rotate(xt)}this._add(mt)}},lineBy:function(){var f=g.read(arguments),b=l(this)._point;this.lineTo(b.add(f))},curveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),E=s.read(f),A=l(this)._point;this.curveTo(A.add(b),A.add(_),E)},cubicCurveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),E=g.read(f),A=l(this)._point;this.cubicCurveTo(A.add(b),A.add(_),A.add(E))},quadraticCurveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),E=l(this)._point;this.quadraticCurveTo(E.add(b),E.add(_))},arcBy:function(){var f=arguments,b=l(this)._point,_=b.add(g.read(f)),E=s.pick(s.peek(f),!0);typeof E=="boolean"?this.arcTo(_,E):this.arcTo(_,b.add(g.read(f)))},closePath:function(f){this.setClosed(!0),this.join(this,f)}}},{_getBounds:function(l,f){var b=f.handle?"getHandleBounds":f.stroke?"getStrokeBounds":"getBounds";return xe[b](this._segments,this._closed,this,l,f)},statics:{getBounds:function(l,f,b,_,E,A){var T=l[0];if(!T)return new x;var N=new Array(6),$=T._transformCoordinates(_,new Array(6)),F=$.slice(0,2),G=F.slice(),Z=new Array(2);function Y(U){U._transformCoordinates(_,N);for(var K=0;K<2;K++)Ae._addBounds($[K],$[K+4],N[K+2],N[K],K,A?A[K]:0,F,G,Z);var V=$;$=N,N=V}for(var W=1,X=l.length;W<X;W++)Y(l[W]);return f&&Y(T),new x(F[0],F[1],G[0]-F[0],G[1]-F[1])},getStrokeBounds:function(l,f,b,_,E){var A=b.getStyle(),T=A.hasStroke(),N=A.getStrokeWidth(),$=T&&b._getStrokeMatrix(_,E),F=T&&xe._getStrokePadding(N,$),G=xe.getBounds(l,f,b,_,E,F);if(!T)return G;var Z=N/2,Y=A.getStrokeJoin(),W=A.getStrokeCap(),X=A.getMiterLimit(),U=new x(new w(F));function K(ce){G=G.include(ce)}function V(ce){G=G.unite(U.setCenter(ce._point.transform(_)))}function ne(ce,re){re==="round"||ce.isSmooth()?V(ce):xe._addBevelJoin(ce,re,Z,X,_,$,K)}function z(ce,re){re==="round"?V(ce):xe._addSquareCap(ce,re,Z,_,$,K)}var te=l.length-(f?0:1);if(te>0){for(var ae=1;ae<te;ae++)ne(l[ae],Y);f?ne(l[0],Y):(z(l[0],W),z(l[l.length-1],W))}return G},_getStrokePadding:function(l,f){if(!f)return[l,l];var b=new g(l,0).transform(f),_=new g(0,l).transform(f),E=b.getAngleInRadians(),A=b.getLength(),T=_.getLength(),N=Math.sin(E),$=Math.cos(E),F=Math.tan(E),G=Math.atan2(T*F,A),Z=Math.atan2(T,F*A);return[Math.abs(A*Math.cos(G)*$+T*Math.sin(G)*N),Math.abs(T*Math.sin(Z)*$+A*Math.cos(Z)*N)]},_addBevelJoin:function(l,f,b,_,E,A,T,N){var $=l.getCurve(),F=$.getPrevious(),G=$.getPoint1().transform(E),Z=F.getNormalAtTime(1).multiply(b).transform(A),Y=$.getNormalAtTime(0).multiply(b).transform(A),W=Z.getDirectedAngle(Y);if((W<0||W>=180)&&(Z=Z.negate(),Y=Y.negate()),N&&T(G),T(G.add(Z)),f==="miter"){var X=new j(G.add(Z),new g(-Z.y,Z.x),!0).intersect(new j(G.add(Y),new g(-Y.y,Y.x),!0),!0);X&&G.getDistance(X)<=_*b&&T(X)}T(G.add(Y))},_addSquareCap:function(l,f,b,_,E,A,T){var N=l._point.transform(_),$=l.getLocation(),F=$.getNormal().multiply($.getTime()===0?b:-b).transform(E);f==="square"&&(T&&(A(N.subtract(F)),A(N.add(F))),N=N.add(F.rotate(-90))),A(N.add(F)),A(N.subtract(F))},getHandleBounds:function(l,f,b,_,E){var A=b.getStyle(),T=E.stroke&&A.hasStroke(),N,$;if(T){var F=b._getStrokeMatrix(_,E),G=A.getStrokeWidth()/2,Z=G;A.getStrokeJoin()==="miter"&&(Z=G*A.getMiterLimit()),A.getStrokeCap()==="square"&&(Z=Math.max(Z,G*Math.SQRT2)),N=xe._getStrokePadding(G,F),$=xe._getStrokePadding(Z,F)}for(var Y=new Array(6),W=1/0,X=-W,U=W,K=X,V=0,ne=l.length;V<ne;V++){var z=l[V];z._transformCoordinates(_,Y);for(var te=0;te<6;te+=2){var ae=te?N:$,ce=ae?ae[0]:0,re=ae?ae[1]:0,be=Y[te],ke=Y[te+1],Pe=be-ce,ze=be+ce,_e=ke-re,$e=ke+re;Pe<W&&(W=Pe),ze>X&&(X=ze),_e<U&&(U=_e),$e>K&&(K=$e)}}return new x(W,U,X-W,K-U)}}});xe.inject({statics:new function(){var l=.5522847498307936,f=[new H([-1,0],[0,l],[0,-l]),new H([0,-1],[-l,0],[l,0]),new H([1,0],[0,-l],[0,l]),new H([0,1],[l,0],[-l,0])];function b(E,A,T){var N=s.getNamed(T),$=new xe(N&&(N.insert==!0?S.INSERT:N.insert==!1?S.NO_INSERT:null));return $._add(E),$._closed=A,$.set(N,S.INSERT)}function _(E,A,T){for(var N=new Array(4),$=0;$<4;$++){var F=f[$];N[$]=new H(F._point.multiply(A).add(E),F._handleIn.multiply(A),F._handleOut.multiply(A))}return b(N,!0,T)}return{Line:function(){var E=arguments;return b([new H(g.readNamed(E,"from")),new H(g.readNamed(E,"to"))],!1,E)},Circle:function(){var E=arguments,A=g.readNamed(E,"center"),T=s.readNamed(E,"radius");return _(A,new w(T),E)},Rectangle:function(){var E=arguments,A=x.readNamed(E,"rectangle"),T=w.readNamed(E,"radius",0,{readNull:!0}),N=A.getBottomLeft(!0),$=A.getTopLeft(!0),F=A.getTopRight(!0),G=A.getBottomRight(!0),Z;if(!T||T.isZero())Z=[new H(N),new H($),new H(F),new H(G)];else{T=w.min(T,A.getSize(!0).divide(2));var Y=T.width,W=T.height,X=Y*l,U=W*l;Z=[new H(N.add(Y,0),null,[-X,0]),new H(N.subtract(0,W),[0,U]),new H($.add(0,W),null,[0,-U]),new H($.add(Y,0),[-X,0],null),new H(F.subtract(Y,0),null,[X,0]),new H(F.add(0,W),[0,-U],null),new H(G.subtract(0,W),null,[0,U]),new H(G.subtract(Y,0),[X,0])]}return b(Z,!0,E)},RoundRectangle:"#Rectangle",Ellipse:function(){var E=arguments,A=R._readEllipse(E);return _(A.center,A.radius,E)},Oval:"#Ellipse",Arc:function(){var E=arguments,A=g.readNamed(E,"from"),T=g.readNamed(E,"through"),N=g.readNamed(E,"to"),$=s.getNamed(E),F=new xe($&&$.insert==!1&&S.NO_INSERT);return F.moveTo(A),F.arcTo(T,N),F.set($)},RegularPolygon:function(){for(var E=arguments,A=g.readNamed(E,"center"),T=s.readNamed(E,"sides"),N=s.readNamed(E,"radius"),$=360/T,F=T%3===0,G=new g(0,F?-N:N),Z=F?-1:.5,Y=new Array(T),W=0;W<T;W++)Y[W]=new H(A.add(G.rotate((W+Z)*$)));return b(Y,!0,E)},Star:function(){for(var E=arguments,A=g.readNamed(E,"center"),T=s.readNamed(E,"points")*2,N=s.readNamed(E,"radius1"),$=s.readNamed(E,"radius2"),F=360/T,G=new g(0,-1),Z=new Array(T),Y=0;Y<T;Y++)Z[Y]=new H(A.add(G.rotate(F*Y).multiply(Y%2?$:N)));return b(Z,!0,E)}}}});var Le=Be.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(f){this._children=[],this._namedChildren={},this._initialize(f)||(typeof f=="string"?this.setPathData(f):this.addChildren(Array.isArray(f)?f:arguments))},insertChildren:function l(f,b){var _=b,E=_[0];E&&typeof E[0]=="number"&&(_=[_]);for(var A=b.length-1;A>=0;A--){var T=_[A];_===b&&!(T instanceof xe)&&(_=s.slice(_)),Array.isArray(T)?_[A]=new xe({segments:T,insert:!1}):T instanceof Le&&(_.splice.apply(_,[A,1].concat(T.removeChildren())),T.remove())}return l.base.call(this,f,_)},reduce:function l(f){for(var b=this._children,_=b.length-1;_>=0;_--){var E=b[_].reduce(f);E.isEmpty()&&E.remove()}if(!b.length){var E=new xe(S.NO_INSERT);return E.copyAttributes(this),E.insertAbove(this),this.remove(),E}return l.base.call(this)},isClosed:function(){for(var l=this._children,f=0,b=l.length;f<b;f++)if(!l[f]._closed)return!1;return!0},setClosed:function(l){for(var f=this._children,b=0,_=f.length;b<_;b++)f[b].setClosed(l)},getFirstSegment:function(){var l=this.getFirstChild();return l&&l.getFirstSegment()},getLastSegment:function(){var l=this.getLastChild();return l&&l.getLastSegment()},getCurves:function(){for(var l=this._children,f=[],b=0,_=l.length;b<_;b++)s.push(f,l[b].getCurves());return f},getFirstCurve:function(){var l=this.getFirstChild();return l&&l.getFirstCurve()},getLastCurve:function(){var l=this.getLastChild();return l&&l.getLastCurve()},getArea:function(){for(var l=this._children,f=0,b=0,_=l.length;b<_;b++)f+=l[b].getArea();return f},getLength:function(){for(var l=this._children,f=0,b=0,_=l.length;b<_;b++)f+=l[b].getLength();return f},getPathData:function(l,f){for(var b=this._children,_=[],E=0,A=b.length;E<A;E++){var T=b[E],N=T._matrix;_.push(T.getPathData(l&&!N.isIdentity()?l.appended(N):l,f))}return _.join("")},_hitTestChildren:function l(f,b,_){return l.base.call(this,f,b.class===xe||b.type==="path"?b:s.set({},b,{fill:!1}),_)},_draw:function(l,f,b,_){var E=this._children;if(E.length){f=f.extend({dontStart:!0,dontFinish:!0}),l.beginPath();for(var A=0,T=E.length;A<T;A++)E[A].draw(l,f,_);if(!f.clip){this._setStyles(l,f,b);var N=this._style;N.hasFill()&&(l.fill(N.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),N.hasStroke()&&l.stroke()}}},_drawSelected:function(l,f,b){for(var _=this._children,E=0,A=_.length;E<A;E++){var T=_[E],N=T._matrix;b[T._id]||T._drawSelected(l,N.isIdentity()?f:f.appended(N))}}},new function(){function l(f,b){var _=f._children;if(b&&!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(f){this[f]=function(){var b=l(this,!0);b[f].apply(b,arguments)}},{moveTo:function(){var f=l(this),b=f&&f.isEmpty()?f:new xe(S.NO_INSERT);b!==f&&this.addChild(b),b.moveTo.apply(b,arguments)},moveBy:function(){var f=l(this,!0),b=f&&f.getLastSegment(),_=g.read(arguments);this.moveTo(b?_.add(b._point):_)},closePath:function(f){l(this,!0).closePath(f)}})},s.each(["reverse","flatten","simplify","smooth"],function(l){this[l]=function(f){for(var b=this._children,_,E=0,A=b.length;E<A;E++)_=b[E][l](f)||_;return _}},{}));Be.inject(new function(){var l=Math.min,f=Math.max,b=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function E(V){return V._children||[V]}function A(V,ne){var z=V.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(ne){for(var te=E(z),ae=0,ce=te.length;ae<ce;ae++){var V=te[ae];!V._closed&&!V.isEmpty()&&(V.closePath(1e-12),V.getFirstSegment().setHandleIn(0,0),V.getLastSegment().setHandleOut(0,0))}z=z.resolveCrossings().reorient(z.getFillRule()==="nonzero",!0)}return z}function T(V,ne,z,te,ae){var ce=new Le(S.NO_INSERT);return ce.addChildren(V,!0),ce=ce.reduce({simplify:ne}),ae&&ae.insert==!1||ce.insertAbove(te&&z.isSibling(te)&&z.getIndex()<te.getIndex()?te:z),ce.copyAttributes(z,!0),ce}function N(V){return V.hasOverlap()||V.isCrossing()}function $(V,ne,z,te){if(te&&(te.trace==!1||te.stroke)&&/^(subtract|intersect)$/.test(z))return F(V,ne,z);var ae=A(V,!0),ce=ne&&V!==ne&&A(ne,!0),re=_[z];re[z]=!0,ce&&(re.subtract||re.exclude)^(ce.isClockwise()^ae.isClockwise())&&ce.reverse();var be=W(we.expand(ae.getIntersections(ce,N))),ke=E(ae),Pe=ce&&E(ce),ze=[],_e=[],$e;function Fe(kt){for(var Bt=0,At=kt.length;Bt<At;Bt++){var Dt=kt[Bt];s.push(ze,Dt._segments),s.push(_e,Dt.getCurves()),Dt._overlapsOnly=!0}}function Xe(kt){for(var Bt=[],At=0,Dt=kt&&kt.length;At<Dt;At++)Bt.push(_e[kt[At]]);return Bt}if(be.length){Fe(ke),Pe&&Fe(Pe);for(var Ze=new Array(_e.length),Qe=0,ft=_e.length;Qe<ft;Qe++)Ze[Qe]=_e[Qe].getValues();for(var dt=h.findCurveBoundsCollisions(Ze,Ze,0,!0),Et={},Qe=0;Qe<_e.length;Qe++){var xt=_e[Qe],Te=xt._path._id,Ke=Et[Te]=Et[Te]||{};Ke[xt.getIndex()]={hor:Xe(dt[Qe].hor),ver:Xe(dt[Qe].ver)}}for(var Qe=0,ft=be.length;Qe<ft;Qe++)U(be[Qe]._segment,ae,ce,Et,re);for(var Qe=0,ft=ze.length;Qe<ft;Qe++){var mt=ze[Qe],Nt=mt._intersection;mt._winding||U(mt,ae,ce,Et,re),Nt&&Nt._overlap||(mt._path._overlapsOnly=!1)}$e=K(ze,re)}else $e=Y(Pe?ke.concat(Pe):ke.slice(),function(kt){return!!re[kt]});return T($e,!0,V,ne,te)}function F(V,ne,z){var te=A(V),ae=A(ne),ce=te.getIntersections(ae,N),re=z==="subtract",be=z==="divide",ke={},Pe=[];function ze(Fe){if(!ke[Fe._id]&&(be||ae.contains(Fe.getPointAt(Fe.getLength()/2))^re))return Pe.unshift(Fe),ke[Fe._id]=!0}for(var _e=ce.length-1;_e>=0;_e--){var $e=ce[_e].split();$e&&(ze($e)&&$e.getFirstSegment().setHandleIn(0,0),te.getLastSegment().setHandleOut(0,0))}return ze(te),T(Pe,!1,V,ne)}function G(V,ne){for(var z=V;z;){if(z===ne)return;z=z._previous}for(;V._next&&V._next!==ne;)V=V._next;if(!V._next){for(;ne._previous;)ne=ne._previous;V._next=ne,ne._previous=V}}function Z(V){for(var ne=V.length-1;ne>=0;ne--)V[ne].clearHandles()}function Y(V,ne,z){var te=V&&V.length;if(te){var ae=s.each(V,function(dt,Et){this[dt._id]={container:null,winding:dt.isClockwise()?1:-1,index:Et}},{}),ce=V.slice().sort(function(dt,Et){return b(Et.getArea())-b(dt.getArea())}),re=ce[0],be=h.findItemBoundsCollisions(ce,null,p.GEOMETRIC_EPSILON);z==null&&(z=re.isClockwise());for(var ke=0;ke<te;ke++){var Pe=ce[ke],ze=ae[Pe._id],_e=0,$e=be[ke];if($e){for(var Fe=null,Xe=$e.length-1;Xe>=0;Xe--)if($e[Xe]<ke){Fe=Fe||Pe.getInteriorPoint();var Ze=ce[$e[Xe]];if(Ze.contains(Fe)){var Qe=ae[Ze._id];_e=Qe.winding,ze.winding+=_e,ze.container=Qe.exclude?Qe.container:Ze;break}}}if(ne(ze.winding)===ne(_e))ze.exclude=!0,V[ze.index]=null;else{var ft=ze.container;Pe.setClockwise(ft?!ft.isClockwise():z)}}}return V}function W(V,ne,z){var te=ne&&[],ae=1e-8,ce=1-ae,re=!1,be=z||[],ke=z&&{},Pe,ze,_e;function $e(Bt){return Bt._path._id+"."+Bt._segment1._index}for(var Fe=(z&&z.length)-1;Fe>=0;Fe--){var Xe=z[Fe];Xe._path&&(ke[$e(Xe)]=!0)}for(var Fe=V.length-1;Fe>=0;Fe--){var Ze=V[Fe],Qe=Ze._time,ft=Qe,dt=ne&&!ne(Ze),Xe=Ze._curve,Et;if(Xe&&(Xe!==ze?(re=!Xe.hasHandles()||ke&&ke[$e(Xe)],Pe=[],_e=null,ze=Xe):_e>=ae&&(Qe/=_e)),dt){Pe&&Pe.push(Ze);continue}else ne&&te.unshift(Ze);if(_e=ft,Qe<ae)Et=Xe._segment1;else if(Qe>ce)Et=Xe._segment2;else{var xt=Xe.divideAtTime(Qe,!0);re&&be.push(Xe,xt),Et=xt._segment1;for(var Te=Pe.length-1;Te>=0;Te--){var Ke=Pe[Te];Ke._time=(Ke._time-Qe)/(1-Qe)}}Ze._setSegment(Et);var mt=Et._intersection,Nt=Ze._intersection;if(mt){G(mt,Nt);for(var kt=mt;kt;)G(kt._intersection,mt),kt=kt._next}else Et._intersection=Nt}return z||Z(be),te||V}function X(V,ne,z,te,ae){var ce=Array.isArray(ne)?ne:ne[z?"hor":"ver"],re=z?1:0,be=re^1,ke=[V.x,V.y],Pe=ke[re],ze=ke[be],_e=1e-9,$e=1e-6,Fe=Pe-_e,Xe=Pe+_e,Ze=0,Qe=0,ft=0,dt=0,Et=!1,xt=!1,Te=1,Ke=[],mt,Nt;function kt(wt){var Tn=wt[be+0],Rn=wt[be+6];if(!(ze<l(Tn,Rn)||ze>f(Tn,Rn))){var wn=wt[re+0],Er=wt[re+2],Or=wt[re+4],sr=wt[re+6];if(Tn===Rn){(wn<Xe&&sr>Fe||sr<Xe&&wn>Fe)&&(Et=!0);return}var tr=ze===Tn?0:ze===Rn||Fe>f(wn,Er,Or,sr)||Xe<l(wn,Er,Or,sr)?1:Ae.solveCubic(wt,be,ze,Ke,0,1)>0?Ke[0]:1,fr=tr===0?wn:tr===1?sr:Ae.getPoint(wt,tr)[z?"y":"x"],ar=Tn>Rn?1:-1,Zr=mt[be]>mt[be+6]?1:-1,zn=mt[re+6];return ze!==Tn?(fr<Fe?ft+=ar:fr>Xe?dt+=ar:Et=!0,fr>Pe-$e&&fr<Pe+$e&&(Te/=2)):(ar!==Zr?wn<Fe?ft+=ar:wn>Xe&&(dt+=ar):wn!=zn&&(zn<Xe&&fr>Xe?(dt+=ar,Et=!0):zn>Fe&&fr<Fe&&(ft+=ar,Et=!0)),Te/=4),mt=wt,!ae&&fr>Fe&&fr<Xe&&Ae.getTangent(wt,tr)[z?"x":"y"]===0&&X(V,ne,!z,te,!0)}}function Bt(wt){var Tn=wt[be+0],Rn=wt[be+2],wn=wt[be+4],Er=wt[be+6];if(ze<=f(Tn,Rn,wn,Er)&&ze>=l(Tn,Rn,wn,Er)){for(var Or=wt[re+0],sr=wt[re+2],tr=wt[re+4],fr=wt[re+6],ar=Fe>f(Or,sr,tr,fr)||Xe<l(Or,sr,tr,fr)?[wt]:Ae.getMonoCurves(wt,z),Zr,zn=0,nr=ar.length;zn<nr;zn++)if(Zr=kt(ar[zn]))return Zr}}for(var At=0,Dt=ce.length;At<Dt;At++){var Ut=ce[At],Rt=Ut._path,Kt=Ut.getValues(),en;if((!At||ce[At-1]._path!==Rt)&&(mt=null,Rt._closed||(Nt=Ae.getValues(Rt.getLastCurve().getSegment2(),Ut.getSegment1(),null,!te),Nt[be]!==Nt[be+6]&&(mt=Nt)),!mt)){mt=Kt;for(var bn=Rt.getLastCurve();bn&&bn!==Ut;){var En=bn.getValues();if(En[be]!==En[be+6]){mt=En;break}bn=bn.getPrevious()}}if(en=Bt(Kt))return en;if(At+1===Dt||ce[At+1]._path!==Rt){if(Nt&&(en=Bt(Nt)))return en;Et&&!ft&&!dt&&(ft=dt=Rt.isClockwise(te)^z?1:-1),Ze+=ft,Qe+=dt,ft=dt=0,Et&&(xt=!0,Et=!1),Nt=null}}return Ze=b(Ze),Qe=b(Qe),{winding:f(Ze,Qe),windingL:Ze,windingR:Qe,quality:Te,onPath:xt}}function U(V,ne,z,te,ae){var ce=[],re=V,be=0,_e;do{var ke=V.getCurve();if(ke){var Pe=ke.getLength();ce.push({segment:V,curve:ke,length:Pe}),be+=Pe}V=V.getNext()}while(V&&!V._intersection&&V!==re);for(var ze=[.5,.25,.75],_e={winding:0,quality:-1},$e=.001,Fe=1-$e,Xe=0;Xe<ze.length&&_e.quality<.5;Xe++)for(var Pe=be*ze[Xe],Ze=0,Qe=ce.length;Ze<Qe;Ze++){var ft=ce[Ze],dt=ft.length;if(Pe<=dt){var ke=ft.curve,Et=ke._path,xt=Et._parent,Te=xt instanceof Le?xt:Et,Ke=p.clamp(ke.getTimeAt(Pe),$e,Fe),mt=ke.getPointAtTime(Ke),Nt=b(ke.getTangentAtTime(Ke).y)<Math.SQRT1_2,kt=null;if(ae.subtract&&z){var Bt=Te===ne?z:ne,At=Bt._getWinding(mt,Nt,!0);if(Te===ne&&At.winding||Te===z&&!At.winding){if(At.quality<1)continue;kt={winding:0,quality:1}}}kt=kt||X(mt,te[Et._id][ke.getIndex()],Nt,!0),kt.quality>_e.quality&&(_e=kt);break}Pe-=dt}for(var Ze=ce.length-1;Ze>=0;Ze--)ce[Ze].segment._winding=_e}function K(V,ne){var z=[],te;function ae(Dt){var Ut;return!!(Dt&&!Dt._visited&&(!ne||ne[(Ut=Dt._winding||{}).winding]&&!(ne.unite&&Ut.winding===2&&Ut.windingL&&Ut.windingR)))}function ce(Dt){if(Dt){for(var Ut=0,Rt=te.length;Ut<Rt;Ut++)if(Dt===te[Ut])return!0}return!1}function re(Dt){for(var Ut=Dt._segments,Rt=0,Kt=Ut.length;Rt<Kt;Rt++)Ut[Rt]._visited=!0}function be(Dt,Ut){var Rt=Dt._intersection,Kt=Rt,en=[];Ut&&(te=[Dt]);function bn(En,wt){for(;En&&En!==wt;){var Tn=En._segment,Rn=Tn&&Tn._path;if(Rn){var wn=Tn.getNext()||Rn.getFirstSegment(),Er=wn._intersection;Tn!==Dt&&(ce(Tn)||ce(wn)||wn&&ae(Tn)&&(ae(wn)||Er&&ae(Er._segment)))&&en.push(Tn),Ut&&te.push(Tn)}En=En._next}}if(Rt){for(bn(Rt);Rt&&Rt._previous;)Rt=Rt._previous;bn(Rt,Kt)}return en}V.sort(function(Dt,Ut){var Rt=Dt._intersection,Kt=Ut._intersection,en=!!(Rt&&Rt._overlap),bn=!!(Kt&&Kt._overlap),En=Dt._path,wt=Ut._path;return en^bn?en?1:-1:!Rt^!Kt?Rt?1:-1:En!==wt?En._id-wt._id:Dt._index-Ut._index});for(var ke=0,Pe=V.length;ke<Pe;ke++){var ze=V[ke],_e=ae(ze),$e=null,Fe=!1,Xe=!0,Ze=[],Qe,ft,dt;if(_e&&ze._path._overlapsOnly){var Et=ze._path,xt=ze._intersection._segment._path;Et.compare(xt)&&(Et.getArea()&&z.push(Et.clone(!1)),re(Et),re(xt),_e=!1)}for(;_e;){var Te=!$e,Ke=be(ze,Te),mt=Ke.shift(),Fe=!Te&&(ce(ze)||ce(mt)),Nt=!Fe&&mt;if(Te&&($e=new xe(S.NO_INSERT),Qe=null),Fe){(ze.isFirst()||ze.isLast())&&(Xe=ze._path._closed),ze._visited=!0;break}if(Nt&&Qe&&(Ze.push(Qe),Qe=null),Qe||(Nt&&Ke.push(ze),Qe={start:$e._segments.length,crossings:Ke,visited:ft=[],handleIn:dt}),Nt&&(ze=mt),!ae(ze)){$e.removeSegments(Qe.start);for(var kt=0,Bt=ft.length;kt<Bt;kt++)ft[kt]._visited=!1;ft.length=0;do ze=Qe&&Qe.crossings.shift(),(!ze||!ze._path)&&(ze=null,Qe=Ze.pop(),Qe&&(ft=Qe.visited,dt=Qe.handleIn));while(Qe&&!ae(ze));if(!ze)break}var At=ze.getNext();$e.add(new H(ze._point,dt,At&&ze._handleOut)),ze._visited=!0,ft.push(ze),ze=At||ze._path.getFirstSegment(),dt=At&&At._handleIn}Fe&&(Xe&&($e.getFirstSegment().setHandleIn(dt),$e.setClosed(Xe)),$e.getArea()!==0&&z.push($e))}return z}return{_getWinding:function(V,ne,z){return X(V,this.getCurves(),ne,z)},unite:function(V,ne){return $(this,V,"unite",ne)},intersect:function(V,ne){return $(this,V,"intersect",ne)},subtract:function(V,ne){return $(this,V,"subtract",ne)},exclude:function(V,ne){return $(this,V,"exclude",ne)},divide:function(V,ne){return ne&&(ne.trace==!1||ne.stroke)?F(this,V,"divide"):T([this.subtract(V,ne),this.intersect(V,ne)],!0,this,V,ne)},resolveCrossings:function(){var V=this._children,ne=V||[this];function z(Qe,ft){var dt=Qe&&Qe._intersection;return dt&&dt._overlap&&dt._path===ft}var te=!1,ae=!1,ce=this.getIntersections(null,function(Qe){return Qe.hasOverlap()&&(te=!0)||Qe.isCrossing()&&(ae=!0)}),re=te&&ae&&[];if(ce=we.expand(ce),te)for(var be=W(ce,function(Qe){return Qe.hasOverlap()},re),ke=be.length-1;ke>=0;ke--){var Pe=be[ke],ze=Pe._path,_e=Pe._segment,$e=_e.getPrevious(),Fe=_e.getNext();z($e,ze)&&z(Fe,ze)&&(_e.remove(),$e._handleOut._set(0,0),Fe._handleIn._set(0,0),$e!==_e&&!$e.getCurve().hasLength()&&(Fe._handleIn.set($e._handleIn),$e.remove()))}ae&&(W(ce,te&&function(Qe){var ft=Qe.getCurve(),dt=Qe.getSegment(),Et=Qe._intersection,xt=Et._curve,Te=Et._segment;if(ft&&xt&&ft._path&&xt._path)return!0;dt&&(dt._intersection=null),Te&&(Te._intersection=null)},re),re&&Z(re),ne=K(s.each(ne,function(Qe){s.push(this,Qe._segments)},[])));var Xe=ne.length,Ze;return Xe>1&&V?(ne!==V&&this.setChildren(ne),Ze=this):Xe===1&&!V&&(ne[0]!==this&&this.setSegments(ne[0].removeSegments()),Ze=this),Ze||(Ze=new Le(S.NO_INSERT),Ze.addChildren(ne),Ze=Ze.reduce(),Ze.copyAttributes(this),this.replaceWith(Ze)),Ze},reorient:function(V,ne){var z=this._children;return z&&z.length?this.setChildren(Y(this.removeChildren(),function(te){return!!(V?te:te&1)},ne)):ne!==n&&this.setClockwise(ne),this},getInteriorPoint:function(){var V=this.getBounds(),ne=V.getCenter(!0);if(!this.contains(ne)){for(var z=this.getCurves(),te=ne.y,ae=[],ce=[],re=0,be=z.length;re<be;re++){var ke=z[re].getValues(),Pe=ke[1],ze=ke[3],_e=ke[5],$e=ke[7];if(te>=l(Pe,ze,_e,$e)&&te<=f(Pe,ze,_e,$e))for(var Fe=Ae.getMonoCurves(ke),Xe=0,Ze=Fe.length;Xe<Ze;Xe++){var Qe=Fe[Xe],ft=Qe[1],dt=Qe[7];if(ft!==dt&&(te>=ft&&te<=dt||te>=dt&&te<=ft)){var Et=te===ft?Qe[0]:te===dt?Qe[6]:Ae.solveCubic(Qe,1,te,ce,0,1)===1?Ae.getPoint(Qe,ce[0]).x:(Qe[0]+Qe[6])/2;ae.push(Et)}}}ae.length>1&&(ae.sort(function(xt,Te){return xt-Te}),ne.x=(ae[0]+ae[1])/2)}return ne}}});var Ce=s.extend({_class:"PathFlattener",initialize:function(l,f,b,_,E){var A=[],T=[],N=0,$=1/(b||32),F=l._segments,G=F[0],Z;function Y(K,V){var ne=Ae.getValues(K,V,E);A.push(ne),W(ne,K._index,0,1)}function W(K,V,ne,z){if(z-ne>$&&!(_&&Ae.isStraight(K))&&!Ae.isFlatEnough(K,f||.25)){var te=Ae.subdivide(K,.5),ae=(ne+z)/2;W(te[0],V,ne,ae),W(te[1],V,ae,z)}else{var ce=K[6]-K[0],re=K[7]-K[1],be=Math.sqrt(ce*ce+re*re);be>0&&(N+=be,T.push({offset:N,curve:K,index:V,time:z}))}}for(var X=1,U=F.length;X<U;X++)Z=F[X],Y(G,Z),G=Z;l._closed&&Y(Z||G,F[0]),this.curves=A,this.parts=T,this.length=N,this.index=0},_get:function(l){for(var f=this.parts,b=f.length,_,E=this.index;_=E,!(!E||f[--E].offset<l););for(;_<b;_++){var A=f[_];if(A.offset>=l){this.index=_;var T=f[_-1],N=T&&T.index===A.index?T.time:0,$=T?T.offset:0;return{index:A.index,time:N+(A.time-N)*(l-$)/(A.offset-$)}}}return{index:f[b-1].index,time:1}},drawPart:function(l,f,b){for(var _=this._get(f),E=this._get(b),A=_.index,T=E.index;A<=T;A++){var N=Ae.getPart(this.curves[A],A===_.index?_.time:0,A===E.index?E.time:1);A===_.index&&l.moveTo(N[0],N[1]),l.bezierCurveTo.apply(l,N.slice(2))}}},s.each(Ae._evaluateMethods,function(l){this[l+"At"]=function(f){var b=this._get(f);return Ae[l](this.curves[b.index],b.time)}},{})),Re=s.extend({initialize:function(l){for(var f=this.points=[],b=l._segments,_=l._closed,E=0,A,T=b.length;E<T;E++){var N=b[E].point;(!A||!A.equals(N))&&f.push(A=N.clone())}_&&(f.unshift(f[f.length-1]),f.push(f[1])),this.closed=_},fit:function(l){var f=this.points,b=f.length,_=null;return b>0&&(_=[new H(f[0])],b>1&&(this.fitCubic(_,l,0,b-1,f[1].subtract(f[0]),f[b-2].subtract(f[b-1])),this.closed&&(_.shift(),_.pop()))),_},fitCubic:function(l,f,b,_,E,A){var T=this.points;if(_-b===1){var N=T[b],$=T[_],F=N.getDistance($)/3;this.addCurve(l,[N,N.add(E.normalize(F)),$.add(A.normalize(F)),$]);return}for(var G=this.chordLengthParameterize(b,_),Z=Math.max(f,f*f),Y,W=!0,X=0;X<=4;X++){var U=this.generateBezier(b,_,G,E,A),K=this.findMaxError(b,_,U,G);if(K.error<f&&W){this.addCurve(l,U);return}if(Y=K.index,K.error>=Z)break;W=this.reparameterize(b,_,G,U),Z=K.error}var V=T[Y-1].subtract(T[Y+1]);this.fitCubic(l,f,b,Y,E,V),this.fitCubic(l,f,Y,_,V.negate(),A)},addCurve:function(l,f){var b=l[l.length-1];b.setHandleOut(f[1].subtract(f[0])),l.push(new H(f[3],f[2].subtract(f[3])))},generateBezier:function(l,f,b,_,E){for(var A=1e-12,T=Math.abs,N=this.points,$=N[l],F=N[f],G=[[0,0],[0,0]],Z=[0,0],Y=0,W=f-l+1;Y<W;Y++){var X=b[Y],U=1-X,K=3*X*U,V=U*U*U,ne=K*U,z=K*X,te=X*X*X,ae=_.normalize(ne),ce=E.normalize(z),re=N[l+Y].subtract($.multiply(V+ne)).subtract(F.multiply(z+te));G[0][0]+=ae.dot(ae),G[0][1]+=ae.dot(ce),G[1][0]=G[0][1],G[1][1]+=ce.dot(ce),Z[0]+=ae.dot(re),Z[1]+=ce.dot(re)}var be=G[0][0]*G[1][1]-G[1][0]*G[0][1],ke,Pe;if(T(be)>A){var ze=G[0][0]*Z[1]-G[1][0]*Z[0],_e=Z[0]*G[1][1]-Z[1]*G[0][1];ke=_e/be,Pe=ze/be}else{var $e=G[0][0]+G[0][1],Fe=G[1][0]+G[1][1];ke=Pe=T($e)>A?Z[0]/$e:T(Fe)>A?Z[1]/Fe:0}var Xe=F.getDistance($),Ze=A*Xe,Qe,ft;if(ke<Ze||Pe<Ze)ke=Pe=Xe/3;else{var dt=F.subtract($);Qe=_.normalize(ke),ft=E.normalize(Pe),Qe.dot(dt)-ft.dot(dt)>Xe*Xe&&(ke=Pe=Xe/3,Qe=ft=null)}return[$,$.add(Qe||_.normalize(ke)),F.add(ft||E.normalize(Pe)),F]},reparameterize:function(l,f,b,_){for(var E=l;E<=f;E++)b[E-l]=this.findRoot(_,this.points[E],b[E-l]);for(var E=1,A=b.length;E<A;E++)if(b[E]<=b[E-1])return!1;return!0},findRoot:function(l,f,b){for(var _=[],E=[],A=0;A<=2;A++)_[A]=l[A+1].subtract(l[A]).multiply(3);for(var A=0;A<=1;A++)E[A]=_[A+1].subtract(_[A]).multiply(2);var T=this.evaluate(3,l,b),N=this.evaluate(2,_,b),$=this.evaluate(1,E,b),F=T.subtract(f),G=N.dot(N)+F.dot($);return p.isMachineZero(G)?b:b-F.dot(N)/G},evaluate:function(l,f,b){for(var _=f.slice(),E=1;E<=l;E++)for(var A=0;A<=l-E;A++)_[A]=_[A].multiply(1-b).add(_[A+1].multiply(b));return _[0]},chordLengthParameterize:function(l,f){for(var b=[0],_=l+1;_<=f;_++)b[_-l]=b[_-l-1]+this.points[_].getDistance(this.points[_-1]);for(var _=1,E=f-l;_<=E;_++)b[_]/=b[E];return b},findMaxError:function(l,f,b,_){for(var E=Math.floor((f-l+1)/2),A=0,T=l+1;T<f;T++){var N=this.evaluate(3,b,_[T-l]),$=N.subtract(this.points[T]),F=$.x*$.x+$.y*$.y;F>=A&&(A=F,E=T)}return{error:A,index:E}}}),it=S.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(f){this._content="",this._lines=[];var b=f&&s.isPlainObject(f)&&f.x===n&&f.y===n;this._initialize(b&&f,!b&&g.read(arguments))},_equals:function(l){return this._content===l._content},copyContent:function(l){this.setContent(l._content)},getContent:function(){return this._content},setContent:function(l){this._content=""+l,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),nt=it.extend({_class:"PointText",initialize:function(){it.apply(this,arguments)},getPoint:function(){var l=this._matrix.getTranslation();return new v(l.x,l.y,this,"setPoint")},setPoint:function(){var l=g.read(arguments);this.translate(l.subtract(this._matrix.getTranslation()))},_draw:function(l,f,b){if(this._content){this._setStyles(l,f,b);var _=this._lines,E=this._style,A=E.hasFill(),T=E.hasStroke(),N=E.getLeading(),$=l.shadowColor;l.font=E.getFontStyle(),l.textAlign=E.getJustification();for(var F=0,G=_.length;F<G;F++){l.shadowColor=$;var Z=_[F];A&&(l.fillText(Z,0,0),l.shadowColor="rgba(0,0,0,0)"),T&&l.strokeText(Z,0,0),l.translate(0,N)}}},_getBounds:function(l,f){var b=this._style,_=this._lines,E=_.length,A=b.getJustification(),T=b.getLeading(),N=this.getView().getTextWidth(b.getFontStyle(),_),$=0;A!=="left"&&($-=N/(A==="center"?2:1));var F=new x($,E?-.75*T:0,N,E*T);return l?l._transformBounds(F,F):F}}),Ue=s.extend(new function(){var l={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},f={},b={transparent:[0,0,0,0]},_;function E(N){var $=N.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||N.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),F="rgb",G;if($){var Z=$[4]?4:3;G=new Array(Z);for(var Y=0;Y<Z;Y++){var W=$[Y+1];G[Y]=parseInt(W.length==1?W+W:W,16)/255}}else if($=N.match(/^(rgb|hsl)a?\((.*)\)$/)){F=$[1],G=$[2].trim().split(/[,\s]+/g);for(var X=F==="hsl",Y=0,U=Math.min(G.length,4);Y<U;Y++){var K=G[Y],W=parseFloat(K);if(X)if(Y===0){var V=K.match(/([a-z]*)$/)[1];W*={turn:360,rad:180/Math.PI,grad:.9}[V]||1}else Y<3&&(W/=100);else Y<3&&(W/=/%$/.test(K)?100:255);G[Y]=W}}else{var ne=b[N];if(!ne)if(r){_||(_=ve.getContext(1,1,{willReadFrequently:!0}),_.globalCompositeOperation="copy"),_.fillStyle="rgba(0,0,0,0)",_.fillStyle=N,_.fillRect(0,0,1,1);var z=_.getImageData(0,0,1,1).data;ne=b[N]=[z[0]/255,z[1]/255,z[2]/255]}else ne=[0,0,0];G=ne.slice()}return[F,G]}var A=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],T={"rgb-hsb":function(N,$,F){var G=Math.max(N,$,F),Z=Math.min(N,$,F),Y=G-Z,W=Y===0?0:(G==N?($-F)/Y+($<F?6:0):G==$?(F-N)/Y+2:(N-$)/Y+4)*60;return[W,G===0?0:Y/G,G]},"hsb-rgb":function(N,$,F){N=(N/60%6+6)%6;var Z=Math.floor(N),G=N-Z,Z=A[Z],Y=[F,F*(1-$),F*(1-$*G),F*(1-$*(1-G))];return[Y[Z[0]],Y[Z[1]],Y[Z[2]]]},"rgb-hsl":function(N,$,F){var G=Math.max(N,$,F),Z=Math.min(N,$,F),Y=G-Z,W=Y===0,X=W?0:(G==N?($-F)/Y+($<F?6:0):G==$?(F-N)/Y+2:(N-$)/Y+4)*60,U=(G+Z)/2,K=W?0:U<.5?Y/(G+Z):Y/(2-G-Z);return[X,K,U]},"hsl-rgb":function(N,$,F){if(N=(N/360%1+1)%1,$===0)return[F,F,F];for(var G=[N+1/3,N,N-1/3],Z=F<.5?F*(1+$):F+$-F*$,Y=2*F-Z,W=[],X=0;X<3;X++){var U=G[X];U<0&&(U+=1),U>1&&(U-=1),W[X]=6*U<1?Y+(Z-Y)*6*U:2*U<1?Z:3*U<2?Y+(Z-Y)*(2/3-U)*6:Y}return W},"rgb-gray":function(N,$,F){return[N*.2989+$*.587+F*.114]},"gray-rgb":function(N){return[N,N,N]},"gray-hsb":function(N){return[0,0,N]},"gray-hsl":function(N){return[0,0,N]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(l,function(N,$){f[$]=[],s.each(N,function(F,G){var Z=s.capitalize(F),Y=/^(hue|saturation)$/.test(F),W=f[$][G]=$==="gradient"?F==="gradient"?function(X){var U=this._components[0];return X=lt.read(Array.isArray(X)?X:arguments,0,{readNull:!0}),U!==X&&(U&&U._removeOwner(this),X&&X._addOwner(this)),X}:function(){return g.read(arguments,0,{readNull:F==="highlight",clone:!0})}:function(X){return X==null||isNaN(X)?0:+X};this["get"+Z]=function(){return this._type===$||Y&&/^hs[bl]$/.test(this._type)?this._components[G]:this._convert($)[G]},this["set"+Z]=function(X){this._type!==$&&!(Y&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert($),this._properties=l[$],this._type=$),this._components[G]=W.call(this,X),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function N($){var F=arguments,G=this.__read,Z=0,Y,W,X,U;Array.isArray($)&&(F=$,$=F[0]);var K=$!=null&&typeof $;if(K==="string"&&$ in l&&(Y=$,$=F[1],Array.isArray($)?(W=$,X=F[2]):(G&&(Z=1),F=s.slice(F,1),K=typeof $)),!W){if(U=K==="number"?F:K==="object"&&$.length!=null?$:null,U){Y||(Y=U.length>=3?"rgb":"gray");var V=l[Y].length;X=U[V],G&&(Z+=U===arguments?V+(X!=null?1:0):1),U.length>V&&(U=s.slice(U,0,V))}else if(K==="string"){var ne=E($);Y=ne[0],W=ne[1],W.length===4&&(X=W[3],W.length--)}else if(K==="object")if($.constructor===N){if(Y=$._type,W=$._components.slice(),X=$._alpha,Y==="gradient")for(var z=1,te=W.length;z<te;z++){var ae=W[z];ae&&(W[z]=ae.clone())}}else if($.constructor===lt)Y="gradient",U=F;else{Y="hue"in $?"lightness"in $?"hsl":"hsb":"gradient"in $||"stops"in $||"radial"in $?"gradient":"gray"in $?"gray":"rgb";var ce=l[Y],re=f[Y];this._components=W=[];for(var z=0,te=ce.length;z<te;z++){var be=$[ce[z]];be==null&&!z&&Y==="gradient"&&"stops"in $&&(be={stops:$.stops,radial:$.radial}),be=re[z].call(this,be),be!=null&&(W[z]=be)}X=$.alpha}G&&Y&&(Z=1)}if(this._type=Y||"rgb",!W){this._components=W=[];for(var re=f[this._type],z=0,te=re.length;z<te;z++){var be=re[z].call(this,U&&U[z]);be!=null&&(W[z]=be)}}return this._components=W,this._properties=l[this._type],this._alpha=X,G&&(this.__read=Z),this},set:"#initialize",_serialize:function(N,$){var F=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?F:[this._type].concat(F),N,!0,$)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(N){var $;return this._type===N?this._components.slice():($=T[this._type+"-"+N])?$.apply(this,this._components):T["rgb-"+N].apply(this,T[this._type+"-rgb"].apply(this,this._components))},convert:function(N){return new Ue(N,this._convert(N),this._alpha)},getType:function(){return this._type},setType:function(N){this._components=this._convert(N),this._properties=l[N],this._type=N},getComponents:function(){var N=this._components.slice();return this._alpha!=null&&N.push(this._alpha),N},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(N){this._alpha=N==null?null:Math.min(Math.max(N,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(N){var $=s.isPlainValue(N,!0)?Ue.read(arguments):N;return $===this||$&&this._class===$._class&&this._type===$._type&&this.getAlpha()===$.getAlpha()&&s.equals(this._components,$._components)||!1},toString:function(){for(var N=this._properties,$=[],F=this._type==="gradient",G=d.instance,Z=0,Y=N.length;Z<Y;Z++){var W=this._components[Z];W!=null&&$.push(N[Z]+": "+(F?W:G.number(W)))}return this._alpha!=null&&$.push("alpha: "+G.number(this._alpha)),"{ "+$.join(", ")+" }"},toCSS:function(N){var $=this._convert("rgb"),F=N||this._alpha==null?1:this._alpha;function G(Z){return Math.round((Z<0?0:Z>1?1:Z)*255)}return $=[G($[0]),G($[1]),G($[2])],F<1&&$.push(F<0?0:F),N?"#"+((1<<24)+($[0]<<16)+($[1]<<8)+$[2]).toString(16).slice(1):($.length==4?"rgba(":"rgb(")+$.join(",")+")"},toCanvasStyle:function(N,$){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var F=this._components,G=F[0],Z=G._stops,Y=F[1],W=F[2],X=F[3],U=$&&$.inverted(),K;if(U&&(Y=U._transformPoint(Y),W=U._transformPoint(W),X&&(X=U._transformPoint(X))),G._radial){var V=W.getDistance(Y);if(X){var ne=X.subtract(Y);ne.getLength()>V&&(X=Y.add(ne.normalize(V-.1)))}var z=X||Y;K=N.createRadialGradient(z.x,z.y,0,Y.x,Y.y,V)}else K=N.createLinearGradient(Y.x,Y.y,W.x,W.y);for(var te=0,ae=Z.length;te<ae;te++){var ce=Z[te],re=ce._offset;K.addColorStop(re??te/(ae-1),ce._color.toCanvasStyle())}return this._canvasStyle=K},transform:function(N){if(this._type==="gradient"){for(var $=this._components,F=1,G=$.length;F<G;F++){var Z=$[F];N._transformPoint(Z,Z,!0)}this._changed()}},statics:{_types:l,random:function(){var N=Math.random;return new Ue(N(),N(),N())},_setOwner:function(N,$,F){return N&&(N._owner&&$&&N._owner!==$&&(N=N.clone()),!N._owner^!$&&(N._owner=$||null,N._setter=F||null)),N}}})},new function(){var l={add:function(f,b){return f+b},subtract:function(f,b){return f-b},multiply:function(f,b){return f*b},divide:function(f,b){return f/b}};return s.each(l,function(f,b){this[b]=function(_){_=Ue.read(arguments);for(var E=this._type,A=this._components,T=_._convert(E),N=0,$=A.length;N<$;N++)T[N]=f(A[N],T[N]);return new Ue(E,T,this._alpha!=null?f(this._alpha,_.getAlpha()):null)}},{})}),lt=s.extend({_class:"Gradient",initialize:function(f,b){this._id=m.get(),f&&s.isPlainObject(f)&&(this.set(f),f=b=null),this._stops==null&&this.setStops(f||["white","black"]),this._radial==null&&this.setRadial(typeof b=="string"&&b==="radial"||b||!1)},_serialize:function(l,f){return f.add(this,function(){return s.serialize([this._stops,this._radial],l,!0,f)})},_changed:function(){for(var l=0,f=this._owners&&this._owners.length;l<f;l++)this._owners[l]._changed()},_addOwner:function(l){this._owners||(this._owners=[]),this._owners.push(l)},_removeOwner:function(l){var f=this._owners?this._owners.indexOf(l):-1;f!=-1&&(this._owners.splice(f,1),this._owners.length||(this._owners=n))},clone:function(){for(var l=[],f=0,b=this._stops.length;f<b;f++)l[f]=this._stops[f].clone();return new lt(l,this._radial)},getStops:function(){return this._stops},setStops:function(l){if(l.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var f=this._stops;if(f)for(var b=0,_=f.length;b<_;b++)f[b]._owner=n;f=this._stops=de.readList(l,0,{clone:!0});for(var b=0,_=f.length;b<_;b++)f[b]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(l){this._radial=l,this._changed()},equals:function(l){if(l===this)return!0;if(l&&this._class===l._class){var f=this._stops,b=l._stops,_=f.length;if(_===b.length){for(var E=0;E<_;E++)if(!f[E].equals(b[E]))return!1;return!0}}return!1}}),de=s.extend({_class:"GradientStop",initialize:function(f,b){var _=f,E=b;typeof f=="object"&&b===n&&(Array.isArray(f)&&typeof f[0]!="number"?(_=f[0],E=f[1]):("color"in f||"offset"in f||"rampPoint"in f)&&(_=f.color,E=f.offset||f.rampPoint||0)),this.setColor(_),this.setOffset(E)},clone:function(){return new de(this._color.clone(),this._offset)},_serialize:function(l,f){var b=this._color,_=this._offset;return s.serialize(_==null?[b]:[b,_],l,!0,f)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(l){this._offset=l,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ue._setOwner(this._color,null),this._color=Ue._setOwner(Ue.read(arguments,0),this,"setColor"),this._changed()},equals:function(l){return l===this||l&&this._class===l._class&&this._color.equals(l._color)&&this._offset==l._offset||!1}}),oe=s.extend(new function(){var l={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},f=s.set({},l,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),b=s.set({},f,{fillColor:new Ue}),_={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},E={beans:!0},A={_class:"Style",beans:!0,initialize:function(N,$,F){this._values={},this._owner=$,this._project=$&&$._project||F||De.project,this._defaults=!$||$ instanceof B?f:$ instanceof it?b:l,N&&this.set(N)}};return s.each(f,function(T,N){var $=/Color$/.test(N),F=N==="shadowOffset",G=s.capitalize(N),Z=_[N],Y="set"+G,W="get"+G;A[Y]=function(X){var U=this._owner,K=U&&U._children,V=K&&K.length>0&&!(U instanceof Le);if(V)for(var ne=0,z=K.length;ne<z;ne++)K[ne]._style[Y](X);if((N==="selectedColor"||!V)&&N in this._defaults){var te=this._values[N];te!==X&&($&&(te&&(Ue._setOwner(te,null),te._canvasStyle=null),X&&X.constructor===Ue&&(X=Ue._setOwner(X,U,V&&Y))),this._values[N]=X,U&&U._changed(Z||129))}},A[W]=function(X){var U=this._owner,K=U&&U._children,V=K&&K.length>0&&!(U instanceof Le),ne;if(V&&!X)for(var z=0,te=K.length;z<te;z++){var ae=K[z]._style[W]();if(!z)ne=ae;else if(!s.equals(ne,ae))return n}else if(N in this._defaults){var ne=this._values[N];if(ne===n)ne=this._defaults[N],ne&&ne.clone&&(ne=ne.clone());else{var ce=$?Ue:F?g:null;ce&&!(ne&&ne.constructor===ce)&&(this._values[N]=ne=ce.read([ne],0,{readNull:!0,clone:!0}))}}return ne&&$&&(ne=Ue._setOwner(ne,U,V&&Y)),ne},E[W]=function(X){return this._style[W](X)},E[Y]=function(X){this._style[Y](X)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(T,N){var $="get"+N,F="set"+N;A[$]=E[$]="#get"+T,A[F]=E[F]="#set"+T}),S.inject(E),A},{set:function(l){var f=l instanceof oe,b=f?l._values:l;if(b){for(var _ in b)if(_ in this._defaults){var E=b[_];this[_]=E&&f&&E.clone?E.clone():E}}},equals:function(l){function f(b,_,E){var A=b._values,T=_._values,N=_._defaults;for(var $ in A){var F=A[$],G=T[$];if(!(E&&$ in T)&&!s.equals(F,G===n?N[$]:G))return!1}return!0}return l===this||l&&this._class===l._class&&f(this,l)&&f(l,this,!0)||!1},_dispose:function(){var l;l=this.getFillColor(),l&&(l._canvasStyle=null),l=this.getStrokeColor(),l&&(l._canvasStyle=null),l=this.getShadowColor(),l&&(l._canvasStyle=null)},hasFill:function(){var l=this.getFillColor();return!!l&&l.alpha>0},hasStroke:function(){var l=this.getStrokeColor();return!!l&&l.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var l=this.getShadowColor();return!!l&&l.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var l=this.getFontSize();return this.getFontWeight()+" "+l+(/[a-z]/i.test(l+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function l(){var f=l.base.call(this),b=this.getFontSize();return/pt|em|%|px/.test(b)&&(b=this.getView().getPixelSize(b)),f??b*1.2}}),We=new function(){function l(f,b,_,E){for(var A=["","webkit","moz","Moz","ms","o"],T=b[0].toUpperCase()+b.substring(1),N=0;N<6;N++){var $=A[N],F=$?$+T:b;if(F in f){if(_)f[F]=E;else return f[F];break}}}return{getStyles:function(f){var b=f&&f.nodeType!==9?f.ownerDocument:f,_=b&&b.defaultView;return _&&_.getComputedStyle(f,"")},getBounds:function(f,b){var _=f.ownerDocument,E=_.body,A=_.documentElement,T;try{T=f.getBoundingClientRect()}catch{T={left:0,top:0,width:0,height:0}}var N=T.left-(A.clientLeft||E.clientLeft||0),$=T.top-(A.clientTop||E.clientTop||0);if(!b){var F=_.defaultView;N+=F.pageXOffset||A.scrollLeft||E.scrollLeft,$+=F.pageYOffset||A.scrollTop||E.scrollTop}return new x(N,$,T.width,T.height)},getViewportBounds:function(f){var b=f.ownerDocument,_=b.defaultView,E=b.documentElement;return new x(0,0,_.innerWidth||E.clientWidth,_.innerHeight||E.clientHeight)},getOffset:function(f,b){return We.getBounds(f,b).getPoint()},getSize:function(f){return We.getBounds(f,!0).getSize()},isInvisible:function(f){return We.getSize(f).equals(new w(0,0))},isInView:function(f){return!We.isInvisible(f)&&We.getViewportBounds(f).intersects(We.getBounds(f,!0))},isInserted:function(f){return i.body.contains(f)},getPrefixed:function(f,b){return f&&l(f,b)},setPrefixed:function(f,b,_){if(typeof b=="object")for(var E in b)l(f,E,!0,b[E]);else l(f,b,!0,_)}}},Ne={add:function(l,f){if(l)for(var b in f)for(var _=f[b],E=b.split(/[\s,]+/g),A=0,T=E.length;A<T;A++){var N=E[A],$=l===i&&(N==="touchstart"||N==="touchmove")?{passive:!1}:!1;l.addEventListener(N,_,$)}},remove:function(l,f){if(l)for(var b in f)for(var _=f[b],E=b.split(/[\s,]+/g),A=0,T=E.length;A<T;A++)l.removeEventListener(E[A],_,!1)},getPoint:function(l){var f=l.targetTouches?l.targetTouches.length?l.targetTouches[0]:l.changedTouches[0]:l;return new g(f.pageX||f.clientX+i.documentElement.scrollLeft,f.pageY||f.clientY+i.documentElement.scrollTop)},getTarget:function(l){return l.target||l.srcElement},getRelatedTarget:function(l){return l.relatedTarget||l.toElement},getOffset:function(l,f){return Ne.getPoint(l).subtract(We.getOffset(f||Ne.getTarget(l)))}};Ne.requestAnimationFrame=new function(){var l=We.getPrefixed(r,"requestAnimationFrame"),f=!1,b=[],_;function E(){var A=b;b=[];for(var T=0,N=A.length;T<N;T++)A[T]();f=l&&b.length,f&&l(E)}return function(A){b.push(A),l?f||(l(E),f=!0):_||(_=setInterval(E,1e3/60))}};var ht=s.extend(a,{_class:"View",initialize:function l(f,b){function _(Z){return b[Z]||parseInt(b.getAttribute(Z),10)}function E(){var Z=We.getSize(b);return Z.isNaN()||Z.isZero()?new w(_("width"),_("height")):Z}var A;if(r&&b){this._id=b.getAttribute("id"),this._id==null&&b.setAttribute("id",this._id="paper-view-"+l._id++),Ne.add(b,this._viewEvents);var T="none";if(We.setPrefixed(b.style,{userDrag:T,userSelect:T,touchCallout:T,contentZooming:T,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(b,"resize")){var N=this;Ne.add(r,this._windowEvents={resize:function(){N.setViewSize(E())}})}if(A=E(),o.hasAttribute(b,"stats")&&typeof Stats<"u"){this._stats=new Stats;var $=this._stats.domElement,F=$.style,G=We.getOffset(b);F.position="absolute",F.left=G.x+"px",F.top=G.y+"px",i.body.appendChild($)}}else A=new w(b),b=null;this._project=f,this._scope=f._scope,this._element=b,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(A.width,A.height),this._viewSize=A,l._views.push(this),l._viewsById[this._id]=this,(this._matrix=new P)._owner=this,l._focused||(l._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!De.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;ht._focused===this&&(ht._focused=null),ht._views.splice(ht._views.indexOf(this),1),delete ht._viewsById[this._id];var l=this._project;return l._view===this&&(l._view=null),Ne.remove(this._element,this._viewEvents),Ne.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(S._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(l){this[l]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(l){this._autoUpdate=l,l&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var l=this;Ne.requestAnimationFrame(function(){if(l._requested=!1,l._animate){l.requestUpdate();var f=l._element;(!We.getPrefixed(i,"hidden")||o.getAttribute(f,"keepalive")==="true")&&We.isInView(f)&&l._handleFrame()}l._autoUpdate&&l.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){De=this._scope;var l=Date.now()/1e3,f=this._last?l-this._last:0;this._last=l,this.emit("frame",new s({delta:f,time:this._time+=f,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(l,f){var b=this._frameItems;f?(b[l._id]={item:l,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete b[l._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(l){for(var f in this._frameItems){var b=this._frameItems[f];b.item.emit("frame",new s(l,{time:b.time+=l.delta,count:b.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var l=this._viewSize;return new C(l.width,l.height,this,"setViewSize")},setViewSize:function(){var l=w.read(arguments),f=l.subtract(this._viewSize);f.isZero()||(this._setElementSize(l.width,l.height),this._viewSize.set(l),this._changed(),this.emit("resize",{size:l,delta:f}),this._autoUpdate&&this.update())},_setElementSize:function(l,f){var b=this._element;b&&(b.width!==l&&(b.width=l),b.height!==f&&(b.height=f))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return We.isInView(this._element)},isInserted:function(){return We.isInserted(this._element)},getPixelSize:function(l){var f=this._element,b;if(f){var _=f.parentNode,E=i.createElement("div");E.style.fontSize=l,_.appendChild(E),b=parseFloat(We.getStyles(E).fontSize),_.removeChild(E)}else b=parseFloat(b);return b},getTextWidth:function(l,f){return 0}},s.each(["rotate","scale","shear","skew"],function(l){var f=l==="rotate";this[l]=function(){var b=arguments,_=(f?s:g).read(b),E=g.read(b,0,{readNull:!0});return this.transform(new P()[l](_,E||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var l=new P;return this.transform(l.translate.apply(l,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var l=g.read(arguments);this.translate(this.getCenter().subtract(l))},getZoom:function(){var l=this._decompose().scaling;return(l.x+l.y)/2},setZoom:function(l){this.transform(new P().scale(l/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(l){var f=this.getRotation();f!=null&&l!=null&&this.rotate(l-f)},getScaling:function(){var l=this._decompose().scaling;return new v(l.x,l.y,this,"setScaling")},setScaling:function(){var l=this.getScaling(),f=g.read(arguments,0,{clone:!0,readNull:!0});l&&f&&this.scale(f.x/l.x,f.y/l.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},transform:function(l){this._matrix.append(l)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(l){return this.viewToProject(Ne.getOffset(l,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(l,f){i&&typeof f=="string"&&(f=i.getElementById(f));var b=r?jt:ht;return new b(l,f)}}},new function(){if(!r)return;var l,f,b=!1,_=!1;function E(_e){var $e=Ne.getTarget(_e);return $e.getAttribute&&ht._viewsById[$e.getAttribute("id")]}function A(){var _e=ht._focused;if(!_e||!_e.isVisible()){for(var $e=0,Fe=ht._views.length;$e<Fe;$e++)if((_e=ht._views[$e]).isVisible()){ht._focused=f=_e;break}}}function T(_e,$e,Fe){_e._handleMouseEvent("mousemove",$e,Fe)}var N=r.navigator,$,F,G;N.pointerEnabled||N.msPointerEnabled?($="pointerdown MSPointerDown",F="pointermove MSPointerMove",G="pointerup pointercancel MSPointerUp MSPointerCancel"):($="touchstart",F="touchmove",G="touchend touchcancel","ontouchstart"in r&&N.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||($+=" mousedown",F+=" mousemove",G+=" mouseup"));var Z={},Y={mouseout:function(_e){var $e=ht._focused,Fe=Ne.getRelatedTarget(_e);if($e&&(!Fe||Fe.nodeName==="HTML")){var Xe=Ne.getOffset(_e,$e._element),Ze=Xe.x,Qe=Math.abs,ft=Qe(Ze),dt=1<<25,Et=ft-dt;Xe.x=Qe(Et)<ft?Et*(Ze<0?-1:1):Ze,T($e,_e,$e.viewToProject(Xe))}},scroll:A};Z[$]=function(_e){var $e=ht._focused=E(_e);b||(b=!0,$e._handleMouseEvent("mousedown",_e))},Y[F]=function(_e){var $e=ht._focused;if(!_){var Fe=E(_e);Fe?$e!==Fe&&($e&&T($e,_e),l||(l=$e),$e=ht._focused=f=Fe):f&&f===$e&&(l&&!l.isInserted()&&(l=null),$e=ht._focused=l,l=null,A())}$e&&T($e,_e)},Y[$]=function(){_=!0},Y[G]=function(_e){var $e=ht._focused;$e&&b&&$e._handleMouseEvent("mouseup",_e),_=b=!1},Ne.add(i,Y),Ne.add(r,{load:A});var W=!1,X=!1,U={doubleclick:"click",mousedrag:"mousemove"},K=!1,V,ne,z,te,ae,ce,re,be;function ke(_e,$e,Fe,Xe,Ze,Qe,ft){var dt=!1,Et;function xt(Te,Ke){if(Te.responds(Ke)){if(Et||(Et=new se(Ke,Xe,Ze,$e||Te,Qe?Ze.subtract(Qe):null)),Te.emit(Ke,Et)&&(W=!0,Et.prevented&&(X=!0),Et.stopped))return dt=!0}else{var mt=U[Ke];if(mt)return xt(Te,mt)}}for(;_e&&_e!==ft&&!xt(_e,Fe);)_e=_e._parent;return dt}function Pe(_e,$e,Fe,Xe,Ze,Qe){return _e._project.removeOn(Fe),X=W=!1,ae&&ke(ae,null,Fe,Xe,Ze,Qe)||$e&&$e!==ae&&!$e.isDescendant(ae)&&ke($e,null,Fe==="mousedrag"?"mousemove":Fe,Xe,Ze,Qe,ae)||ke(_e,ae||$e||_e,Fe,Xe,Ze,Qe)}var ze={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Z,_handleMouseEvent:function(_e,$e,Fe){var Xe=this._itemEvents,Ze=Xe.native[_e],Qe=_e==="mousemove",ft=this._scope.tool,dt=this;function Et(Bt){return Xe.virtual[Bt]||dt.responds(Bt)||ft&&ft.responds(Bt)}Qe&&b&&Et("mousedrag")&&(_e="mousedrag"),Fe||(Fe=this.getEventPoint($e));var xt=this.getBounds().contains(Fe),Te=Ze&&xt&&dt._project.hitTest(Fe,{tolerance:0,fill:!0,stroke:!0}),Ke=Te&&Te.item||null,mt=!1,Nt={};if(Nt[_e.substr(5)]=!0,Ze&&Ke!==te&&(te&&ke(te,null,"mouseleave",$e,Fe),Ke&&ke(Ke,null,"mouseenter",$e,Fe),te=Ke),K^xt&&(ke(this,null,xt?"mouseenter":"mouseleave",$e,Fe),mt=!0),(xt||Nt.drag)&&!Fe.equals(ne)&&(Pe(this,Ke,Qe?_e:"mousemove",$e,Fe,ne),mt=!0),K=xt,Nt.down&&xt||Nt.up&&V){if(Pe(this,Ke,_e,$e,Fe,V),Nt.down){if(be=Ke===ce&&Date.now()-re<300,z=ce=Ke,!X&&Ke){for(var kt=Ke;kt&&!kt.responds("mousedrag");)kt=kt._parent;kt&&(ae=Ke)}V=Fe}else Nt.up&&(!X&&Ke===z&&(re=Date.now(),Pe(this,Ke,be?"doubleclick":"click",$e,Fe,V),be=!1),z=ae=null);K=!1,mt=!0}ne=Fe,mt&&ft&&(W=ft._handleMouseEvent(_e,$e,Fe,Nt)||W),$e.cancelable!==!1&&(W&&!Nt.move||Nt.down&&Et("mouseup"))&&$e.preventDefault()},_handleKeyEvent:function(_e,$e,Fe,Xe){var Ze=this._scope,Qe=Ze.tool,ft;function dt(Et){Et.responds(_e)&&(De=Ze,Et.emit(_e,ft=ft||new q(_e,$e,Fe,Xe)))}this.isVisible()&&(dt(this),Qe&&Qe.responds(_e)&&dt(Qe))},_countItemEvent:function(_e,$e){var Fe=this._itemEvents,Xe=Fe.native,Ze=Fe.virtual;for(var Qe in ze)Xe[Qe]=(Xe[Qe]||0)+(ze[Qe][_e]||0)*$e;Ze[_e]=(Ze[_e]||0)+$e},statics:{updateFocus:A,_resetState:function(){b=_=W=K=!1,l=f=V=ne=z=te=ae=ce=re=be=null}}}}),jt=ht.extend({_class:"CanvasView",initialize:function(f,b){if(!(b instanceof r.HTMLCanvasElement)){var _=w.read(arguments,1);if(_.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));b=ve.getCanvas(_)}var E=this._context=b.getContext("2d");if(E.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(b,"hidpi"))){var A=r.devicePixelRatio||1,T=We.getPrefixed(E,"backingStorePixelRatio")||1;this._pixelRatio=A/T}ht.call(this,f,b),this._needsUpdate=!0},remove:function l(){return this._context.restore(),l.base.call(this)},_setElementSize:function l(f,b){var _=this._pixelRatio;if(l.base.call(this,f*_,b*_),_!==1){var E=this._element,A=this._context;if(!o.hasAttribute(E,"resize")){var T=E.style;T.width=f+"px",T.height=b+"px"}A.restore(),A.save(),A.scale(_,_)}},getContext:function(){return this._context},getPixelSize:function l(f){var b=De.agent,_;if(b&&b.firefox)_=l.base.call(this,f);else{var E=this._context,A=E.font;E.font=f+" serif",_=parseFloat(E.font),E.font=A}return _},getTextWidth:function(l,f){var b=this._context,_=b.font,E=0;b.font=l;for(var A=0,T=f.length;A<T;A++)E=Math.max(E,b.measureText(f[A]).width);return b.font=_,E},update:function(){if(!this._needsUpdate)return!1;var l=this._project,f=this._context,b=this._viewSize;return f.clearRect(0,0,b.width+1,b.height+1),l&&l.draw(f,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ct=s.extend({_class:"Event",initialize:function(f){this.event=f,this.type=f&&f.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Ye.modifiers}}),q=Ct.extend({_class:"KeyEvent",initialize:function(f,b,_,E){this.type=f,this.event=b,this.key=_,this.character=E},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Ye=new function(){var l={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},f={tab:"	",space:" ",enter:"\r"},b={},_={},E,A,T=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var F=De&&De.agent;return F&&F.mac?this.meta:this.control}}});function N(F){var G=F.key||F.keyIdentifier;return G=/^U\+/.test(G)?String.fromCharCode(parseInt(G.substr(2),16)):/^Arrow[A-Z]/.test(G)?G.substr(5):G==="Unidentified"||G===n?String.fromCharCode(F.keyCode):G,l[G]||(G.length>1?s.hyphenate(G):G.toLowerCase())}function $(F,G,Z,Y){var W=ht._focused,X;if(b[G]=F,F?_[G]=Z:delete _[G],G.length>1&&(X=s.camelize(G))in T){T[X]=F;var U=De&&De.agent;if(X==="meta"&&U&&U.mac)if(F)E={};else{for(var K in E)K in _&&$(!1,K,E[K],Y);E=null}}else F&&E&&(E[G]=Z);W&&W._handleKeyEvent(F?"keydown":"keyup",Y,G,Z)}return Ne.add(i,{keydown:function(F){var G=N(F),Z=De&&De.agent;G.length>1||Z&&Z.chrome&&(F.altKey||Z.mac&&F.metaKey||!Z.mac&&F.ctrlKey)?$(!0,G,f[G]||(G.length>1?"":G),F):A=G},keypress:function(F){if(A){var G=N(F),Z=F.charCode,Y=Z>=32?String.fromCharCode(Z):G.length>1?"":G;G!==A&&(G=Y.toLowerCase()),$(!0,G,Y,F),A=null}},keyup:function(F){var G=N(F);G in _&&$(!1,G,_[G],F)}}),Ne.add(r,{blur:function(F){for(var G in _)$(!1,G,_[G],F)}}),{modifiers:T,isDown:function(F){return!!b[F]}}},se=Ct.extend({_class:"MouseEvent",initialize:function(f,b,_,E,A){this.type=f,this.event=b,this.point=_,this.target=E,this.delta=A},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),L=Ct.extend({_class:"ToolEvent",_item:null,initialize:function(f,b,_){this.tool=f,this.type=b,this.event=_},_choosePoint:function(l,f){return l||(f?f.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(l){this._point=l},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(l){this._lastPoint=l},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(l){this._downPoint=l},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(l){this._middlePoint=l},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(l){this._delta=l},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(l){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=l},getItem:function(){if(!this._item){var l=this.tool._scope.project.hitTest(this.getPoint());if(l){for(var f=l.item,b=f._parent;/^(Group|CompoundPath)$/.test(b._class);)f=b,b=b._parent;this._item=f}}return this._item},setItem:function(l){this._item=l},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),I=c.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(f){c.call(this),this._moveCount=-1,this._downCount=-1,this.set(f)},getMinDistance:function(){return this._minDistance},setMinDistance:function(l){this._minDistance=l,l!=null&&this._maxDistance!=null&&l>this._maxDistance&&(this._maxDistance=l)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(l){this._maxDistance=l,this._minDistance!=null&&l!=null&&l<this._minDistance&&(this._minDistance=l)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(l){this._minDistance=this._maxDistance=l},_handleMouseEvent:function(l,f,b,_){De=this._scope,_.drag&&!this.responds(l)&&(l="mousemove");var E=_.move||_.drag,A=this.responds(l),T=!1,N=this;function $(G,Z){var Y=b,W=E?N._point:N._downPoint||Y;if(E){if(N._moveCount>=0&&Y.equals(W))return!1;if(W&&(G!=null||Z!=null)){var X=Y.subtract(W),U=X.getLength();if(U<(G||0))return!1;Z&&(Y=W.add(X.normalize(Math.min(U,Z))))}N._moveCount++}return N._point=Y,N._lastPoint=W||Y,_.down&&(N._moveCount=-1,N._downPoint=Y,N._downCount++),!0}function F(){A&&(T=N.emit(l,new L(N,l,f))||T)}if(_.down)$(),F();else if(_.up)$(null,this._maxDistance),F();else if(A)for(;$(this._minDistance,this._maxDistance);)F();return T}}),Q=s.extend(a,{_class:"Tween",statics:{easings:new s({linear:function(l){return l},easeInQuad:function(l){return l*l},easeOutQuad:function(l){return l*(2-l)},easeInOutQuad:function(l){return l<.5?2*l*l:-1+2*(2-l)*l},easeInCubic:function(l){return l*l*l},easeOutCubic:function(l){return--l*l*l+1},easeInOutCubic:function(l){return l<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1},easeInQuart:function(l){return l*l*l*l},easeOutQuart:function(l){return 1- --l*l*l*l},easeInOutQuart:function(l){return l<.5?8*l*l*l*l:1-8*--l*l*l*l},easeInQuint:function(l){return l*l*l*l*l},easeOutQuint:function(l){return 1+--l*l*l*l*l},easeInOutQuint:function(l){return l<.5?16*l*l*l*l*l:1+16*--l*l*l*l*l}})},initialize:function l(f,b,_,E,A,T){this.object=f;var N=typeof A,$=N==="function";this.type=$?N:N==="string"?A:"linear",this.easing=$?A:l.easings[this.type],this.duration=E,this.running=!1,this._then=null,this._startTime=null;var F=b||_;this._keys=F?Object.keys(F):[],this._parsedKeys=this._parseKeys(this._keys),this._from=F&&this._getState(b),this._to=F&&this._getState(_),T!==!1&&this.start()},then:function(l){return this._then=l,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(l){if(this.running){l>=1&&(l=1,this.running=!1);for(var f=this.easing(l),b=this._keys,_=function(G){return typeof G=="function"?G(f,l):G},E=0,A=b&&b.length;E<A;E++){var T=b[E],N=_(this._from[T]),$=_(this._to[T]),F=N&&$&&N.__add&&$.__add?$.__subtract(N).__multiply(f).__add(N):($-N)*f+N;this._setProperty(this._parsedKeys[T],F)}this.responds("update")&&this.emit("update",new s({progress:l,factor:f})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(l){var f=this._startTime,b=f?(l-f)/this.duration:0;f||(this._startTime=l),this.update(b)},_getState:function(l){for(var f=this._keys,b={},_=0,E=f.length;_<E;_++){var A=f[_],T=this._parsedKeys[A],N=this._getProperty(T),$;if(l){var F=this._resolveValue(N,l[A]);this._setProperty(T,F),$=this._getProperty(T),$=$&&$.clone?$.clone():$,this._setProperty(T,N)}else $=N&&N.clone?N.clone():N;b[A]=$}return b},_resolveValue:function(l,f){if(f){if(Array.isArray(f)&&f.length===2){var b=f[0];return b&&b.match&&b.match(/^[+\-\*\/]=/)?this._calculate(l,b[0],f[1]):f}else if(typeof f=="string"){var _=f.match(/^[+\-*/]=(.*)/);if(_){var E=JSON.parse(_[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(l,f[0],E)}}}return f},_calculate:function(l,f,b){return De.PaperScript.calculateBinary(l,f,b)},_parseKeys:function(l){for(var f={},b=0,_=l.length;b<_;b++){var E=l[b],A=E.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");f[E]=A.split("/")}return f},_getProperty:function(l,f){for(var b=this.object,_=0,E=l.length-(f||0);_<E&&b;_++)b=b[l[_]];return b},_setProperty:function(l,f){var b=this._getProperty(l,1);b&&(b[l[l.length-1]]=f)}}),he={request:function(l){var f=new t.XMLHttpRequest;return f.open((l.method||"get").toUpperCase(),l.url,s.pick(l.async,!0)),l.mimeType&&f.overrideMimeType(l.mimeType),f.onload=function(){var b=f.status;b===0||b===200?l.onLoad&&l.onLoad.call(f,f.responseText):f.onerror()},f.onerror=function(){var b=f.status,_='Could not load "'+l.url+'" (Status: '+b+")";if(l.onError)l.onError(_,b);else throw new Error(_)},f.send(null)}},ve=s.exports.CanvasProvider={canvases:[],getCanvas:function(l,f,b){if(!r)return null;var _,E=!0;typeof l=="object"&&(f=l.height,l=l.width),this.canvases.length?_=this.canvases.pop():(_=i.createElement("canvas"),E=!1);var A=_.getContext("2d",b||{});if(!A)throw new Error("Canvas "+_+" is unable to provide a 2D context.");return _.width===l&&_.height===f?E&&A.clearRect(0,0,l+1,f+1):(_.width=l,_.height=f),A.save(),_},getContext:function(l,f,b){var _=this.getCanvas(l,f,b);return _?_.getContext("2d",b||{}):null},release:function(l){var f=l&&l.canvas?l.canvas:l;f&&f.getContext&&(f.getContext("2d").restore(),this.canvases.push(f))}},me=new function(){var l=Math.min,f=Math.max,b=Math.abs,_,E,A,T,N,$,F,G,Z,Y,W;function X(ae,ce,re){return .2989*ae+.587*ce+.114*re}function U(ae,ce,re,Pe){var ke=Pe-X(ae,ce,re);Z=ae+ke,Y=ce+ke,W=re+ke;var Pe=X(Z,Y,W),ze=l(Z,Y,W),_e=f(Z,Y,W);if(ze<0){var $e=Pe-ze;Z=Pe+(Z-Pe)*Pe/$e,Y=Pe+(Y-Pe)*Pe/$e,W=Pe+(W-Pe)*Pe/$e}if(_e>255){var Fe=255-Pe,Xe=_e-Pe;Z=Pe+(Z-Pe)*Fe/Xe,Y=Pe+(Y-Pe)*Fe/Xe,W=Pe+(W-Pe)*Fe/Xe}}function K(ae,ce,re){return f(ae,ce,re)-l(ae,ce,re)}function V(ae,ce,re,be){var ke=[ae,ce,re],Pe=f(ae,ce,re),ze=l(ae,ce,re),_e;ze=ze===ae?0:ze===ce?1:2,Pe=Pe===ae?0:Pe===ce?1:2,_e=l(ze,Pe)===0?f(ze,Pe)===1?2:1:0,ke[Pe]>ke[ze]?(ke[_e]=(ke[_e]-ke[ze])*be/(ke[Pe]-ke[ze]),ke[Pe]=be):ke[_e]=ke[Pe]=0,ke[ze]=0,Z=ke[0],Y=ke[1],W=ke[2]}var ne={multiply:function(){Z=N*_/255,Y=$*E/255,W=F*A/255},screen:function(){Z=N+_-N*_/255,Y=$+E-$*E/255,W=F+A-F*A/255},overlay:function(){Z=N<128?2*N*_/255:255-2*(255-N)*(255-_)/255,Y=$<128?2*$*E/255:255-2*(255-$)*(255-E)/255,W=F<128?2*F*A/255:255-2*(255-F)*(255-A)/255},"soft-light":function(){var ae=_*N/255;Z=ae+N*(255-(255-N)*(255-_)/255-ae)/255,ae=E*$/255,Y=ae+$*(255-(255-$)*(255-E)/255-ae)/255,ae=A*F/255,W=ae+F*(255-(255-F)*(255-A)/255-ae)/255},"hard-light":function(){Z=_<128?2*_*N/255:255-2*(255-_)*(255-N)/255,Y=E<128?2*E*$/255:255-2*(255-E)*(255-$)/255,W=A<128?2*A*F/255:255-2*(255-A)*(255-F)/255},"color-dodge":function(){Z=N===0?0:_===255?255:l(255,255*N/(255-_)),Y=$===0?0:E===255?255:l(255,255*$/(255-E)),W=F===0?0:A===255?255:l(255,255*F/(255-A))},"color-burn":function(){Z=N===255?255:_===0?0:f(0,255-(255-N)*255/_),Y=$===255?255:E===0?0:f(0,255-(255-$)*255/E),W=F===255?255:A===0?0:f(0,255-(255-F)*255/A)},darken:function(){Z=N<_?N:_,Y=$<E?$:E,W=F<A?F:A},lighten:function(){Z=N>_?N:_,Y=$>E?$:E,W=F>A?F:A},difference:function(){Z=N-_,Z<0&&(Z=-Z),Y=$-E,Y<0&&(Y=-Y),W=F-A,W<0&&(W=-W)},exclusion:function(){Z=N+_*(255-N-N)/255,Y=$+E*(255-$-$)/255,W=F+A*(255-F-F)/255},hue:function(){V(_,E,A,K(N,$,F)),U(Z,Y,W,X(N,$,F))},saturation:function(){V(N,$,F,K(_,E,A)),U(Z,Y,W,X(N,$,F))},luminosity:function(){U(N,$,F,X(_,E,A))},color:function(){U(_,E,A,X(N,$,F))},add:function(){Z=l(N+_,255),Y=l($+E,255),W=l(F+A,255)},subtract:function(){Z=f(N-_,0),Y=f($-E,0),W=f(F-A,0)},average:function(){Z=(N+_)/2,Y=($+E)/2,W=(F+A)/2},negation:function(){Z=255-b(255-_-N),Y=255-b(255-E-$),W=255-b(255-A-F)}},z=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(ae){this[ae]=!0},{}),te=ve.getContext(1,1,{willReadFrequently:!0});te&&(s.each(ne,function(ae,ce){var re=ce==="darken",be=!1;te.save();try{te.fillStyle=re?"#300":"#a00",te.fillRect(0,0,1,1),te.globalCompositeOperation=ce,te.globalCompositeOperation===ce&&(te.fillStyle=re?"#a00":"#300",te.fillRect(0,0,1,1),be=te.getImageData(0,0,1,1).data[0]!==re?170:51)}catch{}te.restore(),z[ce]=be}),ve.release(te)),this.process=function(ae,ce,re,be,ke){var Pe=ce.canvas,ze=ae==="normal";if(ze||z[ae])re.save(),re.setTransform(1,0,0,1,0,0),re.globalAlpha=be,ze||(re.globalCompositeOperation=ae),re.drawImage(Pe,ke.x,ke.y),re.restore();else{var _e=ne[ae];if(!_e)return;for(var $e=re.getImageData(ke.x,ke.y,Pe.width,Pe.height),Fe=$e.data,Xe=ce.getImageData(0,0,Pe.width,Pe.height).data,Ze=0,Qe=Fe.length;Ze<Qe;Ze+=4){_=Xe[Ze],N=Fe[Ze],E=Xe[Ze+1],$=Fe[Ze+1],A=Xe[Ze+2],F=Fe[Ze+2],T=Xe[Ze+3],G=Fe[Ze+3],_e();var ft=T*be/255,dt=1-ft;Fe[Ze]=ft*Z+dt*N,Fe[Ze+1]=ft*Y+dt*$,Fe[Ze+2]=ft*W+dt*F,Fe[Ze+3]=T*be+dt*G}re.putImageData($e,ke.x,ke.y)}}},Me=new function(){var l="http://www.w3.org/2000/svg",f="http://www.w3.org/2000/xmlns",b="http://www.w3.org/1999/xlink",_={href:b,xlink:f,xmlns:f+"/","xmlns:xlink":f+"/"};function E(N,$,F){return T(i.createElementNS(l,N),$,F)}function A(N,$){var F=_[$],G=F?N.getAttributeNS(F,$):N.getAttribute($);return G==="null"?null:G}function T(N,$,F){for(var G in $){var Z=$[G],Y=_[G];typeof Z=="number"&&F&&(Z=F.number(Z)),Y?N.setAttributeNS(Y,G,Z):N.setAttribute(G,Z)}return N}return{svg:l,xmlns:f,xlink:b,create:E,get:A,set:T}},Je=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(l,f){return!f&&(l instanceof Be||l instanceof R||l instanceof it)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(l,f){var b=s.capitalize(f),_=l[2];this[f]={type:l[1],property:f,attribute:l[0],toSVG:_,fromSVG:_&&s.each(_,function(E,A){this[E]=A},{}),exportFilter:l[3],get:"get"+b,set:"set"+b}},{});new function(){var l;function f(ne,z,te){var ae=new s,ce=ne.getTranslation();if(z){var re;ne.isInvertible()?(ne=ne._shiftless(),re=ne._inverseTransform(ce),ce=null):re=new g,ae[te?"cx":"x"]=re.x,ae[te?"cy":"y"]=re.y}if(!ne.isIdentity()){var be=ne.decompose();if(be){var ke=[],Pe=be.rotation,ze=be.scaling,_e=be.skewing;ce&&!ce.isZero()&&ke.push("translate("+l.point(ce)+")"),Pe&&ke.push("rotate("+l.number(Pe)+")"),(!p.isZero(ze.x-1)||!p.isZero(ze.y-1))&&ke.push("scale("+l.point(ze)+")"),_e.x&&ke.push("skewX("+l.number(_e.x)+")"),_e.y&&ke.push("skewY("+l.number(_e.y)+")"),ae.transform=ke.join(" ")}else ae.transform="matrix("+ne.getValues().join(",")+")"}return ae}function b(ne,z){for(var te=f(ne._matrix),ae=ne._children,ce=Me.create("g",te,l),re=0,be=ae.length;re<be;re++){var ke=ae[re],Pe=K(ke,z);if(Pe)if(ke.isClipMask()){var ze=Me.create("clipPath");ze.appendChild(Pe),X(ke,ze,"clip"),Me.set(ce,{"clip-path":"url(#"+ze.id+")"})}else ce.appendChild(Pe)}return ce}function _(ne,z){var te=f(ne._matrix,!0),ae=ne.getSize(),ce=ne.getImage();return te.x-=ae.width/2,te.y-=ae.height/2,te.width=ae.width,te.height=ae.height,te.href=z.embedImages==!1&&ce&&ce.src||ne.toDataURL(),Me.create("image",te,l)}function E(ne,z){var te=z.matchShapes;if(te){var ae=ne.toShape(!1);if(ae)return A(ae)}var ce=ne._segments,re=ce.length,be,ke=f(ne._matrix);if(te&&re>=2&&!ne.hasHandles())if(re>2){be=ne._closed?"polygon":"polyline";for(var Pe=[],ze=0;ze<re;ze++)Pe.push(l.point(ce[ze]._point));ke.points=Pe.join(" ")}else{be="line";var _e=ce[0]._point,$e=ce[1]._point;ke.set({x1:_e.x,y1:_e.y,x2:$e.x,y2:$e.y})}else be="path",ke.d=ne.getPathData(null,z.precision);return Me.create(be,ke,l)}function A(ne){var z=ne._type,te=ne._radius,ae=f(ne._matrix,!0,z!=="rectangle");if(z==="rectangle"){z="rect";var ce=ne._size,re=ce.width,be=ce.height;ae.x-=re/2,ae.y-=be/2,ae.width=re,ae.height=be,te.isZero()&&(te=null)}return te&&(z==="circle"?ae.r=te:(ae.rx=te.width,ae.ry=te.height)),Me.create(z,ae,l)}function T(ne,z){var te=f(ne._matrix),ae=ne.getPathData(null,z.precision);return ae&&(te.d=ae),Me.create("path",te,l)}function N(ne,z){var te=f(ne._matrix,!0),ae=ne._definition,ce=W(ae,"symbol"),re=ae._item,be=re.getStrokeBounds();return ce||(ce=Me.create("symbol",{viewBox:l.rectangle(be)}),ce.appendChild(K(re,z)),X(ae,ce,"symbol")),te.href="#"+ce.id,te.x+=be.x,te.y+=be.y,te.width=be.width,te.height=be.height,te.overflow="visible",Me.create("use",te,l)}function $(ne){var z=W(ne,"color");if(!z){var te=ne.getGradient(),ae=te._radial,ce=ne.getOrigin(),re=ne.getDestination(),be;if(ae){be={cx:ce.x,cy:ce.y,r:ce.getDistance(re)};var ke=ne.getHighlight();ke&&(be.fx=ke.x,be.fy=ke.y)}else be={x1:ce.x,y1:ce.y,x2:re.x,y2:re.y};be.gradientUnits="userSpaceOnUse",z=Me.create((ae?"radial":"linear")+"Gradient",be,l);for(var Pe=te._stops,ze=0,_e=Pe.length;ze<_e;ze++){var $e=Pe[ze],Fe=$e._color,Xe=Fe.getAlpha(),Ze=$e._offset;be={offset:Ze??ze/(_e-1)},Fe&&(be["stop-color"]=Fe.toCSS(!0)),Xe<1&&(be["stop-opacity"]=Xe),z.appendChild(Me.create("stop",be,l))}X(ne,z,"color")}return"url(#"+z.id+")"}function F(ne){var z=Me.create("text",f(ne._matrix,!0),l);return z.textContent=ne._content,z}var G={Group:b,Layer:b,Raster:_,Path:E,Shape:A,CompoundPath:T,SymbolItem:N,PointText:F};function Z(ne,z,te,ae){var ce={},re=!ae&&ne.getParent(),be=[];return ne._name!=null&&(ce.id=ne._name),s.each(Je,function(ke){var Pe=ke.get,ze=ke.type,_e=ne[Pe]();if(ke.exportFilter?ke.exportFilter(ne,_e):te.reduceAttributes==!1||!re||!s.equals(re[Pe](),_e)){if(ze==="color"&&_e!=null){var $e=_e.getAlpha();$e<1&&(ce[ke.attribute+"-opacity"]=$e)}ze==="style"?be.push(ke.attribute+": "+_e):ce[ke.attribute]=_e==null?"none":ze==="color"?_e.gradient?$(_e):_e.toCSS(!0):ze==="array"?_e.join(","):ze==="lookup"?ke.toSVG[_e]:_e}}),be.length&&(ce.style=be.join(";")),ce.opacity===1&&delete ce.opacity,ne._visible||(ce.visibility="hidden"),Me.set(z,ce,l)}var Y;function W(ne,z){return Y||(Y={ids:{},svgs:{}}),ne&&Y.svgs[z+"-"+(ne._id||ne.__id||(ne.__id=m.get("svg")))]}function X(ne,z,te){Y||W();var ae=Y.ids[te]=(Y.ids[te]||0)+1;z.id=te+"-"+ae,Y.svgs[te+"-"+(ne._id||ne.__id)]=z}function U(ne,z){var te=ne,ae=null;if(Y){te=ne.nodeName.toLowerCase()==="svg"&&ne;for(var ce in Y.svgs)ae||(te||(te=Me.create("svg"),te.appendChild(ne)),ae=te.insertBefore(Me.create("defs"),te.firstChild)),ae.appendChild(Y.svgs[ce]);Y=null}return z.asString?new t.XMLSerializer().serializeToString(te):te}function K(ne,z,te){var ae=G[ne._class],ce=ae&&ae(ne,z);if(ce){var re=z.onExport;re&&(ce=re(ne,ce,z)||ce);var be=JSON.stringify(ne._data);be&&be!=="{}"&&be!=="null"&&ce.setAttribute("data-paper-data",be)}return ce&&Z(ne,ce,z,te)}function V(ne){return ne||(ne={}),l=new d(ne.precision),ne}S.inject({exportSVG:function(ne){return ne=V(ne),U(K(this,ne,!0),ne)}}),M.inject({exportSVG:function(ne){ne=V(ne);var z=this._children,te=this.getView(),ae=s.pick(ne.bounds,"view"),ce=ne.matrix||ae==="view"&&te._matrix,re=ce&&P.read([ce]),be=ae==="view"?new x([0,0],te.getViewSize()):ae==="content"?S._getBounds(z,re,{stroke:!0}).rect:x.read([ae],0,{readNull:!0}),ke={version:"1.1",xmlns:Me.svg,"xmlns:xlink":Me.xlink};be&&(ke.width=be.width,ke.height=be.height,(be.x||be.x===0||be.y||be.y===0)&&(ke.viewBox=l.rectangle(be)));var Pe=Me.create("svg",ke,l),ze=Pe;re&&!re.isIdentity()&&(ze=Pe.appendChild(Me.create("g",f(re),l)));for(var _e=0,$e=z.length;_e<$e;_e++)ze.appendChild(K(z[_e],ne,!0));return U(Pe,ne)}})},new function(){var l={},f;function b(z,te,ae,ce,re,be){var ke=Me.get(z,te)||be,Pe=ke==null?ce?null:ae?"":0:ae?ke:parseFloat(ke);return/%\s*$/.test(ke)?Pe/100*(re?1:f[/x|^width/.test(te)?"width":"height"]):Pe}function _(z,te,ae,ce,re,be,ke){return te=b(z,te||"x",!1,ce,re,be),ae=b(z,ae||"y",!1,ce,re,ke),ce&&(te==null||ae==null)?null:new g(te,ae)}function E(z,te,ae,ce,re){return te=b(z,te||"width",!1,ce,re),ae=b(z,ae||"height",!1,ce,re),ce&&(te==null||ae==null)?null:new w(te,ae)}function A(z,te,ae){return z==="none"?null:te==="number"?parseFloat(z):te==="array"?z?z.split(/[\s,]+/g).map(parseFloat):[]:te==="color"?K(z)||z:te==="lookup"?ae[z]:z}function T(z,te,ae,ce){var re=z.childNodes,be=te==="clippath",ke=te==="defs",Pe=new B,ze=Pe._project,_e=ze._currentStyle,$e=[];if(!be&&!ke&&(Pe=U(Pe,z,ce),ze._currentStyle=Pe._style.clone()),ce)for(var Fe=z.querySelectorAll("defs"),Xe=0,Ze=Fe.length;Xe<Ze;Xe++)V(Fe[Xe],ae,!1);for(var Xe=0,Ze=re.length;Xe<Ze;Xe++){var Qe=re[Xe],ft;Qe.nodeType===1&&!/^defs$/i.test(Qe.nodeName)&&(ft=V(Qe,ae,!1))&&!(ft instanceof ie)&&$e.push(ft)}return Pe.addChildren($e),be&&(Pe=U(Pe.reduce(),z,ce)),ze._currentStyle=_e,(be||ke)&&(Pe.remove(),Pe=null),Pe}function N(z,te){for(var ae=z.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),ce=[],re=0,be=ae.length;re<be;re+=2)ce.push(new g(parseFloat(ae[re]),parseFloat(ae[re+1])));var ke=new xe(ce);return te==="polygon"&&ke.closePath(),ke}function $(z){return Be.create(z.getAttribute("d"))}function F(z,te){var ae=(b(z,"href",!0)||"").substring(1),ce=te==="radialgradient",re;if(ae)re=l[ae].getGradient(),re._radial^ce&&(re=re.clone(),re._radial=ce);else{for(var be=z.childNodes,ke=[],Pe=0,ze=be.length;Pe<ze;Pe++){var _e=be[Pe];_e.nodeType===1&&ke.push(U(new de,_e))}re=new lt(ke,ce)}var $e,Fe,Xe,Ze=b(z,"gradientUnits",!0)!=="userSpaceOnUse";ce?($e=_(z,"cx","cy",!1,Ze,"50%","50%"),Fe=$e.add(b(z,"r",!1,!1,Ze,"50%"),0),Xe=_(z,"fx","fy",!0,Ze)):($e=_(z,"x1","y1",!1,Ze,"0%","0%"),Fe=_(z,"x2","y2",!1,Ze,"100%","0%"));var Qe=U(new Ue(re,$e,Fe,Xe),z);return Qe._scaleToBounds=Ze,null}var G={"#document":function(z,te,ae,ce){for(var re=z.childNodes,be=0,ke=re.length;be<ke;be++){var Pe=re[be];if(Pe.nodeType===1)return V(Pe,ae,ce)}},g:T,svg:T,clippath:T,polygon:N,polyline:N,path:$,lineargradient:F,radialgradient:F,image:function(z){var te=new ee(b(z,"href",!0));return te.on("load",function(){var ae=E(z);this.setSize(ae);var ce=_(z).add(ae.divide(2));this._matrix.append(new P().translate(ce))}),te},symbol:function(z,te,ae,ce){return new ie(T(z,te,ae,ce),!0)},defs:T,use:function(z){var te=(b(z,"href",!0)||"").substring(1),ae=l[te],ce=_(z);return ae?ae instanceof ie?ae.place(ce):ae.clone().translate(ce):null},circle:function(z){return new R.Circle(_(z,"cx","cy"),b(z,"r"))},ellipse:function(z){return new R.Ellipse({center:_(z,"cx","cy"),radius:E(z,"rx","ry")})},rect:function(z){return new R.Rectangle(new x(_(z),E(z)),E(z,"rx","ry"))},line:function(z){return new xe.Line(_(z,"x1","y1"),_(z,"x2","y2"))},text:function(z){var te=new nt(_(z).add(_(z,"dx","dy")));return te.setContent(z.textContent.trim()||""),te},switch:T};function Z(z,te,ae,ce){if(z.transform){for(var re=(ce.getAttribute(ae)||"").split(/\)\s*/g),be=new P,ke=0,Pe=re.length;ke<Pe;ke++){var ze=re[ke];if(!ze)break;for(var _e=ze.split(/\(\s*/),$e=_e[0].trim(),Fe=_e[1].split(/[\s,]+/g),Xe=0,Ze=Fe.length;Xe<Ze;Xe++)Fe[Xe]=parseFloat(Fe[Xe]);switch($e){case"matrix":be.append(new P(Fe[0],Fe[1],Fe[2],Fe[3],Fe[4],Fe[5]));break;case"rotate":be.rotate(Fe[0],Fe[1]||0,Fe[2]||0);break;case"translate":be.translate(Fe[0],Fe[1]||0);break;case"scale":be.scale(Fe);break;case"skewX":be.skew(Fe[0],0);break;case"skewY":be.skew(0,Fe[0]);break}}z.transform(be)}}function Y(z,te,ae){var ce=ae==="fill-opacity"?"getFillColor":"getStrokeColor",re=z[ce]&&z[ce]();re&&re.setAlpha(parseFloat(te))}var W=s.set(s.each(Je,function(z){this[z.attribute]=function(te,ae){if(te[z.set]&&(te[z.set](A(ae,z.type,z.fromSVG)),z.type==="color")){var ce=te[z.get]();if(ce&&ce._scaleToBounds){var re=te.getBounds();ce.transform(new P().translate(re.getPoint()).scale(re.getSize()))}}}},{}),{id:function(z,te){l[te]=z,z.setName&&z.setName(te)},"clip-path":function(z,te){var ae=K(te);if(ae)if(ae=ae.clone(),ae.setClipMask(!0),z instanceof B)z.insertChild(0,ae);else return new B(ae,z)},gradientTransform:Z,transform:Z,"fill-opacity":Y,"stroke-opacity":Y,visibility:function(z,te){z.setVisible&&z.setVisible(te==="visible")},display:function(z,te){z.setVisible&&z.setVisible(te!==null)},"stop-color":function(z,te){z.setColor&&z.setColor(te)},"stop-opacity":function(z,te){z._color&&z._color.setAlpha(parseFloat(te))},offset:function(z,te){if(z.setOffset){var ae=te.match(/(.*)%$/);z.setOffset(ae?ae[1]/100:parseFloat(te))}},viewBox:function(z,te,ae,ce,re){var be=new x(A(te,"array")),ke=E(ce,null,null,!0),Pe,ze;if(z instanceof B){var _e=ke?ke.divide(be.getSize()):1,ze=new P().scale(_e).translate(be.getPoint().negate());Pe=z}else z instanceof ie&&(ke&&be.setSize(ke),Pe=z._item);if(Pe){if(X(ce,"overflow",re)!=="visible"){var $e=new R.Rectangle(be);$e.setClipMask(!0),Pe.addChild($e)}ze&&Pe.transform(ze)}}});function X(z,te,ae){var ce=z.attributes[te],re=ce&&ce.value;if(!re&&z.style){var be=s.camelize(te);re=z.style[be],!re&&ae.node[be]!==ae.parent[be]&&(re=ae.node[be])}return re?re==="none"?null:re:n}function U(z,te,ae){var ce=te.parentNode,re={node:We.getStyles(te)||{},parent:!ae&&!/^defs$/i.test(ce.tagName)&&We.getStyles(ce)||{}};return s.each(W,function(be,ke){var Pe=X(te,ke,re);z=Pe!==n&&be(z,Pe,ke,te,re)||z}),z}function K(z){var te=z&&z.match(/\((?:["'#]*)([^"')]+)/),ae=te&&te[1],ce=ae&&l[r?ae.replace(r.location.href.split("#")[0]+"#",""):ae];return ce&&ce._scaleToBounds&&(ce=ce.clone(),ce._scaleToBounds=!0),ce}function V(z,te,ae){var ce=z.nodeName.toLowerCase(),re=ce!=="#document",be=i.body,ke,Pe,ze;ae&&re&&(f=De.getView().getSize(),f=E(z,null,null,!0)||f,ke=Me.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Pe=z.parentNode,ze=z.nextSibling,ke.appendChild(z),be.appendChild(ke));var _e=De.settings,$e=_e.applyMatrix,Fe=_e.insertItems;_e.applyMatrix=!1,_e.insertItems=!1;var Xe=G[ce],Ze=Xe&&Xe(z,ce,te,ae)||null;if(_e.insertItems=Fe,_e.applyMatrix=$e,Ze){re&&!(Ze instanceof B)&&(Ze=U(Ze,z,ae));var Qe=te.onImport,ft=re&&z.getAttribute("data-paper-data");Qe&&(Ze=Qe(z,Ze,te)||Ze),te.expandShapes&&Ze instanceof R&&(Ze.remove(),Ze=Ze.toPath()),ft&&(Ze._data=JSON.parse(ft))}return ke&&(be.removeChild(ke),Pe&&(ze?Pe.insertBefore(z,ze):Pe.appendChild(z))),ae&&(l={},Ze&&s.pick(te.applyMatrix,$e)&&Ze.matrix.apply(!0,!0)),Ze}function ne(z,te,ae){if(!z)return null;te=typeof te=="function"?{onLoad:te}:te||{};var ce=De,re=null;function be(_e){try{var $e=typeof _e=="object"?_e:new t.DOMParser().parseFromString(_e.trim(),"image/svg+xml");if(!$e.nodeName)throw $e=null,new Error("Unsupported SVG source: "+z);De=ce,re=V($e,te,!0),(!te||te.insert!==!1)&&ae._insertItem(n,re);var Fe=te.onLoad;Fe&&Fe(re,_e)}catch(Xe){ke(Xe)}}function ke(_e,$e){var Fe=te.onError;if(Fe)Fe(_e,$e);else throw new Error(_e)}if(typeof z=="string"&&!/^[\s\S]*</.test(z)){var Pe=i.getElementById(z);Pe?be(Pe):he.request({url:z,async:!0,onLoad:be,onError:ke})}else if(typeof File<"u"&&z instanceof File){var ze=new FileReader;return ze.onload=function(){be(ze.result)},ze.onerror=function(){ke(ze.error)},ze.readAsText(z)}else be(z);return re}S.inject({importSVG:function(z,te){return ne(z,te,this)}}),M.inject({importSVG:function(z,te){return this.activate(),ne(z,te,this)}})},s.exports.PaperScript=(function(){var l=this,f=l.acorn;if(!f&&typeof ed<"u")try{f=i5e()}catch{}if(!f){var b,_;f=b=_={},function(U,K){if(typeof b=="object"&&typeof _=="object")return K(b);if(typeof n=="function"&&n.amd)return n(["exports"],K);K(U.acorn||(U.acorn={}))}(this,function(U){U.version="0.5.0";var K,V,ne,z;U.parse=function(Ie,qe){return V=String(Ie),ne=V.length,ae(qe),Da(),bi(K.program)};var te=U.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function ae(Ie){K=Ie||{};for(var qe in te)Object.prototype.hasOwnProperty.call(K,qe)||(K[qe]=te[qe]);z=K.sourceFile||null}var ce=U.getLineInfo=function(Ie,qe){for(var ot=1,gt=0;;){ns.lastIndex=gt;var an=ns.exec(Ie);if(an&&an.index<qe)++ot,gt=an.index+an[0].length;else break}return{line:ot,column:qe-gt}};U.tokenize=function(Ie,qe){V=String(Ie),ne=V.length,ae(qe),Da();var ot={};function gt(an){return ft=ke,Sn(an),ot.start=be,ot.end=ke,ot.startLoc=Pe,ot.endLoc=ze,ot.type=_e,ot.value=$e,ot}return gt.jumpTo=function(an,cn){if(re=an,K.locations){Xe=1,Ze=ns.lastIndex=0;for(var gn;(gn=ns.exec(V))&&gn.index<an;)++Xe,Ze=gn.index+gn[0].length}Fe=cn,ct()},gt};var re,be,ke,Pe,ze,_e,$e,Fe,Xe,Ze,Qe,ft,dt,Et,xt,Te;function Ke(Ie,qe){var ot=ce(V,Ie);qe+=" ("+ot.line+":"+ot.column+")";var gt=new SyntaxError(qe);throw gt.pos=Ie,gt.loc=ot,gt.raisedAt=re,gt}var mt=[],Nt={type:"num"},kt={type:"regexp"},Bt={type:"string"},At={type:"name"},Dt={type:"eof"},Ut={keyword:"break"},Rt={keyword:"case",beforeExpr:!0},Kt={keyword:"catch"},en={keyword:"continue"},bn={keyword:"debugger"},En={keyword:"default"},wt={keyword:"do",isLoop:!0},Tn={keyword:"else",beforeExpr:!0},Rn={keyword:"finally"},wn={keyword:"for",isLoop:!0},Er={keyword:"function"},Or={keyword:"if"},sr={keyword:"return",beforeExpr:!0},tr={keyword:"switch"},fr={keyword:"throw",beforeExpr:!0},ar={keyword:"try"},Zr={keyword:"var"},zn={keyword:"while",isLoop:!0},nr={keyword:"with"},gi={keyword:"new",beforeExpr:!0},_i={keyword:"this"},Qr={keyword:"null",atomValue:null},yi={keyword:"true",atomValue:!0},Pi={keyword:"false",atomValue:!1},pr={keyword:"in",binop:7,beforeExpr:!0},mr={break:Ut,case:Rt,catch:Kt,continue:en,debugger:bn,default:En,do:wt,else:Tn,finally:Rn,for:wn,function:Er,if:Or,return:sr,switch:tr,throw:fr,try:ar,var:Zr,while:zn,with:nr,null:Qr,true:yi,false:Pi,new:gi,in:pr,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:_i,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},rr={type:"[",beforeExpr:!0},Jr={type:"]"},Gr={type:"{",beforeExpr:!0},yr={type:"}"},Qt={type:"(",beforeExpr:!0},$r={type:")"},vn={type:",",beforeExpr:!0},Vn={type:";",beforeExpr:!0},jn={type:":",beforeExpr:!0},Gn={type:"."},qr={type:"?",beforeExpr:!0},Xn={binop:10,beforeExpr:!0},y={isAssign:!0,beforeExpr:!0},O={isAssign:!0,beforeExpr:!0},J={postfix:!0,prefix:!0,isUpdate:!0},le={prefix:!0,beforeExpr:!0},Se={binop:1,beforeExpr:!0},et={binop:2,beforeExpr:!0},rt={binop:3,beforeExpr:!0},bt={binop:4,beforeExpr:!0},_t={binop:5,beforeExpr:!0},Zt={binop:6,beforeExpr:!0},rn={binop:7,beforeExpr:!0},Nn={binop:8,beforeExpr:!0},or={binop:9,prefix:!0,beforeExpr:!0},es={binop:10,beforeExpr:!0};U.tokTypes={bracketL:rr,bracketR:Jr,braceL:Gr,braceR:yr,parenL:Qt,parenR:$r,comma:vn,semi:Vn,colon:jn,dot:Gn,question:qr,slash:Xn,eq:y,name:At,eof:Dt,num:Nt,regexp:kt,string:Bt};for(var Ft in mr)U.tokTypes["_"+Ft]=mr[Ft];function He(Ie){Ie=Ie.split(" ");var qe="",ot=[];e:for(var gt=0;gt<Ie.length;++gt){for(var an=0;an<ot.length;++an)if(ot[an][0].length==Ie[gt].length){ot[an].push(Ie[gt]);continue e}ot.push([Ie[gt]])}function cn(Zn){if(Zn.length==1)return qe+="return str === "+JSON.stringify(Zn[0])+";";qe+="switch(str){";for(var sa=0;sa<Zn.length;++sa)qe+="case "+JSON.stringify(Zn[sa])+":";qe+="return true}return false;"}if(ot.length>3){ot.sort(function(Zn,sa){return sa.length-Zn.length}),qe+="switch(str.length){";for(var gt=0;gt<ot.length;++gt){var gn=ot[gt];qe+="case "+gn[0].length+":",cn(gn)}qe+="}"}else cn(Ie);return new Function("str",qe)}var vt=He("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),$t=He("class enum extends super const export import"),fn=He("implements interface let package private protected public static yield"),Kn=He("eval arguments"),gr=He("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ni=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Vi="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",xs="------------------------------------------------------------------------------------------------------------------------------------------",ts=new RegExp("["+Vi+"]"),lr=new RegExp("["+Vi+xs+"]"),$s=/[\n\r\u2028\u2029]/,ns=/\r\n|[\n\r\u2028\u2029]/g,rs=U.isIdentifierStart=function(Ie){return Ie<65?Ie===36:Ie<91?!0:Ie<97?Ie===95:Ie<123?!0:Ie>=170&&ts.test(String.fromCharCode(Ie))},ra=U.isIdentifierChar=function(Ie){return Ie<48?Ie===36:Ie<58?!0:Ie<65?!1:Ie<91?!0:Ie<97?Ie===95:Ie<123?!0:Ie>=170&&lr.test(String.fromCharCode(Ie))};function Ds(){this.line=Xe,this.column=re-Ze}function Da(){Xe=1,re=Ze=0,Fe=!0,ct()}function cr(Ie,qe){ke=re,K.locations&&(ze=new Ds),_e=Ie,ct(),$e=qe,Fe=Ie.beforeExpr}function Ge(){var Ie=K.onComment&&K.locations&&new Ds,qe=re,ot=V.indexOf("*/",re+=2);if(ot===-1&&Ke(re-2,"Unterminated comment"),re=ot+2,K.locations){ns.lastIndex=qe;for(var gt;(gt=ns.exec(V))&&gt.index<re;)++Xe,Ze=gt.index+gt[0].length}K.onComment&&K.onComment(!0,V.slice(qe+2,ot),qe,re,Ie,K.locations&&new Ds)}function pt(){for(var Ie=re,qe=K.onComment&&K.locations&&new Ds,ot=V.charCodeAt(re+=2);re<ne&&ot!==10&&ot!==13&&ot!==8232&&ot!==8233;)++re,ot=V.charCodeAt(re);K.onComment&&K.onComment(!1,V.slice(Ie+2,re),Ie,re,qe,K.locations&&new Ds)}function ct(){for(;re<ne;){var Ie=V.charCodeAt(re);if(Ie===32)++re;else if(Ie===13){++re;var qe=V.charCodeAt(re);qe===10&&++re,K.locations&&(++Xe,Ze=re)}else if(Ie===10||Ie===8232||Ie===8233)++re,K.locations&&(++Xe,Ze=re);else if(Ie>8&&Ie<14)++re;else if(Ie===47){var qe=V.charCodeAt(re+1);if(qe===42)Ge();else if(qe===47)pt();else break}else if(Ie===160)++re;else if(Ie>=5760&&ni.test(String.fromCharCode(Ie)))++re;else break}}function Tt(){var Ie=V.charCodeAt(re+1);return Ie>=48&&Ie<=57?Sh(!0):(++re,cr(Gn))}function on(){var Ie=V.charCodeAt(re+1);return Fe?(++re,xn()):Ie===61?tn(O,2):tn(Xn,1)}function Lt(){var Ie=V.charCodeAt(re+1);return Ie===61?tn(O,2):tn(es,1)}function zt(Ie){var qe=V.charCodeAt(re+1);return qe===Ie?tn(Ie===124?Se:et,2):qe===61?tn(O,2):tn(Ie===124?rt:_t,1)}function Wt(){var Ie=V.charCodeAt(re+1);return Ie===61?tn(O,2):tn(bt,1)}function An(Ie){var qe=V.charCodeAt(re+1);return qe===Ie?qe==45&&V.charCodeAt(re+2)==62&&$s.test(V.slice(ft,re))?(re+=3,pt(),ct(),Sn()):tn(J,2):qe===61?tn(O,2):tn(or,1)}function qn(Ie){var qe=V.charCodeAt(re+1),ot=1;return qe===Ie?(ot=Ie===62&&V.charCodeAt(re+2)===62?3:2,V.charCodeAt(re+ot)===61?tn(O,ot+1):tn(Nn,ot)):qe==33&&Ie==60&&V.charCodeAt(re+2)==45&&V.charCodeAt(re+3)==45?(re+=4,pt(),ct(),Sn()):(qe===61&&(ot=V.charCodeAt(re+2)===61?3:2),tn(rn,ot))}function Yn(Ie){var qe=V.charCodeAt(re+1);return qe===61?tn(Zt,V.charCodeAt(re+2)===61?3:2):tn(Ie===61?y:le,1)}function Mn(Ie){switch(Ie){case 46:return Tt();case 40:return++re,cr(Qt);case 41:return++re,cr($r);case 59:return++re,cr(Vn);case 44:return++re,cr(vn);case 91:return++re,cr(rr);case 93:return++re,cr(Jr);case 123:return++re,cr(Gr);case 125:return++re,cr(yr);case 58:return++re,cr(jn);case 63:return++re,cr(qr);case 48:var qe=V.charCodeAt(re+1);if(qe===120||qe===88)return Io();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Sh(!1);case 34:case 39:return If(Ie);case 47:return on();case 37:case 42:return Lt();case 124:case 38:return zt(Ie);case 94:return Wt();case 43:case 45:return An(Ie);case 60:case 62:return qn(Ie);case 61:case 33:return Yn(Ie);case 126:return tn(le,1)}return!1}function Sn(Ie){if(Ie?re=be+1:be=re,K.locations&&(Pe=new Ds),Ie)return xn();if(re>=ne)return cr(Dt);var qe=V.charCodeAt(re);if(rs(qe)||qe===92)return Df();var ot=Mn(qe);if(ot===!1){var gt=String.fromCharCode(qe);if(gt==="\\"||ts.test(gt))return Df();Ke(re,"Unexpected character '"+gt+"'")}return ot}function tn(Ie,qe){var ot=V.slice(re,re+qe);re+=qe,cr(Ie,ot)}function xn(){for(var an="",Ie,qe,ot=re;;){re>=ne&&Ke(ot,"Unterminated regular expression");var gt=V.charAt(re);if($s.test(gt)&&Ke(ot,"Unterminated regular expression"),Ie)Ie=!1;else{if(gt==="[")qe=!0;else if(gt==="]"&&qe)qe=!1;else if(gt==="/"&&!qe)break;Ie=gt==="\\"}++re}var an=V.slice(ot,re);++re;var cn=$f();cn&&!/^[gmsiy]*$/.test(cn)&&Ke(ot,"Invalid regexp flag");try{var gn=new RegExp(an,cn)}catch(Zn){Zn instanceof SyntaxError&&Ke(ot,Zn.message),Ke(Zn)}return cr(kt,gn)}function Gi(Ie,qe){for(var ot=re,gt=0,an=0,cn=qe??1/0;an<cn;++an){var gn=V.charCodeAt(re),Zn;if(gn>=97?Zn=gn-97+10:gn>=65?Zn=gn-65+10:gn>=48&&gn<=57?Zn=gn-48:Zn=1/0,Zn>=Ie)break;++re,gt=gt*Ie+Zn}return re===ot||qe!=null&&re-ot!==qe?null:gt}function Io(){re+=2;var Ie=Gi(16);return Ie==null&&Ke(be+2,"Expected hexadecimal number"),rs(V.charCodeAt(re))&&Ke(re,"Identifier directly after number"),cr(Nt,Ie)}function Sh(Ie){var qe=re,ot=!1,gt=V.charCodeAt(re)===48;!Ie&&Gi(10)===null&&Ke(qe,"Invalid number"),V.charCodeAt(re)===46&&(++re,Gi(10),ot=!0);var an=V.charCodeAt(re);(an===69||an===101)&&(an=V.charCodeAt(++re),(an===43||an===45)&&++re,Gi(10)===null&&Ke(qe,"Invalid number"),ot=!0),rs(V.charCodeAt(re))&&Ke(re,"Identifier directly after number");var cn=V.slice(qe,re),gn;return ot?gn=parseFloat(cn):!gt||cn.length===1?gn=parseInt(cn,10):/[89]/.test(cn)||Te?Ke(qe,"Invalid number"):gn=parseInt(cn,8),cr(Nt,gn)}function If(Ie){re++;for(var qe="";;){re>=ne&&Ke(be,"Unterminated string constant");var ot=V.charCodeAt(re);if(ot===Ie)return++re,cr(Bt,qe);if(ot===92){ot=V.charCodeAt(++re);var gt=/^[0-7]+/.exec(V.slice(re,re+3));for(gt&&(gt=gt[0]);gt&&parseInt(gt,8)>255;)gt=gt.slice(0,-1);if(gt==="0"&&(gt=null),++re,gt)Te&&Ke(re-2,"Octal literal in strict mode"),qe+=String.fromCharCode(parseInt(gt,8)),re+=gt.length-1;else switch(ot){case 110:qe+=`
`;break;case 114:qe+="\r";break;case 120:qe+=String.fromCharCode(jl(2));break;case 117:qe+=String.fromCharCode(jl(4));break;case 85:qe+=String.fromCharCode(jl(8));break;case 116:qe+="	";break;case 98:qe+="\b";break;case 118:qe+="\v";break;case 102:qe+="\f";break;case 48:qe+="\0";break;case 13:V.charCodeAt(re)===10&&++re;case 10:K.locations&&(Ze=re,++Xe);break;default:qe+=String.fromCharCode(ot);break}}else(ot===13||ot===10||ot===8232||ot===8233)&&Ke(be,"Unterminated string constant"),qe+=String.fromCharCode(ot),++re}}function jl(Ie){var qe=Gi(16,Ie);return qe===null&&Ke(be,"Bad character escape sequence"),qe}var $o;function $f(){$o=!1;for(var Ie,qe=!0,ot=re;;){var gt=V.charCodeAt(re);if(ra(gt))$o&&(Ie+=V.charAt(re)),++re;else if(gt===92){$o||(Ie=V.slice(ot,re)),$o=!0,V.charCodeAt(++re)!=117&&Ke(re,"Expecting Unicode escape sequence \\uXXXX"),++re;var an=jl(4),cn=String.fromCharCode(an);cn||Ke(re-1,"Invalid Unicode escape"),(qe?rs(an):ra(an))||Ke(re-4,"Invalid Unicode escape"),Ie+=cn}else break;qe=!1}return $o?Ie:V.slice(ot,re)}function Df(){var Ie=$f(),qe=At;return!$o&&gr(Ie)&&(qe=mr[Ie]),cr(qe,Ie)}function Ln(){Qe=be,ft=ke,dt=ze,Sn()}function Ch(Ie){if(Te=Ie,re=be,K.locations)for(;re<Ze;)Ze=V.lastIndexOf(`
`,Ze-2)+1,--Xe;ct(),Sn()}function zf(){this.type=null,this.start=be,this.end=null}function Ff(){this.start=Pe,this.end=null,z!==null&&(this.source=z)}function ai(){var Ie=new zf;return K.locations&&(Ie.loc=new Ff),K.directSourceFile&&(Ie.sourceFile=K.directSourceFile),K.ranges&&(Ie.range=[be,0]),Ie}function za(Ie){var qe=new zf;return qe.start=Ie.start,K.locations&&(qe.loc=new Ff,qe.loc.start=Ie.loc.start),K.ranges&&(qe.range=[Ie.range[0],0]),qe}function _n(Ie,qe){return Ie.type=qe,Ie.end=ft,K.locations&&(Ie.loc.end=dt),K.ranges&&(Ie.range[1]=ft),Ie}function Eh(Ie){return K.ecmaVersion>=5&&Ie.type==="ExpressionStatement"&&Ie.expression.type==="Literal"&&Ie.expression.value==="use strict"}function br(Ie){if(_e===Ie)return Ln(),!0}function Al(){return!K.strictSemicolons&&(_e===Dt||_e===yr||$s.test(V.slice(ft,be)))}function co(){!br(Vn)&&!Al()&&ia()}function Yr(Ie){_e===Ie?Ln():ia()}function ia(){Ke(be,"Unexpected token")}function Sc(Ie){Ie.type!=="Identifier"&&Ie.type!=="MemberExpression"&&Ke(Ie.start,"Assigning to rvalue"),Te&&Ie.type==="Identifier"&&Kn(Ie.name)&&Ke(Ie.start,"Assigning to "+Ie.name+" in strict mode")}function bi(Ie){Qe=ft=re,K.locations&&(dt=new Ds),Et=Te=null,xt=[],Sn();var qe=Ie||ai(),ot=!0;for(Ie||(qe.body=[]);_e!==Dt;){var gt=is();qe.body.push(gt),ot&&Eh(gt)&&Ch(!0),ot=!1}return _n(qe,"Program")}var Pl={kind:"loop"},Bf={kind:"switch"};function is(){(_e===Xn||_e===O&&$e=="/=")&&Sn(!0);var Ie=_e,qe=ai();switch(Ie){case Ut:case en:Ln();var ot=Ie===Ut;br(Vn)||Al()?qe.label=null:_e!==At?ia():(qe.label=Do(),co());for(var gt=0;gt<xt.length;++gt){var an=xt[gt];if((qe.label==null||an.name===qe.label.name)&&(an.kind!=null&&(ot||an.kind==="loop")||qe.label&&ot))break}return gt===xt.length&&Ke(qe.start,"Unsyntactic "+Ie.keyword),_n(qe,ot?"BreakStatement":"ContinueStatement");case bn:return Ln(),co(),_n(qe,"DebuggerStatement");case wt:return Ln(),xt.push(Pl),qe.body=is(),xt.pop(),Yr(zn),qe.test=fe(),co(),_n(qe,"DoWhileStatement");case wn:if(Ln(),xt.push(Pl),Yr(Qt),_e===Vn)return Ee(qe,null);if(_e===Zr){var cn=ai();return Ln(),at(cn,!0),_n(cn,"VariableDeclaration"),cn.declarations.length===1&&br(pr)?Oe(qe,cn):Ee(qe,cn)}var cn=st(!1,!0);return br(pr)?(Sc(cn),Oe(qe,cn)):Ee(qe,cn);case Er:return Ln(),uo(qe,!0);case Or:return Ln(),qe.test=fe(),qe.consequent=is(),qe.alternate=br(Tn)?is():null,_n(qe,"IfStatement");case sr:return!Et&&!K.allowReturnOutsideFunction&&Ke(be,"'return' outside of function"),Ln(),br(Vn)||Al()?qe.argument=null:(qe.argument=st(),co()),_n(qe,"ReturnStatement");case tr:Ln(),qe.discriminant=fe(),qe.cases=[],Yr(Gr),xt.push(Bf);for(var gn,Zn;_e!=yr;)if(_e===Rt||_e===En){var sa=_e===Rt;gn&&_n(gn,"SwitchCase"),qe.cases.push(gn=ai()),gn.consequent=[],Ln(),sa?gn.test=st():(Zn&&Ke(Qe,"Multiple default clauses"),Zn=!0,gn.test=null),Yr(jn)}else gn||ia(),gn.consequent.push(is());return gn&&_n(gn,"SwitchCase"),Ln(),xt.pop(),_n(qe,"SwitchStatement");case fr:return Ln(),$s.test(V.slice(ft,be))&&Ke(ft,"Illegal newline after throw"),qe.argument=st(),co(),_n(qe,"ThrowStatement");case ar:if(Ln(),qe.block=Ve(),qe.handler=null,_e===Kt){var Nl=ai();Ln(),Yr(Qt),Nl.param=Do(),Te&&Kn(Nl.param.name)&&Ke(Nl.param.start,"Binding "+Nl.param.name+" in strict mode"),Yr($r),Nl.guard=null,Nl.body=Ve(),qe.handler=_n(Nl,"CatchClause")}return qe.guardedHandlers=mt,qe.finalizer=br(Rn)?Ve():null,!qe.handler&&!qe.finalizer&&Ke(qe.start,"Missing catch or finally clause"),_n(qe,"TryStatement");case Zr:return Ln(),at(qe),co(),_n(qe,"VariableDeclaration");case zn:return Ln(),qe.test=fe(),xt.push(Pl),qe.body=is(),xt.pop(),_n(qe,"WhileStatement");case nr:return Te&&Ke(be,"'with' in strict mode"),Ln(),qe.object=fe(),qe.body=is(),_n(qe,"WithStatement");case Gr:return Ve();case Vn:return Ln(),_n(qe,"EmptyStatement");default:var D0=$e,Uf=st();if(Ie===At&&Uf.type==="Identifier"&&br(jn)){for(var gt=0;gt<xt.length;++gt)xt[gt].name===D0&&Ke(Uf.start,"Label '"+D0+"' is already declared");var eI=_e.isLoop?"loop":_e===tr?"switch":null;return xt.push({name:D0,kind:eI}),qe.body=is(),xt.pop(),qe.label=Uf,_n(qe,"LabeledStatement")}else return qe.expression=Uf,co(),_n(qe,"ExpressionStatement")}}function fe(){Yr(Qt);var Ie=st();return Yr($r),Ie}function Ve(Ie){var qe=ai(),ot=!0,gt=!1,an;for(qe.body=[],Yr(Gr);!br(yr);){var cn=is();qe.body.push(cn),ot&&Ie&&Eh(cn)&&(an=gt,Ch(gt=!0)),ot=!1}return gt&&!an&&Ch(!1),_n(qe,"BlockStatement")}function Ee(Ie,qe){return Ie.init=qe,Yr(Vn),Ie.test=_e===Vn?null:st(),Yr(Vn),Ie.update=_e===$r?null:st(),Yr($r),Ie.body=is(),xt.pop(),_n(Ie,"ForStatement")}function Oe(Ie,qe){return Ie.left=qe,Ie.right=st(),Yr($r),Ie.body=is(),xt.pop(),_n(Ie,"ForInStatement")}function at(Ie,qe){for(Ie.declarations=[],Ie.kind="var";;){var ot=ai();if(ot.id=Do(),Te&&Kn(ot.id.name)&&Ke(ot.id.start,"Binding "+ot.id.name+" in strict mode"),ot.init=br(y)?st(!0,qe):null,Ie.declarations.push(_n(ot,"VariableDeclarator")),!br(vn))break}return Ie}function st(Ie,qe){var ot=tt(qe);if(!Ie&&_e===vn){var gt=za(ot);for(gt.expressions=[ot];br(vn);)gt.expressions.push(tt(qe));return _n(gt,"SequenceExpression")}return ot}function tt(Ie){var qe=yt(Ie);if(_e.isAssign){var ot=za(qe);return ot.operator=$e,ot.left=qe,Ln(),ot.right=tt(Ie),Sc(qe),_n(ot,"AssignmentExpression")}return qe}function yt(Ie){var qe=ut(Ie);if(br(qr)){var ot=za(qe);return ot.test=qe,ot.consequent=st(!0),Yr(jn),ot.alternate=st(!0,Ie),_n(ot,"ConditionalExpression")}return qe}function ut(Ie){return St(It(),-1,Ie)}function St(Ie,qe,ot){var gt=_e.binop;if(gt!=null&&(!ot||_e!==pr)&&gt>qe){var an=za(Ie);an.left=Ie,an.operator=$e;var cn=_e;Ln(),an.right=St(It(),gt,ot);var gn=_n(an,cn===Se||cn===et?"LogicalExpression":"BinaryExpression");return St(gn,qe,ot)}return Ie}function It(){if(_e.prefix){var Ie=ai(),qe=_e.isUpdate;return Ie.operator=$e,Ie.prefix=!0,Fe=!0,Ln(),Ie.argument=It(),qe?Sc(Ie.argument):Te&&Ie.operator==="delete"&&Ie.argument.type==="Identifier"&&Ke(Ie.start,"Deleting local variable in strict mode"),_n(Ie,qe?"UpdateExpression":"UnaryExpression")}for(var ot=sn();_e.postfix&&!Al();){var Ie=za(ot);Ie.operator=$e,Ie.prefix=!1,Ie.argument=ot,Sc(ot),Ln(),ot=_n(Ie,"UpdateExpression")}return ot}function sn(){return ln(Gt())}function ln(Ie,qe){if(br(Gn)){var ot=za(Ie);return ot.object=Ie,ot.property=Do(!0),ot.computed=!1,ln(_n(ot,"MemberExpression"),qe)}else if(br(rr)){var ot=za(Ie);return ot.object=Ie,ot.property=st(),ot.computed=!0,Yr(Jr),ln(_n(ot,"MemberExpression"),qe)}else if(!qe&&br(Qt)){var ot=za(Ie);return ot.callee=Ie,ot.arguments=Rr($r,!1),ln(_n(ot,"CallExpression"),qe)}else return Ie}function Gt(){switch(_e){case _i:var gt=ai();return Ln(),_n(gt,"ThisExpression");case At:return Do();case Nt:case Bt:case kt:var gt=ai();return gt.value=$e,gt.raw=V.slice(be,ke),Ln(),_n(gt,"Literal");case Qr:case yi:case Pi:var gt=ai();return gt.value=_e.atomValue,gt.raw=_e.keyword,Ln(),_n(gt,"Literal");case Qt:var Ie=Pe,qe=be;Ln();var ot=st();return ot.start=qe,ot.end=ke,K.locations&&(ot.loc.start=Ie,ot.loc.end=ze),K.ranges&&(ot.range=[qe,ke]),Yr($r),ot;case rr:var gt=ai();return Ln(),gt.elements=Rr(Jr,!0,!0),_n(gt,"ArrayExpression");case Gr:return Tr();case Er:var gt=ai();return Ln(),uo(gt,!1);case gi:return qt();default:ia()}}function qt(){var Ie=ai();return Ln(),Ie.callee=ln(Gt(),!0),br(Qt)?Ie.arguments=Rr($r,!1):Ie.arguments=mt,_n(Ie,"NewExpression")}function Tr(){var Ie=ai(),qe=!0,ot=!1;for(Ie.properties=[],Ln();!br(yr);){if(qe)qe=!1;else if(Yr(vn),K.allowTrailingCommas&&br(yr))break;var gt={key:Ni()},an=!1,cn;if(br(jn)?(gt.value=st(!0),cn=gt.kind="init"):K.ecmaVersion>=5&&gt.key.type==="Identifier"&&(gt.key.name==="get"||gt.key.name==="set")?(an=ot=!0,cn=gt.kind=gt.key.name,gt.key=Ni(),_e!==Qt&&ia(),gt.value=uo(ai(),!1)):ia(),gt.key.type==="Identifier"&&(Te||ot))for(var gn=0;gn<Ie.properties.length;++gn){var Zn=Ie.properties[gn];if(Zn.key.name===gt.key.name){var sa=cn==Zn.kind||an&&Zn.kind==="init"||cn==="init"&&(Zn.kind==="get"||Zn.kind==="set");sa&&!Te&&cn==="init"&&Zn.kind==="init"&&(sa=!1),sa&&Ke(gt.key.start,"Redefinition of property")}}Ie.properties.push(gt)}return _n(Ie,"ObjectExpression")}function Ni(){return _e===Nt||_e===Bt?Gt():Do(!0)}function uo(Ie,qe){_e===At?Ie.id=Do():qe?ia():Ie.id=null,Ie.params=[];var ot=!0;for(Yr(Qt);!br($r);)ot?ot=!1:Yr(vn),Ie.params.push(Do());var gt=Et,an=xt;if(Et=!0,xt=[],Ie.body=Ve(!0),Et=gt,xt=an,Te||Ie.body.body.length&&Eh(Ie.body.body[0]))for(var cn=Ie.id?-1:0;cn<Ie.params.length;++cn){var gn=cn<0?Ie.id:Ie.params[cn];if((fn(gn.name)||Kn(gn.name))&&Ke(gn.start,"Defining '"+gn.name+"' in strict mode"),cn>=0)for(var Zn=0;Zn<cn;++Zn)gn.name===Ie.params[Zn].name&&Ke(gn.start,"Argument name clash in strict mode")}return _n(Ie,qe?"FunctionDeclaration":"FunctionExpression")}function Rr(Ie,qe,ot){for(var gt=[],an=!0;!br(Ie);){if(an)an=!1;else if(Yr(vn),qe&&K.allowTrailingCommas&&br(Ie))break;ot&&_e===vn?gt.push(null):gt.push(st(!0))}return gt}function Do(Ie){var qe=ai();return Ie&&K.forbidReserved=="everywhere"&&(Ie=!1),_e===At?(!Ie&&(K.forbidReserved&&(K.ecmaVersion===3?vt:$t)($e)||Te&&fn($e))&&V.slice(be,ke).indexOf("\\")==-1&&Ke(be,"The keyword '"+$e+"' is reserved"),qe.name=$e):Ie&&_e.keyword?qe.name=_e.keyword:ia(),Fe=!1,Ln(),_n(qe,"Identifier")}}),f.version||(f=null)}function E(U,K){return(l.acorn||f).parse(U,K)}var A={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},T={"-":"__negate","+":"__self"},N=s.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(U){this["__"+U]="#"+U},{__self:function(){return this}});g.inject(N),w.inject(N),Ue.inject(N);function $(U,K,V){var ne=A[K];if(U&&U[ne]){var z=U[ne](V);return K==="!="?!z:z}switch(K){case"+":return U+V;case"-":return U-V;case"*":return U*V;case"/":return U/V;case"%":return U%V;case"==":return U==V;case"!=":return U!=V}}function F(U,K){var V=T[U];if(K&&K[V])return K[V]();switch(U){case"+":return+K;case"-":return-K}}function G(U,K){if(!U)return"";K=K||{};var V=[];function ne(Te){for(var Ke=0,mt=V.length;Ke<mt;Ke++){var Nt=V[Ke];if(Nt[0]>=Te)break;Te+=Nt[1]}return Te}function z(Te){return U.substring(ne(Te.range[0]),ne(Te.range[1]))}function te(Te,Ke){return U.substring(ne(Te.range[1]),ne(Ke.range[0]))}function ae(Te,Ke){for(var mt=ne(Te.range[0]),Nt=ne(Te.range[1]),kt=0,Bt=V.length-1;Bt>=0;Bt--)if(mt>V[Bt][0]){kt=Bt+1;break}V.splice(kt,0,[mt,Ke.length-Nt+mt]),U=U.substring(0,mt)+Ke+U.substring(Nt)}function ce(Te,Ke){switch(Te.type){case"UnaryExpression":if(Te.operator in T&&Te.argument.type!=="Literal"){var mt=z(Te.argument);ae(Te,'$__("'+Te.operator+'", '+mt+")")}break;case"BinaryExpression":if(Te.operator in A&&Te.left.type!=="Literal"){var Nt=z(Te.left),kt=z(Te.right),Bt=te(Te.left,Te.right),At=Te.operator;ae(Te,"__$__("+Nt+","+Bt.replace(new RegExp("\\"+At),'"'+At+'"')+", "+kt+")")}break;case"UpdateExpression":case"AssignmentExpression":var Dt=Ke&&Ke.type;if(!(Dt==="ForStatement"||Dt==="BinaryExpression"&&/^[=!<>]/.test(Ke.operator)||Dt==="MemberExpression"&&Ke.computed)){if(Te.type==="UpdateExpression"){var mt=z(Te.argument),Ut="__$__("+mt+', "'+Te.operator[0]+'", 1)',Rt=mt+" = "+Ut;Te.prefix?Rt="("+Rt+")":(Dt==="AssignmentExpression"||Dt==="VariableDeclarator"||Dt==="BinaryExpression")&&(z(Ke.left||Ke.id)===mt&&(Rt=Ut),Rt=mt+"; "+Rt),ae(Te,Rt)}else if(/^.=$/.test(Te.operator)&&Te.left.type!=="Literal"){var Nt=z(Te.left),kt=z(Te.right),Ut=Nt+" = __$__("+Nt+', "'+Te.operator[0]+'", '+kt+")";ae(Te,/^\(.*\)$/.test(z(Te))?"("+Ut+")":Ut)}}break}}function re(Te){switch(Te.type){case"ExportDefaultDeclaration":ae({range:[Te.start,Te.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Ke=Te.declaration,mt=Te.specifiers;if(Ke){var Nt=Ke.declarations;Nt&&(Nt.forEach(function(Bt){ae(Bt,"module.exports."+z(Bt))}),ae({range:[Te.start,Ke.start+Ke.kind.length]},""))}else if(mt){var kt=mt.map(function(Bt){var At=z(Bt);return"module.exports."+At+" = "+At+"; "}).join("");kt&&ae(Te,kt)}break}}function be(Te,Ke,mt){if(Te){for(var Nt in Te)if(Nt!=="range"&&Nt!=="loc"){var kt=Te[Nt];if(Array.isArray(kt))for(var Bt=0,At=kt.length;Bt<At;Bt++)be(kt[Bt],Te,mt);else kt&&typeof kt=="object"&&be(kt,Te,mt)}mt.operatorOverloading!==!1&&ce(Te,Ke),mt.moduleExports!==!1&&re(Te)}}function ke(Te){var Ke="",mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Te=(Math.abs(Te)<<1)+(Te<0?1:0);Te||!Ke;){var Nt=Te&31;Te>>=5,Te&&(Nt|=32),Ke+=mt[Nt]}return Ke}var Pe=K.url||"",ze=K.sourceMaps,_e=K.paperFeatures||{},$e=K.source||U,Fe=K.offset||0,Xe=De.agent,Ze=Xe.versionNumber,Qe=!1,ft=/\r\n|\n|\r/mg,dt;if(ze&&(Xe.chrome&&Ze>=30||Xe.webkit&&Ze>=537.76||Xe.firefox&&Ze>=23||Xe.node)){if(Xe.node)Fe-=2;else if(r&&Pe&&!r.location.href.indexOf(Pe)){var Et=i.getElementsByTagName("html")[0].innerHTML;Fe=Et.substr(0,Et.indexOf(U)+1).match(ft).length+1}Qe=Fe>0&&!(Xe.chrome&&Ze>=36||Xe.safari&&Ze>=600||Xe.firefox&&Ze>=40||Xe.node);var xt=["AA"+ke(Qe?0:Fe)+"A"];xt.length=(U.match(ft)||[]).length+1+(Qe?Fe:0),dt={version:3,file:Pe,names:[],mappings:xt.join(";AACA"),sourceRoot:"",sources:[Pe],sourcesContent:[$e]}}return(_e.operatorOverloading!==!1||_e.moduleExports!==!1)&&be(E(U,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,_e),dt&&(Qe&&(U=new Array(Fe+1).join(`
`)+U),/^(inline|both)$/.test(ze)&&(U+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(dt))))),U+=`
//# sourceURL=`+(Pe||"paperscript")),{url:Pe,source:$e,code:U,map:dt}}function Z(U,K,V){De=K;var ne=K.getView(),z=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(U)&&!/\bnew\s+Tool\b/.test(U)?new I:null,te=z?z._events:[],ae=["onFrame","onResize"].concat(te),ce=[],re=[],be,ke=typeof U=="object"?U:G(U,V);U=ke.code;function Pe(Ze,Qe){for(var ft in Ze)(Qe||!/^_/.test(ft))&&new RegExp("([\\b\\s\\W]|^)"+ft.replace(/\$/g,"\\$")+"\\b").test(U)&&(ce.push(ft),re.push(Ze[ft]))}Pe({__$__:$,$__:F,paper:K,tool:z},!0),Pe(K),U="var module = { exports: {} }; "+U;var Fe=s.each(ae,function(Ze){new RegExp("\\s+"+Ze+"\\b").test(U)&&(ce.push(Ze),this.push("module.exports."+Ze+" = "+Ze+";"))},[]).join(`
`);Fe&&(U+=`
`+Fe),U+=`
return module.exports;`;var ze=De.agent;if(i&&(ze.chrome||ze.firefox&&ze.versionNumber<40)){var _e=i.createElement("script"),$e=i.head||i.getElementsByTagName("head")[0];ze.firefox&&(U=`
`+U),_e.appendChild(i.createTextNode("document.__paperscript__ = function("+ce+") {"+U+`
}`)),$e.appendChild(_e),be=i.__paperscript__,delete i.__paperscript__,$e.removeChild(_e)}else be=Function(ce,U);var Fe=be&&be.apply(K,re),Xe=Fe||{};return s.each(te,function(Ze){var Qe=Xe[Ze];Qe&&(z[Ze]=Qe)}),ne&&(Xe.onResize&&ne.setOnResize(Xe.onResize),ne.emit("resize",{size:ne.size,delta:new g}),Xe.onFrame&&ne.setOnFrame(Xe.onFrame),ne.requestUpdate()),Fe}function Y(U){if(/^text\/(?:x-|)paperscript$/.test(U.type)&&o.getAttribute(U,"ignore")!=="true"){var K=o.getAttribute(U,"canvas"),V=i.getElementById(K),ne=U.src||U.getAttribute("data-src"),z=o.hasAttribute(U,"async"),te="data-paper-scope";if(!V)throw new Error('Unable to find canvas with id "'+K+'"');var ae=o.get(V.getAttribute(te))||new o().setup(V);return V.setAttribute(te,ae._id),ne?he.request({url:ne,async:z,mimeType:"text/plain",onLoad:function(ce){Z(ce,ae,ne)}}):Z(U.innerHTML,ae,U.baseURI),U.setAttribute("data-paper-ignore","true"),ae}}function W(){s.each(i&&i.getElementsByTagName("script"),Y)}function X(U){return U?Y(U):W()}return r&&(i.readyState==="complete"?setTimeout(W):Ne.add(r,{load:W})),{compile:G,execute:Z,load:X,parse:E,calculateBinary:$,calculateUnary:F}}).call(this);var De=new(o.inject(s.exports,{Base:s,Numerical:p,Key:Ye,DomEvent:Ne,DomElement:We,document:i,window:r,Symbol:ie,PlacedSymbol:ue}));return De.agent.node&&a1(De),typeof n=="function"&&n.amd?n("paper",De):e&&(e.exports=De),De}).call(Qa,typeof self=="object"?self:null)})(ZL);var s5e=ZL.exports;const a5e=No(s5e),kj={WARN_SEGMENTS:1500,BLOCK_SEGMENTS:1e4},QL=.5,ok=10;let Kp=null;function JL(){return Kp||(Kp=new a5e.PaperScope,Kp.setup([1,1]),console.log("[PAPER] Initialized Paper.js scope")),Kp}function Sj(e){return JL().project.importSVG(e,{insert:!1})}function _m(e){var t;return e?e.className==="CompoundPath"?e.children.reduce((n,r)=>{var i;return n+(((i=r.segments)==null?void 0:i.length)||0)},0):((t=e.segments)==null?void 0:t.length)||0:0}function o5e(e){return!e||!e.area?0:Math.abs(e.area)}function l5e(e,t=ok){if(!e)return e;if(e.className==="CompoundPath"){const n=[];if(e.children.forEach(r=>{o5e(r)<t&&n.push(r)}),n.forEach(r=>r.remove()),e.children.length===1){const r=e.children[0];return r.remove(),e.remove(),r}if(e.children.length===0)return e.remove(),null}return e}function c5e(e){e&&e.className==="CompoundPath"&&(e.fillRule="evenodd")}function u5e(e,t={}){if(!e)return e;const{simplifyTolerance:n=QL,minArea:r=ok}=t;return e.simplify&&e.simplify(n),e=l5e(e,r),e&&c5e(e),e}function h5e(e){const t=e.reduce((n,r)=>n+_m(r),0);return t>kj.BLOCK_SEGMENTS?{canProceed:!1,warning:null,error:`Too complex for boolean operations (${t} segments). Use "Flatten Artwork" first.`}:t>kj.WARN_SEGMENTS?{canProceed:!0,warning:`This operation may take a moment (${t} segments)`,error:null}:{canProceed:!0,warning:null,error:null}}function d5e(e,t,n={}){if(!e||!t)return console.warn("[PAPER] subtractPath: missing path(s)"),e;const r=h5e([e,t]);if(!r.canProceed)throw new Error(r.error);r.warning&&console.warn("[PAPER]",r.warning),console.log("[PAPER] Subtracting paths...");const i=Date.now();try{const s=e.subtract(t),a=u5e(s,n);return console.log(`[PAPER] Subtraction complete in ${Date.now()-i}ms`),console.log(`[PAPER] Segments: ${_m(e)} - ${_m(t)} = ${_m(a)}`),a}catch(s){throw console.error("[PAPER] Subtraction failed:",s),s}}async function f5e(e,t){console.log(`[PAPER] Performing true cut-out for region: ${t}`);const n=Date.now(),r=ak(e),i=GL(r);if(i.blocked)throw new Error(i.reason);const s=qL(r);s.warn&&console.warn("[PAPER]",s.message),JL();const o=new DOMParser().parseFromString(e,"image/svg+xml"),c=o.documentElement,h=c.querySelector(`[data-region-id="${t}"]`);if(!h)throw new Error(`Region ${t} not found`);const d=Sj(h);if(!d||d.className==="Group")throw console.warn("[PAPER] Could not convert cutout region to path"),new Error("Cutout region could not be converted to a path");const p=d.bounds,m=c.querySelectorAll("path, rect, circle, ellipse, polygon"),g=[];let v=!1;m.forEach(k=>{if(k===h){v=!0;return}!v&&k.hasAttribute("data-region-id")&&g.push(k)}),console.log(`[PAPER] Found ${g.length} shapes below cutout region`);let w=0;for(const k of g)try{const P=Sj(k);if(!P)continue;if(!P.bounds.intersects(p)){P.remove();continue}const j=d5e(P,d.clone(),{simplifyTolerance:QL,minArea:ok});if(j){const M=j.exportSVG({asString:!1}),S=k.getAttribute("data-region-id"),B=k.getAttribute("fill"),D=k.getAttribute("fill-opacity"),R=k.getAttribute("stroke");S&&M.setAttribute("data-region-id",S),B&&M.setAttribute("fill",B),D&&M.setAttribute("fill-opacity",D),R&&M.setAttribute("stroke",R),k.parentNode.replaceChild(M,k),w++}P.remove()}catch(P){console.warn("[PAPER] Failed to process shape:",P.message)}h.remove(),d.remove();const C=new XMLSerializer().serializeToString(o),x={processingTime:Date.now()-n,shapesProcessed:g.length,shapesModified:w,cutoutRegionId:t};return console.log(`[PAPER] True cut-out complete in ${x.processingTime}ms`),console.log(`[PAPER] Modified ${w} of ${g.length} shapes`),{svg:C,stats:x}}function p5e(e){if(!e)return{allowed:!1,reason:"No element selected"};const t=e.getAttribute("class")||"",n=[{pattern:"court",label:"court"},{pattern:"track",label:"track"},{pattern:"lane",label:"lane"},{pattern:"line",label:"line marking"},{pattern:"marking",label:"marking"},{pattern:"boundary",label:"boundary"},{pattern:"regulation",label:"regulation shape"}];for(const{pattern:i,label:s}of n)if(t.toLowerCase().includes(i))return{allowed:!1,reason:`Cannot cut out ${s} elements`};let r=e.parentElement;for(;r&&r.tagName!=="svg";){const i=r.getAttribute("class")||"";for(const{pattern:s,label:a}of n)if(i.toLowerCase().includes(s))return{allowed:!1,reason:`Cannot cut out elements inside ${a}`};r=r.parentElement}return{allowed:!0,reason:null}}function m5e(e,t){const n=ak(e);if(!n.valid)return{segments:0,canProceed:!1,warning:"Invalid SVG"};const r=GL(n);if(r.blocked)return{segments:n.totalSegments,canProceed:!1,warning:r.reason};const i=qL(n);return{segments:n.totalSegments,canProceed:!0,warning:i.warn?i.message:null}}function g5e(e,t,n){return"#"+[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("").toUpperCase()}async function y5e(e,t={}){const{canvasSize:n=500,ignoreWhite:r=!0,ignoreTransparent:i=!0}=t;return new Promise((s,a)=>{const o=document.createElement("canvas");o.width=n,o.height=n;const c=o.getContext("2d",{willReadFrequently:!0}),h=new Image,d=new Blob([e],{type:"image/svg+xml"}),p=URL.createObjectURL(d);h.onload=()=>{try{c.clearRect(0,0,n,n);const m=Math.min(n/h.width,n/h.height),g=h.width*m,v=h.height*m,w=(n-g)/2,C=(n-v)/2;c.drawImage(h,w,C,g,v);const k=c.getImageData(0,0,n,n).data,P=new Map;let j=0;for(let S=0;S<k.length;S+=4){const B=k[S],D=k[S+1],R=k[S+2],ee=k[S+3];if(i&&ee<128||r&&B>250&&D>250&&R>250)continue;const ue=g5e(B,D,R),ie=P.get(ue)||0;P.set(ue,ie+1),j++}const M=new Map;for(const[S,B]of P)M.set(S,{coverage:j>0?B/j*100:0,pixelCount:B});URL.revokeObjectURL(p),s(M)}catch(m){URL.revokeObjectURL(p),a(m)}},h.onerror=m=>{URL.revokeObjectURL(p),a(new Error("Failed to load SVG for coverage analysis"))},h.src=p})}function sc(e){if(!e)return null;let t=e.replace("#","").toUpperCase();return t.length===3&&(t=t.split("").map(n=>n+n).join("")),"#"+t}function b5e(e,t=10){const n=Array.from(e.entries()),r=new Map,i=new Set;for(const[s,a]of n){if(i.has(s))continue;let o=a.coverage,c=a.pixelCount;const h=Cj(s);for(const[d,p]of n){if(s===d||i.has(d))continue;const m=Cj(d);Math.max(Math.abs(h.r-m.r),Math.abs(h.g-m.g),Math.abs(h.b-m.b))<=t&&(o+=p.coverage,c+=p.pixelCount,i.add(d))}i.add(s),r.set(s,{coverage:o,pixelCount:c})}return r}function Cj(e){const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}}async function v5e(e,t={}){try{const r=await(await fetch(e)).text();return y5e(r,t)}catch(n){throw console.error("[CoverageAnalyzer] Failed to fetch SVG from URL:",n),n}}const x5e=[{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH70",name:"Black",hex:"#231F20"}];function w5e(e){if(!e)return null;const t=sc(e);return x5e.find(n=>sc(n.hex)===t)||null}function Ej(e){const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}}function Tj(e,t,n=10){const r=sc(t);if(!r)return 0;for(const[o,c]of e)if(sc(o)===r)return c.coverage;const i=Ej(r);let s=null,a=1/0;for(const[o,c]of e){const h=Ej(sc(o)),d=Math.max(Math.abs(i.r-h.r),Math.abs(i.g-h.g),Math.abs(i.b-h.b));d<=n&&d<a&&(a=d,s=c)}return s?s.coverage:0}async function jj(e,t,n,r="solid"){var i,s;if(!e||!t)return t||[];try{const a=await v5e(e,{canvasSize:600,ignoreWhite:!0,ignoreTransparent:!0}),o=b5e(a,5);console.log("[deriveCurrentColors] Coverage analysis:",o);const c=new Map;n&&n.size>0&&n.forEach(p=>{const m=typeof p=="string"?p:p.hex,g=sc(m);g&&m!=="transparent"&&m!=="none"&&(!c.has(g)||p.tpvCode)&&c.set(g,{hex:g,tpvCode:p.tpvCode||null,tpvName:p.tpvName||null,editType:p.editType||"unknown",blendComponents:p.blendComponents||null})});const h=new Map;for(const p of t){const m=sc(((i=p.blendColor)==null?void 0:i.hex)||((s=p.targetColor)==null?void 0:s.hex));if(!m)continue;const g=Tj(o,m,10);g>.1&&h.set(m,{...p,targetColor:{...p.targetColor,areaPct:g}})}for(const[p,m]of c)if(!h.has(p)){const g=Tj(o,p,10);if(g>.1){const v=m.tpvCode?{code:m.tpvCode,name:m.tpvName}:w5e(p);h.set(p,{originalColor:{hex:p},targetColor:{hex:p,areaPct:g},blendColor:{hex:p},chosenRecipe:m.blendComponents?{components:m.blendComponents,deltaE:0,quality:"Custom Blend"}:{components:v?[{code:v.code,name:v.name,percentage:100,parts:10}]:[{code:"CUSTOM",name:"Custom Color",percentage:100,parts:10}],deltaE:0,quality:v?"Pure TPV Colour":"Custom"},tpvCode:m.tpvCode||(v==null?void 0:v.code)||null,tpvName:m.tpvName||(v==null?void 0:v.name)||null,isAddedFromEdit:!0})}}const d=Array.from(h.values()).sort((p,m)=>{var g,v;return(((g=m.targetColor)==null?void 0:g.areaPct)||0)-(((v=p.targetColor)==null?void 0:v.areaPct)||0)});return console.log("[deriveCurrentColors] Derived colors:",d.length,"colors"),d}catch(a){return console.error("[deriveCurrentColors] Failed to analyze coverage:",a),t}}function _5e(e){if(!e||e.size===0)return!1;for(const t of e.values()){const n=typeof t=="string"?t:t.hex;if(n&&n!=="transparent"&&n!=="none")return!0}return!1}const Aj={landscape:[{name:"1:1",ratio:1,width:1024,height:1024},{name:"4:3",ratio:4/3,width:1024,height:768},{name:"3:2",ratio:3/2,width:1024,height:683},{name:"16:9",ratio:16/9,width:1024,height:576},{name:"2:1",ratio:2,width:1024,height:512},{name:"3:1",ratio:3,width:1024,height:341}],portrait:[{name:"1:1",ratio:1,width:1024,height:1024},{name:"3:4",ratio:3/4,width:768,height:1024},{name:"2:3",ratio:2/3,width:683,height:1024},{name:"9:16",ratio:9/16,width:576,height:1024},{name:"1:2",ratio:1/2,width:512,height:1024},{name:"1:3",ratio:1/3,width:341,height:1024}]},qh={safeDifference:.3,tilingThreshold:3.5,framingThreshold:2.5};function k5e(e,t){return e/t}function S5e(e){return e>=.95&&e<=1.05?"square":e>1?"landscape":"portrait"}function C5e(e,t){const n=t==="portrait"?Aj.portrait:Aj.landscape;let r=n[0],i=Math.abs(e-r.ratio);for(const s of n){const a=Math.abs(e-s.ratio);a<i&&(i=a,r=s)}return{...r,difference:i}}function E5e(e,t,n){return e>=qh.tilingThreshold||e<=1/qh.tilingThreshold?{mode:"tiling",reason:"Extreme aspect ratio - design will repeat along length",warning:!0}:n>=qh.safeDifference||e>=qh.framingThreshold||e<=1/qh.framingThreshold?{mode:"framing",reason:"Design panel centered with base color surround",warning:!1}:{mode:"full",reason:"Design fills entire surface",warning:!1}}function T5e(e,t){const n=k5e(e,t),r=S5e(n),i=C5e(n,r),s=E5e(n,i.ratio,i.difference);return{user:{widthMM:e,heightMM:t,aspectRatio:n,orientation:r,formatted:`${(e/1e3).toFixed(1)}m  ${(t/1e3).toFixed(1)}m`},canonical:{name:i.name,ratio:i.ratio,width:i.width,height:i.height,difference:i.difference},layout:s,recraft:{width:i.width,height:i.height,metadata:{targetWidthMM:e,targetHeightMM:t,layoutMode:s.mode}}}}function j5e(e){return e.layout.warning||e.layout.mode!=="full"}async function A5e(e,t="tpv-studio-uploads"){try{const n=Date.now(),r=Math.random().toString(36).substring(7),i=e.name.split(".").pop(),a=`uploads/${`${n}-${r}.${i}`}`;console.log("[Upload] Uploading file:",e.name,"",a);const{data:o,error:c}=await ui.storage.from(t).upload(a,e,{cacheControl:"3600",upsert:!1});if(c)return console.error("[Upload] Error:",c),{success:!1,error:c.message||"Failed to upload file"};const{data:{publicUrl:h}}=ui.storage.from(t).getPublicUrl(a);return console.log("[Upload] Success:",h),{success:!0,url:h,path:a}}catch(n){return console.error("[Upload] Unexpected error:",n),{success:!1,error:n.message||"Unexpected error during upload"}}}function Pj(e,t={}){const{maxSizeMB:n=10,allowedTypes:r=["image/png","image/jpeg","image/svg+xml"]}=t;if(!e)return{valid:!1,error:"No file selected"};if(!r.includes(e.type))return{valid:!1,error:`Invalid file type. Allowed: ${r.map(a=>a.split("/")[1].toUpperCase()).join(", ")}`};const i=n*1024*1024;return e.size>i?{valid:!1,error:`File too large. Maximum size: ${n}MB`}:{valid:!0}}function P5e({onExportSVG:e,onExportPNG:t,onExportPDF:n,onExportTiles:r,onExportDXF:i,onExportCanvasPDF:s,viewMode:a,exporting:o,disabled:c}){const[h,d]=pe.useState(!1),p=pe.useRef(null);pe.useEffect(()=>{const v=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return h&&document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[h]);const m=a==="solid"?"Solid":"Blend",g=v=>{d(!1),v()};return u.jsxs("div",{className:"playground-export-menu",ref:p,children:[u.jsxs("button",{className:"action-bar__btn action-bar__btn--export",onClick:()=>d(!h),disabled:c||o,children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),u.jsx("polyline",{points:"7 10 12 15 17 10"}),u.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),o?"Exporting...":"Export",u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginLeft:"0.25rem"},children:u.jsx("path",{d:h?"M18 15l-6-6-6 6":"M6 9l6 6 6-6"})})]}),h&&u.jsxs("div",{className:"playground-export-menu__dropdown",children:[u.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(e),children:[u.jsx("span",{className:"playground-export-menu__icon",children:""}),u.jsxs("div",{className:"playground-export-menu__content",children:[u.jsxs("span",{className:"playground-export-menu__title",children:["Download ",m," SVG"]}),u.jsx("span",{className:"playground-export-menu__desc",children:"Vector format for CAD/printing"})]})]}),u.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(t),children:[u.jsx("span",{className:"playground-export-menu__icon",children:""}),u.jsxs("div",{className:"playground-export-menu__content",children:[u.jsxs("span",{className:"playground-export-menu__title",children:["Download ",m," PNG"]}),u.jsx("span",{className:"playground-export-menu__desc",children:"High-res image for presentations"})]})]}),u.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(r),children:[u.jsx("span",{className:"playground-export-menu__icon",children:""}),u.jsxs("div",{className:"playground-export-menu__content",children:[u.jsx("span",{className:"playground-export-menu__title",children:"Download Tiles ZIP"}),u.jsx("span",{className:"playground-export-menu__desc",children:"1m1m SVG tiles for large printing"})]})]}),u.jsx("div",{className:"playground-export-menu__divider"}),u.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(n),children:[u.jsx("span",{className:"playground-export-menu__icon",children:""}),u.jsxs("div",{className:"playground-export-menu__content",children:[u.jsxs("span",{className:"playground-export-menu__title",children:[m," Recipe Report (PDF)"]}),u.jsx("span",{className:"playground-export-menu__desc",children:"TPV quantities & specifications"})]})]}),s&&u.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(s),children:[u.jsx("span",{className:"playground-export-menu__icon",children:""}),u.jsxs("div",{className:"playground-export-menu__content",children:[u.jsx("span",{className:"playground-export-menu__title",children:"Canvas PDF (1:100)"}),u.jsx("span",{className:"playground-export-menu__desc",children:"Scaled design with dimensions"})]})]}),i&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"playground-export-menu__divider"}),u.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(i),children:[u.jsx("span",{className:"playground-export-menu__icon",children:""}),u.jsxs("div",{className:"playground-export-menu__content",children:[u.jsx("span",{className:"playground-export-menu__title",children:"Download DXF"}),u.jsx("span",{className:"playground-export-menu__desc",children:"CAD format for AutoCAD/Rhino"})]})]})]})]})]})}function Yh(e){var n;if(!e)return null;if(e.type==="image/svg+xml")return"svg";if(e.type==="image/png"||e.type==="image/jpeg")return"image";const t=(n=e.name.split(".").pop())==null?void 0:n.toLowerCase();return t==="svg"?"svg":["png","jpg","jpeg"].includes(t)?"image":null}function N5e({loadedDesign:e,onDesignSaved:t,isEmbedded:n=!1}){const r=eg(),{inputMode:i,prompt:s,lengthMM:a,widthMM:o,arMapping:c,uploadedFileUrl:h,result:d,jobId:p,blendRecipes:m,colorMapping:g,blendSvgUrl:v,blendEditedColors:w,solidRecipes:C,solidColorMapping:x,solidSvgUrl:k,solidEditedColors:P,viewMode:j,showFinalRecipes:M,showSolidSummary:S,regionOverrides:B,originalTaggedSvg:D,regionOverridesHistory:R,historyIndex:ee,designName:ue,currentDesignId:ie,hasUnsavedChanges:ge,resetDesign:H}=r,ye=r.setInputMode,Ae=r.setPrompt,we=r.setDimensions,Be=r.setArMapping;r.setGenerationResult;const xe=r.setResult,Le=r.setJobId;r.setBlendState;const Ce=r.setBlendRecipes,Re=r.setColorMapping,it=r.setBlendSvgUrl;r.setSolidState;const nt=r.setSolidRecipes,Ue=r.setSolidColorMapping,lt=r.setSolidSvgUrl;r.updateBlendSvgUrl,r.updateSolidSvgUrl;const de=r.setBlendEditedColors,oe=r.setSolidEditedColors;r.setViewMode;const We=r.setShowFinalRecipes,Ne=r.setShowSolidSummary,ht=r.setRegionOverrides;r.addRegionOverride;const jt=r.setOriginalTaggedSvg,Ct=r.setRegionOverridesHistory,q=r.setHistoryIndex;r.canUndo,r.canRedo,r.undo,r.redo;const Ye=r.setDesignName,se=r.setCurrentDesignId,L=r.loadDesign,I=Ge=>we(Ge,a),Q=Ge=>we(o,Ge),[he,ve]=pe.useState(null),[me,Me]=pe.useState(null),[Je,De]=pe.useState(!1),[l,f]=pe.useState(!1),[b,_]=pe.useState(null),[E,A]=pe.useState(null),[T,N]=pe.useState(""),[$,F]=pe.useState(null),[G,Z]=pe.useState(!1),[Y,W]=pe.useState(null),[X,U]=pe.useState(!1),[K,V]=pe.useState(null),[ne,z]=pe.useState([]),[te,ae]=pe.useState(!1),[ce,re]=pe.useState(!1),[be,ke]=pe.useState(null),[Pe,ze]=pe.useState(!1),[_e,$e]=pe.useState(!1),[Fe,Xe]=pe.useState(!1),[Ze,Qe]=pe.useState(null),[ft,dt]=pe.useState(!1),[Et,xt]=pe.useState(null),[Te,Ke]=pe.useState(null),[mt,Nt]=pe.useState(null),[kt,Bt]=pe.useState(!1),[At,Dt]=pe.useState(0),[Ut,Rt]=pe.useState(null),[Kt,en]=pe.useState(null),[bn,En]=pe.useState(null),[wt,Tn]=pe.useState(!1),[Rn,wn]=pe.useState(!1),[Er,Or]=pe.useState(null),[sr,tr]=pe.useState(!1),[fr,ar]=pe.useState(null),[Zr,zn]=pe.useState(null),[nr,gi]=pe.useState(null),[_i,Qr]=pe.useState(!1),[yi,Pi]=pe.useState(null),pr=pe.useRef(null),mr=pe.useRef(null);pe.useEffect(()=>{(k||v)&&pr.current&&!ce&&!G&&setTimeout(()=>{var Ge;(Ge=pr.current)==null||Ge.scrollIntoView({behavior:"smooth",block:"start"})},300)},[k,v,ce,G]),pe.useEffect(()=>{(async()=>{try{const pt=await Qm({limit:1,offset:0});Pi(pt.designs.length>0)}catch(pt){console.error("[INSPIRE] Failed to check for existing designs:",pt),Pi(!0)}})()},[]),pe.useEffect(()=>{i==="upload"?we(null,null):i==="prompt"&&(o===null||a===null)&&we(5e3,5e3)},[i,we]),pe.useEffect(()=>()=>{mr.current&&mr.current.abort(),v&&v.startsWith("blob:")&&URL.revokeObjectURL(v),k&&k.startsWith("blob:")&&URL.revokeObjectURL(k)},[]),pe.useEffect(()=>{const Ge=pt=>{pt.key==="Escape"&&X&&(U(!1),V(null))};return window.addEventListener("keydown",Ge),()=>window.removeEventListener("keydown",Ge)},[X]),pe.useEffect(()=>{ne.length>0&&!te&&gr()},[ne,te]),pe.useEffect(()=>{(async()=>{if(!v&&!k){zn(null),gi(null);return}if(!_5e(B)){zn(m),gi(C);return}Qr(!0);try{if(v&&m){const pt=await jj(v,m,B,"blend");zn(pt)}if(k&&C){const pt=await jj(k,C,B,"solid");gi(pt)}}catch(pt){console.error("[INSPIRE] Failed to recalculate recipes:",pt),zn(m),gi(C)}finally{Qr(!1)}})()},[v,k,B,m,C]),pe.useEffect(()=>{if(e){const Ge=vx(e);L(Ge),e.name&&Ye(e.name),e.id&&se(e.id),Ge.originalUnflattenedSvg&&en(Ge.originalUnflattenedSvg),setTimeout(async()=>{var pt;if((pt=Ge.result)!=null&&pt.svg_url){let ct=Ge.originalTaggedSvg||null;if(ct)jt(ct);else try{const on=await(await fetch(Ge.result.svg_url)).text(),Lt=Kb(on);ct=el(Lt),jt(ct)}catch(Tt){console.error("[INSPIRE] Failed to tag SVG regions:",Tt)}try{Ge.blendRecipes&&Ge.colorMapping&&await Da(Ge.result.svg_url,Ge.colorMapping,Ge.blendRecipes,Ge.blendEditedColors,ct,Ge.regionOverrides),Ge.solidRecipes&&Ge.solidColorMapping&&await cr(Ge.result.svg_url,Ge.solidColorMapping,Ge.solidRecipes,Ge.solidEditedColors,ct,Ge.regionOverrides)}catch(Tt){console.error("[INSPIRE] Failed to regenerate SVGs:",Tt),A("Failed to restore design preview. Please try reloading.")}}},100)}},[e,L,Ye,se,jt,en]);const rr=pe.useRef(!1);pe.useEffect(()=>{if(e||rr.current||!((d==null?void 0:d.svg_url)&&!v&&!k&&(m||C)))return;rr.current=!0,(async()=>{let ct=D||null;if(!ct)try{const on=await(await fetch(d.svg_url)).text(),Lt=Kb(on);ct=el(Lt),jt(ct)}catch(Tt){console.error("[INSPIRE] Failed to tag SVG regions:",Tt)}try{m&&g&&await Da(d.svg_url,g,m,w,ct,B),C&&x&&await cr(d.svg_url,x,C,P,ct,B)}catch(Tt){console.error("[INSPIRE] Failed to regenerate SVGs:",Tt),A("Failed to restore design preview. Please try reloading.")}})()},[d,v,k,m,C,g,x,e,B,D]),pe.useEffect(()=>{d||(rr.current=!1)},[d]);const Jr=Ge=>{var Tt;const pt=(Tt=Ge.target.files)==null?void 0:Tt[0];if(!pt){ve(null);return}const ct=Pj(pt,{maxSizeMB:10,allowedTypes:["image/png","image/jpeg","image/svg+xml"]});if(!ct.valid){A(ct.error),ve(null);return}ve(pt),A(null)},Gr=Ge=>{Ge.preventDefault(),Ge.stopPropagation(),De(!0)},yr=Ge=>{Ge.preventDefault(),Ge.stopPropagation(),Ge.currentTarget===Ge.target&&De(!1)},Qt=Ge=>{Ge.preventDefault(),Ge.stopPropagation()},$r=Ge=>{Ge.preventDefault(),Ge.stopPropagation(),De(!1);const pt=Ge.dataTransfer.files;if(pt&&pt.length>0){const ct=pt[0],Tt=Pj(ct,{maxSizeMB:10,allowedTypes:["image/png","image/jpeg","image/svg+xml"]});if(!Tt.valid){A(Tt.error),ve(null);return}ve(ct),A(null)}},vn=async()=>{var Ge,pt;if(i==="prompt"&&!s.trim()){A("Please enter a design description");return}if(i==="upload"&&!he){A("Please select a file to upload");return}if(i==="upload"&&he&&!Yh(he)){A("Unsupported file type. Please upload PNG, JPG, or SVG.");return}A(null),f(!0),_(null),xe(null),Le(null),N("Initialising..."),F(null);try{let ct;if(i==="upload"&&he){const zt=Yh(he);N(zt==="svg"?"Uploading SVG file...":"Uploading image..."),Me("Uploading...");const Wt=await A5e(he);if(!Wt.success)throw new Error(Wt.error||"Failed to upload file");if(Me(null),zt==="svg"){if(N("Processing SVG..."),ct=await Ml.processUploadedSVG({svg_url:Wt.url}),!ct.success)throw new Error(ct.error||"Failed to process SVG");Le(ct.jobId),N(" SVG uploaded successfully!"),f(!1);const An=await Ml.getRecraftStatus(ct.jobId);_(An),xe(An.result),(Ge=An.result)!=null&&Ge.svg_url&&await or(An.result.svg_url,ct.jobId);return}else{if(N("Starting vectorisation..."),ct=await Ml.vectorizeImage({image_url:Wt.url}),!ct.success)throw new Error(ct.error||"Failed to start vectorisation");N(" AI is vectorising your image...")}}else if(i==="prompt"){const zt=T5e(a,o);if(Be(zt),j5e(zt)?N(`Generating ${zt.canonical.name} design panel...`):N("Initialising..."),ct=await Ml.generateRecraft({prompt:s.trim(),lengthMM:zt.recraft.height,widthMM:zt.recraft.width}),!ct.success)throw new Error(ct.error||"Failed to start generation");N(" AI is creating your design...")}Le(ct.jobId),N("Request submitted, waiting for processing...");let Tt=null,on=Date.now();mr.current=new AbortController,await Ml.waitForRecraftCompletion(ct.jobId,zt=>{var An,qn;_(zt);const Wt=Math.floor((Date.now()-on)/1e3);if(zt.status==="queued"){const Yn=[` Preparing your canvas... (${Wt}s)`,` Warming up the AI brushes... (${Wt}s)`,` Queueing your masterpiece... (${Wt}s)`,` Mixing digital paints... (${Wt}s)`,` AI is contemplating your vision... (${Wt}s)`,` Selecting the perfect colours... (${Wt}s)`,` Calculating vector paths... (${Wt}s)`,` Almost ready to create... (${Wt}s)`],Mn=Math.floor(Wt/4)%Yn.length;N(Yn[Mn])}else if(zt.status==="running")if(Tt!=="running")N(" AI is creating your design..."),Tt="running";else{const Yn=[` Creating vector shapes... (${Wt}s)`,` Applying colours and patterns... (${Wt}s)`,` Refining design details... (${Wt}s)`,` Finalising artwork... (${Wt}s)`],Mn=Math.floor(Wt/5)%Yn.length;N(Yn[Mn])}else if(zt.status==="retrying"){const Yn=((An=zt.recraft)==null?void 0:An.attempt_current)||0,Mn=((qn=zt.recraft)==null?void 0:qn.attempt_max)||3;N(` Retrying generation (attempt ${Yn}/${Mn})...`)}},2e3,mr.current.signal);const Lt=await Ml.getRecraftStatus(ct.jobId);_(Lt),xe(Lt.result),Lt.status==="completed"&&(N(" Design ready!"),f(!1),(pt=Lt.result)!=null&&pt.svg_url&&await or(Lt.result.svg_url,ct.jobId))}catch(ct){if(ct.name==="AbortError")return;console.error("Generation failed:",ct),A(ct.message),N(""),f(!1)}},Vn=()=>{const Ge=j==="solid"?k:v,pt=j==="solid"?"tpv-solid":"tpv-blend";if(Ge){const ct=document.createElement("a");ct.href=Ge,ct.download=`${pt}-${Date.now()}.svg`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct)}},jn=async Ge=>{try{const ct=await(await fetch(Ge)).text(),Lt=new DOMParser().parseFromString(ct,"image/svg+xml").querySelector("svg");if(!Lt)return null;let zt,Wt;const An=Lt.getAttribute("viewBox");if(An){const Yn=An.split(/\s+/).map(Number);zt=Yn[2],Wt=Yn[3]}else zt=parseFloat(Lt.getAttribute("width"))||1024,Wt=parseFloat(Lt.getAttribute("height"))||1024;return zt/Wt}catch(pt){return console.error("[DIMENSION] Failed to detect aspect ratio:",pt),null}},Gn=(Ge,pt)=>{I(Ge),Q(pt),Nt({width:Ge,height:pt}),Te==="pdf"?setTimeout(()=>Zt(Ge,pt),100):Te==="tiles"?setTimeout(()=>Nn(Ge,pt),100):Te==="insitu"?setTimeout(()=>Xe(!0),100):Te==="save"&&ze(!0),Ke(null)},qr=async()=>{const Ge=j==="solid"?k:v;if(i==="upload"&&(!o||!a)){const pt=await jn(Ge);if(pt){xt(pt),Ke("insitu"),dt(!0);return}else{xt(1),Ke("insitu"),dt(!0);return}}Xe(!0)},Xn=async(Ge="fast")=>{const pt=j==="solid"?k:v;if(!(!pt||kt)){if(D&&Zb(D)){Rt("This artwork has already been flattened.");return}Bt(!0),Dt(0),Rt(null);try{console.log(`[INSPIRE] Starting flatten (quality: ${Ge})`);const Tt=await(await fetch(pt)).text();Kt||(en(Tt),En({solidRecipes:C,solidColorMapping:x,blendRecipes:m,colorMapping:g}),console.log("[INSPIRE] Saved original SVG and recipes for revert"));const{svg:on,stats:Lt}=await t5e(Tt,{quality:Ge,resolution:4096,quantize:!0,onProgress:Dt});console.log("[INSPIRE] Flatten complete:",Lt);const zt=el(on);jt(zt),ht(new Map),Ct([new Map]),q(0);const Wt=new Blob([zt],{type:"image/svg+xml"}),An=URL.createObjectURL(Wt);j==="solid"?lt(An):it(An);const{recipes:qn,colorMapping:Yn}=n5e(zt);j==="solid"?(nt(qn),Ue(Yn)):(Ce(qn),Re(Yn)),console.log("[INSPIRE] Rebuilt recipes from flattened SVG:",qn.length,"colors"),Dt(100),console.log("[INSPIRE] Flatten applied successfully")}catch(ct){console.error("[INSPIRE] Flatten failed:",ct),Rt(ct.message||"Flatten failed. Please try again.")}finally{Bt(!1)}}},y=Ge=>{Or(Ge),wn(!0),Tn(!1)},O=()=>{wn(!1),Xn(Er)},J=async()=>{if(!Kt)return;console.log("[INSPIRE] Reverting to original unflattened SVG");const Ge=new Blob([Kt],{type:"image/svg+xml"}),pt=URL.createObjectURL(Ge),ct=el(Kt);jt(ct),j==="solid"?lt(pt):it(pt),bn&&(nt(bn.solidRecipes),Ue(bn.solidColorMapping),Ce(bn.blendRecipes),Re(bn.colorMapping),console.log("[INSPIRE] Restored original recipes and color mapping")),en(null),En(null),ht(new Map),Ct([new Map]),q(0),console.log("[INSPIRE] Reverted to original successfully")},le=()=>{const Ge=j==="solid"?k:v,pt=j==="solid"?"tpv-solid":"tpv-blend";if(Ge){const ct=new Image;ct.onload=()=>{const Tt=document.createElement("canvas");Tt.width=ct.naturalWidth||1e3,Tt.height=ct.naturalHeight||1e3,Tt.getContext("2d").drawImage(ct,0,0),Tt.toBlob(Lt=>{const zt=URL.createObjectURL(Lt),Wt=document.createElement("a");Wt.href=zt,Wt.download=`${pt}-${Date.now()}.png`,document.body.appendChild(Wt),Wt.click(),document.body.removeChild(Wt),URL.revokeObjectURL(zt)})},ct.src=Ge}},Se=()=>{ge()&&!window.confirm(`Start a new design?

You have unsaved changes that will be lost.`)||(H(),ve(null),f(!1),_(null),A(null),N(""),F(null),Z(!1),W(null),U(!1),V(null),re(!1),ke(null),en(null),En(null),Tn(!1),wn(!1),Or(null))},et=async()=>{const Ge=j==="solid"?k:v,pt=o>0&&a>0;if(i==="upload"&&!pt){const Tt=await jn(Ge);if(Tt){xt(Tt),Ke("save"),dt(!0);return}else{xt(1),Ke("save"),dt(!0);return}}ze(!0)},[rt,bt]=pe.useState(!1),_t=async()=>{const Ge=j==="solid"?k:v;if(i==="upload"&&(!o||!a)){const pt=await jn(Ge);if(pt){xt(pt),Ke("pdf"),dt(!0);return}else{xt(1),Ke("pdf"),dt(!0);return}}await Zt(o,a)},Zt=async(Ge,pt)=>{const ct=j==="solid"?k:v,Tt=j==="solid"?nr||C:Zr||m,on=j==="solid"?"tpv-solid":"tpv-blend";if(!ct||!Tt){A("Cannot generate PDF: missing SVG or recipes");return}bt(!0),A(null);try{const zt=await(await fetch(ct)).text(),Wt=new AbortController,An=setTimeout(()=>Wt.abort(),3e4),qn=await wa.getSession(),Yn={"Content-Type":"application/json"};qn!=null&&qn.access_token&&(Yn.Authorization=`Bearer ${qn.access_token}`);const Mn=await fetch("/api/export-pdf",{method:"POST",headers:Yn,signal:Wt.signal,body:JSON.stringify({svgString:zt,designName:ue||s||"TPV Design",projectName:"TPV Studio",dimensions:{widthMM:Ge,lengthMM:pt},recipes:Tt,mode:j,designId:p||""})});if(clearTimeout(An),!Mn.ok){const Gi=Mn.headers.get("content-type");if(Gi&&Gi.includes("application/json")){const Io=await Mn.json();throw new Error(Io.message||"PDF generation failed")}else{const Io=await Mn.text();throw console.error("PDF API error response:",Io),new Error(`Server error: ${Mn.status}`)}}const Sn=await Mn.blob(),tn=URL.createObjectURL(Sn),xn=document.createElement("a");xn.href=tn,xn.download=`${on}-${Date.now()}.pdf`,document.body.appendChild(xn),xn.click(),document.body.removeChild(xn),URL.revokeObjectURL(tn)}catch(Lt){console.error("PDF download error:",Lt),Lt.name==="AbortError"?A("PDF generation timed out. Please try again."):A(`PDF generation failed: ${Lt.message}`)}finally{bt(!1)}},rn=async()=>{const Ge=j==="solid"?k:v;if(!Ge){A("No SVG available to slice");return}if(i==="upload"&&(!o||!a)){const pt=await jn(Ge);if(pt){xt(pt),Ke("tiles"),dt(!0);return}else{xt(1),Ke("tiles"),dt(!0);return}}await Nn(o,a)},Nn=async(Ge,pt)=>{const ct=j==="solid"?k:v;try{await Q9(ct,{width:Ge,length:pt},ue||"tpv-design")}catch(Tt){console.error("Tile download error:",Tt),A(`Failed to download tiles: ${Tt.message}`)}},or=async(Ge=null,pt=null)=>{const ct=Ge||(d==null?void 0:d.svg_url),Tt=pt||p;if(!ct){A("No SVG available to analyse");return}{A(null),N(" Processing design colours...");let on=null;try{const zt=await(await fetch(ct)).text(),Wt=Kb(zt);on=el(Wt),jt(on)}catch(Lt){console.error("[TPV-STUDIO] Failed to tag SVG regions:",Lt)}await vt(ct,Tt,on);return}},es=async()=>{Z(!1),W(null),re(!1),ke(null),j==="solid"?oe(new Map):de(new Map),d!=null&&d.svg_url&&await or(d.svg_url,p)},Ft=async Ge=>{var pt;if(!ue){if(!s||i!=="prompt"){he&&Ye(`TPV Design  ${he.name.replace(/\.[^/.]+$/,"")}`);return}$e(!0);try{const ct=(Ge==null?void 0:Ge.slice(0,6).map(on=>{var zt,Wt;const Lt=(Wt=(zt=on.chosenRecipe)==null?void 0:zt.components)==null?void 0:Wt[0];return(Lt==null?void 0:Lt.name)||null}).filter(Boolean))||[],Tt=await Ml.generateDesignName({prompt:s,colors:ct,dimensions:{widthMM:o,lengthMM:a}});Tt.success&&((pt=Tt.names)==null?void 0:pt.length)>0?Ye(Tt.names[0]):Ye(He(s))}catch(ct){console.error("[TPV-STUDIO] Name generation failed:",ct),Ye(He(s))}finally{$e(!1)}}},He=Ge=>Ge?`TPV Design  ${Ge.split(/[,.]/)[0].trim().slice(0,40)}`:"TPV Playground Design",vt=async(Ge=null,pt=null,ct=null)=>{const Tt=Ge||(d==null?void 0:d.svg_url),on=pt||p,Lt=ct||D;if(Tt)try{const zt=await fetch("/api/solid-recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({svg_url:Tt,job_id:on,max_colors:15})}),Wt=await zt.json();if(!zt.ok)throw new Error(Wt.error||"Failed to generate solid recipes");if(Wt.success){nt(Wt.recipes);const An=new Map(Object.entries(Wt.colorMapping||{}));Ue(An);try{const{dataUrl:qn,stats:Yn}=await Xl(Tt,An,Lt);lt(qn),Yn.colorsNotMapped&&Yn.colorsNotMapped.size>0&&console.warn("[TPV-STUDIO] Unmapped colors in solid mode:",Array.from(Yn.colorsNotMapped)),Ft(Wt.recipes)}catch(qn){console.error("[TPV-STUDIO] Failed to generate solid SVG:",qn)}}}catch(zt){console.error("[TPV-STUDIO] Solid generation failed:",zt)}},$t=(Ge,pt="palette")=>{if(X&&K&&pt==="palette"){Kn(K.regionId,Ge.hex),U(!1),V(null);return}pt==="palette"&&(j==="blend"?(ke(Ge),re(!0),We(!1)):(W(Ge),Z(!0),Ne(!1)))},fn=Ge=>{X?(Kn(K.regionId,Ge.sourceColor),U(!1),V(null)):(U(!0),V(Ge))},Kn=(Ge,pt)=>{const ct=typeof pt=="string"?{hex:pt,editType:"eyedrop"}:pt;z(Tt=>[...Tt,{regionId:Ge,colorData:{...ct,hex:ct.hex.toLowerCase()},viewMode:j}])},gr=async()=>{if(te||ne.length===0)return;ae(!0);const Ge=ne[0],pt=Ge.colorData;try{const ct=new Map(B);ct.set(Ge.regionId,pt),Ge.viewMode==="blend"?await rs(null,null,ct):await ra(null,null,ct),ht(ct);const Tt=r.historyIndex,Lt=r.regionOverridesHistory.slice(0,Tt+1);Lt.push(new Map(ct)),Lt.length>50&&Lt.shift(),Ct(Lt),q(Lt.length-1)}catch(ct){console.error("[TPV-STUDIO] Failed to process region recolor:",ct)}finally{z(ct=>ct.slice(1)),ae(!1)}},ni=()=>{U(!1),V(null)},Vi=()=>{K&&(Kn(K.regionId,"transparent"),U(!1),V(null))},xs=async()=>{if(!K)return;const Ge=j==="blend"?v:k;if(!Ge){ar("No SVG content to cut");return}const pt=p5e(document.querySelector(`[data-region-id="${K.regionId}"]`));if(!pt.allowed){ar(pt.reason);return}tr(!0),ar(null);try{const Tt=await(await fetch(Ge)).text(),on=m5e(Tt);if(!on.canProceed){ar(`Operation blocked: ${on.warning}. Try "Flatten Artwork" first.`),tr(!1);return}console.log("[InspirePanel] Starting true cut-out for region:",K.regionId),Kt||(en(Tt),En({solidRecipes:C,solidColorMapping:x,blendRecipes:m,colorMapping:g}),console.log("[InspirePanel] Saved original SVG and recipes for revert (before cut-out)"));const Lt=await f5e(Tt,K.regionId);if(Lt.svg){console.log("[InspirePanel] Cut-out complete:",Lt.stats);const zt=new Blob([Lt.svg],{type:"image/svg+xml"}),Wt=URL.createObjectURL(zt);j==="blend"?it(Wt):lt(Wt),jt(Lt.svg),U(!1),V(null)}}catch(ct){console.error("[InspirePanel] Cut-out error:",ct),ar(ct.message||"Failed to perform cut-out")}finally{tr(!1)}},ts=Ge=>{if(!K)return;const pt={hex:Ge.hex,tpvCode:Ge.code,tpvName:Ge.name,originalHex:K.sourceColor,editType:"solid"};Kn(K.regionId,pt),U(!1),V(null)},lr=async()=>{if(ee<=0)return;const Ge=ee-1,pt=R[Ge];ht(new Map(pt)),q(Ge),j==="blend"?await rs(null,null,pt):await ra(null,null,pt)},$s=async()=>{if(ee>=R.length-1)return;const Ge=ee+1,pt=R[Ge];ht(new Map(pt)),q(Ge),j==="blend"?await rs(null,null,pt):await ra(null,null,pt)},ns=async Ge=>{if(Y)if(j==="solid"){const ct=(nr||C).find(Tt=>Tt.targetColor.hex.toLowerCase()===Y.hex.toLowerCase());if(ct!=null&&ct.isAddedFromEdit){const Tt=Y.hex.toLowerCase(),on=new Map(B),Lt=fi.find(Wt=>Wt.hex.toLowerCase()===Ge.toLowerCase());B.forEach((Wt,An)=>{(typeof Wt=="string"?Wt:Wt.hex).toLowerCase()===Tt&&on.set(An,{hex:Ge,tpvCode:(Lt==null?void 0:Lt.code)||null,tpvName:(Lt==null?void 0:Lt.name)||null,originalHex:Wt.originalHex||Tt,editType:"solid"})});const zt=R.slice(0,ee+1);zt.push(new Map(on)),zt.length>50&&zt.shift(),ht(on),Ct(zt),q(zt.length-1),W({...Y,hex:Ge,blendHex:Ge}),await ra(P,Ge,on)}else{const Tt=new Map(P);((ct==null?void 0:ct.mergedOriginalColors)||[Y.originalHex.toLowerCase()]).forEach(Lt=>{Tt.set(Lt,{newHex:Ge.toLowerCase()})}),oe(Tt),W({...Y,hex:Ge,blendHex:Ge}),await ra(Tt,Ge)}}else{const pt=new Map(w);pt.set(Y.originalHex.toLowerCase(),{newHex:Ge.toLowerCase()}),de(pt),W({...Y,hex:Ge,blendHex:Ge}),await rs(pt,Ge)}};pe.useCallback(async({blendHex:Ge,parts:pt,recipe:ct})=>{if(be)if(be.isAddedFromEdit){const Tt=be.hex.toLowerCase(),on=new Map(B);B.forEach((zt,Wt)=>{(typeof zt=="string"?zt:zt.hex).toLowerCase()===Tt&&on.set(Wt,{hex:Ge,originalHex:zt.originalHex||Tt,editType:"blend",blendComponents:(ct==null?void 0:ct.components)||null})}),ke({...be,hex:Ge,blendHex:Ge}),await rs(w,Ge,on);const Lt=R.slice(0,ee+1);Lt.push(new Map(on)),Lt.length>50&&Lt.shift(),ht(on),Ct(Lt),q(Lt.length-1)}else{const Tt=new Map(w);Tt.set(be.originalHex.toLowerCase(),{newHex:Ge.toLowerCase(),recipe:ct,parts:pt}),de(Tt),ke({...be,hex:Ge,blendHex:Ge}),await rs(Tt,Ge)}},[be,w,B,R,ee,d,g]);const rs=async(Ge=null,pt=null,ct=null)=>{if(!(!(d!=null&&d.svg_url)||!g||!m))try{const Tt=new Map(g),on=Ge||w;on.forEach((Sn,tn)=>{if(Sn.newHex){const xn=tn.toLowerCase();Tt.set(xn,{...Tt.get(xn),blendHex:Sn.newHex})}});const Lt=m.map(Sn=>{const tn=on.get(Sn.originalColor.hex.toLowerCase());if(tn!=null&&tn.newHex){const xn={...Sn,targetColor:{...Sn.targetColor,hex:tn.newHex},blendColor:{...Sn.blendColor,hex:tn.newHex}};return tn.recipe&&tn.recipe.components&&(xn.chosenRecipe={...Sn.chosenRecipe,components:tn.recipe.components,deltaE:0,quality:"Excellent"}),xn}return Sn}),{svgText:zt,stats:Wt}=await Xl(d.svg_url,Tt,D),An=ct!==null?ct:B,qn=wu(zt,An);v&&v.startsWith("blob:")&&URL.revokeObjectURL(v);const Yn=new Blob([qn],{type:"image/svg+xml"}),Mn=URL.createObjectURL(Yn);it(Mn),Re(Tt),Ce(Lt),An.size>0}catch(Tt){console.error("[TPV-STUDIO] Failed to regenerate blend SVG:",Tt)}},ra=async(Ge=null,pt=null,ct=null)=>{if(!(!(d!=null&&d.svg_url)||!x||!C))try{const Tt=new Map(x),on=Ge||P;on.forEach((Sn,tn)=>{if(Sn.newHex){const xn=tn.toLowerCase();Tt.set(xn,{...Tt.get(xn),blendHex:Sn.newHex})}});const Lt=C.map(Sn=>{const tn=on.get(Sn.originalColor.hex.toLowerCase());if(tn!=null&&tn.newHex){const xn=fi.find(Gi=>Gi.hex.toLowerCase()===tn.newHex.toLowerCase());return xn?{...Sn,targetColor:{...Sn.targetColor,hex:tn.newHex},blendColor:{hex:tn.newHex,rgb:xn.rgb,lab:xn.lab},chosenRecipe:{components:[{code:xn.code,name:xn.name,hex:xn.hex,rgb:xn.rgb,lab:xn.lab,ratio:1}],blendColor:{hex:xn.hex,rgb:xn.rgb,lab:xn.lab},deltaE:0,quality:"Perfect"}}:{...Sn,targetColor:{...Sn.targetColor,hex:tn.newHex},blendColor:{...Sn.blendColor,hex:tn.newHex}}}return Sn}),{svgText:zt,stats:Wt}=await Xl(d.svg_url,Tt,D),An=ct!==null?ct:B,qn=wu(zt,An);k&&k.startsWith("blob:")&&URL.revokeObjectURL(k);const Yn=new Blob([qn],{type:"image/svg+xml"}),Mn=URL.createObjectURL(Yn);lt(Mn),Ue(Tt),nt(Lt),An.size>0}catch(Tt){console.error("[TPV-STUDIO] Failed to regenerate solid SVG:",Tt)}},Ds=Ge=>{if(!(Ge!=null&&Ge.components))return null;const pt={};return Ge.components.forEach(ct=>{ct.code&&ct.parts&&(pt[ct.code]=ct.parts)}),Object.keys(pt).length>0?{parts:pt}:null};pe.useCallback(Ge=>{var ct;if(!Ge)return null;const pt=w.get((ct=Ge.originalHex)==null?void 0:ct.toLowerCase());return pt!=null&&pt.recipe?pt.recipe:Ge.isAddedFromEdit&&Ge.chosenRecipe?Ds(Ge.chosenRecipe):Ge.recipe||null},[w]);const Da=async(Ge,pt,ct,Tt,on=null,Lt=null)=>{try{const zt=new Map(pt);Tt&&Tt.size>0&&Tt.forEach((Sn,tn)=>{const xn=tn.toLowerCase();zt.has(xn)&&zt.set(xn,{...zt.get(xn),blendHex:Sn.newHex})});const{dataUrl:Wt,svgText:An}=await Xl(Ge,zt,on);let qn=An;Lt&&Lt.size>0&&(qn=wu(An,Lt));const Yn=new Blob([qn],{type:"image/svg+xml"}),Mn=URL.createObjectURL(Yn);it(Mn)}catch(zt){console.error("[INSPIRE] Failed to regenerate blend SVG:",zt)}},cr=async(Ge,pt,ct,Tt,on=null,Lt=null)=>{try{const zt=new Map(pt);Tt&&Tt.size>0&&Tt.forEach((Sn,tn)=>{const xn=tn.toLowerCase();zt.has(xn)&&zt.set(xn,{...zt.get(xn),blendHex:Sn.newHex})});const{dataUrl:Wt,svgText:An}=await Xl(Ge,zt,on);let qn=An;Lt&&Lt.size>0&&(qn=wu(An,Lt));const Yn=new Blob([qn],{type:"image/svg+xml"}),Mn=URL.createObjectURL(Yn);lt(Mn)}catch(zt){console.error("[INSPIRE] Failed to regenerate solid SVG:",zt)}};return u.jsxs("div",{className:`inspire-panel-recraft${n?" inspire-panel-recraft--embedded":""}`,children:[!n&&u.jsxs("div",{className:"panel-header",children:[u.jsx("h2",{children:"TPV Studio - Vector AI"}),u.jsx("p",{className:"subtitle",children:"AI-powered vector designs for playground surfacing"})]}),!d&&!l&&yi===!1&&u.jsxs("div",{className:"welcome-guidance",children:[u.jsx("div",{className:"welcome-icon",children:""}),u.jsx("h3",{children:"Create Your First Design"}),u.jsx("p",{children:"Choose how you'd like to create your TPV design below. You can describe what you want, upload an image to convert, or process an existing SVG file. Once generated, you'll be able to edit colours, export PDFs with specifications, and preview designs on-site."})]}),u.jsxs("div",{className:"input-mode-tabs",children:[u.jsxs("button",{className:`input-mode-tab ${i==="prompt"?"active":""}`,onClick:()=>{ye("prompt"),ve(null),A(null)},disabled:l,children:[u.jsxs("svg",{className:"mode-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M12 3l1.545 4.635L18.18 9.18l-4.635 1.545L12 15.36l-1.545-4.635L5.82 9.18l4.635-1.545L12 3z"}),u.jsx("path",{d:"M5 21l1.5-4.5L2 15l4.5-1.5L8 9l1.5 4.5L14 15l-4.5 1.5L8 21z",opacity:"0.5"})]}),u.jsx("span",{className:"mode-title",children:"Text Prompt"}),u.jsx("span",{className:"mode-description",children:"Describe your design"})]}),u.jsxs("button",{className:`input-mode-tab ${i==="upload"?"active":""}`,onClick:()=>{ye("upload"),Ae(""),A(null)},disabled:l,children:[u.jsxs("svg",{className:"mode-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),u.jsx("span",{className:"mode-title",children:"Upload Design"}),u.jsx("span",{className:"mode-description",children:"PNG, JPG, or SVG"})]})]}),u.jsxs("div",{className:"form-section",children:[i==="prompt"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"prompt",children:"Design Description"}),u.jsx("textarea",{id:"prompt",value:s,onChange:Ge=>Ae(Ge.target.value),placeholder:"e.g., calm ocean theme with big fish silhouettes and waves",rows:4,disabled:l,className:"prompt-input"}),u.jsx("p",{className:"helper-text",children:"Describe the design you want to generate. The AI will create a vector illustration based on your description. Perfect for creating completely new designs from scratch - just describe colors, themes, and elements you want."})]}),i==="upload"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"design-upload",children:"Upload Design File"}),u.jsxs("div",{className:`drop-zone ${Je?"dragging":""} ${he?"has-file":""}`,onDragEnter:Gr,onDragLeave:yr,onDragOver:Qt,onDrop:$r,children:[u.jsx("input",{id:"design-upload",type:"file",accept:".png,.jpg,.jpeg,.svg,image/png,image/jpeg,image/svg+xml",onChange:Jr,disabled:l,className:"file-input-hidden"}),u.jsx("label",{htmlFor:"design-upload",className:"drop-zone-content",children:he?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"upload-icon success",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),u.jsx("span",{className:"file-name",children:he.name}),u.jsx("span",{className:"file-type-badge",children:Yh(he)==="svg"?"SVG - will process immediately":"Image - will vectorise with AI"}),u.jsx("span",{className:"drop-hint",children:"Click to change file"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),u.jsx("span",{className:"drop-text",children:"Drag & drop your design here"}),u.jsx("span",{className:"drop-hint",children:"or click to browse"}),u.jsx("span",{className:"supported-formats",children:"PNG, JPG, or SVG"})]})})]}),u.jsxs("p",{className:"helper-text",children:["Upload your design file. ",u.jsx("strong",{children:"PNG/JPG"})," images will be vectorised with AI (~30 seconds). ",u.jsx("strong",{children:"SVG"})," files are processed immediately for TPV colour matching."]})]}),i==="prompt"&&u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"length",children:"Length (mm)"}),u.jsx("input",{id:"length",type:"number",value:a,onChange:Ge=>Q(parseInt(Ge.target.value,10)),min:1e3,max:2e4,step:100,disabled:l})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"width",children:"Width (mm)"}),u.jsx("input",{id:"width",type:"number",value:o,onChange:Ge=>I(parseInt(Ge.target.value,10)),min:1e3,max:2e4,step:100,disabled:l})]})]}),E&&u.jsxs("div",{className:"error-message",children:[u.jsx("strong",{children:"Error:"})," ",E]}),me&&u.jsx("div",{className:"upload-progress",children:u.jsx("p",{children:me})}),u.jsx("button",{onClick:vn,disabled:l||i==="prompt"&&!s.trim()||i==="upload"&&!he,className:"generate-button",children:l?i==="upload"&&he&&Yh(he)==="svg"?"Processing...":"Generating...":i==="prompt"?"Generate Vector Design":he&&Yh(he)==="svg"?"Process SVG":"Vectorise & Process"})]}),l&&u.jsxs("div",{className:"progress-section",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-bar-fill"})}),u.jsx("p",{className:"progress-message",children:T})]}),d&&!l&&u.jsxs("div",{className:"results-section",children:[c&&u.jsxs("div",{className:`ar-info ${c.layout.mode}`,children:[u.jsxs("div",{className:"ar-info-header",children:[u.jsx("strong",{children:"Layout:"})," ",c.layout.reason]}),u.jsxs("div",{className:"ar-info-details",children:[u.jsxs("span",{children:["Requested: ",c.user.formatted]}),u.jsx("span",{children:""}),u.jsxs("span",{children:["Generated: ",c.canonical.name," panel"]}),c.layout.mode==="framing"&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{className:"layout-note",children:"Panel centred with base colour surround"})]}),c.layout.mode==="tiling"&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{className:"layout-note",children:"Pattern will repeat along length"})]})]})]}),Yl.BLEND_MODE_ENABLED,D&&(v||k)&&u.jsxs("div",{className:"complexity-indicator",children:[u.jsx(GTe,{svgContent:D}),Kt&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"simplified-badge",children:"Simplified"}),u.jsx("button",{className:"revert-btn",onClick:J,title:"Restore original artwork",children:" Revert"})]}),!Kt&&!Zb(D)&&u.jsxs("div",{className:"troubleshoot-dropdown",children:[u.jsxs("button",{className:"troubleshoot-toggle",onClick:()=>Tn(!wt),children:["Having issues? ",wt?"":""]}),wt&&u.jsxs("div",{className:"troubleshoot-menu",children:[u.jsx("div",{className:"troubleshoot-header",children:"Simplify Artwork"}),u.jsx("p",{className:"troubleshoot-desc",children:"If editing feels slow or you see visual artifacts, simplifying can help."}),u.jsxs("div",{className:"troubleshoot-buttons",children:[u.jsx("button",{onClick:()=>y("fast"),disabled:kt,children:"Quick"}),u.jsx("button",{onClick:()=>y("clean"),disabled:kt,children:"Smooth"})]})]})]}),!Kt&&Zb(D)&&u.jsx("span",{className:"simplified-badge",children:"Simplified"})]}),Rn&&u.jsx("div",{className:"modal-overlay",onClick:()=>wn(!1),children:u.jsxs("div",{className:"flatten-confirm-modal",onClick:Ge=>Ge.stopPropagation(),children:[u.jsx("h3",{children:"Simplify Artwork?"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Converts vector paths to traced outlines"}),u.jsx("li",{children:"Locks in current colors"}),u.jsx("li",{children:"May slightly simplify geometry"})]}),u.jsx("p",{className:"modal-note",children:"You can revert to the original later."}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{onClick:()=>wn(!1),children:"Cancel"}),u.jsx("button",{onClick:O,className:"primary",children:"Simplify"})]})]})}),kt&&u.jsx("div",{className:"flatten-overlay",children:u.jsxs("div",{className:"flatten-modal",children:[u.jsx("div",{className:"flatten-spinner"}),u.jsx("div",{className:"flatten-title",children:"Flattening Artwork..."}),u.jsx("div",{className:"flatten-progress-bar",children:u.jsx("div",{className:"flatten-progress-fill",style:{width:`${At}%`}})}),u.jsxs("div",{className:"flatten-progress-text",children:[At,"%"]}),u.jsx("div",{className:"flatten-warning",children:"This converts paths to traced outlines. Region colors will be reset."})]})}),Ut&&u.jsxs("div",{className:"flatten-error",children:[u.jsx("span",{children:Ut}),u.jsx("button",{onClick:()=>Rt(null),children:""})]}),Yl.BLEND_MODE_ENABLED,j==="solid"&&k&&C&&u.jsx("div",{ref:pr,children:u.jsx(pU,{blendSvgUrl:k,recipes:nr||C,mode:"solid",onColorClick:$t,onRegionClick:fn,onEyedropperCancel:ni,onMakeTransparent:Vi,onTrueCutout:xs,isCutoutProcessing:sr,cutoutError:fr,onSelectTPVColor:ts,selectedColor:Y,editedColors:P,onResetAll:es,designName:ue,onNameChange:Ye,isNameLoading:_e,onInSituClick:qr,eyedropperActive:X,eyedropperRegion:K,onRegionUndo:lr,onRegionRedo:$s,canUndo:ee>0,canRedo:ee<R.length-1,regionOverridesCount:B.size})}),Yl.BLEND_MODE_ENABLED,(v||k)&&u.jsxs("div",{className:"action-bar",children:[u.jsxs("button",{className:"action-bar__btn action-bar__btn--secondary",onClick:Se,title:"Start a new design",children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M12 5v14M5 12h14"})}),"New"]}),u.jsxs("button",{className:"action-bar__btn action-bar__btn--primary",onClick:et,title:"Save this design to your gallery",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),u.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),u.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save"]}),u.jsx(P5e,{onExportSVG:Vn,onExportPNG:le,onExportPDF:_t,onExportTiles:rn,viewMode:j,exporting:rt,disabled:!(v||k)})]})]}),Yl.BLEND_MODE_ENABLED,j==="solid"&&k&&C&&!S&&u.jsxs("div",{className:"finalize-section",children:[u.jsx("button",{onClick:()=>Ne(!0),className:"finalize-button",children:"View TPV Colours Used"}),u.jsx("p",{className:"finalize-hint",children:"See which pure TPV colours are used in this design"})]}),Yl.BLEND_MODE_ENABLED,S&&C&&u.jsx(hU,{recipes:nr||C,onClose:()=>{Ne(!1)},isRecalculating:_i}),G&&Y&&u.jsx(Eoe,{color:Y,mode:j,onColorChange:ns,onClose:()=>{Z(!1),W(null)}}),Pe&&u.jsx(Aoe,{currentState:{inputMode:i,prompt:s,selectedFile:he,lengthMM:(mt==null?void 0:mt.height)||a,widthMM:(mt==null?void 0:mt.width)||o,result:d,viewMode:j,blendRecipes:m,solidRecipes:C,colorMapping:g,solidColorMapping:x,solidEditedColors:P,blendEditedColors:w,blendSvgUrl:v,solidSvgUrl:k,arMapping:c,jobId:p,inSituData:Ze,regionOverrides:B,originalTaggedSvg:D,originalUnflattenedSvg:Kt},existingDesignId:ie,initialName:ue,onClose:()=>{ze(!1),Nt(null)},onSaved:(Ge,pt)=>{ze(!1),Nt(null),Pi(!0),pt&&Ye(pt),t&&t(pt)}}),Fe&&u.jsx(UO,{designUrl:j==="solid"?k:v,designDimensions:{width:o,length:a},onClose:()=>Xe(!1),onSaved:Ge=>{Qe(Ge),Xe(!1)}}),u.jsx(Hoe,{isOpen:ft,onClose:()=>{dt(!1),Ke(null)},onConfirm:Gn,aspectRatio:Et,defaultLongestSide:5e3}),u.jsx("style",{jsx:!0,children:`
        .inspire-panel-recraft {
          max-width: var(--max-width-xl);
          margin: 0 auto;
          padding: var(--space-4);
        }

        .panel-header {
          text-align: center;
          margin-bottom: var(--space-6);
        }

        .panel-header h2 {
          font-family: var(--font-heading);
          font-size: var(--text-3xl);
          margin: 0 0 var(--space-2) 0;
          color: var(--color-primary);
          font-weight: var(--font-bold);
          letter-spacing: var(--tracking-tight);
        }

        .subtitle {
          color: var(--color-text-secondary);
          font-size: var(--text-base);
          line-height: var(--leading-relaxed);
        }

        /* Complexity Indicator (Phase 1.5 Diagnostics) */
        .complexity-indicator {
          display: flex;
          align-items: center;
          justify-content: flex-end;
          gap: 1rem;
          padding: 0.5rem 0;
          margin-bottom: 0.5rem;
        }

        /* Troubleshoot Dropdown (Phase 3) */
        .troubleshoot-dropdown {
          position: relative;
        }

        .troubleshoot-toggle {
          padding: 0.375rem 0.75rem;
          font-size: 0.75rem;
          font-weight: 500;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 4px;
          color: #64748b;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .troubleshoot-toggle:hover {
          background: #f1f5f9;
          border-color: #cbd5e1;
          color: #475569;
        }

        .troubleshoot-menu {
          position: absolute;
          top: 100%;
          right: 0;
          margin-top: 0.5rem;
          padding: 1rem;
          background: white;
          border: 1px solid #e2e8f0;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          min-width: 240px;
          z-index: 100;
        }

        .troubleshoot-header {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 0.5rem;
        }

        .troubleshoot-desc {
          font-size: 0.75rem;
          color: #64748b;
          margin: 0 0 0.75rem 0;
          line-height: 1.4;
        }

        .troubleshoot-buttons {
          display: flex;
          gap: 0.5rem;
        }

        .troubleshoot-buttons button {
          flex: 1;
          padding: 0.5rem 0.75rem;
          font-size: 0.75rem;
          font-weight: 500;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.15s ease;
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          color: #475569;
        }

        .troubleshoot-buttons button:hover:not(:disabled) {
          background: #e2e8f0;
          border-color: #94a3b8;
        }

        .troubleshoot-buttons button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Simplified Badge & Revert Button */
        .simplified-badge {
          display: inline-block;
          padding: 0.125rem 0.5rem;
          font-size: 0.65rem;
          font-weight: 600;
          color: white;
          background: #22c55e;
          border-radius: 3px;
          text-transform: uppercase;
          letter-spacing: 0.03em;
        }

        .revert-btn {
          padding: 0.25rem 0.625rem;
          font-size: 0.75rem;
          font-weight: 500;
          background: #fef3c7;
          border: 1px solid #fcd34d;
          border-radius: 4px;
          color: #92400e;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .revert-btn:hover {
          background: #fde68a;
          border-color: #fbbf24;
        }

        /* Flatten Confirmation Modal */
        .flatten-confirm-modal {
          background: white;
          padding: 1.5rem;
          border-radius: 12px;
          max-width: 360px;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .flatten-confirm-modal h3 {
          margin: 0 0 1rem 0;
          font-size: 1.125rem;
          color: #1e293b;
        }

        .flatten-confirm-modal ul {
          margin: 0 0 1rem 0;
          padding-left: 1.25rem;
          color: #475569;
          font-size: 0.875rem;
        }

        .flatten-confirm-modal li {
          margin-bottom: 0.25rem;
        }

        .flatten-confirm-modal .modal-note {
          margin: 0 0 1rem 0;
          padding: 0.75rem;
          background: #f0fdf4;
          border-radius: 6px;
          font-size: 0.8rem;
          color: #166534;
        }

        .flatten-confirm-modal .modal-actions {
          display: flex;
          gap: 0.75rem;
          justify-content: flex-end;
        }

        .flatten-confirm-modal .modal-actions button {
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          font-weight: 500;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .flatten-confirm-modal .modal-actions button:first-child {
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          color: #475569;
        }

        .flatten-confirm-modal .modal-actions button:first-child:hover {
          background: #e2e8f0;
        }

        .flatten-confirm-modal .modal-actions button.primary {
          background: #ff6b35;
          border: 1px solid #ff6b35;
          color: white;
        }

        .flatten-confirm-modal .modal-actions button.primary:hover {
          background: #e55a2b;
        }

        /* Flatten Progress Overlay */
        .flatten-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }

        .flatten-modal {
          background: white;
          border-radius: 12px;
          padding: 2rem;
          text-align: center;
          max-width: 320px;
          box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .flatten-spinner {
          width: 48px;
          height: 48px;
          border: 4px solid #e2e8f0;
          border-top-color: #3b82f6;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .flatten-title {
          font-size: 1.125rem;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 1rem;
        }

        .flatten-progress-bar {
          height: 8px;
          background: #e2e8f0;
          border-radius: 4px;
          overflow: hidden;
          margin-bottom: 0.5rem;
        }

        .flatten-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, #3b82f6, #60a5fa);
          border-radius: 4px;
          transition: width 0.2s ease;
        }

        .flatten-progress-text {
          font-size: 0.875rem;
          font-weight: 500;
          color: #64748b;
          margin-bottom: 1rem;
        }

        .flatten-warning {
          font-size: 0.75rem;
          color: #94a3b8;
          line-height: 1.4;
        }

        /* Flatten Error */
        .flatten-error {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 0.5rem;
          padding: 0.75rem 1rem;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 6px;
          margin-bottom: 0.5rem;
          font-size: 0.875rem;
          color: #dc2626;
        }

        .flatten-error button {
          background: none;
          border: none;
          font-size: 1.25rem;
          color: #dc2626;
          cursor: pointer;
          padding: 0;
          line-height: 1;
          opacity: 0.6;
        }

        .flatten-error button:hover {
          opacity: 1;
        }

        /* Welcome Guidance */
        .welcome-guidance {
          background: linear-gradient(135deg, #fff5f0 0%, #fff9f7 100%);
          border: 2px solid #ff6b35;
          border-radius: var(--radius-lg);
          padding: var(--space-6);
          margin-bottom: var(--space-6);
          text-align: center;
        }

        .welcome-icon {
          font-size: 3rem;
          margin-bottom: var(--space-2);
        }

        .welcome-guidance h3 {
          margin: 0 0 var(--space-3);
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          color: var(--color-primary);
        }

        .welcome-guidance p {
          margin: 0;
          color: var(--color-text-secondary);
          font-size: var(--text-base);
          line-height: var(--leading-relaxed);
          max-width: 600px;
          margin-left: auto;
          margin-right: auto;
        }

        /* Input Mode Tabs - Enhanced cards */
        .input-mode-tabs {
          display: flex;
          gap: var(--space-2);
          margin-bottom: var(--space-3);
          background: var(--color-bg-subtle);
          padding: var(--space-1);
          border-radius: var(--radius-lg);
        }

        .input-mode-tab {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: var(--space-1);
          padding: var(--space-3);
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .input-mode-tab:hover:not(:disabled) {
          border-color: var(--color-primary);
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        .input-mode-tab.active {
          background: linear-gradient(135deg, var(--color-bg-subtle) 0%, var(--color-bg-card) 100%);
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .input-mode-tab:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mode-icon {
          width: 28px;
          height: 28px;
          color: var(--color-text-secondary);
          transition: all var(--transition-base);
        }

        .input-mode-tab:hover:not(:disabled) .mode-icon {
          color: var(--color-primary);
          transform: scale(1.1);
        }

        .input-mode-tab.active .mode-icon {
          color: var(--color-primary);
        }

        .input-mode-tab .mode-title {
          font-family: var(--font-heading);
          font-size: var(--text-sm);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
          margin-top: 0;
        }

        .input-mode-tab .mode-description {
          display: none; /* Hidden to save space */
        }

        .input-mode-tab.active .mode-title {
          color: var(--color-primary);
          font-weight: var(--font-bold);
        }

        /* Helper text */
        .helper-text {
          margin-top: var(--space-1);
          font-size: var(--text-sm);
          color: var(--color-text-tertiary);
          font-style: normal;
          line-height: var(--leading-snug);
        }

        /* Drag & Drop File Upload */
        .file-input-hidden {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
        }

        .drop-zone {
          position: relative;
          width: 100%;
          min-height: 120px;
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-subtle);
          transition: all var(--transition-base);
        }

        .drop-zone.dragging {
          border-color: var(--color-primary);
          background: var(--color-primary-light);
          background: linear-gradient(135deg, rgba(30, 74, 122, 0.05) 0%, rgba(30, 74, 122, 0.1) 100%);
          box-shadow: var(--shadow-glow);
        }

        .drop-zone.has-file {
          border-color: var(--color-success);
          background: var(--color-success-light);
        }

        .drop-zone-content {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: var(--space-1);
          padding: var(--space-4);
          cursor: pointer;
          min-height: 120px;
        }

        .upload-icon {
          width: 36px;
          height: 36px;
          color: var(--color-text-secondary);
          transition: all var(--transition-base);
        }

        .upload-icon.success {
          color: var(--color-success);
        }

        .drop-zone:hover .upload-icon {
          color: var(--color-primary);
          transform: scale(1.1);
        }

        .drop-zone.has-file:hover .upload-icon.success {
          color: var(--color-success);
        }

        .drop-text {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
        }

        .file-name {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-success);
          max-width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .drop-hint {
          font-size: var(--text-sm);
          color: var(--color-text-tertiary);
        }

        .file-type-badge {
          display: inline-block;
          font-size: var(--text-xs);
          color: var(--color-text-secondary);
          background: var(--color-bg-tertiary);
          padding: var(--space-1) var(--space-2);
          border-radius: var(--radius-sm);
          margin-top: var(--space-1);
        }

        .supported-formats {
          display: block;
          font-size: var(--text-xs);
          color: var(--color-text-tertiary);
          margin-top: var(--space-2);
          font-weight: var(--font-medium);
        }

        .drop-zone.dragging .drop-text,
        .drop-zone.dragging .drop-hint {
          color: var(--color-primary);
        }

        .upload-progress {
          padding: var(--space-2);
          background: var(--color-info-light);
          border: 1px solid var(--color-info);
          border-radius: var(--radius-md);
          color: var(--color-info);
          margin-bottom: var(--space-2);
          text-align: center;
          font-size: var(--text-sm);
        }

        .form-section {
          background: var(--color-bg-card);
          padding: var(--space-3);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-3);
          border: 1px solid var(--color-border);
          box-shadow: var(--shadow-xs);
        }

        .form-group {
          margin-bottom: var(--space-3);
        }

        .form-group label {
          display: block;
          margin-bottom: var(--space-2);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
          font-size: var(--text-sm);
        }

        .prompt-input {
          width: 100%;
          padding: var(--space-3);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          font-family: inherit;
          font-size: var(--text-base);
          background: var(--color-bg-card);
          color: var(--color-text-primary);
          transition: border-color var(--transition-base);
        }

        .prompt-input:focus {
          outline: none;
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: var(--space-3);
        }

        input[type="number"] {
          width: 100%;
          padding: var(--space-2);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          background: var(--color-bg-card);
          color: var(--color-text-primary);
          font-size: var(--text-base);
          transition: border-color var(--transition-base);
        }

        input[type="number"]:focus {
          outline: none;
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .error-message {
          padding: var(--space-3);
          background: var(--color-error-light);
          border: 1px solid var(--color-error);
          border-radius: var(--radius-md);
          color: var(--color-error);
          margin-bottom: var(--space-4);
          font-size: var(--text-sm);
        }

        .generate-button {
          width: 100%;
          padding: var(--space-4);
          background: var(--color-accent);
          color: white;
          border: none;
          border-radius: var(--radius-md);
          font-size: var(--text-lg);
          font-weight: var(--font-semibold);
          cursor: pointer;
          transition: all var(--transition-base);
          box-shadow: var(--shadow-sm);
        }

        .generate-button:hover:not(:disabled) {
          background: var(--color-accent-hover);
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
        }

        .generate-button:disabled {
          background: var(--color-bg-subtle);
          color: var(--color-text-tertiary);
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
        }

        .progress-section {
          padding: var(--space-4);
          background: var(--color-info-light);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-4);
          border: 1px solid var(--color-info);
        }

        .progress-bar {
          height: 4px;
          background: var(--color-border);
          border-radius: var(--radius-full);
          overflow: hidden;
          margin-bottom: var(--space-3);
        }

        .progress-bar-fill {
          height: 100%;
          background: var(--color-accent);
          animation: progress 2s ease-in-out infinite;
        }

        @keyframes progress {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }

        .progress-message {
          text-align: center;
          color: var(--color-text-secondary);
          font-weight: var(--font-medium);
          font-size: var(--text-base);
        }

        .results-section {
          background: var(--color-bg-card);
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          border: 1px solid var(--color-border);
          box-shadow: var(--shadow-sm);
        }

        .results-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: var(--space-3);
        }

        .results-header h3 {
          font-family: var(--font-heading);
          margin: 0;
          color: var(--color-primary);
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
        }

        /* Aspect Ratio Info */
        .ar-info {
          padding: var(--space-3) var(--space-4);
          border-radius: var(--radius-md);
          margin-bottom: var(--space-3);
          font-size: var(--text-sm);
        }

        .ar-info.full {
          background: var(--color-success-light);
          border: 1px solid var(--color-success);
        }

        .ar-info.framing {
          background: var(--color-warning-light);
          border: 1px solid var(--color-warning);
        }

        .ar-info.tiling {
          background: var(--color-info-light);
          border: 1px solid var(--color-info);
        }

        .ar-info-header {
          color: var(--color-text-primary);
          margin-bottom: var(--space-2);
          font-weight: var(--font-semibold);
        }

        .ar-info-details {
          display: flex;
          flex-wrap: wrap;
          gap: var(--space-2);
          align-items: center;
          color: var(--color-text-secondary);
          font-size: var(--text-sm);
        }

        .ar-info-details span {
          white-space: nowrap;
        }

        .layout-note {
          color: var(--color-accent);
          font-weight: var(--font-medium);
        }

        /* Mode Toggle Tabs */
        .mode-tabs {
          display: flex;
          gap: var(--space-2);
          margin-bottom: var(--space-3);
          background: var(--color-bg-subtle);
          padding: var(--space-1);
          border-radius: var(--radius-lg);
        }

        .mode-tab {
          flex: 1;
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
          gap: var(--space-2);
          padding: var(--space-2);
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .mode-tab:hover:not(:disabled) {
          border-color: var(--color-accent);
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        .mode-tab.active {
          background: var(--color-accent);
          border-color: var(--color-accent);
          box-shadow: var(--shadow-glow-accent);
        }

        .mode-tab:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mode-title {
          font-family: var(--font-heading);
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-primary);
        }

        .mode-description {
          display: none; /* Hidden to save space */
        }

        .mode-tab.active .mode-title {
          color: white;
          font-weight: var(--font-bold);
        }

        .svg-preview {
          margin: var(--space-2) 0;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          background: var(--color-bg-subtle);
          padding: var(--space-2);
        }

        .design-preview {
          width: 100%;
          height: auto;
          display: block;
        }

        /* Finalize Section */
        .finalize-section {
          background: var(--color-accent-light);
          border: 2px solid var(--color-accent);
          border-radius: var(--radius-lg);
          padding: var(--space-3);
          margin-top: var(--space-3);
          text-align: center;
        }

        .finalize-button {
          width: 100%;
          max-width: 400px;
          padding: var(--space-3);
          background: var(--color-accent);
          color: white;
          border: none;
          border-radius: var(--radius-md);
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          cursor: pointer;
          transition: all var(--transition-base);
          box-shadow: var(--shadow-sm);
        }

        .finalize-button:hover {
          background: var(--color-accent-hover);
          transform: translateY(-1px);
          box-shadow: var(--shadow-md);
        }

        .finalize-hint {
          margin: var(--space-2) 0 0 0;
          color: var(--color-text-secondary);
          font-size: var(--text-xs);
        }

        /* Mixer Widget Container Styles */
        .mixer-widget-container {
          margin-top: var(--space-3);
          background: white;
          border-radius: 12px;
          padding: var(--space-3);
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .mixer-widget-header {
          display: flex;
          justify-content: flex-end;
          margin-bottom: var(--space-2);
          padding-bottom: var(--space-2);
          border-bottom: 2px solid var(--color-border);
        }

        .mixer-close-btn {
          padding: var(--space-2) var(--space-4);
          background: var(--color-primary);
          color: white;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          font-size: var(--text-sm);
          cursor: pointer;
          transition: all 0.2s;
        }

        .mixer-close-btn:hover {
          background: #2563eb;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
          transform: translateY(-1px);
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
          .inspire-panel-recraft {
            padding: var(--space-2);
          }

          .panel-header {
            margin-bottom: var(--space-4);
          }

          .panel-header h2 {
            font-size: var(--text-xl);
          }

          .subtitle {
            font-size: var(--text-sm);
          }

          .welcome-guidance {
            padding: var(--space-4);
            margin-bottom: var(--space-4);
          }

          .welcome-icon {
            font-size: 2rem;
          }

          .welcome-guidance h3 {
            font-size: var(--text-lg);
          }

          .welcome-guidance p {
            font-size: var(--text-sm);
          }

          /* Stack input mode tabs vertically on mobile */
          .input-mode-tabs {
            flex-direction: column;
            gap: var(--space-1);
          }

          .input-mode-tab {
            flex-direction: row;
            justify-content: flex-start;
            padding: var(--space-3);
            min-height: 44px;
          }

          .mode-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
          }

          .input-mode-tab .mode-title {
            font-size: var(--text-sm);
            margin-top: 0;
          }

          .input-mode-tab .mode-description {
            display: none;
          }

          /* Form sections */
          .form-section {
            padding: var(--space-3);
          }

          .form-group label {
            font-size: var(--text-xs);
          }

          /* Stack form rows on mobile */
          .form-row {
            grid-template-columns: 1fr;
            gap: var(--space-2);
          }

          /* Drop zone adjustments */
          .drop-zone {
            min-height: 140px;
          }

          .drop-zone-content {
            padding: var(--space-4);
            min-height: 140px;
          }

          .upload-icon {
            width: 36px;
            height: 36px;
          }

          .drop-text {
            font-size: var(--text-sm);
          }

          /* Generate button */
          .generate-button {
            padding: var(--space-3);
            font-size: var(--text-base);
            min-height: 44px;
          }

          /* Results section - minimal padding for max image width */
          .results-section {
            padding: var(--space-2);
            border-radius: var(--radius-md);
          }

          .results-header h3 {
            font-size: var(--text-lg);
          }

          /* Mode tabs */
          .mode-tabs {
            flex-direction: column;
            gap: var(--space-1);
          }

          .mode-tab {
            flex-direction: row;
            justify-content: flex-start;
            padding: var(--space-3);
            min-height: 44px;
          }

          .mode-title {
            font-size: var(--text-sm);
          }

          .mode-description {
            display: none;
          }

          /* AR info */
          .ar-info {
            padding: var(--space-2) var(--space-3);
          }

          .ar-info-details {
            flex-direction: column;
            align-items: flex-start;
            gap: var(--space-1);
          }

          /* Finalize section */
          .finalize-section {
            padding: var(--space-3);
          }

          .finalize-button {
            padding: var(--space-3);
            font-size: var(--text-base);
          }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
          .inspire-panel-recraft {
            padding: var(--space-1);
          }

          .panel-header h2 {
            font-size: var(--text-lg);
          }

          /* Results section - even less padding */
          .results-section {
            padding: var(--space-1);
            margin: 0 calc(-1 * var(--space-1));
            border-radius: 0;
          }

          .input-mode-tab {
            padding: var(--space-2);
          }

          .mode-tab {
            padding: var(--space-2);
          }
        }
      `})]})}function O5e({isOpen:e,onClose:t}){const[n,r]=pe.useState(!1),[i,s]=pe.useState(!1),[a,o]=pe.useState(!1),{addMotif:c}=nn(),h=eg(),{currentDesignId:d,blendSvgUrl:p,solidSvgUrl:m,designName:g}=h,v=p||m,w=!!d;pe.useEffect(()=>{if(!e)return;const k=P=>{P.key==="Escape"&&t()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[e,t]),pe.useEffect(()=>{e||(o(!1),r(!1),s(!1))},[e]);const C=pe.useCallback((k,P)=>{console.log("[EDITOR] Design saved:",k,P),o(!1)},[]),x=async()=>{var k,P;if(!(!v||n)){r(!0);try{const{blendSvgUrl:j,solidSvgUrl:M,widthMM:S,lengthMM:B}=h;let D=null,R=null;if(M)try{D=await(await fetch(M)).text(),console.log("[EDITOR] Fetched solid SVG from blob:",D.length,"chars")}catch(xe){console.error("[EDITOR] Failed to fetch solid SVG:",xe)}if(j)try{R=await(await fetch(j)).text(),console.log("[EDITOR] Fetched blend SVG from blob:",R.length,"chars")}catch(xe){console.error("[EDITOR] Failed to fetch blend SVG:",xe)}if(!D&&!R)throw new Error("No SVG content available. Please ensure a design has been generated.");const ue=fw(D||R);let ie=S||5e3,ge=B||5e3;if(ue){const xe=ue.width/ue.height;xe>1?(ie=Math.max(S||5e3,5e3),ge=ie/xe):(ge=Math.max(B||5e3,5e3),ie=ge*xe),console.log("[EDITOR] Using SVG aspect ratio:",xe,"",ie,"x",ge,"mm")}s(!0);let H=d;const ye=g||`Design ${new Date().toLocaleString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}`,Ae=zO(h);H=(await hw({id:H||void 0,name:ye,description:"",tags:[],design_data:Ae,input_mode:h.inputMode})).design_id,h.setCurrentDesignId(H),h.setDesignName(ye),s(!1);const Be=((k=h.result)==null?void 0:k.thumb_url)||((P=h.result)==null?void 0:P.png_url)||null;c(H,ye,D||R,ie,ge,Be,{solidSvgContent:D,blendSvgContent:R,hasBothVersions:!!(D&&R)}),o(!0),setTimeout(()=>{t()},600)}catch(j){console.error("[EDITOR] Failed to add to canvas:",j),alert("Failed to add design to canvas: "+j.message),s(!1)}finally{r(!1)}}};return e?u.jsx("div",{className:"design-editor-overlay",children:u.jsxs("div",{className:"design-editor-modal",children:[u.jsxs("div",{className:"design-editor__header",children:[u.jsx("div",{className:"design-editor__title",children:u.jsx("h2",{children:"Design Editor"})}),u.jsx("div",{className:"design-editor__hint",children:"Generate a design with AI or upload your own SVG"}),u.jsx("button",{className:"design-editor__close",onClick:t,title:"Close (Esc)",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),u.jsx("div",{className:"design-editor__content",children:u.jsx(N5e,{onDesignSaved:C,isEmbedded:!0})}),u.jsx("div",{className:`design-editor__footer ${a?"design-editor__footer--success":""}`,children:a?u.jsxs("div",{className:"design-editor__success",children:[u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M20 6L9 17l-5-5"})}),u.jsx("span",{children:"Added to canvas!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"design-editor__status",children:v?w?u.jsxs("span",{className:"design-editor__saved-indicator",children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M20 6L9 17l-5-5"})}),"Saved to library"]}):u.jsx("span",{className:"design-editor__unsaved-indicator",children:"Design ready  Will auto-save when added"}):u.jsx("span",{className:"design-editor__no-design",children:"Generate or upload a design to continue"})}),u.jsxs("div",{className:"design-editor__actions",children:[u.jsx("button",{className:"design-editor__btn design-editor__btn--secondary",onClick:t,children:"Cancel"}),u.jsx("button",{className:"design-editor__btn design-editor__btn--primary",onClick:x,disabled:!v||n,children:n?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"design-editor__spinner"}),i?"Saving...":"Adding..."]}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add to Canvas"]})})]})]})})]})}):null}function R5e(){const{addShape:e,addText:t,addExclusionZone:n,standaloneMode:r,startPathDrawing:i}=nn(),[s,a]=pe.useState(!1);if(r)return null;const o=[{preset:"rectangle",icon:"",label:"Shape"},{preset:"blob",icon:"",label:"Blob"},{preset:"path",icon:"",label:"Pen"}],c=p=>{p==="path"?(i(),a(!1)):e(p)},h=()=>{t(),a(!1)},d=()=>{n("rectangle")};return u.jsxs("div",{className:`shape-toolbar ${s?"shape-toolbar--expanded":""}`,children:[u.jsxs("button",{className:"shape-toolbar__toggle",onClick:()=>a(!s),title:s?"Collapse elements panel":"Add elements",children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),u.jsx("polyline",{points:"2 17 12 22 22 17"}),u.jsx("polyline",{points:"2 12 12 17 22 12"})]}),!s&&u.jsx("span",{className:"shape-toolbar__label",children:"Elements"})]}),s&&u.jsxs("div",{className:"shape-toolbar__shapes",children:[u.jsxs("button",{className:"shape-toolbar__btn shape-toolbar__btn--text",onClick:h,title:"Add Text Label",children:[u.jsx("span",{className:"shape-toolbar__icon",children:"T"}),u.jsx("span",{className:"shape-toolbar__name",children:"Text"})]}),u.jsx("div",{className:"shape-toolbar__divider"}),o.map(p=>u.jsxs("button",{className:"shape-toolbar__btn",onClick:()=>c(p.preset),title:`Add ${p.label}`,children:[u.jsx("span",{className:"shape-toolbar__icon",children:p.icon}),u.jsx("span",{className:"shape-toolbar__name",children:p.label})]},p.preset)),u.jsx("div",{className:"shape-toolbar__divider"}),u.jsxs("button",{className:"shape-toolbar__btn shape-toolbar__btn--exclusion",onClick:d,title:"Add Exclusion Zone (building, planter, obstacle)",children:[u.jsx("span",{className:"shape-toolbar__icon",style:{fontSize:"1rem"},children:""}),u.jsx("span",{className:"shape-toolbar__name",children:"Exclusion"})]})]})]})}function M5e({loadedDesign:e}){var V,ne,z,te,ae,ce,re,be,ke,Pe,ze,_e,$e,Fe,Xe,Ze,Qe,ft,dt,Et,xt;const[t,n]=pe.useState(!1),[r,i]=pe.useState(()=>{const Te=nn.getState().surface;return Te!=null&&Te.width_mm?String(Te.width_mm/1e3):"50"}),[s,a]=pe.useState(()=>{const Te=nn.getState().surface;return Te!=null&&Te.length_mm?String(Te.length_mm/1e3):"50"}),[o,c]=pe.useState(!1),[h,d]=pe.useState(!1),[p,m]=pe.useState(!1),[g,v]=pe.useState(!1),[w,C]=pe.useState(!1),[x,k]=pe.useState(null),[P,j]=pe.useState(!1),[M,S]=pe.useState(null),[B,D]=pe.useState(""),[R,ee]=pe.useState(!1),[ue,ie]=pe.useState(!1),ge=pe.useRef(null);pe.useEffect(()=>{if(e){const Te=e.design_data||{},Ke=e.input_mode||Te.input_mode||Te.blend_recipes||Te.solid_recipes,mt=Te.courts||Te.surface||Te.tracks;if(console.log("[TPV] Design detection:",{id:e.id,name:e.name,hasDesignData:!!e.design_data,topLevelInputMode:e.input_mode,isPlaygroundDesign:Ke,isSportsDesign:mt}),Ke&&!mt){console.log("[TPV] Loading playground design into editor:",e.id,e.name);const Nt=vx(e),kt=eg.getState();kt.loadDesign(Nt),e.name&&kt.setDesignName(e.name),kt.setCurrentDesignId(e.id),v(!0)}else e.design_data?(console.log("[SPORTS] Loading design from prop:",e.id,e.name),nn.getState().loadDesign(Te),S(e.id),D(e.name||""),n(!1)):console.warn("[TPV] Design has no design_data and is not a playground design:",e.id,e.name)}},[e]);const{surface:H,courts:ye,tracks:Ae,selectedCourtId:we,selectedTrackId:Be,selectedMotifId:xe,selectedShapeId:Le,selectedTextId:Ce,selectedGroupId:Re,selectedElementIds:it,showCourtLibrary:nt,showPropertiesPanel:Ue,toggleCourtLibrary:lt,togglePropertiesPanel:de,setSurfaceDimensions:oe,setSurfaceColor:We,setSurfaceBoundaryPreset:Ne,resetSurfaceBoundary:ht,updateBoundaryParams:jt,resetDesign:Ct,hasUnsavedChanges:q,standaloneMode:Ye,toggleStandaloneMode:se,groupSelected:L,ungroup:I,alignElements:Q,distributeElements:he,addShape:ve,addText:me,addExclusionZone:Me,startPathDrawing:Je,pathDrawingMode:De,mobileLibraryOpen:l,mobilePropertiesOpen:f,mobileColoursOpen:b,mobileActiveTab:_,setMobileLibraryOpen:E,setMobilePropertiesOpen:A,setMobileColoursOpen:T,setMobileActiveTab:N,closeMobileSheets:$,isDirty:F,clearAutosaveTimer:G}=nn(),Z=Te=>{Te.preventDefault();const Ke=parseFloat(r)*1e3,mt=parseFloat(s)*1e3;Ke>0&&mt>0&&(oe(Ke,mt),n(!1))},Y=Te=>{We({tpv_code:Te.code,hex:Te.hex,name:Te.name}),c(!1)},W=()=>{q()&&!window.confirm(`Start a new design?

You have unsaved changes that will be lost.`)||(Ct(),S(null),D(""),i("50"),a("50"))},X=()=>{const Te=ge.current||document.querySelector(".court-canvas__svg");if(!Te){alert("Canvas not ready");return}const Ke=nn.getState().exportDesignData(),mt=mw(Te,Ke),Nt=new Blob([mt],{type:"image/svg+xml"}),kt=URL.createObjectURL(Nt);x&&URL.revokeObjectURL(x),k(kt),C(!0)},U=()=>{C(!1),x&&(URL.revokeObjectURL(x),k(null))},K=async Te=>{if(!Te){alert("Source design ID not found");return}try{const Ke=await wf(Te),mt=(Ke==null?void 0:Ke.design)||Ke;if(!mt)throw new Error("Design not found");const Nt=vx(mt),kt=eg.getState();kt.loadDesign(Nt),mt.name&&kt.setDesignName(mt.name),kt.setCurrentDesignId(Te),v(!0),console.log("[TPV] Loaded source design for editing:",mt.name)}catch(Ke){console.error("[TPV] Failed to load source design:",Ke),alert("Failed to load design: "+Ke.message)}};return pe.useEffect(()=>{if(!R)return;const Te=()=>{ee(!1),ie(!1)};return document.addEventListener("click",Te),()=>document.removeEventListener("click",Te)},[R]),pe.useEffect(()=>{if(!ue)return;const Te=()=>ie(!1);return document.addEventListener("click",Te),()=>document.removeEventListener("click",Te)},[ue]),pe.useEffect(()=>{const Te=Ke=>{if(F)return Ke.preventDefault(),Ke.returnValue="You have unsaved changes.",Ke.returnValue};return window.addEventListener("beforeunload",Te),()=>window.removeEventListener("beforeunload",Te)},[F]),pe.useEffect(()=>()=>G(),[G]),pe.useEffect(()=>{const Te=Ke=>{const mt=Ke.target.tagName.toLowerCase();if(mt==="input"||mt==="textarea"||mt==="select")return;const{removeCourt:Nt,removeTrack:kt,removeMotif:Bt,removeShape:At,removeText:Dt,deselectCourt:Ut,deselectTrack:Rt,deselectMotif:Kt,deselectShape:en,deselectText:bn,stopEditingText:En,undo:wt,redo:Tn,canUndo:Rn,canRedo:wn,duplicateCourt:Er,duplicateMotif:Or,duplicateShape:sr,duplicateText:tr,updateCourtPosition:fr,updateTrackPosition:ar,updateMotifPosition:Zr,updateShapePosition:zn,updateTextPosition:nr,courts:gi,tracks:_i,motifs:Qr,shapes:yi,texts:Pi,selectedMotifId:pr,selectedShapeId:mr,selectedTextId:rr,editingTextId:Jr,elementOrder:Gr,setElementOrder:yr,toggleSnapToGrid:Qt,snapToGrid:$r,addToHistory:vn}=nn.getState(),Vn=we||Be||pr||mr||rr;if(Ke.key==="Delete"&&Vn&&!Jr&&(Ke.preventDefault(),we?Nt(we):Be?kt(Be):pr?Bt(pr):mr?At(mr):rr&&Dt(rr)),Ke.key==="Escape"&&(Jr?En():Vn&&(we?Ut():Be?Rt():pr?Kt():mr?en():rr&&bn())),(Ke.ctrlKey||Ke.metaKey)&&Ke.key==="z"&&!Ke.shiftKey&&(Ke.preventDefault(),Rn()&&wt()),(Ke.ctrlKey||Ke.metaKey)&&Ke.key==="z"&&Ke.shiftKey&&(Ke.preventDefault(),wn()&&Tn()),(Ke.ctrlKey||Ke.metaKey)&&Ke.key==="d"&&Vn&&(Ke.preventDefault(),we?Er(we):pr?Or(pr):mr?sr(mr):rr&&tr(rr)),Vn&&!Jr&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(Ke.key)){Ke.preventDefault();const jn=Ke.shiftKey?10:100;let Gn=0,qr=0;if(Ke.key==="ArrowLeft"&&(Gn=-jn),Ke.key==="ArrowRight"&&(Gn=jn),Ke.key==="ArrowUp"&&(qr=-jn),Ke.key==="ArrowDown"&&(qr=jn),we){const Xn=gi[we];Xn&&(fr(we,{x:Xn.position.x+Gn,y:Xn.position.y+qr}),vn())}else if(Be){const Xn=_i[Be];Xn&&(ar(Be,{x:Xn.position.x+Gn,y:Xn.position.y+qr}),vn())}else if(pr){const Xn=Qr[pr];Xn&&(Zr(pr,{x:Xn.position.x+Gn,y:Xn.position.y+qr}),vn())}else if(mr){const Xn=yi[mr];Xn&&(zn(mr,{x:Xn.position.x+Gn,y:Xn.position.y+qr}),vn())}else if(rr){const Xn=Pi[rr];Xn&&(nr(rr,{x:Xn.position.x+Gn,y:Xn.position.y+qr}),vn())}}if(Vn&&(Ke.key==="["||Ke.key==="]")){Ke.preventDefault();const jn=Gr.indexOf(Vn);if(jn===-1)return;const Gn=[...Gr];Ke.key==="["&&jn>0?([Gn[jn],Gn[jn-1]]=[Gn[jn-1],Gn[jn]],yr(Gn),vn()):Ke.key==="]"&&jn<Gr.length-1&&([Gn[jn],Gn[jn+1]]=[Gn[jn+1],Gn[jn]],yr(Gn),vn())}(Ke.key==="g"||Ke.key==="G")&&(Ke.preventDefault(),Qt()),(Ke.key==="?"||Ke.shiftKey&&Ke.key==="/")&&(Ke.preventDefault(),m(!0))};return window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)},[we,Be,xe,Le,Ce]),u.jsxs("div",{className:"sports-designer",children:[t&&u.jsx("div",{className:"sports-designer__modal-overlay",onClick:()=>n(!1),children:u.jsxs("div",{className:"sports-designer__modal",onClick:Te=>Te.stopPropagation(),children:[u.jsx("h2",{children:"Edit Surface Size"}),u.jsx("p",{children:"Adjust the dimensions of your sports surface"}),u.jsxs("form",{onSubmit:Z,children:[u.jsxs("div",{className:"sports-designer__dimension-inputs",children:[u.jsxs("div",{className:"sports-designer__input-group",children:[u.jsx("label",{htmlFor:"width",children:"Width (metres)"}),u.jsx("input",{id:"width",type:"number",min:"5",max:"100",step:"0.5",value:r,onChange:Te=>i(Te.target.value),required:!0,autoFocus:!0})]}),u.jsx("span",{className:"sports-designer__dimension-separator",children:""}),u.jsxs("div",{className:"sports-designer__input-group",children:[u.jsx("label",{htmlFor:"length",children:"Length (metres)"}),u.jsx("input",{id:"length",type:"number",min:"5",max:"100",step:"0.5",value:s,onChange:Te=>a(Te.target.value),required:!0})]})]}),u.jsx("p",{className:"sports-designer__dimension-hint",children:"Common sizes: 37m  34m (tennis), 40m  20m (futsal), 50m  50m (multi-sport)"}),u.jsxs("div",{className:"sports-designer__boundary-section",children:[u.jsx("label",{htmlFor:"boundary-shape",children:"Surface Shape"}),u.jsxs("div",{className:"sports-designer__boundary-options",children:[u.jsxs("select",{id:"boundary-shape",value:((V=H.boundary)==null?void 0:V.type)||"rectangle",onChange:Te=>{const Ke=Te.target.value;Ke==="rectangle"?ht():Ne(Ke)},className:"sports-designer__select",children:[u.jsx("option",{value:"rectangle",children:"Rectangle (default)"}),u.jsx("option",{value:"l-shape",children:"L-Shape"}),u.jsx("option",{value:"u-shape",children:"U-Shape"}),u.jsx("option",{value:"t-shape",children:"T-Shape"})]}),((ne=H.boundary)==null?void 0:ne.type)&&H.boundary.type!=="rectangle"&&u.jsx("button",{type:"button",className:"sports-designer__btn-secondary",onClick:ht,title:"Reset to rectangle",children:"Reset"})]}),((z=H.boundary)==null?void 0:z.type)==="l-shape"&&u.jsxs("div",{className:"sports-designer__boundary-params",children:[u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Cut Width: ",Math.round((((te=H.boundary.params)==null?void 0:te.cutWidth)||.6)*100),"%"]}),u.jsx("input",{type:"range",min:"20",max:"80",value:(((ae=H.boundary.params)==null?void 0:ae.cutWidth)||.6)*100,onChange:Te=>jt({cutWidth:parseInt(Te.target.value)/100})})]}),u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Cut Height: ",Math.round((((ce=H.boundary.params)==null?void 0:ce.cutHeight)||.4)*100),"%"]}),u.jsx("input",{type:"range",min:"20",max:"80",value:(((re=H.boundary.params)==null?void 0:re.cutHeight)||.4)*100,onChange:Te=>jt({cutHeight:parseInt(Te.target.value)/100})})]})]}),((be=H.boundary)==null?void 0:be.type)==="u-shape"&&u.jsxs("div",{className:"sports-designer__boundary-params",children:[u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Cut Start: ",Math.round((((ke=H.boundary.params)==null?void 0:ke.cutStart)||.35)*100),"%"]}),u.jsx("input",{type:"range",min:"10",max:"45",value:(((Pe=H.boundary.params)==null?void 0:Pe.cutStart)||.35)*100,onChange:Te=>jt({cutStart:parseInt(Te.target.value)/100})})]}),u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Cut End: ",Math.round((((ze=H.boundary.params)==null?void 0:ze.cutEnd)||.65)*100),"%"]}),u.jsx("input",{type:"range",min:"55",max:"90",value:(((_e=H.boundary.params)==null?void 0:_e.cutEnd)||.65)*100,onChange:Te=>jt({cutEnd:parseInt(Te.target.value)/100})})]}),u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Cut Height: ",Math.round(((($e=H.boundary.params)==null?void 0:$e.cutHeight)||.4)*100),"%"]}),u.jsx("input",{type:"range",min:"20",max:"80",value:(((Fe=H.boundary.params)==null?void 0:Fe.cutHeight)||.4)*100,onChange:Te=>jt({cutHeight:parseInt(Te.target.value)/100})})]})]}),((Xe=H.boundary)==null?void 0:Xe.type)==="t-shape"&&u.jsxs("div",{className:"sports-designer__boundary-params",children:[u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Stem Start: ",Math.round((((Ze=H.boundary.params)==null?void 0:Ze.stemStart)||.3)*100),"%"]}),u.jsx("input",{type:"range",min:"10",max:"45",value:(((Qe=H.boundary.params)==null?void 0:Qe.stemStart)||.3)*100,onChange:Te=>jt({stemStart:parseInt(Te.target.value)/100})})]}),u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Stem End: ",Math.round((((ft=H.boundary.params)==null?void 0:ft.stemEnd)||.7)*100),"%"]}),u.jsx("input",{type:"range",min:"55",max:"90",value:(((dt=H.boundary.params)==null?void 0:dt.stemEnd)||.7)*100,onChange:Te=>jt({stemEnd:parseInt(Te.target.value)/100})})]}),u.jsxs("div",{className:"sports-designer__param-row",children:[u.jsxs("label",{children:["Bar Height: ",Math.round((((Et=H.boundary.params)==null?void 0:Et.stemHeight)||.4)*100),"%"]}),u.jsx("input",{type:"range",min:"20",max:"80",value:(((xt=H.boundary.params)==null?void 0:xt.stemHeight)||.4)*100,onChange:Te=>jt({stemHeight:parseInt(Te.target.value)/100})})]})]}),u.jsx("p",{className:"sports-designer__boundary-hint",children:"Non-rectangular shapes are useful for L-shaped buildings or irregular sites"})]}),u.jsx("button",{type:"submit",className:"sports-designer__btn-primary",children:"Update Surface"})]})]})}),u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"sports-designer__mobile-header",children:[u.jsx("span",{className:"sports-designer__mobile-header-title",children:"TPV Designer"}),u.jsxs("div",{className:"sports-designer__mobile-header-actions",children:[u.jsx("button",{className:"sports-designer__mobile-header-btn",onClick:()=>{i(String(H.width_mm/1e3)),a(String(H.length_mm/1e3)),n(!0)},title:"Surface settings",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})}),u.jsx(O2,{svgRef:ge,mobileMode:!0})]})]}),u.jsxs("nav",{className:"sports-designer__mobile-action-bar",children:[u.jsxs("button",{className:`sports-designer__mobile-action-btn ${l?"sports-designer__mobile-action-btn--active":""}`,onClick:()=>{$(),E(!0)},children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),u.jsx("span",{children:"Add"})]}),u.jsxs("button",{className:"sports-designer__mobile-action-btn",onClick:()=>{$(),T(!0)},children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),u.jsx("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),u.jsx("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),u.jsx("circle",{cx:"6.5",cy:"12.5",r:"2.5"})]}),u.jsx("span",{children:"Colours"})]}),u.jsxs("button",{className:`sports-designer__mobile-action-btn ${we||Be||xe||Le||Ce?"":"sports-designer__mobile-action-btn--disabled"}`,onClick:()=>{(we||Be||xe||Le||Ce)&&($(),A(!0))},disabled:!we&&!Be&&!xe&&!Le&&!Ce,children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),u.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),u.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),u.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),u.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),u.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),u.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),u.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),u.jsx("span",{children:"Properties"})]}),u.jsxs("button",{className:"sports-designer__mobile-action-btn",onClick:()=>d(!0),children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),u.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),u.jsx("polyline",{points:"7 3 7 8 15 8"})]}),u.jsx("span",{children:"Save"})]})]}),u.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${l?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>E(!1)}),u.jsxs("div",{className:`sports-designer__bottom-sheet ${l?"sports-designer__bottom-sheet--open":""}`,children:[u.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),u.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[u.jsx("h3",{children:"Add Element"}),u.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>E(!1),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsxs("div",{className:"sports-designer__mobile-tabs",children:[u.jsx("button",{className:`sports-designer__mobile-tab ${_==="courts"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("courts"),children:"Courts"}),u.jsx("button",{className:`sports-designer__mobile-tab ${_==="tracks"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("tracks"),children:"Tracks"}),u.jsx("button",{className:`sports-designer__mobile-tab ${_==="shapes"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("shapes"),children:"Shapes"}),u.jsx("button",{className:`sports-designer__mobile-tab ${_==="designs"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("designs"),children:"Designs"})]}),u.jsx("div",{className:"sports-designer__bottom-sheet-content",children:u.jsx(uN,{mobileMode:!0,activeTab:_,onItemAdded:()=>E(!1),onOpenGenerator:()=>{E(!1),v(!0)}})})]}),u.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${b?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>T(!1)}),u.jsxs("div",{className:`sports-designer__bottom-sheet ${b?"sports-designer__bottom-sheet--open":""}`,children:[u.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),u.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[u.jsx("h3",{children:"Surface Colour"}),u.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>T(!1),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"sports-designer__bottom-sheet-content",children:u.jsx("div",{className:"sports-designer__color-grid",children:fi.map(Te=>u.jsx("button",{className:`sports-designer__color-swatch ${H.color.tpv_code===Te.code?"sports-designer__color-swatch--selected":""}`,style:{backgroundColor:Te.hex},onClick:()=>{Y(Te),T(!1)},title:`${Te.code} - ${Te.name}`,children:u.jsx("span",{className:"sports-designer__color-code",children:Te.code})},Te.code))})})]}),u.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${f?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>A(!1)}),u.jsxs("div",{className:`sports-designer__bottom-sheet ${f?"sports-designer__bottom-sheet--open":""}`,children:[u.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),u.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[u.jsx("h3",{children:"Properties"}),u.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>A(!1),children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),u.jsx("div",{className:"sports-designer__bottom-sheet-content",children:(we||Be||xe||Le||Ce)&&u.jsx(w2,{mobileMode:!0,onEditSourceDesign:K})})]}),u.jsxs("div",{className:"sports-designer__content",children:[!Ye&&u.jsxs("aside",{className:`sports-designer__sidebar ${nt?"":"sports-designer__sidebar--collapsed"}`,children:[u.jsxs("div",{className:"sidebar-content",children:[u.jsx("div",{className:"sidebar-add-element",children:u.jsxs("button",{className:"sidebar-add-element__btn",onClick:()=>j(!0),children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),u.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add Courts & Designs"]})}),u.jsx(R9,{})]}),u.jsx("button",{className:"sidebar-toggle sidebar-toggle--left",onClick:lt,title:nt?"Collapse panel":"Expand panel",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:nt?u.jsx("polyline",{points:"15 18 9 12 15 6"}):u.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),u.jsxs("main",{className:"sports-designer__canvas-container",children:[u.jsxs("div",{className:"sports-toolbar",children:[u.jsxs("div",{className:"sports-toolbar__group",children:[u.jsx("button",{className:`sports-toolbar__btn ${nt?"sports-toolbar__btn--active":""}`,onClick:lt,title:"Element Library",disabled:Ye,children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),u.jsx("button",{className:`sports-toolbar__btn ${Ue&&(we||Be||xe||Le||Ce)?"sports-toolbar__btn--active":""}`,onClick:de,title:"Properties",disabled:!we&&!Be&&!xe&&!Le&&!Ce||Ye,children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),u.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),u.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),u.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),u.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),u.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),u.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),u.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})})]}),u.jsx("div",{className:"sports-toolbar__divider"}),u.jsxs("div",{className:"sports-toolbar__group",style:{position:"relative"},children:[u.jsxs("button",{className:`sports-toolbar__btn sports-toolbar__btn--with-label ${ue?"sports-toolbar__btn--active":""}`,onClick:Te=>{Te.stopPropagation(),ie(!ue)},title:"Add Elements",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),u.jsx("polyline",{points:"2 17 12 22 22 17"}),u.jsx("polyline",{points:"2 12 12 17 22 12"})]}),u.jsx("span",{children:"Elements"}),u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:u.jsx("path",{d:"M6 9l6 6 6-6"})})]}),ue&&u.jsxs("div",{className:"sports-toolbar__dropdown-menu",onClick:Te=>Te.stopPropagation(),children:[u.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{me(),ie(!1)},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 7V4h16v3"}),u.jsx("path",{d:"M12 4v16"}),u.jsx("path",{d:"M8 20h8"})]}),u.jsx("span",{children:"Text"}),u.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"T"})]}),u.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ve("rectangle"),ie(!1)},children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})}),u.jsx("span",{children:"Shape"}),u.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"S"})]}),u.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ve("blob"),ie(!1)},children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M12 3c-4 0-7 3-8 6s0 6 2 8c2 2 5 3 8 2s5-3 6-6-1-6-3-8c-1-1-3-2-5-2z"})}),u.jsx("span",{children:"Blob"}),u.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"B"})]}),u.jsxs("button",{className:`sports-toolbar__dropdown-item ${De?"sports-toolbar__dropdown-item--active":""}`,onClick:()=>{Je(),ie(!1)},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),u.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),u.jsx("path",{d:"M2 2l7.586 7.586"})]}),u.jsx("span",{children:"Pen"}),u.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"P"})]}),u.jsx("div",{className:"sports-toolbar__dropdown-divider"}),u.jsxs("button",{className:"sports-toolbar__dropdown-item sports-toolbar__dropdown-item--exclusion",onClick:()=>{Me("rectangle"),ie(!1)},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"})]}),u.jsx("span",{children:"Exclusion Zone"}),u.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"E"})]})]})]}),u.jsx("div",{className:"sports-toolbar__divider"}),u.jsxs("div",{className:"sports-toolbar__group",children:[u.jsxs("button",{className:"sports-toolbar__dimensions",onClick:()=>{i(String(H.width_mm/1e3)),a(String(H.length_mm/1e3)),n(!0)},title:"Click to edit surface size",children:[(H.width_mm/1e3).toFixed(0),"m  ",(H.length_mm/1e3).toFixed(0),"m"]}),u.jsx("button",{className:"sports-toolbar__color-swatch",style:{backgroundColor:H.color.hex},onClick:()=>c(!0),title:`${H.color.name} (${H.color.tpv_code}) - Click to change`})]}),u.jsx("div",{className:"sports-toolbar__divider"}),u.jsxs("div",{className:"sports-toolbar__group",children:[u.jsx("button",{className:"sports-toolbar__btn",disabled:!nn.getState().canUndo(),onClick:()=>nn.getState().undo(),title:"Undo (Ctrl+Z)",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 7v6h6"}),u.jsx("path",{d:"M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"})]})}),u.jsx("button",{className:"sports-toolbar__btn",disabled:!nn.getState().canRedo(),onClick:()=>nn.getState().redo(),title:"Redo (Ctrl+Shift+Z)",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 7v6h-6"}),u.jsx("path",{d:"M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"})]})})]}),(it.length>=2||Re)&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sports-toolbar__divider"}),u.jsxs("div",{className:"sports-toolbar__group",children:[it.length>=2&&u.jsx("button",{className:"sports-toolbar__btn",onClick:L,title:"Group selected elements (Cmd+G)",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),u.jsx("path",{d:"M10 7h4"}),u.jsx("path",{d:"M10 17h4"}),u.jsx("path",{d:"M7 10v4"}),u.jsx("path",{d:"M17 10v4"})]})}),Re&&u.jsx("button",{className:"sports-toolbar__btn",onClick:()=>I(Re),title:"Ungroup (Cmd+Shift+G)",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),u.jsx("path",{d:"M10 7h4",strokeDasharray:"2 2"}),u.jsx("path",{d:"M10 17h4",strokeDasharray:"2 2"}),u.jsx("path",{d:"M7 10v4",strokeDasharray:"2 2"}),u.jsx("path",{d:"M17 10v4",strokeDasharray:"2 2"})]})})]}),it.length>=2&&u.jsxs("div",{className:"sports-toolbar__align-dropdown",style:{position:"relative"},children:[u.jsx("button",{className:`sports-toolbar__btn ${R?"sports-toolbar__btn--active":""}`,onClick:Te=>{Te.stopPropagation(),ee(!R)},title:"Align elements",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),u.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),u.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),u.jsx("line",{x1:"21",y1:"18",x2:"3",y2:"18"})]})}),R&&u.jsxs("div",{className:"sports-toolbar__align-menu",style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"8px",zIndex:100,minWidth:"120px"},onClick:Te=>Te.stopPropagation(),children:[u.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Align"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{Q("left"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Left"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{Q("center"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Center"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{Q("right"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Right"}),u.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{Q("top"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Top"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{Q("middle"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Middle"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{Q("bottom"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Bottom"}),it.length>=3&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),u.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Distribute"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{he("horizontal"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Horizontal"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{he("vertical"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Vertical"}),u.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),u.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Distribute Centres"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{he("center-horizontal"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Centres H"}),u.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{he("center-vertical"),ee(!1)},onMouseOver:Te=>Te.currentTarget.style.background="#f1f5f9",onMouseOut:Te=>Te.currentTarget.style.background="transparent",children:" Centres V"})]})]})]})]}),u.jsx("div",{className:"sports-toolbar__divider"}),u.jsxs("div",{className:"sports-toolbar__group",children:[u.jsx("button",{className:"sports-toolbar__btn",onClick:W,title:"Start new design",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("polyline",{points:"14 2 14 8 20 8"}),u.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),u.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),u.jsx("button",{className:"sports-toolbar__btn",onClick:X,title:"View In-Situ Preview",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),u.jsx("button",{className:"sports-toolbar__btn",onClick:()=>m(!0),title:"Keyboard shortcuts (?)",children:u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),u.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),u.jsx("button",{className:"sports-toolbar__btn-primary",onClick:()=>d(!0),children:"Save"}),u.jsx(O2,{svgRef:ge})]})]}),u.jsx(s9,{ref:ge}),u.jsx(R5e,{})]}),(we||Be||xe||Le||Ce)&&!Ye&&u.jsxs("aside",{className:`sports-designer__properties ${Ue?"":"sports-designer__properties--collapsed"}`,children:[u.jsx("button",{className:"sidebar-toggle sidebar-toggle--right",onClick:de,title:Ue?"Collapse properties":"Expand properties",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Ue?u.jsx("polyline",{points:"9 18 15 12 9 6"}):u.jsx("polyline",{points:"15 18 9 12 15 6"})})}),u.jsx("div",{className:"sidebar-content",children:u.jsx(w2,{onEditSourceDesign:K})})]})]}),o&&u.jsx("div",{className:"sports-designer__color-modal-overlay",onClick:()=>c(!1),children:u.jsxs("div",{className:"sports-designer__color-modal",onClick:Te=>Te.stopPropagation(),children:[u.jsxs("div",{className:"sports-designer__color-modal-header",children:[u.jsx("h4",{children:"Select Surface Colour"}),u.jsx("button",{onClick:()=>c(!1),children:""})]}),u.jsx("div",{className:"sports-designer__color-grid",children:fi.map(Te=>u.jsx("button",{className:`sports-designer__color-swatch ${H.color.tpv_code===Te.code?"sports-designer__color-swatch--selected":""}`,style:{backgroundColor:Te.hex},onClick:()=>Y(Te),title:`${Te.code} - ${Te.name}`,children:u.jsx("span",{className:"sports-designer__color-code",children:Te.code})},Te.code))})]})}),h&&u.jsx(W9,{existingDesignId:M,initialName:B,svgRef:ge,onClose:()=>d(!1),onSaved:(Te,Ke)=>{S(Te.design_id),D(Ke),console.log("[SPORTS] Design saved:",Te.design_id)}}),u.jsx(cU,{isOpen:p,onClose:()=>m(!1)}),u.jsx(E9,{isOpen:P,onClose:()=>j(!1),onOpenGenerator:()=>v(!0)}),u.jsx(O5e,{isOpen:g,onClose:()=>v(!1)}),w&&x&&u.jsx(UO,{designUrl:x,designDimensions:{width:H.width_mm,length:H.length_mm},onClose:U,onSaved:Te=>{console.log("[TPV] In-situ preview saved:",Te),U()}})]})]})}function L5e({onShowDesigns:e,onShowAdmin:t,isAdmin:n,currentDesignName:r}){const[i,s]=pe.useState(!1),a=async()=>{confirm("Sign out?")&&(await wa.signOut(),window.location.reload())};return u.jsx("header",{className:"studio-header",children:u.jsxs("div",{className:"header-content",children:[u.jsxs("div",{className:"header-left",children:[u.jsx("h1",{className:"studio-title",children:"TPV Designer"}),r&&u.jsxs("span",{className:"current-design-indicator",children:[u.jsx("svg",{width:"4",height:"4",viewBox:"0 0 4 4",children:u.jsx("circle",{cx:"2",cy:"2",r:"2",fill:"currentColor"})}),r]})]}),u.jsxs("div",{className:"header-right",children:[u.jsxs("button",{onClick:e,className:"btn-my-designs",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),u.jsx("path",{d:"M9 22V12h6v10"})]}),"My Designs"]}),n&&u.jsxs("button",{onClick:t,className:"btn-admin",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),u.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]}),"Admin"]}),u.jsxs("div",{className:"user-menu",children:[u.jsx("button",{onClick:()=>s(!i),className:"user-menu-button",children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),i&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-menu-backdrop",onClick:()=>s(!1)}),u.jsx("div",{className:"user-menu-dropdown",children:u.jsxs("button",{onClick:a,className:"menu-item sign-out",children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})}),"Sign Out"]})})]})]})]})]})})}function I5e({design:e,onLoad:t,onDelete:n,onUpdateMetadata:r}){var v;const[i,s]=pe.useState(!1),[a,o]=pe.useState(!1),c=async()=>{if(confirm(`Delete "${e.name}"? This cannot be undone.`)){o(!0);try{await n(e.id)}catch(w){console.error("Failed to delete design:",w),alert(`Failed to delete: ${w.message}`),o(!1)}}},h=w=>{const C=new Date(w),x=new Date,k=x-C,P=Math.floor(k/(1e3*60*60*24));return P===0?"Today":P===1?"Yesterday":P<7?`${P} days ago`:P<30?`${Math.floor(P/7)} weeks ago`:C.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:C.getFullYear()!==x.getFullYear()?"numeric":void 0})},d=e.input_mode==="sports_surface"||((v=e.design_data)==null?void 0:v.type)==="sports_surface",p=e.thumbnail_url||e.original_png_url||e.original_svg_url,g=d?{label:"Surface",icon:"",className:"type-surface"}:{label:"Motif",icon:"",className:"type-motif"};return u.jsxs("div",{className:`design-card ${a?"deleting":""}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[u.jsxs("div",{className:`design-type-badge ${g.className}`,children:[u.jsx("span",{className:"type-icon",children:g.icon}),u.jsx("span",{className:"type-label",children:g.label})]}),u.jsxs("div",{className:"card-thumbnail",onClick:()=>t(e.id),children:[p?u.jsx("img",{src:p,alt:e.name}):u.jsx("div",{className:"no-thumbnail",children:u.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),i&&u.jsx("div",{className:"thumbnail-overlay",children:u.jsx("button",{className:"btn-load",children:"Open"})})]}),u.jsxs("div",{className:"card-info",children:[u.jsx("h3",{className:"design-name",title:e.name,children:e.name}),e.description&&u.jsx("p",{className:"design-description",title:e.description,children:e.description}),u.jsxs("div",{className:"card-meta",children:[e.projects&&u.jsx("span",{className:"project-badge",style:{backgroundColor:e.projects.color||"#1a365d"},title:e.projects.name,children:e.projects.name}),u.jsx("span",{className:"design-date",title:new Date(e.updated_at).toLocaleString(),children:h(e.updated_at)})]}),e.tags&&e.tags.length>0&&u.jsxs("div",{className:"design-tags",children:[e.tags.slice(0,3).map((w,C)=>u.jsx("span",{className:"tag",children:w},C)),e.tags.length>3&&u.jsxs("span",{className:"tag more",children:["+",e.tags.length-3]})]})]}),i&&!a&&u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{onClick:()=>t(e.id),className:"action-btn load-btn",title:"Load design",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),u.jsx("button",{onClick:c,className:"action-btn delete-btn",title:"Delete design",children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),a&&u.jsx("div",{className:"deleting-overlay",children:u.jsx("div",{className:"spinner"})})]})}function $5e({onClose:e,onLoadDesign:t}){const[n,r]=pe.useState([]),[i,s]=pe.useState([]),[a,o]=pe.useState(!0),[c,h]=pe.useState(null),[d,p]=pe.useState(""),[m,g]=pe.useState(""),[v,w]=pe.useState(!1),[C,x]=pe.useState(!1);pe.useEffect(()=>{k()},[d,m]);const k=async()=>{o(!0),h(null);try{const[S,B]=await Promise.all([pw(),Qm({project_id:d||void 0,search:m||void 0,limit:12,offset:0})]);s(S.projects),r(B.designs),w(B.pagination.has_more)}catch(S){console.error("Failed to load designs:",S),h(S.message)}finally{o(!1)}},P=async()=>{if(!(C||!v)){x(!0);try{const S=await Qm({project_id:d||void 0,search:m||void 0,limit:12,offset:n.length});r([...n,...S.designs]),w(S.pagination.has_more)}catch(S){console.error("Failed to load more designs:",S),h(S.message)}finally{x(!1)}}},j=async S=>{try{const{design:B}=await wf(S);t(B),e()}catch(B){console.error("Failed to load design:",B),alert(`Failed to load design: ${B.message}`)}},M=async S=>{try{await Xz(S),r(n.filter(B=>B.id!==S))}catch(B){throw console.error("Failed to delete design:",B),B}};return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content design-gallery-modal",onClick:S=>S.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"My Designs"}),u.jsx("button",{onClick:e,className:"close-button",children:""})]}),u.jsxs("div",{className:"gallery-filters",children:[u.jsx("div",{className:"filter-group",children:u.jsx("input",{type:"text",placeholder:"Search designs...",value:m,onChange:S=>g(S.target.value),className:"search-input"})}),u.jsx("div",{className:"filter-group",children:u.jsxs("select",{value:d,onChange:S=>p(S.target.value),className:"project-filter",children:[u.jsx("option",{value:"",children:"All Projects"}),i.map(S=>u.jsxs("option",{value:S.id,children:[S.name," (",S.design_count,")"]},S.id))]})})]}),u.jsxs("div",{className:"modal-body",children:[c&&u.jsxs("div",{className:"error-message",children:[c,u.jsx("button",{onClick:k,className:"btn-retry",children:"Retry"})]}),a?u.jsxs("div",{className:"loading-state",children:[u.jsx("div",{className:"spinner-large"}),u.jsx("p",{children:"Loading your designs..."})]}):n.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),u.jsx("path",{d:"M17 21v-8H7v8M7 3v5h8"})]}),u.jsx("h3",{children:"No designs yet"}),u.jsx("p",{children:m||d?"No designs match your filters. Try adjusting your search.":"Create your first design to see it here!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"designs-grid",children:n.map(S=>u.jsx(I5e,{design:S,onLoad:j,onDelete:M},S.id))}),v&&u.jsx("div",{className:"load-more-section",children:u.jsx("button",{onClick:P,className:"btn-load-more",disabled:C,children:C?"Loading...":"Load More"})})]})]})]})})}function D5e(){const[e,t]=pe.useState([]),[n,r]=pe.useState(0),[i,s]=pe.useState(!1),[a,o]=pe.useState(null),[c,h]=pe.useState("all"),[d,p]=pe.useState("all"),[m,g]=pe.useState(""),[v,w]=pe.useState(0),C=50,x=async()=>{var D,R;const S=await ui.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(R=(D=S==null?void 0:S.data)==null?void 0:D.session)==null?void 0:R.access_token}`}},k=async()=>{s(!0),o(null);try{const S=await x(),B=new URLSearchParams({limit:C.toString(),offset:v.toString()});c!=="all"&&B.append("status",c),d!=="all"&&B.append("saved_status",d),m&&B.append("search",m);const D=await fetch(`/api/admin/jobs?${B.toString()}`,{headers:S}),R=await D.json();if(!D.ok)throw new Error(R.error||"Failed to fetch jobs");t(R.jobs),r(R.total)}catch(S){console.error("Failed to fetch jobs:",S),o(S.message)}finally{s(!1)}};pe.useEffect(()=>{k()},[c,d,m,v]);const P=e.filter(S=>S.status==="completed").length,j=e.filter(S=>!S.is_saved&&S.status==="completed").length,M=e.filter(S=>S.is_saved).length;return u.jsxs("div",{className:"generations-tab",children:[u.jsxs("div",{className:"admin-stats-grid",children:[u.jsxs("div",{className:"admin-stat-card",children:[u.jsx("h3",{children:"Total Generations"}),u.jsx("p",{className:"stat-value",children:n}),u.jsx("span",{className:"stat-label",children:"All time"})]}),u.jsxs("div",{className:"admin-stat-card",children:[u.jsx("h3",{children:"Completed"}),u.jsx("p",{className:"stat-value",children:P}),u.jsx("span",{className:"stat-label",children:"Current page"})]}),u.jsxs("div",{className:"admin-stat-card success",children:[u.jsx("h3",{children:"Saved"}),u.jsx("p",{className:"stat-value",children:M}),u.jsx("span",{className:"stat-label",children:" Linked to designs"})]}),u.jsxs("div",{className:"admin-stat-card warning",children:[u.jsx("h3",{children:"Orphaned"}),u.jsx("p",{className:"stat-value",children:j}),u.jsx("span",{className:"stat-label",children:" Not saved"})]})]}),u.jsxs("div",{className:"admin-filters",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Status:"}),u.jsxs("select",{value:c,onChange:S=>h(S.target.value),children:[u.jsx("option",{value:"all",children:"All"}),u.jsx("option",{value:"completed",children:"Completed"}),u.jsx("option",{value:"failed",children:"Failed"}),u.jsx("option",{value:"running",children:"Running"}),u.jsx("option",{value:"queued",children:"Queued"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Saved:"}),u.jsxs("select",{value:d,onChange:S=>p(S.target.value),children:[u.jsx("option",{value:"all",children:"All"}),u.jsx("option",{value:"saved",children:"Saved only"}),u.jsx("option",{value:"orphaned",children:"Orphaned only"})]})]}),u.jsxs("div",{className:"filter-group search",children:[u.jsx("label",{children:"Search prompt:"}),u.jsx("input",{type:"text",placeholder:"Search in prompts...",value:m,onChange:S=>g(S.target.value)})]})]}),i&&u.jsxs("div",{className:"admin-loading",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Loading jobs..."})]}),a&&u.jsx("div",{className:"admin-error",children:u.jsxs("p",{children:["Error: ",a]})}),!i&&e.length>0&&u.jsx("div",{className:"jobs-table-container",children:u.jsxs("table",{className:"jobs-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Thumbnail"}),u.jsx("th",{children:"Prompt"}),u.jsx("th",{children:"Dimensions"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Saved"}),u.jsx("th",{children:"User"}),u.jsx("th",{children:"Created"})]})}),u.jsx("tbody",{children:e.map(S=>u.jsxs("tr",{className:`job-row ${S.is_saved?"saved":"orphaned"} ${S.status}`,children:[u.jsx("td",{className:"thumbnail-cell",children:S.thumbnail_url?u.jsx("img",{src:S.thumbnail_url,alt:"Design",className:"job-thumbnail"}):u.jsx("div",{className:"thumbnail-placeholder",children:"No image"})}),u.jsx("td",{className:"prompt-cell",children:u.jsx("div",{className:"prompt-text",title:S.prompt,children:S.prompt||u.jsx("em",{children:"No prompt"})})}),u.jsx("td",{className:"dimensions-cell",children:S.width_mm&&S.length_mm?u.jsxs("span",{children:[S.width_mm,"  ",S.length_mm," mm"]}):u.jsx("em",{children:"N/A"})}),u.jsx("td",{className:"status-cell",children:u.jsx("span",{className:`status-badge ${S.status}`,children:S.status})}),u.jsx("td",{className:"saved-cell",children:S.is_saved?u.jsx("span",{className:"saved-badge",children:" Saved"}):u.jsx("span",{className:"orphaned-badge",children:" Orphaned"})}),u.jsx("td",{className:"user-cell",children:S.user_email}),u.jsx("td",{className:"date-cell",children:new Date(S.created_at).toLocaleDateString()})]},S.id))})]})}),!i&&e.length===0&&u.jsx("div",{className:"admin-empty",children:u.jsx("p",{children:"No jobs found matching your filters."})}),n>C&&u.jsxs("div",{className:"admin-pagination",children:[u.jsx("button",{onClick:()=>w(Math.max(0,v-C)),disabled:v===0,children:"Previous"}),u.jsxs("span",{children:["Showing ",v+1," to ",Math.min(v+C,n)," of ",n]}),u.jsx("button",{onClick:()=>w(v+C),disabled:v+C>=n,children:"Next"})]}),u.jsx("style",{children:`
        .jobs-table-container {
          overflow-x: auto;
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .jobs-table {
          width: 100%;
          border-collapse: collapse;
        }

        .jobs-table th {
          background: #f9fafb;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          font-size: 0.875rem;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .jobs-table td {
          padding: 1rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .job-row.saved {
          background: rgba(16, 185, 129, 0.03);
        }

        .job-row.orphaned {
          background: rgba(245, 158, 11, 0.03);
        }

        .thumbnail-cell {
          width: 80px;
        }

        .job-thumbnail {
          width: 64px;
          height: 64px;
          object-fit: cover;
          border-radius: 4px;
        }

        .thumbnail-placeholder {
          width: 64px;
          height: 64px;
          background: #f3f4f6;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 0.75rem;
          color: #9ca3af;
        }

        .prompt-cell {
          max-width: 300px;
        }

        .prompt-text {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .status-badge.completed {
          background: #d1fae5;
          color: #065f46;
        }

        .status-badge.failed {
          background: #fee2e2;
          color: #991b1b;
        }

        .status-badge.running {
          background: #dbeafe;
          color: #1e40af;
        }

        .status-badge.queued {
          background: #e0e7ff;
          color: #3730a3;
        }

        .saved-badge {
          color: #059669;
          font-weight: 500;
        }

        .orphaned-badge {
          color: #d97706;
          font-weight: 500;
        }

        .user-cell {
          font-size: 0.875rem;
          color: #6b7280;
        }

        .date-cell {
          font-size: 0.875rem;
          color: #6b7280;
          white-space: nowrap;
        }

        .admin-stat-card.success {
          border-left: 4px solid #10b981;
        }

        .admin-stat-card.warning {
          border-left: 4px solid #f59e0b;
        }
      `})]})}function z5e(){const[e,t]=pe.useState([]),[n,r]=pe.useState(null),[i,s]=pe.useState(!1),[a,o]=pe.useState(null),[c,h]=pe.useState(!1),[d,p]=pe.useState(new Set),[m,g]=pe.useState("all"),v=async()=>{var S,B;const j=await ui.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(B=(S=j==null?void 0:j.data)==null?void 0:S.session)==null?void 0:B.access_token}`}},w=async()=>{s(!0),o(null);try{const j=await v(),M=new URLSearchParams;m!=="all"&&M.append("age_filter",m);const S=await fetch(`/api/admin/recovery/orphaned?${M.toString()}`,{headers:j}),B=await S.json();if(!S.ok)throw new Error(B.error||"Failed to fetch orphaned jobs");t(B.orphaned_jobs),r(B.age_buckets)}catch(j){console.error("Failed to fetch orphaned jobs:",j),o(j.message)}finally{s(!1)}};pe.useEffect(()=>{w()},[m]);const C=j=>{const M=new Set(d);M.has(j)?M.delete(j):M.add(j),p(M)},x=()=>{p(new Set(e.map(j=>j.id)))},k=()=>{p(new Set)},P=async()=>{if(d.size===0){alert("Please select at least one job to recover");return}if(confirm(`Recover ${d.size} orphaned ${d.size===1?"design":"designs"}?`)){h(!0),o(null);try{const j=await v(),M=await fetch("/api/admin/recovery/create",{method:"POST",headers:j,body:JSON.stringify({job_ids:Array.from(d)})}),S=await M.json();if(!M.ok)throw new Error(S.error||"Failed to recover designs");alert(`Successfully recovered ${S.recovered_count} ${S.recovered_count===1?"design":"designs"}!`),k(),await w()}catch(j){console.error("Failed to recover designs:",j),o(j.message),alert(`Recovery failed: ${j.message}`)}finally{h(!1)}}};return u.jsxs("div",{className:"recovery-tab",children:[u.jsxs("div",{className:"admin-stats-grid",children:[u.jsxs("div",{className:"admin-stat-card warning",children:[u.jsx("h3",{children:"Total Orphaned"}),u.jsx("p",{className:"stat-value",children:e.length}),u.jsx("span",{className:"stat-label",children:"Designs not saved"})]}),n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"admin-stat-card",children:[u.jsx("h3",{children:"<24 hours"}),u.jsx("p",{className:"stat-value",children:n["<24h"]}),u.jsx("span",{className:"stat-label",children:"Recent"})]}),u.jsxs("div",{className:"admin-stat-card",children:[u.jsx("h3",{children:"1-7 days"}),u.jsx("p",{className:"stat-value",children:n["1-7d"]}),u.jsx("span",{className:"stat-label",children:"This week"})]}),u.jsxs("div",{className:"admin-stat-card",children:[u.jsx("h3",{children:">7 days"}),u.jsx("p",{className:"stat-value",children:n["7-30d"]+n[">30d"]}),u.jsx("span",{className:"stat-label",children:"Older"})]})]})]}),u.jsxs("div",{className:"recovery-controls",children:[u.jsx("div",{className:"admin-filters",children:u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Age:"}),u.jsxs("select",{value:m,onChange:j=>g(j.target.value),children:[u.jsx("option",{value:"all",children:"All"}),u.jsx("option",{value:"24h",children:"<24 hours"}),u.jsx("option",{value:"7d",children:"<7 days"}),u.jsx("option",{value:"30d",children:"<30 days"})]})]})}),u.jsxs("div",{className:"bulk-actions",children:[u.jsx("button",{onClick:x,className:"btn-secondary",children:"Select All"}),u.jsxs("button",{onClick:k,className:"btn-secondary",children:["Clear (",d.size,")"]}),u.jsx("button",{onClick:P,disabled:d.size===0||c,className:"btn-primary",children:c?"Recovering...":`Recover Selected (${d.size})`})]})]}),i&&u.jsxs("div",{className:"admin-loading",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Loading orphaned jobs..."})]}),a&&u.jsx("div",{className:"admin-error",children:u.jsxs("p",{children:["Error: ",a]})}),!i&&e.length>0&&u.jsx("div",{className:"recovery-table-container",children:u.jsxs("table",{className:"recovery-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{style:{width:"40px"},children:u.jsx("input",{type:"checkbox",checked:d.size===e.length,onChange:j=>j.target.checked?x():k()})}),u.jsx("th",{children:"Thumbnail"}),u.jsx("th",{children:"Prompt / Auto-name"}),u.jsx("th",{children:"Dimensions"}),u.jsx("th",{children:"Age"}),u.jsx("th",{children:"User"})]})}),u.jsx("tbody",{children:e.map(j=>u.jsxs("tr",{className:d.has(j.id)?"selected":"",onClick:()=>C(j.id),children:[u.jsx("td",{onClick:M=>M.stopPropagation(),children:u.jsx("input",{type:"checkbox",checked:d.has(j.id),onChange:()=>C(j.id)})}),u.jsx("td",{className:"thumbnail-cell",children:j.thumbnail_url?u.jsx("img",{src:j.thumbnail_url,alt:"Design",className:"job-thumbnail"}):u.jsx("div",{className:"thumbnail-placeholder",children:"No image"})}),u.jsxs("td",{className:"prompt-cell",children:[u.jsx("div",{className:"prompt-text",title:j.prompt,children:j.auto_name}),j.prompt&&j.prompt.length>50&&u.jsx("div",{className:"prompt-full",children:j.prompt})]}),u.jsx("td",{className:"dimensions-cell",children:j.width_mm&&j.length_mm?u.jsxs("span",{children:[j.width_mm,"  ",j.length_mm," mm"]}):u.jsx("em",{children:"N/A"})}),u.jsx("td",{className:"age-cell",children:u.jsxs("span",{className:`age-badge ${j.age_bucket.replace(/[<>]/g,"")}`,children:[j.age_days," ",j.age_days===1?"day":"days"]})}),u.jsx("td",{className:"user-cell",children:j.user_email})]},j.id))})]})}),!i&&e.length===0&&u.jsx("div",{className:"admin-empty",children:u.jsx("p",{children:"No orphaned jobs found. All designs have been saved!"})}),u.jsx("style",{children:`
        .recovery-controls {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          gap: 1rem;
        }

        .bulk-actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn-primary {
          padding: 0.5rem 1rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 4px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-primary:hover:not(:disabled) {
          background: #e55a2b;
        }

        .btn-primary:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        .btn-secondary {
          padding: 0.5rem 1rem;
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
          border-radius: 4px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-secondary:hover {
          background: #f9fafb;
        }

        .recovery-table-container {
          overflow-x: auto;
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .recovery-table {
          width: 100%;
          border-collapse: collapse;
        }

        .recovery-table th {
          background: #f9fafb;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          font-size: 0.875rem;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .recovery-table td {
          padding: 1rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .recovery-table tbody tr {
          cursor: pointer;
          transition: background 0.15s;
        }

        .recovery-table tbody tr:hover {
          background: #f9fafb;
        }

        .recovery-table tbody tr.selected {
          background: #eff6ff;
        }

        .age-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .age-badge.24h {
          background: #fee2e2;
          color: #991b1b;
        }

        .age-badge.1-7d {
          background: #fed7aa;
          color: #92400e;
        }

        .age-badge.7-30d {
          background: #fef3c7;
          color: #78350f;
        }

        .age-badge.30d {
          background: #e5e7eb;
          color: #374151;
        }

        .prompt-full {
          font-size: 0.75rem;
          color: #6b7280;
          margin-top: 0.25rem;
          display: none;
        }

        .recovery-table tbody tr:hover .prompt-full {
          display: block;
        }
      `})]})}function F5e({onClose:e}){const[t,n]=pe.useState("overview"),[r,i]=pe.useState(!0),[s,a]=pe.useState(null),[o,c]=pe.useState(null),[h,d]=pe.useState([]),[p,m]=pe.useState([]),[g,v]=pe.useState(0),[w,C]=pe.useState(null),x=async()=>{var D,R;const S=await ui.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(R=(D=S==null?void 0:S.data)==null?void 0:D.session)==null?void 0:R.access_token}`}},k=async()=>{try{const S=await x(),B=await fetch("/api/admin/analytics/overview",{headers:S}),D=await B.json();if(!B.ok)throw new Error(D.error||"Failed to fetch overview");c(D.stats)}catch(S){console.error("Failed to fetch overview:",S),a(S.message)}},P=async()=>{try{const S=await x(),B=await fetch("/api/admin/users",{headers:S}),D=await B.json();if(!B.ok)throw new Error(D.error||"Failed to fetch users");d(D.users)}catch(S){console.error("Failed to fetch users:",S),a(S.message)}},j=async()=>{try{const S=await x(),B=await fetch("/api/admin/designs?limit=50",{headers:S}),D=await B.json();if(!B.ok)throw new Error(D.error||"Failed to fetch designs");m(D.designs),v(D.total)}catch(S){console.error("Failed to fetch designs:",S),a(S.message)}},M=async()=>{try{const S=await x(),B=await fetch("/api/admin/analytics/colours",{headers:S}),D=await B.json();if(!B.ok)throw new Error(D.error||"Failed to fetch colour analytics");C(D.analytics)}catch(S){console.error("Failed to fetch colours:",S),a(S.message)}};return pe.useEffect(()=>{(async()=>{i(!0),await k(),i(!1)})()},[]),pe.useEffect(()=>{t==="users"&&h.length===0?P():t==="designs"&&p.length===0?j():t==="colours"&&!w&&M()},[t]),r?u.jsxs("div",{className:"admin-loading",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Loading admin dashboard..."})]}):s?u.jsxs("div",{className:"admin-error",children:[u.jsx("h2",{children:"Access Denied"}),u.jsx("p",{children:s}),u.jsx("p",{children:"You need admin privileges to view this page."})]}):u.jsxs("div",{className:"admin-dashboard",children:[u.jsxs("header",{className:"admin-header",children:[u.jsxs("div",{className:"admin-header-left",children:[u.jsxs("button",{onClick:e,className:"btn-back",children:[u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Studio"]}),u.jsx("h1",{children:"TPV Studio Admin"})]}),u.jsxs("nav",{className:"admin-nav",children:[u.jsx("button",{className:t==="overview"?"active":"",onClick:()=>n("overview"),children:"Overview"}),u.jsx("button",{className:t==="generations"?"active":"",onClick:()=>n("generations"),children:"Generations"}),u.jsx("button",{className:t==="recovery"?"active":"",onClick:()=>n("recovery"),children:"Recovery"}),u.jsx("button",{className:t==="users"?"active":"",onClick:()=>n("users"),children:"Users"}),u.jsx("button",{className:t==="designs"?"active":"",onClick:()=>n("designs"),children:"Designs"}),u.jsx("button",{className:t==="colours"?"active":"",onClick:()=>n("colours"),children:"Colour Analytics"})]})]}),u.jsxs("main",{className:"admin-content",children:[t==="overview"&&o&&u.jsx(B5e,{stats:o}),t==="generations"&&u.jsx(D5e,{}),t==="recovery"&&u.jsx(z5e,{}),t==="users"&&u.jsx(U5e,{users:h}),t==="designs"&&u.jsx(H5e,{designs:p,total:g}),t==="colours"&&w&&u.jsx(W5e,{analytics:w})]}),u.jsx("style",{jsx:!0,children:`
        .admin-dashboard {
          min-height: 100vh;
          background: #f8fafc;
        }

        .admin-header {
          background: white;
          border-bottom: 1px solid #e5e7eb;
          padding: 20px 40px;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .admin-header-left {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .btn-back {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 6px 12px;
          background: #f3f4f6;
          border: 1px solid #e5e7eb;
          border-radius: 6px;
          font-size: 13px;
          color: #6b7280;
          cursor: pointer;
          transition: all 0.2s;
          width: fit-content;
        }

        .btn-back:hover {
          background: #e5e7eb;
          color: #374151;
        }

        .admin-header h1 {
          margin: 0;
          font-size: 24px;
          color: #1e4a7a;
        }

        .admin-nav {
          display: flex;
          gap: 8px;
        }

        .admin-nav button {
          padding: 8px 16px;
          border: 1px solid #e5e7eb;
          background: white;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          color: #64748b;
          transition: all 0.2s;
        }

        .admin-nav button:hover {
          background: #f8fafc;
          color: #1e4a7a;
        }

        .admin-nav button.active {
          background: #1e4a7a;
          color: white;
          border-color: #1e4a7a;
        }

        .admin-content {
          padding: 24px 40px;
        }

        .admin-loading,
        .admin-error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 50vh;
          text-align: center;
        }

        .admin-error h2 {
          color: #dc2626;
        }

        .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid #e5e7eb;
          border-top-color: #1e4a7a;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 16px;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function B5e({stats:e}){return u.jsxs("div",{className:"overview-panel",children:[u.jsx("h2",{children:"Dashboard Overview"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:e.totals.users}),u.jsx("div",{className:"stat-label",children:"Total Users"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:e.totals.designs}),u.jsx("div",{className:"stat-label",children:"Total Designs"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:e.totals.projects}),u.jsx("div",{className:"stat-label",children:"Total Projects"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:e.totals.jobs}),u.jsx("div",{className:"stat-label",children:"AI Jobs Run"})]})]}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card highlight",children:[u.jsx("div",{className:"stat-value",children:e.activity.active_users_30d}),u.jsx("div",{className:"stat-label",children:"Active Users (30d)"})]}),u.jsxs("div",{className:"stat-card highlight",children:[u.jsx("div",{className:"stat-value",children:e.activity.designs_7d}),u.jsx("div",{className:"stat-label",children:"Designs This Week"})]}),u.jsxs("div",{className:"stat-card highlight",children:[u.jsx("div",{className:"stat-value",children:e.activity.designs_30d}),u.jsx("div",{className:"stat-label",children:"Designs This Month"})]}),u.jsxs("div",{className:"stat-card highlight",children:[u.jsxs("div",{className:"stat-value",children:[e.activity.job_success_rate,"%"]}),u.jsx("div",{className:"stat-label",children:"Job Success Rate"})]})]}),u.jsx("h3",{children:"Activity Timeline (14 Days)"}),u.jsx("div",{className:"activity-chart",children:e.timeline.map((t,n)=>u.jsxs("div",{className:"bar-container",children:[u.jsx("div",{className:"bar",style:{height:`${Math.max(4,t.count*20)}px`},title:`${t.date}: ${t.count} designs`}),u.jsx("div",{className:"bar-label",children:t.date.split("-")[2]})]},n))}),u.jsxs("div",{className:"breakdowns",children:[u.jsxs("div",{className:"breakdown-card",children:[u.jsx("h4",{children:"Input Mode"}),u.jsxs("div",{className:"breakdown-items",children:[u.jsxs("div",{className:"breakdown-item",children:[u.jsx("span",{children:"Prompt"}),u.jsx("strong",{children:e.breakdowns.input_mode.prompt})]}),u.jsxs("div",{className:"breakdown-item",children:[u.jsx("span",{children:"Image Upload"}),u.jsx("strong",{children:e.breakdowns.input_mode.image})]}),u.jsxs("div",{className:"breakdown-item",children:[u.jsx("span",{children:"SVG Upload"}),u.jsx("strong",{children:e.breakdowns.input_mode.svg})]})]})]}),u.jsxs("div",{className:"breakdown-card",children:[u.jsx("h4",{children:"View Mode Preference"}),u.jsxs("div",{className:"breakdown-items",children:[u.jsxs("div",{className:"breakdown-item",children:[u.jsx("span",{children:"Solid TPV"}),u.jsx("strong",{children:e.breakdowns.view_mode.solid})]}),u.jsxs("div",{className:"breakdown-item",children:[u.jsx("span",{children:"Blend TPV"}),u.jsx("strong",{children:e.breakdowns.view_mode.blend})]})]})]})]}),u.jsx("style",{jsx:!0,children:`
        .overview-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .overview-panel h3 {
          margin: 32px 0 16px 0;
          color: #1a202c;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 16px;
          margin-bottom: 16px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .stat-card.highlight {
          border-color: #1e4a7a;
          border-width: 2px;
        }

        .stat-value {
          font-size: 32px;
          font-weight: 700;
          color: #1e4a7a;
        }

        .stat-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }

        .activity-chart {
          display: flex;
          align-items: flex-end;
          gap: 8px;
          height: 120px;
          padding: 16px;
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .bar-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .bar {
          width: 100%;
          background: #1e4a7a;
          border-radius: 4px 4px 0 0;
          min-height: 4px;
        }

        .bar-label {
          font-size: 10px;
          color: #64748b;
          margin-top: 4px;
        }

        .breakdowns {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-top: 24px;
        }

        .breakdown-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .breakdown-card h4 {
          margin: 0 0 12px 0;
          color: #1a202c;
        }

        .breakdown-item {
          display: flex;
          justify-content: space-between;
          padding: 8px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .breakdown-item:last-child {
          border-bottom: none;
        }

        .breakdown-item span {
          color: #64748b;
        }

        .breakdown-item strong {
          color: #1a202c;
        }
      `})]})}function U5e({users:e}){return u.jsxs("div",{className:"users-panel",children:[u.jsxs("h2",{children:["User Management (",e.length," users)"]}),u.jsxs("table",{className:"users-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Role"}),u.jsx("th",{children:"Designs"}),u.jsx("th",{children:"Projects"}),u.jsx("th",{children:"Jobs"}),u.jsx("th",{children:"Last Design"}),u.jsx("th",{children:"Joined"})]})}),u.jsx("tbody",{children:e.map(t=>u.jsxs("tr",{children:[u.jsx("td",{children:t.email}),u.jsx("td",{children:u.jsx("span",{className:`role-badge ${t.role}`,children:t.role})}),u.jsx("td",{children:t.design_count}),u.jsx("td",{children:t.project_count}),u.jsx("td",{children:t.job_count}),u.jsx("td",{children:t.last_design_at?new Date(t.last_design_at).toLocaleDateString():"-"}),u.jsx("td",{children:new Date(t.created_at).toLocaleDateString()})]},t.id))})]}),u.jsx("style",{jsx:!0,children:`
        .users-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .users-table {
          width: 100%;
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          border-collapse: collapse;
        }

        .users-table th,
        .users-table td {
          padding: 12px 16px;
          text-align: left;
          border-bottom: 1px solid #e5e7eb;
        }

        .users-table th {
          background: #f8fafc;
          font-weight: 600;
          color: #64748b;
          font-size: 12px;
          text-transform: uppercase;
        }

        .users-table td {
          font-size: 14px;
          color: #1a202c;
        }

        .role-badge {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
        }

        .role-badge.user {
          background: #f3f4f6;
          color: #64748b;
        }

        .role-badge.admin {
          background: #dbeafe;
          color: #1e40af;
        }

        .role-badge.superadmin {
          background: #fef3c7;
          color: #92400e;
        }
      `})]})}function H5e({designs:e,total:t}){return u.jsxs("div",{className:"designs-panel",children:[u.jsxs("h2",{children:["All Designs (",t," total)"]}),u.jsx("div",{className:"designs-grid",children:e.map(n=>u.jsxs("div",{className:"design-card",children:[u.jsx("div",{className:"design-thumbnail",children:n.thumbnail_url||n.original_png_url?u.jsx("img",{src:n.thumbnail_url||n.original_png_url,alt:n.name}):u.jsx("div",{className:"no-image",children:"No preview"})}),u.jsxs("div",{className:"design-info",children:[u.jsx("h4",{children:n.name}),u.jsx("p",{className:"design-user",children:n.user_email}),u.jsx("p",{className:"design-date",children:new Date(n.created_at).toLocaleDateString()}),n.project&&u.jsx("span",{className:"project-badge",style:{backgroundColor:n.project.color||"#64748b"},children:n.project.name})]})]},n.id))}),u.jsx("style",{jsx:!0,children:`
        .designs-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .designs-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 16px;
        }

        .design-card {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .design-thumbnail {
          aspect-ratio: 1;
          background: #f3f4f6;
          overflow: hidden;
        }

        .design-thumbnail img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .no-image {
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #9ca3af;
          font-size: 14px;
        }

        .design-info {
          padding: 12px;
        }

        .design-info h4 {
          margin: 0 0 4px 0;
          font-size: 14px;
          color: #1a202c;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .design-user {
          margin: 0;
          font-size: 12px;
          color: #64748b;
        }

        .design-date {
          margin: 4px 0;
          font-size: 12px;
          color: #9ca3af;
        }

        .project-badge {
          display: inline-block;
          padding: 2px 8px;
          border-radius: 10px;
          font-size: 10px;
          color: white;
        }
      `})]})}function W5e({analytics:e}){return u.jsxs("div",{className:"colours-panel",children:[u.jsx("h2",{children:"Colour Usage Analytics"}),u.jsxs("div",{className:"colour-stats",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:e.totals.designs_analysed}),u.jsx("div",{className:"stat-label",children:"Designs Analysed"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:e.totals.colour_usages}),u.jsx("div",{className:"stat-label",children:"Total Colour Uses"})]})]}),u.jsx("h3",{children:"Top 10 TPV Colours"}),u.jsx("div",{className:"colour-list",children:e.top_colours.map((t,n)=>u.jsxs("div",{className:"colour-item",children:[u.jsxs("span",{className:"colour-rank",children:["#",n+1]}),u.jsx("div",{className:"colour-swatch",style:{backgroundColor:t.hex}}),u.jsxs("div",{className:"colour-info",children:[u.jsx("strong",{children:t.code}),u.jsx("span",{children:t.name})]}),u.jsxs("div",{className:"colour-count",children:[t.count," uses"]})]},t.code))}),u.jsx("h3",{children:"Colour Family Breakdown"}),u.jsx("div",{className:"family-bars",children:Object.entries(e.families).map(([t,n])=>u.jsxs("div",{className:"family-bar",children:[u.jsx("span",{className:"family-name",children:t}),u.jsx("div",{className:"bar-bg",children:u.jsx("div",{className:"bar-fill",style:{width:`${n/e.totals.colour_usages*100}%`,backgroundColor:V5e(t)}})}),u.jsx("span",{className:"family-count",children:n})]},t))}),e.top_blends.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{children:"Top Blend Combinations"}),u.jsx("div",{className:"blend-list",children:e.top_blends.map((t,n)=>u.jsxs("div",{className:"blend-item",children:[u.jsx("div",{className:"blend-swatches",children:t.components.map((r,i)=>u.jsx("div",{className:"blend-swatch",style:{backgroundColor:r.hex},title:`${r.code} - ${r.name}`},i))}),u.jsx("div",{className:"blend-codes",children:t.components.map(r=>r.code).join(" + ")}),u.jsxs("div",{className:"blend-count",children:[t.count," uses"]})]},n))})]}),u.jsx("style",{jsx:!0,children:`
        .colours-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .colours-panel h3 {
          margin: 32px 0 16px 0;
          color: #1a202c;
        }

        .colour-stats {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-bottom: 24px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .stat-value {
          font-size: 32px;
          font-weight: 700;
          color: #1e4a7a;
        }

        .stat-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }

        .colour-list {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .colour-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          border-bottom: 1px solid #f3f4f6;
        }

        .colour-item:last-child {
          border-bottom: none;
        }

        .colour-rank {
          width: 30px;
          font-size: 12px;
          color: #9ca3af;
        }

        .colour-swatch {
          width: 32px;
          height: 32px;
          border-radius: 6px;
          border: 1px solid #e5e7eb;
        }

        .colour-info {
          flex: 1;
        }

        .colour-info strong {
          display: block;
          color: #1a202c;
        }

        .colour-info span {
          font-size: 12px;
          color: #64748b;
        }

        .colour-count {
          font-weight: 600;
          color: #1e4a7a;
        }

        .family-bars {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          padding: 16px;
        }

        .family-bar {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 12px;
        }

        .family-bar:last-child {
          margin-bottom: 0;
        }

        .family-name {
          width: 80px;
          font-size: 14px;
          color: #64748b;
          text-transform: capitalize;
        }

        .bar-bg {
          flex: 1;
          height: 20px;
          background: #f3f4f6;
          border-radius: 4px;
          overflow: hidden;
        }

        .bar-fill {
          height: 100%;
          border-radius: 4px;
        }

        .family-count {
          width: 50px;
          text-align: right;
          font-weight: 600;
          color: #1a202c;
        }

        .blend-list {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .blend-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          border-bottom: 1px solid #f3f4f6;
        }

        .blend-item:last-child {
          border-bottom: none;
        }

        .blend-swatches {
          display: flex;
          gap: 4px;
        }

        .blend-swatch {
          width: 24px;
          height: 24px;
          border-radius: 4px;
          border: 1px solid #e5e7eb;
        }

        .blend-codes {
          flex: 1;
          font-size: 14px;
          color: #1a202c;
        }

        .blend-count {
          font-weight: 600;
          color: #1e4a7a;
        }
      `})]})}function V5e(e){return{reds:"#dc2626",greens:"#16a34a",blues:"#2563eb",yellows:"#ca8a04",neutrals:"#6b7280"}[e]||"#6b7280"}const Qb=[{code:"RH30",name:"Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH40",name:"Mustard",hex:"#E5A144"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH70",name:"Black",hex:"#231F20"}],Nj=["ocean theme with dolphins and waves","jungle adventure with parrots","solar system with planets","garden with butterflies and flowers","racing track with cars","underwater coral reef scene","dinosaur footprints trail","rainbow with clouds"],G5e=[...Array(60)].map(e=>({delay:`${Math.random()*3}s`,x:`${Math.random()*100}%`,y:`${Math.random()*100}%`,size:`${8+Math.random()*12}px`}));function q5e(){const[e,t]=pe.useState(""),[n,r]=pe.useState(""),[i,s]=pe.useState(""),[a,o]=pe.useState(!1),[c,h]=pe.useState(!1),[d,p]=pe.useState(0);pe.useEffect(()=>{const v=setInterval(()=>{p(w=>(w+1)%Nj.length)},5e3);return()=>clearInterval(v)},[]);const m=async v=>{v.preventDefault(),s(""),o(!0);try{await wa.signIn(e,n)}catch(w){s(w.message||"Sign in failed")}finally{o(!1)}},g=v=>{var w;(w=document.getElementById(v))==null||w.scrollIntoView({behavior:"smooth"})};return u.jsxs("div",{className:"landing-page",children:[u.jsxs("nav",{className:"landing-nav",children:[u.jsxs("div",{className:"nav-logo",children:[u.jsxs("div",{className:"logo-main",children:[u.jsxs("span",{className:"logo-text",children:["Rosehill TPV",u.jsx("sup",{children:""})]}),u.jsx("span",{className:"logo-accent",children:"Studio"})]}),u.jsx("span",{className:"logo-byline",children:"by Rosehill Sports & Play"})]}),u.jsxs("div",{className:"nav-links",children:[u.jsx("button",{onClick:()=>g("features"),children:"Features"}),u.jsx("button",{onClick:()=>g("palette"),children:"Colours"}),u.jsx("button",{onClick:()=>h(!0),className:"nav-cta",children:"Sign In"})]})]}),u.jsxs("section",{className:"hero",children:[u.jsx("div",{className:"hero-background",children:u.jsx("div",{className:"granule-field",children:G5e.map((v,w)=>u.jsx("div",{className:"granule",style:{"--delay":v.delay,"--x":v.x,"--y":v.y,"--color":Qb[w%Qb.length].hex,"--size":v.size}},w))})}),u.jsxs("div",{className:"hero-content",children:[u.jsxs("div",{className:"hero-badge",children:["Rosehill TPV",u.jsx("sup",{children:""})," Surface Design Platform"]}),u.jsxs("h1",{children:[u.jsx("span",{className:"hero-line-1",children:"Design Any"}),u.jsxs("span",{className:"hero-line-2",children:["Rosehill TPV",u.jsx("sup",{children:""})," Surface"]})]}),u.jsxs("p",{className:"hero-subtitle",children:["From AI-generated playground art to professional sports courts  one powerful design platform for all your Rosehill TPV",u.jsx("sup",{children:""})," surfaces."]}),u.jsxs("div",{className:"hero-ctas",children:[u.jsxs("button",{onClick:()=>h(!0),className:"cta-primary",children:["Start Designing",u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),u.jsx("button",{onClick:()=>g("how-it-works"),className:"cta-secondary",children:"See How It Works"})]})]}),u.jsx("div",{className:"hero-visual",children:u.jsx("div",{className:"mockup-container",children:u.jsxs("div",{className:"mockup-screen",children:[u.jsx("div",{className:"mockup-header",children:u.jsxs("div",{className:"mockup-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]})}),u.jsxs("div",{className:"mockup-content",children:[u.jsx("div",{className:"mockup-input",children:u.jsx("span",{className:"typing-text",children:Nj[d]},d)}),u.jsxs("div",{className:"mockup-preview",children:[u.jsx("div",{className:"preview-shape shape-1"}),u.jsx("div",{className:"preview-shape shape-2"}),u.jsx("div",{className:"preview-shape shape-3"})]})]})]})})})]}),u.jsxs("section",{className:"unified-showcase",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("span",{className:"section-tag",children:"One Powerful Tool"}),u.jsx("h2",{children:"Design Any Surface"}),u.jsx("p",{className:"section-subtitle",children:"Courts, tracks, playgrounds, and custom graphics  all in one canvas"})]}),u.jsx("div",{className:"showcase-container",children:u.jsxs("div",{className:"showcase-card",children:[u.jsxs("div",{className:"showcase-canvas",children:[u.jsxs("div",{className:"canvas-preview",children:[u.jsx("div",{className:"canvas-grid"}),u.jsxs("div",{className:"canvas-surface",children:[u.jsx("div",{className:"surface-court"}),u.jsx("div",{className:"surface-motif"})]})]}),u.jsxs("div",{className:"capability-pill pill-courts",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M2 12h4M18 12h4"})]}),u.jsx("span",{children:"Courts & Tracks"})]}),u.jsxs("div",{className:"capability-pill pill-ai",children:[u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:u.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})}),u.jsx("span",{children:"AI Artwork"})]}),u.jsxs("div",{className:"capability-pill pill-upload",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("path",{d:"M21 15l-5-5L5 21"})]}),u.jsx("span",{children:"Custom Images"})]}),u.jsxs("div",{className:"capability-pill pill-layers",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),u.jsx("path",{d:"M2 17l10 5 10-5"}),u.jsx("path",{d:"M2 12l10 5 10-5"})]}),u.jsx("span",{children:"Layer & Combine"})]})]}),u.jsx("div",{className:"showcase-tagline",children:"One canvas. Unlimited possibilities."}),u.jsxs("div",{className:"showcase-features",children:[u.jsxs("div",{className:"showcase-feature",children:[u.jsx("div",{className:"feature-badge ai-badge",children:"AI-POWERED"}),u.jsx("span",{children:"Generate motifs from text descriptions"})]}),u.jsxs("div",{className:"showcase-feature",children:[u.jsx("div",{className:"feature-badge template-badge",children:"TEMPLATES"}),u.jsx("span",{children:"15+ professional court layouts"})]}),u.jsxs("div",{className:"showcase-feature",children:[u.jsx("div",{className:"feature-badge compose-badge",children:"COMPOSE"}),u.jsx("span",{children:"Mix courts, tracks & artwork freely"})]})]}),u.jsxs("button",{onClick:()=>h(!0),className:"cta-primary showcase-cta",children:["Start Designing",u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})})]}),u.jsxs("section",{id:"how-it-works",className:"how-it-works",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("span",{className:"section-tag",children:"Process"}),u.jsx("h2",{children:"Three Steps to Production-Ready Designs"})]}),u.jsxs("div",{className:"steps-container",children:[u.jsxs("div",{className:"step",children:[u.jsx("div",{className:"step-number",children:"01"}),u.jsx("div",{className:"step-icon",children:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),u.jsx("path",{d:"M3 9h18M9 21V9"})]})}),u.jsx("h3",{children:"Set Up Your Surface"}),u.jsx("p",{children:"Define your dimensions and choose your base colour. Start with any size from small playgrounds to full athletic facilities."})]}),u.jsx("div",{className:"step-connector",children:u.jsx("svg",{viewBox:"0 0 100 20",preserveAspectRatio:"none",children:u.jsx("path",{d:"M0 10 Q50 10 100 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 4"})})}),u.jsxs("div",{className:"step",children:[u.jsx("div",{className:"step-number",children:"02"}),u.jsx("div",{className:"step-icon",children:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),u.jsx("path",{d:"M2 17l10 5 10-5"}),u.jsx("path",{d:"M2 12l10 5 10-5"})]})}),u.jsx("h3",{children:"Add Elements"}),u.jsx("p",{children:"Drop in courts and tracks from the library, generate AI artwork, upload your own designs  layer and combine freely."})]}),u.jsx("div",{className:"step-connector",children:u.jsx("svg",{viewBox:"0 0 100 20",preserveAspectRatio:"none",children:u.jsx("path",{d:"M0 10 Q50 10 100 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 4"})})}),u.jsxs("div",{className:"step",children:[u.jsx("div",{className:"step-number",children:"03"}),u.jsx("div",{className:"step-icon",children:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),u.jsx("path",{d:"M14 2v6h6M12 18v-6M9 15l3 3 3-3"})]})}),u.jsx("h3",{children:"Export & Build"}),u.jsx("p",{children:"Generate professional PDFs with material specifications, colour recipes, and exact quantities for installation."})]})]})]}),u.jsxs("section",{id:"features",className:"features",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("span",{className:"section-tag",children:"Capabilities"}),u.jsxs("h2",{children:["Everything You Need to Design Rosehill TPV",u.jsx("sup",{children:""})," Surfaces"]})]}),u.jsxs("div",{className:"features-grid unified-features",children:[u.jsxs("div",{className:"feature-card feature-highlight",children:[u.jsx("div",{className:"feature-icon",children:u.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:u.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),u.jsx("h3",{children:"AI Text-to-Vector"}),u.jsxs("p",{children:["Describe any concept in natural language. Our AI transforms your words into production-ready vector designs optimised for Rosehill TPV",u.jsx("sup",{children:""})," surfaces."]}),u.jsx("div",{className:"feature-example",children:'"vibrant underwater scene with coral reef"'})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:u.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M2 12h4M18 12h4"})]})}),u.jsx("h3",{children:"Court & Track Library"}),u.jsx("p",{children:"15+ professional templates including basketball, tennis, netball, futsal, and running tracks."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:u.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),u.jsx("h3",{children:"Image Vectorisation"}),u.jsxs("p",{children:["Upload any image and convert it to clean vectors optimised for Rosehill TPV",u.jsx("sup",{children:""})," production."]})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:u.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),u.jsx("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),u.jsx("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),u.jsx("circle",{cx:"6.5",cy:"12.5",r:"2.5"})]})}),u.jsx("h3",{children:"Colour Matching"}),u.jsxs("p",{children:["Automatic colour matching to the Rosehill TPV",u.jsx("sup",{children:""})," palette with precise specifications."]})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:u.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),u.jsx("path",{d:"M2 17l10 5 10-5"}),u.jsx("path",{d:"M2 12l10 5 10-5"})]})}),u.jsx("h3",{children:"Layer Management"}),u.jsx("p",{children:"Combine courts, tracks, and motifs freely. Drag, rotate, and layer with precision controls."})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:u.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[u.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),u.jsx("path",{d:"M14 2v6h6M12 18v-6M9 15l3 3 3-3"})]})}),u.jsx("h3",{children:"PDF Specifications"}),u.jsx("p",{children:"Export production-ready material specs with colour specifications and installation guides."})]})]})]}),u.jsxs("section",{id:"palette",className:"palette-section",children:[u.jsxs("div",{className:"section-header light",children:[u.jsx("span",{className:"section-tag",children:"Palette"}),u.jsxs("h2",{children:["21 Standard Rosehill TPV",u.jsx("sup",{children:""})," Colours"]}),u.jsxs("p",{className:"section-subtitle",children:["The complete Rosehill TPV",u.jsx("sup",{children:""})," granule palette at your fingertips"]})]}),u.jsx("div",{className:"palette-grid",children:Qb.map((v,w)=>u.jsxs("div",{className:"palette-swatch",style:{"--swatch-color":v.hex,"--delay":`${w*.03}s`},children:[u.jsx("div",{className:"swatch-color"}),u.jsxs("div",{className:"swatch-info",children:[u.jsx("span",{className:"swatch-name",children:v.name}),u.jsx("span",{className:"swatch-code",children:v.code})]})]},v.code))})]}),u.jsx("section",{className:"benefits",children:u.jsxs("div",{className:"benefits-grid benefits-grid-4",children:[u.jsxs("div",{className:"benefit",children:[u.jsx("div",{className:"benefit-metric",children:"10x"}),u.jsx("div",{className:"benefit-label",children:"Faster Design"}),u.jsx("p",{children:"What took hours now takes minutes with AI and templates."})]}),u.jsxs("div",{className:"benefit",children:[u.jsx("div",{className:"benefit-metric",children:"100%"}),u.jsx("div",{className:"benefit-label",children:"Production Accurate"}),u.jsxs("p",{children:["Exact Rosehill TPV",u.jsx("sup",{children:""})," granule specs with precise specifications."]})]}),u.jsxs("div",{className:"benefit",children:[u.jsx("div",{className:"benefit-metric infinite-symbol",children:""}),u.jsx("div",{className:"benefit-label",children:"Combinations"}),u.jsx("p",{children:"Mix courts, tracks, and artwork in unlimited configurations."})]}),u.jsxs("div",{className:"benefit",children:[u.jsx("div",{className:"benefit-metric",children:"21"}),u.jsx("div",{className:"benefit-label",children:"Standard Colours"}),u.jsxs("p",{children:["Complete Rosehill TPV",u.jsx("sup",{children:""})," standard colour palette."]})]})]})}),u.jsx("footer",{className:"landing-footer",children:u.jsxs("div",{className:"footer-content",children:[u.jsxs("div",{className:"footer-brand",children:[u.jsxs("span",{className:"footer-logo",children:["Rosehill TPV",u.jsx("sup",{children:""})," Studio"]}),u.jsx("span",{className:"footer-tagline",children:"A web app by Rosehill Sports & Play"}),u.jsx("span",{className:"footer-division",children:"A Division of Rosehill Group"})]}),u.jsxs("div",{className:"footer-links",children:[u.jsx("a",{href:"https://rosehilltpv.com",target:"_blank",rel:"noopener noreferrer",children:"rosehilltpv.com"}),u.jsx("a",{href:"mailto:info@rosehill.group",children:"info@rosehill.group"})]})]})}),u.jsx("section",{className:"cta-footer",children:u.jsxs("div",{className:"cta-content",children:[u.jsx("h2",{children:"Ready to Design Your Surface?"}),u.jsxs("p",{children:["Create playgrounds or sports facilities with production-ready Rosehill TPV",u.jsx("sup",{children:""})," specifications."]}),u.jsxs("button",{onClick:()=>h(!0),className:"cta-primary large",children:["Sign In to Rosehill TPV",u.jsx("sup",{children:""})," Studio",u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),u.jsxs("p",{className:"cta-note",children:["Need an account? Contact ",u.jsx("a",{href:"mailto:info@rosehill.group",children:"info@rosehill.group"})]})]})}),c&&u.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:u.jsxs("div",{className:"sign-in-modal",onClick:v=>v.stopPropagation(),children:[u.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"Sign In"}),u.jsxs("p",{children:["Access your Rosehill TPV",u.jsx("sup",{children:""})," Studio account"]})]}),i&&u.jsx("div",{className:"form-error",children:i}),u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:e,onChange:v=>t(v.target.value),placeholder:"your.email@company.com",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:n,onChange:v=>r(v.target.value),required:!0})]}),u.jsx("button",{type:"submit",disabled:a,className:"submit-btn",children:a?"Signing in...":"Sign In"})]}),u.jsx("p",{className:"modal-footer-text",children:"Don't have an account? Contact your administrator."})]})}),u.jsx("style",{jsx:!0,children:`
        /* ============================================
           TPV STUDIO LANDING PAGE
           Aesthetic: Sophisticated Industrial-Creative
           ============================================ */

        @import url('https://fonts.googleapis.com/css2?family=Overpass:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap');

        .landing-page {
          --primary: #1a365d;
          --primary-light: #2a4a73;
          --accent: #ff6b35;
          --accent-hover: #e55a2a;
          --text: #1a202c;
          --text-secondary: #64748b;
          --text-light: #94a3b8;
          --bg: #fafbfc;
          --bg-dark: #0f172a;
          --card: #ffffff;
          --border: #e2e8f0;

          font-family: 'Source Sans Pro', sans-serif;
          background: var(--bg);
          color: var(--text);
          overflow-x: hidden;
        }

        /* Navigation */
        .landing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 3rem;
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(12px);
          border-bottom: 1px solid var(--border);
        }

        .nav-logo {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 700;
        }

        .logo-text {
          color: var(--primary);
        }

        .logo-accent {
          color: var(--accent);
        }

        .nav-links {
          display: flex;
          align-items: center;
          gap: 2rem;
        }

        .nav-links button {
          background: none;
          border: none;
          font-family: inherit;
          font-size: 0.875rem;
          font-weight: 500;
          color: var(--text-secondary);
          cursor: pointer;
          transition: color 0.2s;
        }

        .nav-links button:hover {
          color: var(--text);
        }

        .nav-cta {
          background: var(--primary) !important;
          color: white !important;
          padding: 0.5rem 1.25rem !important;
          border-radius: 6px !important;
        }

        .nav-cta:hover {
          background: var(--primary-light) !important;
        }

        .logo-main {
          display: flex;
          align-items: baseline;
          gap: 0.25rem;
        }

        .logo-byline {
          display: block;
          font-size: 0.625rem;
          font-weight: 400;
          color: var(--text-light);
          margin-top: 2px;
          letter-spacing: 0.02em;
        }

        .landing-page sup {
          font-size: 0.6em;
          vertical-align: super;
          line-height: 0;
        }

        /* Hero Section */
        .hero {
          min-height: 100vh;
          display: grid;
          grid-template-columns: 1fr 1fr;
          align-items: center;
          padding: 8rem 4rem 4rem;
          position: relative;
          overflow: hidden;
        }

        .hero-background {
          position: absolute;
          inset: 0;
          pointer-events: none;
        }

        .granule-field {
          position: absolute;
          inset: 0;
        }

        .granule {
          position: absolute;
          left: var(--x);
          top: var(--y);
          width: var(--size);
          height: var(--size);
          background: var(--color);
          border-radius: 50%;
          opacity: 0.15;
          animation: float 8s ease-in-out infinite;
          animation-delay: var(--delay);
        }

        @keyframes float {
          0%, 100% { transform: translateY(0) scale(1); }
          50% { transform: translateY(-20px) scale(1.1); }
        }

        .hero-content {
          position: relative;
          z-index: 10;
        }

        .hero-badge {
          display: inline-block;
          padding: 0.5rem 1rem;
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
          font-size: 0.75rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.1em;
          border-radius: 50px;
          margin-bottom: 1.5rem;
        }

        .hero h1 {
          font-family: 'Overpass', sans-serif;
          font-size: 3.5rem;
          font-weight: 700;
          line-height: 1.1;
          margin: 0 0 1.5rem;
        }

        .hero-line-1 {
          display: block;
          color: var(--text-secondary);
        }

        .hero-line-2 {
          display: block;
          color: var(--primary);
        }

        .hero-subtitle {
          font-size: 1.125rem;
          color: var(--text-secondary);
          line-height: 1.7;
          max-width: 480px;
          margin-bottom: 2rem;
        }

        .hero-ctas {
          display: flex;
          gap: 1rem;
        }

        .cta-primary {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.875rem 1.5rem;
          background: var(--accent);
          color: white;
          border: none;
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .cta-primary:hover {
          background: var(--accent-hover);
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
        }

        .cta-primary.large {
          padding: 1rem 2rem;
          font-size: 1rem;
        }

        .cta-secondary {
          padding: 0.875rem 1.5rem;
          background: white;
          color: var(--text);
          border: 2px solid var(--border);
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .cta-secondary:hover {
          border-color: var(--primary);
          color: var(--primary);
        }

        /* Hero Visual / Mockup */
        .hero-visual {
          position: relative;
          z-index: 10;
          display: flex;
          justify-content: center;
        }

        .mockup-container {
          perspective: 1000px;
        }

        .mockup-screen {
          width: 400px;
          background: white;
          border-radius: 12px;
          box-shadow: 0 24px 80px rgba(0, 0, 0, 0.15);
          overflow: hidden;
          transform: rotateY(-5deg) rotateX(2deg);
          animation: mockupFloat 6s ease-in-out infinite;
        }

        @keyframes mockupFloat {
          0%, 100% { transform: rotateY(-5deg) rotateX(2deg) translateY(0); }
          50% { transform: rotateY(-5deg) rotateX(2deg) translateY(-10px); }
        }

        .mockup-header {
          padding: 0.75rem 1rem;
          background: #f8f8f8;
          border-bottom: 1px solid #eee;
        }

        .mockup-dots {
          display: flex;
          gap: 6px;
        }

        .mockup-dots span {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          background: #ddd;
        }

        .mockup-dots span:nth-child(1) { background: #ff5f56; }
        .mockup-dots span:nth-child(2) { background: #ffbd2e; }
        .mockup-dots span:nth-child(3) { background: #27ca41; }

        .mockup-content {
          padding: 1.5rem;
        }

        .mockup-input {
          background: #f5f5f5;
          padding: 1rem;
          border-radius: 8px;
          font-size: 0.875rem;
          color: var(--text-secondary);
          margin-bottom: 1.5rem;
          display: flex;
          align-items: center;
        }

        .typing-text {
          display: inline-block;
          overflow: hidden;
          white-space: nowrap;
          border-right: 2px solid var(--primary);
          animation: typing 5s steps(40, end) forwards, blink 0.7s step-end infinite;
        }

        @keyframes typing {
          0% { max-width: 0; }
          35% { max-width: 500px; }
          65% { max-width: 500px; }
          100% { max-width: 0; }
        }

        @keyframes blink {
          50% { border-color: transparent; }
        }

        .mockup-preview {
          height: 180px;
          background: linear-gradient(135deg, #e8f4f8, #f0f4ff);
          border-radius: 8px;
          position: relative;
          overflow: hidden;
        }

        .preview-shape {
          position: absolute;
          border-radius: 50%;
          animation: shapeReveal 4s ease-out infinite;
        }

        .shape-1 {
          width: 80px;
          height: 80px;
          background: var(--accent);
          opacity: 0.8;
          top: 20%;
          left: 15%;
          animation-delay: 0s;
        }

        .shape-2 {
          width: 60px;
          height: 60px;
          background: #30D5C8;
          opacity: 0.8;
          top: 40%;
          left: 50%;
          animation-delay: 0.3s;
        }

        .shape-3 {
          width: 100px;
          height: 100px;
          background: var(--primary);
          opacity: 0.8;
          top: 50%;
          right: 10%;
          animation-delay: 0.6s;
        }

        @keyframes shapeReveal {
          0%, 100% { transform: scale(0.8); opacity: 0.4; }
          50% { transform: scale(1); opacity: 0.8; }
        }

        /* Section Headers */
        .section-header {
          text-align: center;
          margin-bottom: 4rem;
        }

        .section-header.light h2,
        .section-header.light .section-subtitle {
          color: white;
        }

        .section-header.light .section-tag {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.9);
        }

        .section-tag {
          display: inline-block;
          padding: 0.375rem 0.875rem;
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
          font-size: 0.6875rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.15em;
          border-radius: 50px;
          margin-bottom: 1rem;
        }

        .section-header h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text);
          margin: 0;
        }

        .section-subtitle {
          margin-top: 1rem;
          font-size: 1.125rem;
          color: var(--text-secondary);
        }

        /* How It Works */
        .how-it-works {
          padding: 6rem 4rem;
          background: white;
        }

        .steps-container {
          display: flex;
          align-items: flex-start;
          justify-content: center;
          gap: 1rem;
        }

        .step {
          flex: 1;
          max-width: 280px;
          text-align: center;
          padding: 2rem 1.5rem;
        }

        .step-number {
          font-family: 'Overpass', sans-serif;
          font-size: 3rem;
          font-weight: 700;
          color: rgba(30, 74, 122, 0.1);
          margin-bottom: 1rem;
        }

        .step-icon {
          width: 64px;
          height: 64px;
          margin: 0 auto 1.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(255, 107, 53, 0.1);
          border-radius: 16px;
          color: var(--accent);
        }

        .step h3 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.25rem;
          font-weight: 600;
          margin: 0 0 0.75rem;
          color: var(--text);
        }

        .step p {
          font-size: 0.9375rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        .step-connector {
          width: 100px;
          padding-top: 5rem;
          color: var(--border);
        }

        /* Features */
        .features {
          padding: 6rem 4rem;
          background: var(--bg);
        }

        .features-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 1.5rem;
          max-width: 1200px;
          margin: 0 auto;
        }

        .feature-card {
          background: white;
          padding: 2rem;
          border-radius: 12px;
          border: 1px solid var(--border);
          transition: all 0.3s;
        }

        .feature-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
        }

        .feature-highlight {
          grid-column: span 2;
          background: linear-gradient(135deg, var(--primary), var(--primary-light));
          color: white;
          border: none;
        }

        .feature-highlight .feature-icon {
          background: rgba(255, 255, 255, 0.2);
          color: white;
        }

        .feature-highlight h3 {
          color: white;
        }

        .feature-highlight p {
          color: rgba(255, 255, 255, 0.9);
        }

        .feature-icon {
          width: 56px;
          height: 56px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(30, 74, 122, 0.1);
          border-radius: 12px;
          color: var(--primary);
          margin-bottom: 1.25rem;
        }

        .feature-card h3 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.125rem;
          font-weight: 600;
          margin: 0 0 0.5rem;
        }

        .feature-card p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        .feature-example {
          margin-top: 1.5rem;
          padding: 0.875rem 1rem;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          font-size: 0.8125rem;
          font-style: italic;
          opacity: 0.9;
        }

        /* Unified Showcase Section */
        .unified-showcase {
          padding: 6rem 4rem;
          background: white;
        }

        .showcase-container {
          max-width: 900px;
          margin: 0 auto;
        }

        .showcase-card {
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 24px;
          padding: 3rem;
          border: 1px solid var(--border);
          text-align: center;
        }

        .showcase-canvas {
          position: relative;
          height: 280px;
          margin-bottom: 2rem;
        }

        .canvas-preview {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 240px;
          height: 160px;
          background: white;
          border-radius: 12px;
          border: 2px solid var(--border);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
          overflow: hidden;
        }

        .canvas-grid {
          position: absolute;
          inset: 0;
          background-image:
            linear-gradient(rgba(30, 74, 122, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(30, 74, 122, 0.05) 1px, transparent 1px);
          background-size: 20px 20px;
        }

        .canvas-surface {
          position: absolute;
          inset: 10px;
          background: #e8f4f8;
          border-radius: 4px;
        }

        .surface-court {
          position: absolute;
          top: 20%;
          left: 15%;
          width: 70%;
          height: 60%;
          border: 2px solid #00a6a3;
          border-radius: 4px;
          opacity: 0.8;
        }

        .surface-court::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 2px;
          background: #00a6a3;
        }

        .surface-court::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          border: 2px solid #00a6a3;
          border-radius: 50%;
        }

        .surface-motif {
          position: absolute;
          bottom: 10%;
          right: 10%;
          width: 35px;
          height: 35px;
          background: var(--accent);
          border-radius: 50%;
          opacity: 0.8;
          animation: motifPulse 3s ease-in-out infinite;
        }

        @keyframes motifPulse {
          0%, 100% { transform: scale(1); opacity: 0.8; }
          50% { transform: scale(1.1); opacity: 1; }
        }

        .capability-pill {
          position: absolute;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.625rem 1rem;
          background: white;
          border-radius: 50px;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
          font-size: 0.8125rem;
          font-weight: 500;
          color: var(--text);
          animation: pillFloat 4s ease-in-out infinite;
        }

        .pill-courts {
          top: 10%;
          left: 5%;
          animation-delay: 0s;
        }

        .pill-courts svg {
          color: #00a6a3;
        }

        .pill-ai {
          top: 5%;
          right: 10%;
          animation-delay: 0.5s;
        }

        .pill-ai svg {
          color: var(--accent);
        }

        .pill-upload {
          bottom: 15%;
          left: 8%;
          animation-delay: 1s;
        }

        .pill-upload svg {
          color: var(--primary);
        }

        .pill-layers {
          bottom: 10%;
          right: 5%;
          animation-delay: 1.5s;
        }

        .pill-layers svg {
          color: #30D5C8;
        }

        @keyframes pillFloat {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }

        .showcase-tagline {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          color: var(--text);
          margin-bottom: 2rem;
        }

        .showcase-features {
          display: flex;
          justify-content: center;
          gap: 2rem;
          flex-wrap: wrap;
          margin-bottom: 2rem;
        }

        .showcase-feature {
          display: flex;
          align-items: center;
          gap: 0.625rem;
          font-size: 0.875rem;
          color: var(--text-secondary);
        }

        .feature-badge {
          padding: 0.25rem 0.625rem;
          border-radius: 50px;
          font-size: 0.625rem;
          font-weight: 700;
          letter-spacing: 0.05em;
        }

        .ai-badge {
          background: rgba(255, 107, 53, 0.1);
          color: var(--accent);
        }

        .template-badge {
          background: rgba(0, 166, 163, 0.1);
          color: #00a6a3;
        }

        .compose-badge {
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
        }

        .showcase-cta {
          margin: 0 auto;
        }

        /* Unified Features Grid */
        .unified-features {
          grid-template-columns: repeat(3, 1fr);
        }

        /* Infinite symbol styling */
        .infinite-symbol {
          font-size: 3.5rem;
          line-height: 1;
        }

        /* Benefits Grid 4 columns */
        .benefits-grid-4 {
          grid-template-columns: repeat(4, 1fr);
        }

        /* Palette Section */
        .palette-section {
          padding: 6rem 4rem;
          background: var(--bg-dark);
        }

        .palette-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 1rem;
          max-width: 1000px;
          margin: 0 auto;
        }

        .palette-swatch {
          animation: swatchReveal 0.5s ease-out forwards;
          animation-delay: var(--delay);
          opacity: 0;
          transform: translateY(20px);
        }

        @keyframes swatchReveal {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .swatch-color {
          aspect-ratio: 1;
          background: var(--swatch-color);
          border-radius: 8px;
          margin-bottom: 0.5rem;
          transition: transform 0.2s;
        }

        .palette-swatch:hover .swatch-color {
          transform: scale(1.1);
        }

        .swatch-info {
          text-align: center;
        }

        .swatch-name {
          display: block;
          font-size: 0.6875rem;
          font-weight: 500;
          color: white;
        }

        .swatch-code {
          display: block;
          font-size: 0.625rem;
          color: rgba(255, 255, 255, 0.5);
        }

        /* Benefits */
        .benefits {
          padding: 6rem 4rem;
          background: white;
        }

        .benefits-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 3rem;
          max-width: 1000px;
          margin: 0 auto;
          text-align: center;
        }

        .benefit-metric {
          font-family: 'Overpass', sans-serif;
          font-size: 4rem;
          font-weight: 700;
          color: var(--accent);
          line-height: 1;
        }

        .benefit-label {
          font-family: 'Overpass', sans-serif;
          font-size: 1.125rem;
          font-weight: 600;
          color: var(--text);
          margin: 0.5rem 0 1rem;
        }

        .benefit p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        /* Company Footer */
        .landing-footer {
          padding: 3rem 4rem;
          background: var(--bg-dark);
          border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-content {
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: 2rem;
        }

        .footer-brand {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        .footer-logo {
          font-family: 'Overpass', sans-serif;
          font-size: 1.25rem;
          font-weight: 600;
          color: white;
        }

        .footer-tagline {
          font-size: 0.875rem;
          color: rgba(255, 255, 255, 0.8);
        }

        .footer-division {
          font-size: 0.75rem;
          color: rgba(255, 255, 255, 0.5);
        }

        .footer-links {
          display: flex;
          gap: 2rem;
        }

        .footer-links a {
          font-size: 0.875rem;
          color: rgba(255, 255, 255, 0.7);
          text-decoration: none;
          transition: color 0.2s;
        }

        .footer-links a:hover {
          color: var(--accent);
        }

        /* CTA Footer */
        .cta-footer {
          padding: 6rem 4rem;
          background: var(--bg);
          text-align: center;
        }

        .cta-content h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text);
          margin: 0 0 1rem;
        }

        .cta-content > p {
          font-size: 1.125rem;
          color: var(--text-secondary);
          margin-bottom: 2rem;
        }

        .cta-note {
          margin-top: 1.5rem;
          font-size: 0.875rem;
          color: var(--text-light);
        }

        .cta-note a {
          color: var(--primary);
          text-decoration: none;
        }

        .cta-note a:hover {
          text-decoration: underline;
        }

        /* Modal */
        .modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.5);
          backdrop-filter: blur(4px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 2000;
          padding: 2rem;
        }

        .sign-in-modal {
          background: white;
          border-radius: 16px;
          padding: 2.5rem;
          width: 100%;
          max-width: 400px;
          position: relative;
          animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
        }

        .modal-close {
          position: absolute;
          top: 1rem;
          right: 1rem;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: none;
          border: none;
          color: var(--text-light);
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.2s;
        }

        .modal-close:hover {
          background: var(--bg);
          color: var(--text);
        }

        .modal-header {
          text-align: center;
          margin-bottom: 1.5rem;
        }

        .modal-header h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          margin: 0 0 0.25rem;
        }

        .modal-header p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          margin: 0;
        }

        .form-error {
          padding: 0.75rem 1rem;
          background: #fef2f2;
          color: #dc2626;
          border-radius: 8px;
          font-size: 0.875rem;
          margin-bottom: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          font-size: 0.875rem;
          font-weight: 500;
          margin-bottom: 0.5rem;
        }

        .form-group input {
          width: 100%;
          padding: 0.75rem 1rem;
          border: 1px solid var(--border);
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          transition: all 0.2s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(30, 74, 122, 0.1);
        }

        .submit-btn {
          width: 100%;
          padding: 0.875rem;
          background: var(--accent);
          color: white;
          border: none;
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .submit-btn:hover:not(:disabled) {
          background: var(--accent-hover);
        }

        .submit-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .modal-footer-text {
          text-align: center;
          font-size: 0.8125rem;
          color: var(--text-light);
          margin: 1.5rem 0 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
          .hero {
            grid-template-columns: 1fr;
            text-align: center;
          }

          .hero-content {
            max-width: 600px;
            margin: 0 auto;
          }

          .hero-subtitle {
            margin-left: auto;
            margin-right: auto;
          }

          .hero-ctas {
            justify-content: center;
          }

          .hero-visual {
            display: none;
          }

          .showcase-canvas {
            height: 240px;
          }

          .capability-pill {
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
          }

          .features-grid {
            grid-template-columns: repeat(2, 1fr);
          }

          .unified-features {
            grid-template-columns: repeat(2, 1fr);
          }

          .feature-highlight {
            grid-column: span 2;
          }

          .benefits-grid-4 {
            grid-template-columns: repeat(2, 1fr);
          }

          .palette-grid {
            grid-template-columns: repeat(5, 1fr);
          }
        }

        @media (max-width: 768px) {
          .landing-nav {
            padding: 1rem 1.5rem;
          }

          .nav-links {
            gap: 1rem;
          }

          .hero {
            padding: 6rem 1.5rem 3rem;
          }

          .hero h1 {
            font-size: 2.5rem;
          }

          .steps-container {
            flex-direction: column;
            gap: 0;
          }

          .step-connector {
            display: none;
          }

          .features-grid,
          .unified-features {
            grid-template-columns: 1fr;
          }

          .feature-highlight {
            grid-column: span 1;
          }

          .section-header h2 {
            font-size: 2rem;
          }

          .how-it-works,
          .features,
          .palette-section,
          .benefits,
          .cta-footer,
          .unified-showcase,
          .landing-footer {
            padding: 4rem 1.5rem;
          }

          .footer-content {
            flex-direction: column;
            text-align: center;
          }

          .footer-links {
            flex-direction: column;
            gap: 1rem;
          }

          .logo-byline {
            display: none;
          }

          .showcase-card {
            padding: 2rem 1.5rem;
          }

          .showcase-canvas {
            height: 200px;
          }

          .canvas-preview {
            width: 180px;
            height: 120px;
          }

          .capability-pill {
            display: none;
          }

          .showcase-features {
            flex-direction: column;
            gap: 1rem;
          }

          .showcase-tagline {
            font-size: 1.25rem;
          }

          .benefits-grid,
          .benefits-grid-4 {
            grid-template-columns: 1fr;
            gap: 2rem;
          }

          .palette-grid {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        @media (max-width: 480px) {
          .nav-links button:not(.nav-cta) {
            display: none;
          }

          .hero h1 {
            font-size: 2rem;
          }

          .cta-content h2 {
            font-size: 1.75rem;
          }

          .palette-grid {
            grid-template-columns: repeat(3, 1fr);
          }
        }
      `})]})}function Y5e({user:e,onPasswordSet:t}){const[n,r]=pe.useState(""),[i,s]=pe.useState(""),[a,o]=pe.useState(!1),[c,h]=pe.useState(""),d=async p=>{if(p.preventDefault(),h(""),n.length<8){h("Password must be at least 8 characters long");return}if(!/[A-Z]/.test(n)){h("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(n)){h("Password must contain at least one lowercase letter");return}if(!/[0-9]/.test(n)){h("Password must contain at least one number");return}if(n!==i){h("Passwords do not match");return}o(!0);try{await wa.updatePassword(n),t()}catch(m){h(m.message||"Failed to set password. Please try again.")}finally{o(!1)}};return u.jsx("div",{className:"tpv-studio",children:u.jsx("div",{className:"tpv-studio__container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{maxWidth:"400px",width:"100%",padding:"2rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[u.jsx("h2",{style:{marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Welcome to TPV Studio"}),u.jsxs("p",{style:{marginBottom:"1.5rem",color:"#666",fontSize:"0.9rem"},children:["Please set a password for your account: ",u.jsx("strong",{children:e.email})]}),u.jsxs("form",{onSubmit:d,children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"New Password"}),u.jsx("input",{type:"password",value:n,onChange:p=>r(p.target.value),placeholder:"Enter your password",required:!0,minLength:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"}}),u.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#666"},children:"At least 8 characters with uppercase, lowercase, and a number"})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Confirm Password"}),u.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Confirm your password",required:!0,minLength:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"}})]}),c&&u.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",background:"#fee",border:"1px solid #fcc",borderRadius:"4px",color:"#c00",fontSize:"0.9rem"},children:c}),u.jsx("button",{type:"submit",disabled:a,style:{width:"100%",padding:"0.75rem",background:a?"#ccc":"#007bff",color:"#fff",border:"none",borderRadius:"4px",fontSize:"1rem",fontWeight:"500",cursor:a?"not-allowed":"pointer"},children:a?"Setting Password...":"Set Password"})]})]})})})}function X5e(){const[e,t]=pe.useState(null),[n,r]=pe.useState(!0),[i,s]=pe.useState(!1),[a,o]=pe.useState(!1),[c,h]=pe.useState(!1),[d,p]=pe.useState(!1),[m,g]=pe.useState(null),[v,w]=pe.useState(null),C=async()=>{try{const j=await wa.getSession();if(!(j!=null&&j.access_token)){h(!1);return}const M=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${j.access_token}`}});h(M.ok)}catch{console.error("[APP] Admin check failed"),h(!1)}},x=async j=>{try{console.log("[APP] Loading design from URL:",j);const{design:M}=await wf(j);if(M){k(M);const S=new URL(window.location);S.searchParams.delete("design"),window.history.replaceState({},"",S)}}catch(M){console.error("[APP] Failed to load design from URL:",M)}};pe.useEffect(()=>{wa.getSession().then(M=>{var B;const S=(M==null?void 0:M.user)||null;if(t(S),r(!1),S){const D=(B=S.user_metadata)==null?void 0:B.password_setup_complete;p(!D),C();const ee=new URLSearchParams(window.location.search).get("design");ee&&x(ee)}});const{data:j}=wa.onAuthStateChange((M,S)=>{var D;const B=(S==null?void 0:S.user)||null;if(t(B),B){const R=(D=B.user_metadata)==null?void 0:D.password_setup_complete;p(!R),C()}else h(!1),p(!1)});return()=>j==null?void 0:j.unsubscribe()},[]);const k=j=>{g(j),w(j.name)},P=async()=>{p(!1);const j=await wa.getSession();t((j==null?void 0:j.user)||null)};return n?u.jsx("div",{className:"tpv-studio",children:u.jsx("div",{className:"tpv-studio__container",children:u.jsxs("div",{className:"tpv-studio__empty",children:[u.jsx("div",{className:"tpv-studio__spinner"}),u.jsx("p",{children:"Loading..."})]})})}):e?d?u.jsx(Y5e,{user:e,onPasswordSet:P}):a?u.jsx("div",{className:"tpv-studio",children:u.jsx(F5e,{onClose:()=>o(!1)})}):u.jsx(Kz,{children:u.jsxs("div",{className:"tpv-studio",children:[u.jsx(L5e,{onShowDesigns:()=>s(!0),onShowAdmin:()=>o(!0),isAdmin:c,currentDesignName:v}),u.jsx("main",{className:"tpv-studio__container tpv-studio__container--full",children:u.jsx(M5e,{loadedDesign:m})}),i&&u.jsx($5e,{onClose:()=>s(!1),onLoadDesign:k})]})}):u.jsx(q5e,{})}Jb.createRoot(document.getElementById("root")).render(u.jsx(je.StrictMode,{children:u.jsx(X5e,{})}))});export default K5e();
//# sourceMappingURL=index-Cc4aunE5.js.map
