var WL=Object.defineProperty;var VL=(e,t,n)=>t in e?WL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var GL=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Uf=(e,t,n)=>VL(e,typeof t!="symbol"?t+"":t,n);var N5e=GL((As,Ps)=>{function qL(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Tj(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var jj={exports:{}},Ng={},Aj={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf=Symbol.for("react.element"),YL=Symbol.for("react.portal"),XL=Symbol.for("react.fragment"),KL=Symbol.for("react.strict_mode"),ZL=Symbol.for("react.profiler"),QL=Symbol.for("react.provider"),JL=Symbol.for("react.context"),eI=Symbol.for("react.forward_ref"),tI=Symbol.for("react.suspense"),nI=Symbol.for("react.memo"),rI=Symbol.for("react.lazy"),sk=Symbol.iterator;function iI(e){return e===null||typeof e!="object"?null:(e=sk&&e[sk]||e["@@iterator"],typeof e=="function"?e:null)}var Pj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nj=Object.assign,Oj={};function nh(e,t,n){this.props=e,this.context=t,this.refs=Oj,this.updater=n||Pj}nh.prototype.isReactComponent={};nh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rj(){}Rj.prototype=nh.prototype;function l1(e,t,n){this.props=e,this.context=t,this.refs=Oj,this.updater=n||Pj}var c1=l1.prototype=new Rj;c1.constructor=l1;Nj(c1,nh.prototype);c1.isPureReactComponent=!0;var ak=Array.isArray,Mj=Object.prototype.hasOwnProperty,u1={current:null},Lj={key:!0,ref:!0,__self:!0,__source:!0};function Ij(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Mj.call(t,r)&&!Lj.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var u=Array(o),h=0;h<o;h++)u[h]=arguments[h+2];i.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:mf,type:e,key:s,ref:a,props:i,_owner:u1.current}}function sI(e,t){return{$$typeof:mf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function h1(e){return typeof e=="object"&&e!==null&&e.$$typeof===mf}function aI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ok=/\/+/g;function D0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aI(""+e.key):t.toString(36)}function Xp(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case mf:case YL:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+D0(a,0):r,ak(i)?(n="",e!=null&&(n=e.replace(ok,"$&/")+"/"),Xp(i,t,n,"",function(h){return h})):i!=null&&(h1(i)&&(i=sI(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ok,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",ak(e))for(var o=0;o<e.length;o++){s=e[o];var u=r+D0(s,o);a+=Xp(s,t,n,u,i)}else if(u=iI(e),typeof u=="function")for(e=u.call(e),o=0;!(s=e.next()).done;)s=s.value,u=r+D0(s,o++),a+=Xp(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Hf(e,t,n){if(e==null)return e;var r=[],i=0;return Xp(e,r,"","",function(s){return t.call(n,s,i++)}),r}function oI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ji={current:null},Kp={transition:null},lI={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:Kp,ReactCurrentOwner:u1};function $j(){throw Error("act(...) is not supported in production builds of React.")}An.Children={map:Hf,forEach:function(e,t,n){Hf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hf(e,function(){t++}),t},toArray:function(e){return Hf(e,function(t){return t})||[]},only:function(e){if(!h1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};An.Component=nh;An.Fragment=XL;An.Profiler=ZL;An.PureComponent=l1;An.StrictMode=KL;An.Suspense=tI;An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lI;An.act=$j;An.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nj({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=u1.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Mj.call(t,u)&&!Lj.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var h=0;h<u;h++)o[h]=arguments[h+2];r.children=o}return{$$typeof:mf,type:e.type,key:i,ref:s,props:r,_owner:a}};An.createContext=function(e){return e={$$typeof:JL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QL,_context:e},e.Consumer=e};An.createElement=Ij;An.createFactory=function(e){var t=Ij.bind(null,e);return t.type=e,t};An.createRef=function(){return{current:null}};An.forwardRef=function(e){return{$$typeof:eI,render:e}};An.isValidElement=h1;An.lazy=function(e){return{$$typeof:rI,_payload:{_status:-1,_result:e},_init:oI}};An.memo=function(e,t){return{$$typeof:nI,type:e,compare:t===void 0?null:t}};An.startTransition=function(e){var t=Kp.transition;Kp.transition={};try{e()}finally{Kp.transition=t}};An.unstable_act=$j;An.useCallback=function(e,t){return Ji.current.useCallback(e,t)};An.useContext=function(e){return Ji.current.useContext(e)};An.useDebugValue=function(){};An.useDeferredValue=function(e){return Ji.current.useDeferredValue(e)};An.useEffect=function(e,t){return Ji.current.useEffect(e,t)};An.useId=function(){return Ji.current.useId()};An.useImperativeHandle=function(e,t,n){return Ji.current.useImperativeHandle(e,t,n)};An.useInsertionEffect=function(e,t){return Ji.current.useInsertionEffect(e,t)};An.useLayoutEffect=function(e,t){return Ji.current.useLayoutEffect(e,t)};An.useMemo=function(e,t){return Ji.current.useMemo(e,t)};An.useReducer=function(e,t,n){return Ji.current.useReducer(e,t,n)};An.useRef=function(e){return Ji.current.useRef(e)};An.useState=function(e){return Ji.current.useState(e)};An.useSyncExternalStore=function(e,t,n){return Ji.current.useSyncExternalStore(e,t,n)};An.useTransition=function(){return Ji.current.useTransition()};An.version="18.3.1";Aj.exports=An;var fe=Aj.exports;const Te=yl(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cI=fe,uI=Symbol.for("react.element"),hI=Symbol.for("react.fragment"),dI=Object.prototype.hasOwnProperty,fI=cI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pI={key:!0,ref:!0,__self:!0,__source:!0};function Dj(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)dI.call(t,r)&&!pI.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:uI,type:e,key:s,ref:a,props:i,_owner:fI.current}}Ng.Fragment=hI;Ng.jsx=Dj;Ng.jsxs=Dj;jj.exports=Ng;var c=jj.exports,Qb={},zj={exports:{}},Ms={},Fj={exports:{}},Bj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Fe,xe){var Me=Fe.length;Fe.push(xe);e:for(;0<Me;){var _e=Me-1>>>1,Ne=Fe[_e];if(0<i(Ne,xe))Fe[_e]=xe,Fe[Me]=Ne,Me=_e;else break e}}function n(Fe){return Fe.length===0?null:Fe[0]}function r(Fe){if(Fe.length===0)return null;var xe=Fe[0],Me=Fe.pop();if(Me!==xe){Fe[0]=Me;e:for(var _e=0,Ne=Fe.length,st=Ne>>>1;_e<st;){var nt=2*(_e+1)-1,Ue=Fe[nt],ct=nt+1,he=Fe[ct];if(0>i(Ue,Me))ct<Ne&&0>i(he,Ue)?(Fe[_e]=he,Fe[ct]=Me,_e=ct):(Fe[_e]=Ue,Fe[nt]=Me,_e=nt);else if(ct<Ne&&0>i(he,Me))Fe[_e]=he,Fe[ct]=Me,_e=ct;else break e}}return xe}function i(Fe,xe){var Me=Fe.sortIndex-xe.sortIndex;return Me!==0?Me:Fe.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],h=[],d=1,p=null,m=3,g=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(Fe){for(var xe=n(h);xe!==null;){if(xe.callback===null)r(h);else if(xe.startTime<=Fe)r(h),xe.sortIndex=xe.expirationTime,t(u,xe);else break;xe=n(h)}}function j(Fe){if(w=!1,A(Fe),!v)if(n(u)!==null)v=!0,je(I);else{var xe=n(h);xe!==null&&ke(j,xe.startTime-Fe)}}function I(Fe,xe){v=!1,w&&(w=!1,x(D),D=-1),g=!0;var Me=m;try{for(A(xe),p=n(u);p!==null&&(!(p.expirationTime>xe)||Fe&&!ce());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,m=p.priorityLevel;var Ne=_e(p.expirationTime<=xe);xe=e.unstable_now(),typeof Ne=="function"?p.callback=Ne:p===n(u)&&r(u),A(xe)}else r(u);p=n(u)}if(p!==null)var st=!0;else{var nt=n(h);nt!==null&&ke(j,nt.startTime-xe),st=!1}return st}finally{p=null,m=Me,g=!1}}var E=!1,U=null,D=-1,R=5,X=-1;function ce(){return!(e.unstable_now()-X<R)}function ie(){if(U!==null){var Fe=e.unstable_now();X=Fe;var xe=!0;try{xe=U(!0,Fe)}finally{xe?ge():(E=!1,U=null)}}else E=!1}var ge;if(typeof k=="function")ge=function(){k(ie)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ye=H.port2;H.port1.onmessage=ie,ge=function(){ye.postMessage(null)}}else ge=function(){C(ie,0)};function je(Fe){U=Fe,E||(E=!0,ge())}function ke(Fe,xe){D=C(function(){Fe(e.unstable_now())},xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Fe){Fe.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,je(I))},e.unstable_forceFrameRate=function(Fe){0>Fe||125<Fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Fe?Math.floor(1e3/Fe):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Fe){switch(m){case 1:case 2:case 3:var xe=3;break;default:xe=m}var Me=m;m=xe;try{return Fe()}finally{m=Me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Fe,xe){switch(Fe){case 1:case 2:case 3:case 4:case 5:break;default:Fe=3}var Me=m;m=Fe;try{return xe()}finally{m=Me}},e.unstable_scheduleCallback=function(Fe,xe,Me){var _e=e.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?_e+Me:_e):Me=_e,Fe){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Me+Ne,Fe={id:d++,callback:xe,priorityLevel:Fe,startTime:Me,expirationTime:Ne,sortIndex:-1},Me>_e?(Fe.sortIndex=Me,t(h,Fe),n(u)===null&&Fe===n(h)&&(w?(x(D),D=-1):w=!0,ke(j,Me-_e))):(Fe.sortIndex=Ne,t(u,Fe),v||g||(v=!0,je(I))),Fe},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(Fe){var xe=m;return function(){var Me=m;m=xe;try{return Fe.apply(this,arguments)}finally{m=Me}}}})(Bj);Fj.exports=Bj;var mI=Fj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI=fe,Os=mI;function Nt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uj=new Set,Ld={};function dc(e,t){$u(e,t),$u(e+"Capture",t)}function $u(e,t){for(Ld[e]=t,e=0;e<t.length;e++)Uj.add(t[e])}var So=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jb=Object.prototype.hasOwnProperty,yI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lk={},ck={};function bI(e){return Jb.call(ck,e)?!0:Jb.call(lk,e)?!1:yI.test(e)?ck[e]=!0:(lk[e]=!0,!1)}function vI(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xI(e,t,n,r){if(t===null||typeof t>"u"||vI(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function es(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ai[e]=new es(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ai[t]=new es(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ai[e]=new es(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ai[e]=new es(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ai[e]=new es(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ai[e]=new es(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ai[e]=new es(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ai[e]=new es(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ai[e]=new es(e,5,!1,e.toLowerCase(),null,!1,!1)});var d1=/[\-:]([a-z])/g;function f1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d1,f1);Ai[t]=new es(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d1,f1);Ai[t]=new es(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d1,f1);Ai[t]=new es(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ai[e]=new es(e,1,!1,e.toLowerCase(),null,!1,!1)});Ai.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ai[e]=new es(e,1,!1,e.toLowerCase(),null,!0,!0)});function p1(e,t,n,r){var i=Ai.hasOwnProperty(t)?Ai[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xI(t,n,i,r)&&(n=null),r||i===null?bI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Po=gI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wf=Symbol.for("react.element"),lu=Symbol.for("react.portal"),cu=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),ev=Symbol.for("react.profiler"),Hj=Symbol.for("react.provider"),Wj=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),tv=Symbol.for("react.suspense"),nv=Symbol.for("react.suspense_list"),y1=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),Vj=Symbol.for("react.offscreen"),uk=Symbol.iterator;function Th(e){return e===null||typeof e!="object"?null:(e=uk&&e[uk]||e["@@iterator"],typeof e=="function"?e:null)}var Hr=Object.assign,z0;function Xh(e){if(z0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z0=t&&t[1]||""}return`
`+z0+e}var F0=!1;function B0(e,t){if(!e||F0)return"";F0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=o);break}}}finally{F0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xh(e):""}function wI(e){switch(e.tag){case 5:return Xh(e.type);case 16:return Xh("Lazy");case 13:return Xh("Suspense");case 19:return Xh("SuspenseList");case 0:case 2:case 15:return e=B0(e.type,!1),e;case 11:return e=B0(e.type.render,!1),e;case 1:return e=B0(e.type,!0),e;default:return""}}function rv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cu:return"Fragment";case lu:return"Portal";case ev:return"Profiler";case m1:return"StrictMode";case tv:return"Suspense";case nv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wj:return(e.displayName||"Context")+".Consumer";case Hj:return(e._context.displayName||"Context")+".Provider";case g1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case y1:return t=e.displayName||null,t!==null?t:rv(e.type)||"Memo";case Wo:t=e._payload,e=e._init;try{return rv(e(t))}catch{}}return null}function _I(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rv(t);case 8:return t===m1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ul(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kI(e){var t=Gj(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vf(e){e._valueTracker||(e._valueTracker=kI(e))}function qj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Gj(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function iv(e,t){var n=t.checked;return Hr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hk(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ul(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yj(e,t){t=t.checked,t!=null&&p1(e,"checked",t,!1)}function sv(e,t){Yj(e,t);var n=ul(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?av(e,t.type,n):t.hasOwnProperty("defaultValue")&&av(e,t.type,ul(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dk(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function av(e,t,n){(t!=="number"||xm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Kh=Array.isArray;function Cu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ul(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ov(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Nt(91));return Hr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fk(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Nt(92));if(Kh(n)){if(1<n.length)throw Error(Nt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ul(n)}}function Xj(e,t){var n=ul(t.value),r=ul(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gf,Zj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gf=Gf||document.createElement("div"),Gf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Id(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SI=["Webkit","ms","Moz","O"];Object.keys(yd).forEach(function(e){SI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yd[t]=yd[e]})});function Qj(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yd.hasOwnProperty(e)&&yd[e]?(""+t).trim():t+"px"}function Jj(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qj(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var CI=Hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cv(e,t){if(t){if(CI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Nt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Nt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Nt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Nt(62))}}function uv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hv=null;function b1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dv=null,Eu=null,Tu=null;function mk(e){if(e=bf(e)){if(typeof dv!="function")throw Error(Nt(280));var t=e.stateNode;t&&(t=Ig(t),dv(e.stateNode,e.type,t))}}function eA(e){Eu?Tu?Tu.push(e):Tu=[e]:Eu=e}function tA(){if(Eu){var e=Eu,t=Tu;if(Tu=Eu=null,mk(e),t)for(e=0;e<t.length;e++)mk(t[e])}}function nA(e,t){return e(t)}function rA(){}var U0=!1;function iA(e,t,n){if(U0)return e(t,n);U0=!0;try{return nA(e,t,n)}finally{U0=!1,(Eu!==null||Tu!==null)&&(rA(),tA())}}function $d(e,t){var n=e.stateNode;if(n===null)return null;var r=Ig(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Nt(231,t,typeof n));return n}var fv=!1;if(So)try{var jh={};Object.defineProperty(jh,"passive",{get:function(){fv=!0}}),window.addEventListener("test",jh,jh),window.removeEventListener("test",jh,jh)}catch{fv=!1}function EI(e,t,n,r,i,s,a,o,u){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(d){this.onError(d)}}var bd=!1,wm=null,_m=!1,pv=null,TI={onError:function(e){bd=!0,wm=e}};function jI(e,t,n,r,i,s,a,o,u){bd=!1,wm=null,EI.apply(TI,arguments)}function AI(e,t,n,r,i,s,a,o,u){if(jI.apply(this,arguments),bd){if(bd){var h=wm;bd=!1,wm=null}else throw Error(Nt(198));_m||(_m=!0,pv=h)}}function fc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function sA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gk(e){if(fc(e)!==e)throw Error(Nt(188))}function PI(e){var t=e.alternate;if(!t){if(t=fc(e),t===null)throw Error(Nt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gk(i),e;if(s===r)return gk(i),t;s=s.sibling}throw Error(Nt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Nt(189))}}if(n.alternate!==r)throw Error(Nt(190))}if(n.tag!==3)throw Error(Nt(188));return n.stateNode.current===n?e:t}function aA(e){return e=PI(e),e!==null?oA(e):null}function oA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oA(e);if(t!==null)return t;e=e.sibling}return null}var lA=Os.unstable_scheduleCallback,yk=Os.unstable_cancelCallback,NI=Os.unstable_shouldYield,OI=Os.unstable_requestPaint,ei=Os.unstable_now,RI=Os.unstable_getCurrentPriorityLevel,v1=Os.unstable_ImmediatePriority,cA=Os.unstable_UserBlockingPriority,km=Os.unstable_NormalPriority,MI=Os.unstable_LowPriority,uA=Os.unstable_IdlePriority,Og=null,no=null;function LI(e){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(Og,e,void 0,(e.current.flags&128)===128)}catch{}}var _a=Math.clz32?Math.clz32:DI,II=Math.log,$I=Math.LN2;function DI(e){return e>>>=0,e===0?32:31-(II(e)/$I|0)|0}var qf=64,Yf=4194304;function Zh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Zh(o):(s&=a,s!==0&&(r=Zh(s)))}else a=n&~i,a!==0?r=Zh(a):s!==0&&(r=Zh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_a(t),i=1<<n,r|=e[n],t&=~i;return r}function zI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-_a(s),o=1<<a,u=i[a];u===-1?(!(o&n)||o&r)&&(i[a]=zI(o,t)):u<=t&&(e.expiredLanes|=o),s&=~o}}function mv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hA(){var e=qf;return qf<<=1,!(qf&4194240)&&(qf=64),e}function H0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_a(t),e[t]=n}function BI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-_a(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function x1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_a(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ir=0;function dA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fA,w1,pA,mA,gA,gv=!1,Xf=[],nl=null,rl=null,il=null,Dd=new Map,zd=new Map,qo=[],UI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bk(e,t){switch(e){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Dd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(t.pointerId)}}function Ah(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=bf(t),t!==null&&w1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function HI(e,t,n,r,i){switch(t){case"focusin":return nl=Ah(nl,e,t,n,r,i),!0;case"dragenter":return rl=Ah(rl,e,t,n,r,i),!0;case"mouseover":return il=Ah(il,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dd.set(s,Ah(Dd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zd.set(s,Ah(zd.get(s)||null,e,t,n,r,i)),!0}return!1}function yA(e){var t=Gl(e.target);if(t!==null){var n=fc(t);if(n!==null){if(t=n.tag,t===13){if(t=sA(n),t!==null){e.blockedOn=t,gA(e.priority,function(){pA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);hv=r,n.target.dispatchEvent(r),hv=null}else return t=bf(n),t!==null&&w1(t),e.blockedOn=n,!1;t.shift()}return!0}function vk(e,t,n){Zp(e)&&n.delete(t)}function WI(){gv=!1,nl!==null&&Zp(nl)&&(nl=null),rl!==null&&Zp(rl)&&(rl=null),il!==null&&Zp(il)&&(il=null),Dd.forEach(vk),zd.forEach(vk)}function Ph(e,t){e.blockedOn===t&&(e.blockedOn=null,gv||(gv=!0,Os.unstable_scheduleCallback(Os.unstable_NormalPriority,WI)))}function Fd(e){function t(i){return Ph(i,e)}if(0<Xf.length){Ph(Xf[0],e);for(var n=1;n<Xf.length;n++){var r=Xf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(nl!==null&&Ph(nl,e),rl!==null&&Ph(rl,e),il!==null&&Ph(il,e),Dd.forEach(t),zd.forEach(t),n=0;n<qo.length;n++)r=qo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<qo.length&&(n=qo[0],n.blockedOn===null);)yA(n),n.blockedOn===null&&qo.shift()}var ju=Po.ReactCurrentBatchConfig,Cm=!0;function VI(e,t,n,r){var i=ir,s=ju.transition;ju.transition=null;try{ir=1,_1(e,t,n,r)}finally{ir=i,ju.transition=s}}function GI(e,t,n,r){var i=ir,s=ju.transition;ju.transition=null;try{ir=4,_1(e,t,n,r)}finally{ir=i,ju.transition=s}}function _1(e,t,n,r){if(Cm){var i=yv(e,t,n,r);if(i===null)J0(e,t,r,Em,n),bk(e,r);else if(HI(i,e,t,n,r))r.stopPropagation();else if(bk(e,r),t&4&&-1<UI.indexOf(e)){for(;i!==null;){var s=bf(i);if(s!==null&&fA(s),s=yv(e,t,n,r),s===null&&J0(e,t,r,Em,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else J0(e,t,r,null,n)}}var Em=null;function yv(e,t,n,r){if(Em=null,e=b1(r),e=Gl(e),e!==null)if(t=fc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=sA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Em=e,null}function bA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RI()){case v1:return 1;case cA:return 4;case km:case MI:return 16;case uA:return 536870912;default:return 16}default:return 16}}var Qo=null,k1=null,Qp=null;function vA(){if(Qp)return Qp;var e,t=k1,n=t.length,r,i="value"in Qo?Qo.value:Qo.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Qp=i.slice(e,1<r?1-r:void 0)}function Jp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kf(){return!0}function xk(){return!1}function Ls(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kf:xk,this.isPropagationStopped=xk,this}return Hr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kf)},persist:function(){},isPersistent:Kf}),t}var rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S1=Ls(rh),yf=Hr({},rh,{view:0,detail:0}),qI=Ls(yf),W0,V0,Nh,Rg=Hr({},yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nh&&(Nh&&e.type==="mousemove"?(W0=e.screenX-Nh.screenX,V0=e.screenY-Nh.screenY):V0=W0=0,Nh=e),W0)},movementY:function(e){return"movementY"in e?e.movementY:V0}}),wk=Ls(Rg),YI=Hr({},Rg,{dataTransfer:0}),XI=Ls(YI),KI=Hr({},yf,{relatedTarget:0}),G0=Ls(KI),ZI=Hr({},rh,{animationName:0,elapsedTime:0,pseudoElement:0}),QI=Ls(ZI),JI=Hr({},rh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),e8=Ls(JI),t8=Hr({},rh,{data:0}),_k=Ls(t8),n8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=i8[e])?!!t[e]:!1}function C1(){return s8}var a8=Hr({},yf,{key:function(e){if(e.key){var t=n8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C1,charCode:function(e){return e.type==="keypress"?Jp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),o8=Ls(a8),l8=Hr({},Rg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kk=Ls(l8),c8=Hr({},yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C1}),u8=Ls(c8),h8=Hr({},rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),d8=Ls(h8),f8=Hr({},Rg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),p8=Ls(f8),m8=[9,13,27,32],E1=So&&"CompositionEvent"in window,vd=null;So&&"documentMode"in document&&(vd=document.documentMode);var g8=So&&"TextEvent"in window&&!vd,xA=So&&(!E1||vd&&8<vd&&11>=vd),Sk=" ",Ck=!1;function wA(e,t){switch(e){case"keyup":return m8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _A(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var uu=!1;function y8(e,t){switch(e){case"compositionend":return _A(t);case"keypress":return t.which!==32?null:(Ck=!0,Sk);case"textInput":return e=t.data,e===Sk&&Ck?null:e;default:return null}}function b8(e,t){if(uu)return e==="compositionend"||!E1&&wA(e,t)?(e=vA(),Qp=k1=Qo=null,uu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xA&&t.locale!=="ko"?null:t.data;default:return null}}var v8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ek(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!v8[e.type]:t==="textarea"}function kA(e,t,n,r){eA(r),t=Tm(t,"onChange"),0<t.length&&(n=new S1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xd=null,Bd=null;function x8(e){MA(e,0)}function Mg(e){var t=fu(e);if(qj(t))return e}function w8(e,t){if(e==="change")return t}var SA=!1;if(So){var q0;if(So){var Y0="oninput"in document;if(!Y0){var Tk=document.createElement("div");Tk.setAttribute("oninput","return;"),Y0=typeof Tk.oninput=="function"}q0=Y0}else q0=!1;SA=q0&&(!document.documentMode||9<document.documentMode)}function jk(){xd&&(xd.detachEvent("onpropertychange",CA),Bd=xd=null)}function CA(e){if(e.propertyName==="value"&&Mg(Bd)){var t=[];kA(t,Bd,e,b1(e)),iA(x8,t)}}function _8(e,t,n){e==="focusin"?(jk(),xd=t,Bd=n,xd.attachEvent("onpropertychange",CA)):e==="focusout"&&jk()}function k8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mg(Bd)}function S8(e,t){if(e==="click")return Mg(t)}function C8(e,t){if(e==="input"||e==="change")return Mg(t)}function E8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ta=typeof Object.is=="function"?Object.is:E8;function Ud(e,t){if(Ta(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jb.call(t,i)||!Ta(e[i],t[i]))return!1}return!0}function Ak(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pk(e,t){var n=Ak(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ak(n)}}function EA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function TA(){for(var e=window,t=xm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xm(e.document)}return t}function T1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function T8(e){var t=TA(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&EA(n.ownerDocument.documentElement,n)){if(r!==null&&T1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Pk(n,s);var a=Pk(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var j8=So&&"documentMode"in document&&11>=document.documentMode,hu=null,bv=null,wd=null,vv=!1;function Nk(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vv||hu==null||hu!==xm(r)||(r=hu,"selectionStart"in r&&T1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wd&&Ud(wd,r)||(wd=r,r=Tm(bv,"onSelect"),0<r.length&&(t=new S1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hu)))}function Zf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var du={animationend:Zf("Animation","AnimationEnd"),animationiteration:Zf("Animation","AnimationIteration"),animationstart:Zf("Animation","AnimationStart"),transitionend:Zf("Transition","TransitionEnd")},X0={},jA={};So&&(jA=document.createElement("div").style,"AnimationEvent"in window||(delete du.animationend.animation,delete du.animationiteration.animation,delete du.animationstart.animation),"TransitionEvent"in window||delete du.transitionend.transition);function Lg(e){if(X0[e])return X0[e];if(!du[e])return e;var t=du[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jA)return X0[e]=t[n];return e}var AA=Lg("animationend"),PA=Lg("animationiteration"),NA=Lg("animationstart"),OA=Lg("transitionend"),RA=new Map,Ok="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bl(e,t){RA.set(e,t),dc(t,[e])}for(var K0=0;K0<Ok.length;K0++){var Z0=Ok[K0],A8=Z0.toLowerCase(),P8=Z0[0].toUpperCase()+Z0.slice(1);bl(A8,"on"+P8)}bl(AA,"onAnimationEnd");bl(PA,"onAnimationIteration");bl(NA,"onAnimationStart");bl("dblclick","onDoubleClick");bl("focusin","onFocus");bl("focusout","onBlur");bl(OA,"onTransitionEnd");$u("onMouseEnter",["mouseout","mouseover"]);$u("onMouseLeave",["mouseout","mouseover"]);$u("onPointerEnter",["pointerout","pointerover"]);$u("onPointerLeave",["pointerout","pointerover"]);dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qh));function Rk(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,AI(r,t,void 0,e),e.currentTarget=null}function MA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],u=o.instance,h=o.currentTarget;if(o=o.listener,u!==s&&i.isPropagationStopped())break e;Rk(i,o,h),s=u}else for(a=0;a<r.length;a++){if(o=r[a],u=o.instance,h=o.currentTarget,o=o.listener,u!==s&&i.isPropagationStopped())break e;Rk(i,o,h),s=u}}}if(_m)throw e=pv,_m=!1,pv=null,e}function Tr(e,t){var n=t[Sv];n===void 0&&(n=t[Sv]=new Set);var r=e+"__bubble";n.has(r)||(LA(t,e,2,!1),n.add(r))}function Q0(e,t,n){var r=0;t&&(r|=4),LA(n,e,r,t)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function Hd(e){if(!e[Qf]){e[Qf]=!0,Uj.forEach(function(n){n!=="selectionchange"&&(N8.has(n)||Q0(n,!1,e),Q0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qf]||(t[Qf]=!0,Q0("selectionchange",!1,t))}}function LA(e,t,n,r){switch(bA(t)){case 1:var i=VI;break;case 4:i=GI;break;default:i=_1}n=i.bind(null,t,n,e),i=void 0,!fv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function J0(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Gl(o),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}o=o.parentNode}}r=r.return}iA(function(){var h=s,d=b1(n),p=[];e:{var m=RA.get(e);if(m!==void 0){var g=S1,v=e;switch(e){case"keypress":if(Jp(n)===0)break e;case"keydown":case"keyup":g=o8;break;case"focusin":v="focus",g=G0;break;case"focusout":v="blur",g=G0;break;case"beforeblur":case"afterblur":g=G0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=XI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=u8;break;case AA:case PA:case NA:g=QI;break;case OA:g=d8;break;case"scroll":g=qI;break;case"wheel":g=p8;break;case"copy":case"cut":case"paste":g=e8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=kk}var w=(t&4)!==0,C=!w&&e==="scroll",x=w?m!==null?m+"Capture":null:m;w=[];for(var k=h,A;k!==null;){A=k;var j=A.stateNode;if(A.tag===5&&j!==null&&(A=j,x!==null&&(j=$d(k,x),j!=null&&w.push(Wd(k,j,A)))),C)break;k=k.return}0<w.length&&(m=new g(m,v,null,n,d),p.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==hv&&(v=n.relatedTarget||n.fromElement)&&(Gl(v)||v[Co]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=h,v=v?Gl(v):null,v!==null&&(C=fc(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(w=wk,j="onMouseLeave",x="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(w=kk,j="onPointerLeave",x="onPointerEnter",k="pointer"),C=g==null?m:fu(g),A=v==null?m:fu(v),m=new w(j,k+"leave",g,n,d),m.target=C,m.relatedTarget=A,j=null,Gl(d)===h&&(w=new w(x,k+"enter",v,n,d),w.target=A,w.relatedTarget=C,j=w),C=j,g&&v)t:{for(w=g,x=v,k=0,A=w;A;A=kc(A))k++;for(A=0,j=x;j;j=kc(j))A++;for(;0<k-A;)w=kc(w),k--;for(;0<A-k;)x=kc(x),A--;for(;k--;){if(w===x||x!==null&&w===x.alternate)break t;w=kc(w),x=kc(x)}w=null}else w=null;g!==null&&Mk(p,m,g,w,!1),v!==null&&C!==null&&Mk(p,C,v,w,!0)}}e:{if(m=h?fu(h):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var I=w8;else if(Ek(m))if(SA)I=C8;else{I=k8;var E=_8}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=S8);if(I&&(I=I(e,h))){kA(p,I,n,d);break e}E&&E(e,m,h),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&av(m,"number",m.value)}switch(E=h?fu(h):window,e){case"focusin":(Ek(E)||E.contentEditable==="true")&&(hu=E,bv=h,wd=null);break;case"focusout":wd=bv=hu=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,Nk(p,n,d);break;case"selectionchange":if(j8)break;case"keydown":case"keyup":Nk(p,n,d)}var U;if(E1)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else uu?wA(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(xA&&n.locale!=="ko"&&(uu||D!=="onCompositionStart"?D==="onCompositionEnd"&&uu&&(U=vA()):(Qo=d,k1="value"in Qo?Qo.value:Qo.textContent,uu=!0)),E=Tm(h,D),0<E.length&&(D=new _k(D,e,null,n,d),p.push({event:D,listeners:E}),U?D.data=U:(U=_A(n),U!==null&&(D.data=U)))),(U=g8?y8(e,n):b8(e,n))&&(h=Tm(h,"onBeforeInput"),0<h.length&&(d=new _k("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:h}),d.data=U))}MA(p,t)})}function Wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Tm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$d(e,n),s!=null&&r.unshift(Wd(e,s,i)),s=$d(e,t),s!=null&&r.push(Wd(e,s,i))),e=e.return}return r}function kc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mk(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,u=o.alternate,h=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&h!==null&&(o=h,i?(u=$d(n,s),u!=null&&a.unshift(Wd(n,u,o))):i||(u=$d(n,s),u!=null&&a.push(Wd(n,u,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var O8=/\r\n?/g,R8=/\u0000|\uFFFD/g;function Lk(e){return(typeof e=="string"?e:""+e).replace(O8,`
`).replace(R8,"")}function Jf(e,t,n){if(t=Lk(t),Lk(e)!==t&&n)throw Error(Nt(425))}function jm(){}var xv=null,wv=null;function _v(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kv=typeof setTimeout=="function"?setTimeout:void 0,M8=typeof clearTimeout=="function"?clearTimeout:void 0,Ik=typeof Promise=="function"?Promise:void 0,L8=typeof queueMicrotask=="function"?queueMicrotask:typeof Ik<"u"?function(e){return Ik.resolve(null).then(e).catch(I8)}:kv;function I8(e){setTimeout(function(){throw e})}function ey(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Fd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fd(t)}function sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $k(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ih=Math.random().toString(36).slice(2),Ya="__reactFiber$"+ih,Vd="__reactProps$"+ih,Co="__reactContainer$"+ih,Sv="__reactEvents$"+ih,$8="__reactListeners$"+ih,D8="__reactHandles$"+ih;function Gl(e){var t=e[Ya];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Co]||n[Ya]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$k(e);e!==null;){if(n=e[Ya])return n;e=$k(e)}return t}e=n,n=e.parentNode}return null}function bf(e){return e=e[Ya]||e[Co],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Nt(33))}function Ig(e){return e[Vd]||null}var Cv=[],pu=-1;function vl(e){return{current:e}}function Pr(e){0>pu||(e.current=Cv[pu],Cv[pu]=null,pu--)}function kr(e,t){pu++,Cv[pu]=e.current,e.current=t}var hl={},Hi=vl(hl),hs=vl(!1),rc=hl;function Du(e,t){var n=e.type.contextTypes;if(!n)return hl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ds(e){return e=e.childContextTypes,e!=null}function Am(){Pr(hs),Pr(Hi)}function Dk(e,t,n){if(Hi.current!==hl)throw Error(Nt(168));kr(Hi,t),kr(hs,n)}function IA(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Nt(108,_I(e)||"Unknown",i));return Hr({},n,r)}function Pm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hl,rc=Hi.current,kr(Hi,e),kr(hs,hs.current),!0}function zk(e,t,n){var r=e.stateNode;if(!r)throw Error(Nt(169));n?(e=IA(e,t,rc),r.__reactInternalMemoizedMergedChildContext=e,Pr(hs),Pr(Hi),kr(Hi,e)):Pr(hs),kr(hs,n)}var go=null,$g=!1,ty=!1;function $A(e){go===null?go=[e]:go.push(e)}function z8(e){$g=!0,$A(e)}function xl(){if(!ty&&go!==null){ty=!0;var e=0,t=ir;try{var n=go;for(ir=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}go=null,$g=!1}catch(i){throw go!==null&&(go=go.slice(e+1)),lA(v1,xl),i}finally{ir=t,ty=!1}}return null}var mu=[],gu=0,Nm=null,Om=0,Bs=[],Us=0,ic=null,vo=1,xo="";function Ml(e,t){mu[gu++]=Om,mu[gu++]=Nm,Nm=e,Om=t}function DA(e,t,n){Bs[Us++]=vo,Bs[Us++]=xo,Bs[Us++]=ic,ic=e;var r=vo;e=xo;var i=32-_a(r)-1;r&=~(1<<i),n+=1;var s=32-_a(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,vo=1<<32-_a(t)+i|n<<i|r,xo=s+e}else vo=1<<s|n<<i|r,xo=e}function j1(e){e.return!==null&&(Ml(e,1),DA(e,1,0))}function A1(e){for(;e===Nm;)Nm=mu[--gu],mu[gu]=null,Om=mu[--gu],mu[gu]=null;for(;e===ic;)ic=Bs[--Us],Bs[Us]=null,xo=Bs[--Us],Bs[Us]=null,vo=Bs[--Us],Bs[Us]=null}var Ns=null,js=null,Mr=!1,va=null;function zA(e,t){var n=Ws(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ns=e,js=sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ns=e,js=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ic!==null?{id:vo,overflow:xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ws(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ns=e,js=null,!0):!1;default:return!1}}function Ev(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tv(e){if(Mr){var t=js;if(t){var n=t;if(!Fk(e,t)){if(Ev(e))throw Error(Nt(418));t=sl(n.nextSibling);var r=Ns;t&&Fk(e,t)?zA(r,n):(e.flags=e.flags&-4097|2,Mr=!1,Ns=e)}}else{if(Ev(e))throw Error(Nt(418));e.flags=e.flags&-4097|2,Mr=!1,Ns=e}}}function Bk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ns=e}function ep(e){if(e!==Ns)return!1;if(!Mr)return Bk(e),Mr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_v(e.type,e.memoizedProps)),t&&(t=js)){if(Ev(e))throw FA(),Error(Nt(418));for(;t;)zA(e,t),t=sl(t.nextSibling)}if(Bk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Nt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){js=sl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}js=null}}else js=Ns?sl(e.stateNode.nextSibling):null;return!0}function FA(){for(var e=js;e;)e=sl(e.nextSibling)}function zu(){js=Ns=null,Mr=!1}function P1(e){va===null?va=[e]:va.push(e)}var F8=Po.ReactCurrentBatchConfig;function Oh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Nt(309));var r=n.stateNode}if(!r)throw Error(Nt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Nt(284));if(!n._owner)throw Error(Nt(290,e))}return e}function tp(e,t){throw e=Object.prototype.toString.call(t),Error(Nt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uk(e){var t=e._init;return t(e._payload)}function BA(e){function t(x,k){if(e){var A=x.deletions;A===null?(x.deletions=[k],x.flags|=16):A.push(k)}}function n(x,k){if(!e)return null;for(;k!==null;)t(x,k),k=k.sibling;return null}function r(x,k){for(x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function i(x,k){return x=cl(x,k),x.index=0,x.sibling=null,x}function s(x,k,A){return x.index=A,e?(A=x.alternate,A!==null?(A=A.index,A<k?(x.flags|=2,k):A):(x.flags|=2,k)):(x.flags|=1048576,k)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,k,A,j){return k===null||k.tag!==6?(k=ly(A,x.mode,j),k.return=x,k):(k=i(k,A),k.return=x,k)}function u(x,k,A,j){var I=A.type;return I===cu?d(x,k,A.props.children,j,A.key):k!==null&&(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Wo&&Uk(I)===k.type)?(j=i(k,A.props),j.ref=Oh(x,k,A),j.return=x,j):(j=am(A.type,A.key,A.props,null,x.mode,j),j.ref=Oh(x,k,A),j.return=x,j)}function h(x,k,A,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==A.containerInfo||k.stateNode.implementation!==A.implementation?(k=cy(A,x.mode,j),k.return=x,k):(k=i(k,A.children||[]),k.return=x,k)}function d(x,k,A,j,I){return k===null||k.tag!==7?(k=Jl(A,x.mode,j,I),k.return=x,k):(k=i(k,A),k.return=x,k)}function p(x,k,A){if(typeof k=="string"&&k!==""||typeof k=="number")return k=ly(""+k,x.mode,A),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Wf:return A=am(k.type,k.key,k.props,null,x.mode,A),A.ref=Oh(x,null,k),A.return=x,A;case lu:return k=cy(k,x.mode,A),k.return=x,k;case Wo:var j=k._init;return p(x,j(k._payload),A)}if(Kh(k)||Th(k))return k=Jl(k,x.mode,A,null),k.return=x,k;tp(x,k)}return null}function m(x,k,A,j){var I=k!==null?k.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return I!==null?null:o(x,k,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wf:return A.key===I?u(x,k,A,j):null;case lu:return A.key===I?h(x,k,A,j):null;case Wo:return I=A._init,m(x,k,I(A._payload),j)}if(Kh(A)||Th(A))return I!==null?null:d(x,k,A,j,null);tp(x,A)}return null}function g(x,k,A,j,I){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(A)||null,o(k,x,""+j,I);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Wf:return x=x.get(j.key===null?A:j.key)||null,u(k,x,j,I);case lu:return x=x.get(j.key===null?A:j.key)||null,h(k,x,j,I);case Wo:var E=j._init;return g(x,k,A,E(j._payload),I)}if(Kh(j)||Th(j))return x=x.get(A)||null,d(k,x,j,I,null);tp(k,j)}return null}function v(x,k,A,j){for(var I=null,E=null,U=k,D=k=0,R=null;U!==null&&D<A.length;D++){U.index>D?(R=U,U=null):R=U.sibling;var X=m(x,U,A[D],j);if(X===null){U===null&&(U=R);break}e&&U&&X.alternate===null&&t(x,U),k=s(X,k,D),E===null?I=X:E.sibling=X,E=X,U=R}if(D===A.length)return n(x,U),Mr&&Ml(x,D),I;if(U===null){for(;D<A.length;D++)U=p(x,A[D],j),U!==null&&(k=s(U,k,D),E===null?I=U:E.sibling=U,E=U);return Mr&&Ml(x,D),I}for(U=r(x,U);D<A.length;D++)R=g(U,x,D,A[D],j),R!==null&&(e&&R.alternate!==null&&U.delete(R.key===null?D:R.key),k=s(R,k,D),E===null?I=R:E.sibling=R,E=R);return e&&U.forEach(function(ce){return t(x,ce)}),Mr&&Ml(x,D),I}function w(x,k,A,j){var I=Th(A);if(typeof I!="function")throw Error(Nt(150));if(A=I.call(A),A==null)throw Error(Nt(151));for(var E=I=null,U=k,D=k=0,R=null,X=A.next();U!==null&&!X.done;D++,X=A.next()){U.index>D?(R=U,U=null):R=U.sibling;var ce=m(x,U,X.value,j);if(ce===null){U===null&&(U=R);break}e&&U&&ce.alternate===null&&t(x,U),k=s(ce,k,D),E===null?I=ce:E.sibling=ce,E=ce,U=R}if(X.done)return n(x,U),Mr&&Ml(x,D),I;if(U===null){for(;!X.done;D++,X=A.next())X=p(x,X.value,j),X!==null&&(k=s(X,k,D),E===null?I=X:E.sibling=X,E=X);return Mr&&Ml(x,D),I}for(U=r(x,U);!X.done;D++,X=A.next())X=g(U,x,D,X.value,j),X!==null&&(e&&X.alternate!==null&&U.delete(X.key===null?D:X.key),k=s(X,k,D),E===null?I=X:E.sibling=X,E=X);return e&&U.forEach(function(ie){return t(x,ie)}),Mr&&Ml(x,D),I}function C(x,k,A,j){if(typeof A=="object"&&A!==null&&A.type===cu&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Wf:e:{for(var I=A.key,E=k;E!==null;){if(E.key===I){if(I=A.type,I===cu){if(E.tag===7){n(x,E.sibling),k=i(E,A.props.children),k.return=x,x=k;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Wo&&Uk(I)===E.type){n(x,E.sibling),k=i(E,A.props),k.ref=Oh(x,E,A),k.return=x,x=k;break e}n(x,E);break}else t(x,E);E=E.sibling}A.type===cu?(k=Jl(A.props.children,x.mode,j,A.key),k.return=x,x=k):(j=am(A.type,A.key,A.props,null,x.mode,j),j.ref=Oh(x,k,A),j.return=x,x=j)}return a(x);case lu:e:{for(E=A.key;k!==null;){if(k.key===E)if(k.tag===4&&k.stateNode.containerInfo===A.containerInfo&&k.stateNode.implementation===A.implementation){n(x,k.sibling),k=i(k,A.children||[]),k.return=x,x=k;break e}else{n(x,k);break}else t(x,k);k=k.sibling}k=cy(A,x.mode,j),k.return=x,x=k}return a(x);case Wo:return E=A._init,C(x,k,E(A._payload),j)}if(Kh(A))return v(x,k,A,j);if(Th(A))return w(x,k,A,j);tp(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,k!==null&&k.tag===6?(n(x,k.sibling),k=i(k,A),k.return=x,x=k):(n(x,k),k=ly(A,x.mode,j),k.return=x,x=k),a(x)):n(x,k)}return C}var Fu=BA(!0),UA=BA(!1),Rm=vl(null),Mm=null,yu=null,N1=null;function O1(){N1=yu=Mm=null}function R1(e){var t=Rm.current;Pr(Rm),e._currentValue=t}function jv(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Au(e,t){Mm=e,N1=yu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(us=!0),e.firstContext=null)}function Ys(e){var t=e._currentValue;if(N1!==e)if(e={context:e,memoizedValue:t,next:null},yu===null){if(Mm===null)throw Error(Nt(308));yu=e,Mm.dependencies={lanes:0,firstContext:e}}else yu=yu.next=e;return t}var ql=null;function M1(e){ql===null?ql=[e]:ql.push(e)}function HA(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,M1(t)):(n.next=i.next,i.next=n),t.interleaved=n,Eo(e,r)}function Eo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vo=!1;function L1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function al(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Wn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Eo(e,n)}return i=r.interleaved,i===null?(t.next=t,M1(r)):(t.next=i.next,i.next=t),r.interleaved=t,Eo(e,n)}function em(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,x1(e,n)}}function Hk(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lm(e,t,n,r){var i=e.updateQueue;Vo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=h:o.next=h,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;a=0,d=h=u=null,o=s;do{var m=o.lane,g=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(m=t,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=Hr({},p,m);break e;case 2:Vo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(h=d=g,u=p):d=d.next=g,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ac|=a,e.lanes=a,e.memoizedState=p}}function Wk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Nt(191,i));i.call(r)}}}var vf={},ro=vl(vf),Gd=vl(vf),qd=vl(vf);function Yl(e){if(e===vf)throw Error(Nt(174));return e}function I1(e,t){switch(kr(qd,t),kr(Gd,e),kr(ro,vf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lv(t,e)}Pr(ro),kr(ro,t)}function Bu(){Pr(ro),Pr(Gd),Pr(qd)}function VA(e){Yl(qd.current);var t=Yl(ro.current),n=lv(t,e.type);t!==n&&(kr(Gd,e),kr(ro,n))}function $1(e){Gd.current===e&&(Pr(ro),Pr(Gd))}var Fr=vl(0);function Im(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ny=[];function D1(){for(var e=0;e<ny.length;e++)ny[e]._workInProgressVersionPrimary=null;ny.length=0}var tm=Po.ReactCurrentDispatcher,ry=Po.ReactCurrentBatchConfig,sc=0,Br=null,ui=null,vi=null,$m=!1,_d=!1,Yd=0,B8=0;function Li(){throw Error(Nt(321))}function z1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ta(e[n],t[n]))return!1;return!0}function F1(e,t,n,r,i,s){if(sc=s,Br=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tm.current=e===null||e.memoizedState===null?V8:G8,e=n(r,i),_d){s=0;do{if(_d=!1,Yd=0,25<=s)throw Error(Nt(301));s+=1,vi=ui=null,t.updateQueue=null,tm.current=q8,e=n(r,i)}while(_d)}if(tm.current=Dm,t=ui!==null&&ui.next!==null,sc=0,vi=ui=Br=null,$m=!1,t)throw Error(Nt(300));return e}function B1(){var e=Yd!==0;return Yd=0,e}function Wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Br.memoizedState=vi=e:vi=vi.next=e,vi}function Xs(){if(ui===null){var e=Br.alternate;e=e!==null?e.memoizedState:null}else e=ui.next;var t=vi===null?Br.memoizedState:vi.next;if(t!==null)vi=t,ui=e;else{if(e===null)throw Error(Nt(310));ui=e,e={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},vi===null?Br.memoizedState=vi=e:vi=vi.next=e}return vi}function Xd(e,t){return typeof t=="function"?t(e):t}function iy(e){var t=Xs(),n=t.queue;if(n===null)throw Error(Nt(311));n.lastRenderedReducer=e;var r=ui,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,u=null,h=s;do{var d=h.lane;if((sc&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(o=u=p,a=r):u=u.next=p,Br.lanes|=d,ac|=d}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=o,Ta(r,t.memoizedState)||(us=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Br.lanes|=s,ac|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sy(e){var t=Xs(),n=t.queue;if(n===null)throw Error(Nt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Ta(s,t.memoizedState)||(us=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function GA(){}function qA(e,t){var n=Br,r=Xs(),i=t(),s=!Ta(r.memoizedState,i);if(s&&(r.memoizedState=i,us=!0),r=r.queue,U1(KA.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,Kd(9,XA.bind(null,n,r,i,t),void 0,null),wi===null)throw Error(Nt(349));sc&30||YA(n,t,i)}return i}function YA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Br.updateQueue,t===null?(t={lastEffect:null,stores:null},Br.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function XA(e,t,n,r){t.value=n,t.getSnapshot=r,ZA(t)&&QA(e)}function KA(e,t,n){return n(function(){ZA(t)&&QA(e)})}function ZA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ta(e,n)}catch{return!0}}function QA(e){var t=Eo(e,1);t!==null&&ka(t,e,1,-1)}function Vk(e){var t=Wa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:e},t.queue=e,e=e.dispatch=W8.bind(null,Br,e),[t.memoizedState,e]}function Kd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Br.updateQueue,t===null?(t={lastEffect:null,stores:null},Br.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function JA(){return Xs().memoizedState}function nm(e,t,n,r){var i=Wa();Br.flags|=e,i.memoizedState=Kd(1|t,n,void 0,r===void 0?null:r)}function Dg(e,t,n,r){var i=Xs();r=r===void 0?null:r;var s=void 0;if(ui!==null){var a=ui.memoizedState;if(s=a.destroy,r!==null&&z1(r,a.deps)){i.memoizedState=Kd(t,n,s,r);return}}Br.flags|=e,i.memoizedState=Kd(1|t,n,s,r)}function Gk(e,t){return nm(8390656,8,e,t)}function U1(e,t){return Dg(2048,8,e,t)}function e3(e,t){return Dg(4,2,e,t)}function t3(e,t){return Dg(4,4,e,t)}function n3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function r3(e,t,n){return n=n!=null?n.concat([e]):null,Dg(4,4,n3.bind(null,t,e),n)}function H1(){}function i3(e,t){var n=Xs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&z1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function s3(e,t){var n=Xs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&z1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function a3(e,t,n){return sc&21?(Ta(n,t)||(n=hA(),Br.lanes|=n,ac|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,us=!0),e.memoizedState=n)}function U8(e,t){var n=ir;ir=n!==0&&4>n?n:4,e(!0);var r=ry.transition;ry.transition={};try{e(!1),t()}finally{ir=n,ry.transition=r}}function o3(){return Xs().memoizedState}function H8(e,t,n){var r=ll(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l3(e))c3(t,n);else if(n=HA(e,t,n,r),n!==null){var i=Zi();ka(n,e,r,i),u3(n,t,r)}}function W8(e,t,n){var r=ll(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l3(e))c3(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Ta(o,a)){var u=t.interleaved;u===null?(i.next=i,M1(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=HA(e,t,i,r),n!==null&&(i=Zi(),ka(n,e,r,i),u3(n,t,r))}}function l3(e){var t=e.alternate;return e===Br||t!==null&&t===Br}function c3(e,t){_d=$m=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function u3(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,x1(e,n)}}var Dm={readContext:Ys,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},V8={readContext:Ys,useCallback:function(e,t){return Wa().memoizedState=[e,t===void 0?null:t],e},useContext:Ys,useEffect:Gk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nm(4194308,4,n3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nm(4194308,4,e,t)},useInsertionEffect:function(e,t){return nm(4,2,e,t)},useMemo:function(e,t){var n=Wa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=H8.bind(null,Br,e),[r.memoizedState,e]},useRef:function(e){var t=Wa();return e={current:e},t.memoizedState=e},useState:Vk,useDebugValue:H1,useDeferredValue:function(e){return Wa().memoizedState=e},useTransition:function(){var e=Vk(!1),t=e[0];return e=U8.bind(null,e[1]),Wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Br,i=Wa();if(Mr){if(n===void 0)throw Error(Nt(407));n=n()}else{if(n=t(),wi===null)throw Error(Nt(349));sc&30||YA(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Gk(KA.bind(null,r,s,e),[e]),r.flags|=2048,Kd(9,XA.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Wa(),t=wi.identifierPrefix;if(Mr){var n=xo,r=vo;n=(r&~(1<<32-_a(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=B8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},G8={readContext:Ys,useCallback:i3,useContext:Ys,useEffect:U1,useImperativeHandle:r3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:s3,useReducer:iy,useRef:JA,useState:function(){return iy(Xd)},useDebugValue:H1,useDeferredValue:function(e){var t=Xs();return a3(t,ui.memoizedState,e)},useTransition:function(){var e=iy(Xd)[0],t=Xs().memoizedState;return[e,t]},useMutableSource:GA,useSyncExternalStore:qA,useId:o3,unstable_isNewReconciler:!1},q8={readContext:Ys,useCallback:i3,useContext:Ys,useEffect:U1,useImperativeHandle:r3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:s3,useReducer:sy,useRef:JA,useState:function(){return sy(Xd)},useDebugValue:H1,useDeferredValue:function(e){var t=Xs();return ui===null?t.memoizedState=e:a3(t,ui.memoizedState,e)},useTransition:function(){var e=sy(Xd)[0],t=Xs().memoizedState;return[e,t]},useMutableSource:GA,useSyncExternalStore:qA,useId:o3,unstable_isNewReconciler:!1};function da(e,t){if(e&&e.defaultProps){t=Hr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Av(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Hr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zg={isMounted:function(e){return(e=e._reactInternals)?fc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zi(),i=ll(e),s=wo(r,i);s.payload=t,n!=null&&(s.callback=n),t=al(e,s,i),t!==null&&(ka(t,e,i,r),em(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zi(),i=ll(e),s=wo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=al(e,s,i),t!==null&&(ka(t,e,i,r),em(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zi(),r=ll(e),i=wo(n,r);i.tag=2,t!=null&&(i.callback=t),t=al(e,i,r),t!==null&&(ka(t,e,r,n),em(t,e,r))}};function qk(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ud(n,r)||!Ud(i,s):!0}function h3(e,t,n){var r=!1,i=hl,s=t.contextType;return typeof s=="object"&&s!==null?s=Ys(s):(i=ds(t)?rc:Hi.current,r=t.contextTypes,s=(r=r!=null)?Du(e,i):hl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Yk(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zg.enqueueReplaceState(t,t.state,null)}function Pv(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},L1(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ys(s):(s=ds(t)?rc:Hi.current,i.context=Du(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Av(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&zg.enqueueReplaceState(i,i.state,null),Lm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Uu(e,t){try{var n="",r=t;do n+=wI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function ay(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Y8=typeof WeakMap=="function"?WeakMap:Map;function d3(e,t,n){n=wo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fm||(Fm=!0,Bv=r),Nv(e,t)},n}function f3(e,t,n){n=wo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Nv(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Nv(e,t),typeof r!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Xk(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Y8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=l$.bind(null,e,t,n),t.then(e,e))}function Kk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zk(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wo(-1,1),t.tag=2,al(n,t,1))),n.lanes|=1),e)}var X8=Po.ReactCurrentOwner,us=!1;function Yi(e,t,n,r){t.child=e===null?UA(t,null,n,r):Fu(t,e.child,n,r)}function Qk(e,t,n,r,i){n=n.render;var s=t.ref;return Au(t,i),r=F1(e,t,n,r,s,i),n=B1(),e!==null&&!us?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,To(e,t,i)):(Mr&&n&&j1(t),t.flags|=1,Yi(e,t,r,i),t.child)}function Jk(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Z1(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,p3(e,t,s,r,i)):(e=am(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ud,n(a,r)&&e.ref===t.ref)return To(e,t,i)}return t.flags|=1,e=cl(s,r),e.ref=t.ref,e.return=t,t.child=e}function p3(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ud(s,r)&&e.ref===t.ref)if(us=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(us=!0);else return t.lanes=e.lanes,To(e,t,i)}return Ov(e,t,n,r,i)}function m3(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(vu,_s),_s|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kr(vu,_s),_s|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,kr(vu,_s),_s|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,kr(vu,_s),_s|=r;return Yi(e,t,i,n),t.child}function g3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ov(e,t,n,r,i){var s=ds(n)?rc:Hi.current;return s=Du(t,s),Au(t,i),n=F1(e,t,n,r,s,i),r=B1(),e!==null&&!us?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,To(e,t,i)):(Mr&&r&&j1(t),t.flags|=1,Yi(e,t,n,i),t.child)}function e2(e,t,n,r,i){if(ds(n)){var s=!0;Pm(t)}else s=!1;if(Au(t,i),t.stateNode===null)rm(e,t),h3(t,n,r),Pv(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ys(h):(h=ds(n)?rc:Hi.current,h=Du(t,h));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||u!==h)&&Yk(t,a,r,h),Vo=!1;var m=t.memoizedState;a.state=m,Lm(t,r,a,i),u=t.memoizedState,o!==r||m!==u||hs.current||Vo?(typeof d=="function"&&(Av(t,n,d,r),u=t.memoizedState),(o=Vo||qk(t,n,o,r,m,u,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=h,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,WA(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:da(t.type,o),a.props=h,p=t.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ys(u):(u=ds(n)?rc:Hi.current,u=Du(t,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==u)&&Yk(t,a,r,u),Vo=!1,m=t.memoizedState,a.state=m,Lm(t,r,a,i);var v=t.memoizedState;o!==p||m!==v||hs.current||Vo?(typeof g=="function"&&(Av(t,n,g,r),v=t.memoizedState),(h=Vo||qk(t,n,h,r,m,v,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Rv(e,t,n,r,s,i)}function Rv(e,t,n,r,i,s){g3(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&zk(t,n,!1),To(e,t,s);r=t.stateNode,X8.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Fu(t,e.child,null,s),t.child=Fu(t,null,o,s)):Yi(e,t,o,s),t.memoizedState=r.state,i&&zk(t,n,!0),t.child}function y3(e){var t=e.stateNode;t.pendingContext?Dk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dk(e,t.context,!1),I1(e,t.containerInfo)}function t2(e,t,n,r,i){return zu(),P1(i),t.flags|=256,Yi(e,t,n,r),t.child}var Mv={dehydrated:null,treeContext:null,retryLane:0};function Lv(e){return{baseLanes:e,cachePool:null,transitions:null}}function b3(e,t,n){var r=t.pendingProps,i=Fr.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),kr(Fr,i&1),e===null)return Tv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ug(a,r,0,null),e=Jl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Lv(n),t.memoizedState=Mv,e):W1(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return K8(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=cl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=cl(o,s):(s=Jl(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Lv(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Mv,r}return s=e.child,e=s.sibling,r=cl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function W1(e,t){return t=Ug({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function np(e,t,n,r){return r!==null&&P1(r),Fu(t,e.child,null,n),e=W1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function K8(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=ay(Error(Nt(422))),np(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ug({mode:"visible",children:r.children},i,0,null),s=Jl(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Fu(t,e.child,null,a),t.child.memoizedState=Lv(a),t.memoizedState=Mv,s);if(!(t.mode&1))return np(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Nt(419)),r=ay(s,r,void 0),np(e,t,a,r)}if(o=(a&e.childLanes)!==0,us||o){if(r=wi,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Eo(e,i),ka(r,e,i,-1))}return K1(),r=ay(Error(Nt(421))),np(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=c$.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,js=sl(i.nextSibling),Ns=t,Mr=!0,va=null,e!==null&&(Bs[Us++]=vo,Bs[Us++]=xo,Bs[Us++]=ic,vo=e.id,xo=e.overflow,ic=t),t=W1(t,r.children),t.flags|=4096,t)}function n2(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jv(e.return,t,n)}function oy(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function v3(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Yi(e,t,r.children,n),r=Fr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&n2(e,n,t);else if(e.tag===19)n2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(kr(Fr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Im(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),oy(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Im(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}oy(t,!0,n,null,s);break;case"together":oy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function To(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ac|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Nt(153));if(t.child!==null){for(e=t.child,n=cl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Z8(e,t,n){switch(t.tag){case 3:y3(t),zu();break;case 5:VA(t);break;case 1:ds(t.type)&&Pm(t);break;case 4:I1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;kr(Rm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(kr(Fr,Fr.current&1),t.flags|=128,null):n&t.child.childLanes?b3(e,t,n):(kr(Fr,Fr.current&1),e=To(e,t,n),e!==null?e.sibling:null);kr(Fr,Fr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return v3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kr(Fr,Fr.current),r)break;return null;case 22:case 23:return t.lanes=0,m3(e,t,n)}return To(e,t,n)}var x3,Iv,w3,_3;x3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Iv=function(){};w3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yl(ro.current);var s=null;switch(n){case"input":i=iv(e,i),r=iv(e,r),s=[];break;case"select":i=Hr({},i,{value:void 0}),r=Hr({},r,{value:void 0}),s=[];break;case"textarea":i=ov(e,i),r=ov(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jm)}cv(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var o=i[h];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ld.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(o=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==o&&(u!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ld.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Tr("scroll",e),s||o===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};_3=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rh(e,t){if(!Mr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ii(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Q8(e,t,n){var r=t.pendingProps;switch(A1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(t),null;case 1:return ds(t.type)&&Am(),Ii(t),null;case 3:return r=t.stateNode,Bu(),Pr(hs),Pr(Hi),D1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ep(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,va!==null&&(Wv(va),va=null))),Iv(e,t),Ii(t),null;case 5:$1(t);var i=Yl(qd.current);if(n=t.type,e!==null&&t.stateNode!=null)w3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Nt(166));return Ii(t),null}if(e=Yl(ro.current),ep(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ya]=t,r[Vd]=s,e=(t.mode&1)!==0,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(i=0;i<Qh.length;i++)Tr(Qh[i],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":hk(r,s),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tr("invalid",r);break;case"textarea":fk(r,s),Tr("invalid",r)}cv(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Jf(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Jf(r.textContent,o,e),i=["children",""+o]):Ld.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Tr("scroll",r)}switch(n){case"input":Vf(r),dk(r,s,!0);break;case"textarea":Vf(r),pk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kj(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ya]=t,e[Vd]=r,x3(e,t,!1,!1),t.stateNode=e;e:{switch(a=uv(n,r),n){case"dialog":Tr("cancel",e),Tr("close",e),i=r;break;case"iframe":case"object":case"embed":Tr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Qh.length;i++)Tr(Qh[i],e);i=r;break;case"source":Tr("error",e),i=r;break;case"img":case"image":case"link":Tr("error",e),Tr("load",e),i=r;break;case"details":Tr("toggle",e),i=r;break;case"input":hk(e,r),i=iv(e,r),Tr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Hr({},r,{value:void 0}),Tr("invalid",e);break;case"textarea":fk(e,r),i=ov(e,r),Tr("invalid",e);break;default:i=r}cv(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?Jj(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Zj(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Id(e,u):typeof u=="number"&&Id(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ld.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Tr("scroll",e):u!=null&&p1(e,s,u,a))}switch(n){case"input":Vf(e),dk(e,r,!1);break;case"textarea":Vf(e),pk(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ul(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Cu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Cu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=jm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ii(t),null;case 6:if(e&&t.stateNode!=null)_3(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Nt(166));if(n=Yl(qd.current),Yl(ro.current),ep(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ya]=t,(s=r.nodeValue!==n)&&(e=Ns,e!==null))switch(e.tag){case 3:Jf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jf(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ya]=t,t.stateNode=r}return Ii(t),null;case 13:if(Pr(Fr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mr&&js!==null&&t.mode&1&&!(t.flags&128))FA(),zu(),t.flags|=98560,s=!1;else if(s=ep(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Nt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Nt(317));s[Ya]=t}else zu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ii(t),s=!1}else va!==null&&(Wv(va),va=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fr.current&1?fi===0&&(fi=3):K1())),t.updateQueue!==null&&(t.flags|=4),Ii(t),null);case 4:return Bu(),Iv(e,t),e===null&&Hd(t.stateNode.containerInfo),Ii(t),null;case 10:return R1(t.type._context),Ii(t),null;case 17:return ds(t.type)&&Am(),Ii(t),null;case 19:if(Pr(Fr),s=t.memoizedState,s===null)return Ii(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Rh(s,!1);else{if(fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Im(e),a!==null){for(t.flags|=128,Rh(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return kr(Fr,Fr.current&1|2),t.child}e=e.sibling}s.tail!==null&&ei()>Hu&&(t.flags|=128,r=!0,Rh(s,!1),t.lanes=4194304)}else{if(!r)if(e=Im(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Mr)return Ii(t),null}else 2*ei()-s.renderingStartTime>Hu&&n!==1073741824&&(t.flags|=128,r=!0,Rh(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ei(),t.sibling=null,n=Fr.current,kr(Fr,r?n&1|2:n&1),t):(Ii(t),null);case 22:case 23:return X1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_s&1073741824&&(Ii(t),t.subtreeFlags&6&&(t.flags|=8192)):Ii(t),null;case 24:return null;case 25:return null}throw Error(Nt(156,t.tag))}function J8(e,t){switch(A1(t),t.tag){case 1:return ds(t.type)&&Am(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bu(),Pr(hs),Pr(Hi),D1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $1(t),null;case 13:if(Pr(Fr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Nt(340));zu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pr(Fr),null;case 4:return Bu(),null;case 10:return R1(t.type._context),null;case 22:case 23:return X1(),null;case 24:return null;default:return null}}var rp=!1,Bi=!1,e$=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function bu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yr(e,t,r)}else n.current=null}function $v(e,t,n){try{n()}catch(r){Yr(e,t,r)}}var r2=!1;function t$(e,t){if(xv=Cm,e=TA(),T1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,h=0,d=0,p=e,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++h===i&&(o=a),m===s&&++d===r&&(u=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wv={focusedElem:e,selectionRange:n},Cm=!1,Wt=t;Wt!==null;)if(t=Wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Wt=e;else for(;Wt!==null;){t=Wt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,x=t.stateNode,k=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:da(t.type,w),C);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Nt(163))}}catch(j){Yr(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Wt=e;break}Wt=t.return}return v=r2,r2=!1,v}function kd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&$v(t,n,s)}i=i.next}while(i!==r)}}function Fg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Dv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function k3(e){var t=e.alternate;t!==null&&(e.alternate=null,k3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ya],delete t[Vd],delete t[Sv],delete t[$8],delete t[D8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function S3(e){return e.tag===5||e.tag===3||e.tag===4}function i2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||S3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jm));else if(r!==4&&(e=e.child,e!==null))for(zv(e,t,n),e=e.sibling;e!==null;)zv(e,t,n),e=e.sibling}function Fv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fv(e,t,n),e=e.sibling;e!==null;)Fv(e,t,n),e=e.sibling}var Si=null,ga=!1;function Io(e,t,n){for(n=n.child;n!==null;)C3(e,t,n),n=n.sibling}function C3(e,t,n){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(Og,n)}catch{}switch(n.tag){case 5:Bi||bu(n,t);case 6:var r=Si,i=ga;Si=null,Io(e,t,n),Si=r,ga=i,Si!==null&&(ga?(e=Si,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Si.removeChild(n.stateNode));break;case 18:Si!==null&&(ga?(e=Si,n=n.stateNode,e.nodeType===8?ey(e.parentNode,n):e.nodeType===1&&ey(e,n),Fd(e)):ey(Si,n.stateNode));break;case 4:r=Si,i=ga,Si=n.stateNode.containerInfo,ga=!0,Io(e,t,n),Si=r,ga=i;break;case 0:case 11:case 14:case 15:if(!Bi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&$v(n,t,a),i=i.next}while(i!==r)}Io(e,t,n);break;case 1:if(!Bi&&(bu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Yr(n,t,o)}Io(e,t,n);break;case 21:Io(e,t,n);break;case 22:n.mode&1?(Bi=(r=Bi)||n.memoizedState!==null,Io(e,t,n),Bi=r):Io(e,t,n);break;default:Io(e,t,n)}}function s2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new e$),t.forEach(function(r){var i=u$.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Si=o.stateNode,ga=!1;break e;case 3:Si=o.stateNode.containerInfo,ga=!0;break e;case 4:Si=o.stateNode.containerInfo,ga=!0;break e}o=o.return}if(Si===null)throw Error(Nt(160));C3(s,a,i),Si=null,ga=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Yr(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)E3(t,e),t=t.sibling}function E3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sa(t,e),za(e),r&4){try{kd(3,e,e.return),Fg(3,e)}catch(w){Yr(e,e.return,w)}try{kd(5,e,e.return)}catch(w){Yr(e,e.return,w)}}break;case 1:sa(t,e),za(e),r&512&&n!==null&&bu(n,n.return);break;case 5:if(sa(t,e),za(e),r&512&&n!==null&&bu(n,n.return),e.flags&32){var i=e.stateNode;try{Id(i,"")}catch(w){Yr(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Yj(i,s),uv(o,a);var h=uv(o,s);for(a=0;a<u.length;a+=2){var d=u[a],p=u[a+1];d==="style"?Jj(i,p):d==="dangerouslySetInnerHTML"?Zj(i,p):d==="children"?Id(i,p):p1(i,d,p,h)}switch(o){case"input":sv(i,s);break;case"textarea":Xj(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Cu(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Cu(i,!!s.multiple,s.defaultValue,!0):Cu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vd]=s}catch(w){Yr(e,e.return,w)}}break;case 6:if(sa(t,e),za(e),r&4){if(e.stateNode===null)throw Error(Nt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(w){Yr(e,e.return,w)}}break;case 3:if(sa(t,e),za(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fd(t.containerInfo)}catch(w){Yr(e,e.return,w)}break;case 4:sa(t,e),za(e);break;case 13:sa(t,e),za(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(q1=ei())),r&4&&s2(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Bi=(h=Bi)||d,sa(t,e),Bi=h):sa(t,e),za(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!d&&e.mode&1)for(Wt=e,d=e.child;d!==null;){for(p=Wt=d;Wt!==null;){switch(m=Wt,g=m.child,m.tag){case 0:case 11:case 14:case 15:kd(4,m,m.return);break;case 1:bu(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){Yr(r,n,w)}}break;case 5:bu(m,m.return);break;case 22:if(m.memoizedState!==null){o2(p);continue}}g!==null?(g.return=m,Wt=g):o2(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=Qj("display",a))}catch(w){Yr(e,e.return,w)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(w){Yr(e,e.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:sa(t,e),za(e),r&4&&s2(e);break;case 21:break;default:sa(t,e),za(e)}}function za(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(S3(n)){var r=n;break e}n=n.return}throw Error(Nt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Id(i,""),r.flags&=-33);var s=i2(e);Fv(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=i2(e);zv(e,o,a);break;default:throw Error(Nt(161))}}catch(u){Yr(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function n$(e,t,n){Wt=e,T3(e)}function T3(e,t,n){for(var r=(e.mode&1)!==0;Wt!==null;){var i=Wt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||rp;if(!a){var o=i.alternate,u=o!==null&&o.memoizedState!==null||Bi;o=rp;var h=Bi;if(rp=a,(Bi=u)&&!h)for(Wt=i;Wt!==null;)a=Wt,u=a.child,a.tag===22&&a.memoizedState!==null?l2(i):u!==null?(u.return=a,Wt=u):l2(i);for(;s!==null;)Wt=s,T3(s),s=s.sibling;Wt=i,rp=o,Bi=h}a2(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Wt=s):a2(e)}}function a2(e){for(;Wt!==null;){var t=Wt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bi||Fg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bi)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:da(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Wk(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wk(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Fd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Nt(163))}Bi||t.flags&512&&Dv(t)}catch(m){Yr(t,t.return,m)}}if(t===e){Wt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Wt=n;break}Wt=t.return}}function o2(e){for(;Wt!==null;){var t=Wt;if(t===e){Wt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Wt=n;break}Wt=t.return}}function l2(e){for(;Wt!==null;){var t=Wt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fg(4,t)}catch(u){Yr(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Yr(t,i,u)}}var s=t.return;try{Dv(t)}catch(u){Yr(t,s,u)}break;case 5:var a=t.return;try{Dv(t)}catch(u){Yr(t,a,u)}}}catch(u){Yr(t,t.return,u)}if(t===e){Wt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Wt=o;break}Wt=t.return}}var r$=Math.ceil,zm=Po.ReactCurrentDispatcher,V1=Po.ReactCurrentOwner,Gs=Po.ReactCurrentBatchConfig,Wn=0,wi=null,si=null,Ti=0,_s=0,vu=vl(0),fi=0,Zd=null,ac=0,Bg=0,G1=0,Sd=null,cs=null,q1=0,Hu=1/0,po=null,Fm=!1,Bv=null,ol=null,ip=!1,Jo=null,Bm=0,Cd=0,Uv=null,im=-1,sm=0;function Zi(){return Wn&6?ei():im!==-1?im:im=ei()}function ll(e){return e.mode&1?Wn&2&&Ti!==0?Ti&-Ti:F8.transition!==null?(sm===0&&(sm=hA()),sm):(e=ir,e!==0||(e=window.event,e=e===void 0?16:bA(e.type)),e):1}function ka(e,t,n,r){if(50<Cd)throw Cd=0,Uv=null,Error(Nt(185));gf(e,n,r),(!(Wn&2)||e!==wi)&&(e===wi&&(!(Wn&2)&&(Bg|=n),fi===4&&Yo(e,Ti)),fs(e,r),n===1&&Wn===0&&!(t.mode&1)&&(Hu=ei()+500,$g&&xl()))}function fs(e,t){var n=e.callbackNode;FI(e,t);var r=Sm(e,e===wi?Ti:0);if(r===0)n!==null&&yk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yk(n),t===1)e.tag===0?z8(c2.bind(null,e)):$A(c2.bind(null,e)),L8(function(){!(Wn&6)&&xl()}),n=null;else{switch(dA(r)){case 1:n=v1;break;case 4:n=cA;break;case 16:n=km;break;case 536870912:n=uA;break;default:n=km}n=L3(n,j3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function j3(e,t){if(im=-1,sm=0,Wn&6)throw Error(Nt(327));var n=e.callbackNode;if(Pu()&&e.callbackNode!==n)return null;var r=Sm(e,e===wi?Ti:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Um(e,r);else{t=r;var i=Wn;Wn|=2;var s=P3();(wi!==e||Ti!==t)&&(po=null,Hu=ei()+500,Ql(e,t));do try{a$();break}catch(o){A3(e,o)}while(!0);O1(),zm.current=s,Wn=i,si!==null?t=0:(wi=null,Ti=0,t=fi)}if(t!==0){if(t===2&&(i=mv(e),i!==0&&(r=i,t=Hv(e,i))),t===1)throw n=Zd,Ql(e,0),Yo(e,r),fs(e,ei()),n;if(t===6)Yo(e,r);else{if(i=e.current.alternate,!(r&30)&&!i$(i)&&(t=Um(e,r),t===2&&(s=mv(e),s!==0&&(r=s,t=Hv(e,s))),t===1))throw n=Zd,Ql(e,0),Yo(e,r),fs(e,ei()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Nt(345));case 2:Ll(e,cs,po);break;case 3:if(Yo(e,r),(r&130023424)===r&&(t=q1+500-ei(),10<t)){if(Sm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Zi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=kv(Ll.bind(null,e,cs,po),t);break}Ll(e,cs,po);break;case 4:if(Yo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-_a(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=ei()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*r$(r/1960))-r,10<r){e.timeoutHandle=kv(Ll.bind(null,e,cs,po),r);break}Ll(e,cs,po);break;case 5:Ll(e,cs,po);break;default:throw Error(Nt(329))}}}return fs(e,ei()),e.callbackNode===n?j3.bind(null,e):null}function Hv(e,t){var n=Sd;return e.current.memoizedState.isDehydrated&&(Ql(e,t).flags|=256),e=Um(e,t),e!==2&&(t=cs,cs=n,t!==null&&Wv(t)),e}function Wv(e){cs===null?cs=e:cs.push.apply(cs,e)}function i$(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ta(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yo(e,t){for(t&=~G1,t&=~Bg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_a(t),r=1<<n;e[n]=-1,t&=~r}}function c2(e){if(Wn&6)throw Error(Nt(327));Pu();var t=Sm(e,0);if(!(t&1))return fs(e,ei()),null;var n=Um(e,t);if(e.tag!==0&&n===2){var r=mv(e);r!==0&&(t=r,n=Hv(e,r))}if(n===1)throw n=Zd,Ql(e,0),Yo(e,t),fs(e,ei()),n;if(n===6)throw Error(Nt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ll(e,cs,po),fs(e,ei()),null}function Y1(e,t){var n=Wn;Wn|=1;try{return e(t)}finally{Wn=n,Wn===0&&(Hu=ei()+500,$g&&xl())}}function oc(e){Jo!==null&&Jo.tag===0&&!(Wn&6)&&Pu();var t=Wn;Wn|=1;var n=Gs.transition,r=ir;try{if(Gs.transition=null,ir=1,e)return e()}finally{ir=r,Gs.transition=n,Wn=t,!(Wn&6)&&xl()}}function X1(){_s=vu.current,Pr(vu)}function Ql(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,M8(n)),si!==null)for(n=si.return;n!==null;){var r=n;switch(A1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Am();break;case 3:Bu(),Pr(hs),Pr(Hi),D1();break;case 5:$1(r);break;case 4:Bu();break;case 13:Pr(Fr);break;case 19:Pr(Fr);break;case 10:R1(r.type._context);break;case 22:case 23:X1()}n=n.return}if(wi=e,si=e=cl(e.current,null),Ti=_s=t,fi=0,Zd=null,G1=Bg=ac=0,cs=Sd=null,ql!==null){for(t=0;t<ql.length;t++)if(n=ql[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ql=null}return e}function A3(e,t){do{var n=si;try{if(O1(),tm.current=Dm,$m){for(var r=Br.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$m=!1}if(sc=0,vi=ui=Br=null,_d=!1,Yd=0,V1.current=null,n===null||n.return===null){fi=1,Zd=t,si=null;break}e:{var s=e,a=n.return,o=n,u=t;if(t=Ti,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Kk(a);if(g!==null){g.flags&=-257,Zk(g,a,o,s,t),g.mode&1&&Xk(s,h,t),t=g,u=h;var v=t.updateQueue;if(v===null){var w=new Set;w.add(u),t.updateQueue=w}else v.add(u);break e}else{if(!(t&1)){Xk(s,h,t),K1();break e}u=Error(Nt(426))}}else if(Mr&&o.mode&1){var C=Kk(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Zk(C,a,o,s,t),P1(Uu(u,o));break e}}s=u=Uu(u,o),fi!==4&&(fi=2),Sd===null?Sd=[s]:Sd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=d3(s,u,t);Hk(s,x);break e;case 1:o=u;var k=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ol===null||!ol.has(A)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=f3(s,o,t);Hk(s,j);break e}}s=s.return}while(s!==null)}O3(n)}catch(I){t=I,si===n&&n!==null&&(si=n=n.return);continue}break}while(!0)}function P3(){var e=zm.current;return zm.current=Dm,e===null?Dm:e}function K1(){(fi===0||fi===3||fi===2)&&(fi=4),wi===null||!(ac&268435455)&&!(Bg&268435455)||Yo(wi,Ti)}function Um(e,t){var n=Wn;Wn|=2;var r=P3();(wi!==e||Ti!==t)&&(po=null,Ql(e,t));do try{s$();break}catch(i){A3(e,i)}while(!0);if(O1(),Wn=n,zm.current=r,si!==null)throw Error(Nt(261));return wi=null,Ti=0,fi}function s$(){for(;si!==null;)N3(si)}function a$(){for(;si!==null&&!NI();)N3(si)}function N3(e){var t=M3(e.alternate,e,_s);e.memoizedProps=e.pendingProps,t===null?O3(e):si=t,V1.current=null}function O3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=J8(n,t),n!==null){n.flags&=32767,si=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fi=6,si=null;return}}else if(n=Q8(n,t,_s),n!==null){si=n;return}if(t=t.sibling,t!==null){si=t;return}si=t=e}while(t!==null);fi===0&&(fi=5)}function Ll(e,t,n){var r=ir,i=Gs.transition;try{Gs.transition=null,ir=1,o$(e,t,n,r)}finally{Gs.transition=i,ir=r}return null}function o$(e,t,n,r){do Pu();while(Jo!==null);if(Wn&6)throw Error(Nt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Nt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(BI(e,s),e===wi&&(si=wi=null,Ti=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ip||(ip=!0,L3(km,function(){return Pu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gs.transition,Gs.transition=null;var a=ir;ir=1;var o=Wn;Wn|=4,V1.current=null,t$(e,n),E3(n,e),T8(wv),Cm=!!xv,wv=xv=null,e.current=n,n$(n),OI(),Wn=o,ir=a,Gs.transition=s}else e.current=n;if(ip&&(ip=!1,Jo=e,Bm=i),s=e.pendingLanes,s===0&&(ol=null),LI(n.stateNode),fs(e,ei()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fm)throw Fm=!1,e=Bv,Bv=null,e;return Bm&1&&e.tag!==0&&Pu(),s=e.pendingLanes,s&1?e===Uv?Cd++:(Cd=0,Uv=e):Cd=0,xl(),null}function Pu(){if(Jo!==null){var e=dA(Bm),t=Gs.transition,n=ir;try{if(Gs.transition=null,ir=16>e?16:e,Jo===null)var r=!1;else{if(e=Jo,Jo=null,Bm=0,Wn&6)throw Error(Nt(331));var i=Wn;for(Wn|=4,Wt=e.current;Wt!==null;){var s=Wt,a=s.child;if(Wt.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var h=o[u];for(Wt=h;Wt!==null;){var d=Wt;switch(d.tag){case 0:case 11:case 15:kd(8,d,s)}var p=d.child;if(p!==null)p.return=d,Wt=p;else for(;Wt!==null;){d=Wt;var m=d.sibling,g=d.return;if(k3(d),d===h){Wt=null;break}if(m!==null){m.return=g,Wt=m;break}Wt=g}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}Wt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Wt=a;else e:for(;Wt!==null;){if(s=Wt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kd(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Wt=x;break e}Wt=s.return}}var k=e.current;for(Wt=k;Wt!==null;){a=Wt;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,Wt=A;else e:for(a=k;Wt!==null;){if(o=Wt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fg(9,o)}}catch(I){Yr(o,o.return,I)}if(o===a){Wt=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,Wt=j;break e}Wt=o.return}}if(Wn=i,xl(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(Og,e)}catch{}r=!0}return r}finally{ir=n,Gs.transition=t}}return!1}function u2(e,t,n){t=Uu(n,t),t=d3(e,t,1),e=al(e,t,1),t=Zi(),e!==null&&(gf(e,1,t),fs(e,t))}function Yr(e,t,n){if(e.tag===3)u2(e,e,n);else for(;t!==null;){if(t.tag===3){u2(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ol===null||!ol.has(r))){e=Uu(n,e),e=f3(t,e,1),t=al(t,e,1),e=Zi(),t!==null&&(gf(t,1,e),fs(t,e));break}}t=t.return}}function l$(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Zi(),e.pingedLanes|=e.suspendedLanes&n,wi===e&&(Ti&n)===n&&(fi===4||fi===3&&(Ti&130023424)===Ti&&500>ei()-q1?Ql(e,0):G1|=n),fs(e,t)}function R3(e,t){t===0&&(e.mode&1?(t=Yf,Yf<<=1,!(Yf&130023424)&&(Yf=4194304)):t=1);var n=Zi();e=Eo(e,t),e!==null&&(gf(e,t,n),fs(e,n))}function c$(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),R3(e,n)}function u$(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Nt(314))}r!==null&&r.delete(t),R3(e,n)}var M3;M3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hs.current)us=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return us=!1,Z8(e,t,n);us=!!(e.flags&131072)}else us=!1,Mr&&t.flags&1048576&&DA(t,Om,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rm(e,t),e=t.pendingProps;var i=Du(t,Hi.current);Au(t,n),i=F1(null,t,r,e,i,n);var s=B1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ds(r)?(s=!0,Pm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,L1(t),i.updater=zg,t.stateNode=i,i._reactInternals=t,Pv(t,r,e,n),t=Rv(null,t,r,!0,s,n)):(t.tag=0,Mr&&s&&j1(t),Yi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rm(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=d$(r),e=da(r,e),i){case 0:t=Ov(null,t,r,e,n);break e;case 1:t=e2(null,t,r,e,n);break e;case 11:t=Qk(null,t,r,e,n);break e;case 14:t=Jk(null,t,r,da(r.type,e),n);break e}throw Error(Nt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:da(r,i),Ov(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:da(r,i),e2(e,t,r,i,n);case 3:e:{if(y3(t),e===null)throw Error(Nt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,WA(e,t),Lm(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Uu(Error(Nt(423)),t),t=t2(e,t,r,n,i);break e}else if(r!==i){i=Uu(Error(Nt(424)),t),t=t2(e,t,r,n,i);break e}else for(js=sl(t.stateNode.containerInfo.firstChild),Ns=t,Mr=!0,va=null,n=UA(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zu(),r===i){t=To(e,t,n);break e}Yi(e,t,r,n)}t=t.child}return t;case 5:return VA(t),e===null&&Tv(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,_v(r,i)?a=null:s!==null&&_v(r,s)&&(t.flags|=32),g3(e,t),Yi(e,t,a,n),t.child;case 6:return e===null&&Tv(t),null;case 13:return b3(e,t,n);case 4:return I1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fu(t,null,r,n):Yi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:da(r,i),Qk(e,t,r,i,n);case 7:return Yi(e,t,t.pendingProps,n),t.child;case 8:return Yi(e,t,t.pendingProps.children,n),t.child;case 12:return Yi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,kr(Rm,r._currentValue),r._currentValue=a,s!==null)if(Ta(s.value,a)){if(s.children===i.children&&!hs.current){t=To(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=wo(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),jv(s.return,n,t),o.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Nt(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),jv(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Yi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Au(t,n),i=Ys(i),r=r(i),t.flags|=1,Yi(e,t,r,n),t.child;case 14:return r=t.type,i=da(r,t.pendingProps),i=da(r.type,i),Jk(e,t,r,i,n);case 15:return p3(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:da(r,i),rm(e,t),t.tag=1,ds(r)?(e=!0,Pm(t)):e=!1,Au(t,n),h3(t,r,i),Pv(t,r,i,n),Rv(null,t,r,!0,e,n);case 19:return v3(e,t,n);case 22:return m3(e,t,n)}throw Error(Nt(156,t.tag))};function L3(e,t){return lA(e,t)}function h$(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(e,t,n,r){return new h$(e,t,n,r)}function Z1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function d$(e){if(typeof e=="function")return Z1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g1)return 11;if(e===y1)return 14}return 2}function cl(e,t){var n=e.alternate;return n===null?(n=Ws(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function am(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Z1(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case cu:return Jl(n.children,i,s,t);case m1:a=8,i|=8;break;case ev:return e=Ws(12,n,t,i|2),e.elementType=ev,e.lanes=s,e;case tv:return e=Ws(13,n,t,i),e.elementType=tv,e.lanes=s,e;case nv:return e=Ws(19,n,t,i),e.elementType=nv,e.lanes=s,e;case Vj:return Ug(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hj:a=10;break e;case Wj:a=9;break e;case g1:a=11;break e;case y1:a=14;break e;case Wo:a=16,r=null;break e}throw Error(Nt(130,e==null?e:typeof e,""))}return t=Ws(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Jl(e,t,n,r){return e=Ws(7,e,r,t),e.lanes=n,e}function Ug(e,t,n,r){return e=Ws(22,e,r,t),e.elementType=Vj,e.lanes=n,e.stateNode={isHidden:!1},e}function ly(e,t,n){return e=Ws(6,e,null,t),e.lanes=n,e}function cy(e,t,n){return t=Ws(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function f$(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Q1(e,t,n,r,i,s,a,o,u){return e=new f$(e,t,n,o,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ws(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},L1(s),e}function p$(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function I3(e){if(!e)return hl;e=e._reactInternals;e:{if(fc(e)!==e||e.tag!==1)throw Error(Nt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Nt(171))}if(e.tag===1){var n=e.type;if(ds(n))return IA(e,n,t)}return t}function $3(e,t,n,r,i,s,a,o,u){return e=Q1(n,r,!0,e,i,s,a,o,u),e.context=I3(null),n=e.current,r=Zi(),i=ll(n),s=wo(r,i),s.callback=t??null,al(n,s,i),e.current.lanes=i,gf(e,i,r),fs(e,r),e}function Hg(e,t,n,r){var i=t.current,s=Zi(),a=ll(i);return n=I3(n),t.context===null?t.context=n:t.pendingContext=n,t=wo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=al(i,t,a),e!==null&&(ka(e,i,a,s),em(e,i,a)),a}function Hm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function h2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function J1(e,t){h2(e,t),(e=e.alternate)&&h2(e,t)}function m$(){return null}var D3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ew(e){this._internalRoot=e}Wg.prototype.render=ew.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Nt(409));Hg(e,t,null,null)};Wg.prototype.unmount=ew.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;oc(function(){Hg(null,e,null,null)}),t[Co]=null}};function Wg(e){this._internalRoot=e}Wg.prototype.unstable_scheduleHydration=function(e){if(e){var t=mA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qo.length&&t!==0&&t<qo[n].priority;n++);qo.splice(n,0,e),n===0&&yA(e)}};function tw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function d2(){}function g$(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Hm(a);s.call(h)}}var a=$3(t,r,e,0,null,!1,!1,"",d2);return e._reactRootContainer=a,e[Co]=a.current,Hd(e.nodeType===8?e.parentNode:e),oc(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var h=Hm(u);o.call(h)}}var u=Q1(e,0,!1,null,null,!1,!1,"",d2);return e._reactRootContainer=u,e[Co]=u.current,Hd(e.nodeType===8?e.parentNode:e),oc(function(){Hg(t,u,n,r)}),u}function Gg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var u=Hm(a);o.call(u)}}Hg(t,a,e,i)}else a=g$(n,t,e,i,r);return Hm(a)}fA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zh(t.pendingLanes);n!==0&&(x1(t,n|1),fs(t,ei()),!(Wn&6)&&(Hu=ei()+500,xl()))}break;case 13:oc(function(){var r=Eo(e,1);if(r!==null){var i=Zi();ka(r,e,1,i)}}),J1(e,1)}};w1=function(e){if(e.tag===13){var t=Eo(e,134217728);if(t!==null){var n=Zi();ka(t,e,134217728,n)}J1(e,134217728)}};pA=function(e){if(e.tag===13){var t=ll(e),n=Eo(e,t);if(n!==null){var r=Zi();ka(n,e,t,r)}J1(e,t)}};mA=function(){return ir};gA=function(e,t){var n=ir;try{return ir=e,t()}finally{ir=n}};dv=function(e,t,n){switch(t){case"input":if(sv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ig(r);if(!i)throw Error(Nt(90));qj(r),sv(r,i)}}}break;case"textarea":Xj(e,n);break;case"select":t=n.value,t!=null&&Cu(e,!!n.multiple,t,!1)}};nA=Y1;rA=oc;var y$={usingClientEntryPoint:!1,Events:[bf,fu,Ig,eA,tA,Y1]},Mh={findFiberByHostInstance:Gl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b$={bundleType:Mh.bundleType,version:Mh.version,rendererPackageName:Mh.rendererPackageName,rendererConfig:Mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aA(e),e===null?null:e.stateNode},findFiberByHostInstance:Mh.findFiberByHostInstance||m$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sp.isDisabled&&sp.supportsFiber)try{Og=sp.inject(b$),no=sp}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y$;Ms.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tw(t))throw Error(Nt(200));return p$(e,t,null,n)};Ms.createRoot=function(e,t){if(!tw(e))throw Error(Nt(299));var n=!1,r="",i=D3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Q1(e,1,!1,null,null,n,!1,r,i),e[Co]=t.current,Hd(e.nodeType===8?e.parentNode:e),new ew(t)};Ms.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Nt(188)):(e=Object.keys(e).join(","),Error(Nt(268,e)));return e=aA(t),e=e===null?null:e.stateNode,e};Ms.flushSync=function(e){return oc(e)};Ms.hydrate=function(e,t,n){if(!Vg(t))throw Error(Nt(200));return Gg(null,e,t,!0,n)};Ms.hydrateRoot=function(e,t,n){if(!tw(e))throw Error(Nt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=D3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=$3(t,null,e,1,n??null,i,!1,s,a),e[Co]=t.current,Hd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Wg(t)};Ms.render=function(e,t,n){if(!Vg(t))throw Error(Nt(200));return Gg(null,e,t,!1,n)};Ms.unmountComponentAtNode=function(e){if(!Vg(e))throw Error(Nt(40));return e._reactRootContainer?(oc(function(){Gg(null,null,e,!1,function(){e._reactRootContainer=null,e[Co]=null})}),!0):!1};Ms.unstable_batchedUpdates=Y1;Ms.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Vg(n))throw Error(Nt(200));if(e==null||e._reactInternals===void 0)throw Error(Nt(38));return Gg(e,t,n,!1,r)};Ms.version="18.3.1-next-f1338f8080-20240426";function z3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z3)}catch(e){console.error(e)}}z3(),zj.exports=Ms;var v$=zj.exports,f2=v$;Qb.createRoot=f2.createRoot,Qb.hydrateRoot=f2.hydrateRoot;var Vv=function(e,t){return Vv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Vv(e,t)};function F3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Wm=function(){return Wm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wm.apply(this,arguments)};function sh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function B3(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function U3(e,t){return function(n,r){t(n,r,e)}}function H3(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,u=o==="getter"?"get":o==="setter"?"set":"value",h=!t&&e?r.static?e:e.prototype:null,d=t||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),p,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var C=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[u],v);if(o==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(p=a(C.get))&&(d.get=p),(p=a(C.set))&&(d.set=p),(p=a(C.init))&&i.unshift(p)}else(p=a(C))&&(o==="field"?i.unshift(p):d[u]=p)}h&&Object.defineProperty(h,r.name,d),m=!0}function W3(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function V3(e){return typeof e=="symbol"?e:"".concat(e)}function G3(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function q3(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Xt(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{h(r.next(d))}catch(p){a(p)}}function u(d){try{h(r.throw(d))}catch(p){a(p)}}function h(d){d.done?s(d.value):i(d.value).then(o,u)}h((r=r.apply(e,t||[])).next())})}function Y3(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(d){return u([h,d])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var qg=Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function X3(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&qg(t,e,n)}function Vm(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nw(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function K3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nw(arguments[t]));return e}function Z3(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}function Q3(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Wu(e){return this instanceof Wu?(this.v=e,this):new Wu(e)}function J3(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(v){return Promise.resolve(v).then(g,p)}}function o(g,v){r[g]&&(i[g]=function(w){return new Promise(function(C,x){s.push([g,w,C,x])>1||u(g,w)})},v&&(i[g]=v(i[g])))}function u(g,v){try{h(r[g](v))}catch(w){m(s[0][3],w)}}function h(g){g.value instanceof Wu?Promise.resolve(g.value.v).then(d,p):m(s[0][2],g)}function d(g){u("next",g)}function p(g){u("throw",g)}function m(g,v){g(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function eP(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(a){return(n=!n)?{value:Wu(e[i](a)),done:!1}:s?s(a):a}:s}}function tP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vm=="function"?Vm(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(o,u){a=e[s](a),i(o,u,a.done,a.value)})}}function i(s,a,o,u){Promise.resolve(u).then(function(h){s({value:h,done:o})},a)}}function nP(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var x$=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Gv=function(e){return Gv=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},Gv(e)};function rP(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Gv(e),r=0;r<n.length;r++)n[r]!=="default"&&qg(t,e,n[r]);return x$(t,e),t}function iP(e){return e&&e.__esModule?e:{default:e}}function sP(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function aP(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function oP(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function lP(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var w$=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function cP(e){function t(s){e.error=e.hasError?new w$(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return t(a),i()})}else r|=1}catch(a){t(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function uP(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?t?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):e}const _$={__extends:F3,__assign:Wm,__rest:sh,__decorate:B3,__param:U3,__esDecorate:H3,__runInitializers:W3,__propKey:V3,__setFunctionName:G3,__metadata:q3,__awaiter:Xt,__generator:Y3,__createBinding:qg,__exportStar:X3,__values:Vm,__read:nw,__spread:K3,__spreadArrays:Z3,__spreadArray:Q3,__await:Wu,__asyncGenerator:J3,__asyncDelegator:eP,__asyncValues:tP,__makeTemplateObject:nP,__importStar:rP,__importDefault:iP,__classPrivateFieldGet:sP,__classPrivateFieldSet:aP,__classPrivateFieldIn:oP,__addDisposableResource:lP,__disposeResources:cP,__rewriteRelativeImportExtension:uP},k$=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lP,get __assign(){return Wm},__asyncDelegator:eP,__asyncGenerator:J3,__asyncValues:tP,__await:Wu,__awaiter:Xt,__classPrivateFieldGet:sP,__classPrivateFieldIn:oP,__classPrivateFieldSet:aP,__createBinding:qg,__decorate:B3,__disposeResources:cP,__esDecorate:H3,__exportStar:X3,__extends:F3,__generator:Y3,__importDefault:iP,__importStar:rP,__makeTemplateObject:nP,__metadata:q3,__param:U3,__propKey:V3,__read:nw,__rest:sh,__rewriteRelativeImportExtension:uP,__runInitializers:W3,__setFunctionName:G3,__spread:K3,__spreadArray:Q3,__spreadArrays:Z3,__values:Vm,default:_$},Symbol.toStringTag,{value:"Module"})),S$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class rw extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class p2 extends rw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class m2 extends rw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class g2 extends rw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var qv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(qv||(qv={}));class C${constructor(t,{headers:n={},customFetch:r,region:i=qv.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=S$(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Xt(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:o,signal:u}=r;let h={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(h["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let m;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=o):typeof o=="string"?(h["Content-Type"]="text/plain",m=o):typeof FormData<"u"&&o instanceof FormData?m=o:(h["Content-Type"]="application/json",m=JSON.stringify(o)):m=o;const g=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:m,signal:u}).catch(x=>{throw x.name==="AbortError"?x:new p2(x)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new m2(g);if(!g.ok)throw new g2(g);let w=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return w==="application/json"?C=yield g.json():w==="application/octet-stream"||w==="application/pdf"?C=yield g.blob():w==="text/event-stream"?C=g:w==="multipart/form-data"?C=yield g.formData():C=yield g.text(),{data:C,error:null,response:g}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new p2(s)}:{data:null,error:s,response:s instanceof g2||s instanceof m2?s.context:void 0}}})}}var Xi={};const ah=Tj(k$);var ap={},op={},lp={},cp={},up={},hp={},y2;function hP(){if(y2)return hp;y2=1,Object.defineProperty(hp,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return hp.default=e,hp}var b2;function dP(){if(b2)return up;b2=1,Object.defineProperty(up,"__esModule",{value:!0});const t=ah.__importDefault(hP());class n{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var h,d,p,m;let g=null,v=null,w=null,C=u.status,x=u.statusText;if(u.ok){if(this.method!=="HEAD"){const I=await u.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?v=I:v=JSON.parse(I))}const A=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),j=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");A&&j&&j.length>1&&(w=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,C=406,x="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const A=await u.text();try{g=JSON.parse(A),Array.isArray(g)&&u.status===404&&(v=[],g=null,C=200,x="OK")}catch{u.status===404&&A===""?(C=204,x="No Content"):g={message:A}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,C=200,x="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:v,count:w,status:C,statusText:x}});return this.shouldThrowOnError||(o=o.catch(u=>{var h,d,p;return{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(p=u==null?void 0:u.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}}return up.default=n,up}var v2;function fP(){if(v2)return cp;v2=1,Object.defineProperty(cp,"__esModule",{value:!0});const t=ah.__importDefault(dP());class n extends t.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.order`:"order",d=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const u=typeof o>"u"?"offset":`${o}.offset`,h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:u=!1,format:h="text"}={}){var d;const p=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${m}"; options=${p};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return cp.default=n,cp}var x2;function iw(){if(x2)return lp;x2=1,Object.defineProperty(lp,"__esModule",{value:!0});const t=ah.__importDefault(fP()),n=new RegExp("[,()]");class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${h}fts${d}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const u=o?`${o}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}}return lp.default=r,lp}var w2;function pP(){if(w2)return op;w2=1,Object.defineProperty(op,"__esModule",{value:!0});const t=ah.__importDefault(iw());class n{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(i,s){const{head:a=!1,count:o}=s??{},u=a?"HEAD":"GET";let h=!1;const d=(i??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var o;const u="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(h.length>0){const d=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:u=!0}={}){var h;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(i,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return op.default=n,op}var _2;function E$(){if(_2)return ap;_2=1,Object.defineProperty(ap,"__esModule",{value:!0});const e=ah,t=e.__importDefault(pP()),n=e.__importDefault(iw());class r{constructor(s,{headers:a={},schema:o,fetch:u}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=u}from(s){const a=new URL(`${this.url}/${s}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:u=!1,count:h}={}){var d;let p;const m=new URL(`${this.url}/rpc/${s}`);let g;o||u?(p=o?"HEAD":"GET",Object.entries(a).filter(([w,C])=>C!==void 0).map(([w,C])=>[w,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([w,C])=>{m.searchParams.append(w,C)})):(p="POST",g=a);const v=new Headers(this.headers);return h&&v.set("Prefer",`count=${h}`),new n.default({method:p,url:m,headers:v,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return ap.default=r,ap}Object.defineProperty(Xi,"__esModule",{value:!0});var mP=Xi.PostgrestError=CP=Xi.PostgrestBuilder=kP=Xi.PostgrestTransformBuilder=wP=Xi.PostgrestFilterBuilder=vP=Xi.PostgrestQueryBuilder=yP=Xi.PostgrestClient=void 0;const oh=ah,gP=oh.__importDefault(E$());var yP=Xi.PostgrestClient=gP.default;const bP=oh.__importDefault(pP());var vP=Xi.PostgrestQueryBuilder=bP.default;const xP=oh.__importDefault(iw());var wP=Xi.PostgrestFilterBuilder=xP.default;const _P=oh.__importDefault(fP());var kP=Xi.PostgrestTransformBuilder=_P.default;const SP=oh.__importDefault(dP());var CP=Xi.PostgrestBuilder=SP.default;const EP=oh.__importDefault(hP());mP=Xi.PostgrestError=EP.default;var TP=Xi.default={PostgrestClient:gP.default,PostgrestQueryBuilder:bP.default,PostgrestFilterBuilder:xP.default,PostgrestTransformBuilder:_P.default,PostgrestBuilder:SP.default,PostgrestError:EP.default};const T$=qL({__proto__:null,get PostgrestBuilder(){return CP},get PostgrestClient(){return yP},get PostgrestError(){return mP},get PostgrestFilterBuilder(){return wP},get PostgrestQueryBuilder(){return vP},get PostgrestTransformBuilder(){return kP},default:TP},[Xi]),{PostgrestClient:j$,PostgrestQueryBuilder:R5e,PostgrestFilterBuilder:M5e,PostgrestTransformBuilder:L5e,PostgrestBuilder:I5e,PostgrestError:$5e}=TP||T$;class A${static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const P$="2.79.0",N$=`realtime-js/${P$}`,O$="1.0.0",Yv=1e4,R$=1e3,M$=100;var Ed;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ed||(Ed={}));var li;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(li||(li={}));var ya;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ya||(ya={}));var Xv;(function(e){e.websocket="websocket"})(Xv||(Xv={}));var Ul;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ul||(Ul={}));class L${constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const u=r.decode(t.slice(a,a+s));a=a+s;const h=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:u,payload:h}}}class jP{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var br;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(br||(br={}));const k2=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=I$(a,e,t,i),s),{}):{}},I$=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?AP(s,a):Kv(a)},AP=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return F$(t,n)}switch(e){case br.bool:return $$(t);case br.float4:case br.float8:case br.int2:case br.int4:case br.int8:case br.numeric:case br.oid:return D$(t);case br.json:case br.jsonb:return z$(t);case br.timestamp:return B$(t);case br.abstime:case br.date:case br.daterange:case br.int4range:case br.int8range:case br.money:case br.reltime:case br.text:case br.time:case br.timestamptz:case br.timetz:case br.tsrange:case br.tstzrange:return Kv(t);default:return Kv(t)}},Kv=e=>e,$$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},z$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},F$=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>AP(t,o))}return e},B$=e=>typeof e=="string"?e.replace(" ","T"):e,PP=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class uy{constructor(t,n,r={},i=Yv){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var S2;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(S2||(S2={}));class Td{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Td.syncState(this.state,i,s,a),this.pendingDiffs.forEach(u=>{this.state=Td.syncDiff(this.state,u,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Td.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},u={};return this.map(s,(h,d)=>{a[h]||(u[h]=d)}),this.map(a,(h,d)=>{const p=s[h];if(p){const m=d.map(C=>C.presence_ref),g=p.map(C=>C.presence_ref),v=d.filter(C=>g.indexOf(C.presence_ref)<0),w=p.filter(C=>m.indexOf(C.presence_ref)<0);v.length>0&&(o[h]=v),w.length>0&&(u[h]=w)}else o[h]=d}),this.syncDiff(s,{joins:o,leaves:u},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,u)=>{var h;const d=(h=t[o])!==null&&h!==void 0?h:[];if(t[o]=this.cloneDeep(u),d.length>0){const p=t[o].map(g=>g.presence_ref),m=d.filter(g=>p.indexOf(g.presence_ref)<0);t[o].unshift(...m)}r(o,d,u)}),this.map(a,(o,u)=>{let h=t[o];if(!h)return;const d=u.map(p=>p.presence_ref);h=h.filter(p=>d.indexOf(p.presence_ref)<0),t[o]=h,i(o,h,u),h.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var C2;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(C2||(C2={}));var jd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(jd||(jd={}));var mo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mo||(mo={}));class sw{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=li.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uy(this,ya.join,this.params,this.timeout),this.rejoinTimer=new jP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=li.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=li.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ya.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Td(this),this.broadcastEndpointURL=PP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==li.closed){const{config:{broadcast:a,presence:o,private:u}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[jd.PRESENCE]&&this.bindings[jd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},m={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:h,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(mo.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(mo.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(mo.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,C=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,x=[];for(let k=0;k<C;k++){const A=w[k],{filter:{event:j,schema:I,table:E,filter:U}}=A,D=g&&g[k];if(D&&D.event===j&&D.schema===I&&D.table===E&&D.filter===U)x.push(Object.assign(Object.assign({},A),{id:D.id}));else{this.unsubscribe(),this.state=li.errored,t==null||t(mo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(mo.SUBSCRIBED);return}}).receive("error",g=>{this.state=li.errored,t==null||t(mo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===li.joined&&t===jd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let u=o.statusText;try{const h=await o.json();u=h.error||h.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,u;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=li.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ya.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new uy(this,ya.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=li.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new uy(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>M$){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:u,leave:h,join:d}=ya;if(r&&[o,u,h,d].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,w,C;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((C=(w=g.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(g=>g.callback(m,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var v,w,C,x,k,A;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const j=g.id,I=(v=g.filter)===null||v===void 0?void 0:v.event;return j&&((w=n.ids)===null||w===void 0?void 0:w.includes(j))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const j=(k=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return j==="*"||j===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:C,commit_timestamp:x,type:k,errors:A}=v;m=Object.assign(Object.assign({},{schema:w,table:C,commit_timestamp:x,eventType:k,new:{},old:{},errors:A}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===li.closed}_isJoined(){return this.state===li.joined}_isJoining(){return this.state===li.joining}_isLeaving(){return this.state===li.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&sw.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ya.close,{},t)}_onError(t){this._on(ya.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=li.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=k2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=k2(t.columns,t.old_record)),n}}const hy=()=>{},dp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},U$=[1e3,2e3,5e3,1e4],H$=1e4,W$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class V${constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yv,this.transport=null,this.heartbeatIntervalMs=dp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hy,this.ref=0,this.reconnectTimer=null,this.logger=hy,this.conn=null,this.sendBuffer=[],this.serializer=new L$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Xv.websocket}`,this.httpEndpoint=PP(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=A$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:O$}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ed.connecting:return Ul.Connecting;case Ed.open:return Ul.Open;case Ed.closing:return Ul.Closing;default:return Ul.Closed}}isConnected(){return this.connectionState()===Ul.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new sw(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(R$,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},dp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${i} ${o}`.trim(),s),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ya.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([W$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:N$};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ya.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new jP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,u,h,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Yv,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:dp.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:hy,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:p=>U$[p-1]||H$,this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(p,m)=>m(JSON.stringify(p)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class aw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $r(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class G$ extends aw{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zv extends aw{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const ow=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),q$=()=>Response,Qv=e=>{if(Array.isArray(e))return e.map(n=>Qv(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Qv(r)}),t},Y$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dy=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},X$=(e,t,n)=>Xt(void 0,void 0,void 0,function*(){const r=yield q$();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new G$(dy(i),s,a))}).catch(i=>{t(new Zv(dy(i),i))}):t(new Zv(dy(e),e))}),K$=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(Y$(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function xf(e,t,n,r,i,s){return Xt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,K$(t,r,i,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>X$(u,o,r))})})}function Qd(e,t,n,r){return Xt(this,void 0,void 0,function*(){return xf(e,"GET",t,n,r)})}function fa(e,t,n,r,i){return Xt(this,void 0,void 0,function*(){return xf(e,"POST",t,r,i,n)})}function Jv(e,t,n,r,i){return Xt(this,void 0,void 0,function*(){return xf(e,"PUT",t,r,i,n)})}function Z$(e,t,n,r){return Xt(this,void 0,void 0,function*(){return xf(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lw(e,t,n,r,i){return Xt(this,void 0,void 0,function*(){return xf(e,"DELETE",t,r,i,n)})}class Q${constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Xt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($r(t))return{data:null,error:t};throw t}})}}var NP;class J${constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[NP]="BlobDownloadBuilder",this.promise=null}asStream(){return new Q$(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Xt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($r(t))return{data:null,error:t};throw t}})}}NP=Symbol.toStringTag;const eD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},E2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tD{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=ow(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Xt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},E2),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),u&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(u))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const h=this._removeEmptyFolders(n),d=this._getFinalPath(h),p=yield(t=="PUT"?Jv:fa)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($r(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Xt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let u;const h=Object.assign({upsert:E2.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",h.cacheControl)):(u=r,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType);const p=yield Jv(this.fetch,o.toString(),u,{headers:d});return{data:{path:s,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if($r(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return Xt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield fa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new aw("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}})}update(t,n,r){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Xt(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Xt(this,void 0,void 0,function*(){try{return{data:{path:(yield fa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Xt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield fa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Xt(this,void 0,void 0,function*(){try{const i=yield fa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(t),u=()=>Qd(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new J$(u,this.shouldThrowOnError)}info(t){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Qd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Qv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}})}exists(t){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Z$(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($r(r)&&r instanceof Zv){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&i.push(u);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${h}`)}}}remove(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}list(t,n,r){return Xt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},eD),n),{prefix:t||""});return{data:yield fa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}})}listV2(t,n){return Xt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield fa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const OP="2.79.0",RP={"X-Client-Info":`storage-js/${OP}`};class nD{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RP),n),this.fetch=ow(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Xt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Qd(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}getBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Qd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}createBucket(t){return Xt(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($r(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Xt(this,void 0,void 0,function*(){try{return{data:yield Jv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class rD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RP),n),this.fetch=ow(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}listBuckets(t){return Xt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Qd(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($r(n))return{data:null,error:n};throw n}})}}const cw={"X-Client-Info":`storage-js/${OP}`,"Content-Type":"application/json"};class MP extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Cs(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class fy extends MP{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class iD extends MP{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var T2;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(T2||(T2={}));const uw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},j2=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aD=(e,t,n)=>Xt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new fy(j2(a),i,o))}).catch(()=>{const a=i+"",o=s.statusText||`HTTP ${i} error`;t(new fy(o,i,a))});else{const a=i+"",o=s.statusText||`HTTP ${i} error`;t(new fy(o,i,a))}}else t(new iD(j2(e),e))}),oD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(sD(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function lD(e,t,n,r,i,s){return Xt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,oD(t,r,i,s)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;const h=u.headers.get("content-type");return!h||!h.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>aD(u,o,r))})})}function Es(e,t,n,r,i){return Xt(this,void 0,void 0,function*(){return lD(e,"POST",t,r,i,n)})}class cD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cs(r))return{data:null,error:r};throw r}})}listIndexes(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cs(r))return{data:null,error:r};throw r}})}}class uD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Xt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getVectors(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}listVectors(t){return Xt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Es(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}queryVectors(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Xt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}}class hD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cw),n),this.fetch=uw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}listBuckets(){return Xt(this,arguments,void 0,function*(t={}){try{return{data:yield Es(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Xt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}}class dD extends hD{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new fD(this.url,this.headers,t,this.fetch)}}class fD extends cD{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Xt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Xt(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Xt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Xt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new pD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class pD extends uD{constructor(t,n,r,i,s){super(t,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Xt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Xt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Xt(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Xt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Xt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class mD extends nD{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new tD(this.url,this.headers,t,this.fetch)}get vectors(){return new dD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rD(this.url+"/iceberg",this.headers,this.fetch)}}const gD="2.79.0";let Jh="";typeof Deno<"u"?Jh="deno":typeof document<"u"?Jh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jh="react-native":Jh="node";const yD={"X-Client-Info":`supabase-js-${Jh}/${gD}`},bD={headers:yD},vD={schema:"public"},xD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wD={},_D=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kD=()=>Headers,SD=(e,t,n)=>{const r=_D(n),i=kD();return async(s,a)=>{var o;const u=(o=await t())!==null&&o!==void 0?o:e;let h=new i(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},a),{headers:h}))}};function CD(e){return e.endsWith("/")?e:e+"/"}function ED(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:u,auth:h,realtime:d,global:p}=t,m={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},h),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function TD(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CD(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const LP="2.79.0",Uc=30*1e3,ex=3,py=ex*Uc,jD="http://localhost:9999",AD="supabase.auth.token",PD={"X-Client-Info":`gotrue-js/${LP}`},tx="X-Supabase-Api-Version",IP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ND=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OD=10*60*1e3;class Jd extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Jt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class RD extends Jd{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function MD(e){return Jt(e)&&e.name==="AuthApiError"}class Hl extends Jd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class wl extends Jd{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class la extends wl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LD(e){return Jt(e)&&e.name==="AuthSessionMissingError"}class Sc extends wl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fp extends wl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pp extends wl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ID(e){return Jt(e)&&e.name==="AuthImplicitGrantRedirectError"}class A2 extends wl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nx extends wl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function my(e){return Jt(e)&&e.name==="AuthRetryableFetchError"}class P2 extends wl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class rx extends wl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),N2=` 	
\r=`.split(""),$D=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<N2.length;t+=1)e[N2[t].charCodeAt(0)]=-2;for(let t=0;t<Gm.length;t+=1)e[Gm[t].charCodeAt(0)]=t;return e})();function O2(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Gm[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Gm[r]),t.queuedBits-=6}}function $P(e,t,n){const r=$D[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function R2(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{FD(a,r,n)};for(let a=0;a<e.length;a+=1)$P(e.charCodeAt(a),i,s);return t.join("")}function DD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zD(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}DD(r,t)}}function FD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Nu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)$P(e.charCodeAt(i),n,r);return new Uint8Array(t)}function BD(e){const t=[];return zD(e,n=>t.push(n)),new Uint8Array(t)}function Xl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>O2(i,n,r)),O2(null,n,r),t.join("")}function UD(e){return Math.round(Date.now()/1e3)+e}function HD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const $i=()=>typeof window<"u"&&typeof document<"u",jl={tested:!1,writable:!1},DP=()=>{if(!$i())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jl.tested)return jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),jl.tested=!0,jl.writable=!0}catch{jl.tested=!0,jl.writable=!1}return jl.writable};function WD(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const zP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),VD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Al=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$o=async(e,t)=>{await e.removeItem(t)};class Yg{constructor(){this.promise=new Yg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Yg.promiseConstructor=Promise;function gy(e){const t=e.split(".");if(t.length!==3)throw new rx("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!ND.test(t[r]))throw new rx("JWT not in base64url format");return{header:JSON.parse(R2(t[0])),payload:JSON.parse(R2(t[1])),signature:Nu(t[2]),raw:{header:t[0],payload:t[1]}}}async function GD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qD(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function YD(e){return("0"+e.toString(16)).substr(-2)}function XD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,YD).join("")}async function KD(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function ZD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await KD(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cc(e,t,n=!1){const r=XD();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Hc(e,`${t}-code-verifier`,i);const s=await ZD(r);return[s,r===s?"plain":"s256"]}const QD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JD(e){const t=e.headers.get(tx);if(!t||!t.match(QD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ez(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function tz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ec(e){if(!nz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yy(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rz(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function M2(e){return JSON.parse(JSON.stringify(e))}const Il=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iz=[502,503,504];async function L2(e){var t;if(!VD(e))throw new nx(Il(e),0);if(iz.includes(e.status))throw new nx(Il(e),e.status);let n;try{n=await e.json()}catch(s){throw new Hl(Il(s),s)}let r;const i=JD(e);if(i&&i.getTime()>=IP["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new P2(Il(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new la}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new P2(Il(n),e.status,n.weak_password.reasons);throw new RD(Il(n),e.status||500,r)}const sz=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function cn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[tx]||(s[tx]=IP["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await az(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function az(e,t,n,r,i,s){const a=sz(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(u){throw console.error(u),new nx(Il(u),0)}if(o.ok||await L2(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(u){await L2(u)}}function ca(e){var t;let n=null;cz(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=UD(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function I2(e){const t=ca(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function oz(e){return{data:e,error:null}}function lz(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=sh(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},u=Object.assign({},a);return{data:{properties:o,user:u},error:null}}function $2(e){return e}function cz(e){return e.access_token&&e.refresh_token&&e.expires_in}const by=["global","local","others"];class uz{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=zP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=by[0]){if(by.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${by.join(", ")}`);try{return await cn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await cn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=sh(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await cn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Jt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xo})}catch(n){if(Jt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,u;try{const h={nextPage:null,lastPage:0,total:0},d=await cn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:$2});if(d.error)throw d.error;const p=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);h[`${C}Page`]=w}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Jt(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Ec(t);try{return await cn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xo})}catch(n){if(Jt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ec(t);try{return await cn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Xo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ec(t);try{return await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ec(t.userId);try{const{data:n,error:r}=await cn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ec(t.userId),Ec(t.id);try{return{data:await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,a,o,u;try{const h={nextPage:null,lastPage:0,total:0},d=await cn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:$2});if(d.error)throw d.error;const p=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);h[`${C}Page`]=w}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(Jt(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await cn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await cn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await cn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}}function D2(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Tc={debug:!!(globalThis&&DP()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class FP extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hz extends FP{}async function dz(e,t,n){Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new hz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Tc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function fz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function BP(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function pz(e){return parseInt(e,16)}function mz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function gz(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:u,resources:h,scheme:d,uri:p,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=BP(e.address),v=d?`${d}://${r}`:r,w=e.statement?`${e.statement}
`:"",C=`${v} wants you to sign in with your Ethereum account:
${g}

${w}`;let x=`URI: ${p}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),u&&(x+=`
Request ID: ${u}`),h){let k=`
Resources:`;for(const A of h){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);k+=`
- ${A}`}x+=k}return`${C}
${x}`}class ri extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class qm extends ri{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function yz({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ri({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ri({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ri({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ri({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ri({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ri({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ri({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ri({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(UP(a)){if(s.rp.id!==a)return new ri({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ri({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ri({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function bz({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ri({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ri({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(UP(r)){if(n.rpId!==r)return new ri({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ri({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class vz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const xz=new vz;function wz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=sh(e,["challenge","user","excludeCredentials"]),s=Nu(t).buffer,a=Object.assign(Object.assign({},n),{id:Nu(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const h=r[u];o.excludeCredentials[u]=Object.assign(Object.assign({},h),{id:Nu(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function _z(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=sh(e,["challenge","allowCredentials"]),i=Nu(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Nu(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function kz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Xl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Xl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Sz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Xl(new Uint8Array(i.authenticatorData)),clientDataJSON:Xl(new Uint8Array(i.clientDataJSON)),signature:Xl(new Uint8Array(i.signature)),userHandle:i.userHandle?Xl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function UP(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function z2(){var e,t;return!!($i()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Cz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new qm("Browser returned unexpected credential type",t)}:{data:null,error:new qm("Empty credential response",t)}}catch(t){return{data:null,error:yz({error:t,options:e})}}}async function Ez(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new qm("Browser returned unexpected credential type",t)}:{data:null,error:new qm("Empty credential response",t)}}catch(t){return{data:null,error:bz({error:t,options:e})}}}const Tz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},jz={userVerification:"preferred",hints:["security-key"]};function Ym(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(t(a)){const o=r[s];t(o)?r[s]=Ym(o,a):r[s]=Ym(a)}else r[s]=a}return r}function Az(e,t){return Ym(Tz,e,t||{})}function Pz(e,t){return Ym(jz,e,t||{})}class Nz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:o};const u=i??xz.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=Az(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:p}=await Cz({publicKey:h,signal:u});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const h=Pz(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:p}=await Ez(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:u}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new Hl("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Jd("rpId is required for WebAuthn authentication")};try{if(!z2())return{data:null,error:new Hl("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:u}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new Hl("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Jd("rpId is required for WebAuthn registration")};try{if(!z2())return{data:null,error:new Hl("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:u,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:h}}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new Hl("Unexpected error in register",a)}}}}fz();const Oz={url:jD,storageKey:AD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function F2(e,t,n){return await n()}const jc={};class ef{get jwks(){var t,n;return(n=(t=jc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){jc[this.storageKey]=Object.assign(Object.assign({},jc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=jc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jc[this.storageKey]=Object.assign(Object.assign({},jc[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ef.nextInstanceID,ef.nextInstanceID+=1,this.instanceID>0&&$i()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Oz),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new uz({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=zP(i.fetch),this.lock=i.lock||F2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:$i()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=dz:this.lock=F2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Nz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:DP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=D2(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=D2(this.memoryStorage)),$i()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${LP}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if($i()&&(n=WD(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),$i()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ID(s)){const u=(t=s.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Jt(n)?this._returnResult({error:n}):this._returnResult({error:new Hl("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ca}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const u=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:d,password:p,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Cc(this.storage,this.storageKey)),s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:ca})}else if("phone"in t){const{phone:d,password:p,options:m}=t;s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ca})}else throw new fp("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const u=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:I2})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:I2})}else throw new fp("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Sc;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,a,o,u,h,d,p,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:w,wallet:C,statement:x,options:k}=t;let A;if($i())if(typeof C=="object")A=C;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")A=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const j=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),I=await A.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=BP(I[0]);let U=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const R=await A.request({method:"eth_chainId"});U=pz(R)}const D={domain:j.host,address:E,statement:x,uri:j.href,version:"1",chainId:U,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=gz(D),v=await A.request({method:"personal_sign",params:[mz(g),E]})}try{const{data:w,error:C}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ca});if(C)throw C;if(!w||!w.session||!w.user){const x=new Sc;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:C})}catch(w){if(Jt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,i,s,a,o,u,h,d,p,m,g;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:C,wallet:x,statement:k,options:A}=t;let j;if($i())if(typeof x=="object")j=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))j=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const I=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const E=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),k?{statement:k}:null));let U;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")U=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)U=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)v=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),w=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${I.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=A==null?void 0:A.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=A==null?void 0:A.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((a=A==null?void 0:A.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((o=A==null?void 0:A.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((h=A==null?void 0:A.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((p=(d=A==null?void 0:A.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...A.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const E=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:C,error:x}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Xl(w)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ca});if(x)throw x;if(!C||!C.session||!C.user){const k=new Sc;return this._returnResult({data:{user:null,session:null},error:k})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:x})}catch(C){if(Jt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(t){const n=await Al(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ca});if(await $o(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Sc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ca}),{data:u,error:h}=o;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const d=new Sc;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:h})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:u}=t;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Cc(this.storage,this.storageKey));const{error:p}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:u}=t,{data:h,error:d}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:d})}throw new fp("You must provide either an email or phone number.")}catch(o){if(Jt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await cn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ca});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,h=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(Jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Cc(this.storage,this.storageKey));const o=await cn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:oz});return this._returnResult(o)}catch(s){if(Jt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new la;const{error:i}=await cn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Jt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new fp("You must provide either an email or phone number and a type")}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Al(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<py:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Al(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=yy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=rz(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xo}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new la}:await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Xo})})}catch(n){if(Jt(n))return LD(n)&&(await this._removeSession(),await $o(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new la;const a=i.session;let o=null,u=null;this.flowType==="pkce"&&t.email!=null&&([o,u]=await Cc(this.storage,this.storageKey));const{data:h,error:d}=await cn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:u}),jwt:a.access_token,xform:Xo});if(d)throw d;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(Jt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new la;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=gy(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:u}=await this._getUser(t.access_token);if(u)throw u;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Jt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new la;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!$i())throw new pp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new A2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new A2("No code detected.");const{data:k,error:A}=await this._exchangeCodeForSession(t.code);if(A)throw A;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:u,token_type:h}=t;if(!s||!o||!a||!h)throw new pp("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(o);let m=d+p;u&&(m=parseInt(u));const g=m-d;g*1e3<=Uc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const v=m-p;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:w,error:C}=await this._getUser(s);if(C)throw C;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:a,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(Jt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Al(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(MD(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await $o(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=HD(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Cc(this.storage,this.storageKey,!0));try{return await cn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Jt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,u,h,d;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await cn(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return $i()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Jt(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:u,access_token:h,nonce:d}=t,p=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:u,access_token:h,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ca}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Sc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(Jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await cn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qD(async i=>(i>0&&await GD(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await cn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ca})),(i,s)=>{const a=200*Math.pow(2,i);return s&&my(s)&&Date.now()+a-r<Uc})}catch(r){if(this._debug(n,"error",r),Jt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),$i()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Al(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Al(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Hc(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:yy()}else if(i&&!i.user&&!i.user){const a=await Al(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await $o(this.storage,this.storageKey+"-user"),await Hc(this.storage,this.storageKey,i)):i.user=yy()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<py;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${py}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),my(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new la;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new la;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),Jt(s)){const a={data:null,error:s};return my(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Hc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=M2(i);await Hc(this.storage,this.storageKey,s)}else{const i=M2(n);await Hc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await $o(this.storage,this.storageKey),await $o(this.storage,this.storageKey+"-code-verifier"),await $o(this.storage,this.storageKey+"-user"),this.userStorage&&await $o(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&$i()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Uc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Uc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Uc}ms, refresh threshold is ${ex} ticks`),i<=ex&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof FP)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$i()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Cc(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await cn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:h}=await cn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?kz(t.webauthn.credential_response):Sz(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:u}=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:u}))})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:wz(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:_z(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=gy(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const h=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await cn(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new la})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new la});const a=await cn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&$i()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new la});const a=await cn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&$i()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+OD>i)return r;const{data:s,error:a}=await cn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:u}}=gy(r);n!=null&&n.allowExpired||ez(s.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:a},error:null}}const d=tz(i.alg),p=await crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,a,BD(`${o}.${u}`)))throw new rx("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}}ef.nextInstanceID=0;const Rz=ef;class Mz extends Rz{constructor(t){super(t)}}class Lz{constructor(t,n,r){var i,s,a;this.supabaseUrl=t,this.supabaseKey=n;const o=TD(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,h={db:vD,realtime:wD,auth:Object.assign(Object.assign({},xD),{storageKey:u}),global:bD},d=ED(r??{},h);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=SD(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new j$(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new mD(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new C$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:o,lock:u,debug:h,throwOnError:d},p,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mz({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:o,lock:u,debug:h,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new V$(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Iz=(e,t,n)=>new Lz(e,t,n);function $z(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}$z()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const B2={DRAFTIFY:"/api/studio-draftify",GEOMETRIC_GENERATE:"/api/studio-generate-geometric"},U2={URL:"https://okakomwfikxmwllvliva.supabase.co",ANON_KEY:""},H2={AUTH_SESSION:"studio_auth_session"},Wl={BLEND_MODE_ENABLED:!1},hi=Iz(U2.URL,U2.ANON_KEY),xa={async signIn(e,t){const{data:n,error:r}=await hi.auth.signInWithPassword({email:e,password:t});if(r)throw r;return localStorage.setItem(H2.AUTH_SESSION,JSON.stringify(n.session)),n},async signOut(){await hi.auth.signOut(),localStorage.removeItem(H2.AUTH_SESSION)},async getSession(){const{data:e}=await hi.auth.getSession();return e.session},async updatePassword(e){const{data:t,error:n}=await hi.auth.updateUser({password:e});if(n)throw n;return await hi.auth.updateUser({data:{password_setup_complete:!0}}),t},onAuthStateChange(e){return hi.auth.onAuthStateChange(e)}};async function Xg(){var n,r;const e=await hi.auth.getSession(),t=(r=(n=e==null?void 0:e.data)==null?void 0:n.session)==null?void 0:r.access_token;if(!t)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async function Xm(e){const t=await Xg(),n=await fetch("/api/designs/save",{method:"POST",headers:t,body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to save your design. Please check your connection and try again.")}return n.json()}async function Km({project_id:e,limit:t=50,offset:n=0,search:r}={}){const i=await Xg(),s=new URLSearchParams;e&&s.append("project_id",e),s.append("limit",t),s.append("offset",n),r&&s.append("search",r);const a=await fetch(`/api/designs/list?${s}`,{method:"GET",headers:i});if(!a.ok){const o=await a.json();throw new Error(o.error||"Unable to load your designs. Please refresh the page and try again.")}return a.json()}async function wf(e){const t=await Xg(),n=await fetch(`/api/designs/by-id?id=${e}`,{method:"GET",headers:t});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to open this design. It may have been deleted or you may not have permission to view it.")}return n.json()}async function Dz(e){const t=await Xg(),n=await fetch(`/api/designs/by-id?id=${e}`,{method:"DELETE",headers:t});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to delete this design. Please check your connection and try again.")}return n.json()}class zz extends Te.Component{constructor(n){super(n);Uf(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?c.jsxs("div",{className:"error-boundary",children:[c.jsxs("div",{className:"error-content",children:[c.jsx("h1",{children:"Something went wrong"}),c.jsx("p",{children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),c.jsxs("div",{className:"error-actions",children:[c.jsx("button",{onClick:this.handleReset,className:"btn-primary",children:"Try Again"}),c.jsx("button",{onClick:()=>window.location.reload(),className:"btn-secondary",children:"Refresh Page"})]}),!1]}),c.jsx("style",{jsx:!0,children:`
            .error-boundary {
              min-height: 100vh;
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 2rem;
              background: #f9fafb;
            }

            .error-content {
              max-width: 500px;
              text-align: center;
              background: white;
              padding: 3rem;
              border-radius: 12px;
              box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            h1 {
              color: #1e4a7a;
              margin: 0 0 1rem 0;
              font-size: 1.75rem;
            }

            p {
              color: #6b7280;
              margin: 0 0 2rem 0;
              line-height: 1.6;
            }

            .error-actions {
              display: flex;
              gap: 1rem;
              justify-content: center;
            }

            .btn-primary,
            .btn-secondary {
              padding: 0.75rem 1.5rem;
              border-radius: 6px;
              font-weight: 500;
              cursor: pointer;
              transition: all 0.2s;
              border: none;
            }

            .btn-primary {
              background: #ff6b35;
              color: white;
            }

            .btn-primary:hover {
              background: #e55a2b;
              transform: translateY(-1px);
            }

            .btn-secondary {
              background: white;
              color: #374151;
              border: 1px solid #d1d5db;
            }

            .btn-secondary:hover {
              background: #f9fafb;
            }

            .error-details {
              margin-top: 2rem;
              text-align: left;
              font-size: 0.875rem;
            }

            .error-details summary {
              cursor: pointer;
              color: #6b7280;
              margin-bottom: 0.5rem;
            }

            .error-details pre {
              background: #f3f4f6;
              padding: 1rem;
              border-radius: 4px;
              overflow-x: auto;
              font-size: 0.75rem;
              color: #dc2626;
            }
          `})]}):this.props.children}}const Fz="modulepreload",Bz=function(e){return"/"+e},W2={},Uz=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Bz(u),u in W2)return;W2[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Fz,h||(p.as="script"),p.crossOrigin="",p.href=u,o&&p.setAttribute("nonce",o),document.head.appendChild(p),h)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},V2=e=>{let t;const n=new Set,r=(h,d)=>{const p=typeof h=="function"?h(t):h;if(!Object.is(p,t)){const m=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,m))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=t=e(r,i,o);return o},Hz=e=>e?V2(e):V2,Wz=e=>e;function Vz(e,t=Wz){const n=Te.useSyncExternalStore(e.subscribe,Te.useCallback(()=>t(e.getState()),[e,t]),Te.useCallback(()=>t(e.getInitialState()),[e,t]));return Te.useDebugValue(n),n}const G2=e=>{const t=Hz(e),n=r=>Vz(t,r);return Object.assign(n,t),n},HP=e=>e?G2(e):G2,q2={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},tf=new Map,mp=e=>{const t=tf.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Gz=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=tf.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return tf.set(n.name,i),{type:"tracked",store:e,...i}},qz=(e,t)=>{if(t===void 0)return;const n=tf.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&tf.delete(e))},Yz=e=>{var t,n;if(!e)return;const r=e.split(`
`),i=r.findIndex(a=>a.includes("api.setState"));if(i<0)return;const s=((t=r[i+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(s))==null?void 0:n[1]},Xz=(e,t={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:a,store:o,...u}=t;let h;try{h=(s??(q2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return e(n,r,i);const{connection:d,...p}=Gz(o,h,u);let m=!0;i.setState=(w,C,x)=>{const k=n(w,C);if(!m)return k;const A=x===void 0?{type:a||Yz(new Error().stack)||"anonymous"}:typeof x=="string"?{type:x}:x;return o===void 0?(d==null||d.send(A,r()),k):(d==null||d.send({...A,type:`${o}/${A.type}`},{...mp(u.name),[o]:i.getState()}),k)},i.devtools={cleanup:()=>{d&&typeof d.unsubscribe=="function"&&d.unsubscribe(),qz(u.name,o)}};const g=(...w)=>{const C=m;m=!1,n(...w),m=C},v=e(i.setState,r,i);if(p.type==="untracked"?d==null||d.init(v):(p.stores[p.store]=i,d==null||d.init(Object.fromEntries(Object.entries(p.stores).map(([w,C])=>[w,w===p.store?v:C.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let w=!1;const C=i.dispatch;i.dispatch=(...x)=>{(q2?"production":void 0)!=="production"&&x[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),C(...x)}}return d.subscribe(w=>{var C;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return vy(w.payload,x=>{if(x.type==="__setState"){if(o===void 0){g(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const k=x.state[o];if(k==null)return;JSON.stringify(i.getState())!==JSON.stringify(k)&&g(k);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(x)});case"DISPATCH":switch(w.payload.type){case"RESET":return g(v),o===void 0?d==null?void 0:d.init(i.getState()):d==null?void 0:d.init(mp(u.name));case"COMMIT":if(o===void 0){d==null||d.init(i.getState());return}return d==null?void 0:d.init(mp(u.name));case"ROLLBACK":return vy(w.state,x=>{if(o===void 0){g(x),d==null||d.init(i.getState());return}g(x[o]),d==null||d.init(mp(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return vy(w.state,x=>{if(o===void 0){g(x);return}JSON.stringify(i.getState())!==JSON.stringify(x[o])&&g(x[o])});case"IMPORT_STATE":{const{nextLiftedState:x}=w.payload,k=(C=x.computedStates.slice(-1)[0])==null?void 0:C.state;if(!k)return;g(o===void 0?k:k[o]),d==null||d.send(null,x);return}case"PAUSE_RECORDING":return m=!m}return}}),v},WP=Xz,vy=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function VP(e){let t=e%2147483647;return t<=0&&(t+=2147483646),function(){return t=t*16807%2147483647,(t-1)/2147483646}}function Y2(e,t,n){const r=VP(n),i=[],s=.4,a=.5,o=.5;for(let u=0;u<e;u++){const h=u/e*Math.PI*2-Math.PI/2,d=(r()-.5)*.4*t,p=h+d,m=1+(r()-.5)*t*.8,g=s*m,v=a+g*Math.cos(p),w=o+g*Math.sin(p),C=.35/e*(1+t*(r()-.5)),x=p+Math.PI/2,k=(r()-.5)*.3*t,A=x+Math.PI+k,j=x+k;i.push({x:v,y:w,handleIn:{x:Math.cos(A)*C,y:Math.sin(A)*C},handleOut:{x:Math.cos(j)*C,y:Math.sin(j)*C}})}return i}function Kz(e,t,n){if(!e||e.length<3)return Zz(t,n);const r=[],i=e.length;for(let s=0;s<i;s++){const a=e[s],o=e[(s+1)%i],u=a.x*t,h=a.y*n,d=o.x*t,p=o.y*n,m=u+a.handleOut.x*t,g=h+a.handleOut.y*n,v=d+o.handleIn.x*t,w=p+o.handleIn.y*n;s===0&&r.push(`M ${u.toFixed(2)},${h.toFixed(2)}`),r.push(`C ${m.toFixed(2)},${g.toFixed(2)} ${v.toFixed(2)},${w.toFixed(2)} ${d.toFixed(2)},${p.toFixed(2)}`)}return r.push("Z"),r.join(" ")}function Zz(e,t){const n=e/2,r=t/2,i=n,s=r;return`M ${i-n},${s} A ${n},${r} 0 1,1 ${i+n},${s} A ${n},${r} 0 1,1 ${i-n},${s} Z`}function Qz(){const n=[];for(let a=0;a<8;a++){const o=a/8*Math.PI*2-Math.PI/2,u=.5+.4*Math.cos(o),h=.5+.4*Math.sin(o),d=o+Math.PI/2;n.push({x:u,y:h,handleIn:{x:Math.cos(d+Math.PI)*.2,y:Math.sin(d+Math.PI)*.2},handleOut:{x:Math.cos(d)*.2,y:Math.sin(d)*.2}})}return n}const Zm={organic:{name:"Organic",description:"Smooth, gentle curves like a pebble",minPoints:6,maxPoints:8,blobinessMin:.15,blobinessMax:.25,handleLengthFactor:.4,radiusVariation:.15},splashy:{name:"Splashy",description:"Irregular edges, some spikes like paint splatter",minPoints:10,maxPoints:12,blobinessMin:.3,blobinessMax:.5,handleLengthFactor:.25,radiusVariation:.35},cloudy:{name:"Cloudy",description:"Soft bumps, fluffy cloud-like appearance",minPoints:8,maxPoints:10,blobinessMin:.2,blobinessMax:.3,handleLengthFactor:.5,radiusVariation:.2},rocky:{name:"Rocky",description:"Angular variations, irregular stone-like edges",minPoints:8,maxPoints:12,blobinessMin:.25,blobinessMax:.4,handleLengthFactor:.2,radiusVariation:.3}};function xy(e,t){const n=Zm[e]||Zm.organic,r=VP(t),i=Math.floor(r()*(n.maxPoints-n.minPoints+1))+n.minPoints,s=n.blobinessMin+r()*(n.blobinessMax-n.blobinessMin),a=[],o=.4,u=.5,h=.5;for(let d=0;d<i;d++){const p=d/i*Math.PI*2-Math.PI/2,m=(r()-.5)*.4*s,g=p+m,v=1+(r()-.5)*n.radiusVariation*2,w=o*v,C=u+w*Math.cos(g),x=h+w*Math.sin(g),A=n.handleLengthFactor/i*(.8+r()*.4),j=g+Math.PI/2,I=(r()-.5)*.3*s,E=j+Math.PI+I,U=j+I;a.push({x:C,y:x,handleIn:{x:Math.cos(E)*A,y:Math.sin(E)*A},handleOut:{x:Math.cos(U)*A,y:Math.sin(U)*A}})}return a}function Jz(e,t,n,r){return{x:n?.5-(e-.5):e,y:r?.5-(t-.5):t}}function eF(e,t,n,r){return{x:n?-e:e,y:r?-t:t}}function GP(e,t,n,r=4){const i=[{index:e,mirrorX:!1,mirrorY:!1,rotationAngle:0}];if(n==="none"||!n)return i;if(n==="horizontal"){const s=(t-e)%t;return s!==e&&i.push({index:s,mirrorX:!0,mirrorY:!1,rotationAngle:0}),i}if(n==="vertical"){const s=(Math.floor(t/2)-e+t)%t;return s!==e&&i.push({index:s,mirrorX:!1,mirrorY:!0,rotationAngle:0}),i}if(n==="radial"){for(let s=1;s<r;s++){const a=Math.round(e+s*t/r)%t;if(a!==e){const o=s*2*Math.PI/r;i.push({index:a,mirrorX:!1,mirrorY:!1,rotationAngle:o})}}return i}return i}function tF(e,t,n,r,i,s=4){if(i==="none"||!i)return e.map((o,u)=>u!==t?o:{...o,x:n,y:r});const a=GP(t,e.length,i,s);return e.map((o,u)=>{const h=a.find(p=>p.index===u);if(!h)return o;if(h.rotationAngle!==0){const g=n-.5,v=r-.5,w=Math.cos(h.rotationAngle),C=Math.sin(h.rotationAngle);return{...o,x:.5+g*w-v*C,y:.5+g*C+v*w}}const d=Jz(n,r,h.mirrorX,h.mirrorY);return{...o,x:d.x,y:d.y}})}function nF(e,t,n,r,i,s,a=4){if(s==="none"||!s)return e.map((u,h)=>h!==t?u:{...u,[n]:{x:r,y:i}});const o=GP(t,e.length,s,a);return e.map((u,h)=>{const d=o.find(v=>v.index===h);if(!d)return u;let p=n,m=r,g=i;if(d.rotationAngle!==0){const v=Math.cos(d.rotationAngle),w=Math.sin(d.rotationAngle);m=r*v-i*w,g=r*w+i*v}else{const v=eF(r,i,d.mirrorX,d.mirrorY);m=v.x,g=v.y}return{...u,[p]:{x:m,y:g}}})}function qP(e,t,n,r=!0,i=!1){if(!e||e.length<2)return"";const s=[],a=e.length;for(let o=0;o<a;o++){const u=e[o],h=o===a-1,d=r?e[(o+1)%a]:h?null:e[o+1],p=u.x*t,m=u.y*n;if(o===0&&s.push(`M ${p.toFixed(2)},${m.toFixed(2)}`),!d)continue;const g=d.x*t,v=d.y*n;if(i&&u.handleOut&&d.handleIn){const w=p+u.handleOut.x*t,C=m+u.handleOut.y*n,x=g+d.handleIn.x*t,k=v+d.handleIn.y*n;s.push(`C ${w.toFixed(2)},${C.toFixed(2)} ${x.toFixed(2)},${k.toFixed(2)} ${g.toFixed(2)},${v.toFixed(2)}`)}else s.push(`L ${g.toFixed(2)},${v.toFixed(2)}`)}return r&&s.push("Z"),s.join(" ")}function wy(e,t=!0,n=.3){if(!e||e.length<2)return e;const r=e.length,i=e.map(s=>({...s,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}));for(let s=0;s<r;s++){const a=t?e[(s-1+r)%r]:s>0?e[s-1]:e[s];e[s];const o=t?e[(s+1)%r]:s<r-1?e[s+1]:e[s],u=o.x-a.x,h=o.y-a.y,d=n*.5;!t&&s===0?(i[s].handleIn={x:0,y:0},i[s].handleOut={x:u*d,y:h*d}):!t&&s===r-1?(i[s].handleIn={x:-u*d,y:-h*d},i[s].handleOut={x:0,y:0}):(i[s].handleIn={x:-u*d,y:-h*d},i[s].handleOut={x:u*d,y:h*d})}return i}function rF(e,t,n,r){const i={x:n,y:r,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},s=[...e];return s.splice(t,0,i),s}function iF(e,t,n=3){if(e.length<=n)return null;const r=[...e];return r.splice(t,1),r}function sF(e){switch(e){case"l-shape":return[{x:0,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:.5,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:.5,y:.5,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:.5,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:0,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}];case"custom":default:return[{x:0,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:0,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}]}}function X2(e,t={}){switch(e){case"l-shape":{const n=t.cutWidth??.6,r=t.cutHeight??.4;return[{x:0,y:0},{x:n,y:0},{x:n,y:r},{x:1,y:r},{x:1,y:1},{x:0,y:1}]}case"u-shape":{const n=t.cutStart??.35,r=t.cutEnd??.65,i=t.cutHeight??.4;return[{x:0,y:0},{x:n,y:0},{x:n,y:i},{x:r,y:i},{x:r,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}case"t-shape":{const n=t.stemStart??.3,r=t.stemEnd??.7,i=t.stemHeight??.4;return[{x:0,y:0},{x:1,y:0},{x:1,y:i},{x:r,y:i},{x:r,y:1},{x:n,y:1},{x:n,y:i},{x:0,y:i}]}case"rectangle":default:return null}}function aF(e){switch(e){case"l-shape":return{cutWidth:.6,cutHeight:.4};case"u-shape":return{cutStart:.35,cutEnd:.65,cutHeight:.4};case"t-shape":return{stemStart:.3,stemEnd:.7,stemHeight:.4};default:return{}}}const _y={surface:{width_mm:5e4,length_mm:5e4,color:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"},boundary:{type:"rectangle",controlPoints:null}},courts:{},selectedCourtId:null,tracks:{},selectedTrackId:null,motifs:{},selectedMotifId:null,shapes:{},selectedShapeId:null,texts:{},selectedTextId:null,exclusionZones:{},selectedExclusionZoneId:null,groups:{},selectedGroupId:null,selectedElementIds:[],clipboard:null,editingGroupId:null,elementOrder:[],customMarkings:[],backgroundZones:[],designName:"Untitled Design",designDescription:"",designTags:[],history:[],historyIndex:-1,maxHistory:50,showCourtLibrary:!0,showPropertiesPanel:!0,propertiesPanelUserClosed:!1,showColorEditor:!1,snapToGrid:!0,gridSize_mm:100,zoom:1,mobileLibraryOpen:!1,mobilePropertiesOpen:!1,mobileColoursOpen:!1,mobileActiveTab:"courts",standaloneMode:!1,standaloneDesignId:null,pathDrawingMode:!1,activePathId:null,isSaving:!1,lastSaved:null,isDirty:!1,isInteracting:!1,lastSavedHash:null,autosaveTimer:null},rn=HP(WP((e,t)=>({..._y,setSurfaceDimensions:(n,r)=>{e(i=>({surface:{...i.surface,width_mm:n,length_mm:r}})),t().addToHistory()},setSurfaceColor:n=>{e(r=>({surface:{...r.surface,color:n}})),t().addToHistory()},setSurfaceBoundaryPreset:n=>{const r=aF(n),i=X2(n,r);e(s=>({surface:{...s.surface,boundary:{type:n,controlPoints:i,params:r}}})),t().addToHistory()},updateBoundaryParams:n=>{var o;const r=t(),i=(o=r.surface.boundary)==null?void 0:o.type;if(!i||i==="rectangle"||i==="custom")return;const s={...r.surface.boundary.params,...n},a=X2(i,s);e(u=>({surface:{...u.surface,boundary:{...u.surface.boundary,controlPoints:a,params:s}}})),t().addToHistory()},setSurfaceBoundaryPoints:n=>{e(r=>({surface:{...r.surface,boundary:{type:"custom",controlPoints:n}}})),t().addToHistory()},resetSurfaceBoundary:()=>{e(n=>({surface:{...n.surface,boundary:{type:"rectangle",controlPoints:null}}})),t().addToHistory()},addCourt:(n,r)=>{const i=`court-${Date.now()}`,s=d=>({RH01:{tpv_code:"RH01",hex:"#A5362F",name:"Standard Red"},RH02:{tpv_code:"RH02",hex:"#E21F2F",name:"Bright Red"},RH10:{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},RH11:{tpv_code:"RH11",hex:"#3BB44A",name:"Bright Green"},RH12:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"},RH20:{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},RH21:{tpv_code:"RH21",hex:"#493D8C",name:"Purple"},RH22:{tpv_code:"RH22",hex:"#47AFE3",name:"Light Blue"},RH23:{tpv_code:"RH23",hex:"#039DC4",name:"Azure"},RH26:{tpv_code:"RH26",hex:"#00A6A3",name:"Turquoise"},RH30:{tpv_code:"RH30",hex:"#E4C4AA",name:"Standard Beige"},RH31:{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},RH32:{tpv_code:"RH32",hex:"#8B5F3C",name:"Brown"},RH40:{tpv_code:"RH40",hex:"#E5A144",name:"Mustard Yellow"},RH41:{tpv_code:"RH41",hex:"#FFD833",name:"Bright Yellow"},RH50:{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},RH60:{tpv_code:"RH60",hex:"#59595B",name:"Dark Grey"},RH61:{tpv_code:"RH61",hex:"#939598",name:"Light Grey"},RH65:{tpv_code:"RH65",hex:"#D9D9D6",name:"Pale Grey"},RH70:{tpv_code:"RH70",hex:"#231F20",name:"Black"},RH90:{tpv_code:"RH90",hex:"#E8457E",name:"Funky Pink"}})[d]||{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},a={};if(r.defaultLineColor){const d=s(r.defaultLineColor);r.markings.forEach(p=>{a[p.id]=d})}const o={};if(r.defaultLineColor&&r.zones){const d=s(r.defaultLineColor);r.zones.forEach(p=>{o[p.id]=d})}const u=r.defaultSurfaceColor?s(r.defaultSurfaceColor):null,h={id:i,templateId:n,template:r,position:{x:t().surface.width_mm/2-r.dimensions.width_mm/2,y:t().surface.length_mm/2-r.dimensions.length_mm/2},rotation:0,scale:1,lineColorOverrides:a,zoneColorOverrides:o,courtSurfaceColor:u};e(d=>({courts:{...d.courts,[i]:h},elementOrder:[...d.elementOrder,i],selectedCourtId:i,selectedTrackId:null})),t().addToHistory()},removeCourt:n=>{const{[n]:r,...i}=t().courts;e(s=>({courts:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedCourtId:s.selectedCourtId===n?null:s.selectedCourtId})),t().addToHistory()},updateCourtPosition:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],position:r}}}))},updateCourtRotation:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],rotation:r}}}))},updateCourtScale:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],scale:r}}}))},duplicateCourt:n=>{const r=t().courts[n];if(!r)return;const i=`court-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({courts:{...a.courts,[i]:s},elementOrder:[...a.elementOrder,i],selectedCourtId:i,selectedTrackId:null})),t().addToHistory()},duplicateTrack:n=>{const r=t().tracks[n];if(!r)return;const i=`track-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({tracks:{...a.tracks,[i]:s},elementOrder:[...a.elementOrder,i],selectedTrackId:i,selectedCourtId:null})),t().addToHistory()},renameElement:(n,r)=>{n.startsWith("court-")?e(i=>({courts:{...i.courts,[n]:{...i.courts[n],customName:r}}})):n.startsWith("track-")?e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],customName:r}}})):n.startsWith("motif-")?e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],customName:r}}})):n.startsWith("shape-")?e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],customName:r}}})):n.startsWith("text-")?e(i=>({texts:{...i.texts,[n]:{...i.texts[n],customName:r}}})):n.startsWith("exclusion-")&&e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],customName:r}}})),t().addToHistory()},toggleElementLock:n=>{n.startsWith("court-")?e(r=>{var i;return{courts:{...r.courts,[n]:{...r.courts[n],locked:!((i=r.courts[n])!=null&&i.locked)}}}}):n.startsWith("track-")?e(r=>{var i;return{tracks:{...r.tracks,[n]:{...r.tracks[n],locked:!((i=r.tracks[n])!=null&&i.locked)}}}}):n.startsWith("motif-")?e(r=>{var i;return{motifs:{...r.motifs,[n]:{...r.motifs[n],locked:!((i=r.motifs[n])!=null&&i.locked)}}}}):n.startsWith("shape-")?e(r=>{var i;return{shapes:{...r.shapes,[n]:{...r.shapes[n],locked:!((i=r.shapes[n])!=null&&i.locked)}}}}):n.startsWith("text-")?e(r=>{var i;return{texts:{...r.texts,[n]:{...r.texts[n],locked:!((i=r.texts[n])!=null&&i.locked)}}}}):n.startsWith("exclusion-")?e(r=>{var i;return{exclusionZones:{...r.exclusionZones,[n]:{...r.exclusionZones[n],locked:!((i=r.exclusionZones[n])!=null&&i.locked)}}}}):n.startsWith("group-")&&e(r=>{var i;return{groups:{...r.groups,[n]:{...r.groups[n],locked:!((i=r.groups[n])!=null&&i.locked)}}}}),t().addToHistory()},toggleElementVisibility:n=>{n.startsWith("court-")?e(r=>{var i;return{courts:{...r.courts,[n]:{...r.courts[n],visible:((i=r.courts[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("track-")?e(r=>{var i;return{tracks:{...r.tracks,[n]:{...r.tracks[n],visible:((i=r.tracks[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("motif-")?e(r=>{var i;return{motifs:{...r.motifs,[n]:{...r.motifs[n],visible:((i=r.motifs[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("shape-")?e(r=>{var i;return{shapes:{...r.shapes,[n]:{...r.shapes[n],visible:((i=r.shapes[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("text-")?e(r=>{var i;return{texts:{...r.texts,[n]:{...r.texts[n],visible:((i=r.texts[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("exclusion-")&&e(r=>{var i;return{exclusionZones:{...r.exclusionZones,[n]:{...r.exclusionZones[n],visible:((i=r.exclusionZones[n])==null?void 0:i.visible)===!1}}}}),t().addToHistory()},setLineColor:(n,r,i)=>{e(s=>({courts:{...s.courts,[n]:{...s.courts[n],lineColorOverrides:{...s.courts[n].lineColorOverrides,[r]:i}}}})),t().addToHistory()},setZoneColor:(n,r,i)=>{e(s=>({courts:{...s.courts,[n]:{...s.courts[n],zoneColorOverrides:{...s.courts[n].zoneColorOverrides,[r]:i}}}})),t().addToHistory()},resetCourtColors:n=>{e(r=>({courts:{...r.courts,[n]:{...r.courts[n],lineColorOverrides:{},zoneColorOverrides:{}}}})),t().addToHistory()},setCourtSurfaceColor:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],courtSurfaceColor:r}}})),t().addToHistory()},selectCourt:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedCourtId:n,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedCourtId:n,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectCourt:()=>{e({selectedCourtId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},setElementOrder:n=>{e({elementOrder:n})},moveElementUp:n=>{const{elementOrder:r}=t(),i=r.indexOf(n);if(i<r.length-1){const s=[...r];[s[i],s[i+1]]=[s[i+1],s[i]],e({elementOrder:s}),t().addToHistory()}},moveElementDown:n=>{const{elementOrder:r}=t(),i=r.indexOf(n);if(i>0){const s=[...r];[s[i],s[i-1]]=[s[i-1],s[i]],e({elementOrder:s}),t().addToHistory()}},bringToFront:n=>{const{elementOrder:r}=t(),i=r.filter(s=>s!==n);i.push(n),e({elementOrder:i}),t().addToHistory()},sendToBack:n=>{const{elementOrder:r}=t(),i=r.filter(s=>s!==n);i.unshift(n),e({elementOrder:i}),t().addToHistory()},addTrack:(n,r)=>{const i=`track-${Date.now()}`,s=t().surface,a=s.width_mm,o=s.length_mm,u=x=>({RH01:{tpv_code:"RH01",hex:"#A5362F",name:"Standard Red"},RH31:{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},RH30:{tpv_code:"RH30",hex:"#E4C4AA",name:"Standard Beige"},RH20:{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},RH12:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"}})[x]||{tpv_code:x,hex:"#A5362F",name:"Standard Red"},h=r.defaultTrackSurfaceColor?u(r.defaultTrackSurfaceColor):u("RH01"),d=u("RH31"),p=r.trackType==="straight";let m,g,v;const w={enabled:!1,depth_mm:800,lineWidth_mm:50,style:"staggered",direction:"counterclockwise",startPosition:0};if(p){const x=r.parameters.numLanes,k=r.parameters.laneWidth_mm,A=x*k,j=Math.max(a,o)*.9,I=r.parameters.height_mm||1e5,E=Math.min(I,j);m={...r.parameters,width_mm:A,height_mm:E,cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},laneWidth_mm:k,startingBoxes:{...w,...r.parameters.startingBoxes}},v=90,g={x:a/2-A/2,y:o/2-E/2}}else{const x=a*.9,k=o*.9,A=r.parameters.width_mm||25e3,j=r.parameters.height_mm||15e3,I=x/A,E=k/j,U=Math.min(I,E),D=r.parameters.cornerRadius||{topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},R={topLeft:D.topLeft*U,topRight:D.topRight*U,bottomLeft:D.bottomLeft*U,bottomRight:D.bottomRight*U};m={...r.parameters,width_mm:x,height_mm:k,cornerRadius:R,laneWidth_mm:r.parameters.laneWidth_mm,startingBoxes:{...w,...r.parameters.startingBoxes}},v=0,g={x:a/2-x/2,y:o/2-k/2}}const C={id:i,templateId:n,template:r,position:g,rotation:v,parameters:m,trackSurfaceColor:h,laneSurfaceColors:[],trackLineColor:d};e(x=>({tracks:{...x.tracks,[i]:C},elementOrder:[...x.elementOrder,i],selectedTrackId:i,selectedCourtId:null})),t().addToHistory()},removeTrack:n=>{const{[n]:r,...i}=t().tracks;e(s=>({tracks:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedTrackId:s.selectedTrackId===n?null:s.selectedTrackId})),t().addToHistory()},updateTrackParameters:(n,r)=>{e(i=>{var p;const s=i.tracks[n];if(!s)return i;const a=s.parameters,o={...a,...r},u=((p=s.template)==null?void 0:p.trackType)==="straight";let h=s.position,d=s.laneSurfaceColors||[];if(r.numLanes!==void 0&&r.numLanes!==a.numLanes&&r.numLanes<a.numLanes&&(d=d.slice(0,r.numLanes)),u&&r.numLanes!==void 0&&r.numLanes!==a.numLanes){const m=a.laneWidth_mm,g=a.numLanes*m,v=r.numLanes*m;o.width_mm=v;const w=s.position.x+g/2,C=s.position.y+a.height_mm/2;h={x:w-v/2,y:C-o.height_mm/2}}return{tracks:{...i.tracks,[n]:{...s,parameters:o,position:h,laneSurfaceColors:d}}}}),t().addToHistory()},updateTrackPosition:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],position:r}}}))},updateTrackRotation:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],rotation:r}}}))},setTrackSurfaceColor:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],trackSurfaceColor:r}}})),t().addToHistory()},setTrackLineColor:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],trackLineColor:r}}})),t().addToHistory()},setLaneSurfaceColor:(n,r,i)=>{e(s=>{const a=s.tracks[n];if(!a)return s;const o=[...a.laneSurfaceColors||[]];for(;o.length<r;)o.push(null);return o[r-1]=i,{tracks:{...s.tracks,[n]:{...a,laneSurfaceColors:o}}}}),t().addToHistory()},resetLaneSurfaceColors:n=>{e(r=>({tracks:{...r.tracks,[n]:{...r.tracks[n],laneSurfaceColors:[]}}})),t().addToHistory()},selectTrack:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedTrackId:n,selectedCourtId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedTrackId:n,selectedCourtId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectTrack:()=>{e({selectedTrackId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},addMotif:(n,r,i,s,a,o=null,u={})=>{const h=`motif-${Date.now()}`,d=t().surface,p={id:h,type:"motif",sourceDesignId:n,sourceDesignName:r,sourceThumbnailUrl:o,solidSvgContent:u.solidSvgContent||i,blendSvgContent:u.blendSvgContent||null,hasBothVersions:u.hasBothVersions||!1,viewMode:"solid",svgContent:u.solidSvgContent||i,originalWidth_mm:s,originalHeight_mm:a,position:{x:d.width_mm/2-s/2,y:d.length_mm/2-a/2},rotation:0,scale:1};e(m=>({motifs:{...m.motifs,[h]:p},elementOrder:[...m.elementOrder,h],selectedMotifId:h,selectedCourtId:null,selectedTrackId:null})),t().addToHistory()},removeMotif:n=>{const{[n]:r,...i}=t().motifs;e(s=>({motifs:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedMotifId:s.selectedMotifId===n?null:s.selectedMotifId})),t().addToHistory()},updateMotifPosition:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],position:r}}}))},updateMotifRotation:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],rotation:r}}}))},updateMotifScale:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],scale:r}}}))},setMotifViewMode:(n,r)=>{const i=t().motifs[n];if(!i)return;const s=r==="blend"?i.blendSvgContent||i.solidSvgContent:i.solidSvgContent||i.blendSvgContent;e(a=>({motifs:{...a.motifs,[n]:{...a.motifs[n],viewMode:r,svgContent:s}}})),t().addToHistory()},duplicateMotif:n=>{const r=t().motifs[n];if(!r)return;const i=`motif-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({motifs:{...a.motifs,[i]:s},elementOrder:[...a.elementOrder,i],selectedMotifId:i,selectedCourtId:null,selectedTrackId:null})),t().addToHistory()},refreshMotif:async n=>{const r=t().motifs[n];if(!r)return{success:!1,error:"Motif not found"};try{const{fetchMotifFromDesign:i}=await Uz(async()=>{const{fetchMotifFromDesign:h}=await Promise.resolve().then(()=>u9);return{fetchMotifFromDesign:h}},void 0),s=await i(r.sourceDesignId),o=(r.viewMode||"solid")==="blend"?s.blendSvgContent||s.solidSvgContent:s.solidSvgContent||s.blendSvgContent;let u=r.scale||1;return r.originalWidth_mm&&s.originalWidth_mm&&(u=r.originalWidth_mm*(r.scale||1)/s.originalWidth_mm),e(h=>({motifs:{...h.motifs,[n]:{...h.motifs[n],solidSvgContent:s.solidSvgContent,blendSvgContent:s.blendSvgContent,hasBothVersions:s.hasBothVersions,svgContent:o,sourceThumbnailUrl:s.sourceThumbnailUrl,sourceDesignName:s.sourceDesignName,originalWidth_mm:s.originalWidth_mm,originalHeight_mm:s.originalHeight_mm,scale:u}},lastModified:Date.now()})),t().addToHistory(),{success:!0}}catch(i){return console.error("[MOTIF] Failed to refresh:",i),{success:!1,error:i.message}}},selectMotif:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedMotifId:n,selectedCourtId:null,selectedTrackId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedMotifId:n,selectedCourtId:null,selectedTrackId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectMotif:()=>{e({selectedMotifId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},addShape:(n="rectangle")=>{const r=`shape-${Date.now()}`,i=t().surface,s=t().shapes,a={rectangle:{sides:4,aspectLocked:!1,width:3e3,height:2e3},square:{sides:4,aspectLocked:!0,width:2e3,height:2e3},circle:{sides:32,aspectLocked:!0,width:2e3,height:2e3},triangle:{sides:3,aspectLocked:!0,width:2e3,height:2e3},pentagon:{sides:5,aspectLocked:!0,width:2e3,height:2e3},hexagon:{sides:6,aspectLocked:!0,width:2e3,height:2e3},polygon:{sides:6,aspectLocked:!0,width:2e3,height:2e3},star:{sides:5,aspectLocked:!0,width:2e3,height:2e3,starMode:!0,innerRadius:.5}},o=[{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},{tpv_code:"RH21",hex:"#493D8C",name:"Purple"},{tpv_code:"RH41",hex:"#FFD833",name:"Bright Yellow"},{tpv_code:"RH26",hex:"#00A6A3",name:"Turquoise"},{tpv_code:"RH02",hex:"#E21F2F",name:"Bright Red"},{tpv_code:"RH90",hex:"#E8457E",name:"Funky Pink"}],u=Object.keys(s).length,h=o[u%o.length];if(n==="blob"){const m=Math.floor(Math.random()*1e5),g="organic",v=xy(g,m),w={id:r,type:"shape",shapeType:"blob",blobStyle:g,seed:m,controlPoints:v,editPointsVisible:!1,numPoints:v.length,blobiness:.2,symmetryMode:"none",radialSymmetryCount:4,width_mm:2e3,height_mm:2e3,position:{x:i.width_mm/2-1e3,y:i.length_mm/2-1e3},rotation:0,fillColor:h,strokeEnabled:!1,strokeColor:null,strokeWidth_mm:50,aspectLocked:!1,locked:!1,visible:!0};e(C=>({shapes:{...C.shapes,[r]:w},elementOrder:[...C.elementOrder,r],selectedShapeId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory();return}const d=a[n]||a.rectangle,p={id:r,type:"shape",shapeType:"polygon",sides:d.sides,width_mm:d.width,height_mm:d.height,cornerRadius:0,starMode:d.starMode||!1,innerRadius:d.innerRadius||.5,position:{x:i.width_mm/2-d.width/2,y:i.length_mm/2-d.height/2},rotation:0,fillColor:h,strokeEnabled:!1,strokeColor:null,strokeWidth_mm:50,aspectLocked:d.aspectLocked,locked:!1,visible:!0};e(m=>({shapes:{...m.shapes,[r]:p},elementOrder:[...m.elementOrder,r],selectedShapeId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory()},removeShape:n=>{const{[n]:r,...i}=t().shapes;e(s=>({shapes:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedShapeId:s.selectedShapeId===n?null:s.selectedShapeId})),t().addToHistory()},updateShapePosition:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],position:r}}}))},updateShapeDimensions:(n,r,i)=>{e(s=>({shapes:{...s.shapes,[n]:{...s.shapes[n],width_mm:r,height_mm:i}}}))},updateShapeSides:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s)return i;const a=Math.max(3,Math.min(32,r));let o=s.width_mm,u=s.height_mm;if(a!==4){const h=Math.min(s.width_mm,s.height_mm);o=h,u=h}return{shapes:{...i.shapes,[n]:{...s,sides:a,width_mm:o,height_mm:u,aspectLocked:a!==4}}}}),t().addToHistory()},updateShapeCornerRadius:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],cornerRadius:Math.max(0,Math.min(100,r))}}})),t().addToHistory()},setShapeStarMode:(n,r)=>{e(i=>{const s=i.shapes[n];return{shapes:{...i.shapes,[n]:{...s,starMode:r,sides:r&&s.sides<3?3:s.sides,innerRadius:s.innerRadius??.5}}}}),t().addToHistory()},setShapeInnerRadius:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],innerRadius:Math.max(.1,Math.min(.9,r))}}})),t().addToHistory()},updateShapeRotation:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],rotation:r}}}))},setShapeFillColor:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],fillColor:r}}})),t().addToHistory()},setShapeStroke:(n,r,i=null,s=50)=>{e(a=>({shapes:{...a.shapes,[n]:{...a.shapes[n],strokeEnabled:r,strokeColor:i,strokeWidth_mm:s}}})),t().addToHistory()},setShapeAspectLock:(n,r)=>{e(i=>{const s=i.shapes[n];return{shapes:{...i.shapes,[n]:{...s,aspectLocked:r}}}}),t().addToHistory()},updateBlobPoints:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=Y2(r,s.blobiness,s.seed);return{shapes:{...i.shapes,[n]:{...s,numPoints:r,controlPoints:a}}}}),t().addToHistory()},updateBlobiness:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=Y2(s.numPoints,r,s.seed);return{shapes:{...i.shapes,[n]:{...s,blobiness:r,controlPoints:a}}}}),t().addToHistory()},randomizeBlob:n=>{e(r=>{const i=r.shapes[n];if(!i||i.shapeType!=="blob")return r;const s=Math.floor(Math.random()*1e5),a=i.blobStyle||"organic",o=xy(a,s);return{shapes:{...r.shapes,[n]:{...i,seed:s,controlPoints:o,numPoints:o.length}}}}),t().addToHistory()},setBlobStyle:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=xy(r,s.seed);return{shapes:{...i.shapes,[n]:{...s,blobStyle:r,controlPoints:a,numPoints:a.length}}}}),t().addToHistory()},setEditPointsVisible:(n,r)=>{e(i=>{const s=i.shapes[n];return!s||s.shapeType!=="blob"&&s.shapeType!=="path"?i:{shapes:{...i.shapes,[n]:{...s,editPointsVisible:r}}}})},resetBlob:n=>{e(r=>{const i=r.shapes[n];if(!i||i.shapeType!=="blob")return r;const s=Qz();return{shapes:{...r.shapes,[n]:{...i,blobiness:0,controlPoints:s}}}}),t().addToHistory()},updateBlobControlPoint:(n,r,i,s)=>{e(a=>{const o=a.shapes[n];if(!o||o.shapeType!=="blob"||!o.controlPoints)return a;const u=Math.max(0,Math.min(1,i)),h=Math.max(0,Math.min(1,s)),d=tF(o.controlPoints,r,u,h,o.symmetryMode||"none",o.radialSymmetryCount||4);return{shapes:{...a.shapes,[n]:{...o,controlPoints:d}}}})},updateBlobHandle:(n,r,i,s,a)=>{e(o=>{const u=o.shapes[n];if(!u||u.shapeType!=="blob"||!u.controlPoints)return o;const h=nF(u.controlPoints,r,i,s,a,u.symmetryMode||"none",u.radialSymmetryCount||4);return{shapes:{...o.shapes,[n]:{...u,controlPoints:h}}}})},commitBlobEdit:()=>{t().addToHistory()},setBlobSymmetry:(n,r,i=4)=>{e(s=>{const a=s.shapes[n];return!a||a.shapeType!=="blob"?s:{shapes:{...s.shapes,[n]:{...a,symmetryMode:r,radialSymmetryCount:i}}}}),t().addToHistory()},applyBlobPreset:(n,r)=>{const i=BLOB_PRESETS[r];!i||!i.controlPoints||(e(s=>{const a=s.shapes[n];return!a||a.shapeType!=="blob"?s:{shapes:{...s.shapes,[n]:{...a,numPoints:i.controlPoints.length,blobiness:0,controlPoints:JSON.parse(JSON.stringify(i.controlPoints))}}}}),t().addToHistory())},duplicateShape:n=>{const r=t().shapes[n];if(!r)return;const i=`shape-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({shapes:{...a.shapes,[i]:s},elementOrder:[...a.elementOrder,i],selectedShapeId:i,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory()},selectShape:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectShape:()=>{e({selectedShapeId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},startPathDrawing:()=>{const n=`shape-path-${Date.now()}`,r=t().surface,i=t().shapes,s=[{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},{tpv_code:"RH21",hex:"#493D8C",name:"Purple"}],a=Object.keys(i).length,o=s[a%s.length],u={id:n,type:"shape",shapeType:"path",controlPoints:[],closed:!0,smooth:!1,editPointsVisible:!1,width_mm:r.width_mm,height_mm:r.length_mm,position:{x:0,y:0},rotation:0,fillColor:o,strokeEnabled:!0,strokeColor:{tpv_code:"RH70",hex:"#A8A9AD",name:"Light Grey"},strokeWidth_mm:20,aspectLocked:!1,locked:!1,visible:!0};e({pathDrawingMode:!0,activePathId:n,shapes:{...t().shapes,[n]:u},elementOrder:[...t().elementOrder,n],selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null})},addPointToPath:(n,r)=>{const{activePathId:i,shapes:s,pathDrawingMode:a}=t();if(!a||!i)return;const o=s[i];if(!o||o.shapeType!=="path")return;const u={x:n,y:r,handleIn:{x:0,y:0},handleOut:{x:0,y:0}};e({shapes:{...s,[i]:{...o,controlPoints:[...o.controlPoints,u]}}})},finishPath:()=>{const{activePathId:n,shapes:r,pathDrawingMode:i}=t();if(!i||!n)return;const s=r[n];if(!s)return;if(s.controlPoints.length<3){t().cancelPath();return}const a=s.controlPoints;let o=1/0,u=1/0,h=-1/0,d=-1/0;for(const j of a)o=Math.min(o,j.x),u=Math.min(u,j.y),h=Math.max(h,j.x),d=Math.max(d,j.y);const p=h-o||1,m=d-u||1,g=.05,v=a.map(j=>({...j,x:g+(j.x-o)/p*(1-2*g),y:g+(j.y-u)/m*(1-2*g)})),w=t().surface,C=p*w.width_mm,x=m*w.length_mm,k=o*w.width_mm,A=u*w.length_mm;e({pathDrawingMode:!1,activePathId:null,shapes:{...r,[n]:{...s,controlPoints:v,width_mm:Math.max(500,C),height_mm:Math.max(500,x),position:{x:k,y:A},strokeEnabled:!1}}}),t().addToHistory()},cancelPath:()=>{const{activePathId:n,shapes:r,elementOrder:i}=t();if(!n){e({pathDrawingMode:!1});return}const s={...r};delete s[n],e({pathDrawingMode:!1,activePathId:null,shapes:s,elementOrder:i.filter(a=>a!==n),selectedShapeId:null})},setPathClosed:(n,r)=>{const i=t().shapes[n];!i||i.shapeType!=="path"||(e({shapes:{...t().shapes,[n]:{...i,closed:r}}}),t().addToHistory())},setPathSmooth:(n,r)=>{const i=t().shapes[n];if(!i||i.shapeType!=="path")return;let s=i.controlPoints;r&&i.controlPoints.length>=2?s=wy(i.controlPoints,i.closed,.3):s=i.controlPoints.map(a=>({...a,handleIn:{x:0,y:0},handleOut:{x:0,y:0}})),e({shapes:{...t().shapes,[n]:{...i,smooth:r,controlPoints:s}}}),t().addToHistory()},updatePathControlPoint:(n,r,i,s)=>{const a=t().shapes[n];if(!a||a.shapeType!=="path")return;const o=[...a.controlPoints];o[r]={...o[r],x:i,y:s},e({shapes:{...t().shapes,[n]:{...a,controlPoints:o}}})},updatePathHandle:(n,r,i,s,a)=>{const o=t().shapes[n];if(!o||o.shapeType!=="path")return;const u=[...o.controlPoints];u[r]={...u[r],[i]:{x:s,y:a}},e({shapes:{...t().shapes,[n]:{...o,controlPoints:u}}})},addPointToExistingPath:(n,r,i,s)=>{const a=t().shapes[n];if(!a||a.shapeType!=="path")return;const o=rF(a.controlPoints,r,i,s),u=a.smooth?wy(o,a.closed,.3):o;e({shapes:{...t().shapes,[n]:{...a,controlPoints:u}}}),t().addToHistory()},removePointFromPath:(n,r)=>{const i=t().shapes[n];if(!i||i.shapeType!=="path")return;const s=i.closed?3:2,a=iF(i.controlPoints,r,s);if(!a){console.log("[STORE] Cannot remove point - minimum reached");return}const o=i.smooth?wy(a,i.closed,.3):a;e({shapes:{...t().shapes,[n]:{...i,controlPoints:o}}}),t().addToHistory()},commitPathEdit:()=>{t().addToHistory()},addText:()=>{const{surface:n}=t(),r=`text-${Date.now()}`,i={id:r,type:"text",content:"Text",fontFamily:"Open Sans, sans-serif",fontSize_mm:500,scale_x:1,scale_y:1,fontWeight:"normal",fontStyle:"normal",textAlign:"left",position:{x:n.width_mm/2,y:n.length_mm/2},rotation:0,fillColor:{tpv_code:"RH70",hex:"#1C1C1C",name:"Black"},strokeColor:null,strokeWidth_mm:0,locked:!1,visible:!0,customName:null};e(s=>({texts:{...s.texts,[r]:i},elementOrder:[...s.elementOrder,r],selectedTextId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,showPropertiesPanel:!0})),t().addToHistory()},removeText:n=>{e(r=>{const{[n]:i,...s}=r.texts;return{texts:s,elementOrder:r.elementOrder.filter(a=>a!==n),selectedTextId:r.selectedTextId===n?null:r.selectedTextId}}),t().addToHistory()},selectText:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedTextId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedExclusionZoneId:null}:{selectedTextId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectText:()=>{e({selectedTextId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},updateTextContent:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],content:r}}}))},updateTextPosition:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],position:r}}}))},updateTextScale:(n,r,i)=>{e(s=>({texts:{...s.texts,[n]:{...s.texts[n],scale_x:Math.max(.01,r),scale_y:Math.max(.01,i)}}}))},updateTextFontSize:(n,r)=>{if(!t().texts[n])return;const a=r/500;e(o=>({texts:{...o.texts,[n]:{...o.texts[n],scale_x:Math.max(.01,a),scale_y:Math.max(.01,a)}}})),t().addToHistory()},updateTextFont:(n,r,i,s)=>{e(a=>({texts:{...a.texts,[n]:{...a.texts[n],fontFamily:r,fontWeight:i,fontStyle:s}}})),t().addToHistory()},updateTextAlign:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],textAlign:r}}})),t().addToHistory()},updateTextRotation:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],rotation:r}}}))},setTextFillColor:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],fillColor:r}}})),t().addToHistory()},setTextStrokeColor:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],strokeColor:r}}})),t().addToHistory()},updateTextStrokeWidth:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],strokeWidth_mm:r}}}))},duplicateText:n=>{const{texts:r}=t(),i=r[n];if(!i)return;const s=`text-${Date.now()}`,a={...i,id:s,position:{x:i.position.x+500,y:i.position.y+500},customName:i.customName?`${i.customName} (copy)`:null};e(o=>({texts:{...o.texts,[s]:a},elementOrder:[...o.elementOrder,s],selectedTextId:s,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null})),t().addToHistory()},addExclusionZone:(n="rectangle")=>{const r=`exclusion-${Date.now()}`,i=t().surface,s={rectangle:{shapeType:"polygon",sides:4,width:3e3,height:2e3},square:{shapeType:"polygon",sides:4,width:2e3,height:2e3},circle:{shapeType:"polygon",sides:32,width:2e3,height:2e3},"l-shape":{shapeType:"path",width:4e3,height:3e3},custom:{shapeType:"path",width:3e3,height:3e3}},a=s[n]||s.rectangle,o={id:r,type:"exclusion",shapeType:a.shapeType,sides:a.sides||4,width_mm:a.width,height_mm:a.height,position:{x:i.width_mm/2-a.width/2,y:i.length_mm/2-a.height/2},rotation:0,cornerRadius:0,locked:!1,visible:!0,customName:null,controlPoints:a.shapeType==="path"?sF(n):null};e(u=>({exclusionZones:{...u.exclusionZones,[r]:o},selectedExclusionZoneId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null})),t().addToHistory()},removeExclusionZone:n=>{const{[n]:r,...i}=t().exclusionZones;e(s=>({exclusionZones:i,selectedExclusionZoneId:s.selectedExclusionZoneId===n?null:s.selectedExclusionZoneId})),t().addToHistory()},updateExclusionZonePosition:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],position:r}}}))},updateExclusionZoneDimensions:(n,r,i)=>{e(s=>({exclusionZones:{...s.exclusionZones,[n]:{...s.exclusionZones[n],width_mm:r,height_mm:i}}}))},updateExclusionZoneRotation:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],rotation:r}}}))},updateExclusionZoneCornerRadius:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],cornerRadius:Math.max(0,Math.min(100,r))}}})),t().addToHistory()},selectExclusionZone:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedExclusionZoneId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null}:{selectedExclusionZoneId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,showPropertiesPanel:!0})},deselectExclusionZone:()=>{e({selectedExclusionZoneId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},duplicateExclusionZone:n=>{const r=t().exclusionZones[n];if(!r)return;const i=`exclusion-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500},customName:r.customName?`${r.customName} (copy)`:null};e(a=>({exclusionZones:{...a.exclusionZones,[i]:s},selectedExclusionZoneId:i,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null})),t().addToHistory()},calculateGroupBounds:n=>{var u,h,d,p,m,g;const r=t();let i=1/0,s=1/0,a=-1/0,o=-1/0;for(const v of n)if(v.startsWith("shape-")){const w=r.shapes[v];if(w){const C=w.position.x,x=w.position.y;i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+w.width_mm),o=Math.max(o,x+w.height_mm)}}else if(v.startsWith("text-")){const w=r.texts[v];if(w){const C=w.fontSize_mm||500,x=w.scale_x||1,k=w.scale_y||1,A=w.content||"Text",j=C*.5,E=A.length*j*x,U=C*k;let D,R;const X=w.textAlign||"left";X==="center"?(D=w.position.x-E/2,R=w.position.x+E/2):X==="right"?(D=w.position.x-E,R=w.position.x):(D=w.position.x,R=w.position.x+E);const ce=w.position.y-U,ie=w.position.y+C*.2*k;i=Math.min(i,D),s=Math.min(s,ce),a=Math.max(a,R),o=Math.max(o,ie)}}else if(v.startsWith("court-")){const w=r.courts[v];if(w){const C=w.position.x,x=w.position.y,k=w.scale||1,A=(((h=(u=w.template)==null?void 0:u.dimensions)==null?void 0:h.width_mm)||0)*k,j=(((p=(d=w.template)==null?void 0:d.dimensions)==null?void 0:p.length_mm)||0)*k;i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+A),o=Math.max(o,x+j)}}else if(v.startsWith("track-")){const w=r.tracks[v];if(w){const C=w.position.x,x=w.position.y,k=w.scale||1,A=(((m=w.parameters)==null?void 0:m.width_mm)||5e3)*k,j=(((g=w.parameters)==null?void 0:g.height_mm)||1e4)*k;i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+A),o=Math.max(o,x+j)}}else if(v.startsWith("motif-")){const w=r.motifs[v];if(w){const C=w.position.x,x=w.position.y,k=(w.originalWidth_mm||1e3)*(w.scale||1),A=(w.originalHeight_mm||1e3)*(w.scale||1);i=Math.min(i,C),s=Math.min(s,x),a=Math.max(a,C+k),o=Math.max(o,x+A)}}return i===1/0?{x:0,y:0,width:0,height:0}:{x:i,y:s,width:a-i,height:o-s}},createGroup:(n,r={})=>{if(!n||n.length<2)return null;const i=`group-${Date.now()}`,s=t().calculateGroupBounds(n),a=t().elementOrder,o=[...n].sort((h,d)=>{const p=a.indexOf(h),m=a.indexOf(d);return p-m}),u={id:i,type:"group",childIds:o,compoundType:r.compoundType||null,generatorSeed:r.generatorSeed||null,customName:r.customName||null,locked:!1,visible:!0,bounds:s};return e(h=>{const d=Math.min(...n.map(m=>h.elementOrder.indexOf(m)).filter(m=>m>=0)),p=h.elementOrder.filter(m=>!n.includes(m));return p.splice(d,0,i),{groups:{...h.groups,[i]:u},elementOrder:p,selectedGroupId:i,selectedShapeId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,selectedElementIds:[]}}),t().addToHistory(),i},ungroup:n=>{const r=t().groups[n];r&&(e(i=>{const s=i.elementOrder.indexOf(n),a=i.elementOrder.filter(h=>h!==n);a.splice(s,0,...r.childIds);const{[n]:o,...u}=i.groups;return{groups:u,elementOrder:a,selectedGroupId:null,selectedElementIds:[...r.childIds]}}),t().addToHistory())},selectGroup:n=>{const{propertiesPanelUserClosed:r}=t();e({selectedGroupId:n,selectedShapeId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,editingGroupId:null,selectedElementIds:[],showPropertiesPanel:!r})},deselectGroup:()=>{const n=t().editingGroupId;n&&t().refreshGroupBounds(n),e({selectedGroupId:null,editingGroupId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},enterGroup:n=>{e({editingGroupId:n,selectedGroupId:null})},exitGroup:()=>{const n=t().editingGroupId;n&&(t().refreshGroupBounds(n),e({editingGroupId:null,selectedGroupId:n,selectedShapeId:null}))},updateGroupPosition:(n,r,i)=>{const s=t().groups[n];s&&e(a=>{const o={...a.shapes},u={...a.texts},h={...a.courts},d={...a.tracks},p={...a.motifs};for(const g of s.childIds)g.startsWith("shape-")&&o[g]?o[g]={...o[g],position:{x:o[g].position.x+r,y:o[g].position.y+i}}:g.startsWith("text-")&&u[g]?u[g]={...u[g],position:{x:u[g].position.x+r,y:u[g].position.y+i}}:g.startsWith("court-")&&h[g]?h[g]={...h[g],position:{x:h[g].position.x+r,y:h[g].position.y+i}}:g.startsWith("track-")&&d[g]?d[g]={...d[g],position:{x:d[g].position.x+r,y:d[g].position.y+i}}:g.startsWith("motif-")&&p[g]&&(p[g]={...p[g],position:{x:p[g].position.x+r,y:p[g].position.y+i}});const m={...s.bounds,x:s.bounds.x+r,y:s.bounds.y+i};return{shapes:o,texts:u,courts:h,tracks:d,motifs:p,groups:{...a.groups,[n]:{...s,bounds:m}}}})},commitGroupMove:()=>{t().addToHistory()},updateGroupScale:(n,r,i,s,a=null)=>{const o=t().groups[n];o&&e(u=>{const h={...u.shapes},d={...u.texts},p={...u.courts},m={...u.tracks},g={...u.motifs};for(const w of o.childIds){const C=a==null?void 0:a[w];if(w.startsWith("shape-")){const x=h[w];if(x){const k=(C==null?void 0:C.position)||x.position,A=(C==null?void 0:C.width_mm)||x.width_mm,j=(C==null?void 0:C.height_mm)||x.height_mm,I=k.x-s.x,E=k.y-s.y;h[w]={...x,position:{x:s.x+I*r,y:s.y+E*i},width_mm:A*r,height_mm:j*i}}}else if(w.startsWith("text-")){const x=d[w];if(x){const k=(C==null?void 0:C.position)||x.position,A=(C==null?void 0:C.width_mm)||x.width_mm||1e3,j=(C==null?void 0:C.height_mm)||x.height_mm||500,I=(C==null?void 0:C.fontSize)||x.fontSize||200,E=k.x-s.x,U=k.y-s.y;d[w]={...x,position:{x:s.x+E*r,y:s.y+U*i},width_mm:A*r,height_mm:j*i,fontSize:I*Math.min(r,i)}}}else if(w.startsWith("court-")){const x=p[w];if(x){const k=(C==null?void 0:C.position)||x.position,A=(C==null?void 0:C.scale)||x.scale||1,j=k.x-s.x,I=k.y-s.y,E=r===1?i:i===1?r:Math.min(r,i);p[w]={...x,position:{x:s.x+j*r,y:s.y+I*i},scale:A*E}}}else if(w.startsWith("track-")){const x=m[w];if(x){const k=(C==null?void 0:C.position)||x.position,A=(C==null?void 0:C.scale)||x.scale||1,j=k.x-s.x,I=k.y-s.y,E=r===1?i:i===1?r:Math.min(r,i);m[w]={...x,position:{x:s.x+j*r,y:s.y+I*i},scale:A*E}}}else if(w.startsWith("motif-")){const x=g[w];if(x){const k=(C==null?void 0:C.position)||x.position,A=(C==null?void 0:C.scale)||x.scale||1,j=k.x-s.x,I=k.y-s.y,E=r===1?i:i===1?r:Math.min(r,i);g[w]={...x,position:{x:s.x+j*r,y:s.y+I*i},scale:A*E}}}}const v=t().calculateGroupBounds(o.childIds);return{shapes:h,texts:d,courts:p,tracks:m,motifs:g,groups:{...u.groups,[n]:{...o,bounds:v}}}})},updateGroupRotation:(n,r,i,s=null)=>{const a=t().groups[n];if(!a)return;const o=(u,h,d,p,m)=>{const g=m*Math.PI/180,v=Math.cos(g),w=Math.sin(g),C=u-d,x=h-p;return{x:d+C*v-x*w,y:p+C*w+x*v}};e(u=>{var v,w,C,x,k,A;const h={...u.shapes},d={...u.texts},p={...u.courts},m={...u.tracks},g={...u.motifs};for(const j of a.childIds){const I=s==null?void 0:s[j];if(j.startsWith("shape-")){const E=h[j];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=U.x+(E.width_mm||0)/2,X=U.y+(E.height_mm||0)/2,ce=o(R,X,i.x,i.y,r);h[j]={...E,position:{x:ce.x-(E.width_mm||0)/2,y:ce.y-(E.height_mm||0)/2},rotation:(D+r)%360}}}else if(j.startsWith("text-")){const E=d[j];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=U.x+(E.width_mm||0)/2,X=U.y+(E.height_mm||0)/2,ce=o(R,X,i.x,i.y,r);d[j]={...E,position:{x:ce.x-(E.width_mm||0)/2,y:ce.y-(E.height_mm||0)/2},rotation:(D+r)%360}}}else if(j.startsWith("court-")){const E=p[j];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=E.scale||1,X=(((w=(v=E.template)==null?void 0:v.dimensions)==null?void 0:w.width_mm)||0)*R,ce=(((x=(C=E.template)==null?void 0:C.dimensions)==null?void 0:x.length_mm)||0)*R,ie=U.x+X/2,ge=U.y+ce/2,H=o(ie,ge,i.x,i.y,r);p[j]={...E,position:{x:H.x-X/2,y:H.y-ce/2},rotation:(D+r)%360}}}else if(j.startsWith("track-")){const E=m[j];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=E.scale||1,X=(((k=E.parameters)==null?void 0:k.width_mm)||5e3)*R,ce=(((A=E.parameters)==null?void 0:A.height_mm)||1e4)*R,ie=U.x+X/2,ge=U.y+ce/2,H=o(ie,ge,i.x,i.y,r);m[j]={...E,position:{x:H.x-X/2,y:H.y-ce/2},rotation:(D+r)%360}}}else if(j.startsWith("motif-")){const E=g[j];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=E.scale||1,X=(E.originalWidth_mm||0)*R,ce=(E.originalHeight_mm||0)*R,ie=U.x+X/2,ge=U.y+ce/2,H=o(ie,ge,i.x,i.y,r);g[j]={...E,position:{x:H.x-X/2,y:H.y-ce/2},rotation:(D+r)%360}}}}return{shapes:h,texts:d,courts:p,tracks:m,motifs:g}})},addToSelection:n=>{e(r=>{if(r.selectedElementIds.includes(n))return{selectedElementIds:r.selectedElementIds.filter(a=>a!==n)};let i=[...r.selectedElementIds];const s=r.selectedShapeId||r.selectedTextId||r.selectedCourtId||r.selectedTrackId||r.selectedMotifId||r.selectedExclusionZoneId;return s&&!i.includes(s)&&i.push(s),i.push(n),{selectedElementIds:i,selectedShapeId:null,selectedGroupId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null}})},clearMultiSelection:()=>{e({selectedElementIds:[]})},groupSelected:()=>{const{selectedElementIds:n}=t();n.length<2||t().createGroup(n)},alignElements:n=>{const{selectedElementIds:r,shapes:i,texts:s,courts:a,tracks:o,motifs:u}=t();if(r.length<2)return;const h=k=>{const A=k.fontSize_mm||500,j=k.scale_x||1,I=k.scale_y||1,E=k.content||"Text",U=A*.5,D=E.length*U*j,R=A*I,X=A*1.2*I;let ce=k.position.x;const ie=k.textAlign||"left";return ie==="center"?ce=k.position.x-D/2:ie==="right"&&(ce=k.position.x-D),{x:ce,y:k.position.y-R,width:D,height:X,baselineOffset:R,alignOffset:k.position.x-ce}},d=r.map(k=>{var A,j,I,E,U,D;if(k.startsWith("shape-")){const R=i[k];if(R)return{id:k,type:"shape",x:R.position.x,y:R.position.y,width:R.width_mm||0,height:R.height_mm||0}}if(k.startsWith("text-")){const R=s[k];if(R){const X=h(R);return{id:k,type:"text",...X}}}if(k.startsWith("court-")){const R=a[k];if(R){const X=R.scale||1;return{id:k,type:"court",x:R.position.x,y:R.position.y,width:(((j=(A=R.template)==null?void 0:A.dimensions)==null?void 0:j.width_mm)||0)*X,height:(((E=(I=R.template)==null?void 0:I.dimensions)==null?void 0:E.length_mm)||0)*X}}}if(k.startsWith("track-")){const R=o[k];if(R){const X=R.scale||1;return{id:k,type:"track",x:R.position.x,y:R.position.y,width:(((U=R.parameters)==null?void 0:U.width_mm)||5e3)*X,height:(((D=R.parameters)==null?void 0:D.height_mm)||1e4)*X}}}if(k.startsWith("motif-")){const R=u[k];if(R)return{id:k,type:"motif",x:R.position.x,y:R.position.y,width:(R.originalWidth_mm||1e3)*(R.scale||1),height:(R.originalHeight_mm||1e3)*(R.scale||1)}}return null}).filter(Boolean);if(d.length<2)return;const p=Math.min(...d.map(k=>k.x)),m=Math.max(...d.map(k=>k.x+k.width)),g=Math.min(...d.map(k=>k.y)),v=Math.max(...d.map(k=>k.y+k.height)),w=(p+m)/2,C=(g+v)/2,x={};for(const k of d){let A=k.x,j=k.y;switch(n){case"left":A=p;break;case"center":A=w-k.width/2;break;case"right":A=m-k.width;break;case"top":j=g;break;case"middle":j=C-k.height/2;break;case"bottom":j=v-k.height;break}(A!==k.x||j!==k.y)&&(x[k.id]={x:A,y:j,type:k.type,baselineOffset:k.baselineOffset,alignOffset:k.alignOffset})}e(k=>{const A={...k.shapes},j={...k.texts},I={...k.courts},E={...k.tracks},U={...k.motifs};for(const[D,R]of Object.entries(x))R.type==="shape"&&A[D]?A[D]={...A[D],position:{x:R.x,y:R.y}}:R.type==="text"&&j[D]?j[D]={...j[D],position:{x:R.x+(R.alignOffset||0),y:R.y+(R.baselineOffset||0)}}:R.type==="court"&&I[D]?I[D]={...I[D],position:{x:R.x,y:R.y}}:R.type==="track"&&E[D]?E[D]={...E[D],position:{x:R.x,y:R.y}}:R.type==="motif"&&U[D]&&(U[D]={...U[D],position:{x:R.x,y:R.y}});return{shapes:A,texts:j,courts:I,tracks:E,motifs:U}}),t().addToHistory()},distributeElements:n=>{const{selectedElementIds:r,shapes:i,texts:s,courts:a,tracks:o,motifs:u}=t();if(r.length<3)return;const h=r.map(x=>{var k,A,j,I,E,U;if(x.startsWith("shape-")){const D=i[x];if(D)return{id:x,type:"shape",x:D.position.x,y:D.position.y,width:D.width_mm||0,height:D.height_mm||0}}if(x.startsWith("text-")){const D=s[x];if(D){const R=D.fontSize_mm||500,X=D.scale_x||1,ce=D.scale_y||1,ie=D.content||"Text",ge=D.textAlign||"left",H=R*.5,je=ie.length*H*X,ke=R*ce,Fe=R*1.2*ce;let xe,Me=0;ge==="center"?(xe=D.position.x-je/2,Me=je/2):ge==="right"?(xe=D.position.x-je,Me=je):(xe=D.position.x,Me=0);const _e=D.position.y-ke;return{id:x,type:"text",x:xe,y:_e,width:je,height:Fe,alignOffset:Me,baselineOffset:ke}}}if(x.startsWith("court-")){const D=a[x];if(D){const R=D.scale||1;return{id:x,type:"court",x:D.position.x,y:D.position.y,width:(((A=(k=D.template)==null?void 0:k.dimensions)==null?void 0:A.width_mm)||0)*R,height:(((I=(j=D.template)==null?void 0:j.dimensions)==null?void 0:I.length_mm)||0)*R}}}if(x.startsWith("track-")){const D=o[x];if(D){const R=D.scale||1;return{id:x,type:"track",x:D.position.x,y:D.position.y,width:(((E=D.parameters)==null?void 0:E.width_mm)||5e3)*R,height:(((U=D.parameters)==null?void 0:U.height_mm)||1e4)*R}}}if(x.startsWith("motif-")){const D=u[x];if(D)return{id:x,type:"motif",x:D.position.x,y:D.position.y,width:(D.originalWidth_mm||1e3)*(D.scale||1),height:(D.originalHeight_mm||1e3)*(D.scale||1)}}return null}).filter(Boolean);if(h.length<3)return;const d={},p=n==="horizontal"||n==="center-horizontal",m=n==="center-horizontal"||n==="center-vertical",g=[...h].sort((x,k)=>p?m?x.x+x.width/2-(k.x+k.width/2):x.x-k.x:m?x.y+x.height/2-(k.y+k.height/2):x.y-k.y),v=g[0],w=g[g.length-1],C=g.length;if(m){let x,k;p?(x=v.x+v.width/2,k=w.x+w.width/2):(x=v.y+v.height/2,k=w.y+w.height/2);const A=(k-x)/(C-1);for(let j=0;j<g.length;j++){const I=g[j];let E=I.x,U=I.y;p?E=x+j*A-I.width/2:U=x+j*A-I.height/2,(E!==I.x||U!==I.y)&&(d[I.id]={x:E,y:U,type:I.type,alignOffset:I.alignOffset,baselineOffset:I.baselineOffset})}}else{let x,k;p?(x=w.x+w.width-v.x,k=g.reduce((I,E)=>I+E.width,0)):(x=w.y+w.height-v.y,k=g.reduce((I,E)=>I+E.height,0));const A=(x-k)/(C-1);let j=p?v.x:v.y;for(const I of g){let E=I.x,U=I.y;p?(E=j,j+=I.width+A):(U=j,j+=I.height+A),(E!==I.x||U!==I.y)&&(d[I.id]={x:E,y:U,type:I.type,alignOffset:I.alignOffset,baselineOffset:I.baselineOffset})}}e(x=>{const k={...x.shapes},A={...x.texts},j={...x.courts},I={...x.tracks},E={...x.motifs};for(const[U,D]of Object.entries(d))D.type==="shape"&&k[U]?k[U]={...k[U],position:{x:D.x,y:D.y}}:D.type==="text"&&A[U]?A[U]={...A[U],position:{x:D.x+(D.alignOffset||0),y:D.y+(D.baselineOffset||0)}}:D.type==="court"&&j[U]?j[U]={...j[U],position:{x:D.x,y:D.y}}:D.type==="track"&&I[U]?I[U]={...I[U],position:{x:D.x,y:D.y}}:D.type==="motif"&&E[U]&&(E[U]={...E[U],position:{x:D.x,y:D.y}});return{shapes:k,texts:A,courts:j,tracks:I,motifs:E}}),t().addToHistory()},copySelection:()=>{const{selectedElementIds:n,selectedGroupId:r,groups:i,shapes:s,texts:a}=t();if(r){const h=i[r];if(!h)return;const d=h.childIds.map(p=>s[p]?{type:"shape",data:JSON.parse(JSON.stringify(s[p]))}:a[p]?{type:"text",data:JSON.parse(JSON.stringify(a[p]))}:null).filter(Boolean);e({clipboard:{type:"group",groupData:JSON.parse(JSON.stringify(h)),children:d}});return}if(n.length>0){const h=n.map(d=>s[d]?{type:"shape",data:JSON.parse(JSON.stringify(s[d]))}:a[d]?{type:"text",data:JSON.parse(JSON.stringify(a[d]))}:null).filter(Boolean);e({clipboard:{type:"elements",data:h}});return}const{selectedShapeId:o,selectedTextId:u}=t();o&&s[o]?e({clipboard:{type:"elements",data:[{type:"shape",data:JSON.parse(JSON.stringify(s[o]))}]}}):u&&a[u]&&e({clipboard:{type:"elements",data:[{type:"text",data:JSON.parse(JSON.stringify(a[u]))}]}})},pasteClipboard:()=>{const{clipboard:n}=t();if(!n)return;const r=500;if(n.type==="group"){const i=`group-${Date.now()}`,s=[],a=Date.now();e(o=>{const u={...o.shapes},h={...o.texts};let d=[...o.elementOrder];n.children.forEach((m,g)=>{const v=`${m.type}-${a}-${g}`;s.push(v),m.type==="shape"?u[v]={...m.data,id:v,position:{x:m.data.position.x+r,y:m.data.position.y+r}}:m.type==="text"&&(h[v]={...m.data,id:v,position:{x:m.data.position.x+r,y:m.data.position.y+r}})});const p={...n.groupData,id:i,childIds:s,customName:n.groupData.customName?`${n.groupData.customName} (copy)`:"Group (copy)",bounds:{...n.groupData.bounds,x:n.groupData.bounds.x+r,y:n.groupData.bounds.y+r}};return d.push(i),{shapes:u,texts:h,groups:{...o.groups,[i]:p},elementOrder:d,selectedGroupId:i,selectedShapeId:null,selectedTextId:null,selectedElementIds:[]}})}else{const i=Date.now(),s=[];e(a=>{const o={...a.shapes},u={...a.texts};let h=[...a.elementOrder];return n.data.forEach((d,p)=>{const m=`${d.type}-${i}-${p}`;s.push(m),d.type==="shape"?(o[m]={...d.data,id:m,position:{x:d.data.position.x+r,y:d.data.position.y+r}},h.push(m)):d.type==="text"&&(u[m]={...d.data,id:m,position:{x:d.data.position.x+r,y:d.data.position.y+r}},h.push(m))}),{shapes:o,texts:u,elementOrder:h,selectedElementIds:s.length>1?s:[],selectedShapeId:s.length===1&&n.data[0].type==="shape"?s[0]:null,selectedTextId:s.length===1&&n.data[0].type==="text"?s[0]:null,selectedGroupId:null}})}t().addToHistory()},removeGroup:n=>{t().ungroup(n)},deleteGroupWithChildren:n=>{const r=t().groups[n];r&&(e(i=>{const s={...i.shapes},a={...i.texts},o={...i.courts},u={...i.tracks},h={...i.motifs},d={...i.exclusionZones};for(const v of r.childIds)v.startsWith("shape-")?delete s[v]:v.startsWith("text-")?delete a[v]:v.startsWith("court-")?delete o[v]:v.startsWith("track-")?delete u[v]:v.startsWith("motif-")?delete h[v]:v.startsWith("exclusion-")&&delete d[v];const{[n]:p,...m}=i.groups,g=i.elementOrder.filter(v=>v!==n&&!r.childIds.includes(v));return{shapes:s,texts:a,courts:o,tracks:u,motifs:h,exclusionZones:d,groups:m,elementOrder:g,selectedGroupId:null,selectedShapeId:null}}),t().addToHistory())},refreshGroupBounds:n=>{const r=t().groups[n];if(!r)return;const i=t().calculateGroupBounds(r.childIds);e(s=>({groups:{...s.groups,[n]:{...r,bounds:i}}}))},addCustomMarking:n=>{e(r=>({customMarkings:[...r.customMarkings,{...n,id:`custom-${Date.now()}`}]})),t().addToHistory()},removeCustomMarking:n=>{e(r=>({customMarkings:r.customMarkings.filter(i=>i.id!==n)})),t().addToHistory()},addBackgroundZone:n=>{e(r=>({backgroundZones:[...r.backgroundZones,{...n,id:`zone-${Date.now()}`}]})),t().addToHistory()},removeBackgroundZone:n=>{e(r=>({backgroundZones:r.backgroundZones.filter(i=>i.id!==n)})),t().addToHistory()},setDesignName:n=>{e({designName:n})},setDesignDescription:n=>{e({designDescription:n})},setDesignTags:n=>{e({designTags:n})},addToHistory:()=>{const n=t(),r=JSON.parse(JSON.stringify({surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones}));e(i=>{const s=i.history.slice(0,i.historyIndex+1);return s.push(r),s.length>i.maxHistory&&s.shift(),{history:s,historyIndex:s.length-1}}),t().markDirty()},undo:()=>{const{history:n,historyIndex:r}=t();if(r>0){const i=n[r-1];e({surface:i.surface,courts:i.courts,tracks:i.tracks,motifs:i.motifs,shapes:i.shapes,texts:i.texts,exclusionZones:i.exclusionZones,groups:i.groups,elementOrder:i.elementOrder,customMarkings:i.customMarkings,backgroundZones:i.backgroundZones,historyIndex:r-1})}},redo:()=>{const{history:n,historyIndex:r}=t();if(r<n.length-1){const i=n[r+1];e({surface:i.surface,courts:i.courts,tracks:i.tracks,motifs:i.motifs,shapes:i.shapes,texts:i.texts,exclusionZones:i.exclusionZones,groups:i.groups,elementOrder:i.elementOrder,customMarkings:i.customMarkings,backgroundZones:i.backgroundZones,historyIndex:r+1})}},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().history.length-1,selectDesignForSave:()=>{const n=t();return{surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones,designName:n.designName,designDescription:n.designDescription,designTags:n.designTags}},hashDesignState:n=>{const r=JSON.stringify(n);let i=5381;for(let s=0;s<r.length;s++)i=(i<<5)+i+r.charCodeAt(s);return(i>>>0).toString(36)},markDirty:()=>{e({isDirty:!0}),t().scheduleAutosave()},setInteracting:n=>{e({isInteracting:n})},scheduleAutosave:()=>{const n=t();n.autosaveTimer&&clearTimeout(n.autosaveTimer);const r=setTimeout(()=>{const i=t();if(i.isInteracting){t().scheduleAutosave();return}if(i.isDirty){const s=t().selectDesignForSave(),a=t().hashDesignState(s);a!==i.lastSavedHash?(console.log("[AUTOSAVE] Design changed, would save here"),e({isDirty:!1,lastSavedHash:a,lastSaved:new Date().toISOString()})):e({isDirty:!1})}},15e3);e({autosaveTimer:r})},clearAutosaveTimer:()=>{const n=t().autosaveTimer;n&&(clearTimeout(n),e({autosaveTimer:null}))},getComplexityScore:()=>{const n=t(),r=Object.keys(n.courts).length,i=Object.keys(n.tracks).length,s=Object.keys(n.motifs).length,a=Object.keys(n.shapes).length,o=Object.keys(n.texts).length,u=Object.keys(n.exclusionZones).length,h=r+i+s+a+o+u,d=Object.values(n.shapes).filter(g=>g.type==="path"||g.type==="blob").length,p=n.surface.width_mm*n.surface.length_mm/1e6,m=h+s*3+d*2+Math.floor(p/100);return{score:m,elementCount:h,courtCount:r,trackCount:i,motifCount:s,shapeCount:a,textCount:o,pathCount:d,areaSqM:p,isLarge:m>50,isHuge:m>100}},toggleCourtLibrary:()=>{e(n=>({showCourtLibrary:!n.showCourtLibrary}))},togglePropertiesPanel:()=>{e(n=>({showPropertiesPanel:!n.showPropertiesPanel,propertiesPanelUserClosed:!!n.showPropertiesPanel}))},setShowPropertiesPanel:n=>{e({showPropertiesPanel:n,propertiesPanelUserClosed:!n})},setMobileLibraryOpen:n=>e({mobileLibraryOpen:n}),setMobilePropertiesOpen:n=>e({mobilePropertiesOpen:n}),setMobileColoursOpen:n=>e({mobileColoursOpen:n}),setMobileActiveTab:n=>e({mobileActiveTab:n}),closeMobileSheets:()=>e({mobileLibraryOpen:!1,mobilePropertiesOpen:!1,mobileColoursOpen:!1}),toggleColorEditor:()=>{e(n=>({showColorEditor:!n.showColorEditor}))},toggleSnapToGrid:()=>{e(n=>({snapToGrid:!n.snapToGrid}))},setGridSize:n=>{e({gridSize_mm:n})},setZoom:n=>{e({zoom:Math.max(.25,Math.min(5,n))})},toggleStandaloneMode:()=>{e(n=>({standaloneMode:!n.standaloneMode}))},setStandaloneMode:(n,r=null)=>{e({standaloneMode:n,standaloneDesignId:r})},setSaving:n=>{e({isSaving:n})},setLastSaved:n=>{e({lastSaved:n})},loadDesign:n=>{let r=n.elementOrder;!r&&(n.courtOrder||n.trackOrder)&&(r=[...n.trackOrder||[],...n.courtOrder||[]]),e({surface:n.surface||_y.surface,courts:n.courts||{},tracks:n.tracks||{},motifs:n.motifs||{},shapes:n.shapes||{},texts:n.texts||{},exclusionZones:n.exclusionZones||{},groups:n.groups||{},elementOrder:r||[],customMarkings:n.customMarkings||[],backgroundZones:n.backgroundZones||[],designName:n.name||"Untitled Design",designDescription:n.description||"",designTags:n.tags||[],selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,selectedGroupId:null,editingGroupId:null,history:[],historyIndex:-1}),t().addToHistory()},exportDesignData:()=>{const n=t();return{surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones,name:n.designName,description:n.designDescription,tags:n.designTags}},resetDesign:()=>{e(_y)},hasUnsavedChanges:()=>{const n=t();return Object.keys(n.courts).length>0||Object.keys(n.tracks).length>0||Object.keys(n.motifs).length>0||Object.keys(n.shapes).length>0||Object.keys(n.texts).length>0||Object.keys(n.exclusionZones).length>0}}),{name:"SportsDesignStore"})),K2={inputMode:"prompt",prompt:"",lengthMM:5e3,widthMM:5e3,selectedFileName:null,uploadedFileUrl:null,arMapping:null,result:null,jobId:null,blendRecipes:null,blendSvgUrl:null,colorMapping:null,blendEditedColors:new Map,solidRecipes:null,solidSvgUrl:null,solidColorMapping:null,solidEditedColors:new Map,viewMode:"solid",showFinalRecipes:!1,showSolidSummary:!1,regionOverrides:new Map,originalTaggedSvg:null,originalUnflattenedSvg:null,originalRecipesState:null,regionOverridesHistory:[new Map],historyIndex:0,designName:"",currentDesignId:null,hasGeneratedContent:!1,lastModified:null},Qm=HP(WP((e,t)=>({...K2,setInputMode:n=>e({inputMode:n}),setPrompt:n=>e({prompt:n,lastModified:Date.now()}),setDimensions:(n,r)=>e({widthMM:n,lengthMM:r,lastModified:Date.now()}),setArMapping:n=>e({arMapping:n}),setSelectedFile:(n,r)=>e({selectedFileName:n,uploadedFileUrl:r,lastModified:Date.now()}),clearSelectedFile:()=>e({selectedFileName:null,uploadedFileUrl:null}),setGenerationResult:(n,r)=>e({result:n,jobId:r,hasGeneratedContent:!0,lastModified:Date.now()}),setResult:n=>e({result:n,hasGeneratedContent:!!n,lastModified:Date.now()}),setJobId:n=>e({jobId:n}),setBlendState:(n,r,i)=>e({blendRecipes:n,colorMapping:r,blendSvgUrl:i,lastModified:Date.now()}),setBlendRecipes:n=>e({blendRecipes:n,lastModified:Date.now()}),setColorMapping:n=>e({colorMapping:n,lastModified:Date.now()}),setBlendSvgUrl:n=>e({blendSvgUrl:n}),setBlendEditedColors:n=>e({blendEditedColors:n,lastModified:Date.now()}),updateBlendSvgUrl:n=>e({blendSvgUrl:n}),setSolidState:(n,r,i)=>e({solidRecipes:n,solidColorMapping:r,solidSvgUrl:i,lastModified:Date.now()}),setSolidRecipes:n=>e({solidRecipes:n,lastModified:Date.now()}),setSolidColorMapping:n=>e({solidColorMapping:n,lastModified:Date.now()}),setSolidSvgUrl:n=>e({solidSvgUrl:n}),setSolidEditedColors:n=>e({solidEditedColors:n,lastModified:Date.now()}),updateSolidSvgUrl:n=>e({solidSvgUrl:n}),setViewMode:n=>{if(n==="blend"){console.log("[STORE] Blend mode disabled - forcing solid mode");return}e({viewMode:n})},setShowFinalRecipes:n=>e({showFinalRecipes:n}),setShowSolidSummary:n=>e({showSolidSummary:n}),setOriginalTaggedSvg:n=>e({originalTaggedSvg:n}),setOriginalUnflattenedSvg:n=>e({originalUnflattenedSvg:n}),setOriginalRecipesState:n=>e({originalRecipesState:n}),setRegionOverrides:n=>e({regionOverrides:n,lastModified:Date.now()}),addRegionOverride:(n,r)=>{const i=new Map(t().regionOverrides),s=typeof r=="string"?{hex:r}:r;i.set(n,s);const a=t().regionOverridesHistory,o=t().historyIndex,u=a.slice(0,o+1);u.push(new Map(i)),u.length>50&&u.shift(),e({regionOverrides:i,regionOverridesHistory:u,historyIndex:u.length-1,lastModified:Date.now()})},setRegionOverridesHistory:n=>{e(typeof n=="function"?{regionOverridesHistory:n(t().regionOverridesHistory)}:{regionOverridesHistory:n})},setHistoryIndex:n=>{e(typeof n=="function"?{historyIndex:n(t().historyIndex)}:{historyIndex:n})},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().regionOverridesHistory.length-1,undo:()=>{const{historyIndex:n,regionOverridesHistory:r}=t();if(n>0){const i=n-1;e({historyIndex:i,regionOverrides:new Map(r[i])})}},redo:()=>{const{historyIndex:n,regionOverridesHistory:r}=t();if(n<r.length-1){const i=n+1;e({historyIndex:i,regionOverrides:new Map(r[i])})}},setRegionOverridesHistory:(n,r)=>e({regionOverridesHistory:n,historyIndex:r}),setDesignName:n=>e({designName:n}),setCurrentDesignId:n=>e({currentDesignId:n}),loadDesign:n=>{const r=n.regionOverrides||new Map,i=r.size>0?[new Map,new Map(r)]:[new Map],s=r.size>0?1:0;e({inputMode:n.inputMode||"prompt",prompt:n.prompt||"",lengthMM:n.lengthMM||5e3,widthMM:n.widthMM||5e3,uploadedFileUrl:n.selectedFile||null,result:n.result||null,blendRecipes:n.blendRecipes||null,solidRecipes:n.solidRecipes||null,colorMapping:n.colorMapping||null,solidColorMapping:n.solidColorMapping||null,solidEditedColors:n.solidEditedColors||new Map,blendEditedColors:n.blendEditedColors||new Map,blendSvgUrl:n.blendSvgUrl||null,solidSvgUrl:n.solidSvgUrl||null,viewMode:"solid",arMapping:n.arMapping||null,jobId:n.jobId||null,showFinalRecipes:n.showFinalRecipes||!1,showSolidSummary:n.showSolidSummary||!1,hasGeneratedContent:!!n.result,regionOverrides:r,originalTaggedSvg:n.originalTaggedSvg||null,regionOverridesHistory:i,historyIndex:s,originalUnflattenedSvg:n.originalUnflattenedSvg||null,originalRecipesState:n.originalRecipesState||null,lastModified:Date.now()})},exportDesignData:()=>{const n=t();return{inputMode:n.inputMode,prompt:n.prompt,lengthMM:n.lengthMM,widthMM:n.widthMM,uploadedFileUrl:n.uploadedFileUrl,result:n.result,blendRecipes:n.blendRecipes,solidRecipes:n.solidRecipes,colorMapping:n.colorMapping,solidColorMapping:n.solidColorMapping,solidEditedColors:n.solidEditedColors,blendEditedColors:n.blendEditedColors,viewMode:n.viewMode,arMapping:n.arMapping,jobId:n.jobId,showFinalRecipes:n.showFinalRecipes,showSolidSummary:n.showSolidSummary,regionOverrides:n.regionOverrides,designName:n.designName,currentDesignId:n.currentDesignId}},resetDesign:()=>{const{blendSvgUrl:n,solidSvgUrl:r}=t();n&&n.startsWith("blob:")&&URL.revokeObjectURL(n),r&&r.startsWith("blob:")&&URL.revokeObjectURL(r),e({...K2,blendEditedColors:new Map,solidEditedColors:new Map,regionOverrides:new Map,regionOverridesHistory:[new Map]})},hasUnsavedChanges:()=>{const n=t();return n.hasGeneratedContent||n.prompt.trim()!==""||n.selectedFileName!==null}}),{name:"PlaygroundDesignStore"})),YP={"basketball-full":{id:"basketball-full",name:"Basketball (Full Court)",sport:"basketball",standard:"FIBA 2020",category:"court",description:"Official FIBA standard full basketball court with all markings",dimensions:{length_mm:28e3,width_mm:15e3,min_surround_mm:2e3},defaultSurfaceColor:"RH20",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15e3,height:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:14e3,x2:15e3,y2:14e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7500,cy:14e3,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-arc-top",name:"Three-Point Arc (Top)",type:"arc",params:{cx:7500,cy:26425,radius:6750,startAngle:192,endAngle:348},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-arc-bottom",name:"Three-Point Arc (Bottom)",type:"arc",params:{cx:7500,cy:1575,radius:6750,startAngle:12,endAngle:168},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-bottom-left",name:"Three-Point Line Bottom Left",type:"line",params:{x1:900,y1:0,x2:900,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-bottom-right",name:"Three-Point Line Bottom Right",type:"line",params:{x1:14100,y1:0,x2:14100,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-top-left",name:"Three-Point Line Top Left",type:"line",params:{x1:900,y1:25010,x2:900,y2:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-top-right",name:"Three-Point Line Top Right",type:"line",params:{x1:14100,y1:25010,x2:14100,y2:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-top",name:"Free Throw Line (Top)",type:"line",params:{x1:5050,y1:22200,x2:9950,y2:22200},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-bottom",name:"Free Throw Line (Bottom)",type:"line",params:{x1:5050,y1:5800,x2:9950,y2:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle-top",name:"Free Throw Circle (Top)",type:"circle",params:{cx:7500,cy:22200,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle-bottom",name:"Free Throw Circle (Bottom)",type:"circle",params:{cx:7500,cy:5800,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane-top",name:"Key Lane (Top)",type:"rectangle",params:{x:5050,y:22200,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane-bottom",name:"Key Lane (Bottom)",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area-top",name:"Restricted Area (Top)",type:"arc",params:{cx:7500,cy:28e3,radius:1250,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area-bottom",name:"Restricted Area (Bottom)",type:"arc",params:{cx:7500,cy:0,radius:1250,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"three-point-arc-area-bottom",name:"3-Point Arc (Bottom)",type:"path",params:{d:"M 900,2990 A 6750,6750 0 0,1 14100,2990 L 14100,0 L 9950,0 L 9950,5800 L 5050,5800 L 5050,0 L 900,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:52.5},{id:"three-point-arc-area-top",name:"3-Point Arc (Top)",type:"path",params:{d:"M 900,25010 A 6750,6750 0 0,0 14100,25010 L 14100,28000 L 9950,28000 L 9950,22200 L 5050,22200 L 5050,28000 L 900,28000 Z"},defaultColor:"RH20",paintable:!0,area_m2:52.5},{id:"three-point-corner-bottom-left",name:"3-Point Corner (Bottom Left)",type:"rectangle",params:{x:0,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-bottom-right",name:"3-Point Corner (Bottom Right)",type:"rectangle",params:{x:14100,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-top-left",name:"3-Point Corner (Top Left)",type:"rectangle",params:{x:0,y:25010,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-top-right",name:"3-Point Corner (Top Right)",type:"rectangle",params:{x:14100,y:25010,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"key-area-top",name:"Key Area (Top)",type:"rectangle",params:{x:5050,y:22200,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"key-area-bottom",name:"Key Area (Bottom)",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"free-throw-semicircle-top",name:"Free-Throw Semi-Circle (Top)",type:"path",params:{d:"M 5700,22200 A 1800,1800 0 0,1 9300,22200 Z"},defaultColor:"RH20",paintable:!0,area_m2:5.09},{id:"free-throw-semicircle-bottom",name:"Free-Throw Semi-Circle (Bottom)",type:"path",params:{d:"M 5700,5800 A 1800,1800 0 0,0 9300,5800 Z"},defaultColor:"RH20",paintable:!0,area_m2:5.09},{id:"restricted-area-bottom",name:"Restricted Area (Bottom)",type:"path",params:{d:"M 6250,0 A 1250,1250 0 0,0 8750,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:2.45},{id:"restricted-area-top",name:"Restricted Area (Top)",type:"path",params:{d:"M 6250,28000 A 1250,1250 0 0,1 8750,28000 Z"},defaultColor:"RH20",paintable:!0,area_m2:2.45},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7500,cy:14e3,radius:1800},defaultColor:"RH20",paintable:!0,area_m2:10.18}]},"netball-full":{id:"netball-full",name:"Netball (Full Court)",sport:"netball",standard:"World Netball 2020",category:"court",description:"Official World Netball standard court with goal circles and thirds",dimensions:{length_mm:30500,width_mm:15250,min_surround_mm:3050},defaultSurfaceColor:"RH01",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15250,height:30500},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"transverse-line-1",name:"Transverse Line 1",type:"line",params:{x1:0,y1:10167,x2:15250,y2:10167},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"transverse-line-2",name:"Transverse Line 2",type:"line",params:{x1:0,y1:20333,x2:15250,y2:20333},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7625,cy:15250,radius:450},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-circle-bottom",name:"Goal Circle (Bottom)",type:"arc",params:{cx:7625,cy:0,radius:4900,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-circle-top",name:"Goal Circle (Top)",type:"arc",params:{cx:7625,cy:30500,radius:4900,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"tennis-doubles":{id:"tennis-doubles",name:"Tennis (Doubles)",sport:"tennis",standard:"ITF 2020",category:"court",description:"Official ITF standard doubles tennis court with all service boxes",dimensions:{length_mm:23770,width_mm:10970,min_surround_mm:3660},defaultSurfaceColor:"RH22",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:10970,height:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"singles-sideline-left",name:"Singles Sideline (Left)",type:"line",params:{x1:1370,y1:0,x2:1370,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"singles-sideline-right",name:"Singles Sideline (Right)",type:"line",params:{x1:9600,y1:0,x2:9600,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:6400,x2:10970,y2:6400},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17370,x2:10970,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:5485,y1:6400,x2:5485,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-bottom",name:"Center Mark (Bottom)",type:"line",params:{x1:5485,y1:0,x2:5485,y2:100},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-top",name:"Center Mark (Top)",type:"line",params:{x1:5485,y1:23670,x2:5485,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"futsal-standard":{id:"futsal-standard",name:"Futsal (5-a-side)",sport:"futsal",standard:"FIFA 2020",category:"court",description:"Official FIFA standard futsal court for international matches",dimensions:{length_mm:4e4,width_mm:2e4,min_surround_mm:1e3},defaultSurfaceColor:"RH50",defaultLineColor:"RH30",defaultLineWidth_mm:80,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:2e4,height:4e4},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:2e4,x2:2e4,y2:2e4},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:1e4,cy:2e4,radius:3e3},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"center-spot",name:"Center Spot",type:"circle",params:{cx:1e4,cy:2e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-area-bottom",name:"Penalty Area (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:6e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-area-top",name:"Penalty Area (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:6e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-mark-bottom",name:"Penalty Mark (Bottom)",type:"circle",params:{cx:1e4,cy:6e3,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-mark-top",name:"Penalty Mark (Top)",type:"circle",params:{cx:1e4,cy:34e3,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"second-penalty-mark-bottom",name:"Second Penalty Mark (Bottom)",type:"circle",params:{cx:1e4,cy:1e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"second-penalty-mark-top",name:"Second Penalty Mark (Top)",type:"circle",params:{cx:1e4,cy:3e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-bl",name:"Corner Arc (Bottom Left)",type:"arc",params:{cx:0,cy:0,radius:250,startAngle:0,endAngle:90},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-br",name:"Corner Arc (Bottom Right)",type:"arc",params:{cx:2e4,cy:0,radius:250,startAngle:90,endAngle:180},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-tl",name:"Corner Arc (Top Left)",type:"arc",params:{cx:0,cy:4e4,radius:250,startAngle:270,endAngle:360},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-tr",name:"Corner Arc (Top Right)",type:"arc",params:{cx:2e4,cy:4e4,radius:250,startAngle:180,endAngle:270},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"}],zones:[]},"volleyball-indoor":{id:"volleyball-indoor",name:"Volleyball (Indoor)",sport:"volleyball",standard:"FIVB",category:"court",description:"Official FIVB standard indoor volleyball court with attack lines",dimensions:{length_mm:18e3,width_mm:9e3,min_surround_mm:3e3},defaultSurfaceColor:"RH40",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:9e3,height:18e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:9e3,x2:9e3,y2:9e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"attack-line-bottom",name:"Attack Line (Bottom)",type:"line",params:{x1:0,y1:6e3,x2:9e3,y2:6e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"attack-line-top",name:"Attack Line (Top)",type:"line",params:{x1:0,y1:12e3,x2:9e3,y2:12e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"badminton-full":{id:"badminton-full",name:"Badminton (Full Court)",sport:"badminton",standard:"BWF",category:"court",description:"Official BWF standard full badminton court with singles and doubles lines",dimensions:{length_mm:13400,width_mm:6100,min_surround_mm:1e3},defaultSurfaceColor:"RH26",defaultLineColor:"RH12",defaultLineWidth_mm:40,markings:[{id:"boundary",name:"Boundary Lines (Doubles)",type:"rectangle",params:{x:0,y:0,width:6100,height:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"boundary"},{id:"singles-sideline-left",name:"Singles Sideline (Left)",type:"line",params:{x1:460,y1:0,x2:460,y2:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"singles-sideline-right",name:"Singles Sideline (Right)",type:"line",params:{x1:5640,y1:0,x2:5640,y2:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"short-service-line-bottom",name:"Short Service Line (Bottom)",type:"line",params:{x1:0,y1:1980,x2:6100,y2:1980},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"short-service-line-top",name:"Short Service Line (Top)",type:"line",params:{x1:0,y1:11420,x2:6100,y2:11420},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"doubles-long-service-line-bottom",name:"Doubles Long Service Line (Bottom)",type:"line",params:{x1:0,y1:760,x2:6100,y2:760},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"doubles-long-service-line-top",name:"Doubles Long Service Line (Top)",type:"line",params:{x1:0,y1:12640,x2:6100,y2:12640},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:3050,y1:1980,x2:3050,y2:11420},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"}],zones:[]},"pickleball-standard":{id:"pickleball-standard",name:"Pickleball",sport:"pickleball",standard:"USA Pickleball",category:"court",description:"Official USA Pickleball standard court with non-volley zone (kitchen)",dimensions:{length_mm:13410,width_mm:6100,min_surround_mm:1e3},defaultSurfaceColor:"RH11",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:6100,height:13410},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"non-volley-zone-line-bottom",name:"Non-Volley Zone Line (Bottom)",type:"line",params:{x1:0,y1:2130,x2:6100,y2:2130},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"non-volley-zone-line-top",name:"Non-Volley Zone Line (Top)",type:"line",params:{x1:0,y1:11280,x2:6100,y2:11280},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-line",name:"Center Line (Net)",type:"line",params:{x1:0,y1:6705,x2:6100,y2:6705},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:3050,y1:0,x2:3050,y2:13410},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"basketball-half":{id:"basketball-half",name:"Basketball (Half Court / 3x3)",sport:"basketball",standard:"FIBA 3x3",category:"court",description:"Half-court basketball for 3x3 games, practice, or space-constrained areas",dimensions:{length_mm:11e3,width_mm:15e3,min_surround_mm:2e3},defaultSurfaceColor:"RH20",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15e3,height:11e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"three-point-arc",name:"Three-Point Arc",type:"arc",params:{cx:7500,cy:1575,radius:6750,startAngle:12,endAngle:168},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-left",name:"Three-Point Line (Left)",type:"line",params:{x1:900,y1:0,x2:900,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-right",name:"Three-Point Line (Right)",type:"line",params:{x1:14100,y1:0,x2:14100,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line",name:"Free Throw Line",type:"line",params:{x1:5050,y1:5800,x2:9950,y2:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle",name:"Free Throw Circle",type:"circle",params:{cx:7500,cy:5800,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane",name:"Key Lane",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area",name:"Restricted Area",type:"arc",params:{cx:7500,cy:0,radius:1250,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"three-point-arc-area",name:"3-Point Arc",type:"path",params:{d:"M 900,2990 A 6750,6750 0 0,1 14100,2990 L 14100,0 L 9950,0 L 9950,5800 L 5050,5800 L 5050,0 L 900,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:52.5},{id:"three-point-corner-left",name:"3-Point Corner (Left)",type:"rectangle",params:{x:0,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-right",name:"3-Point Corner (Right)",type:"rectangle",params:{x:14100,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"key-area",name:"Key Area",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"free-throw-semicircle",name:"Free-Throw Semi-Circle",type:"path",params:{d:"M 5700,5800 A 1800,1800 0 0,0 9300,5800 Z"},defaultColor:"RH20",paintable:!0,area_m2:5.09},{id:"restricted-area",name:"Restricted Area",type:"path",params:{d:"M 6250,0 A 1250,1250 0 0,0 8750,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:2.45}]},"tennis-singles":{id:"tennis-singles",name:"Tennis (Singles)",sport:"tennis",standard:"ITF",category:"court",description:"Singles-only tennis court without doubles alleys",dimensions:{length_mm:23770,width_mm:8230,min_surround_mm:3660},defaultSurfaceColor:"RH22",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:8230,height:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:6400,x2:8230,y2:6400},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17370,x2:8230,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:4115,y1:6400,x2:4115,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-bottom",name:"Center Mark (Bottom)",type:"line",params:{x1:4115,y1:0,x2:4115,y2:100},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-top",name:"Center Mark (Top)",type:"line",params:{x1:4115,y1:23670,x2:4115,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"mini-tennis-red":{id:"mini-tennis-red",name:"Mini Tennis (Red Court)",sport:"tennis",standard:"ITF Play+Stay",category:"court",description:"Beginner/youth court for red stage tennis coaching (36ft)",dimensions:{length_mm:10970,width_mm:5490,min_surround_mm:2e3},defaultSurfaceColor:"RH02",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:5490,height:10970},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"net-line",name:"Net Line",type:"line",params:{x1:0,y1:5485,x2:5490,y2:5485},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:2745,x2:5490,y2:2745},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:8225,x2:5490,y2:8225},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:2745,y1:2745,x2:2745,y2:8225},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"padel-standard":{id:"padel-standard",name:"Padel",sport:"padel",standard:"FIP",category:"court",description:"Official FIP padel court with service boxes",dimensions:{length_mm:2e4,width_mm:1e4,min_surround_mm:0},defaultSurfaceColor:"RH60",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:1e4,height:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"net-line",name:"Net Line",type:"line",params:{x1:0,y1:1e4,x2:1e4,y2:1e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:3e3,x2:1e4,y2:3e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17e3,x2:1e4,y2:17e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line-bottom",name:"Center Service Line (Bottom)",type:"line",params:{x1:5e3,y1:0,x2:5e3,y2:3e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line-top",name:"Center Service Line (Top)",type:"line",params:{x1:5e3,y1:17e3,x2:5e3,y2:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-line",name:"Center Line",type:"line",params:{x1:5e3,y1:3e3,x2:5e3,y2:17e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"handball-standard":{id:"handball-standard",name:"Handball",sport:"handball",standard:"IHF",category:"court",description:"Official IHF handball court with goal areas and penalty lines",dimensions:{length_mm:4e4,width_mm:2e4,min_surround_mm:1e3},defaultSurfaceColor:"RH10",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:2e4,height:4e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:2e4,x2:2e4,y2:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-area-bottom",name:"Goal Area (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:6e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-area-top",name:"Goal Area (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:6e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-bottom",name:"Free-Throw Line (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:9e3,startAngle:0,endAngle:180,dashed:!0,dashPattern:"300 150"},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-top",name:"Free-Throw Line (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:9e3,startAngle:180,endAngle:360,dashed:!0,dashPattern:"300 150"},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"7m-line-bottom",name:"7m Penalty Line (Bottom)",type:"line",params:{x1:9e3,y1:7e3,x2:11e3,y2:7e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"7m-line-top",name:"7m Penalty Line (Top)",type:"line",params:{x1:9e3,y1:33e3,x2:11e3,y2:33e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goalkeeper-line-bottom",name:"Goalkeeper Restriction Line (Bottom)",type:"line",params:{x1:9500,y1:4e3,x2:10500,y2:4e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goalkeeper-line-top",name:"Goalkeeper Restriction Line (Top)",type:"line",params:{x1:9500,y1:36e3,x2:10500,y2:36e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"hockey-d":{id:"hockey-d",name:"Field Hockey D",sport:"hockey",standard:"FIH",category:"overlay",description:"Hockey shooting circle (D) for overlay on sports surfaces",dimensions:{length_mm:14630,width_mm:29260,min_surround_mm:0},defaultSurfaceColor:"RH23",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"shooting-circle",name:"Shooting Circle (D)",type:"arc",params:{cx:14630,cy:0,radius:14630,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-line",name:"Goal Line",type:"line",params:{x1:0,y1:0,x2:29260,y2:0},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"penalty-spot",name:"Penalty Spot",type:"circle",params:{cx:14630,cy:6400,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]},"hockey-5s":{id:"hockey-5s",name:"Hockey 5s",sport:"hockey",standard:"England Hockey",category:"court",description:"Scaled-down hockey pitch for 5-a-side games",dimensions:{length_mm:55e3,width_mm:41100,min_surround_mm:2e3},defaultSurfaceColor:"RH23",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:41100,height:55e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:27500,x2:41100,y2:27500},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-spot",name:"Center Spot",type:"circle",params:{cx:20550,cy:27500,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"shooting-circle-bottom",name:"Shooting Circle (Bottom)",type:"arc",params:{cx:20550,cy:0,radius:9e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"shooting-circle-top",name:"Shooting Circle (Top)",type:"arc",params:{cx:20550,cy:55e3,radius:9e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"penalty-spot-bottom",name:"Penalty Spot (Bottom)",type:"circle",params:{cx:20550,cy:6400,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"penalty-spot-top",name:"Penalty Spot (Top)",type:"circle",params:{cx:20550,cy:48600,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[]}},pi=[{code:"RH01",name:"Standard Red",hex:"#A5362F",R:165,G:54,B:47,L:39.4,a:58.5,b:29},{code:"RH02",name:"Bright Red",hex:"#E21F2F",R:226,G:31,B:47,L:47.4,a:70.1,b:44},{code:"RH10",name:"Standard Green",hex:"#609B63",R:96,G:155,B:99,L:40.5,a:-42.2,b:17.9},{code:"RH11",name:"Bright Green",hex:"#3BB44A",R:59,G:180,B:74,L:62.1,a:-47.7,b:47.2},{code:"RH12",name:"Dark Green",hex:"#006C55",R:0,G:108,B:85,L:39.6,a:-38.3,b:13.1},{code:"RH20",name:"Standard Blue",hex:"#0075BC",R:0,G:117,B:188,L:36.4,a:14.2,b:-46.7},{code:"RH21",name:"Purple",hex:"#493D8C",R:73,G:61,B:140,L:31.5,a:41.9,b:-40.9},{code:"RH22",name:"Light Blue",hex:"#47AFE3",R:71,G:175,B:227,L:55.3,a:-19.1,b:-37.3},{code:"RH23",name:"Azure",hex:"#039DC4",R:3,G:157,B:196,L:47.7,a:-4.8,b:-34.8},{code:"RH26",name:"Turquoise",hex:"#00A6A3",R:0,G:166,B:163,L:58.8,a:-38.4,b:-3},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA",R:228,G:196,B:170,L:75.2,a:3.8,b:24.8},{code:"RH31",name:"Cream",hex:"#E8E3D8",R:232,G:227,B:216,L:91.8,a:-.5,b:12.5},{code:"RH32",name:"Brown",hex:"#8B5F3C",R:139,G:95,B:60,L:40,a:15.9,b:27.1},{code:"RH90",name:"Funky Pink",hex:"#E8457E",R:232,G:69,B:126,L:55,a:66.1,b:4.9},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144",R:229,G:161,B:68,L:66,a:8.4,b:56.3},{code:"RH41",name:"Bright Yellow",hex:"#FFD833",R:255,G:216,B:51,L:86.9,a:-1,b:90.6},{code:"RH50",name:"Orange",hex:"#F15B32",R:241,G:91,B:50,L:63.2,a:49.8,b:60.2},{code:"RH60",name:"Dark Grey",hex:"#59595B",R:89,G:89,B:91,L:34.1,a:-.4,b:-2.4},{code:"RH61",name:"Light Grey",hex:"#939598",R:147,G:149,B:152,L:69,a:-.5,b:-1},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6",R:217,G:217,B:214,L:87.6,a:-.2,b:-.7},{code:"RH70",name:"Black",hex:"#231F20",R:35,G:31,B:32,L:9.1,a:-.3,b:-6.3}];function oF(){return Object.values(YP)}function lF(e){return YP[e]||null}function cF(e,t,n){const{type:r,params:i}=e;switch(r){case"line":return hF(i,t,n);case"rectangle":return dF(i,t,n);case"circle":return fF(i,t,n);case"arc":return pF(i,t,n);case"polyline":return mF(i,t,n);default:return console.warn(`Unknown marking type: ${r}`),null}}function uF(e,t){const{type:n,params:r}=e;switch(n){case"rectangle":return{type:"rect",x:r.x,y:r.y,width:r.width,height:r.height,fill:t};case"circle":return{type:"circle",cx:r.cx,cy:r.cy,r:r.radius,fill:t};case"polygon":return{type:"polygon",points:r.points,fill:t};case"path":return{type:"path",d:r.d,fill:t};default:return console.warn(`Unknown zone type: ${n}`),null}}function hF(e,t,n){const r={type:"line",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:t,strokeWidth:n};return e.dashed&&(r.strokeDasharray=e.dashPattern||"200 100"),r}function dF(e,t,n){return{type:"rect",x:e.x,y:e.y,width:e.width,height:e.height,stroke:t,strokeWidth:n,fill:"none"}}function fF(e,t,n){return{type:"circle",cx:e.cx,cy:e.cy,r:e.radius,stroke:t,strokeWidth:n,fill:"none"}}function pF(e,t,n){const{cx:r,cy:i,radius:s,startAngle:a,endAngle:o}=e,u=a*Math.PI/180,h=o*Math.PI/180,d=r+s*Math.cos(u),p=i+s*Math.sin(u),m=r+s*Math.cos(h),g=i+s*Math.sin(h),v=o-a>180?1:0,C={type:"path",d:`M ${d} ${p} A ${s} ${s} 0 ${v} 1 ${m} ${g}`,stroke:t,strokeWidth:n,fill:"none"};return e.dashed&&(C.strokeDasharray=e.dashPattern||"200 100"),C}function mF(e,t,n){return{type:"polyline",points:e.points.map(i=>`${i[0]},${i[1]}`).join(" "),stroke:t,strokeWidth:n,fill:"none"}}function Z2(e){if(e&&e.startsWith("#"))return e;const t=pi.find(n=>n.code===e);return t?t.hex:"#000000"}function gF(e){var a;const{template:t,lineColorOverrides:n,zoneColorOverrides:r}=e;if(!t)return console.error("No template provided for court"),{markings:[],zones:[]};const i=t.markings.map(o=>{var p;const u=((p=n[o.id])==null?void 0:p.hex)||t.defaultLineColor,h=Z2(u),d=o.lineWidth_mm||t.defaultLineWidth_mm;return{id:o.id,name:o.name,...cF(o,h,d)}}).filter(Boolean),s=((a=t.zones)==null?void 0:a.map(o=>{var d;const u=((d=r[o.id])==null?void 0:d.hex)||o.defaultColor,h=Z2(u);return{id:o.id,name:o.name,...uF(o,h)}}).filter(Boolean))||[];return{markings:i,zones:s}}function Q2(e,t){return Math.round(e/t)*t}function yF(e,t){return{x:Q2(e.x,t),y:Q2(e.y,t)}}function XP(e){let t=e%360;return t<0&&(t+=360),t}function gp(e,t,n){const{width_mm:r,length_mm:i}=t,{width_mm:s,length_mm:a}=n,o=500,u=-(r-o),h=s-o,d=-(i-o),p=a-o;return{x:Math.max(u,Math.min(e.x,h)),y:Math.max(d,Math.min(e.y,p))}}function bF(e){const{position:t,rotation:n,scale:r,template:i}=e,s=i.dimensions.width_mm/2,a=i.dimensions.length_mm/2;return`translate(${t.x}, ${t.y}) scale(${r}) rotate(${n}, ${s}, ${a})`}function vF({court:e,svgRef:t}){const{updateCourtRotation:n,updateCourtScale:r,updateCourtPosition:i,addToHistory:s}=rn(),[a,o]=fe.useState(!1),[u,h]=fe.useState(!1),[d,p]=fe.useState(null),[m,g]=fe.useState(null),{template:v,position:w,rotation:C,scale:x}=e,k=v.dimensions.width_mm*x,A=v.dimensions.length_mm*x,j=w.x+v.dimensions.width_mm*x/2,I=w.y+v.dimensions.length_mm*x/2,E=v.dimensions.width_mm/2,U=-1e3,D=(H,ye)=>{if(!t.current)return{x:0,y:0};const je=t.current.createSVGPoint();je.x=H,je.y=ye;const ke=je.matrixTransform(t.current.getScreenCTM().inverse());return{x:ke.x,y:ke.y}},R=H=>{H.stopPropagation(),o(!0),g({x:H.clientX,y:H.clientY})},X=(H,ye)=>{H.stopPropagation(),h(!0),p(ye),g({x:H.clientX,y:H.clientY,initialScale:x,initialWidth:k,initialHeight:A,initialPosition:{...w}})};fe.useEffect(()=>{if(!a&&!u)return;const H=je=>{if(a){const ke=D(je.clientX,je.clientY),Fe=ke.x-j,xe=ke.y-I;let Me=Math.atan2(xe,Fe)*(180/Math.PI)+90;Me=XP(Me),je.shiftKey&&(Me=Math.round(Me/15)*15),n(e.id,Me)}else if(u&&m){const ke=D(je.clientX,je.clientY),Fe=D(m.x,m.y),xe=ke.x-Fe.x,Me=ke.y-Fe.y;let _e=m.initialScale,Ne={...w};switch(d){case"se":_e=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm);break;case"nw":_e=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Ne.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*_e),Ne.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*_e);break;case"ne":_e=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm),Ne.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*_e);break;case"sw":_e=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Ne.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*_e);break;case"e":_e=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm);break;case"w":_e=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Ne.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*_e);break;case"n":_e=Math.max(.3,m.initialScale-Me/v.dimensions.length_mm),Ne.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*_e);break;case"s":_e=Math.max(.3,m.initialScale+Me/v.dimensions.length_mm);break}_e=Math.min(3,Math.max(.3,_e)),r(e.id,_e),(Ne.x!==w.x||Ne.y!==w.y)&&i(e.id,Ne)}},ye=()=>{(a||u)&&s(),o(!1),h(!1),p(null),g(null)};return window.addEventListener("mousemove",H),window.addEventListener("mouseup",ye),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",ye)}},[a,u,m,j,I,e.id,w,x,d]);const ce=[{type:"nw",x:0,y:0,cursor:"nwse-resize"},{type:"n",x:v.dimensions.width_mm/2,y:0,cursor:"ns-resize"},{type:"ne",x:v.dimensions.width_mm,y:0,cursor:"nesw-resize"},{type:"e",x:v.dimensions.width_mm,y:v.dimensions.length_mm/2,cursor:"ew-resize"},{type:"se",x:v.dimensions.width_mm,y:v.dimensions.length_mm,cursor:"nwse-resize"},{type:"s",x:v.dimensions.width_mm/2,y:v.dimensions.length_mm,cursor:"ns-resize"},{type:"sw",x:0,y:v.dimensions.length_mm,cursor:"nesw-resize"},{type:"w",x:0,y:v.dimensions.length_mm/2,cursor:"ew-resize"}],ie=300,ge=250;return c.jsxs("g",{className:"transform-handles",children:[c.jsxs("g",{className:"rotation-handle",onMouseDown:R,style:{cursor:a?"grabbing":"grab"},children:[c.jsx("line",{x1:E,y1:0,x2:E,y2:U+ge,stroke:"#007bff",strokeWidth:30,strokeDasharray:"100 50"}),c.jsx("circle",{cx:E,cy:U,r:ge,fill:"white",stroke:"#007bff",strokeWidth:40}),c.jsx("path",{d:`M ${E-ge*.4} ${U}
              A ${ge*.5} ${ge*.5} 0 1 1 ${E+ge*.4} ${U}`,fill:"none",stroke:"#007bff",strokeWidth:30,strokeLinecap:"round"}),c.jsx("path",{d:`M ${E+ge*.4} ${U}
              L ${E+ge*.6} ${U-ge*.2}
              M ${E+ge*.4} ${U}
              L ${E+ge*.6} ${U+ge*.2}`,fill:"none",stroke:"#007bff",strokeWidth:30,strokeLinecap:"round"})]}),ce.map(H=>c.jsx("rect",{className:`scale-handle scale-handle--${H.type}`,x:H.x-ie/2,y:H.y-ie/2,width:ie,height:ie,fill:"white",stroke:"#007bff",strokeWidth:40,rx:30,ry:30,style:{cursor:u&&d===H.type?"grabbing":H.cursor,pointerEvents:"all"},onMouseDown:ye=>X(ye,H.type)},H.type)),a&&c.jsxs("text",{x:v.dimensions.width_mm/2,y:-1e3-ge-200,textAnchor:"middle",fontSize:400,fill:"#007bff",fontWeight:"bold",style:{pointerEvents:"none"},children:[Math.round(C),""]}),u&&c.jsxs("text",{x:v.dimensions.width_mm/2,y:v.dimensions.length_mm+600,textAnchor:"middle",fontSize:400,fill:"#007bff",fontWeight:"bold",style:{pointerEvents:"none"},children:[(x*100).toFixed(0),"%"]})]})}function KP(e){const{width_mm:t,height_mm:n,numLanes:r,laneWidth_mm:i,cornerRadius:s={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},lineWidth_mm:a=50}=e,o=[];if(s.topLeft===0&&s.topRight===0&&s.bottomLeft===0&&s.bottomRight===0){const h=r*i;for(let d=0;d<r;d++){const p=d*i;o.push({laneNumber:d+1,innerPath:null,outerPath:xF(i,n,d),perimeter:2*(i+n)/1e3,isParallel:!0,laneX:p,laneWidth:i})}return{lanes:o,totalWidth:h,totalLength:n,usableWidth:h,usableHeight:n,isStraightTrack:!0}}else for(let h=0;h<r;h++){const d=h*i,p=(h+1)*i,m=Math.max(0,t-p*2),g=Math.max(0,n-p*2),v=Math.max(0,t-d*2),w=Math.max(0,n-d*2),C={topLeft:Math.max(0,s.topLeft-p),topRight:Math.max(0,s.topRight-p),bottomLeft:Math.max(0,s.bottomLeft-p),bottomRight:Math.max(0,s.bottomRight-p)},x={topLeft:Math.max(0,s.topLeft-d),topRight:Math.max(0,s.topRight-d),bottomLeft:Math.max(0,s.bottomLeft-d),bottomRight:Math.max(0,s.bottomRight-d)};o.push({laneNumber:h+1,innerPath:J2(m,g,C,p),outerPath:J2(v,w,x,d),perimeter:wF(v,w,x),isParallel:!1})}return{lanes:o,totalWidth:t,totalLength:n,usableWidth:t-r*i*2,usableHeight:n-r*i*2}}function J2(e,t,n,r=0){if(e<=0||t<=0)return`M ${r} ${r} L ${r} ${r}`;const i=Math.min(e/2,t/2),s=Math.min(n.topLeft,i),a=Math.min(n.topRight,i),o=Math.min(n.bottomRight,i),u=Math.min(n.bottomLeft,i),h=r,d=r+e,p=r,m=r+t;return`
    M ${h+s} ${p}
    L ${d-a} ${p}
    ${a>0?`A ${a} ${a} 0 0 1 ${d} ${p+a}`:""}
    L ${d} ${m-o}
    ${o>0?`A ${o} ${o} 0 0 1 ${d-o} ${m}`:""}
    L ${h+u} ${m}
    ${u>0?`A ${u} ${u} 0 0 1 ${h} ${m-u}`:""}
    L ${h} ${p+s}
    ${s>0?`A ${s} ${s} 0 0 1 ${h+s} ${p}`:""}
    Z
  `.trim().replace(/\s+/g," ")}function xF(e,t,n){const r=n*e;return`M ${r} 0 L ${r+e} 0 L ${r+e} ${t} L ${r} ${t} Z`}function wF(e,t,n){if(e<=0||t<=0)return 0;const r=Math.min(e/2,t/2),i=Math.min(n.topLeft,r),s=Math.min(n.topRight,r),a=Math.min(n.bottomRight,r),o=Math.min(n.bottomLeft,r),u=e-i-s,h=t-s-a,d=e-a-o,p=t-o-i,m=Math.PI*i/2,g=Math.PI*s/2,v=Math.PI*a/2,w=Math.PI*o/2;return(u+h+d+p+m+g+v+w)/1e3}function ZP(e){if(!e||!e.lanes||e.lanes.length===0)return[];const t=e.lanes.length-1,n=e.lanes[t].perimeter;return e.lanes.map((r,i)=>r.perimeter-n)}function eS(e,t,n){const{width_mm:r,height_mm:i,laneWidth_mm:s,cornerRadius:a={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3}}=n,o=e*s,u=Math.max(0,r-o*2),h=Math.max(0,i-o*2),d=Math.min(u/2,h/2),p=Math.min(Math.max(0,a.topLeft-o),d),m=Math.min(Math.max(0,a.topRight-o),d),g=Math.min(Math.max(0,a.bottomRight-o),d),v=Math.min(Math.max(0,a.bottomLeft-o),d),w=o,C=o+u,x=o,k=o+h,A=[{type:"arc",length:Math.PI*v/2,radius:v,corner:"bottomLeft"},{type:"straight",length:h-v-p,dir:"up"},{type:"arc",length:Math.PI*p/2,radius:p,corner:"topLeft"},{type:"straight",length:u-p-m,dir:"right"},{type:"arc",length:Math.PI*m/2,radius:m,corner:"topRight"},{type:"straight",length:h-m-g,dir:"down"},{type:"arc",length:Math.PI*g/2,radius:g,corner:"bottomRight"},{type:"straight",length:u-g-v,dir:"left"}];let j=t;const I=A.reduce((U,D)=>U+D.length,0);for(;j<0;)j+=I;for(;j>=I;)j-=I;let E=0;for(const U of A){if(j<=E+U.length){const D=j-E,R=U.length>0?D/U.length:0;return U.type==="arc"?_F(U,R,{left:w,right:C,top:x,bottom:k,tl:p,tr:m,br:g,bl:v}):kF(U,R,{left:w,right:C,top:x,bottom:k,tl:p,tr:m,br:g,bl:v})}E+=U.length}return{x:w,y:k-v,angle:-Math.PI/2}}function _F(e,t,n){const{left:r,right:i,top:s,bottom:a,tl:o,tr:u,br:h,bl:d}=n,p=t*(Math.PI/2);switch(e.corner){case"bottomLeft":{const m=r+d,g=a-d,w=Math.PI/2+p;return{x:m+d*Math.cos(w),y:g+d*Math.sin(w),angle:w+Math.PI/2}}case"topLeft":{const m=r+o,g=s+o,w=Math.PI+p;return{x:m+o*Math.cos(w),y:g+o*Math.sin(w),angle:w+Math.PI/2}}case"topRight":{const m=i-u,g=s+u,w=-Math.PI/2+p;return{x:m+u*Math.cos(w),y:g+u*Math.sin(w),angle:w+Math.PI/2}}case"bottomRight":{const m=i-h,g=a-h,w=0+p;return{x:m+h*Math.cos(w),y:g+h*Math.sin(w),angle:w+Math.PI/2}}default:return{x:r,y:s,angle:0}}}function kF(e,t,n){const{left:r,right:i,top:s,bottom:a,tl:o,tr:u,br:h,bl:d}=n;switch(e.dir){case"up":{const p=a-d,m=s+o;return{x:r,y:p+t*(m-p),angle:-Math.PI/2}}case"right":{const p=r+o,m=i-u;return{x:p+t*(m-p),y:s,angle:0}}case"down":{const p=s+u,m=a-h;return{x:i,y:p+t*(m-p),angle:Math.PI/2}}case"left":{const p=i-h,m=r+d;return{x:p+t*(m-p),y:a,angle:Math.PI}}default:return{x:r,y:s,angle:0}}}function tS(e,t,n){const r=eS(e,t,n),i=eS(e+1,t,n);return{x:(r.x+i.x)/2,y:(r.y+i.y)/2,angle:r.angle,innerX:i.x,innerY:i.y,outerX:r.x,outerY:r.y}}function nS(e,t,n){const{width_mm:r,height_mm:i,laneWidth_mm:s,cornerRadius:a={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3}}=n,o=e*s,u=Math.max(0,r-o*2),h=Math.max(0,i-o*2),d=Math.min(u/2,h/2),p=Math.min(Math.max(0,a.topLeft-o),d),m=Math.min(Math.max(0,a.topRight-o),d),g=Math.min(Math.max(0,a.bottomRight-o),d),v=Math.min(Math.max(0,a.bottomLeft-o),d),w=[{type:"arc",length:Math.PI*v/2,corner:"bottomLeft"},{type:"straight",length:h-v-p,dir:"up"},{type:"arc",length:Math.PI*p/2,corner:"topLeft"},{type:"straight",length:u-p-m,dir:"right"},{type:"arc",length:Math.PI*m/2,corner:"topRight"},{type:"straight",length:h-m-g,dir:"down"},{type:"arc",length:Math.PI*g/2,corner:"bottomRight"},{type:"straight",length:u-g-v,dir:"left"}],C=w.reduce((A,j)=>A+j.length,0);let x=t;for(;x<0;)x+=C;for(;x>=C;)x-=C;let k=0;for(let A=0;A<w.length;A++){if(x<=k+w[A].length){const j=x-k,I=w[A].length>0?j/w[A].length:0;return{segmentIndex:A,t:I,segments:w,totalPerimeter:C}}k+=w[A].length}return{segmentIndex:0,t:0,segments:w,totalPerimeter:C}}function rS(e,t,n,r){const i=nS(n,t,r),s=nS(e,0,r);let a=0;for(let h=0;h<i.segmentIndex;h++)a+=s.segments[h].length;const o=s.segments[i.segmentIndex].length;return a+i.t*o}function SF({track:e,svgRef:t}){var H;const{updateTrackParameters:n,updateTrackPosition:r,updateTrackRotation:i,addToHistory:s}=rn(),[a,o]=fe.useState(!1),[u,h]=fe.useState(!1),[d,p]=fe.useState(null),[m,g]=fe.useState(null),{parameters:v,position:w,rotation:C}=e,x=v.width_mm,k=v.height_mm,A=w.x+x/2,j=w.y+k/2,I=x/2,E=-1e3,U=(ye,je)=>{if(!t.current)return{x:0,y:0};const ke=t.current.createSVGPoint();ke.x=ye,ke.y=je;const Fe=ke.matrixTransform(t.current.getScreenCTM().inverse());return{x:Fe.x,y:Fe.y}},D=ye=>{ye.stopPropagation();const je=ye.touches?ye.touches[0].clientX:ye.clientX,ke=ye.touches?ye.touches[0].clientY:ye.clientY;h(!0),g({x:je,y:ke})},R=(ye,je)=>{var Ne;ye.stopPropagation(),o(!0),p(je);const ke=ye.touches?ye.touches[0].clientX:ye.clientX,Fe=ye.touches?ye.touches[0].clientY:ye.clientY,xe=U(ke,Fe),Me=((Ne=e.template)==null?void 0:Ne.trackType)==="straight";let _e={};if(Me){const st=C*Math.PI/180,nt=Math.sin(st),Ue=Math.cos(st),ct=w.x+x/2,he=w.y+k/2,oe=je==="n"||je==="nw"||je==="ne";_e={fixedEdgeCenter:oe?{x:ct-k/2*nt,y:he+k/2*Ue}:{x:ct+k/2*nt,y:he-k/2*Ue},fixedEdgeIsSouth:oe,sinR:nt,cosR:Ue}}g({screenX:ke,screenY:Fe,svgX:xe.x,svgY:xe.y,initialWidth:x,initialHeight:k,initialPosition:{...w},initialCornerRadius:{...v.cornerRadius},..._e})};fe.useEffect(()=>{if(!a&&!u)return;const ye=ke=>{var Oe;const Fe=ke.touches?ke.touches[0].clientX:ke.clientX,xe=ke.touches?ke.touches[0].clientY:ke.clientY;if(u){const ht=U(Fe,xe),Pt=ht.x-A,St=ht.y-j;let G=Math.atan2(St,Pt)*(180/Math.PI)+90;G=XP(G),ke.shiftKey&&(G=Math.round(G/15)*15),i(e.id,G);return}if(!m)return;const Me=U(Fe,xe),_e=Me.x-m.svgX,Ne=Me.y-m.svgY;let st=m.initialWidth,nt=m.initialHeight,Ue={...w},ct={...m.initialCornerRadius};const he=3e3,oe=((Oe=e.template)==null?void 0:Oe.trackType)==="straight";if(oe&&(d==="e"||d==="w"))return;if(oe&&m.fixedEdgeCenter){const{fixedEdgeCenter:ht,fixedEdgeIsSouth:Pt,sinR:St,cosR:G}=m,qe=Me.x-ht.x,ae=Me.y-ht.y,M=Pt?St:-St,L=Pt?-G:G,J=qe*M+ae*L;nt=Math.max(he,J);const pe=ht.x+nt/2*M,ve=ht.y+nt/2*L;Ue={x:pe-st/2,y:ve-nt/2}}else switch(d){case"se":st=Math.max(he,m.initialWidth+_e),nt=Math.max(he,m.initialHeight+Ne);const ht=Math.min(st/m.initialWidth,nt/m.initialHeight);ct={topLeft:m.initialCornerRadius.topLeft*ht,topRight:m.initialCornerRadius.topRight*ht,bottomLeft:m.initialCornerRadius.bottomLeft*ht,bottomRight:m.initialCornerRadius.bottomRight*ht};break;case"nw":st=Math.max(he,m.initialWidth-_e),nt=Math.max(he,m.initialHeight-Ne),Ue.x=m.initialPosition.x+(m.initialWidth-st),Ue.y=m.initialPosition.y+(m.initialHeight-nt);const Pt=Math.min(st/m.initialWidth,nt/m.initialHeight);ct={topLeft:m.initialCornerRadius.topLeft*Pt,topRight:m.initialCornerRadius.topRight*Pt,bottomLeft:m.initialCornerRadius.bottomLeft*Pt,bottomRight:m.initialCornerRadius.bottomRight*Pt};break;case"ne":st=Math.max(he,m.initialWidth+_e),nt=Math.max(he,m.initialHeight-Ne),Ue.y=m.initialPosition.y+(m.initialHeight-nt);const St=Math.min(st/m.initialWidth,nt/m.initialHeight);ct={topLeft:m.initialCornerRadius.topLeft*St,topRight:m.initialCornerRadius.topRight*St,bottomLeft:m.initialCornerRadius.bottomLeft*St,bottomRight:m.initialCornerRadius.bottomRight*St};break;case"sw":st=Math.max(he,m.initialWidth-_e),nt=Math.max(he,m.initialHeight+Ne),Ue.x=m.initialPosition.x+(m.initialWidth-st);const G=Math.min(st/m.initialWidth,nt/m.initialHeight);ct={topLeft:m.initialCornerRadius.topLeft*G,topRight:m.initialCornerRadius.topRight*G,bottomLeft:m.initialCornerRadius.bottomLeft*G,bottomRight:m.initialCornerRadius.bottomRight*G};break;case"e":st=Math.max(he,m.initialWidth+_e);const qe=st/m.initialWidth;ct={topLeft:m.initialCornerRadius.topLeft*qe,topRight:m.initialCornerRadius.topRight*qe,bottomLeft:m.initialCornerRadius.bottomLeft*qe,bottomRight:m.initialCornerRadius.bottomRight*qe};break;case"w":st=Math.max(he,m.initialWidth-_e),Ue.x=m.initialPosition.x+(m.initialWidth-st);const ae=st/m.initialWidth;ct={topLeft:m.initialCornerRadius.topLeft*ae,topRight:m.initialCornerRadius.topRight*ae,bottomLeft:m.initialCornerRadius.bottomLeft*ae,bottomRight:m.initialCornerRadius.bottomRight*ae};break;case"n":nt=Math.max(he,m.initialHeight-Ne),Ue.y=m.initialPosition.y+(m.initialHeight-nt);const M=nt/m.initialHeight;ct={topLeft:m.initialCornerRadius.topLeft*M,topRight:m.initialCornerRadius.topRight*M,bottomLeft:m.initialCornerRadius.bottomLeft*M,bottomRight:m.initialCornerRadius.bottomRight*M};break;case"s":nt=Math.max(he,m.initialHeight+Ne);const L=nt/m.initialHeight;ct={topLeft:m.initialCornerRadius.topLeft*L,topRight:m.initialCornerRadius.topRight*L,bottomLeft:m.initialCornerRadius.bottomLeft*L,bottomRight:m.initialCornerRadius.bottomRight*L};break}const We=Math.min(st,nt)/2;ct={topLeft:Math.min(ct.topLeft,We),topRight:Math.min(ct.topRight,We),bottomLeft:Math.min(ct.bottomLeft,We),bottomRight:Math.min(ct.bottomRight,We)},n(e.id,{width_mm:st,height_mm:nt,cornerRadius:ct}),(Ue.x!==w.x||Ue.y!==w.y)&&r(e.id,Ue)},je=()=>{(a||u)&&s(),o(!1),h(!1),p(null),g(null)};return window.addEventListener("mousemove",ye),window.addEventListener("mouseup",je),window.addEventListener("touchmove",ye,{passive:!1}),window.addEventListener("touchend",je),window.addEventListener("touchcancel",je),()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",je),window.removeEventListener("touchmove",ye),window.removeEventListener("touchend",je),window.removeEventListener("touchcancel",je)}},[a,m,d,e.id,w,v,n,r,s]);const X=((H=e.template)==null?void 0:H.trackType)==="straight",ce=[{type:"nw",x:0,y:0,cursor:"nwse-resize"},{type:"n",x:x/2,y:0,cursor:"ns-resize"},{type:"ne",x,y:0,cursor:"nesw-resize"},{type:"e",x,y:k/2,cursor:"ew-resize"},{type:"se",x,y:k,cursor:"nwse-resize"},{type:"s",x:x/2,y:k,cursor:"ns-resize"},{type:"sw",x:0,y:k,cursor:"nesw-resize"},{type:"w",x:0,y:k/2,cursor:"ew-resize"}],ie=X?ce.filter(ye=>ye.type==="n"||ye.type==="s"):ce,ge=400;return c.jsxs("g",{className:"track-resize-handles",children:[c.jsxs("g",{className:"rotation-handle-group",children:[c.jsx("line",{x1:I,y1:0,x2:I,y2:E,stroke:"#0066CC",strokeWidth:30,strokeDasharray:"100 100",opacity:.5,style:{pointerEvents:"none"}}),c.jsx("circle",{className:"rotation-handle",cx:I,cy:E,r:ge/2,fill:"white",stroke:"#0066CC",strokeWidth:50,style:{cursor:u?"grabbing":"grab",pointerEvents:"all"},onMouseDown:D,onTouchStart:D}),c.jsx("path",{d:`M ${I-100} ${E-50}
              A 100 100 0 1 1 ${I+100} ${E-50}`,fill:"none",stroke:"#0066CC",strokeWidth:40,strokeLinecap:"round",style:{pointerEvents:"none"}}),c.jsx("path",{d:`M ${I+100} ${E-50}
              L ${I+80} ${E-120}
              L ${I+150} ${E-80}
              Z`,fill:"#0066CC",style:{pointerEvents:"none"}})]}),ie.map(ye=>c.jsx("rect",{className:`resize-handle resize-handle--${ye.type}`,x:ye.x-ge/2,y:ye.y-ge/2,width:ge,height:ge,fill:"white",stroke:"#0066CC",strokeWidth:50,rx:40,ry:40,style:{cursor:a&&d===ye.type?"grabbing":ye.cursor,pointerEvents:"all"},onMouseDown:je=>R(je,ye.type),onTouchStart:je=>R(je,ye.type)},ye.type)),a&&c.jsxs("text",{x:x/2,y:k+800,textAnchor:"middle",fontSize:400,fill:"#0066CC",fontWeight:"bold",style:{pointerEvents:"none"},children:[(x/1e3).toFixed(1),"m  ",(k/1e3).toFixed(1),"m"]}),u&&c.jsxs("text",{x:x/2,y:-1500,textAnchor:"middle",fontSize:400,fill:"#0066CC",fontWeight:"bold",style:{pointerEvents:"none"},children:[C.toFixed(0),""]})]})}function CF({geometry:e,parameters:t,boxConfig:n,surfaceColor:r,lineColor:i,isStraightTrack:s}){if(!n||!n.enabled)return null;const{depth_mm:a=800,lineWidth_mm:o=50,perLaneOffsets:u=[],style:h="staggered",direction:d="counterclockwise",startPosition:p=0}=n,m="'Black Ops One', 'Impact', sans-serif",g=r||"#A5362F",v=i||"#E8E3D8",w=h==="staggered"||h==="both",C=h==="straight"||h==="both";return c.jsx("g",{className:"starting-boxes",children:e.lanes.map((x,k)=>{const A=k+1;return s?EF(k,A,t,e,a,o,g,v,m,w,C,u,d):TF(k,A,t,e,a,o,g,v,m,w,C,u,d,p)})})}function EF(e,t,n,r,i,s,a,o,u,h,d,p,m){const g=e*n.laneWidth_mm,v=n.laneWidth_mm,w=m==="clockwise",C=w?r.totalLength-i:0,x=w?0:r.totalLength-i,k=(p[e]||0)*1e3,A=[];if(h&&!d){const j=w?C-k:C+k;A.push(c.jsx(yp,{x:g,y:j,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:!w},`stagger-${t}`))}else if(d&&!h)A.push(c.jsx(yp,{x:g,y:C,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:!w},`straight-${t}`));else if(h&&d){const j=w?C-k:C+k;A.push(c.jsx(yp,{x:g,y:j,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:!w},`stagger-${t}`)),A.push(c.jsx(yp,{x:g,y:x,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:w},`straight-${t}`))}return c.jsx("g",{children:A},`lane-boxes-${t}`)}function yp({x:e,y:t,width:n,height:r,laneNumber:i,boxFillColor:s,lineColor:a,lineWidth:o,fontFamily:u,flipLine:h}){const d=h?t+r:t;return c.jsxs("g",{children:[c.jsx("line",{x1:e,y1:d,x2:e+n,y2:d,stroke:a,strokeWidth:o,strokeLinecap:"butt",pointerEvents:"none"}),c.jsx("text",{x:e+n/2,y:t+r/2,fontSize:Math.min(r*.6,n*.5),fill:a,textAnchor:"middle",dominantBaseline:"middle",fontFamily:u,fontWeight:"bold",pointerEvents:"none",opacity:"0.9",children:i})]})}function TF(e,t,n,r,i,s,a,o,u,h,d,p,m,g=0){var D,R;const v=m==="clockwise",w=r.lanes.length-1,C=(((D=r.lanes[w])==null?void 0:D.perimeter)||0)*1e3,x=C/2,k=g/100*C,A=rS(e,k,w,n),I=(((R=r.lanes[e])==null?void 0:R.perimeter)||0)*1e3/2,E=(p[e]||0)*1e3,U=[];if(h&&!d){const X=v?A+I+E:A+E;U.push(c.jsx(bp,{index:e,laneNumber:t,distance:X,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`stagger-${t}`))}else if(d&&!h){const X=v?A+I:A;U.push(c.jsx(bp,{index:e,laneNumber:t,distance:X,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`straight-${t}`))}else if(h&&d){const X=v?A+I+E:A+E,ce=v?k:k+x,ie=rS(e,ce,w,n),ge=ie;U.push(c.jsx(bp,{index:e,laneNumber:t,distance:X,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`stagger-${t}`)),U.push(c.jsx(bp,{index:e,laneNumber:t,distance:ge,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`straight-${t}`))}return c.jsx("g",{children:U},`lane-boxes-${t}`)}function bp({index:e,laneNumber:t,distance:n,depth_mm:r,parameters:i,boxFillColor:s,lineColor:a,lineWidth:o,fontFamily:u}){const h=tS(e,n,i),d=h.angle+Math.PI/2,p=i.laneWidth_mm/2,m=h.x+Math.cos(d)*p,g=h.y+Math.sin(d)*p,v=h.x-Math.cos(d)*p,w=h.y-Math.sin(d)*p,C=tS(e,n+r/2,i);return c.jsxs("g",{children:[c.jsx("line",{x1:m,y1:g,x2:v,y2:w,stroke:a,strokeWidth:o,strokeLinecap:"butt",pointerEvents:"none"}),c.jsx("text",{x:C.x,y:C.y,fontSize:Math.min(r*.6,i.laneWidth_mm*.5),fill:a,textAnchor:"middle",dominantBaseline:"middle",fontFamily:u,fontWeight:"bold",pointerEvents:"none",opacity:"0.9",transform:`rotate(${C.angle*180/Math.PI+90}, ${C.x}, ${C.y})`,children:t})]})}function iS({track:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,svgRef:s}){var D,R,X;const{parameters:a,position:o,rotation:u,scale:h=1,trackSurfaceColor:d,trackLineColor:p,laneSurfaceColors:m}=e,g=KP(a),v=g.lanes.length>0&&g.lanes[0].isParallel===!0,w=g.totalWidth,C=g.totalLength,x=w/2,k=C/2,A=`translate(${o.x}, ${o.y}) scale(${h}) rotate(${u}, ${x}, ${k})`,j=(d==null?void 0:d.hex)||"#A5362F",I=(p==null?void 0:p.hex)||"#E8E3D8",E=a.lineWidth_mm||50,U=ce=>{const ie=m==null?void 0:m[ce-1];return(ie==null?void 0:ie.hex)||j};return console.log("TrackRenderer - trackSurfaceColor:",d),console.log("TrackRenderer - defaultSurfaceColor:",j),console.log("TrackRenderer - geometry.lanes.length:",g.lanes.length),c.jsxs("g",{className:`track-element ${t?"track-element--selected":""}`,transform:A,style:{cursor:"move"},children:[v?c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:"0",y:"0",width:w,height:C,fill:"transparent",pointerEvents:"all",onMouseDown:n,onTouchStart:r,onDoubleClick:i,style:{cursor:"move"}}),g.lanes.map(ce=>c.jsx("path",{d:ce.outerPath,fill:U(ce.laneNumber),stroke:"none",pointerEvents:"none"},`lane-fill-${ce.laneNumber}`))]}):c.jsx(c.Fragment,{children:g.lanes.map((ce,ie)=>{const ge=g.lanes[ie+1],H=ge?ge.outerPath:ce.innerPath,ye=ie===0;return c.jsx("path",{d:`${ce.outerPath} ${H}`,fill:U(ce.laneNumber),fillRule:"evenodd",stroke:"none",pointerEvents:ye?"all":"none",onMouseDown:ye?n:void 0,onTouchStart:ye?r:void 0,onDoubleClick:ye?i:void 0,style:ye?{cursor:"move"}:void 0},`lane-fill-${ce.laneNumber}`)})}),g.lanes.map((ce,ie)=>c.jsx(jF,{lane:ce,lineColor:I,lineWidth:E,isLastLane:ie===g.lanes.length-1,isStraightTrack:v,geometry:g},`stroke-${ce.laneNumber}`)),((D=a.startingBoxes)==null?void 0:D.enabled)&&c.jsx(CF,{geometry:g,parameters:a,boxConfig:{...a.startingBoxes,perLaneOffsets:((R=e.template)==null?void 0:R.trackType)==="curved"?ZP(g):[]},surfaceColor:j,lineColor:I,isStraightTrack:((X=e.template)==null?void 0:X.trackType)==="straight"}),t&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:"-10",y:"-10",width:w+20,height:C+20,fill:"none",stroke:"#0066CC",strokeWidth:"80",strokeDasharray:"400 400",opacity:"0.5",pointerEvents:"none"}),c.jsx(SF,{track:e,svgRef:s})]})]})}function jF({lane:e,lineColor:t,lineWidth:n,isLastLane:r,isStraightTrack:i,geometry:s}){const{innerPath:a,outerPath:o}=e,u=50;return i?c.jsxs("g",{className:"track-lane-stroke",children:[e.laneNumber===1&&c.jsx("line",{x1:e.laneX,y1:0,x2:e.laneX,y2:s.totalLength,stroke:t,strokeWidth:u,pointerEvents:"none"}),c.jsx("line",{x1:e.laneX+e.laneWidth,y1:0,x2:e.laneX+e.laneWidth,y2:s.totalLength,stroke:t,strokeWidth:u,pointerEvents:"none"})]}):c.jsxs("g",{className:"track-lane-stroke",children:[c.jsx("path",{d:o,fill:"none",stroke:t,strokeWidth:u,pointerEvents:"none"}),r&&c.jsx("path",{d:a,fill:"none",stroke:t,strokeWidth:u,pointerEvents:"none"})]})}const AF=200,QP=30,PF=120;function lh(e=1,t=1){const n=1/e,r=AF*n,i=QP*n,s=r*.25;return{size:r,strokeWidth:i,cornerRadius:s}}function NF(e=1){const t=1/e,n=PF*t,r=n*.7,i=QP*.5*t;return{pointSize:n,handleSize:r,strokeWidth:i}}function ch(e){return{distance:e*2.5,size:e*.8,stemWidth:e*.15}}function uh(e=1,t=1){const n=1/e;return{strokeWidth:60*n,dashArray:`${300*n} ${300*n}`,padding:40}}function sS({motif:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{svgContent:u,originalWidth_mm:h,originalHeight_mm:d,position:p,rotation:m,scale:g}=e,v=fe.useMemo(()=>{if(!u)return null;const U=u.match(/viewBox=["']([^"']+)["']/i);if(U){const X=U[1].split(/\s+/).map(Number);if(X.length>=4)return{width:X[2],height:X[3]}}const D=u.match(/\bwidth=["']?(\d+(?:\.\d+)?)/i),R=u.match(/\bheight=["']?(\d+(?:\.\d+)?)/i);return D&&R?{width:parseFloat(D[1]),height:parseFloat(R[1])}:null},[u]),w=fe.useMemo(()=>{if(!v)return{width:h,height:d};const U=v.width/v.height,D=h/d,R=U>=1,X=D>=1;if(R!==X){console.warn("[MOTIF] Orientation mismatch detected - using SVG viewBox aspect ratio"),console.log("[MOTIF] SVG viewBox:",v,"AR:",U.toFixed(2)),console.log("[MOTIF] Physical dims:",h,"",d,"AR:",D.toFixed(2));const ce=h*d,ie=Math.sqrt(ce*U),ge=ie/U;return{width:ie,height:ge}}return{width:h,height:d}},[v,h,d]),C=w.width*(g||1),x=w.height*(g||1),k=C/2,A=x/2,j=`translate(${p.x}, ${p.y}) rotate(${m||0}, ${k}, ${A})`,I=fe.useMemo(()=>{if(!u)return null;try{let U=u;return U=U.replace(/\s+(width|height)=["'][^"']*["']/gi,""),U.includes("viewBox")||(U=U.replace("<svg",`<svg viewBox="0 0 ${w.width} ${w.height}"`)),U}catch(U){return console.error("[MOTIF] Error processing SVG:",U),u}},[u,w]),E=fe.useMemo(()=>{if(!I)return null;try{return`data:image/svg+xml,${encodeURIComponent(I).replace(/'/g,"%27").replace(/"/g,"%22")}`}catch(U){return console.error("[MOTIF] Error creating data URL:",U),null}},[I]);return E?c.jsxs("g",{className:`motif-element ${t?"motif-element--selected":""}`,transform:j,style:{cursor:"move"},children:[c.jsx("image",{href:E,x:"0",y:"0",width:C,height:x,preserveAspectRatio:"xMidYMid meet",pointerEvents:"none"}),c.jsx("rect",{x:"0",y:"0",width:C,height:x,fill:"transparent",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const U=uh(n,g||1);return c.jsx("rect",{x:"-10",y:"-10",width:C+20,height:x+20,fill:"none",stroke:"#3b82f6",strokeWidth:U.strokeWidth,strokeDasharray:U.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&c.jsx(OF,{width:C,height:x,zoom:n,scale:g||1,onScaleStart:a,onRotateStart:o})]}):c.jsxs("g",{transform:j,children:[c.jsx("rect",{x:"0",y:"0",width:C,height:x,fill:"#f0f0f0",stroke:"#ccc",strokeWidth:"50",strokeDasharray:"200 200"}),c.jsx("text",{x:C/2,y:x/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:Math.min(C,x)/10,fill:"#999",children:"Motif Error"})]})}function OF({width:e,height:t,zoom:n,scale:r,onScaleStart:i,onRotateStart:s}){const{size:a,strokeWidth:o,cornerRadius:u}=lh(n,r),h=ch(a),d=[{x:-a/2,y:-a/2,corner:"nw",cursor:"nwse-resize"},{x:e-a/2,y:-a/2,corner:"ne",cursor:"nesw-resize"},{x:-a/2,y:t-a/2,corner:"sw",cursor:"nesw-resize"},{x:e-a/2,y:t-a/2,corner:"se",cursor:"nwse-resize"}];return c.jsxs("g",{className:"motif-handles",children:[d.map(p=>c.jsx("rect",{x:p.x,y:p.y,width:a,height:a,fill:"#3b82f6",stroke:"#fff",strokeWidth:o,rx:u,style:{cursor:p.cursor},pointerEvents:"all",onMouseDown:m=>{m.stopPropagation(),i==null||i(m,p.corner)},onTouchStart:m=>{m.stopPropagation(),i==null||i(m,p.corner)}},p.corner)),c.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-h.distance+h.size/2,stroke:"#3b82f6",strokeWidth:h.stemWidth,pointerEvents:"none"}),c.jsx("circle",{cx:e/2,cy:-h.distance,r:h.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:o,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),s==null||s(p)},onTouchStart:p=>{p.stopPropagation(),s==null||s(p)}}),c.jsx("path",{d:`M ${e/2-h.size*.4} ${-h.distance}
            A ${h.size*.4} ${h.size*.4} 0 1 1
            ${e/2+h.size*.4} ${-h.distance}`,fill:"none",stroke:"#fff",strokeWidth:o*.7,strokeLinecap:"round",pointerEvents:"none"}),c.jsx("polygon",{points:`${e/2+h.size*.4},${-h.distance-h.size*.25}
                 ${e/2+h.size*.4},${-h.distance+h.size*.25}
                 ${e/2+h.size*.65},${-h.distance}`,fill:"#fff",pointerEvents:"none"})]})}function JP(e,t,n,r=0,i=!1,s=.5){if(i&&e>=3)return MF(e,t,n,s,r);if(e>=32)return IF(t,n);const a=RF(e,t,n);return r>0?eN(a,r):`M ${a.map(o=>`${o.x},${o.y}`).join(" L ")} Z`}function RF(e,t,n){if(e===4)return[{x:0,y:0},{x:t,y:0},{x:t,y:n},{x:0,y:n}];const r=[],i=2*Math.PI/e,s=-Math.PI/2;for(let v=0;v<e;v++){const w=s+i*v;r.push({x:Math.cos(w),y:Math.sin(w)})}let a=1/0,o=-1/0,u=1/0,h=-1/0;for(const v of r)a=Math.min(a,v.x),o=Math.max(o,v.x),u=Math.min(u,v.y),h=Math.max(h,v.y);const d=o-a,p=h-u,m=t/d,g=n/p;return r.map(v=>({x:(v.x-a)*m,y:(v.y-u)*g}))}function MF(e,t,n,r=.5,i=0){const s=LF(e,t,n,r);return i>0?eN(s,i):`M ${s.map(a=>`${a.x},${a.y}`).join(" L ")} Z`}function LF(e,t,n,r=.5){const i=[],s=e*2,a=2*Math.PI/s,o=-Math.PI/2,u=Math.max(.1,Math.min(.9,r));for(let x=0;x<s;x++){const k=o+a*x,A=x%2===0?1:u;i.push({x:Math.cos(k)*A,y:Math.sin(k)*A})}let h=1/0,d=-1/0,p=1/0,m=-1/0;for(const x of i)h=Math.min(h,x.x),d=Math.max(d,x.x),p=Math.min(p,x.y),m=Math.max(m,x.y);const g=d-h,v=m-p,w=t/g,C=n/v;return i.map(x=>({x:(x.x-h)*w,y:(x.y-p)*C}))}function IF(e,t){const n=e/2,r=t/2,i=n,s=r;return`M ${i-n},${s} A ${n},${r} 0 1,1 ${i+n},${s} A ${n},${r} 0 1,1 ${i-n},${s} Z`}function eN(e,t,n,r){if(e.length<3)return"";let i=1/0;for(let m=0;m<e.length;m++){const g=e[m],v=e[(m+1)%e.length],w=Math.sqrt(Math.pow(v.x-g.x,2)+Math.pow(v.y-g.y,2));i=Math.min(i,w)}const s=i/2,a=t/100*s;if(a<1)return`M ${e.map(m=>`${m.x},${m.y}`).join(" L ")} Z`;const o=[];for(let m=0;m<e.length;m++){const g=e[(m-1+e.length)%e.length],v=e[m],w=e[(m+1)%e.length],C=ky({x:g.x-v.x,y:g.y-v.y}),x=ky({x:w.x-v.x,y:w.y-v.y}),k={x:v.x+C.x*a,y:v.y+C.y*a},A={x:v.x+x.x*a,y:v.y+x.y*a};m===0?o.push(`M ${k.x},${k.y}`):o.push(`L ${k.x},${k.y}`),o.push(`Q ${v.x},${v.y} ${A.x},${A.y}`)}const u=e[e.length-1],h=e[0],d=ky({x:u.x-h.x,y:u.y-h.y}),p={x:h.x+d.x*a,y:h.y+d.y*a};return o.push(`L ${p.x},${p.y}`),o.push("Z"),o.join(" ")}function ky(e){const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:{x:e.x/t,y:e.y/t}}function $F(e,t=!1){if(t)return e===5?"Star":`${e}-Point Star`;const n={3:"Triangle",4:"Rectangle",5:"Pentagon",6:"Hexagon",7:"Heptagon",8:"Octagon",9:"Nonagon",10:"Decagon",12:"Dodecagon"};return e>=32?"Circle":n[e]?n[e]:`${e}-gon`}function DF(e,t=!1){return t?"":e>=32?"":e===3?"":e===4?"":e===5?"":e===6?"":`${e}`}function aS({shape:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{sides:u,width_mm:h,height_mm:d,cornerRadius:p,starMode:m,innerRadius:g,position:v,rotation:w,fillColor:C,strokeEnabled:x,strokeColor:k,strokeWidth_mm:A}=e,j=fe.useMemo(()=>JP(u,h,d,p,m,g),[u,h,d,p,m,g]),I=h/2,E=d/2,U=`translate(${v.x}, ${v.y}) rotate(${w||0}, ${I}, ${E})`;return c.jsxs("g",{className:`shape-element ${t?"shape-element--selected":""}`,transform:U,style:{cursor:"move"},children:[c.jsx("path",{d:j,fill:(C==null?void 0:C.hex)||"#609B63",stroke:x&&k?k.hex:"none",strokeWidth:x?A:0,pointerEvents:"none"}),c.jsx("path",{d:j,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(A,100),pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const D=uh(n);return c.jsx("rect",{x:"-10",y:"-10",width:h+20,height:d+20,fill:"none",stroke:"#3b82f6",strokeWidth:D.strokeWidth,strokeDasharray:D.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&c.jsx(zF,{width:h,height:d,zoom:n,onScaleStart:a,onRotateStart:o})]})}function zF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=lh(n),u=ch(s),h=[{x:e/2-s/2,y:-s/2,corner:"n",cursor:"ns-resize"},{x:e/2-s/2,y:t-s/2,corner:"s",cursor:"ns-resize"},{x:e-s/2,y:t/2-s/2,corner:"e",cursor:"ew-resize"},{x:-s/2,y:t/2-s/2,corner:"w",cursor:"ew-resize"}];return c.jsxs("g",{className:"shape-handles",children:[h.map(d=>c.jsx("rect",{x:d.x,y:d.y,width:s,height:s,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:d.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,d.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,d.corner)}},d.corner)),c.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-u.distance+u.size/2,stroke:"#3b82f6",strokeWidth:u.stemWidth,pointerEvents:"none"}),c.jsx("circle",{cx:e/2,cy:-u.distance,r:u.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:d=>{d.stopPropagation(),i==null||i(d)},onTouchStart:d=>{d.stopPropagation(),i==null||i(d)}}),c.jsx("path",{d:`M ${e/2-u.size*.4} ${-u.distance}
            A ${u.size*.4} ${u.size*.4} 0 1 1
            ${e/2+u.size*.4} ${-u.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),c.jsx("polygon",{points:`${e/2+u.size*.4},${-u.distance-u.size*.25}
                 ${e/2+u.size*.4},${-u.distance+u.size*.25}
                 ${e/2+u.size*.65},${-u.distance}`,fill:"#fff",pointerEvents:"none"})]})}function tN({controlPoints:e,width:t,height:n,zoom:r=1,onPointDrag:i,onHandleDrag:s,onDragEnd:a,showHandles:o=!0,selectedPointIndex:u,onPointSelect:h,onPointDelete:d,onAddPoint:p,closed:m=!0}){const[g,v]=fe.useState(null),[w,C]=fe.useState(null),{pointSize:x,handleSize:k,strokeWidth:A}=NF(r),j=fe.useCallback((R,X)=>{R.stopPropagation(),R.preventDefault(),h==null||h(X),v({type:"point",index:X}),C({x:R.clientX,y:R.clientY})},[h]),I=fe.useCallback((R,X)=>{R.preventDefault(),R.stopPropagation(),d==null||d(X)},[d]),E=fe.useCallback((R,X)=>{if(R.preventDefault(),R.stopPropagation(),!p)return;const ce=document.querySelector(".court-canvas__svg");if(!ce)return;const ie=R.target.closest("g.path-element");if(!ie)return;const ge=ce.createSVGPoint();ge.x=R.clientX,ge.y=R.clientY;const H=ie.getScreenCTM();if(!H)return;const ye=ge.matrixTransform(H.inverse()),je=ye.x,ke=ye.y,Fe=e[X],xe=(X+1)%e.length,Me=e[xe],_e=Fe.x*t,Ne=Fe.y*n,st=Me.x*t,nt=Me.y*n,Ue=st-_e,ct=nt-Ne,he=Ue*Ue+ct*ct;if(he===0){p(X+1,Fe.x,Fe.y);return}let oe=((je-_e)*Ue+(ke-Ne)*ct)/he;oe=Math.max(.1,Math.min(.9,oe));const We=_e+oe*Ue,Oe=Ne+oe*ct,ht=We/t,Pt=Oe/n;p(X+1,ht,Pt)},[e,t,n,p]),U=fe.useCallback((R,X,ce)=>{R.stopPropagation(),R.preventDefault(),v({type:"handle",index:X,handleType:ce}),C({x:R.clientX,y:R.clientY})},[]);if(fe.useEffect(()=>{if(!g)return;const R=ce=>{if(!w)return;const ie=document.querySelector(".court-canvas__svg");if(!ie)return;const ge=ie.getBoundingClientRect(),H=ie.viewBox.baseVal,ye=H.width/ge.width,je=H.height/ge.height,ke=(ce.clientX-w.x)*ye,Fe=(ce.clientY-w.y)*je;if(g.type==="point"){const xe=e[g.index],Me=xe.x+ke/t,_e=xe.y+Fe/n;i==null||i(g.index,Me,_e)}else if(g.type==="handle"){const Me=e[g.index][g.handleType],_e=Me.x+ke/t,Ne=Me.y+Fe/n;s==null||s(g.index,g.handleType,_e,Ne)}C({x:ce.clientX,y:ce.clientY})},X=()=>{v(null),C(null),a==null||a()};return window.addEventListener("mousemove",R),window.addEventListener("mouseup",X),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",X)}},[g,w,e,t,n,i,s,a]),!e||e.length===0)return null;const D=[];if(p&&e.length>=2){const R=m?e.length:e.length-1;for(let X=0;X<R;X++){const ce=e[X],ie=e[(X+1)%e.length];D.push({index:X,x1:ce.x*t,y1:ce.y*n,x2:ie.x*t,y2:ie.y*n})}}return c.jsxs("g",{className:"blob-edit-handles",children:[D.map(R=>c.jsx("line",{x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,stroke:"transparent",strokeWidth:x*2,style:{cursor:"copy"},pointerEvents:"stroke",onDoubleClick:X=>E(X,R.index)},`segment-${R.index}`)),e.map((R,X)=>{const ce=R.x*t,ie=R.y*n,ge=ce+R.handleIn.x*t,H=ie+R.handleIn.y*n,ye=ce+R.handleOut.x*t,je=ie+R.handleOut.y*n,ke=(g==null?void 0:g.type)==="point"&&(g==null?void 0:g.index)===X,Fe=(g==null?void 0:g.type)==="handle"&&(g==null?void 0:g.index)===X&&(g==null?void 0:g.handleType)==="handleIn",xe=(g==null?void 0:g.type)==="handle"&&(g==null?void 0:g.index)===X&&(g==null?void 0:g.handleType)==="handleOut",Me=u===X;return c.jsxs("g",{className:"blob-control-point-group",children:[o&&c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:ce,y1:ie,x2:ge,y2:H,stroke:"#94a3b8",strokeWidth:A,strokeDasharray:`${A*3} ${A*2}`,pointerEvents:"none",opacity:"0.8"}),c.jsx("line",{x1:ce,y1:ie,x2:ye,y2:je,stroke:"#94a3b8",strokeWidth:A,strokeDasharray:`${A*3} ${A*2}`,pointerEvents:"none",opacity:"0.8"}),c.jsx("circle",{cx:ge,cy:H,r:k,fill:Fe?"#f97316":"#ffffff",stroke:"#64748b",strokeWidth:A,style:{cursor:"crosshair"},pointerEvents:"all",onMouseDown:_e=>U(_e,X,"handleIn")}),c.jsx("circle",{cx:ye,cy:je,r:k,fill:xe?"#f97316":"#ffffff",stroke:"#64748b",strokeWidth:A,style:{cursor:"crosshair"},pointerEvents:"all",onMouseDown:_e=>U(_e,X,"handleOut")})]}),c.jsx("circle",{cx:ce,cy:ie,r:x,fill:Me?"#ef4444":ke?"#f97316":"#3b82f6",stroke:"#ffffff",strokeWidth:A*1.3,style:{cursor:"move"},pointerEvents:"all",onMouseDown:_e=>j(_e,X),onContextMenu:_e=>I(_e,X)}),c.jsx("text",{x:ce,y:ie+x*.35,textAnchor:"middle",fontSize:x*.8,fill:"#ffffff",fontWeight:"bold",pointerEvents:"none",children:X+1})]},X)})]})}function oS({shape:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o,onPointDrag:u,onHandleDrag:h,onDragEnd:d,selectedPointIndex:p,onPointSelect:m,onPointDelete:g}){const{controlPoints:v,width_mm:w,height_mm:C,position:x,rotation:k,fillColor:A,strokeEnabled:j,strokeColor:I,strokeWidth_mm:E,editPointsVisible:U}=e,D=fe.useMemo(()=>Kz(v,w,C),[v,w,C]),R=w/2,X=C/2,ce=`translate(${x.x}, ${x.y}) rotate(${k||0}, ${R}, ${X})`;return c.jsxs("g",{className:`blob-element ${t?"blob-element--selected":""}`,transform:ce,style:{cursor:"move"},children:[c.jsx("path",{d:D,fill:(A==null?void 0:A.hex)||"#609B63",stroke:j&&I?I.hex:"none",strokeWidth:j?E:0,pointerEvents:"none"}),c.jsx("path",{d:D,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(E||0,100),pointerEvents:"all",onTouchStart:i,onMouseDown:r,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const ie=uh(n);return c.jsx("rect",{x:"-10",y:"-10",width:w+20,height:C+20,fill:"none",stroke:"#3b82f6",strokeWidth:ie.strokeWidth,strokeDasharray:ie.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&c.jsx(FF,{width:w,height:C,zoom:n,onScaleStart:a,onRotateStart:o}),t&&v&&U&&c.jsx(tN,{controlPoints:v,width:w,height:C,zoom:n,onPointDrag:u,onHandleDrag:h,onDragEnd:d,showHandles:!0,selectedPointIndex:p,onPointSelect:m,onPointDelete:g})]})}function FF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=lh(n),u=ch(s),h=[{x:-s/2,y:-s/2,corner:"nw",cursor:"nwse-resize"},{x:e-s/2,y:-s/2,corner:"ne",cursor:"nesw-resize"},{x:-s/2,y:t-s/2,corner:"sw",cursor:"nesw-resize"},{x:e-s/2,y:t-s/2,corner:"se",cursor:"nwse-resize"}];return c.jsxs("g",{className:"blob-resize-handles",children:[h.map(d=>c.jsx("rect",{x:d.x,y:d.y,width:s,height:s,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:d.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,d.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,d.corner)}},d.corner)),c.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-u.distance+u.size/2,stroke:"#3b82f6",strokeWidth:u.stemWidth,pointerEvents:"none"}),c.jsx("circle",{cx:e/2,cy:-u.distance,r:u.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:d=>{d.stopPropagation(),i==null||i(d)},onTouchStart:d=>{d.stopPropagation(),i==null||i(d)}}),c.jsx("path",{d:`M ${e/2-u.size*.4} ${-u.distance}
            A ${u.size*.4} ${u.size*.4} 0 1 1
            ${e/2+u.size*.4} ${-u.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),c.jsx("polygon",{points:`${e/2+u.size*.4},${-u.distance-u.size*.25}
                 ${e/2+u.size*.4},${-u.distance+u.size*.25}
                 ${e/2+u.size*.65},${-u.distance}`,fill:"#fff",pointerEvents:"none"})]})}function lS({shape:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,onScaleStart:s,onRotateStart:a,onPointDrag:o,onHandleDrag:u,onDragEnd:h,selectedPointIndex:d,onPointSelect:p,onPointDelete:m,onAddPoint:g,zoom:v=1}){const{controlPoints:w,width_mm:C,height_mm:x,position:k,rotation:A,fillColor:j,strokeEnabled:I,strokeColor:E,strokeWidth_mm:U,editPointsVisible:D,closed:R,smooth:X}=e,ce=fe.useMemo(()=>!w||w.length<2?"":qP(w,C,x,R,X),[w,C,x,R,X]),ie=C/2,ge=x/2,H=`translate(${k.x}, ${k.y}) rotate(${A||0}, ${ie}, ${ge})`;return ce?c.jsxs("g",{className:`path-element ${t?"path-element--selected":""}`,transform:H,style:{cursor:"move"},children:[c.jsx("path",{d:ce,fill:R?(j==null?void 0:j.hex)||"#609B63":"none",stroke:I&&E?E.hex:R?"none":(j==null?void 0:j.hex)||"#609B63",strokeWidth:I?U:R?0:50,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),c.jsx("path",{d:ce,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(U||0,200),pointerEvents:"all",onTouchStart:r,onMouseDown:n,onDoubleClick:i,style:{cursor:"move"}}),t&&c.jsx("rect",{x:"-10",y:"-10",width:C+20,height:x+20,fill:"none",stroke:"#3b82f6",strokeWidth:"80",strokeDasharray:"400 400",opacity:"0.7",pointerEvents:"none"}),t&&c.jsx(BF,{width:C,height:x,onScaleStart:s,onRotateStart:a}),t&&w&&D&&c.jsx(tN,{controlPoints:w,width:C,height:x,zoom:v,onPointDrag:o,onHandleDrag:u,onDragEnd:h,showHandles:X,selectedPointIndex:d,onPointSelect:p,onPointDelete:m,onAddPoint:g,closed:R})]}):null}function BF({width:e,height:t,onScaleStart:n,onRotateStart:r}){const i=Math.min(e,t)*.08,o=Math.max(150,Math.min(400,i)),u=[{x:-o/2,y:-o/2,corner:"nw",cursor:"nwse-resize"},{x:e-o/2,y:-o/2,corner:"ne",cursor:"nesw-resize"},{x:-o/2,y:t-o/2,corner:"sw",cursor:"nesw-resize"},{x:e-o/2,y:t-o/2,corner:"se",cursor:"nwse-resize"}],h=o*2.5,d=o*.8;return c.jsxs("g",{className:"path-resize-handles",children:[u.map(p=>c.jsx("rect",{x:p.x,y:p.y,width:o,height:o,fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",rx:o/4,style:{cursor:p.cursor},pointerEvents:"all",onMouseDown:m=>{m.stopPropagation(),n==null||n(m,p.corner)},onTouchStart:m=>{m.stopPropagation(),n==null||n(m,p.corner)}},p.corner)),c.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-h+d/2,stroke:"#3b82f6",strokeWidth:"30",pointerEvents:"none"}),c.jsx("circle",{cx:e/2,cy:-h,r:d,fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",style:{cursor:"grab"},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p)}}),c.jsx("path",{d:`M ${e/2-d*.4} ${-h}
            A ${d*.4} ${d*.4} 0 1 1
            ${e/2+d*.4} ${-h}`,fill:"none",stroke:"#fff",strokeWidth:"25",strokeLinecap:"round",pointerEvents:"none"}),c.jsx("polygon",{points:`${e/2+d*.4},${-h-d*.25}
                 ${e/2+d*.4},${-h+d*.25}
                 ${e/2+d*.65},${-h}`,fill:"#fff",pointerEvents:"none"})]})}function yo(e,t,n,r="normal",i="normal"){yo._canvas||(yo._canvas=document.createElement("canvas"),yo._ctx=yo._canvas.getContext("2d"));const s=yo._ctx,a=i==="italic"?"italic ":"",o=r==="bold"?"bold ":"";s.font=`${a}${o}${n}px ${t}`;const u=s.measureText(e||"Double-click to edit");return{width:Math.max(u.width,100),height:n*1.2}}function UF(){return[{name:"Open Sans",family:"Open Sans, sans-serif"},{name:"Roboto",family:"Roboto, sans-serif"},{name:"Montserrat",family:"Montserrat, sans-serif"},{name:"Oswald",family:"Oswald, sans-serif"},{name:"Black Ops One",family:"Black Ops One, sans-serif"},{name:"Playfair Display",family:"Playfair Display, serif"},{name:"Arial",family:"Arial, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, sans-serif"}]}const HF=500,qa=40;function cS({text:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{content:u,fontFamily:h,fontSize_mm:d,scale_x:p=1,scale_y:m=1,fontWeight:g,fontStyle:v,textAlign:w,position:C,rotation:x,fillColor:k,strokeColor:A,strokeWidth_mm:j}=e,I=d||HF,E=fe.useMemo(()=>yo(u||"Text",h,I,g,v),[u,h,I,g,v]);fe.useMemo(()=>({width:E.width*p,height:I*1.2*m}),[E.width,I,p,m]);const U=fe.useMemo(()=>{switch(w){case"center":return-E.width/2;case"right":return-E.width;default:return 0}},[w,E.width]),D=`translate(${C.x}, ${C.y}) rotate(${x||0}) scale(${p}, ${m})`,R=u||"Text",X=uh(n,Math.max(p,m));return c.jsxs("g",{className:`text-element ${t?"text-element--selected":""}`,transform:D,children:[c.jsx("text",{x:"0",y:"0",fontFamily:h,fontSize:I,fontWeight:g,fontStyle:v,textAnchor:w==="center"?"middle":w==="right"?"end":"start",fill:(k==null?void 0:k.hex)||"#1C1C1C",stroke:(A==null?void 0:A.hex)||"none",strokeWidth:j||0,strokeLinejoin:"round",strokeLinecap:"round",paintOrder:"stroke fill",style:{cursor:"move",userSelect:"none"},pointerEvents:"none",children:R}),c.jsx("rect",{x:U-qa/2,y:-I*.85,width:E.width+qa,height:I*1.2,fill:"transparent",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&c.jsxs("g",{transform:`scale(${1/p}, ${1/m})`,children:[c.jsx("rect",{x:(U-qa)*p,y:(-I-qa)*m,width:(E.width+qa*2)*p,height:(I*1.2+qa*2)*m,fill:"none",stroke:"#3b82f6",strokeWidth:X.strokeWidth,strokeDasharray:X.dashArray,opacity:"0.7",pointerEvents:"none"}),c.jsx(WF,{bounds:E,fontSize:I,alignOffset:U,scale_x:p,scale_y:m,zoom:n,onScaleStart:a,onRotateStart:o})]})]})}function WF({bounds:e,fontSize:t,alignOffset:n,scale_x:r,scale_y:i,zoom:s,onScaleStart:a,onRotateStart:o}){const{size:u,strokeWidth:h,cornerRadius:d}=lh(s),p=ch(u),m=(n-qa)*r,g=(-t-qa)*i,v=(e.width+qa*2)*r,w=(t*1.2+qa*2)*i,C=[{x:m-u/2,y:g-u/2,corner:"nw",cursor:"nwse-resize"},{x:m+v-u/2,y:g-u/2,corner:"ne",cursor:"nesw-resize"},{x:m-u/2,y:g+w-u/2,corner:"sw",cursor:"nesw-resize"},{x:m+v-u/2,y:g+w-u/2,corner:"se",cursor:"nwse-resize"}],x=m+v/2;return c.jsxs("g",{className:"text-handles",children:[C.map(k=>c.jsx("rect",{x:k.x,y:k.y,width:u,height:u,fill:"#3b82f6",stroke:"#fff",strokeWidth:h,rx:d,style:{cursor:k.cursor},pointerEvents:"all",onMouseDown:A=>{A.stopPropagation(),a==null||a(A,k.corner)},onTouchStart:A=>{A.stopPropagation(),a==null||a(A,k.corner)}},k.corner)),c.jsx("line",{x1:x,y1:g,x2:x,y2:g-p.distance+p.size/2,stroke:"#3b82f6",strokeWidth:p.stemWidth,pointerEvents:"none"}),c.jsx("circle",{cx:x,cy:g-p.distance,r:p.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:h,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:k=>{k.stopPropagation(),o==null||o(k)},onTouchStart:k=>{k.stopPropagation(),o==null||o(k)}}),c.jsx("path",{d:`M ${x-p.size*.4} ${g-p.distance}
            A ${p.size*.4} ${p.size*.4} 0 1 1
            ${x+p.size*.4} ${g-p.distance}`,fill:"none",stroke:"#fff",strokeWidth:h*.7,strokeLinecap:"round",pointerEvents:"none"}),c.jsx("polygon",{points:`${x+p.size*.4},${g-p.distance-p.size*.25}
                 ${x+p.size*.4},${g-p.distance+p.size*.25}
                 ${x+p.size*.65},${g-p.distance}`,fill:"#fff",pointerEvents:"none"})]})}function VF({zone:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{id:u,shapeType:h,sides:d,width_mm:p,height_mm:m,cornerRadius:g,position:v,rotation:w,controlPoints:C}=e,x=`exclusion-crosshatch-${u}`,k=fe.useMemo(()=>h==="path"&&C?qP(C,p,m,!0):JP(d||4,p,m,g||0),[h,d,p,m,g,C]),A=p/2,j=m/2,I=`translate(${v.x}, ${v.y}) rotate(${w||0}, ${A}, ${j})`,E=Math.min(p,m)*.02,R=Math.max(100,Math.min(500,E)),X=R*.15;return c.jsxs("g",{className:`exclusion-zone-element ${t?"exclusion-zone-element--selected":""}`,transform:I,style:{cursor:"move"},children:[c.jsx("defs",{children:c.jsxs("pattern",{id:x,patternUnits:"userSpaceOnUse",width:R,height:R,patternTransform:"rotate(45)",children:[c.jsx("rect",{width:R,height:R,fill:"#e5e5e5"}),c.jsx("line",{x1:"0",y1:"0",x2:"0",y2:R,stroke:"#999",strokeWidth:X}),c.jsx("line",{x1:R/2,y1:"0",x2:R/2,y2:R,stroke:"#999",strokeWidth:X})]})}),c.jsx("path",{d:k,fill:`url(#${x})`,stroke:"#666",strokeWidth:"60",strokeDasharray:"200 100",pointerEvents:"none"}),c.jsx("path",{d:k,fill:"transparent",stroke:"transparent",strokeWidth:"200",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const ce=uh(n);return c.jsx("rect",{x:"-10",y:"-10",width:p+20,height:m+20,fill:"none",stroke:"#ef4444",strokeWidth:ce.strokeWidth,strokeDasharray:ce.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&c.jsx(GF,{width:p,height:m,zoom:n,onScaleStart:a,onRotateStart:o})]})}function GF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=lh(n),u=ch(s),h=[{x:e/2-s/2,y:-s/2,corner:"n",cursor:"ns-resize"},{x:e/2-s/2,y:t-s/2,corner:"s",cursor:"ns-resize"},{x:e-s/2,y:t/2-s/2,corner:"e",cursor:"ew-resize"},{x:-s/2,y:t/2-s/2,corner:"w",cursor:"ew-resize"}];return c.jsxs("g",{className:"exclusion-zone-handles",children:[h.map(d=>c.jsx("rect",{x:d.x,y:d.y,width:s,height:s,fill:"#ef4444",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:d.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,d.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,d.corner)}},d.corner)),c.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-u.distance+u.size/2,stroke:"#ef4444",strokeWidth:u.stemWidth,pointerEvents:"none"}),c.jsx("circle",{cx:e/2,cy:-u.distance,r:u.size,fill:"#ef4444",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:d=>{d.stopPropagation(),i==null||i(d)},onTouchStart:d=>{d.stopPropagation(),i==null||i(d)}}),c.jsx("path",{d:`M ${e/2-u.size*.4} ${-u.distance}
            A ${u.size*.4} ${u.size*.4} 0 1 1
            ${e/2+u.size*.4} ${-u.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),c.jsx("polygon",{points:`${e/2+u.size*.4},${-u.distance-u.size*.25}
                 ${e/2+u.size*.4},${-u.distance+u.size*.25}
                 ${e/2+u.size*.65},${-u.distance}`,fill:"#fff",pointerEvents:"none"})]})}function qF({groupId:e,zoom:t=1,onDragStart:n,onScaleStart:r,onRotateStart:i,screenToSVG:s}){const{groups:a,selectedGroupId:o,editingGroupId:u,shapes:h,selectGroup:d,enterGroup:p,updateGroupPosition:m,commitGroupMove:g}=rn(),v=a[e];if(!v||!v.bounds||u===e)return null;const w=o===e,{x:C,y:x,width:k,height:A}=v.bounds,{size:j,strokeWidth:I,cornerRadius:E}=lh(t),U=ch(j),D=j/2,R=uh(t),X=j*.8,ce=ye=>{if(ye.stopPropagation(),d(e),!v.locked&&n&&s){const je=ye.touches?ye.touches[0].clientX:ye.clientX,ke=ye.touches?ye.touches[0].clientY:ye.clientY,Fe=s(je,ke);n(e,{x:Fe.x-v.bounds.x,y:Fe.y-v.bounds.y})}},ie=ye=>{ye.stopPropagation(),p(e)},ge=(ye,je)=>{ye.stopPropagation(),r&&r(ye,e,je)},H=ye=>{ye.stopPropagation(),i&&i(ye,e)};return v.childIds.map(ye=>h[ye]).filter(Boolean),c.jsxs("g",{className:"group-element",children:[c.jsx("rect",{x:C,y:x,width:k,height:A,fill:"transparent",stroke:w?"#9333ea":"#a855f7",strokeWidth:w?R.strokeWidth:R.strokeWidth*.5,strokeDasharray:w?"none":R.dashArray,rx:E,ry:E,style:{cursor:"move"},onMouseDown:ce,onTouchStart:ce,onDoubleClick:ie}),!w&&c.jsx("text",{x:C+I,y:x-I,fontSize:X,fill:"#9333ea",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"500",children:v.compoundType?`${v.compoundType.charAt(0).toUpperCase()+v.compoundType.slice(1)} Group`:v.customName||"Group"}),w&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:C-D,y:x-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nwse-resize"},onMouseDown:ye=>ge(ye,"nw"),onTouchStart:ye=>ge(ye,"nw")}),c.jsx("rect",{x:C+k-D,y:x-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nesw-resize"},onMouseDown:ye=>ge(ye,"ne"),onTouchStart:ye=>ge(ye,"ne")}),c.jsx("rect",{x:C-D,y:x+A-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nesw-resize"},onMouseDown:ye=>ge(ye,"sw"),onTouchStart:ye=>ge(ye,"sw")}),c.jsx("rect",{x:C+k-D,y:x+A-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nwse-resize"},onMouseDown:ye=>ge(ye,"se"),onTouchStart:ye=>ge(ye,"se")}),c.jsx("rect",{x:C+k/2-D,y:x-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ns-resize"},onMouseDown:ye=>ge(ye,"n"),onTouchStart:ye=>ge(ye,"n")}),c.jsx("rect",{x:C+k/2-D,y:x+A-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ns-resize"},onMouseDown:ye=>ge(ye,"s"),onTouchStart:ye=>ge(ye,"s")}),c.jsx("rect",{x:C-D,y:x+A/2-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ew-resize"},onMouseDown:ye=>ge(ye,"w"),onTouchStart:ye=>ge(ye,"w")}),c.jsx("rect",{x:C+k-D,y:x+A/2-D,width:j,height:j,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ew-resize"},onMouseDown:ye=>ge(ye,"e"),onTouchStart:ye=>ge(ye,"e")}),c.jsx("line",{x1:C+k/2,y1:x,x2:C+k/2,y2:x-U.distance+U.size/2,stroke:"#9333ea",strokeWidth:U.stemWidth}),c.jsx("circle",{cx:C+k/2,cy:x-U.distance,r:U.size,fill:"white",stroke:"#9333ea",strokeWidth:I,style:{cursor:"grab"},onMouseDown:H,onTouchStart:H}),c.jsx("text",{x:C+k/2,y:x-U.distance-j-X*.5,fontSize:X,fill:"#9333ea",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"600",textAnchor:"middle",children:v.compoundType?`${v.compoundType.charAt(0).toUpperCase()+v.compoundType.slice(1)}`:v.customName||"Group"}),c.jsxs("g",{transform:`translate(${C+k+D}, ${x-D})`,children:[c.jsx("circle",{cx:0,cy:0,r:D,fill:"#9333ea"}),c.jsx("text",{x:0,y:0,fontSize:X*.7,fill:"white",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"600",textAnchor:"middle",dominantBaseline:"central",children:v.childIds.length})]})]})]})}function uS(e,t,n){if(!e||e.type==="rectangle"||!e.controlPoints)return null;const r=e.controlPoints;if(!r||r.length<3)return null;const i=r.map(a=>({x:a.x*t,y:a.y*n}));let s=`M ${i[0].x} ${i[0].y}`;for(let a=1;a<i.length;a++)s+=` L ${i[a].x} ${i[a].y}`;return s+=" Z",s}const YF=fe.forwardRef(function(t,n){var rs,Lo;const r=fe.useRef(null),i=fe.useRef(null);fe.useImperativeHandle(n,()=>r.current);const[s,a]=fe.useState(1),[o,u]=fe.useState({x:0,y:0}),[h,d]=fe.useState(!1),[p,m]=fe.useState({x:0,y:0}),[g,v]=fe.useState(!1),[w,C]=fe.useState({active:!1,initialDistance:0,initialZoom:1,initialPan:{x:0,y:0},initialCenter:{x:0,y:0}}),[x,k]=fe.useState(!1),[A,j]=fe.useState(null),[I,E]=fe.useState(null),[U,D]=fe.useState(null),[R,X]=fe.useState(null),[ce,ie]=fe.useState(null),[ge,H]=fe.useState(null),[ye,je]=fe.useState(null),[ke,Fe]=fe.useState(null),xe=fe.useRef(null),[Me,_e]=fe.useState(null),Ne=fe.useRef(null),st=fe.useRef(0),[nt,Ue]=fe.useState(!1),[ct,he]=fe.useState(null),[oe,We]=fe.useState(null),[Oe,ht]=fe.useState(!1),[Pt,St]=fe.useState(null),[G,qe]=fe.useState(null),[ae,M]=fe.useState(!1),[L,J]=fe.useState(null),[pe,ve]=fe.useState(null),[me,Le]=fe.useState(!1),[Xe,De]=fe.useState(null),[l,f]=fe.useState(null),[b,_]=fe.useState(!1),[S,P]=fe.useState(null),[T,N]=fe.useState(null),[$,F]=fe.useState(!1),[q,Q]=fe.useState(null),[K,W]=fe.useState(null),[Y,B]=fe.useState(!1),[Z,V]=fe.useState(null),[ne,z]=fe.useState(null),[te,se]=fe.useState(!1),[ue,re]=fe.useState(null),[be,Se]=fe.useState(null),[Pe,ze]=fe.useState(!1),[we,$e]=fe.useState(null),[Be,Ye]=fe.useState(null),[Qe,Je]=fe.useState(!1),[dt,pt]=fe.useState(null),[Tt,wt]=fe.useState(null),[Ae,Ke]=fe.useState(null),[yt,At]=fe.useState(0),[_t,It]=fe.useState(null),{surface:jt,courts:Dt,tracks:Bt,motifs:Mt,shapes:tn,texts:nn,exclusionZones:xn,elementOrder:Cn,selectedCourtId:vt,selectedTrackId:En,selectedMotifId:On,selectedShapeId:wn,selectedTextId:Sr,selectedExclusionZoneId:Nr,snapToGrid:cr,gridSize_mm:ur,selectCourt:pr,deselectCourt:Lr,selectTrack:Kr,deselectTrack:$n,selectMotif:Jn,deselectMotif:yi,selectShape:_i,deselectShape:Zr,selectText:bi,deselectText:Ni,selectExclusionZone:hr,deselectExclusionZone:dr,updateCourtPosition:tr,updateTrackPosition:Qr,updateMotifPosition:Vr,updateMotifScale:mr,updateMotifRotation:Qt,updateShapePosition:Ir,updateShapeDimensions:bn,updateShapeRotation:Vn,updateTextPosition:Tn,updateTextScale:Gn,updateTextRotation:Gr,showPropertiesPanel:Yn,setShowPropertiesPanel:y,updateExclusionZonePosition:O,updateExclusionZoneDimensions:ee,updateExclusionZoneRotation:le,updateBlobControlPoint:Ce,updateBlobHandle:et,commitBlobEdit:it,pathDrawingMode:bt,activePathId:xt,addPointToPath:Zt,finishPath:sn,cancelPath:Pn,updatePathControlPoint:sr,updatePathHandle:ts,commitPathEdit:Ut,removePointFromPath:He,addPointToExistingPath:kt,groups:Ot,selectedGroupId:Fn,selectedElementIds:vn,editingGroupId:nr,selectGroup:Jr,deselectGroup:Oi,enterGroup:ta,exitGroup:na,addToSelection:fr,clearMultiSelection:Ri,updateGroupPosition:ai,updateGroupScale:vs,updateGroupRotation:Sl,commitGroupMove:xs,setZoom:Mo,setInteracting:Ze}=rn();fe.useEffect(()=>{Mo(s)},[s,Mo]);const ft=fe.useCallback((de,Ve)=>!Me||Me.id!==Ve||!de?de:{...de,position:{x:de.position.x+Me.offset.x,y:de.position.y+Me.offset.y}},[Me]),at=fe.useCallback((de,Ve)=>{const Ee=r.current;if(!Ee||!Ee.getScreenCTM())return{x:0,y:0};const Re=Ee.createSVGPoint();Re.x=de,Re.y=Ve;const rt=Ee.getScreenCTM();if(!rt)return{x:0,y:0};const ot=Re.matrixTransform(rt.inverse());return{x:ot.x,y:ot.y}},[]),Et=(de,Ve)=>{if(de.stopPropagation(),de.shiftKey){fr(Ve);return}vn.length>0&&Ri(),pr(Ve);const Re=Dt[Ve];if(Re!=null&&Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot);j({x:tt.x-Re.position.x,y:tt.y-Re.position.y}),E(Ve),k(!0)},pn=(de,Ve)=>{de.stopPropagation(),pr(Ve),rn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},zt=(de,Ve)=>{if(de.stopPropagation(),de.shiftKey){fr(Ve);return}vn.length>0&&Ri(),Kr(Ve);const Re=Bt[Ve];if(Re!=null&&Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot);j({x:tt.x-Re.position.x,y:tt.y-Re.position.y}),D(Ve),k(!0)},Ft=(de,Ve)=>{de.stopPropagation(),Kr(Ve),rn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Vt=(de,Ve)=>{if(de.stopPropagation(),de.shiftKey){fr(Ve);return}vn.length>0&&Ri(),Jn(Ve);const Re=Mt[Ve];if(Re!=null&&Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot);j({x:tt.x-Re.position.x,y:tt.y-Re.position.y}),X(Ve),k(!0)},jn=(de,Ve)=>{de.stopPropagation(),Jn(Ve),rn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},qn=(de,Ve,Ee)=>{de.stopPropagation();const Re=Mt[Ve];if(!Re||Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot),mt=Re.originalWidth_mm*(Re.scale||1),ut=Re.originalHeight_mm*(Re.scale||1);let Ct;switch(Ee){case"nw":Ct={x:Re.position.x+mt,y:Re.position.y+ut};break;case"ne":Ct={x:Re.position.x,y:Re.position.y+ut};break;case"sw":Ct={x:Re.position.x+mt,y:Re.position.y};break;case"se":default:Ct={x:Re.position.x,y:Re.position.y};break}const $t=Math.sqrt(Math.pow(tt.x-Ct.x,2)+Math.pow(tt.y-Ct.y,2));We({initialDistance:$t,originalScale:Re.scale||1,originalWidth:mt,originalHeight:ut,corner:Ee,anchorPoint:Ct}),he(Ve),Ue(!0)},Bn=(de,Ve)=>{de.stopPropagation();const Ee=Mt[Ve];if(!Ee||Ee.locked)return;const Re=de.touches?de.touches[0].clientX:de.clientX,rt=de.touches?de.touches[0].clientY:de.clientY,ot=at(Re,rt),tt=Ee.originalWidth_mm*(Ee.scale||1),mt=Ee.originalHeight_mm*(Ee.scale||1),ut={x:Ee.position.x+tt/2,y:Ee.position.y+mt/2},Ct=Math.atan2(ot.y-ut.y,ot.x-ut.x)*(180/Math.PI);qe({initialAngle:Ct,originalRotation:Ee.rotation||0,motifCenter:ut}),St(Ve),ht(!0)},Cr=de=>{for(const[Ve,Ee]of Object.entries(Ot))if(Ee.childIds.includes(de))return Ve;return null},er=Cr,on=(de,Ve)=>{de.stopPropagation();const Ee=er(Ve);if(Ee&&nr!==Ee){Jr(Ee);const ut=Ot[Ee];if(ut!=null&&ut.locked)return;const Ct=de.touches?de.touches[0].clientX:de.clientX,$t=de.touches?de.touches[0].clientY:de.clientY,en=at(Ct,$t);j({x:en.x-ut.bounds.x,y:en.y-ut.bounds.y}),Fe(Ee),k(!0);return}if(de.shiftKey){fr(Ve);return}vn.length>0&&Ri(),_i(Ve);const rt=tn[Ve];if(rt!=null&&rt.locked)return;const ot=de.touches?de.touches[0].clientX:de.clientX,tt=de.touches?de.touches[0].clientY:de.clientY,mt=at(ot,tt);j({x:mt.x-rt.position.x,y:mt.y-rt.position.y}),ie(Ve),k(!0)},Yt=(de,Ve)=>{de.stopPropagation(),_i(Ve),rn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},ns=(de,Ve,Ee)=>{de.stopPropagation();const Re=tn[Ve];if(!Re||Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot),{width_mm:mt,height_mm:ut}=Re;let Ct;switch(Ee){case"n":Ct={x:Re.position.x+mt/2,y:Re.position.y+ut};break;case"s":Ct={x:Re.position.x+mt/2,y:Re.position.y};break;case"e":Ct={x:Re.position.x,y:Re.position.y+ut/2};break;case"w":Ct={x:Re.position.x+mt,y:Re.position.y+ut/2};break;case"nw":Ct={x:Re.position.x+mt,y:Re.position.y+ut};break;case"ne":Ct={x:Re.position.x,y:Re.position.y+ut};break;case"sw":Ct={x:Re.position.x+mt,y:Re.position.y};break;case"se":default:Ct={x:Re.position.x,y:Re.position.y};break}const $t=Math.sqrt(Math.pow(tt.x-Ct.x,2)+Math.pow(tt.y-Ct.y,2));ve({initialDistance:$t,originalWidth:mt,originalHeight:ut,aspectLocked:Re.aspectLocked,corner:Ee,anchorPoint:Ct}),J(Ve),M(!0)},Mi=(de,Ve)=>{de.stopPropagation();const Ee=tn[Ve];if(!Ee||Ee.locked)return;const Re=de.touches?de.touches[0].clientX:de.clientX,rt=de.touches?de.touches[0].clientY:de.clientY,ot=at(Re,rt),{width_mm:tt,height_mm:mt}=Ee,ut={x:Ee.position.x+tt/2,y:Ee.position.y+mt/2},Ct=Math.atan2(ot.y-ut.y,ot.x-ut.x)*(180/Math.PI);f({initialAngle:Ct,originalRotation:Ee.rotation||0,shapeCenter:ut}),De(Ve),Le(!0)},wc=(de,Ve)=>{de.stopPropagation();const Ee=Cr(Ve);if(Ee&&nr!==Ee){Jr(Ee);const ut=Ot[Ee];if(ut!=null&&ut.locked)return;const Ct=de.touches?de.touches[0].clientX:de.clientX,$t=de.touches?de.touches[0].clientY:de.clientY,en=at(Ct,$t);j({x:en.x-ut.bounds.x,y:en.y-ut.bounds.y}),Fe(Ee),k(!0);return}if(de.shiftKey){fr(Ve);return}vn.length>0&&Ri(),bi(Ve);const rt=nn[Ve];if(rt!=null&&rt.locked)return;const ot=de.touches?de.touches[0].clientX:de.clientX,tt=de.touches?de.touches[0].clientY:de.clientY,mt=at(ot,tt);j({x:mt.x-rt.position.x,y:mt.y-rt.position.y}),H(Ve),k(!0)},kh=(de,Ve)=>{de.stopPropagation(),bi(Ve),y(!0)},If=(de,Ve,Ee)=>{de.stopPropagation();const Re=nn[Ve];if(!Re||Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot),mt=Re.fontSize_mm||500,ut=yo(Re.content||"Text",Re.fontFamily,mt,Re.fontWeight,Re.fontStyle),Ct=Re.scale_x||1,$t=Re.scale_y||1,en=ut.width*Ct,mn=mt*1.2*$t;let qt=Re.position.x;Re.textAlign==="center"?qt-=en/2:Re.textAlign==="right"&&(qt-=en);const Gt=Re.position.y-mt*$t;let gr;switch(Ee){case"nw":gr={x:qt+en,y:Gt+mn};break;case"ne":gr={x:qt,y:Gt+mn};break;case"sw":gr={x:qt+en,y:Gt};break;case"se":default:gr={x:qt,y:Gt};break}const ki=Math.sqrt(Math.pow(tt.x-gr.x,2)+Math.pow(tt.y-gr.y,2));N({initialDistance:ki,originalScale:{x:Ct,y:$t},originalPosition:{...Re.position},baseBounds:ut,baseFontSize:mt,textAlign:Re.textAlign,corner:Ee,anchorPoint:gr}),P(Ve),_(!0)},Cl=(de,Ve)=>{de.stopPropagation();const Ee=nn[Ve];if(!Ee||Ee.locked)return;const Re=de.touches?de.touches[0].clientX:de.clientX,rt=de.touches?de.touches[0].clientY:de.clientY,ot=at(Re,rt),tt=yo(Ee.content,Ee.fontFamily,Ee.fontSize_mm,Ee.fontWeight,Ee.fontStyle);let mt=Ee.position.x;Ee.textAlign==="center"?mt=Ee.position.x:Ee.textAlign==="right"?mt=Ee.position.x-tt.width/2:mt=Ee.position.x+tt.width/2;const ut={x:mt,y:Ee.position.y-Ee.fontSize_mm*.4},Ct=Math.atan2(ot.y-ut.y,ot.x-ut.x)*(180/Math.PI);W({initialAngle:Ct,originalRotation:Ee.rotation||0,textCenter:ut}),Q(Ve),F(!0)},lo=(de,Ve)=>{de.stopPropagation(),hr(Ve);const Ee=xn[Ve];if(Ee!=null&&Ee.locked)return;const Re=de.touches?de.touches[0].clientX:de.clientX,rt=de.touches?de.touches[0].clientY:de.clientY,ot=at(Re,rt);j({x:ot.x-Ee.position.x,y:ot.y-Ee.position.y}),je(Ve),k(!0)},$f=(de,Ve)=>{de.stopPropagation(),hr(Ve),rn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Df=(de,Ve,Ee)=>{de.stopPropagation();const Re=xn[Ve];if(!Re||Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot),{width_mm:mt,height_mm:ut}=Re;let Ct;switch(Ee){case"n":Ct={x:Re.position.x+mt/2,y:Re.position.y+ut};break;case"s":Ct={x:Re.position.x+mt/2,y:Re.position.y};break;case"e":Ct={x:Re.position.x,y:Re.position.y+ut/2};break;case"w":Ct={x:Re.position.x+mt,y:Re.position.y+ut/2};break;default:Ct={x:Re.position.x,y:Re.position.y};break}const $t=Math.sqrt(Math.pow(tt.x-Ct.x,2)+Math.pow(tt.y-Ct.y,2));z({initialDistance:$t,originalWidth:mt,originalHeight:ut,corner:Ee,anchorPoint:Ct}),V(Ve),B(!0)},Rn=(de,Ve)=>{de.stopPropagation();const Ee=xn[Ve];if(!Ee||Ee.locked)return;const Re=de.touches?de.touches[0].clientX:de.clientX,rt=de.touches?de.touches[0].clientY:de.clientY,ot=at(Re,rt),{width_mm:tt,height_mm:mt}=Ee,ut={x:Ee.position.x+tt/2,y:Ee.position.y+mt/2},Ct=Math.atan2(ot.y-ut.y,ot.x-ut.x)*(180/Math.PI);Se({initialAngle:Ct,originalRotation:Ee.rotation||0,zoneCenter:ut}),re(Ve),se(!0)},Sh=(de,Ve,Ee)=>{de.stopPropagation();const Re=Ot[Ve];if(!Re||Re.locked)return;const rt=de.touches?de.touches[0].clientX:de.clientX,ot=de.touches?de.touches[0].clientY:de.clientY,tt=at(rt,ot),{x:mt,y:ut,width:Ct,height:$t}=Re.bounds;let en;switch(Ee){case"n":en={x:mt+Ct/2,y:ut+$t};break;case"s":en={x:mt+Ct/2,y:ut};break;case"e":en={x:mt,y:ut+$t/2};break;case"w":en={x:mt+Ct,y:ut+$t/2};break;case"nw":en={x:mt+Ct,y:ut+$t};break;case"ne":en={x:mt,y:ut+$t};break;case"sw":en={x:mt+Ct,y:ut};break;case"se":default:en={x:mt,y:ut};break}const mn=Math.sqrt(Math.pow(tt.x-en.x,2)+Math.pow(tt.y-en.y,2)),qt={};for(const Gt of Re.childIds)Gt.startsWith("shape-")&&tn[Gt]?qt[Gt]={position:{...tn[Gt].position},width_mm:tn[Gt].width_mm,height_mm:tn[Gt].height_mm}:Gt.startsWith("text-")&&nn[Gt]?qt[Gt]={position:{...nn[Gt].position},width_mm:nn[Gt].width_mm||1e3,height_mm:nn[Gt].height_mm||500,fontSize:nn[Gt].fontSize||200}:Gt.startsWith("court-")&&Dt[Gt]?qt[Gt]={position:{...Dt[Gt].position},scale:Dt[Gt].scale||1}:Gt.startsWith("track-")&&Bt[Gt]?qt[Gt]={position:{...Bt[Gt].position},scale:Bt[Gt].scale||1}:Gt.startsWith("motif-")&&Mt[Gt]&&(qt[Gt]={position:{...Mt[Gt].position},scale:Mt[Gt].scale||1});Ye({initialDistance:mn,originalBounds:{...Re.bounds},corner:Ee,anchorPoint:en,originalChildren:qt}),$e(Ve),ze(!0)},zf=(de,Ve)=>{de.stopPropagation();const Ee=Ot[Ve];if(!Ee||Ee.locked)return;const Re=de.touches?de.touches[0].clientX:de.clientX,rt=de.touches?de.touches[0].clientY:de.clientY,ot=at(Re,rt),{x:tt,y:mt,width:ut,height:Ct}=Ee.bounds,$t={x:tt+ut/2,y:mt+Ct/2},en=Math.atan2(ot.y-$t.y,ot.x-$t.x)*(180/Math.PI),mn={};for(const qt of Ee.childIds)qt.startsWith("shape-")&&tn[qt]?mn[qt]={position:{...tn[qt].position},rotation:tn[qt].rotation||0}:qt.startsWith("text-")&&nn[qt]?mn[qt]={position:{...nn[qt].position},rotation:nn[qt].rotation||0}:qt.startsWith("court-")&&Dt[qt]?mn[qt]={position:{...Dt[qt].position},rotation:Dt[qt].rotation||0}:qt.startsWith("track-")&&Bt[qt]?mn[qt]={position:{...Bt[qt].position},rotation:Bt[qt].rotation||0}:qt.startsWith("motif-")&&Mt[qt]&&(mn[qt]={position:{...Mt[qt].position},rotation:Mt[qt].rotation||0});wt({initialAngle:en,center:$t,originalBounds:{...Ee.bounds},originalChildren:mn}),pt(Ve),Je(!0)};fe.useEffect(()=>{k(!1),E(null),D(null),X(null),ie(null),H(null),je(null),j(null)},[jt.width_mm,jt.length_mm]),fe.useEffect(()=>{if(!x||!I&&!U&&!R&&!ce&&!ge&&!ye&&!ke)return;Ze(!0);const Ee={id:I||U||R||ce||ge||ye||ke,type:I?"court":U?"track":R?"motif":ce?"shape":ge?"text":ye?"exclusionZone":ke?"group":null,offset:{x:0,y:0}};_e(Ee),Ne.current=Ee;const Re=ot=>{xe.current||(xe.current=requestAnimationFrame(()=>{var qt,Gt,gr,ki,co,rr,Ie;xe.current=null;const tt=ot.touches?ot.touches[0].clientX:ot.clientX,mt=ot.touches?ot.touches[0].clientY:ot.clientY,ut=at(tt,mt);let Ct={x:ut.x-A.x,y:ut.y-A.y};cr&&(Ct=yF(Ct,ur));let $t=null;if(I?$t=(qt=Dt[I])==null?void 0:qt.position:U?$t=(Gt=Bt[U])==null?void 0:Gt.position:R?$t=(gr=Mt[R])==null?void 0:gr.position:ce?$t=(ki=tn[ce])==null?void 0:ki.position:ge?$t=(co=nn[ge])==null?void 0:co.position:ye?$t=(rr=xn[ye])==null?void 0:rr.position:ke&&($t=((Ie=Ot[ke])==null?void 0:Ie.bounds)||{x:0,y:0}),!$t)return;const en={x:Ct.x-$t.x,y:Ct.y-$t.y},mn=Ne.current?{...Ne.current,offset:en}:null;Ne.current=mn,_e(mn)}))},rt=()=>{xe.current&&(cancelAnimationFrame(xe.current),xe.current=null);const ot=Ne.current;if(ot&&(ot.offset.x!==0||ot.offset.y!==0)){if(I){const tt=Dt[I];let mt={x:tt.position.x+ot.offset.x,y:tt.position.y+ot.offset.y};const ut={width_mm:tt.template.dimensions.width_mm*tt.scale,length_mm:tt.template.dimensions.length_mm*tt.scale};mt=gp(mt,ut,jt),tr(I,mt)}else if(U){const tt=Bt[U],mt={x:tt.position.x+ot.offset.x,y:tt.position.y+ot.offset.y};Qr(U,mt)}else if(R){const tt=Mt[R];let mt={x:tt.position.x+ot.offset.x,y:tt.position.y+ot.offset.y};const ut={width_mm:tt.originalWidth_mm*(tt.scale||1),length_mm:tt.originalHeight_mm*(tt.scale||1)};mt=gp(mt,ut,jt),Vr(R,mt)}else if(ce){const tt=tn[ce];let mt={x:tt.position.x+ot.offset.x,y:tt.position.y+ot.offset.y};const ut={width_mm:tt.width_mm,length_mm:tt.height_mm};mt=gp(mt,ut,jt),Ir(ce,mt)}else if(ge){const tt=nn[ge],mt={x:tt.position.x+ot.offset.x,y:tt.position.y+ot.offset.y};Tn(ge,mt)}else if(ye){const tt=xn[ye];let mt={x:tt.position.x+ot.offset.x,y:tt.position.y+ot.offset.y};const ut={width_mm:tt.width_mm,length_mm:tt.height_mm};mt=gp(mt,ut,jt),O(ye,mt)}else ke&&Ot[ke]&&(ai(ke,ot.offset.x,ot.offset.y),xs(ke));rn.getState().addToHistory()}_e(null),Ne.current=null,Ze(!1),k(!1),E(null),D(null),X(null),ie(null),H(null),je(null),Fe(null),j(null)};return window.addEventListener("mousemove",Re),window.addEventListener("mouseup",rt),window.addEventListener("touchmove",Re,{passive:!1}),window.addEventListener("touchend",rt),window.addEventListener("touchcancel",rt),()=>{window.removeEventListener("mousemove",Re),window.removeEventListener("mouseup",rt),window.removeEventListener("touchmove",Re),window.removeEventListener("touchend",rt),window.removeEventListener("touchcancel",rt),xe.current&&(cancelAnimationFrame(xe.current),xe.current=null),Ne.current=null,Ze(!1)}},[x,I,U,R,ce,ge,ye,ke,A,Dt,Bt,Mt,tn,nn,xn,Ot,cr,ur,jt,tr,Qr,Vr,Ir,Tn,O,ai,xs,Ze]),fe.useEffect(()=>{if(!nt||!ct||!oe)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),tt=Mt[ct];if(!tt)return;const ut=Math.sqrt(Math.pow(ot.x-oe.anchorPoint.x,2)+Math.pow(ot.y-oe.anchorPoint.y,2))/oe.initialDistance;let Ct=oe.originalScale*ut;Ct=Math.max(.1,Ct),Ct=Math.round(Ct*100)/100;const $t=tt.originalWidth_mm*Ct,en=tt.originalHeight_mm*Ct;let mn;switch(oe.corner){case"nw":mn={x:oe.anchorPoint.x-$t,y:oe.anchorPoint.y-en};break;case"ne":mn={x:oe.anchorPoint.x,y:oe.anchorPoint.y-en};break;case"sw":mn={x:oe.anchorPoint.x-$t,y:oe.anchorPoint.y};break;case"se":default:mn={x:oe.anchorPoint.x,y:oe.anchorPoint.y};break}mr(ct,Ct),Vr(ct,mn)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),Ue(!1),he(null),We(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[nt,ct,oe,Mt,mr,Vr]),fe.useEffect(()=>{if(!Oe||!Pt||!G)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),mt=Math.atan2(ot.y-G.motifCenter.y,ot.x-G.motifCenter.x)*(180/Math.PI)-G.initialAngle;let ut=G.originalRotation+mt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,Qt(Pt,ut)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),ht(!1),St(null),qe(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Oe,Pt,G,Qt]),fe.useEffect(()=>{if(!ae||!L||!pe)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt);if(!tn[L])return;const ut=Math.sqrt(Math.pow(ot.x-pe.anchorPoint.x,2)+Math.pow(ot.y-pe.anchorPoint.y,2))/pe.initialDistance;let Ct,$t;const en=pe.corner,mn=["n","s","e","w"].includes(en);if(pe.aspectLocked)Ct=pe.originalWidth*ut,$t=pe.originalHeight*ut;else if(mn){const Gt=Math.abs(ot.y-pe.anchorPoint.y),gr=Math.abs(ot.x-pe.anchorPoint.x);en==="n"||en==="s"?(Ct=pe.originalWidth,$t=Math.max(100,Gt)):(Ct=Math.max(100,gr),$t=pe.originalHeight)}else{const Gt=Math.abs(ot.x-pe.anchorPoint.x),gr=Math.abs(ot.y-pe.anchorPoint.y);Ct=Math.max(100,Gt),$t=Math.max(100,gr)}Ct=Math.round(Ct),$t=Math.round($t);let qt;switch(en){case"n":qt={x:pe.anchorPoint.x-Ct/2,y:pe.anchorPoint.y-$t};break;case"s":qt={x:pe.anchorPoint.x-Ct/2,y:pe.anchorPoint.y};break;case"e":qt={x:pe.anchorPoint.x,y:pe.anchorPoint.y-$t/2};break;case"w":qt={x:pe.anchorPoint.x-Ct,y:pe.anchorPoint.y-$t/2};break;case"nw":qt={x:pe.anchorPoint.x-Ct,y:pe.anchorPoint.y-$t};break;case"ne":qt={x:pe.anchorPoint.x,y:pe.anchorPoint.y-$t};break;case"sw":qt={x:pe.anchorPoint.x-Ct,y:pe.anchorPoint.y};break;case"se":default:qt={x:pe.anchorPoint.x,y:pe.anchorPoint.y};break}bn(L,Ct,$t),Ir(L,qt)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),M(!1),J(null),ve(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[ae,L,pe,tn,bn,Ir]),fe.useEffect(()=>{if(!me||!Xe||!l)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),mt=Math.atan2(ot.y-l.shapeCenter.y,ot.x-l.shapeCenter.x)*(180/Math.PI)-l.initialAngle;let ut=l.originalRotation+mt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,Vn(Xe,ut)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),Le(!1),De(null),f(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[me,Xe,l,Vn]),fe.useEffect(()=>{if(!b||!S||!T)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt);if(!nn[S])return;const ut=Math.sqrt(Math.pow(ot.x-T.anchorPoint.x,2)+Math.pow(ot.y-T.anchorPoint.y,2))/T.initialDistance,Ct=Math.max(.01,T.originalScale.x*ut),$t=Math.max(.01,T.originalScale.y*ut),{baseBounds:en,baseFontSize:mn,corner:qt,anchorPoint:Gt,textAlign:gr}=T,ki=en.width*Ct,co=mn*1.2*$t;let rr={...T.originalPosition};switch(qt){case"nw":gr==="left"?rr.x=Gt.x-ki:gr==="center"?rr.x=Gt.x-ki/2:rr.x=Gt.x,rr.y=Gt.y-co*.17;break;case"ne":gr==="left"?rr.x=Gt.x:gr==="center"?rr.x=Gt.x+ki/2:rr.x=Gt.x+ki,rr.y=Gt.y-co*.17;break;case"sw":gr==="left"?rr.x=Gt.x-ki:gr==="center"?rr.x=Gt.x-ki/2:rr.x=Gt.x,rr.y=Gt.y+mn*$t;break;case"se":default:gr==="left"?rr.x=Gt.x:gr==="center"?rr.x=Gt.x+ki/2:rr.x=Gt.x+ki,rr.y=Gt.y+mn*$t;break}Gn(S,Ct,$t),Tn(S,rr)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),_(!1),P(null),N(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[b,S,T,nn,Gn,Tn]),fe.useEffect(()=>{if(!$||!q||!K)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),mt=Math.atan2(ot.y-K.textCenter.y,ot.x-K.textCenter.x)*(180/Math.PI)-K.initialAngle;let ut=K.originalRotation+mt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,Gr(q,ut)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),F(!1),Q(null),W(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[$,q,K,Gr]),fe.useEffect(()=>{if(!Y||!Z||!ne)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt);if(!xn[Z])return;const mt=ne.corner,ut=Math.abs(ot.y-ne.anchorPoint.y),Ct=Math.abs(ot.x-ne.anchorPoint.x);let $t,en;mt==="n"||mt==="s"?($t=ne.originalWidth,en=Math.max(500,ut)):mt==="e"||mt==="w"?($t=Math.max(500,Ct),en=ne.originalHeight):($t=Math.max(500,Ct),en=Math.max(500,ut)),$t=Math.round($t),en=Math.round(en);let mn;switch(mt){case"n":mn={x:ne.anchorPoint.x-$t/2,y:ne.anchorPoint.y-en};break;case"s":mn={x:ne.anchorPoint.x-$t/2,y:ne.anchorPoint.y};break;case"e":mn={x:ne.anchorPoint.x,y:ne.anchorPoint.y-en/2};break;case"w":mn={x:ne.anchorPoint.x-$t,y:ne.anchorPoint.y-en/2};break;default:mn={x:ne.anchorPoint.x,y:ne.anchorPoint.y};break}ee(Z,$t,en),O(Z,mn)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),B(!1),V(null),z(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Y,Z,ne,xn,ee,O]),fe.useEffect(()=>{if(!te||!ue||!be)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),mt=Math.atan2(ot.y-be.zoneCenter.y,ot.x-be.zoneCenter.x)*(180/Math.PI)-be.initialAngle;let ut=be.originalRotation+mt;ut=(ut%360+360)%360,Ee.shiftKey&&(ut=Math.round(ut/15)*15),ut=Math.round(ut*10)/10,le(ue,ut)},Ve=()=>{const{addToHistory:Ee}=rn.getState();Ee(),st.current=Date.now(),se(!1),re(null),Se(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[te,ue,be,le]),fe.useEffect(()=>{if(!Pe||!we||!Be)return;const de=Ee=>{const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),{initialDistance:tt,originalBounds:mt,corner:ut,anchorPoint:Ct,originalChildren:$t}=Be;let mn=Math.sqrt(Math.pow(ot.x-Ct.x,2)+Math.pow(ot.y-Ct.y,2))/tt;mn<.1&&(mn=.1),mn>10&&(mn=10);let qt=mn,Gt=mn;ut==="n"||ut==="s"?qt=1:(ut==="e"||ut==="w")&&(Gt=1),vs(we,qt,Gt,Ct,$t)},Ve=()=>{const{addToHistory:Ee,refreshGroupBounds:Re}=rn.getState();Re(we),Ee(),st.current=Date.now(),ze(!1),$e(null),Ye(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Pe,we,Be,Ot,vs]),fe.useEffect(()=>{if(!Qe||!dt||!Tt)return;const de=Ee=>{Ee.preventDefault();const Re=Ee.touches?Ee.touches[0].clientX:Ee.clientX,rt=Ee.touches?Ee.touches[0].clientY:Ee.clientY,ot=at(Re,rt),{initialAngle:tt,center:mt,originalChildren:ut}=Tt;let $t=Math.atan2(ot.y-mt.y,ot.x-mt.x)*(180/Math.PI)-tt;Ee.shiftKey&&($t=Math.round($t/15)*15),Sl(dt,$t,mt,ut)},Ve=()=>{const{addToHistory:Ee,refreshGroupBounds:Re}=rn.getState();Re(dt),Ee(),st.current=Date.now(),Je(!1),pt(null),wt(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",de,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",de),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Qe,dt,Tt,Ot,Sl]);const Ff=de=>{var Re;if(bt&&xt&&(de.target===de.currentTarget||de.target.tagName==="svg"||de.target.closest("svg"))){de.preventDefault(),de.stopPropagation();const rt=Date.now(),ot=rt-yt;if(At(rt),ot<300&&ot>0){sn();return}const tt=de.clientX,mt=de.clientY,ut=at(tt,mt),Ct=tn[xt];if(Ct){const $t=(ut.x-Ct.position.x)/Ct.width_mm,en=(ut.y-Ct.position.y)/Ct.height_mm,mn=Math.max(-.5,Math.min(1.5,$t)),qt=Math.max(-.5,Math.min(1.5,en));Zt(mn,qt)}return}if(Date.now()-st.current<100)return;(de.target===de.currentTarget||de.target.tagName==="svg"||((Re=de.target.classList)==null?void 0:Re.contains("court-canvas__surface"))||de.target.closest(".court-canvas__scroll-container")===de.target)&&(Lr(),$n(),yi(),Zr(),Ni(),dr(),Oi(),Ri(),It(null))},oi=()=>{a(de=>Math.min(de*1.25,5))},$a=()=>{a(de=>Math.max(de/1.25,.25))},_n=()=>{a(1),u({x:0,y:0})},Ch=de=>{if(de.ctrlKey||de.metaKey){de.preventDefault();const Ve=de.deltaY*-.002;a(Ee=>Math.min(Math.max(Ee+Ee*Ve,.25),5))}else{de.preventDefault();const Ve=1;u(Ee=>({x:Ee.x-de.deltaX*Ve,y:Ee.y-de.deltaY*Ve}))}},Er=de=>{(de.button===1||de.button===0&&g)&&(de.preventDefault(),de.stopPropagation(),d(!0),m({x:de.clientX-o.x,y:de.clientY-o.y}))},El=de=>{const Ve=de[0].clientX-de[1].clientX,Ee=de[0].clientY-de[1].clientY;return Math.sqrt(Ve*Ve+Ee*Ee)},Da=de=>({x:(de[0].clientX+de[1].clientX)/2,y:(de[0].clientY+de[1].clientY)/2}),qr=de=>{if(de.touches.length===2){de.preventDefault();const Ve=El(de.touches),Ee=Da(de.touches);C({active:!0,initialDistance:Ve,initialZoom:s,initialPan:{...o},initialCenter:Ee})}},ra=de=>{if(de.touches.length===2&&w.active){de.preventDefault();const Ee=El(de.touches)/w.initialDistance;let Re=w.initialZoom*Ee;Re=Math.min(Math.max(Re,.25),5);const rt=Da(de.touches),ot=rt.x-w.initialCenter.x,tt=rt.y-w.initialCenter.y;a(Re),u({x:w.initialPan.x+ot,y:w.initialPan.y+tt})}},_c=de=>{de.touches.length<2&&C({active:!1,initialDistance:0,initialZoom:1,initialPan:{x:0,y:0},initialCenter:{x:0,y:0}})};fe.useEffect(()=>{if(!h)return;const de=Ee=>{u({x:Ee.clientX-p.x,y:Ee.clientY-p.y})},Ve=()=>{d(!1)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Ve),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Ve)}},[h,p]),fe.useEffect(()=>{const de=Ee=>{if(Ee.code==="Space"&&!Ee.repeat){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;Ee.preventDefault(),v(!0)}if(Ee.code==="Escape"&&bt&&xt&&(Ee.preventDefault(),Pn()),Ee.code==="Enter"&&bt&&xt&&(Ee.preventDefault(),sn()),Ee.code==="Escape"&&nr&&(Ee.preventDefault(),na()),(Ee.code==="Delete"||Ee.code==="Backspace")&&wn&&_t!==null){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Re=tn[wn];Re&&(Re.shapeType==="path"||Re.shapeType==="blob")&&Re.editPointsVisible&&(Ee.preventDefault(),He(wn,_t),It(null))}if((Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()==="g"&&!Ee.shiftKey){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;vn.length>=2&&(Ee.preventDefault(),rn.getState().groupSelected())}if((Ee.metaKey||Ee.ctrlKey)&&Ee.shiftKey&&Ee.key.toLowerCase()==="g"){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;Fn&&(Ee.preventDefault(),rn.getState().ungroup(Fn))}if((Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()==="c"&&!Ee.shiftKey){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Re=rn.getState();(Re.selectedGroupId||Re.selectedElementIds.length>0||Re.selectedShapeId||Re.selectedTextId)&&(Ee.preventDefault(),Re.copySelection())}if((Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()==="v"&&!Ee.shiftKey){if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Re=rn.getState();Re.clipboard&&(Ee.preventDefault(),Re.pasteClipboard())}},Ve=Ee=>{Ee.code==="Space"&&(v(!1),d(!1))};return window.addEventListener("keydown",de),window.addEventListener("keyup",Ve),()=>{window.removeEventListener("keydown",de),window.removeEventListener("keyup",Ve)}},[bt,xt,Pn,sn,wn,_t,tn,He,vn,Fn,nr,na]);const I0=de=>{if(bt&&xt){const Ve=at(de.clientX,de.clientY);Ke(Ve)}},ni=bt&&xt?tn[xt]:null,Eh=((rs=ni==null?void 0:ni.controlPoints)==null?void 0:rs.length)>0?ni.controlPoints[ni.controlPoints.length-1]:null;return c.jsxs("div",{className:`court-canvas ${bt?"court-canvas--drawing":""}`,onClick:Ff,onMouseMove:I0,children:[bt&&c.jsx("div",{className:"court-canvas__drawing-indicator",children:"Click to add points  Double-click or Enter to finish  Escape to cancel"}),c.jsxs("div",{className:"court-canvas__zoom-controls",children:[c.jsx("button",{onClick:oi,className:"court-canvas__zoom-btn",title:"Zoom In (Ctrl + Scroll)",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),c.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),c.jsx("path",{d:"m21 21-4.35-4.35"})]})}),c.jsx("button",{onClick:$a,className:"court-canvas__zoom-btn",title:"Zoom Out (Ctrl + Scroll)",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),c.jsx("path",{d:"m21 21-4.35-4.35"})]})}),c.jsx("button",{onClick:_n,className:"court-canvas__zoom-btn",title:"Reset View",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M1 4v6h6"}),c.jsx("path",{d:"M23 20v-6h-6"}),c.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}),c.jsxs("span",{className:"court-canvas__zoom-level",title:"Scroll to pan, Ctrl+Scroll to zoom, Space+Drag to pan",children:[Math.round(s*100),"%"]})]}),c.jsx("div",{ref:i,className:"court-canvas__viewport",onWheel:Ch,onMouseDown:Er,onTouchStart:qr,onTouchMove:ra,onTouchEnd:_c,style:{cursor:h?"grabbing":g?"grab":void 0,touchAction:"none"},children:c.jsx("div",{className:"court-canvas__transform-wrapper",style:{transform:`translate(${o.x}px, ${o.y}px) scale(${s})`,transformOrigin:"center center"},children:c.jsxs("svg",{ref:r,className:"court-canvas__svg",viewBox:`0 0 ${jt.width_mm} ${jt.length_mm}`,preserveAspectRatio:"xMidYMid meet",children:[c.jsx("defs",{children:jt.boundary&&jt.boundary.type!=="rectangle"&&jt.boundary.controlPoints&&c.jsx("clipPath",{id:"surface-boundary-clip",children:c.jsx("path",{d:uS(jt.boundary,jt.width_mm,jt.length_mm)})})}),c.jsx("g",{clipPath:jt.boundary&&jt.boundary.type!=="rectangle"&&jt.boundary.controlPoints?"url(#surface-boundary-clip)":void 0,children:c.jsx("rect",{x:"0",y:"0",width:jt.width_mm,height:jt.length_mm,fill:jt.color.hex,className:"court-canvas__surface"})}),jt.boundary&&jt.boundary.type!=="rectangle"&&jt.boundary.controlPoints&&c.jsx("path",{d:uS(jt.boundary,jt.width_mm,jt.length_mm),fill:"none",stroke:"#94a3b8",strokeWidth:"60",strokeDasharray:"300 200",pointerEvents:"none"}),Object.values(xn).map(de=>{if(de.visible===!1)return null;const Ve=ft(de,de.id);return c.jsx(VF,{zone:Ve,isSelected:de.id===Nr,zoom:s,onMouseDown:Ee=>lo(Ee,Ve.id),onTouchStart:Ee=>lo(Ee,Ve.id),onDoubleClick:Ee=>$f(Ee,Ve.id),onScaleStart:(Ee,Re)=>Df(Ee,Ve.id,Re),onRotateStart:Ee=>Rn(Ee,Ve.id)},de.id)}),Cn.map(de=>{if(de.startsWith("court-")){const Ve=Dt[de];if(!Ve||Ve.visible===!1)return null;const Ee=de===vt||vn.includes(de);return c.jsx(hS,{court:ft(Ve,de),isSelected:Ee,onMouseDown:Re=>Et(Re,de),onTouchStart:Re=>Et(Re,de),onDoubleClick:Re=>pn(Re,de),svgRef:r},de)}if(de.startsWith("track-")){const Ve=Bt[de];if(!Ve||Ve.visible===!1)return null;const Ee=de===En||vn.includes(de);return c.jsx(iS,{track:ft(Ve,de),isSelected:Ee,onMouseDown:Re=>zt(Re,de),onTouchStart:Re=>zt(Re,de),onDoubleClick:Re=>Ft(Re,de),svgRef:r},de)}if(de.startsWith("motif-")){const Ve=Mt[de];if(!Ve||Ve.visible===!1)return null;const Ee=de===On||vn.includes(de);return c.jsx(sS,{motif:ft(Ve,de),isSelected:Ee,zoom:s,onMouseDown:Re=>Vt(Re,de),onTouchStart:Re=>Vt(Re,de),onDoubleClick:Re=>jn(Re,de),onScaleStart:(Re,rt)=>qn(Re,de,rt),onRotateStart:Re=>Bn(Re,de)},de)}if(de.startsWith("shape-")){const Ve=tn[de];if(!Ve||Ve.visible===!1)return null;const Ee=ft(Ve,de),Re=de===wn||vn.includes(de);return Ee.shapeType==="blob"?c.jsx(oS,{shape:Ee,isSelected:Re,zoom:s,onMouseDown:rt=>on(rt,de),onTouchStart:rt=>on(rt,de),onDoubleClick:rt=>Yt(rt,de),onScaleStart:(rt,ot)=>ns(rt,de,ot),onRotateStart:rt=>Mi(rt,de),onPointDrag:(rt,ot,tt)=>Ce(de,rt,ot,tt),onHandleDrag:(rt,ot,tt,mt)=>et(de,rt,ot,tt,mt),onDragEnd:()=>it(),selectedPointIndex:de===wn?_t:null,onPointSelect:rt=>It(rt),onPointDelete:rt=>He(de,rt)},de):Ee.shapeType==="path"?c.jsx(lS,{shape:Ee,isSelected:Re,zoom:s,onMouseDown:rt=>on(rt,de),onTouchStart:rt=>on(rt,de),onDoubleClick:rt=>Yt(rt,de),onScaleStart:(rt,ot)=>ns(rt,de,ot),onRotateStart:rt=>Mi(rt,de),onPointDrag:(rt,ot,tt)=>sr(de,rt,ot,tt),onHandleDrag:(rt,ot,tt,mt)=>ts(de,rt,ot,tt,mt),onDragEnd:()=>Ut(),selectedPointIndex:de===wn?_t:null,onPointSelect:rt=>It(rt),onPointDelete:rt=>He(de,rt),onAddPoint:(rt,ot,tt)=>kt(de,rt,ot,tt)},de):c.jsx(aS,{shape:Ee,isSelected:Re,zoom:s,onMouseDown:rt=>on(rt,de),onTouchStart:rt=>on(rt,de),onDoubleClick:rt=>Yt(rt,de),onScaleStart:(rt,ot)=>ns(rt,de,ot),onRotateStart:rt=>Mi(rt,de)},de)}if(de.startsWith("text-")){const Ve=nn[de];if(!Ve||Ve.visible===!1)return null;const Ee=ft(Ve,de);return c.jsx(cS,{text:Ee,isSelected:de===Sr||vn.includes(de),zoom:s,onMouseDown:Re=>wc(Re,de),onTouchStart:Re=>wc(Re,de),onDoubleClick:Re=>kh(Re,de),onScaleStart:(Re,rt)=>If(Re,de,rt),onRotateStart:Re=>Cl(Re,de)},de)}if(de.startsWith("group-")){const Ve=Ot[de];if(!Ve||Ve.visible===!1)return null;const Ee=(Me==null?void 0:Me.id)===de?`translate(${Me.offset.x}, ${Me.offset.y})`:void 0;return c.jsx("g",{transform:Ee,children:Ve.childIds.map(Re=>{if(Re.startsWith("shape-")){const rt=tn[Re];if(!rt||rt.visible===!1)return null;const ot=Re===wn||vn.includes(Re);return rt.shapeType==="blob"?c.jsx(oS,{shape:rt,isSelected:ot,zoom:s,onMouseDown:tt=>on(tt,Re),onTouchStart:tt=>on(tt,Re),onDoubleClick:tt=>Yt(tt,Re),onScaleStart:(tt,mt)=>ns(tt,Re,mt),onRotateStart:tt=>Mi(tt,Re),onPointDrag:(tt,mt,ut)=>Ce(Re,tt,mt,ut),onHandleDrag:(tt,mt,ut,Ct)=>et(Re,tt,mt,ut,Ct),onDragEnd:()=>it(),selectedPointIndex:Re===wn?_t:null,onPointSelect:tt=>It(tt),onPointDelete:tt=>He(Re,tt)},Re):rt.shapeType==="path"?c.jsx(lS,{shape:rt,isSelected:ot,zoom:s,onMouseDown:tt=>on(tt,Re),onTouchStart:tt=>on(tt,Re),onDoubleClick:tt=>Yt(tt,Re),onScaleStart:(tt,mt)=>ns(tt,Re,mt),onRotateStart:tt=>Mi(tt,Re),onPointDrag:(tt,mt,ut)=>sr(Re,tt,mt,ut),onHandleDrag:(tt,mt,ut,Ct)=>ts(Re,tt,mt,ut,Ct),onDragEnd:()=>Ut(),selectedPointIndex:Re===wn?_t:null,onPointSelect:tt=>It(tt),onPointDelete:tt=>He(Re,tt),onAddPoint:(tt,mt,ut)=>kt(Re,tt,mt,ut)},Re):c.jsx(aS,{shape:rt,isSelected:ot,zoom:s,onMouseDown:tt=>on(tt,Re),onTouchStart:tt=>on(tt,Re),onDoubleClick:tt=>Yt(tt,Re),onScaleStart:(tt,mt)=>ns(tt,Re,mt),onRotateStart:tt=>Mi(tt,Re)},Re)}if(Re.startsWith("text-")){const rt=nn[Re];return!rt||rt.visible===!1?null:c.jsx(cS,{text:rt,isSelected:Re===Sr||vn.includes(Re),zoom:s,onMouseDown:ot=>wc(ot,Re),onTouchStart:ot=>wc(ot,Re),onDoubleClick:ot=>kh(ot,Re),onScaleStart:(ot,tt)=>If(ot,Re,tt),onRotateStart:ot=>Cl(ot,Re)},Re)}if(Re.startsWith("court-")){const rt=Dt[Re];if(!rt||rt.visible===!1)return null;const ot=Re===vt||vn.includes(Re);return c.jsx(hS,{court:rt,isSelected:ot,onMouseDown:tt=>Et(tt,Re),onTouchStart:tt=>Et(tt,Re),onDoubleClick:tt=>pn(tt,Re),svgRef:r},Re)}if(Re.startsWith("track-")){const rt=Bt[Re];if(!rt||rt.visible===!1)return null;const ot=Re===En||vn.includes(Re);return c.jsx(iS,{track:rt,isSelected:ot,onMouseDown:tt=>zt(tt,Re),onTouchStart:tt=>zt(tt,Re),onDoubleClick:tt=>Ft(tt,Re),svgRef:r},Re)}if(Re.startsWith("motif-")){const rt=Mt[Re];if(!rt||rt.visible===!1)return null;const ot=Re===On||vn.includes(Re);return c.jsx(sS,{motif:rt,isSelected:ot,zoom:s,onMouseDown:tt=>Vt(tt,Re),onTouchStart:tt=>Vt(tt,Re),onDoubleClick:tt=>jn(tt,Re),onScaleStart:(tt,mt)=>qn(tt,Re,mt),onRotateStart:tt=>Bn(tt,Re)},Re)}return null})},de)}return null}),Object.keys(Ot).map(de=>c.jsx(qF,{groupId:de,zoom:s,screenToSVG:at,onDragStart:(Ve,Ee)=>{j(Ee),Fe(Ve),k(!0)},onScaleStart:(Ve,Ee,Re)=>Sh(Ve,Ee,Re),onRotateStart:(Ve,Ee)=>zf(Ve,Ee)},de)),bt&&ni&&Eh&&Ae&&c.jsx("line",{x1:ni.position.x+Eh.x*ni.width_mm,y1:ni.position.y+Eh.y*ni.height_mm,x2:Ae.x,y2:Ae.y,stroke:"#3b82f6",strokeWidth:"50",strokeDasharray:"100 100",opacity:"0.6",pointerEvents:"none"}),bt&&ni&&((Lo=ni.controlPoints)==null?void 0:Lo.map((de,Ve)=>c.jsx("circle",{cx:ni.position.x+de.x*ni.width_mm,cy:ni.position.y+de.y*ni.height_mm,r:"80",fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",pointerEvents:"none"},`preview-point-${Ve}`)))]})})}),c.jsxs("div",{className:"court-canvas__info",children:[c.jsxs("span",{children:[(jt.width_mm/1e3).toFixed(1),"m  ",(jt.length_mm/1e3).toFixed(1),"m"]}),cr&&c.jsxs("span",{className:"court-canvas__grid-indicator",children:["Grid: ",ur,"mm"]})]}),Cn.length===0&&c.jsxs("div",{className:"court-canvas__empty-state",children:[c.jsx("div",{className:"court-canvas__empty-icon",children:c.jsxs("svg",{width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("path",{d:"M12 2L14.4 8.4L21 9.6L16.2 14.4L17.6 21L12 17.6L6.4 21L7.8 14.4L3 9.6L9.6 8.4L12 2Z",fill:"rgba(255,255,255,0.15)",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),c.jsx("circle",{cx:"19",cy:"5",r:"1.5",fill:"currentColor",opacity:"0.6"}),c.jsx("circle",{cx:"5",cy:"18",r:"1",fill:"currentColor",opacity:"0.4"}),c.jsx("circle",{cx:"20",cy:"16",r:"0.8",fill:"currentColor",opacity:"0.5"})]})}),c.jsx("h3",{className:"court-canvas__empty-title",children:"Your canvas is ready"}),c.jsx("p",{className:"court-canvas__empty-text",children:"Design your perfect TPV surface in minutes"}),c.jsxs("div",{className:"court-canvas__empty-hints",children:[c.jsxs("div",{className:"court-canvas__hint",children:[c.jsx("span",{className:"court-canvas__hint-icon",children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),c.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]})}),c.jsxs("span",{children:["Add ",c.jsx("strong",{children:"Courts"}),", ",c.jsx("strong",{children:"Tracks"}),", ",c.jsx("strong",{children:"Shapes"})," or ",c.jsx("strong",{children:"Designs"})]})]}),c.jsxs("div",{className:"court-canvas__hint",children:[c.jsx("span",{className:"court-canvas__hint-icon",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 5v14M5 12h14"})})}),c.jsx("span",{children:"Click elements in the library to place them"})]}),c.jsxs("div",{className:"court-canvas__hint",children:[c.jsx("span",{className:"court-canvas__hint-icon",children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M5 9l4 4-4 4"}),c.jsx("path",{d:"M12 4h7a2 2 0 012 2v12a2 2 0 01-2 2h-7"})]})}),c.jsx("span",{children:"Arrange, customise colours and export"})]})]})]})]})});function hS({court:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,svgRef:s}){var h;const{markings:a,zones:o}=gF(e),u=((h=e.courtSurfaceColor)==null?void 0:h.hex)||null;return c.jsxs("g",{className:`court-canvas__court ${t?"court-canvas__court--selected":""}`,transform:bF(e),style:{cursor:"move"},children:[u&&c.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:u,className:"court-canvas__court-surface"}),c.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:"none",pointerEvents:"all",onMouseDown:n,onTouchStart:r,onDoubleClick:i,style:{cursor:"move"}}),o.map(d=>c.jsx(XF,{zone:d},d.id)),a.map(d=>c.jsx(KF,{marking:d},d.id)),t&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:"none",stroke:"#007bff",strokeWidth:"100",strokeDasharray:"400 400",className:"court-canvas__selection-outline"}),c.jsx(vF,{court:e,svgRef:s})]})]})}function XF({zone:e}){switch(e.type){case"rect":return c.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill,pointerEvents:"none"});case"circle":return c.jsx("circle",{cx:e.cx,cy:e.cy,r:e.r,fill:e.fill,pointerEvents:"none"});case"polygon":return c.jsx("polygon",{points:e.points,fill:e.fill,pointerEvents:"none"});case"path":return c.jsx("path",{d:e.d,fill:e.fill,pointerEvents:"none"});default:return null}}function KF({marking:e}){switch(e.type){case"line":return c.jsx("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.stroke,strokeWidth:e.strokeWidth});case"rect":return c.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"circle":return c.jsx("circle",{cx:e.cx,cy:e.cy,r:e.r,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"path":return c.jsx("path",{d:e.d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"polyline":return c.jsx("polyline",{points:e.points,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});default:return null}}const nN={"track-flexible":{id:"track-flexible",name:"Running Track",type:"running-track",trackType:"curved",standard:"Flexible Design",category:"track",description:"Flexible running track - adjust size, lanes, and corner radius to fit your surface",parameters:{numLanes:4,laneWidth_mm:1220,width_mm:25e3,height_mm:15e3,cornerRadius:{topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},lineWidth_mm:50,startingBoxes:{enabled:!1,depth_mm:400,lineWidth_mm:50}},defaultLineColor:"RH31",defaultTrackSurfaceColor:"RH01",calculatedDimensions:{totalWidth_mm:25e3,totalLength_mm:15e3}},"track-straight":{id:"track-straight",name:"Straight Track",type:"running-track",trackType:"straight",standard:"Sprint Track",category:"track",description:"Straight sprint track - perfect for 60m, 100m, or custom length sprints",parameters:{numLanes:6,laneWidth_mm:1220,width_mm:7320,height_mm:1e5,cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},lineWidth_mm:50,startingBoxes:{enabled:!1,depth_mm:400,lineWidth_mm:50}},defaultLineColor:"RH31",defaultTrackSurfaceColor:"RH01",calculatedDimensions:{totalWidth_mm:7320,totalLength_mm:1e5}}};function ZF(){return Object.values(nN)}function QF(e){return nN[e]||null}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */var Sy,dS;function fS(){if(dS)return Sy;dS=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:a,create:o}=Object,{apply:u,construct:h}=typeof Reflect<"u"&&Reflect;s||(s=function(Le){return Le}),a||(a=function(Le){return Le}),u||(u=function(Le,Xe){for(var De=arguments.length,l=new Array(De>2?De-2:0),f=2;f<De;f++)l[f-2]=arguments[f];return Le.apply(Xe,l)}),h||(h=function(Le){for(var Xe=arguments.length,De=new Array(Xe>1?Xe-1:0),l=1;l<Xe;l++)De[l-1]=arguments[l];return new Le(...De)});const d=D(Array.prototype.forEach),p=D(Array.prototype.lastIndexOf),m=D(Array.prototype.pop),g=D(Array.prototype.push),v=D(Array.prototype.splice),w=D(String.prototype.toLowerCase),C=D(String.prototype.toString),x=D(String.prototype.match),k=D(String.prototype.replace),A=D(String.prototype.indexOf),j=D(String.prototype.trim),I=D(Object.prototype.hasOwnProperty),E=D(RegExp.prototype.test),U=R(TypeError);function D(me){return function(Le){Le instanceof RegExp&&(Le.lastIndex=0);for(var Xe=arguments.length,De=new Array(Xe>1?Xe-1:0),l=1;l<Xe;l++)De[l-1]=arguments[l];return u(me,Le,De)}}function R(me){return function(){for(var Le=arguments.length,Xe=new Array(Le),De=0;De<Le;De++)Xe[De]=arguments[De];return h(me,Xe)}}function X(me,Le){let Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w;t&&t(me,null);let De=Le.length;for(;De--;){let l=Le[De];if(typeof l=="string"){const f=Xe(l);f!==l&&(n(Le)||(Le[De]=f),l=f)}me[l]=!0}return me}function ce(me){for(let Le=0;Le<me.length;Le++)I(me,Le)||(me[Le]=null);return me}function ie(me){const Le=o(null);for(const[Xe,De]of e(me))I(me,Xe)&&(Array.isArray(De)?Le[Xe]=ce(De):De&&typeof De=="object"&&De.constructor===Object?Le[Xe]=ie(De):Le[Xe]=De);return Le}function ge(me,Le){for(;me!==null;){const De=i(me,Le);if(De){if(De.get)return D(De.get);if(typeof De.value=="function")return D(De.value)}me=r(me)}function Xe(){return null}return Xe}const H=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ye=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),je=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ke=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Fe=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xe=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Me=s(["#text"]),_e=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ne=s(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),st=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nt=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ue=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ct=a(/<%[\w\W]*|[\w\W]*%>/gm),he=a(/\$\{[\w\W]*/gm),oe=a(/^data-[\-\w.\u00B7-\uFFFF]+$/),We=a(/^aria-[\-\w]+$/),Oe=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ht=a(/^(?:\w+script|data):/i),Pt=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),St=a(/^html$/i),G=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var qe=Object.freeze({__proto__:null,ARIA_ATTR:We,ATTR_WHITESPACE:Pt,CUSTOM_ELEMENT:G,DATA_ATTR:oe,DOCTYPE_NAME:St,ERB_EXPR:ct,IS_ALLOWED_URI:Oe,IS_SCRIPT_OR_DATA:ht,MUSTACHE_EXPR:Ue,TMPLIT_EXPR:he});const ae={element:1,text:3,progressingInstruction:7,comment:8,document:9},M=function(){return typeof window>"u"?null:window},L=function(Le,Xe){if(typeof Le!="object"||typeof Le.createPolicy!="function")return null;let De=null;const l="data-tt-policy-suffix";Xe&&Xe.hasAttribute(l)&&(De=Xe.getAttribute(l));const f="dompurify"+(De?"#"+De:"");try{return Le.createPolicy(f,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},J=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function pe(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M();const Le=Ut=>pe(Ut);if(Le.version="3.3.0",Le.removed=[],!me||!me.document||me.document.nodeType!==ae.document||!me.Element)return Le.isSupported=!1,Le;let{document:Xe}=me;const De=Xe,l=De.currentScript,{DocumentFragment:f,HTMLTemplateElement:b,Node:_,Element:S,NodeFilter:P,NamedNodeMap:T=me.NamedNodeMap||me.MozNamedAttrMap,HTMLFormElement:N,DOMParser:$,trustedTypes:F}=me,q=S.prototype,Q=ge(q,"cloneNode"),K=ge(q,"remove"),W=ge(q,"nextSibling"),Y=ge(q,"childNodes"),B=ge(q,"parentNode");if(typeof b=="function"){const Ut=Xe.createElement("template");Ut.content&&Ut.content.ownerDocument&&(Xe=Ut.content.ownerDocument)}let Z,V="";const{implementation:ne,createNodeIterator:z,createDocumentFragment:te,getElementsByTagName:se}=Xe,{importNode:ue}=De;let re=J();Le.isSupported=typeof e=="function"&&typeof B=="function"&&ne&&ne.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:Se,TMPLIT_EXPR:Pe,DATA_ATTR:ze,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:$e,ATTR_WHITESPACE:Be,CUSTOM_ELEMENT:Ye}=qe;let{IS_ALLOWED_URI:Qe}=qe,Je=null;const dt=X({},[...H,...ye,...je,...Fe,...Me]);let pt=null;const Tt=X({},[..._e,...Ne,...st,...nt]);let wt=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,Ke=null;const yt=Object.seal(o(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let At=!0,_t=!0,It=!1,jt=!0,Dt=!1,Bt=!0,Mt=!1,tn=!1,nn=!1,xn=!1,Cn=!1,vt=!1,En=!0,On=!1;const wn="user-content-";let Sr=!0,Nr=!1,cr={},ur=null;const pr=X({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Lr=null;const Kr=X({},["audio","video","img","source","image","track"]);let $n=null;const Jn=X({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yi="http://www.w3.org/1998/Math/MathML",_i="http://www.w3.org/2000/svg",Zr="http://www.w3.org/1999/xhtml";let bi=Zr,Ni=!1,hr=null;const dr=X({},[yi,_i,Zr],C);let tr=X({},["mi","mo","mn","ms","mtext"]),Qr=X({},["annotation-xml"]);const Vr=X({},["title","style","font","a","script"]);let mr=null;const Qt=["application/xhtml+xml","text/html"],Ir="text/html";let bn=null,Vn=null;const Tn=Xe.createElement("form"),Gn=function(He){return He instanceof RegExp||He instanceof Function},Gr=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Vn&&Vn===He)){if((!He||typeof He!="object")&&(He={}),He=ie(He),mr=Qt.indexOf(He.PARSER_MEDIA_TYPE)===-1?Ir:He.PARSER_MEDIA_TYPE,bn=mr==="application/xhtml+xml"?C:w,Je=I(He,"ALLOWED_TAGS")?X({},He.ALLOWED_TAGS,bn):dt,pt=I(He,"ALLOWED_ATTR")?X({},He.ALLOWED_ATTR,bn):Tt,hr=I(He,"ALLOWED_NAMESPACES")?X({},He.ALLOWED_NAMESPACES,C):dr,$n=I(He,"ADD_URI_SAFE_ATTR")?X(ie(Jn),He.ADD_URI_SAFE_ATTR,bn):Jn,Lr=I(He,"ADD_DATA_URI_TAGS")?X(ie(Kr),He.ADD_DATA_URI_TAGS,bn):Kr,ur=I(He,"FORBID_CONTENTS")?X({},He.FORBID_CONTENTS,bn):pr,Ae=I(He,"FORBID_TAGS")?X({},He.FORBID_TAGS,bn):ie({}),Ke=I(He,"FORBID_ATTR")?X({},He.FORBID_ATTR,bn):ie({}),cr=I(He,"USE_PROFILES")?He.USE_PROFILES:!1,At=He.ALLOW_ARIA_ATTR!==!1,_t=He.ALLOW_DATA_ATTR!==!1,It=He.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=He.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Dt=He.SAFE_FOR_TEMPLATES||!1,Bt=He.SAFE_FOR_XML!==!1,Mt=He.WHOLE_DOCUMENT||!1,xn=He.RETURN_DOM||!1,Cn=He.RETURN_DOM_FRAGMENT||!1,vt=He.RETURN_TRUSTED_TYPE||!1,nn=He.FORCE_BODY||!1,En=He.SANITIZE_DOM!==!1,On=He.SANITIZE_NAMED_PROPS||!1,Sr=He.KEEP_CONTENT!==!1,Nr=He.IN_PLACE||!1,Qe=He.ALLOWED_URI_REGEXP||Oe,bi=He.NAMESPACE||Zr,tr=He.MATHML_TEXT_INTEGRATION_POINTS||tr,Qr=He.HTML_INTEGRATION_POINTS||Qr,wt=He.CUSTOM_ELEMENT_HANDLING||{},He.CUSTOM_ELEMENT_HANDLING&&Gn(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(wt.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&Gn(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(wt.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(wt.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dt&&(_t=!1),Cn&&(xn=!0),cr&&(Je=X({},Me),pt=[],cr.html===!0&&(X(Je,H),X(pt,_e)),cr.svg===!0&&(X(Je,ye),X(pt,Ne),X(pt,nt)),cr.svgFilters===!0&&(X(Je,je),X(pt,Ne),X(pt,nt)),cr.mathMl===!0&&(X(Je,Fe),X(pt,st),X(pt,nt))),He.ADD_TAGS&&(typeof He.ADD_TAGS=="function"?yt.tagCheck=He.ADD_TAGS:(Je===dt&&(Je=ie(Je)),X(Je,He.ADD_TAGS,bn))),He.ADD_ATTR&&(typeof He.ADD_ATTR=="function"?yt.attributeCheck=He.ADD_ATTR:(pt===Tt&&(pt=ie(pt)),X(pt,He.ADD_ATTR,bn))),He.ADD_URI_SAFE_ATTR&&X($n,He.ADD_URI_SAFE_ATTR,bn),He.FORBID_CONTENTS&&(ur===pr&&(ur=ie(ur)),X(ur,He.FORBID_CONTENTS,bn)),Sr&&(Je["#text"]=!0),Mt&&X(Je,["html","head","body"]),Je.table&&(X(Je,["tbody"]),delete Ae.tbody),He.TRUSTED_TYPES_POLICY){if(typeof He.TRUSTED_TYPES_POLICY.createHTML!="function")throw U('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof He.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw U('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Z=He.TRUSTED_TYPES_POLICY,V=Z.createHTML("")}else Z===void 0&&(Z=L(F,l)),Z!==null&&typeof V=="string"&&(V=Z.createHTML(""));s&&s(He),Vn=He}},Yn=X({},[...ye,...je,...ke]),y=X({},[...Fe,...xe]),O=function(He){let kt=B(He);(!kt||!kt.tagName)&&(kt={namespaceURI:bi,tagName:"template"});const Ot=w(He.tagName),Fn=w(kt.tagName);return hr[He.namespaceURI]?He.namespaceURI===_i?kt.namespaceURI===Zr?Ot==="svg":kt.namespaceURI===yi?Ot==="svg"&&(Fn==="annotation-xml"||tr[Fn]):!!Yn[Ot]:He.namespaceURI===yi?kt.namespaceURI===Zr?Ot==="math":kt.namespaceURI===_i?Ot==="math"&&Qr[Fn]:!!y[Ot]:He.namespaceURI===Zr?kt.namespaceURI===_i&&!Qr[Fn]||kt.namespaceURI===yi&&!tr[Fn]?!1:!y[Ot]&&(Vr[Ot]||!Yn[Ot]):!!(mr==="application/xhtml+xml"&&hr[He.namespaceURI]):!1},ee=function(He){g(Le.removed,{element:He});try{B(He).removeChild(He)}catch{K(He)}},le=function(He,kt){try{g(Le.removed,{attribute:kt.getAttributeNode(He),from:kt})}catch{g(Le.removed,{attribute:null,from:kt})}if(kt.removeAttribute(He),He==="is")if(xn||Cn)try{ee(kt)}catch{}else try{kt.setAttribute(He,"")}catch{}},Ce=function(He){let kt=null,Ot=null;if(nn)He="<remove></remove>"+He;else{const nr=x(He,/^[\r\n\t ]+/);Ot=nr&&nr[0]}mr==="application/xhtml+xml"&&bi===Zr&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");const Fn=Z?Z.createHTML(He):He;if(bi===Zr)try{kt=new $().parseFromString(Fn,mr)}catch{}if(!kt||!kt.documentElement){kt=ne.createDocument(bi,"template",null);try{kt.documentElement.innerHTML=Ni?V:Fn}catch{}}const vn=kt.body||kt.documentElement;return He&&Ot&&vn.insertBefore(Xe.createTextNode(Ot),vn.childNodes[0]||null),bi===Zr?se.call(kt,Mt?"html":"body")[0]:Mt?kt.documentElement:vn},et=function(He){return z.call(He.ownerDocument||He,He,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT|P.SHOW_PROCESSING_INSTRUCTION|P.SHOW_CDATA_SECTION,null)},it=function(He){return He instanceof N&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof T)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function"||typeof He.hasChildNodes!="function")},bt=function(He){return typeof _=="function"&&He instanceof _};function xt(Ut,He,kt){d(Ut,Ot=>{Ot.call(Le,He,kt,Vn)})}const Zt=function(He){let kt=null;if(xt(re.beforeSanitizeElements,He,null),it(He))return ee(He),!0;const Ot=bn(He.nodeName);if(xt(re.uponSanitizeElement,He,{tagName:Ot,allowedTags:Je}),Bt&&He.hasChildNodes()&&!bt(He.firstElementChild)&&E(/<[/\w!]/g,He.innerHTML)&&E(/<[/\w!]/g,He.textContent)||He.nodeType===ae.progressingInstruction||Bt&&He.nodeType===ae.comment&&E(/<[/\w]/g,He.data))return ee(He),!0;if(!(yt.tagCheck instanceof Function&&yt.tagCheck(Ot))&&(!Je[Ot]||Ae[Ot])){if(!Ae[Ot]&&Pn(Ot)&&(wt.tagNameCheck instanceof RegExp&&E(wt.tagNameCheck,Ot)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(Ot)))return!1;if(Sr&&!ur[Ot]){const Fn=B(He)||He.parentNode,vn=Y(He)||He.childNodes;if(vn&&Fn){const nr=vn.length;for(let Jr=nr-1;Jr>=0;--Jr){const Oi=Q(vn[Jr],!0);Oi.__removalCount=(He.__removalCount||0)+1,Fn.insertBefore(Oi,W(He))}}}return ee(He),!0}return He instanceof S&&!O(He)||(Ot==="noscript"||Ot==="noembed"||Ot==="noframes")&&E(/<\/no(script|embed|frames)/i,He.innerHTML)?(ee(He),!0):(Dt&&He.nodeType===ae.text&&(kt=He.textContent,d([be,Se,Pe],Fn=>{kt=k(kt,Fn," ")}),He.textContent!==kt&&(g(Le.removed,{element:He.cloneNode()}),He.textContent=kt)),xt(re.afterSanitizeElements,He,null),!1)},sn=function(He,kt,Ot){if(En&&(kt==="id"||kt==="name")&&(Ot in Xe||Ot in Tn))return!1;if(!(_t&&!Ke[kt]&&E(ze,kt))){if(!(At&&E(we,kt))){if(!(yt.attributeCheck instanceof Function&&yt.attributeCheck(kt,He))){if(!pt[kt]||Ke[kt]){if(!(Pn(He)&&(wt.tagNameCheck instanceof RegExp&&E(wt.tagNameCheck,He)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(He))&&(wt.attributeNameCheck instanceof RegExp&&E(wt.attributeNameCheck,kt)||wt.attributeNameCheck instanceof Function&&wt.attributeNameCheck(kt,He))||kt==="is"&&wt.allowCustomizedBuiltInElements&&(wt.tagNameCheck instanceof RegExp&&E(wt.tagNameCheck,Ot)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(Ot))))return!1}else if(!$n[kt]){if(!E(Qe,k(Ot,Be,""))){if(!((kt==="src"||kt==="xlink:href"||kt==="href")&&He!=="script"&&A(Ot,"data:")===0&&Lr[He])){if(!(It&&!E($e,k(Ot,Be,"")))){if(Ot)return!1}}}}}}}return!0},Pn=function(He){return He!=="annotation-xml"&&x(He,Ye)},sr=function(He){xt(re.beforeSanitizeAttributes,He,null);const{attributes:kt}=He;if(!kt||it(He))return;const Ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pt,forceKeepAttr:void 0};let Fn=kt.length;for(;Fn--;){const vn=kt[Fn],{name:nr,namespaceURI:Jr,value:Oi}=vn,ta=bn(nr),na=Oi;let fr=nr==="value"?na:j(na);if(Ot.attrName=ta,Ot.attrValue=fr,Ot.keepAttr=!0,Ot.forceKeepAttr=void 0,xt(re.uponSanitizeAttribute,He,Ot),fr=Ot.attrValue,On&&(ta==="id"||ta==="name")&&(le(nr,He),fr=wn+fr),Bt&&E(/((--!?|])>)|<\/(style|title|textarea)/i,fr)){le(nr,He);continue}if(ta==="attributename"&&x(fr,"href")){le(nr,He);continue}if(Ot.forceKeepAttr)continue;if(!Ot.keepAttr){le(nr,He);continue}if(!jt&&E(/\/>/i,fr)){le(nr,He);continue}Dt&&d([be,Se,Pe],ai=>{fr=k(fr,ai," ")});const Ri=bn(He.nodeName);if(!sn(Ri,ta,fr)){le(nr,He);continue}if(Z&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!Jr)switch(F.getAttributeType(Ri,ta)){case"TrustedHTML":{fr=Z.createHTML(fr);break}case"TrustedScriptURL":{fr=Z.createScriptURL(fr);break}}if(fr!==na)try{Jr?He.setAttributeNS(Jr,nr,fr):He.setAttribute(nr,fr),it(He)?ee(He):m(Le.removed)}catch{le(nr,He)}}xt(re.afterSanitizeAttributes,He,null)},ts=function Ut(He){let kt=null;const Ot=et(He);for(xt(re.beforeSanitizeShadowDOM,He,null);kt=Ot.nextNode();)xt(re.uponSanitizeShadowNode,kt,null),Zt(kt),sr(kt),kt.content instanceof f&&Ut(kt.content);xt(re.afterSanitizeShadowDOM,He,null)};return Le.sanitize=function(Ut){let He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kt=null,Ot=null,Fn=null,vn=null;if(Ni=!Ut,Ni&&(Ut="<!-->"),typeof Ut!="string"&&!bt(Ut))if(typeof Ut.toString=="function"){if(Ut=Ut.toString(),typeof Ut!="string")throw U("dirty is not a string, aborting")}else throw U("toString is not a function");if(!Le.isSupported)return Ut;if(tn||Gr(He),Le.removed=[],typeof Ut=="string"&&(Nr=!1),Nr){if(Ut.nodeName){const Oi=bn(Ut.nodeName);if(!Je[Oi]||Ae[Oi])throw U("root node is forbidden and cannot be sanitized in-place")}}else if(Ut instanceof _)kt=Ce("<!---->"),Ot=kt.ownerDocument.importNode(Ut,!0),Ot.nodeType===ae.element&&Ot.nodeName==="BODY"||Ot.nodeName==="HTML"?kt=Ot:kt.appendChild(Ot);else{if(!xn&&!Dt&&!Mt&&Ut.indexOf("<")===-1)return Z&&vt?Z.createHTML(Ut):Ut;if(kt=Ce(Ut),!kt)return xn?null:vt?V:""}kt&&nn&&ee(kt.firstChild);const nr=et(Nr?Ut:kt);for(;Fn=nr.nextNode();)Zt(Fn),sr(Fn),Fn.content instanceof f&&ts(Fn.content);if(Nr)return Ut;if(xn){if(Cn)for(vn=te.call(kt.ownerDocument);kt.firstChild;)vn.appendChild(kt.firstChild);else vn=kt;return(pt.shadowroot||pt.shadowrootmode)&&(vn=ue.call(De,vn,!0)),vn}let Jr=Mt?kt.outerHTML:kt.innerHTML;return Mt&&Je["!doctype"]&&kt.ownerDocument&&kt.ownerDocument.doctype&&kt.ownerDocument.doctype.name&&E(St,kt.ownerDocument.doctype.name)&&(Jr="<!DOCTYPE "+kt.ownerDocument.doctype.name+`>
`+Jr),Dt&&d([be,Se,Pe],Oi=>{Jr=k(Jr,Oi," ")}),Z&&vt?Z.createHTML(Jr):Jr},Le.setConfig=function(){let Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gr(Ut),tn=!0},Le.clearConfig=function(){Vn=null,tn=!1},Le.isValidAttribute=function(Ut,He,kt){Vn||Gr({});const Ot=bn(Ut),Fn=bn(He);return sn(Ot,Fn,kt)},Le.addHook=function(Ut,He){typeof He=="function"&&g(re[Ut],He)},Le.removeHook=function(Ut,He){if(He!==void 0){const kt=p(re[Ut],He);return kt===-1?void 0:v(re[Ut],kt,1)[0]}return m(re[Ut])},Le.removeHooks=function(Ut){re[Ut]=[]},Le.removeAllHooks=function(){re=J()},Le}var ve=pe();return Sy=ve,Sy}var JF=self.DOMPurify||(self.DOMPurify=fS().default||fS());const e9=yl(JF);function hw(e,t={}){if(!e||typeof e!="string")return console.warn("[SVG-SANITIZE] Invalid input:",typeof e),"";const n={USE_PROFILES:{svg:!0,svgFilters:!0},FORBID_TAGS:["script","foreignObject","iframe","embed"],FORBID_ATTR:["onload","onerror","onclick","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onmousedown","onmouseup","onfocus","onblur","onkeydown","onkeyup","onkeypress","onsubmit","onreset","onselect","onchange","oninput","onanimationstart","onanimationend","onanimationiteration","ontransitionend","ontransitionrun","ontransitionstart","ontransitioncancel","xlink:href",...t.additionalForbiddenAttrs||[]],ALLOW_DATA_ATTR:!0,ALLOW_COMMENTS:!1,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,HOOKS:{afterSanitizeAttributes:r=>{if(r.hasAttribute("href")){const i=r.getAttribute("href");i&&i.toLowerCase().trim().startsWith("javascript:")&&(r.removeAttribute("href"),console.warn("[SVG-SANITIZE] Removed javascript: href"))}if(r.hasAttribute("xlink:href")){const i=r.getAttribute("xlink:href");i&&(i.toLowerCase().trim().startsWith("javascript:")||i.toLowerCase().trim().startsWith("data:text/html"))&&(r.removeAttribute("xlink:href"),console.warn("[SVG-SANITIZE] Removed dangerous xlink:href"))}}},...t};try{const r=e9.sanitize(e,n);if(!r||!r.includes("<svg"))return console.error("[SVG-SANITIZE] Sanitization removed SVG content - input may be malicious"),"";const i=e.length,s=r.length,a=(i-s)/i*100;return a>10&&console.warn(`[SVG-SANITIZE] Removed ${a.toFixed(1)}% of content (${i-s} chars) - possible malicious SVG detected`),r}catch(r){return console.error("[SVG-SANITIZE] Sanitization failed:",r),""}}function t9(e){if(!e||typeof e!="string")return!1;const t=e.toLowerCase(),n=["<script","javascript:","onload=","onerror=","onclick=","onmouseover=","<foreignobject","<iframe","<embed","data:text/html"];for(const r of n)if(t.includes(r))return console.warn(`[SVG-VALIDATE] Dangerous pattern detected: ${r}`),!1;return t.includes("<svg")?!0:(console.warn("[SVG-VALIDATE] Content does not appear to be valid SVG (no <svg> tag found)"),!1)}function n9(e){return e.replace("#","").toLowerCase()}async function Vl(e,t,n=null){try{let r;if(n)r=n;else{const v=await fetch(e);if(!v.ok)throw new Error(`Failed to fetch SVG: ${v.status} ${v.statusText}`);r=await v.text()}const i=hw(r);if(!i)throw new Error("SVG sanitization failed - content rejected");const a=new DOMParser().parseFromString(i,"image/svg+xml"),o=a.querySelector("parsererror");if(o)throw new Error(`SVG parse error: ${o.textContent}`);const u=a.documentElement;if(u.tagName!=="svg")throw new Error("Invalid SVG: root element is not <svg>");const h=r9(u,t),p=new XMLSerializer().serializeToString(a),m=new Blob([p],{type:"image/svg+xml"});return{dataUrl:URL.createObjectURL(m),svgText:p,stats:h}}catch(r){throw console.error("[SVG-RECOLOR] Error:",r),r}}function r9(e,t){const n={totalElements:0,fillsReplaced:0,strokesReplaced:0,stopColorsReplaced:0,stylesProcessed:0,colorsNotMapped:new Set},r=e.querySelectorAll("*");n.totalElements=r.length;for(const a of r){const o=a.getAttribute("fill");if(o&&o!=="none"){const p=Qa(o,t,n.colorsNotMapped);p!==o&&(p==="transparent"||p==="none"?(a.setAttribute("fill","none"),a.setAttribute("fill-opacity","0")):a.setAttribute("fill",p),n.fillsReplaced++)}const u=a.getAttribute("stroke");if(u&&u!=="none"){const p=Qa(u,t,n.colorsNotMapped);p!==u&&(p==="transparent"||p==="none"?(a.setAttribute("stroke","none"),a.setAttribute("stroke-opacity","0")):a.setAttribute("stroke",p),n.strokesReplaced++)}const h=a.getAttribute("stop-color");if(h&&h!=="none"){const p=Qa(h,t,n.colorsNotMapped);p!==h&&(a.setAttribute("stop-color",p),n.stopColorsReplaced++)}const d=a.getAttribute("style");if(d){const p=gS(d,t,n);p!==d&&(a.setAttribute("style",p),n.stylesProcessed++)}}const i=e.querySelectorAll("style");for(const a of i){const o=a.textContent,u=s9(o,t,n);u!==o&&(a.textContent=u,n.stylesProcessed++)}const s=e.querySelectorAll("stop");for(const a of s){const o=a.getAttribute("stop-color");if(o&&o!=="none"){const h=Qa(o,t,n.colorsNotMapped);h!==o&&(a.setAttribute("stop-color",h),n.stopColorsReplaced++)}const u=a.getAttribute("style");if(u&&u.includes("stop-color")){const h=gS(u,t,n);h!==u&&(a.setAttribute("style",h),n.stylesProcessed++)}}return n}function Qa(e,t,n){const r=a9(e);if(!r)return e;const i=`#${r}`,s=t.get(i);if(s)return s.blendHex;const a=pS(r);if(!a)return e;const o=mS(a);let u=null,h=1/0;for(const[d,p]of t.entries()){const m=pS(d.replace("#",""));if(!m)continue;const g=mS(m),v=i9(o,g);if(v<h&&(h=v,u=p),v<=9)return p.blendHex}return u?(n&&n.add(e),u.blendHex):(console.warn(`[SVG-RECOLOR] No mapping found: ${i}`),e)}function pS(e){if(e.length!==6)return null;const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return isNaN(t)||isNaN(n)||isNaN(r)?null:{r:t,g:n,b:r}}function mS(e){let t=e.r/255,n=e.g/255,r=e.b/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;const i=(t*.4124+n*.3576+r*.1805)*100,s=(t*.2126+n*.7152+r*.0722)*100,a=(t*.0193+n*.1192+r*.9505)*100,o=95.047,u=100,h=108.883;let d=i/o,p=s/u,m=a/h;return d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,{L:116*p-16,a:500*(d-p),b:200*(p-m)}}function i9(e,t){const s=Math.PI*2,a=Math.PI,o=(e.L+t.L)/2,u=Math.sqrt(e.a*e.a+e.b*e.b),h=Math.sqrt(t.a*t.a+t.b*t.b),d=(u+h)/2,p=.5*(1-Math.sqrt(Math.pow(d,7)/(Math.pow(d,7)+Math.pow(25,7)))),m=e.a*(1+p),g=t.a*(1+p),v=Math.sqrt(m*m+e.b*e.b),w=Math.sqrt(g*g+t.b*t.b),C=(v+w)/2;let x=Math.atan2(e.b,m);x<0&&(x+=s);let k=Math.atan2(t.b,g);k<0&&(k+=s);const A=Math.abs(x-k)>a?(x+k+s)/2:(x+k)/2,j=1-.17*Math.cos(A-Math.PI/6)+.24*Math.cos(2*A)+.32*Math.cos(3*A+Math.PI/30)-.2*Math.cos(4*A-63*Math.PI/180);let I=k-x;Math.abs(I)>a&&(I=I>0?I-s:I+s);const E=t.L-e.L,U=w-v,D=2*Math.sqrt(v*w)*Math.sin(I/2),R=1+.015*Math.pow(o-50,2)/Math.sqrt(20+Math.pow(o-50,2)),X=1+.045*C,ce=1+.015*C*j,ie=30*Math.PI/180*Math.exp(-Math.pow((A-275*Math.PI/180)/(25*Math.PI/180),2)),H=-(2*Math.sqrt(Math.pow(C,7)/(Math.pow(C,7)+Math.pow(25,7))))*Math.sin(2*ie);return Math.sqrt(Math.pow(E/(1*R),2)+Math.pow(U/(1*X),2)+Math.pow(D/(1*ce),2)+H*(U/(1*X))*(D/(1*ce)))}function gS(e,t,n){let r=e;return r=r.replace(/fill:\s*([^;]+)/gi,(i,s)=>`fill: ${Qa(s.trim(),t,n.colorsNotMapped)}`),r=r.replace(/stroke:\s*([^;]+)/gi,(i,s)=>`stroke: ${Qa(s.trim(),t,n.colorsNotMapped)}`),r=r.replace(/stop-color:\s*([^;]+)/gi,(i,s)=>`stop-color: ${Qa(s.trim(),t,n.colorsNotMapped)}`),r}function s9(e,t,n){let r=e;return r=r.replace(/fill:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`fill: ${Qa(a,t,n.colorsNotMapped)}`}),r=r.replace(/stroke:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`stroke: ${Qa(a,t,n.colorsNotMapped)}`}),r=r.replace(/stop-color:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`stop-color: ${Qa(a,t,n.colorsNotMapped)}`}),r}function a9(e){const t=e.trim().toLowerCase();if(t.match(/^#?[0-9a-f]{6}$/))return n9(t);const n=t.match(/^#?([0-9a-f]{3})$/);if(n)return n[1].split("").map(a=>a+a).join("");const r=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(r){const s=parseInt(r[1],10),a=parseInt(r[2],10),o=parseInt(r[3],10);return o9(s,a,o)}const i={white:"ffffff",black:"000000",red:"ff0000",green:"008000",blue:"0000ff",yellow:"ffff00",cyan:"00ffff",magenta:"ff00ff",gray:"808080",grey:"808080",orange:"ffa500",purple:"800080"};return i[t]?i[t]:null}function o9(e,t,n){const r=i=>Math.max(0,Math.min(255,i)).toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`}function Kl(e){const n=new DOMParser().parseFromString(e,"image/svg+xml"),r=n.querySelector("parsererror");if(r)return console.error("[SVG-REGION-TAGGER] Parse error:",r.textContent),e;const i=n.documentElement;if(!i.hasAttribute("viewBox")){const o=i.getAttribute("width"),u=i.getAttribute("height");if(o&&u){const h=parseFloat(o),d=parseFloat(u);!isNaN(h)&&!isNaN(d)&&(i.setAttribute("viewBox",`0 0 ${h} ${d}`),console.log(`[SVG-REGION-TAGGER] Added viewBox from dimensions: 0 0 ${h} ${d}`))}else{const h=l9(n);h&&(i.setAttribute("viewBox",`${h.x} ${h.y} ${h.width} ${h.height}`),console.log(`[SVG-REGION-TAGGER] Added viewBox from content bounds: ${h.x} ${h.y} ${h.width} ${h.height}`))}}let s=0;return n.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line").forEach(o=>{o.hasAttribute("data-region-id")||o.setAttribute("data-region-id",`region-${s++}`)}),console.log(`[SVG-REGION-TAGGER] Tagged ${s} regions`),new XMLSerializer().serializeToString(n)}function l9(e){try{const t=e.documentElement.cloneNode(!0),n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",document.body.appendChild(n),n.appendChild(t);const r=t.getBBox();if(document.body.removeChild(n),r.width>0&&r.height>0)return{x:Math.floor(r.x),y:Math.floor(r.y),width:Math.ceil(r.width),height:Math.ceil(r.height)}}catch(t){console.warn("[SVG-REGION-TAGGER] Could not calculate content bounds:",t)}return null}function xu(e,t){if(!t||t.size===0)return e;const r=new DOMParser().parseFromString(e,"image/svg+xml"),i=r.querySelector("parsererror");if(i)return console.error("[SVG-REGION-OVERRIDES] Parse error:",i.textContent),e;let s=0;return t.forEach((a,o)=>{const u=typeof a=="string"?a:a.hex,h=r.querySelector(`[data-region-id="${o}"]`);if(h){const d=u==="transparent"||u==="none";if((h.hasAttribute("fill")||d)&&(d?(h.setAttribute("fill","none"),h.setAttribute("fill-opacity","0")):(h.setAttribute("fill",u),h.removeAttribute("fill-opacity")),s++),h.hasAttribute("stroke")&&h.getAttribute("stroke")!=="none"){const m=h.getAttribute("stroke");m&&m!=="#000"&&m!=="#000000"&&m!=="#fff"&&m!=="#ffffff"&&(d?(h.setAttribute("stroke","none"),h.setAttribute("stroke-opacity","0")):h.setAttribute("stroke",u))}const p=h.getAttribute("style");if(p&&p.includes("fill:"))if(d){const m=p.replace(/fill:\s*[^;]+/,"fill: none");h.setAttribute("style",m)}else{const m=p.replace(/fill:\s*[^;]+/,`fill: ${u}`);h.setAttribute("style",m)}}else console.warn(`[SVG-REGION-OVERRIDES] Region not found: ${o}`)}),console.log(`[SVG-REGION-OVERRIDES] Applied ${s} region overrides`),new XMLSerializer().serializeToString(r)}async function rN(e){var x,k;const t=await wf(e),n=(t==null?void 0:t.design)||t;if(!n)throw new Error("Design not found");if(n.input_mode==="sports_surface")throw new Error("Cannot use a sports surface design as a motif");const r=n.original_svg_url;if(!r||r.startsWith("blob:"))throw new Error("Design does not have a valid original SVG. Please ensure the design was saved after generation.");if(!n.solid_color_mapping&&!n.color_mapping)throw new Error("Design does not have color mappings. Please ensure the design was saved after color mapping.");console.log("[MOTIF] Fetching original SVG from:",r);const i=((x=n.design_data)==null?void 0:x.region_overrides)||n.region_overrides||null,s=((k=n.design_data)==null?void 0:k.original_tagged_svg)||n.original_tagged_svg||null;console.log("[MOTIF] Region overrides:",i?Object.keys(i).length:0,"regions"),console.log("[MOTIF] Original tagged SVG:",s?"present":"not present");const a=i?new Map(Object.entries(i)):null,o=await c9(r);if(!o)throw new Error("Failed to load or sanitize the original SVG.");console.log("[MOTIF] Original SVG loaded, regenerating recolored versions...");let u=null,h=null;if(n.solid_color_mapping&&Object.keys(n.solid_color_mapping).length>0)try{const A=yS(n.solid_color_mapping);console.log("[MOTIF] Solid mapping has",A.size,"colors");const{svgText:j}=await Vl(null,A,o);if(u=j,console.log("[MOTIF] Generated solid SVG:",u.length,"chars"),a&&a.size>0&&u){console.log("[MOTIF] Applying",a.size,"region overrides to solid SVG");let I=u;I=Kl(u),u=xu(I,a),console.log("[MOTIF] Applied region overrides to solid SVG")}}catch(A){console.error("[MOTIF] Failed to generate solid SVG:",A)}if(n.color_mapping&&Object.keys(n.color_mapping).length>0)try{const A=yS(n.color_mapping);console.log("[MOTIF] Blend mapping has",A.size,"colors");const{svgText:j}=await Vl(null,A,o);if(h=j,console.log("[MOTIF] Generated blend SVG:",h.length,"chars"),a&&a.size>0&&h){console.log("[MOTIF] Applying",a.size,"region overrides to blend SVG");let I=Kl(h);h=xu(I,a),console.log("[MOTIF] Applied region overrides to blend SVG")}}catch(A){console.error("[MOTIF] Failed to generate blend SVG:",A)}if(!u&&!h)throw new Error("Failed to regenerate TPV-recolored SVG versions.");const d=n.dimensions||{};let p=d.widthMM||d.width_mm||5e3,m=d.lengthMM||d.length_mm||5e3;const g=p===5e3&&m===5e3,v=u||h;if(v){const A=dw(v);if(A&&A.width&&A.height){const j=A.width/A.height;(g||Math.abs(j-1)>.01)&&(j>1?(p=5e3,m=Math.round(5e3/j)):j<1&&(m=5e3,p=Math.round(5e3*j)),console.log("[MOTIF] Corrected dimensions from SVG viewBox:",p,"x",m,"mm (aspect ratio:",j.toFixed(3),")"))}}const w=n.thumbnail_url||n.original_png_url||null,C=u&&h;return{sourceDesignId:e,sourceDesignName:n.name||"Unnamed Design",sourceThumbnailUrl:w,solidSvgContent:u,blendSvgContent:h,svgContent:u||h,hasBothVersions:C,originalWidth_mm:p,originalHeight_mm:m}}function yS(e){const t=new Map;if(!e||typeof e!="object")return t;for(const[n,r]of Object.entries(e)){const i=n.startsWith("#")?n:`#${n}`;t.set(i,r)}return t}async function c9(e){try{console.log("[MOTIF] Fetching SVG from:",e);const t=await fetch(e);if(!t.ok)return console.error("[MOTIF] Failed to fetch SVG:",t.status,t.statusText),null;const n=await t.text();if(console.log("[MOTIF] Fetched content length:",n.length,"chars"),console.log("[MOTIF] Content starts with:",n.substring(0,100)),!t9(n))return console.error("[MOTIF] SVG failed quick validation"),null;const r=hw(n);return r?(console.log("[MOTIF] Sanitized SVG length:",r.length,"chars"),r):(console.error("[MOTIF] SVG sanitization failed"),null)}catch(t){return console.error("[MOTIF] Error fetching SVG:",t),null}}async function iN(e={}){const t=await Km(e);return{designs:(t.designs||[]).filter(r=>r.input_mode==="sports_surface"?!1:r.thumbnail_url||r.original_svg_url||r.original_png_url),pagination:t.pagination}}function dw(e){if(!e)return null;const t=e.match(/viewBox=["']([^"']+)["']/i);if(t){const i=t[1].split(/\s+/).map(Number);if(i.length>=4)return{width:i[2],height:i[3]}}const n=e.match(/\bwidth=["']?(\d+(?:\.\d+)?)/i),r=e.match(/\bheight=["']?(\d+(?:\.\d+)?)/i);return n&&r?{width:parseFloat(n[1]),height:parseFloat(r[1])}:null}const u9=Object.freeze(Object.defineProperty({__proto__:null,extractSVGDimensions:dw,fetchMotifFromDesign:rN,listPlaygroundDesigns:iN},Symbol.toStringTag,{value:"Module"}));function sN({onOpenGenerator:e,mobileMode:t=!1,modalMode:n=!1,activeTab:r,onItemAdded:i}){const[s,a]=fe.useState(null),[o,u]=fe.useState("courts"),h=t?r:o,d=t?()=>{}:u,[p,m]=fe.useState([]),[g,v]=fe.useState(!1),[w,C]=fe.useState(null),[x,k]=fe.useState(null),{addCourt:A,addTrack:j,addMotif:I,addShape:E,courts:U,tracks:D,motifs:R,shapes:X}=rn(),ce=Object.keys(U).length,ie=Object.keys(D).length,ge=Object.keys(R).length,H=oF(),ye=ZF();fe.useEffect(()=>{h==="designs"&&p.length===0&&!g&&je()},[h]);const je=async()=>{v(!0),C(null);try{const Ue=await iN({limit:50});m(Ue.designs||[])}catch(Ue){console.error("[MOTIFS] Failed to load designs:",Ue),C(Ue.message||"Failed to load designs")}finally{v(!1)}},ke=t||n,Fe=Ue=>{const ct=lF(Ue);ct&&(A(Ue,ct),ke&&i&&i())},xe=Ue=>{const ct=QF(Ue);ct&&(j(Ue,ct),ke&&i&&i())},Me=async Ue=>{if(!x){k(Ue);try{const ct=await rN(Ue);I(ct.sourceDesignId,ct.sourceDesignName,ct.svgContent,ct.originalWidth_mm,ct.originalHeight_mm,ct.sourceThumbnailUrl,{solidSvgContent:ct.solidSvgContent,blendSvgContent:ct.blendSvgContent,hasBothVersions:ct.hasBothVersions}),ke&&i&&i()}catch(ct){console.error("[MOTIFS] Failed to add motif:",ct),alert(`Failed to add motif: ${ct.message}`)}finally{k(null)}}},_e=[{id:"rectangle",name:"Rectangle",icon:""},{id:"square",name:"Square",icon:""},{id:"circle",name:"Circle",icon:""},{id:"triangle",name:"Triangle",icon:""},{id:"pentagon",name:"Pentagon",icon:""},{id:"hexagon",name:"Hexagon",icon:""},{id:"blob",name:"Blob",icon:""}],Ne=Object.keys(X||{}).length,nt=(()=>{switch(h){case"courts":return{title:"Courts",count:ce,hint:"Select a court to add"};case"tracks":return{title:"Tracks",count:ie,hint:"Select a track to add"};case"shapes":return{title:"Shapes",count:Ne,hint:"Tap a shape to add it"};case"designs":return{title:"Designs",count:ge,hint:"Add your saved designs as motifs"};default:return{title:"Library",count:0,hint:""}}})();return c.jsxs("div",{className:`court-library ${t?"court-library--mobile":""}`,children:[!t&&c.jsxs("div",{className:"court-library__header",children:[c.jsxs("div",{className:"court-library__header-row",children:[c.jsx("h2",{children:nt.title}),c.jsxs("span",{className:"court-library__count",children:[nt.count," on canvas"]})]}),c.jsx("p",{children:nt.hint})]}),!t&&c.jsxs("div",{className:"court-library__tabs",children:[c.jsx("button",{className:`court-library__tab ${h==="courts"?"court-library__tab--active":""}`,onClick:()=>{d("courts"),a(null)},children:"Courts"}),c.jsx("button",{className:`court-library__tab ${h==="tracks"?"court-library__tab--active":""}`,onClick:()=>{d("tracks"),a(null)},children:"Tracks"}),c.jsx("button",{className:`court-library__tab ${h==="designs"?"court-library__tab--active":""}`,onClick:()=>{d("designs"),a(null)},children:"Designs"})]}),c.jsxs("div",{className:`court-library__list ${t?"court-library__list--mobile":""}`,children:[h==="courts"&&H.map(Ue=>c.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""}`,onClick:()=>ke?Fe(Ue.id):a(Ue.id),onDoubleClick:()=>!ke&&Fe(Ue.id),children:[c.jsx("div",{className:"court-library__preview",children:c.jsx(h9,{template:Ue})}),c.jsxs("div",{className:"court-library__info",children:[c.jsx("div",{className:"court-library__name",children:Ue.name}),c.jsxs("div",{className:"court-library__dimensions",children:[(Ue.dimensions.width_mm/1e3).toFixed(1),"m  ",(Ue.dimensions.length_mm/1e3).toFixed(1),"m"]}),c.jsx("div",{className:"court-library__standard",children:Ue.standard})]}),s===Ue.id&&c.jsx("button",{className:"court-library__add-btn",onClick:ct=>{ct.stopPropagation(),Fe(Ue.id)},children:"+ ADD"})]},Ue.id)),h==="tracks"&&ye.map(Ue=>c.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""}`,onClick:()=>ke?xe(Ue.id):a(Ue.id),onDoubleClick:()=>!ke&&xe(Ue.id),children:[c.jsx("div",{className:"court-library__preview",children:c.jsx(f9,{template:Ue})}),c.jsxs("div",{className:"court-library__info",children:[c.jsx("div",{className:"court-library__name",children:Ue.name}),c.jsxs("div",{className:"court-library__standard",children:[Ue.parameters.numLanes," Lanes  ",Ue.standard]}),c.jsx("div",{className:"court-library__note",children:"Scales to fit canvas"})]}),s===Ue.id&&c.jsx("button",{className:"court-library__add-btn",onClick:ct=>{ct.stopPropagation(),xe(Ue.id)},children:"+ ADD"})]},Ue.id)),h==="shapes"&&c.jsx("div",{className:`court-library__shapes-grid ${t?"court-library__shapes-grid--mobile":""}`,children:_e.map(Ue=>c.jsxs("button",{className:"court-library__shape-btn",onClick:()=>{E(Ue.id),t&&i&&i()},children:[c.jsx("span",{className:"court-library__shape-icon",children:Ue.icon}),c.jsx("span",{className:"court-library__shape-name",children:Ue.name})]},Ue.id))}),h==="designs"&&c.jsxs(c.Fragment,{children:[g&&c.jsxs("div",{className:"court-library__loading",children:[c.jsx("div",{className:"court-library__spinner"}),c.jsx("p",{children:"Loading your designs..."})]}),w&&c.jsxs("div",{className:"court-library__error",children:[c.jsx("p",{children:w}),c.jsx("button",{onClick:je,children:"Try Again"})]}),!g&&!w&&p.length===0&&c.jsxs("div",{className:"court-library__empty",children:[c.jsx("p",{children:"No designs found."}),c.jsx("p",{className:"court-library__empty-hint",children:"Generate new designs or save them to use as motifs."})]}),!g&&p.map(Ue=>{var ct,he;return c.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""} ${x===Ue.id?"court-library__item--loading":""}`,onClick:()=>ke?Me(Ue.id):a(Ue.id),onDoubleClick:()=>!ke&&Me(Ue.id),children:[c.jsx("div",{className:"court-library__preview",children:c.jsx(p9,{design:Ue})}),c.jsxs("div",{className:"court-library__info",children:[c.jsx("div",{className:"court-library__name",children:Ue.name||"Unnamed Design"}),c.jsxs("div",{className:"court-library__dimensions",children:[((((ct=Ue.design_data)==null?void 0:ct.widthMM)||5e3)/1e3).toFixed(1),"m  ",((((he=Ue.design_data)==null?void 0:he.lengthMM)||5e3)/1e3).toFixed(1),"m"]}),c.jsx("div",{className:"court-library__note",children:"Playground Design"})]}),s===Ue.id&&c.jsx("button",{className:"court-library__add-btn",onClick:oe=>{oe.stopPropagation(),Me(Ue.id)},disabled:x===Ue.id,children:x===Ue.id?"Adding...":"+ ADD"})]},Ue.id)})]})]}),!t&&c.jsx("div",{className:"court-library__generate",children:c.jsxs("button",{className:"court-library__generate-btn",onClick:e,children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 5v14M5 12h14"})}),"Generate New Design"]})}),!t&&!n&&c.jsx("div",{className:"court-library__footer",children:c.jsxs("p",{className:"court-library__hint",children:[h==="courts"&&"Double-click a court to add it instantly",h==="tracks"&&"Double-click a track to add it instantly",h==="designs"&&"Double-click a design to add it as a motif"]})})]})}function h9({template:e}){const t=e.dimensions.width_mm,n=e.dimensions.length_mm,r=Math.min(62/t,62/n),i=t*r,s=n*r;return c.jsxs("svg",{width:"62",height:"62",viewBox:"0 0 62 62",className:"court-library__svg-preview",children:[c.jsx("rect",{x:(62-i)/2,y:(62-s)/2,width:i,height:s,fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"1.5"}),e.markings.map((a,o)=>c.jsx(d9,{marking:a,scale:r,offsetX:(62-i)/2,offsetY:(62-s)/2},o))]})}function d9({marking:e,scale:t,offsetX:n,offsetY:r}){const{type:i,params:s}=e;switch(i){case"line":return c.jsx("line",{x1:s.x1*t+n,y1:s.y1*t+r,x2:s.x2*t+n,y2:s.y2*t+r,stroke:"#1e293b",strokeWidth:"1.5"});case"rectangle":return c.jsx("rect",{x:s.x*t+n,y:s.y*t+r,width:s.width*t,height:s.height*t,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"});case"circle":return c.jsx("circle",{cx:s.cx*t+n,cy:s.cy*t+r,r:s.radius*t,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"});case"arc":{const{cx:a,cy:o,radius:u,startAngle:h,endAngle:d}=s,p=h*Math.PI/180,m=d*Math.PI/180,g=(a+u*Math.cos(p))*t+n,v=(o+u*Math.sin(p))*t+r,w=(a+u*Math.cos(m))*t+n,C=(o+u*Math.sin(m))*t+r,x=d-h>180?1:0,k=`M ${g} ${v} A ${u*t} ${u*t} 0 ${x} 1 ${w} ${C}`;return c.jsx("path",{d:k,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"})}default:return null}}function f9({template:e}){const{parameters:t}=e,n=t.width_mm,r=t.height_mm,i=Math.min(58/n,58/r),s=n*i,a=r*i,o=t.numLanes,u=t.laneWidth_mm*i,h=t.cornerRadius,p=(h.topLeft+h.topRight+h.bottomLeft+h.bottomRight)/4*i,m=(62-s)/2,g=(62-a)/2;return c.jsxs("svg",{width:"62",height:"62",viewBox:"0 0 62 62",className:"court-library__svg-preview",children:[c.jsx("rect",{x:m,y:g,width:s,height:a,rx:p,fill:"#e5e7eb"}),Array.from({length:o}).map((v,w)=>{const C=w*u,x=Math.max(0,p-C);return c.jsx("rect",{x:m+C,y:g+C,width:Math.max(0,s-C*2),height:Math.max(0,a-C*2),rx:x,stroke:"#1e293b",strokeWidth:"1",fill:"none"},w)})]})}function p9({design:e}){const t=e.thumbnail_url||e.original_png_url;return t?c.jsx("img",{src:t,alt:e.name||"Design preview",className:"court-library__motif-img",style:{width:"62px",height:"62px",objectFit:"contain",borderRadius:"4px",backgroundColor:"#f3f4f6"},onError:n=>{n.target.style.display="none",n.target.nextSibling&&(n.target.nextSibling.style.display="flex")}}):c.jsx("div",{className:"court-library__motif-placeholder",style:{width:"62px",height:"62px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e5e7eb",borderRadius:"4px",color:"#9ca3af",fontSize:"10px",textAlign:"center"},children:"No Preview"})}function m9({isOpen:e,onClose:t,onOpenGenerator:n}){return fe.useEffect(()=>{if(!e)return;const r=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]),fe.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?c.jsx("div",{className:"court-library-modal__overlay",onClick:t,children:c.jsxs("div",{className:"court-library-modal__container",onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:"court-library-modal__header",children:[c.jsx("h2",{children:"Element Library"}),c.jsx("p",{children:"Select courts, tracks, or designs to add to your canvas"}),c.jsx("button",{className:"court-library-modal__close",onClick:t,"aria-label":"Close",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsx("div",{className:"court-library-modal__content",children:c.jsx(sN,{modalMode:!0,onItemAdded:t,onOpenGenerator:()=>{t(),n()}})})]})}):null}function bS({onEditSourceDesign:e}){var M,L;const{courts:t,tracks:n,motifs:r,shapes:i,texts:s,exclusionZones:a,groups:o,selectedCourtId:u,selectedTrackId:h,selectedMotifId:d,selectedShapeId:p,selectedTextId:m,selectedExclusionZoneId:g,selectedGroupId:v,editingGroupId:w,updateCourtPosition:C,updateCourtRotation:x,updateCourtScale:k,setLineColor:A,setZoneColor:j,setCourtSurfaceColor:I,resetCourtColors:E,removeCourt:U,removeTrack:D,removeMotif:R,updateMotifPosition:X,updateMotifRotation:ce,updateMotifScale:ie,updateTrackParameters:ge,enterGroup:H,exitGroup:ye,ungroup:je,deleteGroupWithChildren:ke,addToHistory:Fe}=rn(),[xe,Me]=fe.useState("transform"),[_e,Ne]=fe.useState(null);if(v){const J=o[v];return J?c.jsx(w9,{group:J,groupId:v,shapes:i,isEditing:w===v,onEnterGroup:()=>H(v),onExitGroup:()=>ye(),onUngroup:()=>je(v),onDelete:()=>ke(v)}):null}if(g){const J=a[g];return J?c.jsx(x9,{zone:J,zoneId:g}):null}if(m){const J=s[m];return J?c.jsx(v9,{text:J,textId:m}):null}if(p){const J=i[p];return J?c.jsx(b9,{shape:J,shapeId:p}):null}if(d){const J=r[d];return J?c.jsx(y9,{motif:J,motifId:d,onEditSourceDesign:e}):null}if(h){const J=n[h];return J?c.jsx(g9,{track:J,trackId:h}):null}if(!u)return c.jsx("div",{className:"properties-panel properties-panel--empty",children:c.jsxs("div",{className:"properties-panel__empty-state",children:[c.jsx("p",{children:"No element selected"}),c.jsx("span",{className:"properties-panel__hint",children:"Click on a court, track, or motif to view and edit its properties"})]})});const st=t[u];if(!st)return null;const{position:nt,rotation:Ue,scale:ct,template:he,lineColorOverrides:oe,zoneColorOverrides:We}=st,Oe=(J,pe)=>{const ve=parseFloat(pe);isNaN(ve)||C(u,{...nt,[J]:ve})},ht=J=>{const pe=parseFloat(J);isNaN(pe)||x(u,pe)},Pt=J=>{const pe=parseFloat(J);isNaN(pe)||pe<=0||k(u,pe)},St=()=>{window.confirm(`Delete ${he.name}? This action cannot be undone.`)&&U(u)},G=J=>{if(!_e)return;if(_e.type==="courtSurface"&&J===null){I(u,null),Ne(null);return}if(!J)return;const pe={tpv_code:J.code,hex:J.hex,name:J.name};_e.type==="line"?A(u,_e.id,pe):_e.type==="zone"?j(u,_e.id,pe):_e.type==="courtSurface"?I(u,pe):_e.type==="allLines"&&he.markings.forEach(ve=>{A(u,ve.id,pe)}),Ne(null)},qe=J=>{const pe=oe[J.id];if(pe)return{code:pe.tpv_code,hex:pe.hex,name:pe.name};const ve=pi.find(me=>me.code===he.defaultLineColor);return ve?{code:ve.code,hex:ve.hex,name:ve.name}:null},ae=J=>{const pe=We[J.id];if(pe)return{code:pe.tpv_code,hex:pe.hex,name:pe.name};const ve=pi.find(me=>me.code===J.defaultColor);return ve?{code:ve.code,hex:ve.hex,name:ve.name}:null};return c.jsxs("div",{className:"properties-panel",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsx("h3",{children:"Properties"}),c.jsxs("div",{className:"properties-panel__court-info",children:[c.jsx("span",{className:"court-name",children:he.name}),c.jsx("span",{className:"court-standard",children:he.standard})]})]}),c.jsxs("div",{className:"properties-panel__tabs",children:[c.jsx("button",{className:`tab ${xe==="transform"?"tab--active":""}`,onClick:()=>Me("transform"),children:"Transform"}),c.jsx("button",{className:`tab ${xe==="lines"?"tab--active":""}`,onClick:()=>Me("lines"),children:"Lines"}),c.jsx("button",{className:`tab ${xe==="zones"?"tab--active":""}`,onClick:()=>Me("zones"),children:"Zones"})]}),c.jsxs("div",{className:"properties-panel__content",children:[xe==="transform"&&c.jsxs("div",{className:"properties-section",children:[c.jsx("div",{className:"properties-section__header",children:c.jsx("h4",{children:"Transform"})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Position"}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"X"}),c.jsx("input",{type:"number",value:Math.round(nt.x),onChange:J=>Oe("x",J.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"Y"}),c.jsx("input",{type:"number",value:Math.round(nt.y),onChange:J=>Oe("y",J.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Rotation"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"360",value:Ue,onChange:J=>ht(J.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(Ue),onChange:J=>ht(J.target.value),min:"0",max:"360"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Scale"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:ct,onChange:J=>Pt(J.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:ct.toFixed(2),onChange:J=>Pt(J.target.value),min:"0.5",max:"2.0",step:"0.1"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Dimensions"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[(he.dimensions.width_mm*ct/1e3).toFixed(1),"m  ",(he.dimensions.length_mm*ct/1e3).toFixed(1),"m"]})})]}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-delete",onClick:St,title:"Delete court (Delete key)",children:" Delete Court"})})]}),xe==="lines"&&c.jsxs("div",{className:"properties-section",children:[c.jsxs("div",{className:"properties-section__header",children:[c.jsx("h4",{children:"Line Markings"}),c.jsx("button",{className:"btn-reset",onClick:()=>E(u),title:"Reset all colours to defaults",children:"Reset"})]}),c.jsxs("div",{className:"color-item color-item--all-lines",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:"Change All Lines"}),c.jsx("span",{className:"color-item__hint",children:"Set all lines to same colour"})]}),c.jsx("button",{className:"color-item__swatch color-item__swatch--all",onClick:()=>Ne({type:"allLines"}),title:"Change all line colours at once",children:c.jsx("span",{style:{fontSize:"1rem"},children:""})})]}),c.jsx("div",{className:"color-list",children:he.markings.map(J=>{const pe=qe(J);return c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:J.name}),pe&&c.jsx("span",{className:"color-item__code",children:pe.code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(pe==null?void 0:pe.hex)||"#000"},onClick:()=>Ne({type:"line",id:J.id}),title:(pe==null?void 0:pe.name)||"Select colour"})]},J.id)})})]}),xe==="zones"&&c.jsxs("div",{className:"properties-section",children:[c.jsx("div",{className:"properties-section__header",children:c.jsx("h4",{children:"Fill Colours"})}),c.jsxs("div",{className:"color-item color-item--surface-fill",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:"Court Surface"}),c.jsx("span",{className:"color-item__hint",children:st.courtSurfaceColor?st.courtSurfaceColor.name:"No Fill (transparent)"}),st.courtSurfaceColor&&c.jsx("span",{className:"color-item__code",children:st.courtSurfaceColor.tpv_code})]}),c.jsx("button",{className:`color-item__swatch ${st.courtSurfaceColor?"":"color-item__swatch--no-fill"}`,style:{backgroundColor:((M=st.courtSurfaceColor)==null?void 0:M.hex)||"transparent"},onClick:()=>Ne({type:"courtSurface"}),title:((L=st.courtSurfaceColor)==null?void 0:L.name)||"No Fill - Click to select colour"})]}),he.zones&&he.zones.length>0&&c.jsx("div",{className:"properties-section__divider",children:c.jsx("span",{children:"Paint Zones"})}),he.zones&&he.zones.length>0&&c.jsx("div",{className:"color-list",children:he.zones.map(J=>{var ve;const pe=ae(J);return c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:J.name}),c.jsxs("span",{className:"color-item__area",children:[((ve=J.area_m2)==null?void 0:ve.toFixed(1))||0," m"]}),pe&&c.jsx("span",{className:"color-item__code",children:pe.code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(pe==null?void 0:pe.hex)||"#000"},onClick:()=>Ne({type:"zone",id:J.id}),title:(pe==null?void 0:pe.name)||"Select colour"})]},J.id)})})]})]}),_e&&c.jsx("div",{className:"color-picker-modal",onClick:()=>Ne(null),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:_e.type==="allLines"?"Change All Line Colours":_e.type==="courtSurface"?"Select Court Fill Colour":"Select TPV Colour"}),c.jsx("button",{onClick:()=>Ne(null),children:""})]}),c.jsxs("div",{className:"color-picker-grid",children:[_e.type==="courtSurface"&&c.jsx("button",{className:"color-picker-swatch color-picker-swatch--no-fill",onClick:()=>G(null),title:"No Fill (transparent)",children:c.jsx("span",{className:"color-picker-swatch__code",children:"None"})}),pi.map(J=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:J.hex},onClick:()=>G(J),title:`${J.code} - ${J.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:J.code})},J.code))]})]})})]})}function g9({track:e,trackId:t}){var _,S,P;const{updateTrackParameters:n,updateTrackRotation:r,removeTrack:i,setTrackSurfaceColor:s,setTrackLineColor:a,setLaneSurfaceColor:o,resetLaneSurfaceColors:u,addToHistory:h}=rn(),{parameters:d,template:p,trackSurfaceColor:m,trackLineColor:g,laneSurfaceColors:v,rotation:w}=e,[C,x]=Te.useState(!0),[k,A]=Te.useState(!1),[j,I]=Te.useState(!1),[E,U]=Te.useState(null),[D,R]=Te.useState(""),[X,ce]=Te.useState(""),[ie,ge]=Te.useState(""),[H,ye]=Te.useState(!1),[je,ke]=Te.useState(!1),[Fe,xe]=Te.useState(!1),Me=p.trackType==="straight",_e=KP(d),Ne=((_=_e.lanes[0])==null?void 0:_.perimeter)||0,st=_e.lanes[_e.lanes.length-1],nt=(st==null?void 0:st.perimeter)||0,Ue=Me?[]:ZP(_e),ct=T=>{const N=parseInt(T);if(!(isNaN(N)||N<1||N>8))if(Me){const $=N*d.laneWidth_mm;n(t,{numLanes:N,width_mm:$})}else n(t,{numLanes:N})},he=T=>{const N=parseFloat(T)*1e3;return isNaN(N)||N<3e3?!1:(n(t,{width_mm:N}),!0)},oe=T=>{const N=parseFloat(T)*1e3;return isNaN(N)||N<3e3?!1:(n(t,{height_mm:N}),!0)},We=()=>{ye(!0),R((d.width_mm/1e3).toFixed(1))},Oe=()=>{ye(!1),he(D)},ht=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(ye(!1),R((d.width_mm/1e3).toFixed(1)))},Pt=()=>{ke(!0),ce((d.height_mm/1e3).toFixed(1))},St=()=>{ke(!1),oe(X)},G=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(ke(!1),ce((d.height_mm/1e3).toFixed(1)))},qe=T=>{let N=parseFloat(T);return isNaN(N)?!1:(N=(N%360+360)%360,r(t,N),h(),!0)},ae=()=>{xe(!0),ge(w.toFixed(0))},M=()=>{xe(!1),qe(ie)},L=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(xe(!1),ge(w.toFixed(0)))},J=(T,N)=>{const $=parseFloat(N)*1e3;if(isNaN($)||$<0)return;const F=Math.min(d.width_mm,d.height_mm)/2,q=Math.min($,F);C?n(t,{cornerRadius:{topLeft:q,topRight:q,bottomLeft:q,bottomRight:q}}):n(t,{cornerRadius:{...d.cornerRadius,[T]:q}})},pe=()=>{window.confirm(`Delete ${p.name}? This action cannot be undone.`)&&i(t)},ve=T=>{s(t,{tpv_code:T.code,hex:T.hex,name:T.name}),A(!1)},me=T=>{a(t,{tpv_code:T.code,hex:T.hex,name:T.name}),I(!1)},Le=T=>{n(t,{startingBoxes:{...d.startingBoxes,enabled:T}})},Xe=T=>{const N=parseFloat(T)*1e3;isNaN(N)||N<100||n(t,{startingBoxes:{...d.startingBoxes,depth_mm:N}})},De=T=>{n(t,{startingBoxes:{...d.startingBoxes,style:T}})},l=T=>{n(t,{startingBoxes:{...d.startingBoxes,direction:T}})},f=T=>{const N=parseFloat(T);isNaN(N)||N<0||N>100||n(t,{startingBoxes:{...d.startingBoxes,startPosition:N}})},b=(d.cornerRadius.topLeft+d.cornerRadius.topRight+d.cornerRadius.bottomLeft+d.cornerRadius.bottomRight)/4;return c.jsxs("div",{className:"properties-panel",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsx("h3",{children:"Track Properties"}),c.jsxs("div",{className:"properties-panel__court-info",children:[c.jsx("span",{className:"court-name",children:p.name}),c.jsx("span",{className:"court-standard",children:p.standard})]})]}),c.jsx("div",{className:"properties-panel__content",children:c.jsxs("div",{className:"properties-section",children:[c.jsx("div",{className:"properties-section__header",children:c.jsx("h4",{children:"Track Parameters"})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Number of Lanes"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"1",max:"8",value:d.numLanes,onChange:T=>ct(T.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:d.numLanes,onChange:T=>ct(T.target.value),min:"1",max:"8"}),c.jsx("span",{className:"property-unit",children:"lanes"})]})]})]}),Me?c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Track Width"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[(d.width_mm/1e3).toFixed(1),"m (Auto-calculated from lanes)"]})})]}):c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Track Width"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:H?D:(d.width_mm/1e3).toFixed(1),onChange:T=>R(T.target.value),onFocus:We,onBlur:Oe,onKeyDown:ht,min:"3",max:"100",step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:Me?"Track Length":"Track Height"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:je?X:(d.height_mm/1e3).toFixed(1),onChange:T=>ce(T.target.value),onFocus:Pt,onBlur:St,onKeyDown:G,min:"3",max:"100",step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Rotation"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:Fe?ie:w.toFixed(0),onChange:T=>ge(T.target.value),onFocus:ae,onBlur:M,onKeyDown:L,min:"0",max:"360",step:"15"}),c.jsx("span",{className:"property-unit",children:""})]})]}),!Me&&c.jsxs("div",{className:"property-group",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[c.jsx("label",{children:"Corner Radius"}),c.jsx("button",{className:"btn-toggle",onClick:()=>x(!C),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:C?"#0066CC":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:C?"Click to edit corners independently":"Click to lock all corners together",children:C?" Locked":" Independent"})]}),C?c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:(b/1e3).toFixed(2),onChange:T=>J("topLeft",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]}):c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Top Left"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:(d.cornerRadius.topLeft/1e3).toFixed(2),onChange:T=>J("topLeft",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Top Right"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:(d.cornerRadius.topRight/1e3).toFixed(2),onChange:T=>J("topRight",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Bottom Left"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:(d.cornerRadius.bottomLeft/1e3).toFixed(2),onChange:T=>J("bottomLeft",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Bottom Right"}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("input",{type:"number",value:(d.cornerRadius.bottomRight/1e3).toFixed(2),onChange:T=>J("bottomRight",T.target.value),min:"0",max:(Math.min(d.width_mm,d.height_mm)/2e3).toFixed(0),step:"0.5"}),c.jsx("span",{className:"property-unit",children:"m"})]})]})]})]}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Lane Width"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[(d.laneWidth_mm/1e3).toFixed(2),"m (Fixed)"]})})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Track Surface Colour"}),c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:(m==null?void 0:m.name)||"Select Colour"}),m&&c.jsx("span",{className:"color-item__code",children:m.tpv_code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(m==null?void 0:m.hex)||"#A5362F"},onClick:()=>A(!0),title:(m==null?void 0:m.name)||"Select colour"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[c.jsx("label",{style:{margin:0},children:"Lane Colours"}),(v==null?void 0:v.some(T=>T!=null))&&c.jsx("button",{onClick:()=>u(t),title:"Reset all lanes to track surface colour",style:{padding:"0.25rem 0.5rem",fontSize:"0.7rem",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",color:"#64748b"},children:"Reset All"})]}),c.jsx("div",{className:"lane-color-grid",children:_e.lanes.map(T=>{const N=(v==null?void 0:v[T.laneNumber-1])||m,$=(v==null?void 0:v[T.laneNumber-1])!=null;return c.jsxs("div",{className:"lane-color-item",children:[c.jsxs("span",{className:"lane-number",children:["Lane ",T.laneNumber]}),c.jsx("button",{className:`color-item__swatch lane-swatch ${$?"lane-swatch--override":""}`,style:{backgroundColor:(N==null?void 0:N.hex)||"#A5362F"},onClick:()=>U({laneNumber:T.laneNumber}),title:`${(N==null?void 0:N.name)||"Standard Red"}${$?" (custom)":" (default)"}`}),$&&c.jsx("button",{className:"lane-reset-btn",onClick:()=>o(t,T.laneNumber,null),title:"Reset to track default",children:""})]},T.laneNumber)})}),c.jsx("div",{style:{fontSize:"0.7rem",color:"#94a3b8",marginTop:"0.5rem"},children:"Click a swatch to change lane colour"})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Line Colour"}),c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:(g==null?void 0:g.name)||"Cream"}),g&&c.jsx("span",{className:"color-item__code",children:g.tpv_code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(g==null?void 0:g.hex)||"#E8E3D8"},onClick:()=>I(!0),title:(g==null?void 0:g.name)||"Select colour"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("input",{type:"checkbox",checked:((S=d.startingBoxes)==null?void 0:S.enabled)||!1,onChange:T=>Le(T.target.checked)}),"Show Starting Boxes"]}),((P=d.startingBoxes)==null?void 0:P.enabled)&&c.jsxs("div",{style:{marginTop:"0.75rem"},children:[c.jsxs("div",{className:"property-input-group",style:{marginBottom:"0.75rem"},children:[c.jsx("span",{className:"property-label",style:{fontSize:"0.875rem"},children:"Depth"}),c.jsx("input",{type:"number",value:(d.startingBoxes.depth_mm/1e3).toFixed(2),onChange:T=>Xe(T.target.value),min:"0.1",max:"1.0",step:"0.05"}),c.jsx("span",{className:"property-unit",children:"m"})]}),!Me&&c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:"Start Style"}),c.jsxs("select",{value:d.startingBoxes.style||"staggered",onChange:T=>De(T.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",background:"white"},children:[c.jsx("option",{value:"straight",children:"Straight Start"}),c.jsx("option",{value:"staggered",children:"Staggered Start"}),c.jsx("option",{value:"both",children:"Both (opposite ends)"})]})]}),c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:"Direction of Travel"}),c.jsxs("select",{value:d.startingBoxes.direction||"counterclockwise",onChange:T=>l(T.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",background:"white"},children:[c.jsx("option",{value:"counterclockwise",children:"Counterclockwise (Standard)"}),c.jsx("option",{value:"clockwise",children:"Clockwise"})]})]}),!Me&&c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:["Start Position (",d.startingBoxes.startPosition||0,"%)"]}),c.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:d.startingBoxes.startPosition||0,onChange:T=>f(T.target.value),className:"property-slider",style:{width:"100%"}}),c.jsx("div",{style:{fontSize:"0.7rem",color:"#94a3b8",marginTop:"0.25rem"},children:"Slide to adjust where the start line appears around the track"})]}),c.jsx("div",{className:"property-info",style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"Boxes use track surface colour with white starting line and lane numbers"}),!Me&&Ue.length>0&&(d.startingBoxes.style==="staggered"||d.startingBoxes.style==="both")&&c.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"#f8fafc",borderRadius:"4px"},children:[c.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.25rem"},children:"Auto-Calculated Staggers:"}),c.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",lineHeight:"1.4"},children:Ue.map((T,N)=>c.jsxs("div",{children:["Lane ",N+1,": ",(T/1e3).toFixed(2),"m"]},N))}),c.jsx("div",{style:{fontSize:"0.65rem",color:"#64748b",marginTop:"0.25rem",fontStyle:"italic"},children:"Outer lanes start ahead to equalize distance"})]})]})]}),c.jsx("div",{className:"property-divider"}),c.jsx("div",{className:"properties-section__header",children:c.jsx("h4",{children:"Calculated Dimensions"})}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Usable Infield"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[(_e.usableWidth/1e3).toFixed(1),"m  ",(_e.usableHeight/1e3).toFixed(1),"m"]})})]}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Lane 1 Perimeter"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[Ne.toFixed(2),"m"]})})]}),d.numLanes>1&&!Me&&c.jsxs("div",{className:"property-group property-group--info",children:[c.jsxs("label",{children:["Lane ",d.numLanes," Perimeter"]}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[nt.toFixed(2),"m"]})})]}),c.jsx("div",{className:"property-group",children:c.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Use drag handles on the canvas or edit values here. Corner radius auto-adjusts when locked."})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-delete",onClick:pe,title:"Delete track (Delete key)",children:" Delete Track"})})]})}),k&&c.jsx("div",{className:"color-picker-modal",onClick:()=>A(!1),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:"Select Track Surface Colour"}),c.jsx("button",{onClick:()=>A(!1),children:""})]}),c.jsx("div",{className:"color-picker-grid",children:pi.map(T=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>ve(T),title:`${T.code} - ${T.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))})]})}),j&&c.jsx("div",{className:"color-picker-modal",onClick:()=>I(!1),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:"Select Line Colour"}),c.jsx("button",{onClick:()=>I(!1),children:""})]}),c.jsx("div",{className:"color-picker-grid",children:pi.map(T=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>me(T),title:`${T.code} - ${T.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))})]})}),E&&c.jsx("div",{className:"color-picker-modal",onClick:()=>U(null),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsxs("h4",{children:["Lane ",E.laneNumber," Surface Colour"]}),c.jsx("button",{onClick:()=>U(null),children:""})]}),c.jsxs("div",{className:"color-picker-grid",children:[c.jsx("button",{className:"color-picker-swatch color-picker-swatch--default",onClick:()=>{o(t,E.laneNumber,null),U(null)},title:"Use track default colour",style:{backgroundColor:(m==null?void 0:m.hex)||"#A5362F"},children:c.jsx("span",{className:"color-picker-swatch__code",children:"Default"})}),pi.map(T=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>{o(t,E.laneNumber,{tpv_code:T.code,hex:T.hex,name:T.name}),U(null)},title:`${T.code} - ${T.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))]})]})})]})}function y9({motif:e,motifId:t,onEditSourceDesign:n}){const{updateMotifPosition:r,updateMotifRotation:i,updateMotifScale:s,removeMotif:a,duplicateMotif:o,refreshMotif:u,setMotifViewMode:h}=rn(),{position:d,rotation:p,scale:m,sourceDesignName:g,sourceDesignId:v,originalWidth_mm:w,originalHeight_mm:C,sourceThumbnailUrl:x,viewMode:k,hasBothVersions:A}=e,[j,I]=Te.useState(!1),[E,U]=Te.useState(null),D=(ke,Fe)=>{const xe=parseFloat(Fe);isNaN(xe)||r(t,{...d,[ke]:xe})},R=ke=>{const Fe=parseFloat(ke);isNaN(Fe)||i(t,Fe)},X=ke=>{const Fe=parseFloat(ke);isNaN(Fe)||Fe<=0||s(t,Fe)},ce=()=>{window.confirm("Delete this motif? This action cannot be undone.")&&a(t)},ie=()=>{o(t)},ge=()=>{if(n)n(v);else{if(!v){alert("Source design ID not found");return}window.open(`/studio/?design=${v}`,"_blank")}},H=async()=>{if(!j){I(!0),U(null);try{const ke=await u(t);ke.success||U(ke.error||"Failed to refresh")}catch(ke){U(ke.message||"Failed to refresh")}finally{I(!1)}}},ye=w*(m||1)/1e3,je=C*(m||1)/1e3;return c.jsxs("div",{className:"properties-panel",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsx("h3",{children:"Motif Properties"}),c.jsxs("div",{className:"properties-panel__court-info",children:[c.jsx("span",{className:"court-name",children:g||"Unnamed Motif"}),c.jsx("span",{className:"court-standard",children:"Playground Design"})]})]}),c.jsx("div",{className:"properties-panel__content",children:c.jsxs("div",{className:"properties-section",children:[x&&c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Preview"}),c.jsx("div",{style:{width:"100%",height:"80px",background:"#f3f4f6",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:c.jsx("img",{src:x,alt:g,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]}),Wl.BLEND_MODE_ENABLED,c.jsx("div",{className:"properties-section__header",children:c.jsx("h4",{children:"Transform"})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Position"}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"X"}),c.jsx("input",{type:"number",value:Math.round(d.x),onChange:ke=>D("x",ke.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"Y"}),c.jsx("input",{type:"number",value:Math.round(d.y),onChange:ke=>D("y",ke.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Rotation"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"360",value:p||0,onChange:ke=>R(ke.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(p||0),onChange:ke=>R(ke.target.value),min:"0",max:"360"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("label",{children:["Scale",c.jsx("span",{style:{fontSize:"0.7rem",color:"#64748b",marginLeft:"0.5rem"},children:"(aspect locked)"})]}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:Math.min(m||1,10),onChange:ke=>X(ke.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:(m||1).toFixed(2),onChange:ke=>X(ke.target.value),min:"0.1",step:"0.1"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Current Size"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[ye.toFixed(2),"m  ",je.toFixed(2),"m"]})})]}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Original Size"}),c.jsx("div",{className:"property-info",children:c.jsxs("span",{children:[(w/1e3).toFixed(2),"m  ",(C/1e3).toFixed(2),"m"]})})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Source Design"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-primary",onClick:ge,title:"Edit the source playground design in a new tab",style:{width:"100%",padding:"0.5rem",background:"var(--color-primary, #1e4a7a)",color:"white",border:"none",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" Edit Source Design"})}),c.jsxs("div",{className:"property-group property-group--actions",children:[c.jsx("button",{className:"btn-secondary",onClick:H,disabled:j,title:"Refresh this motif with the latest version from the source design",style:{width:"100%",padding:"0.5rem",background:j?"#e5e7eb":"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:j?"not-allowed":"pointer",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:j?" Refreshing...":" Refresh from Source"}),E&&c.jsx("div",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem"},children:E}),c.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:"Click after editing the source design to update this motif"})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Actions"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-secondary",onClick:ie,title:"Duplicate motif (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Motif"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-delete",onClick:ce,title:"Delete motif (Delete key)",children:" Delete Motif"})}),c.jsx("div",{className:"property-group",children:c.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:' Tip: Drag the motif on the canvas to reposition. Edit the source design and click "Refresh" to update.'})})]})})]})}function b9({shape:e,shapeId:t}){var W;const{updateShapePosition:n,updateShapeDimensions:r,updateShapeSides:i,updateShapeCornerRadius:s,setShapeStarMode:a,setShapeInnerRadius:o,updateShapeRotation:u,setShapeFillColor:h,setShapeStroke:d,setShapeAspectLock:p,removeShape:m,duplicateShape:g,randomizeBlob:v,setBlobStyle:w,setEditPointsVisible:C,setPathClosed:x,setPathSmooth:k}=rn(),[A,j]=Te.useState(!1),[I,E]=Te.useState(!1),[U,D]=Te.useState(""),[R,X]=Te.useState(""),[ce,ie]=Te.useState(!1),[ge,H]=Te.useState(!1),{shapeType:ye,sides:je,width_mm:ke,height_mm:Fe,cornerRadius:xe,starMode:Me,innerRadius:_e,position:Ne,rotation:st,fillColor:nt,strokeEnabled:Ue,strokeColor:ct,strokeWidth_mm:he,aspectLocked:oe,blobStyle:We,editPointsVisible:Oe,closed:ht,smooth:Pt,controlPoints:St}=e,G=ye==="blob",qe=ye==="path",ae=(Y,B)=>{const Z=parseFloat(B);isNaN(Z)||n(t,{...Ne,[Y]:Z})},M=Y=>{const B=parseFloat(Y);if(isNaN(B)||B<100)return!1;if(oe){const Z=Fe/ke;r(t,B,B*Z)}else r(t,B,Fe);return!0},L=Y=>{const B=parseFloat(Y);if(isNaN(B)||B<100)return!1;if(oe){const Z=ke/Fe;r(t,B*Z,B)}else r(t,ke,B);return!0},J=()=>{ie(!0),D(ke.toFixed(0))},pe=()=>{ie(!1),M(U)},ve=Y=>{Y.key==="Enter"?Y.target.blur():Y.key==="Escape"&&(ie(!1),D(ke.toFixed(0)))},me=()=>{H(!0),X(Fe.toFixed(0))},Le=()=>{H(!1),L(R)},Xe=Y=>{Y.key==="Enter"?Y.target.blur():Y.key==="Escape"&&(H(!1),X(Fe.toFixed(0)))},De=Y=>{const B=parseInt(Y);isNaN(B)||B<3||i(t,B)},l=Y=>{const B=parseFloat(Y);isNaN(B)||B<0||B>100||s(t,B)},f=Y=>{const B=parseFloat(Y);isNaN(B)||u(t,B)},b=Y=>{h(t,{tpv_code:Y.code,hex:Y.hex,name:Y.name}),j(!1)},_=Y=>{d(t,!0,{tpv_code:Y.code,hex:Y.hex,name:Y.name},he),E(!1)},S=Y=>{Y&&!ct?d(t,!0,{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},he):d(t,Y,ct,he)},P=Y=>{const B=parseFloat(Y);isNaN(B)||B<10||d(t,Ue,ct,B)},T=()=>{p(t,!oe)},N=()=>{window.confirm("Delete this shape? This action cannot be undone.")&&m(t)},$=()=>{g(t)},F=[{sides:3,name:"Triangle",icon:""},{sides:4,name:"Rectangle",icon:""},{sides:5,name:"Pentagon",icon:""},{sides:6,name:"Hexagon",icon:""},{sides:8,name:"Octagon",icon:""},{sides:32,name:"Circle",icon:""},{sides:5,name:"Star",icon:"",starMode:!0}],q=Y=>{Y.starMode?(a(t,!0),je!==Y.sides&&De(Y.sides)):(Me&&a(t,!1),De(Y.sides))},Q=Y=>{const B=parseFloat(Y)/100;o(t,B)},K=Y=>Y.starMode?Me&&je===Y.sides:!Me&&je===Y.sides;return c.jsxs("div",{className:"properties-panel",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsx("h3",{children:G?"Blob Shape":qe?"Pen Path":"Shape Properties"}),c.jsxs("div",{className:"properties-panel__court-info",children:[c.jsx("span",{className:"court-name",children:G?((W=Zm[We||"organic"])==null?void 0:W.name)||"Organic":qe?ht?"Closed Path":"Open Path":$F(je,Me)}),c.jsx("span",{className:"court-standard",children:G?" Blob":qe?` ${(St==null?void 0:St.length)||0} points`:`${DF(je,Me)} ${je} ${Me?"points":"sides"}`})]})]}),c.jsx("div",{className:"properties-panel__content",children:c.jsxs("div",{className:"properties-section",children:[G?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Style"}),c.jsx("select",{value:We||"organic",onChange:Y=>w(t,Y.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",cursor:"pointer",background:"#fff"},children:Object.entries(Zm).map(([Y,B])=>c.jsxs("option",{value:Y,children:[B.name," - ",B.description]},Y))})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("button",{onClick:()=>v(t),style:{width:"100%",padding:"0.75rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{fontSize:"1.1rem"},children:""})," New Shape"]}),c.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem",textAlign:"center"},children:"Generate a new random shape in the selected style"})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Oe?"#eff6ff":"#fff"},children:[c.jsx("input",{type:"checkbox",checked:Oe||!1,onChange:Y=>C(t,Y.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("span",{style:{fontSize:"0.875rem"},children:"Edit Points"})]}),Oe&&c.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:"Drag points and handles on canvas for precise control"})]})]}):qe?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"property-group",children:[c.jsx("label",{style:{marginBottom:"0.5rem",display:"block"},children:"Path Options"}),c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:ht?"#eff6ff":"#fff",marginBottom:"0.5rem"},children:[c.jsx("input",{type:"checkbox",checked:ht||!1,onChange:Y=>x(t,Y.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("span",{style:{fontSize:"0.875rem"},children:"Closed Path"})]}),c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Pt?"#eff6ff":"#fff"},children:[c.jsx("input",{type:"checkbox",checked:Pt||!1,onChange:Y=>k(t,Y.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("span",{style:{fontSize:"0.875rem"},children:"Smooth Curves"})]}),Pt&&c.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:"Uses bezier curves for smooth transitions"})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Oe?"#eff6ff":"#fff"},children:[c.jsx("input",{type:"checkbox",checked:Oe||!1,onChange:Y=>C(t,Y.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("span",{style:{fontSize:"0.875rem"},children:"Edit Points"})]}),Oe&&c.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:["Drag points to reshape. ",Pt?"Drag handles for curve control.":"Enable smooth curves for bezier handles."]})]}),c.jsx("div",{className:"property-group",style:{background:"#f8fafc",padding:"0.75rem",borderRadius:"6px"},children:c.jsxs("div",{style:{fontSize:"0.8125rem",color:"#475569"},children:[c.jsx("strong",{children:(St==null?void 0:St.length)||0})," control points"]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Shape Type"}),c.jsx("div",{className:"shape-presets",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"0.5rem"},children:F.map(Y=>{const B=K(Y);return c.jsxs("button",{onClick:()=>q(Y),title:Y.name,style:{padding:"0.5rem",border:B?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:B?"#eff6ff":"#fff",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem"},children:[c.jsx("span",{children:Y.icon}),c.jsx("span",{style:{fontSize:"0.65rem",color:"#64748b"},children:Y.name})]},`${Y.name}-${Y.sides}`)})})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:Me?"Number of Points":"Number of Sides"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"3",max:Me?12:32,value:je,onChange:Y=>De(Y.target.value),className:"property-slider"}),c.jsx("div",{className:"property-input-group property-input-group--compact",children:c.jsx("input",{type:"number",value:je,onChange:Y=>De(Y.target.value),min:"3",max:Me?12:32})})]})]}),Me&&c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Star Depth"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"10",max:"90",value:Math.round((_e||.5)*100),onChange:Y=>Q(Y.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round((_e||.5)*100),onChange:Y=>Q(Y.target.value),min:"10",max:"90"}),c.jsx("span",{className:"property-unit",children:"%"})]})]}),c.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:"Lower values = deeper points, higher = shallower"})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Corner Smoothing"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"100",value:xe,onChange:Y=>l(Y.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:xe,onChange:Y=>l(Y.target.value),min:"0",max:"100"}),c.jsx("span",{className:"property-unit",children:"%"})]})]})]})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Dimensions"})}),c.jsxs("div",{className:"property-group",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[c.jsx("label",{style:{margin:0},children:"Size"}),c.jsx("button",{onClick:T,style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:oe?"#3b82f6":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:oe?"Aspect ratio locked":"Aspect ratio unlocked",children:oe?" Locked":" Free"})]}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"W"}),c.jsx("input",{type:"number",value:ce?U:ke.toFixed(0),onChange:Y=>D(Y.target.value),onFocus:J,onBlur:pe,onKeyDown:ve,step:"100",min:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"H"}),c.jsx("input",{type:"number",value:ge?R:Fe.toFixed(0),onChange:Y=>X(Y.target.value),onFocus:me,onBlur:Le,onKeyDown:Xe,step:"100",min:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]}),c.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:[(ke/1e3).toFixed(2),"m  ",(Fe/1e3).toFixed(2),"m"]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Position"}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"X"}),c.jsx("input",{type:"number",value:Math.round(Ne.x),onChange:Y=>ae("x",Y.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"Y"}),c.jsx("input",{type:"number",value:Math.round(Ne.y),onChange:Y=>ae("y",Y.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Rotation"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"360",value:st||0,onChange:Y=>f(Y.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(st||0),onChange:Y=>f(Y.target.value),min:"0",max:"360"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Appearance"})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Fill Colour"}),c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:(nt==null?void 0:nt.name)||"Select Colour"}),nt&&c.jsx("span",{className:"color-item__code",children:nt.tpv_code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(nt==null?void 0:nt.hex)||"#609B63"},onClick:()=>j(!0),title:(nt==null?void 0:nt.name)||"Select colour"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("input",{type:"checkbox",checked:Ue||!1,onChange:Y=>S(Y.target.checked)}),"Border"]}),Ue&&c.jsxs("div",{style:{marginTop:"0.5rem"},children:[c.jsxs("div",{className:"color-item",style:{marginBottom:"0.5rem"},children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:(ct==null?void 0:ct.name)||"Select Colour"}),ct&&c.jsx("span",{className:"color-item__code",children:ct.tpv_code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(ct==null?void 0:ct.hex)||"#FFFFFF"},onClick:()=>E(!0),title:(ct==null?void 0:ct.name)||"Select colour"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",style:{fontSize:"0.8rem"},children:"Width"}),c.jsx("input",{type:"number",value:he,onChange:Y=>P(Y.target.value),step:"10",min:"10"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Actions"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-secondary",onClick:$,title:"Duplicate shape (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Shape"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-delete",onClick:N,title:"Delete shape (Delete key)",children:" Delete Shape"})}),c.jsx("div",{className:"property-group",children:c.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Drag corners to resize, drag the rotation handle above the shape to rotate. Hold Shift to snap rotation to 15 increments."})})]})}),A&&c.jsx("div",{className:"color-picker-modal",onClick:()=>j(!1),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:"Select Fill Colour"}),c.jsx("button",{onClick:()=>j(!1),children:""})]}),c.jsx("div",{className:"color-picker-grid",children:pi.map(Y=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:Y.hex},onClick:()=>b(Y),title:`${Y.code} - ${Y.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:Y.code})},Y.code))})]})}),I&&c.jsx("div",{className:"color-picker-modal",onClick:()=>E(!1),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:"Select Border Colour"}),c.jsx("button",{onClick:()=>E(!1),children:""})]}),c.jsx("div",{className:"color-picker-grid",children:pi.map(Y=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:Y.hex},onClick:()=>_(Y),title:`${Y.code} - ${Y.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:Y.code})},Y.code))})]})})]})}function v9({text:e,textId:t}){const{updateTextContent:n,updateTextPosition:r,updateTextScale:i,updateTextFont:s,updateTextAlign:a,updateTextRotation:o,setTextFillColor:u,setTextStrokeColor:h,updateTextStrokeWidth:d,removeText:p,duplicateText:m}=rn(),[g,v]=Te.useState(!1),[w,C]=Te.useState(!1),{content:x,fontFamily:k,fontSize_mm:A,scale_x:j=1,scale_y:I=1,fontWeight:E,fontStyle:U,textAlign:D,position:R,rotation:X,fillColor:ce,strokeColor:ie,strokeWidth_mm:ge}=e,H=A||500,ye=yo(x||"Text",k,H,E,U),je=Math.round(ye.width*j),ke=Math.round(H*1.2*I),Fe=UF(),xe=G=>{n(t,G)},Me=(G,qe)=>{const ae=parseFloat(qe);isNaN(ae)||r(t,{...R,[G]:ae})},_e=G=>{const qe=parseFloat(G);if(isNaN(qe)||qe<10)return;const ae=qe/ye.width;i(t,ae,ae)},Ne=G=>{const qe=parseFloat(G);if(isNaN(qe)||qe<10)return;const ae=H*1.2,M=qe/ae;i(t,M,M)},st=G=>{s(t,G,E,U)},nt=()=>{s(t,k,E==="bold"?"normal":"bold",U)},Ue=()=>{s(t,k,E,U==="italic"?"normal":"italic")},ct=G=>{a(t,G)},he=G=>{const qe=parseFloat(G);isNaN(qe)||o(t,qe)},oe=G=>{u(t,{tpv_code:G.code,hex:G.hex,name:G.name}),v(!1)},We=G=>{h(t,{tpv_code:G.code,hex:G.hex,name:G.name}),(!ge||ge===0)&&d(t,Math.round(H*I*.05)),C(!1)},Oe=G=>{const qe=parseFloat(G);isNaN(qe)||qe<0||d(t,qe)},ht=()=>{h(t,null),d(t,0)},Pt=()=>{window.confirm("Delete this text? This action cannot be undone.")&&p(t)},St=()=>{m(t)};return c.jsxs("div",{className:"properties-panel",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsx("h3",{children:"Text Properties"}),c.jsxs("div",{className:"properties-panel__court-info",children:[c.jsx("span",{className:"court-name",style:{fontFamily:k},children:x||"Text Label"}),c.jsx("span",{className:"court-standard",children:"T Text Element"})]})]}),c.jsx("div",{className:"properties-panel__content",children:c.jsxs("div",{className:"properties-section",children:[c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Text Content"}),c.jsx("input",{type:"text",value:x,onChange:G=>xe(G.target.value),placeholder:"Enter text...",style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontFamily:k,fontSize:"1rem"}})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Typography"})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Font Family"}),c.jsx("select",{value:k,onChange:G=>st(G.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontFamily:"inherit",fontSize:"0.875rem"},children:Fe.map(G=>c.jsx("option",{value:G.family,style:{fontFamily:G.family},children:G.name},G.name))})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Size"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[c.jsxs("div",{className:"property-input-group property-input-group--compact",style:{flex:1},children:[c.jsx("span",{className:"property-unit",style:{marginRight:"0.25rem"},children:"W"}),c.jsx("input",{type:"number",value:je,onChange:G=>_e(G.target.value),min:"10",step:"10",style:{width:"70px"}}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group property-input-group--compact",style:{flex:1},children:[c.jsx("span",{className:"property-unit",style:{marginRight:"0.25rem"},children:"H"}),c.jsx("input",{type:"number",value:ke,onChange:G=>Ne(G.target.value),min:"10",step:"10",style:{width:"70px"}}),c.jsx("span",{className:"property-unit",children:"mm"})]})]}),c.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:[" ",(je/1e3).toFixed(2),"m  ",(ke/1e3).toFixed(2),"m"]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Style"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:nt,style:{flex:1,padding:"0.5rem",border:E==="bold"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:E==="bold"?"#eff6ff":"#fff",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},title:"Bold",children:"B"}),c.jsx("button",{onClick:Ue,style:{flex:1,padding:"0.5rem",border:U==="italic"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:U==="italic"?"#eff6ff":"#fff",fontStyle:"italic",fontSize:"1rem",cursor:"pointer"},title:"Italic",children:"I"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Alignment"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>ct("left"),style:{flex:1,padding:"0.5rem",border:D==="left"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="left"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Left",children:""}),c.jsx("button",{onClick:()=>ct("center"),style:{flex:1,padding:"0.5rem",border:D==="center"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="center"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Center",children:""}),c.jsx("button",{onClick:()=>ct("right"),style:{flex:1,padding:"0.5rem",border:D==="right"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="right"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Right",children:""})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Text Colour"}),c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:(ce==null?void 0:ce.name)||"Select Colour"}),ce&&c.jsx("span",{className:"color-item__code",children:ce.tpv_code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(ce==null?void 0:ce.hex)||"#1C1C1C"},onClick:()=>v(!0),title:(ce==null?void 0:ce.name)||"Select colour"})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Outline"}),ie?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"color-item",children:[c.jsxs("div",{className:"color-item__info",children:[c.jsx("span",{className:"color-item__name",children:ie.name}),c.jsx("span",{className:"color-item__code",children:ie.tpv_code})]}),c.jsx("button",{className:"color-item__swatch",style:{backgroundColor:ie.hex},onClick:()=>C(!0),title:ie.name})]}),c.jsxs("div",{className:"property-input-row",style:{marginTop:"0.5rem"},children:[c.jsx("input",{type:"range",min:"1",max:Math.round(A*.2),step:"1",value:ge||0,onChange:G=>Oe(G.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(ge||0),onChange:G=>Oe(G.target.value),min:"0",step:"1"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]}),c.jsx("button",{onClick:ht,style:{marginTop:"0.5rem",padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626",cursor:"pointer"},children:"Remove Outline"})]}):c.jsx("button",{onClick:()=>C(!0),style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",fontSize:"0.875rem",color:"#6b7280",cursor:"pointer"},children:"+ Add Outline"})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Transform"})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Position"}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"X"}),c.jsx("input",{type:"number",value:Math.round(R.x),onChange:G=>Me("x",G.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"Y"}),c.jsx("input",{type:"number",value:Math.round(R.y),onChange:G=>Me("y",G.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Rotation"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"360",value:X||0,onChange:G=>he(G.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(X||0),onChange:G=>he(G.target.value),min:"0",max:"360"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Actions"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-secondary",onClick:St,title:"Duplicate text (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Text"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-delete",onClick:Pt,title:"Delete text (Delete key)",children:" Delete Text"})}),c.jsx("div",{className:"property-group",children:c.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Drag corners to resize text. Hold Shift while rotating to snap to 15 increments."})})]})}),g&&c.jsx("div",{className:"color-picker-modal",onClick:()=>v(!1),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:"Select Text Colour"}),c.jsx("button",{onClick:()=>v(!1),children:""})]}),c.jsx("div",{className:"color-picker-grid",children:pi.map(G=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:G.hex},onClick:()=>oe(G),title:`${G.code} - ${G.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:G.code})},G.code))})]})}),w&&c.jsx("div",{className:"color-picker-modal",onClick:()=>C(!1),children:c.jsxs("div",{className:"color-picker-modal__content",onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{className:"color-picker-modal__header",children:[c.jsx("h4",{children:"Select Outline Colour"}),c.jsx("button",{onClick:()=>C(!1),children:""})]}),c.jsx("div",{className:"color-picker-grid",children:pi.map(G=>c.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:G.hex},onClick:()=>We(G),title:`${G.code} - ${G.name}`,children:c.jsx("span",{className:"color-picker-swatch__code",children:G.code})},G.code))})]})})]})}function x9({zone:e,zoneId:t}){const{updateExclusionZonePosition:n,updateExclusionZoneDimensions:r,updateExclusionZoneRotation:i,updateExclusionZoneCornerRadius:s,removeExclusionZone:a,duplicateExclusionZone:o,addToHistory:u}=rn(),{position:h,rotation:d,width_mm:p,height_mm:m,sides:g,cornerRadius:v,customName:w}=e,C=(R,X)=>{const ce=parseFloat(X);isNaN(ce)||n(t,{...h,[R]:ce})},x=(R,X)=>{const ce=parseFloat(X);isNaN(ce)||ce<500||(R==="width"?r(t,ce,m):r(t,p,ce),u())},k=R=>{const X=parseFloat(R);isNaN(X)||(i(t,X),u())},A=R=>{const X=parseFloat(R);isNaN(X)||s(t,X)},j=()=>{window.confirm("Delete this exclusion zone? This action cannot be undone.")&&a(t)},I=()=>{o(t)},E=p*m/1e6,U=w||"Exclusion Zone",D=g===4?"Rectangle":g>=32?"Circle":`${g}-sided`;return c.jsxs("div",{className:"properties-panel",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsx("h3",{children:"Exclusion Zone"}),c.jsxs("div",{className:"properties-panel__court-info",children:[c.jsx("span",{className:"court-name",children:U}),c.jsx("span",{className:"court-standard",style:{background:"#f87171",color:"white"},children:"Excluded Area"})]})]}),c.jsx("div",{className:"properties-panel__content",children:c.jsxs("div",{className:"properties-section",children:[c.jsx("div",{className:"property-group",style:{background:"#fef2f2",padding:"0.75rem",borderRadius:"6px",marginBottom:"1rem",border:"1px solid #fecaca"},children:c.jsx("p",{style:{fontSize:"0.75rem",color:"#991b1b",margin:0},children:"This area represents a building, planter, or other obstacle. It is excluded from material calculations."})}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Dimensions"}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"W"}),c.jsx("input",{type:"number",value:Math.round(p),onChange:R=>x("width",R.target.value),step:"100",min:"500"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"H"}),c.jsx("input",{type:"number",value:Math.round(m),onChange:R=>x("height",R.target.value),step:"100",min:"500"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Position"}),c.jsxs("div",{className:"property-input-row",children:[c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"X"}),c.jsx("input",{type:"number",value:Math.round(h.x),onChange:R=>C("x",R.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]}),c.jsxs("div",{className:"property-input-group",children:[c.jsx("span",{className:"property-label",children:"Y"}),c.jsx("input",{type:"number",value:Math.round(h.y),onChange:R=>C("y",R.target.value),step:"100"}),c.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Rotation"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"360",value:d||0,onChange:R=>k(R.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(d||0),onChange:R=>k(R.target.value),min:"0",max:"360"}),c.jsx("span",{className:"property-unit",children:""})]})]})]}),g===4&&c.jsxs("div",{className:"property-group",children:[c.jsx("label",{children:"Corner Radius"}),c.jsxs("div",{className:"property-input-row",children:[c.jsx("input",{type:"range",min:"0",max:"100",value:v||0,onChange:R=>A(R.target.value),className:"property-slider"}),c.jsxs("div",{className:"property-input-group property-input-group--compact",children:[c.jsx("input",{type:"number",value:Math.round(v||0),onChange:R=>A(R.target.value),min:"0",max:"100"}),c.jsx("span",{className:"property-unit",children:"%"})]})]})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Exclusion Info"})}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Shape"}),c.jsx("div",{className:"property-info",children:c.jsx("span",{children:D})})]}),c.jsxs("div",{className:"property-group property-group--info",children:[c.jsx("label",{children:"Excluded Area"}),c.jsx("div",{className:"property-info",style:{color:"#dc2626"},children:c.jsxs("span",{children:[E.toFixed(2)," m"]})})]}),c.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:c.jsx("span",{children:"Actions"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-secondary",onClick:I,title:"Duplicate exclusion zone",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:"Duplicate Zone"})}),c.jsx("div",{className:"property-group property-group--actions",children:c.jsx("button",{className:"btn-delete",onClick:j,title:"Delete exclusion zone",children:"Delete Zone"})}),c.jsx("div",{className:"property-group",children:c.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:"Drag the zone on the canvas to reposition. Use handles to resize."})})]})})]})}function w9({group:e,groupId:t,shapes:n,isEditing:r,onEnterGroup:i,onExitGroup:s,onUngroup:a,onDelete:o}){const u=e.customName||"Group",h=e.childIds.map(p=>n[p]).filter(Boolean),d=e.bounds||{width:0,height:0};return c.jsx("div",{className:"properties-panel properties-panel--group",children:c.jsxs("div",{className:"properties-panel__scroll-container",children:[c.jsxs("div",{className:"properties-panel__header",children:[c.jsxs("div",{className:"properties-panel__title-row",children:[c.jsx("span",{className:"properties-panel__icon",style:{color:"#9333ea"},children:""}),c.jsx("h3",{className:"properties-panel__title",children:u})]}),c.jsxs("span",{className:"properties-panel__subtitle",children:[e.childIds.length," element",e.childIds.length!==1?"s":""]})]}),c.jsxs("div",{className:"properties-panel__content",children:[c.jsxs("div",{className:"property-section",children:[c.jsx("div",{className:"property-group",style:{marginBottom:"1rem"},children:r?c.jsx("button",{className:"property-btn property-btn--secondary property-btn--full",onClick:s,style:{borderColor:"#9333ea",color:"#9333ea"},children:" Exit Group Editing"}):c.jsx("button",{className:"property-btn property-btn--primary property-btn--full",onClick:i,style:{background:"#9333ea"},children:"Edit Group Elements"})}),r&&c.jsx("div",{className:"property-hint",style:{fontSize:"0.75rem",color:"#9333ea",marginBottom:"1rem"},children:"Click on individual elements to select and edit them"})]}),c.jsxs("div",{className:"property-section",children:[c.jsx("h4",{className:"property-section__title",children:"Dimensions"}),c.jsxs("div",{className:"property-group",children:[c.jsxs("div",{className:"property-row",children:[c.jsx("label",{className:"property-label",children:"Width"}),c.jsxs("span",{className:"property-value",children:[(d.width/1e3).toFixed(2),"m"]})]}),c.jsxs("div",{className:"property-row",children:[c.jsx("label",{className:"property-label",children:"Height"}),c.jsxs("span",{className:"property-value",children:[(d.height/1e3).toFixed(2),"m"]})]})]})]}),c.jsxs("div",{className:"property-section",children:[c.jsxs("h4",{className:"property-section__title",children:["Elements (",h.length,")"]}),c.jsx("div",{className:"property-group",children:c.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"6px",border:"1px solid #e5e7eb"},children:h.map((p,m)=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderBottom:m<h.length-1?"1px solid #f1f5f9":"none",fontSize:"0.8rem"},children:[c.jsx("span",{style:{color:"#9333ea"},children:p.shapeType==="blob"?"":""}),c.jsx("span",{style:{color:"#475569"},children:p.customName||`${p.blobStyle||p.shapeType} ${m+1}`}),c.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.7rem",color:"#9ca3af"},children:[(p.width_mm/1e3).toFixed(1),"m"]})]},p.id))})})]}),c.jsxs("div",{className:"property-section",children:[c.jsx("h4",{className:"property-section__title",children:"Actions"}),c.jsxs("div",{className:"property-group",style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx("button",{className:"property-btn property-btn--secondary property-btn--full",onClick:a,title:"Dissolve the group and make elements independent",children:" Ungroup Elements"}),c.jsx("button",{className:"property-btn property-btn--danger property-btn--full",onClick:()=>{confirm(`Delete "${u}" and all its elements?`)&&o()},title:"Delete group and all its elements",children:" Delete Group"})]})]}),c.jsx("div",{className:"property-group",children:c.jsxs("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:[c.jsx("strong",{children:"Tip:"})," Double-click a group to edit its contents. Press Escape to exit.",c.jsx("br",{}),c.jsx("strong",{children:"Shortcuts:"})," G to group, G to ungroup."]})})]})]})})}function _9(){const{courts:e,tracks:t,motifs:n,shapes:r,texts:i,exclusionZones:s,groups:a,elementOrder:o,selectedCourtId:u,selectedTrackId:h,selectedMotifId:d,selectedShapeId:p,selectedTextId:m,selectedExclusionZoneId:g,selectedGroupId:v,editingGroupId:w,setElementOrder:C,selectCourt:x,selectTrack:k,selectMotif:A,selectShape:j,selectText:I,selectExclusionZone:E,selectGroup:U,deselectGroup:D,enterGroup:R,exitGroup:X,ungroup:ce,deleteGroupWithChildren:ie,bringToFront:ge,sendToBack:H,duplicateCourt:ye,duplicateTrack:je,duplicateMotif:ke,duplicateShape:Fe,duplicateText:xe,removeCourt:Me,removeTrack:_e,removeMotif:Ne,removeShape:st,removeText:nt,removeExclusionZone:Ue,renameElement:ct,toggleElementLock:he,toggleElementVisibility:oe,addToHistory:We}=rn(),[Oe,ht]=fe.useState(null),[Pt,St]=fe.useState(null),[G,qe]=fe.useState(null),[ae,M]=fe.useState(null),[L,J]=fe.useState(""),[pe,ve]=fe.useState(new Set);fe.useEffect(()=>{const B=()=>qe(null);if(G)return document.addEventListener("click",B),()=>document.removeEventListener("click",B)},[G]);const me=[...o].filter(B=>!B.startsWith("group-")).reverse(),Le=B=>{var Z,V,ne;if(B.startsWith("court-")){const z=e[B];return{type:"court",name:(z==null?void 0:z.customName)||((Z=z==null?void 0:z.template)==null?void 0:Z.name)||"Unknown Court",icon:"",sport:((V=z==null?void 0:z.template)==null?void 0:V.sport)||"",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("track-")){const z=t[B];return{type:"track",name:(z==null?void 0:z.customName)||((ne=z==null?void 0:z.template)==null?void 0:ne.name)||"Unknown Track",icon:"",sport:"athletics",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("motif-")){const z=n[B];return{type:"motif",name:(z==null?void 0:z.customName)||(z==null?void 0:z.sourceDesignName)||"Unknown Motif",icon:"",sport:"playground",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("shape-")){const z=r[B];let te="Shape",se="";if((z==null?void 0:z.shapeType)==="blob")te={organic:"Organic Blob",splashy:"Splashy Blob",cloudy:"Cloudy Blob",rocky:"Rocky Blob"}[z.blobStyle]||"Blob",se="";else if((z==null?void 0:z.shapeType)==="path")te=z.closed?"Custom Shape":"Path",se="";else if(z!=null&&z.starMode)te=`${z.sides||5}-Point Star`,se="";else if(z!=null&&z.sides){const ue=z.sides;ue>=32?(te="Circle",se=""):ue===3?(te="Triangle",se=""):ue===4?(te="Rectangle",se=""):ue===5?(te="Pentagon",se=""):ue===6?(te="Hexagon",se=""):ue===8?(te="Octagon",se=""):(te=`${ue}-gon`,se="")}return{type:"shape",name:(z==null?void 0:z.customName)||te,icon:se,sport:"shape",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("text-")){const z=i[B],te=(z==null?void 0:z.content)||"Text Label",se=te.length>20?te.substring(0,20)+"...":te;return{type:"text",name:(z==null?void 0:z.customName)||se,icon:"T",sport:"text",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("exclusion-")){const z=s[B];return{type:"exclusion",name:(z==null?void 0:z.customName)||"Exclusion Zone",icon:"",sport:"exclusion",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}return{type:"unknown",name:"Unknown",icon:"",sport:"",locked:!1,visible:!0}},Xe=B=>B===u||B===h||B===d||B===p||B===m||B===g,De=B=>{B.startsWith("court-")?x(B):B.startsWith("track-")?k(B):B.startsWith("motif-")?A(B):B.startsWith("shape-")?j(B):B.startsWith("text-")?I(B):B.startsWith("exclusion-")&&E(B)},l=(B,Z)=>{ht(Z),B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/plain",Z),setTimeout(()=>{B.target.classList.add("layer-item--dragging")},0)},f=B=>{B.target.classList.remove("layer-item--dragging"),ht(null),St(null)},b=(B,Z)=>{B.preventDefault(),B.dataTransfer.dropEffect="move",Z!==Oe&&St(Z)},_=()=>{St(null)},S=(B,Z)=>{if(B.preventDefault(),!Oe||Oe===Z){ht(null),St(null);return}const V=[...o],ne=V.indexOf(Oe),z=V.indexOf(Z);if(ne===-1||z===-1)return;V.splice(ne,1);const te=me.indexOf(Oe),se=me.indexOf(Z);te<se,V.splice(z,0,Oe),C(V),We(),ht(null),St(null)},P=(B,Z)=>{B.stopPropagation(),ge(Z),qe(null)},T=(B,Z)=>{B.stopPropagation(),H(Z),qe(null)},N=(B,Z)=>{B.stopPropagation(),Z.startsWith("court-")?ye(Z):Z.startsWith("track-")?je(Z):Z.startsWith("motif-")?ke(Z):Z.startsWith("shape-")?Fe(Z):Z.startsWith("text-")&&xe(Z),qe(null)},$=(B,Z)=>{B.stopPropagation();const V=Le(Z);confirm(`Delete "${V.name}"?`)&&(Z.startsWith("court-")?Me(Z):Z.startsWith("track-")?_e(Z):Z.startsWith("motif-")?Ne(Z):Z.startsWith("shape-")?st(Z):Z.startsWith("text-")?nt(Z):Z.startsWith("exclusion-")&&Ue(Z)),qe(null)},F=(B,Z)=>{B.stopPropagation();const V=Le(Z);M(Z),J(V.name),qe(null)},q=B=>{L.trim()&&ct(B,L.trim()),M(null),J("")},Q=(B,Z)=>{B.key==="Enter"?q(Z):B.key==="Escape"&&(M(null),J(""))},K=(B,Z)=>{B.stopPropagation(),he(Z),qe(null)},W=(B,Z)=>{B.stopPropagation(),oe(Z),qe(null)},Y=(B,Z)=>{B.stopPropagation(),qe(G===Z?null:Z)};return me.length===0&&Object.keys(a).length===0?c.jsx("div",{className:"layers-panel layers-panel--empty",children:c.jsxs("div",{className:"layers-panel__empty-state",children:[c.jsx("span",{className:"layers-panel__empty-icon",children:""}),c.jsx("p",{children:"No elements yet"}),c.jsx("span",{className:"layers-panel__empty-hint",children:"Add courts, tracks, motifs, shapes, or text"})]})}):c.jsxs("div",{className:"layers-panel",children:[c.jsxs("div",{className:"layers-panel__header",children:[c.jsx("h4",{children:"Layers"}),c.jsx("span",{className:"layers-panel__count",children:me.length})]}),c.jsx("div",{className:"layers-panel__hint",children:"Drag to reorder layers. Top = front, bottom = back."}),c.jsx("div",{className:"layers-panel__list",children:me.map((B,Z)=>{const V=Le(B),ne=Xe(B),z=B===Pt,te=Z===0,se=Z===me.length-1,ue=ae===B;return c.jsxs("div",{className:`layer-item ${ne?"layer-item--selected":""} ${z?"layer-item--drag-over":""} ${V.locked?"layer-item--locked":""} ${V.visible?"":"layer-item--hidden"}`,draggable:!V.locked&&!ue,onDragStart:re=>l(re,B),onDragEnd:f,onDragOver:re=>b(re,B),onDragLeave:_,onDrop:re=>S(re,B),onClick:()=>!ue&&De(B),children:[c.jsx("span",{className:`layer-item__handle ${V.locked?"layer-item__handle--disabled":""}`,title:V.locked?"Locked":"Drag to reorder",children:V.locked?"":""}),ue?c.jsx("input",{type:"text",className:"layer-item__rename-input",value:L,onChange:re=>J(re.target.value),onBlur:()=>q(B),onKeyDown:re=>Q(re,B),autoFocus:!0,onClick:re=>re.stopPropagation()}):c.jsx("span",{className:`layer-item__name ${V.visible?"":"layer-item__name--hidden"}`,children:V.name}),c.jsx("div",{className:"layer-item__indicators",children:!V.visible&&c.jsx("span",{className:"layer-item__indicator",title:"Hidden",children:""})}),c.jsxs("div",{className:"layer-item__actions",children:[c.jsx("button",{className:"layer-item__menu-btn",onClick:re=>Y(re,B),title:"More actions",children:""}),G===B&&c.jsxs("div",{className:"layer-item__menu",children:[c.jsx("button",{onClick:re=>P(re,B),disabled:te,children:" Bring to Front"}),c.jsx("button",{onClick:re=>T(re,B),disabled:se,children:" Send to Back"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:re=>N(re,B),children:" Duplicate"}),c.jsx("button",{onClick:re=>F(re,B),children:" Rename"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:re=>K(re,B),children:V.locked?" Unlock":" Lock"}),c.jsx("button",{onClick:re=>W(re,B),children:V.visible?" Hide":" Show"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:re=>$(re,B),className:"layer-item__menu-delete",children:" Delete"})]})]})]},B)})}),Object.keys(a).length>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"layers-panel__section-divider",children:c.jsx("span",{children:"Groups"})}),c.jsx("div",{className:"layers-panel__list layers-panel__list--groups",children:Object.entries(a).map(([B,Z])=>{const V=pe.has(B),ne=v===B,z=w===B,te=Z.customName||"Group";return c.jsxs("div",{className:"layer-group",children:[c.jsxs("div",{className:`layer-item layer-item--group ${ne?"layer-item--selected":""} ${z?"layer-item--editing":""} ${Z.locked?"layer-item--locked":""}`,onClick:()=>!Z.locked&&U(B),onDoubleClick:()=>!Z.locked&&R(B),children:[c.jsx("button",{className:"layer-item__expand-btn",onClick:se=>{se.stopPropagation(),ve(ue=>{const re=new Set(ue);return re.has(B)?re.delete(B):re.add(B),re})},title:V?"Collapse":"Expand",children:V?"":""}),c.jsx("span",{className:"layer-item__handle layer-item__handle--group",children:Z.locked?"":""}),c.jsxs("span",{className:"layer-item__name",children:[te,c.jsxs("span",{className:"layer-item__child-count",children:["(",Z.childIds.length,")"]})]}),z&&c.jsx("span",{className:"layer-item__edit-indicator",title:"Editing group",children:""}),c.jsxs("div",{className:"layer-item__actions",children:[c.jsx("button",{className:"layer-item__menu-btn",onClick:se=>Y(se,B),title:"More actions",children:""}),G===B&&c.jsxs("div",{className:"layer-item__menu",children:[c.jsx("button",{onClick:se=>{se.stopPropagation(),R(B),qe(null)},children:" Edit Group"}),c.jsx("button",{onClick:se=>{se.stopPropagation(),ce(B),qe(null)},children:" Ungroup"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:se=>{se.stopPropagation(),he(B),qe(null)},children:Z.locked?" Unlock":" Lock"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:se=>{se.stopPropagation(),confirm(`Delete group "${te}" and all its contents?`)&&ie(B),qe(null)},className:"layer-item__menu-delete",children:" Delete Group"})]})]})]}),V&&c.jsx("div",{className:"layer-group__children",children:Z.childIds.map(se=>{const ue=Le(se),re=se===p||se===d;return c.jsxs("div",{className:`layer-item layer-item--child ${re?"layer-item--selected":""}`,onClick:be=>{be.stopPropagation(),z&&De(se)},children:[c.jsx("span",{className:"layer-item__indent"}),c.jsx("span",{className:"layer-item__handle layer-item__handle--disabled",children:ue.icon}),c.jsx("span",{className:`layer-item__name ${ue.visible?"":"layer-item__name--hidden"}`,children:ue.name})]},se)})})]},B)})}),w&&c.jsx("div",{className:"layers-panel__exit-group",children:c.jsx("button",{className:"layers-panel__exit-group-btn",onClick:()=>X(),children:" Exit Group Editing"})})]}),Object.keys(s).length>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"layers-panel__section-divider",children:c.jsx("span",{children:"Exclusion Zones"})}),c.jsx("div",{className:"layers-panel__list layers-panel__list--exclusions",children:Object.keys(s).map(B=>{const Z=Le(B),V=Xe(B);return c.jsxs("div",{className:`layer-item layer-item--exclusion ${V?"layer-item--selected":""} ${Z.locked?"layer-item--locked":""} ${Z.visible?"":"layer-item--hidden"}`,onClick:()=>De(B),children:[c.jsx("span",{className:"layer-item__handle layer-item__handle--disabled",children:Z.icon}),c.jsx("span",{className:`layer-item__name ${Z.visible?"":"layer-item__name--hidden"}`,children:Z.name}),c.jsx("div",{className:"layer-item__indicators",children:!Z.visible&&c.jsx("span",{className:"layer-item__indicator",title:"Hidden",children:""})}),c.jsxs("div",{className:"layer-item__actions",children:[c.jsx("button",{className:"layer-item__menu-btn",onClick:ne=>Y(ne,B),title:"More actions",children:""}),G===B&&c.jsxs("div",{className:"layer-item__menu",children:[c.jsx("button",{onClick:ne=>F(ne,B),children:" Rename"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:ne=>K(ne,B),children:Z.locked?" Unlock":" Lock"}),c.jsx("button",{onClick:ne=>W(ne,B),children:Z.visible?" Hide":" Show"}),c.jsx("div",{className:"layer-item__menu-divider"}),c.jsx("button",{onClick:ne=>$(ne,B),className:"layer-item__menu-delete",children:" Delete"})]})]})]},B)})})]}),c.jsx("div",{className:"layers-panel__footer",children:c.jsx("span",{className:"layers-panel__shortcut-hint",children:"[ ] to reorder  G to group  G to ungroup"})})]})}async function aN(){var n,r;const e=await hi.auth.getSession(),t=(r=(n=e==null?void 0:e.data)==null?void 0:n.session)==null?void 0:r.access_token;if(!t)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async function oN(e){const t=await aN(),n=await fetch("/api/projects/create",{method:"POST",headers:t,body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to create project. Please check your connection and try again.")}return n.json()}async function fw(){const e=await aN(),t=await fetch("/api/projects/list",{method:"GET",headers:e});if(!t.ok){const n=await t.json();throw new Error(n.error||"Unable to load your projects. Please refresh the page and try again.")}return t.json()}function k9(e,t={}){var n,r;return{type:"sports_surface",version:"1.0",name:t.name||e.name||"Untitled Design",description:t.description||e.description||"",tags:t.tags||e.tags||[],surface:e.surface,courts:S9(e.courts),tracks:C9(e.tracks),motifs:E9(e.motifs),exclusionZones:T9(e.exclusionZones),shapes:j9(e.shapes),texts:A9(e.texts),elementOrder:e.elementOrder||[],customMarkings:e.customMarkings||[],backgroundZones:e.backgroundZones||[],dimensions:{width_mm:((n=e.surface)==null?void 0:n.width_mm)||5e4,length_mm:((r=e.surface)==null?void 0:r.length_mm)||5e4}}}function S9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,templateId:n.templateId,template:n.template,position:n.position,rotation:n.rotation,scale:n.scale,lineColorOverrides:n.lineColorOverrides||{},zoneColorOverrides:n.zoneColorOverrides||{},courtSurfaceColor:n.courtSurfaceColor}])):{}}function C9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,templateId:n.templateId,template:n.template,position:n.position,rotation:n.rotation,parameters:n.parameters,trackSurfaceColor:n.trackSurfaceColor,laneSurfaceColors:n.laneSurfaceColors||[],trackLineColor:n.trackLineColor}])):{}}function E9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,type:"motif",sourceDesignId:n.sourceDesignId,sourceDesignName:n.sourceDesignName,sourceThumbnailUrl:n.sourceThumbnailUrl,svgContent:n.svgContent,originalWidth_mm:n.originalWidth_mm,originalHeight_mm:n.originalHeight_mm,position:n.position,rotation:n.rotation,scale:n.scale}])):{}}function T9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,type:"exclusion",shapeType:n.shapeType,sides:n.sides,width_mm:n.width_mm,height_mm:n.height_mm,position:n.position,rotation:n.rotation,cornerRadius:n.cornerRadius,locked:n.locked,visible:n.visible,customName:n.customName,controlPoints:n.controlPoints}])):{}}function j9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,shapeType:n.shapeType,controlPoints:n.controlPoints,width_mm:n.width_mm,height_mm:n.height_mm,position:n.position,rotation:n.rotation,fillColor:n.fillColor,strokeEnabled:n.strokeEnabled,strokeColor:n.strokeColor,strokeWidth_mm:n.strokeWidth_mm,sides:n.sides,cornerRadius:n.cornerRadius,closed:n.closed,smooth:n.smooth,editPointsVisible:n.editPointsVisible}])):{}}function A9(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,content:n.content,fontFamily:n.fontFamily,fontSize_mm:n.fontSize_mm,scale_x:n.scale_x??1,scale_y:n.scale_y??1,fontWeight:n.fontWeight,fontStyle:n.fontStyle,textAlign:n.textAlign,position:n.position,rotation:n.rotation,fillColor:n.fillColor,strokeColor:n.strokeColor,strokeWidth_mm:n.strokeWidth_mm}])):{}}function P9(e){var r,i;const t=[];return e.surface||t.push("Surface configuration is required"),(!((r=e.surface)!=null&&r.width_mm)||!((i=e.surface)!=null&&i.length_mm))&&t.push("Surface dimensions are required"),e.courts&&Object.keys(e.courts).length>0||e.tracks&&Object.keys(e.tracks).length>0||e.motifs&&Object.keys(e.motifs).length>0||t.push("Add at least one court, track, or motif to save"),{valid:t.length===0,errors:t}}async function N9(e,t=400){return new Promise((n,r)=>{try{const i=e.cloneNode(!0);i.querySelectorAll(".court-canvas__court--selected, .transform-handles").forEach(v=>{v.classList.remove("court-canvas__court--selected")}),i.querySelectorAll(".transform-handles").forEach(v=>v.remove());const s=e.getAttribute("viewBox").split(" ").map(Number),a=s[2],o=s[3];let u,h;a>o?(u=t,h=Math.round(o/a*t)):(h=t,u=Math.round(a/o*t)),i.setAttribute("width",u),i.setAttribute("height",h);const d=new XMLSerializer().serializeToString(i),p=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(p),g=new Image;g.onload=()=>{const v=document.createElement("canvas");v.width=u,v.height=h;const w=v.getContext("2d");w.fillStyle="#ffffff",w.fillRect(0,0,u,h),w.drawImage(g,0,0,u,h),v.toBlob(C=>{URL.revokeObjectURL(m),n(C)},"image/png",.9)},g.onerror=v=>{URL.revokeObjectURL(m),r(new Error("Failed to load SVG for thumbnail"))},g.src=m}catch(i){r(i)}})}async function O9(e){const n=`thumbnails/sports/${`sports-${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`}`,{data:r,error:i}=await hi.storage.from("tpv-studio-uploads").upload(n,e,{cacheControl:"3600",contentType:"image/png",upsert:!1});if(i)throw i;const{data:{publicUrl:s}}=hi.storage.from("tpv-studio-uploads").getPublicUrl(n);return s}function R9({existingDesignId:e=null,initialName:t="",svgRef:n=null,onClose:r,onSaved:i}){const s=rn(Me=>Me.exportDesignData),[a,o]=fe.useState(t),[u,h]=fe.useState(""),[d,p]=fe.useState(""),[m,g]=fe.useState(""),[v,w]=fe.useState(!1),[C,x]=fe.useState([]),[k,A]=fe.useState(!1),[j,I]=fe.useState(""),[E,U]=fe.useState("#1a365d"),[D,R]=fe.useState(!1),[X,ce]=fe.useState(!1),[ie,ge]=fe.useState(!1),[H,ye]=fe.useState(null);fe.useEffect(()=>{je()},[]);const je=async()=>{try{const{projects:Me}=await fw();x(Me)}catch(Me){console.error("Failed to load projects:",Me),ye("Failed to load projects")}},ke=async()=>{if(!j.trim()){ye("Project name is required");return}ge(!0),ye(null);try{const{project:Me}=await oN({name:j.trim(),color:E});x([Me,...C]),p(Me.id),A(!1),I(""),U("#1a365d")}catch(Me){console.error("Failed to create project:",Me),ye(Me.message)}finally{ge(!1)}},Fe=async(Me=!1)=>{if(!a.trim()){ye("Design name is required");return}const _e=s(),Ne=P9(_e);if(!Ne.valid){ye(Ne.errors.join(", "));return}Me?ce(!0):R(!0),ye(null);try{let st=null;if(n!=null&&n.current)try{console.log("[SPORTS-SAVE] Generating thumbnail...");const he=await N9(n.current);console.log("[SPORTS-SAVE] Uploading thumbnail..."),st=await O9(he),console.log("[SPORTS-SAVE] Thumbnail uploaded:",st)}catch(he){console.warn("[SPORTS-SAVE] Thumbnail generation failed, continuing without:",he)}const nt=k9(_e,{name:a.trim(),description:u.trim()||"",tags:m.split(",").map(he=>he.trim()).filter(he=>he)});console.log("[SPORTS-SAVE] Serialized design data:",nt);const Ue={name:a.trim(),description:u.trim()||null,project_id:d||null,tags:m.split(",").map(he=>he.trim()).filter(he=>he),is_public:v,design_data:nt,thumbnail_url:st};e&&!Me&&(Ue.id=e);const ct=await Xm(Ue);i&&i(ct,a.trim()),r()}catch(st){console.error("Failed to save design:",st),ye(st.message)}finally{R(!1),ce(!1)}},xe=["#1a365d","#ff6b35","#4a90e2","#50c878","#9b59b6","#e74c3c"];return c.jsx("div",{className:"modal-overlay",onClick:r,children:c.jsxs("div",{className:"modal-content save-design-modal",onClick:Me=>Me.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:e?"Update Design":"Save Design"}),c.jsx("button",{onClick:r,className:"close-button",children:""})]}),c.jsxs("div",{className:"modal-body",children:[H&&c.jsx("div",{className:"error-message",children:H}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-name",children:"Design Name *"}),c.jsx("input",{id:"design-name",type:"text",value:a,onChange:Me=>o(Me.target.value),placeholder:"e.g., Multi-Sport Court Design",autoFocus:!0,disabled:D||X})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-description",children:"Description"}),c.jsx("textarea",{id:"design-description",value:u,onChange:Me=>h(Me.target.value),placeholder:"Optional notes about this sports surface design...",rows:3,disabled:D||X})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-project",children:"Project"}),k?c.jsxs("div",{className:"new-project-form",children:[c.jsxs("div",{className:"input-row",children:[c.jsx("input",{type:"text",value:j,onChange:Me=>I(Me.target.value),placeholder:"Project name...",disabled:ie}),c.jsx("div",{className:"color-picker-inline",children:xe.map(Me=>c.jsx("button",{type:"button",className:`color-swatch ${E===Me?"active":""}`,style:{backgroundColor:Me},onClick:()=>U(Me),disabled:ie},Me))})]}),c.jsxs("div",{className:"button-row",children:[c.jsx("button",{type:"button",onClick:ke,className:"btn-primary btn-small",disabled:ie,children:ie?"Creating...":"Create"}),c.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn-secondary btn-small",disabled:ie,children:"Cancel"})]})]}):c.jsxs("div",{className:"project-selector",children:[c.jsxs("select",{id:"design-project",value:d,onChange:Me=>p(Me.target.value),disabled:D||X,children:[c.jsx("option",{value:"",children:"No Project"}),C.map(Me=>c.jsxs("option",{value:Me.id,children:[Me.name," (",Me.design_count," designs)"]},Me.id))]}),c.jsx("button",{type:"button",onClick:()=>A(!0),className:"btn-secondary btn-small",disabled:D||X,children:"+ New Project"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-tags",children:"Tags"}),c.jsx("input",{id:"design-tags",type:"text",value:m,onChange:Me=>g(Me.target.value),placeholder:"e.g., tennis, multi-sport, school (comma-separated)",disabled:D||X}),c.jsx("small",{className:"help-text",children:"Separate tags with commas"})]}),c.jsx("div",{className:"form-group checkbox-group",children:c.jsxs("label",{children:[c.jsx("input",{type:"checkbox",checked:v,onChange:Me=>w(Me.target.checked),disabled:D||X}),c.jsx("span",{children:"Make this design public (shareable link)"})]})})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{onClick:r,className:"btn-secondary",disabled:D||X,children:"Cancel"}),e&&c.jsx("button",{onClick:()=>Fe(!0),className:"btn-secondary",disabled:D||X,children:X?"Saving...":"Save as New"}),c.jsx("button",{onClick:()=>Fe(!1),className:"btn-primary",disabled:D||X,children:D?"Saving...":e?"Update":"Save Design"})]})]})})}function M9(){return new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})})}function pw(e,t){var d,p,m,g;if(!e)throw new Error("SVG element not found");const n=e.cloneNode(!0);n.querySelectorAll('.court-canvas__selection-outline, .transform-handles, .track-resize-handles, [class*="selection"], [class*="handle"]').forEach(v=>v.remove());const i=document.createElementNS("http://www.w3.org/2000/svg","title");i.textContent=(t==null?void 0:t.name)||"Sports Surface Design",n.insertBefore(i,n.firstChild);const s=document.createElementNS("http://www.w3.org/2000/svg","desc");s.textContent=`Generated by TPV Designer. Dimensions: ${(((d=t==null?void 0:t.surface)==null?void 0:d.width_mm)/1e3).toFixed(1)}m  ${(((p=t==null?void 0:t.surface)==null?void 0:p.length_mm)/1e3).toFixed(1)}m`,n.insertBefore(s,n.firstChild.nextSibling),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const a=((m=t==null?void 0:t.surface)==null?void 0:m.width_mm)||5e4,o=((g=t==null?void 0:t.surface)==null?void 0:g.length_mm)||5e4;n.setAttribute("width",`${a}mm`),n.setAttribute("height",`${o}mm`),n.setAttribute("data-tpv-studio","1.0"),n.setAttribute("data-design-type","sports_surface");let h=new XMLSerializer().serializeToString(n);return h=`<?xml version="1.0" encoding="UTF-8"?>
`+h,h}function L9(e,t="sports-surface.svg"){const n=new Blob([e],{type:"image/svg+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}async function I9(e,t,n="sports-surface.png",r=2){return new Promise((i,s)=>{try{const a=pw(e,t),o=document.createElement("canvas"),u=o.getContext("2d"),h=e.getAttribute("viewBox");let d=1200,p=1200;if(h){const[,,w,C]=h.split(" ").map(Number),x=2400,k=C/w;d=Math.min(w/10,x),p=d*k}o.width=d*r,o.height=p*r;const m=new Image,g=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(g);m.onload=()=>{u.fillStyle="#ffffff",u.fillRect(0,0,o.width,o.height),u.drawImage(m,0,0,o.width,o.height),o.toBlob(w=>{if(!w){s(new Error("Failed to create PNG blob"));return}const C=URL.createObjectURL(w),x=document.createElement("a");x.href=C,x.download=n,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),URL.revokeObjectURL(C),i()},"image/png",.95)},m.onerror=w=>{URL.revokeObjectURL(v),s(new Error("Failed to load SVG for PNG conversion"))},m.src=v}catch(a){s(a)}})}function Lh(e,t){const n=(e||"sports-surface").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50),r=new Date().toISOString().split("T")[0];return`${n}_${r}.${t}`}function vS(e){const t=e.querySelectorAll('image[href^="data:image/svg+xml"]');console.log(`[EXPORT] Found ${t.length} motif images to inline`),t.forEach((n,r)=>{try{const i=n.getAttribute("href");if(!i)return;let s;if(i.includes(",")){const j=i.split(",")[1];i.includes("base64")?s=atob(j):s=decodeURIComponent(j)}else{console.warn(`[EXPORT] Motif ${r}: Invalid data URL format`);return}const u=new DOMParser().parseFromString(s,"image/svg+xml").documentElement;if(u.querySelector("parsererror")){console.warn(`[EXPORT] Motif ${r}: SVG parse error`);return}const h=parseFloat(n.getAttribute("x"))||0,d=parseFloat(n.getAttribute("y"))||0,p=parseFloat(n.getAttribute("width")),m=parseFloat(n.getAttribute("height"));if(!p||!m){console.warn(`[EXPORT] Motif ${r}: Missing dimensions`);return}const g=u.getAttribute("viewBox");let v=1,w=1;if(g){const j=g.split(/\s+/).map(Number);if(j.length===4){const[,,I,E]=j;I>0&&E>0&&(v=p/I,w=m/E)}}const C=n.closest("g"),x=(C==null?void 0:C.getAttribute("transform"))||"",k=document.createElementNS("http://www.w3.org/2000/svg","g");k.setAttribute("class","motif-inline"),k.setAttribute("transform",`translate(${h}, ${d}) scale(${v}, ${w})`);const A=u.querySelector("defs");if(A){const j=e.querySelector("defs")||(()=>{const I=document.createElementNS("http://www.w3.org/2000/svg","defs");return e.insertBefore(I,e.firstChild),I})();for(;A.firstChild;)j.appendChild(A.firstChild)}for(;u.firstChild;)u.firstChild.nodeName!=="defs"?k.appendChild(u.firstChild):u.removeChild(u.firstChild);n.parentNode.replaceChild(k,n),console.log(`[EXPORT] Motif ${r}: Inlined successfully (scale: ${v.toFixed(3)}, ${w.toFixed(3)})`)}catch(i){console.warn(`[EXPORT] Failed to inline motif ${r}:`,i.message)}})}function ed(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lN={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(h,d){if(!i[h]){if(!r[h]){var p=typeof ed=="function"&&ed;if(!d&&p)return p(h,!0);if(o)return o(h,!0);var m=new Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m}var g=i[h]={exports:{}};r[h][0].call(g.exports,function(v){var w=r[h][1][v];return a(w||v)},g,g.exports,n,r,i,s)}return i[h].exports}for(var o=typeof ed=="function"&&ed,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var h,d,p,m,g,v,w,C=[],x=0,k=u.length,A=k,j=s.getTypeOf(u)!=="string";x<u.length;)A=k-x,p=j?(h=u[x++],d=x<k?u[x++]:0,x<k?u[x++]:0):(h=u.charCodeAt(x++),d=x<k?u.charCodeAt(x++):0,x<k?u.charCodeAt(x++):0),m=h>>2,g=(3&h)<<4|d>>4,v=1<A?(15&d)<<2|p>>6:64,w=2<A?63&p:64,C.push(o.charAt(m)+o.charAt(g)+o.charAt(v)+o.charAt(w));return C.join("")},i.decode=function(u){var h,d,p,m,g,v,w=0,C=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var k,A=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&A--,u.charAt(u.length-2)===o.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=a.uint8array?new Uint8Array(0|A):new Array(0|A);w<u.length;)h=o.indexOf(u.charAt(w++))<<2|(m=o.indexOf(u.charAt(w++)))>>4,d=(15&m)<<4|(g=o.indexOf(u.charAt(w++)))>>2,p=(3&g)<<6|(v=o.indexOf(u.charAt(w++))),k[C++]=h,g!==64&&(k[C++]=d),v!==64&&(k[C++]=p);return k}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function h(d,p,m,g,v){this.compressedSize=d,this.uncompressedSize=p,this.crc32=m,this.compression=g,this.compressedContent=v}h.prototype={getContentWorker:function(){var d=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return d.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(d,p,m){return d.pipe(new o).pipe(new u("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},r.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var o,u=[],h=0;h<256;h++){o=h;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;u[h]=o}return u}();r.exports=function(o,u){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(h,d,p,m){var g=a,v=m+p;h^=-1;for(var w=m;w<v;w++)h=h>>>8^g[255&(h^d[w])];return-1^h}(0|u,o,o.length,0):function(h,d,p,m){var g=a,v=m+p;h^=-1;for(var w=m;w<v;w++)h=h>>>8^g[255&(h^d.charCodeAt(w))];return-1^h}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),u=n("./stream/GenericWorker"),h=s?"uint8array":"array";function d(p,m){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}i.magic="\b\0",o.inherits(d,u),d.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,p.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},i.compressWorker=function(p){return new d("Deflate",p)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(g,v){var w,C="";for(w=0;w<v;w++)C+=String.fromCharCode(255&g),g>>>=8;return C}function a(g,v,w,C,x,k){var A,j,I=g.file,E=g.compression,U=k!==h.utf8encode,D=o.transformTo("string",k(I.name)),R=o.transformTo("string",h.utf8encode(I.name)),X=I.comment,ce=o.transformTo("string",k(X)),ie=o.transformTo("string",h.utf8encode(X)),ge=R.length!==I.name.length,H=ie.length!==X.length,ye="",je="",ke="",Fe=I.dir,xe=I.date,Me={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(Me.crc32=g.crc32,Me.compressedSize=g.compressedSize,Me.uncompressedSize=g.uncompressedSize);var _e=0;v&&(_e|=8),U||!ge&&!H||(_e|=2048);var Ne=0,st=0;Fe&&(Ne|=16),x==="UNIX"?(st=798,Ne|=function(Ue,ct){var he=Ue;return Ue||(he=ct?16893:33204),(65535&he)<<16}(I.unixPermissions,Fe)):(st=20,Ne|=function(Ue){return 63&(Ue||0)}(I.dosPermissions)),A=xe.getUTCHours(),A<<=6,A|=xe.getUTCMinutes(),A<<=5,A|=xe.getUTCSeconds()/2,j=xe.getUTCFullYear()-1980,j<<=4,j|=xe.getUTCMonth()+1,j<<=5,j|=xe.getUTCDate(),ge&&(je=s(1,1)+s(d(D),4)+R,ye+="up"+s(je.length,2)+je),H&&(ke=s(1,1)+s(d(ce),4)+ie,ye+="uc"+s(ke.length,2)+ke);var nt="";return nt+=`
\0`,nt+=s(_e,2),nt+=E.magic,nt+=s(A,2),nt+=s(j,2),nt+=s(Me.crc32,4),nt+=s(Me.compressedSize,4),nt+=s(Me.uncompressedSize,4),nt+=s(D.length,2),nt+=s(ye.length,2),{fileRecord:p.LOCAL_FILE_HEADER+nt+D+ye,dirRecord:p.CENTRAL_FILE_HEADER+s(st,2)+nt+s(ce.length,2)+"\0\0\0\0"+s(Ne,4)+s(C,4)+D+ye+ce}}var o=n("../utils"),u=n("../stream/GenericWorker"),h=n("../utf8"),d=n("../crc32"),p=n("../signature");function m(g,v,w,C){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=C,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,u),m.prototype.push=function(g){var v=g.meta.percent||0,w=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-C-1))/w:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var w=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,w=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(C){return p.DATA_DESCRIPTOR+s(C.crc32,4)+s(C.compressedSize,4)+s(C.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-g,C=function(x,k,A,j,I){var E=o.transformTo("string",I(j));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(k,4)+s(A,4)+s(E.length,2)+E}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(w){v.processChunk(w)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(w){v.error(w)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var w=0;w<v.length;w++)try{v[w].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(o,u,h){var d=new a(u.streamFiles,h,u.platform,u.encodeFileName),p=0;try{o.forEach(function(m,g){p++;var v=function(k,A){var j=k||A,I=s[j];if(!I)throw new Error(j+" is not a valid compression method !");return I}(g.options.compression,u.compression),w=g.options.compressionOptions||u.compressionOptions||{},C=g.dir,x=g.date;g._compressWorker(v,w).withStreamInfo("file",{name:m,dir:C,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=p}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),u=n("./zipEntries"),h=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function p(m){return new a.Promise(function(g,v){var w=m.decompressed.getContentWorker().pipe(new h);w.on("error",function(C){v(C)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(w){var C=new u(g);return C.load(w),C}).then(function(w){var C=[a.Promise.resolve(w)],x=w.files;if(g.checkCRC32)for(var k=0;k<x.length;k++)C.push(p(x[k]));return a.Promise.all(C)}).then(function(w){for(var C=w.shift(),x=C.files,k=0;k<x.length;k++){var A=x[k],j=A.fileNameStr,I=s.resolve(A.fileNameStr);v.file(I,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:g.createFolders}),A.dir||(v.file(I).unsafeOriginalName=j)}return C.zipComment.length&&(v.comment=C.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(u,h){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(o,a),o.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(d){h.push({data:d,meta:{percent:0}})}).on("error",function(d){h.isPaused?this.generatedError=d:h.error(d)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(o,u,h){s.call(this,u),this._helper=o;var d=this;o.on("data",function(p,m){d.push(p)||d._helper.pause(),h&&h(m)}).on("error",function(p){d.emit("error",p)}).on("end",function(){d.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(I,E,U){var D,R=o.getTypeOf(E),X=o.extend(U||{},d);X.date=X.date||new Date,X.compression!==null&&(X.compression=X.compression.toUpperCase()),typeof X.unixPermissions=="string"&&(X.unixPermissions=parseInt(X.unixPermissions,8)),X.unixPermissions&&16384&X.unixPermissions&&(X.dir=!0),X.dosPermissions&&16&X.dosPermissions&&(X.dir=!0),X.dir&&(I=x(I)),X.createFolders&&(D=C(I))&&k.call(this,D,!0);var ce=R==="string"&&X.binary===!1&&X.base64===!1;U&&U.binary!==void 0||(X.binary=!ce),(E instanceof p&&E.uncompressedSize===0||X.dir||!E||E.length===0)&&(X.base64=!1,X.binary=!0,E="",X.compression="STORE",R="string");var ie=null;ie=E instanceof p||E instanceof u?E:v.isNode&&v.isStream(E)?new w(I,E):o.prepareContent(I,E,X.binary,X.optimizedBinaryString,X.base64);var ge=new m(I,ie,X);this.files[I]=ge}var a=n("./utf8"),o=n("./utils"),u=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),d=n("./defaults"),p=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),C=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var E=I.lastIndexOf("/");return 0<E?I.substring(0,E):""},x=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},k=function(I,E){return E=E!==void 0?E:d.createFolders,I=x(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:E}),this.files[I]};function A(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var E,U,D;for(E in this.files)D=this.files[E],(U=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&I(U,D)},filter:function(I){var E=[];return this.forEach(function(U,D){I(U,D)&&E.push(D)}),E},file:function(I,E,U){if(arguments.length!==1)return I=this.root+I,s.call(this,I,E,U),this;if(A(I)){var D=I;return this.filter(function(X,ce){return!ce.dir&&D.test(X)})}var R=this.files[this.root+I];return R&&!R.dir?R:null},folder:function(I){if(!I)return this;if(A(I))return this.filter(function(R,X){return X.dir&&I.test(R)});var E=this.root+I,U=k.call(this,E),D=this.clone();return D.root=U.name,D},remove:function(I){I=this.root+I;var E=this.files[I];if(E||(I.slice(-1)!=="/"&&(I+="/"),E=this.files[I]),E&&!E.dir)delete this.files[I];else for(var U=this.filter(function(R,X){return X.name.slice(0,I.length)===I}),D=0;D<U.length;D++)delete this.files[U[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var E,U={};try{if((U=o.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");o.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var D=U.comment||this.comment||"";E=g.generateWorker(this,U,D)}catch(R){(E=new u("error")).error(R)}return new h(E,U.type||"string",U.mimeType)},generateAsync:function(I,E){return this.generateInternalStream(I).accumulate(E)},generateNodeStream:function(I,E){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(E)}};r.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),h=o.charCodeAt(1),d=o.charCodeAt(2),p=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===h&&this.data[m+2]===d&&this.data[m+3]===p)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),h=o.charCodeAt(1),d=o.charCodeAt(2),p=o.charCodeAt(3),m=this.readData(4);return u===m[0]&&h===m[1]&&d===m[2]&&p===m[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,h=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=o,h},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),u=n("./StringReader"),h=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(p){var m=s.getTypeOf(p);return s.checkSupport(m),m!=="string"||a.uint8array?m==="nodebuffer"?new h(p):a.uint8array?new d(s.transformTo("uint8array",p)):new o(s.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}a.prototype.processChunk.call(this,u)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){h.dataIsReady=!0,h.data=d,h.max=d&&d.length||0,h.type=s.getTypeOf(d),h.isPaused||h._tickAndRepeat()},function(d){h.error(d)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),u=n("../base64"),h=n("../support"),d=n("../external"),p=null;if(h.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,w){return new d.Promise(function(C,x){var k=[],A=v._internalType,j=v._outputType,I=v._mimeType;v.on("data",function(E,U){k.push(E),w&&w(U)}).on("error",function(E){k=[],x(E)}).on("end",function(){try{var E=function(U,D,R){switch(U){case"blob":return s.newBlob(s.transformTo("arraybuffer",D),R);case"base64":return u.encode(D);default:return s.transformTo(U,D)}}(j,function(U,D){var R,X=0,ce=null,ie=0;for(R=0;R<D.length;R++)ie+=D[R].length;switch(U){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(ce=new Uint8Array(ie),R=0;R<D.length;R++)ce.set(D[R],X),X+=D[R].length;return ce;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+U+"'")}}(A,k),I);C(E)}catch(U){x(U)}k=[]}).resume()})}function g(v,w,C){var x=w;switch(w){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=w,this._mimeType=C,s.checkSupport(x),this._worker=v.pipe(new a(x)),v.lock()}catch(k){this._worker=new o("error"),this._worker.error(k)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,w){var C=this;return v==="data"?this._worker.on(v,function(x){w.call(C,x.data,x.meta)}):this._worker.on(v,function(){s.delay(w,arguments,C)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),u=n("./stream/GenericWorker"),h=new Array(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}i.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var w,C,x,k,A,j=v.length,I=0;for(k=0;k<j;k++)(64512&(C=v.charCodeAt(k)))==55296&&k+1<j&&(64512&(x=v.charCodeAt(k+1)))==56320&&(C=65536+(C-55296<<10)+(x-56320),k++),I+=C<128?1:C<2048?2:C<65536?3:4;for(w=a.uint8array?new Uint8Array(I):new Array(I),k=A=0;A<I;k++)(64512&(C=v.charCodeAt(k)))==55296&&k+1<j&&(64512&(x=v.charCodeAt(k+1)))==56320&&(C=65536+(C-55296<<10)+(x-56320),k++),C<128?w[A++]=C:(C<2048?w[A++]=192|C>>>6:(C<65536?w[A++]=224|C>>>12:(w[A++]=240|C>>>18,w[A++]=128|C>>>12&63),w[A++]=128|C>>>6&63),w[A++]=128|63&C);return w}(g)},i.utf8decode=function(g){return a.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(v){var w,C,x,k,A=v.length,j=new Array(2*A);for(w=C=0;w<A;)if((x=v[w++])<128)j[C++]=x;else if(4<(k=h[x]))j[C++]=65533,w+=k-1;else{for(x&=k===2?31:k===3?15:7;1<k&&w<A;)x=x<<6|63&v[w++],k--;1<k?j[C++]=65533:x<65536?j[C++]=x:(x-=65536,j[C++]=55296|x>>10&1023,j[C++]=56320|1023&x)}return j.length!==C&&(j.subarray?j=j.subarray(0,C):j.length=C),s.applyFromCharCode(j)}(g=s.transformTo(a.uint8array?"uint8array":"array",g))},s.inherits(p,u),p.prototype.processChunk=function(g){var v=s.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var C=function(k,A){var j;for((A=A||k.length)>k.length&&(A=k.length),j=A-1;0<=j&&(192&k[j])==128;)j--;return j<0||j===0?A:j+h[k[j]]>A?j:A}(v),x=v;C!==v.length&&(a.uint8array?(x=v.subarray(0,C),this.leftOver=v.subarray(C,v.length)):(x=v.slice(0,C),this.leftOver=v.slice(C,v.length))),this.push({data:i.utf8decode(x),meta:g.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,s.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),u=n("./external");function h(w){return w}function d(w,C){for(var x=0;x<w.length;++x)C[x]=255&w.charCodeAt(x);return C}n("setimmediate"),i.newBlob=function(w,C){i.checkSupport("blob");try{return new Blob([w],{type:C})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(w),x.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(w,C,x){var k=[],A=0,j=w.length;if(j<=x)return String.fromCharCode.apply(null,w);for(;A<j;)C==="array"||C==="nodebuffer"?k.push(String.fromCharCode.apply(null,w.slice(A,Math.min(A+x,j)))):k.push(String.fromCharCode.apply(null,w.subarray(A,Math.min(A+x,j)))),A+=x;return k.join("")},stringifyByChar:function(w){for(var C="",x=0;x<w.length;x++)C+=String.fromCharCode(w[x]);return C},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(w){var C=65536,x=i.getTypeOf(w),k=!0;if(x==="uint8array"?k=p.applyCanBeUsed.uint8array:x==="nodebuffer"&&(k=p.applyCanBeUsed.nodebuffer),k)for(;1<C;)try{return p.stringifyByChunk(w,x,C)}catch{C=Math.floor(C/2)}return p.stringifyByChar(w)}function g(w,C){for(var x=0;x<w.length;x++)C[x]=w[x];return C}i.applyFromCharCode=m;var v={};v.string={string:h,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return d(w,new Uint8Array(w.length))},nodebuffer:function(w){return d(w,o.allocBuffer(w.length))}},v.array={string:m,array:h,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(w)}},v.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:h,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:h,nodebuffer:function(w){return o.newBufferFrom(w)}},v.nodebuffer={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:h},i.transformTo=function(w,C){if(C=C||"",!w)return C;i.checkSupport(w);var x=i.getTypeOf(C);return v[x][w](C)},i.resolve=function(w){for(var C=w.split("/"),x=[],k=0;k<C.length;k++){var A=C[k];A==="."||A===""&&k!==0&&k!==C.length-1||(A===".."?x.pop():x.push(A))}return x.join("/")},i.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(w)?"nodebuffer":s.uint8array&&w instanceof Uint8Array?"uint8array":s.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(w){if(!s[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(w){var C,x,k="";for(x=0;x<(w||"").length;x++)k+="\\x"+((C=w.charCodeAt(x))<16?"0":"")+C.toString(16).toUpperCase();return k},i.delay=function(w,C,x){setImmediate(function(){w.apply(x||null,C||[])})},i.inherits=function(w,C){function x(){}x.prototype=C.prototype,w.prototype=new x},i.extend=function(){var w,C,x={};for(w=0;w<arguments.length;w++)for(C in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],C)&&x[C]===void 0&&(x[C]=arguments[w][C]);return x},i.prepareContent=function(w,C,x,k,A){return u.Promise.resolve(C).then(function(j){return s.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new u.Promise(function(I,E){var U=new FileReader;U.onload=function(D){I(D.target.result)},U.onerror=function(D){E(D.target.error)},U.readAsArrayBuffer(j)}):j}).then(function(j){var I=i.getTypeOf(j);return I?(I==="arraybuffer"?j=i.transformTo("uint8array",j):I==="string"&&(A?j=a.decode(j):x&&k!==!0&&(j=function(E){return d(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))}(j))),j):u.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),u=n("./zipEntry"),h=n("./support");function d(p){this.files=[],this.loadOptions=p}d.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(m)+", expected "+a.pretty(p)+")")}},isSignature:function(p,m){var g=this.reader.index;this.reader.setIndex(p);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=h.uint8array?"uint8array":"array",g=a.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,g,v=this.zip64EndOfCentralSize-44;0<v;)p=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),u=n("./crc32"),h=n("./utf8"),d=n("./compressions"),p=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(C){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===C)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,w,C,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),w=g.readInt(2),C=g.readData(w),this.extraFields[v]={id:v,length:w,value:C};g.setIndex(x)},handleUTF8:function(){var g=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var x=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=s(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:h.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=s(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:h.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(v,w,C){this.name=v,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=w,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),u=n("./utf8"),h=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(v){var w=null,C="string";try{if(!v)throw new Error("No output type specified.");var x=(C=v.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),w=this._decompressWorker();var k=!this._dataBinary;k&&!x&&(w=w.pipe(new u.Utf8EncodeWorker)),!k&&x&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(A){(w=new d("error")).error(A)}return new a(w,C,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof h&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(C,v,w)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<p.length;g++)s.prototype[p[g]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,o,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var h=0,d=new u(v),p=s.document.createTextNode("");d.observe(p,{characterData:!0}),a=function(){p.data=h=++h%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var w=s.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var m=new s.MessageChannel;m.port1.onmessage=v,a=function(){m.port2.postMessage(0)}}var g=[];function v(){var w,C;o=!0;for(var x=g.length;x;){for(C=g,g=[],w=-1;++w<x;)C[w]();x=g.length}o=!1}r.exports=function(w){g.push(w)!==1||o||a()}}).call(this,typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},u=["REJECTED"],h=["FULFILLED"],d=["PENDING"];function p(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==a&&w(this,x)}function m(x,k,A){this.promise=x,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function g(x,k,A){s(function(){var j;try{j=k(A)}catch(I){return o.reject(x,I)}j===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,j)})}function v(x){var k=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof k=="function")return function(){k.apply(x,arguments)}}function w(x,k){var A=!1;function j(U){A||(A=!0,o.reject(x,U))}function I(U){A||(A=!0,o.resolve(x,U))}var E=C(function(){k(I,j)});E.status==="error"&&j(E.value)}function C(x,k){var A={};try{A.value=x(k),A.status="success"}catch(j){A.status="error",A.value=j}return A}(r.exports=p).prototype.finally=function(x){if(typeof x!="function")return this;var k=this.constructor;return this.then(function(A){return k.resolve(x()).then(function(){return A})},function(A){return k.resolve(x()).then(function(){throw A})})},p.prototype.catch=function(x){return this.then(null,x)},p.prototype.then=function(x,k){if(typeof x!="function"&&this.state===h||typeof k!="function"&&this.state===u)return this;var A=new this.constructor(a);return this.state!==d?g(A,this.state===h?x:k,this.outcome):this.queue.push(new m(A,x,k)),A},m.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){o.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},o.resolve=function(x,k){var A=C(v,k);if(A.status==="error")return o.reject(x,A.value);var j=A.value;if(j)w(x,j);else{x.state=h,x.outcome=k;for(var I=-1,E=x.queue.length;++I<E;)x.queue[I].callFulfilled(k)}return x},o.reject=function(x,k){x.state=u,x.outcome=k;for(var A=-1,j=x.queue.length;++A<j;)x.queue[A].callRejected(k);return x},p.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},p.reject=function(x){var k=new this(a);return o.reject(k,x)},p.all=function(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=x.length,j=!1;if(!A)return this.resolve([]);for(var I=new Array(A),E=0,U=-1,D=new this(a);++U<A;)R(x[U],U);return D;function R(X,ce){k.resolve(X).then(function(ie){I[ce]=ie,++E!==A||j||(j=!0,o.resolve(D,I))},function(ie){j||(j=!0,o.reject(D,ie))})}},p.race=function(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=x.length,j=!1;if(!A)return this.resolve([]);for(var I=-1,E=new this(a);++I<A;)U=x[I],k.resolve(U).then(function(D){j||(j=!0,o.resolve(E,D))},function(D){j||(j=!0,o.reject(E,D))});var U;return E}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/messages"),h=n("./zlib/zstream"),d=Object.prototype.toString,p=0,m=-1,g=0,v=8;function w(x){if(!(this instanceof w))return new w(x);this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var A=s.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(A!==p)throw new Error(u[A]);if(k.header&&s.deflateSetHeader(this.strm,k.header),k.dictionary){var j;if(j=typeof k.dictionary=="string"?o.string2buf(k.dictionary):d.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(A=s.deflateSetDictionary(this.strm,j))!==p)throw new Error(u[A]);this._dict_set=!0}}function C(x,k){var A=new w(k);if(A.push(x,!0),A.err)throw A.msg||u[A.err];return A.result}w.prototype.push=function(x,k){var A,j,I=this.strm,E=this.options.chunkSize;if(this.ended)return!1;j=k===~~k?k:k===!0?4:0,typeof x=="string"?I.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?I.input=new Uint8Array(x):I.input=x,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(E),I.next_out=0,I.avail_out=E),(A=s.deflate(I,j))!==1&&A!==p)return this.onEnd(A),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&A!==1);return j===4?(A=s.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===p):j!==2||(this.onEnd(p),!(I.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=w,i.deflate=C,i.deflateRaw=function(x,k){return(k=k||{}).raw=!0,C(x,k)},i.gzip=function(x,k){return(k=k||{}).gzip=!0,C(x,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/constants"),h=n("./zlib/messages"),d=n("./zlib/zstream"),p=n("./zlib/gzheader"),m=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},w||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||w&&w.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,C.windowBits);if(x!==u.Z_OK)throw new Error(h[x]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function v(w,C){var x=new g(C);if(x.push(w,!0),x.err)throw x.msg||h[x.err];return x.result}g.prototype.push=function(w,C){var x,k,A,j,I,E,U=this.strm,D=this.options.chunkSize,R=this.options.dictionary,X=!1;if(this.ended)return!1;k=C===~~C?C:C===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?U.input=o.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?U.input=new Uint8Array(w):U.input=w,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new a.Buf8(D),U.next_out=0,U.avail_out=D),(x=s.inflate(U,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&R&&(E=typeof R=="string"?o.string2buf(R):m.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,x=s.inflateSetDictionary(this.strm,E)),x===u.Z_BUF_ERROR&&X===!0&&(x=u.Z_OK,X=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&x!==u.Z_STREAM_END&&(U.avail_in!==0||k!==u.Z_FINISH&&k!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=o.utf8border(U.output,U.next_out),j=U.next_out-A,I=o.buf2string(U.output,A),U.next_out=j,U.avail_out=D-j,j&&a.arraySet(U.output,U.output,A,j,0),this.onData(I)):this.onData(a.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(X=!0)}while((0<U.avail_in||U.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(k=u.Z_FINISH),k===u.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):k!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(U.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Inflate=g,i.inflate=v,i.inflateRaw=function(w,C){return(C=C||{}).raw=!0,v(w,C)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var p in d)d.hasOwnProperty(p)&&(u[p]=d[p])}}return u},i.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var a={arraySet:function(u,h,d,p,m){if(h.subarray&&u.subarray)u.set(h.subarray(d,d+p),m);else for(var g=0;g<p;g++)u[m+g]=h[d+g]},flattenChunks:function(u){var h,d,p,m,g,v;for(h=p=0,d=u.length;h<d;h++)p+=u[h].length;for(v=new Uint8Array(p),h=m=0,d=u.length;h<d;h++)g=u[h],v.set(g,m),m+=g.length;return v}},o={arraySet:function(u,h,d,p,m){for(var g=0;g<p;g++)u[m+g]=h[d+g]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function d(p,m){if(m<65537&&(p.subarray&&o||!p.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(p,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(p[v]);return g}u[254]=u[254]=1,i.string2buf=function(p){var m,g,v,w,C,x=p.length,k=0;for(w=0;w<x;w++)(64512&(g=p.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=p.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),k+=g<128?1:g<2048?2:g<65536?3:4;for(m=new s.Buf8(k),w=C=0;C<k;w++)(64512&(g=p.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=p.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),g<128?m[C++]=g:(g<2048?m[C++]=192|g>>>6:(g<65536?m[C++]=224|g>>>12:(m[C++]=240|g>>>18,m[C++]=128|g>>>12&63),m[C++]=128|g>>>6&63),m[C++]=128|63&g);return m},i.buf2binstring=function(p){return d(p,p.length)},i.binstring2buf=function(p){for(var m=new s.Buf8(p.length),g=0,v=m.length;g<v;g++)m[g]=p.charCodeAt(g);return m},i.buf2string=function(p,m){var g,v,w,C,x=m||p.length,k=new Array(2*x);for(g=v=0;g<x;)if((w=p[g++])<128)k[v++]=w;else if(4<(C=u[w]))k[v++]=65533,g+=C-1;else{for(w&=C===2?31:C===3?15:7;1<C&&g<x;)w=w<<6|63&p[g++],C--;1<C?k[v++]=65533:w<65536?k[v++]=w:(w-=65536,k[v++]=55296|w>>10&1023,k[v++]=56320|1023&w)}return d(k,v)},i.utf8border=function(p,m){var g;for((m=m||p.length)>p.length&&(m=p.length),g=m-1;0<=g&&(192&p[g])==128;)g--;return g<0||g===0?m:g+u[p[g]]>m?g:m}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,o,u){for(var h=65535&s|0,d=s>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;d=d+(h=h+a[u++]|0)|0,--p;);h%=65521,d%=65521}return h|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,o=[],u=0;u<256;u++){a=u;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;o[u]=a}return o}();r.exports=function(a,o,u,h){var d=s,p=h+u;a^=-1;for(var m=h;m<p;m++)a=a>>>8^d[255&(a^o[m])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),o=n("./trees"),u=n("./adler32"),h=n("./crc32"),d=n("./messages"),p=0,m=4,g=0,v=-2,w=-1,C=4,x=2,k=8,A=9,j=286,I=30,E=19,U=2*j+1,D=15,R=3,X=258,ce=X+R+1,ie=42,ge=113,H=1,ye=2,je=3,ke=4;function Fe(G,qe){return G.msg=d[qe],qe}function xe(G){return(G<<1)-(4<G?9:0)}function Me(G){for(var qe=G.length;0<=--qe;)G[qe]=0}function _e(G){var qe=G.state,ae=qe.pending;ae>G.avail_out&&(ae=G.avail_out),ae!==0&&(a.arraySet(G.output,qe.pending_buf,qe.pending_out,ae,G.next_out),G.next_out+=ae,qe.pending_out+=ae,G.total_out+=ae,G.avail_out-=ae,qe.pending-=ae,qe.pending===0&&(qe.pending_out=0))}function Ne(G,qe){o._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,qe),G.block_start=G.strstart,_e(G.strm)}function st(G,qe){G.pending_buf[G.pending++]=qe}function nt(G,qe){G.pending_buf[G.pending++]=qe>>>8&255,G.pending_buf[G.pending++]=255&qe}function Ue(G,qe){var ae,M,L=G.max_chain_length,J=G.strstart,pe=G.prev_length,ve=G.nice_match,me=G.strstart>G.w_size-ce?G.strstart-(G.w_size-ce):0,Le=G.window,Xe=G.w_mask,De=G.prev,l=G.strstart+X,f=Le[J+pe-1],b=Le[J+pe];G.prev_length>=G.good_match&&(L>>=2),ve>G.lookahead&&(ve=G.lookahead);do if(Le[(ae=qe)+pe]===b&&Le[ae+pe-1]===f&&Le[ae]===Le[J]&&Le[++ae]===Le[J+1]){J+=2,ae++;do;while(Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&Le[++J]===Le[++ae]&&J<l);if(M=X-(l-J),J=l-X,pe<M){if(G.match_start=qe,ve<=(pe=M))break;f=Le[J+pe-1],b=Le[J+pe]}}while((qe=De[qe&Xe])>me&&--L!=0);return pe<=G.lookahead?pe:G.lookahead}function ct(G){var qe,ae,M,L,J,pe,ve,me,Le,Xe,De=G.w_size;do{if(L=G.window_size-G.lookahead-G.strstart,G.strstart>=De+(De-ce)){for(a.arraySet(G.window,G.window,De,De,0),G.match_start-=De,G.strstart-=De,G.block_start-=De,qe=ae=G.hash_size;M=G.head[--qe],G.head[qe]=De<=M?M-De:0,--ae;);for(qe=ae=De;M=G.prev[--qe],G.prev[qe]=De<=M?M-De:0,--ae;);L+=De}if(G.strm.avail_in===0)break;if(pe=G.strm,ve=G.window,me=G.strstart+G.lookahead,Le=L,Xe=void 0,Xe=pe.avail_in,Le<Xe&&(Xe=Le),ae=Xe===0?0:(pe.avail_in-=Xe,a.arraySet(ve,pe.input,pe.next_in,Xe,me),pe.state.wrap===1?pe.adler=u(pe.adler,ve,Xe,me):pe.state.wrap===2&&(pe.adler=h(pe.adler,ve,Xe,me)),pe.next_in+=Xe,pe.total_in+=Xe,Xe),G.lookahead+=ae,G.lookahead+G.insert>=R)for(J=G.strstart-G.insert,G.ins_h=G.window[J],G.ins_h=(G.ins_h<<G.hash_shift^G.window[J+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[J+R-1])&G.hash_mask,G.prev[J&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=J,J++,G.insert--,!(G.lookahead+G.insert<R)););}while(G.lookahead<ce&&G.strm.avail_in!==0)}function he(G,qe){for(var ae,M;;){if(G.lookahead<ce){if(ct(G),G.lookahead<ce&&qe===p)return H;if(G.lookahead===0)break}if(ae=0,G.lookahead>=R&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),ae!==0&&G.strstart-ae<=G.w_size-ce&&(G.match_length=Ue(G,ae)),G.match_length>=R)if(M=o._tr_tally(G,G.strstart-G.match_start,G.match_length-R),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=R){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else M=o._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(M&&(Ne(G,!1),G.strm.avail_out===0))return H}return G.insert=G.strstart<R-1?G.strstart:R-1,qe===m?(Ne(G,!0),G.strm.avail_out===0?je:ke):G.last_lit&&(Ne(G,!1),G.strm.avail_out===0)?H:ye}function oe(G,qe){for(var ae,M,L;;){if(G.lookahead<ce){if(ct(G),G.lookahead<ce&&qe===p)return H;if(G.lookahead===0)break}if(ae=0,G.lookahead>=R&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=R-1,ae!==0&&G.prev_length<G.max_lazy_match&&G.strstart-ae<=G.w_size-ce&&(G.match_length=Ue(G,ae),G.match_length<=5&&(G.strategy===1||G.match_length===R&&4096<G.strstart-G.match_start)&&(G.match_length=R-1)),G.prev_length>=R&&G.match_length<=G.prev_length){for(L=G.strstart+G.lookahead-R,M=o._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-R),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=L&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=R-1,G.strstart++,M&&(Ne(G,!1),G.strm.avail_out===0))return H}else if(G.match_available){if((M=o._tr_tally(G,0,G.window[G.strstart-1]))&&Ne(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return H}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(M=o._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<R-1?G.strstart:R-1,qe===m?(Ne(G,!0),G.strm.avail_out===0?je:ke):G.last_lit&&(Ne(G,!1),G.strm.avail_out===0)?H:ye}function We(G,qe,ae,M,L){this.good_length=G,this.max_lazy=qe,this.nice_length=ae,this.max_chain=M,this.func=L}function Oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*U),this.dyn_dtree=new a.Buf16(2*(2*I+1)),this.bl_tree=new a.Buf16(2*(2*E+1)),Me(this.dyn_ltree),Me(this.dyn_dtree),Me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*j+1),Me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*j+1),Me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(G){var qe;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=x,(qe=G.state).pending=0,qe.pending_out=0,qe.wrap<0&&(qe.wrap=-qe.wrap),qe.status=qe.wrap?ie:ge,G.adler=qe.wrap===2?0:1,qe.last_flush=p,o._tr_init(qe),g):Fe(G,v)}function Pt(G){var qe=ht(G);return qe===g&&function(ae){ae.window_size=2*ae.w_size,Me(ae.head),ae.max_lazy_match=s[ae.level].max_lazy,ae.good_match=s[ae.level].good_length,ae.nice_match=s[ae.level].nice_length,ae.max_chain_length=s[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=R-1,ae.match_available=0,ae.ins_h=0}(G.state),qe}function St(G,qe,ae,M,L,J){if(!G)return v;var pe=1;if(qe===w&&(qe=6),M<0?(pe=0,M=-M):15<M&&(pe=2,M-=16),L<1||A<L||ae!==k||M<8||15<M||qe<0||9<qe||J<0||C<J)return Fe(G,v);M===8&&(M=9);var ve=new Oe;return(G.state=ve).strm=G,ve.wrap=pe,ve.gzhead=null,ve.w_bits=M,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=L+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+R-1)/R),ve.window=new a.Buf8(2*ve.w_size),ve.head=new a.Buf16(ve.hash_size),ve.prev=new a.Buf16(ve.w_size),ve.lit_bufsize=1<<L+6,ve.pending_buf_size=4*ve.lit_bufsize,ve.pending_buf=new a.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=qe,ve.strategy=J,ve.method=ae,Pt(G)}s=[new We(0,0,0,0,function(G,qe){var ae=65535;for(ae>G.pending_buf_size-5&&(ae=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ct(G),G.lookahead===0&&qe===p)return H;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var M=G.block_start+ae;if((G.strstart===0||G.strstart>=M)&&(G.lookahead=G.strstart-M,G.strstart=M,Ne(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-ce&&(Ne(G,!1),G.strm.avail_out===0))return H}return G.insert=0,qe===m?(Ne(G,!0),G.strm.avail_out===0?je:ke):(G.strstart>G.block_start&&(Ne(G,!1),G.strm.avail_out),H)}),new We(4,4,8,4,he),new We(4,5,16,8,he),new We(4,6,32,32,he),new We(4,4,16,16,oe),new We(8,16,32,32,oe),new We(8,16,128,128,oe),new We(8,32,128,256,oe),new We(32,128,258,1024,oe),new We(32,258,258,4096,oe)],i.deflateInit=function(G,qe){return St(G,qe,k,15,8,0)},i.deflateInit2=St,i.deflateReset=Pt,i.deflateResetKeep=ht,i.deflateSetHeader=function(G,qe){return G&&G.state?G.state.wrap!==2?v:(G.state.gzhead=qe,g):v},i.deflate=function(G,qe){var ae,M,L,J;if(!G||!G.state||5<qe||qe<0)return G?Fe(G,v):v;if(M=G.state,!G.output||!G.input&&G.avail_in!==0||M.status===666&&qe!==m)return Fe(G,G.avail_out===0?-5:v);if(M.strm=G,ae=M.last_flush,M.last_flush=qe,M.status===ie)if(M.wrap===2)G.adler=0,st(M,31),st(M,139),st(M,8),M.gzhead?(st(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),st(M,255&M.gzhead.time),st(M,M.gzhead.time>>8&255),st(M,M.gzhead.time>>16&255),st(M,M.gzhead.time>>24&255),st(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),st(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(st(M,255&M.gzhead.extra.length),st(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(G.adler=h(G.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(st(M,0),st(M,0),st(M,0),st(M,0),st(M,0),st(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),st(M,3),M.status=ge);else{var pe=k+(M.w_bits-8<<4)<<8;pe|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(pe|=32),pe+=31-pe%31,M.status=ge,nt(M,pe),M.strstart!==0&&(nt(M,G.adler>>>16),nt(M,65535&G.adler)),G.adler=1}if(M.status===69)if(M.gzhead.extra){for(L=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>L&&(G.adler=h(G.adler,M.pending_buf,M.pending-L,L)),_e(G),L=M.pending,M.pending!==M.pending_buf_size));)st(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>L&&(G.adler=h(G.adler,M.pending_buf,M.pending-L,L)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){L=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>L&&(G.adler=h(G.adler,M.pending_buf,M.pending-L,L)),_e(G),L=M.pending,M.pending===M.pending_buf_size)){J=1;break}J=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,st(M,J)}while(J!==0);M.gzhead.hcrc&&M.pending>L&&(G.adler=h(G.adler,M.pending_buf,M.pending-L,L)),J===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){L=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>L&&(G.adler=h(G.adler,M.pending_buf,M.pending-L,L)),_e(G),L=M.pending,M.pending===M.pending_buf_size)){J=1;break}J=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,st(M,J)}while(J!==0);M.gzhead.hcrc&&M.pending>L&&(G.adler=h(G.adler,M.pending_buf,M.pending-L,L)),J===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&_e(G),M.pending+2<=M.pending_buf_size&&(st(M,255&G.adler),st(M,G.adler>>8&255),G.adler=0,M.status=ge)):M.status=ge),M.pending!==0){if(_e(G),G.avail_out===0)return M.last_flush=-1,g}else if(G.avail_in===0&&xe(qe)<=xe(ae)&&qe!==m)return Fe(G,-5);if(M.status===666&&G.avail_in!==0)return Fe(G,-5);if(G.avail_in!==0||M.lookahead!==0||qe!==p&&M.status!==666){var ve=M.strategy===2?function(me,Le){for(var Xe;;){if(me.lookahead===0&&(ct(me),me.lookahead===0)){if(Le===p)return H;break}if(me.match_length=0,Xe=o._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++,Xe&&(Ne(me,!1),me.strm.avail_out===0))return H}return me.insert=0,Le===m?(Ne(me,!0),me.strm.avail_out===0?je:ke):me.last_lit&&(Ne(me,!1),me.strm.avail_out===0)?H:ye}(M,qe):M.strategy===3?function(me,Le){for(var Xe,De,l,f,b=me.window;;){if(me.lookahead<=X){if(ct(me),me.lookahead<=X&&Le===p)return H;if(me.lookahead===0)break}if(me.match_length=0,me.lookahead>=R&&0<me.strstart&&(De=b[l=me.strstart-1])===b[++l]&&De===b[++l]&&De===b[++l]){f=me.strstart+X;do;while(De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&De===b[++l]&&l<f);me.match_length=X-(f-l),me.match_length>me.lookahead&&(me.match_length=me.lookahead)}if(me.match_length>=R?(Xe=o._tr_tally(me,1,me.match_length-R),me.lookahead-=me.match_length,me.strstart+=me.match_length,me.match_length=0):(Xe=o._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++),Xe&&(Ne(me,!1),me.strm.avail_out===0))return H}return me.insert=0,Le===m?(Ne(me,!0),me.strm.avail_out===0?je:ke):me.last_lit&&(Ne(me,!1),me.strm.avail_out===0)?H:ye}(M,qe):s[M.level].func(M,qe);if(ve!==je&&ve!==ke||(M.status=666),ve===H||ve===je)return G.avail_out===0&&(M.last_flush=-1),g;if(ve===ye&&(qe===1?o._tr_align(M):qe!==5&&(o._tr_stored_block(M,0,0,!1),qe===3&&(Me(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),_e(G),G.avail_out===0))return M.last_flush=-1,g}return qe!==m?g:M.wrap<=0?1:(M.wrap===2?(st(M,255&G.adler),st(M,G.adler>>8&255),st(M,G.adler>>16&255),st(M,G.adler>>24&255),st(M,255&G.total_in),st(M,G.total_in>>8&255),st(M,G.total_in>>16&255),st(M,G.total_in>>24&255)):(nt(M,G.adler>>>16),nt(M,65535&G.adler)),_e(G),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?g:1)},i.deflateEnd=function(G){var qe;return G&&G.state?(qe=G.state.status)!==ie&&qe!==69&&qe!==73&&qe!==91&&qe!==103&&qe!==ge&&qe!==666?Fe(G,v):(G.state=null,qe===ge?Fe(G,-3):g):v},i.deflateSetDictionary=function(G,qe){var ae,M,L,J,pe,ve,me,Le,Xe=qe.length;if(!G||!G.state||(J=(ae=G.state).wrap)===2||J===1&&ae.status!==ie||ae.lookahead)return v;for(J===1&&(G.adler=u(G.adler,qe,Xe,0)),ae.wrap=0,Xe>=ae.w_size&&(J===0&&(Me(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),Le=new a.Buf8(ae.w_size),a.arraySet(Le,qe,Xe-ae.w_size,ae.w_size,0),qe=Le,Xe=ae.w_size),pe=G.avail_in,ve=G.next_in,me=G.input,G.avail_in=Xe,G.next_in=0,G.input=qe,ct(ae);ae.lookahead>=R;){for(M=ae.strstart,L=ae.lookahead-(R-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[M+R-1])&ae.hash_mask,ae.prev[M&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=M,M++,--L;);ae.strstart=M,ae.lookahead=R-1,ct(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=R-1,ae.match_available=0,G.next_in=ve,G.input=me,G.avail_in=pe,ae.wrap=J,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var o,u,h,d,p,m,g,v,w,C,x,k,A,j,I,E,U,D,R,X,ce,ie,ge,H,ye;o=s.state,u=s.next_in,H=s.input,h=u+(s.avail_in-5),d=s.next_out,ye=s.output,p=d-(a-s.avail_out),m=d+(s.avail_out-257),g=o.dmax,v=o.wsize,w=o.whave,C=o.wnext,x=o.window,k=o.hold,A=o.bits,j=o.lencode,I=o.distcode,E=(1<<o.lenbits)-1,U=(1<<o.distbits)-1;e:do{A<15&&(k+=H[u++]<<A,A+=8,k+=H[u++]<<A,A+=8),D=j[k&E];t:for(;;){if(k>>>=R=D>>>24,A-=R,(R=D>>>16&255)===0)ye[d++]=65535&D;else{if(!(16&R)){if(!(64&R)){D=j[(65535&D)+(k&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}X=65535&D,(R&=15)&&(A<R&&(k+=H[u++]<<A,A+=8),X+=k&(1<<R)-1,k>>>=R,A-=R),A<15&&(k+=H[u++]<<A,A+=8,k+=H[u++]<<A,A+=8),D=I[k&U];n:for(;;){if(k>>>=R=D>>>24,A-=R,!(16&(R=D>>>16&255))){if(!(64&R)){D=I[(65535&D)+(k&(1<<R)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(ce=65535&D,A<(R&=15)&&(k+=H[u++]<<A,(A+=8)<R&&(k+=H[u++]<<A,A+=8)),g<(ce+=k&(1<<R)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(k>>>=R,A-=R,(R=d-p)<ce){if(w<(R=ce-R)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(ge=x,(ie=0)===C){if(ie+=v-R,R<X){for(X-=R;ye[d++]=x[ie++],--R;);ie=d-ce,ge=ye}}else if(C<R){if(ie+=v+C-R,(R-=C)<X){for(X-=R;ye[d++]=x[ie++],--R;);if(ie=0,C<X){for(X-=R=C;ye[d++]=x[ie++],--R;);ie=d-ce,ge=ye}}}else if(ie+=C-R,R<X){for(X-=R;ye[d++]=x[ie++],--R;);ie=d-ce,ge=ye}for(;2<X;)ye[d++]=ge[ie++],ye[d++]=ge[ie++],ye[d++]=ge[ie++],X-=3;X&&(ye[d++]=ge[ie++],1<X&&(ye[d++]=ge[ie++]))}else{for(ie=d-ce;ye[d++]=ye[ie++],ye[d++]=ye[ie++],ye[d++]=ye[ie++],2<(X-=3););X&&(ye[d++]=ye[ie++],1<X&&(ye[d++]=ye[ie++]))}break}}break}}while(u<h&&d<m);u-=X=A>>3,k&=(1<<(A-=X<<3))-1,s.next_in=u,s.next_out=d,s.avail_in=u<h?h-u+5:5-(u-h),s.avail_out=d<m?m-d+257:257-(d-m),o.hold=k,o.bits=A}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),u=n("./inffast"),h=n("./inftrees"),d=1,p=2,m=0,g=-2,v=1,w=852,C=592;function x(ie){return(ie>>>24&255)+(ie>>>8&65280)+((65280&ie)<<8)+((255&ie)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(ie){var ge;return ie&&ie.state?(ge=ie.state,ie.total_in=ie.total_out=ge.total=0,ie.msg="",ge.wrap&&(ie.adler=1&ge.wrap),ge.mode=v,ge.last=0,ge.havedict=0,ge.dmax=32768,ge.head=null,ge.hold=0,ge.bits=0,ge.lencode=ge.lendyn=new s.Buf32(w),ge.distcode=ge.distdyn=new s.Buf32(C),ge.sane=1,ge.back=-1,m):g}function j(ie){var ge;return ie&&ie.state?((ge=ie.state).wsize=0,ge.whave=0,ge.wnext=0,A(ie)):g}function I(ie,ge){var H,ye;return ie&&ie.state?(ye=ie.state,ge<0?(H=0,ge=-ge):(H=1+(ge>>4),ge<48&&(ge&=15)),ge&&(ge<8||15<ge)?g:(ye.window!==null&&ye.wbits!==ge&&(ye.window=null),ye.wrap=H,ye.wbits=ge,j(ie))):g}function E(ie,ge){var H,ye;return ie?(ye=new k,(ie.state=ye).window=null,(H=I(ie,ge))!==m&&(ie.state=null),H):g}var U,D,R=!0;function X(ie){if(R){var ge;for(U=new s.Buf32(512),D=new s.Buf32(32),ge=0;ge<144;)ie.lens[ge++]=8;for(;ge<256;)ie.lens[ge++]=9;for(;ge<280;)ie.lens[ge++]=7;for(;ge<288;)ie.lens[ge++]=8;for(h(d,ie.lens,0,288,U,0,ie.work,{bits:9}),ge=0;ge<32;)ie.lens[ge++]=5;h(p,ie.lens,0,32,D,0,ie.work,{bits:5}),R=!1}ie.lencode=U,ie.lenbits=9,ie.distcode=D,ie.distbits=5}function ce(ie,ge,H,ye){var je,ke=ie.state;return ke.window===null&&(ke.wsize=1<<ke.wbits,ke.wnext=0,ke.whave=0,ke.window=new s.Buf8(ke.wsize)),ye>=ke.wsize?(s.arraySet(ke.window,ge,H-ke.wsize,ke.wsize,0),ke.wnext=0,ke.whave=ke.wsize):(ye<(je=ke.wsize-ke.wnext)&&(je=ye),s.arraySet(ke.window,ge,H-ye,je,ke.wnext),(ye-=je)?(s.arraySet(ke.window,ge,H-ye,ye,0),ke.wnext=ye,ke.whave=ke.wsize):(ke.wnext+=je,ke.wnext===ke.wsize&&(ke.wnext=0),ke.whave<ke.wsize&&(ke.whave+=je))),0}i.inflateReset=j,i.inflateReset2=I,i.inflateResetKeep=A,i.inflateInit=function(ie){return E(ie,15)},i.inflateInit2=E,i.inflate=function(ie,ge){var H,ye,je,ke,Fe,xe,Me,_e,Ne,st,nt,Ue,ct,he,oe,We,Oe,ht,Pt,St,G,qe,ae,M,L=0,J=new s.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ie||!ie.state||!ie.output||!ie.input&&ie.avail_in!==0)return g;(H=ie.state).mode===12&&(H.mode=13),Fe=ie.next_out,je=ie.output,Me=ie.avail_out,ke=ie.next_in,ye=ie.input,xe=ie.avail_in,_e=H.hold,Ne=H.bits,st=xe,nt=Me,qe=m;e:for(;;)switch(H.mode){case v:if(H.wrap===0){H.mode=13;break}for(;Ne<16;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(2&H.wrap&&_e===35615){J[H.check=0]=255&_e,J[1]=_e>>>8&255,H.check=o(H.check,J,2,0),Ne=_e=0,H.mode=2;break}if(H.flags=0,H.head&&(H.head.done=!1),!(1&H.wrap)||(((255&_e)<<8)+(_e>>8))%31){ie.msg="incorrect header check",H.mode=30;break}if((15&_e)!=8){ie.msg="unknown compression method",H.mode=30;break}if(Ne-=4,G=8+(15&(_e>>>=4)),H.wbits===0)H.wbits=G;else if(G>H.wbits){ie.msg="invalid window size",H.mode=30;break}H.dmax=1<<G,ie.adler=H.check=1,H.mode=512&_e?10:12,Ne=_e=0;break;case 2:for(;Ne<16;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(H.flags=_e,(255&H.flags)!=8){ie.msg="unknown compression method",H.mode=30;break}if(57344&H.flags){ie.msg="unknown header flags set",H.mode=30;break}H.head&&(H.head.text=_e>>8&1),512&H.flags&&(J[0]=255&_e,J[1]=_e>>>8&255,H.check=o(H.check,J,2,0)),Ne=_e=0,H.mode=3;case 3:for(;Ne<32;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}H.head&&(H.head.time=_e),512&H.flags&&(J[0]=255&_e,J[1]=_e>>>8&255,J[2]=_e>>>16&255,J[3]=_e>>>24&255,H.check=o(H.check,J,4,0)),Ne=_e=0,H.mode=4;case 4:for(;Ne<16;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}H.head&&(H.head.xflags=255&_e,H.head.os=_e>>8),512&H.flags&&(J[0]=255&_e,J[1]=_e>>>8&255,H.check=o(H.check,J,2,0)),Ne=_e=0,H.mode=5;case 5:if(1024&H.flags){for(;Ne<16;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}H.length=_e,H.head&&(H.head.extra_len=_e),512&H.flags&&(J[0]=255&_e,J[1]=_e>>>8&255,H.check=o(H.check,J,2,0)),Ne=_e=0}else H.head&&(H.head.extra=null);H.mode=6;case 6:if(1024&H.flags&&(xe<(Ue=H.length)&&(Ue=xe),Ue&&(H.head&&(G=H.head.extra_len-H.length,H.head.extra||(H.head.extra=new Array(H.head.extra_len)),s.arraySet(H.head.extra,ye,ke,Ue,G)),512&H.flags&&(H.check=o(H.check,ye,Ue,ke)),xe-=Ue,ke+=Ue,H.length-=Ue),H.length))break e;H.length=0,H.mode=7;case 7:if(2048&H.flags){if(xe===0)break e;for(Ue=0;G=ye[ke+Ue++],H.head&&G&&H.length<65536&&(H.head.name+=String.fromCharCode(G)),G&&Ue<xe;);if(512&H.flags&&(H.check=o(H.check,ye,Ue,ke)),xe-=Ue,ke+=Ue,G)break e}else H.head&&(H.head.name=null);H.length=0,H.mode=8;case 8:if(4096&H.flags){if(xe===0)break e;for(Ue=0;G=ye[ke+Ue++],H.head&&G&&H.length<65536&&(H.head.comment+=String.fromCharCode(G)),G&&Ue<xe;);if(512&H.flags&&(H.check=o(H.check,ye,Ue,ke)),xe-=Ue,ke+=Ue,G)break e}else H.head&&(H.head.comment=null);H.mode=9;case 9:if(512&H.flags){for(;Ne<16;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(_e!==(65535&H.check)){ie.msg="header crc mismatch",H.mode=30;break}Ne=_e=0}H.head&&(H.head.hcrc=H.flags>>9&1,H.head.done=!0),ie.adler=H.check=0,H.mode=12;break;case 10:for(;Ne<32;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}ie.adler=H.check=x(_e),Ne=_e=0,H.mode=11;case 11:if(H.havedict===0)return ie.next_out=Fe,ie.avail_out=Me,ie.next_in=ke,ie.avail_in=xe,H.hold=_e,H.bits=Ne,2;ie.adler=H.check=1,H.mode=12;case 12:if(ge===5||ge===6)break e;case 13:if(H.last){_e>>>=7&Ne,Ne-=7&Ne,H.mode=27;break}for(;Ne<3;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}switch(H.last=1&_e,Ne-=1,3&(_e>>>=1)){case 0:H.mode=14;break;case 1:if(X(H),H.mode=20,ge!==6)break;_e>>>=2,Ne-=2;break e;case 2:H.mode=17;break;case 3:ie.msg="invalid block type",H.mode=30}_e>>>=2,Ne-=2;break;case 14:for(_e>>>=7&Ne,Ne-=7&Ne;Ne<32;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if((65535&_e)!=(_e>>>16^65535)){ie.msg="invalid stored block lengths",H.mode=30;break}if(H.length=65535&_e,Ne=_e=0,H.mode=15,ge===6)break e;case 15:H.mode=16;case 16:if(Ue=H.length){if(xe<Ue&&(Ue=xe),Me<Ue&&(Ue=Me),Ue===0)break e;s.arraySet(je,ye,ke,Ue,Fe),xe-=Ue,ke+=Ue,Me-=Ue,Fe+=Ue,H.length-=Ue;break}H.mode=12;break;case 17:for(;Ne<14;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(H.nlen=257+(31&_e),_e>>>=5,Ne-=5,H.ndist=1+(31&_e),_e>>>=5,Ne-=5,H.ncode=4+(15&_e),_e>>>=4,Ne-=4,286<H.nlen||30<H.ndist){ie.msg="too many length or distance symbols",H.mode=30;break}H.have=0,H.mode=18;case 18:for(;H.have<H.ncode;){for(;Ne<3;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}H.lens[pe[H.have++]]=7&_e,_e>>>=3,Ne-=3}for(;H.have<19;)H.lens[pe[H.have++]]=0;if(H.lencode=H.lendyn,H.lenbits=7,ae={bits:H.lenbits},qe=h(0,H.lens,0,19,H.lencode,0,H.work,ae),H.lenbits=ae.bits,qe){ie.msg="invalid code lengths set",H.mode=30;break}H.have=0,H.mode=19;case 19:for(;H.have<H.nlen+H.ndist;){for(;We=(L=H.lencode[_e&(1<<H.lenbits)-1])>>>16&255,Oe=65535&L,!((oe=L>>>24)<=Ne);){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(Oe<16)_e>>>=oe,Ne-=oe,H.lens[H.have++]=Oe;else{if(Oe===16){for(M=oe+2;Ne<M;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(_e>>>=oe,Ne-=oe,H.have===0){ie.msg="invalid bit length repeat",H.mode=30;break}G=H.lens[H.have-1],Ue=3+(3&_e),_e>>>=2,Ne-=2}else if(Oe===17){for(M=oe+3;Ne<M;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}Ne-=oe,G=0,Ue=3+(7&(_e>>>=oe)),_e>>>=3,Ne-=3}else{for(M=oe+7;Ne<M;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}Ne-=oe,G=0,Ue=11+(127&(_e>>>=oe)),_e>>>=7,Ne-=7}if(H.have+Ue>H.nlen+H.ndist){ie.msg="invalid bit length repeat",H.mode=30;break}for(;Ue--;)H.lens[H.have++]=G}}if(H.mode===30)break;if(H.lens[256]===0){ie.msg="invalid code -- missing end-of-block",H.mode=30;break}if(H.lenbits=9,ae={bits:H.lenbits},qe=h(d,H.lens,0,H.nlen,H.lencode,0,H.work,ae),H.lenbits=ae.bits,qe){ie.msg="invalid literal/lengths set",H.mode=30;break}if(H.distbits=6,H.distcode=H.distdyn,ae={bits:H.distbits},qe=h(p,H.lens,H.nlen,H.ndist,H.distcode,0,H.work,ae),H.distbits=ae.bits,qe){ie.msg="invalid distances set",H.mode=30;break}if(H.mode=20,ge===6)break e;case 20:H.mode=21;case 21:if(6<=xe&&258<=Me){ie.next_out=Fe,ie.avail_out=Me,ie.next_in=ke,ie.avail_in=xe,H.hold=_e,H.bits=Ne,u(ie,nt),Fe=ie.next_out,je=ie.output,Me=ie.avail_out,ke=ie.next_in,ye=ie.input,xe=ie.avail_in,_e=H.hold,Ne=H.bits,H.mode===12&&(H.back=-1);break}for(H.back=0;We=(L=H.lencode[_e&(1<<H.lenbits)-1])>>>16&255,Oe=65535&L,!((oe=L>>>24)<=Ne);){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(We&&!(240&We)){for(ht=oe,Pt=We,St=Oe;We=(L=H.lencode[St+((_e&(1<<ht+Pt)-1)>>ht)])>>>16&255,Oe=65535&L,!(ht+(oe=L>>>24)<=Ne);){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}_e>>>=ht,Ne-=ht,H.back+=ht}if(_e>>>=oe,Ne-=oe,H.back+=oe,H.length=Oe,We===0){H.mode=26;break}if(32&We){H.back=-1,H.mode=12;break}if(64&We){ie.msg="invalid literal/length code",H.mode=30;break}H.extra=15&We,H.mode=22;case 22:if(H.extra){for(M=H.extra;Ne<M;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}H.length+=_e&(1<<H.extra)-1,_e>>>=H.extra,Ne-=H.extra,H.back+=H.extra}H.was=H.length,H.mode=23;case 23:for(;We=(L=H.distcode[_e&(1<<H.distbits)-1])>>>16&255,Oe=65535&L,!((oe=L>>>24)<=Ne);){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(!(240&We)){for(ht=oe,Pt=We,St=Oe;We=(L=H.distcode[St+((_e&(1<<ht+Pt)-1)>>ht)])>>>16&255,Oe=65535&L,!(ht+(oe=L>>>24)<=Ne);){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}_e>>>=ht,Ne-=ht,H.back+=ht}if(_e>>>=oe,Ne-=oe,H.back+=oe,64&We){ie.msg="invalid distance code",H.mode=30;break}H.offset=Oe,H.extra=15&We,H.mode=24;case 24:if(H.extra){for(M=H.extra;Ne<M;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}H.offset+=_e&(1<<H.extra)-1,_e>>>=H.extra,Ne-=H.extra,H.back+=H.extra}if(H.offset>H.dmax){ie.msg="invalid distance too far back",H.mode=30;break}H.mode=25;case 25:if(Me===0)break e;if(Ue=nt-Me,H.offset>Ue){if((Ue=H.offset-Ue)>H.whave&&H.sane){ie.msg="invalid distance too far back",H.mode=30;break}ct=Ue>H.wnext?(Ue-=H.wnext,H.wsize-Ue):H.wnext-Ue,Ue>H.length&&(Ue=H.length),he=H.window}else he=je,ct=Fe-H.offset,Ue=H.length;for(Me<Ue&&(Ue=Me),Me-=Ue,H.length-=Ue;je[Fe++]=he[ct++],--Ue;);H.length===0&&(H.mode=21);break;case 26:if(Me===0)break e;je[Fe++]=H.length,Me--,H.mode=21;break;case 27:if(H.wrap){for(;Ne<32;){if(xe===0)break e;xe--,_e|=ye[ke++]<<Ne,Ne+=8}if(nt-=Me,ie.total_out+=nt,H.total+=nt,nt&&(ie.adler=H.check=H.flags?o(H.check,je,nt,Fe-nt):a(H.check,je,nt,Fe-nt)),nt=Me,(H.flags?_e:x(_e))!==H.check){ie.msg="incorrect data check",H.mode=30;break}Ne=_e=0}H.mode=28;case 28:if(H.wrap&&H.flags){for(;Ne<32;){if(xe===0)break e;xe--,_e+=ye[ke++]<<Ne,Ne+=8}if(_e!==(4294967295&H.total)){ie.msg="incorrect length check",H.mode=30;break}Ne=_e=0}H.mode=29;case 29:qe=1;break e;case 30:qe=-3;break e;case 31:return-4;case 32:default:return g}return ie.next_out=Fe,ie.avail_out=Me,ie.next_in=ke,ie.avail_in=xe,H.hold=_e,H.bits=Ne,(H.wsize||nt!==ie.avail_out&&H.mode<30&&(H.mode<27||ge!==4))&&ce(ie,ie.output,ie.next_out,nt-ie.avail_out)?(H.mode=31,-4):(st-=ie.avail_in,nt-=ie.avail_out,ie.total_in+=st,ie.total_out+=nt,H.total+=nt,H.wrap&&nt&&(ie.adler=H.check=H.flags?o(H.check,je,nt,ie.next_out-nt):a(H.check,je,nt,ie.next_out-nt)),ie.data_type=H.bits+(H.last?64:0)+(H.mode===12?128:0)+(H.mode===20||H.mode===15?256:0),(st==0&&nt===0||ge===4)&&qe===m&&(qe=-5),qe)},i.inflateEnd=function(ie){if(!ie||!ie.state)return g;var ge=ie.state;return ge.window&&(ge.window=null),ie.state=null,m},i.inflateGetHeader=function(ie,ge){var H;return ie&&ie.state&&2&(H=ie.state).wrap?((H.head=ge).done=!1,m):g},i.inflateSetDictionary=function(ie,ge){var H,ye=ge.length;return ie&&ie.state?(H=ie.state).wrap!==0&&H.mode!==11?g:H.mode===11&&a(1,ge,ye,0)!==H.check?-3:ce(ie,ge,ye,ye)?(H.mode=31,-4):(H.havedict=1,m):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,p,m,g,v,w,C,x){var k,A,j,I,E,U,D,R,X,ce=x.bits,ie=0,ge=0,H=0,ye=0,je=0,ke=0,Fe=0,xe=0,Me=0,_e=0,Ne=null,st=0,nt=new s.Buf16(16),Ue=new s.Buf16(16),ct=null,he=0;for(ie=0;ie<=15;ie++)nt[ie]=0;for(ge=0;ge<g;ge++)nt[p[m+ge]]++;for(je=ce,ye=15;1<=ye&&nt[ye]===0;ye--);if(ye<je&&(je=ye),ye===0)return v[w++]=20971520,v[w++]=20971520,x.bits=1,0;for(H=1;H<ye&&nt[H]===0;H++);for(je<H&&(je=H),ie=xe=1;ie<=15;ie++)if(xe<<=1,(xe-=nt[ie])<0)return-1;if(0<xe&&(d===0||ye!==1))return-1;for(Ue[1]=0,ie=1;ie<15;ie++)Ue[ie+1]=Ue[ie]+nt[ie];for(ge=0;ge<g;ge++)p[m+ge]!==0&&(C[Ue[p[m+ge]]++]=ge);if(U=d===0?(Ne=ct=C,19):d===1?(Ne=a,st-=257,ct=o,he-=257,256):(Ne=u,ct=h,-1),ie=H,E=w,Fe=ge=_e=0,j=-1,I=(Me=1<<(ke=je))-1,d===1&&852<Me||d===2&&592<Me)return 1;for(;;){for(D=ie-Fe,X=C[ge]<U?(R=0,C[ge]):C[ge]>U?(R=ct[he+C[ge]],Ne[st+C[ge]]):(R=96,0),k=1<<ie-Fe,H=A=1<<ke;v[E+(_e>>Fe)+(A-=k)]=D<<24|R<<16|X|0,A!==0;);for(k=1<<ie-1;_e&k;)k>>=1;if(k!==0?(_e&=k-1,_e+=k):_e=0,ge++,--nt[ie]==0){if(ie===ye)break;ie=p[m+C[ge]]}if(je<ie&&(_e&I)!==j){for(Fe===0&&(Fe=je),E+=H,xe=1<<(ke=ie-Fe);ke+Fe<ye&&!((xe-=nt[ke+Fe])<=0);)ke++,xe<<=1;if(Me+=1<<ke,d===1&&852<Me||d===2&&592<Me)return 1;v[j=_e&I]=je<<24|ke<<16|E-w|0}}return _e!==0&&(v[E+_e]=ie-Fe<<24|64<<16|0),x.bits=je,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,o=1;function u(L){for(var J=L.length;0<=--J;)L[J]=0}var h=0,d=29,p=256,m=p+1+d,g=30,v=19,w=2*m+1,C=15,x=16,k=7,A=256,j=16,I=17,E=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=new Array(2*(m+2));u(ce);var ie=new Array(2*g);u(ie);var ge=new Array(512);u(ge);var H=new Array(256);u(H);var ye=new Array(d);u(ye);var je,ke,Fe,xe=new Array(g);function Me(L,J,pe,ve,me){this.static_tree=L,this.extra_bits=J,this.extra_base=pe,this.elems=ve,this.max_length=me,this.has_stree=L&&L.length}function _e(L,J){this.dyn_tree=L,this.max_code=0,this.stat_desc=J}function Ne(L){return L<256?ge[L]:ge[256+(L>>>7)]}function st(L,J){L.pending_buf[L.pending++]=255&J,L.pending_buf[L.pending++]=J>>>8&255}function nt(L,J,pe){L.bi_valid>x-pe?(L.bi_buf|=J<<L.bi_valid&65535,st(L,L.bi_buf),L.bi_buf=J>>x-L.bi_valid,L.bi_valid+=pe-x):(L.bi_buf|=J<<L.bi_valid&65535,L.bi_valid+=pe)}function Ue(L,J,pe){nt(L,pe[2*J],pe[2*J+1])}function ct(L,J){for(var pe=0;pe|=1&L,L>>>=1,pe<<=1,0<--J;);return pe>>>1}function he(L,J,pe){var ve,me,Le=new Array(C+1),Xe=0;for(ve=1;ve<=C;ve++)Le[ve]=Xe=Xe+pe[ve-1]<<1;for(me=0;me<=J;me++){var De=L[2*me+1];De!==0&&(L[2*me]=ct(Le[De]++,De))}}function oe(L){var J;for(J=0;J<m;J++)L.dyn_ltree[2*J]=0;for(J=0;J<g;J++)L.dyn_dtree[2*J]=0;for(J=0;J<v;J++)L.bl_tree[2*J]=0;L.dyn_ltree[2*A]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function We(L){8<L.bi_valid?st(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Oe(L,J,pe,ve){var me=2*J,Le=2*pe;return L[me]<L[Le]||L[me]===L[Le]&&ve[J]<=ve[pe]}function ht(L,J,pe){for(var ve=L.heap[pe],me=pe<<1;me<=L.heap_len&&(me<L.heap_len&&Oe(J,L.heap[me+1],L.heap[me],L.depth)&&me++,!Oe(J,ve,L.heap[me],L.depth));)L.heap[pe]=L.heap[me],pe=me,me<<=1;L.heap[pe]=ve}function Pt(L,J,pe){var ve,me,Le,Xe,De=0;if(L.last_lit!==0)for(;ve=L.pending_buf[L.d_buf+2*De]<<8|L.pending_buf[L.d_buf+2*De+1],me=L.pending_buf[L.l_buf+De],De++,ve===0?Ue(L,me,J):(Ue(L,(Le=H[me])+p+1,J),(Xe=U[Le])!==0&&nt(L,me-=ye[Le],Xe),Ue(L,Le=Ne(--ve),pe),(Xe=D[Le])!==0&&nt(L,ve-=xe[Le],Xe)),De<L.last_lit;);Ue(L,A,J)}function St(L,J){var pe,ve,me,Le=J.dyn_tree,Xe=J.stat_desc.static_tree,De=J.stat_desc.has_stree,l=J.stat_desc.elems,f=-1;for(L.heap_len=0,L.heap_max=w,pe=0;pe<l;pe++)Le[2*pe]!==0?(L.heap[++L.heap_len]=f=pe,L.depth[pe]=0):Le[2*pe+1]=0;for(;L.heap_len<2;)Le[2*(me=L.heap[++L.heap_len]=f<2?++f:0)]=1,L.depth[me]=0,L.opt_len--,De&&(L.static_len-=Xe[2*me+1]);for(J.max_code=f,pe=L.heap_len>>1;1<=pe;pe--)ht(L,Le,pe);for(me=l;pe=L.heap[1],L.heap[1]=L.heap[L.heap_len--],ht(L,Le,1),ve=L.heap[1],L.heap[--L.heap_max]=pe,L.heap[--L.heap_max]=ve,Le[2*me]=Le[2*pe]+Le[2*ve],L.depth[me]=(L.depth[pe]>=L.depth[ve]?L.depth[pe]:L.depth[ve])+1,Le[2*pe+1]=Le[2*ve+1]=me,L.heap[1]=me++,ht(L,Le,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(b,_){var S,P,T,N,$,F,q=_.dyn_tree,Q=_.max_code,K=_.stat_desc.static_tree,W=_.stat_desc.has_stree,Y=_.stat_desc.extra_bits,B=_.stat_desc.extra_base,Z=_.stat_desc.max_length,V=0;for(N=0;N<=C;N++)b.bl_count[N]=0;for(q[2*b.heap[b.heap_max]+1]=0,S=b.heap_max+1;S<w;S++)Z<(N=q[2*q[2*(P=b.heap[S])+1]+1]+1)&&(N=Z,V++),q[2*P+1]=N,Q<P||(b.bl_count[N]++,$=0,B<=P&&($=Y[P-B]),F=q[2*P],b.opt_len+=F*(N+$),W&&(b.static_len+=F*(K[2*P+1]+$)));if(V!==0){do{for(N=Z-1;b.bl_count[N]===0;)N--;b.bl_count[N]--,b.bl_count[N+1]+=2,b.bl_count[Z]--,V-=2}while(0<V);for(N=Z;N!==0;N--)for(P=b.bl_count[N];P!==0;)Q<(T=b.heap[--S])||(q[2*T+1]!==N&&(b.opt_len+=(N-q[2*T+1])*q[2*T],q[2*T+1]=N),P--)}}(L,J),he(Le,f,L.bl_count)}function G(L,J,pe){var ve,me,Le=-1,Xe=J[1],De=0,l=7,f=4;for(Xe===0&&(l=138,f=3),J[2*(pe+1)+1]=65535,ve=0;ve<=pe;ve++)me=Xe,Xe=J[2*(ve+1)+1],++De<l&&me===Xe||(De<f?L.bl_tree[2*me]+=De:me!==0?(me!==Le&&L.bl_tree[2*me]++,L.bl_tree[2*j]++):De<=10?L.bl_tree[2*I]++:L.bl_tree[2*E]++,Le=me,f=(De=0)===Xe?(l=138,3):me===Xe?(l=6,3):(l=7,4))}function qe(L,J,pe){var ve,me,Le=-1,Xe=J[1],De=0,l=7,f=4;for(Xe===0&&(l=138,f=3),ve=0;ve<=pe;ve++)if(me=Xe,Xe=J[2*(ve+1)+1],!(++De<l&&me===Xe)){if(De<f)for(;Ue(L,me,L.bl_tree),--De!=0;);else me!==0?(me!==Le&&(Ue(L,me,L.bl_tree),De--),Ue(L,j,L.bl_tree),nt(L,De-3,2)):De<=10?(Ue(L,I,L.bl_tree),nt(L,De-3,3)):(Ue(L,E,L.bl_tree),nt(L,De-11,7));Le=me,f=(De=0)===Xe?(l=138,3):me===Xe?(l=6,3):(l=7,4)}}u(xe);var ae=!1;function M(L,J,pe,ve){nt(L,(h<<1)+(ve?1:0),3),function(me,Le,Xe,De){We(me),st(me,Xe),st(me,~Xe),s.arraySet(me.pending_buf,me.window,Le,Xe,me.pending),me.pending+=Xe}(L,J,pe)}i._tr_init=function(L){ae||(function(){var J,pe,ve,me,Le,Xe=new Array(C+1);for(me=ve=0;me<d-1;me++)for(ye[me]=ve,J=0;J<1<<U[me];J++)H[ve++]=me;for(H[ve-1]=me,me=Le=0;me<16;me++)for(xe[me]=Le,J=0;J<1<<D[me];J++)ge[Le++]=me;for(Le>>=7;me<g;me++)for(xe[me]=Le<<7,J=0;J<1<<D[me]-7;J++)ge[256+Le++]=me;for(pe=0;pe<=C;pe++)Xe[pe]=0;for(J=0;J<=143;)ce[2*J+1]=8,J++,Xe[8]++;for(;J<=255;)ce[2*J+1]=9,J++,Xe[9]++;for(;J<=279;)ce[2*J+1]=7,J++,Xe[7]++;for(;J<=287;)ce[2*J+1]=8,J++,Xe[8]++;for(he(ce,m+1,Xe),J=0;J<g;J++)ie[2*J+1]=5,ie[2*J]=ct(J,5);je=new Me(ce,U,p+1,m,C),ke=new Me(ie,D,0,g,C),Fe=new Me(new Array(0),R,0,v,k)}(),ae=!0),L.l_desc=new _e(L.dyn_ltree,je),L.d_desc=new _e(L.dyn_dtree,ke),L.bl_desc=new _e(L.bl_tree,Fe),L.bi_buf=0,L.bi_valid=0,oe(L)},i._tr_stored_block=M,i._tr_flush_block=function(L,J,pe,ve){var me,Le,Xe=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(De){var l,f=4093624447;for(l=0;l<=31;l++,f>>>=1)if(1&f&&De.dyn_ltree[2*l]!==0)return a;if(De.dyn_ltree[18]!==0||De.dyn_ltree[20]!==0||De.dyn_ltree[26]!==0)return o;for(l=32;l<p;l++)if(De.dyn_ltree[2*l]!==0)return o;return a}(L)),St(L,L.l_desc),St(L,L.d_desc),Xe=function(De){var l;for(G(De,De.dyn_ltree,De.l_desc.max_code),G(De,De.dyn_dtree,De.d_desc.max_code),St(De,De.bl_desc),l=v-1;3<=l&&De.bl_tree[2*X[l]+1]===0;l--);return De.opt_len+=3*(l+1)+5+5+4,l}(L),me=L.opt_len+3+7>>>3,(Le=L.static_len+3+7>>>3)<=me&&(me=Le)):me=Le=pe+5,pe+4<=me&&J!==-1?M(L,J,pe,ve):L.strategy===4||Le===me?(nt(L,2+(ve?1:0),3),Pt(L,ce,ie)):(nt(L,4+(ve?1:0),3),function(De,l,f,b){var _;for(nt(De,l-257,5),nt(De,f-1,5),nt(De,b-4,4),_=0;_<b;_++)nt(De,De.bl_tree[2*X[_]+1],3);qe(De,De.dyn_ltree,l-1),qe(De,De.dyn_dtree,f-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Xe+1),Pt(L,L.dyn_ltree,L.dyn_dtree)),oe(L),ve&&We(L)},i._tr_tally=function(L,J,pe){return L.pending_buf[L.d_buf+2*L.last_lit]=J>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&J,L.pending_buf[L.l_buf+L.last_lit]=255&pe,L.last_lit++,J===0?L.dyn_ltree[2*pe]++:(L.matches++,J--,L.dyn_ltree[2*(H[pe]+p+1)]++,L.dyn_dtree[2*Ne(J)]++),L.last_lit===L.lit_bufsize-1},i._tr_align=function(L){nt(L,2,3),Ue(L,A,ce),function(J){J.bi_valid===16?(st(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,o){if(!a.setImmediate){var u,h,d,p,m=1,g={},v=!1,w=a.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(a);C=C&&C.setTimeout?C:a,u={}.toString.call(a.process)==="[object process]"?function(j){process.nextTick(function(){k(j)})}:function(){if(a.postMessage&&!a.importScripts){var j=!0,I=a.onmessage;return a.onmessage=function(){j=!1},a.postMessage("","*"),a.onmessage=I,j}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",A,!1):a.attachEvent("onmessage",A),function(j){a.postMessage(p+j,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(j){k(j.data)},function(j){d.port2.postMessage(j)}):w&&"onreadystatechange"in w.createElement("script")?(h=w.documentElement,function(j){var I=w.createElement("script");I.onreadystatechange=function(){k(j),I.onreadystatechange=null,h.removeChild(I),I=null},h.appendChild(I)}):function(j){setTimeout(k,0,j)},C.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var I=new Array(arguments.length-1),E=0;E<I.length;E++)I[E]=arguments[E+1];var U={callback:j,args:I};return g[m]=U,u(m),m++},C.clearImmediate=x}function x(j){delete g[j]}function k(j){if(v)setTimeout(k,0,j);else{var I=g[j];if(I){v=!0;try{(function(E){var U=E.callback,D=E.args;switch(D.length){case 0:U();break;case 1:U(D[0]);break;case 2:U(D[0],D[1]);break;case 3:U(D[0],D[1],D[2]);break;default:U.apply(o,D)}})(I)}finally{x(j),v=!1}}}}function A(j){j.source===a&&typeof j.data=="string"&&j.data.indexOf(p)===0&&k(+j.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(lN);var $9=lN.exports;const D9=yl($9);function z9(e){let t="",n=e;for(;n>=0;)t=String.fromCharCode(n%26+65)+t,n=Math.floor(n/26)-1;return t}function F9(e,t){return`${z9(e)}${t+1}`}async function cN(e,t,n="design"){const i=Math.ceil(t.width/1e3),s=Math.ceil(t.length/1e3);console.log(`[SLICER] Creating ${i}${s} grid (${i*s} tiles) for ${t.width}mm  ${t.length}mm design`);const u=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!u)throw new Error("Invalid SVG content");const h=u.getAttribute("viewBox");let d,p;if(h){const U=h.split(/\s+/).map(Number);d=U[2],p=U[3]}else d=parseFloat(u.getAttribute("width"))||1024,p=parseFloat(u.getAttribute("height"))||1024;console.log(`[SLICER] SVG internal dimensions: ${d}  ${p}`);const m=d/t.width,g=p/t.length,v=1e3*m,w=1e3*g;console.log(`[SLICER] Tile size in SVG units: ${v}  ${w}`);const C=u.innerHTML,x=u.getAttribute("xmlns")||"http://www.w3.org/2000/svg",k=new D9,A=k.folder("tiles"),j=[];for(let U=0;U<s;U++){const D=[];for(let R=0;R<i;R++){const X=F9(R,U);D.push(X);const ce=R*v,ie=U*w,ge=`${ce} ${ie} ${v} ${w}`,H=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="${x}" viewBox="${ge}" width="1000mm" height="1000mm">
  <defs>
    <clipPath id="tile-clip">
      <rect x="${ce}" y="${ie}" width="${v}" height="${w}"/>
    </clipPath>
  </defs>
  <g clip-path="url(#tile-clip)">
${C}
  </g>
</svg>`,ye=`${uN(n)}_${X}.svg`;A.file(ye,H)}j.push(D)}const I=B9(j,t,n);k.file("layout-guide.txt",I);const E=await k.generateAsync({type:"blob"});return console.log(`[SLICER] Created ZIP with ${i*s} tiles`),E}function B9(e,t,n){const r=e.length,i=e[0].length;let s=`TPV Studio - Tile Layout Guide
================================

Design: ${n}
Total Size: ${t.width}mm  ${t.length}mm (${t.width/1e3}m  ${t.length/1e3}m)
Tile Size: 1000mm  1000mm (1m  1m)
Grid: ${i} columns  ${r} rows (${i*r} tiles)

Layout (view from above):
-------------------------

`;const a=6;s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`;for(let o=0;o<r;o++){s+="";for(let u=0;u<i;u++){const h=e[o][u],d=a-h.length,p=Math.floor(d/2),m=d-p;s+=" ".repeat(p)+h+" ".repeat(m)+""}s+=`
`,o<r-1?s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`:s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`}return s+=`
Installation Notes:
-------------------
- Each tile is exactly 1m  1m
- Tiles are named by column (A-Z) and row (1-${r})
- Start from top-left corner (A1) when laying out
- Tiles align perfectly when placed edge-to-edge
- Edge tiles may contain partial content if design isn't exactly divisible by 1m

Generated by TPV Studio
`,s}function uN(e){return e.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"-").substring(0,50)}function hN(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function U9(e,t,n="design"){try{const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch SVG: ${r.statusText}`);const i=await r.text(),s=await cN(i,t,n),a=`${uN(n)}-tiles-1mx1m.zip`;return hN(s,a),console.log(`[SLICER] Downloaded ${a}`),!0}catch(r){throw console.error("[SLICER] Failed to download tiles:",r),r}}var tl;let H9=(tl=class{static next(){return(++tl.seed).toString(16).toUpperCase()}static peek(){return(tl.seed+1).toString(16).toUpperCase()}},Uf(tl,"seed",0),tl);var mw=H9;const W9=mw;let V9=class{constructor(t=null){this.handle=W9.next(),this.ownerObjectHandle="0",this.subclassMarkers=[],t&&(Array.isArray(t)?this.subclassMarkers.push(...t):this.subclassMarkers.push(t))}tags(t){t.push(5,this.handle),t.push(330,this.ownerObjectHandle);for(const n of this.subclassMarkers)t.push(100,n)}};var Wr=V9;const G9=Wr;let q9=class extends G9{constructor(t,n,r){super(["AcDbSymbolTableRecord","AcDbLinetypeTableRecord"]),this.name=t,this.description=n,this.elements=r}tags(t){t.push(0,"LTYPE"),super.tags(t),t.push(2,this.name),t.push(3,this.description),t.push(70,0),t.push(72,65),t.push(73,this.elements.length),t.push(40,this.getElementsSum()),this.elements.forEach(n=>{t.push(49,n),t.push(74,0)})}getElementsSum(){return this.elements.reduce((t,n)=>t+Math.abs(n),0)}};var Y9=q9;const X9=Wr;let K9=class extends X9{constructor(t,n,r=null){super(["AcDbSymbolTableRecord","AcDbLayerTableRecord"]),this.name=t,this.colorNumber=n,this.lineTypeName=r,this.shapes=[],this.trueColor=-1}tags(t){t.push(0,"LAYER"),super.tags(t),t.push(2,this.name),this.trueColor!==-1?t.push(420,this.trueColor):t.push(62,this.colorNumber),t.push(70,0),this.lineTypeName&&t.push(6,this.lineTypeName),t.push(390,1)}setTrueColor(t){this.trueColor=t}addShape(t){this.shapes.push(t),t.layer=this}getShapes(){return this.shapes}shapesTags(t,n){for(const r of this.shapes)r.ownerObjectHandle=t.handle,r.tags(n)}};var Z9=K9;const Q9=Wr;let J9=class extends Q9{constructor(t){super("AcDbSymbolTable"),this.name=t,this.elements=[]}add(t){t.ownerObjectHandle=this.handle,this.elements.push(t)}tags(t){t.push(0,"TABLE"),t.push(2,this.name),super.tags(t),t.push(70,this.elements.length),this.elements.forEach(n=>{n.tags(t)}),t.push(0,"ENDTAB")}};var dN=J9;const e7=Wr,t7=dN;let n7=class extends t7{constructor(t){super(t),this.subclassMarkers.push("AcDbDimStyleTable")}tags(t){t.push(0,"TABLE"),t.push(2,this.name),e7.prototype.tags.call(this,t),t.push(70,this.elements.length),t.push(71,1);for(const n of this.elements)n.tags(t);t.push(0,"ENDTAB")}};var r7=n7;const i7=Wr;let s7=class extends i7{constructor(n){super(["AcDbSymbolTableRecord","AcDbTextStyleTableRecord"]);Uf(this,"fontFileName","txt");this.name=n}tags(n){n.push(0,"STYLE"),super.tags(n),n.push(2,this.name),n.push(70,0),n.push(40,0),n.push(41,1),n.push(50,0),n.push(71,0),n.push(42,1),n.push(3,this.fontFileName),n.push(4,"")}};var a7=s7;const o7=Wr;let l7=class extends o7{constructor(t,n){super(["AcDbSymbolTableRecord","AcDbViewportTableRecord"]),this.name=t,this.height=n}tags(t){t.push(0,"VPORT"),super.tags(t),t.push(2,this.name),t.push(40,this.height),t.push(70,0)}};var c7=l7;const u7=Wr;let h7=class extends u7{constructor(t){super(["AcDbSymbolTableRecord","AcDbRegAppTableRecord"]),this.name=t}tags(t){t.push(0,"APPID"),super.tags(t),t.push(2,this.name),t.push(70,0)}};var d7=h7;const xS=Wr;let f7=class extends xS{constructor(t){super(["AcDbEntity","AcDbBlockBegin"]),this.name=t,this.end=new xS(["AcDbEntity","AcDbBlockEnd"]),this.recordHandle=null}tags(t){t.push(0,"BLOCK"),super.tags(t),t.push(2,this.name),t.push(70,0),t.point(0,0),t.push(3,this.name),t.push(1,""),t.push(0,"ENDBLK"),this.end.tags(t)}};var p7=f7;const m7=Wr;let g7=class extends m7{constructor(t){super(["AcDbSymbolTableRecord","AcDbBlockTableRecord"]),this.name=t}tags(t){t.push(0,"BLOCK_RECORD"),super.tags(t),t.push(2,this.name),t.push(70,0),t.push(280,0),t.push(281,1)}};var y7=g7;const b7=Wr;let v7=class extends b7{constructor(){super("AcDbDictionary"),this.children={}}addChildDictionary(t,n){n.ownerObjectHandle=this.handle,this.children[t]=n}tags(t){t.push(0,"DICTIONARY"),super.tags(t),t.push(281,1);const n=Object.entries(this.children);for(const i of n){const[s,a]=i;t.push(3,s),t.push(350,a.handle)}const r=Object.values(this.children);for(const i of r)i.tags(t)}};var x7=v7;const w7=Wr;let _7=class extends w7{constructor(t,n,r,i){super(["AcDbEntity","AcDbLine"]),this.x1=t,this.y1=n,this.x2=r,this.y2=i}tags(t){t.push(0,"LINE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,0)}};var k7=_7;const S7=Wr;let C7=class extends S7{constructor(t,n,r,i,s,a){super(["AcDbEntity","AcDbLine"]),this.x1=t,this.y1=n,this.z1=r,this.x2=i,this.y2=s,this.z2=a}tags(t){t.push(0,"LINE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1,this.z1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,this.z2)}};var E7=C7;const T7=Wr;let j7=class extends T7{constructor(t,n,r,i,s){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.r=r,this.startAngle=i,this.endAngle=s}tags(t){t.push(0,"ARC"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.r),t.push(100,"AcDbArc"),t.push(50,this.startAngle),t.push(51,this.endAngle)}};var A7=j7;const P7=Wr;let N7=class extends P7{constructor(t,n,r){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.r=r}tags(t){t.push(0,"CIRCLE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.r)}};var O7=N7;const R7=Wr;let M7=class extends R7{constructor(t,n,r,i,s,a,o,u){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.z=r,this.r=i,this.thickness=s,this.extrusionDirectionX=a,this.extrusionDirectionY=o,this.extrusionDirectionZ=u}tags(t){t.push(0,"CIRCLE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y,this.z),t.push(40,this.r),t.push(39,this.thickness),t.push(210,this.extrusionDirectionX),t.push(220,this.extrusionDirectionY),t.push(230,this.extrusionDirectionZ)}};var L7=M7;const I7=Wr,wS=["left","center","right"],_S=["baseline","bottom","middle","top"];let $7=class extends I7{constructor(t,n,r,i,s,a="left",o="baseline"){super(["AcDbEntity","AcDbText"]),this.x=t,this.y=n,this.height=r,this.rotation=i,this.value=s,this.hAlign=a,this.vAlign=o}tags(t){t.push(0,"TEXT"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.height),t.push(1,this.value),t.push(50,this.rotation),wS.includes(this.hAlign,1)||_S.includes(this.vAlign,1)?(t.push(72,Math.max(wS.indexOf(this.hAlign),0)),t.push(11,this.x),t.push(21,this.y),t.push(31,0),t.push(100,"AcDbText"),t.push(73,Math.max(_S.indexOf(this.vAlign),0))):t.push(100,"AcDbText")}};var D7=$7;const z7=Wr;let F7=class extends z7{constructor(t,n=!1,r=0,i=0){super(["AcDbEntity","AcDbPolyline"]),this.points=t,this.closed=n,this.startWidth=r,this.endWidth=i}tags(t){t.push(0,"LWPOLYLINE"),super.tags(t),t.push(8,this.layer.name),t.push(6,"ByLayer"),t.push(62,256),t.push(370,-1),t.push(90,this.points.length),t.push(70,this.closed?1:0),this.points.forEach(n=>{const[r,i,s]=n;t.push(10,r),t.push(20,i),(this.startWidth!==0||this.endWidth!==0)&&(t.push(40,this.startWidth),t.push(41,this.endWidth)),s!==void 0&&t.push(42,s)})}};var B7=F7;const U7=Wr;let H7=class extends U7{constructor(t,n,r){super(["AcDbEntity","AcDbVertex","AcDb3dPolylineVertex"]),this.x=t,this.y=n,this.z=r}tags(t){t.push(0,"VERTEX"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y,this.z),t.push(70,32)}};var W7=H7;const V7=Wr,G7=mw,q7=W7;let Y7=class extends V7{constructor(t){super(["AcDbEntity","AcDb3dPolyline"]),this.verticies=t.map(n=>{const[r,i,s]=n,a=new q7(r,i,s);return a.ownerObjectHandle=this.handle,a}),this.seqendHandle=G7.next()}tags(t){t.push(0,"POLYLINE"),super.tags(t),t.push(8,this.layer.name),t.push(66,1),t.push(70,0),t.point(0,0),this.verticies.forEach(n=>{n.layer=this.layer,n.tags(t)}),t.push(0,"SEQEND"),t.push(5,this.seqendHandle),t.push(100,"AcDbEntity"),t.push(8,this.layer.name)}};var X7=Y7;const K7=Wr;let Z7=class extends K7{constructor(t,n,r,i,s,a,o,u,h,d,p,m){super(["AcDbEntity","AcDbFace"]),this.x1=t,this.y1=n,this.z1=r,this.x2=i,this.y2=s,this.z2=a,this.x3=o,this.y3=u,this.z3=h,this.x4=d,this.y4=p,this.z4=m}tags(t){t.push(0,"3DFACE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1,this.z1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,this.z2),t.push(12,this.x3),t.push(22,this.y3),t.push(32,this.z3),t.push(13,this.x4),t.push(23,this.y4),t.push(33,this.z4)}};var Q7=Z7;const J7=Wr;let eB=class extends J7{constructor(t,n){super(["AcDbEntity","AcDbPoint"]),this.x=t,this.y=n}tags(t){t.push(0,"POINT"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y)}};var tB=eB;const nB=Wr;let rB=class extends nB{constructor(t,n=3,r=null,i=null,s=[]){if(super(["AcDbEntity","AcDbSpline"]),t.length<n+1)throw new Error(`For degree ${n} spline, expected at least ${n+1} control points, but received only ${t.length}`);if(r==null){r=[];for(let p=0;p<n+1;p++)r.push(0);for(let p=1;p<t.length-n;p++)r.push(p);for(let p=0;p<n+1;p++)r.push(t.length-n)}if(r.length!==t.length+n+1)throw new Error(`Invalid knot vector length. Expected ${t.length+n+1} but received ${r.length}.`);this.controlPoints=t,this.knots=r,this.fitPoints=s,this.degree=n,this.weights=i;const a=0,o=0,u=this.weights?1:0,h=1,d=0;this.type=a*1+o*2+u*4+h*8+d*16}tags(t){t.push(0,"SPLINE"),super.tags(t),t.push(8,this.layer.name),t.push(210,0),t.push(220,0),t.push(230,1),t.push(70,this.type),t.push(71,this.degree),t.push(72,this.knots.length),t.push(73,this.controlPoints.length),t.push(74,this.fitPoints.length),t.push(42,1e-7),t.push(43,1e-7),t.push(44,1e-10),this.knots.forEach(n=>{t.push(40,n)}),this.weights&&this.weights.forEach(n=>{t.push(41,n)}),this.controlPoints.forEach(n=>{t.point(n[0],n[1])})}};var iB=rB;const sB=Wr;let aB=class extends sB{constructor(t,n,r,i,s,a,o){super(["AcDbEntity","AcDbEllipse"]),this.x=t,this.y=n,this.majorAxisX=r,this.majorAxisY=i,this.axisRatio=s,this.startAngle=a,this.endAngle=o}tags(t){t.push(0,"ELLIPSE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(11,this.majorAxisX),t.push(21,this.majorAxisY),t.push(31,0),t.push(40,this.axisRatio),t.push(41,this.startAngle),t.push(42,this.endAngle)}};var oB=aB;let lB=class{constructor(){this.lines=[]}point(t,n,r=0){this.push(10,t),this.push(20,n),this.push(30,r)}start(t){this.push(0,"SECTION"),this.push(2,t)}end(){this.push(0,"ENDSEC")}addHeaderVariable(t,n){this.push(9,`$${t}`),n.forEach(r=>{this.push(r[0],r[1])})}push(t,n){this.lines.push(t,n)}toDxfString(){return this.lines.join(`
`)}};var cB=lB;const uB=Y9,hB=Z9,vp=dN,dB=r7,fB=a7,pB=c7,mB=d7,gB=p7,yB=y7,kS=x7,bB=k7,vB=E7,xB=A7,wB=O7,_B=L7,kB=D7,xp=B7,SB=X7,CB=Q7,EB=tB,TB=iB,jB=oB,AB=cB,PB=mw;let Vu=class $l{constructor(){this.layers={},this.activeLayer=null,this.lineTypes={},this.headers={},this.tables={},this.blocks={},this.dictionary=new kS,this.setUnits("Unitless");for(const t of $l.LINE_TYPES)this.addLineType(t.name,t.description,t.elements);for(const t of $l.LAYERS)this.addLayer(t.name,t.colorNumber,t.lineTypeName);this.setActiveLayer("0"),this.generateAutocadExtras()}addLineType(t,n,r){return this.lineTypes[t]=new uB(t,n,r),this}addLayer(t,n,r){return this.layers[t]=new hB(t,n,r),this}setActiveLayer(t){return this.activeLayer=this.layers[t],this}addTable(t){const n=new vp(t);return this.tables[t]=n,n}addBlock(t){const n=new gB(t);return this.blocks[t]=n,n}drawLine(t,n,r,i){return this.activeLayer.addShape(new bB(t,n,r,i)),this}drawLine3d(t,n,r,i,s,a){return this.activeLayer.addShape(new vB(t,n,r,i,s,a)),this}drawPoint(t,n){return this.activeLayer.addShape(new EB(t,n)),this}drawRect(t,n,r,i,s,a){const o=r-t,u=i-n;a=a||0;let h=null;return s?h=new xp([[t+o-s,n,a],[t+o,n+s],[t+o,n+u-s,a],[t+o-s,n+u],[t+s,n+u,a],[t,n+u-s],[t,n+s,a],[t+s,n]],!0):h=new xp([[t,n],[t,n+u],[t+o,n+u],[t+o,n]],!0),this.activeLayer.addShape(h),this}drawPolygon(t,n,r,i,s=0,a=!1){const o=2*Math.PI/r,u=[];let h=i;const d=s*Math.PI/180;a&&(h=i/Math.cos(Math.PI/r));for(let p=0;p<r;p++)u.push([t+h*Math.sin(d+p*o),n+h*Math.cos(d+p*o)]);return this.activeLayer.addShape(new xp(u,!0)),this}drawArc(t,n,r,i,s){return this.activeLayer.addShape(new xB(t,n,r,i,s)),this}drawCircle(t,n,r){return this.activeLayer.addShape(new wB(t,n,r)),this}drawCylinder(t,n,r,i,s,a,o,u){return this.activeLayer.addShape(new _B(t,n,r,i,s,a,o,u)),this}drawText(t,n,r,i,s,a="left",o="baseline"){return this.activeLayer.addShape(new kB(t,n,r,i,s,a,o)),this}drawPolyline(t,n=!1,r=0,i=0){return this.activeLayer.addShape(new xp(t,n,r,i)),this}drawPolyline3d(t){return t.forEach(n=>{if(n.length!==3)throw"Require 3D coordinates"}),this.activeLayer.addShape(new SB(t)),this}setTrueColor(t){return this.activeLayer.setTrueColor(t),this}drawSpline(t,n=3,r=null,i=null,s=[]){return this.activeLayer.addShape(new TB(t,n,r,i,s)),this}drawEllipse(t,n,r,i,s,a=0,o=2*Math.PI){return this.activeLayer.addShape(new jB(t,n,r,i,s,a,o)),this}drawFace(t,n,r,i,s,a,o,u,h,d,p,m){return this.activeLayer.addShape(new CB(t,n,r,i,s,a,o,u,h,d,p,m)),this}_ltypeTable(){const t=new vp("LTYPE"),n=Object.values(this.lineTypes);for(const r of n)t.add(r);return t}_layerTable(t){const n=new vp("LAYER"),r=Object.values(this.layers);for(const i of r)n.add(i);return n}header(t,n){return this.headers[t]=n,this}setUnits(t){return typeof $l.UNITS[t]<"u"?$l.UNITS[t]:$l.UNITS.Unitless,this.header("INSUNITS",[[70,$l.UNITS[t]]]),this}generateAutocadExtras(){this.headers.ACADVER||this.header("ACADVER",[[1,"AC1021"]]),this.lineTypes.ByBlock||this.addLineType("ByBlock","",[]),this.lineTypes.ByLayer||this.addLineType("ByLayer","",[]);let t=this.tables.VPORT;t||(t=this.addTable("VPORT"));let n=this.tables.STYLE;n||(n=this.addTable("STYLE")),this.tables.VIEW||this.addTable("VIEW"),this.tables.UCS||this.addTable("UCS");let r=this.tables.APPID;if(r||(r=this.addTable("APPID")),!this.tables.DIMSTYLE){const s=new dB("DIMSTYLE");this.tables.DIMSTYLE=s}t.add(new pB("*ACTIVE",1e3)),n.add(new fB("standard")),r.add(new mB("ACAD")),this.modelSpace=this.addBlock("*Model_Space"),this.addBlock("*Paper_Space");const i=new kS;this.dictionary.addChildDictionary("ACAD_GROUP",i)}_tagsManager(){const t=new AB,n=new vp("BLOCK_RECORD"),r=Object.values(this.blocks);for(const h of r){const d=new yB(h.name);n.add(d)}const i=this._ltypeTable(),s=this._layerTable();t.start("HEADER"),t.addHeaderVariable("HANDSEED",[[5,PB.peek()]]);const a=Object.entries(this.headers);for(const h of a){const[d,p]=h;t.addHeaderVariable(d,p)}t.end(),t.start("CLASSES"),t.end(),t.start("TABLES"),i.tags(t),s.tags(t);const o=Object.values(this.tables);for(const h of o)h.tags(t);n.tags(t),t.end(),t.start("BLOCKS");for(const h of r)h.tags(t);t.end(),t.start("ENTITIES");const u=Object.values(this.layers);for(const h of u)h.shapesTags(this.modelSpace,t);return t.end(),t.start("OBJECTS"),this.dictionary.tags(t),t.end(),t.push(0,"EOF"),t}toDxfString(){return this._tagsManager().toDxfString()}};Vu.ACI={LAYER:0,RED:1,YELLOW:2,GREEN:3,CYAN:4,BLUE:5,MAGENTA:6,WHITE:7};Vu.LINE_TYPES=[{name:"CONTINUOUS",description:"______",elements:[]},{name:"DASHED",description:"_ _ _ ",elements:[5,-5]},{name:"DOTTED",description:". . . ",elements:[0,-5]}];Vu.LAYERS=[{name:"0",colorNumber:Vu.ACI.WHITE,lineTypeName:"CONTINUOUS"}];Vu.UNITS={Unitless:0,Inches:1,Feet:2,Miles:3,Millimeters:4,Centimeters:5,Meters:6,Kilometers:7,Microinches:8,Mils:9,Yards:10,Angstroms:11,Nanometers:12,Microns:13,Decimeters:14,Decameters:15,Hectometers:16,Gigameters:17,"Astronomical units":18,"Light years":19,Parsecs:20};var NB=Vu,OB=NB;const RB=yl(OB);function MB(e,t=2){if(!e)return[];const n=[];let r=[],i=0,s=0,a=0,o=0;const u=LB(e);for(const h of u){const d=h.type,p=h.args;switch(d){case"M":r.length>0&&n.push(r),i=p[0],s=p[1],a=i,o=s,r=[{x:i,y:s}];break;case"m":r.length>0&&n.push(r),i+=p[0],s+=p[1],a=i,o=s,r=[{x:i,y:s}];break;case"L":i=p[0],s=p[1],r.push({x:i,y:s});break;case"l":i+=p[0],s+=p[1],r.push({x:i,y:s});break;case"H":i=p[0],r.push({x:i,y:s});break;case"h":i+=p[0],r.push({x:i,y:s});break;case"V":s=p[0],r.push({x:i,y:s});break;case"v":s+=p[0],r.push({x:i,y:s});break;case"C":{const m=ix(i,s,p[0],p[1],p[2],p[3],p[4],p[5],t);r.push(...m.slice(1)),i=p[4],s=p[5]}break;case"c":{const m=ix(i,s,i+p[0],s+p[1],i+p[2],s+p[3],i+p[4],s+p[5],t);r.push(...m.slice(1)),i+=p[4],s+=p[5]}break;case"Q":{const m=SS(i,s,p[0],p[1],p[2],p[3],t);r.push(...m.slice(1)),i=p[2],s=p[3]}break;case"q":{const m=SS(i,s,i+p[0],s+p[1],i+p[2],s+p[3],t);r.push(...m.slice(1)),i+=p[2],s+=p[3]}break;case"A":{const m=CS(i,s,p[0],p[1],p[2],p[3],p[4],p[5],p[6],t);r.push(...m.slice(1)),i=p[5],s=p[6]}break;case"a":{const m=i+p[5],g=s+p[6],v=CS(i,s,p[0],p[1],p[2],p[3],p[4],m,g,t);r.push(...v.slice(1)),i=m,s=g}break;case"Z":case"z":r.length>0&&(r.push({x:a,y:o}),i=a,s=o);break}}return r.length>0&&n.push(r),n}function LB(e){const t=[],n=/([MmLlHhVvCcSsQqTtAaZz])([^MmLlHhVvCcSsQqTtAaZz]*)/g,r=[...e.matchAll(n)];for(const i of r){const s=i[1],o=i[2].trim().split(/[\s,]+/).filter(u=>u.length>0).map(Number);t.push({type:s,args:o})}return t}function ix(e,t,n,r,i,s,a,o,u){const h=[{x:e,y:t}];return sx(e,t,n,r,i,s,a,o,u,h),h.push({x:a,y:o}),h}function sx(e,t,n,r,i,s,a,o,u,h){const d=a-e,p=o-t;if(Math.sqrt(d*d+p*p)<.001)return;const g=ES(n,r,e,t,a,o),v=ES(i,s,e,t,a,o);if(g<u&&v<u)return;const w=(e+n)/2,C=(t+r)/2,x=(n+i)/2,k=(r+s)/2,A=(i+a)/2,j=(s+o)/2,I=(w+x)/2,E=(C+k)/2,U=(x+A)/2,D=(k+j)/2,R=(I+U)/2,X=(E+D)/2;sx(e,t,w,C,I,E,R,X,u,h),h.push({x:R,y:X}),sx(R,X,U,D,A,j,a,o,u,h)}function SS(e,t,n,r,i,s,a){const o=e+.6666666666666666*(n-e),u=t+2/3*(r-t),h=i+2/3*(n-i),d=s+2/3*(r-s);return ix(e,t,o,u,h,d,i,s,a)}function CS(e,t,n,r,i,s,a,o,u,h){if(n===0||r===0)return[{x:e,y:t},{x:o,y:u}];const d=IB(e,t,n,r,i,s,a,o,u);if(!d)return[{x:e,y:t},{x:o,y:u}];const{cx:p,cy:m,theta1:g,dtheta:v,rx:w,ry:C}=d,x=i*Math.PI/180,k=(w+C)/2,A=Math.abs(v)*k,j=Math.max(4,Math.ceil(A/(2*Math.sqrt(2*h*k)))),I=[];for(let E=0;E<=j;E++){const U=g+v*E/j,D=Math.cos(U),R=Math.sin(U),X=Math.cos(x),ce=Math.sin(x),ie=p+w*D*X-C*R*ce,ge=m+w*D*ce+C*R*X;I.push({x:ie,y:ge})}return I}function IB(e,t,n,r,i,s,a,o,u){const h=i*Math.PI/180,d=Math.cos(h),p=Math.sin(h),m=(e-o)/2,g=(t-u)/2,v=d*m+p*g,w=-p*m+d*g;n=Math.abs(n),r=Math.abs(r);const C=v*v/(n*n)+w*w/(r*r);if(C>1){const Me=Math.sqrt(C);n*=Me,r*=Me}const x=n*n,k=r*r,A=v*v,j=w*w;let I=(x*k-x*j-k*A)/(x*j+k*A);I<0&&(I=0);const E=(s!==a?1:-1)*Math.sqrt(I),U=E*(n*w)/r,D=E*-(r*v)/n,R=d*U-p*D+(e+o)/2,X=p*U+d*D+(t+u)/2,ce=(v-U)/n,ie=(w-D)/r,ge=(-v-U)/n,H=(-w-D)/r,ye=Math.sqrt(ce*ce+ie*ie),je=(ie>=0?1:-1)*Math.acos(ce/ye),ke=ce*ge+ie*H,Fe=ce*H-ie*ge;let xe=Math.acos(Math.max(-1,Math.min(1,ke/(ye*Math.sqrt(ge*ge+H*H)))));return Fe<0&&(xe=-xe),!a&&xe>0&&(xe-=2*Math.PI),a&&xe<0&&(xe+=2*Math.PI),{cx:R,cy:X,theta1:je,dtheta:xe,rx:n,ry:r}}function ES(e,t,n,r,i,s){const a=i-n,o=s-r,u=Math.sqrt(a*a+o*o);return u===0?Math.sqrt((e-n)**2+(t-r)**2):Math.abs((o*e-a*t+i*r-s*n)/u)}function $B(e,t,n,r,i=0,s=0){if(e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0,r=parseFloat(r)||0,i=parseFloat(i)||0,s=parseFloat(s)||i,i===0&&s===0)return[{x:e,y:t},{x:e+n,y:t},{x:e+n,y:t+r},{x:e,y:t+r},{x:e,y:t}];i=Math.min(i,n/2),s=Math.min(s,r/2);const a=[],o=8;for(let u=0;u<=o;u++){const h=-Math.PI/2+Math.PI/2*(u/o);a.push({x:e+n-i+i*Math.cos(h),y:t+s+s*Math.sin(h)})}for(let u=0;u<=o;u++){const h=0+Math.PI/2*(u/o);a.push({x:e+n-i+i*Math.cos(h),y:t+r-s+s*Math.sin(h)})}for(let u=0;u<=o;u++){const h=Math.PI/2+Math.PI/2*(u/o);a.push({x:e+i+i*Math.cos(h),y:t+r-s+s*Math.sin(h)})}for(let u=0;u<=o;u++){const h=Math.PI+Math.PI/2*(u/o);a.push({x:e+i+i*Math.cos(h),y:t+s+s*Math.sin(h)})}return a.push(a[0]),a}function DB(e,t,n,r=32){e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0;const i=[];for(let s=0;s<=r;s++){const a=2*Math.PI*s/r;i.push({x:e+n*Math.cos(a),y:t+n*Math.sin(a)})}return i}function zB(e,t,n,r,i=32){e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0,r=parseFloat(r)||0;const s=[];for(let a=0;a<=i;a++){const o=2*Math.PI*a/i;s.push({x:e+n*Math.cos(o),y:t+r*Math.sin(o)})}return s}function FB(e){if(!e)return[];const t=e.trim().split(/[\s,]+/).map(Number),n=[];for(let r=0;r<t.length;r+=2)r+1<t.length&&n.push({x:t[r],y:t[r+1]});return n.length>0&&n.push({x:n[0].x,y:n[0].y}),n}function BB(e){if(!e)return[];const t=e.trim().split(/[\s,]+/).map(Number),n=[];for(let r=0;r<t.length;r+=2)r+1<t.length&&n.push({x:t[r],y:t[r+1]});return n}function UB(e,t,n,r){return[{x:parseFloat(e)||0,y:parseFloat(t)||0},{x:parseFloat(n)||0,y:parseFloat(r)||0}]}function Jm(e,t){if(!t||!e.length)return e;const n=HB(t);return e.map(r=>VB(r,n))}function HB(e){let t=[1,0,0,1,0,0];const n=e.match(/\w+\([^)]+\)/g)||[];for(const r of n){const i=r.match(/(\w+)\(([^)]+)\)/);if(!i)continue;const s=i[1],a=i[2].split(/[\s,]+/).map(Number);let o;switch(s){case"translate":o=[1,0,0,1,a[0]||0,a[1]||0];break;case"scale":o=[a[0]||1,0,0,a[1]??a[0]??1,0,0];break;case"rotate":const u=(a[0]||0)*Math.PI/180,h=Math.cos(u),d=Math.sin(u);if(a.length===3){const p=a[1],m=a[2];o=[h,d,-d,h,p-h*p+d*m,m-d*p-h*m]}else o=[h,d,-d,h,0,0];break;case"matrix":for(o=a.slice(0,6);o.length<6;)o.push(0);break;default:continue}t=WB(t,o)}return t}function WB(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function VB(e,t){return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}let wp=[];const Cy={"#A5362F":"RH01","#E21F2F":"RH02","#609B63":"RH10","#3BB44A":"RH11","#006C55":"RH12","#0075BC":"RH20","#493D8C":"RH21","#47AFE3":"RH22","#039DC4":"RH23","#00A6A3":"RH26","#E4C4AA":"RH30","#E8E3D8":"RH31","#8B5F3C":"RH32","#E5A144":"RH40","#FFD833":"RH41","#F15B32":"RH50","#59595B":"RH60","#939598":"RH61","#D9D9D6":"RH65","#231F20":"RH70","#E8457E":"RH90"},Ey={RH01:1,RH02:1,RH10:3,RH11:3,RH12:3,RH20:5,RH21:6,RH22:4,RH23:4,RH26:4,RH30:52,RH31:7,RH32:38,RH40:2,RH41:2,RH50:30,RH60:8,RH61:8,RH65:9,RH70:250,RH90:6,OUTER_BORDER:2,NOTES:4,TEXT_OUTLINES:7,OTHER_COLORS:7};function GB(e,t){const{widthMm:n,lengthMm:r,designName:i="TPV Design",seed:s,motifs:a}=t;wp=[];const o=new RB,u=XB(e),h=n/u.width,d=r/u.height,p=new Map,m=e.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line");let g=0,v=0,w=0;for(const x of m){const k=x.getAttribute("display"),A=x.getAttribute("visibility");if(k==="none"||A==="hidden")continue;const j=x.getAttribute("class")||"";if(j.includes("handle")||j.includes("selection"))continue;const I=pN(x);if(!I||I==="none"||I==="transparent"){v++;continue}const U=mN(I)||"OTHER_COLORS";p.has(U)||p.set(U,[]);let D;try{D=gN(x)}catch(ge){console.warn("[DXF] Error converting element:",ge),w++;continue}if(!D||D.length===0){w++;continue}const R=fN(x),ce=(R?Jm(D,R):D).filter(ge=>isFinite(ge.x)&&isFinite(ge.y)&&!isNaN(ge.x)&&!isNaN(ge.y));if(ce.length<2){w++;continue}const ie=ce.map(ge=>({x:ge.x*h,y:r-ge.y*d}));p.get(U).push(ie),g++}const C=e.querySelectorAll("text");if(C.length>0){wp.push(`${C.length} text element(s) were converted to outlines. Edit text in CAD if needed.`);for(const x of C)try{const k=qB(x,h,d,r);k&&(p.has("TEXT_OUTLINES")||p.set("TEXT_OUTLINES",[]),p.get("TEXT_OUTLINES").push(k),g++)}catch(k){console.warn("[DXF] Error converting text:",k)}}if(a&&Object.keys(a).length>0){let x=0,k=0;for(const[A,j]of Object.entries(a)){if(!j.svgContent){k++;continue}try{const I=YB(j,h,d,r);for(const{layerName:E,vertices:U}of I)p.has(E)||p.set(E,[]),p.get(E).push(U),g++;x++}catch(I){console.warn(`[DXF] Error processing motif ${A}:`,I),k++}}x>0&&console.log(`[DXF] Processed ${x} motif(s)`),k>0&&wp.push(`${k} motif(s) could not be fully exported due to missing or invalid SVG content.`)}for(const[x,k]of p){const A=Ey[x]||7;try{o.addLayer(x,A,"CONTINUOUS"),o.setActiveLayer(x)}catch(j){console.warn(`[DXF] Error creating layer ${x}:`,j);continue}for(const j of k)if(j.length>=2)try{const I=j.length>2&&Math.abs(j[0].x-j[j.length-1].x)<.01&&Math.abs(j[0].y-j[j.length-1].y)<.01,E=j.map(D=>[D.x,D.y]);I&&E.length>1&&E.pop();const U=E.filter(D=>isFinite(D[0])&&isFinite(D[1])&&!isNaN(D[0])&&!isNaN(D[1]));U.length>=2&&o.drawPolyline(U,I)}catch(I){console.warn("[DXF] Error drawing polyline:",I)}}try{o.addLayer("OUTER_BORDER",Ey.OUTER_BORDER,"CONTINUOUS"),o.setActiveLayer("OUTER_BORDER"),o.drawPolyline([[0,0],[n,0],[n,r],[0,r]],!0)}catch(x){console.warn("[DXF] Error adding border:",x)}try{o.addLayer("NOTES",Ey.NOTES,"CONTINUOUS"),o.setActiveLayer("NOTES");const x=[`Project: ${i}`,`Size: ${(n/1e3).toFixed(2)}m x ${(r/1e3).toFixed(2)}m`,`Generated: ${new Date().toISOString().split("T")[0]}`,s?`Seed: ${s}`:null,"TPV Studio | rosehilltpv.com"].filter(Boolean).join("\\P");o.drawText(10,-50,100,0,x)}catch(x){console.warn("[DXF] Error adding notes:",x)}return console.log(`[DXF] Export complete: ${g} elements processed, ${v} transparent skipped, ${w} invalid skipped`),{dxfContent:o.toDxfString(),warnings:wp}}function fN(e){const t=[];let n=e;for(;n&&n.getAttribute;){const r=n.getAttribute("transform");r&&t.unshift(r),n=n.parentElement}return t.length>0?t.join(" "):null}function qB(e,t,n,r){try{const i=e.getBBox?e.getBBox():null;if(i&&i.width>0&&i.height>0){const s=fN(e);let a=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height},{x:i.x,y:i.y}];return s&&(a=Jm(a,s)),a.map(o=>({x:o.x*t,y:r-o.y*n}))}}catch(i){console.warn("[DXF] Could not get text bounds:",i)}return null}function YB(e,t,n,r){const i=[],{svgContent:s,position:a,rotation:o,scale:u,originalWidth_mm:h,originalHeight_mm:d}=e,g=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("svg");if(!g)return console.warn("[DXF] Could not parse motif SVG"),i;const v=g.getAttribute("viewBox");let w={width:100,height:100};if(v){const D=v.split(/\s+/).map(Number);D.length>=4&&(w={width:D[2],height:D[3]})}const C=(h||1e3)*(u||1),x=(d||1e3)*(u||1),k=C/w.width,A=x/w.height,j=C/2,I=x/2,E=`translate(${a.x}, ${a.y}) rotate(${o||0}, ${j}, ${I})`,U=g.querySelectorAll("path, rect, circle, ellipse, polygon, polyline");for(const D of U){const R=D.getAttribute("display"),X=D.getAttribute("visibility");if(R==="none"||X==="hidden")continue;const ce=pN(D);if(!ce||ce==="none"||ce==="transparent")continue;const ge=mN(ce)||"OTHER_COLORS";let H;try{H=gN(D)}catch{continue}if(!H||H.length===0)continue;const ye=D.getAttribute("transform");ye&&(H=Jm(H,ye)),H=H.map(Fe=>({x:Fe.x*k,y:Fe.y*A})),H=Jm(H,E);const je=H.filter(Fe=>isFinite(Fe.x)&&isFinite(Fe.y)&&!isNaN(Fe.x)&&!isNaN(Fe.y));if(je.length<2)continue;const ke=je.map(Fe=>({x:Fe.x*t,y:r-Fe.y*n}));i.push({layerName:ge,vertices:ke})}return i}function XB(e){const t=e.getAttribute("viewBox");if(t){const[i,s,a,o]=t.split(/\s+/).map(Number);return{minX:i,minY:s,width:a,height:o}}const n=parseFloat(e.getAttribute("width"))||1e3,r=parseFloat(e.getAttribute("height"))||1e3;return{minX:0,minY:0,width:n,height:r}}function pN(e){const t=e.getAttribute("style");if(t){const r=t.match(/fill:\s*([^;]+)/i);if(r)return TS(r[1].trim())}const n=e.getAttribute("fill");return n?TS(n):"#000000"}function TS(e){if(!e)return null;if(e.startsWith("#"))return e.length===4?"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]:e.toUpperCase();const t=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);if(t){const n=parseInt(t[1]).toString(16).padStart(2,"0"),r=parseInt(t[2]).toString(16).padStart(2,"0"),i=parseInt(t[3]).toString(16).padStart(2,"0");return`#${n}${r}${i}`.toUpperCase()}return e}function mN(e){if(!e)return null;const t=e.toUpperCase();if(Cy[t])return Cy[t];let n=null,r=1/0;const i=jS(t);if(!i)return null;for(const[s,a]of Object.entries(Cy)){const o=jS(s);if(!o)continue;const u=Math.sqrt(Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));u<r&&(r=u,n=a)}return r<=50?n:null}function jS(e){if(!e||!e.startsWith("#"))return null;const t=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function gN(e){switch(e.tagName.toLowerCase()){case"path":const n=e.getAttribute("d"),r=MB(n,2);return r.length>0?r[0]:[];case"rect":return $B(e.getAttribute("x"),e.getAttribute("y"),e.getAttribute("width"),e.getAttribute("height"),e.getAttribute("rx"),e.getAttribute("ry"));case"circle":return DB(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("r"),32);case"ellipse":return zB(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("rx"),e.getAttribute("ry"),32);case"polygon":return FB(e.getAttribute("points"));case"polyline":return BB(e.getAttribute("points"));case"line":return UB(e.getAttribute("x1"),e.getAttribute("y1"),e.getAttribute("x2"),e.getAttribute("y2"));default:return[]}}function KB(e,t="design.dxf"){const n=new Blob([e],{type:"application/dxf"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}function ZB(e){const t=e.cloneNode(!0),n=[".court-canvas__selection-outline",".transform-handles",".track-resize-handles",'[class*="selection"]','[class*="handle"]',"[stroke-dasharray]"];for(const r of n)t.querySelectorAll(r).forEach(i=>i.remove());return t}async function QB(e){const t=Object.values(e||{});return t.length===0?[]:(await Promise.all(t.map(async r=>{try{const i=await wf(r.sourceDesignId),s=(i==null?void 0:i.design)||i;if(!s)return console.warn(`[EXPORT] Could not fetch design for motif ${r.id}`),null;console.log("[EXPORT] Loaded design for motif:",s.name),console.log("[EXPORT] Design has solid_recipes:",!!s.solid_recipes),console.log("[EXPORT] Design has blend_recipes:",!!s.blend_recipes);const a=r.scale||1,o=r.originalWidth_mm*a/1e3,u=r.originalHeight_mm*a/1e3,h=o*u,d=r.viewMode||"solid",p=d==="blend"?s.blend_recipes:s.solid_recipes;return console.log(`[EXPORT] Using ${d} recipes:`,(p==null?void 0:p.length)||0,"recipes"),{id:r.id,name:r.customName||r.sourceDesignName||s.name||"Motif",areaM2:h,viewMode:d,widthM:o,heightM:u,recipes:p||[]}}catch(i){return console.error(`[EXPORT] Error processing motif ${r.id}:`,i),null}}))).filter(Boolean)}function AS({svgRef:e}){const[t,n]=fe.useState(!1),[r,i]=fe.useState(null),s=fe.useRef(null),a=rn(j=>j.exportDesignData),o=rn(j=>j.surface),u=rn(j=>j.designName),h=rn(j=>j.motifs),d=rn(j=>j.shapes),p=rn(j=>j.texts),m=rn(j=>j.exclusionZones);fe.useEffect(()=>{const j=I=>{s.current&&!s.current.contains(I.target)&&n(!1)};return t&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[t]);const g=()=>e!=null&&e.current?e.current:document.querySelector(".court-canvas__svg"),v=async()=>{i("svg");try{const j=g();if(!j)throw new Error("Canvas not found");const I=a(),E=pw(j,I),U=Lh(I.name,"svg");L9(E,U)}catch(j){console.error("SVG export failed:",j),alert("Failed to export SVG: "+j.message)}finally{i(null),n(!1)}},w=async()=>{i("png");try{const j=g();if(!j)throw new Error("Canvas not found");const I=a(),E=Lh(I.name,"png");await I9(j,I,E,2)}catch(j){console.error("PNG export failed:",j),alert("Failed to export PNG: "+j.message)}finally{i(null),n(!1)}},C=async()=>{i("pdf"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const I=await xa.getSession();if(!(I!=null&&I.access_token))throw new Error("Authentication required for PDF export");const E=a(),U=E.name||"TPV Design";await M9();const D=j.cloneNode(!0);D.querySelectorAll('[class*="selected"], .transform-handles, .track-resize-handles, .court-canvas__selection-outline, [class*="selection"], [class*="handle"]').forEach(ye=>ye.remove()),D.setAttribute("xmlns","http://www.w3.org/2000/svg"),D.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),vS(D);const R=new XMLSerializer().serializeToString(D);console.log("[EXPORT] Courts in state:",Object.keys(E.courts).length),console.log("[EXPORT] SVG contains court elements:",R.includes("court-canvas__court")),console.log("[EXPORT] Generating PDF report via API...");const X=await QB(h);console.log("[EXPORT] Motifs for PDF:",X.length);const ce=await fetch("/api/export-sports-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.access_token}`},body:JSON.stringify({svgString:R,designName:U,surface:E.surface,courts:E.courts,tracks:E.tracks,shapes:d,texts:p,motifs:X,exclusionZones:m,dimensions:{widthMM:E.surface.width_mm,lengthMM:E.surface.length_mm}})});if(!ce.ok){const ye=await ce.json().catch(()=>({error:"Unknown error"}));throw new Error(ye.error||`Server error: ${ce.status}`)}const ie=await ce.blob(),ge=Lh(U,"pdf"),H=document.createElement("a");H.href=URL.createObjectURL(ie),H.download=ge,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(H.href),console.log("[EXPORT] PDF downloaded:",ge)}catch(j){console.error("PDF export failed:",j),alert("Failed to export PDF: "+j.message)}finally{i(null)}},x=async()=>{i("tiles"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const E=new XMLSerializer().serializeToString(j),U={width:o.width_mm,length:o.length_mm},D=u||"sports-surface",R=await cN(E,U,D),X=`${D.replace(/[^a-zA-Z0-9-_]/g,"-")}-tiles-1mx1m.zip`;hN(R,X),console.log("[EXPORT] Tiles ZIP downloaded:",X)}catch(j){console.error("Tiles export failed:",j),alert("Failed to export tiles: "+j.message)}finally{i(null)}},k=async()=>{i("dxf"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const I=a(),E=ZB(j),U=GB(E,{widthMm:I.surface.width_mm,lengthMm:I.surface.length_mm,designName:I.name||"Sports Surface",seed:I.seed,motifs:h}),D=Lh(I.name,"dxf");if(KB(U.dxfContent,D),console.log("[EXPORT] DXF downloaded:",D),U.warnings&&U.warnings.length>0){const R=`DXF Export Notes:

`+U.warnings.join(`

`);alert(R)}}catch(j){console.error("DXF export failed:",j),alert("Failed to export DXF: "+j.message)}finally{i(null)}},A=async()=>{i("canvas-pdf"),n(!1);try{const j=g();if(!j)throw new Error("Canvas not found");const I=await xa.getSession();if(!(I!=null&&I.access_token))throw new Error("Authentication required for PDF export");const E=a(),U=E.name||"TPV Design",D=j.cloneNode(!0);D.querySelectorAll('[class*="selected"], .transform-handles, .track-resize-handles, .court-canvas__selection-outline, [class*="selection"], [class*="handle"]').forEach(H=>H.remove()),D.setAttribute("xmlns","http://www.w3.org/2000/svg"),D.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),vS(D);const R=new XMLSerializer().serializeToString(D),X=await fetch("/api/export-canvas-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.access_token}`},body:JSON.stringify({svgString:R,designName:U,widthMm:E.surface.width_mm,lengthMm:E.surface.length_mm,designType:"sports"})});if(!X.ok){const H=await X.json().catch(()=>({error:"Unknown error"}));throw new Error(H.error||`Server error: ${X.status}`)}const ce=await X.blob(),ie=Lh(U,"pdf").replace(".pdf","-canvas.pdf"),ge=document.createElement("a");ge.href=URL.createObjectURL(ce),ge.download=ie,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(ge.href),console.log("[EXPORT] Canvas PDF downloaded:",ie)}catch(j){console.error("Canvas PDF export failed:",j),alert("Failed to export Canvas PDF: "+j.message)}finally{i(null)}};return c.jsxs("div",{className:"export-menu",ref:s,children:[(r==="pdf"||r==="canvas-pdf")&&c.jsx("div",{className:"export-loading-overlay",children:c.jsxs("div",{className:"export-loading-modal",children:[c.jsx("div",{className:"export-loading-spinner"}),c.jsx("div",{className:"export-loading-title",children:r==="pdf"?"Generating Materials Report...":"Generating Canvas PDF..."}),c.jsx("div",{className:"export-loading-subtitle",children:"This may take a moment for complex designs"})]})}),c.jsxs("button",{className:"sports-toolbar__btn-export",onClick:()=>n(!t),title:"Export Design",children:["Export",c.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:t?"M18 15l-6-6-6 6":"M6 9l6 6 6-6"})})]}),t&&c.jsxs("div",{className:"export-menu__dropdown",children:[c.jsxs("button",{className:"export-menu__item",onClick:v,disabled:r!==null,children:[c.jsx("span",{className:"export-menu__icon",children:""}),c.jsxs("div",{className:"export-menu__item-content",children:[c.jsx("span",{className:"export-menu__item-title",children:r==="svg"?"Exporting...":"Download SVG"}),c.jsx("span",{className:"export-menu__item-desc",children:"Vector format for CAD/printing"})]})]}),c.jsxs("button",{className:"export-menu__item",onClick:w,disabled:r!==null,children:[c.jsx("span",{className:"export-menu__icon",children:""}),c.jsxs("div",{className:"export-menu__item-content",children:[c.jsx("span",{className:"export-menu__item-title",children:r==="png"?"Exporting...":"Download PNG"}),c.jsx("span",{className:"export-menu__item-desc",children:"High-res image for presentations"})]})]}),c.jsxs("button",{className:"export-menu__item",onClick:x,disabled:r!==null,children:[c.jsx("span",{className:"export-menu__icon",children:""}),c.jsxs("div",{className:"export-menu__item-content",children:[c.jsx("span",{className:"export-menu__item-title",children:r==="tiles"?"Generating...":"Download Tiles ZIP"}),c.jsx("span",{className:"export-menu__item-desc",children:"1m1m SVG tiles for large-format printing"})]})]}),c.jsx("div",{className:"export-menu__divider"}),c.jsxs("button",{className:"export-menu__item",onClick:C,disabled:r!==null,children:[c.jsx("span",{className:"export-menu__icon",children:""}),c.jsxs("div",{className:"export-menu__item-content",children:[c.jsx("span",{className:"export-menu__item-title",children:r==="pdf"?"Generating...":"Materials Report (PDF)"}),c.jsx("span",{className:"export-menu__item-desc",children:"TPV quantities & specifications"})]})]}),c.jsxs("button",{className:"export-menu__item",onClick:A,disabled:r!==null,children:[c.jsx("span",{className:"export-menu__icon",children:""}),c.jsxs("div",{className:"export-menu__item-content",children:[c.jsx("span",{className:"export-menu__item-title",children:r==="canvas-pdf"?"Generating...":"Canvas PDF (1:100)"}),c.jsx("span",{className:"export-menu__item-desc",children:"Scaled design with dimensions"})]})]}),c.jsx("div",{className:"export-menu__divider"}),c.jsxs("button",{className:"export-menu__item",onClick:k,disabled:r!==null,children:[c.jsx("span",{className:"export-menu__icon",children:""}),c.jsxs("div",{className:"export-menu__item-content",children:[c.jsx("span",{className:"export-menu__item-title",children:r==="dxf"?"Exporting...":"Download DXF"}),c.jsx("span",{className:"export-menu__item-desc",children:"CAD format for AutoCAD/Rhino"})]})]})]})]})}function JB({isOpen:e,onClose:t}){if(!e)return null;const n=[{category:"Selection",items:[{keys:["Delete"],description:"Remove selected element"},{keys:["Escape"],description:"Deselect / exit group edit"}]},{category:"Edit",items:[{keys:["Ctrl","Z"],description:"Undo"},{keys:["Ctrl","Shift","Z"],description:"Redo"},{keys:["Ctrl","D"],description:"Duplicate selected"},{keys:["Ctrl","C"],description:"Copy selection"},{keys:["Ctrl","V"],description:"Paste"}]},{category:"Groups",items:[{keys:["Ctrl","G"],description:"Group selected elements"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group"}]},{category:"Move",items:[{keys:["Arrow Keys"],description:"Nudge element (10mm)"},{keys:["Shift","Arrow Keys"],description:"Large nudge (100mm)"}]},{category:"Layers",items:[{keys:["["],description:"Send backward"},{keys:["]"],description:"Bring forward"}]},{category:"View",items:[{keys:["G"],description:"Toggle snap to grid"},{keys:["?"],description:"Show this help"}]}],i=navigator.platform.toUpperCase().indexOf("MAC")>=0?"":"Ctrl";return c.jsx("div",{className:"keyboard-shortcuts-overlay",onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:c.jsxs("div",{className:"keyboard-shortcuts-modal",onClick:s=>s.stopPropagation(),style:{background:"#fff",borderRadius:"8px",padding:"24px",maxWidth:"480px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[c.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:600},children:"Keyboard Shortcuts"}),c.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"4px 8px",color:"#666"},"aria-label":"Close",children:""})]}),n.map(s=>c.jsxs("div",{style:{marginBottom:"20px"},children:[c.jsx("h3",{style:{fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",color:"#666",marginBottom:"8px",letterSpacing:"0.5px"},children:s.category}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.items.map((a,o)=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[c.jsx("span",{style:{color:"#333",fontSize:"0.9rem"},children:a.description}),c.jsx("div",{style:{display:"flex",gap:"4px"},children:a.keys.map((u,h)=>c.jsx("kbd",{style:{display:"inline-block",padding:"4px 8px",fontSize:"0.75rem",fontFamily:"system-ui, -apple-system, sans-serif",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",minWidth:"24px",textAlign:"center"},children:u==="Ctrl"?i:u},h))})]},o))})]},s.category)),c.jsxs("p",{style:{fontSize:"0.8rem",color:"#888",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #eee",marginBottom:0},children:["Press ",c.jsx("kbd",{style:{padding:"2px 6px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.75rem"},children:"?"})," at any time to show this help"]})]})})}class eU{async _getAuthHeaders(){const t=await xa.getSession(),n={"Content-Type":"application/json"};return t!=null&&t.access_token&&(n.Authorization=`Bearer ${t.access_token}`),n}async generateRecraft(t){const n={prompt:t.prompt,width_mm:t.widthMM||5e3,length_mm:t.lengthMM||5e3,max_colours:t.maxColours||6,seed:t.seed||null},r=await this._getAuthHeaders(),i=await fetch("/api/recraft-generate",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Recraft generation failed")}return i.json()}async vectorizeImage(t){const n={image_url:t.image_url,width_mm:t.width_mm||5e3,length_mm:t.length_mm||5e3,seed:t.seed||null},r=await this._getAuthHeaders(),i=await fetch("/api/recraft-vectorize",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Vectorization failed")}return i.json()}async processUploadedSVG(t){const n={svg_url:t.svg_url,width_mm:t.width_mm||5e3,length_mm:t.length_mm||5e3},r=await this._getAuthHeaders(),i=await fetch("/api/process-uploaded-svg",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"SVG processing failed")}return i.json()}async getRecraftStatus(t){const n=await this._getAuthHeaders(),r=await fetch(`/api/studio-job-status?jobId=${t}`,{headers:n});if(!r.ok){const i=await r.json();throw new Error(i.error||"Status fetch failed")}return r.json()}async waitForRecraftCompletion(t,n=null,r=2e3,i=null){return new Promise((s,a)=>{let o=null;i&&i.addEventListener("abort",()=>{o&&clearTimeout(o),a(new DOMException("Polling aborted","AbortError"))});const u=async()=>{var h,d;if(i!=null&&i.aborted){a(new DOMException("Polling aborted","AbortError"));return}try{const p=await this.getRecraftStatus(t);n&&n(p),p.status==="completed"?((h=p.result)==null?void 0:h.svg_url)?s(p):a(new Error("Job completed but no output received")):p.status==="failed"?(d=p.result)!=null&&d.svg_url?s(p):a(new Error(p.error||"Job failed")):(p.status==="retrying"||p.status==="pending"||p.status==="queued"||p.status,o=setTimeout(u,r))}catch(p){a(p)}};u()})}async matchColor(t,n=2){const r=await fetch("/api/match-color",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hex:t,max_components:n})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Color matching failed")}return r.json()}async generateDesignName(t){const n={prompt:t.prompt,colors:t.colors||[],dimensions:t.dimensions||{}},r=await this._getAuthHeaders(),i=await fetch("/api/generate-design-name",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Name generation failed")}return i.json()}async inspireSimpleCreateJob(t){const n={prompt:t.prompt,surface:{width_mm:t.lengthMM||5e3,height_mm:t.widthMM||5e3},max_colours:t.maxColours||6,try_simpler:t.trySimpler||!1};t.seed&&(n.seed=t.seed);const r=await fetch("/api/studio-inspire-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to start design generation. Please check your connection and try again.")}return r.json()}async inspireSimpleGetStatus(t){const n=await this._getAuthHeaders(),r=await fetch(`/api/studio-job-status?jobId=${t}`,{headers:n});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to check generation status. Please try again.")}return r.json()}async inspireSimpleWaitForCompletion(t,n=null,r=2e3){return new Promise((i,s)=>{const a=async()=>{var o;try{const u=await this.inspireSimpleGetStatus(t);n&&n(u),u.status==="completed"?((o=u.result)==null?void 0:o.final_url)?(console.log("[API] Job complete with JPG output, resolving"),i(u)):(console.log("[API] Job completed but no output received"),s(new Error("Job completed but no output received"))):u.status==="failed"?s(new Error(u.error||"Job failed")):setTimeout(a,r)}catch(u){s(u)}};a()})}async draftify(t){const n=await fetch(B2.DRAFTIFY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Unable to convert image to vector format. Please try a different image.")}return n.json()}async generateGeometric(t){const n={brief:t.prompt||t.brief,canvas:{width_mm:t.lengthMM||5e3,height_mm:t.widthMM||5e3},options:{mood:t.mood||"playful",composition:t.composition||"mixed",colorCount:t.maxColours||t.colorCount||5,seed:t.seed},validate:!0},r=await fetch(B2.GEOMETRIC_GENERATE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to generate design. Please try a different prompt or settings.")}return r.json()}}const Pl=new eU;function tU({recipes:e,onClose:t}){if(!e||e.length===0)return c.jsxs("div",{className:"solid-summary-empty",children:[c.jsx("p",{children:"No colours in design."}),c.jsx("button",{onClick:t,className:"close-button",children:"Close"})]});const n=e.reduce((r,i)=>r+i.targetColor.areaPct,0);return c.jsxs("div",{className:"solid-color-summary",children:[c.jsxs("div",{className:"summary-header",children:[c.jsx("h3",{children:"TPV Colours Used"}),c.jsx("button",{onClick:t,className:"close-button-icon",children:""})]}),c.jsx("div",{className:"summary-info",children:c.jsxs("p",{className:"summary-description",children:["This design uses ",c.jsx("strong",{children:e.length})," pure TPV colour",e.length!==1?"s":""," (no blending required)"]})}),c.jsx("div",{className:"colors-list",children:e.map((r,i)=>{const s=r.chosenRecipe.components[0],a=r.targetColor.areaPct;return c.jsxs("div",{className:"color-item",children:[c.jsx("div",{className:"color-swatch",style:{backgroundColor:r.blendColor.hex},title:`${s.code} - ${s.name}`}),c.jsxs("div",{className:"color-details",children:[c.jsxs("div",{className:"color-primary",children:[c.jsx("span",{className:"color-code",children:s.code}),c.jsx("span",{className:"color-name",children:s.name})]}),c.jsxs("div",{className:"color-secondary",children:[c.jsx("span",{className:"hex-value",children:r.blendColor.hex}),c.jsxs("span",{className:"coverage-badge",children:[a.toFixed(1),"%"]})]})]})]},i)})}),c.jsxs("div",{className:"summary-footer",children:[c.jsxs("div",{className:"footer-stat",children:[c.jsx("span",{className:"stat-label",children:"Total Coverage:"}),c.jsxs("span",{className:"stat-value",children:[n.toFixed(1),"%"]})]}),c.jsxs("div",{className:"footer-stat",children:[c.jsx("span",{className:"stat-label",children:"TPV Colours:"}),c.jsx("span",{className:"stat-value",children:e.length})]})]}),c.jsx("style",{jsx:!0,children:`
        .solid-color-summary {
          background: #fff;
          border-radius: 8px;
          border: 1px solid #ddd;
          padding: 2rem;
          max-width: 800px;
          margin: 2rem auto;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .solid-summary-empty {
          background: #fff;
          border-radius: 8px;
          padding: 2rem;
          text-align: center;
        }

        .summary-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          padding-bottom: 1rem;
          border-bottom: 2px solid #1a365d;
        }

        .summary-header h3 {
          margin: 0;
          color: #1a365d;
          font-size: 1.8rem;
        }

        .close-button-icon {
          background: none;
          border: none;
          font-size: 2rem;
          color: #666;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          line-height: 1;
          transition: color 0.2s;
        }

        .close-button-icon:hover {
          color: #333;
        }

        .summary-info {
          background: #f9f9f9;
          padding: 1rem;
          border-radius: 6px;
          margin-bottom: 1.5rem;
        }

        .summary-description {
          margin: 0;
          color: #333;
          font-size: 1rem;
          line-height: 1.5;
        }

        /* Colors List */
        .colors-list {
          display: flex;
          flex-direction: column;
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        .color-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
          border: 1px solid #e0e0e0;
          transition: all 0.2s;
        }

        .color-item:hover {
          border-color: #ff6b35;
          box-shadow: 0 2px 8px rgba(255, 107, 53, 0.15);
        }

        .color-swatch {
          width: 60px;
          height: 60px;
          border-radius: 8px;
          border: 2px solid #ddd;
          flex-shrink: 0;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .color-details {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .color-primary {
          display: flex;
          align-items: baseline;
          gap: 0.5rem;
        }

        .color-code {
          font-family: 'Courier New', monospace;
          font-weight: 700;
          font-size: 1.2rem;
          color: #1a365d;
        }

        .color-name {
          font-size: 1.1rem;
          color: #333;
          font-weight: 500;
        }

        .color-secondary {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .hex-value {
          font-family: 'Courier New', monospace;
          font-size: 0.9rem;
          color: #666;
        }

        .coverage-badge {
          background: #ff6b35;
          color: white;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-weight: 600;
          font-size: 0.9rem;
        }

        /* Summary Footer */
        .summary-footer {
          display: flex;
          justify-content: space-around;
          padding: 1.5rem;
          background: #f9f9f9;
          border-radius: 6px;
          border: 2px solid #ff6b35;
        }

        .footer-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
        }

        .stat-label {
          font-size: 0.9rem;
          color: #666;
          font-weight: 500;
        }

        .stat-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: #1a365d;
        }

        .close-button {
          padding: 0.75rem 1.5rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 4px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .close-button:hover {
          background: #e55a25;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
          .solid-color-summary {
            padding: 1rem;
          }

          .summary-header h3 {
            font-size: 1.4rem;
          }

          .color-item {
            flex-direction: column;
            align-items: flex-start;
          }

          .color-swatch {
            width: 100%;
            height: 50px;
          }

          .summary-footer {
            flex-direction: column;
            gap: 1rem;
          }
        }
      `})]})}function gw({content:e,position:t="top"}){const[n,r]=fe.useState(!1);return c.jsxs("div",{className:"help-icon-container",children:[c.jsx("button",{className:"help-icon",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:i=>{i.preventDefault(),i.stopPropagation(),r(!n)},type:"button","aria-label":"Help",children:"?"}),n&&c.jsx("div",{className:`help-tooltip help-tooltip-${t}`,children:e}),c.jsx("style",{children:`
        .help-icon-container {
          position: relative;
          display: inline-block;
        }

        .help-icon {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 18px;
          height: 18px;
          border-radius: 50%;
          background: #6b7280;
          color: white;
          border: none;
          font-size: 12px;
          font-weight: 600;
          cursor: help;
          transition: all 0.2s;
          padding: 0;
          line-height: 1;
        }

        .help-icon:hover {
          background: #374151;
          transform: scale(1.1);
        }

        .help-tooltip {
          position: absolute;
          z-index: 1000;
          background: #1f2937;
          color: white;
          padding: 0.75rem 1rem;
          border-radius: 6px;
          font-size: 0.875rem;
          line-height: 1.5;
          max-width: 300px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          pointer-events: none;
          white-space: normal;
        }

        .help-tooltip-top {
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
        }

        .help-tooltip-top::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          border: 6px solid transparent;
          border-top-color: #1f2937;
        }

        .help-tooltip-bottom {
          top: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
        }

        .help-tooltip-bottom::after {
          content: '';
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          border: 6px solid transparent;
          border-bottom-color: #1f2937;
        }

        .help-tooltip-right {
          left: calc(100% + 8px);
          top: 50%;
          transform: translateY(-50%);
        }

        .help-tooltip-right::after {
          content: '';
          position: absolute;
          right: 100%;
          top: 50%;
          transform: translateY(-50%);
          border: 6px solid transparent;
          border-right-color: #1f2937;
        }

        .help-tooltip-left {
          right: calc(100% + 8px);
          top: 50%;
          transform: translateY(-50%);
        }

        .help-tooltip-left::after {
          content: '';
          position: absolute;
          left: 100%;
          top: 50%;
          transform: translateY(-50%);
          border: 6px solid transparent;
          border-left-color: #1f2937;
        }

        @media (max-width: 768px) {
          .help-tooltip {
            max-width: 250px;
            font-size: 0.8125rem;
            padding: 0.625rem 0.875rem;
          }
        }
      `})]})}function nU({recipes:e,mode:t="blend",onColorClick:n,selectedColor:r,editedColors:i,onResetAll:s}){if(!e||e.length===0)return null;const a=m=>!i||i.size===0?!1:i.has(m.originalColor.hex.toLowerCase()),o=m=>{if(!i||i.size===0)return!1;const g=i.get(m.originalColor.hex.toLowerCase());return(g==null?void 0:g.newHex)==="transparent"||(g==null?void 0:g.newHex)==="none"},u=i&&i.size>0,h=m=>{const g=m.toLowerCase();return pi.find(v=>v.hex.toLowerCase()===g)},d=m=>{if(o(m))return"Transparent";if(t==="solid"){const g=h(m.blendColor.hex);if(g)return`${g.code} - ${g.name}`}return m.blendColor.hex},p=m=>{if(!r)return!1;const g=r.blendHex||r.hex;return m.blendColor.hex===g||m.targetColor.hex===g};return c.jsxs("div",{className:"color-legend",children:[c.jsxs("div",{className:"legend-header",children:[c.jsxs("div",{className:"legend-header-left",children:[c.jsx("span",{className:"legend-title",children:"Colours"}),c.jsx(gw,{content:"Click any colour to edit all instances of that colour across the design. Changes apply to every region using that colour.",position:"right"}),n&&c.jsx("span",{className:"edit-hint",children:"(click to edit)"})]}),u&&s&&c.jsx("button",{onClick:s,className:"reset-all-btn",title:"Reset all colours to original",children:"Reset All"})]}),c.jsx("div",{className:"legend-colors",children:e.map((m,g)=>c.jsxs("div",{className:`color-item ${n?"clickable":""} ${p(m)?"selected":""}`,onClick:()=>{n&&n({hex:m.targetColor.hex,originalHex:m.originalColor.hex,blendHex:m.blendColor.hex,areaPct:m.targetColor.areaPct,recipe:m.chosenRecipe,targetColor:m.targetColor,isAddedFromEdit:m.isAddedFromEdit||!1,chosenRecipe:m.chosenRecipe},"palette")},title:n?"Click to edit this colour":"",children:[c.jsxs("div",{className:"color-swatch-wrapper",children:[c.jsx("div",{className:`color-swatch ${o(m)?"transparent-swatch":""}`,style:o(m)?{}:{backgroundColor:m.blendColor.hex}}),o(m)&&c.jsx("span",{className:"transparent-indicator",title:"Made transparent",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",width:"14",height:"14",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"20"})]})}),a(m)&&!o(m)&&c.jsx("span",{className:"edit-indicator",title:"Colour has been modified",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:c.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})})]}),c.jsxs("div",{className:"color-info",children:[c.jsx("span",{className:t==="solid"?"tpv-label":"hex-value",children:d(m)}),c.jsxs("span",{className:"coverage",children:[m.targetColor.areaPct.toFixed(1),"%"]})]})]},g))}),c.jsx("style",{jsx:!0,children:`
        .color-legend {
          background: rgba(255, 255, 255, 0.95);
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1rem;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          width: 100%;
        }

        .legend-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 0.5rem;
          margin-bottom: 0.75rem;
          padding-bottom: 0.5rem;
          border-bottom: 1px solid #e0e0e0;
        }

        .legend-header-left {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .legend-title {
          font-weight: 600;
          color: #1a365d;
          font-size: 0.95rem;
        }

        .edit-hint {
          font-size: 0.75rem;
          color: #ff6b35;
          font-weight: normal;
        }

        .reset-all-btn {
          padding: 0.25rem 0.5rem;
          font-size: 0.7rem;
          font-weight: 600;
          color: #ff6b35;
          background: #fff5f0;
          border: 1px solid #ff6b35;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .reset-all-btn:hover {
          background: #ff6b35;
          color: white;
        }

        .legend-colors {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
          gap: 0.75rem;
        }

        .color-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.5rem;
          border-radius: 4px;
          background: white;
          border: 1px solid #e8e8e8;
          transition: all 0.2s;
        }

        .color-item.clickable {
          cursor: pointer;
        }

        .color-item.clickable:hover {
          border-color: #ff6b35;
          background: #fff9f7;
          box-shadow: 0 2px 4px rgba(255, 107, 53, 0.15);
          transform: translateY(-2px);
        }

        .color-item.selected {
          border-color: #ff6b35;
          border-width: 2px;
          background: #fff9f7;
          box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
          transform: translateY(-2px);
        }

        .color-swatch-wrapper {
          position: relative;
          flex-shrink: 0;
        }

        .color-swatch {
          width: 40px;
          height: 40px;
          border-radius: 4px;
          border: 2px solid #ddd;
        }

        .color-swatch.transparent-swatch {
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
          border-color: #999;
        }

        .transparent-indicator {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 18px;
          height: 18px;
          background: #6b7280;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .transparent-indicator svg {
          width: 12px;
          height: 12px;
        }

        .edit-indicator {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 16px;
          height: 16px;
          background: #ff6b35;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .edit-indicator svg {
          width: 10px;
          height: 10px;
        }

        .color-info {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          font-size: 0.85rem;
        }

        .hex-value {
          font-family: 'Courier New', monospace;
          font-weight: 600;
          color: #333;
        }

        .tpv-label {
          font-weight: 600;
          color: #1a365d;
          font-size: 0.9rem;
        }

        .coverage {
          color: #666;
          font-size: 0.8rem;
        }

        /* Mobile - compact horizontal grid of swatches */
        @media (max-width: 768px) {
          .color-legend {
            padding: 0.75rem;
          }

          .legend-header {
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
          }

          .legend-title {
            font-size: 0.85rem;
          }

          .edit-hint {
            font-size: 0.7rem;
          }

          .reset-all-btn {
            font-size: 0.65rem;
            padding: 0.2rem 0.4rem;
            min-height: 28px;
          }

          /* Horizontal scrolling grid of swatches */
          .legend-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: flex-start;
          }

          .color-item {
            flex-direction: column;
            padding: 0.25rem;
            border-radius: 6px;
            width: auto;
            min-width: 44px;
          }

          /* Hide text info on mobile - just show swatches */
          .color-info {
            display: none;
          }

          .color-swatch {
            width: 44px;
            height: 44px;
            border-radius: 6px;
          }

          .color-item.selected {
            transform: none;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.4);
          }

          .color-item.clickable:hover {
            transform: none;
          }

          .edit-indicator {
            top: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
          }

          .edit-indicator svg {
            width: 8px;
            height: 8px;
          }
        }

        @media (max-width: 480px) {
          .color-legend {
            padding: 0.5rem;
          }

          .legend-colors {
            gap: 0.35rem;
          }

          .color-swatch {
            width: 40px;
            height: 40px;
          }

          .color-item {
            min-width: 40px;
          }
        }
      `})]})}const rU=[{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH70",name:"Black",hex:"#231F20"}];function iU({blendSvgUrl:e,recipes:t,mode:n="blend",onColorClick:r,onRegionClick:i,onEyedropperCancel:s,onMakeTransparent:a,onTrueCutout:o,isCutoutProcessing:u=!1,cutoutError:h=null,onSelectTPVColor:d,selectedColor:p,editedColors:m,onResetAll:g,designName:v="",onNameChange:w,isNameLoading:C=!1,onInSituClick:x,eyedropperActive:k=!1,eyedropperRegion:A=null,onRegionUndo:j,onRegionRedo:I,canUndo:E=!1,canRedo:U=!1,regionOverridesCount:D=0}){const[R,X]=fe.useState(null),[ce,ie]=fe.useState(null),ge=fe.useRef(null),H=fe.useRef(null);fe.useRef(null);const[ye,je]=fe.useState(1),[ke,Fe]=fe.useState({x:0,y:0}),[xe,Me]=fe.useState(!1),[_e,Ne]=fe.useState({x:0,y:0}),st=fe.useRef(null),nt=fe.useRef(!1),[Ue,ct]=fe.useState(()=>localStorage.getItem("tpv_color_editing_tip_dismissed")!=="true");fe.useEffect(()=>{if(!k||!s)return;const ve=me=>{me.key==="Escape"&&(me.stopImmediatePropagation(),me.preventDefault(),s())};return window.addEventListener("keydown",ve,!0),()=>window.removeEventListener("keydown",ve,!0)},[k,s]);const he=()=>{ct(!1),localStorage.setItem("tpv_color_editing_tip_dismissed","true")};fe.useEffect(()=>{if(!e){ie(null);return}(async()=>{try{const Le=await(await fetch(e)).text();ie(Le);const Xe=Le.includes("data-region-id"),De=(Le.match(/data-region-id/g)||[]).length;console.log("[SVGPreview] Fetched inline SVG content - length:",Le.length,"hasRegionTags:",Xe,"regionCount:",De)}catch(me){console.error("[SVGPreview] Failed to fetch SVG content:",me),ie(null)}})()},[e]);const oe=fe.useMemo(()=>{if(!ce)return null;console.log("[SVGPreview] Sanitizing SVG content...");const ve=hw(ce);return ve?(console.log("[SVGPreview] SVG sanitization complete - length:",ve.length),console.log("[SVGPreview] Sanitized content preview:",ve.substring(0,200)),ve.includes("<svg")?ve.replace(/<svg([^>]*)>/i,(Le,Xe)=>(Xe.includes("width=")||(Xe+=' width="100%"'),Xe.includes("height=")||(Xe+=' height="100%"'),`<svg${Xe}>`)):(console.error("[SVGPreview] Sanitized SVG does not contain <svg> tag!"),null)):(console.error("[SVGPreview] SVG sanitization failed - content rejected"),null)},[ce]);fe.useEffect(()=>{if(!p||!e){X(null);return}(async()=>{try{console.log("[SVGPreview] Creating highlight for color:",p);const me=new Image;me.crossOrigin="anonymous";const Le=new Promise(($,F)=>{me.onload=()=>{console.log("[SVGPreview] Image loaded:",me.width,"x",me.height),$()},me.onerror=q=>{console.error("[SVGPreview] Image load error:",q),F(q)}});me.src=e,await Le;const Xe=document.createElement("canvas");Xe.width=me.naturalWidth||me.width||1e3,Xe.height=me.naturalHeight||me.height||1e3;const De=Xe.getContext("2d");De.drawImage(me,0,0);const f=De.getImageData(0,0,Xe.width,Xe.height).data,b=p.hex,_=We(b);console.log("[SVGPreview] Target color:",b,_);const S=new Set;let P=0;for(let $=0;$<Xe.height;$++)for(let F=0;F<Xe.width;F++){const q=($*Xe.width+F)*4,Q=f[q],K=f[q+1],W=f[q+2];f[q+3]>0&&Oe(Q,K,W,_)&&(S.add(`${F},${$}`),P++)}if(console.log("[SVGPreview] Matched pixels:",P),P===0){console.warn("[SVGPreview] No pixels matched the target color"),X(null);return}const T=De.createImageData(Xe.width,Xe.height);for(let $=0;$<Xe.height;$++)for(let F=0;F<Xe.width;F++){const q=($*Xe.width+F)*4;S.has(`${F},${$}`)&&(!S.has(`${F-1},${$}`)||!S.has(`${F+1},${$}`)||!S.has(`${F},${$-1}`)||!S.has(`${F},${$+1}`))&&(T.data[q]=255,T.data[q+1]=0,T.data[q+2]=255,T.data[q+3]=255)}De.clearRect(0,0,Xe.width,Xe.height),De.putImageData(T,0,0);const N=Xe.toDataURL();console.log("[SVGPreview] Highlight mask created"),X(N)}catch(me){console.error("[SVGPreview] Failed to create highlight mask:",me),X(null)}})()},[p,e]);const We=ve=>{const me=ve.replace("#","");return{r:parseInt(me.substring(0,2),16),g:parseInt(me.substring(2,4),16),b:parseInt(me.substring(4,6),16)}},Oe=(ve,me,Le,Xe)=>Math.abs(ve-Xe.r)<=50&&Math.abs(me-Xe.g)<=50&&Math.abs(Le-Xe.b)<=50,ht=async(ve,me)=>{try{if(!ge.current||!e)return null;const Le=new Image;Le.crossOrigin="anonymous";const Xe=new Promise(($,F)=>{Le.onload=$,Le.onerror=F});Le.src=e,await Xe;const De=document.createElement("canvas");De.width=Le.naturalWidth||Le.width||1e3,De.height=Le.naturalHeight||Le.height||1e3;const l=De.getContext("2d");l.drawImage(Le,0,0);const f=ge.current.getBoundingClientRect(),b=De.width/f.width,_=De.height/f.height,S=Math.floor(ve*b),P=Math.floor(me*_),N=l.getImageData(S,P,1,1).data;return{r:N[0],g:N[1],b:N[2],a:N[3]}}catch(Le){return console.error("[SVGPreview] Failed to get color at position:",Le),null}},Pt=()=>{je(ve=>Math.min(ve*1.5,5))},St=()=>{je(ve=>Math.max(ve/1.5,.5))},G=()=>{je(1),Fe({x:0,y:0})},qe=ve=>{ve.preventDefault();const me=ve.deltaY*-.001;je(Le=>Math.min(Math.max(Le+me,.5),5))},ae=ve=>{ve.button===0&&(Me(!0),Ne({x:ve.clientX-ke.x,y:ve.clientY-ke.y}),nt.current=!1)},M=ve=>{if(!xe)return;const me=Math.abs(ve.clientX-(_e.x+ke.x)),Le=Math.abs(ve.clientY-(_e.y+ke.y));(me>5||Le>5)&&(nt.current=!0),Fe({x:ve.clientX-_e.x,y:ve.clientY-_e.y})},L=()=>{Me(!1)};fe.useEffect(()=>{if(xe)return document.addEventListener("mousemove",M),document.addEventListener("mouseup",L),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)}},[xe,_e,ke]);const J=ve=>{let me=ve;for(;me&&me!==H.current;){if(me.hasAttribute&&me.hasAttribute("data-region-id"))return me;me=me.parentElement}return null},pe=async ve=>{var b,_;if(nt.current){console.log("[SVGPreview] Click ignored - was dragging");return}if(console.log("[SVGPreview] Click detected - onRegionClick:",!!i,"inlineSvgContent:",!!ce,"target:",ve.target.tagName),i&&ce){console.log("[SVGPreview] Attempting region detection on target:",ve.target);const S=J(ve.target);if(console.log("[SVGPreview] Found region element:",S),S){const P=S.getAttribute("data-region-id"),T=S.getAttribute("fill")||((_=(b=S.getAttribute("style"))==null?void 0:b.match(/fill:\s*([^;]+)/))==null?void 0:_[1]);console.log("[SVGPreview] Region clicked:",P,"fill:",T),i({regionId:P,sourceColor:T,element:S});return}else console.log("[SVGPreview] No region element found from target")}else console.log("[SVGPreview] Region detection skipped - onRegionClick:",!!i,"inlineSvgContent:",!!ce);if(!r||!t||t.length===0)return;const me=ve.currentTarget.getBoundingClientRect(),Le=ve.clientX-me.left,Xe=ve.clientY-me.top;console.log("[SVGPreview] Clicked at:",Le,Xe);const De=await ht(Le,Xe);if(!De||De.a===0){console.log("[SVGPreview] Clicked on transparent area");return}console.log("[SVGPreview] Clicked color:",De);let l=null,f=1/0;for(const S of t){const P=S.targetColor.hex,T=We(P);if(Oe(De.r,De.g,De.b,T)){const N=Math.sqrt(Math.pow(De.r-T.r,2)+Math.pow(De.g-T.g,2)+Math.pow(De.b-T.b,2));N<f&&(f=N,l=S)}}l?(console.log("[SVGPreview] Matched recipe:",l.targetColor.hex),r({hex:l.targetColor.hex,originalHex:l.originalColor.hex,blendHex:l.blendColor.hex,areaPct:l.targetColor.areaPct,recipe:l.chosenRecipe,targetColor:l.targetColor,isAddedFromEdit:l.isAddedFromEdit||!1,chosenRecipe:l.chosenRecipe})):console.log("[SVGPreview] No matching recipe found for clicked color")};return e?c.jsxs("div",{className:"svg-preview",children:[c.jsxs("div",{className:"preview-header",children:[c.jsxs("div",{className:"design-name-container",children:[w?c.jsx("input",{type:"text",className:"design-name-input",value:v,onChange:ve=>w(ve.target.value),placeholder:C?"Generating name...":"Enter project name"}):c.jsx("h3",{children:v||"TPV Blend Design"}),C&&c.jsx("span",{className:"name-loading",children:"Generating..."})]}),p&&c.jsxs("span",{className:"editing-hint",children:["Editing: ",p.hex||p.blendHex]})]}),Ue&&r&&c.jsxs("div",{className:"color-editing-tip",children:[c.jsx("div",{className:"tip-icon",children:""}),c.jsxs("div",{className:"tip-content",children:[c.jsx("strong",{children:"Tip:"})," Click colours in the legend below to edit all instances, or click directly on the design to edit individual regions."]}),c.jsx("button",{onClick:he,className:"tip-close",title:"Dismiss tip",children:""})]}),c.jsxs("div",{className:"svg-display-container",children:[c.jsxs("div",{className:"svg-panel",children:[c.jsxs("div",{className:"zoom-controls",children:[c.jsx("button",{onClick:Pt,className:"zoom-btn",title:"Zoom In",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),c.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),c.jsx("path",{d:"m21 21-4.35-4.35"})]})}),c.jsx("button",{onClick:St,className:"zoom-btn",title:"Zoom Out",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),c.jsx("path",{d:"m21 21-4.35-4.35"})]})}),c.jsx("button",{onClick:G,className:"zoom-btn",title:"Reset View",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M1 4v6h6"}),c.jsx("path",{d:"M23 20v-6h-6"}),c.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}),c.jsxs("span",{className:"zoom-level",children:[Math.round(ye*100),"%"]})]}),D>0&&c.jsxs("div",{className:"undo-redo-controls",children:[c.jsx("button",{onClick:j,className:"undo-redo-btn",title:"Undo (Ctrl+Z)",disabled:!E,children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M3 7v6h6"}),c.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),c.jsx("button",{onClick:I,className:"undo-redo-btn",title:"Redo (Ctrl+Y)",disabled:!U,children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M21 7v6h-6"}),c.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})]})})]}),x&&c.jsxs("button",{onClick:x,className:"in-situ-btn",title:"Upload a photo of your installation site and see how this design will look in place with realistic perspective",children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("path",{d:"m21 15-5-5L5 21"})]}),c.jsx("span",{children:"Preview In-Situ"})]}),c.jsx("div",{ref:st,className:"svg-wrapper",onWheel:qe,children:c.jsxs("div",{className:"svg-image-container",onClick:pe,onMouseDown:ae,style:{transform:`translate(${ke.x}px, ${ke.y}px) scale(${ye})`,cursor:xe?"grabbing":ye>1?"grab":k?"crosshair":r?"pointer":"default"},children:[oe?c.jsx("div",{ref:H,className:"svg-inline-container",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:oe}}):c.jsx("img",{ref:ge,src:e,alt:"TPV blend design",className:"svg-image"}),R&&c.jsx("img",{src:R,alt:"Colour highlight",className:"svg-highlight-mask"})]})}),k&&A&&c.jsx("div",{className:"eyedropper-overlay",children:c.jsxs("div",{className:"eyedropper-content",children:[c.jsx("div",{className:"eyedropper-header",children:c.jsxs("div",{className:"eyedropper-color-indicator",children:[c.jsx("div",{className:"eyedropper-color-swatch",style:{backgroundColor:A.sourceColor}}),c.jsx("span",{children:"Click another area to copy its colour, or select a TPV colour:"})]})}),c.jsx("div",{className:"eyedropper-palette",children:c.jsx("div",{className:"palette-grid",children:rU.map(ve=>c.jsx("button",{className:"palette-swatch",style:{backgroundColor:ve.hex},onClick:me=>{me.stopPropagation(),d&&d({hex:ve.hex,code:ve.code,name:ve.name})},title:`${ve.name} (${ve.code})`},ve.code))})}),c.jsxs("div",{className:"eyedropper-actions",children:[c.jsxs("div",{className:"transparency-options",children:[c.jsxs("button",{className:"eyedropper-transparent",onClick:ve=>{ve.stopPropagation(),a&&a()},title:"Make region visually transparent (reversible, fast)",children:[c.jsx("span",{className:"transparent-icon",children:""}),"Transparent (Visual)"]}),o&&c.jsx("button",{className:"eyedropper-cutout",onClick:ve=>{ve.stopPropagation(),o()},disabled:u,title:"Remove geometry completely - fixes hidden shapes (slower, irreversible)",children:u?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"cutout-spinner"}),"Cutting..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"cutout-icon",children:""}),"True Cut-out"]})})]}),h&&c.jsx("div",{className:"cutout-error",children:h}),c.jsx("button",{className:"eyedropper-cancel",onClick:ve=>{ve.stopPropagation(),s&&s()},children:"Cancel (Esc)"})]})]})})]}),t&&t.length>0&&c.jsx("div",{className:"legend-sidebar",children:c.jsx(nU,{recipes:t,mode:n,onColorClick:r,selectedColor:p,editedColors:m,onResetAll:g})})]}),c.jsx("style",{jsx:!0,children:`
        .svg-preview {
          background: #fff;
          border-radius: 8px;
          border: 1px solid #ddd;
          padding: 1.5rem;
          margin-top: 1.5rem;
        }

        .preview-header {
          margin-bottom: 1.5rem;
          display: flex;
          align-items: center;
          justify-content: space-between;
          flex-wrap: wrap;
          gap: 0.5rem;
        }

        .design-name-container {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          flex: 1;
        }

        .preview-header h3 {
          margin: 0;
          color: #1a365d;
          font-size: 1.5rem;
        }

        .design-name-input {
          font-family: var(--font-heading), 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          color: #1a365d;
          border: none;
          border-bottom: 2px solid transparent;
          background: transparent;
          padding: 0.25rem 0;
          width: 100%;
          max-width: 400px;
          transition: border-color 0.2s;
        }

        .design-name-input:hover {
          border-bottom-color: #e5e7eb;
        }

        .design-name-input:focus {
          outline: none;
          border-bottom-color: #ff6b35;
        }

        .design-name-input::placeholder {
          color: #9ca3af;
          font-weight: normal;
        }

        .name-loading {
          font-size: 0.75rem;
          color: #9ca3af;
          font-style: italic;
        }

        /* Color Editing Tip Banner */
        .color-editing-tip {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.875rem 1rem;
          background: linear-gradient(to right, #fff7ed, #fffbeb);
          border: 1px solid #fed7aa;
          border-radius: 6px;
          margin-bottom: 1rem;
          font-size: 0.875rem;
          line-height: 1.5;
        }

        .tip-icon {
          font-size: 1.25rem;
          flex-shrink: 0;
        }

        .tip-content {
          flex: 1;
          color: #78350f;
        }

        .tip-content strong {
          color: #92400e;
        }

        .tip-close {
          background: none;
          border: none;
          font-size: 1.5rem;
          color: #92400e;
          cursor: pointer;
          padding: 0;
          line-height: 1;
          opacity: 0.6;
          transition: opacity 0.2s;
          flex-shrink: 0;
        }

        .tip-close:hover {
          opacity: 1;
        }

        /* SVG Display */
        .svg-display-container {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          align-items: stretch;
        }

        .svg-panel {
          position: relative;
          flex: 1;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          overflow: hidden;
          background: #fafafa;
        }

        /* Zoom Controls */
        .zoom-controls {
          position: absolute;
          top: 1rem;
          right: 1rem;
          display: flex;
          gap: 0.5rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
          z-index: 10;
          align-items: center;
        }

        .zoom-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          padding: 0;
          background: white;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          cursor: pointer;
          color: #1a365d;
          transition: all 0.2s ease;
        }

        .zoom-btn:hover {
          background: #f8fafc;
          border-color: #1e4a7a;
          transform: translateY(-1px);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .zoom-btn:active {
          transform: translateY(0);
        }

        .zoom-btn svg {
          width: 20px;
          height: 20px;
        }

        .zoom-level {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1a365d;
          min-width: 50px;
          text-align: center;
          padding: 0 0.5rem;
        }

        /* Undo/Redo Controls */
        .undo-redo-controls {
          position: absolute;
          top: 5rem;
          right: 1rem;
          display: flex;
          gap: 0.5rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
          z-index: 10;
        }

        .undo-redo-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          padding: 0;
          background: white;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          cursor: pointer;
          color: #1a365d;
          transition: all 0.2s ease;
        }

        .undo-redo-btn:hover:not(:disabled) {
          background: #f8fafc;
          border-color: #1e4a7a;
          transform: translateY(-1px);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .undo-redo-btn:active:not(:disabled) {
          transform: translateY(0);
        }

        .undo-redo-btn:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }

        .undo-redo-btn svg {
          width: 20px;
          height: 20px;
        }

        .in-situ-btn {
          position: absolute;
          top: 1rem;
          left: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          box-shadow: 0 2px 12px rgba(255, 107, 53, 0.3);
          z-index: 10;
          transition: all 0.2s ease;
        }

        .in-situ-btn:hover {
          background: #e55a2b;
          transform: translateY(-1px);
          box-shadow: 0 4px 16px rgba(255, 107, 53, 0.4);
        }

        .in-situ-btn:active {
          transform: translateY(0);
        }

        .in-situ-btn svg {
          width: 18px;
          height: 18px;
        }

        .svg-wrapper {
          padding: 2rem;
          background: white;
          min-height: 400px;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: relative;
        }

        .svg-image-container {
          position: relative;
          display: inline-block;
          user-select: none;
          transition: transform 0.1s ease-out;
          transform-origin: center center;
        }

        .svg-image {
          max-width: 100%;
          height: auto;
          display: block;
          border-radius: 4px;
          pointer-events: ${r?"auto":"none"};
        }

        .svg-inline-container {
          max-width: 100%;
          display: block;
          border-radius: 4px;
        }

        .svg-inline-container svg {
          max-width: 100%;
          height: auto;
          display: block;
        }

        .svg-highlight-mask {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          border-radius: 4px;
          filter: drop-shadow(0 0 3px rgba(255, 0, 255, 0.8)) drop-shadow(0 0 1px rgba(0, 0, 0, 0.6));
          animation: pulse 2s ease-in-out infinite;
        }

        .eyedropper-overlay {
          position: absolute;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 100;
        }

        .eyedropper-content {
          background: white;
          border-radius: 12px;
          padding: 16px 20px;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
          display: flex;
          flex-direction: column;
          gap: 12px;
          border: 2px solid #3b82f6;
          max-width: 320px;
        }

        .eyedropper-header {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .eyedropper-color-indicator {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 0.9rem;
          font-weight: 500;
          color: #111827;
        }

        .eyedropper-color-swatch {
          width: 28px;
          height: 28px;
          border-radius: 6px;
          border: 2px solid #d1d5db;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          flex-shrink: 0;
        }

        .eyedropper-palette {
          padding: 10px;
          background: #f9fafb;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .palette-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 4px;
        }

        .palette-swatch {
          width: 32px;
          height: 32px;
          border: 2px solid rgba(0, 0, 0, 0.15);
          border-radius: 4px;
          cursor: pointer;
          padding: 0;
          transition: all 0.15s ease;
        }

        .palette-swatch:hover {
          transform: scale(1.15);
          z-index: 1;
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);
          border-color: #3b82f6;
        }

        .eyedropper-cancel {
          padding: 8px 16px;
          background: #ef4444;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-cancel:hover {
          background: #dc2626;
          box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
        }

        .eyedropper-actions {
          display: flex;
          flex-direction: column;
          gap: 8px;
          align-items: center;
          justify-content: center;
        }

        .eyedropper-transparent {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: linear-gradient(135deg, #f3f4f6 25%, #d1d5db 25%, #d1d5db 50%, #f3f4f6 50%, #f3f4f6 75%, #d1d5db 75%);
          background-size: 8px 8px;
          color: #374151;
          border: 2px solid #6b7280;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-transparent:hover {
          border-color: #374151;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
          transform: translateY(-1px);
        }

        .transparent-icon {
          width: 16px;
          height: 16px;
          background: linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
                      linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
          border: 1px solid #999;
          border-radius: 2px;
          display: inline-block;
          font-size: 0;
        }

        .transparency-options {
          display: flex;
          gap: 6px;
          flex-wrap: wrap;
          justify-content: center;
        }

        .eyedropper-cutout {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: #fef3c7;
          color: #92400e;
          border: 2px solid #f59e0b;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-cutout:hover:not(:disabled) {
          background: #fde68a;
          border-color: #d97706;
          box-shadow: 0 2px 6px rgba(245, 158, 11, 0.3);
          transform: translateY(-1px);
        }

        .eyedropper-cutout:disabled {
          opacity: 0.7;
          cursor: not-allowed;
        }

        .cutout-icon {
          font-size: 1rem;
        }

        .cutout-spinner {
          width: 14px;
          height: 14px;
          border: 2px solid rgba(146, 64, 14, 0.3);
          border-top-color: #92400e;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .cutout-error {
          width: 100%;
          padding: 6px 10px;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 4px;
          color: #dc2626;
          font-size: 0.8rem;
          text-align: center;
          margin-top: 6px;
        }

        @keyframes pulse {
          0%, 100% {
            opacity: 0.8;
          }
          50% {
            opacity: 1;
          }
        }

        .editing-hint {
          font-size: 0.9rem;
          color: #ff6b35;
          font-weight: 500;
          margin-left: 1rem;
        }

        .legend-sidebar {
          width: 100%;
        }

        @media (max-width: 768px) {
          .svg-preview {
            padding: 0.5rem;
            margin-top: 0.75rem;
            border-radius: 6px;
          }

          .preview-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
          }

          .preview-header h3 {
            font-size: 1.1rem;
          }

          .design-name-input {
            font-size: 1.1rem;
            max-width: 100%;
          }

          .editing-hint {
            margin-left: 0;
            font-size: 0.75rem;
          }

          .svg-panel {
            border: none;
            border-radius: 0;
          }

          .svg-wrapper {
            padding: 0;
            min-height: auto;
          }

          /* Position zoom controls at bottom-right on mobile */
          .zoom-controls {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            top: auto;
            flex-direction: column;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            z-index: 50;
          }

          /* Position undo/redo controls above zoom on mobile */
          .undo-redo-controls {
            position: fixed;
            bottom: 12rem;
            right: 1rem;
            top: auto;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            z-index: 50;
          }

          /* Make buttons circular and compact on mobile */
          .zoom-btn,
          .undo-redo-btn {
            width: 44px;
            height: 44px;
            padding: 0;
            border-radius: 50%;
            min-width: unset;
            font-size: 1.1rem;
          }

          /* Hide text labels on mobile */
          .zoom-btn span {
            display: none;
          }

          /* In-situ button - compact on mobile */
          .in-situ-btn {
            padding: 0.4rem;
            font-size: 0;
            top: 0.5rem;
            left: 0.5rem;
            border-radius: 50%;
            width: 36px;
            height: 36px;
          }

          .in-situ-btn span {
            display: none;
          }

          .in-situ-btn svg {
            width: 18px;
            height: 18px;
          }

          .svg-image-container {
            /* Allow zoom on mobile via buttons */
            cursor: default !important;
          }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
          .svg-preview {
            padding: 0.25rem;
            margin-top: 0.5rem;
          }

          .preview-header {
            padding: 0 0.25rem;
          }

          .preview-header h3 {
            font-size: 1rem;
          }

          .design-name-input {
            font-size: 1rem;
          }
        }
      `})]}):null}var Hs={},_f={},sU=typeof Za=="object"&&Za&&Za.Object===Object&&Za,yN=sU,aU=yN,oU=typeof self=="object"&&self&&self.Object===Object&&self,lU=aU||oU||Function("return this")(),ao=lU,cU=ao,uU=cU.Symbol,kf=uU,PS=kf,bN=Object.prototype,hU=bN.hasOwnProperty,dU=bN.toString,Ih=PS?PS.toStringTag:void 0;function fU(e){var t=hU.call(e,Ih),n=e[Ih];try{e[Ih]=void 0;var r=!0}catch{}var i=dU.call(e);return r&&(t?e[Ih]=n:delete e[Ih]),i}var pU=fU,mU=Object.prototype,gU=mU.toString;function yU(e){return gU.call(e)}var bU=yU,NS=kf,vU=pU,xU=bU,wU="[object Null]",_U="[object Undefined]",OS=NS?NS.toStringTag:void 0;function kU(e){return e==null?e===void 0?_U:wU:OS&&OS in Object(e)?vU(e):xU(e)}var pc=kU,SU=Array.isArray,Ra=SU;function CU(e){return e!=null&&typeof e=="object"}var No=CU,EU=pc,TU=Ra,jU=No,AU="[object String]";function PU(e){return typeof e=="string"||!TU(e)&&jU(e)&&EU(e)==AU}var NU=PU;function OU(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var u=a[e?o:++i];if(n(s[u],u,s)===!1)break}return t}}var RU=OU,MU=RU,LU=MU(),IU=LU;function $U(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var DU=$U,zU=pc,FU=No,BU="[object Arguments]";function UU(e){return FU(e)&&zU(e)==BU}var HU=UU,RS=HU,WU=No,vN=Object.prototype,VU=vN.hasOwnProperty,GU=vN.propertyIsEnumerable,qU=RS(function(){return arguments}())?RS:function(e){return WU(e)&&VU.call(e,"callee")&&!GU.call(e,"callee")},xN=qU,eg={exports:{}};function YU(){return!1}var XU=YU;eg.exports;(function(e,t){var n=ao,r=XU,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?n.Buffer:void 0,u=o?o.isBuffer:void 0,h=u||r;e.exports=h})(eg,eg.exports);var yw=eg.exports,KU=9007199254740991,ZU=/^(?:0|[1-9]\d*)$/;function QU(e,t){var n=typeof e;return t=t??KU,!!t&&(n=="number"||n!="symbol"&&ZU.test(e))&&e>-1&&e%1==0&&e<t}var wN=QU,JU=9007199254740991;function eH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=JU}var bw=eH,tH=pc,nH=bw,rH=No,iH="[object Arguments]",sH="[object Array]",aH="[object Boolean]",oH="[object Date]",lH="[object Error]",cH="[object Function]",uH="[object Map]",hH="[object Number]",dH="[object Object]",fH="[object RegExp]",pH="[object Set]",mH="[object String]",gH="[object WeakMap]",yH="[object ArrayBuffer]",bH="[object DataView]",vH="[object Float32Array]",xH="[object Float64Array]",wH="[object Int8Array]",_H="[object Int16Array]",kH="[object Int32Array]",SH="[object Uint8Array]",CH="[object Uint8ClampedArray]",EH="[object Uint16Array]",TH="[object Uint32Array]",jr={};jr[vH]=jr[xH]=jr[wH]=jr[_H]=jr[kH]=jr[SH]=jr[CH]=jr[EH]=jr[TH]=!0;jr[iH]=jr[sH]=jr[yH]=jr[aH]=jr[bH]=jr[oH]=jr[lH]=jr[cH]=jr[uH]=jr[hH]=jr[dH]=jr[fH]=jr[pH]=jr[mH]=jr[gH]=!1;function jH(e){return rH(e)&&nH(e.length)&&!!jr[tH(e)]}var AH=jH;function PH(e){return function(t){return e(t)}}var vw=PH,tg={exports:{}};tg.exports;(function(e,t){var n=yN,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o})(tg,tg.exports);var xw=tg.exports,NH=AH,OH=vw,MS=xw,LS=MS&&MS.isTypedArray,RH=LS?OH(LS):NH,_N=RH,MH=DU,LH=xN,IH=Ra,$H=yw,DH=wN,zH=_N,FH=Object.prototype,BH=FH.hasOwnProperty;function UH(e,t){var n=IH(e),r=!n&&LH(e),i=!n&&!r&&$H(e),s=!n&&!r&&!i&&zH(e),a=n||r||i||s,o=a?MH(e.length,String):[],u=o.length;for(var h in e)(t||BH.call(e,h))&&!(a&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||DH(h,u)))&&o.push(h);return o}var kN=UH,HH=Object.prototype;function WH(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||HH;return e===n}var ww=WH;function VH(e,t){return function(n){return e(t(n))}}var SN=VH,GH=SN,qH=GH(Object.keys,Object),YH=qH,XH=ww,KH=YH,ZH=Object.prototype,QH=ZH.hasOwnProperty;function JH(e){if(!XH(e))return KH(e);var t=[];for(var n in Object(e))QH.call(e,n)&&n!="constructor"&&t.push(n);return t}var eW=JH;function tW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hh=tW,nW=pc,rW=hh,iW="[object AsyncFunction]",sW="[object Function]",aW="[object GeneratorFunction]",oW="[object Proxy]";function lW(e){if(!rW(e))return!1;var t=nW(e);return t==sW||t==aW||t==iW||t==oW}var CN=lW,cW=CN,uW=bw;function hW(e){return e!=null&&uW(e.length)&&!cW(e)}var Kg=hW,dW=kN,fW=eW,pW=Kg;function mW(e){return pW(e)?dW(e):fW(e)}var Sf=mW,gW=IU,yW=Sf;function bW(e,t){return e&&gW(e,t,yW)}var EN=bW;function vW(e){return e}var TN=vW,xW=TN;function wW(e){return typeof e=="function"?e:xW}var _W=wW,kW=EN,SW=_W;function CW(e,t){return e&&kW(e,SW(t))}var _w=CW,EW=SN,TW=EW(Object.getPrototypeOf,Object),kw=TW,jW=pc,AW=kw,PW=No,NW="[object Object]",OW=Function.prototype,RW=Object.prototype,jN=OW.toString,MW=RW.hasOwnProperty,LW=jN.call(Object);function IW(e){if(!PW(e)||jW(e)!=NW)return!1;var t=AW(e);if(t===null)return!0;var n=MW.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&jN.call(n)==LW}var $W=IW;function DW(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var AN=DW;function zW(){this.__data__=[],this.size=0}var FW=zW;function BW(e,t){return e===t||e!==e&&t!==t}var Sw=BW,UW=Sw;function HW(e,t){for(var n=e.length;n--;)if(UW(e[n][0],t))return n;return-1}var Zg=HW,WW=Zg,VW=Array.prototype,GW=VW.splice;function qW(e){var t=this.__data__,n=WW(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():GW.call(t,n,1),--this.size,!0}var YW=qW,XW=Zg;function KW(e){var t=this.__data__,n=XW(t,e);return n<0?void 0:t[n][1]}var ZW=KW,QW=Zg;function JW(e){return QW(this.__data__,e)>-1}var eV=JW,tV=Zg;function nV(e,t){var n=this.__data__,r=tV(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var rV=nV,iV=FW,sV=YW,aV=ZW,oV=eV,lV=rV;function dh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dh.prototype.clear=iV;dh.prototype.delete=sV;dh.prototype.get=aV;dh.prototype.has=oV;dh.prototype.set=lV;var Qg=dh,cV=Qg;function uV(){this.__data__=new cV,this.size=0}var hV=uV;function dV(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var fV=dV;function pV(e){return this.__data__.get(e)}var mV=pV;function gV(e){return this.__data__.has(e)}var yV=gV,bV=ao,vV=bV["__core-js_shared__"],xV=vV,Ty=xV,IS=function(){var e=/[^.]+$/.exec(Ty&&Ty.keys&&Ty.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wV(e){return!!IS&&IS in e}var _V=wV,kV=Function.prototype,SV=kV.toString;function CV(e){if(e!=null){try{return SV.call(e)}catch{}try{return e+""}catch{}}return""}var PN=CV,EV=CN,TV=_V,jV=hh,AV=PN,PV=/[\\^$.*+?()[\]{}|]/g,NV=/^\[object .+?Constructor\]$/,OV=Function.prototype,RV=Object.prototype,MV=OV.toString,LV=RV.hasOwnProperty,IV=RegExp("^"+MV.call(LV).replace(PV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $V(e){if(!jV(e)||TV(e))return!1;var t=EV(e)?IV:NV;return t.test(AV(e))}var DV=$V;function zV(e,t){return e==null?void 0:e[t]}var FV=zV,BV=DV,UV=FV;function HV(e,t){var n=UV(e,t);return BV(n)?n:void 0}var mc=HV,WV=mc,VV=ao,GV=WV(VV,"Map"),Cw=GV,qV=mc,YV=qV(Object,"create"),Jg=YV,$S=Jg;function XV(){this.__data__=$S?$S(null):{},this.size=0}var KV=XV;function ZV(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var QV=ZV,JV=Jg,eG="__lodash_hash_undefined__",tG=Object.prototype,nG=tG.hasOwnProperty;function rG(e){var t=this.__data__;if(JV){var n=t[e];return n===eG?void 0:n}return nG.call(t,e)?t[e]:void 0}var iG=rG,sG=Jg,aG=Object.prototype,oG=aG.hasOwnProperty;function lG(e){var t=this.__data__;return sG?t[e]!==void 0:oG.call(t,e)}var cG=lG,uG=Jg,hG="__lodash_hash_undefined__";function dG(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=uG&&t===void 0?hG:t,this}var fG=dG,pG=KV,mG=QV,gG=iG,yG=cG,bG=fG;function fh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fh.prototype.clear=pG;fh.prototype.delete=mG;fh.prototype.get=gG;fh.prototype.has=yG;fh.prototype.set=bG;var vG=fh,DS=vG,xG=Qg,wG=Cw;function _G(){this.size=0,this.__data__={hash:new DS,map:new(wG||xG),string:new DS}}var kG=_G;function SG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var CG=SG,EG=CG;function TG(e,t){var n=e.__data__;return EG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var e0=TG,jG=e0;function AG(e){var t=jG(this,e).delete(e);return this.size-=t?1:0,t}var PG=AG,NG=e0;function OG(e){return NG(this,e).get(e)}var RG=OG,MG=e0;function LG(e){return MG(this,e).has(e)}var IG=LG,$G=e0;function DG(e,t){var n=$G(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var zG=DG,FG=kG,BG=PG,UG=RG,HG=IG,WG=zG;function ph(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ph.prototype.clear=FG;ph.prototype.delete=BG;ph.prototype.get=UG;ph.prototype.has=HG;ph.prototype.set=WG;var Ew=ph,VG=Qg,GG=Cw,qG=Ew,YG=200;function XG(e,t){var n=this.__data__;if(n instanceof VG){var r=n.__data__;if(!GG||r.length<YG-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qG(r)}return n.set(e,t),this.size=n.size,this}var KG=XG,ZG=Qg,QG=hV,JG=fV,eq=mV,tq=yV,nq=KG;function mh(e){var t=this.__data__=new ZG(e);this.size=t.size}mh.prototype.clear=QG;mh.prototype.delete=JG;mh.prototype.get=eq;mh.prototype.has=tq;mh.prototype.set=nq;var Tw=mh,rq="__lodash_hash_undefined__";function iq(e){return this.__data__.set(e,rq),this}var sq=iq;function aq(e){return this.__data__.has(e)}var oq=aq,lq=Ew,cq=sq,uq=oq;function ng(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new lq;++t<n;)this.add(e[t])}ng.prototype.add=ng.prototype.push=cq;ng.prototype.has=uq;var hq=ng;function dq(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var fq=dq;function pq(e,t){return e.has(t)}var mq=pq,gq=hq,yq=fq,bq=mq,vq=1,xq=2;function wq(e,t,n,r,i,s){var a=n&vq,o=e.length,u=t.length;if(o!=u&&!(a&&u>o))return!1;var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=-1,m=!0,g=n&xq?new gq:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var v=e[p],w=t[p];if(r)var C=a?r(w,v,p,t,e,s):r(v,w,p,e,t,s);if(C!==void 0){if(C)continue;m=!1;break}if(g){if(!yq(t,function(x,k){if(!bq(g,k)&&(v===x||i(v,x,n,r,s)))return g.push(k)})){m=!1;break}}else if(!(v===w||i(v,w,n,r,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var NN=wq,_q=ao,kq=_q.Uint8Array,ON=kq;function Sq(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var Cq=Sq;function Eq(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Tq=Eq,zS=kf,FS=ON,jq=Sw,Aq=NN,Pq=Cq,Nq=Tq,Oq=1,Rq=2,Mq="[object Boolean]",Lq="[object Date]",Iq="[object Error]",$q="[object Map]",Dq="[object Number]",zq="[object RegExp]",Fq="[object Set]",Bq="[object String]",Uq="[object Symbol]",Hq="[object ArrayBuffer]",Wq="[object DataView]",BS=zS?zS.prototype:void 0,jy=BS?BS.valueOf:void 0;function Vq(e,t,n,r,i,s,a){switch(n){case Wq:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Hq:return!(e.byteLength!=t.byteLength||!s(new FS(e),new FS(t)));case Mq:case Lq:case Dq:return jq(+e,+t);case Iq:return e.name==t.name&&e.message==t.message;case zq:case Bq:return e==t+"";case $q:var o=Pq;case Fq:var u=r&Oq;if(o||(o=Nq),e.size!=t.size&&!u)return!1;var h=a.get(e);if(h)return h==t;r|=Rq,a.set(e,t);var d=Aq(o(e),o(t),r,i,s,a);return a.delete(e),d;case Uq:if(jy)return jy.call(e)==jy.call(t)}return!1}var Gq=Vq;function qq(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var RN=qq,Yq=RN,Xq=Ra;function Kq(e,t,n){var r=t(e);return Xq(e)?r:Yq(r,n(e))}var MN=Kq;function Zq(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}var Qq=Zq;function Jq(){return[]}var LN=Jq,eY=Qq,tY=LN,nY=Object.prototype,rY=nY.propertyIsEnumerable,US=Object.getOwnPropertySymbols,iY=US?function(e){return e==null?[]:(e=Object(e),eY(US(e),function(t){return rY.call(e,t)}))}:tY,jw=iY,sY=MN,aY=jw,oY=Sf;function lY(e){return sY(e,oY,aY)}var IN=lY,HS=IN,cY=1,uY=Object.prototype,hY=uY.hasOwnProperty;function dY(e,t,n,r,i,s){var a=n&cY,o=HS(e),u=o.length,h=HS(t),d=h.length;if(u!=d&&!a)return!1;for(var p=u;p--;){var m=o[p];if(!(a?m in t:hY.call(t,m)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var w=!0;s.set(e,t),s.set(t,e);for(var C=a;++p<u;){m=o[p];var x=e[m],k=t[m];if(r)var A=a?r(k,x,m,t,e,s):r(x,k,m,e,t,s);if(!(A===void 0?x===k||i(x,k,n,r,s):A)){w=!1;break}C||(C=m=="constructor")}if(w&&!C){var j=e.constructor,I=t.constructor;j!=I&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof I=="function"&&I instanceof I)&&(w=!1)}return s.delete(e),s.delete(t),w}var fY=dY,pY=mc,mY=ao,gY=pY(mY,"DataView"),yY=gY,bY=mc,vY=ao,xY=bY(vY,"Promise"),wY=xY,_Y=mc,kY=ao,SY=_Y(kY,"Set"),CY=SY,EY=mc,TY=ao,jY=EY(TY,"WeakMap"),AY=jY,ax=yY,ox=Cw,lx=wY,cx=CY,ux=AY,$N=pc,gh=PN,WS="[object Map]",PY="[object Object]",VS="[object Promise]",GS="[object Set]",qS="[object WeakMap]",YS="[object DataView]",NY=gh(ax),OY=gh(ox),RY=gh(lx),MY=gh(cx),LY=gh(ux),Dl=$N;(ax&&Dl(new ax(new ArrayBuffer(1)))!=YS||ox&&Dl(new ox)!=WS||lx&&Dl(lx.resolve())!=VS||cx&&Dl(new cx)!=GS||ux&&Dl(new ux)!=qS)&&(Dl=function(e){var t=$N(e),n=t==PY?e.constructor:void 0,r=n?gh(n):"";if(r)switch(r){case NY:return YS;case OY:return WS;case RY:return VS;case MY:return GS;case LY:return qS}return t});var t0=Dl,Ay=Tw,IY=NN,$Y=Gq,DY=fY,XS=t0,KS=Ra,ZS=yw,zY=_N,FY=1,QS="[object Arguments]",JS="[object Array]",_p="[object Object]",BY=Object.prototype,eC=BY.hasOwnProperty;function UY(e,t,n,r,i,s){var a=KS(e),o=KS(t),u=a?JS:XS(e),h=o?JS:XS(t);u=u==QS?_p:u,h=h==QS?_p:h;var d=u==_p,p=h==_p,m=u==h;if(m&&ZS(e)){if(!ZS(t))return!1;a=!0,d=!1}if(m&&!d)return s||(s=new Ay),a||zY(e)?IY(e,t,n,r,i,s):$Y(e,t,u,n,r,i,s);if(!(n&FY)){var g=d&&eC.call(e,"__wrapped__"),v=p&&eC.call(t,"__wrapped__");if(g||v){var w=g?e.value():e,C=v?t.value():t;return s||(s=new Ay),i(w,C,n,r,s)}}return m?(s||(s=new Ay),DY(e,t,n,r,i,s)):!1}var HY=UY,WY=HY,tC=No;function DN(e,t,n,r,i){return e===t?!0:e==null||t==null||!tC(e)&&!tC(t)?e!==e&&t!==t:WY(e,t,n,r,DN,i)}var zN=DN,VY=Tw,GY=zN,qY=1,YY=2;function XY(e,t,n,r){var i=n.length,s=i,a=!r;if(e==null)return!s;for(e=Object(e);i--;){var o=n[i];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){o=n[i];var u=o[0],h=e[u],d=o[1];if(a&&o[2]){if(h===void 0&&!(u in e))return!1}else{var p=new VY;if(r)var m=r(h,d,u,e,t,p);if(!(m===void 0?GY(d,h,qY|YY,r,p):m))return!1}}return!0}var KY=XY,ZY=hh;function QY(e){return e===e&&!ZY(e)}var FN=QY,JY=FN,eX=Sf;function tX(e){for(var t=eX(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,JY(i)]}return t}var nX=tX;function rX(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var BN=rX,iX=KY,sX=nX,aX=BN;function oX(e){var t=sX(e);return t.length==1&&t[0][2]?aX(t[0][0],t[0][1]):function(n){return n===e||iX(n,e,t)}}var lX=oX,cX=pc,uX=No,hX="[object Symbol]";function dX(e){return typeof e=="symbol"||uX(e)&&cX(e)==hX}var Aw=dX,fX=Ra,pX=Aw,mX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gX=/^\w*$/;function yX(e,t){if(fX(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pX(e)?!0:gX.test(e)||!mX.test(e)||t!=null&&e in Object(t)}var Pw=yX,UN=Ew,bX="Expected a function";function Nw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bX);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Nw.Cache||UN),n}Nw.Cache=UN;var vX=Nw,xX=vX,wX=500;function _X(e){var t=xX(e,function(r){return n.size===wX&&n.clear(),r}),n=t.cache;return t}var kX=_X,SX=kX,CX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EX=/\\(\\)?/g,TX=SX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(CX,function(n,r,i,s){t.push(i?s.replace(EX,"$1"):r||n)}),t}),jX=TX,nC=kf,AX=AN,PX=Ra,NX=Aw,rC=nC?nC.prototype:void 0,iC=rC?rC.toString:void 0;function HN(e){if(typeof e=="string")return e;if(PX(e))return AX(e,HN)+"";if(NX(e))return iC?iC.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var OX=HN,RX=OX;function MX(e){return e==null?"":RX(e)}var LX=MX,IX=Ra,$X=Pw,DX=jX,zX=LX;function FX(e,t){return IX(e)?e:$X(e,t)?[e]:DX(zX(e))}var WN=FX,BX=Aw;function UX(e){if(typeof e=="string"||BX(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var n0=UX,HX=WN,WX=n0;function VX(e,t){t=HX(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[WX(t[n++])];return n&&n==r?e:void 0}var VN=VX,GX=VN;function qX(e,t,n){var r=e==null?void 0:GX(e,t);return r===void 0?n:r}var YX=qX;function XX(e,t){return e!=null&&t in Object(e)}var KX=XX,ZX=WN,QX=xN,JX=Ra,eK=wN,tK=bw,nK=n0;function rK(e,t,n){t=ZX(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=nK(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&tK(i)&&eK(a,i)&&(JX(e)||QX(e)))}var iK=rK,sK=KX,aK=iK;function oK(e,t){return e!=null&&aK(e,t,sK)}var lK=oK,cK=zN,uK=YX,hK=lK,dK=Pw,fK=FN,pK=BN,mK=n0,gK=1,yK=2;function bK(e,t){return dK(e)&&fK(t)?pK(mK(e),t):function(n){var r=uK(n,e);return r===void 0&&r===t?hK(n,e):cK(t,r,gK|yK)}}var vK=bK;function xK(e){return function(t){return t==null?void 0:t[e]}}var wK=xK,_K=VN;function kK(e){return function(t){return _K(t,e)}}var SK=kK,CK=wK,EK=SK,TK=Pw,jK=n0;function AK(e){return TK(e)?CK(jK(e)):EK(e)}var PK=AK,NK=lX,OK=vK,RK=TN,MK=Ra,LK=PK;function IK(e){return typeof e=="function"?e:e==null?RK:typeof e=="object"?MK(e)?OK(e[0],e[1]):NK(e):LK(e)}var $K=IK,DK=Kg;function zK(e,t){return function(n,r){if(n==null)return n;if(!DK(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var FK=zK,BK=EN,UK=FK,HK=UK(BK),WK=HK,VK=WK,GK=Kg;function qK(e,t){var n=-1,r=GK(e)?Array(e.length):[];return VK(e,function(i,s,a){r[++n]=t(i,s,a)}),r}var YK=qK,XK=AN,KK=$K,ZK=YK,QK=Ra;function JK(e,t){var n=QK(e)?XK:ZK;return n(e,KK(t))}var eZ=JK;Object.defineProperty(_f,"__esModule",{value:!0});_f.flattenNames=void 0;var tZ=NU,nZ=r0(tZ),rZ=_w,iZ=r0(rZ),sZ=$W,aZ=r0(sZ),oZ=eZ,lZ=r0(oZ);function r0(e){return e&&e.__esModule?e:{default:e}}var cZ=_f.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,lZ.default)(t,function(r){Array.isArray(r)?e(r).map(function(i){return n.push(i)}):(0,aZ.default)(r)?(0,iZ.default)(r,function(i,s){i===!0&&n.push(s),n.push(s+"-"+i)}):(0,nZ.default)(r)&&n.push(r)}),n};_f.default=cZ;var Cf={};function uZ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var hZ=uZ,dZ=mc,fZ=function(){try{var e=dZ(Object,"defineProperty");return e({},"",{}),e}catch{}}(),pZ=fZ,sC=pZ;function mZ(e,t,n){t=="__proto__"&&sC?sC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var GN=mZ,gZ=GN,yZ=Sw,bZ=Object.prototype,vZ=bZ.hasOwnProperty;function xZ(e,t,n){var r=e[t];(!(vZ.call(e,t)&&yZ(r,n))||n===void 0&&!(t in e))&&gZ(e,t,n)}var qN=xZ,wZ=qN,_Z=GN;function kZ(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],u=r?r(n[o],e[o],o,n,e):void 0;u===void 0&&(u=e[o]),i?_Z(n,o,u):wZ(n,o,u)}return n}var i0=kZ,SZ=i0,CZ=Sf;function EZ(e,t){return e&&SZ(t,CZ(t),e)}var TZ=EZ;function jZ(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var AZ=jZ,PZ=hh,NZ=ww,OZ=AZ,RZ=Object.prototype,MZ=RZ.hasOwnProperty;function LZ(e){if(!PZ(e))return OZ(e);var t=NZ(e),n=[];for(var r in e)r=="constructor"&&(t||!MZ.call(e,r))||n.push(r);return n}var IZ=LZ,$Z=kN,DZ=IZ,zZ=Kg;function FZ(e){return zZ(e)?$Z(e,!0):DZ(e)}var Ow=FZ,BZ=i0,UZ=Ow;function HZ(e,t){return e&&BZ(t,UZ(t),e)}var WZ=HZ,rg={exports:{}};rg.exports;(function(e,t){var n=ao,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function u(h,d){if(d)return h.slice();var p=h.length,m=o?o(p):new h.constructor(p);return h.copy(m),m}e.exports=u})(rg,rg.exports);var VZ=rg.exports;function GZ(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var qZ=GZ,YZ=i0,XZ=jw;function KZ(e,t){return YZ(e,XZ(e),t)}var ZZ=KZ,QZ=RN,JZ=kw,eQ=jw,tQ=LN,nQ=Object.getOwnPropertySymbols,rQ=nQ?function(e){for(var t=[];e;)QZ(t,eQ(e)),e=JZ(e);return t}:tQ,YN=rQ,iQ=i0,sQ=YN;function aQ(e,t){return iQ(e,sQ(e),t)}var oQ=aQ,lQ=MN,cQ=YN,uQ=Ow;function hQ(e){return lQ(e,uQ,cQ)}var dQ=hQ,fQ=Object.prototype,pQ=fQ.hasOwnProperty;function mQ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&pQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var gQ=mQ,aC=ON;function yQ(e){var t=new e.constructor(e.byteLength);return new aC(t).set(new aC(e)),t}var Rw=yQ,bQ=Rw;function vQ(e,t){var n=t?bQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var xQ=vQ,wQ=/\w*$/;function _Q(e){var t=new e.constructor(e.source,wQ.exec(e));return t.lastIndex=e.lastIndex,t}var kQ=_Q,oC=kf,lC=oC?oC.prototype:void 0,cC=lC?lC.valueOf:void 0;function SQ(e){return cC?Object(cC.call(e)):{}}var CQ=SQ,EQ=Rw;function TQ(e,t){var n=t?EQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var jQ=TQ,AQ=Rw,PQ=xQ,NQ=kQ,OQ=CQ,RQ=jQ,MQ="[object Boolean]",LQ="[object Date]",IQ="[object Map]",$Q="[object Number]",DQ="[object RegExp]",zQ="[object Set]",FQ="[object String]",BQ="[object Symbol]",UQ="[object ArrayBuffer]",HQ="[object DataView]",WQ="[object Float32Array]",VQ="[object Float64Array]",GQ="[object Int8Array]",qQ="[object Int16Array]",YQ="[object Int32Array]",XQ="[object Uint8Array]",KQ="[object Uint8ClampedArray]",ZQ="[object Uint16Array]",QQ="[object Uint32Array]";function JQ(e,t,n){var r=e.constructor;switch(t){case UQ:return AQ(e);case MQ:case LQ:return new r(+e);case HQ:return PQ(e,n);case WQ:case VQ:case GQ:case qQ:case YQ:case XQ:case KQ:case ZQ:case QQ:return RQ(e,n);case IQ:return new r;case $Q:case FQ:return new r(e);case DQ:return NQ(e);case zQ:return new r;case BQ:return OQ(e)}}var eJ=JQ,tJ=hh,uC=Object.create,nJ=function(){function e(){}return function(t){if(!tJ(t))return{};if(uC)return uC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),rJ=nJ,iJ=rJ,sJ=kw,aJ=ww;function oJ(e){return typeof e.constructor=="function"&&!aJ(e)?iJ(sJ(e)):{}}var lJ=oJ,cJ=t0,uJ=No,hJ="[object Map]";function dJ(e){return uJ(e)&&cJ(e)==hJ}var fJ=dJ,pJ=fJ,mJ=vw,hC=xw,dC=hC&&hC.isMap,gJ=dC?mJ(dC):pJ,yJ=gJ,bJ=t0,vJ=No,xJ="[object Set]";function wJ(e){return vJ(e)&&bJ(e)==xJ}var _J=wJ,kJ=_J,SJ=vw,fC=xw,pC=fC&&fC.isSet,CJ=pC?SJ(pC):kJ,EJ=CJ,TJ=Tw,jJ=hZ,AJ=qN,PJ=TZ,NJ=WZ,OJ=VZ,RJ=qZ,MJ=ZZ,LJ=oQ,IJ=IN,$J=dQ,DJ=t0,zJ=gQ,FJ=eJ,BJ=lJ,UJ=Ra,HJ=yw,WJ=yJ,VJ=hh,GJ=EJ,qJ=Sf,YJ=Ow,XJ=1,KJ=2,ZJ=4,XN="[object Arguments]",QJ="[object Array]",JJ="[object Boolean]",eee="[object Date]",tee="[object Error]",KN="[object Function]",nee="[object GeneratorFunction]",ree="[object Map]",iee="[object Number]",ZN="[object Object]",see="[object RegExp]",aee="[object Set]",oee="[object String]",lee="[object Symbol]",cee="[object WeakMap]",uee="[object ArrayBuffer]",hee="[object DataView]",dee="[object Float32Array]",fee="[object Float64Array]",pee="[object Int8Array]",mee="[object Int16Array]",gee="[object Int32Array]",yee="[object Uint8Array]",bee="[object Uint8ClampedArray]",vee="[object Uint16Array]",xee="[object Uint32Array]",xr={};xr[XN]=xr[QJ]=xr[uee]=xr[hee]=xr[JJ]=xr[eee]=xr[dee]=xr[fee]=xr[pee]=xr[mee]=xr[gee]=xr[ree]=xr[iee]=xr[ZN]=xr[see]=xr[aee]=xr[oee]=xr[lee]=xr[yee]=xr[bee]=xr[vee]=xr[xee]=!0;xr[tee]=xr[KN]=xr[cee]=!1;function om(e,t,n,r,i,s){var a,o=t&XJ,u=t&KJ,h=t&ZJ;if(n&&(a=i?n(e,r,i,s):n(e)),a!==void 0)return a;if(!VJ(e))return e;var d=UJ(e);if(d){if(a=zJ(e),!o)return RJ(e,a)}else{var p=DJ(e),m=p==KN||p==nee;if(HJ(e))return OJ(e,o);if(p==ZN||p==XN||m&&!i){if(a=u||m?{}:BJ(e),!o)return u?LJ(e,NJ(a,e)):MJ(e,PJ(a,e))}else{if(!xr[p])return i?e:{};a=FJ(e,p,o)}}s||(s=new TJ);var g=s.get(e);if(g)return g;s.set(e,a),GJ(e)?e.forEach(function(C){a.add(om(C,t,n,C,e,s))}):WJ(e)&&e.forEach(function(C,x){a.set(x,om(C,t,n,x,e,s))});var v=h?u?$J:IJ:u?YJ:qJ,w=d?void 0:v(e);return jJ(w||e,function(C,x){w&&(x=C,C=e[x]),AJ(a,x,om(C,t,n,x,e,s))}),a}var wee=om,_ee=wee,kee=1,See=4;function Cee(e){return _ee(e,kee|See)}var Eee=Cee;Object.defineProperty(Cf,"__esModule",{value:!0});Cf.mergeClasses=void 0;var Tee=_w,jee=QN(Tee),Aee=Eee,Pee=QN(Aee),Nee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function QN(e){return e&&e.__esModule?e:{default:e}}var Oee=Cf.mergeClasses=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t.default&&(0,Pee.default)(t.default)||{};return n.map(function(i){var s=t[i];return s&&(0,jee.default)(s,function(a,o){r[o]||(r[o]={}),r[o]=Nee({},r[o],s[o])}),i}),r};Cf.default=Oee;var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.autoprefix=void 0;var Ree=_w,mC=Lee(Ree),Mee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Lee(e){return e&&e.__esModule?e:{default:e}}var Iee={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var n=t&&t.split(" ");return{position:"absolute",top:n&&n[0],right:n&&n[1],bottom:n&&n[2],left:n&&n[3]}},extend:function(t,n){var r=n[t];return r||{extend:t}}},$ee=Ef.autoprefix=function(t){var n={};return(0,mC.default)(t,function(r,i){var s={};(0,mC.default)(r,function(a,o){var u=Iee[o];u?s=Mee({},s,u(a)):s[o]=a}),n[i]=s}),n};Ef.default=$ee;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.hover=void 0;var Dee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zee=fe,Py=Fee(zee);function Fee(e){return e&&e.__esModule?e:{default:e}}function Bee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Uee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Hee=Tf.hover=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Uee(i,r);function i(){var s,a,o,u;Bee(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return u=(a=(o=gC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),o),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return Py.default.createElement(n,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},Py.default.createElement(t,Dee({},o.props,o.state)))},a),gC(o,u)}return i}(Py.default.Component)};Tf.default=Hee;var jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.active=void 0;var Wee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vee=fe,Ny=Gee(Vee);function Gee(e){return e&&e.__esModule?e:{default:e}}function qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Yee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xee=jf.active=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Yee(i,r);function i(){var s,a,o,u;qee(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return u=(a=(o=yC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),o),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return Ny.default.createElement(n,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},Ny.default.createElement(t,Wee({},o.props,o.state)))},a),yC(o,u)}return i}(Ny.default.Component)};jf.default=Xee;var Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});var Kee=function(t,n){var r={},i=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=o};return t===0&&i("first-child"),t===n-1&&i("last-child"),(t===0||t%2===0)&&i("even"),Math.abs(t%2)===1&&i("odd"),i("nth-child",t),r};Mw.default=Kee;Object.defineProperty(Hs,"__esModule",{value:!0});Hs.ReactCSS=Hs.loop=Hs.handleActive=Lw=Hs.handleHover=Hs.hover=void 0;var Zee=_f,Qee=yh(Zee),Jee=Cf,ete=yh(Jee),tte=Ef,nte=yh(tte),rte=Tf,JN=yh(rte),ite=jf,ste=yh(ite),ate=Mw,ote=yh(ate);function yh(e){return e&&e.__esModule?e:{default:e}}Hs.hover=JN.default;var Lw=Hs.handleHover=JN.default;Hs.handleActive=ste.default;Hs.loop=ote.default;var lte=Hs.ReactCSS=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=(0,Qee.default)(r),a=(0,ete.default)(t,s);return(0,nte.default)(a)},yn=Hs.default=lte,cte=function(t,n,r,i,s){var a=s.clientWidth,o=s.clientHeight,u=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,h=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=u-(s.getBoundingClientRect().left+window.pageXOffset),p=h-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var m=void 0;if(p<0?m=0:p>o?m=1:m=Math.round(p*100/o)/100,n.a!==m)return{h:n.h,s:n.s,l:n.l,a:m,source:"rgb"}}else{var g=void 0;if(d<0?g=0:d>a?g=1:g=Math.round(d*100/a)/100,i!==g)return{h:n.h,s:n.s,l:n.l,a:g,source:"rgb"}}return null},Oy={},ute=function(t,n,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var a=s.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,s.width,s.height),a.fillStyle=n,a.fillRect(0,0,r,r),a.translate(r,r),a.fillRect(0,0,r,r),s.toDataURL()):null},hte=function(t,n,r,i){var s=t+"-"+n+"-"+r+(i?"-server":"");if(Oy[s])return Oy[s];var a=ute(t,n,r,i);return Oy[s]=a,a},bC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bh=function(t){var n=t.white,r=t.grey,i=t.size,s=t.renderers,a=t.borderRadius,o=t.boxShadow,u=t.children,h=yn({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+hte(n,r,i,s.canvas)+") center left"}}});return fe.isValidElement(u)?Te.cloneElement(u,bC({},u.props,{style:bC({},u.props.style,h.grid)})):Te.createElement("div",{style:h.grid})};bh.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var dte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function pte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Iw=function(e){mte(t,e);function t(){var n,r,i,s;pte(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=(r=(i=vC(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(o))),i),i.handleChange=function(h){var d=cte(h,i.props.hsl,i.props.direction,i.props.a,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),vC(i,s)}return fte(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=yn({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:dte({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Te.createElement("div",{style:s.alpha},Te.createElement("div",{style:s.checkboard},Te.createElement(bh,{renderers:this.props.renderers})),Te.createElement("div",{style:s.gradient}),Te.createElement("div",{style:s.container,ref:function(o){return r.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Te.createElement("div",{style:s.pointer},this.props.pointer?Te.createElement(this.props.pointer,this.props):Te.createElement("div",{style:s.slider}))))}}]),t}(fe.PureComponent||fe.Component),gte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function yte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vte(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function xte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wte=1,eO=38,_te=40,kte=[eO,_te],Ste=function(t){return kte.indexOf(t)>-1},Cte=function(t){return Number(String(t).replace(/%/g,""))},Ete=1,Ln=function(e){xte(t,e);function t(n){bte(this,t);var r=vte(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=Cte(i.target.value);if(!isNaN(s)&&Ste(i.keyCode)){var a=r.getArrowOffset(),o=i.keyCode===eO?s+a:s-a;r.setUpdatedValue(o,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+Ete++,r}return gte(t,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return yte({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||wte}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=yn({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Te.createElement("div",{style:i.wrap},Te.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return r.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Te.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(fe.PureComponent||fe.Component),Tte=function(t,n,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=o-(i.getBoundingClientRect().left+window.pageXOffset),d=u-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var p=void 0;if(d<0)p=359;else if(d>a)p=0;else{var m=-(d*100/a)+100;p=360*m/100}if(r.h!==p)return{h:p,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var g=void 0;if(h<0)g=0;else if(h>s)g=359;else{var v=h*100/s;g=360*v/100}if(r.h!==g)return{h:g,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},jte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ate(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Pte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vh=function(e){Pte(t,e);function t(){var n,r,i,s;Ate(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=(r=(i=xC(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(o))),i),i.handleChange=function(h){var d=Tte(h,i.props.direction,i.props.hsl,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),xC(i,s)}return jte(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,a=yn({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return Te.createElement("div",{style:a.hue},Te.createElement("div",{className:"hue-"+s,style:a.container,ref:function(u){return r.container=u},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Te.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Te.createElement("div",{style:a.pointer},this.props.pointer?Te.createElement(this.props.pointer,this.props):Te.createElement("div",{style:a.slider}))))}}]),t}(fe.PureComponent||fe.Component),tO={exports:{}},Nte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ote=Nte,Rte=Ote;function nO(){}function rO(){}rO.resetWarningCache=nO;var Mte=function(){function e(r,i,s,a,o,u){if(u!==Rte){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rO,resetWarningCache:nO};return n.PropTypes=n,n};tO.exports=Mte();var Lte=tO.exports;const Lt=yl(Lte);function Ite(){this.__data__=[],this.size=0}function Af(e,t){return e===t||e!==e&&t!==t}function s0(e,t){for(var n=e.length;n--;)if(Af(e[n][0],t))return n;return-1}var $te=Array.prototype,Dte=$te.splice;function zte(e){var t=this.__data__,n=s0(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Dte.call(t,n,1),--this.size,!0}function Fte(e){var t=this.__data__,n=s0(t,e);return n<0?void 0:t[n][1]}function Bte(e){return s0(this.__data__,e)>-1}function Ute(e,t){var n=this.__data__,r=s0(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Oo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Oo.prototype.clear=Ite;Oo.prototype.delete=zte;Oo.prototype.get=Fte;Oo.prototype.has=Bte;Oo.prototype.set=Ute;function Hte(){this.__data__=new Oo,this.size=0}function Wte(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Vte(e){return this.__data__.get(e)}function Gte(e){return this.__data__.has(e)}var iO=typeof global=="object"&&global&&global.Object===Object&&global,qte=typeof self=="object"&&self&&self.Object===Object&&self,Ma=iO||qte||Function("return this")(),dl=Ma.Symbol,sO=Object.prototype,Yte=sO.hasOwnProperty,Xte=sO.toString,$h=dl?dl.toStringTag:void 0;function Kte(e){var t=Yte.call(e,$h),n=e[$h];try{e[$h]=void 0;var r=!0}catch{}var i=Xte.call(e);return r&&(t?e[$h]=n:delete e[$h]),i}var Zte=Object.prototype,Qte=Zte.toString;function Jte(e){return Qte.call(e)}var ene="[object Null]",tne="[object Undefined]",wC=dl?dl.toStringTag:void 0;function gc(e){return e==null?e===void 0?tne:ene:wC&&wC in Object(e)?Kte(e):Jte(e)}function Ks(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var nne="[object AsyncFunction]",rne="[object Function]",ine="[object GeneratorFunction]",sne="[object Proxy]";function $w(e){if(!Ks(e))return!1;var t=gc(e);return t==rne||t==ine||t==nne||t==sne}var Ry=Ma["__core-js_shared__"],_C=function(){var e=/[^.]+$/.exec(Ry&&Ry.keys&&Ry.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ane(e){return!!_C&&_C in e}var one=Function.prototype,lne=one.toString;function yc(e){if(e!=null){try{return lne.call(e)}catch{}try{return e+""}catch{}}return""}var cne=/[\\^$.*+?()[\]{}|]/g,une=/^\[object .+?Constructor\]$/,hne=Function.prototype,dne=Object.prototype,fne=hne.toString,pne=dne.hasOwnProperty,mne=RegExp("^"+fne.call(pne).replace(cne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gne(e){if(!Ks(e)||ane(e))return!1;var t=$w(e)?mne:une;return t.test(yc(e))}function yne(e,t){return e==null?void 0:e[t]}function bc(e,t){var n=yne(e,t);return gne(n)?n:void 0}var nf=bc(Ma,"Map"),rf=bc(Object,"create");function bne(){this.__data__=rf?rf(null):{},this.size=0}function vne(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xne="__lodash_hash_undefined__",wne=Object.prototype,_ne=wne.hasOwnProperty;function kne(e){var t=this.__data__;if(rf){var n=t[e];return n===xne?void 0:n}return _ne.call(t,e)?t[e]:void 0}var Sne=Object.prototype,Cne=Sne.hasOwnProperty;function Ene(e){var t=this.__data__;return rf?t[e]!==void 0:Cne.call(t,e)}var Tne="__lodash_hash_undefined__";function jne(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rf&&t===void 0?Tne:t,this}function lc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lc.prototype.clear=bne;lc.prototype.delete=vne;lc.prototype.get=kne;lc.prototype.has=Ene;lc.prototype.set=jne;function Ane(){this.size=0,this.__data__={hash:new lc,map:new(nf||Oo),string:new lc}}function Pne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function a0(e,t){var n=e.__data__;return Pne(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Nne(e){var t=a0(this,e).delete(e);return this.size-=t?1:0,t}function One(e){return a0(this,e).get(e)}function Rne(e){return a0(this,e).has(e)}function Mne(e,t){var n=a0(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Ro(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ro.prototype.clear=Ane;Ro.prototype.delete=Nne;Ro.prototype.get=One;Ro.prototype.has=Rne;Ro.prototype.set=Mne;var Lne=200;function Ine(e,t){var n=this.__data__;if(n instanceof Oo){var r=n.__data__;if(!nf||r.length<Lne-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ro(r)}return n.set(e,t),this.size=n.size,this}function io(e){var t=this.__data__=new Oo(e);this.size=t.size}io.prototype.clear=Hte;io.prototype.delete=Wte;io.prototype.get=Vte;io.prototype.has=Gte;io.prototype.set=Ine;var ig=function(){try{var e=bc(Object,"defineProperty");return e({},"",{}),e}catch{}}();function Dw(e,t,n){t=="__proto__"&&ig?ig(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function hx(e,t,n){(n!==void 0&&!Af(e[t],n)||n===void 0&&!(t in e))&&Dw(e,t,n)}function $ne(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var u=a[++i];if(n(s[u],u,s)===!1)break}return t}}var aO=$ne(),oO=typeof As=="object"&&As&&!As.nodeType&&As,kC=oO&&typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,Dne=kC&&kC.exports===oO,SC=Dne?Ma.Buffer:void 0;SC&&SC.allocUnsafe;function zne(e,t){return e.slice()}var sg=Ma.Uint8Array;function Fne(e){var t=new e.constructor(e.byteLength);return new sg(t).set(new sg(e)),t}function Bne(e,t){var n=Fne(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function Une(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var CC=Object.create,Hne=function(){function e(){}return function(t){if(!Ks(t))return{};if(CC)return CC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function lO(e,t){return function(n){return e(t(n))}}var cO=lO(Object.getPrototypeOf,Object),Wne=Object.prototype;function zw(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Wne;return e===n}function Vne(e){return typeof e.constructor=="function"&&!zw(e)?Hne(cO(e)):{}}function fl(e){return e!=null&&typeof e=="object"}var Gne="[object Arguments]";function EC(e){return fl(e)&&gc(e)==Gne}var uO=Object.prototype,qne=uO.hasOwnProperty,Yne=uO.propertyIsEnumerable,ag=EC(function(){return arguments}())?EC:function(e){return fl(e)&&qne.call(e,"callee")&&!Yne.call(e,"callee")},Rs=Array.isArray,Xne=9007199254740991;function Fw(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xne}function xh(e){return e!=null&&Fw(e.length)&&!$w(e)}function Kne(e){return fl(e)&&xh(e)}function Zne(){return!1}var hO=typeof As=="object"&&As&&!As.nodeType&&As,TC=hO&&typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,Qne=TC&&TC.exports===hO,jC=Qne?Ma.Buffer:void 0,Jne=jC?jC.isBuffer:void 0,og=Jne||Zne,ere="[object Object]",tre=Function.prototype,nre=Object.prototype,dO=tre.toString,rre=nre.hasOwnProperty,ire=dO.call(Object);function sre(e){if(!fl(e)||gc(e)!=ere)return!1;var t=cO(e);if(t===null)return!0;var n=rre.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&dO.call(n)==ire}var are="[object Arguments]",ore="[object Array]",lre="[object Boolean]",cre="[object Date]",ure="[object Error]",hre="[object Function]",dre="[object Map]",fre="[object Number]",pre="[object Object]",mre="[object RegExp]",gre="[object Set]",yre="[object String]",bre="[object WeakMap]",vre="[object ArrayBuffer]",xre="[object DataView]",wre="[object Float32Array]",_re="[object Float64Array]",kre="[object Int8Array]",Sre="[object Int16Array]",Cre="[object Int32Array]",Ere="[object Uint8Array]",Tre="[object Uint8ClampedArray]",jre="[object Uint16Array]",Are="[object Uint32Array]",Ar={};Ar[wre]=Ar[_re]=Ar[kre]=Ar[Sre]=Ar[Cre]=Ar[Ere]=Ar[Tre]=Ar[jre]=Ar[Are]=!0;Ar[are]=Ar[ore]=Ar[vre]=Ar[lre]=Ar[xre]=Ar[cre]=Ar[ure]=Ar[hre]=Ar[dre]=Ar[fre]=Ar[pre]=Ar[mre]=Ar[gre]=Ar[yre]=Ar[bre]=!1;function Pre(e){return fl(e)&&Fw(e.length)&&!!Ar[gc(e)]}function Nre(e){return function(t){return e(t)}}var fO=typeof As=="object"&&As&&!As.nodeType&&As,Ad=fO&&typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,Ore=Ad&&Ad.exports===fO,My=Ore&&iO.process,AC=function(){try{var e=Ad&&Ad.require&&Ad.require("util").types;return e||My&&My.binding&&My.binding("util")}catch{}}(),PC=AC&&AC.isTypedArray,Bw=PC?Nre(PC):Pre;function dx(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Rre=Object.prototype,Mre=Rre.hasOwnProperty;function Lre(e,t,n){var r=e[t];(!(Mre.call(e,t)&&Af(r,n))||n===void 0&&!(t in e))&&Dw(e,t,n)}function Ire(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],u=void 0;u===void 0&&(u=e[o]),i?Dw(n,o,u):Lre(n,o,u)}return n}function $re(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Dre=9007199254740991,zre=/^(?:0|[1-9]\d*)$/;function Uw(e,t){var n=typeof e;return t=t??Dre,!!t&&(n=="number"||n!="symbol"&&zre.test(e))&&e>-1&&e%1==0&&e<t}var Fre=Object.prototype,Bre=Fre.hasOwnProperty;function pO(e,t){var n=Rs(e),r=!n&&ag(e),i=!n&&!r&&og(e),s=!n&&!r&&!i&&Bw(e),a=n||r||i||s,o=a?$re(e.length,String):[],u=o.length;for(var h in e)(t||Bre.call(e,h))&&!(a&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Uw(h,u)))&&o.push(h);return o}function Ure(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Hre=Object.prototype,Wre=Hre.hasOwnProperty;function Vre(e){if(!Ks(e))return Ure(e);var t=zw(e),n=[];for(var r in e)r=="constructor"&&(t||!Wre.call(e,r))||n.push(r);return n}function mO(e){return xh(e)?pO(e,!0):Vre(e)}function Gre(e){return Ire(e,mO(e))}function qre(e,t,n,r,i,s,a){var o=dx(e,n),u=dx(t,n),h=a.get(u);if(h){hx(e,n,h);return}var d=s?s(o,u,n+"",e,t,a):void 0,p=d===void 0;if(p){var m=Rs(u),g=!m&&og(u),v=!m&&!g&&Bw(u);d=u,m||g||v?Rs(o)?d=o:Kne(o)?d=Une(o):g?(p=!1,d=zne(u)):v?(p=!1,d=Bne(u)):d=[]:sre(u)||ag(u)?(d=o,ag(o)?d=Gre(o):(!Ks(o)||$w(o))&&(d=Vne(u))):p=!1}p&&(a.set(u,d),i(d,u,r,s,a),a.delete(u)),hx(e,n,d)}function gO(e,t,n,r,i){e!==t&&aO(t,function(s,a){if(i||(i=new io),Ks(s))qre(e,t,a,n,gO,r,i);else{var o=r?r(dx(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),hx(e,a,o)}},mO)}function o0(e){return e}function Yre(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var NC=Math.max;function Xre(e,t,n){return t=NC(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=NC(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),Yre(e,this,o)}}function Kre(e){return function(){return e}}var Zre=ig?function(e,t){return ig(e,"toString",{configurable:!0,enumerable:!1,value:Kre(t),writable:!0})}:o0,Qre=800,Jre=16,eie=Date.now;function tie(e){var t=0,n=0;return function(){var r=eie(),i=Jre-(r-n);if(n=r,i>0){if(++t>=Qre)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var nie=tie(Zre);function rie(e,t){return nie(Xre(e,t,o0),e+"")}function iie(e,t,n){if(!Ks(n))return!1;var r=typeof t;return(r=="number"?xh(n)&&Uw(t,n.length):r=="string"&&t in n)?Af(n[t],e):!1}function sie(e){return rie(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&iie(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var gs=sie(function(e,t,n){gO(e,t,n)}),Pf=function(t){var n=t.zDepth,r=t.radius,i=t.background,s=t.children,a=t.styles,o=a===void 0?{}:a,u=yn(gs({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":n===1});return Te.createElement("div",{style:u.wrap},Te.createElement("div",{style:u.bg}),Te.createElement("div",{style:u.content},s))};Pf.propTypes={background:Lt.string,zDepth:Lt.oneOf([0,1,2,3,4,5]),radius:Lt.number,styles:Lt.object};Pf.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Ly=function(){return Ma.Date.now()},aie=/\s/;function oie(e){for(var t=e.length;t--&&aie.test(e.charAt(t)););return t}var lie=/^\s+/;function cie(e){return e&&e.slice(0,oie(e)+1).replace(lie,"")}var uie="[object Symbol]";function l0(e){return typeof e=="symbol"||fl(e)&&gc(e)==uie}var OC=NaN,hie=/^[-+]0x[0-9a-f]+$/i,die=/^0b[01]+$/i,fie=/^0o[0-7]+$/i,pie=parseInt;function RC(e){if(typeof e=="number")return e;if(l0(e))return OC;if(Ks(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ks(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=cie(e);var n=die.test(e);return n||fie.test(e)?pie(e.slice(2),n?2:8):hie.test(e)?OC:+e}var mie="Expected a function",gie=Math.max,yie=Math.min;function yO(e,t,n){var r,i,s,a,o,u,h=0,d=!1,p=!1,m=!0;if(typeof e!="function")throw new TypeError(mie);t=RC(t)||0,Ks(n)&&(d=!!n.leading,p="maxWait"in n,s=p?gie(RC(n.maxWait)||0,t):s,m="trailing"in n?!!n.trailing:m);function g(E){var U=r,D=i;return r=i=void 0,h=E,a=e.apply(D,U),a}function v(E){return h=E,o=setTimeout(x,t),d?g(E):a}function w(E){var U=E-u,D=E-h,R=t-U;return p?yie(R,s-D):R}function C(E){var U=E-u,D=E-h;return u===void 0||U>=t||U<0||p&&D>=s}function x(){var E=Ly();if(C(E))return k(E);o=setTimeout(x,w(E))}function k(E){return o=void 0,m&&r?g(E):(r=i=void 0,a)}function A(){o!==void 0&&clearTimeout(o),h=0,r=u=i=o=void 0}function j(){return o===void 0?a:k(Ly())}function I(){var E=Ly(),U=C(E);if(r=arguments,i=this,u=E,U){if(o===void 0)return v(u);if(p)return clearTimeout(o),o=setTimeout(x,t),g(u)}return o===void 0&&(o=setTimeout(x,t)),a}return I.cancel=A,I.flush=j,I}var bie="Expected a function";function vie(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(bie);return Ks(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),yO(e,t,{leading:r,maxWait:t,trailing:i})}var xie=function(t,n,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=o-(r.getBoundingClientRect().left+window.pageXOffset),d=u-(r.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>s&&(h=s),d<0?d=0:d>a&&(d=a);var p=h/s,m=1-d/a;return{h:n.h,s:p,v:m,a:n.a,source:"hsv"}},wie=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Sie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c0=function(e){Sie(t,e);function t(n){_ie(this,t);var r=kie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,xie(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=vie(function(i,s,a){i(s,a)},50),r}return wie(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,a=i.white,o=i.black,u=i.pointer,h=i.circle,d=yn({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:a,black:o,pointer:u,circle:h}},{custom:!!this.props.style});return Te.createElement("div",{style:d.color,ref:function(m){return r.container=m},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Te.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),Te.createElement("div",{style:d.white,className:"saturation-white"},Te.createElement("div",{style:d.black,className:"saturation-black"}),Te.createElement("div",{style:d.pointer},this.props.pointer?Te.createElement(this.props.pointer,this.props):Te.createElement("div",{style:d.circle}))))}}]),t}(fe.PureComponent||fe.Component);function Cie(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Eie=lO(Object.keys,Object),Tie=Object.prototype,jie=Tie.hasOwnProperty;function Aie(e){if(!zw(e))return Eie(e);var t=[];for(var n in Object(e))jie.call(e,n)&&n!="constructor"&&t.push(n);return t}function Hw(e){return xh(e)?pO(e):Aie(e)}function Pie(e,t){return e&&aO(e,t,Hw)}function Nie(e,t){return function(n,r){if(n==null)return n;if(!xh(n))return e(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var bO=Nie(Pie);function Oie(e){return typeof e=="function"?e:o0}function Rie(e,t){var n=Rs(e)?Cie:bO;return n(e,Oie(t))}function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}var Mie=/^\s+/,Lie=/\s+$/;function Kt(e,t){if(e=e||"",t=t||{},e instanceof Kt)return e;if(!(this instanceof Kt))return new Kt(e,t);var n=Iie(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Kt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,s,a,o;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(t){return this._a=vO(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=LC(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=LC(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=MC(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=MC(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return IC(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Fie(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Rr(this._r,255)*100)+"%",g:Math.round(Rr(this._g,255)*100)+"%",b:Math.round(Rr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Rr(this._r,255)*100)+"%, "+Math.round(Rr(this._g,255)*100)+"%, "+Math.round(Rr(this._b,255)*100)+"%)":"rgba("+Math.round(Rr(this._r,255)*100)+"%, "+Math.round(Rr(this._g,255)*100)+"%, "+Math.round(Rr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Qie[IC(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+$C(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var s=Kt(t);r="#"+$C(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Kt(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Wie,arguments)},brighten:function(){return this._applyModification(Vie,arguments)},darken:function(){return this._applyModification(Gie,arguments)},desaturate:function(){return this._applyModification(Bie,arguments)},saturate:function(){return this._applyModification(Uie,arguments)},greyscale:function(){return this._applyModification(Hie,arguments)},spin:function(){return this._applyModification(qie,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(Kie,arguments)},complement:function(){return this._applyCombination(Yie,arguments)},monochromatic:function(){return this._applyCombination(Zie,arguments)},splitcomplement:function(){return this._applyCombination(Xie,arguments)},triad:function(){return this._applyCombination(DC,[3])},tetrad:function(){return this._applyCombination(DC,[4])}};Kt.fromRatio=function(e,t){if(lg(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=td(e[r]));e=n}return Kt(e,t)};function Iie(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof e=="string"&&(e=nse(e)),lg(e)=="object"&&(uo(e.r)&&uo(e.g)&&uo(e.b)?(t=$ie(e.r,e.g,e.b),a=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):uo(e.h)&&uo(e.s)&&uo(e.v)?(r=td(e.s),i=td(e.v),t=zie(e.h,r,i),a=!0,o="hsv"):uo(e.h)&&uo(e.s)&&uo(e.l)&&(r=td(e.s),s=td(e.l),t=Die(e.h,r,s),a=!0,o="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=vO(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function $ie(e,t,n){return{r:Rr(e,255)*255,g:Rr(t,255)*255,b:Rr(n,255)*255}}function MC(e,t,n){e=Rr(e,255),t=Rr(t,255),n=Rr(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var u=r-i;switch(a=o>.5?u/(2-r-i):u/(r+i),r){case e:s=(t-n)/u+(t<n?6:0);break;case t:s=(n-e)/u+2;break;case n:s=(e-t)/u+4;break}s/=6}return{h:s,s:a,l:o}}function Die(e,t,n){var r,i,s;e=Rr(e,360),t=Rr(t,100),n=Rr(n,100);function a(h,d,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(d-h)*6*p:p<1/2?d:p<2/3?h+(d-h)*(2/3-p)*6:h}if(t===0)r=i=s=n;else{var o=n<.5?n*(1+t):n+t-n*t,u=2*n-o;r=a(u,o,e+1/3),i=a(u,o,e),s=a(u,o,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function LC(e,t,n){e=Rr(e,255),t=Rr(t,255),n=Rr(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=r,u=r-i;if(a=r===0?0:u/r,r==i)s=0;else{switch(r){case e:s=(t-n)/u+(t<n?6:0);break;case t:s=(n-e)/u+2;break;case n:s=(e-t)/u+4;break}s/=6}return{h:s,s:a,v:o}}function zie(e,t,n){e=Rr(e,360)*6,t=Rr(t,100),n=Rr(n,100);var r=Math.floor(e),i=e-r,s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),u=r%6,h=[n,a,s,s,o,n][u],d=[o,n,n,a,s,s][u],p=[s,s,o,n,n,a][u];return{r:h*255,g:d*255,b:p*255}}function IC(e,t,n,r){var i=[wa(Math.round(e).toString(16)),wa(Math.round(t).toString(16)),wa(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Fie(e,t,n,r,i){var s=[wa(Math.round(e).toString(16)),wa(Math.round(t).toString(16)),wa(Math.round(n).toString(16)),wa(xO(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function $C(e,t,n,r){var i=[wa(xO(r)),wa(Math.round(e).toString(16)),wa(Math.round(t).toString(16)),wa(Math.round(n).toString(16))];return i.join("")}Kt.equals=function(e,t){return!e||!t?!1:Kt(e).toRgbString()==Kt(t).toRgbString()};Kt.random=function(){return Kt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Bie(e,t){t=t===0?0:t||10;var n=Kt(e).toHsl();return n.s-=t/100,n.s=u0(n.s),Kt(n)}function Uie(e,t){t=t===0?0:t||10;var n=Kt(e).toHsl();return n.s+=t/100,n.s=u0(n.s),Kt(n)}function Hie(e){return Kt(e).desaturate(100)}function Wie(e,t){t=t===0?0:t||10;var n=Kt(e).toHsl();return n.l+=t/100,n.l=u0(n.l),Kt(n)}function Vie(e,t){t=t===0?0:t||10;var n=Kt(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),Kt(n)}function Gie(e,t){t=t===0?0:t||10;var n=Kt(e).toHsl();return n.l-=t/100,n.l=u0(n.l),Kt(n)}function qie(e,t){var n=Kt(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Kt(n)}function Yie(e){var t=Kt(e).toHsl();return t.h=(t.h+180)%360,Kt(t)}function DC(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Kt(e).toHsl(),r=[Kt(e)],i=360/t,s=1;s<t;s++)r.push(Kt({h:(n.h+s*i)%360,s:n.s,l:n.l}));return r}function Xie(e){var t=Kt(e).toHsl(),n=t.h;return[Kt(e),Kt({h:(n+72)%360,s:t.s,l:t.l}),Kt({h:(n+216)%360,s:t.s,l:t.l})]}function Kie(e,t,n){t=t||6,n=n||30;var r=Kt(e).toHsl(),i=360/n,s=[Kt(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(Kt(r));return s}function Zie(e,t){t=t||6;for(var n=Kt(e).toHsv(),r=n.h,i=n.s,s=n.v,a=[],o=1/t;t--;)a.push(Kt({h:r,s:i,v:s})),s=(s+o)%1;return a}Kt.mix=function(e,t,n){n=n===0?0:n||50;var r=Kt(e).toRgb(),i=Kt(t).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Kt(a)};Kt.readability=function(e,t){var n=Kt(e),r=Kt(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Kt.isReadable=function(e,t,n){var r=Kt.readability(e,t),i,s;switch(s=!1,i=rse(n),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Kt.mostReadable=function(e,t,n){var r=null,i=0,s,a,o,u;n=n||{},a=n.includeFallbackColors,o=n.level,u=n.size;for(var h=0;h<t.length;h++)s=Kt.readability(e,t[h]),s>i&&(i=s,r=Kt(t[h]));return Kt.isReadable(e,r,{level:o,size:u})||!a?r:(n.includeFallbackColors=!1,Kt.mostReadable(e,["#fff","#000"],n))};var fx=Kt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Qie=Kt.hexNames=Jie(fx);function Jie(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function vO(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Rr(e,t){ese(e)&&(e="100%");var n=tse(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function u0(e){return Math.min(1,Math.max(0,e))}function ws(e){return parseInt(e,16)}function ese(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function tse(e){return typeof e=="string"&&e.indexOf("%")!=-1}function wa(e){return e.length==1?"0"+e:""+e}function td(e){return e<=1&&(e=e*100+"%"),e}function xO(e){return Math.round(parseFloat(e)*255).toString(16)}function zC(e){return ws(e)/255}var ua=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function uo(e){return!!ua.CSS_UNIT.exec(e)}function nse(e){e=e.replace(Mie,"").replace(Lie,"").toLowerCase();var t=!1;if(fx[e])e=fx[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=ua.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=ua.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ua.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=ua.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ua.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=ua.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ua.hex8.exec(e))?{r:ws(n[1]),g:ws(n[2]),b:ws(n[3]),a:zC(n[4]),format:t?"name":"hex8"}:(n=ua.hex6.exec(e))?{r:ws(n[1]),g:ws(n[2]),b:ws(n[3]),format:t?"name":"hex"}:(n=ua.hex4.exec(e))?{r:ws(n[1]+""+n[1]),g:ws(n[2]+""+n[2]),b:ws(n[3]+""+n[3]),a:zC(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=ua.hex3.exec(e))?{r:ws(n[1]+""+n[1]),g:ws(n[2]+""+n[2]),b:ws(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function rse(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var FC=function(t){var n=["r","g","b","a","h","s","l","v"],r=0,i=0;return Rie(n,function(s){if(t[s]&&(r+=1,isNaN(t[s])||(i+=1),s==="s"||s==="l")){var a=/^\d+%$/;a.test(t[s])&&(i+=1)}}),r===i?t:!1},nd=function(t,n){var r=t.hex?Kt(t.hex):Kt(t),i=r.toHsl(),s=r.toHsv(),a=r.toRgb(),o=r.toHex();i.s===0&&(i.h=n||0,s.h=n||0);var u=o==="000000"&&a.a===0;return{hsl:i,hex:u?"transparent":"#"+o,rgb:a,hsv:s,oldHue:t.h||n||i.h,source:t.source}},_l=function(t){if(t==="transparent")return!0;var n=String(t).charAt(0)==="#"?1:0;return t.length!==4+n&&t.length<7+n&&Kt(t).isValid()},Ww=function(t){if(!t)return"#fff";var n=nd(t);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},Iy=function(t,n){var r=t.replace("","");return Kt(n+" ("+r+")")._ok},Dh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ise=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function sse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ase(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ose(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ys=function(t){var n=function(r){ose(i,r);function i(s){sse(this,i);var a=ase(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(o,u){var h=FC(o);if(h){var d=nd(o,o.h||a.state.oldHue);a.setState(d),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,d,u),a.props.onChange&&a.props.onChange(d,u)}},a.handleSwatchHover=function(o,u){var h=FC(o);if(h){var d=nd(o,o.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(d,u)}},a.state=Dh({},nd(s.color,0)),a.debounce=yO(function(o,u,h){o(u,h)},100),a}return ise(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),Te.createElement(t,Dh({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,o){return Dh({},nd(a.color,o.oldHue))}}]),i}(fe.PureComponent||fe.Component);return n.propTypes=Dh({},t.propTypes),n.defaultProps=Dh({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},lse=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cse=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function use(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function hse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dse=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){hse(i,r);function i(){var s,a,o,u;use(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return u=(a=(o=BC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),o),o.state={focus:!1},o.handleFocus=function(){return o.setState({focus:!0})},o.handleBlur=function(){return o.setState({focus:!1})},a),BC(o,u)}return cse(i,[{key:"render",value:function(){return Te.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},Te.createElement(t,lse({},this.props,this.state)))}}]),i}(Te.Component)},UC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fse=13,pse=function(t){var n=t.color,r=t.style,i=t.onClick,s=i===void 0?function(){}:i,a=t.onHover,o=t.title,u=o===void 0?n:o,h=t.children,d=t.focus,p=t.focusStyle,m=p===void 0?{}:p,g=n==="transparent",v=yn({default:{swatch:UC({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,d?m:{})}}),w=function(j){return s(n,j)},C=function(j){return j.keyCode===fse&&s(n,j)},x=function(j){return a(n,j)},k={};return a&&(k.onMouseOver=x),Te.createElement("div",UC({style:v.swatch,onClick:w,title:u,tabIndex:0,onKeyDown:C},k),h,g&&Te.createElement(bh,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const vc=dse(pse);var mse=function(t){var n=t.direction,r=yn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return Te.createElement("div",{style:r.picker})},gse=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wO=function(t){var n=t.rgb,r=t.hsl,i=t.width,s=t.height,a=t.onChange,o=t.direction,u=t.style,h=t.renderers,d=t.pointer,p=t.className,m=p===void 0?"":p,g=yn({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:u}}});return Te.createElement("div",{style:g.picker,className:"alpha-picker "+m},Te.createElement(Iw,gse({},g.alpha,{rgb:n,hsl:r,pointer:d,renderers:h,onChange:a,direction:o})))};wO.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:mse};ys(wO);function _O(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var yse="__lodash_hash_undefined__";function bse(e){return this.__data__.set(e,yse),this}function vse(e){return this.__data__.has(e)}function cg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ro;++t<n;)this.add(e[t])}cg.prototype.add=cg.prototype.push=bse;cg.prototype.has=vse;function xse(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function wse(e,t){return e.has(t)}var _se=1,kse=2;function kO(e,t,n,r,i,s){var a=n&_se,o=e.length,u=t.length;if(o!=u&&!(a&&u>o))return!1;var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=-1,m=!0,g=n&kse?new cg:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var v=e[p],w=t[p];if(r)var C=a?r(w,v,p,t,e,s):r(v,w,p,e,t,s);if(C!==void 0){if(C)continue;m=!1;break}if(g){if(!xse(t,function(x,k){if(!wse(g,k)&&(v===x||i(v,x,n,r,s)))return g.push(k)})){m=!1;break}}else if(!(v===w||i(v,w,n,r,s))){m=!1;break}}return s.delete(e),s.delete(t),m}function Sse(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Cse(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Ese=1,Tse=2,jse="[object Boolean]",Ase="[object Date]",Pse="[object Error]",Nse="[object Map]",Ose="[object Number]",Rse="[object RegExp]",Mse="[object Set]",Lse="[object String]",Ise="[object Symbol]",$se="[object ArrayBuffer]",Dse="[object DataView]",HC=dl?dl.prototype:void 0,$y=HC?HC.valueOf:void 0;function zse(e,t,n,r,i,s,a){switch(n){case Dse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $se:return!(e.byteLength!=t.byteLength||!s(new sg(e),new sg(t)));case jse:case Ase:case Ose:return Af(+e,+t);case Pse:return e.name==t.name&&e.message==t.message;case Rse:case Lse:return e==t+"";case Nse:var o=Sse;case Mse:var u=r&Ese;if(o||(o=Cse),e.size!=t.size&&!u)return!1;var h=a.get(e);if(h)return h==t;r|=Tse,a.set(e,t);var d=kO(o(e),o(t),r,i,s,a);return a.delete(e),d;case Ise:if($y)return $y.call(e)==$y.call(t)}return!1}function Fse(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Bse(e,t,n){var r=t(e);return Rs(e)?r:Fse(r,n(e))}function Use(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Hse(){return[]}var Wse=Object.prototype,Vse=Wse.propertyIsEnumerable,WC=Object.getOwnPropertySymbols,Gse=WC?function(e){return e==null?[]:(e=Object(e),Use(WC(e),function(t){return Vse.call(e,t)}))}:Hse;function VC(e){return Bse(e,Hw,Gse)}var qse=1,Yse=Object.prototype,Xse=Yse.hasOwnProperty;function Kse(e,t,n,r,i,s){var a=n&qse,o=VC(e),u=o.length,h=VC(t),d=h.length;if(u!=d&&!a)return!1;for(var p=u;p--;){var m=o[p];if(!(a?m in t:Xse.call(t,m)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var w=!0;s.set(e,t),s.set(t,e);for(var C=a;++p<u;){m=o[p];var x=e[m],k=t[m];if(r)var A=a?r(k,x,m,t,e,s):r(x,k,m,e,t,s);if(!(A===void 0?x===k||i(x,k,n,r,s):A)){w=!1;break}C||(C=m=="constructor")}if(w&&!C){var j=e.constructor,I=t.constructor;j!=I&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof I=="function"&&I instanceof I)&&(w=!1)}return s.delete(e),s.delete(t),w}var px=bc(Ma,"DataView"),mx=bc(Ma,"Promise"),gx=bc(Ma,"Set"),yx=bc(Ma,"WeakMap"),GC="[object Map]",Zse="[object Object]",qC="[object Promise]",YC="[object Set]",XC="[object WeakMap]",KC="[object DataView]",Qse=yc(px),Jse=yc(nf),eae=yc(mx),tae=yc(gx),nae=yc(yx),Go=gc;(px&&Go(new px(new ArrayBuffer(1)))!=KC||nf&&Go(new nf)!=GC||mx&&Go(mx.resolve())!=qC||gx&&Go(new gx)!=YC||yx&&Go(new yx)!=XC)&&(Go=function(e){var t=gc(e),n=t==Zse?e.constructor:void 0,r=n?yc(n):"";if(r)switch(r){case Qse:return KC;case Jse:return GC;case eae:return qC;case tae:return YC;case nae:return XC}return t});var rae=1,ZC="[object Arguments]",QC="[object Array]",kp="[object Object]",iae=Object.prototype,JC=iae.hasOwnProperty;function sae(e,t,n,r,i,s){var a=Rs(e),o=Rs(t),u=a?QC:Go(e),h=o?QC:Go(t);u=u==ZC?kp:u,h=h==ZC?kp:h;var d=u==kp,p=h==kp,m=u==h;if(m&&og(e)){if(!og(t))return!1;a=!0,d=!1}if(m&&!d)return s||(s=new io),a||Bw(e)?kO(e,t,n,r,i,s):zse(e,t,u,n,r,i,s);if(!(n&rae)){var g=d&&JC.call(e,"__wrapped__"),v=p&&JC.call(t,"__wrapped__");if(g||v){var w=g?e.value():e,C=v?t.value():t;return s||(s=new io),i(w,C,n,r,s)}}return m?(s||(s=new io),Kse(e,t,n,r,i,s)):!1}function Vw(e,t,n,r,i){return e===t?!0:e==null||t==null||!fl(e)&&!fl(t)?e!==e&&t!==t:sae(e,t,n,r,Vw,i)}var aae=1,oae=2;function lae(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=n[i];var o=a[0],u=e[o],h=a[1];if(a[2]){if(u===void 0&&!(o in e))return!1}else{var d=new io,p;if(!(p===void 0?Vw(h,u,aae|oae,r,d):p))return!1}}return!0}function SO(e){return e===e&&!Ks(e)}function cae(e){for(var t=Hw(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,SO(i)]}return t}function CO(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function uae(e){var t=cae(e);return t.length==1&&t[0][2]?CO(t[0][0],t[0][1]):function(n){return n===e||lae(n,e,t)}}var hae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dae=/^\w*$/;function Gw(e,t){if(Rs(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||l0(e)?!0:dae.test(e)||!hae.test(e)||t!=null&&e in Object(t)}var fae="Expected a function";function qw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(fae);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(qw.Cache||Ro),n}qw.Cache=Ro;var pae=500;function mae(e){var t=qw(e,function(r){return n.size===pae&&n.clear(),r}),n=t.cache;return t}var gae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yae=/\\(\\)?/g,bae=mae(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(gae,function(n,r,i,s){t.push(i?s.replace(yae,"$1"):r||n)}),t}),eE=dl?dl.prototype:void 0,tE=eE?eE.toString:void 0;function EO(e){if(typeof e=="string")return e;if(Rs(e))return _O(e,EO)+"";if(l0(e))return tE?tE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function vae(e){return e==null?"":EO(e)}function TO(e,t){return Rs(e)?e:Gw(e,t)?[e]:bae(vae(e))}function h0(e){if(typeof e=="string"||l0(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function jO(e,t){t=TO(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[h0(t[n++])];return n&&n==r?e:void 0}function xae(e,t,n){var r=e==null?void 0:jO(e,t);return r===void 0?n:r}function wae(e,t){return e!=null&&t in Object(e)}function _ae(e,t,n){t=TO(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=h0(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Fw(i)&&Uw(a,i)&&(Rs(e)||ag(e)))}function kae(e,t){return e!=null&&_ae(e,t,wae)}var Sae=1,Cae=2;function Eae(e,t){return Gw(e)&&SO(t)?CO(h0(e),t):function(n){var r=xae(n,e);return r===void 0&&r===t?kae(n,e):Vw(t,r,Sae|Cae)}}function Tae(e){return function(t){return t==null?void 0:t[e]}}function jae(e){return function(t){return jO(t,e)}}function Aae(e){return Gw(e)?Tae(h0(e)):jae(e)}function Pae(e){return typeof e=="function"?e:e==null?o0:typeof e=="object"?Rs(e)?Eae(e[0],e[1]):uae(e):Aae(e)}function Nae(e,t){var n=-1,r=xh(e)?Array(e.length):[];return bO(e,function(i,s,a){r[++n]=t(i,s,a)}),r}function xc(e,t){var n=Rs(e)?_O:Nae;return n(e,Pae(t))}var Oae=function(t){var n=t.colors,r=t.onClick,i=t.onSwatchHover,s=yn({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Te.createElement("div",{style:s.swatches},xc(n,function(a){return Te.createElement(vc,{key:a,color:a,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+a}})}),Te.createElement("div",{style:s.clear}))},Yw=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.hex,s=t.colors,a=t.width,o=t.triangle,u=t.styles,h=u===void 0?{}:u,d=t.className,p=d===void 0?"":d,m=i==="transparent",g=function(C,x){_l(C)&&n({hex:C,source:"hex"},x)},v=yn(gs({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Ww(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},h),{"hide-triangle":o==="hide"});return Te.createElement("div",{style:v.card,className:"block-picker "+p},Te.createElement("div",{style:v.triangle}),Te.createElement("div",{style:v.head},m&&Te.createElement(bh,{borderRadius:"6px 6px 0 0"}),Te.createElement("div",{style:v.label},i)),Te.createElement("div",{style:v.body},Te.createElement(Oae,{colors:s,onClick:g,onSwatchHover:r}),Te.createElement(Ln,{style:{input:v.input},value:i,onChange:g})))};Yw.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),colors:Lt.arrayOf(Lt.string),triangle:Lt.oneOf(["top","hide"]),styles:Lt.object};Yw.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};ys(Yw);var Wc={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Vc={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Gc={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},qc={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Yc={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Xc={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Kc={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Zc={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Qc={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},rd={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Jc={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},eu={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},tu={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},nu={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},ru={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},iu={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},su={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},au={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},AO=function(t){var n=t.color,r=t.onClick,i=t.onSwatchHover,s=t.hover,a=t.active,o=t.circleSize,u=t.circleSpacing,h=yn({default:{swatch:{width:o,height:o,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:s,active:a});return Te.createElement("div",{style:h.swatch},Te.createElement(vc,{style:h.Swatch,color:n,onClick:r,onHover:i,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+n}}))};AO.defaultProps={circleSize:28,circleSpacing:14};const Rae=Lw(AO);var Xw=function(t){var n=t.width,r=t.onChange,i=t.onSwatchHover,s=t.colors,a=t.hex,o=t.circleSize,u=t.styles,h=u===void 0?{}:u,d=t.circleSpacing,p=t.className,m=p===void 0?"":p,g=yn(gs({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}},h)),v=function(C,x){return r({hex:C,source:"hex"},x)};return Te.createElement("div",{style:g.card,className:"circle-picker "+m},xc(s,function(w){return Te.createElement(Rae,{key:w,color:w,onClick:v,onSwatchHover:i,active:a===w.toLowerCase(),circleSize:o,circleSpacing:d})}))};Xw.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),circleSize:Lt.number,circleSpacing:Lt.number,styles:Lt.object};Xw.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Wc[500],Vc[500],Gc[500],qc[500],Yc[500],Xc[500],Kc[500],Zc[500],Qc[500],rd[500],Jc[500],eu[500],tu[500],nu[500],ru[500],iu[500],su[500],au[500]],styles:{}};ys(Xw);function nE(e){return e===void 0}var PO={};Object.defineProperty(PO,"__esModule",{value:!0});var rE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mae=fe,iE=Lae(Mae);function Lae(e){return e&&e.__esModule?e:{default:e}}function Iae(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Sp=24,$ae=PO.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Sp:r,s=e.height,a=s===void 0?Sp:s,o=e.style,u=o===void 0?{}:o,h=Iae(e,["fill","width","height","style"]);return iE.default.createElement("svg",rE({viewBox:"0 0 "+Sp+" "+Sp,style:rE({fill:n,width:i,height:a},u)},h),iE.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Dae=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function zae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Bae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NO=function(e){Bae(t,e);function t(n){zae(this,t);var r=Fae(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?_l(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(nE(i.s)?r.props.hsl.s:i.s),l:Number(nE(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return Dae(t,[{key:"render",value:function(){var r=this,i=yn({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=Te.createElement("div",{style:i.fields,className:"flexbox-fix"},Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=Te.createElement("div",{style:i.fields,className:"flexbox-fix"},Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Te.createElement("div",{style:i.alpha},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=Te.createElement("div",{style:i.fields,className:"flexbox-fix"},Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),Te.createElement("div",{style:i.field},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),Te.createElement("div",{style:i.alpha},Te.createElement(Ln,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Te.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,Te.createElement("div",{style:i.toggle},Te.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(o){return r.icon=o}},Te.createElement($ae,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t}(Te.Component);NO.defaultProps={view:"hex"};var sE=function(){var t=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Te.createElement("div",{style:t.picker})},Uae=function(){var t=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Te.createElement("div",{style:t.picker})},Kw=function(t){var n=t.width,r=t.onChange,i=t.disableAlpha,s=t.rgb,a=t.hsl,o=t.hsv,u=t.hex,h=t.renderers,d=t.styles,p=d===void 0?{}:d,m=t.className,g=m===void 0?"":m,v=t.defaultView,w=yn(gs({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},p),{disableAlpha:i});return Te.createElement("div",{style:w.picker,className:"chrome-picker "+g},Te.createElement("div",{style:w.saturation},Te.createElement(c0,{style:w.Saturation,hsl:a,hsv:o,pointer:Uae,onChange:r})),Te.createElement("div",{style:w.body},Te.createElement("div",{style:w.controls,className:"flexbox-fix"},Te.createElement("div",{style:w.color},Te.createElement("div",{style:w.swatch},Te.createElement("div",{style:w.active}),Te.createElement(bh,{renderers:h}))),Te.createElement("div",{style:w.toggles},Te.createElement("div",{style:w.hue},Te.createElement(vh,{style:w.Hue,hsl:a,pointer:sE,onChange:r})),Te.createElement("div",{style:w.alpha},Te.createElement(Iw,{style:w.Alpha,rgb:s,hsl:a,pointer:sE,renderers:h,onChange:r})))),Te.createElement(NO,{rgb:s,hsl:a,hex:u,view:v,onChange:r,disableAlpha:i})))};Kw.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),disableAlpha:Lt.bool,styles:Lt.object,defaultView:Lt.oneOf(["hex","rgb","hsl"])};Kw.defaultProps={width:225,disableAlpha:!1,styles:{}};ys(Kw);var Hae=function(t){var n=t.color,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=t.active,o=yn({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Ww(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return Te.createElement(vc,{style:o.color,color:n,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},Te.createElement("div",{style:o.dot}))},Wae=function(t){var n=t.hex,r=t.rgb,i=t.onChange,s=yn({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(u,h){u.r||u.g||u.b?i({r:u.r||r.r,g:u.g||r.g,b:u.b||r.b,source:"rgb"},h):i({hex:u.hex,source:"hex"},h)};return Te.createElement("div",{style:s.fields,className:"flexbox-fix"},Te.createElement("div",{style:s.active}),Te.createElement(Ln,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:n,onChange:a}),Te.createElement(Ln,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:a}),Te.createElement(Ln,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:a}),Te.createElement(Ln,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:a}))},Zw=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.colors,s=t.hex,a=t.rgb,o=t.styles,u=o===void 0?{}:o,h=t.className,d=h===void 0?"":h,p=yn(gs({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},u)),m=function(v,w){v.hex?_l(v.hex)&&n({hex:v.hex,source:"hex"},w):n(v,w)};return Te.createElement(Pf,{style:p.Compact,styles:u},Te.createElement("div",{style:p.compact,className:"compact-picker "+d},Te.createElement("div",null,xc(i,function(g){return Te.createElement(Hae,{key:g,color:g,active:g.toLowerCase()===s,onClick:m,onSwatchHover:r})}),Te.createElement("div",{style:p.clear})),Te.createElement(Wae,{hex:s,rgb:a,onChange:m})))};Zw.propTypes={colors:Lt.arrayOf(Lt.string),styles:Lt.object};Zw.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};ys(Zw);var Vae=function(t){var n=t.hover,r=t.color,i=t.onClick,s=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=yn({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:n});return Te.createElement("div",{style:o.swatch},Te.createElement(vc,{color:r,onClick:i,onHover:s,focusStyle:a}))};const Gae=Lw(Vae);var Qw=function(t){var n=t.width,r=t.colors,i=t.onChange,s=t.onSwatchHover,a=t.triangle,o=t.styles,u=o===void 0?{}:o,h=t.className,d=h===void 0?"":h,p=yn(gs({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},u),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),m=function(v,w){return i({hex:v,source:"hex"},w)};return Te.createElement("div",{style:p.card,className:"github-picker "+d},Te.createElement("div",{style:p.triangleShadow}),Te.createElement("div",{style:p.triangle}),xc(r,function(g){return Te.createElement(Gae,{color:g,key:g,onClick:m,onSwatchHover:s})}))};Qw.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),colors:Lt.arrayOf(Lt.string),triangle:Lt.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Lt.object};Qw.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};ys(Qw);var qae=function(t){var n=t.direction,r=yn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return Te.createElement("div",{style:r.picker})},Yae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jw=function(t){var n=t.width,r=t.height,i=t.onChange,s=t.hsl,a=t.direction,o=t.pointer,u=t.styles,h=u===void 0?{}:u,d=t.className,p=d===void 0?"":d,m=yn(gs({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},h)),g=function(w){return i({a:1,h:w.h,l:.5,s:1})};return Te.createElement("div",{style:m.picker,className:"hue-picker "+p},Te.createElement(vh,Yae({},m.hue,{hsl:s,pointer:o,onChange:g,direction:a})))};Jw.propTypes={styles:Lt.object};Jw.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:qae,styles:{}};ys(Jw);var Xae=function(t){var n=t.onChange,r=t.hex,i=t.rgb,s=t.styles,a=s===void 0?{}:s,o=t.className,u=o===void 0?"":o,h=yn(gs({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),d=function(m,g){m.hex?_l(m.hex)&&n({hex:m.hex,source:"hex"},g):(m.r||m.g||m.b)&&n({r:m.r||i.r,g:m.g||i.g,b:m.b||i.b,source:"rgb"},g)};return Te.createElement(Pf,{styles:a},Te.createElement("div",{style:h.material,className:"material-picker "+u},Te.createElement(Ln,{style:{wrap:h.HEXwrap,input:h.HEXinput,label:h.HEXlabel},label:"hex",value:r,onChange:d}),Te.createElement("div",{style:h.split,className:"flexbox-fix"},Te.createElement("div",{style:h.third},Te.createElement(Ln,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"r",value:i.r,onChange:d})),Te.createElement("div",{style:h.third},Te.createElement(Ln,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"g",value:i.g,onChange:d})),Te.createElement("div",{style:h.third},Te.createElement(Ln,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"b",value:i.b,onChange:d})))))};ys(Xae);var Kae=function(t){var n=t.onChange,r=t.rgb,i=t.hsv,s=t.hex,a=yn({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(h,d){h["#"]?_l(h["#"])&&n({hex:h["#"],source:"hex"},d):h.r||h.g||h.b?n({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,source:"rgb"},d):(h.h||h.s||h.v)&&n({h:h.h||i.h,s:h.s||i.s,v:h.v||i.v,source:"hsv"},d)};return Te.createElement("div",{style:a.fields},Te.createElement(Ln,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:o}),Te.createElement(Ln,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:o}),Te.createElement(Ln,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:o}),Te.createElement("div",{style:a.divider}),Te.createElement(Ln,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:o}),Te.createElement(Ln,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:o}),Te.createElement(Ln,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:o}),Te.createElement("div",{style:a.divider}),Te.createElement(Ln,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:s.replace("#",""),onChange:o}),Te.createElement("div",{style:a.fieldSymbols},Te.createElement("div",{style:a.symbol},""),Te.createElement("div",{style:a.symbol},"%"),Te.createElement("div",{style:a.symbol},"%")))},Zae=function(t){var n=t.hsl,r=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return Te.createElement("div",{style:r.picker})},Qae=function(){var t=yn({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Te.createElement("div",{style:t.pointer},Te.createElement("div",{style:t.left},Te.createElement("div",{style:t.leftInside})),Te.createElement("div",{style:t.right},Te.createElement("div",{style:t.rightInside})))},aE=function(t){var n=t.onClick,r=t.label,i=t.children,s=t.active,a=yn({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return Te.createElement("div",{style:a.button,onClick:n},r||i)},Jae=function(t){var n=t.rgb,r=t.currentColor,i=yn({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Te.createElement("div",null,Te.createElement("div",{style:i.label},"new"),Te.createElement("div",{style:i.swatches},Te.createElement("div",{style:i.new}),Te.createElement("div",{style:i.current})),Te.createElement("div",{style:i.label},"current"))},eoe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function toe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function noe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function roe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var e_=function(e){roe(t,e);function t(n){toe(this,t);var r=noe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:n.hex},r}return eoe(t,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,a=r.className,o=a===void 0?"":a,u=yn(gs({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return Te.createElement("div",{style:u.picker,className:"photoshop-picker "+o},Te.createElement("div",{style:u.head},this.props.header),Te.createElement("div",{style:u.body,className:"flexbox-fix"},Te.createElement("div",{style:u.saturation},Te.createElement(c0,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Zae,onChange:this.props.onChange})),Te.createElement("div",{style:u.hue},Te.createElement(vh,{direction:"vertical",hsl:this.props.hsl,pointer:Qae,onChange:this.props.onChange})),Te.createElement("div",{style:u.controls},Te.createElement("div",{style:u.top,className:"flexbox-fix"},Te.createElement("div",{style:u.previews},Te.createElement(Jae,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Te.createElement("div",{style:u.actions},Te.createElement(aE,{label:"OK",onClick:this.props.onAccept,active:!0}),Te.createElement(aE,{label:"Cancel",onClick:this.props.onCancel}),Te.createElement(Kae,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(Te.Component);e_.propTypes={header:Lt.string,styles:Lt.object};e_.defaultProps={header:"Color Picker",styles:{}};ys(e_);var ioe=function(t){var n=t.onChange,r=t.rgb,i=t.hsl,s=t.hex,a=t.disableAlpha,o=yn({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),u=function(d,p){d.hex?_l(d.hex)&&n({hex:d.hex,source:"hex"},p):d.r||d.g||d.b?n({r:d.r||r.r,g:d.g||r.g,b:d.b||r.b,a:r.a,source:"rgb"},p):d.a&&(d.a<0?d.a=0:d.a>100&&(d.a=100),d.a/=100,n({h:i.h,s:i.s,l:i.l,a:d.a,source:"rgb"},p))};return Te.createElement("div",{style:o.fields,className:"flexbox-fix"},Te.createElement("div",{style:o.double},Te.createElement(Ln,{style:{input:o.input,label:o.label},label:"hex",value:s.replace("#",""),onChange:u})),Te.createElement("div",{style:o.single},Te.createElement(Ln,{style:{input:o.input,label:o.label},label:"r",value:r.r,onChange:u,dragLabel:"true",dragMax:"255"})),Te.createElement("div",{style:o.single},Te.createElement(Ln,{style:{input:o.input,label:o.label},label:"g",value:r.g,onChange:u,dragLabel:"true",dragMax:"255"})),Te.createElement("div",{style:o.single},Te.createElement(Ln,{style:{input:o.input,label:o.label},label:"b",value:r.b,onChange:u,dragLabel:"true",dragMax:"255"})),Te.createElement("div",{style:o.alpha},Te.createElement(Ln,{style:{input:o.input,label:o.label},label:"a",value:Math.round(r.a*100),onChange:u,dragLabel:"true",dragMax:"100"})))},soe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OO=function(t){var n=t.colors,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=yn({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),o=function(h,d){i({hex:h,source:"hex"},d)};return Te.createElement("div",{style:a.colors,className:"flexbox-fix"},n.map(function(u){var h=typeof u=="string"?{color:u}:u,d=""+h.color+(h.title||"");return Te.createElement("div",{key:d,style:a.swatchWrap},Te.createElement(vc,soe({},h,{style:a.swatch,onClick:o,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+h.color}})))}))};OO.propTypes={colors:Lt.arrayOf(Lt.oneOfType([Lt.string,Lt.shape({color:Lt.string,title:Lt.string})])).isRequired};var aoe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t_=function(t){var n=t.width,r=t.rgb,i=t.hex,s=t.hsv,a=t.hsl,o=t.onChange,u=t.onSwatchHover,h=t.disableAlpha,d=t.presetColors,p=t.renderers,m=t.styles,g=m===void 0?{}:m,v=t.className,w=v===void 0?"":v,C=yn(gs({default:aoe({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},g),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},g),{disableAlpha:h});return Te.createElement("div",{style:C.picker,className:"sketch-picker "+w},Te.createElement("div",{style:C.saturation},Te.createElement(c0,{style:C.Saturation,hsl:a,hsv:s,onChange:o})),Te.createElement("div",{style:C.controls,className:"flexbox-fix"},Te.createElement("div",{style:C.sliders},Te.createElement("div",{style:C.hue},Te.createElement(vh,{style:C.Hue,hsl:a,onChange:o})),Te.createElement("div",{style:C.alpha},Te.createElement(Iw,{style:C.Alpha,rgb:r,hsl:a,renderers:p,onChange:o}))),Te.createElement("div",{style:C.color},Te.createElement(bh,null),Te.createElement("div",{style:C.activeColor}))),Te.createElement(ioe,{rgb:r,hsl:a,hex:i,onChange:o,disableAlpha:h}),Te.createElement(OO,{colors:d,onClick:o,onSwatchHover:u}))};t_.propTypes={disableAlpha:Lt.bool,width:Lt.oneOfType([Lt.string,Lt.number]),styles:Lt.object};t_.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};ys(t_);var zh=function(t){var n=t.hsl,r=t.offset,i=t.onClick,s=i===void 0?function(){}:i,a=t.active,o=t.first,u=t.last,h=yn({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:u}),d=function(m){return s({h:n.h,s:.5,l:r,source:"hsl"},m)};return Te.createElement("div",{style:h.swatch,onClick:d})},ooe=function(t){var n=t.onClick,r=t.hsl,i=yn({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return Te.createElement("div",{style:i.swatches},Te.createElement("div",{style:i.swatch},Te.createElement(zh,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:n,first:!0})),Te.createElement("div",{style:i.swatch},Te.createElement(zh,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:n})),Te.createElement("div",{style:i.swatch},Te.createElement(zh,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:n})),Te.createElement("div",{style:i.swatch},Te.createElement(zh,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:n})),Te.createElement("div",{style:i.swatch},Te.createElement(zh,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:n,last:!0})),Te.createElement("div",{style:i.clear}))},loe=function(){var t=yn({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Te.createElement("div",{style:t.picker})},n_=function(t){var n=t.hsl,r=t.onChange,i=t.pointer,s=t.styles,a=s===void 0?{}:s,o=t.className,u=o===void 0?"":o,h=yn(gs({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return Te.createElement("div",{style:h.wrap||{},className:"slider-picker "+u},Te.createElement("div",{style:h.hue},Te.createElement(vh,{style:h.Hue,hsl:n,pointer:i,onChange:r})),Te.createElement("div",{style:h.swatches},Te.createElement(ooe,{hsl:n,onClick:r})))};n_.propTypes={styles:Lt.object};n_.defaultProps={pointer:loe,styles:{}};ys(n_);var RO={};Object.defineProperty(RO,"__esModule",{value:!0});var oE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},coe=fe,lE=uoe(coe);function uoe(e){return e&&e.__esModule?e:{default:e}}function hoe(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Cp=24,doe=RO.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Cp:r,s=e.height,a=s===void 0?Cp:s,o=e.style,u=o===void 0?{}:o,h=hoe(e,["fill","width","height","style"]);return lE.default.createElement("svg",oE({viewBox:"0 0 "+Cp+" "+Cp,style:oE({fill:n,width:i,height:a},u)},h),lE.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},foe=function(t){var n=t.color,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=t.first,o=t.last,u=t.active,h=yn({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:Ww(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:u,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return Te.createElement(vc,{color:n,style:h.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},Te.createElement("div",{style:h.check},Te.createElement(doe,null)))},poe=function(t){var n=t.onClick,r=t.onSwatchHover,i=t.group,s=t.active,a=yn({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Te.createElement("div",{style:a.group},xc(i,function(o,u){return Te.createElement(foe,{key:o,color:o,active:o.toLowerCase()===s,first:u===0,last:u===i.length-1,onClick:n,onSwatchHover:r})}))},r_=function(t){var n=t.width,r=t.height,i=t.onChange,s=t.onSwatchHover,a=t.colors,o=t.hex,u=t.styles,h=u===void 0?{}:u,d=t.className,p=d===void 0?"":d,m=yn(gs({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},h)),g=function(w,C){return i({hex:w,source:"hex"},C)};return Te.createElement("div",{style:m.picker,className:"swatches-picker "+p},Te.createElement(Pf,null,Te.createElement("div",{style:m.overflow},Te.createElement("div",{style:m.body},xc(a,function(v){return Te.createElement(poe,{key:v.toString(),group:v,active:o,onClick:g,onSwatchHover:s})}),Te.createElement("div",{style:m.clear})))))};r_.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),height:Lt.oneOfType([Lt.string,Lt.number]),colors:Lt.arrayOf(Lt.arrayOf(Lt.string)),styles:Lt.object};r_.defaultProps={width:320,height:240,colors:[[Wc[900],Wc[700],Wc[500],Wc[300],Wc[100]],[Vc[900],Vc[700],Vc[500],Vc[300],Vc[100]],[Gc[900],Gc[700],Gc[500],Gc[300],Gc[100]],[qc[900],qc[700],qc[500],qc[300],qc[100]],[Yc[900],Yc[700],Yc[500],Yc[300],Yc[100]],[Xc[900],Xc[700],Xc[500],Xc[300],Xc[100]],[Kc[900],Kc[700],Kc[500],Kc[300],Kc[100]],[Zc[900],Zc[700],Zc[500],Zc[300],Zc[100]],[Qc[900],Qc[700],Qc[500],Qc[300],Qc[100]],["#194D33",rd[700],rd[500],rd[300],rd[100]],[Jc[900],Jc[700],Jc[500],Jc[300],Jc[100]],[eu[900],eu[700],eu[500],eu[300],eu[100]],[tu[900],tu[700],tu[500],tu[300],tu[100]],[nu[900],nu[700],nu[500],nu[300],nu[100]],[ru[900],ru[700],ru[500],ru[300],ru[100]],[iu[900],iu[700],iu[500],iu[300],iu[100]],[su[900],su[700],su[500],su[300],su[100]],[au[900],au[700],au[500],au[300],au[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};ys(r_);var i_=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.hex,s=t.colors,a=t.width,o=t.triangle,u=t.styles,h=u===void 0?{}:u,d=t.className,p=d===void 0?"":d,m=yn(gs({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},h),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right"}),g=function(w,C){_l(w)&&n({hex:w,source:"hex"},C)};return Te.createElement("div",{style:m.card,className:"twitter-picker "+p},Te.createElement("div",{style:m.triangleShadow}),Te.createElement("div",{style:m.triangle}),Te.createElement("div",{style:m.body},xc(s,function(v,w){return Te.createElement(vc,{key:w,color:v,hex:v,style:m.swatch,onClick:g,onHover:r,focusStyle:{boxShadow:"0 0 4px "+v}})}),Te.createElement("div",{style:m.hash},"#"),Te.createElement(Ln,{label:null,style:{input:m.input},value:i.replace("#",""),onChange:g}),Te.createElement("div",{style:m.clear})))};i_.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),triangle:Lt.oneOf(["hide","top-left","top-right"]),colors:Lt.arrayOf(Lt.string),styles:Lt.object};i_.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};ys(i_);var s_=function(t){var n=yn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return Te.createElement("div",{style:n.picker})};s_.propTypes={hsl:Lt.shape({h:Lt.number,s:Lt.number,l:Lt.number,a:Lt.number})};s_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var a_=function(t){var n=yn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Te.createElement("div",{style:n.picker})};a_.propTypes={hsl:Lt.shape({h:Lt.number,s:Lt.number,l:Lt.number,a:Lt.number})};a_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var moe=function(t){var n=t.onChange,r=t.rgb,i=t.hsl,s=t.hex,a=t.hsv,o=function(g,v){if(g.hex)_l(g.hex)&&n({hex:g.hex,source:"hex"},v);else if(g.rgb){var w=g.rgb.split(",");Iy(g.rgb,"rgb")&&n({r:w[0],g:w[1],b:w[2],a:1,source:"rgb"},v)}else if(g.hsv){var C=g.hsv.split(",");Iy(g.hsv,"hsv")&&(C[2]=C[2].replace("%",""),C[1]=C[1].replace("%",""),C[0]=C[0].replace("",""),C[1]==1?C[1]=.01:C[2]==1&&(C[2]=.01),n({h:Number(C[0]),s:Number(C[1]),v:Number(C[2]),source:"hsv"},v))}else if(g.hsl){var x=g.hsl.split(",");Iy(g.hsl,"hsl")&&(x[2]=x[2].replace("%",""),x[1]=x[1].replace("%",""),x[0]=x[0].replace("",""),p[1]==1?p[1]=.01:p[2]==1&&(p[2]=.01),n({h:Number(x[0]),s:Number(x[1]),v:Number(x[2]),source:"hsl"},v))}},u=yn({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),h=r.r+", "+r.g+", "+r.b,d=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",p=Math.round(a.h)+", "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return Te.createElement("div",{style:u.wrap,className:"flexbox-fix"},Te.createElement("div",{style:u.fields},Te.createElement("div",{style:u.double},Te.createElement(Ln,{style:{input:u.input,label:u.label},label:"hex",value:s,onChange:o})),Te.createElement("div",{style:u.column},Te.createElement("div",{style:u.single},Te.createElement(Ln,{style:{input:u.input2,label:u.label2},label:"rgb",value:h,onChange:o})),Te.createElement("div",{style:u.single},Te.createElement(Ln,{style:{input:u.input2,label:u.label2},label:"hsv",value:p,onChange:o})),Te.createElement("div",{style:u.single},Te.createElement(Ln,{style:{input:u.input2,label:u.label2},label:"hsl",value:d,onChange:o})))))},o_=function(t){var n=t.width,r=t.onChange,i=t.rgb,s=t.hsl,a=t.hsv,o=t.hex,u=t.header,h=t.styles,d=h===void 0?{}:h,p=t.className,m=p===void 0?"":p,g=yn(gs({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},d));return Te.createElement("div",{style:g.picker,className:"google-picker "+m},Te.createElement("div",{style:g.head},u),Te.createElement("div",{style:g.swatch}),Te.createElement("div",{style:g.saturation},Te.createElement(c0,{hsl:s,hsv:a,pointer:s_,onChange:r})),Te.createElement("div",{style:g.body},Te.createElement("div",{style:g.controls,className:"flexbox-fix"},Te.createElement("div",{style:g.hue},Te.createElement(vh,{style:g.Hue,hsl:s,radius:"4px",pointer:a_,onChange:r}))),Te.createElement(moe,{rgb:i,hsl:s,hex:o,hsv:a,onChange:r})))};o_.propTypes={width:Lt.oneOfType([Lt.string,Lt.number]),styles:Lt.object,header:Lt.string};o_.defaultProps={width:652,styles:{},header:"Color picker"};ys(o_);function goe({color:e,mode:t="blend",onColorChange:n,onClose:r}){var d;const[i,s]=fe.useState((e==null?void 0:e.hex)||"#000000");fe.useEffect(()=>{e!=null&&e.hex&&s(e.hex)},[e==null?void 0:e.hex]),fe.useEffect(()=>{const p=m=>{m.key==="Escape"&&(m.stopImmediatePropagation(),m.preventDefault(),r())};return window.addEventListener("keydown",p,!0),()=>window.removeEventListener("keydown",p,!0)},[r]);const a=()=>{e!=null&&e.originalHex&&(s(e.originalHex),n&&n(e.originalHex))},o=p=>{const m=p.hex;s(m),n&&n(m)},u=()=>{s("transparent"),n&&n("transparent")},h=i==="transparent"||i==="none";return e?c.jsxs("div",{className:"color-editor-panel",children:[c.jsxs("div",{className:"editor-header",children:[c.jsx("h3",{children:"Edit Colour"}),c.jsx("button",{onClick:r,className:"close-button",children:""})]}),c.jsxs("div",{className:"editor-content",children:[c.jsxs("div",{className:"color-info-section",children:[c.jsx("div",{className:"color-display",children:c.jsxs("div",{className:"swatch-pair",children:[c.jsxs("div",{className:"swatch-group",children:[c.jsx("div",{className:"swatch original",style:{backgroundColor:e.originalHex||e.hex},title:"Original colour"}),c.jsx("span",{className:"swatch-label",children:"Original"})]}),c.jsx("span",{className:"arrow",children:""}),c.jsxs("div",{className:"swatch-group",children:[c.jsx("div",{className:`swatch current ${h?"transparent-preview":""}`,style:h?{}:{backgroundColor:i},title:"Current colour"}),c.jsx("span",{className:"swatch-label",children:h?"Transparent":"Current"})]})]})}),c.jsxs("div",{className:"color-details",children:[c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"label",children:"Hex:"}),c.jsx("span",{className:"value",children:i})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"label",children:"Coverage:"}),c.jsxs("span",{className:"value",children:[((d=e.areaPct)==null?void 0:d.toFixed(1))||0,"%"]})]})]})]}),c.jsxs("div",{className:"transparent-section",children:[c.jsx("h4",{children:"Remove Fill"}),c.jsxs("button",{className:`transparent-option ${h?"selected":""}`,onClick:u,title:"Make this area transparent (remove fill)",children:[c.jsx("div",{className:"transparent-swatch"}),c.jsx("span",{children:"Make Transparent"})]})]}),c.jsxs("div",{className:"tpv-palette-section",children:[c.jsx("h4",{children:"Standard TPV Colours"}),c.jsx("p",{className:"palette-description",children:"Select a pure TPV colour (no blending required)"}),c.jsx("div",{className:"tpv-color-grid",children:pi.map(p=>c.jsxs("div",{className:`tpv-color-item ${i.toLowerCase()===p.hex.toLowerCase()?"selected":""}`,onClick:()=>o(p),title:`${p.code} - ${p.name}`,children:[c.jsx("div",{className:"tpv-color-swatch",style:{backgroundColor:p.hex}}),c.jsx("span",{className:"tpv-color-code",children:p.code})]},p.code))})]}),Wl.BLEND_MODE_ENABLED,c.jsxs("div",{className:"solid-mode-info",children:[c.jsx("h4",{children:"Solid Mode Editing"}),c.jsx("p",{className:"info-description",children:"Select from the standard TPV colours above. Only solid TPV colours are available."}),c.jsx("button",{onClick:a,className:"reset-button",children:"Reset to Original Colour"})]})]}),c.jsx("style",{jsx:!0,children:`
        .color-editor-panel {
          position: fixed;
          top: 0;
          right: 0;
          width: 400px;
          height: 100vh;
          background: white;
          box-shadow: -4px 0 12px rgba(0, 0, 0, 0.15);
          z-index: 1000;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .editor-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1.5rem;
          border-bottom: 2px solid #1a365d;
          background: #f9f9f9;
        }

        .editor-header h3 {
          font-family: 'Overpass', sans-serif;
          margin: 0;
          color: #1e4a7a;
          font-size: 1.5rem;
          font-weight: 600;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 2rem;
          color: #666;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          line-height: 1;
          transition: color 0.2s;
        }

        .close-button:hover {
          color: #333;
        }

        .editor-content {
          flex: 1;
          overflow-y: auto;
          padding: 1.5rem;
        }

        /* Color Info Section */
        .color-info-section {
          margin-bottom: 2rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .color-display {
          margin-bottom: 1rem;
        }

        .swatch-pair {
          display: flex;
          align-items: center;
          gap: 1rem;
          justify-content: center;
        }

        .swatch-group {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
        }

        .swatch {
          width: 60px;
          height: 60px;
          border-radius: 8px;
          border: 3px solid #ddd;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .swatch.original {
          border-color: #999;
        }

        .swatch.current {
          border-color: #ff6b35;
        }

        .swatch.transparent-preview {
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 10px 10px;
          background-position: 0 0, 5px 5px;
          background-color: white;
        }

        .swatch-label {
          font-size: 0.85rem;
          color: #666;
          font-weight: 500;
        }

        .arrow {
          font-size: 1.5rem;
          color: #666;
          font-weight: bold;
        }

        .color-details {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .detail-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-size: 0.95rem;
        }

        .detail-row .label {
          font-weight: 600;
          color: #666;
        }

        .detail-row .value {
          font-family: 'Courier New', monospace;
          color: #333;
        }

        /* Transparent Section */
        .transparent-section {
          margin-bottom: 1.5rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .transparent-section h4 {
          margin: 0 0 0.75rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .transparent-option {
          display: flex;
          align-items: center;
          gap: 12px;
          width: 100%;
          padding: 12px 16px;
          background: white;
          border: 2px solid #d1d5db;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s;
          font-size: 0.95rem;
          font-weight: 500;
          color: #374151;
        }

        .transparent-option:hover {
          border-color: #6b7280;
          background: #fafafa;
        }

        .transparent-option.selected {
          border-color: #ff6b35;
          background: #fff5f0;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .transparent-swatch {
          width: 32px;
          height: 32px;
          border-radius: 4px;
          border: 1px solid #999;
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
        }

        /* TPV Palette Section */
        .tpv-palette-section {
          margin-bottom: 2rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .tpv-palette-section h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .palette-description {
          margin: 0 0 1rem 0;
          font-size: 0.85rem;
          color: #666;
        }

        .tpv-color-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 0.75rem;
        }

        .tpv-color-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.4rem;
          padding: 0.5rem;
          border: 2px solid transparent;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s;
          background: white;
        }

        .tpv-color-item:hover {
          border-color: #ff6b35;
          transform: translateY(-2px);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tpv-color-item.selected {
          border-color: #ff6b35;
          background: #fff5f0;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .tpv-color-swatch {
          width: 100%;
          height: 50px;
          border-radius: 4px;
          border: 1px solid rgba(0, 0, 0, 0.1);
          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tpv-color-code {
          font-size: 0.75rem;
          font-weight: 600;
          color: #1a365d;
          font-family: 'Courier New', monospace;
        }

        /* Picker Section */
        .picker-section {
          margin-bottom: 1rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .picker-section h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .picker-description {
          margin: 0 0 1rem 0;
          font-size: 0.85rem;
          color: #666;
        }

        .picker-section :global(.chrome-picker) {
          box-shadow: none !important;
          width: 100% !important;
        }

        .reset-button {
          width: 100%;
          padding: 0.75rem;
          margin-top: 1rem;
          background: #e0e0e0;
          color: #333;
          border: none;
          border-radius: 4px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .reset-button:hover {
          background: #d0d0d0;
        }

        /* Solid Mode Info */
        .solid-mode-info {
          margin-bottom: 1rem;
          padding: 1rem;
          background: #fff5f0;
          border: 2px solid #ff6b35;
          border-radius: 6px;
        }

        .solid-mode-info h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .info-description {
          margin: 0;
          font-size: 0.85rem;
          color: #666;
          line-height: 1.5;
        }

        /* Mobile Responsive - Fullscreen Modal */
        @media (max-width: 768px) {
          .color-editor-panel {
            width: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 0;
          }

          .editor-header {
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 10;
          }

          .editor-header h3 {
            font-size: 1.25rem;
          }

          /* Larger close button for touch */
          .close-button {
            width: 44px;
            height: 44px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .editor-content {
            padding: 1rem;
          }

          /* Color swatches - larger for touch */
          .swatch {
            width: 50px;
            height: 50px;
          }

          .color-info-section {
            padding: 0.75rem;
            margin-bottom: 1.5rem;
          }

          /* TPV color grid - better touch targets */
          .tpv-color-grid {
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
          }

          .tpv-color-item {
            padding: 0.4rem;
            min-height: 44px;
          }

          .tpv-color-swatch {
            height: 36px;
          }

          .tpv-color-code {
            font-size: 0.65rem;
          }

          .tpv-palette-section {
            padding: 0.75rem;
            margin-bottom: 1.5rem;
          }

          .tpv-palette-section h4 {
            font-size: 0.9rem;
          }

          .palette-description {
            font-size: 0.8rem;
          }

          /* Picker section */
          .picker-section {
            padding: 0.75rem;
          }

          .picker-section h4 {
            font-size: 0.9rem;
          }

          .picker-description {
            font-size: 0.8rem;
          }

          /* Larger reset button for touch */
          .reset-button {
            min-height: 44px;
            font-size: 0.9rem;
          }

          .solid-mode-info {
            padding: 0.75rem;
          }

          .solid-mode-info h4 {
            font-size: 0.9rem;
          }

          .info-description {
            font-size: 0.8rem;
          }
        }

        /* Extra small screens */
        @media (max-width: 400px) {
          .tpv-color-grid {
            grid-template-columns: repeat(3, 1fr);
          }

          .tpv-color-swatch {
            height: 44px;
          }

          .swatch {
            width: 44px;
            height: 44px;
          }

          .swatch-pair {
            gap: 0.5rem;
          }

          .arrow {
            font-size: 1.2rem;
          }
        }
      `})]}):null}const yoe=pi;new Map(yoe.map((e,t)=>[e.code,t]));function bx(e){const{inputMode:t,prompt:n,selectedFile:r,lengthMM:i,widthMM:s,result:a,viewMode:o,blendRecipes:u,solidRecipes:h,colorMapping:d,solidColorMapping:p,solidEditedColors:m,blendEditedColors:g,blendSvgUrl:v,solidSvgUrl:w,arMapping:C,jobId:x,inSituData:k,regionOverrides:A,originalTaggedSvg:j,originalUnflattenedSvg:I,originalRecipesState:E}=e,U=D=>D?D instanceof Map?Object.fromEntries(D):D:null;return{input_mode:t,prompt:n||null,uploaded_file_url:(r==null?void 0:r.url)||null,dimensions:{widthMM:s,lengthMM:i},original_svg_url:(a==null?void 0:a.svg_url)||null,original_png_url:(a==null?void 0:a.png_url)||null,thumbnail_url:(a==null?void 0:a.thumb_url)||null,blend_recipes:u||null,solid_recipes:h||null,color_mapping:U(d),solid_color_mapping:U(p),solid_color_edits:U(m),blend_color_edits:U(g),final_blend_svg_url:v||null,final_solid_svg_url:w||null,preferred_view_mode:o||"solid",aspect_ratio_mapping:C||null,job_id:x||null,in_situ:k?{room_photo_url:k.room_photo_url||null,mask_url:k.mask_url||null,floor_dimensions_m:k.floor_dimensions_m||null,preview_url:k.preview_url||null,blend_opacity:k.blend_opacity||20,perspective_corners:k.perspective_corners||null}:null,region_overrides:U(A),original_tagged_svg:j||null,original_unflattened_svg:I||null,original_recipes_state:E||null}}function vx(e){var o,u;const t=h=>h?h instanceof Map?h:new Map(Object.entries(h)):new Map,n=h=>{var d;return e[h]??((d=e.design_data)==null?void 0:d[h])},r=n("region_overrides"),i=n("original_tagged_svg"),s=n("original_unflattened_svg"),a=n("original_recipes_state");return{inputMode:e.input_mode||n("input_mode"),prompt:n("prompt")||"",selectedFile:n("uploaded_file_url")?{url:n("uploaded_file_url"),name:n("uploaded_file_url").split("/").pop()}:null,lengthMM:((o=n("dimensions"))==null?void 0:o.lengthMM)||0,widthMM:((u=n("dimensions"))==null?void 0:u.widthMM)||0,result:{svg_url:n("original_svg_url"),png_url:n("original_png_url"),thumbnail_url:n("thumbnail_url")},blendRecipes:n("blend_recipes")||null,solidRecipes:n("solid_recipes")||null,colorMapping:t(n("color_mapping")),solidColorMapping:t(n("solid_color_mapping")),solidEditedColors:t(n("solid_color_edits")),blendEditedColors:t(n("blend_color_edits")),blendSvgUrl:null,solidSvgUrl:null,viewMode:"solid",arMapping:n("aspect_ratio_mapping"),jobId:n("job_id"),inSituData:n("in_situ")||null,regionOverrides:t(r),originalTaggedSvg:i||null,originalUnflattenedSvg:s||null,originalRecipesState:a||null,generating:!1,generatingBlends:!1,showFinalRecipes:!!e.blend_recipes,showSolidSummary:!!e.solid_recipes,colorEditorOpen:!1,selectedColor:null}}function boe(e){var n;const t=[];return e.inputMode||t.push("Input mode is required"),(!(e.widthMM>0)||!(e.lengthMM>0))&&t.push("Surface dimensions are required"),(n=e.result)!=null&&n.svg_url||t.push("No design to save - generate a design first"),{valid:t.length===0,errors:t}}function voe({currentState:e,existingDesignId:t=null,initialName:n="",onClose:r,onSaved:i}){const[s,a]=fe.useState(n),[o,u]=fe.useState(""),[h,d]=fe.useState(""),[p,m]=fe.useState(""),[g,v]=fe.useState(!1),[w,C]=fe.useState([]),[x,k]=fe.useState(!1),[A,j]=fe.useState(""),[I,E]=fe.useState("#1a365d"),[U,D]=fe.useState(!1),[R,X]=fe.useState(!1),[ce,ie]=fe.useState(!1),[ge,H]=fe.useState(null);fe.useEffect(()=>{ye()},[]);const ye=async()=>{try{const{projects:xe}=await fw();C(xe)}catch(xe){console.error("Failed to load projects:",xe),H("Failed to load projects")}},je=async()=>{if(!A.trim()){H("Project name is required");return}ie(!0),H(null);try{const{project:xe}=await oN({name:A.trim(),color:I});C([xe,...w]),d(xe.id),k(!1),j(""),E("#1a365d")}catch(xe){console.error("Failed to create project:",xe),H(xe.message)}finally{ie(!1)}},ke=async(xe=!1)=>{if(!s.trim()){H("Design name is required");return}const Me=boe(e);if(!Me.valid){H(Me.errors.join(", "));return}xe?X(!0):D(!0),H(null);try{const _e=bx(e);console.log("[SAVE-MODAL] Serialized design data:",_e),console.log("[SAVE-MODAL] SVG URL from serialized data:",_e.original_svg_url);const Ne={name:s.trim(),description:o.trim()||null,project_id:h||null,tags:p.split(",").map(nt=>nt.trim()).filter(nt=>nt),is_public:g,design_data:_e};console.log("[SAVE-MODAL] Full save payload:",Ne),t&&!xe&&(Ne.id=t);const st=await Xm(Ne);i&&i(st,s.trim()),r()}catch(_e){console.error("Failed to save design:",_e),H(_e.message)}finally{D(!1),X(!1)}},Fe=["#1a365d","#ff6b35","#4a90e2","#50c878","#9b59b6","#e74c3c"];return c.jsx("div",{className:"modal-overlay",onClick:r,children:c.jsxs("div",{className:"modal-content save-design-modal",onClick:xe=>xe.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:t?"Update Design":"Save Design"}),c.jsx("button",{onClick:r,className:"close-button",children:""})]}),c.jsxs("div",{className:"modal-body",children:[ge&&c.jsx("div",{className:"error-message",children:ge}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-name",children:"Design Name *"}),c.jsx("input",{id:"design-name",type:"text",value:s,onChange:xe=>a(xe.target.value),placeholder:"e.g., Playground Design A",autoFocus:!0,disabled:U||R})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-description",children:"Description"}),c.jsx("textarea",{id:"design-description",value:o,onChange:xe=>u(xe.target.value),placeholder:"Optional notes about this design...",rows:3,disabled:U||R})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-project",children:"Project"}),x?c.jsxs("div",{className:"new-project-form",children:[c.jsxs("div",{className:"input-row",children:[c.jsx("input",{type:"text",value:A,onChange:xe=>j(xe.target.value),placeholder:"Project name...",disabled:ce}),c.jsx("div",{className:"color-picker-inline",children:Fe.map(xe=>c.jsx("button",{type:"button",className:`color-swatch ${I===xe?"active":""}`,style:{backgroundColor:xe},onClick:()=>E(xe),disabled:ce},xe))})]}),c.jsxs("div",{className:"button-row",children:[c.jsx("button",{type:"button",onClick:je,className:"btn-primary btn-small",disabled:ce,children:ce?"Creating...":"Create"}),c.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn-secondary btn-small",disabled:ce,children:"Cancel"})]})]}):c.jsxs("div",{className:"project-selector",children:[c.jsxs("select",{id:"design-project",value:h,onChange:xe=>d(xe.target.value),disabled:U||R,children:[c.jsx("option",{value:"",children:"No Project"}),w.map(xe=>c.jsxs("option",{value:xe.id,children:[xe.name," (",xe.design_count," designs)"]},xe.id))]}),c.jsx("button",{type:"button",onClick:()=>k(!0),className:"btn-secondary btn-small",disabled:U||R,children:"+ New Project"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-tags",children:"Tags"}),c.jsx("input",{id:"design-tags",type:"text",value:p,onChange:xe=>m(xe.target.value),placeholder:"e.g., playground, vibrant, geometric (comma-separated)",disabled:U||R}),c.jsx("small",{className:"help-text",children:"Separate tags with commas"})]}),c.jsx("div",{className:"form-group checkbox-group",children:c.jsxs("label",{children:[c.jsx("input",{type:"checkbox",checked:g,onChange:xe=>v(xe.target.checked),disabled:U||R}),c.jsx("span",{children:"Make this design public (shareable link)"})]})})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{onClick:r,className:"btn-secondary",disabled:U||R,children:"Cancel"}),t&&c.jsx("button",{onClick:()=>ke(!0),className:"btn-secondary",disabled:U||R,children:R?"Saving...":"Save as New"}),c.jsx("button",{onClick:()=>ke(!1),className:"btn-primary",disabled:U||R,children:U?"Saving...":t?"Update":"Save Design"})]})]})})}const xoe=10*1024*1024,woe=["image/jpeg","image/png","image/jpg"];function _oe({onPhotoUploaded:e,disabled:t=!1}){const[n,r]=fe.useState(!1),[i,s]=fe.useState(!1),[a,o]=fe.useState(null),[u,h]=fe.useState(null),d=fe.useRef(null),p=k=>{k.preventDefault(),t||r(!0)},m=k=>{k.preventDefault(),r(!1)},g=async k=>{if(k.preventDefault(),r(!1),t)return;const A=k.dataTransfer.files;A.length>0&&await C(A[0])},v=()=>{!t&&d.current&&d.current.click()},w=async k=>{k.target.files.length>0&&await C(k.target.files[0])},C=async k=>{if(o(null),!woe.includes(k.type)){o("Please upload a JPG or PNG image");return}if(k.size>xoe){o("Image must be under 10MB");return}const A=URL.createObjectURL(k);h(A),console.log("[IN-SITU-UPLOADER] Loading local file to get dimensions...");const j=await new Promise((I,E)=>{const U=new Image;U.onload=()=>{console.log("[IN-SITU-UPLOADER] Local image loaded, dimensions:",U.naturalWidth,"x",U.naturalHeight),I({width:U.naturalWidth,height:U.naturalHeight})},U.onerror=D=>{console.error("[IN-SITU-UPLOADER] Failed to load local image:",D),E(new Error("Failed to read image dimensions"))},U.src=A});s(!0);try{const E=`in-situ-photos/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${k.type.split("/")[1]}`}`,{data:U,error:D}=await hi.storage.from("tpv-studio-uploads").upload(E,k,{cacheControl:"3600",upsert:!1});if(D)throw D;const{data:{publicUrl:R}}=hi.storage.from("tpv-studio-uploads").getPublicUrl(E);console.log("[IN-SITU-UPLOADER] Photo uploaded:",R),console.log("[IN-SITU-UPLOADER] Using dimensions from local file:",j),console.log("[IN-SITU-UPLOADER] Passing local blob URL for fast preview"),console.log("[IN-SITU-UPLOADER] Calling onPhotoUploaded callback..."),e({url:A,supabaseUrl:R,width:j.width,height:j.height,filename:k.name})}catch(I){console.error("[IN-SITU-UPLOADER] Upload failed:",I),o(I.message||"Upload failed"),URL.revokeObjectURL(A),h(null)}finally{s(!1)}},x=()=>{u&&URL.revokeObjectURL(u),h(null),o(null)};return c.jsxs("div",{className:"in-situ-uploader",children:[u?c.jsxs("div",{className:"preview-container",children:[c.jsx("img",{src:u,alt:"Site preview",className:"preview-image"}),i&&c.jsxs("div",{className:"upload-overlay",children:[c.jsx("div",{className:"upload-spinner"}),c.jsx("p",{children:"Uploading..."})]}),!i&&c.jsx("button",{className:"clear-button",onClick:x,title:"Remove photo",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}):c.jsxs("div",{className:`upload-zone ${n?"dragging":""} ${t?"disabled":""}`,onDragOver:p,onDragLeave:m,onDrop:g,onClick:v,children:[c.jsx("input",{ref:d,type:"file",accept:"image/jpeg,image/png",onChange:w,style:{display:"none"},disabled:t}),c.jsx("div",{className:"upload-icon",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"17 8 12 3 7 8"}),c.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),c.jsxs("div",{className:"upload-text",children:[c.jsx("p",{className:"primary",children:n?"Drop photo here":"Upload site photo"}),c.jsx("p",{className:"secondary",children:"Drag & drop or click to browse"}),c.jsx("p",{className:"hint",children:"JPG or PNG, max 10MB"})]})]}),a&&c.jsx("div",{className:"error-message",children:a}),c.jsx("style",{children:`
        .in-situ-uploader {
          width: 100%;
        }

        .upload-zone {
          border: 2px dashed #d1d5db;
          border-radius: 8px;
          padding: 2rem;
          text-align: center;
          cursor: pointer;
          transition: all 0.2s;
          background: #f9fafb;
        }

        .upload-zone:hover {
          border-color: #ff6b35;
          background: #fff7f5;
        }

        .upload-zone.dragging {
          border-color: #ff6b35;
          background: #fff7f5;
          border-style: solid;
        }

        .upload-zone.disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .upload-zone.disabled:hover {
          border-color: #d1d5db;
          background: #f9fafb;
        }

        .upload-icon {
          width: 48px;
          height: 48px;
          margin: 0 auto 1rem;
          color: #9ca3af;
        }

        .upload-zone:hover .upload-icon {
          color: #ff6b35;
        }

        .upload-text .primary {
          font-size: 1rem;
          font-weight: 600;
          color: #374151;
          margin: 0 0 0.25rem;
        }

        .upload-text .secondary {
          font-size: 0.875rem;
          color: #6b7280;
          margin: 0 0 0.5rem;
        }

        .upload-text .hint {
          font-size: 0.75rem;
          color: #9ca3af;
          margin: 0;
        }

        .preview-container {
          position: relative;
          border-radius: 8px;
          overflow: hidden;
        }

        .preview-image {
          width: 100%;
          display: block;
          border-radius: 8px;
        }

        .upload-overlay {
          position: absolute;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
        }

        .upload-spinner {
          width: 32px;
          height: 32px;
          border: 3px solid rgba(255, 255, 255, 0.3);
          border-top-color: white;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 0.5rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .clear-button {
          position: absolute;
          top: 0.5rem;
          right: 0.5rem;
          width: 32px;
          height: 32px;
          border-radius: 50%;
          background: rgba(0, 0, 0, 0.6);
          border: none;
          cursor: pointer;
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background 0.2s;
        }

        .clear-button:hover {
          background: rgba(0, 0, 0, 0.8);
        }

        .clear-button svg {
          width: 16px;
          height: 16px;
        }

        .error-message {
          margin-top: 0.75rem;
          padding: 0.5rem 0.75rem;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 4px;
          color: #dc2626;
          font-size: 0.875rem;
        }
      `})]})}function koe(e,t){const[n,r,i,s,a,o,u,h]=e,[d,p,m,g,v,w,C,x]=t,k=[[n,r,1,0,0,0,-d*n,-d*r],[0,0,0,n,r,1,-p*n,-p*r],[i,s,1,0,0,0,-m*i,-m*s],[0,0,0,i,s,1,-g*i,-g*s],[a,o,1,0,0,0,-v*a,-v*o],[0,0,0,a,o,1,-w*a,-w*o],[u,h,1,0,0,0,-C*u,-C*h],[0,0,0,u,h,1,-x*u,-x*h]],j=Soe(k,[d,p,m,g,v,w,C,x]);return function(E,U){const D=j[6]*E+j[7]*U+1,R=(j[0]*E+j[1]*U+j[2])/D,X=(j[3]*E+j[4]*U+j[5])/D;return[R,X]}}function Soe(e,t){const n=e.length,r=e.map((s,a)=>[...s,t[a]]);for(let s=0;s<n;s++){let a=s;for(let o=s+1;o<n;o++)Math.abs(r[o][s])>Math.abs(r[a][s])&&(a=o);[r[s],r[a]]=[r[a],r[s]];for(let o=s+1;o<n;o++){const u=r[o][s]/r[s][s];for(let h=s;h<=n;h++)r[o][h]-=u*r[s][h]}}const i=new Array(n);for(let s=n-1;s>=0;s--){i[s]=r[s][n];for(let a=s+1;a<n;a++)i[s]-=r[s][a]*i[a];i[s]/=r[s][s]}return i}function l_(e){return new Promise((t,n)=>{const r=new Image;!e.startsWith("blob:")&&!e.startsWith("data:")?(r.crossOrigin="anonymous",console.log("[LOAD-IMAGE] Loading external URL with CORS:",e.substring(0,50))):console.log("[LOAD-IMAGE] Loading local URL (blob/data):",e.substring(0,50)),r.onload=()=>{console.log("[LOAD-IMAGE] Successfully loaded image:",e.substring(0,50)),t(r)},r.onerror=()=>{console.error("[LOAD-IMAGE] Failed to load image:",e),n(new Error(`Failed to load image: ${e}`))},r.src=e})}async function MO(e,t=1536){console.log("[RASTERIZE-SVG] Starting SVG rasterization:",e.substring(0,50),"maxSize:",t);const n=await l_(e),{naturalWidth:r,naturalHeight:i}=n;console.log("[RASTERIZE-SVG] SVG loaded with dimensions:",r,"x",i);const s=Math.min(1,t/Math.max(r,i)),a=Math.round(r*s),o=Math.round(i*s);console.log("[RASTERIZE-SVG] Scaling to:",a,"x",o,"(scale:",s.toFixed(2),")");const u=document.createElement("canvas");return u.width=a,u.height=o,u.getContext("2d").drawImage(n,0,0,a,o),console.log("[RASTERIZE-SVG] Drew SVG to canvas"),new Promise((d,p)=>{const m=new Image;m.onload=()=>{console.log("[RASTERIZE-SVG] Successfully rasterized SVG to PNG"),d(m)},m.onerror=g=>{console.error("[RASTERIZE-SVG] Failed to convert canvas to image:",g),p(g)},m.src=u.toDataURL("image/png")})}function LO({photoCtx:e,photoImg:t,designImg:n,quad:r,opacity:i,shape:s,lighting:a}){const o=e.canvas;e.clearRect(0,0,o.width,o.height),e.drawImage(t,0,0,o.width,o.height);const u=n.width,h=n.height,d=[0,0,u,0,u,h,0,h],p=[r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y],m=koe(d,p),g=10,v=u/g,w=h/g,C=document.createElement("canvas");if(C.width=u,C.height=h,C.getContext("2d").drawImage(n,0,0),e.save(),e.globalAlpha=i,a&&a.enabled){const A=a.strength||.6,j=1+(a.baseBrightness-1)*A,I=1+(a.baseContrast-1)*A;e.filter=`brightness(${j}) contrast(${I})`}const k=s&&s.length>=3?s:r;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(let A=1;A<k.length;A++)e.lineTo(k[A].x,k[A].y);e.closePath(),e.clip();for(let A=0;A<g;A++)for(let j=0;j<g;j++){const I=A*v,E=j*w,U=(A+1)*v,D=(j+1)*w,R=m(I,E),X=m(U,E),ce=m(U,D),ie=m(I,D);cE(e,C,I,E,U,E,I,D,R[0],R[1],X[0],X[1],ie[0],ie[1]),cE(e,C,U,E,U,D,I,D,X[0],X[1],ce[0],ce[1],ie[0],ie[1])}e.restore()}function cE(e,t,n,r,i,s,a,o,u,h,d,p,m,g){e.save(),e.beginPath(),e.moveTo(u,h),e.lineTo(d,p),e.lineTo(m,g),e.closePath(),e.clip();const v=(n-a)*(s-o)-(i-a)*(r-o);if(Math.abs(v)<.001){e.restore();return}const w=((u-m)*(s-o)-(d-m)*(r-o))/v,C=((h-g)*(s-o)-(p-g)*(r-o))/v,x=((n-a)*(d-m)-(i-a)*(u-m))/v,k=((n-a)*(p-g)-(i-a)*(h-g))/v,A=u-w*n-x*r,j=h-C*n-k*r;e.setTransform(w,C,x,k,A,j),e.drawImage(t,0,0),e.restore()}function Coe(e,t="tpv-in-situ-preview.png"){e.toBlob(n=>{const r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},"image/png")}function Eoe(e,t,n,r){const i=n/r,s=e*.6,a=t*.6;let o,u;i>s/a?(o=s,u=s/i):(u=a,o=a*i);const h=(e-o)/2,d=(t-u)/2;return[{x:h,y:d},{x:h+o,y:d},{x:h+o,y:d+u},{x:h,y:d+u}]}function Toe(e,t,n){let r=!1;for(let i=0,s=n.length-1;i<n.length;s=i++){const a=n[i].x,o=n[i].y,u=n[s].x,h=n[s].y;o>t!=h>t&&e<(u-a)*(t-o)/(h-o)+a&&(r=!r)}return r}function joe(e,t,n){e/=255,t/=255,n/=255;const r=Math.max(e,t,n),i=Math.min(e,t,n),s=(r+i)/2;if(r===i)return{h:0,s:0,l:s};const a=r-i,o=s>.5?a/(2-r-i):a/(r+i);let u;switch(r){case e:u=((t-n)/a+(t<n?6:0))/6;break;case t:u=((n-e)/a+2)/6;break;case n:u=((e-t)/a+4)/6;break}return{h:u,s:o,l:s}}function Aoe(e,t,n=2e3){if(!e||!t||t.length<3)return{avgLightness:.5,avgContrastProxy:.5};const r=Math.floor(Math.min(...t.map(k=>k.x))),i=Math.ceil(Math.max(...t.map(k=>k.x))),s=Math.floor(Math.min(...t.map(k=>k.y))),a=Math.ceil(Math.max(...t.map(k=>k.y))),o=i-r,u=a-s;if(o<=0||u<=0)return{avgLightness:.5,avgContrastProxy:.5};let h;try{h=e.getImageData(r,s,o,u)}catch(k){return console.warn("[LIGHTING] Failed to get image data:",k),{avgLightness:.5,avgContrastProxy:.5}}const d=h.data,p=[];let m=0;const g=n*5;for(;p.length<n&&m<g;){m++;const k=r+Math.random()*o,A=s+Math.random()*u;if(!Toe(k,A,t))continue;const j=Math.floor(k-r),E=(Math.floor(A-s)*o+j)*4;if(E<0||E>=d.length-3)continue;const U=d[E],D=d[E+1],R=d[E+2],{l:X}=joe(U,D,R);p.push(X)}if(p.length===0)return{avgLightness:.5,avgContrastProxy:.5};const v=p.reduce((k,A)=>k+A,0)/p.length,w=p.reduce((k,A)=>k+Math.pow(A-v,2),0)/p.length,C=Math.sqrt(w),x=Math.min(1,C/.25);return{avgLightness:v,avgContrastProxy:x}}function Poe(e){let t=1,n=1;const i=e.avgLightness-.5;return t+=i*.6,n+=(e.avgContrastProxy-.5)*.4,t=Math.max(.7,Math.min(1.3,t)),n=Math.max(.8,Math.min(1.25,n)),{brightness:t,contrast:n}}const Noe=100;function Ooe({photoUrl:e,svgUrl:t,designSizeMm:n,initialQuad:r,initialShape:i,initialOpacity:s=.8,initialLighting:a,onChange:o}){const[u,h]=fe.useState(null),[d,p]=fe.useState(null),[m,g]=fe.useState(r||null),[v,w]=fe.useState(i||null),[C,x]=fe.useState(Math.max(.3,Math.min(1,s))),[k,A]=fe.useState(a||{enabled:!1,strength:.6,baseBrightness:1,baseContrast:1}),[j,I]=fe.useState(!0),[E,U]=fe.useState(null),[D,R]=fe.useState(1),[X,ce]=fe.useState("corners"),[ie,ge]=fe.useState(null),[H,ye]=fe.useState(!1),[je,ke]=fe.useState(null),[Fe,xe]=fe.useState(null),Me=fe.useRef(null),_e=fe.useRef(null),Ne=fe.useRef(null),[st,nt]=fe.useState([]),Ue=20;fe.useEffect(()=>{ct()},[e,t]),fe.useEffect(()=>{u&&d&&m&&he()},[u,d,m,v,C,k,X,ie,H,Fe]),fe.useEffect(()=>{if(!u||!m||m.length!==4)return;const l=document.createElement("canvas");l.width=u.naturalWidth,l.height=u.naturalHeight;const f=l.getContext("2d");f.drawImage(u,0,0);const b=Aoe(f,m),{brightness:_,contrast:S}=Poe(b);A(P=>({...P,baseBrightness:_,baseContrast:S}))},[u,JSON.stringify(m)]),fe.useEffect(()=>{const l=f=>{if(X==="shape"&&(f.key==="Delete"||f.key==="Backspace")&&Fe!==null&&v&&v.length>3){f.preventDefault();const b=v.filter((_,S)=>S!==Fe);w(b),xe(null),We(m,C,b)}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[X,Fe,v,m,C]);const ct=async()=>{var l;console.log("[FOUR-POINT] Starting to load images - photo:",e==null?void 0:e.substring(0,50),"svg:",t==null?void 0:t.substring(0,50)),I(!0),U(null);try{console.log("[FOUR-POINT] Loading photo and rasterizing SVG...");const[f,b]=await Promise.all([l_(e),MO(t,1536)]);console.log("[FOUR-POINT] Both images loaded successfully - photo:",f.naturalWidth,"x",f.naturalHeight,"design:",b.naturalWidth,"x",b.naturalHeight),h(f),p(b);const _=((l=_e.current)==null?void 0:l.clientWidth)||800,S=500,P=_/f.naturalWidth,T=S/f.naturalHeight,N=Math.min(1,P,T);if(R(N),console.log("[FOUR-POINT] Display scale set to:",N.toFixed(3)),r)console.log("[FOUR-POINT] Using provided initial quad");else{const $=Eoe(f.naturalWidth,f.naturalHeight,n.width_mm,n.length_mm);g($),console.log("[FOUR-POINT] Initialized default quad")}}catch(f){console.error("[FOUR-POINT] Failed to load images:",f),U(f.message)}finally{I(!1),console.log("[FOUR-POINT] Loading complete")}},he=()=>{const l=Me.current;if(!l||!u||!d||!m)return;l.width=u.naturalWidth,l.height=u.naturalHeight;const f=l.getContext("2d");LO({photoCtx:f,photoImg:u,designImg:d,quad:m,opacity:C,shape:v,lighting:k}),oe(f)},oe=l=>{if(!m)return;l.setTransform(1,0,0,1,0,0);const f=Math.max(8,Math.min(15,u.naturalWidth/80));if(X==="corners"){l.strokeStyle="rgba(255, 255, 255, 0.8)",l.lineWidth=2,l.setLineDash([5,5]),l.beginPath(),l.moveTo(m[0].x,m[0].y),l.lineTo(m[1].x,m[1].y),l.lineTo(m[2].x,m[2].y),l.lineTo(m[3].x,m[3].y),l.closePath(),l.stroke(),l.setLineDash([]);const b=["TL","TR","BR","BL"];m.forEach((_,S)=>{l.beginPath(),l.arc(_.x,_.y,f,0,Math.PI*2),l.fillStyle=ie===S?"#ff6b35":"rgba(255, 107, 53, 0.9)",l.fill(),l.strokeStyle="white",l.lineWidth=2,l.stroke(),l.fillStyle="white",l.font="10px sans-serif",l.textAlign="center",l.textBaseline="middle",l.fillText(b[S],_.x,_.y)})}else{const b=v||m;l.strokeStyle="rgba(34, 197, 94, 0.8)",l.lineWidth=2,l.setLineDash([]),l.beginPath(),l.moveTo(b[0].x,b[0].y);for(let _=1;_<b.length;_++)l.lineTo(b[_].x,b[_].y);l.closePath(),l.stroke(),b.forEach((_,S)=>{l.beginPath(),l.arc(_.x,_.y,f*.8,0,Math.PI*2),Fe===S?l.fillStyle="#22c55e":ie===S?l.fillStyle="#16a34a":l.fillStyle="rgba(34, 197, 94, 0.9)",l.fill(),l.strokeStyle="white",l.lineWidth=2,l.stroke()}),l.strokeStyle="rgba(255, 107, 53, 0.3)",l.lineWidth=1,l.setLineDash([3,3]),l.beginPath(),l.moveTo(m[0].x,m[0].y),l.lineTo(m[1].x,m[1].y),l.lineTo(m[2].x,m[2].y),l.lineTo(m[3].x,m[3].y),l.closePath(),l.stroke(),l.setLineDash([])}},We=fe.useCallback((l,f,b,_)=>{Ne.current&&clearTimeout(Ne.current),Ne.current=setTimeout(()=>{o&&o({quad:l,opacity:f,shape:b,lighting:_||k})},Noe)},[o,k]),Oe=fe.useCallback(()=>{nt(l=>{const f=[...l,{quad:[...m],shape:v?[...v]:null,opacity:C,lighting:{...k}}];return f.length>Ue?f.slice(-Ue):f})},[m,v,C,k]),ht=()=>{if(st.length===0)return;const l=st[st.length-1];nt(f=>f.slice(0,-1)),g(l.quad),w(l.shape),x(l.opacity),A(l.lighting),We(l.quad,l.opacity,l.shape,l.lighting)},Pt=(l,f)=>({x:l/D,y:f/D}),St=(l,f,b)=>{if(!b)return-1;const _=25/D;for(let S=0;S<b.length;S++){const P=b[S].x-l,T=b[S].y-f;if(Math.sqrt(P*P+T*T)<_)return S}return-1},G=(l,f,b)=>{if(!b||b.length<3)return!1;let _=!1;for(let S=0,P=b.length-1;S<b.length;P=S++){const T=b[S].x,N=b[S].y,$=b[P].x,F=b[P].y;N>f!=F>f&&l<($-T)*(f-N)/(F-N)+T&&(_=!_)}return _},qe=l=>{if(X!=="shape"||!v||v.length<=3)return;const f=Me.current;if(!f)return;const b=f.getBoundingClientRect(),_=l.clientX-b.left,S=l.clientY-b.top,{x:P,y:T}=Pt(_,S),N=St(P,T,v);if(N>=0){Oe();const $=v.filter((q,Q)=>Q!==N);w($),xe(null);const F=J(m,$);F!==m?(g(F),We(F,C,$)):We(m,C,$)}},ae=l=>{const f=Me.current;if(!f)return;const b=f.getBoundingClientRect(),_=l.clientX-b.left,S=l.clientY-b.top,{x:P,y:T}=Pt(_,S);if(X==="corners"){const N=St(P,T,m);N>=0?(Oe(),ge(N),f.setPointerCapture(l.pointerId)):G(P,T,m)&&(Oe(),ye(!0),ke({x:P,y:T}),f.setPointerCapture(l.pointerId))}else{const N=v||m,$=St(P,T,N);if($>=0)Oe(),ge($),xe($),f.setPointerCapture(l.pointerId);else{Oe();let F=0,q=1/0;for(let Y=0;Y<N.length;Y++){const B=(Y+1)%N.length,Z=ve(P,T,N[Y].x,N[Y].y,N[B].x,N[B].y);Z<q&&(q=Z,F=B)}const Q={x:P,y:T},K=[...N];K.splice(F,0,Q),w(K),xe(F);const W=J(m,K);W!==m?(g(W),We(W,C,K)):We(m,C,K)}}},M=l=>{if(ie===null&&!H)return;const f=Me.current;if(!f)return;const b=f.getBoundingClientRect(),_=l.clientX-b.left,S=l.clientY-b.top,{x:P,y:T}=Pt(_,S),N=Math.max(0,Math.min(u.naturalWidth,P)),$=Math.max(0,Math.min(u.naturalHeight,T));if(X==="corners"){if(H&&je){const F=N-je.x,q=$-je.y,Q=m.map(W=>({x:Math.max(0,Math.min(u.naturalWidth,W.x+F)),y:Math.max(0,Math.min(u.naturalHeight,W.y+q))}));let K=v;v&&(K=v.map(W=>({x:Math.max(0,Math.min(u.naturalWidth,W.x+F)),y:Math.max(0,Math.min(u.naturalHeight,W.y+q))})),w(K)),g(Q),ke({x:N,y:$}),We(Q,C,K)}else if(ie!==null){const F=[...m];F[ie]={x:N,y:$},g(F),We(F,C,v)}}else{const q=[...v||m];q[ie]={x:N,y:$},w(q),We(m,C,q)}},L=l=>{if(ie!==null||H){const f=Me.current;if(f&&f.releasePointerCapture(l.pointerId),X==="shape"&&v&&ie!==null){const b=J(m,v);b!==m&&(g(b),We(b,C,v))}ge(null),ye(!1),ke(null)}},J=(l,f)=>{if(!f||f.length<3||!l)return l;const b=l.reduce((W,Y)=>W+Y.x,0)/4,_=l.reduce((W,Y)=>W+Y.y,0)/4,S=f.reduce((W,Y)=>W+Y.x,0)/f.length,P=f.reduce((W,Y)=>W+Y.y,0)/f.length;let T=1;for(const W of f){const Y=W.x-b,B=W.y-_,Z=Math.sqrt(Y*Y+B*B);if(Z<1)continue;const V=pe(b,_,Y,B,l);if(V>0&&Z>V){const ne=Z/V;T=Math.max(T,ne)}}let N=1/0;for(const W of f){const Y=W.x-b,B=W.y-_,Z=Math.sqrt(Y*Y+B*B);if(Z<1)continue;const V=pe(b,_,Y,B,l);if(V>0){const ne=Z/V;N=Math.min(N,ne)}}let $=T;if(T<=1&&N<1/0&&($=N),Math.abs($-1)<.01)return l;const F=l.map(W=>({x:b+(W.x-b)*$,y:_+(W.y-_)*$})),q=S-b,Q=P-_;return F.map(W=>({x:W.x+q,y:W.y+Q}))},pe=(l,f,b,_,S)=>{let P=1/0;for(let T=0;T<4;T++){const N=S[T],$=S[(T+1)%4],F=$.x-N.x,q=$.y-N.y,Q=b*q-_*F;if(Math.abs(Q)<1e-4)continue;const K=((N.x-l)*q-(N.y-f)*F)/Q,W=((N.x-l)*_-(N.y-f)*b)/Q;K>0&&W>=0&&W<=1&&(P=Math.min(P,K*Math.sqrt(b*b+_*_)))}return P===1/0?0:P},ve=(l,f,b,_,S,P)=>{const T=l-b,N=f-_,$=S-b,F=P-_,q=T*$+N*F,Q=$*$+F*F;let K=Q!==0?q/Q:-1,W,Y;return K<0?(W=b,Y=_):K>1?(W=S,Y=P):(W=b+K*$,Y=_+K*F),Math.sqrt((l-W)**2+(f-Y)**2)},me=()=>{X==="corners"?(v||w([...m]),ce("shape"),xe(null)):(ce("corners"),xe(null))},Le=l=>{const f=Math.max(.3,Math.min(1,parseFloat(l.target.value)/100));x(f),We(m,f,v)},Xe=l=>{const f={...k,enabled:l.target.checked};A(f),We(m,C,v,f)},De=l=>{const f={...k,strength:parseFloat(l.target.value)/100};A(f),We(m,C,v,f)};return j?c.jsxs("div",{className:"four-point-editor loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading preview..."})]}):E?c.jsx("div",{className:"four-point-editor error",children:c.jsxs("p",{children:["Failed to load: ",E]})}):c.jsxs("div",{className:"four-point-editor",ref:_e,children:[c.jsxs("div",{className:"editor-header",children:[c.jsxs("div",{className:"header-title",children:[c.jsx("h3",{children:"Position Your Design"}),c.jsx(gw,{content:c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Corners Mode:"})," Drag the 4 corner handles (TL, TR, BR, BL) to position your design with perspective. You can also drag inside the design to move all corners at once."]}),c.jsxs("p",{style:{marginTop:"0.5rem"},children:[c.jsx("strong",{children:"Refine Shape Mode:"})," Click anywhere to add new vertices for precise shape control. Drag existing vertices to adjust. Double-click or press Delete/Backspace on a vertex to remove it."]}),c.jsxs("p",{style:{marginTop:"0.5rem"},children:[c.jsx("strong",{children:"Overlay Opacity:"})," Adjust transparency to see how the design blends with your photo."]}),c.jsxs("p",{style:{marginTop:"0.5rem"},children:[c.jsx("strong",{children:"Match Floor Lighting:"})," Automatically adjusts design brightness to match your floor's lighting conditions."]})]}),position:"right"})]}),c.jsx("p",{className:"instructions",children:X==="corners"?"Drag the corner handles (TL, TR, BR, BL) to position the design. Drag inside to move all corners.":"Click to add vertices, drag to move them, double-click or press Delete to remove."})]}),c.jsx("div",{className:"canvas-container",children:c.jsx("canvas",{ref:Me,onPointerDown:ae,onPointerMove:M,onPointerUp:L,onPointerLeave:L,onDoubleClick:qe,style:{width:`${((u==null?void 0:u.naturalWidth)||800)*D}px`,height:`${((u==null?void 0:u.naturalHeight)||600)*D}px`,cursor:ie!==null||H?"grabbing":X==="shape"?"crosshair":"move",touchAction:"none"}})}),c.jsxs("div",{className:"controls",children:[c.jsxs("div",{className:"mode-toggle",children:[c.jsx("button",{className:`toggle-btn ${X==="corners"?"active":""}`,onClick:()=>ce("corners"),children:"Corners"}),c.jsx("button",{className:`toggle-btn ${X==="shape"?"active":""}`,onClick:me,children:"Refine Shape"}),c.jsx("button",{className:"toggle-btn undo-btn",onClick:ht,disabled:st.length===0,title:"Undo last change",children:"Undo"})]}),c.jsxs("div",{className:"opacity-control",children:[c.jsxs("label",{children:["Overlay Opacity",c.jsxs("span",{className:"value",children:[Math.round(C*100),"%"]})]}),c.jsx("input",{type:"range",min:"30",max:"100",value:Math.round(C*100),onChange:Le})]}),c.jsxs("div",{className:"lighting-control",children:[c.jsxs("label",{className:"checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:k.enabled,onChange:Xe}),"Match floor lighting"]}),k.enabled&&c.jsxs("div",{className:"lighting-slider",children:[c.jsxs("label",{children:["Strength",c.jsxs("span",{className:"value",children:[Math.round(k.strength*100),"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:Math.round(k.strength*100),onChange:De})]})]})]}),c.jsx("style",{children:`
        .four-point-editor {
          display: flex;
          flex-direction: column;
          height: 100%;
        }

        .four-point-editor.loading,
        .four-point-editor.error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 400px;
          color: #6b7280;
        }

        .four-point-editor .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid #e5e7eb;
          border-top-color: #ff6b35;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .editor-header {
          padding-bottom: 1rem;
          border-bottom: 1px solid #e5e7eb;
          margin-bottom: 1rem;
        }

        .editor-header .header-title {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 0.5rem;
        }

        .editor-header h3 {
          margin: 0;
          font-size: 1.125rem;
          color: #1e4a7a;
        }

        .editor-header .instructions {
          margin: 0;
          font-size: 0.875rem;
          color: #6b7280;
        }

        .canvas-container {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f3f4f6;
          border-radius: 8px;
          overflow: hidden;
          min-height: 400px;
        }

        .canvas-container canvas {
          display: block;
        }

        .controls {
          padding-top: 1rem;
          border-top: 1px solid #e5e7eb;
          margin-top: 1rem;
          display: flex;
          flex-direction: column;
          gap: 1rem;
        }

        .mode-toggle {
          display: flex;
          gap: 0.5rem;
        }

        .toggle-btn {
          padding: 0.5rem 1rem;
          border: 1px solid #d1d5db;
          background: white;
          border-radius: 4px;
          font-size: 0.875rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .toggle-btn:hover {
          background: #f9fafb;
        }

        .toggle-btn.active {
          background: #ff6b35;
          color: white;
          border-color: #ff6b35;
        }

        .toggle-btn:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }

        .toggle-btn:disabled:hover {
          background: white;
        }

        .opacity-control {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .opacity-control label {
          display: flex;
          justify-content: space-between;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
        }

        .opacity-control .value {
          font-weight: 400;
          color: #6b7280;
        }

        .opacity-control input[type="range"] {
          width: 100%;
          height: 6px;
          border-radius: 3px;
          background: #e5e7eb;
          outline: none;
          -webkit-appearance: none;
        }

        .opacity-control input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: #ff6b35;
          cursor: pointer;
        }

        .lighting-control {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .checkbox-label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
          cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
          width: 16px;
          height: 16px;
          cursor: pointer;
        }

        .lighting-slider {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          padding-left: 1.5rem;
        }

        .lighting-slider label {
          display: flex;
          justify-content: space-between;
          font-size: 0.8rem;
          color: #6b7280;
        }

        .lighting-slider .value {
          font-weight: 400;
        }

        .lighting-slider input[type="range"] {
          width: 100%;
          height: 6px;
          border-radius: 3px;
          background: #e5e7eb;
          outline: none;
          -webkit-appearance: none;
        }

        .lighting-slider input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #22c55e;
          cursor: pointer;
        }
      `})]})}const Fa={UPLOAD:"upload",POSITION:"position"};function IO({designUrl:e,designDimensions:t,onClose:n,onSaved:r}){const[i,s]=fe.useState(Fa.UPLOAD),[a,o]=fe.useState(null),[u,h]=fe.useState(null),[d,p]=fe.useState(null),[m,g]=fe.useState(.8),[v,w]=fe.useState({enabled:!1,strength:.6,baseBrightness:1,baseContrast:1}),[C,x]=fe.useState(!1),k=fe.useRef(null);fe.useEffect(()=>{if(e){console.log("[IN-SITU-MODAL] Design URL received:",e==null?void 0:e.substring(0,50));const R=new Image;!e.startsWith("blob:")&&!e.startsWith("data:")&&(R.crossOrigin="anonymous"),R.src=e}else console.warn("[IN-SITU-MODAL] No design URL provided")},[e]);const A=R=>{console.log("[IN-SITU-MODAL] Photo uploaded:",R),o(R),console.log("[IN-SITU-MODAL] Advancing to POSITION step, designUrl:",e==null?void 0:e.substring(0,50)),s(Fa.POSITION)},j=({quad:R,opacity:X,shape:ce,lighting:ie})=>{h(R),g(X),p(ce),ie&&w(ie)},I=async()=>{if(!a||!u)return null;try{console.log("[InSitu] Loading design from URL:",e);const[R,X]=await Promise.all([l_(a.url),MO(e,1536)]);console.log("[InSitu] Successfully loaded design image");const ce=document.createElement("canvas");ce.width=R.naturalWidth,ce.height=R.naturalHeight;const ie=ce.getContext("2d");return LO({photoCtx:ie,photoImg:R,designImg:X,quad:u,opacity:m,shape:d,lighting:v}),ce}catch(R){return console.error("[InSitu] Failed to generate canvas:",R),alert(`Failed to load design: ${R.message}`),null}},E=async()=>{const R=await I();R&&Coe(R,"tpv-in-situ-preview.png")},U=async()=>{if(!(!u||!a)){x(!0);try{const R=await I();if(!R)throw new Error("Failed to generate preview");const X=await new Promise(ye=>R.toBlob(ye,"image/png")),ie=`in-situ-previews/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`}`,{error:ge}=await hi.storage.from("tpv-studio-uploads").upload(ie,X,{contentType:"image/png",cacheControl:"3600"});if(ge)throw ge;const{data:{publicUrl:H}}=hi.storage.from("tpv-studio-uploads").getPublicUrl(ie);r&&r({photo_url:a.supabaseUrl||a.url,quad:u,shape:d,opacity:m,lighting:v,preview_url:H}),n()}catch(R){console.error("[IN-SITU] Save failed:",R),alert("Failed to save preview: "+R.message)}finally{x(!1)}}},D=()=>{switch(i){case Fa.UPLOAD:return"Upload Site Photo";case Fa.POSITION:return"Position Your Design";default:return"In-Situ Preview"}};return c.jsxs("div",{className:"modal-overlay in-situ-modal-overlay",onClick:n,children:[c.jsxs("div",{className:"modal-content in-situ-modal",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h2",{children:D()}),c.jsxs("div",{className:"step-indicator",children:[c.jsx("span",{className:i===Fa.UPLOAD?"active":"completed",children:"1. Upload"}),c.jsx("span",{className:i===Fa.POSITION?"active":"",children:"2. Position"})]})]}),c.jsx("button",{onClick:n,className:"close-button",children:""})]}),c.jsxs("div",{className:"modal-body",children:[i===Fa.UPLOAD&&c.jsxs("div",{className:"upload-step",children:[c.jsx("p",{className:"step-description",children:"Upload a photo of your site to see how your TPV design will look when installed. For best results, use a photo taken from above or at a slight angle showing the floor area clearly."}),c.jsx(_oe,{onPhotoUploaded:A})]}),i===Fa.POSITION&&a&&c.jsx(Ooe,{ref:k,photoUrl:a.url,svgUrl:e,designSizeMm:{width_mm:t.width,length_mm:t.length},initialOpacity:.8,onChange:j})]}),i===Fa.POSITION&&c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{onClick:()=>s(Fa.UPLOAD),className:"btn-secondary",children:"Back"}),c.jsxs("div",{className:"footer-actions",children:[c.jsx("button",{onClick:E,disabled:!u,className:"btn-secondary",children:"Download PNG"}),c.jsx("button",{onClick:U,disabled:!u||C,className:"btn-primary",children:C?"Saving...":"Save to Project"})]})]})]}),c.jsx("style",{children:`
        .in-situ-modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 1rem;
        }

        .in-situ-modal {
          background: white;
          border-radius: 12px;
          width: 100%;
          max-width: 1000px;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .in-situ-modal .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          padding: 1.25rem 1.5rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .header-left {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .in-situ-modal .modal-header h2 {
          margin: 0;
          font-size: 1.25rem;
          color: #1e4a7a;
        }

        .step-indicator {
          display: flex;
          gap: 1rem;
          font-size: 0.75rem;
        }

        .step-indicator span {
          color: #9ca3af;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
        }

        .step-indicator span.active {
          background: #fff7f5;
          color: #ff6b35;
          font-weight: 500;
        }

        .step-indicator span.completed {
          color: #22c55e;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 1.5rem;
          cursor: pointer;
          color: #9ca3af;
          padding: 0;
          line-height: 1;
        }

        .close-button:hover {
          color: #374151;
        }

        .modal-body {
          flex: 1;
          padding: 1.5rem;
          overflow-y: auto;
          min-height: 500px;
        }

        .upload-step {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }

        .step-description {
          margin: 0;
          font-size: 0.875rem;
          color: #6b7280;
          line-height: 1.6;
        }

        .modal-footer {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 1.5rem;
          border-top: 1px solid #e5e7eb;
          background: #f9fafb;
          border-radius: 0 0 12px 12px;
        }

        .footer-actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary {
          padding: 0.5rem 1rem;
          border-radius: 4px;
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          border: none;
        }

        .btn-primary {
          background: #ff6b35;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #e55a2b;
        }

        .btn-primary:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        .btn-secondary {
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
        }

        .btn-secondary:hover:not(:disabled) {
          background: #f9fafb;
        }

        .btn-secondary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
          .in-situ-modal {
            max-width: 100%;
            max-height: 100vh;
            border-radius: 0;
          }

          .modal-body {
            padding: 1rem;
          }

          .step-indicator {
            display: none;
          }

          .modal-footer {
            border-radius: 0;
          }
        }
      `})]})}function Roe({isOpen:e,onClose:t,onConfirm:n,aspectRatio:r,defaultLongestSide:i=5e3}){const[s,a]=fe.useState(i),[o,u]=fe.useState(i/1e3),d=(w=>{if(!r||r<=0)return{width:w,length:w};if(r>=1){const C=w,x=Math.round(w/r);return{width:C,length:x}}else{const C=w;return{width:Math.round(w*r),length:C}}})(s),p=r>=1?"landscape":"portrait",m=r>=1?`${r.toFixed(1)}:1`:`1:${(1/r).toFixed(1)}`,g=w=>{const C=parseFloat(w.target.value)||0;u(C),a(Math.round(C*1e3))},v=()=>{n(d.width,d.length),t()};return e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"dimension-modal-overlay",onClick:t,children:c.jsxs("div",{className:"dimension-modal",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"dimension-modal-header",children:[c.jsxs("div",{className:"dimension-modal-title",children:[c.jsx("h2",{children:"Set Installation Size"}),c.jsx(gw,{content:c.jsxs("div",{children:[c.jsx("p",{children:c.jsx("strong",{children:"Why specify dimensions?"})}),c.jsx("p",{style:{marginTop:"0.5rem"},children:"Accurate dimensions are essential for:"}),c.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.25rem"},children:[c.jsx("li",{children:"Calculating exact material quantities"}),c.jsx("li",{children:"Generating PDF specifications for manufacturers"}),c.jsx("li",{children:"Slicing designs into 1m1m installation tiles"})]}),c.jsxs("p",{style:{marginTop:"0.5rem"},children:[c.jsx("strong",{children:"Tip:"})," Typical playground installations range from 3m to 20m on the longest side."]})]}),position:"bottom"})]}),c.jsx("button",{className:"dimension-modal-close",onClick:t,"aria-label":"Close",children:""})]}),c.jsxs("div",{className:"dimension-modal-body",children:[c.jsx("div",{className:"dimension-info",children:c.jsxs("p",{className:"dimension-aspect",children:["Your design has a ",c.jsxs("strong",{children:[m," ",p]})," aspect ratio"]})}),c.jsxs("div",{className:"dimension-input-group",children:[c.jsx("label",{htmlFor:"longest-dimension",children:"Installation Size (Longest Side)"}),c.jsxs("div",{className:"dimension-input-wrapper",children:[c.jsx("input",{id:"longest-dimension",type:"number",min:"0.1",max:"50",step:"0.1",value:o,onChange:g,className:"dimension-input"}),c.jsx("span",{className:"dimension-unit",children:"meters"})]}),c.jsx("p",{className:"dimension-help",children:"Enter the measurement of the longest side of your installation area. The other dimension will be calculated automatically based on your design's aspect ratio."})]}),c.jsxs("div",{className:"dimension-preview",children:[c.jsx("div",{className:"dimension-preview-title",children:"Calculated Dimensions:"}),c.jsxs("div",{className:"dimension-preview-values",children:[c.jsxs("div",{className:"dimension-preview-item",children:[c.jsx("span",{className:"dimension-preview-label",children:"Width:"}),c.jsxs("span",{className:"dimension-preview-value",children:[(d.width/1e3).toFixed(2),"m"]})]}),c.jsxs("div",{className:"dimension-preview-item",children:[c.jsx("span",{className:"dimension-preview-label",children:"Length:"}),c.jsxs("span",{className:"dimension-preview-value",children:[(d.length/1e3).toFixed(2),"m"]})]}),c.jsxs("div",{className:"dimension-preview-item",children:[c.jsx("span",{className:"dimension-preview-label",children:"Total Area:"}),c.jsxs("span",{className:"dimension-preview-value",children:[(d.width*d.length/1e6).toFixed(2),"m"]})]})]})]}),c.jsxs("div",{className:"dimension-note",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"8",cy:"8",r:"7"}),c.jsx("line",{x1:"8",y1:"11",x2:"8",y2:"8"}),c.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),c.jsx("p",{children:"These dimensions will be used to calculate material quantities for your PDF specification and to slice your design into 1m1m installation tiles."})]})]}),c.jsxs("div",{className:"dimension-modal-footer",children:[c.jsx("button",{className:"dimension-btn dimension-btn-secondary",onClick:t,children:"Cancel"}),c.jsx("button",{className:"dimension-btn dimension-btn-primary",onClick:v,disabled:o<=0,children:"Confirm Size"})]})]})}),c.jsx("style",{children:`
        .dimension-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
        backdrop-filter: blur(4px);
      }

      .dimension-modal {
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        animation: dimensionModalSlideIn 0.3s ease-out;
      }

      @keyframes dimensionModalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .dimension-modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px;
        border-bottom: 1px solid #e5e7eb;
      }

      .dimension-modal-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .dimension-modal-header h2 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
        color: #111827;
      }

      .dimension-modal-close {
        background: none;
        border: none;
        font-size: 2rem;
        line-height: 1;
        color: #9ca3af;
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        transition: all 0.2s;
      }

      .dimension-modal-close:hover {
        background: #f3f4f6;
        color: #111827;
      }

      .dimension-modal-body {
        padding: 24px;
        overflow-y: auto;
        flex: 1;
      }

      .dimension-info {
        background: #f0f9ff;
        border: 1px solid #bae6fd;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 24px;
      }

      .dimension-aspect {
        margin: 0;
        color: #0c4a6e;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .dimension-input-group {
        margin-bottom: 24px;
      }

      .dimension-input-group label {
        display: block;
        font-weight: 600;
        color: #374151;
        margin-bottom: 8px;
        font-size: 0.95rem;
      }

      .dimension-input-wrapper {
        position: relative;
        display: flex;
        align-items: center;
      }

      .dimension-input {
        width: 100%;
        padding: 12px 16px;
        padding-right: 70px;
        font-size: 1.1rem;
        border: 2px solid #d1d5db;
        border-radius: 10px;
        transition: all 0.2s;
        font-family: inherit;
      }

      .dimension-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .dimension-unit {
        position: absolute;
        right: 16px;
        color: #6b7280;
        font-weight: 500;
        pointer-events: none;
      }

      .dimension-help {
        margin: 8px 0 0 0;
        font-size: 0.85rem;
        color: #6b7280;
      }

      .dimension-preview {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .dimension-preview-title {
        font-weight: 600;
        color: #374151;
        margin-bottom: 16px;
        font-size: 0.95rem;
      }

      .dimension-preview-values {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .dimension-preview-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
      }

      .dimension-preview-label {
        color: #6b7280;
        font-size: 0.9rem;
      }

      .dimension-preview-value {
        font-weight: 600;
        color: #111827;
        font-size: 1.05rem;
      }

      .dimension-note {
        display: flex;
        gap: 12px;
        padding: 16px;
        background: #fffbeb;
        border: 1px solid #fde68a;
        border-radius: 10px;
      }

      .dimension-note svg {
        flex-shrink: 0;
        margin-top: 2px;
        color: #f59e0b;
      }

      .dimension-note p {
        margin: 0;
        font-size: 0.85rem;
        color: #78350f;
        line-height: 1.5;
      }

      .dimension-modal-footer {
        padding: 20px 24px;
        border-top: 1px solid #e5e7eb;
        display: flex;
        gap: 12px;
        justify-content: flex-end;
      }

      .dimension-btn {
        padding: 10px 24px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
        font-family: inherit;
      }

      .dimension-btn-secondary {
        background: white;
        border: 1px solid #d1d5db;
        color: #374151;
      }

      .dimension-btn-secondary:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }

      .dimension-btn-primary {
        background: #3b82f6;
        color: white;
      }

      .dimension-btn-primary:hover {
        background: #2563eb;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .dimension-btn-primary:disabled {
        background: #9ca3af;
        cursor: not-allowed;
        box-shadow: none;
      }

      @media (max-width: 640px) {
        .dimension-modal {
          max-width: none;
          width: 100%;
          margin: 0;
          max-height: 100vh;
          border-radius: 0;
        }

        .dimension-modal-header {
          padding: 20px;
        }

        .dimension-modal-header h2 {
          font-size: 1.25rem;
        }

        .dimension-modal-body {
          padding: 20px;
        }

        .dimension-modal-footer {
          flex-direction: column-reverse;
          padding: 16px 20px;
        }

        .dimension-btn {
          width: 100%;
        }
      }
      `})]}):null}const $O={},Moe=Object.freeze(Object.defineProperty({__proto__:null,default:$O},Symbol.toStringTag,{value:"Module"})),jo=Symbol(),so=(e,t,n)=>{const r=t[e.type];if(!(r!=null&&r.enter&&r.enter(e,n)===jo)){if(e.type==="root")for(const i of e.children)so(i,t,e);if(e.type==="element"&&n.children.includes(e))for(const i of e.children)so(i,t,e);r!=null&&r.exit&&r.exit(e,n)}},DO=(e,t,n,r,i)=>{for(const s of n){const a=r==null?void 0:r[s.name];if(a===!1)continue;const o={...s.params,...i,...a},u=s.fn(e,o,t);u!=null&&so(e,u)}},Loe=({name:e,plugins:t})=>({name:e,isPreset:!0,plugins:Object.freeze(t),fn:(n,r,i)=>{const{floatPrecision:s,overrides:a}=r,o={};if(s!=null&&(o.floatPrecision=s),a){const u=t.map(({name:h})=>h);for(const h of Object.keys(a))u.includes(h)||console.warn(`You are trying to configure ${h} which is not part of ${e}.
Try to put it before or after, for example

plugins: [
  {
    name: '${e}',
  },
  '${h}'
]
`)}DO(n,i,t,a,o)}});var mi;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(mi||(mi={}));function Ioe(e){return e.type===mi.Tag||e.type===mi.Script||e.type===mi.Style}const $oe=mi.Root,Doe=mi.Text,zoe=mi.Directive,Foe=mi.Comment,Boe=mi.Script,Uoe=mi.Style,Hoe=mi.Tag,Woe=mi.CDATA,Voe=mi.Doctype;function qs(e){return Ioe(e)}function c_(e){return e.type===mi.CDATA}function Gu(e){return e.type===mi.Text}function zO(e){return e.type===mi.Comment}function Goe(e){return e.type===mi.Root}function ja(e){return Object.prototype.hasOwnProperty.call(e,"children")}const uE=/["&'<>$\x80-\uFFFF]/g,qoe=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),Yoe=String.prototype.codePointAt!=null?(e,t)=>e.codePointAt(t):(e,t)=>(e.charCodeAt(t)&64512)===55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function FO(e){let t="",n=0,r;for(;(r=uE.exec(e))!==null;){const i=r.index,s=e.charCodeAt(i),a=qoe.get(s);a!==void 0?(t+=e.substring(n,i)+a,n=i+1):(t+=`${e.substring(n,i)}&#x${Yoe(e,i).toString(16)};`,n=uE.lastIndex+=+((s&64512)===55296))}return t+e.substr(n)}function BO(e,t){return function(r){let i,s=0,a="";for(;i=e.exec(r);)s!==i.index&&(a+=r.substring(s,i.index)),a+=t.get(i[0].charCodeAt(0)),s=i.index+1;return a+r.substring(s)}}const Xoe=BO(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Koe=BO(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),Zoe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Qoe=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Joe=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function ele(e){return e.replace(/"/g,"&quot;")}function tle(e,t){var n;if(!e)return;const r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?ele:t.xmlMode||t.encodeEntities!=="utf8"?FO:Xoe;return Object.keys(e).map(i=>{var s,a;const o=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(a=Qoe.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&o===""?i:`${i}="${r(o)}"`}).join(" ")}const hE=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function u_(e,t={}){const n="length"in e?e:[e];let r="";for(let i=0;i<n.length;i++)r+=nle(n[i],t);return r}function nle(e,t){switch(e.type){case $oe:return u_(e.children,t);case Voe:case zoe:return ale(e);case Foe:return cle(e);case Woe:return lle(e);case Boe:case Uoe:case Hoe:return sle(e,t);case Doe:return ole(e,t)}}const rle=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),ile=new Set(["svg","math"]);function sle(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=Zoe.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&rle.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&ile.has(e.name)&&(t={...t,xmlMode:"foreign"});let r=`<${e.name}`;const i=tle(e.attribs,t);return i&&(r+=` ${i}`),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&hE.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=u_(e.children,t)),(t.xmlMode||!hE.has(e.name))&&(r+=`</${e.name}>`)),r}function ale(e){return`<${e.data}>`}function ole(e,t){var n;let r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&Joe.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?FO(r):Koe(r)),r}function lle(e){return`<![CDATA[${e.children[0].data}]]>`}function cle(e){return`<!--${e.data}-->`}function UO(e,t){return u_(e,t)}function ule(e,t){return ja(e)?e.children.map(n=>UO(n,t)).join(""):""}function lm(e){return Array.isArray(e)?e.map(lm).join(""):qs(e)?e.name==="br"?`
`:lm(e.children):c_(e)?lm(e.children):Gu(e)?e.data:""}function ug(e){return Array.isArray(e)?e.map(ug).join(""):ja(e)&&!zO(e)?ug(e.children):Gu(e)?e.data:""}function xx(e){return Array.isArray(e)?e.map(xx).join(""):ja(e)&&(e.type===mi.Tag||c_(e))?xx(e.children):Gu(e)?e.data:""}function HO(e){return ja(e)?e.children:[]}function WO(e){return e.parent||null}function hle(e){const t=WO(e);if(t!=null)return HO(t);const n=[e];let{prev:r,next:i}=e;for(;r!=null;)n.unshift(r),{prev:r}=r;for(;i!=null;)n.push(i),{next:i}=i;return n}function dle(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function fle(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}function ple(e){return e.name}function mle(e){let{next:t}=e;for(;t!==null&&!qs(t);)({next:t}=t);return t}function gle(e){let{prev:t}=e;for(;t!==null&&!qs(t);)({prev:t}=t);return t}function Nf(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function yle(e,t){const n=t.prev=e.prev;n&&(n.next=t);const r=t.next=e.next;r&&(r.prev=t);const i=t.parent=e.parent;if(i){const s=i.children;s[s.lastIndexOf(e)]=t,e.parent=null}}function ble(e,t){if(Nf(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}function vle(e,t){Nf(t);const{parent:n}=e,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){const i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)}function xle(e,t){if(Nf(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){const n=e.children[1];n.prev=t,t.next=n}else t.next=null}function wle(e,t){Nf(t);const{parent:n}=e;if(n){const r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}function Of(e,t,n=!0,r=1/0){return VO(e,Array.isArray(t)?t:[t],n,r)}function VO(e,t,n,r){const i=[],s=[Array.isArray(t)?t:[t]],a=[0];for(;;){if(a[0]>=s[0].length){if(a.length===1)return i;s.shift(),a.shift();continue}const o=s[0][a[0]++];if(e(o)&&(i.push(o),--r<=0))return i;n&&ja(o)&&o.children.length>0&&(a.unshift(0),s.unshift(o.children))}}function _le(e,t){return t.find(e)}function h_(e,t,n=!0){const r=Array.isArray(t)?t:[t];for(let i=0;i<r.length;i++){const s=r[i];if(qs(s)&&e(s))return s;if(n&&ja(s)&&s.children.length>0){const a=h_(e,s.children,!0);if(a)return a}}return null}function GO(e,t){return(Array.isArray(t)?t:[t]).some(n=>qs(n)&&e(n)||ja(n)&&GO(e,n.children))}function kle(e,t){const n=[],r=[Array.isArray(t)?t:[t]],i=[0];for(;;){if(i[0]>=r[0].length){if(r.length===1)return n;r.shift(),i.shift();continue}const s=r[0][i[0]++];qs(s)&&e(s)&&n.push(s),ja(s)&&s.children.length>0&&(i.unshift(0),r.unshift(s.children))}}const hg={tag_name(e){return typeof e=="function"?t=>qs(t)&&e(t.name):e==="*"?qs:t=>qs(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>Gu(t)&&e(t.data):t=>Gu(t)&&t.data===e}};function d_(e,t){return typeof t=="function"?n=>qs(n)&&t(n.attribs[e]):n=>qs(n)&&n.attribs[e]===t}function Sle(e,t){return n=>e(n)||t(n)}function qO(e){const t=Object.keys(e).map(n=>{const r=e[n];return Object.prototype.hasOwnProperty.call(hg,n)?hg[n](r):d_(n,r)});return t.length===0?null:t.reduce(Sle)}function Cle(e,t){const n=qO(e);return n?n(t):!0}function Ele(e,t,n,r=1/0){const i=qO(e);return i?Of(i,t,n,r):[]}function Tle(e,t,n=!0){return Array.isArray(t)||(t=[t]),h_(d_("id",e),t,n)}function wh(e,t,n=!0,r=1/0){return Of(hg.tag_name(e),t,n,r)}function jle(e,t,n=!0,r=1/0){return Of(d_("class",e),t,n,r)}function Ale(e,t,n=!0,r=1/0){return Of(hg.tag_type(e),t,n,r)}function Ple(e){let t=e.length;for(;--t>=0;){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0){e.splice(t,1);continue}for(let r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e}var Fs;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(Fs||(Fs={}));function YO(e,t){const n=[],r=[];if(e===t)return 0;let i=ja(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=ja(t)?t:t.parent;i;)r.unshift(i),i=i.parent;const s=Math.min(n.length,r.length);let a=0;for(;a<s&&n[a]===r[a];)a++;if(a===0)return Fs.DISCONNECTED;const o=n[a-1],u=o.children,h=n[a],d=r[a];return u.indexOf(h)>u.indexOf(d)?o===t?Fs.FOLLOWING|Fs.CONTAINED_BY:Fs.FOLLOWING:o===e?Fs.PRECEDING|Fs.CONTAINS:Fs.PRECEDING}function Nle(e){return e=e.filter((t,n,r)=>!r.includes(t,n+1)),e.sort((t,n)=>{const r=YO(t,n);return r&Fs.PRECEDING?-1:r&Fs.FOLLOWING?1:0}),e}function Ole(e){const t=dg($le,e);return t?t.name==="feed"?Rle(t):Mle(t):null}function Rle(e){var t;const n=e.children,r={type:"atom",items:wh("entry",n).map(a=>{var o;const{children:u}=a,h={media:XO(u)};is(h,"id","id",u),is(h,"title","title",u);const d=(o=dg("link",u))===null||o===void 0?void 0:o.attribs.href;d&&(h.link=d);const p=el("summary",u)||el("content",u);p&&(h.description=p);const m=el("updated",u);return m&&(h.pubDate=new Date(m)),h})};is(r,"id","id",n),is(r,"title","title",n);const i=(t=dg("link",n))===null||t===void 0?void 0:t.attribs.href;i&&(r.link=i),is(r,"description","subtitle",n);const s=el("updated",n);return s&&(r.updated=new Date(s)),is(r,"author","email",n,!0),r}function Mle(e){var t,n;const r=(n=(t=dg("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],i={type:e.name.substr(0,3),id:"",items:wh("item",e.children).map(a=>{const{children:o}=a,u={media:XO(o)};is(u,"id","guid",o),is(u,"title","title",o),is(u,"link","link",o),is(u,"description","description",o);const h=el("pubDate",o)||el("dc:date",o);return h&&(u.pubDate=new Date(h)),u})};is(i,"title","title",r),is(i,"link","link",r),is(i,"description","description",r);const s=el("lastBuildDate",r);return s&&(i.updated=new Date(s)),is(i,"author","managingEditor",r,!0),i}const Lle=["url","type","lang"],Ile=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function XO(e){return wh("media:content",e).map(t=>{const{attribs:n}=t,r={medium:n.medium,isDefault:!!n.isDefault};for(const i of Lle)n[i]&&(r[i]=n[i]);for(const i of Ile)n[i]&&(r[i]=parseInt(n[i],10));return n.expression&&(r.expression=n.expression),r})}function dg(e,t){return wh(e,t,!0,1)[0]}function el(e,t,n=!1){return ug(wh(e,t,n,1)).trim()}function is(e,t,n,r,i=!1){const s=el(n,r,i);s&&(e[t]=s)}function $le(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}const KO=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return Fs},append:vle,appendChild:ble,compareDocumentPosition:YO,existsOne:GO,filter:Of,find:VO,findAll:kle,findOne:h_,findOneChild:_le,getAttributeValue:dle,getChildren:HO,getElementById:Tle,getElements:Ele,getElementsByClassName:jle,getElementsByTagName:wh,getElementsByTagType:Ale,getFeed:Ole,getInnerHTML:ule,getName:ple,getOuterHTML:UO,getParent:WO,getSiblings:hle,getText:lm,hasAttrib:fle,hasChildren:ja,innerText:xx,isCDATA:c_,isComment:zO,isDocument:Goe,isTag:qs,isText:Gu,nextElementSibling:mle,prepend:wle,prependChild:xle,prevElementSibling:gle,removeElement:Nf,removeSubsets:Ple,replaceElement:yle,testElement:Cle,textContent:ug,uniqueSort:Nle},Symbol.toStringTag,{value:"Module"}));var Dle={trueFunc:function(){return!0},falseFunc:function(){return!1}};const Sn=yl(Dle);var un;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(un||(un={}));var di;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(di||(di={}));const dE=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,zle=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Fle=new Map([[126,di.Element],[94,di.Start],[36,di.End],[42,di.Any],[33,di.Not],[124,di.Hyphen]]),Ble=new Set(["has","not","matches","is","where","host","host-context"]);function ZO(e){switch(e.type){case un.Adjacent:case un.Child:case un.Descendant:case un.Parent:case un.Sibling:case un.ColumnCombinator:return!0;default:return!1}}const Ule=new Set(["contains","icontains"]);function Hle(e,t,n){const r=parseInt(t,16)-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)}function Fh(e){return e.replace(zle,Hle)}function Dy(e){return e===39||e===34}function fE(e){return e===32||e===9||e===10||e===12||e===13}function sf(e){const t=[],n=QO(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function QO(e,t,n){let r=[];function i(m){const g=t.slice(n+m).match(dE);if(!g)throw new Error(`Expected name, found ${t.slice(n)}`);const[v]=g;return n+=m+v.length,Fh(v)}function s(m){for(n+=m;n<t.length&&fE(t.charCodeAt(n));)n++}function a(){n+=1;const m=n;let g=1;for(;g>0&&n<t.length;n++)t.charCodeAt(n)===40&&!o(n)?g++:t.charCodeAt(n)===41&&!o(n)&&g--;if(g)throw new Error("Parenthesis not matched");return Fh(t.slice(m,n-1))}function o(m){let g=0;for(;t.charCodeAt(--m)===92;)g++;return(g&1)===1}function u(){if(r.length>0&&ZO(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function h(m){if(r.length>0&&r[r.length-1].type===un.Descendant){r[r.length-1].type=m;return}u(),r.push({type:m})}function d(m,g){r.push({type:un.Attribute,name:m,action:g,value:i(1),namespace:null,ignoreCase:"quirks"})}function p(){if(r.length&&r[r.length-1].type===un.Descendant&&r.pop(),r.length===0)throw new Error("Empty sub-selector");e.push(r)}if(s(0),t.length===n)return n;e:for(;n<t.length;){const m=t.charCodeAt(n);switch(m){case 32:case 9:case 10:case 12:case 13:{(r.length===0||r[0].type!==un.Descendant)&&(u(),r.push({type:un.Descendant})),s(1);break}case 62:{h(un.Child),s(1);break}case 60:{h(un.Parent),s(1);break}case 126:{h(un.Sibling),s(1);break}case 43:{h(un.Adjacent),s(1);break}case 46:{d("class",di.Element);break}case 35:{d("id",di.Equals);break}case 91:{s(1);let g,v=null;t.charCodeAt(n)===124?g=i(1):t.startsWith("*|",n)?(v="*",g=i(2)):(g=i(0),t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==61&&(v=g,g=i(1))),s(0);let w=di.Exists;const C=Fle.get(t.charCodeAt(n));if(C){if(w=C,t.charCodeAt(n+1)!==61)throw new Error("Expected `=`");s(2)}else t.charCodeAt(n)===61&&(w=di.Equals,s(1));let x="",k=null;if(w!=="exists"){if(Dy(t.charCodeAt(n))){const I=t.charCodeAt(n);let E=n+1;for(;E<t.length&&(t.charCodeAt(E)!==I||o(E));)E+=1;if(t.charCodeAt(E)!==I)throw new Error("Attribute value didn't end");x=Fh(t.slice(n+1,E)),n=E+1}else{const I=n;for(;n<t.length&&(!fE(t.charCodeAt(n))&&t.charCodeAt(n)!==93||o(n));)n+=1;x=Fh(t.slice(I,n))}s(0);const j=t.charCodeAt(n)|32;j===115?(k=!1,s(1)):j===105&&(k=!0,s(1))}if(t.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const A={type:un.Attribute,name:g,action:w,value:x,namespace:v,ignoreCase:k};r.push(A);break}case 58:{if(t.charCodeAt(n+1)===58){r.push({type:un.PseudoElement,name:i(2).toLowerCase(),data:t.charCodeAt(n)===40?a():null});continue}const g=i(1).toLowerCase();let v=null;if(t.charCodeAt(n)===40)if(Ble.has(g)){if(Dy(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${g} cannot be quoted`);if(v=[],n=QO(v,t,n+1),t.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${g} (${t})`);n+=1}else{if(v=a(),Ule.has(g)){const w=v.charCodeAt(0);w===v.charCodeAt(v.length-1)&&Dy(w)&&(v=v.slice(1,-1))}v=Fh(v)}r.push({type:un.Pseudo,name:g,data:v});break}case 44:{p(),r=[],s(1);break}default:{if(t.startsWith("/*",n)){const w=t.indexOf("*/",n+2);if(w<0)throw new Error("Comment was not terminated");n=w+2,r.length===0&&s(0);break}let g=null,v;if(m===42)n+=1,v="*";else if(m===124){if(v="",t.charCodeAt(n+1)===124){h(un.ColumnCombinator),s(2);break}}else if(dE.test(t.slice(n)))v=i(0);else break e;t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==124&&(g=v,t.charCodeAt(n+1)===42?(v="*",n+=2):v=i(1)),r.push(v==="*"?{type:un.Universal,namespace:g}:{type:un.Tag,name:v,namespace:g})}}}return p(),n}const JO=new Map([[un.Universal,50],[un.Tag,30],[un.Attribute,1],[un.Pseudo,0]]);function f_(e){return!JO.has(e.type)}const Wle=new Map([[di.Exists,10],[di.Equals,8],[di.Not,7],[di.Start,6],[di.End,6],[di.Any,5]]);function Vle(e){const t=e.map(eR);for(let n=1;n<e.length;n++){const r=t[n];if(!(r<0))for(let i=n-1;i>=0&&r<t[i];i--){const s=e[i+1];e[i+1]=e[i],e[i]=s,t[i+1]=t[i],t[i]=r}}}function eR(e){var t,n;let r=(t=JO.get(e.type))!==null&&t!==void 0?t:-1;return e.type===un.Attribute?(r=(n=Wle.get(e.action))!==null&&n!==void 0?n:4,e.action===di.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===un.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map(i=>Math.min(...i.map(eR)))),r<0&&(r=0)):r=2:r=3),r}const Gle=/[-[\]{}()*+?.,\\^$|#\s]/g;function pE(e){return e.replace(Gle,"\\$&")}const qle=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Nl(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&qle.has(e.name)}const Yle={equals(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return Nl(t,n)?(s=s.toLowerCase(),a=>{const o=r.getAttributeValue(a,i);return o!=null&&o.length===s.length&&o.toLowerCase()===s&&e(a)}):a=>r.getAttributeValue(a,i)===s&&e(a)},hyphen(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=s.length;return Nl(t,n)?(s=s.toLowerCase(),function(u){const h=r.getAttributeValue(u,i);return h!=null&&(h.length===a||h.charAt(a)==="-")&&h.substr(0,a).toLowerCase()===s&&e(u)}):function(u){const h=r.getAttributeValue(u,i);return h!=null&&(h.length===a||h.charAt(a)==="-")&&h.substr(0,a)===s&&e(u)}},element(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(/\s/.test(s))return Sn.falseFunc;const a=new RegExp(`(?:^|\\s)${pE(s)}(?:$|\\s)`,Nl(t,n)?"i":"");return function(u){const h=r.getAttributeValue(u,i);return h!=null&&h.length>=s.length&&a.test(h)&&e(u)}},exists(e,{name:t},{adapter:n}){return r=>n.hasAttrib(r,t)&&e(r)},start(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=s.length;return a===0?Sn.falseFunc:Nl(t,n)?(s=s.toLowerCase(),o=>{const u=r.getAttributeValue(o,i);return u!=null&&u.length>=a&&u.substr(0,a).toLowerCase()===s&&e(o)}):o=>{var u;return!!(!((u=r.getAttributeValue(o,i))===null||u===void 0)&&u.startsWith(s))&&e(o)}},end(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=-s.length;return a===0?Sn.falseFunc:Nl(t,n)?(s=s.toLowerCase(),o=>{var u;return((u=r.getAttributeValue(o,i))===null||u===void 0?void 0:u.substr(a).toLowerCase())===s&&e(o)}):o=>{var u;return!!(!((u=r.getAttributeValue(o,i))===null||u===void 0)&&u.endsWith(s))&&e(o)}},any(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(s==="")return Sn.falseFunc;if(Nl(t,n)){const a=new RegExp(pE(s),"i");return function(u){const h=r.getAttributeValue(u,i);return h!=null&&h.length>=s.length&&a.test(h)&&e(u)}}return a=>{var o;return!!(!((o=r.getAttributeValue(a,i))===null||o===void 0)&&o.includes(s))&&e(a)}},not(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return s===""?a=>!!r.getAttributeValue(a,i)&&e(a):Nl(t,n)?(s=s.toLowerCase(),a=>{const o=r.getAttributeValue(a,i);return(o==null||o.length!==s.length||o.toLowerCase()!==s)&&e(a)}):a=>r.getAttributeValue(a,i)!==s&&e(a)}},Xle=new Set([9,10,12,13,32]),mE=48,Kle=57;function Zle(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let t=0,n=0,r=s(),i=a();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=r*(i??1),o(),t<e.length?(r=s(),o(),i=a()):r=i=0),i===null||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,r*i];function s(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function a(){const u=t;let h=0;for(;t<e.length&&e.charCodeAt(t)>=mE&&e.charCodeAt(t)<=Kle;)h=h*10+(e.charCodeAt(t)-mE),t++;return t===u?null:h}function o(){for(;t<e.length&&Xle.has(e.charCodeAt(t));)t++}}function Qle(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return Sn.falseFunc;if(t===-1)return s=>s<=n;if(t===0)return s=>s===n;if(t===1)return n<0?Sn.trueFunc:s=>s>=n;const r=Math.abs(t),i=(n%r+r)%r;return t>1?s=>s>=n&&s%r===i:s=>s<=n&&s%r===i}function Ep(e){return Qle(Zle(e))}function Tp(e,t){return n=>{const r=t.getParent(n);return r!=null&&t.isTag(r)&&e(n)}}const wx={contains(e,t,{adapter:n}){return function(i){return e(i)&&n.getText(i).includes(t)}},icontains(e,t,{adapter:n}){const r=t.toLowerCase();return function(s){return e(s)&&n.getText(s).toLowerCase().includes(r)}},"nth-child"(e,t,{adapter:n,equals:r}){const i=Ep(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Tp(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let h=0;h<o.length&&!r(a,o[h]);h++)n.isTag(o[h])&&u++;return i(u)&&e(a)}},"nth-last-child"(e,t,{adapter:n,equals:r}){const i=Ep(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Tp(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let h=o.length-1;h>=0&&!r(a,o[h]);h--)n.isTag(o[h])&&u++;return i(u)&&e(a)}},"nth-of-type"(e,t,{adapter:n,equals:r}){const i=Ep(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Tp(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let h=0;h<o.length;h++){const d=o[h];if(r(a,d))break;n.isTag(d)&&n.getName(d)===n.getName(a)&&u++}return i(u)&&e(a)}},"nth-last-of-type"(e,t,{adapter:n,equals:r}){const i=Ep(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Tp(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let h=o.length-1;h>=0;h--){const d=o[h];if(r(a,d))break;n.isTag(d)&&n.getName(d)===n.getName(a)&&u++}return i(u)&&e(a)}},root(e,t,{adapter:n}){return r=>{const i=n.getParent(r);return(i==null||!n.isTag(i))&&e(r)}},scope(e,t,n,r){const{equals:i}=n;return!r||r.length===0?wx.root(e,t,n):r.length===1?s=>i(r[0],s)&&e(s):s=>r.includes(s)&&e(s)},hover:zy("isHovered"),visited:zy("isVisited"),active:zy("isActive")};function zy(e){return function(n,r,{adapter:i}){const s=i[e];return typeof s!="function"?Sn.falseFunc:function(o){return s(o)&&n(o)}}}const gE={empty(e,{adapter:t}){return!t.getChildren(e).some(n=>t.isTag(n)||t.getText(n)!=="")},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return t.prevElementSibling(e)==null;const r=t.getSiblings(e).find(i=>t.isTag(i));return r!=null&&n(e,r)},"last-child"(e,{adapter:t,equals:n}){const r=t.getSiblings(e);for(let i=r.length-1;i>=0;i--){if(n(e,r[i]))return!0;if(t.isTag(r[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=0;s<r.length;s++){const a=r[s];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=r.length-1;s>=0;s--){const a=r[s];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const r=t.getName(e);return t.getSiblings(e).every(i=>n(e,i)||!t.isTag(i)||t.getName(i)!==r)},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every(r=>n(e,r)||!t.isTag(r))}};function yE(e,t,n,r){if(n===null){if(e.length>r)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===r)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const Jle={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},tR={};function nR(e,t){return e===Sn.falseFunc?Sn.falseFunc:n=>t.isTag(n)&&e(n)}function rR(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function _x(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const Fy=(e,t,n,r,i)=>{const s=i(t,_x(n),r);return s===Sn.trueFunc?e:s===Sn.falseFunc?Sn.falseFunc:a=>s(a)&&e(a)},By={is:Fy,matches:Fy,where:Fy,not(e,t,n,r,i){const s=i(t,_x(n),r);return s===Sn.falseFunc?e:s===Sn.trueFunc?Sn.falseFunc:a=>!s(a)&&e(a)},has(e,t,n,r,i){const{adapter:s}=n,a=_x(n);a.relativeSelector=!0;const o=t.some(d=>d.some(f_))?[tR]:void 0,u=i(t,a,o);if(u===Sn.falseFunc)return Sn.falseFunc;const h=nR(u,s);if(o&&u!==Sn.trueFunc){const{shouldTestNextSiblings:d=!1}=u;return p=>{if(!e(p))return!1;o[0]=p;const m=s.getChildren(p),g=d?[...m,...rR(p,s)]:m;return s.existsOne(h,g)}}return d=>e(d)&&s.existsOne(h,s.getChildren(d))}};function ece(e,t,n,r,i){var s;const{name:a,data:o}=t;if(Array.isArray(o)){if(!(a in By))throw new Error(`Unknown pseudo-class :${a}(${o})`);return By[a](e,o,n,r,i)}const u=(s=n.pseudos)===null||s===void 0?void 0:s[a],h=typeof u=="string"?u:Jle[a];if(typeof h=="string"){if(o!=null)throw new Error(`Pseudo ${a} doesn't have any arguments`);const d=sf(h);return By.is(e,d,n,r,i)}if(typeof u=="function")return yE(u,a,o,1),d=>u(d,o)&&e(d);if(a in wx)return wx[a](e,o,n,r);if(a in gE){const d=gE[a];return yE(d,a,o,2),p=>d(p,n,o)&&e(p)}throw new Error(`Unknown pseudo-class :${a}`)}function Uy(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function tce(e,t,n,r,i){const{adapter:s,equals:a}=n;switch(t.type){case un.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case un.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case un.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),Yle[t.action](e,t,n)}case un.Pseudo:return ece(e,t,n,r,i);case un.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:o}=t;return(!n.xmlMode||n.lowerCaseTags)&&(o=o.toLowerCase()),function(h){return s.getName(h)===o&&e(h)}}case un.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(h){let d=h;for(;d=Uy(d,s);)if(e(d))return!0;return!1};const o=new WeakSet;return function(h){let d=h;for(;d=Uy(d,s);)if(!o.has(d)){if(s.isTag(d)&&e(d))return!0;o.add(d)}return!1}}case"_flexibleDescendant":return function(u){let h=u;do if(e(h))return!0;while(h=Uy(h,s));return!1};case un.Parent:return function(u){return s.getChildren(u).some(h=>s.isTag(h)&&e(h))};case un.Child:return function(u){const h=s.getParent(u);return h!=null&&s.isTag(h)&&e(h)};case un.Sibling:return function(u){const h=s.getSiblings(u);for(let d=0;d<h.length;d++){const p=h[d];if(a(u,p))break;if(s.isTag(p)&&e(p))return!0}return!1};case un.Adjacent:return s.prevElementSibling?function(u){const h=s.prevElementSibling(u);return h!=null&&e(h)}:function(u){const h=s.getSiblings(u);let d;for(let p=0;p<h.length;p++){const m=h[p];if(a(u,m))break;s.isTag(m)&&(d=m)}return!!d&&e(d)};case un.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function nce(e,t,n){const r=iR(e,t,n);return nR(r,t.adapter)}function iR(e,t,n){const r=typeof e=="string"?sf(e):e;return aR(r,t,n)}function sR(e){return e.type===un.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(t=>t.some(sR)))}const rce={type:un.Descendant},ice={type:"_flexibleDescendant"},sce={type:un.Pseudo,name:"scope",data:null};function ace(e,{adapter:t},n){const r=!!(n!=null&&n.every(i=>{const s=t.isTag(i)&&t.getParent(i);return i===tR||s&&t.isTag(s)}));for(const i of e){if(!(i.length>0&&f_(i[0])&&i[0].type!==un.Descendant))if(r&&!i.some(sR))i.unshift(rce);else continue;i.unshift(sce)}}function aR(e,t,n){var r;e.forEach(Vle),n=(r=t.context)!==null&&r!==void 0?r:n;const i=Array.isArray(n),s=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)ace(e,t,s);else if(e.some(u=>u.length>0&&f_(u[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const o=e.map(u=>{if(u.length>=2){const[h,d]=u;h.type!==un.Pseudo||h.name!=="scope"||(i&&d.type===un.Descendant?u[1]=ice:(d.type===un.Adjacent||d.type===un.Sibling)&&(a=!0))}return oce(u,t,s)}).reduce(lce,Sn.falseFunc);return o.shouldTestNextSiblings=a,o}function oce(e,t,n){var r;return e.reduce((i,s)=>i===Sn.falseFunc?Sn.falseFunc:tce(i,s,t,n,aR),(r=t.rootFunc)!==null&&r!==void 0?r:Sn.trueFunc)}function lce(e,t){return t===Sn.falseFunc||e===Sn.trueFunc?e:e===Sn.falseFunc||t===Sn.trueFunc?t:function(r){return e(r)||t(r)}}const oR=(e,t)=>e===t,cce={adapter:KO,equals:oR};function lR(e){var t,n,r,i;const s=e??cce;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=KO),(n=s.equals)!==null&&n!==void 0||(s.equals=(i=(r=s.adapter)===null||r===void 0?void 0:r.equals)!==null&&i!==void 0?i:oR),s}function cR(e){return function(n,r,i){const s=lR(i);typeof n!="function"&&(n=iR(n,s,r));const a=uce(r,s.adapter,n.shouldTestNextSiblings);return e(n,a,s)}}function uce(e,t,n=!1){return n&&(e=hce(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function hce(e,t){const n=Array.isArray(e)?e.slice(0):[e],r=n.length;for(let i=0;i<r;i++){const s=rR(n[i],t);n.push(...s)}return n}const dce=cR((e,t,n)=>e===Sn.falseFunc||!t||t.length===0?[]:n.adapter.findAll(e,t)),fce=cR((e,t,n)=>e===Sn.falseFunc||!t||t.length===0?null:n.adapter.findOne(e,t));function pce(e,t,n){const r=lR(n);return(typeof t=="function"?t:nce(t,r))(e)}function mce(e){const t=new Map;for(const n of e.children)t.set(n,e),so(n,{element:{enter:(r,i)=>{t.set(r,i)}}},e);return t}const d0=e=>e.type==="element",uR=(e,t)=>t.some(n=>d0(n)&&(e(n)||uR(e,af(n)))),gce=(e,t)=>e.attributes[t],af=e=>e.children||[],yce=e=>e.name,bce=e=>e.children[0].type==="text"||e.children[0].type==="cdata"?e.children[0].value:"",vce=(e,t)=>e.attributes[t]!==void 0,hR=(e,t)=>{const n=[];for(const r of t)d0(r)&&(e(r)&&n.push(r),n.push(...hR(e,af(r))));return n},dR=(e,t)=>{for(const n of t)if(d0(n)){if(e(n))return n;const r=dR(e,af(n));if(r)return r}return null};function xce(e,t){const n=s=>(t||(t=mce(e)),t.get(s)||null);return{isTag:d0,existsOne:uR,getAttributeValue:gce,getChildren:af,getName:yce,getParent:n,getSiblings:s=>{const a=n(s);return a?af(a):[]},getText:bce,hasAttrib:vce,removeSubsets:s=>{let a=s.length,o,u,h;for(;--a>-1;){for(o=u=s[a],s[a]=null,h=!0;u;){if(s.includes(u)){h=!1,s.splice(a,1);break}u=n(u)}h&&(s[a]=o)}return s},findAll:hR,findOne:dR}}function p_(e,t){return{xmlMode:!0,adapter:xce(e,t)}}const of=(e,t,n)=>dce(t,e,p_(e,n)),fR=(e,t,n)=>fce(t,e,p_(e,n)),wce=(e,t,n)=>pce(e,t,p_(e,n)),zn=(e,t)=>{t.children=t.children.filter(n=>n!==e)},_ce="removeDoctype",kce="removes doctype declaration",Sce=()=>({doctype:{enter:(e,t)=>{zn(e,t)}}}),pR=Object.freeze(Object.defineProperty({__proto__:null,description:kce,fn:Sce,name:_ce},Symbol.toStringTag,{value:"Module"})),Cce="removeXMLProcInst",Ece="removes XML processing instructions",Tce=()=>({instruction:{enter:(e,t)=>{e.name==="xml"&&zn(e,t)}}}),mR=Object.freeze(Object.defineProperty({__proto__:null,description:Ece,fn:Tce,name:Cce},Symbol.toStringTag,{value:"Module"})),jce="removeComments",Ace="removes comments",Pce=[/^!/],Nce=(e,t)=>{const{preservePatterns:n=Pce}=t;return{comment:{enter:(r,i)=>{if(n){if(!Array.isArray(n))throw Error(`Expected array in removeComments preservePatterns parameter but received ${n}`);if(n.some(a=>new RegExp(a).test(r.value)))return}zn(r,i)}}}},gR=Object.freeze(Object.defineProperty({__proto__:null,description:Ace,fn:Nce,name:jce},Symbol.toStringTag,{value:"Module"})),kl={animation:new Set(["animate","animateColor","animateMotion","animateTransform","set"]),descriptive:new Set(["desc","metadata","title"]),shape:new Set(["circle","ellipse","line","path","polygon","polyline","rect"]),structural:new Set(["defs","g","svg","symbol","use"]),paintServer:new Set(["hatch","linearGradient","meshGradient","pattern","radialGradient","solidColor"]),nonRendering:new Set(["clipPath","filter","linearGradient","marker","mask","pattern","radialGradient","solidColor","symbol"]),container:new Set(["a","defs","foreignObject","g","marker","mask","missing-glyph","pattern","svg","switch","symbol"]),textContent:new Set(["a","altGlyph","altGlyphDef","altGlyphItem","glyph","glyphRef","text","textPath","tref","tspan"]),textContentChild:new Set(["altGlyph","textPath","tref","tspan"]),lightSource:new Set(["feDiffuseLighting","feDistantLight","fePointLight","feSpecularLighting","feSpotLight"]),filterPrimitive:new Set(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"])},yR=new Set([...kl.textContent,"pre","title"]),m_=new Set(["glyph","missing-glyph","path"]),Ui={animationAddition:new Set(["additive","accumulate"]),animationAttributeTarget:new Set(["attributeType","attributeName"]),animationEvent:new Set(["onbegin","onend","onrepeat","onload"]),animationTiming:new Set(["begin","dur","end","fill","max","min","repeatCount","repeatDur","restart"]),animationValue:new Set(["by","calcMode","from","keySplines","keyTimes","to","values"]),conditionalProcessing:new Set(["requiredExtensions","requiredFeatures","systemLanguage"]),core:new Set(["id","tabindex","xml:base","xml:lang","xml:space"]),graphicalEvent:new Set(["onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup"]),presentation:new Set(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-overflow","text-rendering","transform-origin","transform","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"]),xlink:new Set(["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"]),documentEvent:new Set(["onabort","onerror","onresize","onscroll","onunload","onzoom"]),documentElementEvent:new Set(["oncopy","oncut","onpaste"]),globalEvent:new Set(["oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting"]),filterPrimitive:new Set(["x","y","width","height","result"]),transferFunction:new Set(["amplitude","exponent","intercept","offset","slope","tableValues","type"])},g_={core:{"xml:space":"default"},presentation:{clip:"auto","clip-path":"none","clip-rule":"nonzero",mask:"none",opacity:"1","stop-color":"#000","stop-opacity":"1","fill-opacity":"1","fill-rule":"nonzero",fill:"#000",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","paint-order":"normal","vector-effect":"none",display:"inline",visibility:"visible","marker-start":"none","marker-mid":"none","marker-end":"none","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","image-rendering":"auto","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","font-size-adjust":"none",kerning:"auto","letter-spacing":"normal","word-spacing":"normal","text-decoration":"none","text-anchor":"start","text-overflow":"clip","writing-mode":"lr-tb","glyph-orientation-vertical":"auto","glyph-orientation-horizontal":"0deg",direction:"ltr","unicode-bidi":"normal","dominant-baseline":"auto","alignment-baseline":"baseline","baseline-shift":"baseline"},transferFunction:{slope:"1",intercept:"0",amplitude:"1",exponent:"1",offset:"0"}},Oce={animationAttributeTarget:{unsafe:new Set(["attributeType"])},conditionalProcessing:{unsafe:new Set(["requiredFeatures"])},core:{unsafe:new Set(["xml:base","xml:lang","xml:space"])},presentation:{unsafe:new Set(["clip","color-profile","enable-background","glyph-orientation-horizontal","glyph-orientation-vertical","kerning"])}},y_={a:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","style","target","transform"]),defaults:{target:"_self"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view","tspan"])},altGlyph:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","format","glyphRef","rotate","style","x","y"])},altGlyphDef:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef"])},altGlyphItem:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef","altGlyphItem"])},animate:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateColor:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateMotion:{attrsGroups:new Set(["animationAddition","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","keyPoints","origin","path","rotate"]),defaults:{rotate:"0"},contentGroups:new Set(["descriptive"]),content:new Set(["mpath"])},animateTransform:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","type"]),contentGroups:new Set(["descriptive"])},circle:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","r","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},clipPath:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","clipPathUnits","externalResourcesRequired","style","transform"]),defaults:{clipPathUnits:"userSpaceOnUse"},contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["text","use"])},"color-profile":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["local","name","rendering-intent"]),defaults:{name:"sRGB","rendering-intent":"auto"},deprecated:{unsafe:new Set(["name"])},contentGroups:new Set(["descriptive"])},cursor:{attrsGroups:new Set(["core","conditionalProcessing","xlink"]),attrs:new Set(["externalResourcesRequired","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["descriptive"])},defs:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},desc:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},ellipse:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","rx","ry","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},feBlend:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","in2","mode"]),defaults:{mode:"normal"},content:new Set(["animate","set"])},feColorMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","type","values"]),defaults:{type:"matrix"},content:new Set(["animate","set"])},feComponentTransfer:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["feFuncA","feFuncB","feFuncG","feFuncR"])},feComposite:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","k1","k2","k3","k4","operator","style"]),defaults:{operator:"over",k1:"0",k2:"0",k3:"0",k4:"0"},content:new Set(["animate","set"])},feConvolveMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelMatrix","order","style","bias","divisor","edgeMode","targetX","targetY","kernelUnitLength","preserveAlpha"]),defaults:{order:"3",bias:"0",edgeMode:"duplicate",preserveAlpha:"false"},content:new Set(["animate","set"])},feDiffuseLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","diffuseConstant","in","kernelUnitLength","style","surfaceScale"]),defaults:{surfaceScale:"1",diffuseConstant:"1"},contentGroups:new Set(["descriptive"]),content:new Set(["feDistantLight","fePointLight","feSpotLight"])},feDisplacementMap:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","scale","style","xChannelSelector","yChannelSelector"]),defaults:{scale:"0",xChannelSelector:"A",yChannelSelector:"A"},content:new Set(["animate","set"])},feDistantLight:{attrsGroups:new Set(["core"]),attrs:new Set(["azimuth","elevation"]),defaults:{azimuth:"0",elevation:"0"},content:new Set(["animate","set"])},feFlood:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["animate","animateColor","set"])},feFuncA:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncB:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncG:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncR:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feGaussianBlur:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","stdDeviation"]),defaults:{stdDeviation:"0"},content:new Set(["set","animate"])},feImage:{attrsGroups:new Set(["core","presentation","filterPrimitive","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","preserveAspectRatio","style","xlink:href"]),defaults:{preserveAspectRatio:"xMidYMid meet"},content:new Set(["animate","animateTransform","set"])},feMerge:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["feMergeNode"])},feMergeNode:{attrsGroups:new Set(["core"]),attrs:new Set(["in"]),content:new Set(["animate","set"])},feMorphology:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","operator","radius"]),defaults:{operator:"erode",radius:"0"},content:new Set(["animate","set"])},feOffset:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","dx","dy"]),defaults:{dx:"0",dy:"0"},content:new Set(["animate","set"])},fePointLight:{attrsGroups:new Set(["core"]),attrs:new Set(["x","y","z"]),defaults:{x:"0",y:"0",z:"0"},content:new Set(["animate","set"])},feSpecularLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelUnitLength","specularConstant","specularExponent","style","surfaceScale"]),defaults:{surfaceScale:"1",specularConstant:"1",specularExponent:"1"},contentGroups:new Set(["descriptive","lightSource"])},feSpotLight:{attrsGroups:new Set(["core"]),attrs:new Set(["limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","y","z"]),defaults:{x:"0",y:"0",z:"0",pointsAtX:"0",pointsAtY:"0",pointsAtZ:"0",specularExponent:"1"},content:new Set(["animate","set"])},feTile:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["animate","set"])},feTurbulence:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["baseFrequency","class","numOctaves","seed","stitchTiles","style","type"]),defaults:{baseFrequency:"0",numOctaves:"1",seed:"0",stitchTiles:"noStitch",type:"turbulence"},content:new Set(["animate","set"])},filter:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","filterRes","filterUnits","height","href","primitiveUnits","style","width","x","xlink:href","y"]),defaults:{primitiveUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},deprecated:{unsafe:new Set(["filterRes"])},contentGroups:new Set(["descriptive","filterPrimitive"]),content:new Set(["animate","set"])},font:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","style","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"horiz-origin-x":"0","horiz-origin-y":"0"},deprecated:{unsafe:new Set(["horiz-origin-x","horiz-origin-y","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["descriptive"]),content:new Set(["font-face","glyph","hkern","missing-glyph","vkern"])},"font-face":{attrsGroups:new Set(["core"]),attrs:new Set(["font-family","font-style","font-variant","font-weight","font-stretch","font-size","unicode-range","units-per-em","panose-1","stemv","stemh","slope","cap-height","x-height","accent-height","ascent","descent","widths","bbox","ideographic","alphabetic","mathematical","hanging","v-ideographic","v-alphabetic","v-mathematical","v-hanging","underline-position","underline-thickness","strikethrough-position","strikethrough-thickness","overline-position","overline-thickness"]),defaults:{"font-style":"all","font-variant":"normal","font-weight":"all","font-stretch":"normal","unicode-range":"U+0-10FFFF","units-per-em":"1000","panose-1":"0 0 0 0 0 0 0 0 0 0",slope:"0"},deprecated:{unsafe:new Set(["accent-height","alphabetic","ascent","bbox","cap-height","descent","hanging","ideographic","mathematical","panose-1","slope","stemh","stemv","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height"])},contentGroups:new Set(["descriptive"]),content:new Set(["font-face-src"])},"font-face-format":{attrsGroups:new Set(["core"]),attrs:new Set(["string"]),deprecated:{unsafe:new Set(["string"])}},"font-face-name":{attrsGroups:new Set(["core"]),attrs:new Set(["name"]),deprecated:{unsafe:new Set(["name"])}},"font-face-src":{attrsGroups:new Set(["core"]),content:new Set(["font-face-name","font-face-uri"])},"font-face-uri":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["href","xlink:href"]),content:new Set(["font-face-format"])},foreignObject:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","style","transform","width","x","y"]),defaults:{x:"0",y:"0"}},g:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyph:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["arabic-form","class","d","glyph-name","horiz-adv-x","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"arabic-form":"initial"},deprecated:{unsafe:new Set(["arabic-form","glyph-name","horiz-adv-x","orientation","unicode","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyphRef:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),deprecated:{unsafe:new Set(["horiz-adv-x","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},hatch:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","hatchContentUnits","hatchUnits","pitch","rotate","style","transform","x","y"]),defaults:{hatchUnits:"objectBoundingBox",hatchContentUnits:"userSpaceOnUse",x:"0",y:"0",pitch:"0",rotate:"0"},contentGroups:new Set(["animation","descriptive"]),content:new Set(["hatchPath"])},hatchPath:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","d","offset"]),defaults:{offset:"0"},contentGroups:new Set(["animation","descriptive"])},hkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"]),deprecated:{unsafe:new Set(["g1","g2","k","u1","u2"])}},image:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","preserveAspectRatio","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive"])},line:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform","x1","x2","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"0",y2:"0"},contentGroups:new Set(["animation","descriptive"])},linearGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","gradientTransform","gradientUnits","href","spreadMethod","style","x1","x2","xlink:href","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"100%",y2:"0",spreadMethod:"pad"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},marker:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{markerUnits:"strokeWidth",refX:"0",refY:"0",markerWidth:"3",markerHeight:"3"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mask:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","mask-type","maskContentUnits","maskUnits","style","width","x","y"]),defaults:{maskUnits:"objectBoundingBox",maskContentUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},metadata:{attrsGroups:new Set(["core"])},"missing-glyph":{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),deprecated:{unsafe:new Set(["horiz-adv-x","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mpath:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","href","xlink:href"]),contentGroups:new Set(["descriptive"])},path:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","d","externalResourcesRequired","pathLength","style","transform"]),contentGroups:new Set(["animation","descriptive"])},pattern:{attrsGroups:new Set(["conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","style","viewBox","width","x","xlink:href","y"]),defaults:{patternUnits:"objectBoundingBox",patternContentUnits:"userSpaceOnUse",x:"0",y:"0",width:"0",height:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},polygon:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},polyline:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},radialGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","fr","fx","fy","gradientTransform","gradientUnits","href","r","spreadMethod","style","xlink:href"]),defaults:{gradientUnits:"objectBoundingBox",cx:"50%",cy:"50%",r:"50%"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},meshGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","x","y","gradientUnits","transform"]),contentGroups:new Set(["descriptive","paintServer","animation"]),content:new Set(["meshRow"])},meshRow:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["meshPatch"])},meshPatch:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["stop"])},rect:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","rx","ry","style","transform","width","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},script:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","type","href","xlink:href"])},set:{attrsGroups:new Set(["animation","animationAttributeTarget","animationTiming","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","to"]),contentGroups:new Set(["descriptive"])},solidColor:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["paintServer"])},stop:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style","offset","path"]),content:new Set(["animate","animateColor","set"])},style:{attrsGroups:new Set(["core"]),attrs:new Set(["type","media","title"]),defaults:{type:"text/css"}},svg:{attrsGroups:new Set(["conditionalProcessing","core","documentEvent","graphicalEvent","presentation"]),attrs:new Set(["baseProfile","class","contentScriptType","contentStyleType","height","preserveAspectRatio","style","version","viewBox","width","x","y","zoomAndPan"]),defaults:{x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",zoomAndPan:"magnify",version:"1.1",baseProfile:"none",contentScriptType:"application/ecmascript",contentStyleType:"text/css"},deprecated:{safe:new Set(["version"]),unsafe:new Set(["baseProfile","contentScriptType","contentStyleType","zoomAndPan"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},switch:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["a","foreignObject","g","image","svg","switch","text","use"])},symbol:{attrsGroups:new Set(["core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{refX:"0",refY:"0"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},text:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","transform","x","y"]),defaults:{x:"0",y:"0",lengthAdjust:"spacing"},contentGroups:new Set(["animation","descriptive","textContentChild"]),content:new Set(["a"])},textPath:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","d","externalResourcesRequired","href","method","spacing","startOffset","style","xlink:href"]),defaults:{startOffset:"0",method:"align",spacing:"exact"},contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},title:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},tref:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","style","xlink:href"]),contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateColor","set"])},tspan:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","x","y"]),contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},use:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},view:{attrsGroups:new Set(["core"]),attrs:new Set(["externalResourcesRequired","preserveAspectRatio","viewBox","viewTarget","zoomAndPan"]),deprecated:{unsafe:new Set(["viewTarget","zoomAndPan"])},contentGroups:new Set(["descriptive"])},vkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"]),deprecated:{unsafe:new Set(["g1","g2","k","u1","u2"])}}},bE=new Set(["http://creativecommons.org/ns#","http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd","http://krita.org/namespaces/svg/krita","http://ns.adobe.com/AdobeIllustrator/10.0/","http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/","http://ns.adobe.com/Extensibility/1.0/","http://ns.adobe.com/Flows/1.0/","http://ns.adobe.com/GenericCustomNamespace/1.0/","http://ns.adobe.com/Graphs/1.0/","http://ns.adobe.com/ImageReplacement/1.0/","http://ns.adobe.com/SaveForWeb/1.0/","http://ns.adobe.com/Variables/1.0/","http://ns.adobe.com/XPath/1.0/","http://purl.org/dc/elements/1.1/","http://schemas.microsoft.com/visio/2003/SVGExtensions/","http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","http://taptrix.com/vectorillustrator/svg_extensions","http://www.bohemiancoding.com/sketch/ns","http://www.figma.com/figma/ns","http://www.inkscape.org/namespaces/inkscape","http://www.serif.com/","http://www.vector.evaxdesign.sk","http://www.w3.org/1999/02/22-rdf-syntax-ns#","https://boxy-svg.com"]),f0=new Set(["clip-path","color-profile","fill","filter","marker-end","marker-mid","marker-start","mask","stroke","style"]),p0=new Set(["clip-rule","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","dominant-baseline","fill-opacity","fill-rule","fill","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","font","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","marker-end","marker-mid","marker-start","marker","paint-order","pointer-events","shape-rendering","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-rendering","transform","visibility","word-spacing","writing-mode"]),b_=new Set(["clip-path","display","filter","mask","opacity","text-decoration","transform","unicode-bidi"]),vE={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#639",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},xE={"#f0ffff":"azure","#f5f5dc":"beige","#ffe4c4":"bisque","#a52a2a":"brown","#ff7f50":"coral","#ffd700":"gold","#808080":"gray","#008000":"green","#4b0082":"indigo","#fffff0":"ivory","#f0e68c":"khaki","#faf0e6":"linen","#800000":"maroon","#000080":"navy","#808000":"olive","#ffa500":"orange","#da70d6":"orchid","#cd853f":"peru","#ffc0cb":"pink","#dda0dd":"plum","#800080":"purple","#f00":"red","#ff0000":"red","#fa8072":"salmon","#a0522d":"sienna","#c0c0c0":"silver","#fffafa":"snow","#d2b48c":"tan","#008080":"teal","#ff6347":"tomato","#ee82ee":"violet","#f5deb3":"wheat"},kx=new Set(["color","fill","flood-color","lighting-color","stop-color","stroke"]),wE={treeStructural:new Set(["empty","first-child","first-of-type","last-child","last-of-type","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","root"]),functional:new Set(["is","not","where","has"])},Ko=0,Rt=1,kn=2,ii=3,wr=4,La=5,m0=6,Fi=7,ss=8,In=9,dn=10,Dr=11,Nn=12,Ur=13,Rf=14,as=15,Wi=16,Vi=17,bs=18,ea=19,Aa=20,Qn=21,hn=22,Pi=23,Zs=24,ji=25,Rce=0;function Ei(e){return e>=48&&e<=57}function pl(e){return Ei(e)||e>=65&&e<=70||e>=97&&e<=102}function v_(e){return e>=65&&e<=90}function Mce(e){return e>=97&&e<=122}function Lce(e){return v_(e)||Mce(e)}function Ice(e){return e>=128}function fg(e){return Lce(e)||Ice(e)||e===95}function bR(e){return fg(e)||Ei(e)||e===45}function $ce(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function pg(e){return e===10||e===13||e===12}function cc(e){return pg(e)||e===32||e===9}function Ja(e,t){return!(e!==92||pg(t)||t===Rce)}function cm(e,t,n){return e===45?fg(t)||t===45||Ja(t,n):fg(e)?!0:e===92?Ja(e,t):!1}function Hy(e,t,n){return e===43||e===45?Ei(t)?2:t===46&&Ei(n)?3:0:e===46?Ei(t)?2:0:Ei(e)?1:0}function vR(e){return e===65279||e===65534?1:0}const Sx=new Array(128),Dce=128,um=130,xR=131,x_=132,wR=133;for(let e=0;e<Sx.length;e++)Sx[e]=cc(e)&&um||Ei(e)&&xR||fg(e)&&x_||$ce(e)&&wR||e||Dce;function Wy(e){return e<128?Sx[e]:x_}function Ou(e,t){return t<e.length?e.charCodeAt(t):0}function Cx(e,t,n){return n===13&&Ou(e,t+1)===10?2:1}function Ru(e,t,n){let r=e.charCodeAt(t);return v_(r)&&(r=r|32),r===n}function lf(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const s=r.charCodeAt(i-t);let a=e.charCodeAt(i);if(v_(a)&&(a=a|32),a!==s)return!1}return!0}function zce(e,t){for(;t>=0&&cc(e.charCodeAt(t));t--);return t+1}function jp(e,t){for(;t<e.length&&cc(e.charCodeAt(t));t++);return t}function Vy(e,t){for(;t<e.length&&Ei(e.charCodeAt(t));t++);return t}function qu(e,t){if(t+=2,pl(Ou(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&pl(Ou(e,t));t++);const n=Ou(e,t);cc(n)&&(t+=Cx(e,t,n))}return t}function Ap(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!bR(n)){if(Ja(n,Ou(e,t+1))){t=qu(e,t)-1;continue}break}}return t}function g0(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),Ei(n)&&(t=Vy(e,t+1),n=e.charCodeAt(t)),n===46&&Ei(e.charCodeAt(t+1))&&(t+=2,t=Vy(e,t)),Ru(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),Ei(n)&&(t=Vy(e,t+1+r+1))}return t}function Gy(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}Ja(n,Ou(e,t+1))&&(t=qu(e,t))}return t}function _R(e){if(e.length===1&&!pl(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const kR=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token","comment-token"],Fce=16*1024;function mg(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,Fce)):e}const _E=10,Bce=12,kE=13;function SE(e){const t=e.source,n=t.length,r=t.length>0?vR(t.charCodeAt(0)):0,i=mg(e.lines,n),s=mg(e.columns,n);let a=e.startLine,o=e.startColumn;for(let u=r;u<n;u++){const h=t.charCodeAt(u);i[u]=a,s[u]=o++,(h===_E||h===kE||h===Bce)&&(h===kE&&u+1<n&&t.charCodeAt(u+1)===_E&&(u++,i[u]=a,s[u]=o),a++,o=1)}i[n]=a,s[n]=o,e.lines=i,e.columns=s,e.computed=!0}let Uce=class{constructor(t,n,r,i){this.setSource(t,n,r,i),this.lines=null,this.columns=null}setSource(t="",n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||SE(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||SE(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}};const Ba=16777215,Ua=24,uc=new Uint8Array(32);uc[kn]=hn;uc[Qn]=hn;uc[ea]=Aa;uc[Pi]=Zs;function CE(e){return uc[e]!==0}let Hce=class{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=mg(this.offsetAndType,t.length+1),s=mg(this.balance,t.length+1);let a=0,o=-1,u=0,h=t.length;this.offsetAndType=null,this.balance=null,s.fill(0),n(t,(d,p,m)=>{const g=a++;if(i[g]=d<<Ua|m,o===-1&&(o=p),s[g]=h,d===u){const v=s[h];s[h]=g,h=v,u=uc[i[v]>>Ua]}else CE(d)&&(h=g,u=uc[d])}),i[a]=Ko<<Ua|r,s[a]=a;for(let d=0;d<a;d++){const p=s[d];if(p<=d){const m=s[p];m!==d&&(s[d]=m)}else p>a&&(s[d]=a)}this.source=t,this.firstCharOffset=o===-1?0:o,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>Ua:Ko}lookupTypeNonSC(t){for(let n=this.tokenIndex;n<this.tokenCount;n++){const r=this.offsetAndType[n]>>Ua;if(r!==Ur&&r!==ji&&t--===0)return r}return Ko}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&Ba:this.source.length}lookupOffsetNonSC(t){for(let n=this.tokenIndex;n<this.tokenCount;n++){const r=this.offsetAndType[n]>>Ua;if(r!==Ur&&r!==ji&&t--===0)return n-this.tokenIndex}return Ko}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?lf(this.source,this.offsetAndType[t-1]&Ba,this.offsetAndType[t]&Ba,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&Ba:this.offsetAndType[this.tokenCount]&Ba:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===In&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===In&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&Ba,n=this.offsetAndType[n],this.tokenType=n>>Ua,this.tokenEnd=n&Ba):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>Ua,this.tokenEnd=t&Ba):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=Ko,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Ur||this.tokenType===ji;)this.next()}skipUntilBalanced(t,n){let r=t,i=0,s=0;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(s=r>0?this.offsetAndType[r-1]&Ba:this.firstCharOffset,n(this.source.charCodeAt(s))){case 1:break e;case 2:r++;break e;default:CE(this.offsetAndType[r]>>Ua)&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,s=this.offsetAndType[n],a=s&Ba,o=s>>Ua;r=a,t(o,i,a,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,s)=>{t[s]={idx:s,type:kR[n],chunk:this.source.substring(r,i),balance:this.balance[s]}}),t}};function y0(e,t){function n(p){return p<o?e.charCodeAt(p):0}function r(){if(h=g0(e,h),cm(n(h),n(h+1),n(h+2))){d=Nn,h=Ap(e,h);return}if(n(h)===37){d=Dr,h++;return}d=dn}function i(){const p=h;if(h=Ap(e,h),lf(e,p,h,"url")&&n(h)===40){if(h=jp(e,h+1),n(h)===34||n(h)===39){d=kn,h=p+4;return}a();return}if(n(h)===40){d=kn,h++;return}d=Rt}function s(p){for(p||(p=n(h++)),d=La;h<e.length;h++){const m=e.charCodeAt(h);switch(Wy(m)){case p:h++;return;case um:if(pg(m)){h+=Cx(e,h,m),d=m0;return}break;case 92:if(h===e.length-1)break;const g=n(h+1);pg(g)?h+=Cx(e,h+1,g):Ja(m,g)&&(h=qu(e,h)-1);break}}}function a(){for(d=Fi,h=jp(e,h);h<e.length;h++){const p=e.charCodeAt(h);switch(Wy(p)){case 41:h++;return;case um:if(h=jp(e,h),n(h)===41||h>=e.length){h<e.length&&h++;return}h=Gy(e,h),d=ss;return;case 34:case 39:case 40:case wR:h=Gy(e,h),d=ss;return;case 92:if(Ja(p,n(h+1))){h=qu(e,h)-1;break}h=Gy(e,h),d=ss;return}}}e=String(e||"");const o=e.length;let u=vR(n(0)),h=u,d;for(;h<o;){const p=e.charCodeAt(h);switch(Wy(p)){case um:d=Ur,h=jp(e,h+1);break;case 34:s();break;case 35:bR(n(h+1))||Ja(n(h+1),n(h+2))?(d=wr,h=Ap(e,h+1)):(d=In,h++);break;case 39:s();break;case 40:d=Qn,h++;break;case 41:d=hn,h++;break;case 43:Hy(p,n(h+1),n(h+2))?r():(d=In,h++);break;case 44:d=bs,h++;break;case 45:Hy(p,n(h+1),n(h+2))?r():n(h+1)===45&&n(h+2)===62?(d=as,h=h+3):cm(p,n(h+1),n(h+2))?i():(d=In,h++);break;case 46:Hy(p,n(h+1),n(h+2))?r():(d=In,h++);break;case 47:n(h+1)===42?(d=ji,h=e.indexOf("*/",h+2),h=h===-1?e.length:h+2):(d=In,h++);break;case 58:d=Wi,h++;break;case 59:d=Vi,h++;break;case 60:n(h+1)===33&&n(h+2)===45&&n(h+3)===45?(d=Rf,h=h+4):(d=In,h++);break;case 64:cm(n(h+1),n(h+2),n(h+3))?(d=ii,h=Ap(e,h+1)):(d=In,h++);break;case 91:d=ea,h++;break;case 92:Ja(p,n(h+1))?i():(d=In,h++);break;case 93:d=Aa,h++;break;case 123:d=Pi,h++;break;case 125:d=Zs,h++;break;case xR:r();break;case x_:i();break;default:d=In,h++}t(d,u,u=h)}}let Ac=null,_o=class ha{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return ha.createItem(t)}allocateCursor(t,n){let r;return Ac!==null?(r=Ac,Ac=Ac.cursor,r.prev=t,r.next=n,r.cursor=this.cursor):r={prev:t,next:n,cursor:this.cursor},this.cursor=r,r}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Ac,Ac=t}updateCursors(t,n,r,i){let{cursor:s}=this;for(;s!==null;)s.prev===t&&(s.prev=n),s.next===r&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let n=this.head;n!==null;n=n.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let r of t){const i=ha.createItem(r);n!==null?n.next=i:this.head=i,i.prev=n,n=i}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,n=this){const r=this.allocateCursor(null,this.head);for(;r.next!==null;){const i=r.next;r.next=i.next,t.call(n,i.data,i,this)}this.releaseCursor()}forEachRight(t,n=this){const r=this.allocateCursor(this.tail,null);for(;r.prev!==null;){const i=r.prev;r.prev=i.prev,t.call(n,i.data,i,this)}this.releaseCursor()}reduce(t,n,r=this){let i=this.allocateCursor(null,this.head),s=n,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(t,n,r=this){let i=this.allocateCursor(this.tail,null),s=n,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}some(t,n=this){for(let r=this.head;r!==null;r=r.next)if(t.call(n,r.data,r,this))return!0;return!1}map(t,n=this){const r=new ha;for(let i=this.head;i!==null;i=i.next)r.appendData(t.call(n,i.data,i,this));return r}filter(t,n=this){const r=new ha;for(let i=this.head;i!==null;i=i.next)t.call(n,i.data,i,this)&&r.appendData(i.data);return r}nextUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(null,t);for(;i.next!==null;){const s=i.next;if(i.next=s.next,n.call(r,s.data,s,this))break}this.releaseCursor()}prevUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(t,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,n.call(r,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new ha;for(let n of this)t.appendData(n);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(ha.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(ha.createItem(t))}insert(t,n=null){if(n!==null)if(this.updateCursors(n.prev,t,n,t),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=t,n.prev=t,t.next=n,this.updateCursors(null,t)}else n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(ha.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(ha.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(ha.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,n){return t.head===null?this:(n!=null?(this.updateCursors(n.prev,t.tail,n,t.head),n.prev!==null?(n.prev.next=t.head,t.head.prev=n.prev):this.head=t.head,n.prev=t.tail,t.tail.next=n):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,n){"head"in n?this.insertList(n,t):this.insert(n,t),this.remove(t)}};function b0(e,t){const n=Object.create(SyntaxError.prototype),r=new Error;return Object.assign(n,{name:e,message:t,get stack(){return(r.stack||"").replace(/^(.+\n){1,3}/,`${e}: ${t}
`)}})}const qy=100,EE=60,TE="    ";function jE({source:e,line:t,column:n,baseLine:r,baseColumn:i},s){function a(v,w){return h.slice(v,w).map((C,x)=>String(v+x+1).padStart(m)+" |"+C).join(`
`)}const o=`
`.repeat(Math.max(r-1,0)),u=" ".repeat(Math.max(i-1,0)),h=(o+u+e).split(/\r\n?|\n|\f/),d=Math.max(1,t-s)-1,p=Math.min(t+s,h.length+1),m=Math.max(4,String(p).length)+1;let g=0;n+=(TE.length-1)*(h[t-1].substr(0,n-1).match(/\t/g)||[]).length,n>qy&&(g=n-EE+3,n=EE-2);for(let v=d;v<=p;v++)v>=0&&v<h.length&&(h[v]=h[v].replace(/\t/g,TE),h[v]=(g>0&&h[v].length>g?"":"")+h[v].substr(g,qy-2)+(h[v].length>g+qy-1?"":""));return[a(d,t),new Array(n+m+2).join("-")+"^",a(t,p)].filter(Boolean).join(`
`).replace(/^(\s+\d+\s+\|\n)+/,"").replace(/\n(\s+\d+\s+\|)+$/,"")}function AE(e,t,n,r,i,s=1,a=1){return Object.assign(b0("SyntaxError",e),{source:t,offset:n,line:r,column:i,sourceFragment(u){return jE({source:t,line:r,column:i,baseLine:s,baseColumn:a},isNaN(u)?0:u)},get formattedMessage(){return`Parse error: ${e}
`+jE({source:t,line:r,column:i,baseLine:s,baseColumn:a},2)}})}function Wce(e){const t=this.createList();let n=!1;const r={recognizer:e};for(;!this.eof;){switch(this.tokenType){case ji:this.next();continue;case Ur:n=!0,this.next();continue}let i=e.getNode.call(this,r);if(i===void 0)break;n&&(e.onWhiteSpace&&e.onWhiteSpace.call(this,i,t,r),n=!1),t.push(i)}return n&&e.onWhiteSpace&&e.onWhiteSpace.call(this,null,t,r),t}const PE=()=>{},Vce=33,Gce=35,Yy=59,NE=123,OE=0;function qce(e){return function(){return this[e]()}}function Xy(e){const t=Object.create(null);for(const n of Object.keys(e)){const r=e[n],i=r.parse||r;i&&(t[n]=i)}return t}function Yce(e){const t={context:Object.create(null),features:Object.assign(Object.create(null),e.features),scope:Object.assign(Object.create(null),e.scope),atrule:Xy(e.atrule),pseudo:Xy(e.pseudo),node:Xy(e.node)};for(const[n,r]of Object.entries(e.parseContext))switch(typeof r){case"function":t.context[n]=r;break;case"string":t.context[n]=qce(r);break}return{config:t,...t,...t.node}}function Xce(e){let t="",n="<unknown>",r=!1,i=PE,s=!1;const a=new Uce,o=Object.assign(new Hce,Yce(e||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:Wce,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(h){return h===NE?1:0},consumeUntilLeftCurlyBracketOrSemicolon(h){return h===NE||h===Yy?1:0},consumeUntilExclamationMarkOrSemicolon(h){return h===Vce||h===Yy?1:0},consumeUntilSemicolonIncluded(h){return h===Yy?2:0},createList(){return new _o},createSingleNodeList(h){return new _o().appendData(h)},getFirstListNode(h){return h&&h.first},getLastListNode(h){return h&&h.last},parseWithFallback(h,d){const p=this.tokenIndex;try{return h.call(this)}catch(m){if(s)throw m;this.skip(p-this.tokenIndex);const g=d.call(this);return s=!0,i(m,g),s=!1,g}},lookupNonWSType(h){let d;do if(d=this.lookupType(h++),d!==Ur&&d!==ji)return d;while(d!==OE);return OE},charCodeAt(h){return h>=0&&h<t.length?t.charCodeAt(h):0},substring(h,d){return t.substring(h,d)},substrToCursor(h){return this.source.substring(h,this.tokenStart)},cmpChar(h,d){return Ru(t,h,d)},cmpStr(h,d,p){return lf(t,h,d,p)},consume(h){const d=this.tokenStart;return this.eat(h),this.substrToCursor(d)},consumeFunctionName(){const h=t.substring(this.tokenStart,this.tokenEnd-1);return this.eat(kn),h},consumeNumber(h){const d=t.substring(this.tokenStart,g0(t,this.tokenStart));return this.eat(h),d},eat(h){if(this.tokenType!==h){const d=kR[h].slice(0,-6).replace(/-/g," ").replace(/^./,g=>g.toUpperCase());let p=`${/[[\](){}]/.test(d)?`"${d}"`:d} is expected`,m=this.tokenStart;switch(h){case Rt:this.tokenType===kn||this.tokenType===Fi?(m=this.tokenEnd-1,p="Identifier is expected but function found"):p="Identifier is expected";break;case wr:this.isDelim(Gce)&&(this.next(),m++,p="Name is expected");break;case Dr:this.tokenType===dn&&(m=this.tokenEnd,p="Percent sign is expected");break}this.error(p,m)}this.next()},eatIdent(h){(this.tokenType!==Rt||this.lookupValue(0,h)===!1)&&this.error(`Identifier "${h}" is expected`),this.next()},eatDelim(h){this.isDelim(h)||this.error(`Delim "${String.fromCharCode(h)}" is expected`),this.next()},getLocation(h,d){return r?a.getLocationRange(h,d,n):null},getLocationFromList(h){if(r){const d=this.getFirstListNode(h),p=this.getLastListNode(h);return a.getLocationRange(d!==null?d.loc.start.offset-a.startOffset:this.tokenStart,p!==null?p.loc.end.offset-a.startOffset:this.tokenStart,n)}return null},error(h,d){const p=typeof d<"u"&&d<t.length?a.getLocation(d):this.eof?a.getLocation(zce(t,t.length-1)):a.getLocation(this.tokenStart);throw new AE(h||"Unexpected input",t,p.offset,p.line,p.column,a.startLine,a.startColumn)}});return Object.assign(function(h,d){t=h,d=d||{},o.setSource(t,y0),a.setSource(t,d.offset,d.line,d.column),n=d.filename||"<unknown>",r=!!d.positions,i=typeof d.onParseError=="function"?d.onParseError:PE,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in d?!!d.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in d?!!d.parseRulePrelude:!0,o.parseValue="parseValue"in d?!!d.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in d?!!d.parseCustomProperty:!1;const{context:p="default",onComment:m}=d;if(!(p in o.context))throw new Error("Unknown context `"+p+"`");typeof m=="function"&&o.forEachToken((v,w,C)=>{if(v===ji){const x=o.getLocation(w,C),k=lf(t,C-2,C,"*/")?t.slice(w+2,C-2):t.slice(w+2,C);m(k,x)}});const g=o.context[p].call(o,d);return o.eof||o.error(),g},{SyntaxError:AE,config:o.config})}var w_={},__={},RE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");__.encode=function(e){if(0<=e&&e<RE.length)return RE[e];throw new TypeError("Must be between 0 and 63: "+e)};__.decode=function(e){var t=65,n=90,r=97,i=122,s=48,a=57,o=43,u=47,h=26,d=52;return t<=e&&e<=n?e-t:r<=e&&e<=i?e-r+h:s<=e&&e<=a?e-s+d:e==o?62:e==u?63:-1};var SR=__,k_=5,CR=1<<k_,ER=CR-1,TR=CR;function Kce(e){return e<0?(-e<<1)+1:(e<<1)+0}function Zce(e){var t=(e&1)===1,n=e>>1;return t?-n:n}w_.encode=function(t){var n="",r,i=Kce(t);do r=i&ER,i>>>=k_,i>0&&(r|=TR),n+=SR.encode(r);while(i>0);return n};w_.decode=function(t,n,r){var i=t.length,s=0,a=0,o,u;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(u=SR.decode(t.charCodeAt(n++)),u===-1)throw new Error("Invalid base64 digit: "+t.charAt(n-1));o=!!(u&TR),u&=ER,s=s+(u<<a),a+=k_}while(o);r.value=Zce(s),r.rest=n};var v0={};(function(e){function t(D,R,X){if(R in D)return D[R];if(arguments.length===3)return X;throw new Error('"'+R+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function i(D){var R=D.match(n);return R?{scheme:R[1],auth:R[2],host:R[3],port:R[4],path:R[5]}:null}e.urlParse=i;function s(D){var R="";return D.scheme&&(R+=D.scheme+":"),R+="//",D.auth&&(R+=D.auth+"@"),D.host&&(R+=D.host),D.port&&(R+=":"+D.port),D.path&&(R+=D.path),R}e.urlGenerate=s;var a=32;function o(D){var R=[];return function(X){for(var ce=0;ce<R.length;ce++)if(R[ce].input===X){var ie=R[0];return R[0]=R[ce],R[ce]=ie,R[0].result}var ge=D(X);return R.unshift({input:X,result:ge}),R.length>a&&R.pop(),ge}}var u=o(function(R){var X=R,ce=i(R);if(ce){if(!ce.path)return R;X=ce.path}for(var ie=e.isAbsolute(X),ge=[],H=0,ye=0;;)if(H=ye,ye=X.indexOf("/",H),ye===-1){ge.push(X.slice(H));break}else for(ge.push(X.slice(H,ye));ye<X.length&&X[ye]==="/";)ye++;for(var je,ke=0,ye=ge.length-1;ye>=0;ye--)je=ge[ye],je==="."?ge.splice(ye,1):je===".."?ke++:ke>0&&(je===""?(ge.splice(ye+1,ke),ke=0):(ge.splice(ye,2),ke--));return X=ge.join("/"),X===""&&(X=ie?"/":"."),ce?(ce.path=X,s(ce)):X});e.normalize=u;function h(D,R){D===""&&(D="."),R===""&&(R=".");var X=i(R),ce=i(D);if(ce&&(D=ce.path||"/"),X&&!X.scheme)return ce&&(X.scheme=ce.scheme),s(X);if(X||R.match(r))return R;if(ce&&!ce.host&&!ce.path)return ce.host=R,s(ce);var ie=R.charAt(0)==="/"?R:u(D.replace(/\/+$/,"")+"/"+R);return ce?(ce.path=ie,s(ce)):ie}e.join=h,e.isAbsolute=function(D){return D.charAt(0)==="/"||n.test(D)};function d(D,R){D===""&&(D="."),D=D.replace(/\/$/,"");for(var X=0;R.indexOf(D+"/")!==0;){var ce=D.lastIndexOf("/");if(ce<0||(D=D.slice(0,ce),D.match(/^([^\/]+:\/)?\/*$/)))return R;++X}return Array(X+1).join("../")+R.substr(D.length+1)}e.relative=d;var p=function(){var D=Object.create(null);return!("__proto__"in D)}();function m(D){return D}function g(D){return w(D)?"$"+D:D}e.toSetString=p?m:g;function v(D){return w(D)?D.slice(1):D}e.fromSetString=p?m:v;function w(D){if(!D)return!1;var R=D.length;if(R<9||D.charCodeAt(R-1)!==95||D.charCodeAt(R-2)!==95||D.charCodeAt(R-3)!==111||D.charCodeAt(R-4)!==116||D.charCodeAt(R-5)!==111||D.charCodeAt(R-6)!==114||D.charCodeAt(R-7)!==112||D.charCodeAt(R-8)!==95||D.charCodeAt(R-9)!==95)return!1;for(var X=R-10;X>=0;X--)if(D.charCodeAt(X)!==36)return!1;return!0}function C(D,R,X){var ce=j(D.source,R.source);return ce!==0||(ce=D.originalLine-R.originalLine,ce!==0)||(ce=D.originalColumn-R.originalColumn,ce!==0||X)||(ce=D.generatedColumn-R.generatedColumn,ce!==0)||(ce=D.generatedLine-R.generatedLine,ce!==0)?ce:j(D.name,R.name)}e.compareByOriginalPositions=C;function x(D,R,X){var ce;return ce=D.originalLine-R.originalLine,ce!==0||(ce=D.originalColumn-R.originalColumn,ce!==0||X)||(ce=D.generatedColumn-R.generatedColumn,ce!==0)||(ce=D.generatedLine-R.generatedLine,ce!==0)?ce:j(D.name,R.name)}e.compareByOriginalPositionsNoSource=x;function k(D,R,X){var ce=D.generatedLine-R.generatedLine;return ce!==0||(ce=D.generatedColumn-R.generatedColumn,ce!==0||X)||(ce=j(D.source,R.source),ce!==0)||(ce=D.originalLine-R.originalLine,ce!==0)||(ce=D.originalColumn-R.originalColumn,ce!==0)?ce:j(D.name,R.name)}e.compareByGeneratedPositionsDeflated=k;function A(D,R,X){var ce=D.generatedColumn-R.generatedColumn;return ce!==0||X||(ce=j(D.source,R.source),ce!==0)||(ce=D.originalLine-R.originalLine,ce!==0)||(ce=D.originalColumn-R.originalColumn,ce!==0)?ce:j(D.name,R.name)}e.compareByGeneratedPositionsDeflatedNoLine=A;function j(D,R){return D===R?0:D===null?1:R===null?-1:D>R?1:-1}function I(D,R){var X=D.generatedLine-R.generatedLine;return X!==0||(X=D.generatedColumn-R.generatedColumn,X!==0)||(X=j(D.source,R.source),X!==0)||(X=D.originalLine-R.originalLine,X!==0)||(X=D.originalColumn-R.originalColumn,X!==0)?X:j(D.name,R.name)}e.compareByGeneratedPositionsInflated=I;function E(D){return JSON.parse(D.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=E;function U(D,R,X){if(R=R||"",D&&(D[D.length-1]!=="/"&&R[0]!=="/"&&(D+="/"),R=D+R),X){var ce=i(X);if(!ce)throw new Error("sourceMapURL could not be parsed");if(ce.path){var ie=ce.path.lastIndexOf("/");ie>=0&&(ce.path=ce.path.substring(0,ie+1))}R=h(s(ce),R)}return u(R)}e.computeSourceURL=U})(v0);var jR={},S_=v0,C_=Object.prototype.hasOwnProperty,ec=typeof Map<"u";function Ao(){this._array=[],this._set=ec?new Map:Object.create(null)}Ao.fromArray=function(t,n){for(var r=new Ao,i=0,s=t.length;i<s;i++)r.add(t[i],n);return r};Ao.prototype.size=function(){return ec?this._set.size:Object.getOwnPropertyNames(this._set).length};Ao.prototype.add=function(t,n){var r=ec?t:S_.toSetString(t),i=ec?this.has(t):C_.call(this._set,r),s=this._array.length;(!i||n)&&this._array.push(t),i||(ec?this._set.set(t,s):this._set[r]=s)};Ao.prototype.has=function(t){if(ec)return this._set.has(t);var n=S_.toSetString(t);return C_.call(this._set,n)};Ao.prototype.indexOf=function(t){if(ec){var n=this._set.get(t);if(n>=0)return n}else{var r=S_.toSetString(t);if(C_.call(this._set,r))return this._set[r]}throw new Error('"'+t+'" is not in the set.')};Ao.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};Ao.prototype.toArray=function(){return this._array.slice()};jR.ArraySet=Ao;var AR={},PR=v0;function Qce(e,t){var n=e.generatedLine,r=t.generatedLine,i=e.generatedColumn,s=t.generatedColumn;return r>n||r==n&&s>=i||PR.compareByGeneratedPositionsInflated(e,t)<=0}function x0(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}x0.prototype.unsortedForEach=function(t,n){this._array.forEach(t,n)};x0.prototype.add=function(t){Qce(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};x0.prototype.toArray=function(){return this._sorted||(this._array.sort(PR.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};AR.MappingList=x0;var Bh=w_,ti=v0,gg=jR.ArraySet,Jce=AR.MappingList;function Qs(e){e||(e={}),this._file=ti.getArg(e,"file",null),this._sourceRoot=ti.getArg(e,"sourceRoot",null),this._skipValidation=ti.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=ti.getArg(e,"ignoreInvalidMapping",!1),this._sources=new gg,this._names=new gg,this._mappings=new Jce,this._sourcesContents=null}Qs.prototype._version=3;Qs.fromSourceMap=function(t,n){var r=t.sourceRoot,i=new Qs(Object.assign(n||{},{file:t.file,sourceRoot:r}));return t.eachMapping(function(s){var a={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(a.source=s.source,r!=null&&(a.source=ti.relative(r,a.source)),a.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(a.name=s.name)),i.addMapping(a)}),t.sources.forEach(function(s){var a=s;r!==null&&(a=ti.relative(r,s)),i._sources.has(a)||i._sources.add(a);var o=t.sourceContentFor(s);o!=null&&i.setSourceContent(s,o)}),i};Qs.prototype.addMapping=function(t){var n=ti.getArg(t,"generated"),r=ti.getArg(t,"original",null),i=ti.getArg(t,"source",null),s=ti.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(n,r,i,s)===!1||(i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:s}))};Qs.prototype.setSourceContent=function(t,n){var r=t;this._sourceRoot!=null&&(r=ti.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[ti.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[ti.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Qs.prototype.applySourceMap=function(t,n,r){var i=n;if(n==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=t.file}var s=this._sourceRoot;s!=null&&(i=ti.relative(s,i));var a=new gg,o=new gg;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){var h=t.originalPositionFor({line:u.originalLine,column:u.originalColumn});h.source!=null&&(u.source=h.source,r!=null&&(u.source=ti.join(r,u.source)),s!=null&&(u.source=ti.relative(s,u.source)),u.originalLine=h.line,u.originalColumn=h.column,h.name!=null&&(u.name=h.name))}var d=u.source;d!=null&&!a.has(d)&&a.add(d);var p=u.name;p!=null&&!o.has(p)&&o.add(p)},this),this._sources=a,this._names=o,t.sources.forEach(function(u){var h=t.sourceContentFor(u);h!=null&&(r!=null&&(u=ti.join(r,u)),s!=null&&(u=ti.relative(s,u)),this.setSourceContent(u,h))},this)};Qs.prototype._validateMapping=function(t,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number"){var s="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!n&&!r&&!i)){if(t&&"line"in t&&"column"in t&&n&&"line"in n&&"column"in n&&t.line>0&&t.column>=0&&n.line>0&&n.column>=0&&r)return;var s="Invalid mapping: "+JSON.stringify({generated:t,source:r,original:n,name:i});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}};Qs.prototype._serializeMappings=function(){for(var t=0,n=1,r=0,i=0,s=0,a=0,o="",u,h,d,p,m=this._mappings.toArray(),g=0,v=m.length;g<v;g++){if(h=m[g],u="",h.generatedLine!==n)for(t=0;h.generatedLine!==n;)u+=";",n++;else if(g>0){if(!ti.compareByGeneratedPositionsInflated(h,m[g-1]))continue;u+=","}u+=Bh.encode(h.generatedColumn-t),t=h.generatedColumn,h.source!=null&&(p=this._sources.indexOf(h.source),u+=Bh.encode(p-a),a=p,u+=Bh.encode(h.originalLine-1-i),i=h.originalLine-1,u+=Bh.encode(h.originalColumn-r),r=h.originalColumn,h.name!=null&&(d=this._names.indexOf(h.name),u+=Bh.encode(d-s),s=d)),o+=u}return o};Qs.prototype._generateSourcesContent=function(t,n){return t.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=ti.relative(n,r));var i=ti.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Qs.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};Qs.prototype.toString=function(){return JSON.stringify(this.toJSON())};var NR=Qs;const ME=new Set(["Atrule","Selector","Declaration"]);function eue(e){const t=new NR,n={line:1,column:0},r={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,u=!1;const h=e.node;e.node=function(m){if(m.loc&&m.loc.start&&ME.has(m.type)){const g=m.loc.start.line,v=m.loc.start.column-1;(r.line!==g||r.column!==v)&&(r.line=g,r.column=v,n.line=a,n.column=o,u&&(u=!1,(n.line!==i.line||n.column!==i.column)&&t.addMapping(s)),u=!0,t.addMapping({source:m.loc.source,original:r,generated:n}))}h.call(this,m),u&&ME.has(m.type)&&(i.line=a,i.column=o)};const d=e.emit;e.emit=function(m,g,v){for(let w=0;w<m.length;w++)m.charCodeAt(w)===10?(a++,o=0):o++;d(m,g,v)};const p=e.result;return e.result=function(){return u&&t.addMapping(s),{css:p(),map:t}},e}const tue=43,nue=45,Ky=(e,t)=>{if(e===In&&(e=t),typeof e=="string"){const n=e.charCodeAt(0);return n>127?32768:n<<8}return e},OR=[[Rt,Rt],[Rt,kn],[Rt,Fi],[Rt,ss],[Rt,"-"],[Rt,dn],[Rt,Dr],[Rt,Nn],[Rt,as],[Rt,Qn],[ii,Rt],[ii,kn],[ii,Fi],[ii,ss],[ii,"-"],[ii,dn],[ii,Dr],[ii,Nn],[ii,as],[wr,Rt],[wr,kn],[wr,Fi],[wr,ss],[wr,"-"],[wr,dn],[wr,Dr],[wr,Nn],[wr,as],[Nn,Rt],[Nn,kn],[Nn,Fi],[Nn,ss],[Nn,"-"],[Nn,dn],[Nn,Dr],[Nn,Nn],[Nn,as],["#",Rt],["#",kn],["#",Fi],["#",ss],["#","-"],["#",dn],["#",Dr],["#",Nn],["#",as],["-",Rt],["-",kn],["-",Fi],["-",ss],["-","-"],["-",dn],["-",Dr],["-",Nn],["-",as],[dn,Rt],[dn,kn],[dn,Fi],[dn,ss],[dn,dn],[dn,Dr],[dn,Nn],[dn,"%"],[dn,as],["@",Rt],["@",kn],["@",Fi],["@",ss],["@","-"],["@",as],[".",dn],[".",Dr],[".",Nn],["+",dn],["+",Dr],["+",Nn],["/","*"]],rue=OR.concat([[Rt,wr],[Nn,wr],[wr,wr],[ii,Qn],[ii,La],[ii,Wi],[Dr,Dr],[Dr,Nn],[Dr,kn],[Dr,"-"],[hn,Rt],[hn,kn],[hn,Dr],[hn,Nn],[hn,wr],[hn,"-"]]);function RR(e){const t=new Set(e.map(([n,r])=>Ky(n)<<16|Ky(r)));return function(n,r,i){const s=Ky(r,i),a=i.charCodeAt(0);return(a===nue&&r!==Rt&&r!==kn&&r!==as||a===tue?t.has(n<<16|a<<8):t.has(n<<16|s))&&this.emit(" ",Ur,!0),s}}const iue=RR(OR),MR=RR(rue),LE=Object.freeze(Object.defineProperty({__proto__:null,safe:MR,spec:iue},Symbol.toStringTag,{value:"Module"})),sue=92;function aue(e,t){if(typeof t=="function"){let n=null;e.children.forEach(r=>{n!==null&&t.call(this,n),this.node(r),n=r});return}e.children.forEach(this.node,this)}function oue(e){y0(e,(t,n,r)=>{this.token(t,e.slice(n,r))})}function lue(e){const t=new Map;for(let[n,r]of Object.entries(e.node))typeof(r.generate||r)=="function"&&t.set(n,r.generate||r);return function(n,r){let i="",s=0,a={node(u){if(t.has(u.type))t.get(u.type).call(o,u);else throw new Error("Unknown node type: "+u.type)},tokenBefore:MR,token(u,h){s=this.tokenBefore(s,u,h),this.emit(h,u,!1),u===In&&h.charCodeAt(0)===sue&&this.emit(`
`,Ur,!0)},emit(u){i+=u},result(){return i}};r&&(typeof r.decorator=="function"&&(a=r.decorator(a)),r.sourceMap&&(a=eue(a)),r.mode in LE&&(a.tokenBefore=LE[r.mode]));const o={node:u=>a.node(u),children:aue,token:(u,h)=>a.token(u,h),tokenize:oue};return a.node(n),a.result()}}function cue(e){return{fromPlainObject(t){return e(t,{enter(n){n.children&&!(n.children instanceof _o)&&(n.children=new _o().fromArray(n.children))}}),t},toPlainObject(t){return e(t,{leave(n){n.children&&n.children instanceof _o&&(n.children=n.children.toArray())}}),t}}}const{hasOwnProperty:E_}=Object.prototype,id=function(){};function IE(e){return typeof e=="function"?e:id}function $E(e,t){return function(n,r,i){n.type===t&&e.call(this,n,r,i)}}function uue(e,t){const n=t.structure,r=[];for(const i in n){if(E_.call(n,i)===!1)continue;let s=n[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&r.push(a)}return r.length?{context:t.walkContext,fields:r}:null}function hue(e){const t={};for(const n in e.node)if(E_.call(e.node,n)){const r=e.node[n];if(!r.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");t[n]=uue(n,r)}return t}function DE(e,t){const n=e.fields.slice(),r=e.context,i=typeof r=="string";return t&&n.reverse(),function(s,a,o,u){let h;i&&(h=a[r],a[r]=s);for(const d of n){const p=s[d.name];if(!d.nullable||p){if(d.type==="list"){if(t?p.reduceRight(u,!1):p.reduce(u,!1))return!0}else if(o(p))return!0}}i&&(a[r]=h)}}function zE({StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}){return{Atrule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Rule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Declaration:{StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}}}function due(e){const t=hue(e),n={},r={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const h in t)E_.call(t,h)&&t[h]!==null&&(n[h]=DE(t[h],!1),r[h]=DE(t[h],!0));const a=zE(n),o=zE(r),u=function(h,d){function p(x,k,A){const j=m.call(C,x,k,A);return j===i?!0:j===s?!1:!!(v.hasOwnProperty(x.type)&&v[x.type](x,C,p,w)||g.call(C,x,k,A)===i)}let m=id,g=id,v=n,w=(x,k,A,j)=>x||p(k,A,j);const C={break:i,skip:s,root:h,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof d=="function")m=d;else if(d&&(m=IE(d.enter),g=IE(d.leave),d.reverse&&(v=r),d.visit)){if(a.hasOwnProperty(d.visit))v=d.reverse?o[d.visit]:a[d.visit];else if(!t.hasOwnProperty(d.visit))throw new Error("Bad value `"+d.visit+"` for `visit` option (should be: "+Object.keys(t).sort().join(", ")+")");m=$E(m,d.visit),g=$E(g,d.visit)}if(m===id&&g===id)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");p(h)};return u.break=i,u.skip=s,u.find=function(h,d){let p=null;return u(h,function(m,g,v){if(d.call(this,m,g,v))return p=m,i}),p},u.findLast=function(h,d){let p=null;return u(h,{reverse:!0,enter(m,g,v){if(d.call(this,m,g,v))return p=m,i}}),p},u.findAll=function(h,d){const p=[];return u(h,function(m,g,v){d.call(this,m,g,v)&&p.push(m)}),p},u}function fue(e){return e}function pue(e){const{min:t,max:n,comma:r}=e;return t===0&&n===0?r?"#?":"*":t===0&&n===1?"?":t===1&&n===0?r?"#":"+":t===1&&n===1?"":(r?"#":"")+(t===n?"{"+t+"}":"{"+t+","+(n!==0?n:"")+"}")}function mue(e){switch(e.type){case"Range":return" ["+(e.min===null?"-":e.min)+","+(e.max===null?"":e.max)+"]";default:throw new Error("Unknown node type `"+e.type+"`")}}function gue(e,t,n,r){const i=e.combinator===" "||r?e.combinator:" "+e.combinator+" ",s=e.terms.map(a=>yg(a,t,n,r)).join(i);return e.explicit||n?(r||s[0]===","?"[":"[ ")+s+(r?"]":" ]"):s}function yg(e,t,n,r){let i;switch(e.type){case"Group":i=gue(e,t,n,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return yg(e.term,t,n,r)+t(pue(e),e);case"Boolean":i="<boolean-expr["+yg(e.term,t,n,r)+"]>";break;case"Type":i="<"+e.name+(e.opts?t(mue(e.opts),e.opts):"")+">";break;case"Property":i="<'"+e.name+"'>";break;case"Keyword":i=e.name;break;case"AtKeyword":i="@"+e.name;break;case"Function":i=e.name+"(";break;case"String":case"Token":i=e.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return t(i,e)}function T_(e,t){let n=fue,r=!1,i=!1;return typeof t=="function"?n=t:t&&(r=!!t.forceBraces,i=!!t.compact,typeof t.decorate=="function"&&(n=t.decorate)),yg(e,n,r,i)}const FE={offset:0,line:1,column:1};function yue(e,t){const n=e.tokens,r=e.longestMatch,i=r<n.length&&n[r].node||null,s=i!==t?i:null;let a=0,o=0,u=0,h="",d,p;for(let m=0;m<n.length;m++){const g=n[m].value;m===r&&(o=g.length,a=h.length),s!==null&&n[m].node===s&&(m<=r?u++:u=0),h+=g}return r===n.length||u>1?(d=Pp(s||t,"end")||sd(FE,h),p=sd(d)):(d=Pp(s,"start")||sd(Pp(t,"start")||FE,h.slice(0,a)),p=Pp(s,"end")||sd(d,h.substr(a,o))),{css:h,mismatchOffset:a,mismatchLength:o,start:d,end:p}}function Pp(e,t){const n=e&&e.loc&&e.loc[t];return n?"line"in n?sd(n):n:null}function sd({offset:e,line:t,column:n},r){const i={offset:e,line:t,column:n};if(r){const s=r.split(/\n|\r\n?|\f/);i.offset+=r.length,i.line+=s.length-1,i.column=s.length===1?i.column+r.length:s.pop().length+1}return i}const Uh=function(e,t){const n=b0("SyntaxReferenceError",e+(t?" `"+t+"`":""));return n.reference=t,n},bue=function(e,t,n,r){const i=b0("SyntaxMatchError",e),{css:s,mismatchOffset:a,mismatchLength:o,start:u,end:h}=yue(r,n);return i.rawMessage=e,i.syntax=t?T_(t):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=e+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,u),i.loc={source:n&&n.loc&&n.loc.source||"<unknown>",start:u,end:h},i},Np=new Map,Pc=new Map,bg=45,Zy=vue,BE=xue;function j_(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===bg&&e.charCodeAt(t+1)===bg}function LR(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===bg&&e.charCodeAt(t+1)!==bg){const n=e.indexOf("-",t+2);if(n!==-1)return e.substring(t,n+1)}return""}function vue(e){if(Np.has(e))return Np.get(e);const t=e.toLowerCase();let n=Np.get(t);if(n===void 0){const r=j_(t,0),i=r?"":LR(t,0);n=Object.freeze({basename:t.substr(i.length),name:t,prefix:i,vendor:i,custom:r})}return Np.set(e,n),n}function xue(e){if(Pc.has(e))return Pc.get(e);let t=e,n=e[0];n==="/"?n=e[1]==="/"?"//":"/":n!=="_"&&n!=="*"&&n!=="$"&&n!=="#"&&n!=="+"&&n!=="&"&&(n="");const r=j_(t,n.length);if(!r&&(t=t.toLowerCase(),Pc.has(t))){const o=Pc.get(t);return Pc.set(e,o),o}const i=r?"":LR(t,n.length),s=t.substr(0,n.length+i.length),a=Object.freeze({basename:t.substr(s.length),name:t.substr(n.length),hack:n,vendor:i,prefix:s,custom:r});return Pc.set(e,a),a}const A_=["initial","inherit","unset","revert","revert-layer"],cf=43,Va=45,Qy=110,Nc=!0,wue=!1;function Ex(e,t){return e!==null&&e.type===In&&e.value.charCodeAt(0)===t}function Pd(e,t,n){for(;e!==null&&(e.type===Ur||e.type===ji);)e=n(++t);return t}function Uo(e,t,n,r){if(!e)return 0;const i=e.value.charCodeAt(t);if(i===cf||i===Va){if(n)return 0;t++}for(;t<e.value.length;t++)if(!Ei(e.value.charCodeAt(t)))return 0;return r+1}function Jy(e,t,n){let r=!1,i=Pd(e,t,n);if(e=n(i),e===null)return t;if(e.type!==dn)if(Ex(e,cf)||Ex(e,Va)){if(r=!0,i=Pd(n(++i),i,n),e=n(i),e===null||e.type!==dn)return 0}else return t;if(!r){const s=e.value.charCodeAt(0);if(s!==cf&&s!==Va)return 0}return Uo(e,r?0:1,r,i)}function _ue(e,t){let n=0;if(!e)return 0;if(e.type===dn)return Uo(e,0,wue,n);if(e.type===Rt&&e.value.charCodeAt(0)===Va){if(!Ru(e.value,1,Qy))return 0;switch(e.value.length){case 2:return Jy(t(++n),n,t);case 3:return e.value.charCodeAt(2)!==Va?0:(n=Pd(t(++n),n,t),e=t(n),Uo(e,0,Nc,n));default:return e.value.charCodeAt(2)!==Va?0:Uo(e,3,Nc,n)}}else if(e.type===Rt||Ex(e,cf)&&t(n+1).type===Rt){if(e.type!==Rt&&(e=t(++n)),e===null||!Ru(e.value,0,Qy))return 0;switch(e.value.length){case 1:return Jy(t(++n),n,t);case 2:return e.value.charCodeAt(1)!==Va?0:(n=Pd(t(++n),n,t),e=t(n),Uo(e,0,Nc,n));default:return e.value.charCodeAt(1)!==Va?0:Uo(e,2,Nc,n)}}else if(e.type===Nn){let r=e.value.charCodeAt(0),i=r===cf||r===Va?1:0,s=i;for(;s<e.value.length&&Ei(e.value.charCodeAt(s));s++);return s===i||!Ru(e.value,s,Qy)?0:s+1===e.value.length?Jy(t(++n),n,t):e.value.charCodeAt(s+1)!==Va?0:s+2===e.value.length?(n=Pd(t(++n),n,t),e=t(n),Uo(e,0,Nc,n)):Uo(e,s+2,Nc,n)}return 0}const kue=43,IR=45,$R=63,Sue=117;function Tx(e,t){return e!==null&&e.type===In&&e.value.charCodeAt(0)===t}function Cue(e,t){return e.value.charCodeAt(0)===t}function ad(e,t,n){let r=0;for(let i=t;i<e.value.length;i++){const s=e.value.charCodeAt(i);if(s===IR&&n&&r!==0)return ad(e,t+r+1,!1),6;if(!pl(s)||++r>6)return 0}return r}function Op(e,t,n){if(!e)return 0;for(;Tx(n(t),$R);){if(++e>6)return 0;t++}return t}function Eue(e,t){let n=0;if(e===null||e.type!==Rt||!Ru(e.value,0,Sue)||(e=t(++n),e===null))return 0;if(Tx(e,kue))return e=t(++n),e===null?0:e.type===Rt?Op(ad(e,0,!0),++n,t):Tx(e,$R)?Op(1,++n,t):0;if(e.type===dn){const r=ad(e,1,!0);return r===0?0:(e=t(++n),e===null?n:e.type===Nn||e.type===dn?!Cue(e,IR)||!ad(e,1,!1)?0:n+1:Op(r,n,t))}return e.type===Nn?Op(ad(e,1,!0),++n,t):0}const Tue=["calc(","-moz-calc(","-webkit-calc("],P_=new Map([[kn,hn],[Qn,hn],[ea,Aa],[Pi,Zs]]);function Sa(e,t){return t<e.length?e.charCodeAt(t):0}function DR(e,t){return lf(e,0,e.length,t)}function zR(e,t){for(let n=0;n<t.length;n++)if(DR(e,t[n]))return!0;return!1}function FR(e,t){return t!==e.length-2?!1:Sa(e,t)===92&&Ei(Sa(e,t+1))}function w0(e,t,n){if(e&&e.type==="Range"){const r=Number(n!==void 0&&n!==t.length?t.substr(0,n):t);if(isNaN(r)||e.min!==null&&r<e.min&&typeof e.min!="string"||e.max!==null&&r>e.max&&typeof e.max!="string")return!0}return!1}function jue(e,t){let n=0,r=[],i=0;e:do{switch(e.type){case Zs:case hn:case Aa:if(e.type!==n)break e;if(n=r.pop(),r.length===0){i++;break e}break;case kn:case Qn:case ea:case Pi:r.push(n),n=P_.get(e.type);break}i++}while(e=t(i));return i}function zs(e){return function(t,n,r){return t===null?0:t.type===kn&&zR(t.value,Tue)?jue(t,n):e(t,n,r)}}function vr(e){return function(t){return t===null||t.type!==e?0:1}}function Aue(e){if(e===null||e.type!==Rt)return 0;const t=e.value.toLowerCase();return zR(t,A_)||DR(t,"default")?0:1}function BR(e){return e===null||e.type!==Rt||Sa(e.value,0)!==45||Sa(e.value,1)!==45?0:1}function Pue(e){return!BR(e)||e.value==="--"?0:1}function Nue(e){if(e===null||e.type!==wr)return 0;const t=e.value.length;if(t!==4&&t!==5&&t!==7&&t!==9)return 0;for(let n=1;n<t;n++)if(!pl(Sa(e.value,n)))return 0;return 1}function Oue(e){return e===null||e.type!==wr||!cm(Sa(e.value,1),Sa(e.value,2),Sa(e.value,3))?0:1}function Rue(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case m0:case ss:break e;case Zs:case hn:case Aa:if(e.type!==n)break e;n=r.pop();break;case Vi:if(n===0)break e;break;case In:if(n===0&&e.value==="!")break e;break;case kn:case Qn:case ea:case Pi:r.push(n),n=P_.get(e.type);break}i++}while(e=t(i));return i}function Mue(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case m0:case ss:break e;case Zs:case hn:case Aa:if(e.type!==n)break e;n=r.pop();break;case kn:case Qn:case ea:case Pi:r.push(n),n=P_.get(e.type);break}i++}while(e=t(i));return i}function ho(e){return e&&(e=new Set(e)),function(t,n,r){if(t===null||t.type!==Nn)return 0;const i=g0(t.value,0);if(e!==null){const s=t.value.indexOf("\\",i),a=s===-1||!FR(t.value,s)?t.value.substr(i):t.value.substring(i,s);if(e.has(a.toLowerCase())===!1)return 0}return w0(r,t.value,i)?0:1}}function Lue(e,t,n){return e===null||e.type!==Dr||w0(n,e.value,e.value.length-1)?0:1}function UR(e){return typeof e!="function"&&(e=function(){return 0}),function(t,n,r){return t!==null&&t.type===dn&&Number(t.value)===0?1:e(t,n,r)}}function Iue(e,t,n){if(e===null)return 0;const r=g0(e.value,0);return!(r===e.value.length)&&!FR(e.value,r)||w0(n,e.value,r)?0:1}function $ue(e,t,n){if(e===null||e.type!==dn)return 0;let r=Sa(e.value,0)===43||Sa(e.value,0)===45?1:0;for(;r<e.value.length;r++)if(!Ei(Sa(e.value,r)))return 0;return w0(n,e.value,r)?0:1}const Due={"ident-token":vr(Rt),"function-token":vr(kn),"at-keyword-token":vr(ii),"hash-token":vr(wr),"string-token":vr(La),"bad-string-token":vr(m0),"url-token":vr(Fi),"bad-url-token":vr(ss),"delim-token":vr(In),"number-token":vr(dn),"percentage-token":vr(Dr),"dimension-token":vr(Nn),"whitespace-token":vr(Ur),"CDO-token":vr(Rf),"CDC-token":vr(as),"colon-token":vr(Wi),"semicolon-token":vr(Vi),"comma-token":vr(bs),"[-token":vr(ea),"]-token":vr(Aa),"(-token":vr(Qn),")-token":vr(hn),"{-token":vr(Pi),"}-token":vr(Zs)},zue={string:vr(La),ident:vr(Rt),percentage:zs(Lue),zero:UR(),number:zs(Iue),integer:zs($ue),"custom-ident":Aue,"dashed-ident":BR,"custom-property-name":Pue,"hex-color":Nue,"id-selector":Oue,"an-plus-b":_ue,urange:Eue,"declaration-value":Rue,"any-value":Mue};function Fue(e){const{angle:t,decibel:n,frequency:r,flex:i,length:s,resolution:a,semitones:o,time:u}=e||{};return{dimension:zs(ho(null)),angle:zs(ho(t)),decibel:zs(ho(n)),frequency:zs(ho(r)),flex:zs(ho(i)),length:zs(UR(ho(s))),resolution:zs(ho(a)),semitones:zs(ho(o)),time:zs(ho(u))}}function Bue(e){return{...Due,...zue,...Fue(e)}}const Uue=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],Hue=["deg","grad","rad","turn"],Wue=["s","ms"],Vue=["hz","khz"],Gue=["dpi","dpcm","dppx","x"],que=["fr"],Yue=["db"],Xue=["st"],UE=Object.freeze(Object.defineProperty({__proto__:null,angle:Hue,decibel:Yue,flex:que,frequency:Vue,length:Uue,resolution:Gue,semitones:Xue,time:Wue},Symbol.toStringTag,{value:"Module"}));function Kue(e,t,n){return Object.assign(b0("SyntaxError",e),{input:t,offset:n,rawMessage:e,message:e+`
  `+t+`
--`+new Array((n||t.length)+1).join("-")+"^"})}const Zue=9,Que=10,Jue=12,ehe=13,the=32,HE=new Uint8Array(128).map((e,t)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(t))?1:0);class nhe{constructor(t){this.str=t,this.pos=0}charCodeAt(t){return t<this.str.length?this.str.charCodeAt(t):0}charCode(){return this.charCodeAt(this.pos)}isNameCharCode(t=this.charCode()){return t<128&&HE[t]===1}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(t){return this.charCodeAt(this.findWsEnd(t))}skipWs(){this.pos=this.findWsEnd(this.pos)}findWsEnd(t){for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n!==ehe&&n!==Que&&n!==Jue&&n!==the&&n!==Zue)break}return t}substringToPos(t){return this.str.substring(this.pos,this.pos=t)}eat(t){this.charCode()!==t&&this.error("Expect `"+String.fromCharCode(t)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(t){throw new Kue(t,this.str,this.pos)}scanSpaces(){return this.substringToPos(this.findWsEnd(this.pos))}scanWord(){let t=this.pos;for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n>=128||HE[n]===0)break}return this.pos===t&&this.error("Expect a keyword"),this.substringToPos(t)}scanNumber(){let t=this.pos;for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n<48||n>57)break}return this.pos===t&&this.error("Expect a number"),this.substringToPos(t)}scanString(){const t=this.str.indexOf("'",this.pos+1);return t===-1&&(this.pos=this.str.length,this.error("Expect an apostrophe")),this.substringToPos(t+1)}}const rhe=9,ihe=10,she=12,ahe=13,ohe=32,HR=33,N_=35,WE=38,vg=39,WR=40,lhe=41,VR=42,O_=43,R_=44,VE=45,M_=60,jx=62,Ax=63,che=64,uf=91,hf=93,xg=123,GE=124,qE=125,YE=8734,XE={" ":1,"&&":2,"||":3,"|":4};function KE(e){let t=null,n=null;return e.eat(xg),e.skipWs(),t=e.scanNumber(e),e.skipWs(),e.charCode()===R_?(e.pos++,e.skipWs(),e.charCode()!==qE&&(n=e.scanNumber(e),e.skipWs())):n=t,e.eat(qE),{min:Number(t),max:n?Number(n):0}}function uhe(e){let t=null,n=!1;switch(e.charCode()){case VR:e.pos++,t={min:0,max:0};break;case O_:e.pos++,t={min:1,max:0};break;case Ax:e.pos++,t={min:0,max:1};break;case N_:e.pos++,n=!0,e.charCode()===xg?t=KE(e):e.charCode()===Ax?(e.pos++,t={min:0,max:0}):t={min:1,max:0};break;case xg:t=KE(e);break;default:return null}return{type:"Multiplier",comma:n,min:t.min,max:t.max,term:null}}function ml(e,t){const n=uhe(e);return n!==null?(n.term=t,e.charCode()===N_&&e.charCodeAt(e.pos-1)===O_?ml(e,n):n):t}function eb(e){const t=e.peek();return t===""?null:ml(e,{type:"Token",value:t})}function hhe(e){let t;return e.eat(M_),e.eat(vg),t=e.scanWord(),e.eat(vg),e.eat(jx),ml(e,{type:"Property",name:t})}function dhe(e){let t=null,n=null,r=1;return e.eat(uf),e.charCode()===VE&&(e.peek(),r=-1),r==-1&&e.charCode()===YE?e.peek():(t=r*Number(e.scanNumber(e)),e.isNameCharCode()&&(t+=e.scanWord())),e.skipWs(),e.eat(R_),e.skipWs(),e.charCode()===YE?e.peek():(r=1,e.charCode()===VE&&(e.peek(),r=-1),n=r*Number(e.scanNumber(e)),e.isNameCharCode()&&(n+=e.scanWord())),e.eat(hf),{type:"Range",min:t,max:n}}function fhe(e){let t,n=null;if(e.eat(M_),t=e.scanWord(),t==="boolean-expr"){e.eat(uf);const r=L_(e,hf);return e.eat(hf),e.eat(jx),ml(e,{type:"Boolean",term:r.terms.length===1?r.terms[0]:r})}return e.charCode()===WR&&e.nextCharCode()===lhe&&(e.pos+=2,t+="()"),e.charCodeAt(e.findWsEnd(e.pos))===uf&&(e.skipWs(),n=dhe(e)),e.eat(jx),ml(e,{type:"Type",name:t,opts:n})}function phe(e){const t=e.scanWord();return e.charCode()===WR?(e.pos++,{type:"Function",name:t}):ml(e,{type:"Keyword",name:t})}function mhe(e,t){function n(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let r;for(t=Object.keys(t).sort((i,s)=>XE[i]-XE[s]);t.length>0;){r=t.shift();let i=0,s=0;for(;i<e.length;i++){const a=e[i];a.type==="Combinator"&&(a.value===r?(s===-1&&(s=i-1),e.splice(i,1),i--):(s!==-1&&i-s>1&&(e.splice(s,i-s,n(e.slice(s,i),r)),i=s+1),s=-1))}s!==-1&&t.length&&e.splice(s,i-s,n(e.slice(s,i),r))}return r}function L_(e,t){const n=Object.create(null),r=[];let i,s=null,a=e.pos;for(;e.charCode()!==t&&(i=yhe(e,t));)i.type!=="Spaces"&&(i.type==="Combinator"?((s===null||s.type==="Combinator")&&(e.pos=a,e.error("Unexpected combinator")),n[i.value]=!0):s!==null&&s.type!=="Combinator"&&(n[" "]=!0,r.push({type:"Combinator",value:" "})),r.push(i),s=i,a=e.pos);return s!==null&&s.type==="Combinator"&&(e.pos-=a,e.error("Unexpected combinator")),{type:"Group",terms:r,combinator:mhe(r,n)||" ",disallowEmpty:!1,explicit:!1}}function ghe(e,t){let n;return e.eat(uf),n=L_(e,t),e.eat(hf),n.explicit=!0,e.charCode()===HR&&(e.pos++,n.disallowEmpty=!0),n}function yhe(e,t){let n=e.charCode();switch(n){case hf:break;case uf:return ml(e,ghe(e,t));case M_:return e.nextCharCode()===vg?hhe(e):fhe(e);case GE:return{type:"Combinator",value:e.substringToPos(e.pos+(e.nextCharCode()===GE?2:1))};case WE:return e.pos++,e.eat(WE),{type:"Combinator",value:"&&"};case R_:return e.pos++,{type:"Comma"};case vg:return ml(e,{type:"String",value:e.scanString()});case ohe:case rhe:case ihe:case ahe:case she:return{type:"Spaces",value:e.scanSpaces()};case che:return n=e.nextCharCode(),e.isNameCharCode(n)?(e.pos++,{type:"AtKeyword",name:e.scanWord()}):eb(e);case VR:case O_:case Ax:case N_:case HR:break;case xg:if(n=e.nextCharCode(),n<48||n>57)return eb(e);break;default:return e.isNameCharCode(n)?phe(e):eb(e)}}function GR(e){const t=new nhe(e),n=L_(t);return t.pos!==e.length&&t.error("Unexpected input"),n.terms.length===1&&n.terms[0].type==="Group"?n.terms[0]:n}const od=function(){};function ZE(e){return typeof e=="function"?e:od}function bhe(e,t,n){function r(a){switch(i.call(n,a),a.type){case"Group":a.terms.forEach(r);break;case"Multiplier":case"Boolean":r(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(n,a)}let i=od,s=od;if(typeof t=="function"?i=t:t&&(i=ZE(t.enter),s=ZE(t.leave)),i===od&&s===od)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");r(e)}const vhe={decorator(e){const t=[];let n=null;return{...e,node(r){const i=n;n=r,e.node.call(this,r),n=i},emit(r,i,s){t.push({type:i,value:r,node:s?null:n})},result(){return t}}}};function xhe(e){const t=[];return y0(e,(n,r,i)=>t.push({type:n,value:e.slice(r,i),node:null})),t}function whe(e,t){return typeof e=="string"?xhe(e):t.generate(e,vhe)}const Kn={type:"Match"},ar={type:"Mismatch"},I_={type:"DisallowEmpty"},_he=40,khe=41;function Di(e,t,n){return t===Kn&&n===ar||e===Kn&&t===Kn&&n===Kn?e:(e.type==="If"&&e.else===ar&&t===Kn&&(t=e.then,e=e.match),{type:"If",match:e,then:t,else:n})}function qR(e){return e.length>2&&e.charCodeAt(e.length-2)===_he&&e.charCodeAt(e.length-1)===khe}function QE(e){return e.type==="Keyword"||e.type==="AtKeyword"||e.type==="Function"||e.type==="Type"&&qR(e.name)}function Do(e,t=" ",n=!1){return{type:"Group",terms:e,combinator:t,disallowEmpty:!1,explicit:n}}function Nd(e,t,n=new Set){if(!n.has(e))switch(n.add(e),e.type){case"If":e.match=Nd(e.match,t,n),e.then=Nd(e.then,t,n),e.else=Nd(e.else,t,n);break;case"Type":return t[e.name]||e}return e}function Px(e,t,n){switch(e){case" ":{let r=Kn;for(let i=t.length-1;i>=0;i--){const s=t[i];r=Di(s,r,ar)}return r}case"|":{let r=ar,i=null;for(let s=t.length-1;s>=0;s--){let a=t[s];if(QE(a)&&(i===null&&s>0&&QE(t[s-1])&&(i=Object.create(null),r=Di({type:"Enum",map:i},Kn,r)),i!==null)){const o=(qR(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,r=Di(a,Kn,r)}return r}case"&&":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!0};let r=ar;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Px(e,t.filter(function(o){return o!==s}),!1):a=Kn,r=Di(s,a,r)}return r}case"||":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!1};let r=n?Kn:ar;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Px(e,t.filter(function(o){return o!==s}),!0):a=Kn,r=Di(s,a,r)}return r}}}function She(e){let t=Kn,n=wu(e.term);if(e.max===0)n=Di(n,I_,ar),t=Di(n,null,ar),t.then=Di(Kn,Kn,t),e.comma&&(t.then.else=Di({type:"Comma",syntax:e},t,ar));else for(let r=e.min||1;r<=e.max;r++)e.comma&&t!==Kn&&(t=Di({type:"Comma",syntax:e},t,ar)),t=Di(n,Di(Kn,Kn,t),ar);if(e.min===0)t=Di(Kn,Kn,t);else for(let r=0;r<e.min-1;r++)e.comma&&t!==Kn&&(t=Di({type:"Comma",syntax:e},t,ar)),t=Di(n,t,ar);return t}function wu(e){if(typeof e=="function")return{type:"Generic",fn:e};switch(e.type){case"Group":{let t=Px(e.combinator,e.terms.map(wu),!1);return e.disallowEmpty&&(t=Di(t,I_,ar)),t}case"Multiplier":return She(e);case"Boolean":{const t=wu(e.term),n=wu(Do([Do([{type:"Keyword",name:"not"},{type:"Type",name:"!boolean-group"}]),Do([{type:"Type",name:"!boolean-group"},Do([{type:"Multiplier",comma:!1,min:0,max:0,term:Do([{type:"Keyword",name:"and"},{type:"Type",name:"!boolean-group"}])},{type:"Multiplier",comma:!1,min:0,max:0,term:Do([{type:"Keyword",name:"or"},{type:"Type",name:"!boolean-group"}])}],"|")])],"|")),r=wu(Do([{type:"Type",name:"!term"},Do([{type:"Token",value:"("},{type:"Type",name:"!self"},{type:"Token",value:")"}]),{type:"Type",name:"general-enclosed"}],"|"));return Nd(r,{"!term":t,"!self":n}),Nd(n,{"!boolean-group":r}),n}case"Type":case"Property":return{type:e.type,name:e.name,syntax:e};case"Keyword":return{type:e.type,name:e.name.toLowerCase(),syntax:e};case"AtKeyword":return{type:e.type,name:"@"+e.name.toLowerCase(),syntax:e};case"Function":return{type:e.type,name:e.name.toLowerCase()+"(",syntax:e};case"String":return e.value.length===3?{type:"Token",value:e.value.charAt(1),syntax:e}:{type:e.type,value:e.value.substr(1,e.value.length-2).replace(/\\'/g,"'"),syntax:e};case"Token":return{type:e.type,value:e.value,syntax:e};case"Comma":return{type:e.type,syntax:e};default:throw new Error("Unknown node type:",e.type)}}function Rp(e,t){return typeof e=="string"&&(e=GR(e)),{type:"MatchGraph",match:wu(e),syntax:t||null,source:e}}const{hasOwnProperty:JE}=Object.prototype,Che=0,Ehe=1,Nx=2,YR=3,eT="Match",The="Mismatch",jhe="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",tT=15e3;function Ahe(e){let t=null,n=null,r=e;for(;r!==null;)n=r.prev,r.prev=t,t=r,r=n;return t}function tb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=t.charCodeAt(n);let i=e.charCodeAt(n);if(i>=65&&i<=90&&(i=i|32),i!==r)return!1}return!0}function Phe(e){return e.type!==In?!1:e.value!=="?"}function nT(e){return e===null?!0:e.type===bs||e.type===kn||e.type===Qn||e.type===ea||e.type===Pi||Phe(e)}function rT(e){return e===null?!0:e.type===hn||e.type===Aa||e.type===Zs||e.type===In&&e.value==="/"}function Nhe(e,t,n){function r(){do k++,x=k<e.length?e[k]:null;while(x!==null&&(x.type===Ur||x.type===ji))}function i(I){const E=k+I;return E<e.length?e[E]:null}function s(I,E){return{nextState:I,matchStack:j,syntaxStack:p,thenStack:m,tokenIndex:k,prev:E}}function a(I){m={nextState:I,matchStack:j,syntaxStack:p,prev:m}}function o(I){g=s(I,g)}function u(){j={type:Ehe,syntax:t.syntax,token:x,prev:j},r(),v=null,k>A&&(A=k)}function h(){p={syntax:t.syntax,opts:t.syntax.opts||p!==null&&p.opts||null,prev:p},j={type:Nx,syntax:t.syntax,token:j.token,prev:j}}function d(){j.type===Nx?j=j.prev:j={type:YR,syntax:p.syntax,token:j.token,prev:j},p=p.prev}let p=null,m=null,g=null,v=null,w=0,C=null,x=null,k=-1,A=0,j={type:Che,syntax:null,token:null,prev:null};for(r();C===null&&++w<tT;)switch(t.type){case"Match":if(m===null){if(x!==null&&(k!==e.length-1||x.value!=="\\0"&&x.value!=="\\9")){t=ar;break}C=eT;break}if(t=m.nextState,t===I_)if(m.matchStack===j){t=ar;break}else t=Kn;for(;m.syntaxStack!==p;)d();m=m.prev;break;case"Mismatch":if(v!==null&&v!==!1)(g===null||k>g.tokenIndex)&&(g=v,v=!1);else if(g===null){C=The;break}t=g.nextState,m=g.thenStack,p=g.syntaxStack,j=g.matchStack,k=g.tokenIndex,x=k<e.length?e[k]:null,g=g.prev;break;case"MatchGraph":t=t.match;break;case"If":t.else!==ar&&o(t.else),t.then!==Kn&&a(t.then),t=t.match;break;case"MatchOnce":t={type:"MatchOnceBuffer",syntax:t,index:0,mask:0};break;case"MatchOnceBuffer":{const U=t.syntax.terms;if(t.index===U.length){if(t.mask===0||t.syntax.all){t=ar;break}t=Kn;break}if(t.mask===(1<<U.length)-1){t=Kn;break}for(;t.index<U.length;t.index++){const D=1<<t.index;if(!(t.mask&D)){o(t),a({type:"AddMatchOnce",syntax:t.syntax,mask:t.mask|D}),t=U[t.index++];break}}break}case"AddMatchOnce":t={type:"MatchOnceBuffer",syntax:t.syntax,index:0,mask:t.mask};break;case"Enum":if(x!==null){let U=x.value.toLowerCase();if(U.indexOf("\\")!==-1&&(U=U.replace(/\\[09].*$/,"")),JE.call(t.map,U)){t=t.map[U];break}}t=ar;break;case"Generic":{const U=p!==null?p.opts:null,D=k+Math.floor(t.fn(x,i,U));if(!isNaN(D)&&D>k){for(;k<D;)u();t=Kn}else t=ar;break}case"Type":case"Property":{const U=t.type==="Type"?"types":"properties",D=JE.call(n,U)?n[U][t.name]:null;if(!D||!D.match)throw new Error("Bad syntax reference: "+(t.type==="Type"?"<"+t.name+">":"<'"+t.name+"'>"));if(v!==!1&&x!==null&&t.type==="Type"&&(t.name==="custom-ident"&&x.type===Rt||t.name==="length"&&x.value==="0")){v===null&&(v=s(t,g)),t=ar;break}h(),t=D.matchRef||D.match;break}case"Keyword":{const U=t.name;if(x!==null){let D=x.value;if(D.indexOf("\\")!==-1&&(D=D.replace(/\\[09].*$/,"")),tb(D,U)){u(),t=Kn;break}}t=ar;break}case"AtKeyword":case"Function":if(x!==null&&tb(x.value,t.name)){u(),t=Kn;break}t=ar;break;case"Token":if(x!==null&&x.value===t.value){u(),t=Kn;break}t=ar;break;case"Comma":x!==null&&x.type===bs?nT(j.token)?t=ar:(u(),t=rT(x)?ar:Kn):t=nT(j.token)||rT(x)?Kn:ar;break;case"String":let I="",E=k;for(;E<e.length&&I.length<t.value.length;E++)I+=e[E].value;if(tb(I,t.value)){for(;k<E;)u();t=Kn}else t=ar;break;default:throw new Error("Unknown node type: "+t.type)}switch(C){case null:console.warn("[csstree-match] BREAK after "+tT+" iterations"),C=jhe,j=null;break;case eT:for(;p!==null;)d();break;default:j=null}return{tokens:e,reason:C,iterations:w,match:j,longestMatch:A}}function iT(e,t,n){const r=Nhe(e,t,n||{});if(r.match===null)return r;let i=r.match,s=r.match={syntax:t.syntax||null,match:[]};const a=[s];for(i=Ahe(i).prev;i!==null;){switch(i.type){case Nx:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case YR:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return r}function XR(e){function t(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function n(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(n(i.match[s]))return t(i.syntax)&&r.unshift(i.syntax),!0}else if(i.node===e)return r=t(i.syntax)?[i.syntax]:[],!0;return!1}let r=null;return this.matched!==null&&n(this.matched),r}function Ohe(e,t){return $_(this,e,n=>n.type==="Type"&&n.name===t)}function Rhe(e,t){return $_(this,e,n=>n.type==="Property"&&n.name===t)}function Mhe(e){return $_(this,e,t=>t.type==="Keyword")}function $_(e,t,n){const r=XR.call(e,t);return r===null?!1:r.some(n)}const Lhe=Object.freeze(Object.defineProperty({__proto__:null,getTrace:XR,isKeyword:Mhe,isProperty:Rhe,isType:Ohe},Symbol.toStringTag,{value:"Module"}));function KR(e){return"node"in e?e.node:KR(e.match[0])}function ZR(e){return"node"in e?e.node:ZR(e.match[e.match.length-1])}function sT(e,t,n,r,i){function s(o){if(o.syntax!==null&&o.syntax.type===r&&o.syntax.name===i){const u=KR(o),h=ZR(o);e.syntax.walk(t,function(d,p,m){if(d===u){const g=new _o;do{if(g.appendData(p.data),p.data===h)break;p=p.next}while(p!==null);a.push({parent:m,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return n.matched!==null&&s(n.matched),a}const{hasOwnProperty:Od}=Object.prototype;function nb(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&e>=0}function aT(e){return!!e&&nb(e.offset)&&nb(e.line)&&nb(e.column)}function Ihe(e,t){return function(r,i){if(!r||r.constructor!==Object)return i(r,"Type of node should be an Object");for(let s in r){let a=!0;if(Od.call(r,s)!==!1){if(s==="type")r.type!==e&&i(r,"Wrong node type `"+r.type+"`, expected `"+e+"`");else if(s==="loc"){if(r.loc===null)continue;if(r.loc&&r.loc.constructor===Object)if(typeof r.loc.source!="string")s+=".source";else if(!aT(r.loc.start))s+=".start";else if(!aT(r.loc.end))s+=".end";else continue;a=!1}else if(t.hasOwnProperty(s)){a=!1;for(let o=0;!a&&o<t[s].length;o++){const u=t[s][o];switch(u){case String:a=typeof r[s]=="string";break;case Boolean:a=typeof r[s]=="boolean";break;case null:a=r[s]===null;break;default:typeof u=="string"?a=r[s]&&r[s].type===u:Array.isArray(u)&&(a=r[s]instanceof _o)}}}else i(r,"Unknown field `"+s+"` for "+e+" node type");a||i(r,"Bad value for `"+e+"."+s+"`")}}for(const s in t)Od.call(t,s)&&Od.call(r,s)===!1&&i(r,"Field `"+e+"."+s+"` is missed")}}function QR(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i===String||i===Boolean)n.push(i.name.toLowerCase());else if(i===null)n.push("null");else if(typeof i=="string")n.push(i);else if(Array.isArray(i))n.push("List<"+(QR(i,t)||"any")+">");else throw new Error("Wrong value `"+i+"` in `"+t+"` structure definition")}return n.join(" | ")}function $he(e,t){const n=t.structure,r={type:String,loc:!0},i={type:'"'+e+'"'};for(const s in n){if(Od.call(n,s)===!1)continue;const a=r[s]=Array.isArray(n[s])?n[s].slice():[n[s]];i[s]=QR(a,e+"."+s)}return{docs:i,check:Ihe(e,r)}}function Dhe(e){const t={};if(e.node){for(const n in e.node)if(Od.call(e.node,n)){const r=e.node[n];if(r.structure)t[n]=$he(n,r);else throw new Error("Missed `structure` field in `"+n+"` node type definition")}}return t}function Ox(e,t,n){const r={};for(const i in e)e[i].syntax&&(r[i]=n?e[i].syntax:T_(e[i].syntax,{compact:t}));return r}function zhe(e,t,n){const r={};for(const[i,s]of Object.entries(e))r[i]={prelude:s.prelude&&(n?s.prelude.syntax:T_(s.prelude.syntax,{compact:t})),descriptors:s.descriptors&&Ox(s.descriptors,t,n)};return r}function Fhe(e){for(let t=0;t<e.length;t++)if(e[t].value.toLowerCase()==="var(")return!0;return!1}function Bhe(e){const t=e.terms[0];return e.explicit===!1&&e.terms.length===1&&t.type==="Multiplier"&&t.comma===!0}function pa(e,t,n){return{matched:e,iterations:n,error:t,...Lhe}}function Oc(e,t,n,r){const i=whe(n,e.syntax);let s;return Fhe(i)?pa(null,new Error("Matching for a tree with var() is not supported")):(r&&(s=iT(i,e.cssWideKeywordsSyntax,e)),(!r||!s.match)&&(s=iT(i,t.match,e),!s.match)?pa(null,new bue(s.reason,t.syntax,n,s),s.iterations):pa(s.match,null,s.iterations))}let oT=class{constructor(t,n,r){if(this.cssWideKeywords=A_,this.syntax=n,this.generic=!1,this.units={...UE},this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=r||Dhe(t),t){if(t.cssWideKeywords&&(this.cssWideKeywords=t.cssWideKeywords),t.units)for(const i of Object.keys(UE))Array.isArray(t.units[i])&&(this.units[i]=t.units[i]);if(t.types)for(const[i,s]of Object.entries(t.types))this.addType_(i,s);if(t.generic){this.generic=!0;for(const[i,s]of Object.entries(Bue(this.units)))this.addType_(i,s)}if(t.atrules)for(const[i,s]of Object.entries(t.atrules))this.addAtrule_(i,s);if(t.properties)for(const[i,s]of Object.entries(t.properties))this.addProperty_(i,s)}this.cssWideKeywordsSyntax=Rp(this.cssWideKeywords.join(" |  "))}checkStructure(t){function n(s,a){i.push({node:s,message:a})}const r=this.structure,i=[];return this.syntax.walk(t,function(s){r.hasOwnProperty(s.type)?r[s.type].check(s,n):n(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(t,n,r,i=null){const s={type:n,name:r},a={type:n,name:r,parent:i,serializable:typeof t=="string"||t&&typeof t.type=="string",syntax:null,match:null,matchRef:null};return typeof t=="function"?a.match=Rp(t,s):(typeof t=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:GR(t)}),a.syntax}}):a.syntax=t,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:Rp(a.syntax,s)}),a.match}}),n==="Property"&&Object.defineProperty(a,"matchRef",{get(){const o=a.syntax,u=Bhe(o)?Rp({...o,terms:[o.terms[0].term]},s):null;return Object.defineProperty(a,"matchRef",{value:u}),u}})),a}addAtrule_(t,n){n&&(this.atrules[t]={type:"Atrule",name:t,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",t):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((r,i)=>(r[i]=this.createDescriptor(n.descriptors[i],"AtruleDescriptor",i,t),r),Object.create(null)):null})}addProperty_(t,n){n&&(this.properties[t]=this.createDescriptor(n,"Property",t))}addType_(t,n){n&&(this.types[t]=this.createDescriptor(n,"Type",t))}checkAtruleName(t){if(!this.getAtrule(t))return new Uh("Unknown at-rule","@"+t)}checkAtrulePrelude(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t);if(!i.prelude&&n)return new SyntaxError("At-rule `@"+t+"` should not contain a prelude");if(i.prelude&&!n&&!Oc(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+t+"` should contain a prelude")}checkAtruleDescriptorName(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t),s=Zy(n);if(!i.descriptors)return new SyntaxError("At-rule `@"+t+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new Uh("Unknown at-rule descriptor",n)}checkPropertyName(t){if(!this.getProperty(t))return new Uh("Unknown property",t)}matchAtrulePrelude(t,n){const r=this.checkAtrulePrelude(t,n);if(r)return pa(null,r);const i=this.getAtrule(t);return i.prelude?Oc(this,i.prelude,n||"",!1):pa(null,null)}matchAtruleDescriptor(t,n,r){const i=this.checkAtruleDescriptorName(t,n);if(i)return pa(null,i);const s=this.getAtrule(t),a=Zy(n);return Oc(this,s.descriptors[a.name]||s.descriptors[a.basename],r,!1)}matchDeclaration(t){return t.type!=="Declaration"?pa(null,new Error("Not a Declaration node")):this.matchProperty(t.property,t.value)}matchProperty(t,n){if(BE(t).custom)return pa(null,new Error("Lexer matching doesn't applicable for custom properties"));const r=this.checkPropertyName(t);return r?pa(null,r):Oc(this,this.getProperty(t),n,!0)}matchType(t,n){const r=this.getType(t);return r?Oc(this,r,n,!1):pa(null,new Uh("Unknown type",t))}match(t,n){return typeof t!="string"&&(!t||!t.type)?pa(null,new Uh("Bad syntax")):((typeof t=="string"||!t.match)&&(t=this.createDescriptor(t,"Type","anonymous")),Oc(this,t,n,!1))}findValueFragments(t,n,r,i){return sT(this,n,this.matchProperty(t,n),r,i)}findDeclarationValueFragments(t,n,r){return sT(this,t.value,this.matchDeclaration(t),n,r)}findAllFragments(t,n,r){const i=[];return this.syntax.walk(t,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,n,r))}}),i}getAtrule(t,n=!0){const r=Zy(t);return(r.vendor&&n?this.atrules[r.name]||this.atrules[r.basename]:this.atrules[r.name])||null}getAtrulePrelude(t,n=!0){const r=this.getAtrule(t,n);return r&&r.prelude||null}getAtruleDescriptor(t,n){return this.atrules.hasOwnProperty(t)&&this.atrules.declarators&&this.atrules[t].declarators[n]||null}getProperty(t,n=!0){const r=BE(t);return(r.vendor&&n?this.properties[r.name]||this.properties[r.basename]:this.properties[r.name])||null}getType(t){return hasOwnProperty.call(this.types,t)?this.types[t]:null}validate(){function t(u,h){return h?`<${u}>`:`<'${u}'>`}function n(u,h,d,p){if(d.has(h))return d.get(h);d.set(h,!1),p.syntax!==null&&bhe(p.syntax,function(m){if(m.type!=="Type"&&m.type!=="Property")return;const g=m.type==="Type"?u.types:u.properties,v=m.type==="Type"?i:s;hasOwnProperty.call(g,m.name)?n(u,m.name,v,g[m.name])&&(r.push(`${t(h,d===i)} used broken syntax definition ${t(m.name,m.type==="Type")}`),d.set(h,!0)):(r.push(`${t(h,d===i)} used missed syntax definition ${t(m.name,m.type==="Type")}`),d.set(h,!0))},this)}const r=[];let i=new Map,s=new Map;for(const u in this.types)n(this,u,i,this.types[u]);for(const u in this.properties)n(this,u,s,this.properties[u]);const a=[...i.keys()].filter(u=>i.get(u)),o=[...s.keys()].filter(u=>s.get(u));return a.length||o.length?{errors:r,types:a,properties:o}:null}dump(t,n){return{generic:this.generic,cssWideKeywords:this.cssWideKeywords,units:this.units,types:Ox(this.types,!n,t),properties:Ox(this.properties,!n,t),atrules:zhe(this.atrules,!n,t)}}toString(){return JSON.stringify(this.dump())}};function rb(e,t){return typeof t=="string"&&/^\s*\|/.test(t)?typeof e=="string"?e+t:t.replace(/^\s*\|\s*/,""):t||null}function lT(e,t){const n=Object.create(null);for(const[r,i]of Object.entries(e))if(i){n[r]={};for(const s of Object.keys(i))t.includes(s)&&(n[r][s]=i[s])}return n}function Rx(e,t){const n={...e};for(const[r,i]of Object.entries(t))switch(r){case"generic":n[r]=!!i;break;case"cssWideKeywords":n[r]=e[r]?[...e[r],...i]:i||[];break;case"units":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]=Array.isArray(a)?a:[];break;case"atrules":n[r]={...e[r]};for(const[s,a]of Object.entries(i)){const o=n[r][s]||{},u=n[r][s]={prelude:o.prelude||null,descriptors:{...o.descriptors}};if(a){u.prelude=a.prelude?rb(u.prelude,a.prelude):u.prelude||null;for(const[h,d]of Object.entries(a.descriptors||{}))u.descriptors[h]=d?rb(u.descriptors[h],d):null;Object.keys(u.descriptors).length||(u.descriptors=null)}}break;case"types":case"properties":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]=rb(n[r][s],a);break;case"scope":case"features":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]={...n[r][s],...a};break;case"parseContext":n[r]={...e[r],...i};break;case"atrule":case"pseudo":n[r]={...e[r],...lT(i,["parse"])};break;case"node":n[r]={...e[r],...lT(i,["name","structure","parse","generate","walkContext"])};break}return n}function JR(e){const t=Xce(e),n=due(e),r=lue(e),{fromPlainObject:i,toPlainObject:s}=cue(n),a={lexer:null,createLexer:o=>new oT(o,a,a.lexer.structure),tokenize:y0,parse:t,generate:r,walk:n,find:n.find,findLast:n.findLast,findAll:n.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const u=Rx({},e);return JR(typeof o=="function"?o(u):Rx(u,o))}};return a.lexer=new oT({generic:e.generic,cssWideKeywords:e.cssWideKeywords,units:e.units,types:e.types,atrules:e.atrules,properties:e.properties,node:e.node},a),a}const Uhe=e=>JR(Rx({},e)),Hhe={generic:!0,cssWideKeywords:["initial","inherit","unset","revert","revert-layer"],units:{angle:["deg","grad","rad","turn"],decibel:["db"],flex:["fr"],frequency:["hz","khz"],length:["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],resolution:["dpi","dpcm","dppx","x"],semitones:["st"],time:["s","ms"]},types:{"abs()":"abs( <calc-sum> )","absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","acos()":"acos( <calc-sum> )","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>","asin()":"asin( <calc-sum> )","atan()":"atan( <calc-sum> )","atan2()":"atan2( <calc-sum> , <calc-sum> )",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?",axis:"block|inline|x|y","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<xywh()>|<rect()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )","calc-constant":"e|pi|infinity|-infinity|NaN","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<color-base>|currentColor|<system-color>|<device-cmyk()>|<light-dark()>|<-non-standard-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>","color-interpolation-method":"in [<rectangular-color-space>|<polar-color-space> <hue-interpolation-method>?|<custom-color-space>]",combinator:"'>'|'+'|'~'|['|' '|']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<complex-selector-unit> [<combinator>? <complex-selector-unit>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )","cos()":"cos( <calc-sum> )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","exp()":"exp( <calc-sum> )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value>? )]|[( <any-value>? )]","generic-family":"<generic-script-specific>|<generic-complete>|<generic-incomplete>|<-non-standard-generic-family>","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hue-interpolation-method":"[shorter|longer|increasing|decreasing] hue","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )","hypot()":"hypot( <calc-sum># )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length-percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>|<timeline-range-name> <percentage>","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","light-dark()":"light-dark( <color> , <color> )","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [[<angle>|to <side-or-corner>]||<color-interpolation-method>]? , <color-stop-list> )","log()":"log( <calc-sum> , <calc-sum>? )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )","mod()":"mod( <calc-sum> , <calc-sum> )","name-repeat":"repeat( [<integer [1,]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( [<length [0,]>|none] )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )","polar-color-space":"hsl|hwb|lch|oklch",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pow()":"pow( <calc-sum> , <calc-sum> )","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>|<legacy-pseudo-element-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )",ratio:"<number [0,]> [/ <number [0,]>]?","ray()":"ray( <angle>&&<ray-size>?&&contain?&&[at <position>]? )","ray-size":"closest-side|closest-corner|farthest-side|farthest-corner|sides","rectangular-color-space":"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|lab|oklab|xyz|xyz-d50|xyz-d65","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","rem()":"rem( <calc-sum> , <calc-sum> )","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","reversed-counter-name":"reversed( <counter-name> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","round()":"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )","rounding-strategy":"nearest|up|down|to-zero","saturate()":"saturate( <number-percentage> )","scale()":"scale( [<number>|<percentage>]#{1,2} )","scale3d()":"scale3d( [<number>|<percentage>]#{3} )","scaleX()":"scaleX( [<number>|<percentage>] )","scaleY()":"scaleY( [<number>|<percentage>] )","scaleZ()":"scaleZ( [<number>|<percentage>] )","scroll()":"scroll( [<axis>||<scroller>]? )",scroller:"root|nearest|self","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","sign()":"sign( <calc-sum> )","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","sin()":"sin( <calc-sum> )","single-animation":"<'animation-duration'>||<easing-function>||<'animation-delay'>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]||<single-animation-timeline>","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<dashed-ident>|<scroll()>|<view()>","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>||<transition-behavior-value>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","sqrt()":"sqrt( <calc-sum> )","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>","system-color":"AccentColor|AccentColorText|ActiveText|ButtonBorder|ButtonFace|ButtonText|Canvas|CanvasText|Field|FieldText|GrayText|Highlight|HighlightText|LinkText|Mark|MarkText|SelectedItem|SelectedItemText|VisitedText","tan()":"tan( <calc-sum> )",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-range-name":"cover|contain|entry|exit|entry-crossing|exit-crossing","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","transition-behavior-value":"normal|allow-discrete","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","view()":"view( [<axis>||<'view-timeline-inset'>]? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"overlay|-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-size":"intrinsic|min-intrinsic|-webkit-fill-available|-webkit-fit-content|-webkit-min-content|-webkit-max-content|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","absolute-color-base":"<hex-color>|<absolute-color-function>|<named-color>|transparent","absolute-color-function":"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>",age:"child|young|old","anchor-name":"<dashed-ident>","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text",bottom:"<length>|auto","container-name":"<custom-ident>","container-condition":"not <query-in-parens>|<query-in-parens> [[and <query-in-parens>]*|[or <query-in-parens>]*]","coord-box":"content-box|padding-box|border-box|fill-box|stroke-box|view-box","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral","generic-script-specific":"generic( kai )|generic( fangsong )|generic( nastaliq )","generic-complete":"serif|sans-serif|system-ui|cursive|fantasy|math|monospace","generic-incomplete":"ui-serif|ui-sans-serif|ui-monospace|ui-rounded","-non-standard-generic-family":"-apple-system|BlinkMacSystemFont",left:"<length>|auto","color-base":"<hex-color>|<color-function>|<named-color>|<color-mix()>|transparent","color-function":"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>","device-cmyk()":"<legacy-device-cmyk-syntax>|<modern-device-cmyk-syntax>","legacy-device-cmyk-syntax":"device-cmyk( <number>#{4} )","modern-device-cmyk-syntax":"device-cmyk( <cmyk-component>{4} [/ [<alpha-value>|none]]? )","cmyk-component":"<number>|<percentage>|none","color-mix()":"color-mix( <color-interpolation-method> , [<color>&&<percentage [0,100]>?]#{2} )","color-space":"<rectangular-color-space>|<polar-color-space>|<custom-color-space>","custom-color-space":"<dashed-ident>",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke","palette-identifier":"<dashed-ident>",right:"<length>|auto","scope-start":"<forgiving-selector-list>","scope-end":"<forgiving-selector-list>","forgiving-selector-list":"<complex-real-selector-list>","forgiving-relative-selector-list":"<relative-real-selector-list>","selector-list":"<complex-selector-list>","complex-real-selector-list":"<complex-real-selector>#","simple-selector-list":"<simple-selector>#","relative-real-selector-list":"<relative-real-selector>#","complex-selector-unit":"[<compound-selector>? <pseudo-compound-selector>*]!","complex-real-selector":"<compound-selector> [<combinator>? <compound-selector>]*","relative-real-selector":"<combinator>? <complex-real-selector>","pseudo-compound-selector":"<pseudo-element-selector> <pseudo-class-selector>*","simple-selector":"<type-selector>|<subclass-selector>","legacy-pseudo-element-selector":"':' [before|after|first-line|first-letter]","single-animation-composition":"replace|add|accumulate","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,]>","color()":"color( <colorspace-params> [/ [<alpha-value>|none]]? )","colorspace-params":"[<predefined-rgb-params>|<xyz-params>]","predefined-rgb-params":"<predefined-rgb> [<number>|<percentage>|none]{3}","predefined-rgb":"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020","xyz-params":"<xyz-space> [<number>|<percentage>|none]{3}","xyz-space":"xyz|xyz-d50|xyz-d65","oklab()":"oklab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","oklch()":"oklch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","offset-path":"<ray()>|<url>|<basic-shape>","rect()":"rect( [<length-percentage>|auto]{4} [round <'border-radius'>]? )","xywh()":"xywh( <length-percentage>{2} <length-percentage [0,]>{2} [round <'border-radius'>]? )","query-in-parens":"( <container-condition> )|( <size-feature> )|style( <style-query> )|<general-enclosed>","size-feature":"<mf-plain>|<mf-boolean>|<mf-range>","style-feature":"<declaration>","style-query":"<style-condition>|<style-feature>","style-condition":"not <style-in-parens>|<style-in-parens> [[and <style-in-parens>]*|[or <style-in-parens>]*]","style-in-parens":"( <style-condition> )|( <style-feature> )|<general-enclosed>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box","inset-area":"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]","position-area":"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|center|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|center|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]","anchor()":"anchor( <anchor-element>?&&<anchor-side> , <length-percentage>? )","anchor-side":"inside|outside|top|left|right|bottom|start|end|self-start|self-end|<percentage>|center","anchor-size()":"anchor-size( [<anchor-element>||<anchor-size>]? , <length-percentage>? )","anchor-size":"width|height|block|inline|self-block|self-inline","anchor-element":"<dashed-ident>","try-size":"most-width|most-height|most-block-size|most-inline-size","try-tactic":"flip-block||flip-inline||flip-start","font-variant-css2":"normal|small-caps","font-width-css3":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded","system-family-name":"caption|icon|menu|message-box|small-caption|status-bar"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer","anchor-name":"none|<dashed-ident>#","anchor-scope":"none|all|<dashed-ident>#",animation:"<single-animation>#","animation-composition":"<single-animation-composition>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-range":"[<'animation-range-start'> <'animation-range-end'>?]#","animation-range-end":"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#","animation-range-start":"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto||<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end",caret:"<'caret-color'>||<'caret-shape'>","caret-color":"auto|<color>","caret-shape":"auto|bar|block|underscore",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none","clip-rule":"nonzero|evenodd",color:"<color>","color-interpolation-filters":"auto|sRGB|linearRGB","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[[size||inline-size]||layout||style||paint]","contain-intrinsic-size":"[auto? [none|<length>]]{1,2}","contain-intrinsic-block-size":"auto? [none|<length>]","contain-intrinsic-height":"auto? [none|<length>]","contain-intrinsic-inline-size":"auto? [none|<length>]","contain-intrinsic-width":"auto? [none|<length>]",container:"<'container-name'> [/ <'container-type'>]?","container-name":"none|<custom-ident>+","container-type":"normal||[size|inline-size]",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",d:"none|path( <string> )",cx:"<length>|<percentage>",cy:"<length>|<percentage>",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge","empty-cells":"show|hide","field-sizing":"content|fixed",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css2>||<'font-weight'>||<font-width-css3>]? <'font-size'> [/ <'line-height'>]? <'font-family'>#]|<system-family-name>|<-non-standard-font>","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-palette":"normal|light|dark|<palette-identifier>","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps||position]","font-synthesis-position":"auto|none","font-synthesis-small-caps":"auto|none","font-synthesis-style":"auto|none","font-synthesis-weight":"auto|none","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-emoji":"normal|text|emoji|unicode","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none|preserve-parent-color",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","hyphenate-character":"auto|<string>","hyphenate-limit-chars":"[auto|<integer>]{1,3}",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>","interpolate-size":"numeric-only|allow-keywords",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-depth":"auto-add|add( <integer> )|<integer>","math-shift":"normal|compact","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|<offset-path>||<coord-box>","offset-position":"normal|auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-width'>||<'outline-style'>||<'outline-color'>]","outline-color":"auto|<color>","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto",overlay:"none|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>",page:"auto|<custom-ident>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky","position-anchor":"auto|<anchor-name>","position-area":"none|<position-area>","position-try":"<'position-try-order'>? <'position-try-fallbacks'>","position-try-fallbacks":"none|[[<dashed-ident>||<try-tactic>]|<'position-area'>]#","position-try-order":"normal|<try-size>","position-visibility":"always|[anchors-valid||anchors-visible||no-overflow]","print-color-adjust":"economy|exact",quotes:"none|auto|[<string> <string>]+",r:"<length>|<percentage>",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",rx:"<length>|<percentage>",ry:"<length>|<percentage>",scale:"none|[<number>|<percentage>]{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","scroll-timeline":"[<'scroll-timeline-name'>||<'scroll-timeline-axis'>]#","scroll-timeline-axis":"[block|inline|x|y]#","scroll-timeline-name":"[none|<dashed-ident>]#","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<'opacity'>","stroke-width":"<svg-length>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-anchor":"start|middle|end","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"auto|[over|under]&&[right|left]?","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-spacing-trim":"space-all|normal|space-first|trim-start|trim-both|trim-all|auto","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]","text-wrap":"<'text-wrap-mode'>||<'text-wrap-style'>","text-wrap-mode":"auto|wrap|nowrap","text-wrap-style":"auto|balance|stable|pretty","timeline-scope":"none|<dashed-ident>#",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-behavior":"<transition-behavior-value>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vector-effect":"none|non-scaling-stroke|non-scaling-size|non-rotation|fixed-position","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>","view-timeline":"[<'view-timeline-name'> <'view-timeline-axis'>?]#","view-timeline-axis":"[block|inline|x|y]#","view-timeline-inset":"[[auto|<length-percentage>]{1,2}]#","view-timeline-name":"none|<dashed-ident>#","view-transition-name":"none|<custom-ident>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces|[<'white-space-collapse'>||<'text-wrap'>||<'white-space-trim'>]","white-space-collapse":"collapse|discard|preserve|preserve-breaks|preserve-spaces|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word|auto-phrase","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>",x:"<length>|<percentage>",y:"<length>|<percentage>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|never|always","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]","white-space-trim":"none|discard-before||discard-after||discard-inner"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-palette-values":{prelude:"<dashed-ident>",descriptors:{"base-palette":"light|dark|<integer [0,]>","font-family":"<family-name>#","override-colors":"[<integer [0,]> <absolute-color-base>]#"}},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]","page-orientation":"upright|rotate-left|rotate-right",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},"position-try":{prelude:"<dashed-ident>",descriptors:{top:"<'top'>",left:"<'left'>",bottom:"<'bottom'>",right:"<'right'>","inset-block-start":"<'inset-block-start'>","inset-block-end":"<'inset-block-end'>","inset-inline-start":"<'inset-inline-start'>","inset-inline-end":"<'inset-inline-end'>","inset-block":"<'inset-block'>","inset-inline":"<'inset-inline'>",inset:"<'inset'>","margin-top":"<'margin-top'>","margin-left":"<'margin-left'>","margin-bottom":"<'margin-bottom'>","margin-right":"<'margin-right'>","margin-block-start":"<'margin-block-start'>","margin-block-end":"<'margin-block-end'>","margin-inline-start":"<'margin-inline-start'>","margin-inline-end":"<'margin-inline-end'>",margin:"<'margin'>","margin-block":"<'margin-block'>","margin-inline":"<'margin-inline'>",width:"<'width'>",height:"<'height'>","min-width":"<'min-width'>","min-height":"<'min-height'>","max-width":"<'max-width'>","max-height":"<'max-height'>","block-size":"<'block-size'>","inline-size":"<'inline-size'>","min-block-size":"<'min-block-size'>","min-inline-size":"<'min-inline-size'>","max-block-size":"<'max-block-size'>","max-inline-size":"<'max-inline-size'>","align-self":"<'align-self'>|anchor-center","justify-self":"<'justify-self'>|anchor-center"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<declaration-value>?"}},scope:{prelude:"[( <scope-start> )]? [to ( <scope-end> )]?",descriptors:null},"starting-style":{prelude:null,descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},container:{prelude:"[<container-name>]? <container-condition>",descriptors:null},nest:{prelude:"<complex-selector-list>",descriptors:null}}},Xa=43,ks=45,hm=110,zl=!0,Whe=!1;function dm(e,t){let n=this.tokenStart+e;const r=this.charCodeAt(n);for((r===Xa||r===ks)&&(t&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)Ei(this.charCodeAt(n))||this.error("Integer is expected",n)}function _u(e){return dm.call(this,0,e)}function zo(e,t){if(!this.cmpChar(this.tokenStart+e,t)){let n="";switch(t){case hm:n="N is expected";break;case ks:n="HyphenMinus is expected";break}this.error(n,this.tokenStart+e)}}function ib(){let e=0,t=0,n=this.tokenType;for(;n===Ur||n===ji;)n=this.lookupType(++e);if(n!==dn)if(this.isDelim(Xa,e)||this.isDelim(ks,e)){t=this.isDelim(Xa,e)?Xa:ks;do n=this.lookupType(++e);while(n===Ur||n===ji);n!==dn&&(this.skip(e),_u.call(this,zl))}else return null;return e>0&&this.skip(e),t===0&&(n=this.charCodeAt(this.tokenStart),n!==Xa&&n!==ks&&this.error("Number sign is expected")),_u.call(this,t!==0),t===ks?"-"+this.consume(dn):this.consume(dn)}const Vhe="AnPlusB",Ghe={a:[String,null],b:[String,null]};function eM(){const e=this.tokenStart;let t=null,n=null;if(this.tokenType===dn)_u.call(this,Whe),n=this.consume(dn);else if(this.tokenType===Rt&&this.cmpChar(this.tokenStart,ks))switch(t="-1",zo.call(this,1,hm),this.tokenEnd-this.tokenStart){case 2:this.next(),n=ib.call(this);break;case 3:zo.call(this,2,ks),this.next(),this.skipSC(),_u.call(this,zl),n="-"+this.consume(dn);break;default:zo.call(this,2,ks),dm.call(this,3,zl),this.next(),n=this.substrToCursor(e+2)}else if(this.tokenType===Rt||this.isDelim(Xa)&&this.lookupType(1)===Rt){let r=0;switch(t="1",this.isDelim(Xa)&&(r=1,this.next()),zo.call(this,0,hm),this.tokenEnd-this.tokenStart){case 1:this.next(),n=ib.call(this);break;case 2:zo.call(this,1,ks),this.next(),this.skipSC(),_u.call(this,zl),n="-"+this.consume(dn);break;default:zo.call(this,1,ks),dm.call(this,2,zl),this.next(),n=this.substrToCursor(e+r+1)}}else if(this.tokenType===Nn){const r=this.charCodeAt(this.tokenStart),i=r===Xa||r===ks;let s=this.tokenStart+i;for(;s<this.tokenEnd&&Ei(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),zo.call(this,s-this.tokenStart,hm),t=this.substring(e,s),s+1===this.tokenEnd?(this.next(),n=ib.call(this)):(zo.call(this,s-this.tokenStart+1,ks),s+2===this.tokenEnd?(this.next(),this.skipSC(),_u.call(this,zl),n="-"+this.consume(dn)):(dm.call(this,s-this.tokenStart+2,zl),this.next(),n=this.substrToCursor(s+1)))}else this.error();return t!==null&&t.charCodeAt(0)===Xa&&(t=t.substr(1)),n!==null&&n.charCodeAt(0)===Xa&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(e,this.tokenStart),a:t,b:n}}function qhe(e){if(e.a){const t=e.a==="+1"&&"n"||e.a==="1"&&"n"||e.a==="-1"&&"-n"||e.a+"n";if(e.b){const n=e.b[0]==="-"||e.b[0]==="+"?e.b:"+"+e.b;this.tokenize(t+n)}else this.tokenize(t)}else this.tokenize(e.b)}const Yhe=Object.freeze(Object.defineProperty({__proto__:null,generate:qhe,name:Vhe,parse:eM,structure:Ghe},Symbol.toStringTag,{value:"Module"}));function cT(){return this.Raw(this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function Xhe(){for(let e=1,t;t=this.lookupType(e);e++){if(t===Zs)return!0;if(t===Pi||t===ii)return!1}return!1}const Khe="Atrule",Zhe="atrule",Qhe={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function tM(e=!1){const t=this.tokenStart;let n,r,i=null,s=null;switch(this.eat(ii),n=this.substrToCursor(t+1),r=n.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==Pi&&this.tokenType!==Vi&&(this.parseAtrulePrelude?i=this.parseWithFallback(this.AtrulePrelude.bind(this,n,e),cT):i=cT.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case Vi:this.next();break;case Pi:hasOwnProperty.call(this.atrule,r)&&typeof this.atrule[r].block=="function"?s=this.atrule[r].block.call(this,e):s=this.Block(Xhe.call(this));break}return{type:"Atrule",loc:this.getLocation(t,this.tokenStart),name:n,prelude:i,block:s}}function Jhe(e){this.token(ii,"@"+e.name),e.prelude!==null&&this.node(e.prelude),e.block?this.node(e.block):this.token(Vi,";")}const ede=Object.freeze(Object.defineProperty({__proto__:null,generate:Jhe,name:Khe,parse:tM,structure:Qhe,walkContext:Zhe},Symbol.toStringTag,{value:"Module"})),tde="AtrulePrelude",nde="atrulePrelude",rde={children:[[]]};function nM(e){let t=null;return e!==null&&(e=e.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,e)&&typeof this.atrule[e].prelude=="function"?t=this.atrule[e].prelude.call(this):t=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Pi&&this.tokenType!==Vi&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(t),children:t}}function ide(e){this.children(e)}const sde=Object.freeze(Object.defineProperty({__proto__:null,generate:ide,name:tde,parse:nM,structure:rde,walkContext:nde},Symbol.toStringTag,{value:"Module"})),ade=36,rM=42,fm=61,ode=94,Mx=124,lde=126;function cde(){this.eof&&this.error("Unexpected end of input");const e=this.tokenStart;let t=!1;return this.isDelim(rM)?(t=!0,this.next()):this.isDelim(Mx)||this.eat(Rt),this.isDelim(Mx)?this.charCodeAt(this.tokenStart+1)!==fm?(this.next(),this.eat(Rt)):t&&this.error("Identifier is expected",this.tokenEnd):t&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function ude(){const e=this.tokenStart,t=this.charCodeAt(e);return t!==fm&&t!==lde&&t!==ode&&t!==ade&&t!==rM&&t!==Mx&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),t!==fm&&(this.isDelim(fm)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(e)}const hde="AttributeSelector",dde={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function iM(){const e=this.tokenStart;let t,n=null,r=null,i=null;return this.eat(ea),this.skipSC(),t=cde.call(this),this.skipSC(),this.tokenType!==Aa&&(this.tokenType!==Rt&&(n=ude.call(this),this.skipSC(),r=this.tokenType===La?this.String():this.Identifier(),this.skipSC()),this.tokenType===Rt&&(i=this.consume(Rt),this.skipSC())),this.eat(Aa),{type:"AttributeSelector",loc:this.getLocation(e,this.tokenStart),name:t,matcher:n,value:r,flags:i}}function fde(e){this.token(In,"["),this.node(e.name),e.matcher!==null&&(this.tokenize(e.matcher),this.node(e.value)),e.flags!==null&&this.token(Rt,e.flags),this.token(In,"]")}const pde=Object.freeze(Object.defineProperty({__proto__:null,generate:fde,name:hde,parse:iM,structure:dde},Symbol.toStringTag,{value:"Module"})),mde=38;function sM(){return this.Raw(null,!0)}function uT(){return this.parseWithFallback(this.Rule,sM)}function hT(){return this.Raw(this.consumeUntilSemicolonIncluded,!0)}function gde(){if(this.tokenType===Vi)return hT.call(this,this.tokenIndex);const e=this.parseWithFallback(this.Declaration,hT);return this.tokenType===Vi&&this.next(),e}const yde="Block",bde="block",vde={children:[["Atrule","Rule","Declaration"]]};function aM(e){const t=e?gde:uT,n=this.tokenStart;let r=this.createList();this.eat(Pi);e:for(;!this.eof;)switch(this.tokenType){case Zs:break e;case Ur:case ji:this.next();break;case ii:r.push(this.parseWithFallback(this.Atrule.bind(this,e),sM));break;default:e&&this.isDelim(mde)?r.push(uT.call(this)):r.push(t.call(this))}return this.eof||this.eat(Zs),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:r}}function xde(e){this.token(Pi,"{"),this.children(e,t=>{t.type==="Declaration"&&this.token(Vi,";")}),this.token(Zs,"}")}const wde=Object.freeze(Object.defineProperty({__proto__:null,generate:xde,name:yde,parse:aM,structure:vde,walkContext:bde},Symbol.toStringTag,{value:"Module"})),_de="Brackets",kde={children:[[]]};function oM(e,t){const n=this.tokenStart;let r=null;return this.eat(ea),r=e.call(this,t),this.eof||this.eat(Aa),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:r}}function Sde(e){this.token(In,"["),this.children(e),this.token(In,"]")}const Cde=Object.freeze(Object.defineProperty({__proto__:null,generate:Sde,name:_de,parse:oM,structure:kde},Symbol.toStringTag,{value:"Module"})),Ede="CDC",Tde=[];function lM(){const e=this.tokenStart;return this.eat(as),{type:"CDC",loc:this.getLocation(e,this.tokenStart)}}function jde(){this.token(as,"-->")}const Ade=Object.freeze(Object.defineProperty({__proto__:null,generate:jde,name:Ede,parse:lM,structure:Tde},Symbol.toStringTag,{value:"Module"})),Pde="CDO",Nde=[];function cM(){const e=this.tokenStart;return this.eat(Rf),{type:"CDO",loc:this.getLocation(e,this.tokenStart)}}function Ode(){this.token(Rf,"<!--")}const Rde=Object.freeze(Object.defineProperty({__proto__:null,generate:Ode,name:Pde,parse:cM,structure:Nde},Symbol.toStringTag,{value:"Module"})),Mde=46,Lde="ClassSelector",Ide={name:String};function uM(){return this.eatDelim(Mde),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Rt)}}function $de(e){this.token(In,"."),this.token(Rt,e.name)}const Dde=Object.freeze(Object.defineProperty({__proto__:null,generate:$de,name:Lde,parse:uM,structure:Ide},Symbol.toStringTag,{value:"Module"})),zde=43,dT=47,Fde=62,Bde=126,Ude="Combinator",Hde={name:String};function hM(){const e=this.tokenStart;let t;switch(this.tokenType){case Ur:t=" ";break;case In:switch(this.charCodeAt(this.tokenStart)){case Fde:case zde:case Bde:this.next();break;case dT:this.next(),this.eatIdent("deep"),this.eatDelim(dT);break;default:this.error("Combinator is expected")}t=this.substrToCursor(e);break}return{type:"Combinator",loc:this.getLocation(e,this.tokenStart),name:t}}function Wde(e){this.tokenize(e.name)}const Vde=Object.freeze(Object.defineProperty({__proto__:null,generate:Wde,name:Ude,parse:hM,structure:Hde},Symbol.toStringTag,{value:"Module"})),Gde=42,qde=47,Yde="Comment",Xde={value:String};function dM(){const e=this.tokenStart;let t=this.tokenEnd;return this.eat(ji),t-e+2>=2&&this.charCodeAt(t-2)===Gde&&this.charCodeAt(t-1)===qde&&(t-=2),{type:"Comment",loc:this.getLocation(e,this.tokenStart),value:this.substring(e+2,t)}}function Kde(e){this.token(ji,"/*"+e.value+"*/")}const Zde=Object.freeze(Object.defineProperty({__proto__:null,generate:Kde,name:Yde,parse:dM,structure:Xde},Symbol.toStringTag,{value:"Module"})),Qde=new Set([Wi,hn,Ko]),Jde="Condition",efe={kind:String,children:[["Identifier","Feature","FeatureFunction","FeatureRange","SupportsDeclaration"]]};function fT(e){return this.lookupTypeNonSC(1)===Rt&&Qde.has(this.lookupTypeNonSC(2))?this.Feature(e):this.FeatureRange(e)}const tfe={media:fT,container:fT,supports(){return this.SupportsDeclaration()}};function fM(e="media"){const t=this.createList();e:for(;!this.eof;)switch(this.tokenType){case ji:case Ur:this.next();continue;case Rt:t.push(this.Identifier());break;case Qn:{let n=this.parseWithFallback(()=>tfe[e].call(this,e),()=>null);n||(n=this.parseWithFallback(()=>{this.eat(Qn);const r=this.Condition(e);return this.eat(hn),r},()=>this.GeneralEnclosed(e))),t.push(n);break}case kn:{let n=this.parseWithFallback(()=>this.FeatureFunction(e),()=>null);n||(n=this.GeneralEnclosed(e)),t.push(n);break}default:break e}return t.isEmpty&&this.error("Condition is expected"),{type:"Condition",loc:this.getLocationFromList(t),kind:e,children:t}}function nfe(e){e.children.forEach(t=>{t.type==="Condition"?(this.token(Qn,"("),this.node(t),this.token(hn,")")):this.node(t)})}const rfe=Object.freeze(Object.defineProperty({__proto__:null,generate:nfe,name:Jde,parse:fM,structure:efe},Symbol.toStringTag,{value:"Module"})),pM=33,ife=35,sfe=36,afe=38,ofe=42,lfe=43,pT=47;function cfe(){return this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!0)}function ufe(){return this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!1)}function hfe(){const e=this.tokenIndex,t=this.Value();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==Vi&&this.isDelim(pM)===!1&&this.isBalanceEdge(e)===!1&&this.error(),t}const dfe="Declaration",ffe="declaration",pfe={important:[Boolean,String],property:String,value:["Value","Raw"]};function mM(){const e=this.tokenStart,t=this.tokenIndex,n=gfe.call(this),r=j_(n),i=r?this.parseCustomProperty:this.parseValue,s=r?ufe:cfe;let a=!1,o;this.skipSC(),this.eat(Wi);const u=this.tokenIndex;if(r||this.skipSC(),i?o=this.parseWithFallback(hfe,s):o=s.call(this,this.tokenIndex),r&&o.type==="Value"&&o.children.isEmpty){for(let h=u-this.tokenIndex;h<=0;h++)if(this.lookupType(h)===Ur){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(pM)&&(a=yfe.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==Vi&&this.isBalanceEdge(t)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(e,this.tokenStart),important:a,property:n,value:o}}function mfe(e){this.token(Rt,e.property),this.token(Wi,":"),this.node(e.value),e.important&&(this.token(In,"!"),this.token(Rt,e.important===!0?"important":e.important))}function gfe(){const e=this.tokenStart;if(this.tokenType===In)switch(this.charCodeAt(this.tokenStart)){case ofe:case sfe:case lfe:case ife:case afe:this.next();break;case pT:this.next(),this.isDelim(pT)&&this.next();break}return this.tokenType===wr?this.eat(wr):this.eat(Rt),this.substrToCursor(e)}function yfe(){this.eat(In),this.skipSC();const e=this.consume(Rt);return e==="important"?!0:e}const bfe=Object.freeze(Object.defineProperty({__proto__:null,generate:mfe,name:dfe,parse:mM,structure:pfe,walkContext:ffe},Symbol.toStringTag,{value:"Module"})),vfe=38;function sb(){return this.Raw(this.consumeUntilSemicolonIncluded,!0)}const xfe="DeclarationList",wfe={children:[["Declaration","Atrule","Rule"]]};function gM(){const e=this.createList();for(;!this.eof;)switch(this.tokenType){case Ur:case ji:case Vi:this.next();break;case ii:e.push(this.parseWithFallback(this.Atrule.bind(this,!0),sb));break;default:this.isDelim(vfe)?e.push(this.parseWithFallback(this.Rule,sb)):e.push(this.parseWithFallback(this.Declaration,sb))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}}function _fe(e){this.children(e,t=>{t.type==="Declaration"&&this.token(Vi,";")})}const kfe=Object.freeze(Object.defineProperty({__proto__:null,generate:_fe,name:xfe,parse:gM,structure:wfe},Symbol.toStringTag,{value:"Module"})),Sfe="Dimension",Cfe={value:String,unit:String};function yM(){const e=this.tokenStart,t=this.consumeNumber(Nn);return{type:"Dimension",loc:this.getLocation(e,this.tokenStart),value:t,unit:this.substring(e+t.length,this.tokenStart)}}function Efe(e){this.token(Nn,e.value+e.unit)}const Tfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Efe,name:Sfe,parse:yM,structure:Cfe},Symbol.toStringTag,{value:"Module"})),jfe=47,Afe="Feature",Pfe={kind:String,name:String,value:["Identifier","Number","Dimension","Ratio","Function",null]};function bM(e){const t=this.tokenStart;let n,r=null;if(this.eat(Qn),this.skipSC(),n=this.consume(Rt),this.skipSC(),this.tokenType!==hn){switch(this.eat(Wi),this.skipSC(),this.tokenType){case dn:this.lookupNonWSType(1)===In?r=this.Ratio():r=this.Number();break;case Nn:r=this.Dimension();break;case Rt:r=this.Identifier();break;case kn:r=this.parseWithFallback(()=>{const i=this.Function(this.readSequence,this.scope.Value);return this.skipSC(),this.isDelim(jfe)&&this.error(),i},()=>this.Ratio());break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eof||this.eat(hn),{type:"Feature",loc:this.getLocation(t,this.tokenStart),kind:e,name:n,value:r}}function Nfe(e){this.token(Qn,"("),this.token(Rt,e.name),e.value!==null&&(this.token(Wi,":"),this.node(e.value)),this.token(hn,")")}const Ofe=Object.freeze(Object.defineProperty({__proto__:null,generate:Nfe,name:Afe,parse:bM,structure:Pfe},Symbol.toStringTag,{value:"Module"})),Rfe="FeatureFunction",Mfe={kind:String,feature:String,value:["Declaration","Selector"]};function Lfe(e,t){const r=(this.features[e]||{})[t];return typeof r!="function"&&this.error(`Unknown feature ${t}()`),r}function vM(e="unknown"){const t=this.tokenStart,n=this.consumeFunctionName(),r=Lfe.call(this,e,n.toLowerCase());this.skipSC();const i=this.parseWithFallback(()=>{const s=this.tokenIndex,a=r.call(this);return this.eof===!1&&this.isBalanceEdge(s)===!1&&this.error(),a},()=>this.Raw(null,!1));return this.eof||this.eat(hn),{type:"FeatureFunction",loc:this.getLocation(t,this.tokenStart),kind:e,feature:n,value:i}}function Ife(e){this.token(kn,e.feature+"("),this.node(e.value),this.token(hn,")")}const $fe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ife,name:Rfe,parse:vM,structure:Mfe},Symbol.toStringTag,{value:"Module"})),mT=47,Dfe=60,gT=61,zfe=62,Ffe="FeatureRange",Bfe={kind:String,left:["Identifier","Number","Dimension","Ratio","Function"],leftComparison:String,middle:["Identifier","Number","Dimension","Ratio","Function"],rightComparison:[String,null],right:["Identifier","Number","Dimension","Ratio","Function",null]};function ab(){switch(this.skipSC(),this.tokenType){case dn:return this.isDelim(mT,this.lookupOffsetNonSC(1))?this.Ratio():this.Number();case Nn:return this.Dimension();case Rt:return this.Identifier();case kn:return this.parseWithFallback(()=>{const e=this.Function(this.readSequence,this.scope.Value);return this.skipSC(),this.isDelim(mT)&&this.error(),e},()=>this.Ratio());default:this.error("Number, dimension, ratio or identifier is expected")}}function yT(e){if(this.skipSC(),this.isDelim(Dfe)||this.isDelim(zfe)){const t=this.source[this.tokenStart];return this.next(),this.isDelim(gT)?(this.next(),t+"="):t}if(this.isDelim(gT))return"=";this.error(`Expected ${e?'":", ':""}"<", ">", "=" or ")"`)}function xM(e="unknown"){const t=this.tokenStart;this.skipSC(),this.eat(Qn);const n=ab.call(this),r=yT.call(this,n.type==="Identifier"),i=ab.call(this);let s=null,a=null;return this.lookupNonWSType(0)!==hn&&(s=yT.call(this),a=ab.call(this)),this.skipSC(),this.eat(hn),{type:"FeatureRange",loc:this.getLocation(t,this.tokenStart),kind:e,left:n,leftComparison:r,middle:i,rightComparison:s,right:a}}function Ufe(e){this.token(Qn,"("),this.node(e.left),this.tokenize(e.leftComparison),this.node(e.middle),e.right&&(this.tokenize(e.rightComparison),this.node(e.right)),this.token(hn,")")}const Hfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ufe,name:Ffe,parse:xM,structure:Bfe},Symbol.toStringTag,{value:"Module"})),Wfe="Function",Vfe="function",Gfe={name:String,children:[[]]};function wM(e,t){const n=this.tokenStart,r=this.consumeFunctionName(),i=r.toLowerCase();let s;return s=t.hasOwnProperty(i)?t[i].call(this,t):e.call(this,t),this.eof||this.eat(hn),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:r,children:s}}function qfe(e){this.token(kn,e.name+"("),this.children(e),this.token(hn,")")}const Yfe=Object.freeze(Object.defineProperty({__proto__:null,generate:qfe,name:Wfe,parse:wM,structure:Gfe,walkContext:Vfe},Symbol.toStringTag,{value:"Module"})),Xfe="GeneralEnclosed",Kfe={kind:String,function:[String,null],children:[[]]};function _M(e){const t=this.tokenStart;let n=null;this.tokenType===kn?n=this.consumeFunctionName():this.eat(Qn);const r=this.parseWithFallback(()=>{const i=this.tokenIndex,s=this.readSequence(this.scope.Value);return this.eof===!1&&this.isBalanceEdge(i)===!1&&this.error(),s},()=>this.createSingleNodeList(this.Raw(null,!1)));return this.eof||this.eat(hn),{type:"GeneralEnclosed",loc:this.getLocation(t,this.tokenStart),kind:e,function:n,children:r}}function Zfe(e){e.function?this.token(kn,e.function+"("):this.token(Qn,"("),this.children(e),this.token(hn,")")}const Qfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Zfe,name:Xfe,parse:_M,structure:Kfe},Symbol.toStringTag,{value:"Module"})),Jfe="XXX",epe="Hash",tpe={value:String};function kM(){const e=this.tokenStart;return this.eat(wr),{type:"Hash",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e+1)}}function npe(e){this.token(wr,"#"+e.value)}const rpe=Object.freeze(Object.defineProperty({__proto__:null,generate:npe,name:epe,parse:kM,structure:tpe,xxx:Jfe},Symbol.toStringTag,{value:"Module"})),ipe="Identifier",spe={name:String};function SM(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Rt)}}function ape(e){this.token(Rt,e.name)}const ope=Object.freeze(Object.defineProperty({__proto__:null,generate:ape,name:ipe,parse:SM,structure:spe},Symbol.toStringTag,{value:"Module"})),lpe="IdSelector",cpe={name:String};function CM(){const e=this.tokenStart;return this.eat(wr),{type:"IdSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e+1)}}function upe(e){this.token(In,"#"+e.name)}const hpe=Object.freeze(Object.defineProperty({__proto__:null,generate:upe,name:lpe,parse:CM,structure:cpe},Symbol.toStringTag,{value:"Module"})),dpe=46,fpe="Layer",ppe={name:String};function EM(){let e=this.tokenStart,t=this.consume(Rt);for(;this.isDelim(dpe);)this.eat(In),t+="."+this.consume(Rt);return{type:"Layer",loc:this.getLocation(e,this.tokenStart),name:t}}function mpe(e){this.tokenize(e.name)}const gpe=Object.freeze(Object.defineProperty({__proto__:null,generate:mpe,name:fpe,parse:EM,structure:ppe},Symbol.toStringTag,{value:"Module"})),ype="LayerList",bpe={children:[["Layer"]]};function TM(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.Layer()),this.lookupTypeNonSC(0)===bs);)this.skipSC(),this.next(),this.skipSC();return{type:"LayerList",loc:this.getLocationFromList(e),children:e}}function vpe(e){this.children(e,()=>this.token(bs,","))}const xpe=Object.freeze(Object.defineProperty({__proto__:null,generate:vpe,name:ype,parse:TM,structure:bpe},Symbol.toStringTag,{value:"Module"})),wpe="MediaQuery",_pe={modifier:[String,null],mediaType:[String,null],condition:["Condition",null]};function jM(){const e=this.tokenStart;let t=null,n=null,r=null;if(this.skipSC(),this.tokenType===Rt&&this.lookupTypeNonSC(1)!==Qn){const i=this.consume(Rt),s=i.toLowerCase();switch(s==="not"||s==="only"?(this.skipSC(),t=s,n=this.consume(Rt)):n=i,this.lookupTypeNonSC(0)){case Rt:{this.skipSC(),this.eatIdent("and"),r=this.Condition("media");break}case Pi:case Vi:case bs:case Ko:break;default:this.error("Identifier or parenthesis is expected")}}else switch(this.tokenType){case Rt:case Qn:case kn:{r=this.Condition("media");break}case Pi:case Vi:case Ko:break;default:this.error("Identifier or parenthesis is expected")}return{type:"MediaQuery",loc:this.getLocation(e,this.tokenStart),modifier:t,mediaType:n,condition:r}}function kpe(e){e.mediaType?(e.modifier&&this.token(Rt,e.modifier),this.token(Rt,e.mediaType),e.condition&&(this.token(Rt,"and"),this.node(e.condition))):e.condition&&this.node(e.condition)}const Spe=Object.freeze(Object.defineProperty({__proto__:null,generate:kpe,name:wpe,parse:jM,structure:_pe},Symbol.toStringTag,{value:"Module"})),Cpe="MediaQueryList",Epe={children:[["MediaQuery"]]};function AM(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery()),this.tokenType===bs);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}}function Tpe(e){this.children(e,()=>this.token(bs,","))}const jpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Tpe,name:Cpe,parse:AM,structure:Epe},Symbol.toStringTag,{value:"Module"})),Ape=38,Ppe="NestingSelector",Npe={};function PM(){const e=this.tokenStart;return this.eatDelim(Ape),{type:"NestingSelector",loc:this.getLocation(e,this.tokenStart)}}function Ope(){this.token(In,"&")}const Rpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ope,name:Ppe,parse:PM,structure:Npe},Symbol.toStringTag,{value:"Module"})),Mpe="Nth",Lpe={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function NM(){this.skipSC();const e=this.tokenStart;let t=e,n=null,r;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?r=this.Identifier():r=this.AnPlusB(),t=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),n=this.SelectorList(),t=this.tokenStart),{type:"Nth",loc:this.getLocation(e,t),nth:r,selector:n}}function Ipe(e){this.node(e.nth),e.selector!==null&&(this.token(Rt,"of"),this.node(e.selector))}const $pe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ipe,name:Mpe,parse:NM,structure:Lpe},Symbol.toStringTag,{value:"Module"})),Dpe="Number",zpe={value:String};function OM(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(dn)}}function Fpe(e){this.token(dn,e.value)}const Bpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Fpe,name:Dpe,parse:OM,structure:zpe},Symbol.toStringTag,{value:"Module"})),Upe="Operator",Hpe={value:String};function RM(){const e=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function Wpe(e){this.tokenize(e.value)}const Vpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Wpe,name:Upe,parse:RM,structure:Hpe},Symbol.toStringTag,{value:"Module"})),Gpe="Parentheses",qpe={children:[[]]};function MM(e,t){const n=this.tokenStart;let r=null;return this.eat(Qn),r=e.call(this,t),this.eof||this.eat(hn),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:r}}function Ype(e){this.token(Qn,"("),this.children(e),this.token(hn,")")}const Xpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ype,name:Gpe,parse:MM,structure:qpe},Symbol.toStringTag,{value:"Module"})),Kpe="Percentage",Zpe={value:String};function LM(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(Dr)}}function Qpe(e){this.token(Dr,e.value+"%")}const Jpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Qpe,name:Kpe,parse:LM,structure:Zpe},Symbol.toStringTag,{value:"Module"})),eme="PseudoClassSelector",tme="function",nme={name:String,children:[["Raw"],null]};function IM(){const e=this.tokenStart;let t=null,n,r;return this.eat(Wi),this.tokenType===kn?(n=this.consumeFunctionName(),r=n.toLowerCase(),this.lookupNonWSType(0)==hn?t=this.createList():hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(null,!1))),this.eat(hn)):n=this.consume(Rt),{type:"PseudoClassSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function rme(e){this.token(Wi,":"),e.children===null?this.token(Rt,e.name):(this.token(kn,e.name+"("),this.children(e),this.token(hn,")"))}const ime=Object.freeze(Object.defineProperty({__proto__:null,generate:rme,name:eme,parse:IM,structure:nme,walkContext:tme},Symbol.toStringTag,{value:"Module"})),sme="PseudoElementSelector",ame="function",ome={name:String,children:[["Raw"],null]};function $M(){const e=this.tokenStart;let t=null,n,r;return this.eat(Wi),this.eat(Wi),this.tokenType===kn?(n=this.consumeFunctionName(),r=n.toLowerCase(),this.lookupNonWSType(0)==hn?t=this.createList():hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(null,!1))),this.eat(hn)):n=this.consume(Rt),{type:"PseudoElementSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function lme(e){this.token(Wi,":"),this.token(Wi,":"),e.children===null?this.token(Rt,e.name):(this.token(kn,e.name+"("),this.children(e),this.token(hn,")"))}const cme=Object.freeze(Object.defineProperty({__proto__:null,generate:lme,name:sme,parse:$M,structure:ome,walkContext:ame},Symbol.toStringTag,{value:"Module"})),bT=47;function vT(){switch(this.skipSC(),this.tokenType){case dn:return this.Number();case kn:return this.Function(this.readSequence,this.scope.Value);default:this.error("Number of function is expected")}}const ume="Ratio",hme={left:["Number","Function"],right:["Number","Function",null]};function DM(){const e=this.tokenStart,t=vT.call(this);let n=null;return this.skipSC(),this.isDelim(bT)&&(this.eatDelim(bT),n=vT.call(this)),{type:"Ratio",loc:this.getLocation(e,this.tokenStart),left:t,right:n}}function dme(e){this.node(e.left),this.token(In,"/"),e.right?this.node(e.right):this.node(dn,1)}const fme=Object.freeze(Object.defineProperty({__proto__:null,generate:dme,name:ume,parse:DM,structure:hme},Symbol.toStringTag,{value:"Module"}));function pme(){return this.tokenIndex>0&&this.lookupType(-1)===Ur?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const mme="Raw",gme={value:String};function zM(e,t){const n=this.getTokenStart(this.tokenIndex);let r;return this.skipUntilBalanced(this.tokenIndex,e||this.consumeUntilBalanceEnd),t&&this.tokenStart>n?r=pme.call(this):r=this.tokenStart,{type:"Raw",loc:this.getLocation(n,r),value:this.substring(n,r)}}function yme(e){this.tokenize(e.value)}const bme=Object.freeze(Object.defineProperty({__proto__:null,generate:yme,name:mme,parse:zM,structure:gme},Symbol.toStringTag,{value:"Module"}));function xT(){return this.Raw(this.consumeUntilLeftCurlyBracket,!0)}function vme(){const e=this.SelectorList();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==Pi&&this.error(),e}const xme="Rule",wme="rule",_me={prelude:["SelectorList","Raw"],block:["Block"]};function FM(){const e=this.tokenIndex,t=this.tokenStart;let n,r;return this.parseRulePrelude?n=this.parseWithFallback(vme,xT):n=xT.call(this,e),r=this.Block(!0),{type:"Rule",loc:this.getLocation(t,this.tokenStart),prelude:n,block:r}}function kme(e){this.node(e.prelude),this.node(e.block)}const Sme=Object.freeze(Object.defineProperty({__proto__:null,generate:kme,name:xme,parse:FM,structure:_me,walkContext:wme},Symbol.toStringTag,{value:"Module"})),Cme="Scope",Eme={root:["SelectorList","Raw",null],limit:["SelectorList","Raw",null]};function BM(){let e=null,t=null;this.skipSC();const n=this.tokenStart;return this.tokenType===Qn&&(this.next(),this.skipSC(),e=this.parseWithFallback(this.SelectorList,()=>this.Raw(!1,!0)),this.skipSC(),this.eat(hn)),this.lookupNonWSType(0)===Rt&&(this.skipSC(),this.eatIdent("to"),this.skipSC(),this.eat(Qn),this.skipSC(),t=this.parseWithFallback(this.SelectorList,()=>this.Raw(!1,!0)),this.skipSC(),this.eat(hn)),{type:"Scope",loc:this.getLocation(n,this.tokenStart),root:e,limit:t}}function Tme(e){e.root&&(this.token(Qn,"("),this.node(e.root),this.token(hn,")")),e.limit&&(this.token(Rt,"to"),this.token(Qn,"("),this.node(e.limit),this.token(hn,")"))}const jme=Object.freeze(Object.defineProperty({__proto__:null,generate:Tme,name:Cme,parse:BM,structure:Eme},Symbol.toStringTag,{value:"Module"})),Ame="Selector",Pme={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator"]]};function UM(){const e=this.readSequence(this.scope.Selector);return this.getFirstListNode(e)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}}function Nme(e){this.children(e)}const Ome=Object.freeze(Object.defineProperty({__proto__:null,generate:Nme,name:Ame,parse:UM,structure:Pme},Symbol.toStringTag,{value:"Module"})),Rme="SelectorList",Mme="selector",Lme={children:[["Selector","Raw"]]};function HM(){const e=this.createList();for(;!this.eof;){if(e.push(this.Selector()),this.tokenType===bs){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}}function Ime(e){this.children(e,()=>this.token(bs,","))}const $me=Object.freeze(Object.defineProperty({__proto__:null,generate:Ime,name:Rme,parse:HM,structure:Lme,walkContext:Mme},Symbol.toStringTag,{value:"Module"})),Lx=92,WM=34,Dme=39;function VM(e){const t=e.length,n=e.charCodeAt(0),r=n===WM||n===Dme?1:0,i=r===1&&t>1&&e.charCodeAt(t-1)===n?t-2:t-1;let s="";for(let a=r;a<=i;a++){let o=e.charCodeAt(a);if(o===Lx){if(a===i){a!==t-1&&(s=e.substr(a+1));break}if(o=e.charCodeAt(++a),Ja(Lx,o)){const u=a-1,h=qu(e,u);a=h-1,s+=_R(e.substring(u+1,h))}else o===13&&e.charCodeAt(a+1)===10&&a++}else s+=e[a]}return s}function zme(e,t){const n='"',r=WM;let i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);if(o===0){i+="";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===r||o===Lx?(i+="\\"+e.charAt(a),s=!1):(s&&(pl(o)||cc(o))&&(i+=" "),i+=e.charAt(a),s=!1)}return n+i+n}const Fme="String",Bme={value:String};function GM(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:VM(this.consume(La))}}function Ume(e){this.token(La,zme(e.value))}const Hme=Object.freeze(Object.defineProperty({__proto__:null,generate:Ume,name:Fme,parse:GM,structure:Bme},Symbol.toStringTag,{value:"Module"})),Wme=33;function wT(){return this.Raw(null,!1)}const Vme="StyleSheet",Gme="stylesheet",qme={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function qM(){const e=this.tokenStart,t=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case Ur:this.next();continue;case ji:if(this.charCodeAt(this.tokenStart+2)!==Wme){this.next();continue}n=this.Comment();break;case Rf:n=this.CDO();break;case as:n=this.CDC();break;case ii:n=this.parseWithFallback(this.Atrule,wT);break;default:n=this.parseWithFallback(this.Rule,wT)}t.push(n)}return{type:"StyleSheet",loc:this.getLocation(e,this.tokenStart),children:t}}function Yme(e){this.children(e)}const Xme=Object.freeze(Object.defineProperty({__proto__:null,generate:Yme,name:Vme,parse:qM,structure:qme,walkContext:Gme},Symbol.toStringTag,{value:"Module"})),Kme="SupportsDeclaration",Zme={declaration:"Declaration"};function YM(){const e=this.tokenStart;this.eat(Qn),this.skipSC();const t=this.Declaration();return this.eof||this.eat(hn),{type:"SupportsDeclaration",loc:this.getLocation(e,this.tokenStart),declaration:t}}function Qme(e){this.token(Qn,"("),this.node(e.declaration),this.token(hn,")")}const Jme=Object.freeze(Object.defineProperty({__proto__:null,generate:Qme,name:Kme,parse:YM,structure:Zme},Symbol.toStringTag,{value:"Module"})),ege=42,_T=124;function ob(){this.tokenType!==Rt&&this.isDelim(ege)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const tge="TypeSelector",nge={name:String};function XM(){const e=this.tokenStart;return this.isDelim(_T)?(this.next(),ob.call(this)):(ob.call(this),this.isDelim(_T)&&(this.next(),ob.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function rge(e){this.tokenize(e.name)}const ige=Object.freeze(Object.defineProperty({__proto__:null,generate:rge,name:tge,parse:XM,structure:nge},Symbol.toStringTag,{value:"Module"})),KM=43,ZM=45,Ix=63;function ld(e,t){let n=0;for(let r=this.tokenStart+e;r<this.tokenEnd;r++){const i=this.charCodeAt(r);if(i===ZM&&t&&n!==0)return ld.call(this,e+n+1,!1),-1;pl(i)||this.error(t&&n!==0?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",r),++n>6&&this.error("Too many hex digits",r)}return this.next(),n}function Mp(e){let t=0;for(;this.isDelim(Ix);)++t>e&&this.error("Too many question marks"),this.next()}function sge(e){this.charCodeAt(this.tokenStart)!==e&&this.error((e===KM?"Plus sign":"Hyphen minus")+" is expected")}function age(){let e=0;switch(this.tokenType){case dn:if(e=ld.call(this,1,!0),this.isDelim(Ix)){Mp.call(this,6-e);break}if(this.tokenType===Nn||this.tokenType===dn){sge.call(this,ZM),ld.call(this,1,!1);break}break;case Nn:e=ld.call(this,1,!0),e>0&&Mp.call(this,6-e);break;default:if(this.eatDelim(KM),this.tokenType===Rt){e=ld.call(this,0,!0),e>0&&Mp.call(this,6-e);break}if(this.isDelim(Ix)){this.next(),Mp.call(this,5);break}this.error("Hex digit or question mark is expected")}}const oge="UnicodeRange",lge={value:String};function QM(){const e=this.tokenStart;return this.eatIdent("u"),age.call(this),{type:"UnicodeRange",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function cge(e){this.tokenize(e.value)}const uge=Object.freeze(Object.defineProperty({__proto__:null,generate:cge,name:oge,parse:QM,structure:lge},Symbol.toStringTag,{value:"Module"})),hge=32,$x=92,dge=34,fge=39,pge=40,JM=41;function mge(e){const t=e.length;let n=4,r=e.charCodeAt(t-1)===JM?t-2:t-1,i="";for(;n<r&&cc(e.charCodeAt(n));)n++;for(;n<r&&cc(e.charCodeAt(r));)r--;for(let s=n;s<=r;s++){let a=e.charCodeAt(s);if(a===$x){if(s===r){s!==t-1&&(i=e.substr(s+1));break}if(a=e.charCodeAt(++s),Ja($x,a)){const o=s-1,u=qu(e,o);s=u-1,i+=_R(e.substring(o+1,u))}else a===13&&e.charCodeAt(s+1)===10&&s++}else i+=e[s]}return i}function gge(e){let t="",n=!1;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===0){t+="";continue}if(i<=31||i===127){t+="\\"+i.toString(16),n=!0;continue}i===hge||i===$x||i===dge||i===fge||i===pge||i===JM?(t+="\\"+e.charAt(r),n=!1):(n&&pl(i)&&(t+=" "),t+=e.charAt(r),n=!1)}return"url("+t+")"}const yge="Url",bge={value:String};function e4(){const e=this.tokenStart;let t;switch(this.tokenType){case Fi:t=mge(this.consume(Fi));break;case kn:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(kn),this.skipSC(),t=VM(this.consume(La)),this.skipSC(),this.eof||this.eat(hn);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(e,this.tokenStart),value:t}}function vge(e){this.token(Fi,gge(e.value))}const xge=Object.freeze(Object.defineProperty({__proto__:null,generate:vge,name:yge,parse:e4,structure:bge},Symbol.toStringTag,{value:"Module"})),wge="Value",_ge={children:[[]]};function t4(){const e=this.tokenStart,t=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(e,this.tokenStart),children:t}}function kge(e){this.children(e)}const Sge=Object.freeze(Object.defineProperty({__proto__:null,generate:kge,name:wge,parse:t4,structure:_ge},Symbol.toStringTag,{value:"Module"})),Cge=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),Ege="WhiteSpace",Tge={value:String};function n4(){return this.eat(Ur),Cge}function jge(e){this.token(Ur,e.value)}const Age=Object.freeze(Object.defineProperty({__proto__:null,generate:jge,name:Ege,parse:n4,structure:Tge},Symbol.toStringTag,{value:"Module"})),r4=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:Yhe,Atrule:ede,AtrulePrelude:sde,AttributeSelector:pde,Block:wde,Brackets:Cde,CDC:Ade,CDO:Rde,ClassSelector:Dde,Combinator:Vde,Comment:Zde,Condition:rfe,Declaration:bfe,DeclarationList:kfe,Dimension:Tfe,Feature:Ofe,FeatureFunction:$fe,FeatureRange:Hfe,Function:Yfe,GeneralEnclosed:Qfe,Hash:rpe,IdSelector:hpe,Identifier:ope,Layer:gpe,LayerList:xpe,MediaQuery:Spe,MediaQueryList:jpe,NestingSelector:Rpe,Nth:$pe,Number:Bpe,Operator:Vpe,Parentheses:Xpe,Percentage:Jpe,PseudoClassSelector:ime,PseudoElementSelector:cme,Ratio:fme,Raw:bme,Rule:Sme,Scope:jme,Selector:Ome,SelectorList:$me,String:Hme,StyleSheet:Xme,SupportsDeclaration:Jme,TypeSelector:ige,UnicodeRange:uge,Url:xge,Value:Sge,WhiteSpace:Age},Symbol.toStringTag,{value:"Module"})),Pge={generic:!0,cssWideKeywords:A_,...Hhe,node:r4},Nge=35,Oge=42,kT=43,Rge=45,Mge=47,Lge=117;function i4(e){switch(this.tokenType){case wr:return this.Hash();case bs:return this.Operator();case Qn:return this.Parentheses(this.readSequence,e.recognizer);case ea:return this.Brackets(this.readSequence,e.recognizer);case La:return this.String();case Nn:return this.Dimension();case Dr:return this.Percentage();case dn:return this.Number();case kn:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,e.recognizer);case Fi:return this.Url();case Rt:return this.cmpChar(this.tokenStart,Lge)&&this.cmpChar(this.tokenStart+1,kT)?this.UnicodeRange():this.Identifier();case In:{const t=this.charCodeAt(this.tokenStart);if(t===Mge||t===Oge||t===kT||t===Rge)return this.Operator();t===Nge&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const Ige={getNode:i4},$ge=35,Dge=38,zge=42,Fge=43,Bge=47,ST=46,Uge=62,Hge=124,Wge=126;function Vge(e,t){t.last!==null&&t.last.type!=="Combinator"&&e!==null&&e.type!=="Combinator"&&t.push({type:"Combinator",loc:null,name:" "})}function Gge(){switch(this.tokenType){case ea:return this.AttributeSelector();case wr:return this.IdSelector();case Wi:return this.lookupType(1)===Wi?this.PseudoElementSelector():this.PseudoClassSelector();case Rt:return this.TypeSelector();case dn:case Dr:return this.Percentage();case Nn:this.charCodeAt(this.tokenStart)===ST&&this.error("Identifier is expected",this.tokenStart+1);break;case In:{switch(this.charCodeAt(this.tokenStart)){case Fge:case Uge:case Wge:case Bge:return this.Combinator();case ST:return this.ClassSelector();case zge:case Hge:return this.TypeSelector();case $ge:return this.IdSelector();case Dge:return this.NestingSelector()}break}}}const qge={onWhiteSpace:Vge,getNode:Gge};function Yge(){return this.createSingleNodeList(this.Raw(null,!1))}function Xge(){const e=this.createList();if(this.skipSC(),e.push(this.Identifier()),this.skipSC(),this.tokenType===bs){e.push(this.Operator());const t=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!1);if(n.type==="Value"&&n.children.isEmpty){for(let r=t-this.tokenIndex;r<=0;r++)if(this.lookupType(r)===Ur){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}e.push(n)}return e}function CT(e){return e!==null&&e.type==="Operator"&&(e.value[e.value.length-1]==="-"||e.value[e.value.length-1]==="+")}const Kge={getNode:i4,onWhiteSpace(e,t){CT(e)&&(e.value=" "+e.value),CT(t.last)&&(t.last.value+=" ")},expression:Yge,var:Xge},Zge=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:Ige,Selector:qge,Value:Kge},Symbol.toStringTag,{value:"Module"})),Qge=new Set(["none","and","not","or"]),Jge={parse:{prelude(){const e=this.createList();if(this.tokenType===Rt){const t=this.substring(this.tokenStart,this.tokenEnd);Qge.has(t.toLowerCase())||e.push(this.Identifier())}return e.push(this.Condition("container")),e},block(e=!1){return this.Block(e)}}},e0e={parse:{prelude:null,block(){return this.Block(!0)}}};function lb(e,t){return this.parseWithFallback(()=>{try{return e.call(this)}finally{this.skipSC(),this.lookupNonWSType(0)!==hn&&this.error()}},t||(()=>this.Raw(null,!0)))}const ET={layer(){this.skipSC();const e=this.createList(),t=lb.call(this,this.Layer);return(t.type!=="Raw"||t.value!=="")&&e.push(t),e},supports(){this.skipSC();const e=this.createList(),t=lb.call(this,this.Declaration,()=>lb.call(this,()=>this.Condition("supports")));return(t.type!=="Raw"||t.value!=="")&&e.push(t),e}},t0e={parse:{prelude(){const e=this.createList();switch(this.tokenType){case La:e.push(this.String());break;case Fi:case kn:e.push(this.Url());break;default:this.error("String or url() is expected")}return this.skipSC(),this.tokenType===Rt&&this.cmpStr(this.tokenStart,this.tokenEnd,"layer")?e.push(this.Identifier()):this.tokenType===kn&&this.cmpStr(this.tokenStart,this.tokenEnd,"layer(")&&e.push(this.Function(null,ET)),this.skipSC(),this.tokenType===kn&&this.cmpStr(this.tokenStart,this.tokenEnd,"supports(")&&e.push(this.Function(null,ET)),(this.lookupNonWSType(0)===Rt||this.lookupNonWSType(0)===Qn)&&e.push(this.MediaQueryList()),e},block:null}},n0e={parse:{prelude(){return this.createSingleNodeList(this.LayerList())},block(){return this.Block(!1)}}},r0e={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(e=!1){return this.Block(e)}}},i0e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},s0e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},a0e={parse:{prelude(){return this.createSingleNodeList(this.Scope())},block(e=!1){return this.Block(e)}}},o0e={parse:{prelude:null,block(e=!1){return this.Block(e)}}},l0e={parse:{prelude(){return this.createSingleNodeList(this.Condition("supports"))},block(e=!1){return this.Block(e)}}},c0e={container:Jge,"font-face":e0e,import:t0e,layer:n0e,media:r0e,nest:i0e,page:s0e,scope:a0e,"starting-style":o0e,supports:l0e};function u0e(){const e=this.createList();this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Rt:e.push(this.Identifier());break;case La:e.push(this.String());break;case bs:e.push(this.Operator());break;case hn:break e;default:this.error("Identifier, string or comma is expected")}this.skipSC()}return e}const Ol={parse(){return this.createSingleNodeList(this.SelectorList())}},cb={parse(){return this.createSingleNodeList(this.Selector())}},h0e={parse(){return this.createSingleNodeList(this.Identifier())}},d0e={parse:u0e},Lp={parse(){return this.createSingleNodeList(this.Nth())}},f0e={dir:h0e,has:Ol,lang:d0e,matches:Ol,is:Ol,"-moz-any":Ol,"-webkit-any":Ol,where:Ol,not:Ol,"nth-child":Lp,"nth-last-child":Lp,"nth-last-of-type":Lp,"nth-of-type":Lp,slotted:cb,host:cb,"host-context":cb},p0e=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:eM,Atrule:tM,AtrulePrelude:nM,AttributeSelector:iM,Block:aM,Brackets:oM,CDC:lM,CDO:cM,ClassSelector:uM,Combinator:hM,Comment:dM,Condition:fM,Declaration:mM,DeclarationList:gM,Dimension:yM,Feature:bM,FeatureFunction:vM,FeatureRange:xM,Function:wM,GeneralEnclosed:_M,Hash:kM,IdSelector:CM,Identifier:SM,Layer:EM,LayerList:TM,MediaQuery:jM,MediaQueryList:AM,NestingSelector:PM,Nth:NM,Number:OM,Operator:RM,Parentheses:MM,Percentage:LM,PseudoClassSelector:IM,PseudoElementSelector:$M,Ratio:DM,Raw:zM,Rule:FM,Scope:BM,Selector:UM,SelectorList:HM,String:GM,StyleSheet:qM,SupportsDeclaration:YM,TypeSelector:XM,UnicodeRange:QM,Url:e4,Value:t4,WhiteSpace:n4},Symbol.toStringTag,{value:"Module"})),m0e={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(e){return this.AtrulePrelude(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",condition(e){return this.Condition(e.kind)},rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},features:{supports:{selector(){return this.Selector()}},container:{style(){return this.Declaration()}}},scope:Zge,atrule:c0e,pseudo:f0e,node:p0e},g0e={node:r4},y0e=Uhe({...Pge,...m0e,...g0e});function Dx(e){const t={};for(const n of Object.keys(e)){let r=e[n];r&&(Array.isArray(r)||r instanceof _o?r=r.map(Dx):r.constructor===Object&&(r=Dx(r))),t[n]=r}return t}const{tokenize:dje,parse:Yu,generate:Ts,lexer:fje,createLexer:pje,walk:Vs,find:mje,findLast:gje,findAll:yje,toPlainObject:bje,fromPlainObject:vje,fork:xje}=y0e,ub=0,Ht=1,Dn=2,ci=3,_r=4,Pa=5,_0=6,Ci=7,os=8,Hn=9,fn=10,zr=11,Mn=12,Xr=13,Mf=14,ls=15,Gi=16,ps=17,oo=18,Is=19,Na=20,gi=21,lr=22,qi=23,Js=24,Qi=25,b0e=0;function xi(e){return e>=48&&e<=57}function gl(e){return xi(e)||e>=65&&e<=70||e>=97&&e<=102}function D_(e){return e>=65&&e<=90}function v0e(e){return e>=97&&e<=122}function x0e(e){return D_(e)||v0e(e)}function w0e(e){return e>=128}function wg(e){return x0e(e)||w0e(e)||e===95}function s4(e){return wg(e)||xi(e)||e===45}function _0e(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function _g(e){return e===10||e===13||e===12}function hc(e){return _g(e)||e===32||e===9}function eo(e,t){return!(e!==92||_g(t)||t===b0e)}function pm(e,t,n){return e===45?wg(t)||t===45||eo(t,n):wg(e)?!0:e===92?eo(e,t):!1}function hb(e,t,n){return e===43||e===45?xi(t)?2:t===46&&xi(n)?3:0:e===46?xi(t)?2:0:xi(e)?1:0}function a4(e){return e===65279||e===65534?1:0}const zx=new Array(128),k0e=128,mm=130,o4=131,z_=132,l4=133;for(let e=0;e<zx.length;e++)zx[e]=hc(e)&&mm||xi(e)&&o4||wg(e)&&z_||_0e(e)&&l4||e||k0e;function db(e){return e<128?zx[e]:z_}function Mu(e,t){return t<e.length?e.charCodeAt(t):0}function Fx(e,t,n){return n===13&&Mu(e,t+1)===10?2:1}function Lu(e,t,n){let r=e.charCodeAt(t);return D_(r)&&(r=r|32),r===n}function df(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const s=r.charCodeAt(i-t);let a=e.charCodeAt(i);if(D_(a)&&(a=a|32),a!==s)return!1}return!0}function S0e(e,t){for(;t>=0&&hc(e.charCodeAt(t));t--);return t+1}function Ip(e,t){for(;t<e.length&&hc(e.charCodeAt(t));t++);return t}function fb(e,t){for(;t<e.length&&xi(e.charCodeAt(t));t++);return t}function Xu(e,t){if(t+=2,gl(Mu(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&gl(Mu(e,t));t++);const n=Mu(e,t);hc(n)&&(t+=Fx(e,t,n))}return t}function $p(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!s4(n)){if(eo(n,Mu(e,t+1))){t=Xu(e,t)-1;continue}break}}return t}function k0(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),xi(n)&&(t=fb(e,t+1),n=e.charCodeAt(t)),n===46&&xi(e.charCodeAt(t+1))&&(t+=2,t=fb(e,t)),Lu(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),xi(n)&&(t=fb(e,t+1+r+1))}return t}function pb(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}eo(n,Mu(e,t+1))&&(t=Xu(e,t))}return t}function c4(e){if(e.length===1&&!gl(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const u4=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"],C0e=16*1024;function kg(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,C0e)):e}const TT=10,E0e=12,jT=13;function AT(e){const t=e.source,n=t.length,r=t.length>0?a4(t.charCodeAt(0)):0,i=kg(e.lines,n),s=kg(e.columns,n);let a=e.startLine,o=e.startColumn;for(let u=r;u<n;u++){const h=t.charCodeAt(u);i[u]=a,s[u]=o++,(h===TT||h===jT||h===E0e)&&(h===jT&&u+1<n&&t.charCodeAt(u+1)===TT&&(u++,i[u]=a,s[u]=o),a++,o=1)}i[n]=a,s[n]=o,e.lines=i,e.columns=s,e.computed=!0}class T0e{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(t,n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||AT(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||AT(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}}const $s=16777215,Fo=24,j0e=new Map([[Dn,lr],[gi,lr],[Is,Na],[qi,Js]]);class A0e{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=kg(this.offsetAndType,t.length+1),s=kg(this.balance,t.length+1);let a=0,o=0,u=0,h=-1;for(this.offsetAndType=null,this.balance=null,n(t,(d,p,m)=>{switch(d){default:s[a]=r;break;case o:{let g=u&$s;for(u=s[g],o=u>>Fo,s[a]=g,s[g++]=a;g<a;g++)s[g]===r&&(s[g]=a);break}case gi:case Dn:case Is:case qi:s[a]=u,o=j0e.get(d),u=o<<Fo|a;break}i[a++]=d<<Fo|m,h===-1&&(h=p)}),i[a]=ub<<Fo|r,s[a]=r,s[r]=r;u!==0;){const d=u&$s;u=s[d],s[d]=r}this.source=t,this.firstCharOffset=h===-1?0:h,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>Fo:ub}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&$s:this.source.length}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?df(this.source,this.offsetAndType[t-1]&$s,this.offsetAndType[t]&$s,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&$s:this.offsetAndType[this.tokenCount]&$s:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===Hn&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===Hn&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&$s,n=this.offsetAndType[n],this.tokenType=n>>Fo,this.tokenEnd=n&$s):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>Fo,this.tokenEnd=t&$s):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=ub,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Xr||this.tokenType===Qi;)this.next()}skipUntilBalanced(t,n){let r=t,i,s;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(s=r>0?this.offsetAndType[r-1]&$s:this.firstCharOffset,n(this.source.charCodeAt(s))){case 1:break e;case 2:r++;break e;default:this.balance[i]===r&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,s=this.offsetAndType[n],a=s&$s,o=s>>Fo;r=a,t(o,i,a,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,s)=>{t[s]={idx:s,type:u4[n],chunk:this.source.substring(r,i),balance:this.balance[s]}}),t}}function S0(e,t){function n(p){return p<o?e.charCodeAt(p):0}function r(){if(h=k0(e,h),pm(n(h),n(h+1),n(h+2))){d=Mn,h=$p(e,h);return}if(n(h)===37){d=zr,h++;return}d=fn}function i(){const p=h;if(h=$p(e,h),df(e,p,h,"url")&&n(h)===40){if(h=Ip(e,h+1),n(h)===34||n(h)===39){d=Dn,h=p+4;return}a();return}if(n(h)===40){d=Dn,h++;return}d=Ht}function s(p){for(p||(p=n(h++)),d=Pa;h<e.length;h++){const m=e.charCodeAt(h);switch(db(m)){case p:h++;return;case mm:if(_g(m)){h+=Fx(e,h,m),d=_0;return}break;case 92:if(h===e.length-1)break;const g=n(h+1);_g(g)?h+=Fx(e,h+1,g):eo(m,g)&&(h=Xu(e,h)-1);break}}}function a(){for(d=Ci,h=Ip(e,h);h<e.length;h++){const p=e.charCodeAt(h);switch(db(p)){case 41:h++;return;case mm:if(h=Ip(e,h),n(h)===41||h>=e.length){h<e.length&&h++;return}h=pb(e,h),d=os;return;case 34:case 39:case 40:case l4:h=pb(e,h),d=os;return;case 92:if(eo(p,n(h+1))){h=Xu(e,h)-1;break}h=pb(e,h),d=os;return}}}e=String(e||"");const o=e.length;let u=a4(n(0)),h=u,d;for(;h<o;){const p=e.charCodeAt(h);switch(db(p)){case mm:d=Xr,h=Ip(e,h+1);break;case 34:s();break;case 35:s4(n(h+1))||eo(n(h+1),n(h+2))?(d=_r,h=$p(e,h+1)):(d=Hn,h++);break;case 39:s();break;case 40:d=gi,h++;break;case 41:d=lr,h++;break;case 43:hb(p,n(h+1),n(h+2))?r():(d=Hn,h++);break;case 44:d=oo,h++;break;case 45:hb(p,n(h+1),n(h+2))?r():n(h+1)===45&&n(h+2)===62?(d=ls,h=h+3):pm(p,n(h+1),n(h+2))?i():(d=Hn,h++);break;case 46:hb(p,n(h+1),n(h+2))?r():(d=Hn,h++);break;case 47:n(h+1)===42?(d=Qi,h=e.indexOf("*/",h+2),h=h===-1?e.length:h+2):(d=Hn,h++);break;case 58:d=Gi,h++;break;case 59:d=ps,h++;break;case 60:n(h+1)===33&&n(h+2)===45&&n(h+3)===45?(d=Mf,h=h+4):(d=Hn,h++);break;case 64:pm(n(h+1),n(h+2),n(h+3))?(d=ci,h=$p(e,h+1)):(d=Hn,h++);break;case 91:d=Is,h++;break;case 92:eo(p,n(h+1))?i():(d=Hn,h++);break;case 93:d=Na,h++;break;case 123:d=qi,h++;break;case 125:d=Js,h++;break;case o4:r();break;case z_:i();break;default:d=Hn,h++}t(d,u,u=h)}}let Rc=null;class Un{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return Un.createItem(t)}allocateCursor(t,n){let r;return Rc!==null?(r=Rc,Rc=Rc.cursor,r.prev=t,r.next=n,r.cursor=this.cursor):r={prev:t,next:n,cursor:this.cursor},this.cursor=r,r}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Rc,Rc=t}updateCursors(t,n,r,i){let{cursor:s}=this;for(;s!==null;)s.prev===t&&(s.prev=n),s.next===r&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let n=this.head;n!==null;n=n.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let r of t){const i=Un.createItem(r);n!==null?n.next=i:this.head=i,i.prev=n,n=i}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,n=this){const r=this.allocateCursor(null,this.head);for(;r.next!==null;){const i=r.next;r.next=i.next,t.call(n,i.data,i,this)}this.releaseCursor()}forEachRight(t,n=this){const r=this.allocateCursor(this.tail,null);for(;r.prev!==null;){const i=r.prev;r.prev=i.prev,t.call(n,i.data,i,this)}this.releaseCursor()}reduce(t,n,r=this){let i=this.allocateCursor(null,this.head),s=n,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(t,n,r=this){let i=this.allocateCursor(this.tail,null),s=n,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}some(t,n=this){for(let r=this.head;r!==null;r=r.next)if(t.call(n,r.data,r,this))return!0;return!1}map(t,n=this){const r=new Un;for(let i=this.head;i!==null;i=i.next)r.appendData(t.call(n,i.data,i,this));return r}filter(t,n=this){const r=new Un;for(let i=this.head;i!==null;i=i.next)t.call(n,i.data,i,this)&&r.appendData(i.data);return r}nextUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(null,t);for(;i.next!==null;){const s=i.next;if(i.next=s.next,n.call(r,s.data,s,this))break}this.releaseCursor()}prevUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(t,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,n.call(r,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new Un;for(let n of this)t.appendData(n);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(Un.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(Un.createItem(t))}insert(t,n=null){if(n!==null)if(this.updateCursors(n.prev,t,n,t),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=t,n.prev=t,t.next=n,this.updateCursors(null,t)}else n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(Un.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(Un.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(Un.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,n){return t.head===null?this:(n!=null?(this.updateCursors(n.prev,t.tail,n,t.head),n.prev!==null?(n.prev.next=t.head,t.head.prev=n.prev):this.head=t.head,n.prev=t.tail,t.tail.next=n):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,n){"head"in n?this.insertList(n,t):this.insert(n,t),this.remove(t)}}function C0(e,t){const n=Object.create(SyntaxError.prototype),r=new Error;return Object.assign(n,{name:e,message:t,get stack(){return(r.stack||"").replace(/^(.+\n){1,3}/,`${e}: ${t}
`)}})}const mb=100,PT=60,NT="    ";function OT({source:e,line:t,column:n},r){function i(d,p){return s.slice(d,p).map((m,g)=>String(d+g+1).padStart(u)+" |"+m).join(`
`)}const s=e.split(/\r\n?|\n|\f/),a=Math.max(1,t-r)-1,o=Math.min(t+r,s.length+1),u=Math.max(4,String(o).length)+1;let h=0;n+=(NT.length-1)*(s[t-1].substr(0,n-1).match(/\t/g)||[]).length,n>mb&&(h=n-PT+3,n=PT-2);for(let d=a;d<=o;d++)d>=0&&d<s.length&&(s[d]=s[d].replace(/\t/g,NT),s[d]=(h>0&&s[d].length>h?"":"")+s[d].substr(h,mb-2)+(s[d].length>h+mb-1?"":""));return[i(a,t),new Array(n+u+2).join("-")+"^",i(t,o)].filter(Boolean).join(`
`)}function RT(e,t,n,r,i){return Object.assign(C0("SyntaxError",e),{source:t,offset:n,line:r,column:i,sourceFragment(a){return OT({source:t,line:r,column:i},isNaN(a)?0:a)},get formattedMessage(){return`Parse error: ${e}
`+OT({source:t,line:r,column:i},2)}})}function P0e(e){const t=this.createList();let n=!1;const r={recognizer:e};for(;!this.eof;){switch(this.tokenType){case Qi:this.next();continue;case Xr:n=!0,this.next();continue}let i=e.getNode.call(this,r);if(i===void 0)break;n&&(e.onWhiteSpace&&e.onWhiteSpace.call(this,i,t,r),n=!1),t.push(i)}return n&&e.onWhiteSpace&&e.onWhiteSpace.call(this,null,t,r),t}const MT=()=>{},N0e=33,O0e=35,gb=59,LT=123,IT=0;function R0e(e){return function(){return this[e]()}}function yb(e){const t=Object.create(null);for(const n in e){const r=e[n],i=r.parse||r;i&&(t[n]=i)}return t}function M0e(e){const t={context:Object.create(null),scope:Object.assign(Object.create(null),e.scope),atrule:yb(e.atrule),pseudo:yb(e.pseudo),node:yb(e.node)};for(const n in e.parseContext)switch(typeof e.parseContext[n]){case"function":t.context[n]=e.parseContext[n];break;case"string":t.context[n]=R0e(e.parseContext[n]);break}return{config:t,...t,...t.node}}function L0e(e){let t="",n="<unknown>",r=!1,i=MT,s=!1;const a=new T0e,o=Object.assign(new A0e,M0e(e||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:P0e,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(h){return h===LT?1:0},consumeUntilLeftCurlyBracketOrSemicolon(h){return h===LT||h===gb?1:0},consumeUntilExclamationMarkOrSemicolon(h){return h===N0e||h===gb?1:0},consumeUntilSemicolonIncluded(h){return h===gb?2:0},createList(){return new Un},createSingleNodeList(h){return new Un().appendData(h)},getFirstListNode(h){return h&&h.first},getLastListNode(h){return h&&h.last},parseWithFallback(h,d){const p=this.tokenIndex;try{return h.call(this)}catch(m){if(s)throw m;const g=d.call(this,p);return s=!0,i(m,g),s=!1,g}},lookupNonWSType(h){let d;do if(d=this.lookupType(h++),d!==Xr)return d;while(d!==IT);return IT},charCodeAt(h){return h>=0&&h<t.length?t.charCodeAt(h):0},substring(h,d){return t.substring(h,d)},substrToCursor(h){return this.source.substring(h,this.tokenStart)},cmpChar(h,d){return Lu(t,h,d)},cmpStr(h,d,p){return df(t,h,d,p)},consume(h){const d=this.tokenStart;return this.eat(h),this.substrToCursor(d)},consumeFunctionName(){const h=t.substring(this.tokenStart,this.tokenEnd-1);return this.eat(Dn),h},consumeNumber(h){const d=t.substring(this.tokenStart,k0(t,this.tokenStart));return this.eat(h),d},eat(h){if(this.tokenType!==h){const d=u4[h].slice(0,-6).replace(/-/g," ").replace(/^./,g=>g.toUpperCase());let p=`${/[[\](){}]/.test(d)?`"${d}"`:d} is expected`,m=this.tokenStart;switch(h){case Ht:this.tokenType===Dn||this.tokenType===Ci?(m=this.tokenEnd-1,p="Identifier is expected but function found"):p="Identifier is expected";break;case _r:this.isDelim(O0e)&&(this.next(),m++,p="Name is expected");break;case zr:this.tokenType===fn&&(m=this.tokenEnd,p="Percent sign is expected");break}this.error(p,m)}this.next()},eatIdent(h){(this.tokenType!==Ht||this.lookupValue(0,h)===!1)&&this.error(`Identifier "${h}" is expected`),this.next()},eatDelim(h){this.isDelim(h)||this.error(`Delim "${String.fromCharCode(h)}" is expected`),this.next()},getLocation(h,d){return r?a.getLocationRange(h,d,n):null},getLocationFromList(h){if(r){const d=this.getFirstListNode(h),p=this.getLastListNode(h);return a.getLocationRange(d!==null?d.loc.start.offset-a.startOffset:this.tokenStart,p!==null?p.loc.end.offset-a.startOffset:this.tokenStart,n)}return null},error(h,d){const p=typeof d<"u"&&d<t.length?a.getLocation(d):this.eof?a.getLocation(S0e(t,t.length-1)):a.getLocation(this.tokenStart);throw new RT(h||"Unexpected input",t,p.offset,p.line,p.column)}});return Object.assign(function(h,d){t=h,d=d||{},o.setSource(t,S0),a.setSource(t,d.offset,d.line,d.column),n=d.filename||"<unknown>",r=!!d.positions,i=typeof d.onParseError=="function"?d.onParseError:MT,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in d?!!d.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in d?!!d.parseRulePrelude:!0,o.parseValue="parseValue"in d?!!d.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in d?!!d.parseCustomProperty:!1;const{context:p="default",onComment:m}=d;if(!(p in o.context))throw new Error("Unknown context `"+p+"`");typeof m=="function"&&o.forEachToken((v,w,C)=>{if(v===Qi){const x=o.getLocation(w,C),k=df(t,C-2,C,"*/")?t.slice(w+2,C-2):t.slice(w+2,C);m(k,x)}});const g=o.context[p].call(o,d);return o.eof||o.error(),g},{SyntaxError:RT,config:o.config})}const $T=new Set(["Atrule","Selector","Declaration"]);function I0e(e){const t=new NR,n={line:1,column:0},r={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,u=!1;const h=e.node;e.node=function(m){if(m.loc&&m.loc.start&&$T.has(m.type)){const g=m.loc.start.line,v=m.loc.start.column-1;(r.line!==g||r.column!==v)&&(r.line=g,r.column=v,n.line=a,n.column=o,u&&(u=!1,(n.line!==i.line||n.column!==i.column)&&t.addMapping(s)),u=!0,t.addMapping({source:m.loc.source,original:r,generated:n}))}h.call(this,m),u&&$T.has(m.type)&&(i.line=a,i.column=o)};const d=e.emit;e.emit=function(m,g,v){for(let w=0;w<m.length;w++)m.charCodeAt(w)===10?(a++,o=0):o++;d(m,g,v)};const p=e.result;return e.result=function(){return u&&t.addMapping(s),{css:p(),map:t}},e}const $0e=43,D0e=45,bb=(e,t)=>{if(e===Hn&&(e=t),typeof e=="string"){const n=e.charCodeAt(0);return n>127?32768:n<<8}return e},h4=[[Ht,Ht],[Ht,Dn],[Ht,Ci],[Ht,os],[Ht,"-"],[Ht,fn],[Ht,zr],[Ht,Mn],[Ht,ls],[Ht,gi],[ci,Ht],[ci,Dn],[ci,Ci],[ci,os],[ci,"-"],[ci,fn],[ci,zr],[ci,Mn],[ci,ls],[_r,Ht],[_r,Dn],[_r,Ci],[_r,os],[_r,"-"],[_r,fn],[_r,zr],[_r,Mn],[_r,ls],[Mn,Ht],[Mn,Dn],[Mn,Ci],[Mn,os],[Mn,"-"],[Mn,fn],[Mn,zr],[Mn,Mn],[Mn,ls],["#",Ht],["#",Dn],["#",Ci],["#",os],["#","-"],["#",fn],["#",zr],["#",Mn],["#",ls],["-",Ht],["-",Dn],["-",Ci],["-",os],["-","-"],["-",fn],["-",zr],["-",Mn],["-",ls],[fn,Ht],[fn,Dn],[fn,Ci],[fn,os],[fn,fn],[fn,zr],[fn,Mn],[fn,"%"],[fn,ls],["@",Ht],["@",Dn],["@",Ci],["@",os],["@","-"],["@",ls],[".",fn],[".",zr],[".",Mn],["+",fn],["+",zr],["+",Mn],["/","*"]],z0e=h4.concat([[Ht,_r],[Mn,_r],[_r,_r],[ci,gi],[ci,Pa],[ci,Gi],[zr,zr],[zr,Mn],[zr,Dn],[zr,"-"],[lr,Ht],[lr,Dn],[lr,zr],[lr,Mn],[lr,_r],[lr,"-"]]);function d4(e){const t=new Set(e.map(([n,r])=>bb(n)<<16|bb(r)));return function(n,r,i){const s=bb(r,i),a=i.charCodeAt(0);return(a===D0e&&r!==Ht&&r!==Dn&&r!==ls||a===$0e?t.has(n<<16|a<<8):t.has(n<<16|s))&&this.emit(" ",Xr,!0),s}}const F0e=d4(h4),f4=d4(z0e),DT=Object.freeze(Object.defineProperty({__proto__:null,safe:f4,spec:F0e},Symbol.toStringTag,{value:"Module"})),B0e=92;function U0e(e,t){if(typeof t=="function"){let n=null;e.children.forEach(r=>{n!==null&&t.call(this,n),this.node(r),n=r});return}e.children.forEach(this.node,this)}function H0e(e){S0(e,(t,n,r)=>{this.token(t,e.slice(n,r))})}function W0e(e){const t=new Map;for(let n in e.node){const r=e.node[n];typeof(r.generate||r)=="function"&&t.set(n,r.generate||r)}return function(n,r){let i="",s=0,a={node(u){if(t.has(u.type))t.get(u.type).call(o,u);else throw new Error("Unknown node type: "+u.type)},tokenBefore:f4,token(u,h){s=this.tokenBefore(s,u,h),this.emit(h,u,!1),u===Hn&&h.charCodeAt(0)===B0e&&this.emit(`
`,Xr,!0)},emit(u){i+=u},result(){return i}};r&&(typeof r.decorator=="function"&&(a=r.decorator(a)),r.sourceMap&&(a=I0e(a)),r.mode in DT&&(a.tokenBefore=DT[r.mode]));const o={node:u=>a.node(u),children:U0e,token:(u,h)=>a.token(u,h),tokenize:H0e};return a.node(n),a.result()}}function V0e(e){return{fromPlainObject(t){return e(t,{enter(n){n.children&&!(n.children instanceof Un)&&(n.children=new Un().fromArray(n.children))}}),t},toPlainObject(t){return e(t,{leave(n){n.children&&n.children instanceof Un&&(n.children=n.children.toArray())}}),t}}}const{hasOwnProperty:F_}=Object.prototype,cd=function(){};function zT(e){return typeof e=="function"?e:cd}function FT(e,t){return function(n,r,i){n.type===t&&e.call(this,n,r,i)}}function G0e(e,t){const n=t.structure,r=[];for(const i in n){if(F_.call(n,i)===!1)continue;let s=n[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&r.push(a)}return r.length?{context:t.walkContext,fields:r}:null}function q0e(e){const t={};for(const n in e.node)if(F_.call(e.node,n)){const r=e.node[n];if(!r.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");t[n]=G0e(n,r)}return t}function BT(e,t){const n=e.fields.slice(),r=e.context,i=typeof r=="string";return t&&n.reverse(),function(s,a,o,u){let h;i&&(h=a[r],a[r]=s);for(const d of n){const p=s[d.name];if(!d.nullable||p){if(d.type==="list"){if(t?p.reduceRight(u,!1):p.reduce(u,!1))return!0}else if(o(p))return!0}}i&&(a[r]=h)}}function UT({StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}){return{Atrule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Rule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Declaration:{StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}}}function Y0e(e){const t=q0e(e),n={},r={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const h in t)F_.call(t,h)&&t[h]!==null&&(n[h]=BT(t[h],!1),r[h]=BT(t[h],!0));const a=UT(n),o=UT(r),u=function(h,d){function p(x,k,A){const j=m.call(C,x,k,A);return j===i?!0:j===s?!1:!!(v.hasOwnProperty(x.type)&&v[x.type](x,C,p,w)||g.call(C,x,k,A)===i)}let m=cd,g=cd,v=n,w=(x,k,A,j)=>x||p(k,A,j);const C={break:i,skip:s,root:h,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof d=="function")m=d;else if(d&&(m=zT(d.enter),g=zT(d.leave),d.reverse&&(v=r),d.visit)){if(a.hasOwnProperty(d.visit))v=d.reverse?o[d.visit]:a[d.visit];else if(!t.hasOwnProperty(d.visit))throw new Error("Bad value `"+d.visit+"` for `visit` option (should be: "+Object.keys(t).sort().join(", ")+")");m=FT(m,d.visit),g=FT(g,d.visit)}if(m===cd&&g===cd)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");p(h)};return u.break=i,u.skip=s,u.find=function(h,d){let p=null;return u(h,function(m,g,v){if(d.call(this,m,g,v))return p=m,i}),p},u.findLast=function(h,d){let p=null;return u(h,{reverse:!0,enter(m,g,v){if(d.call(this,m,g,v))return p=m,i}}),p},u.findAll=function(h,d){const p=[];return u(h,function(m,g,v){d.call(this,m,g,v)&&p.push(m)}),p},u}function X0e(e){return e}function K0e(e){const{min:t,max:n,comma:r}=e;return t===0&&n===0?r?"#?":"*":t===0&&n===1?"?":t===1&&n===0?r?"#":"+":t===1&&n===1?"":(r?"#":"")+(t===n?"{"+t+"}":"{"+t+","+(n!==0?n:"")+"}")}function Z0e(e){switch(e.type){case"Range":return" ["+(e.min===null?"-":e.min)+","+(e.max===null?"":e.max)+"]";default:throw new Error("Unknown node type `"+e.type+"`")}}function Q0e(e,t,n,r){const i=e.combinator===" "||r?e.combinator:" "+e.combinator+" ",s=e.terms.map(a=>B_(a,t,n,r)).join(i);return e.explicit||n?(r||s[0]===","?"[":"[ ")+s+(r?"]":" ]"):s}function B_(e,t,n,r){let i;switch(e.type){case"Group":i=Q0e(e,t,n,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return B_(e.term,t,n,r)+t(K0e(e),e);case"Type":i="<"+e.name+(e.opts?t(Z0e(e.opts),e.opts):"")+">";break;case"Property":i="<'"+e.name+"'>";break;case"Keyword":i=e.name;break;case"AtKeyword":i="@"+e.name;break;case"Function":i=e.name+"(";break;case"String":case"Token":i=e.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return t(i,e)}function U_(e,t){let n=X0e,r=!1,i=!1;return typeof t=="function"?n=t:t&&(r=!!t.forceBraces,i=!!t.compact,typeof t.decorate=="function"&&(n=t.decorate)),B_(e,n,r,i)}const HT={offset:0,line:1,column:1};function J0e(e,t){const n=e.tokens,r=e.longestMatch,i=r<n.length&&n[r].node||null,s=i!==t?i:null;let a=0,o=0,u=0,h="",d,p;for(let m=0;m<n.length;m++){const g=n[m].value;m===r&&(o=g.length,a=h.length),s!==null&&n[m].node===s&&(m<=r?u++:u=0),h+=g}return r===n.length||u>1?(d=Dp(s||t,"end")||ud(HT,h),p=ud(d)):(d=Dp(s,"start")||ud(Dp(t,"start")||HT,h.slice(0,a)),p=Dp(s,"end")||ud(d,h.substr(a,o))),{css:h,mismatchOffset:a,mismatchLength:o,start:d,end:p}}function Dp(e,t){const n=e&&e.loc&&e.loc[t];return n?"line"in n?ud(n):n:null}function ud({offset:e,line:t,column:n},r){const i={offset:e,line:t,column:n};if(r){const s=r.split(/\n|\r\n?|\f/);i.offset+=r.length,i.line+=s.length-1,i.column=s.length===1?i.column+r.length:s.pop().length+1}return i}const Hh=function(e,t){const n=C0("SyntaxReferenceError",e+(t?" `"+t+"`":""));return n.reference=t,n},eye=function(e,t,n,r){const i=C0("SyntaxMatchError",e),{css:s,mismatchOffset:a,mismatchLength:o,start:u,end:h}=J0e(r,n);return i.rawMessage=e,i.syntax=t?U_(t):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=e+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,u),i.loc={source:n&&n.loc&&n.loc.source||"<unknown>",start:u,end:h},i},zp=new Map,Mc=new Map,Sg=45,Ca=tye,Ku=nye;function H_(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===Sg&&e.charCodeAt(t+1)===Sg}function p4(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===Sg&&e.charCodeAt(t+1)!==Sg){const n=e.indexOf("-",t+2);if(n!==-1)return e.substring(t,n+1)}return""}function tye(e){if(zp.has(e))return zp.get(e);const t=e.toLowerCase();let n=zp.get(t);if(n===void 0){const r=H_(t,0),i=r?"":p4(t,0);n=Object.freeze({basename:t.substr(i.length),name:t,prefix:i,vendor:i,custom:r})}return zp.set(e,n),n}function nye(e){if(Mc.has(e))return Mc.get(e);let t=e,n=e[0];n==="/"?n=e[1]==="/"?"//":"/":n!=="_"&&n!=="*"&&n!=="$"&&n!=="#"&&n!=="+"&&n!=="&"&&(n="");const r=H_(t,n.length);if(!r&&(t=t.toLowerCase(),Mc.has(t))){const o=Mc.get(t);return Mc.set(e,o),o}const i=r?"":p4(t,n.length),s=t.substr(0,n.length+i.length),a=Object.freeze({basename:t.substr(s.length),name:t.substr(n.length),hack:n,vendor:i,prefix:s,custom:r});return Mc.set(e,a),a}const m4=["initial","inherit","unset","revert","revert-layer"],ff=43,Ga=45,vb=110,Lc=!0,rye=!1;function Bx(e,t){return e!==null&&e.type===Hn&&e.value.charCodeAt(0)===t}function Rd(e,t,n){for(;e!==null&&(e.type===Xr||e.type===Qi);)e=n(++t);return t}function Ho(e,t,n,r){if(!e)return 0;const i=e.value.charCodeAt(t);if(i===ff||i===Ga){if(n)return 0;t++}for(;t<e.value.length;t++)if(!xi(e.value.charCodeAt(t)))return 0;return r+1}function xb(e,t,n){let r=!1,i=Rd(e,t,n);if(e=n(i),e===null)return t;if(e.type!==fn)if(Bx(e,ff)||Bx(e,Ga)){if(r=!0,i=Rd(n(++i),i,n),e=n(i),e===null||e.type!==fn)return 0}else return t;if(!r){const s=e.value.charCodeAt(0);if(s!==ff&&s!==Ga)return 0}return Ho(e,r?0:1,r,i)}function iye(e,t){let n=0;if(!e)return 0;if(e.type===fn)return Ho(e,0,rye,n);if(e.type===Ht&&e.value.charCodeAt(0)===Ga){if(!Lu(e.value,1,vb))return 0;switch(e.value.length){case 2:return xb(t(++n),n,t);case 3:return e.value.charCodeAt(2)!==Ga?0:(n=Rd(t(++n),n,t),e=t(n),Ho(e,0,Lc,n));default:return e.value.charCodeAt(2)!==Ga?0:Ho(e,3,Lc,n)}}else if(e.type===Ht||Bx(e,ff)&&t(n+1).type===Ht){if(e.type!==Ht&&(e=t(++n)),e===null||!Lu(e.value,0,vb))return 0;switch(e.value.length){case 1:return xb(t(++n),n,t);case 2:return e.value.charCodeAt(1)!==Ga?0:(n=Rd(t(++n),n,t),e=t(n),Ho(e,0,Lc,n));default:return e.value.charCodeAt(1)!==Ga?0:Ho(e,2,Lc,n)}}else if(e.type===Mn){let r=e.value.charCodeAt(0),i=r===ff||r===Ga?1:0,s=i;for(;s<e.value.length&&xi(e.value.charCodeAt(s));s++);return s===i||!Lu(e.value,s,vb)?0:s+1===e.value.length?xb(t(++n),n,t):e.value.charCodeAt(s+1)!==Ga?0:s+2===e.value.length?(n=Rd(t(++n),n,t),e=t(n),Ho(e,0,Lc,n)):Ho(e,s+2,Lc,n)}return 0}const sye=43,g4=45,y4=63,aye=117;function Ux(e,t){return e!==null&&e.type===Hn&&e.value.charCodeAt(0)===t}function oye(e,t){return e.value.charCodeAt(0)===t}function hd(e,t,n){let r=0;for(let i=t;i<e.value.length;i++){const s=e.value.charCodeAt(i);if(s===g4&&n&&r!==0)return hd(e,t+r+1,!1),6;if(!gl(s)||++r>6)return 0}return r}function Fp(e,t,n){if(!e)return 0;for(;Ux(n(t),y4);){if(++e>6)return 0;t++}return t}function lye(e,t){let n=0;if(e===null||e.type!==Ht||!Lu(e.value,0,aye)||(e=t(++n),e===null))return 0;if(Ux(e,sye))return e=t(++n),e===null?0:e.type===Ht?Fp(hd(e,0,!0),++n,t):Ux(e,y4)?Fp(1,++n,t):0;if(e.type===fn){const r=hd(e,1,!0);return r===0?0:(e=t(++n),e===null?n:e.type===Mn||e.type===fn?!oye(e,g4)||!hd(e,1,!1)?0:n+1:Fp(r,n,t))}return e.type===Mn?Fp(hd(e,1,!0),++n,t):0}const cye=["calc(","-moz-calc(","-webkit-calc("],W_=new Map([[Dn,lr],[gi,lr],[Is,Na],[qi,Js]]),uye=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],hye=["deg","grad","rad","turn"],dye=["s","ms"],fye=["hz","khz"],pye=["dpi","dpcm","dppx","x"],mye=["fr"],gye=["db"],yye=["st"];function Ea(e,t){return t<e.length?e.charCodeAt(t):0}function b4(e,t){return df(e,0,e.length,t)}function v4(e,t){for(let n=0;n<t.length;n++)if(b4(e,t[n]))return!0;return!1}function x4(e,t){return t!==e.length-2?!1:Ea(e,t)===92&&xi(Ea(e,t+1))}function E0(e,t,n){if(e&&e.type==="Range"){const r=Number(n!==void 0&&n!==t.length?t.substr(0,n):t);if(isNaN(r)||e.min!==null&&r<e.min&&typeof e.min!="string"||e.max!==null&&r>e.max&&typeof e.max!="string")return!0}return!1}function bye(e,t){let n=0,r=[],i=0;e:do{switch(e.type){case Js:case lr:case Na:if(e.type!==n)break e;if(n=r.pop(),r.length===0){i++;break e}break;case Dn:case gi:case Is:case qi:r.push(n),n=W_.get(e.type);break}i++}while(e=t(i));return i}function Ds(e){return function(t,n,r){return t===null?0:t.type===Dn&&v4(t.value,cye)?bye(t,n):e(t,n,r)}}function yr(e){return function(t){return t===null||t.type!==e?0:1}}function vye(e){if(e===null||e.type!==Ht)return 0;const t=e.value.toLowerCase();return v4(t,m4)||b4(t,"default")?0:1}function xye(e){return e===null||e.type!==Ht||Ea(e.value,0)!==45||Ea(e.value,1)!==45?0:1}function wye(e){if(e===null||e.type!==_r)return 0;const t=e.value.length;if(t!==4&&t!==5&&t!==7&&t!==9)return 0;for(let n=1;n<t;n++)if(!gl(Ea(e.value,n)))return 0;return 1}function _ye(e){return e===null||e.type!==_r||!pm(Ea(e.value,1),Ea(e.value,2),Ea(e.value,3))?0:1}function kye(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case _0:case os:break e;case Js:case lr:case Na:if(e.type!==n)break e;n=r.pop();break;case ps:if(n===0)break e;break;case Hn:if(n===0&&e.value==="!")break e;break;case Dn:case gi:case Is:case qi:r.push(n),n=W_.get(e.type);break}i++}while(e=t(i));return i}function Sye(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case _0:case os:break e;case Js:case lr:case Na:if(e.type!==n)break e;n=r.pop();break;case Dn:case gi:case Is:case qi:r.push(n),n=W_.get(e.type);break}i++}while(e=t(i));return i}function fo(e){return e&&(e=new Set(e)),function(t,n,r){if(t===null||t.type!==Mn)return 0;const i=k0(t.value,0);if(e!==null){const s=t.value.indexOf("\\",i),a=s===-1||!x4(t.value,s)?t.value.substr(i):t.value.substring(i,s);if(e.has(a.toLowerCase())===!1)return 0}return E0(r,t.value,i)?0:1}}function Cye(e,t,n){return e===null||e.type!==zr||E0(n,e.value,e.value.length-1)?0:1}function WT(e){return typeof e!="function"&&(e=function(){return 0}),function(t,n,r){return t!==null&&t.type===fn&&Number(t.value)===0?1:e(t,n,r)}}function Eye(e,t,n){if(e===null)return 0;const r=k0(e.value,0);return!(r===e.value.length)&&!x4(e.value,r)||E0(n,e.value,r)?0:1}function Tye(e,t,n){if(e===null||e.type!==fn)return 0;let r=Ea(e.value,0)===43||Ea(e.value,0)===45?1:0;for(;r<e.value.length;r++)if(!xi(Ea(e.value,r)))return 0;return E0(n,e.value,r)?0:1}const VT={"ident-token":yr(Ht),"function-token":yr(Dn),"at-keyword-token":yr(ci),"hash-token":yr(_r),"string-token":yr(Pa),"bad-string-token":yr(_0),"url-token":yr(Ci),"bad-url-token":yr(os),"delim-token":yr(Hn),"number-token":yr(fn),"percentage-token":yr(zr),"dimension-token":yr(Mn),"whitespace-token":yr(Xr),"CDO-token":yr(Mf),"CDC-token":yr(ls),"colon-token":yr(Gi),"semicolon-token":yr(ps),"comma-token":yr(oo),"[-token":yr(Is),"]-token":yr(Na),"(-token":yr(gi),")-token":yr(lr),"{-token":yr(qi),"}-token":yr(Js),string:yr(Pa),ident:yr(Ht),"custom-ident":vye,"custom-property-name":xye,"hex-color":wye,"id-selector":_ye,"an-plus-b":iye,urange:lye,"declaration-value":kye,"any-value":Sye,dimension:Ds(fo(null)),angle:Ds(fo(hye)),decibel:Ds(fo(gye)),frequency:Ds(fo(fye)),flex:Ds(fo(mye)),length:Ds(WT(fo(uye))),resolution:Ds(fo(pye)),semitones:Ds(fo(yye)),time:Ds(fo(dye)),percentage:Ds(Cye),zero:WT(),number:Ds(Eye),integer:Ds(Tye)};function jye(e,t,n){return Object.assign(C0("SyntaxError",e),{input:t,offset:n,rawMessage:e,message:e+`
  `+t+`
--`+new Array((n||t.length)+1).join("-")+"^"})}const Aye=9,Pye=10,Nye=12,Oye=13,Rye=32;class Mye{constructor(t){this.str=t,this.pos=0}charCodeAt(t){return t<this.str.length?this.str.charCodeAt(t):0}charCode(){return this.charCodeAt(this.pos)}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(t){return this.charCodeAt(this.findWsEnd(t))}findWsEnd(t){for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n!==Oye&&n!==Pye&&n!==Nye&&n!==Rye&&n!==Aye)break}return t}substringToPos(t){return this.str.substring(this.pos,this.pos=t)}eat(t){this.charCode()!==t&&this.error("Expect `"+String.fromCharCode(t)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(t){throw new jye(t,this.str,this.pos)}}const Lye=9,Iye=10,$ye=12,Dye=13,zye=32,w4=33,V_=35,GT=38,Cg=39,_4=40,Fye=41,k4=42,G_=43,q_=44,qT=45,Y_=60,S4=62,Hx=63,Bye=64,T0=91,X_=93,Eg=123,YT=124,XT=125,KT=8734,pf=new Uint8Array(128).map((e,t)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(t))?1:0),ZT={" ":1,"&&":2,"||":3,"|":4};function Tg(e){return e.substringToPos(e.findWsEnd(e.pos))}function Zu(e){let t=e.pos;for(;t<e.str.length;t++){const n=e.str.charCodeAt(t);if(n>=128||pf[n]===0)break}return e.pos===t&&e.error("Expect a keyword"),e.substringToPos(t)}function jg(e){let t=e.pos;for(;t<e.str.length;t++){const n=e.str.charCodeAt(t);if(n<48||n>57)break}return e.pos===t&&e.error("Expect a number"),e.substringToPos(t)}function Uye(e){const t=e.str.indexOf("'",e.pos+1);return t===-1&&(e.pos=e.str.length,e.error("Expect an apostrophe")),e.substringToPos(t+1)}function QT(e){let t=null,n=null;return e.eat(Eg),t=jg(e),e.charCode()===q_?(e.pos++,e.charCode()!==XT&&(n=jg(e))):n=t,e.eat(XT),{min:Number(t),max:n?Number(n):0}}function Hye(e){let t=null,n=!1;switch(e.charCode()){case k4:e.pos++,t={min:0,max:0};break;case G_:e.pos++,t={min:1,max:0};break;case Hx:e.pos++,t={min:0,max:1};break;case V_:e.pos++,n=!0,e.charCode()===Eg?t=QT(e):e.charCode()===Hx?(e.pos++,t={min:0,max:0}):t={min:1,max:0};break;case Eg:t=QT(e);break;default:return null}return{type:"Multiplier",comma:n,min:t.min,max:t.max,term:null}}function Qu(e,t){const n=Hye(e);return n!==null?(n.term=t,e.charCode()===V_&&e.charCodeAt(e.pos-1)===G_?Qu(e,n):n):t}function wb(e){const t=e.peek();return t===""?null:{type:"Token",value:t}}function Wye(e){let t;return e.eat(Y_),e.eat(Cg),t=Zu(e),e.eat(Cg),e.eat(S4),Qu(e,{type:"Property",name:t})}function Vye(e){let t=null,n=null,r=1;return e.eat(T0),e.charCode()===qT&&(e.peek(),r=-1),r==-1&&e.charCode()===KT?e.peek():(t=r*Number(jg(e)),pf[e.charCode()]!==0&&(t+=Zu(e))),Tg(e),e.eat(q_),Tg(e),e.charCode()===KT?e.peek():(r=1,e.charCode()===qT&&(e.peek(),r=-1),n=r*Number(jg(e)),pf[e.charCode()]!==0&&(n+=Zu(e))),e.eat(X_),{type:"Range",min:t,max:n}}function Gye(e){let t,n=null;return e.eat(Y_),t=Zu(e),e.charCode()===_4&&e.nextCharCode()===Fye&&(e.pos+=2,t+="()"),e.charCodeAt(e.findWsEnd(e.pos))===T0&&(Tg(e),n=Vye(e)),e.eat(S4),Qu(e,{type:"Type",name:t,opts:n})}function qye(e){const t=Zu(e);return e.charCode()===_4?(e.pos++,{type:"Function",name:t}):Qu(e,{type:"Keyword",name:t})}function Yye(e,t){function n(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let r;for(t=Object.keys(t).sort((i,s)=>ZT[i]-ZT[s]);t.length>0;){r=t.shift();let i=0,s=0;for(;i<e.length;i++){const a=e[i];a.type==="Combinator"&&(a.value===r?(s===-1&&(s=i-1),e.splice(i,1),i--):(s!==-1&&i-s>1&&(e.splice(s,i-s,n(e.slice(s,i),r)),i=s+1),s=-1))}s!==-1&&t.length&&e.splice(s,i-s,n(e.slice(s,i),r))}return r}function C4(e){const t=[],n={};let r,i=null,s=e.pos;for(;r=Kye(e);)r.type!=="Spaces"&&(r.type==="Combinator"?((i===null||i.type==="Combinator")&&(e.pos=s,e.error("Unexpected combinator")),n[r.value]=!0):i!==null&&i.type!=="Combinator"&&(n[" "]=!0,t.push({type:"Combinator",value:" "})),t.push(r),i=r,s=e.pos);return i!==null&&i.type==="Combinator"&&(e.pos-=s,e.error("Unexpected combinator")),{type:"Group",terms:t,combinator:Yye(t,n)||" ",disallowEmpty:!1,explicit:!1}}function Xye(e){let t;return e.eat(T0),t=C4(e),e.eat(X_),t.explicit=!0,e.charCode()===w4&&(e.pos++,t.disallowEmpty=!0),t}function Kye(e){let t=e.charCode();if(t<128&&pf[t]===1)return qye(e);switch(t){case X_:break;case T0:return Qu(e,Xye(e));case Y_:return e.nextCharCode()===Cg?Wye(e):Gye(e);case YT:return{type:"Combinator",value:e.substringToPos(e.pos+(e.nextCharCode()===YT?2:1))};case GT:return e.pos++,e.eat(GT),{type:"Combinator",value:"&&"};case q_:return e.pos++,{type:"Comma"};case Cg:return Qu(e,{type:"String",value:Uye(e)});case zye:case Lye:case Iye:case Dye:case $ye:return{type:"Spaces",value:Tg(e)};case Bye:return t=e.nextCharCode(),t<128&&pf[t]===1?(e.pos++,{type:"AtKeyword",name:Zu(e)}):wb(e);case k4:case G_:case Hx:case V_:case w4:break;case Eg:if(t=e.nextCharCode(),t<48||t>57)return wb(e);break;default:return wb(e)}}function E4(e){const t=new Mye(e),n=C4(t);return t.pos!==e.length&&t.error("Unexpected input"),n.terms.length===1&&n.terms[0].type==="Group"?n.terms[0]:n}const dd=function(){};function JT(e){return typeof e=="function"?e:dd}function Zye(e,t,n){function r(a){switch(i.call(n,a),a.type){case"Group":a.terms.forEach(r);break;case"Multiplier":r(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(n,a)}let i=dd,s=dd;if(typeof t=="function"?i=t:t&&(i=JT(t.enter),s=JT(t.leave)),i===dd&&s===dd)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");r(e)}const Qye={decorator(e){const t=[];let n=null;return{...e,node(r){const i=n;n=r,e.node.call(this,r),n=i},emit(r,i,s){t.push({type:i,value:r,node:s?null:n})},result(){return t}}}};function Jye(e){const t=[];return S0(e,(n,r,i)=>t.push({type:n,value:e.slice(r,i),node:null})),t}function ebe(e,t){return typeof e=="string"?Jye(e):t.generate(e,Qye)}const Zn={type:"Match"},or={type:"Mismatch"},K_={type:"DisallowEmpty"},tbe=40,nbe=41;function zi(e,t,n){return t===Zn&&n===or||e===Zn&&t===Zn&&n===Zn?e:(e.type==="If"&&e.else===or&&t===Zn&&(t=e.then,e=e.match),{type:"If",match:e,then:t,else:n})}function T4(e){return e.length>2&&e.charCodeAt(e.length-2)===tbe&&e.charCodeAt(e.length-1)===nbe}function e5(e){return e.type==="Keyword"||e.type==="AtKeyword"||e.type==="Function"||e.type==="Type"&&T4(e.name)}function Wx(e,t,n){switch(e){case" ":{let r=Zn;for(let i=t.length-1;i>=0;i--){const s=t[i];r=zi(s,r,or)}return r}case"|":{let r=or,i=null;for(let s=t.length-1;s>=0;s--){let a=t[s];if(e5(a)&&(i===null&&s>0&&e5(t[s-1])&&(i=Object.create(null),r=zi({type:"Enum",map:i},Zn,r)),i!==null)){const o=(T4(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,r=zi(a,Zn,r)}return r}case"&&":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!0};let r=or;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Wx(e,t.filter(function(o){return o!==s}),!1):a=Zn,r=zi(s,a,r)}return r}case"||":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!1};let r=n?Zn:or;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Wx(e,t.filter(function(o){return o!==s}),!0):a=Zn,r=zi(s,a,r)}return r}}}function rbe(e){let t=Zn,n=Z_(e.term);if(e.max===0)n=zi(n,K_,or),t=zi(n,null,or),t.then=zi(Zn,Zn,t),e.comma&&(t.then.else=zi({type:"Comma",syntax:e},t,or));else for(let r=e.min||1;r<=e.max;r++)e.comma&&t!==Zn&&(t=zi({type:"Comma",syntax:e},t,or)),t=zi(n,zi(Zn,Zn,t),or);if(e.min===0)t=zi(Zn,Zn,t);else for(let r=0;r<e.min-1;r++)e.comma&&t!==Zn&&(t=zi({type:"Comma",syntax:e},t,or)),t=zi(n,t,or);return t}function Z_(e){if(typeof e=="function")return{type:"Generic",fn:e};switch(e.type){case"Group":{let t=Wx(e.combinator,e.terms.map(Z_),!1);return e.disallowEmpty&&(t=zi(t,K_,or)),t}case"Multiplier":return rbe(e);case"Type":case"Property":return{type:e.type,name:e.name,syntax:e};case"Keyword":return{type:e.type,name:e.name.toLowerCase(),syntax:e};case"AtKeyword":return{type:e.type,name:"@"+e.name.toLowerCase(),syntax:e};case"Function":return{type:e.type,name:e.name.toLowerCase()+"(",syntax:e};case"String":return e.value.length===3?{type:"Token",value:e.value.charAt(1),syntax:e}:{type:e.type,value:e.value.substr(1,e.value.length-2).replace(/\\'/g,"'"),syntax:e};case"Token":return{type:e.type,value:e.value,syntax:e};case"Comma":return{type:e.type,syntax:e};default:throw new Error("Unknown node type:",e.type)}}function Vx(e,t){return typeof e=="string"&&(e=E4(e)),{type:"MatchGraph",match:Z_(e),syntax:t||null,source:e}}const{hasOwnProperty:t5}=Object.prototype,ibe=0,sbe=1,Gx=2,j4=3,n5="Match",abe="Mismatch",obe="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",r5=15e3;function lbe(e){let t=null,n=null,r=e;for(;r!==null;)n=r.prev,r.prev=t,t=r,r=n;return t}function _b(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=t.charCodeAt(n);let i=e.charCodeAt(n);if(i>=65&&i<=90&&(i=i|32),i!==r)return!1}return!0}function cbe(e){return e.type!==Hn?!1:e.value!=="?"}function i5(e){return e===null?!0:e.type===oo||e.type===Dn||e.type===gi||e.type===Is||e.type===qi||cbe(e)}function s5(e){return e===null?!0:e.type===lr||e.type===Na||e.type===Js||e.type===Hn&&e.value==="/"}function ube(e,t,n){function r(){do k++,x=k<e.length?e[k]:null;while(x!==null&&(x.type===Xr||x.type===Qi))}function i(I){const E=k+I;return E<e.length?e[E]:null}function s(I,E){return{nextState:I,matchStack:j,syntaxStack:p,thenStack:m,tokenIndex:k,prev:E}}function a(I){m={nextState:I,matchStack:j,syntaxStack:p,prev:m}}function o(I){g=s(I,g)}function u(){j={type:sbe,syntax:t.syntax,token:x,prev:j},r(),v=null,k>A&&(A=k)}function h(){p={syntax:t.syntax,opts:t.syntax.opts||p!==null&&p.opts||null,prev:p},j={type:Gx,syntax:t.syntax,token:j.token,prev:j}}function d(){j.type===Gx?j=j.prev:j={type:j4,syntax:p.syntax,token:j.token,prev:j},p=p.prev}let p=null,m=null,g=null,v=null,w=0,C=null,x=null,k=-1,A=0,j={type:ibe,syntax:null,token:null,prev:null};for(r();C===null&&++w<r5;)switch(t.type){case"Match":if(m===null){if(x!==null&&(k!==e.length-1||x.value!=="\\0"&&x.value!=="\\9")){t=or;break}C=n5;break}if(t=m.nextState,t===K_)if(m.matchStack===j){t=or;break}else t=Zn;for(;m.syntaxStack!==p;)d();m=m.prev;break;case"Mismatch":if(v!==null&&v!==!1)(g===null||k>g.tokenIndex)&&(g=v,v=!1);else if(g===null){C=abe;break}t=g.nextState,m=g.thenStack,p=g.syntaxStack,j=g.matchStack,k=g.tokenIndex,x=k<e.length?e[k]:null,g=g.prev;break;case"MatchGraph":t=t.match;break;case"If":t.else!==or&&o(t.else),t.then!==Zn&&a(t.then),t=t.match;break;case"MatchOnce":t={type:"MatchOnceBuffer",syntax:t,index:0,mask:0};break;case"MatchOnceBuffer":{const U=t.syntax.terms;if(t.index===U.length){if(t.mask===0||t.syntax.all){t=or;break}t=Zn;break}if(t.mask===(1<<U.length)-1){t=Zn;break}for(;t.index<U.length;t.index++){const D=1<<t.index;if(!(t.mask&D)){o(t),a({type:"AddMatchOnce",syntax:t.syntax,mask:t.mask|D}),t=U[t.index++];break}}break}case"AddMatchOnce":t={type:"MatchOnceBuffer",syntax:t.syntax,index:0,mask:t.mask};break;case"Enum":if(x!==null){let U=x.value.toLowerCase();if(U.indexOf("\\")!==-1&&(U=U.replace(/\\[09].*$/,"")),t5.call(t.map,U)){t=t.map[U];break}}t=or;break;case"Generic":{const U=p!==null?p.opts:null,D=k+Math.floor(t.fn(x,i,U));if(!isNaN(D)&&D>k){for(;k<D;)u();t=Zn}else t=or;break}case"Type":case"Property":{const U=t.type==="Type"?"types":"properties",D=t5.call(n,U)?n[U][t.name]:null;if(!D||!D.match)throw new Error("Bad syntax reference: "+(t.type==="Type"?"<"+t.name+">":"<'"+t.name+"'>"));if(v!==!1&&x!==null&&t.type==="Type"&&(t.name==="custom-ident"&&x.type===Ht||t.name==="length"&&x.value==="0")){v===null&&(v=s(t,g)),t=or;break}h(),t=D.match;break}case"Keyword":{const U=t.name;if(x!==null){let D=x.value;if(D.indexOf("\\")!==-1&&(D=D.replace(/\\[09].*$/,"")),_b(D,U)){u(),t=Zn;break}}t=or;break}case"AtKeyword":case"Function":if(x!==null&&_b(x.value,t.name)){u(),t=Zn;break}t=or;break;case"Token":if(x!==null&&x.value===t.value){u(),t=Zn;break}t=or;break;case"Comma":x!==null&&x.type===oo?i5(j.token)?t=or:(u(),t=s5(x)?or:Zn):t=i5(j.token)||s5(x)?Zn:or;break;case"String":let I="",E=k;for(;E<e.length&&I.length<t.value.length;E++)I+=e[E].value;if(_b(I,t.value)){for(;k<E;)u();t=Zn}else t=or;break;default:throw new Error("Unknown node type: "+t.type)}switch(C){case null:console.warn("[csstree-match] BREAK after "+r5+" iterations"),C=obe,j=null;break;case n5:for(;p!==null;)d();break;default:j=null}return{tokens:e,reason:C,iterations:w,match:j,longestMatch:A}}function a5(e,t,n){const r=ube(e,t,n||{});if(r.match===null)return r;let i=r.match,s=r.match={syntax:t.syntax||null,match:[]};const a=[s];for(i=lbe(i).prev;i!==null;){switch(i.type){case Gx:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case j4:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return r}function A4(e){function t(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function n(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(n(i.match[s]))return t(i.syntax)&&r.unshift(i.syntax),!0}else if(i.node===e)return r=t(i.syntax)?[i.syntax]:[],!0;return!1}let r=null;return this.matched!==null&&n(this.matched),r}function hbe(e,t){return Q_(this,e,n=>n.type==="Type"&&n.name===t)}function dbe(e,t){return Q_(this,e,n=>n.type==="Property"&&n.name===t)}function fbe(e){return Q_(this,e,t=>t.type==="Keyword")}function Q_(e,t,n){const r=A4.call(e,t);return r===null?!1:r.some(n)}const pbe=Object.freeze(Object.defineProperty({__proto__:null,getTrace:A4,isKeyword:fbe,isProperty:dbe,isType:hbe},Symbol.toStringTag,{value:"Module"}));function P4(e){return"node"in e?e.node:P4(e.match[0])}function N4(e){return"node"in e?e.node:N4(e.match[e.match.length-1])}function o5(e,t,n,r,i){function s(o){if(o.syntax!==null&&o.syntax.type===r&&o.syntax.name===i){const u=P4(o),h=N4(o);e.syntax.walk(t,function(d,p,m){if(d===u){const g=new Un;do{if(g.appendData(p.data),p.data===h)break;p=p.next}while(p!==null);a.push({parent:m,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return n.matched!==null&&s(n.matched),a}const{hasOwnProperty:Md}=Object.prototype;function kb(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&e>=0}function l5(e){return!!e&&kb(e.offset)&&kb(e.line)&&kb(e.column)}function mbe(e,t){return function(r,i){if(!r||r.constructor!==Object)return i(r,"Type of node should be an Object");for(let s in r){let a=!0;if(Md.call(r,s)!==!1){if(s==="type")r.type!==e&&i(r,"Wrong node type `"+r.type+"`, expected `"+e+"`");else if(s==="loc"){if(r.loc===null)continue;if(r.loc&&r.loc.constructor===Object)if(typeof r.loc.source!="string")s+=".source";else if(!l5(r.loc.start))s+=".start";else if(!l5(r.loc.end))s+=".end";else continue;a=!1}else if(t.hasOwnProperty(s)){a=!1;for(let o=0;!a&&o<t[s].length;o++){const u=t[s][o];switch(u){case String:a=typeof r[s]=="string";break;case Boolean:a=typeof r[s]=="boolean";break;case null:a=r[s]===null;break;default:typeof u=="string"?a=r[s]&&r[s].type===u:Array.isArray(u)&&(a=r[s]instanceof Un)}}}else i(r,"Unknown field `"+s+"` for "+e+" node type");a||i(r,"Bad value for `"+e+"."+s+"`")}}for(const s in t)Md.call(t,s)&&Md.call(r,s)===!1&&i(r,"Field `"+e+"."+s+"` is missed")}}function gbe(e,t){const n=t.structure,r={type:String,loc:!0},i={type:'"'+e+'"'};for(const s in n){if(Md.call(n,s)===!1)continue;const a=[],o=r[s]=Array.isArray(n[s])?n[s].slice():[n[s]];for(let u=0;u<o.length;u++){const h=o[u];if(h===String||h===Boolean)a.push(h.name);else if(h===null)a.push("null");else if(typeof h=="string")a.push("<"+h+">");else if(Array.isArray(h))a.push("List");else throw new Error("Wrong value `"+h+"` in `"+e+"."+s+"` structure definition")}i[s]=a.join(" | ")}return{docs:i,check:mbe(e,r)}}function ybe(e){const t={};if(e.node){for(const n in e.node)if(Md.call(e.node,n)){const r=e.node[n];if(r.structure)t[n]=gbe(n,r);else throw new Error("Missed `structure` field in `"+n+"` node type definition")}}return t}const bbe=Vx(m4.join(" | "));function qx(e,t,n){const r={};for(const i in e)e[i].syntax&&(r[i]=n?e[i].syntax:U_(e[i].syntax,{compact:t}));return r}function vbe(e,t,n){const r={};for(const[i,s]of Object.entries(e))r[i]={prelude:s.prelude&&(n?s.prelude.syntax:U_(s.prelude.syntax,{compact:t})),descriptors:s.descriptors&&qx(s.descriptors,t,n)};return r}function xbe(e){for(let t=0;t<e.length;t++)if(e[t].value.toLowerCase()==="var(")return!0;return!1}function ma(e,t,n){return{matched:e,iterations:n,error:t,...pbe}}function Ic(e,t,n,r){const i=ebe(n,e.syntax);let s;return xbe(i)?ma(null,new Error("Matching for a tree with var() is not supported")):(r&&(s=a5(i,e.cssWideKeywordsSyntax,e)),(!r||!s.match)&&(s=a5(i,t.match,e),!s.match)?ma(null,new eye(s.reason,t.syntax,n,s),s.iterations):ma(s.match,null,s.iterations))}class c5{constructor(t,n,r){if(this.cssWideKeywordsSyntax=bbe,this.syntax=n,this.generic=!1,this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=r||ybe(t),t){if(t.types)for(const i in t.types)this.addType_(i,t.types[i]);if(t.generic){this.generic=!0;for(const i in VT)this.addType_(i,VT[i])}if(t.atrules)for(const i in t.atrules)this.addAtrule_(i,t.atrules[i]);if(t.properties)for(const i in t.properties)this.addProperty_(i,t.properties[i])}}checkStructure(t){function n(s,a){i.push({node:s,message:a})}const r=this.structure,i=[];return this.syntax.walk(t,function(s){r.hasOwnProperty(s.type)?r[s.type].check(s,n):n(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(t,n,r,i=null){const s={type:n,name:r},a={type:n,name:r,parent:i,serializable:typeof t=="string"||t&&typeof t.type=="string",syntax:null,match:null};return typeof t=="function"?a.match=Vx(t,s):(typeof t=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:E4(t)}),a.syntax}}):a.syntax=t,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:Vx(a.syntax,s)}),a.match}})),a}addAtrule_(t,n){n&&(this.atrules[t]={type:"Atrule",name:t,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",t):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((r,i)=>(r[i]=this.createDescriptor(n.descriptors[i],"AtruleDescriptor",i,t),r),Object.create(null)):null})}addProperty_(t,n){n&&(this.properties[t]=this.createDescriptor(n,"Property",t))}addType_(t,n){n&&(this.types[t]=this.createDescriptor(n,"Type",t))}checkAtruleName(t){if(!this.getAtrule(t))return new Hh("Unknown at-rule","@"+t)}checkAtrulePrelude(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t);if(!i.prelude&&n)return new SyntaxError("At-rule `@"+t+"` should not contain a prelude");if(i.prelude&&!n&&!Ic(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+t+"` should contain a prelude")}checkAtruleDescriptorName(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t),s=Ca(n);if(!i.descriptors)return new SyntaxError("At-rule `@"+t+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new Hh("Unknown at-rule descriptor",n)}checkPropertyName(t){if(!this.getProperty(t))return new Hh("Unknown property",t)}matchAtrulePrelude(t,n){const r=this.checkAtrulePrelude(t,n);if(r)return ma(null,r);const i=this.getAtrule(t);return i.prelude?Ic(this,i.prelude,n||"",!1):ma(null,null)}matchAtruleDescriptor(t,n,r){const i=this.checkAtruleDescriptorName(t,n);if(i)return ma(null,i);const s=this.getAtrule(t),a=Ca(n);return Ic(this,s.descriptors[a.name]||s.descriptors[a.basename],r,!1)}matchDeclaration(t){return t.type!=="Declaration"?ma(null,new Error("Not a Declaration node")):this.matchProperty(t.property,t.value)}matchProperty(t,n){if(Ku(t).custom)return ma(null,new Error("Lexer matching doesn't applicable for custom properties"));const r=this.checkPropertyName(t);return r?ma(null,r):Ic(this,this.getProperty(t),n,!0)}matchType(t,n){const r=this.getType(t);return r?Ic(this,r,n,!1):ma(null,new Hh("Unknown type",t))}match(t,n){return typeof t!="string"&&(!t||!t.type)?ma(null,new Hh("Bad syntax")):((typeof t=="string"||!t.match)&&(t=this.createDescriptor(t,"Type","anonymous")),Ic(this,t,n,!1))}findValueFragments(t,n,r,i){return o5(this,n,this.matchProperty(t,n),r,i)}findDeclarationValueFragments(t,n,r){return o5(this,t.value,this.matchDeclaration(t),n,r)}findAllFragments(t,n,r){const i=[];return this.syntax.walk(t,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,n,r))}}),i}getAtrule(t,n=!0){const r=Ca(t);return(r.vendor&&n?this.atrules[r.name]||this.atrules[r.basename]:this.atrules[r.name])||null}getAtrulePrelude(t,n=!0){const r=this.getAtrule(t,n);return r&&r.prelude||null}getAtruleDescriptor(t,n){return this.atrules.hasOwnProperty(t)&&this.atrules.declarators&&this.atrules[t].declarators[n]||null}getProperty(t,n=!0){const r=Ku(t);return(r.vendor&&n?this.properties[r.name]||this.properties[r.basename]:this.properties[r.name])||null}getType(t){return hasOwnProperty.call(this.types,t)?this.types[t]:null}validate(){function t(i,s,a,o){if(a.has(s))return a.get(s);a.set(s,!1),o.syntax!==null&&Zye(o.syntax,function(u){if(u.type!=="Type"&&u.type!=="Property")return;const h=u.type==="Type"?i.types:i.properties,d=u.type==="Type"?n:r;(!hasOwnProperty.call(h,u.name)||t(i,u.name,d,h[u.name]))&&a.set(s,!0)},this)}let n=new Map,r=new Map;for(const i in this.types)t(this,i,n,this.types[i]);for(const i in this.properties)t(this,i,r,this.properties[i]);return n=[...n.keys()].filter(i=>n.get(i)),r=[...r.keys()].filter(i=>r.get(i)),n.length||r.length?{types:n,properties:r}:null}dump(t,n){return{generic:this.generic,types:qx(this.types,!n,t),properties:qx(this.properties,!n,t),atrules:vbe(this.atrules,!n,t)}}toString(){return JSON.stringify(this.dump())}}const{hasOwnProperty:Iu}=Object.prototype,wbe={generic:!0,types:Yx,atrules:{prelude:h5,descriptors:h5},properties:Yx,parseContext:_be,scope:R4,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function j0(e){return e&&e.constructor===Object}function O4(e){return j0(e)?{...e}:e}function _be(e,t){return Object.assign(e,t)}function R4(e,t){for(const n in t)Iu.call(t,n)&&(j0(e[n])?R4(e[n],t[n]):e[n]=O4(t[n]));return e}function u5(e,t){return typeof t=="string"&&/^\s*\|/.test(t)?typeof e=="string"?e+t:t.replace(/^\s*\|\s*/,""):t||null}function Yx(e,t){if(typeof t=="string")return u5(e,t);const n={...e};for(let r in t)Iu.call(t,r)&&(n[r]=u5(Iu.call(e,r)?e[r]:void 0,t[r]));return n}function h5(e,t){const n=Yx(e,t);return!j0(n)||Object.keys(n).length?n:null}function fd(e,t,n){for(const r in n)if(Iu.call(n,r)!==!1){if(n[r]===!0)Iu.call(t,r)&&(e[r]=O4(t[r]));else if(n[r]){if(typeof n[r]=="function"){const i=n[r];e[r]=i({},e[r]),e[r]=i(e[r]||{},t[r])}else if(j0(n[r])){const i={};for(let s in e[r])i[s]=fd({},e[r][s],n[r]);for(let s in t[r])i[s]=fd(i[s]||{},t[r][s],n[r]);e[r]=i}else if(Array.isArray(n[r])){const i={},s=n[r].reduce(function(a,o){return a[o]=!0,a},{});for(const[a,o]of Object.entries(e[r]||{}))i[a]={},o&&fd(i[a],o,s);for(const a in t[r])Iu.call(t[r],a)&&(i[a]||(i[a]={}),t[r]&&t[r][a]&&fd(i[a],t[r][a],s));e[r]=i}}}return e}const Xx=(e,t)=>fd(e,t,wbe);function M4(e){const t=L0e(e),n=Y0e(e),r=W0e(e),{fromPlainObject:i,toPlainObject:s}=V0e(n),a={lexer:null,createLexer:o=>new c5(o,a,a.lexer.structure),tokenize:S0,parse:t,generate:r,walk:n,find:n.find,findLast:n.findLast,findAll:n.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const u=Xx({},e);return M4(typeof o=="function"?o(u,Object.assign):Xx(u,o))}};return a.lexer=new c5({generic:!0,types:e.types,atrules:e.atrules,properties:e.properties,node:e.node},a),a}const kbe=e=>M4(Xx({},e)),Sbe={generic:!0,types:{"absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|( <calc-sum> )","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>",combinator:"'>'|'+'|'~'|['||']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<compound-selector> [<combinator>? <compound-selector>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fit-content()":"fit-content( [<length>|<percentage>] )","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value> )]|( <ident> <any-value> )","generic-family":"serif|sans-serif|cursive|fantasy|monospace|-apple-system","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length>|<percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length>|<percentage>|min-content|max-content|auto] , [<length>|<percentage>|<flex>|min-content|max-content|auto] )","name-repeat":"repeat( [<integer [1,]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( <length> )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","saturate()":"saturate( <number-percentage> )","scale()":"scale( <number> , <number>? )","scale3d()":"scale3d( <number> , <number> , <number> )","scaleX()":"scaleX( <number> )","scaleY()":"scaleY( <number> )","scaleZ()":"scaleZ( <number> )","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","single-animation":"<time>||<easing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<timeline-name>","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-name":"<custom-ident>|<string>","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( [<length>|<percentage>] )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-width":"fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-webkit-mask-clip-style":"border|border-box|padding|padding-box|content|content-box|text","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","-ms-filter":"<string>",age:"child|young|old","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text","border-radius":"<length-percentage>{1,2}",bottom:"<length>|auto","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )",left:"<length>|auto","mask-image":"<mask-reference>#",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke",ratio:"<number [0,]> [/ <number [0,]>]?","reversed-counter-name":"reversed( <counter-name> )",right:"<length>|auto","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto","track-group":"'(' [<string>* <track-minmax> <string>*]+ ')' ['[' <positive-integer> ']']?|<track-minmax>","track-list-v0":"[<string>* <track-group> <string>*]+|none","track-minmax":"minmax( <track-breadth> , <track-breadth> )|auto|<track-breadth>|fit-content",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,]>","positive-integer":"<integer [0,]>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer",animation:"<single-animation>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto|<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-overflow":"clip|ellipsis|<string>","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end","caret-color":"auto|<color>",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none",color:"<color>","print-color-adjust":"economy|exact","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance|balance-all","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[size||layout||style||paint]",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","empty-cells":"show|hide",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps]","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","hyphenate-character":"auto|<string>",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|ray( [<angle>&&<size>&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]","offset-position":"auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-color'>||<'outline-style'>||<'outline-width'>]","outline-color":"<color>|invert","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky",quotes:"none|auto|[<string> <string>]+",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",scale:"none|<number>{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"[over|under]&&[right|left]","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|fill|stretch|intrinsic|-moz-max-content|-webkit-max-content|-moz-fit-content|-webkit-fit-content","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+","clip-rule":"nonzero|evenodd",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|none|normal","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<number-zero-one>","stroke-width":"<svg-length>","text-anchor":"start|middle|end","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<string>"}},"scroll-timeline":{prelude:"<timeline-name>",descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},viewport:{prelude:null,descriptors:{height:"<viewport-length>{1,2}","max-height":"<viewport-length>","max-width":"<viewport-length>","max-zoom":"auto|<number>|<percentage>","min-height":"<viewport-length>","min-width":"<viewport-length>","min-zoom":"auto|<number>|<percentage>",orientation:"auto|portrait|landscape","user-zoom":"zoom|fixed","viewport-fit":"auto|contain|cover",width:"<viewport-length>{1,2}",zoom:"auto|<number>|<percentage>"}}}},Ka=43,Ss=45,gm=110,Fl=!0,Cbe=!1;function ym(e,t){let n=this.tokenStart+e;const r=this.charCodeAt(n);for((r===Ka||r===Ss)&&(t&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)xi(this.charCodeAt(n))||this.error("Integer is expected",n)}function ku(e){return ym.call(this,0,e)}function Bo(e,t){if(!this.cmpChar(this.tokenStart+e,t)){let n="";switch(t){case gm:n="N is expected";break;case Ss:n="HyphenMinus is expected";break}this.error(n,this.tokenStart+e)}}function Sb(){let e=0,t=0,n=this.tokenType;for(;n===Xr||n===Qi;)n=this.lookupType(++e);if(n!==fn)if(this.isDelim(Ka,e)||this.isDelim(Ss,e)){t=this.isDelim(Ka,e)?Ka:Ss;do n=this.lookupType(++e);while(n===Xr||n===Qi);n!==fn&&(this.skip(e),ku.call(this,Fl))}else return null;return e>0&&this.skip(e),t===0&&(n=this.charCodeAt(this.tokenStart),n!==Ka&&n!==Ss&&this.error("Number sign is expected")),ku.call(this,t!==0),t===Ss?"-"+this.consume(fn):this.consume(fn)}const Ebe="AnPlusB",Tbe={a:[String,null],b:[String,null]};function L4(){const e=this.tokenStart;let t=null,n=null;if(this.tokenType===fn)ku.call(this,Cbe),n=this.consume(fn);else if(this.tokenType===Ht&&this.cmpChar(this.tokenStart,Ss))switch(t="-1",Bo.call(this,1,gm),this.tokenEnd-this.tokenStart){case 2:this.next(),n=Sb.call(this);break;case 3:Bo.call(this,2,Ss),this.next(),this.skipSC(),ku.call(this,Fl),n="-"+this.consume(fn);break;default:Bo.call(this,2,Ss),ym.call(this,3,Fl),this.next(),n=this.substrToCursor(e+2)}else if(this.tokenType===Ht||this.isDelim(Ka)&&this.lookupType(1)===Ht){let r=0;switch(t="1",this.isDelim(Ka)&&(r=1,this.next()),Bo.call(this,0,gm),this.tokenEnd-this.tokenStart){case 1:this.next(),n=Sb.call(this);break;case 2:Bo.call(this,1,Ss),this.next(),this.skipSC(),ku.call(this,Fl),n="-"+this.consume(fn);break;default:Bo.call(this,1,Ss),ym.call(this,2,Fl),this.next(),n=this.substrToCursor(e+r+1)}}else if(this.tokenType===Mn){const r=this.charCodeAt(this.tokenStart),i=r===Ka||r===Ss;let s=this.tokenStart+i;for(;s<this.tokenEnd&&xi(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),Bo.call(this,s-this.tokenStart,gm),t=this.substring(e,s),s+1===this.tokenEnd?(this.next(),n=Sb.call(this)):(Bo.call(this,s-this.tokenStart+1,Ss),s+2===this.tokenEnd?(this.next(),this.skipSC(),ku.call(this,Fl),n="-"+this.consume(fn)):(ym.call(this,s-this.tokenStart+2,Fl),this.next(),n=this.substrToCursor(s+1)))}else this.error();return t!==null&&t.charCodeAt(0)===Ka&&(t=t.substr(1)),n!==null&&n.charCodeAt(0)===Ka&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(e,this.tokenStart),a:t,b:n}}function jbe(e){if(e.a){const t=e.a==="+1"&&"n"||e.a==="1"&&"n"||e.a==="-1"&&"-n"||e.a+"n";if(e.b){const n=e.b[0]==="-"||e.b[0]==="+"?e.b:"+"+e.b;this.tokenize(t+n)}else this.tokenize(t)}else this.tokenize(e.b)}const Abe=Object.freeze(Object.defineProperty({__proto__:null,generate:jbe,name:Ebe,parse:L4,structure:Tbe},Symbol.toStringTag,{value:"Module"}));function d5(e){return this.Raw(e,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function Pbe(){for(let e=1,t;t=this.lookupType(e);e++){if(t===Js)return!0;if(t===qi||t===ci)return!1}return!1}const Nbe="Atrule",Obe="atrule",Rbe={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function I4(){const e=this.tokenStart;let t,n,r=null,i=null;switch(this.eat(ci),t=this.substrToCursor(e+1),n=t.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==qi&&this.tokenType!==ps&&(this.parseAtrulePrelude?r=this.parseWithFallback(this.AtrulePrelude.bind(this,t),d5):r=d5.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case ps:this.next();break;case qi:hasOwnProperty.call(this.atrule,n)&&typeof this.atrule[n].block=="function"?i=this.atrule[n].block.call(this):i=this.Block(Pbe.call(this));break}return{type:"Atrule",loc:this.getLocation(e,this.tokenStart),name:t,prelude:r,block:i}}function Mbe(e){this.token(ci,"@"+e.name),e.prelude!==null&&this.node(e.prelude),e.block?this.node(e.block):this.token(ps,";")}const Lbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Mbe,name:Nbe,parse:I4,structure:Rbe,walkContext:Obe},Symbol.toStringTag,{value:"Module"})),Ibe="AtrulePrelude",$be="atrulePrelude",Dbe={children:[[]]};function $4(e){let t=null;return e!==null&&(e=e.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,e)&&typeof this.atrule[e].prelude=="function"?t=this.atrule[e].prelude.call(this):t=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==qi&&this.tokenType!==ps&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(t),children:t}}function zbe(e){this.children(e)}const Fbe=Object.freeze(Object.defineProperty({__proto__:null,generate:zbe,name:Ibe,parse:$4,structure:Dbe,walkContext:$be},Symbol.toStringTag,{value:"Module"})),Bbe=36,D4=42,bm=61,Ube=94,Kx=124,Hbe=126;function Wbe(){this.eof&&this.error("Unexpected end of input");const e=this.tokenStart;let t=!1;return this.isDelim(D4)?(t=!0,this.next()):this.isDelim(Kx)||this.eat(Ht),this.isDelim(Kx)?this.charCodeAt(this.tokenStart+1)!==bm?(this.next(),this.eat(Ht)):t&&this.error("Identifier is expected",this.tokenEnd):t&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function Vbe(){const e=this.tokenStart,t=this.charCodeAt(e);return t!==bm&&t!==Hbe&&t!==Ube&&t!==Bbe&&t!==D4&&t!==Kx&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),t!==bm&&(this.isDelim(bm)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(e)}const Gbe="AttributeSelector",qbe={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function z4(){const e=this.tokenStart;let t,n=null,r=null,i=null;return this.eat(Is),this.skipSC(),t=Wbe.call(this),this.skipSC(),this.tokenType!==Na&&(this.tokenType!==Ht&&(n=Vbe.call(this),this.skipSC(),r=this.tokenType===Pa?this.String():this.Identifier(),this.skipSC()),this.tokenType===Ht&&(i=this.consume(Ht),this.skipSC())),this.eat(Na),{type:"AttributeSelector",loc:this.getLocation(e,this.tokenStart),name:t,matcher:n,value:r,flags:i}}function Ybe(e){this.token(Hn,"["),this.node(e.name),e.matcher!==null&&(this.tokenize(e.matcher),this.node(e.value)),e.flags!==null&&this.token(Ht,e.flags),this.token(Hn,"]")}const Xbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ybe,name:Gbe,parse:z4,structure:qbe},Symbol.toStringTag,{value:"Module"}));function F4(e){return this.Raw(e,null,!0)}function Kbe(){return this.parseWithFallback(this.Rule,F4)}function f5(e){return this.Raw(e,this.consumeUntilSemicolonIncluded,!0)}function Zbe(){if(this.tokenType===ps)return f5.call(this,this.tokenIndex);const e=this.parseWithFallback(this.Declaration,f5);return this.tokenType===ps&&this.next(),e}const Qbe="Block",Jbe="block",eve={children:[["Atrule","Rule","Declaration"]]};function B4(e){const t=e?Zbe:Kbe,n=this.tokenStart;let r=this.createList();this.eat(qi);e:for(;!this.eof;)switch(this.tokenType){case Js:break e;case Xr:case Qi:this.next();break;case ci:r.push(this.parseWithFallback(this.Atrule,F4));break;default:r.push(t.call(this))}return this.eof||this.eat(Js),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:r}}function tve(e){this.token(qi,"{"),this.children(e,t=>{t.type==="Declaration"&&this.token(ps,";")}),this.token(Js,"}")}const nve=Object.freeze(Object.defineProperty({__proto__:null,generate:tve,name:Qbe,parse:B4,structure:eve,walkContext:Jbe},Symbol.toStringTag,{value:"Module"})),rve="Brackets",ive={children:[[]]};function U4(e,t){const n=this.tokenStart;let r=null;return this.eat(Is),r=e.call(this,t),this.eof||this.eat(Na),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:r}}function sve(e){this.token(Hn,"["),this.children(e),this.token(Hn,"]")}const ave=Object.freeze(Object.defineProperty({__proto__:null,generate:sve,name:rve,parse:U4,structure:ive},Symbol.toStringTag,{value:"Module"})),ove="CDC",lve=[];function H4(){const e=this.tokenStart;return this.eat(ls),{type:"CDC",loc:this.getLocation(e,this.tokenStart)}}function cve(){this.token(ls,"-->")}const uve=Object.freeze(Object.defineProperty({__proto__:null,generate:cve,name:ove,parse:H4,structure:lve},Symbol.toStringTag,{value:"Module"})),hve="CDO",dve=[];function W4(){const e=this.tokenStart;return this.eat(Mf),{type:"CDO",loc:this.getLocation(e,this.tokenStart)}}function fve(){this.token(Mf,"<!--")}const pve=Object.freeze(Object.defineProperty({__proto__:null,generate:fve,name:hve,parse:W4,structure:dve},Symbol.toStringTag,{value:"Module"})),mve=46,gve="ClassSelector",yve={name:String};function V4(){return this.eatDelim(mve),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Ht)}}function bve(e){this.token(Hn,"."),this.token(Ht,e.name)}const vve=Object.freeze(Object.defineProperty({__proto__:null,generate:bve,name:gve,parse:V4,structure:yve},Symbol.toStringTag,{value:"Module"})),xve=43,p5=47,wve=62,_ve=126,kve="Combinator",Sve={name:String};function G4(){const e=this.tokenStart;let t;switch(this.tokenType){case Xr:t=" ";break;case Hn:switch(this.charCodeAt(this.tokenStart)){case wve:case xve:case _ve:this.next();break;case p5:this.next(),this.eatIdent("deep"),this.eatDelim(p5);break;default:this.error("Combinator is expected")}t=this.substrToCursor(e);break}return{type:"Combinator",loc:this.getLocation(e,this.tokenStart),name:t}}function Cve(e){this.tokenize(e.name)}const Eve=Object.freeze(Object.defineProperty({__proto__:null,generate:Cve,name:kve,parse:G4,structure:Sve},Symbol.toStringTag,{value:"Module"})),Tve=42,jve=47,Ave="Comment",Pve={value:String};function q4(){const e=this.tokenStart;let t=this.tokenEnd;return this.eat(Qi),t-e+2>=2&&this.charCodeAt(t-2)===Tve&&this.charCodeAt(t-1)===jve&&(t-=2),{type:"Comment",loc:this.getLocation(e,this.tokenStart),value:this.substring(e+2,t)}}function Nve(e){this.token(Qi,"/*"+e.value+"*/")}const Ove=Object.freeze(Object.defineProperty({__proto__:null,generate:Nve,name:Ave,parse:q4,structure:Pve},Symbol.toStringTag,{value:"Module"})),Y4=33,Rve=35,Mve=36,Lve=38,Ive=42,$ve=43,m5=47;function Dve(e){return this.Raw(e,this.consumeUntilExclamationMarkOrSemicolon,!0)}function zve(e){return this.Raw(e,this.consumeUntilExclamationMarkOrSemicolon,!1)}function Fve(){const e=this.tokenIndex,t=this.Value();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==ps&&this.isDelim(Y4)===!1&&this.isBalanceEdge(e)===!1&&this.error(),t}const Bve="Declaration",Uve="declaration",Hve={important:[Boolean,String],property:String,value:["Value","Raw"]};function X4(){const e=this.tokenStart,t=this.tokenIndex,n=Vve.call(this),r=H_(n),i=r?this.parseCustomProperty:this.parseValue,s=r?zve:Dve;let a=!1,o;this.skipSC(),this.eat(Gi);const u=this.tokenIndex;if(r||this.skipSC(),i?o=this.parseWithFallback(Fve,s):o=s.call(this,this.tokenIndex),r&&o.type==="Value"&&o.children.isEmpty){for(let h=u-this.tokenIndex;h<=0;h++)if(this.lookupType(h)===Xr){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(Y4)&&(a=Gve.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==ps&&this.isBalanceEdge(t)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(e,this.tokenStart),important:a,property:n,value:o}}function Wve(e){this.token(Ht,e.property),this.token(Gi,":"),this.node(e.value),e.important&&(this.token(Hn,"!"),this.token(Ht,e.important===!0?"important":e.important))}function Vve(){const e=this.tokenStart;if(this.tokenType===Hn)switch(this.charCodeAt(this.tokenStart)){case Ive:case Mve:case $ve:case Rve:case Lve:this.next();break;case m5:this.next(),this.isDelim(m5)&&this.next();break}return this.tokenType===_r?this.eat(_r):this.eat(Ht),this.substrToCursor(e)}function Gve(){this.eat(Hn),this.skipSC();const e=this.consume(Ht);return e==="important"?!0:e}const qve=Object.freeze(Object.defineProperty({__proto__:null,generate:Wve,name:Bve,parse:X4,structure:Hve,walkContext:Uve},Symbol.toStringTag,{value:"Module"}));function Yve(e){return this.Raw(e,this.consumeUntilSemicolonIncluded,!0)}const Xve="DeclarationList",Kve={children:[["Declaration"]]};function K4(){const e=this.createList();for(;!this.eof;)switch(this.tokenType){case Xr:case Qi:case ps:this.next();break;default:e.push(this.parseWithFallback(this.Declaration,Yve))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}}function Zve(e){this.children(e,t=>{t.type==="Declaration"&&this.token(ps,";")})}const Qve=Object.freeze(Object.defineProperty({__proto__:null,generate:Zve,name:Xve,parse:K4,structure:Kve},Symbol.toStringTag,{value:"Module"})),Jve="Dimension",exe={value:String,unit:String};function Z4(){const e=this.tokenStart,t=this.consumeNumber(Mn);return{type:"Dimension",loc:this.getLocation(e,this.tokenStart),value:t,unit:this.substring(e+t.length,this.tokenStart)}}function txe(e){this.token(Mn,e.value+e.unit)}const nxe=Object.freeze(Object.defineProperty({__proto__:null,generate:txe,name:Jve,parse:Z4,structure:exe},Symbol.toStringTag,{value:"Module"})),rxe="Function",ixe="function",sxe={name:String,children:[[]]};function Q4(e,t){const n=this.tokenStart,r=this.consumeFunctionName(),i=r.toLowerCase();let s;return s=t.hasOwnProperty(i)?t[i].call(this,t):e.call(this,t),this.eof||this.eat(lr),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:r,children:s}}function axe(e){this.token(Dn,e.name+"("),this.children(e),this.token(lr,")")}const oxe=Object.freeze(Object.defineProperty({__proto__:null,generate:axe,name:rxe,parse:Q4,structure:sxe,walkContext:ixe},Symbol.toStringTag,{value:"Module"})),lxe="XXX",cxe="Hash",uxe={value:String};function J4(){const e=this.tokenStart;return this.eat(_r),{type:"Hash",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e+1)}}function hxe(e){this.token(_r,"#"+e.value)}const dxe=Object.freeze(Object.defineProperty({__proto__:null,generate:hxe,name:cxe,parse:J4,structure:uxe,xxx:lxe},Symbol.toStringTag,{value:"Module"})),fxe="Identifier",pxe={name:String};function e6(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Ht)}}function mxe(e){this.token(Ht,e.name)}const gxe=Object.freeze(Object.defineProperty({__proto__:null,generate:mxe,name:fxe,parse:e6,structure:pxe},Symbol.toStringTag,{value:"Module"})),yxe="IdSelector",bxe={name:String};function t6(){const e=this.tokenStart;return this.eat(_r),{type:"IdSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e+1)}}function vxe(e){this.token(Hn,"#"+e.name)}const xxe=Object.freeze(Object.defineProperty({__proto__:null,generate:vxe,name:yxe,parse:t6,structure:bxe},Symbol.toStringTag,{value:"Module"})),wxe="MediaFeature",_xe={name:String,value:["Identifier","Number","Dimension","Ratio",null]};function n6(){const e=this.tokenStart;let t,n=null;if(this.eat(gi),this.skipSC(),t=this.consume(Ht),this.skipSC(),this.tokenType!==lr){switch(this.eat(Gi),this.skipSC(),this.tokenType){case fn:this.lookupNonWSType(1)===Hn?n=this.Ratio():n=this.Number();break;case Mn:n=this.Dimension();break;case Ht:n=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(lr),{type:"MediaFeature",loc:this.getLocation(e,this.tokenStart),name:t,value:n}}function kxe(e){this.token(gi,"("),this.token(Ht,e.name),e.value!==null&&(this.token(Gi,":"),this.node(e.value)),this.token(lr,")")}const Sxe=Object.freeze(Object.defineProperty({__proto__:null,generate:kxe,name:wxe,parse:n6,structure:_xe},Symbol.toStringTag,{value:"Module"})),Cxe="MediaQuery",Exe={children:[["Identifier","MediaFeature","WhiteSpace"]]};function r6(){const e=this.createList();let t=null;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Qi:case Xr:this.next();continue;case Ht:t=this.Identifier();break;case gi:t=this.MediaFeature();break;default:break e}e.push(t)}return t===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(e),children:e}}function Txe(e){this.children(e)}const jxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Txe,name:Cxe,parse:r6,structure:Exe},Symbol.toStringTag,{value:"Module"})),Axe="MediaQueryList",Pxe={children:[["MediaQuery"]]};function i6(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery()),this.tokenType===oo);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}}function Nxe(e){this.children(e,()=>this.token(oo,","))}const Oxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Nxe,name:Axe,parse:i6,structure:Pxe},Symbol.toStringTag,{value:"Module"})),Rxe="Nth",Mxe={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function s6(){this.skipSC();const e=this.tokenStart;let t=e,n=null,r;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?r=this.Identifier():r=this.AnPlusB(),t=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),n=this.SelectorList(),t=this.tokenStart),{type:"Nth",loc:this.getLocation(e,t),nth:r,selector:n}}function Lxe(e){this.node(e.nth),e.selector!==null&&(this.token(Ht,"of"),this.node(e.selector))}const Ixe=Object.freeze(Object.defineProperty({__proto__:null,generate:Lxe,name:Rxe,parse:s6,structure:Mxe},Symbol.toStringTag,{value:"Module"})),$xe="Number",Dxe={value:String};function a6(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(fn)}}function zxe(e){this.token(fn,e.value)}const Fxe=Object.freeze(Object.defineProperty({__proto__:null,generate:zxe,name:$xe,parse:a6,structure:Dxe},Symbol.toStringTag,{value:"Module"})),Bxe="Operator",Uxe={value:String};function o6(){const e=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function Hxe(e){this.tokenize(e.value)}const Wxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Hxe,name:Bxe,parse:o6,structure:Uxe},Symbol.toStringTag,{value:"Module"})),Vxe="Parentheses",Gxe={children:[[]]};function l6(e,t){const n=this.tokenStart;let r=null;return this.eat(gi),r=e.call(this,t),this.eof||this.eat(lr),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:r}}function qxe(e){this.token(gi,"("),this.children(e),this.token(lr,")")}const Yxe=Object.freeze(Object.defineProperty({__proto__:null,generate:qxe,name:Vxe,parse:l6,structure:Gxe},Symbol.toStringTag,{value:"Module"})),Xxe="Percentage",Kxe={value:String};function c6(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(zr)}}function Zxe(e){this.token(zr,e.value+"%")}const Qxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Zxe,name:Xxe,parse:c6,structure:Kxe},Symbol.toStringTag,{value:"Module"})),Jxe="PseudoClassSelector",e1e="function",t1e={name:String,children:[["Raw"],null]};function u6(){const e=this.tokenStart;let t=null,n,r;return this.eat(Gi),this.tokenType===Dn?(n=this.consumeFunctionName(),r=n.toLowerCase(),hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(this.tokenIndex,null,!1))),this.eat(lr)):n=this.consume(Ht),{type:"PseudoClassSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function n1e(e){this.token(Gi,":"),e.children===null?this.token(Ht,e.name):(this.token(Dn,e.name+"("),this.children(e),this.token(lr,")"))}const r1e=Object.freeze(Object.defineProperty({__proto__:null,generate:n1e,name:Jxe,parse:u6,structure:t1e,walkContext:e1e},Symbol.toStringTag,{value:"Module"})),i1e="PseudoElementSelector",s1e="function",a1e={name:String,children:[["Raw"],null]};function h6(){const e=this.tokenStart;let t=null,n,r;return this.eat(Gi),this.eat(Gi),this.tokenType===Dn?(n=this.consumeFunctionName(),r=n.toLowerCase(),hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(this.tokenIndex,null,!1))),this.eat(lr)):n=this.consume(Ht),{type:"PseudoElementSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function o1e(e){this.token(Gi,":"),this.token(Gi,":"),e.children===null?this.token(Ht,e.name):(this.token(Dn,e.name+"("),this.children(e),this.token(lr,")"))}const l1e=Object.freeze(Object.defineProperty({__proto__:null,generate:o1e,name:i1e,parse:h6,structure:a1e,walkContext:s1e},Symbol.toStringTag,{value:"Module"})),c1e=47,u1e=46;function g5(){this.skipSC();const e=this.consume(fn);for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);!xi(n)&&n!==u1e&&this.error("Unsigned number is expected",this.tokenStart-e.length+t)}return Number(e)===0&&this.error("Zero number is not allowed",this.tokenStart-e.length),e}const h1e="Ratio",d1e={left:String,right:String};function d6(){const e=this.tokenStart,t=g5.call(this);let n;return this.skipSC(),this.eatDelim(c1e),n=g5.call(this),{type:"Ratio",loc:this.getLocation(e,this.tokenStart),left:t,right:n}}function f1e(e){this.token(fn,e.left),this.token(Hn,"/"),this.token(fn,e.right)}const p1e=Object.freeze(Object.defineProperty({__proto__:null,generate:f1e,name:h1e,parse:d6,structure:d1e},Symbol.toStringTag,{value:"Module"}));function m1e(){return this.tokenIndex>0&&this.lookupType(-1)===Xr?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const g1e="Raw",y1e={value:String};function f6(e,t,n){const r=this.getTokenStart(e);let i;return this.skipUntilBalanced(e,t||this.consumeUntilBalanceEnd),n&&this.tokenStart>r?i=m1e.call(this):i=this.tokenStart,{type:"Raw",loc:this.getLocation(r,i),value:this.substring(r,i)}}function b1e(e){this.tokenize(e.value)}const v1e=Object.freeze(Object.defineProperty({__proto__:null,generate:b1e,name:g1e,parse:f6,structure:y1e},Symbol.toStringTag,{value:"Module"}));function y5(e){return this.Raw(e,this.consumeUntilLeftCurlyBracket,!0)}function x1e(){const e=this.SelectorList();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==qi&&this.error(),e}const w1e="Rule",_1e="rule",k1e={prelude:["SelectorList","Raw"],block:["Block"]};function p6(){const e=this.tokenIndex,t=this.tokenStart;let n,r;return this.parseRulePrelude?n=this.parseWithFallback(x1e,y5):n=y5.call(this,e),r=this.Block(!0),{type:"Rule",loc:this.getLocation(t,this.tokenStart),prelude:n,block:r}}function S1e(e){this.node(e.prelude),this.node(e.block)}const C1e=Object.freeze(Object.defineProperty({__proto__:null,generate:S1e,name:w1e,parse:p6,structure:k1e,walkContext:_1e},Symbol.toStringTag,{value:"Module"})),E1e="Selector",T1e={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]};function m6(){const e=this.readSequence(this.scope.Selector);return this.getFirstListNode(e)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}}function j1e(e){this.children(e)}const A1e=Object.freeze(Object.defineProperty({__proto__:null,generate:j1e,name:E1e,parse:m6,structure:T1e},Symbol.toStringTag,{value:"Module"})),P1e="SelectorList",N1e="selector",O1e={children:[["Selector","Raw"]]};function g6(){const e=this.createList();for(;!this.eof;){if(e.push(this.Selector()),this.tokenType===oo){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}}function R1e(e){this.children(e,()=>this.token(oo,","))}const M1e=Object.freeze(Object.defineProperty({__proto__:null,generate:R1e,name:P1e,parse:g6,structure:O1e,walkContext:N1e},Symbol.toStringTag,{value:"Module"})),Zx=92,y6=34,b6=39;function v6(e){const t=e.length,n=e.charCodeAt(0),r=n===y6||n===b6?1:0,i=r===1&&t>1&&e.charCodeAt(t-1)===n?t-2:t-1;let s="";for(let a=r;a<=i;a++){let o=e.charCodeAt(a);if(o===Zx){if(a===i){a!==t-1&&(s=e.substr(a+1));break}if(o=e.charCodeAt(++a),eo(Zx,o)){const u=a-1,h=Xu(e,u);a=h-1,s+=c4(e.substring(u+1,h))}else o===13&&e.charCodeAt(a+1)===10&&a++}else s+=e[a]}return s}function Qx(e,t){const n=t?"'":'"',r=t?b6:y6;let i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);if(o===0){i+="";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===r||o===Zx?(i+="\\"+e.charAt(a),s=!1):(s&&(gl(o)||hc(o))&&(i+=" "),i+=e.charAt(a),s=!1)}return n+i+n}const L1e="String",I1e={value:String};function x6(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:v6(this.consume(Pa))}}function $1e(e){this.token(Pa,Qx(e.value))}const D1e=Object.freeze(Object.defineProperty({__proto__:null,generate:$1e,name:L1e,parse:x6,structure:I1e},Symbol.toStringTag,{value:"Module"})),z1e=33;function b5(e){return this.Raw(e,null,!1)}const F1e="StyleSheet",B1e="stylesheet",U1e={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function w6(){const e=this.tokenStart,t=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case Xr:this.next();continue;case Qi:if(this.charCodeAt(this.tokenStart+2)!==z1e){this.next();continue}n=this.Comment();break;case Mf:n=this.CDO();break;case ls:n=this.CDC();break;case ci:n=this.parseWithFallback(this.Atrule,b5);break;default:n=this.parseWithFallback(this.Rule,b5)}t.push(n)}return{type:"StyleSheet",loc:this.getLocation(e,this.tokenStart),children:t}}function H1e(e){this.children(e)}const W1e=Object.freeze(Object.defineProperty({__proto__:null,generate:H1e,name:F1e,parse:w6,structure:U1e,walkContext:B1e},Symbol.toStringTag,{value:"Module"})),V1e=42,v5=124;function Cb(){this.tokenType!==Ht&&this.isDelim(V1e)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const G1e="TypeSelector",q1e={name:String};function _6(){const e=this.tokenStart;return this.isDelim(v5)?(this.next(),Cb.call(this)):(Cb.call(this),this.isDelim(v5)&&(this.next(),Cb.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function Y1e(e){this.tokenize(e.name)}const X1e=Object.freeze(Object.defineProperty({__proto__:null,generate:Y1e,name:G1e,parse:_6,structure:q1e},Symbol.toStringTag,{value:"Module"})),k6=43,S6=45,Jx=63;function pd(e,t){let n=0;for(let r=this.tokenStart+e;r<this.tokenEnd;r++){const i=this.charCodeAt(r);if(i===S6&&t&&n!==0)return pd.call(this,e+n+1,!1),-1;gl(i)||this.error(t&&n!==0?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",r),++n>6&&this.error("Too many hex digits",r)}return this.next(),n}function Bp(e){let t=0;for(;this.isDelim(Jx);)++t>e&&this.error("Too many question marks"),this.next()}function K1e(e){this.charCodeAt(this.tokenStart)!==e&&this.error((e===k6?"Plus sign":"Hyphen minus")+" is expected")}function Z1e(){let e=0;switch(this.tokenType){case fn:if(e=pd.call(this,1,!0),this.isDelim(Jx)){Bp.call(this,6-e);break}if(this.tokenType===Mn||this.tokenType===fn){K1e.call(this,S6),pd.call(this,1,!1);break}break;case Mn:e=pd.call(this,1,!0),e>0&&Bp.call(this,6-e);break;default:if(this.eatDelim(k6),this.tokenType===Ht){e=pd.call(this,0,!0),e>0&&Bp.call(this,6-e);break}if(this.isDelim(Jx)){this.next(),Bp.call(this,5);break}this.error("Hex digit or question mark is expected")}}const Q1e="UnicodeRange",J1e={value:String};function C6(){const e=this.tokenStart;return this.eatIdent("u"),Z1e.call(this),{type:"UnicodeRange",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function ewe(e){this.tokenize(e.value)}const twe=Object.freeze(Object.defineProperty({__proto__:null,generate:ewe,name:Q1e,parse:C6,structure:J1e},Symbol.toStringTag,{value:"Module"})),nwe=32,e1=92,rwe=34,iwe=39,swe=40,E6=41;function awe(e){const t=e.length;let n=4,r=e.charCodeAt(t-1)===E6?t-2:t-1,i="";for(;n<r&&hc(e.charCodeAt(n));)n++;for(;n<r&&hc(e.charCodeAt(r));)r--;for(let s=n;s<=r;s++){let a=e.charCodeAt(s);if(a===e1){if(s===r){s!==t-1&&(i=e.substr(s+1));break}if(a=e.charCodeAt(++s),eo(e1,a)){const o=s-1,u=Xu(e,o);s=u-1,i+=c4(e.substring(o+1,u))}else a===13&&e.charCodeAt(s+1)===10&&s++}else i+=e[s]}return i}function T6(e){let t="",n=!1;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===0){t+="";continue}if(i<=31||i===127){t+="\\"+i.toString(16),n=!0;continue}i===nwe||i===e1||i===rwe||i===iwe||i===swe||i===E6?(t+="\\"+e.charAt(r),n=!1):(n&&gl(i)&&(t+=" "),t+=e.charAt(r),n=!1)}return"url("+t+")"}const owe="Url",lwe={value:String};function j6(){const e=this.tokenStart;let t;switch(this.tokenType){case Ci:t=awe(this.consume(Ci));break;case Dn:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(Dn),this.skipSC(),t=v6(this.consume(Pa)),this.skipSC(),this.eof||this.eat(lr);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(e,this.tokenStart),value:t}}function cwe(e){this.token(Ci,T6(e.value))}const uwe=Object.freeze(Object.defineProperty({__proto__:null,generate:cwe,name:owe,parse:j6,structure:lwe},Symbol.toStringTag,{value:"Module"})),hwe="Value",dwe={children:[[]]};function A6(){const e=this.tokenStart,t=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(e,this.tokenStart),children:t}}function fwe(e){this.children(e)}const pwe=Object.freeze(Object.defineProperty({__proto__:null,generate:fwe,name:hwe,parse:A6,structure:dwe},Symbol.toStringTag,{value:"Module"})),mwe=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),gwe="WhiteSpace",ywe={value:String};function P6(){return this.eat(Xr),mwe}function bwe(e){this.token(Xr,e.value)}const vwe=Object.freeze(Object.defineProperty({__proto__:null,generate:bwe,name:gwe,parse:P6,structure:ywe},Symbol.toStringTag,{value:"Module"})),N6=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:Abe,Atrule:Lbe,AtrulePrelude:Fbe,AttributeSelector:Xbe,Block:nve,Brackets:ave,CDC:uve,CDO:pve,ClassSelector:vve,Combinator:Eve,Comment:Ove,Declaration:qve,DeclarationList:Qve,Dimension:nxe,Function:oxe,Hash:dxe,IdSelector:xxe,Identifier:gxe,MediaFeature:Sxe,MediaQuery:jxe,MediaQueryList:Oxe,Nth:Ixe,Number:Fxe,Operator:Wxe,Parentheses:Yxe,Percentage:Qxe,PseudoClassSelector:r1e,PseudoElementSelector:l1e,Ratio:p1e,Raw:v1e,Rule:C1e,Selector:A1e,SelectorList:M1e,String:D1e,StyleSheet:W1e,TypeSelector:X1e,UnicodeRange:twe,Url:uwe,Value:pwe,WhiteSpace:vwe},Symbol.toStringTag,{value:"Module"})),xwe={generic:!0,...Sbe,node:N6},wwe=35,_we=42,x5=43,kwe=45,Swe=47,Cwe=117;function O6(e){switch(this.tokenType){case _r:return this.Hash();case oo:return this.Operator();case gi:return this.Parentheses(this.readSequence,e.recognizer);case Is:return this.Brackets(this.readSequence,e.recognizer);case Pa:return this.String();case Mn:return this.Dimension();case zr:return this.Percentage();case fn:return this.Number();case Dn:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,e.recognizer);case Ci:return this.Url();case Ht:return this.cmpChar(this.tokenStart,Cwe)&&this.cmpChar(this.tokenStart+1,x5)?this.UnicodeRange():this.Identifier();case Hn:{const t=this.charCodeAt(this.tokenStart);if(t===Swe||t===_we||t===x5||t===kwe)return this.Operator();t===wwe&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const Ewe={getNode:O6},Twe=35,jwe=42,Awe=43,Pwe=47,w5=46,Nwe=62,Owe=124,Rwe=126;function Mwe(e,t){t.last!==null&&t.last.type!=="Combinator"&&e!==null&&e.type!=="Combinator"&&t.push({type:"Combinator",loc:null,name:" "})}function Lwe(){switch(this.tokenType){case Is:return this.AttributeSelector();case _r:return this.IdSelector();case Gi:return this.lookupType(1)===Gi?this.PseudoElementSelector():this.PseudoClassSelector();case Ht:return this.TypeSelector();case fn:case zr:return this.Percentage();case Mn:this.charCodeAt(this.tokenStart)===w5&&this.error("Identifier is expected",this.tokenStart+1);break;case Hn:{switch(this.charCodeAt(this.tokenStart)){case Awe:case Nwe:case Rwe:case Pwe:return this.Combinator();case w5:return this.ClassSelector();case jwe:case Owe:return this.TypeSelector();case Twe:return this.IdSelector()}break}}}const Iwe={onWhiteSpace:Mwe,getNode:Lwe};function $we(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function Dwe(){const e=this.createList();if(this.skipSC(),e.push(this.Identifier()),this.skipSC(),this.tokenType===oo){e.push(this.Operator());const t=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if(n.type==="Value"&&n.children.isEmpty){for(let r=t-this.tokenIndex;r<=0;r++)if(this.lookupType(r)===Xr){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}e.push(n)}return e}function _5(e){return e!==null&&e.type==="Operator"&&(e.value[e.value.length-1]==="-"||e.value[e.value.length-1]==="+")}const zwe={getNode:O6,onWhiteSpace(e,t){_5(e)&&(e.value=" "+e.value),_5(t.last)&&(t.last.value+=" ")},expression:$we,var:Dwe},Fwe=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:Ewe,Selector:Iwe,Value:zwe},Symbol.toStringTag,{value:"Module"})),Bwe={parse:{prelude:null,block(){return this.Block(!0)}}},Uwe={parse:{prelude(){const e=this.createList();switch(this.skipSC(),this.tokenType){case Pa:e.push(this.String());break;case Ci:case Dn:e.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===Ht||this.lookupNonWSType(0)===gi)&&e.push(this.MediaQueryList()),e},block:null}},Hwe={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(){return this.Block(!1)}}},Wwe={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};function Vwe(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function Gwe(){return this.skipSC(),this.tokenType===Ht&&this.lookupNonWSType(1)===Gi?this.createSingleNodeList(this.Declaration()):R6.call(this)}function R6(){const e=this.createList();let t;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Qi:case Xr:this.next();continue;case Dn:t=this.Function(Vwe,this.scope.AtrulePrelude);break;case Ht:t=this.Identifier();break;case gi:t=this.Parentheses(Gwe,this.scope.AtrulePrelude);break;default:break e}e.push(t)}return e}const qwe={parse:{prelude(){const e=R6.call(this);return this.getFirstListNode(e)===null&&this.error("Condition is expected"),e},block(){return this.Block(!1)}}},Ywe={"font-face":Bwe,import:Uwe,media:Hwe,page:Wwe,supports:qwe},Rl={parse(){return this.createSingleNodeList(this.SelectorList())}},Xwe={parse(){return this.createSingleNodeList(this.Selector())}},k5={parse(){return this.createSingleNodeList(this.Identifier())}},Up={parse(){return this.createSingleNodeList(this.Nth())}},Kwe={dir:k5,has:Rl,lang:k5,matches:Rl,is:Rl,"-moz-any":Rl,"-webkit-any":Rl,where:Rl,not:Rl,"nth-child":Up,"nth-last-child":Up,"nth-last-of-type":Up,"nth-of-type":Up,slotted:Xwe},Zwe=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:L4,Atrule:I4,AtrulePrelude:$4,AttributeSelector:z4,Block:B4,Brackets:U4,CDC:H4,CDO:W4,ClassSelector:V4,Combinator:G4,Comment:q4,Declaration:X4,DeclarationList:K4,Dimension:Z4,Function:Q4,Hash:J4,IdSelector:t6,Identifier:e6,MediaFeature:n6,MediaQuery:r6,MediaQueryList:i6,Nth:s6,Number:a6,Operator:o6,Parentheses:l6,Percentage:c6,PseudoClassSelector:u6,PseudoElementSelector:h6,Ratio:d6,Raw:f6,Rule:p6,Selector:m6,SelectorList:g6,String:x6,StyleSheet:w6,TypeSelector:_6,UnicodeRange:C6,Url:j6,Value:A6,WhiteSpace:P6},Symbol.toStringTag,{value:"Module"})),Qwe={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(e){return this.AtrulePrelude(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:Fwe,atrule:Ywe,pseudo:Kwe,node:Zwe},Jwe={node:N6},e_e=kbe({...xwe,...Qwe,...Jwe});function t1(e){const t={};for(const n in e){let r=e[n];r&&(Array.isArray(r)||r instanceof Un?r=r.map(t1):r.constructor===Object&&(r=t1(r))),t[n]=r}return t}const{tokenize:wje,parse:t_e,generate:to,lexer:M6,createLexer:_je,walk:ms,find:kje,findLast:Sje,findAll:Cje,toPlainObject:Eje,fromPlainObject:Tje,fork:n_e}=e_e,{hasOwnProperty:r_e}=Object.prototype;function Eb(e,t){const n=Object.create(null);if(!Array.isArray(e))return null;for(let r of e)t&&(r=r.toLowerCase()),n[r]=!0;return n}function S5(e){if(!e)return null;const t=Eb(e.tags,!0),n=Eb(e.ids),r=Eb(e.classes);return t===null&&n===null&&r===null?null:{tags:t,ids:n,classes:r}}function i_e(e){let t=!1;if(e.scopes&&Array.isArray(e.scopes)){t=Object.create(null);for(let n=0;n<e.scopes.length;n++){const r=e.scopes[n];if(!r||!Array.isArray(r))throw new Error("Wrong usage format");for(const i of r){if(r_e.call(t,i))throw new Error(`Class can't be used for several scopes: ${i}`);t[i]=n+1}}}return{whitelist:S5(e),blacklist:S5(e.blacklist),scopes:t}}function Zl(e){return!e||!e.children||e.children.isEmpty}function C5(e,t){return e!==null&&e.children===t}function s_e(e,t,n){if(e.block&&(this.stylesheet!==null&&(this.stylesheet.firstAtrulesAllowed=!1),Zl(e.block))){n.remove(t);return}switch(e.name){case"charset":if(Zl(e.prelude)){n.remove(t);return}if(t.prev){n.remove(t);return}break;case"import":if(this.stylesheet===null||!this.stylesheet.firstAtrulesAllowed){n.remove(t);return}n.prevUntil(t.prev,function(r){if(!(r.type==="Atrule"&&(r.name==="import"||r.name==="charset")))return this.root.firstAtrulesAllowed=!1,n.remove(t),!0},this);break;default:{const r=Ca(e.name).basename;(r==="keyframes"||r==="media"||r==="supports")&&(Zl(e.prelude)||Zl(e.block))&&n.remove(t)}}}function a_e(e,t,n){n.remove(t)}function o_e(e,t,n){if(e.value.children&&e.value.children.isEmpty){n.remove(t);return}Ku(e.property).custom&&/\S/.test(e.value.value)&&(e.value.value=e.value.value.trim())}function l_e(e,t,n){(C5(this.stylesheet,n)||C5(this.block,n))&&n.remove(t)}const{hasOwnProperty:$c}=Object.prototype,c_e=new Set(["keyframes"]);function L6(e,t){return e.children.forEach((n,r,i)=>{let s=!1;ms(n,function(a){if(this.selector===null||this.selector===e)switch(a.type){case"SelectorList":(this.function===null||this.function.name.toLowerCase()!=="not")&&L6(a,t)&&(s=!0);break;case"ClassSelector":t.whitelist!==null&&t.whitelist.classes!==null&&!$c.call(t.whitelist.classes,a.name)&&(s=!0),t.blacklist!==null&&t.blacklist.classes!==null&&$c.call(t.blacklist.classes,a.name)&&(s=!0);break;case"IdSelector":t.whitelist!==null&&t.whitelist.ids!==null&&!$c.call(t.whitelist.ids,a.name)&&(s=!0),t.blacklist!==null&&t.blacklist.ids!==null&&$c.call(t.blacklist.ids,a.name)&&(s=!0);break;case"TypeSelector":a.name.charAt(a.name.length-1)!=="*"&&(t.whitelist!==null&&t.whitelist.tags!==null&&!$c.call(t.whitelist.tags,a.name.toLowerCase())&&(s=!0),t.blacklist!==null&&t.blacklist.tags!==null&&$c.call(t.blacklist.tags,a.name.toLowerCase())&&(s=!0));break}}),s&&i.remove(r)}),e.children.isEmpty}function u_e(e,t,n,r){if(Zl(e.prelude)||Zl(e.block)){n.remove(t);return}if(this.atrule&&c_e.has(Ca(this.atrule.name).basename))return;const{usage:i}=r;if(i&&(i.whitelist!==null||i.blacklist!==null)&&(L6(e.prelude,i),Zl(e.prelude))){n.remove(t);return}}function h_e(e,t,n){if(t.data.name!=="*")return;const i=t.next&&t.next.data.type;(i==="IdSelector"||i==="ClassSelector"||i==="AttributeSelector"||i==="PseudoClassSelector"||i==="PseudoElementSelector")&&n.remove(t)}function d_e(e,t,n){n.remove(t)}const E5={Atrule:s_e,Comment:a_e,Declaration:o_e,Raw:l_e,Rule:u_e,TypeSelector:h_e,WhiteSpace:d_e};function f_e(e,t){ms(e,{leave(n,r,i){E5.hasOwnProperty(n.type)&&E5[n.type].call(this,n,r,i,t)}})}function p_e(e){e.block.children.forEach(t=>{t.prelude.children.forEach(n=>{n.children.forEach((r,i)=>{r.type==="Percentage"&&r.value==="100"?i.data={type:"TypeSelector",loc:r.loc,name:"to"}:r.type==="TypeSelector"&&r.name==="from"&&(i.data={type:"Percentage",loc:r.loc,value:"0"})})})})}function m_e(e){Ca(e.name).basename==="keyframes"&&p_e(e)}const g_e=/^(-?\d|--)|[\u0000-\u002c\u002e\u002f\u003A-\u0040\u005B-\u005E\u0060\u007B-\u009f]/;function y_e(e){return e===""||e==="-"?!1:!g_e.test(e)}function b_e(e){const t=e.value;!t||t.type!=="String"||y_e(t.value)&&(e.value={type:"Identifier",loc:t.loc,name:t.value})}function v_e(e){const t=e.children;t.forEachRight(function(n,r){if(n.type==="Identifier"){if(n.name==="bold")r.data={type:"Number",loc:n.loc,value:"700"};else if(n.name==="normal"){const i=r.prev;i&&i.data.type==="Operator"&&i.data.value==="/"&&this.remove(i),this.remove(r)}}}),t.isEmpty&&t.insert(t.createItem({type:"Identifier",name:"normal"}))}function x_e(e){const t=e.children.head.data;if(t.type==="Identifier")switch(t.name){case"normal":e.children.head.data={type:"Number",loc:t.loc,value:"400"};break;case"bold":e.children.head.data={type:"Number",loc:t.loc,value:"700"};break}}function w_e(e){function t(){r.length||r.unshift({type:"Number",loc:null,value:"0"},{type:"Number",loc:null,value:"0"}),n.push.apply(n,r),r=[]}let n=[],r=[];e.children.forEach(i=>{if(i.type==="Operator"&&i.value===","){t(),n.push(i);return}i.type==="Identifier"&&(i.name==="transparent"||i.name==="none"||i.name==="repeat"||i.name==="scroll")||r.push(i)}),t(),e.children=new Un().fromArray(n)}function T5(e){e.children.forEach((t,n,r)=>{t.type==="Identifier"&&t.name.toLowerCase()==="none"&&(r.head===r.tail?n.data={type:"Number",loc:t.loc,value:"0"}:r.remove(n))})}const j5={font:v_e,"font-weight":x_e,background:w_e,border:T5,outline:T5};function __e(e){if(!this.declaration)return;const t=Ku(this.declaration.property);j5.hasOwnProperty(t.basename)&&j5[t.basename](e)}const k_e=/^(?:\+|(-))?0*(\d*)(?:\.0*|(\.\d*?)0*)?$/;function A0(e,t){const n=k_e;return e=String(e).replace(n,"$1$2$3"),(e===""||e==="-")&&(e="0"),e}function S_e(e){e.value=A0(e.value)}const C_e=new Set(["calc","min","max","clamp"]),E_e=new Set(["px","mm","cm","in","pt","pc","em","ex","ch","rem","vh","vw","vmin","vmax","vm"]);function T_e(e,t){const n=A0(e.value);if(e.value=n,n==="0"&&this.declaration!==null&&this.atrulePrelude===null){const r=e.unit.toLowerCase();if(!E_e.has(r)||this.declaration.property==="-ms-flex"||this.declaration.property==="flex"||this.function&&C_e.has(this.function.name))return;t.data={type:"Number",loc:e.loc,value:n}}}const j_e=new Set(["width","min-width","max-width","height","min-height","max-height","flex","-ms-flex"]);function A_e(e,t){e.value=A0(e.value),e.value==="0"&&this.declaration&&!j_e.has(this.declaration.property)&&(t.data={type:"Number",loc:e.loc,value:e.value},M6.matchDeclaration(this.declaration).isType(t.data,"length")||(t.data=e))}function P_e(e){e.value=e.value.replace(/\\/g,"/")}const A5={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P5={8e5:"maroon",800080:"purple",808e3:"olive",808080:"gray","00ffff":"cyan",f0ffff:"azure",f5f5dc:"beige",ffe4c4:"bisque","000000":"black","0000ff":"blue",a52a2a:"brown",ff7f50:"coral",ffd700:"gold","008000":"green","4b0082":"indigo",fffff0:"ivory",f0e68c:"khaki","00ff00":"lime",faf0e6:"linen","000080":"navy",ffa500:"orange",da70d6:"orchid",cd853f:"peru",ffc0cb:"pink",dda0dd:"plum",f00:"red",ff0000:"red",fa8072:"salmon",a0522d:"sienna",c0c0c0:"silver",fffafa:"snow",d2b48c:"tan","008080":"teal",ff6347:"tomato",ee82ee:"violet",f5deb3:"wheat",ffffff:"white",ffff00:"yellow"};function Tb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function N5(e,t,n,r){let i,s,a;if(t===0)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,u=2*n-o;i=Tb(u,o,e+1/3),s=Tb(u,o,e),a=Tb(u,o,e-1/3)}return[Math.round(i*255),Math.round(s*255),Math.round(a*255),r]}function jb(e){return e=e.toString(16),e.length===1?"0"+e:e}function Ab(e,t,n){let r=e.head,i=[],s=!1;for(;r!==null;){const{type:a,value:o}=r.data;switch(a){case"Number":case"Percentage":if(s)return;s=!0,i.push({type:a,value:Number(o)});break;case"Operator":if(o===","){if(!s)return;s=!1}else if(s||o!=="+")return;break;default:return}r=r.next}if(i.length===t){if(i.length===4){if(i[3].type!=="Number")return;i[3].type="Alpha"}if(n){if(i[0].type!==i[1].type||i[0].type!==i[2].type)return}else{if(i[0].type!=="Number"||i[1].type!=="Percentage"||i[2].type!=="Percentage")return;i[0].type="Angle"}return i.map(function(a){let o=Math.max(0,a.value);switch(a.type){case"Number":o=Math.min(o,255);break;case"Percentage":if(o=Math.min(o,100)/100,!n)return o;o=255*o;break;case"Angle":return(o%360+360)%360/360;case"Alpha":return Math.min(o,1)}return Math.round(o)})}}function N_e(e,t){let n=e.name,r;if(n==="rgba"||n==="hsla"){if(r=Ab(e.children,4,n==="rgba"),!r)return;if(n==="hsla"&&(r=N5(...r),e.name="rgba"),r[3]===0){const i=this.function&&this.function.name;if(r[0]===0&&r[1]===0&&r[2]===0||!/^(?:to|from|color-stop)$|gradient$/i.test(i)){t.data={type:"Identifier",loc:e.loc,name:"transparent"};return}}if(r[3]!==1){e.children.forEach((i,s,a)=>{if(i.type==="Operator"){i.value!==","&&a.remove(s);return}s.data={type:"Number",loc:i.loc,value:A0(r.shift())}});return}n="rgb"}if(n==="hsl"){if(r=r||Ab(e.children,3,!1),!r)return;r=N5(...r),n="rgb"}if(n==="rgb"){if(r=r||Ab(e.children,3,!0),!r)return;t.data={type:"Hash",loc:e.loc,value:jb(r[0])+jb(r[1])+jb(r[2])},I6(t.data,t)}}function O_e(e,t){if(this.declaration===null)return;let n=e.name.toLowerCase();if(A5.hasOwnProperty(n)&&M6.matchDeclaration(this.declaration).isType(e,"color")){const r=A5[n];r.length+1<=n.length?t.data={type:"Hash",loc:e.loc,value:r}:(n==="grey"&&(n="gray"),e.name=n)}}function I6(e,t){let n=e.value.toLowerCase();n.length===6&&n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&(n=n[0]+n[2]+n[4]),P5[n]?t.data={type:"Identifier",loc:e.loc,name:P5[n]}:e.value=n}const O5={Atrule:m_e,AttributeSelector:b_e,Value:__e,Dimension:T_e,Percentage:A_e,Number:S_e,Url:P_e,Hash:I6,Identifier:O_e,Function:N_e};function R_e(e){ms(e,{leave(t,n,r){O5.hasOwnProperty(t.type)&&O5[t.type].call(this,t,n,r)}})}class M_e{constructor(){this.map=new Map}resolve(t){let n=this.map.get(t);return n===void 0&&(n=this.map.size+1,this.map.set(t,n)),n}}function L_e(){const e=new M_e;return function(n){const r=to(n);return n.id=e.resolve(r),n.length=r.length,n.fingerprint=null,n}}function I_e(e){return e.type==="Raw"?t_e(e.value,{context:"selectorList"}):e}function $_e(e,t){for(let n=0;n<3;n++)if(e[n]!==t[n])return e[n]>t[n]?e:t;return e}function R5(e){return I_e(e).children.reduce((t,n)=>$_e(Ju(n),t),[0,0,0])}function Ju(e){let t=0,n=0,r=0;return e.children.forEach(i=>{switch(i.type){case"IdSelector":t++;break;case"ClassSelector":case"AttributeSelector":n++;break;case"PseudoClassSelector":switch(i.name.toLowerCase()){case"not":case"has":case"is":case"matches":case"-webkit-any":case"-moz-any":{const[s,a,o]=R5(i.children.first);t+=s,n+=a,r+=o;break}case"nth-child":case"nth-last-child":{const s=i.children.first;if(s.type==="Nth"&&s.selector){const[a,o,u]=R5(s.selector);t+=a,n+=o+1,r+=u}else n++;break}case"where":break;case"before":case"after":case"first-line":case"first-letter":r++;break;default:n++}break;case"TypeSelector":i.name.endsWith("*")||r++;break;case"PseudoElementSelector":r++;break}}),[t,n,r]}const D_e=new Set(["first-letter","first-line","after","before"]),z_e=new Set(["link","visited","hover","active","first-letter","first-line","after","before"]);function F_e(e,t){const n=new Set;e.prelude.children.forEach(function(r){let i="*",s=0;r.children.forEach(function(a){switch(a.type){case"ClassSelector":if(t&&t.scopes){const o=t.scopes[a.name]||0;if(s!==0&&o!==s)throw new Error("Selector can't has classes from different scopes: "+to(r));s=o}break;case"PseudoClassSelector":{const o=a.name.toLowerCase();z_e.has(o)||n.add(`:${o}`);break}case"PseudoElementSelector":{const o=a.name.toLowerCase();D_e.has(o)||n.add(`::${o}`);break}case"TypeSelector":i=a.name.toLowerCase();break;case"AttributeSelector":a.flags&&n.add(`[${a.flags.toLowerCase()}]`);break;case"Combinator":i="*";break}}),r.compareMarker=Ju(r).toString(),r.id=null,r.id=to(r),s&&(r.compareMarker+=":"+s),i!=="*"&&(r.compareMarker+=","+i)}),e.pseudoSignature=n.size>0?[...n].sort().join(","):!1}function B_e(e,t){const n=L_e();return ms(e,{visit:"Rule",enter(r){r.block.children.forEach(n),F_e(r,t.usage)}}),ms(e,{visit:"Atrule",enter(r){r.prelude&&(r.prelude.id=null,r.prelude.id=to(r.prelude)),Ca(r.name).basename==="keyframes"&&(r.block.avoidRulesMerge=!0,r.block.children.forEach(function(i){i.prelude.children.forEach(function(s){s.compareMarker=s.id})}))}}),{declaration:n}}const{hasOwnProperty:M5}=Object.prototype;function L5(e,t,n,r){const i=t.data,s=Ca(i.name).basename,a=i.name.toLowerCase()+"/"+(i.prelude?i.prelude.id:null);M5.call(e,s)||(e[s]=Object.create(null)),r&&delete e[s][a],M5.call(e[s],a)||(e[s][a]=new Un),e[s][a].append(n.remove(t))}function U_e(e,t){const n=Object.create(null);let r=null;e.children.forEach(function(i,s,a){if(i.type==="Atrule"){const o=Ca(i.name).basename;switch(o){case"keyframes":L5(n,s,a,!0);return;case"media":if(t.forceMediaMerge){L5(n,s,a,!1);return}break}r===null&&o!=="charset"&&o!=="import"&&(r=s)}else r===null&&(r=s)});for(const i in n)for(const s in n[i])e.children.insertList(n[i][s],i==="media"?null:r)}function I5(e){return e.type==="Atrule"&&e.name==="media"}function H_e(e,t,n){if(!I5(e))return;const r=t.prev&&t.prev.data;!r||!I5(r)||e.prelude&&r.prelude&&e.prelude.id===r.prelude.id&&(r.block.children.appendList(e.block.children),n.remove(t))}function W_e(e,t){U_e(e,t),ms(e,{visit:"Atrule",reverse:!0,enter:H_e})}const{hasOwnProperty:V_e}=Object.prototype;function $6(e,t){let n=e.head,r=t.head;for(;n!==null&&r!==null&&n.data.id===r.data.id;)n=n.next,r=r.next;return n===null&&r===null}function D6(e,t){let n=e.head,r=t.head;for(;n!==null&&r!==null&&n.data.id===r.data.id;)n=n.next,r=r.next;return n===null&&r===null}function G_e(e,t){const n={eq:[],ne1:[],ne2:[],ne2overrided:[]},r=Object.create(null),i=Object.create(null);for(let s=t.head;s;s=s.next)i[s.data.id]=!0;for(let s=e.head;s;s=s.next){const a=s.data;a.fingerprint&&(r[a.fingerprint]=a.important),i[a.id]?(i[a.id]=!1,n.eq.push(a)):n.ne1.push(a)}for(let s=t.head;s;s=s.next){const a=s.data;i[a.id]&&((!V_e.call(r,a.fingerprint)||!r[a.fingerprint]&&a.important)&&n.ne2.push(a),n.ne2overrided.push(a))}return n}function md(e,t){return t.forEach(n=>{const r=n.id;let i=e.head;for(;i;){const s=i.data.id;if(s===r)return;if(s>r)break;i=i.next}e.insert(e.createItem(n),i)}),e}function z6(e,t){let n=e.head;for(;n!==null;){let r=t.head;for(;r!==null;){if(n.data.compareMarker===r.data.compareMarker)return!0;r=r.next}n=n.next}return!1}function P0(e){switch(e.type){case"Rule":return z6(e.prelude.children,this);case"Atrule":if(e.block)return e.block.children.some(P0,this);break;case"Declaration":return!1}return!0}function q_e(e,t,n){const r=e.prelude.children,i=e.block.children;n.prevUntil(t.prev,function(s){if(s.type!=="Rule")return P0.call(r,s);const a=s.prelude.children,o=s.block.children;if(e.pseudoSignature===s.pseudoSignature){if($6(a,r))return o.appendList(i),n.remove(t),!0;if(D6(i,o))return md(a,r),n.remove(t),!0}return z6(r,a)})}function Y_e(e){ms(e,{visit:"Rule",enter:q_e})}function X_e(e,t,n){const r=e.prelude.children;for(;r.head!==r.tail;){const i=new Un;i.insert(r.remove(r.head)),n.insert(n.createItem({type:"Rule",loc:e.loc,prelude:{type:"SelectorList",loc:e.prelude.loc,children:i},block:{type:"Block",loc:e.block.loc,children:e.block.children.copy()},pseudoSignature:e.pseudoSignature}),t)}}function K_e(e){ms(e,{visit:"Rule",reverse:!0,enter:X_e})}const F6=1,Z_e=2,Dc=0,Wh=1,Pb=2,Hp=3,$5=["top","right","bottom","left"],Q_e={"margin-top":"top","margin-right":"right","margin-bottom":"bottom","margin-left":"left","padding-top":"top","padding-right":"right","padding-bottom":"bottom","padding-left":"left","border-top-color":"top","border-right-color":"right","border-bottom-color":"bottom","border-left-color":"left","border-top-width":"top","border-right-width":"right","border-bottom-width":"bottom","border-left-width":"left","border-top-style":"top","border-right-style":"right","border-bottom-style":"bottom","border-left-style":"left"},D5={margin:"margin","margin-top":"margin","margin-right":"margin","margin-bottom":"margin","margin-left":"margin",padding:"padding","padding-top":"padding","padding-right":"padding","padding-bottom":"padding","padding-left":"padding","border-color":"border-color","border-top-color":"border-color","border-right-color":"border-color","border-bottom-color":"border-color","border-left-color":"border-color","border-width":"border-width","border-top-width":"border-width","border-right-width":"border-width","border-bottom-width":"border-width","border-left-width":"border-width","border-style":"border-style","border-top-style":"border-style","border-right-style":"border-style","border-bottom-style":"border-style","border-left-style":"border-style"};class J_e{constructor(t){this.name=t,this.loc=null,this.iehack=void 0,this.sides={top:null,right:null,bottom:null,left:null}}getValueSequence(t,n){const r=[];let i="";return t.value.type!=="Value"||t.value.children.some(function(a){let o=!1;switch(a.type){case"Identifier":switch(a.name){case"\\0":case"\\9":i=a.name;return;case"inherit":case"initial":case"unset":case"revert":o=a.name;break}break;case"Dimension":switch(a.unit){case"rem":case"vw":case"vh":case"vmin":case"vmax":case"vm":o=a.unit;break}break;case"Hash":case"Number":case"Percentage":break;case"Function":if(a.name==="var")return!0;o=a.name;break;default:return!0}r.push({node:a,special:o,important:t.important})})||r.length>n||typeof this.iehack=="string"&&this.iehack!==i?!1:(this.iehack=i,r)}canOverride(t,n){const r=this.sides[t];return!r||n.important&&!r.important}add(t,n){function r(){const i=this.sides,s=Q_e[t];if(s){if(!(s in i))return!1;const a=this.getValueSequence(n,1);if(!a||!a.length)return!1;for(const o in i)if(i[o]!==null&&i[o].special!==a[0].special)return!1;return this.canOverride(s,a[0])&&(i[s]=a[0]),!0}else if(t===this.name){const a=this.getValueSequence(n,4);if(!a||!a.length)return!1;switch(a.length){case 1:a[Wh]=a[Dc],a[Pb]=a[Dc],a[Hp]=a[Dc];break;case 2:a[Pb]=a[Dc],a[Hp]=a[Wh];break;case 3:a[Hp]=a[Wh];break}for(let o=0;o<4;o++)for(const u in i)if(i[u]!==null&&i[u].special!==a[o].special)return!1;for(let o=0;o<4;o++)this.canOverride($5[o],a[o])&&(i[$5[o]]=a[o]);return!0}}return r.call(this)?(this.loc||(this.loc=n.loc),!0):!1}isOkToMinimize(){const t=this.sides.top,n=this.sides.right,r=this.sides.bottom,i=this.sides.left;if(t&&n&&r&&i){const s=t.important+n.important+r.important+i.important;return s===0||s===4}return!1}getValue(){const t=new Un,n=this.sides,r=[n.top,n.right,n.bottom,n.left],i=[to(n.top.node),to(n.right.node),to(n.bottom.node),to(n.left.node)];i[Hp]===i[Wh]&&(r.pop(),i[Pb]===i[Dc]&&(r.pop(),i[Wh]===i[Dc]&&r.pop()));for(let s=0;s<r.length;s++)t.appendData(r[s].node);return this.iehack&&t.appendData({type:"Identifier",loc:null,name:this.iehack}),{type:"Value",loc:null,children:t}}getDeclaration(){return{type:"Declaration",loc:this.loc,important:this.sides.top.important,property:this.name,value:this.getValue()}}}function eke(e,t,n,r){const i=e.block.children,s=e.prelude.children.first.id;return e.block.children.forEachRight(function(a,o){const u=a.property;if(!D5.hasOwnProperty(u))return;const h=D5[u];let d,p;if((!r||s===r)&&h in t&&(p=Z_e,d=t[h]),(!d||!d.add(u,a))&&(p=F6,d=new J_e(h),!d.add(u,a))){r=null;return}t[h]=d,n.push({operation:p,block:i,item:o,shorthand:d}),r=s}),r}function tke(e,t){e.forEach(function(n){const r=n.shorthand;r.isOkToMinimize()&&(n.operation===F6?n.item.data=t(r.getDeclaration()):n.block.remove(n.item))})}function nke(e,t){const n={},r=[];ms(e,{visit:"Rule",reverse:!0,enter(i){const s=this.block||this.stylesheet,a=(i.pseudoSignature||"")+"|"+i.prelude.children.first.id;let o,u;n.hasOwnProperty(s.id)?o=n[s.id]:(o={lastShortSelector:null},n[s.id]=o),o.hasOwnProperty(a)?u=o[a]:(u={},o[a]=u),o.lastShortSelector=eke.call(this,i,u,r,o.lastShortSelector)}}),tke(r,t.declaration)}let rke=1;const ike=new Set(["src"]),z5={display:/table|ruby|flex|-(flex)?box$|grid|contents|run-in/i,"text-align":/^(start|end|match-parent|justify-all)$/i},F5={cursor:["auto","crosshair","default","move","text","wait","help","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","pointer","progress","not-allowed","no-drop","vertical-text","all-scroll","col-resize","row-resize"],overflow:["hidden","visible","scroll","auto"],position:["static","relative","absolute","fixed"]},B5={"border-width":["border"],"border-style":["border"],"border-color":["border"],"border-top":["border"],"border-right":["border"],"border-bottom":["border"],"border-left":["border"],"border-top-width":["border-top","border-width","border"],"border-right-width":["border-right","border-width","border"],"border-bottom-width":["border-bottom","border-width","border"],"border-left-width":["border-left","border-width","border"],"border-top-style":["border-top","border-style","border"],"border-right-style":["border-right","border-style","border"],"border-bottom-style":["border-bottom","border-style","border"],"border-left-style":["border-left","border-style","border"],"border-top-color":["border-top","border-color","border"],"border-right-color":["border-right","border-color","border"],"border-bottom-color":["border-bottom","border-color","border"],"border-left-color":["border-left","border-color","border"],"margin-top":["margin"],"margin-right":["margin"],"margin-bottom":["margin"],"margin-left":["margin"],"padding-top":["padding"],"padding-right":["padding"],"padding-bottom":["padding"],"padding-left":["padding"],"font-style":["font"],"font-variant":["font"],"font-weight":["font"],"font-size":["font"],"font-family":["font"],"list-style-type":["list-style"],"list-style-position":["list-style"],"list-style-image":["list-style"]};function B6(e,t,n){const r=Ku(e).basename;if(r==="background")return e+":"+to(t.value);const i=t.id;let s=n[i];if(!s){switch(t.value.type){case"Value":const a={};let o="",u="",h=!1;t.value.children.forEach(function d(p){switch(p.type){case"Value":case"Brackets":case"Parentheses":p.children.forEach(d);break;case"Raw":h=!0;break;case"Identifier":{const{name:m}=p;o||(o=Ca(m).vendor),/\\[09]/.test(m)&&(u=RegExp.lastMatch),F5.hasOwnProperty(r)?F5[r].indexOf(m)===-1&&(a[m]=!0):z5.hasOwnProperty(r)&&z5[r].test(m)&&(a[m]=!0);break}case"Function":{let{name:m}=p;o||(o=Ca(m).vendor),m==="rect"&&(p.children.some(v=>v.type==="Operator"&&v.value===",")||(m="rect-backward")),a[m+"()"]=!0,p.children.forEach(d);break}case"Dimension":{const{unit:m}=p;switch(/\\[09]/.test(m)&&(u=RegExp.lastMatch),m){case"rem":case"vw":case"vh":case"vmin":case"vmax":case"vm":a[m]=!0;break}break}}}),s=h?"!"+rke++:"!"+Object.keys(a).sort()+"|"+u+o;break;case"Raw":s="!"+t.value.value;break;default:s=to(t.value)}n[i]=s}return e+s}function ske(e,t,n){const r=Ku(t.property);if(B5.hasOwnProperty(r.basename)){const i=B5[r.basename];for(const s of i){const a=B6(r.prefix+s,t,n),o=e.hasOwnProperty(a)?e[a]:null;if(o&&(!t.important||o.item.data.important))return o}}}function ake(e,t,n,r,i){const s=e.block.children;s.forEachRight(function(a,o){const{property:u}=a,h=B6(u,a,i),d=r[h];d&&!ike.has(u)?a.important&&!d.item.data.important?(r[h]={block:s,item:o},d.block.remove(d.item)):s.remove(o):ske(r,a,i)?s.remove(o):(a.fingerprint=h,r[h]={block:s,item:o})}),s.isEmpty&&n.remove(t)}function oke(e){const t={},n=Object.create(null);ms(e,{visit:"Rule",reverse:!0,enter(r,i,s){const a=this.block||this.stylesheet,o=(r.pseudoSignature||"")+"|"+r.prelude.children.first.id;let u,h;t.hasOwnProperty(a.id)?u=t[a.id]:(u={},t[a.id]=u),u.hasOwnProperty(o)?h=u[o]:(h={},u[o]=h),ake.call(this,r,i,s,h,n)}})}function lke(e,t,n){const r=e.prelude.children,i=e.block.children,s=r.first.compareMarker,a={};n.nextUntil(t.next,function(o,u){if(o.type!=="Rule")return P0.call(r,o);if(e.pseudoSignature!==o.pseudoSignature)return!0;const h=o.prelude.children.head,d=o.block.children,p=h.data.compareMarker;if(p in a)return!0;if(r.head===r.tail&&r.first.id===h.data.id){i.appendList(d),n.remove(u);return}if(D6(i,d)){const m=h.data.id;r.some((g,v)=>{const w=g.id;if(m<w)return r.insert(h,v),!0;if(!v.next)return r.insert(h),!0}),n.remove(u);return}if(p===s)return!0;a[p]=!0})}function cke(e){ms(e,{visit:"Rule",enter:lke})}function Nb(e){return e.reduce((t,n)=>t+n.id.length+1,0)-1}function Ob(e){let t=0;for(const n of e)t+=n.length;return t+e.length-1}function uke(e,t,n){const r=this.block!==null?this.block.avoidRulesMerge:!1,i=e.prelude.children,s=e.block,a=Object.create(null);let o=!0,u=!0;n.prevUntil(t.prev,function(h,d){const p=h.block,m=h.type;if(m!=="Rule"){const w=P0.call(i,h);return!w&&m==="Atrule"&&p&&ms(p,{visit:"Rule",enter(C){C.prelude.children.forEach(x=>{a[x.compareMarker]=!0})}}),w}if(e.pseudoSignature!==h.pseudoSignature)return!0;const g=h.prelude.children;if(u=!g.some(w=>w.compareMarker in a),!u&&!o)return!0;if(o&&$6(g,i))return p.children.appendList(s.children),n.remove(t),!0;const v=G_e(s.children,p.children);if(v.eq.length){if(!v.ne1.length&&!v.ne2.length)return u&&(md(i,g),n.remove(d)),!0;if(!r)if(v.ne1.length&&!v.ne2.length){const w=Nb(i),C=Ob(v.eq);o&&w<C&&(md(g,i),s.children.fromArray(v.ne1))}else if(!v.ne1.length&&v.ne2.length){const w=Nb(g),C=Ob(v.eq);u&&w<C&&(md(i,g),p.children.fromArray(v.ne2))}else{const w={type:"SelectorList",loc:null,children:md(g.copy(),i)},C=Nb(w.children)+2;if(Ob(v.eq)>=C){const k=n.createItem({type:"Rule",loc:null,prelude:w,block:{type:"Block",loc:null,children:new Un().fromArray(v.eq)},pseudoSignature:e.pseudoSignature});return s.children.fromArray(v.ne1),p.children.fromArray(v.ne2overrided),o?n.insert(k,d):n.insert(k,t),!0}}}o&&(o=!g.some(w=>i.some(C=>C.compareMarker===w.compareMarker))),g.forEach(w=>{a[w.compareMarker]=!0})})}function hke(e){ms(e,{visit:"Rule",reverse:!0,enter:uke})}function dke(e,t){const n=B_e(e,t);t.logger("prepare",e),W_e(e,t),t.logger("mergeAtrule",e),Y_e(e),t.logger("initialMergeRuleset",e),K_e(e),t.logger("disjoinRuleset",e),nke(e,n),t.logger("restructShorthand",e),oke(e),t.logger("restructBlock",e),cke(e),t.logger("mergeRuleset",e),hke(e),t.logger("restructRuleset",e)}function fke(e,t){const n=new Un;let r=!1,i;return e.nextUntil(e.head,(s,a,o)=>{if(s.type==="Comment"){if(!t||s.value.charAt(0)!=="!"){o.remove(a);return}if(r||i)return!0;o.remove(a),i=s;return}s.type!=="WhiteSpace"&&(r=!0),n.insert(o.remove(a))}),{comment:i,stylesheet:{type:"StyleSheet",loc:null,children:n}}}function pke(e,t,n,r){r.logger(`Compress block #${n}`,null,!0);let i=1;return e.type==="StyleSheet"&&(e.firstAtrulesAllowed=t,e.id=i++),ms(e,{visit:"Atrule",enter(s){s.block!==null&&(s.block.id=i++)}}),r.logger("init",e),f_e(e,r),r.logger("clean",e),R_e(e),r.logger("replace",e),r.restructuring&&dke(e,r),e}function mke(e){let t="comments"in e?e.comments:"exclamation";return typeof t=="boolean"?t=t?"exclamation":!1:t!=="exclamation"&&t!=="first-exclamation"&&(t=!1),t}function gke(e){return"restructure"in e?e.restructure:"restructuring"in e?e.restructuring:!0}function yke(e){return new Un().appendData({type:"Rule",loc:null,prelude:{type:"SelectorList",loc:null,children:new Un().appendData({type:"Selector",loc:null,children:new Un().appendData({type:"TypeSelector",loc:null,name:"x"})})},block:e})}function bke(e,t){e=e||{type:"StyleSheet",loc:null,children:new Un},t=t||{};const n={logger:typeof t.logger=="function"?t.logger:function(){},restructuring:gke(t),forceMediaMerge:!!t.forceMediaMerge,usage:t.usage?i_e(t.usage):!1},r=new Un;let i=mke(t),s=!0,a,o,u=1,h;t.clone&&(e=t1(e)),e.type==="StyleSheet"?(a=e.children,e.children=r):a=yke(e);do{if(o=fke(a,!!i),pke(o.stylesheet,s,u++,n),h=o.stylesheet.children,o.comment&&(r.isEmpty||r.insert(Un.createItem({type:"Raw",value:`
`})),r.insert(Un.createItem(o.comment)),h.isEmpty||r.insert(Un.createItem({type:"Raw",value:`
`}))),s&&!h.isEmpty){const d=h.last;(d.type!=="Atrule"||d.name!=="import"&&d.name!=="charset")&&(s=!1)}i!=="exclamation"&&(i=!1),r.appendList(h)}while(!a.isEmpty);return{ast:e}}function U5(e){const t=Qx(e,!0),n=Qx(e);return t.length<n.length?t:n}const{lexer:vke,tokenize:xke,parse:wke,generate:_ke,walk:kke,find:Ske,findLast:Cke,findAll:Eke,fromPlainObject:Tke,toPlainObject:jke}=n_e({node:{String:{generate(e){this.token(Pa,U5(e.value))}},Url:{generate(e){const t=T6(e.value),n=U5(e.value);this.token(Ci,t.length<=n.length+5?t:"url("+n+")")}}}}),Ake=Object.freeze(Object.defineProperty({__proto__:null,compress:bke,find:Ske,findAll:Eke,findLast:Cke,fromPlainObject:Tke,generate:_ke,lexer:vke,parse:wke,specificity:Ju,toPlainObject:jke,tokenize:xke,walk:kke},Symbol.toStringTag,{value:"Module"})),{parse:Pke,generate:n1,compress:Nke}=Ake;function zc(e,t,n,r){return t.debug&&console.error(`## ${e} done in %d ms
`,Date.now()-n),r}function Oke(e){let t;return function(r,i){let s=r;if(i&&(s=`[${((Date.now()-t)/1e3).toFixed(3)}s] ${s}`),e>1&&i){let a=n1(i);e===2&&a.length>256&&(a=a.substr(0,256)+"..."),s+=`
  ${a}
`}console.error(s),t=Date.now()}}function Rke(e){return e={...e},typeof e.logger!="function"&&e.debug&&(e.logger=Oke(e.debug)),e}function H5(e,t,n){Array.isArray(n)||(n=[n]),n.forEach(r=>r(e,t))}function U6(e,t,n){n=n||{};const r=n.filename||"<unknown>";let i;const s=zc("parsing",n,Date.now(),Pke(t,{context:e,filename:r,positions:!!n.sourceMap}));n.beforeCompress&&zc("beforeCompress",n,Date.now(),H5(s,n,n.beforeCompress));const a=zc("compress",n,Date.now(),Nke(s,Rke(n)));return n.afterCompress&&zc("afterCompress",n,Date.now(),H5(a,n,n.afterCompress)),n.sourceMap?i=zc("generate(sourceMap: true)",n,Date.now(),(()=>{const o=n1(a.ast,{sourceMap:!0});return o.map._file=r,o.map.setSourceContent(r,t),o})()):i=zc("generate",n,Date.now(),{css:n1(a.ast),map:null}),i}function Mke(e,t){return U6("stylesheet",e,t)}function Lke(e,t){return U6("declarationList",e,t)}const Wp=Vs.skip,W5=(e,t)=>{const n=[];e.block.children.forEach(i=>{i.type==="Declaration"&&n.push({name:i.property,value:Ts(i.value),important:i.important===!0})});const r=[];return Vs(e.prelude,i=>{if(i.type==="Selector"){const s=Dx(i);let a=!1;Vs(s,(o,u,h)=>{o.type==="PseudoClassSelector"&&(a=!0,h.remove(u))}),r.push({specificity:Ju(i),dynamic:a||t,selector:Ts(s),declarations:n})}}),r},Ike=(e,t)=>{const n=[],r=Yu(e,{parseValue:!1,parseAtrulePrelude:!1});return Vs(r,i=>{if(i.type==="Rule")return n.push(...W5(i,t||!1)),Wp;if(i.type==="Atrule")return["keyframes","-webkit-keyframes","-o-keyframes","-moz-keyframes"].includes(i.name)||Vs(i,s=>{if(s.type==="Rule")return n.push(...W5(s,t||!0)),Wp}),Wp}),n},$ke=e=>{const t=[],n=Yu(e,{context:"declarationList",parseValue:!1});return Vs(n,r=>{r.type==="Declaration"&&t.push({name:r.property,value:Ts(r.value),important:r.important===!0})}),t},V5=(e,t,n)=>{const r={},i=new Map;for(const[a,o]of Object.entries(t.attributes))Ui.presentation.has(a)&&(r[a]={type:"static",inherited:!1,value:o},i.set(a,!1));for(const{selector:a,declarations:o,dynamic:u}of e.rules)if(wce(t,a,n))for(const{name:h,value:d,important:p}of o){const m=r[h];if(!(m&&m.type==="dynamic")){if(u){r[h]={type:"dynamic",inherited:!1};continue}(m==null||p===!0||i.get(h)===!1)&&(r[h]={type:"static",inherited:!1,value:d},i.set(h,p))}}const s=t.attributes.style==null?[]:$ke(t.attributes.style);for(const{name:a,value:o,important:u}of s){const h=r[a];h&&h.type==="dynamic"||(h==null||u===!0||i.get(a)===!1)&&(r[a]={type:"static",inherited:!1,value:o},i.set(a,u))}return r},H6=(e,t)=>{for(let n=0;n<4;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},Ia=e=>{const t=[],n=new Map;return so(e,{element:{enter:(r,i)=>{if(n.set(r,i),r.name==="style"&&(r.attributes.type==null||r.attributes.type===""||r.attributes.type==="text/css")){const s=r.attributes.media!=null&&r.attributes.media!=="all";for(const a of r.children)(a.type==="text"||a.type==="cdata")&&t.push(...Ike(a.value,s))}}}}),t.sort((r,i)=>H6(r.specificity,i.specificity)),{rules:t,parents:n}},Oa=(e,t)=>{const{parents:n}=e,r=V5(e,t,n);let i=n.get(t);for(;i!=null&&i.type!=="root";){const s=V5(e,i,n);for(const[a,o]of Object.entries(s))r[a]==null&&p0.has(a)&&!b_.has(a)&&(r[a]={...o,inherited:!0});i=n.get(i)}return r},Rb=(e,t,n=null,r=!1)=>{const i=sf(typeof e=="string"?e:Ts(e.data));for(const s of i)if(s.some((o,u)=>r&&(u===s.length-1||!ZO(s[u+1]))||o.type!=="attribute"||o.name!==t?!1:n==null?!0:o.value===n))return!0;return!1},Dke="removeDeprecatedAttrs",zke="removes deprecated attributes";function Fke(e){const t=new Set;return e.rules.forEach(n=>{sf(n.selector).forEach(i=>{i.forEach(s=>{s.type==="attribute"&&t.add(s.name)})})}),t}function G5(e,t,n,r){t&&(t.safe&&t.safe.forEach(i=>{r.has(i)||delete e.attributes[i]}),n.removeUnsafe&&t.unsafe&&t.unsafe.forEach(i=>{r.has(i)||delete e.attributes[i]}))}function Bke(e,t){const n=Ia(e),r=Fke(n);return{element:{enter:i=>{const s=y_[i.name];s&&(s.attrsGroups.has("core")&&i.attributes["xml:lang"]&&!r.has("xml:lang")&&i.attributes.lang&&delete i.attributes["xml:lang"],s.attrsGroups.forEach(a=>{G5(i,Oce[a],t,r)}),G5(i,s.deprecated,t,r))}}}}const W6=Object.freeze(Object.defineProperty({__proto__:null,description:zke,fn:Bke,name:Dke},Symbol.toStringTag,{value:"Module"})),Uke="removeMetadata",Hke="removes <metadata>",Wke=()=>({element:{enter:(e,t)=>{e.name==="metadata"&&zn(e,t)}}}),V6=Object.freeze(Object.defineProperty({__proto__:null,description:Hke,fn:Wke,name:Uke},Symbol.toStringTag,{value:"Module"})),Vke="removeEditorsNSData",Gke="removes editors namespaces, elements and attributes",qke=(e,t)=>{let n=[...bE];Array.isArray(t.additionalNamespaces)&&(n=[...bE,...t.additionalNamespaces]);const r=[];return{element:{enter:(i,s)=>{if(i.name==="svg")for(const[a,o]of Object.entries(i.attributes))a.startsWith("xmlns:")&&n.includes(o)&&(r.push(a.slice(6)),delete i.attributes[a]);for(const a of Object.keys(i.attributes))if(a.includes(":")){const[o]=a.split(":");r.includes(o)&&delete i.attributes[a]}if(i.name.includes(":")){const[a]=i.name.split(":");r.includes(a)&&zn(i,s)}}}}},G6=Object.freeze(Object.defineProperty({__proto__:null,description:Gke,fn:qke,name:Vke},Symbol.toStringTag,{value:"Module"})),Yke="cleanupAttrs",Xke="cleanups attributes from newlines, trailing and repeating spaces",Kke=/(\S)\r?\n(\S)/g,Zke=/\r?\n/g,Qke=/\s{2,}/g,Jke=(e,t)=>{const{newlines:n=!0,trim:r=!0,spaces:i=!0}=t;return{element:{enter:s=>{for(const a of Object.keys(s.attributes))n&&(s.attributes[a]=s.attributes[a].replace(Kke,(o,u,h)=>u+" "+h),s.attributes[a]=s.attributes[a].replace(Zke,"")),r&&(s.attributes[a]=s.attributes[a].trim()),i&&(s.attributes[a]=s.attributes[a].replace(Qke," "))}}}},q6=Object.freeze(Object.defineProperty({__proto__:null,description:Xke,fn:Jke,name:Yke},Symbol.toStringTag,{value:"Module"})),e2e="mergeStyles",t2e="merge multiple style elements into one",n2e=()=>{let e=null,t="",n="text";return{element:{enter:(r,i)=>{if(r.name==="foreignObject")return jo;if(r.name!=="style"||r.attributes.type!=null&&r.attributes.type!==""&&r.attributes.type!=="text/css")return;let s="";for(const a of r.children)a.type==="text"&&(s+=a.value),a.type==="cdata"&&(n="cdata",s+=a.value);if(s.trim().length===0){zn(r,i);return}if(r.attributes.media==null?t+=s:(t+=`@media ${r.attributes.media}{${s}}`,delete r.attributes.media),e==null)e=r;else{zn(r,i);const a={type:n,value:t};e.children=[a]}}}}},Y6=Object.freeze(Object.defineProperty({__proto__:null,description:t2e,fn:n2e,name:e2e},Symbol.toStringTag,{value:"Module"})),r2e="inlineStyles",i2e="inline styles (additional options)",s2e=[...wE.functional,...wE.treeStructural],a2e=(e,t)=>{const{onlyMatchedOnce:n=!0,removeMatchedSelectors:r=!0,useMqs:i=["","screen"],usePseudos:s=[""]}=t,a=[],o=[];return{element:{enter:(u,h)=>{if(u.name==="foreignObject")return jo;if(u.name!=="style"||u.children.length===0||u.attributes.type!=null&&u.attributes.type!==""&&u.attributes.type!=="text/css")return;const d=u.children.filter(m=>m.type==="text"||m.type==="cdata").map(m=>m.value).join("");let p=null;try{p=Yu(d,{parseValue:!1,parseCustomProperty:!1})}catch{return}p.type==="StyleSheet"&&a.push({node:u,parentNode:h,cssAst:p}),Vs(p,{visit:"Rule",enter(m){const g=this.atrule;let v="";g!=null&&(v=g.name,g.prelude!=null&&(v+=` ${Ts(g.prelude)}`)),i.includes(v)&&m.prelude.type==="SelectorList"&&m.prelude.children.forEach((w,C)=>{if(w.type==="Selector"){const x=[];w.children.forEach((A,j,I)=>{(A.type==="PseudoClassSelector"||A.type==="PseudoElementSelector")&&!s2e.includes(A.name)&&x.push({item:j,list:I})});const k=Ts({type:"Selector",children:new _o().fromArray(x.map(A=>A.item.data))});if(s.includes(k))for(const A of x)A.list.remove(A.item);o.push({node:w,rule:m,item:C})}})}})}},root:{exit:()=>{if(a.length===0)return;const u=o.slice().sort((h,d)=>{const p=Ju(h.item.data),m=Ju(d.item.data);return H6(p,m)}).reverse();for(const h of u){const d=Ts(h.item.data),p=[];try{for(const m of of(e,d))m.type==="element"&&p.push(m)}catch{continue}if(p.length!==0&&!(n&&p.length>1)){for(const m of p){const g=Yu(m.attributes.style??"",{context:"declarationList",parseValue:!1});if(g.type!=="DeclarationList")continue;const v=new Map;let w;Vs(g,{visit:"Declaration",enter(x,k){w==null&&(w=k),v.set(x.property.toLowerCase(),k)}}),Vs(h.rule,{visit:"Declaration",enter(x){const k=x.property;Ui.presentation.has(k)&&!o.some(I=>Rb(I.item,k))&&delete m.attributes[k];const A=v.get(k),j=g.children.createItem(x);A==null?g.children.insert(j,w):A.data.important!==!0&&x.important===!0&&(g.children.replace(A,j),v.set(k,j))}});const C=Ts(g);C.length!==0&&(m.attributes.style=C)}r&&p.length!==0&&h.rule.prelude.type==="SelectorList"&&h.rule.prelude.children.remove(h.item),h.matchedElements=p}}if(r){for(const h of u)if(h.matchedElements!=null&&!(n&&h.matchedElements.length>1))for(const d of h.matchedElements){const p=new Set(d.attributes.class==null?null:d.attributes.class.split(" "));for(const g of h.node.children)g.type==="ClassSelector"&&!o.some(v=>Rb(v.item,"class",g.name,!0))&&p.delete(g.name);p.size===0?delete d.attributes.class:d.attributes.class=Array.from(p).join(" ");const m=h.node.children.first;(m==null?void 0:m.type)==="IdSelector"&&d.attributes.id===m.name&&!o.some(g=>Rb(g.item,"id",m.name,!0))&&delete d.attributes.id}for(const h of a)if(Vs(h.cssAst,{visit:"Rule",enter:function(d,p,m){d.type==="Rule"&&d.prelude.type==="SelectorList"&&d.prelude.children.isEmpty&&m.remove(p)}}),h.cssAst.children.isEmpty)zn(h.node,h.parentNode);else{const d=h.node.children[0];(d.type==="text"||d.type==="cdata")&&(d.value=Ts(h.cssAst))}}}}}},X6=Object.freeze(Object.defineProperty({__proto__:null,description:i2e,fn:a2e,name:r2e},Symbol.toStringTag,{value:"Module"})),K6=/\burl\((["'])?#(.+?)\1\)/g,o2e=/^#(.+?)$/,l2e=/(\w+)\.[a-zA-Z]/,c2e=(e,t)=>{let n="data:image/svg+xml";return!t||t==="base64"?(n+=";base64,",e=n+Buffer.from(e).toString("base64")):t==="enc"?e=n+","+encodeURIComponent(e):t==="unenc"&&(e=n+","+e),e},eh=(e,t,n)=>{let r="",i,s;return e.forEach((a,o)=>{i=" ",o==0&&(i=""),t.noSpaceAfterFlags&&n=="a";const u=t.leadingZero?tc(a):a.toString();t.negativeExtraSpace&&i!=""&&(a<0||u.charAt(0)==="."&&s%1!==0)&&(i=""),s=a,r+=i+u}),r},tc=e=>{const t=e.toString();return 0<e&&e<1&&t.startsWith("0")?t.slice(1):-1<e&&e<0&&t[1]==="0"?t[0]+t.slice(2):t},N0=e=>e.name==="script"&&e.children.length!==0||e.name==="a"&&Object.entries(e.attributes).some(([r,i])=>(r==="href"||r.endsWith(":href"))&&i!=null&&i.trimStart().startsWith("javascript:"))?!0:[...Ui.animationEvent,...Ui.documentEvent,...Ui.documentElementEvent,...Ui.globalEvent,...Ui.graphicalEvent].some(n=>e.attributes[n]!=null),O0=e=>new RegExp(K6).test(e),Z6=(e,t)=>{const n=[];if(f0.has(e)){const r=t.matchAll(K6);for(const i of r)n.push(i[2])}if(e==="href"||e.endsWith(":href")){const r=o2e.exec(t);r!=null&&n.push(r[1])}if(e==="begin"){const r=l2e.exec(t);r!=null&&n.push(r[1])}return n.map(r=>decodeURI(r))},ko=(e,t)=>{const n=10**t;return Math.round(e*n)/n},u2e="minifyStyles",h2e="minifies styles and removes unused styles",d2e=(e,{usage:t,...n})=>{const r=new Map,i=[],s=new Set,a=new Set,o=new Set;let u=!0,h=!0,d=!0,p=!1;typeof t=="boolean"?(u=t,h=t,d=t):t&&(u=t.tags==null?!0:t.tags,h=t.ids==null?!0:t.ids,d=t.classes==null?!0:t.classes,p=t.force==null?!1:t.force);let m=!1;return{element:{enter:(g,v)=>{if(N0(g)&&(m=!0),s.add(g.name),g.attributes.id!=null&&a.add(g.attributes.id),g.attributes.class!=null)for(const w of g.attributes.class.split(/\s+/))o.add(w);g.name==="style"&&g.children.length!==0?r.set(g,v):g.attributes.style!=null&&i.push(g)}},root:{exit:()=>{const g={};(!m||p)&&(u&&(g.tags=Array.from(s)),h&&(g.ids=Array.from(a)),d&&(g.classes=Array.from(o)));for(const[v,w]of r.entries())if(v.children[0].type==="text"||v.children[0].type==="cdata"){const C=v.children[0].value,x=Mke(C,{...n,usage:g}).css;if(x.length===0){zn(v,w);continue}C.indexOf(">")>=0||C.indexOf("<")>=0?(v.children[0].type="cdata",v.children[0].value=x):(v.children[0].type="text",v.children[0].value=x)}for(const v of i){const w=v.attributes.style;v.attributes.style=Lke(w,{...n}).css}}}}},Q6=Object.freeze(Object.defineProperty({__proto__:null,description:h2e,fn:d2e,name:u2e},Symbol.toStringTag,{value:"Module"})),f2e="cleanupIds",p2e="removes unused IDs and minifies used",J6=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],q5=J6.length-1,m2e=(e,t)=>{for(const n of t)if(e.startsWith(n))return!0;return!1},g2e=e=>{if(e==null)return[0];e[e.length-1]+=1;for(let t=e.length-1;t>0;t--)e[t]>q5&&(e[t]=0,e[t-1]!==void 0&&e[t-1]++);return e[0]>q5&&(e[0]=0,e.unshift(0)),e},y2e=e=>e.map(t=>J6[t]).join(""),b2e=(e,t)=>{const{remove:n=!0,minify:r=!0,preserve:i=[],preservePrefixes:s=[],force:a=!1}=t,o=new Set(Array.isArray(i)?i:i?[i]:[]),u=Array.isArray(s)?s:s?[s]:[],h=new Map,d=new Map;let p=!1;return{element:{enter:m=>{if(!a){if(m.name==="style"&&m.children.length!==0||N0(m)){p=!0;return}if(m.name==="svg"){let g=!0;for(const v of m.children)if(v.type!=="element"||v.name!=="defs"){g=!1;break}if(g)return jo}}for(const[g,v]of Object.entries(m.attributes))if(g==="id"){const w=v;h.has(w)?delete m.attributes.id:h.set(w,m)}else{const w=Z6(g,v);for(const C of w){let x=d.get(C);x==null&&(x=[],d.set(C,x)),x.push({element:m,name:g})}}}},root:{exit:()=>{if(p)return;const m=v=>o.has(v)||m2e(v,u);let g=null;for(const[v,w]of d){const C=h.get(v);if(C!=null){if(r&&m(v)===!1){let x;do g=g2e(g),x=y2e(g);while(m(x)||d.has(x)&&h.get(x)==null);C.attributes.id=x;for(const{element:k,name:A}of w){const j=k.attributes[A];j.includes("#")?k.attributes[A]=j.replace(`#${encodeURI(v)}`,`#${x}`).replace(`#${v}`,`#${x}`):k.attributes[A]=j.replace(`${v}.`,`${x}.`)}}h.delete(v)}}if(n)for(const[v,w]of h)m(v)===!1&&delete w.attributes.id}}}},eL=Object.freeze(Object.defineProperty({__proto__:null,description:p2e,fn:b2e,name:f2e},Symbol.toStringTag,{value:"Module"})),v2e="removeUselessDefs",x2e="removes elements in <defs> without id",w2e=()=>({element:{enter:(e,t)=>{if(e.name==="defs"||kl.nonRendering.has(e.name)&&e.attributes.id==null){const n=[];tL(e,n),n.length===0&&zn(e,t),e.children=n}}}}),tL=(e,t)=>{for(const n of e.children)n.type==="element"&&(n.attributes.id!=null||n.name==="style"?t.push(n):tL(n,t))},nL=Object.freeze(Object.defineProperty({__proto__:null,description:x2e,fn:w2e,name:v2e},Symbol.toStringTag,{value:"Module"})),_2e="cleanupNumericValues",k2e='rounds numeric values to the fixed precision, removes default "px" units',S2e=/^([-+]?\d*\.?\d+([eE][-+]?\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,Y5={cm:96/2.54,mm:96/25.4,in:96,pt:4/3,pc:16,px:1},C2e=(e,t)=>{const{floatPrecision:n=3,leadingZero:r=!0,defaultPx:i=!0,convertToPx:s=!0}=t;return{element:{enter:a=>{if(a.attributes.viewBox!=null){const o=a.attributes.viewBox.trim().split(/(?:\s,?|,)\s*/g);a.attributes.viewBox=o.map(u=>{const h=Number(u);return Number.isNaN(h)?u:Number(h.toFixed(n))}).join(" ")}for(const[o,u]of Object.entries(a.attributes)){if(o==="version")continue;const h=S2e.exec(u);if(h){let d=Number(Number(h[1]).toFixed(n)),m=h[3]||"";if(s&&m!==""&&m in Y5){const v=Number((Y5[m]*Number(h[1])).toFixed(n));v.toString().length<h[0].length&&(d=v,m="px")}let g;r?g=tc(d):g=d.toString(),i&&m==="px"&&(m=""),a.attributes[o]=g+m}}}}}},rL=Object.freeze(Object.defineProperty({__proto__:null,description:k2e,fn:C2e,name:_2e},Symbol.toStringTag,{value:"Module"})),E2e="convertColors",T2e="converts colors: rgb() to #rrggbb and #rrggbb to #rgb",Mb="([+-]?(?:\\d*\\.\\d+|\\d+\\.?)%?)",X5="(?:\\s*,\\s*|\\s+)",j2e=new RegExp("^rgb\\(\\s*"+Mb+X5+Mb+X5+Mb+"\\s*\\)$"),A2e=/^#(([a-fA-F0-9])\2){3}$/,P2e=([e,t,n])=>"#"+((256+e<<8|t)<<8|n).toString(16).slice(1).toUpperCase(),N2e=(e,t)=>{const{currentColor:n=!1,names2hex:r=!0,rgb2hex:i=!0,convertCase:s="lower",shorthex:a=!0,shortname:o=!0}=t;let u=0;return{element:{enter:h=>{h.name==="mask"&&u++;for(const[d,p]of Object.entries(h.attributes))if(kx.has(d)){let m=p;if(n&&u===0){let g;typeof n=="string"?g=m===n:n instanceof RegExp?g=n.exec(m)!=null:g=m!=="none",g&&(m="currentColor")}if(r){const g=m.toLowerCase();vE[g]!=null&&(m=vE[g])}if(i){const g=m.match(j2e);if(g!=null){const v=g.slice(1,4).map(w=>{let C;return w.indexOf("%")>-1?C=Math.round(parseFloat(w)*2.55):C=Number(w),Math.max(0,Math.min(C,255))});m=P2e(v)}}if(s&&!O0(m)&&m!=="currentColor"&&(s==="lower"?m=m.toLowerCase():s==="upper"&&(m=m.toUpperCase())),a){const g=A2e.exec(m);g!=null&&(m="#"+g[0][1]+g[0][3]+g[0][5])}if(o){const g=m.toLowerCase();xE[g]!=null&&(m=xE[g])}h.attributes[d]=m}},exit:h=>{h.name==="mask"&&u--}}}},iL=Object.freeze(Object.defineProperty({__proto__:null,description:T2e,fn:N2e,name:E2e},Symbol.toStringTag,{value:"Module"})),O2e="removeUnknownsAndDefaults",R2e="removes unknown elements content and attributes, removes attrs with default values",r1=new Map,sL=new Map,aL=new Map;for(const[e,t]of Object.entries(y_)){const n=new Set;if(t.content)for(const s of t.content)n.add(s);if(t.contentGroups)for(const s of t.contentGroups){const a=kl[s];if(a)for(const o of a)n.add(o)}const r=new Set;if(t.attrs)for(const s of t.attrs)r.add(s);const i=new Map;if(t.defaults)for(const[s,a]of Object.entries(t.defaults))i.set(s,a);for(const s of t.attrsGroups){const a=Ui[s];if(a)for(const u of a)r.add(u);const o=g_[s];if(o)for(const[u,h]of Object.entries(o))i.set(u,h)}r1.set(e,n),sL.set(e,r),aL.set(e,i)}const M2e=(e,t)=>{const{unknownContent:n=!0,unknownAttrs:r=!0,defaultAttrs:i=!0,defaultMarkupDeclarations:s=!0,uselessOverrides:a=!0,keepDataAttrs:o=!0,keepAriaAttrs:u=!0,keepRoleAttr:h=!1}=t,d=Ia(e);return{instruction:{enter:p=>{s&&(p.value=p.value.replace(/\s*standalone\s*=\s*(["'])no\1/,""))}},element:{enter:(p,m)=>{if(p.name.includes(":"))return;if(p.name==="foreignObject")return jo;if(n&&m.type==="element"){const C=r1.get(m.name);if(C==null||C.size===0){if(r1.get(p.name)==null){zn(p,m);return}}else if(C.has(p.name)===!1){zn(p,m);return}}const g=sL.get(p.name),v=aL.get(p.name),w=m.type==="element"?Oa(d,m):null;for(const[C,x]of Object.entries(p.attributes))if(!(o&&C.startsWith("data-"))&&!(u&&C.startsWith("aria-"))&&!(h&&C==="role")&&C!=="xmlns"){if(C.includes(":")){const[k]=C.split(":");if(k!=="xml"&&k!=="xlink")continue}if(r&&g&&g.has(C)===!1&&delete p.attributes[C],i&&p.attributes.id==null&&v&&v.get(C)===x&&(w==null?void 0:w[C])==null&&delete p.attributes[C],a&&p.attributes.id==null){const k=w==null?void 0:w[C];b_.has(C)===!1&&k!=null&&k.type==="static"&&k.value===x&&delete p.attributes[C]}}}}}},oL=Object.freeze(Object.defineProperty({__proto__:null,description:R2e,fn:M2e,name:O2e},Symbol.toStringTag,{value:"Module"})),L2e="removeNonInheritableGroupAttrs",I2e="removes non-inheritable group's presentational attributes",$2e=()=>({element:{enter:e=>{if(e.name==="g")for(const t of Object.keys(e.attributes))Ui.presentation.has(t)&&!p0.has(t)&&!b_.has(t)&&delete e.attributes[t]}}}),lL=Object.freeze(Object.defineProperty({__proto__:null,description:I2e,fn:$2e,name:L2e},Symbol.toStringTag,{value:"Module"})),D2e="removeUselessStrokeAndFill",z2e="removes useless stroke and fill attributes",F2e=(e,t)=>{const{stroke:n=!0,fill:r=!0,removeNone:i=!1}=t;let s=!1;if(so(e,{element:{enter:o=>{(o.name==="style"||N0(o))&&(s=!0)}}}),s)return null;const a=Ia(e);return{element:{enter:(o,u)=>{if(o.attributes.id!=null)return jo;if(!kl.shape.has(o.name))return;const h=Oa(a,o),d=h.stroke,p=h["stroke-opacity"],m=h["stroke-width"],g=h["marker-end"],v=h.fill,w=h["fill-opacity"],C=u.type==="element"?Oa(a,u):null,x=C==null?null:C.stroke;if(n&&(d==null||d.type==="static"&&d.value=="none"||p!=null&&p.type==="static"&&p.value==="0"||m!=null&&m.type==="static"&&m.value==="0")&&(m!=null&&m.type==="static"&&m.value==="0"||g==null)){for(const k of Object.keys(o.attributes))k.startsWith("stroke")&&delete o.attributes[k];x!=null&&x.type==="static"&&x.value!=="none"&&(o.attributes.stroke="none")}if(r&&(v!=null&&v.type==="static"&&v.value==="none"||w!=null&&w.type==="static"&&w.value==="0")){for(const k of Object.keys(o.attributes))k.startsWith("fill-")&&delete o.attributes[k];(v==null||v.type==="static"&&v.value!=="none")&&(o.attributes.fill="none")}i&&(d==null||o.attributes.stroke==="none")&&(v!=null&&v.type==="static"&&v.value==="none"||o.attributes.fill==="none")&&zn(o,u)}}}},cL=Object.freeze(Object.defineProperty({__proto__:null,description:z2e,fn:F2e,name:D2e},Symbol.toStringTag,{value:"Module"})),B2e="cleanupEnableBackground",U2e="remove or cleanup enable-background attribute when possible",H2e=/^new\s0\s0\s([-+]?\d*\.?\d+([eE][-+]?\d+)?)\s([-+]?\d*\.?\d+([eE][-+]?\d+)?)$/,W2e=e=>{let t=!1;return so(e,{element:{enter:n=>{n.name==="filter"&&(t=!0)}}}),{element:{enter:n=>{let r=null,i=null;if(n.attributes.style!=null&&(r=Yu(n.attributes.style,{context:"declarationList"}),r.type==="DeclarationList")){const a=[];Vs(r,(o,u)=>{o.type==="Declaration"&&o.property==="enable-background"&&(a.push(u),i=u)});for(let o=0;o<a.length-1;o++)r.children.remove(a[o])}if(!t){delete n.attributes["enable-background"],(r==null?void 0:r.type)==="DeclarationList"&&(i&&r.children.remove(i),r.children.isEmpty?delete n.attributes.style:n.attributes.style=Ts(r));return}const s=n.attributes.width!=null&&n.attributes.height!=null;if((n.name==="svg"||n.name==="mask"||n.name==="pattern")&&s){const a=n.attributes["enable-background"],o=K5(a,n.name,n.attributes.width,n.attributes.height);if(o?n.attributes["enable-background"]=o:delete n.attributes["enable-background"],(r==null?void 0:r.type)==="DeclarationList"&&i){const u=Ts(i.data.value),h=K5(u,n.name,n.attributes.width,n.attributes.height);h?i.data.value={type:"Raw",value:h}:r.children.remove(i)}}(r==null?void 0:r.type)==="DeclarationList"&&(r.children.isEmpty?delete n.attributes.style:n.attributes.style=Ts(r))}}}},K5=(e,t,n,r)=>{const i=H2e.exec(e);return i!=null&&n===i[1]&&r===i[3]?t==="svg"?void 0:"new":e},uL=Object.freeze(Object.defineProperty({__proto__:null,description:U2e,fn:W2e,name:B2e},Symbol.toStringTag,{value:"Module"})),hL={M:2,m:2,Z:0,z:0,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2,A:7,a:7},V2e=e=>e in hL,G2e=e=>e===" "||e==="	"||e==="\r"||e===`
`,dL=e=>{const t=e.codePointAt(0);return t==null?!1:48<=t&&t<=57},Lb=(e,t)=>{let n=t,r="",i="none";for(;n<e.length;n+=1){const a=e[n];if(a==="+"||a==="-"){if(i==="none"){i="sign",r+=a;continue}if(i==="e"){i="exponent_sign",r+=a;continue}}if(dL(a)){if(i==="none"||i==="sign"||i==="whole"){i="whole",r+=a;continue}if(i==="decimal_point"||i==="decimal"){i="decimal",r+=a;continue}if(i==="e"||i==="exponent_sign"||i==="exponent"){i="exponent",r+=a;continue}}if(a==="."&&(i==="none"||i==="sign"||i==="whole")){i="decimal_point",r+=a;continue}if((a==="E"||a=="e")&&(i==="whole"||i==="decimal_point"||i==="decimal")){i="e",r+=a;continue}break}const s=Number.parseFloat(r);return Number.isNaN(s)?[t,null]:[n-1,s]},J_=e=>{const t=[];let n=null,r=[],i=0,s=!1,a=!1;for(let o=0;o<e.length;o+=1){const u=e.charAt(o);if(G2e(u))continue;if(s&&u===","){if(a)break;a=!0;continue}if(V2e(u)){if(a)return t;if(n==null){if(u!=="M"&&u!=="m")return t}else if(r.length!==0)return t;n=u,r=[],i=hL[n],s=!1,i===0&&t.push({command:n,args:r});continue}if(n==null)return t;let h=o,d=null;if(n==="A"||n==="a"){const p=r.length;(p===0||p===1)&&u!=="+"&&u!=="-"&&([h,d]=Lb(e,o)),(p===2||p===5||p===6)&&([h,d]=Lb(e,o)),(p===3||p===4)&&(u==="0"&&(d=0),u==="1"&&(d=1))}else[h,d]=Lb(e,o);if(d==null)return t;r.push(d),s=!0,a=!1,o=h,r.length===i&&(t.push({command:n,args:r}),n==="M"&&(n="L"),n==="m"&&(n="l"),r=[])}return t},q2e=(e,t)=>(t!=null&&(e=ko(e,t)),{roundedStr:tc(e),rounded:e}),Vp=(e,t,n,r)=>{let i="",s;for(let a=0;a<t.length;a++){const{roundedStr:o,rounded:u}=q2e(t[a],n);r&&(e==="A"||e==="a")&&(a%7===4||a%7===5)||a===0||u<0||!Number.isInteger(s)&&!dL(o[0])?i+=o:i+=` ${o}`,s=u}return i},ou=({pathData:e,precision:t,disableSpaceAfterFlags:n})=>{if(e.length===1){const{command:s,args:a}=e[0];return s+Vp(s,a,t,n)}let r="",i={...e[0]};e[1].command==="L"?i.command="M":e[1].command==="l"&&(i.command="m");for(let s=1;s<e.length;s++){const{command:a,args:o}=e[s];i.command===a&&i.command!=="M"&&i.command!=="m"||i.command==="M"&&a==="L"||i.command==="m"&&a==="l"?(i.args=[...i.args,...o],s===e.length-1&&(r+=i.command+Vp(i.command,i.args,t,n))):(r+=i.command+Vp(i.command,i.args,t,n),s===e.length-1?r+=a+Vp(a,o,t,n):i={command:a,args:o})}return r},Y2e=kl.nonRendering,X2e="removeHiddenElems",K2e="removes hidden elements (zero sized, with absent attributes)",Z2e=(e,t)=>{const{isHidden:n=!0,displayNone:r=!0,opacity0:i=!0,circleR0:s=!0,ellipseRX0:a=!0,ellipseRY0:o=!0,rectWidth0:u=!0,rectHeight0:h=!0,patternWidth0:d=!0,patternHeight0:p=!0,imageWidth0:m=!0,imageHeight0:g=!0,pathEmptyD:v=!0,polylineEmptyPoints:w=!0,polygonEmptyPoints:C=!0}=t,x=Ia(e),k=new Map,A=new Set,j=new Map,I=new Set,E=new Map;let U=!1;function D(X){if(I.has(X.attributes.id))return!1;for(const ce of X.children)if(ce.type==="element"&&!D(ce))return!1;return!0}function R(X,ce){X.type==="element"&&X.attributes.id!=null&&ce.type==="element"&&ce.name==="defs"&&A.add(X.attributes.id),zn(X,ce)}return so(e,{element:{enter:(X,ce)=>{if(Y2e.has(X.name))return k.set(X,ce),jo;const ie=Oa(x,X);if(i&&ie.opacity&&ie.opacity.type==="static"&&ie.opacity.value==="0"){if(X.name==="path")return k.set(X,ce),jo;R(X,ce)}}}}),{element:{enter:(X,ce)=>{if(X.name==="style"&&X.children.length!==0||N0(X)){U=!0;return}if(X.name==="defs"&&j.set(X,ce),X.name==="use")for(const ge of Object.keys(X.attributes)){if(ge!=="href"&&!ge.endsWith(":href"))continue;const ye=X.attributes[ge].slice(1);let je=E.get(ye);je||(je=[],E.set(ye,je)),je.push({node:X,parentNode:ce})}const ie=Oa(x,X);if(n&&ie.visibility&&ie.visibility.type==="static"&&ie.visibility.value==="hidden"&&fR(X,"[visibility=visible]")==null){R(X,ce);return}if(r&&ie.display&&ie.display.type==="static"&&ie.display.value==="none"&&X.name!=="marker"){R(X,ce);return}if(s&&X.name==="circle"&&X.children.length===0&&X.attributes.r==="0"){R(X,ce);return}if(a&&X.name==="ellipse"&&X.children.length===0&&X.attributes.rx==="0"){R(X,ce);return}if(o&&X.name==="ellipse"&&X.children.length===0&&X.attributes.ry==="0"){R(X,ce);return}if(u&&X.name==="rect"&&X.children.length===0&&X.attributes.width==="0"){R(X,ce);return}if(h&&u&&X.name==="rect"&&X.children.length===0&&X.attributes.height==="0"){R(X,ce);return}if(d&&X.name==="pattern"&&X.attributes.width==="0"){R(X,ce);return}if(p&&X.name==="pattern"&&X.attributes.height==="0"){R(X,ce);return}if(m&&X.name==="image"&&X.attributes.width==="0"){R(X,ce);return}if(g&&X.name==="image"&&X.attributes.height==="0"){R(X,ce);return}if(v&&X.name==="path"){if(X.attributes.d==null){R(X,ce);return}const ge=J_(X.attributes.d);if(ge.length===0){R(X,ce);return}if(ge.length===1&&ie["marker-start"]==null&&ie["marker-end"]==null){R(X,ce);return}}if(w&&X.name==="polyline"&&X.attributes.points==null){R(X,ce);return}if(C&&X.name==="polygon"&&X.attributes.points==null){R(X,ce);return}for(const[ge,H]of Object.entries(X.attributes)){const ye=Z6(ge,H);for(const je of ye)I.add(je)}}},root:{exit:()=>{for(const X of A){const ce=E.get(X);if(ce)for(const{node:ie,parentNode:ge}of ce)zn(ie,ge)}if(!U)for(const[X,ce]of k.entries())D(X)&&zn(X,ce);for(const[X,ce]of j.entries())X.children.length===0&&zn(X,ce)}}}},fL=Object.freeze(Object.defineProperty({__proto__:null,description:K2e,fn:Z2e,name:X2e},Symbol.toStringTag,{value:"Module"})),Q2e="removeEmptyText",J2e="removes empty <text> elements",eSe=(e,t)=>{const{text:n=!0,tspan:r=!0,tref:i=!0}=t;return{element:{enter:(s,a)=>{n&&s.name==="text"&&s.children.length===0&&zn(s,a),r&&s.name==="tspan"&&s.children.length===0&&zn(s,a),i&&s.name==="tref"&&s.attributes["xlink:href"]==null&&zn(s,a)}}}},pL=Object.freeze(Object.defineProperty({__proto__:null,description:J2e,fn:eSe,name:Q2e},Symbol.toStringTag,{value:"Module"})),tSe="convertShapeToPath",nSe="converts basic shapes to more compact path form",rSe=/[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,iSe=(e,t)=>{const{convertArcs:n=!1,floatPrecision:r}=t;return{element:{enter:(i,s)=>{if(i.name==="rect"&&i.attributes.width!=null&&i.attributes.height!=null&&i.attributes.rx==null&&i.attributes.ry==null){const a=Number(i.attributes.x||"0"),o=Number(i.attributes.y||"0"),u=Number(i.attributes.width),h=Number(i.attributes.height);if(Number.isNaN(a-o+u-h))return;const d=[{command:"M",args:[a,o]},{command:"H",args:[a+u]},{command:"V",args:[o+h]},{command:"H",args:[a]},{command:"z",args:[]}];i.name="path",i.attributes.d=ou({pathData:d,precision:r}),delete i.attributes.x,delete i.attributes.y,delete i.attributes.width,delete i.attributes.height}if(i.name==="line"){const a=Number(i.attributes.x1||"0"),o=Number(i.attributes.y1||"0"),u=Number(i.attributes.x2||"0"),h=Number(i.attributes.y2||"0");if(Number.isNaN(a-o+u-h))return;const d=[{command:"M",args:[a,o]},{command:"L",args:[u,h]}];i.name="path",i.attributes.d=ou({pathData:d,precision:r}),delete i.attributes.x1,delete i.attributes.y1,delete i.attributes.x2,delete i.attributes.y2}if((i.name==="polyline"||i.name==="polygon")&&i.attributes.points!=null){const a=(i.attributes.points.match(rSe)||[]).map(Number);if(a.length<4){zn(i,s);return}const o=[];for(let u=0;u<a.length;u+=2)o.push({command:u===0?"M":"L",args:a.slice(u,u+2)});i.name==="polygon"&&o.push({command:"z",args:[]}),i.name="path",i.attributes.d=ou({pathData:o,precision:r}),delete i.attributes.points}if(i.name==="circle"&&n){const a=Number(i.attributes.cx||"0"),o=Number(i.attributes.cy||"0"),u=Number(i.attributes.r||"0");if(Number.isNaN(a-o+u))return;const h=[{command:"M",args:[a,o-u]},{command:"A",args:[u,u,0,1,0,a,o+u]},{command:"A",args:[u,u,0,1,0,a,o-u]},{command:"z",args:[]}];i.name="path",i.attributes.d=ou({pathData:h,precision:r}),delete i.attributes.cx,delete i.attributes.cy,delete i.attributes.r}if(i.name==="ellipse"&&n){const a=Number(i.attributes.cx||"0"),o=Number(i.attributes.cy||"0"),u=Number(i.attributes.rx||"0"),h=Number(i.attributes.ry||"0");if(Number.isNaN(a-o+u-h))return;const d=[{command:"M",args:[a,o-h]},{command:"A",args:[u,h,0,1,0,a,o+h]},{command:"A",args:[u,h,0,1,0,a,o-h]},{command:"z",args:[]}];i.name="path",i.attributes.d=ou({pathData:d,precision:r}),delete i.attributes.cx,delete i.attributes.cy,delete i.attributes.rx,delete i.attributes.ry}}}}},mL=Object.freeze(Object.defineProperty({__proto__:null,description:nSe,fn:iSe,name:tSe},Symbol.toStringTag,{value:"Module"})),sSe="convertEllipseToCircle",aSe="converts non-eccentric <ellipse>s to <circle>s",oSe=()=>({element:{enter:e=>{if(e.name==="ellipse"){const t=e.attributes.rx||"0",n=e.attributes.ry||"0";if(t===n||t==="auto"||n==="auto"){e.name="circle";const r=t==="auto"?n:t;delete e.attributes.rx,delete e.attributes.ry,e.attributes.r=r}}}}}),gL=Object.freeze(Object.defineProperty({__proto__:null,description:aSe,fn:oSe,name:sSe},Symbol.toStringTag,{value:"Module"})),lSe="moveElemsAttrsToGroup",cSe="Move common attributes of group children to the group",uSe=e=>{let t=!1;return so(e,{element:{enter:n=>{n.name==="style"&&(t=!0)}}}),{element:{exit:n=>{if(n.name!=="g"||n.children.length<=1||t)return;const r=new Map;let i=!0,s=!0;for(const a of n.children)if(a.type==="element")if(m_.has(a.name)||(s=!1),i){i=!1;for(const[o,u]of Object.entries(a.attributes))p0.has(o)&&r.set(o,u)}else for(const[o,u]of r)a.attributes[o]!==u&&r.delete(o);(n.attributes.filter!=null||n.attributes["clip-path"]!=null||n.attributes.mask!=null)&&r.delete("transform"),s&&r.delete("transform");for(const[a,o]of r)a==="transform"?n.attributes.transform!=null?n.attributes.transform=`${n.attributes.transform} ${o}`:n.attributes.transform=o:n.attributes[a]=o;for(const a of n.children)if(a.type==="element")for(const[o]of r)delete a.attributes[o]}}}},yL=Object.freeze(Object.defineProperty({__proto__:null,description:cSe,fn:uSe,name:lSe},Symbol.toStringTag,{value:"Module"})),hSe="moveGroupAttrsToElems",dSe="moves some group attributes to the content elements",fSe=[...m_,"g","text"],pSe=()=>({element:{enter:e=>{if(e.name==="g"&&e.children.length!==0&&e.attributes.transform!=null&&Object.entries(e.attributes).some(([t,n])=>f0.has(t)&&O0(n))===!1&&e.children.every(t=>t.type==="element"&&fSe.includes(t.name)&&t.attributes.id==null)){for(const t of e.children){const n=e.attributes.transform;t.type==="element"&&(t.attributes.transform!=null?t.attributes.transform=`${n} ${t.attributes.transform}`:t.attributes.transform=n)}delete e.attributes.transform}}}}),bL=Object.freeze(Object.defineProperty({__proto__:null,description:dSe,fn:pSe,name:hSe},Symbol.toStringTag,{value:"Module"})),mSe="collapseGroups",gSe="collapses useless groups",vL=(e,t)=>{if(e.type==="element"){if(kl.animation.has(e.name)&&e.attributes.attributeName===t)return!0;for(const n of e.children)if(vL(n,t))return!0}return!1},ySe=e=>{const t=Ia(e);return{element:{exit:(n,r)=>{if(!(r.type==="root"||r.name==="switch")&&!(n.name!=="g"||n.children.length===0)){if(Object.keys(n.attributes).length!==0&&n.children.length===1){const i=n.children[0],s=!!(n.attributes.filter||Oa(t,n).filter);if(i.type==="element"&&i.attributes.id==null&&!s&&(n.attributes.class==null||i.attributes.class==null)&&(n.attributes["clip-path"]==null&&n.attributes.mask==null||i.name==="g"&&n.attributes.transform==null&&i.attributes.transform==null)){const a={...i.attributes};for(const[o,u]of Object.entries(n.attributes)){if(vL(i,o))return;if(a[o]==null)a[o]=u;else if(o==="transform")a[o]=u+" "+a[o];else if(a[o]==="inherit")a[o]=u;else if(!p0.has(o)&&a[o]!==u)return}n.attributes={},i.attributes=a}}if(Object.keys(n.attributes).length===0){for(const s of n.children)if(s.type==="element"&&kl.animation.has(s.name))return;const i=r.children.indexOf(n);r.children.splice(i,1,...n.children)}}}}}},xL=Object.freeze(Object.defineProperty({__proto__:null,description:gSe,fn:ySe,name:mSe},Symbol.toStringTag,{value:"Module"}));let Ha;const Ag=e=>{if(e.pathJS)return e.pathJS;const t=[],n=J_(e.attributes.d);for(const{command:r,args:i}of n)t.push({command:r,args:i});return t.length&&t[0].command=="m"&&(t[0].command="M"),e.pathJS=t,t},Z5=e=>{const t=[],n=[0,0],r=[0,0];for(let{command:i,args:s}of e)s=s.slice(),i==="m"&&(s[0]+=r[0],s[1]+=r[1],i="M"),i==="M"&&(r[0]=s[0],r[1]=s[1],n[0]=r[0],n[1]=r[1]),i==="h"&&(s[0]+=r[0],i="H"),i==="H"&&(r[0]=s[0]),i==="v"&&(s[0]+=r[1],i="V"),i==="V"&&(r[1]=s[0]),i==="l"&&(s[0]+=r[0],s[1]+=r[1],i="L"),i==="L"&&(r[0]=s[0],r[1]=s[1]),i==="c"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],s[4]+=r[0],s[5]+=r[1],i="C"),i==="C"&&(r[0]=s[4],r[1]=s[5]),i==="s"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],i="S"),i==="S"&&(r[0]=s[2],r[1]=s[3]),i==="q"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],i="Q"),i==="Q"&&(r[0]=s[2],r[1]=s[3]),i==="t"&&(s[0]+=r[0],s[1]+=r[1],i="T"),i==="T"&&(r[0]=s[0],r[1]=s[1]),i==="a"&&(s[5]+=r[0],s[6]+=r[1],i="A"),i==="A"&&(r[0]=s[5],r[1]=s[6]),(i==="z"||i==="Z")&&(r[0]=n[0],r[1]=n[1],i="z"),t.push({command:i,args:s});return t},wL=function(e,t,n){e.pathJS=t;const r=[];for(const i of t){if(r.length!==0&&(i.command==="M"||i.command==="m")){const s=r[r.length-1];(s.command==="M"||s.command==="m")&&r.pop()}r.push({command:i.command,args:i.args})}e.attributes.d=ou({pathData:r,precision:n.floatPrecision,disableSpaceAfterFlags:n.noSpaceAfterFlags})};function Fc(e,t){return e[0]=t[t.length-2],e[1]=t[t.length-1],e}const _L=function(e,t){const n=Q5(Z5(e)),r=Q5(Z5(t));if(n.maxX<=r.minX||r.maxX<=n.minX||n.maxY<=r.minY||r.maxY<=n.minY||n.list.every(u=>r.list.every(h=>u.list[u.maxX][0]<=h.list[h.minX][0]||h.list[h.maxX][0]<=u.list[u.minX][0]||u.list[u.maxY][1]<=h.list[h.minY][1]||h.list[h.maxY][1]<=u.list[u.minY][1])))return!1;const i=n.list.map(J5),s=r.list.map(J5);return i.some(function(u){return u.list.length<3?!1:s.some(function(h){if(h.list.length<3)return!1;const d=[a(u,h,[1,0])],p=th(d[0]);let m=1e4;for(;;){if(m--==0)return console.error("Error: infinite loop while processing mergePaths plugin."),!0;if(d.push(a(u,h,p)),Zo(p,d[d.length-1])<=0)return!1;if(bSe(d,p))return!0}})});function a(u,h,d){return vm(o(u,d),o(h,th(d)))}function o(u,h){let d=h[1]>=0?h[0]<0?u.maxY:u.maxX:h[0]<0?u.minX:u.minY,p=-1/0,m;for(;(m=Zo(u.list[d],h))>p;)p=m,d=++d%u.list.length;return u.list[(d||u.list.length)-1]}};function bSe(e,t){if(e.length==2){const n=e[1],r=e[0],i=th(e[1]),s=vm(r,n);Zo(i,s)>0?Fc(t,Ib(s,n)):(Fc(t,i),e.shift())}else{const n=e[2],r=e[1],i=e[0],s=vm(r,n),a=vm(i,n),o=th(n),u=Ib(s,a),h=Ib(a,s);if(Zo(u,o)>0)Zo(s,o)>0?(Fc(t,u),e.shift()):(Fc(t,o),e.splice(0,2));else if(Zo(h,o)>0)Zo(a,o)>0?(Fc(t,h),e.splice(1,1)):(Fc(t,o),e.splice(0,2));else return!0}return!1}function th(e){return[-e[0],-e[1]]}function vm(e,t){return[e[0]-t[0],e[1]-t[1]]}function Zo(e,t){return e[0]*t[0]+e[1]*t[1]}function Ib(e,t){const n=[-e[1],e[0]];return Zo(n,th(t))<0?th(n):n}function Q5(e){const t={list:[],minX:0,minY:0,maxX:0,maxY:0},n=(i,s)=>{(!i.list.length||s[1]>i.list[i.maxY][1])&&(i.maxY=i.list.length,t.maxY=t.list.length?Math.max(s[1],t.maxY):s[1]),(!i.list.length||s[0]>i.list[i.maxX][0])&&(i.maxX=i.list.length,t.maxX=t.list.length?Math.max(s[0],t.maxX):s[0]),(!i.list.length||s[1]<i.list[i.minY][1])&&(i.minY=i.list.length,t.minY=t.list.length?Math.min(s[1],t.minY):s[1]),(!i.list.length||s[0]<i.list[i.minX][0])&&(i.minX=i.list.length,t.minX=t.list.length?Math.min(s[0],t.minX):s[0]),i.list.push(s)};for(let i=0;i<e.length;i+=1){const s=e[i];let a=t.list.length===0?{list:[],minX:0,minY:0,maxX:0,maxY:0}:t.list[t.list.length-1];const o=i===0?null:e[i-1];let u=a.list.length===0?null:a.list[a.list.length-1];const h=s.args;let d=u;const p=(m,g)=>m+(u==null?0:u[g%2]);switch(s.command){case"M":a={list:[],minX:0,minY:0,maxX:0,maxY:0},t.list.push(a);break;case"H":u!=null&&n(a,[h[0],u[1]]);break;case"V":u!=null&&n(a,[u[0],h[0]]);break;case"Q":n(a,h.slice(0,2)),Ha=[h[2]-h[0],h[3]-h[1]];break;case"T":u!=null&&o!=null&&(o.command=="Q"||o.command=="T")&&(d=[u[0]+Ha[0],u[1]+Ha[1]],n(a,d),Ha=[h[0]-d[0],h[1]-d[1]]);break;case"C":u!=null&&n(a,[.5*(u[0]+h[0]),.5*(u[1]+h[1])]),n(a,[.5*(h[0]+h[2]),.5*(h[1]+h[3])]),n(a,[.5*(h[2]+h[4]),.5*(h[3]+h[5])]),Ha=[h[4]-h[2],h[5]-h[3]];break;case"S":u!=null&&o!=null&&(o.command=="C"||o.command=="S")&&(n(a,[u[0]+.5*Ha[0],u[1]+.5*Ha[1]]),d=[u[0]+Ha[0],u[1]+Ha[1]]),d!=null&&n(a,[.5*(d[0]+h[0]),.5*(d[1]+h[1])]),n(a,[.5*(h[0]+h[2]),.5*(h[1]+h[3])]),Ha=[h[2]-h[0],h[3]-h[1]];break;case"A":if(u!=null){const m=kL.apply(0,u.concat(h));for(var r;(r=m.splice(0,6).map(p)).length;)u!=null&&n(a,[.5*(u[0]+r[0]),.5*(u[1]+r[1])]),n(a,[.5*(r[0]+r[2]),.5*(r[1]+r[3])]),n(a,[.5*(r[2]+r[4]),.5*(r[3]+r[5])]),m.length&&n(a,u=r.slice(-2))}break}h.length>=2&&n(a,h.slice(-2))}return t}function J5(e){e.list.sort(function(h,d){return h[0]==d[0]?h[1]-d[1]:h[0]-d[0]});const t=[];let n=0,r=0;for(let h=0;h<e.list.length;h++){for(;t.length>=2&&ej(t[t.length-2],t[t.length-1],e.list[h])<=0;)t.pop();e.list[h][1]<e.list[n][1]&&(n=h,r=t.length),t.push(e.list[h])}const i=[];let s=e.list.length-1,a=0;for(let h=e.list.length;h--;){for(;i.length>=2&&ej(i[i.length-2],i[i.length-1],e.list[h])<=0;)i.pop();e.list[h][1]>e.list[s][1]&&(s=h,a=i.length),i.push(e.list[h])}i.pop(),t.pop();const o=t.concat(i);return{list:o,minX:0,maxX:t.length,minY:r,maxY:(t.length+a)%o.length}}function ej(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}const kL=(e,t,n,r,i,s,a,o,u,h)=>{const d=Math.PI*120/180,p=Math.PI/180*(+i||0);let m=[];const g=(ie,ge,H)=>ie*Math.cos(H)-ge*Math.sin(H),v=(ie,ge,H)=>ie*Math.sin(H)+ge*Math.cos(H);if(h)x=h[0],k=h[1],w=h[2],C=h[3];else{e=g(e,t,-p),t=v(e,t,-p),o=g(o,u,-p),u=v(o,u,-p);const ie=(e-o)/2,ge=(t-u)/2;let H=ie*ie/(n*n)+ge*ge/(r*r);H>1&&(H=Math.sqrt(H),n=H*n,r=H*r);const ye=n*n,je=r*r,ke=(s==a?-1:1)*Math.sqrt(Math.abs((ye*je-ye*ge*ge-je*ie*ie)/(ye*ge*ge+je*ie*ie)));var w=ke*n*ge/r+(e+o)/2,C=ke*-r*ie/n+(t+u)/2,x=Math.asin(Number(((t-C)/r).toFixed(9))),k=Math.asin(Number(((u-C)/r).toFixed(9)));x=e<w?Math.PI-x:x,k=o<w?Math.PI-k:k,x<0&&(x=Math.PI*2+x),k<0&&(k=Math.PI*2+k),a&&x>k&&(x=x-Math.PI*2),!a&&k>x&&(k=k-Math.PI*2)}let A=k-x;if(Math.abs(A)>d){const ie=k,ge=o,H=u;k=x+d*(a&&k>x?1:-1),o=w+n*Math.cos(k),u=C+r*Math.sin(k),m=kL(o,u,n,r,i,0,a,ge,H,[k,ie,w,C])}A=k-x;const j=Math.cos(x),I=Math.sin(x),E=Math.cos(k),U=Math.sin(k),D=Math.tan(A/4),R=4/3*n*D,X=4/3*r*D,ce=[-R*I,X*j,o+R*U-e,u-X*E-t,o-e,u-t];if(h)return ce.concat(m);{m=ce.concat(m);const ie=[];for(let ge=0,H=m.length;ge<H;ge++)ie[ge]=ge%2?v(m[ge-1],m[ge],p):g(m[ge],m[ge+1],p);return ie}},vSe=new Set(["matrix","rotate","scale","skewX","skewY","translate"]),xSe=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,wSe=/[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,SL=e=>{const t=[];let n=null;for(const r of e.split(xSe))if(r)if(vSe.has(r))n={name:r,data:[]},t.push(n);else{let i;for(;i=wSe.exec(r);)i=Number(i),n!=null&&n.data.push(i)}return n==null||n.data.length==0?[]:t},CL=e=>{const t=e.map(r=>r.name==="matrix"?r.data:ASe(r));return{name:"matrix",data:t.length>0?t.reduce(EL):[]}},Ki={rad:e=>e*Math.PI/180,deg:e=>e*180/Math.PI,cos:e=>Math.cos(Ki.rad(e)),acos:(e,t)=>ko(Ki.deg(Math.acos(e)),t),sin:e=>Math.sin(Ki.rad(e)),asin:(e,t)=>ko(Ki.deg(Math.asin(e)),t),tan:e=>Math.tan(Ki.rad(e)),atan:(e,t)=>ko(Ki.deg(Math.atan(e)),t)},_Se=e=>{const t=[],n=kSe(e),r=SSe(e);return n&&t.push(n),r&&t.push(r),t},kSe=e=>{const t=e.data,[n,r,i,s,a,o]=t,u=n*s-r*i;if(u===0)return;const h=Math.hypot(n,r);if(h===0)return;const d=[],p=n/h;if((a||o)&&d.push({name:"translate",data:[a,o]}),p!==1){const w=Math.acos(p);d.push({name:"rotate",data:[Ki.deg(r<0?-w:w),0,0]})}const m=h,g=u/m;(m!==1||g!==1)&&d.push({name:"scale",data:[m,g]});const v=n*i+r*s;return v&&d.push({name:"skewX",data:[Ki.deg(Math.atan(v/(n*n+r*r)))]}),d},SSe=e=>{const t=e.data,[n,r,i,s,a,o]=t,u=n*s-r*i;if(u===0)return;const h=Math.hypot(i,s);if(h===0)return;const d=[];(a||o)&&d.push({name:"translate",data:[a,o]});const p=Math.PI/2-(s<0?-1:1)*Math.acos(-i/h);d.push({name:"rotate",data:[Ki.deg(p),0,0]});const m=u/h,g=h;(m!==1||g!==1)&&d.push({name:"scale",data:[m,g]});const v=n*i+r*s;return v&&d.push({name:"skewY",data:[Ki.deg(Math.atan(v/(i*i+s*s)))]}),d},CSe=(e,t,n)=>{const r=Ki.rad(n),i=1-Math.cos(r),s=Math.sin(r),a=(i*t+s*e)/(i*i+s*s),o=(e-s*a)/i;return{name:"rotate",data:[n,o,a]}},ESe=e=>{switch(e.name){case"rotate":case"skewX":case"skewY":return e.data[0]===0;case"scale":return e.data[0]===1&&e.data[1]===1;case"translate":return e.data[0]===0&&e.data[1]===0}return!1},TSe=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(ESe(i))continue;const s=i.data;switch(i.name){case"rotate":switch(s[0]){case 180:case-180:{const a=e[r+1];a&&a.name==="scale"?(n.push(tj(a.data.map(o=>-o))),r++):n.push({name:"scale",data:[-1]})}continue}n.push({name:"rotate",data:s.slice(0,s[1]||s[2]?3:1)});break;case"scale":n.push(tj(s));break;case"skewX":case"skewY":n.push({name:i.name,data:[s[0]]});break;case"translate":{const a=e[r+1];if(a&&a.name==="rotate"&&a.data[0]!==180&&a.data[0]!==-180&&a.data[0]!==0&&a.data[1]===0&&a.data[2]===0){const o=t[r].data;n.push(CSe(o[0],o[1],t[r+1].data[0])),r++;continue}}n.push({name:"translate",data:s.slice(0,s[1]?2:1)});break}}return n.length?n:[{name:"scale",data:[1]}]},tj=e=>({name:"scale",data:e.slice(0,e[0]===e[1]?1:2)}),jSe=(e,t)=>{const n=_Se(e);let r,i=Number.MAX_VALUE;for(const s of n){const a=s.map(h=>{const d={name:h.name,data:[...h.data]};return R0(d,t)}),o=TSe(a,s),u=Pg(o,t).length;u<i&&(r=o,i=u)}return r??[e]},ASe=e=>{if(e.name==="matrix")return e.data;switch(e.name){case"translate":return[1,0,0,1,e.data[0],e.data[1]||0];case"scale":return[e.data[0],0,0,e.data[1]??e.data[0],0,0];case"rotate":var t=Ki.cos(e.data[0]),n=Ki.sin(e.data[0]),r=e.data[1]||0,i=e.data[2]||0;return[t,n,-n,t,(1-t)*r+n*i,(1-t)*i-n*r];case"skewX":return[1,0,Ki.tan(e.data[0]),1,0,0];case"skewY":return[1,Ki.tan(e.data[0]),0,1,0,0];default:throw Error(`Unknown transform ${e.name}`)}},nj=(e,t,n)=>{const r=t[5]-e[0],i=t[6]-e[1];let s=t[0],a=t[1];const o=t[2]*Math.PI/180,u=Math.cos(o),h=Math.sin(o);if(s>0&&a>0){let w=Math.pow(r*u+i*h,2)/(4*s*s)+Math.pow(i*u-r*h,2)/(4*a*a);w>1&&(w=Math.sqrt(w),s*=w,a*=w)}const d=[s*u,s*h,-a*h,a*u,0,0],p=EL(n,d),m=p[2]*p[2]+p[3]*p[3],g=p[0]*p[0]+p[1]*p[1]+m,v=Math.hypot(p[0]-p[3],p[1]+p[2])*Math.hypot(p[0]+p[3],p[1]-p[2]);if(!v)t[0]=t[1]=Math.sqrt(g/2),t[2]=0;else{const w=(g+v)/2,C=(g-v)/2,x=Math.abs(w-m)>1e-6,k=(x?w:C)-m,A=p[0]*p[2]+p[1]*p[3],j=p[0]*k+p[2]*A,I=p[1]*k+p[3]*A;t[0]=Math.sqrt(w),t[1]=Math.sqrt(C),t[2]=((x?I<0:j>0)?-1:1)*Math.acos((x?j:I)/Math.hypot(j,I))*180/Math.PI}return n[0]<0!=n[3]<0&&(t[4]=1-t[4]),t},EL=(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],R0=(e,t)=>{switch(e.name){case"translate":e.data=$b(e.data,t);break;case"rotate":e.data=[...rj(e.data.slice(0,1),t),...$b(e.data.slice(1),t)];break;case"skewX":case"skewY":e.data=rj(e.data,t);break;case"scale":e.data=ij(e.data,t);break;case"matrix":e.data=[...ij(e.data.slice(0,4),t),...$b(e.data.slice(4),t)];break}return e},rj=(e,t)=>t.degPrecision!=null&&t.degPrecision>=1&&t.floatPrecision<20?tk(t.degPrecision,e):ek(e),$b=(e,t)=>t.floatPrecision>=1&&t.floatPrecision<20?tk(t.floatPrecision,e):ek(e),ij=(e,t)=>t.transformPrecision>=1&&t.floatPrecision<20?tk(t.transformPrecision,e):ek(e),ek=e=>e.map(Math.round),tk=(e,t)=>{for(let n=t.length,r=+Math.pow(.1,e).toFixed(e);n--;)if(ko(t[n],e)!==t[n]){const i=+t[n].toFixed(e-1);t[n]=+Math.abs(i-t[n]).toFixed(e+1)>=r?+t[n].toFixed(e):i}return t},Pg=(e,t)=>e.map(r=>(R0(r,t),`${r.name}(${eh(r.data,t)})`)).join(""),Db=/[-+]?(\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,PSe=(e,t)=>{const n=Ia(e);return{element:{enter:r=>{var m,g,v,w;if(r.attributes.d==null||r.attributes.id!=null||r.attributes.transform==null||r.attributes.transform===""||r.attributes.style!=null||Object.entries(r.attributes).some(([C,x])=>f0.has(C)&&O0(x)))return;const i=Oa(n,r),s=i.transform;if(s.type==="static"&&s.value!==r.attributes.transform)return;const a=CL(SL(r.attributes.transform)),o=((m=i.stroke)==null?void 0:m.type)==="static"?i.stroke.value:null,u=((g=i["stroke-width"])==null?void 0:g.type)==="static"?i["stroke-width"].value:null,h=t.transformPrecision;if(((v=i.stroke)==null?void 0:v.type)==="dynamic"||((w=i["stroke-width"])==null?void 0:w.type)==="dynamic")return;const d=Number(Math.hypot(a.data[0],a.data[1]).toFixed(h));if(o&&o!="none"){if(!t.applyTransformsStroked||(a.data[0]!==a.data[3]||a.data[1]!==-a.data[2])&&(a.data[0]!==-a.data[3]||a.data[1]!==a.data[2]))return;d!==1&&r.attributes["vector-effect"]!=="non-scaling-stroke"&&(r.attributes["stroke-width"]=(u||g_.presentation["stroke-width"]).trim().replace(Db,C=>tc(Number(C)*d)),r.attributes["stroke-dashoffset"]!=null&&(r.attributes["stroke-dashoffset"]=r.attributes["stroke-dashoffset"].trim().replace(Db,C=>tc(Number(C)*d))),r.attributes["stroke-dasharray"]!=null&&(r.attributes["stroke-dasharray"]=r.attributes["stroke-dasharray"].trim().replace(Db,C=>tc(Number(C)*d))))}const p=Ag(r);NSe(p,a.data),delete r.attributes.transform}}}},aa=(e,t,n)=>{const r=e[0]*t+e[2]*n+e[4],i=e[1]*t+e[3]*n+e[5];return[r,i]},oa=(e,t,n)=>{const r=e[0]*t+e[2]*n,i=e[1]*t+e[3]*n;return[r,i]},NSe=(e,t)=>{const n=[0,0],r=[0,0];for(const i of e){let{command:s,args:a}=i;if(s==="M"){r[0]=a[0],r[1]=a[1],n[0]=r[0],n[1]=r[1];const[o,u]=aa(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="m"){r[0]+=a[0],r[1]+=a[1],n[0]=r[0],n[1]=r[1];const[o,u]=oa(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="H"&&(s="L",a=[a[0],r[1]]),s==="h"&&(s="l",a=[a[0],0]),s==="V"&&(s="L",a=[r[0],a[0]]),s==="v"&&(s="l",a=[0,a[0]]),s==="L"){r[0]=a[0],r[1]=a[1];const[o,u]=aa(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="l"){r[0]+=a[0],r[1]+=a[1];const[o,u]=oa(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="C"){r[0]=a[4],r[1]=a[5];const[o,u]=aa(t,a[0],a[1]),[h,d]=aa(t,a[2],a[3]),[p,m]=aa(t,a[4],a[5]);a[0]=o,a[1]=u,a[2]=h,a[3]=d,a[4]=p,a[5]=m}if(s==="c"){r[0]+=a[4],r[1]+=a[5];const[o,u]=oa(t,a[0],a[1]),[h,d]=oa(t,a[2],a[3]),[p,m]=oa(t,a[4],a[5]);a[0]=o,a[1]=u,a[2]=h,a[3]=d,a[4]=p,a[5]=m}if(s==="S"){r[0]=a[2],r[1]=a[3];const[o,u]=aa(t,a[0],a[1]),[h,d]=aa(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=h,a[3]=d}if(s==="s"){r[0]+=a[2],r[1]+=a[3];const[o,u]=oa(t,a[0],a[1]),[h,d]=oa(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=h,a[3]=d}if(s==="Q"){r[0]=a[2],r[1]=a[3];const[o,u]=aa(t,a[0],a[1]),[h,d]=aa(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=h,a[3]=d}if(s==="q"){r[0]+=a[2],r[1]+=a[3];const[o,u]=oa(t,a[0],a[1]),[h,d]=oa(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=h,a[3]=d}if(s==="T"){r[0]=a[0],r[1]=a[1];const[o,u]=aa(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="t"){r[0]+=a[0],r[1]+=a[1];const[o,u]=oa(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="A"){if(nj(r,a,t),r[0]=a[5],r[1]=a[6],Math.abs(a[2])>80){const h=a[0],d=a[2];a[0]=a[1],a[1]=h,a[2]=d+(d>0?-90:90)}const[o,u]=aa(t,a[5],a[6]);a[5]=o,a[6]=u}if(s==="a"){if(nj([0,0],a,t),r[0]+=a[5],r[1]+=a[6],Math.abs(a[2])>80){const h=a[0],d=a[2];a[0]=a[1],a[1]=h,a[2]=d+(d>0?-90:90)}const[o,u]=oa(t,a[5],a[6]);a[5]=o,a[6]=u}(s==="z"||s==="Z")&&(r[0]=n[0],r[1]=n[1]),i.command=s,i.args=a}},OSe="convertPathData",RSe="optimizes path data: writes in shorter form, applies transformations";let bo,ba,Or,nk,rk;const MSe=(e,t)=>{const{applyTransforms:n=!0,applyTransformsStroked:r=!0,makeArcs:i={threshold:2.5,tolerance:.5},straightCurves:s=!0,convertToQ:a=!0,lineShorthands:o=!0,convertToZ:u=!0,curveSmoothShorthands:h=!0,floatPrecision:d=3,transformPrecision:p=5,smartArcRounding:m=!0,removeUseless:g=!0,collapseRepeated:v=!0,utilizeAbsolute:w=!0,leadingZero:C=!0,negativeExtraSpace:x=!0,noSpaceAfterFlags:k=!1,forceAbsolutePath:A=!1}=t,j={applyTransforms:n,applyTransformsStroked:r,makeArcs:i,straightCurves:s,convertToQ:a,lineShorthands:o,convertToZ:u,curveSmoothShorthands:h,floatPrecision:d,transformPrecision:p,smartArcRounding:m,removeUseless:g,collapseRepeated:v,utilizeAbsolute:w,leadingZero:C,negativeExtraSpace:x,noSpaceAfterFlags:k,forceAbsolutePath:A};n&&so(e,PSe(e,{transformPrecision:p,applyTransformsStroked:r}));const I=Ia(e);return{element:{enter:E=>{var U,D;if(m_.has(E.name)&&E.attributes.d!=null){const R=Oa(I,E);ba=d,Or=ba!==!1?+Math.pow(.1,ba).toFixed(ba):.01,bo=ba&&ba>0&&ba<20?DSe:zSe,i&&(nk=i.threshold,rk=i.tolerance);const X=R["marker-mid"]!=null,ce=R.stroke&&(R.stroke.type==="dynamic"||R.stroke.value!=="none"),ie=R["stroke-linecap"]&&(R["stroke-linecap"].type==="dynamic"||R["stroke-linecap"].value!=="butt"),ge=ce&&ie,H=ce?((U=R["stroke-linecap"])==null?void 0:U.type)==="static"&&R["stroke-linecap"].value==="round"&&((D=R["stroke-linejoin"])==null?void 0:D.type)==="static"&&R["stroke-linejoin"].value==="round":!0;let ye=Ag(E);if(ye.length){const je=ye.some(xe=>xe.command!=="m"&&xe.command!=="M");LSe(ye),ye=ISe(ye,j,{isSafeToUseZ:H,maybeHasStrokeAndLinecap:ge,hasMarkerMid:X}),w&&(ye=$Se(ye,j)),(E.attributes["marker-start"]!=null||E.attributes["marker-end"]!=null)&&je&&ye.every(xe=>xe.command==="m"||xe.command==="M")&&ye.push({command:"z",args:[]}),wL(E,ye,j)}}}}}},LSe=e=>{const t=[0,0],n=[0,0];let r=[0,0];for(let i=0;i<e.length;i+=1){const s=e[i];let{command:a,args:o}=s;a==="m"&&(n[0]+=o[0],n[1]+=o[1],t[0]=n[0],t[1]=n[1]),a==="M"&&(i!==0&&(a="m"),o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1],t[0]=n[0],t[1]=n[1]),a==="l"&&(n[0]+=o[0],n[1]+=o[1]),a==="L"&&(a="l",o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1]),a==="h"&&(n[0]+=o[0]),a==="H"&&(a="h",o[0]-=n[0],n[0]+=o[0]),a==="v"&&(n[1]+=o[0]),a==="V"&&(a="v",o[0]-=n[1],n[1]+=o[0]),a==="c"&&(n[0]+=o[4],n[1]+=o[5]),a==="C"&&(a="c",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],o[4]-=n[0],o[5]-=n[1],n[0]+=o[4],n[1]+=o[5]),a==="s"&&(n[0]+=o[2],n[1]+=o[3]),a==="S"&&(a="s",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],n[0]+=o[2],n[1]+=o[3]),a==="q"&&(n[0]+=o[2],n[1]+=o[3]),a==="Q"&&(a="q",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],n[0]+=o[2],n[1]+=o[3]),a==="t"&&(n[0]+=o[0],n[1]+=o[1]),a==="T"&&(a="t",o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1]),a==="a"&&(n[0]+=o[5],n[1]+=o[6]),a==="A"&&(a="a",o[5]-=n[0],o[6]-=n[1],n[0]+=o[5],n[1]+=o[6]),(a==="Z"||a==="z")&&(n[0]=t[0],n[1]=t[1]),s.command=a,s.args=o,s.base=r,s.coords=[n[0],n[1]],r=s.coords}return e};function ISe(e,t,{isSafeToUseZ:n,maybeHasStrokeAndLinecap:r,hasMarkerMid:i}){const s=BSe.bind(null,t),a=[0,0],o=[0,0];let u={},h;return e=e.filter(function(d,p,m){const g=h;let v=d.command,w=d.args,C=m[p+1];if(v!=="Z"&&v!=="z"){let k=w,A;if(v==="s"){k=[0,0].concat(w);const I=u.args,E=I.length;k[0]=I[E-2]-I[E-4],k[1]=I[E-1]-I[E-3]}if(t.makeArcs&&(v=="c"||v=="s")&&zb(k)&&(A=FSe(k))){const I=bo([A.radius])[0];let E=Bb(k,A);const U=k[5]*k[0]-k[4]*k[1]>0?1:0;let D={command:"a",args:[I,I,0,0,U,k[4],k[5]],coords:d.coords.slice(),base:d.base};const R=[D],X=[A.center[0]-k[4],A.center[1]-k[5]],ce={center:X,radius:A.radius},ie=[d];let ge=0,H="",ye;if(u.command=="c"&&zb(u.args)&&oj(u.args,A)||u.command=="a"&&u.sdata&&oj(u.sdata,A)){ie.unshift(u),D.base=u.base,D.args[5]=D.coords[0]-D.base[0],D.args[6]=D.coords[1]-D.base[1];const je=u.command=="a"?u.sdata:u.args,ke=Bb(je,{center:[je[4]+A.center[0],je[5]+A.center[1]],radius:A.radius});E+=ke,E>Math.PI&&(D.args[3]=1),ge=1}for(var x=p;(C=m[++x])&&(C.command==="c"||C.command==="s");){let je=C.args;if(C.command=="s"&&(ye=Vh({command:"s",args:C.args.slice()},m[x-1].args),je=ye.args,ye.args=je.slice(0,2),H=s([ye])),zb(je)&&jL(je,ce)){if(E+=Bb(je,ce),E-2*Math.PI>.001)break;if(E>Math.PI&&(D.args[3]=1),ie.push(C),2*Math.PI-E>.001)D.coords=C.coords,D.args[5]=D.coords[0]-D.base[0],D.args[6]=D.coords[1]-D.base[1];else{D.args[5]=2*(ce.center[0]-je[4]),D.args[6]=2*(ce.center[1]-je[5]),D.coords=[D.base[0]+D.args[5],D.base[1]+D.args[6]],D={command:"a",args:[I,I,0,0,U,C.coords[0]-D.coords[0],C.coords[1]-D.coords[1]],coords:C.coords,base:D.coords},R.push(D),x++;break}X[0]-=je[4],X[1]-=je[5]}else break}if((s(R)+H).length<s(ie).length){if(m[x]&&m[x].command=="s"&&Vh(m[x],m[x-1].args),ge){const je=R.shift();bo(je.args),a[0]+=je.args[5]-u.args[u.args.length-2],a[1]+=je.args[6]-u.args[u.args.length-1],u.command="a",u.args=je.args,d.base=u.coords=je.coords}if(D=R.shift(),ie.length==1?d.sdata=k.slice():ie.length-1-ge>0&&m.splice(p+1,ie.length-1-ge,...R),!D)return!1;v="a",w=D.args,d.coords=D.coords}}if(ba!==!1){if(v==="m"||v==="l"||v==="t"||v==="q"||v==="s"||v==="c")for(let I=w.length;I--;)w[I]+=d.base[I%2]-a[I%2];else v=="h"?w[0]+=d.base[0]-a[0]:v=="v"?w[0]+=d.base[1]-a[1]:v=="a"&&(w[5]+=d.base[0]-a[0],w[6]+=d.base[1]-a[1]);bo(w),v=="h"?a[0]+=w[0]:v=="v"?a[1]+=w[0]:(a[0]+=w[w.length-2],a[1]+=w[w.length-1]),bo(a),(v==="M"||v==="m")&&(o[0]=a[0],o[1]=a[1])}const j=v==="a"?sj(w):void 0;if(t.smartArcRounding&&j!==void 0&&ba)for(let I=ba;I>=0;I--){const E=ko(w[0],I),U=sj([E,E,...w.slice(2)]);if(Math.abs(j-U)<Or)w[0]=E,w[1]=E;else break}if(t.straightCurves&&(v==="c"&&Fb(w)||v==="s"&&Fb(k)?(C&&C.command=="s"&&Vh(C,w),v="l",w=w.slice(-2)):v==="q"&&Fb(w)?(C&&C.command=="t"&&Vh(C,w),v="l",w=w.slice(-2)):(v==="t"&&u.command!=="q"&&u.command!=="t"||v==="a"&&(w[0]===0||w[1]===0||j!==void 0&&j<Or))&&(v="l",w=w.slice(-2))),t.convertToQ&&v=="c"){const I=.75*(d.base[0]+w[0])-.25*d.base[0],E=.75*(d.base[0]+w[2])-.25*(d.base[0]+w[4]);if(Math.abs(I-E)<Or*2){const U=.75*(d.base[1]+w[1])-.25*d.base[1],D=.75*(d.base[1]+w[3])-.25*(d.base[1]+w[5]);if(Math.abs(U-D)<Or*2){const R=w.slice();R.splice(0,4,I+E-d.base[0],U+D-d.base[1]),bo(R);const X=eh(w,t).length;eh(R,t).length<X&&(v="q",w=R,C&&C.command=="s"&&Vh(C,w))}}}if(t.lineShorthands&&v==="l"&&(w[1]===0?(v="h",w.pop()):w[0]===0&&(v="v",w.shift())),t.collapseRepeated&&i===!1&&(v==="m"||v==="h"||v==="v")&&u.command&&v==u.command.toLowerCase()&&(v!="h"&&v!="v"||u.args[0]>=0==w[0]>=0))return u.args[0]+=w[0],v!="h"&&v!="v"&&(u.args[1]+=w[1]),u.coords=d.coords,m[p]=u,!1;if(t.curveSmoothShorthands&&u.command){if(v==="c")(u.command==="c"&&Math.abs(w[0]- -(u.args[2]-u.args[4]))<Or&&Math.abs(w[1]- -(u.args[3]-u.args[5]))<Or||u.command==="s"&&Math.abs(w[0]- -(u.args[0]-u.args[2]))<Or&&Math.abs(w[1]- -(u.args[1]-u.args[3]))<Or||u.command!=="c"&&u.command!=="s"&&Math.abs(w[0])<Or&&Math.abs(w[1])<Or)&&(v="s",w=w.slice(2));else if(v==="q"){if(u.command==="q"&&Math.abs(w[0]-(u.args[2]-u.args[0]))<Or&&Math.abs(w[1]-(u.args[3]-u.args[1]))<Or)v="t",w=w.slice(2);else if(u.command==="t"){const I=aj(g,d.base),E=[w[0]+d.base[0],w[1]+d.base[1]];Math.abs(I[0]-E[0])<Or&&Math.abs(I[1]-E[1])<Or&&(v="t",w=w.slice(2))}}}if(t.removeUseless&&!r&&((v==="l"||v==="h"||v==="v"||v==="q"||v==="t"||v==="c"||v==="s")&&w.every(function(I){return I===0})||v==="a"&&w[5]===0&&w[6]===0))return m[p]=u,!1;t.convertToZ&&(n||(C==null?void 0:C.command)==="Z"||(C==null?void 0:C.command)==="z")&&(v==="l"||v==="h"||v==="v")&&Math.abs(o[0]-d.coords[0])<Or&&Math.abs(o[1]-d.coords[1])<Or&&(v="z",w=[]),d.command=v,d.args=w}else if(a[0]=o[0],a[1]=o[1],u.command==="Z"||u.command==="z")return!1;return(v==="Z"||v==="z")&&t.removeUseless&&n&&Math.abs(d.base[0]-d.coords[0])<Or/10&&Math.abs(d.base[1]-d.coords[1])<Or/10?!1:(v==="q"?h=[w[0]+d.base[0],w[1]+d.base[1]]:v==="t"?g?h=aj(g,d.base):h=d.coords:h=void 0,u=d,!0)}),e}function $Se(e,t){let n=e[0];return e=e.filter(function(r,i){if(i==0)return!0;if(r.command==="Z"||r.command==="z")return n=r,!0;const s=r.command,a=r.args,o=a.slice(),u=a.slice();if(s==="m"||s==="l"||s==="t"||s==="q"||s==="s"||s==="c")for(let p=o.length;p--;)o[p]+=r.base[p%2];else s=="h"?o[0]+=r.base[0]:s=="v"?o[0]+=r.base[1]:s=="a"&&(o[5]+=r.base[0],o[6]+=r.base[1]);bo(o),bo(u);const h=eh(o,t),d=eh(u,t);return(t.forceAbsolutePath||h.length<d.length&&!(t.negativeExtraSpace&&s==n.command&&n.command.charCodeAt(0)>96&&h.length==d.length-1&&(a[0]<0||Math.floor(a[0])===0&&!Number.isInteger(a[0])&&n.args[n.args.length-1]%1)))&&(r.command=s.toUpperCase(),r.args=o),n=r,!0}),e}function zb(e){const t=TL([0,0,e[2],e[3],e[0],e[1],e[4],e[5]]);return t!=null&&e[2]<t[0]==t[0]<0&&e[3]<t[1]==t[1]<0&&e[4]<t[0]==t[0]<e[0]&&e[5]<t[1]==t[1]<e[1]}function TL(e){const t=e[1]-e[3],n=e[2]-e[0],r=e[0]*e[3]-e[2]*e[1],i=e[5]-e[7],s=e[6]-e[4],a=e[4]*e[7]-e[5]*e[6],o=t*s-i*n;if(!o)return;const u=[(n*a-s*r)/o,(t*a-i*r)/-o];if(!isNaN(u[0])&&!isNaN(u[1])&&isFinite(u[0])&&isFinite(u[1]))return u}function DSe(e){const t=ba||0;for(let n=e.length;n-- >0;){const r=ko(e[n],t);if(r!==e[n]){const i=ko(e[n],t-1);e[n]=ko(Math.abs(i-e[n]),t+1)>=Or?r:i}}return e}function zSe(e){for(let t=e.length;t-- >0;)e[t]=Math.round(e[t]);return e}function Fb(e){let t=e.length-2;const n=-e[t+1],r=e[t],i=1/(n*n+r*r);if(t<=1||!isFinite(i))return!1;for(;(t-=2)>=0;)if(Math.sqrt(Math.pow(n*e[t]+r*e[t+1],2)*i)>Or)return!1;return!0}function sj(e){if(e[3]===1)return;const[t,n]=e;if(Math.abs(t-n)>Or)return;const r=Math.hypot(e[5],e[6]);if(!(r>t*2))return t-Math.sqrt(t**2-.25*r**2)}function Vh(e,t){switch(e.command){case"s":e.command="c";break;case"t":e.command="q";break}return e.args.unshift(t[t.length-2]-t[t.length-4],t[t.length-1]-t[t.length-3]),e}function i1(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function aj(e,t){return[2*t[0]-e[0],2*t[1]-e[1]]}function s1(e,t){const n=t*t,r=n*t,i=1-t,s=i*i;return[3*s*t*e[0]+3*i*n*e[2]+r*e[4],3*s*t*e[1]+3*i*n*e[3]+r*e[5]]}function FSe(e){const t=s1(e,.5),n=[t[0]/2,t[1]/2],r=[(t[0]+e[4])/2,(t[1]+e[5])/2],i=TL([n[0],n[1],n[0]+n[1],n[1]-n[0],r[0],r[1],r[0]+(r[1]-t[1]),r[1]-(r[0]-t[0])]),s=i&&i1([0,0],i),a=Math.min(nk*Or,rk*s/100);if(i&&s<1e15&&[1/4,3/4].every(function(o){return Math.abs(i1(s1(e,o),i)-s)<=a}))return{center:i,radius:s}}function jL(e,t){const n=Math.min(nk*Or,rk*t.radius/100);return[0,1/4,1/2,3/4,1].every(function(r){return Math.abs(i1(s1(e,r),t.center)-t.radius)<=n})}function oj(e,t){return jL(e,{center:[t.center[0]+e[4],t.center[1]+e[5]],radius:t.radius})}function Bb(e,t){const n=-t.center[0],r=-t.center[1],i=e[4]-t.center[0],s=e[5]-t.center[1];return Math.acos((n*i+r*s)/Math.sqrt((n*n+r*r)*(i*i+s*s)))}function BSe(e,t){return t.reduce(function(n,r){let i="";return r.args&&(i=eh(bo(r.args.slice()),e)),n+r.command+i},"")}const AL=Object.freeze(Object.defineProperty({__proto__:null,description:RSe,fn:MSe,name:OSe},Symbol.toStringTag,{value:"Module"})),USe="convertTransform",HSe="collapses multiple transformations and optimizes it",WSe=(e,t)=>{const{convertToShorts:n=!0,degPrecision:r,floatPrecision:i=3,transformPrecision:s=5,matrixToTransform:a=!0,shortTranslate:o=!0,shortScale:u=!0,shortRotate:h=!0,removeUseless:d=!0,collapseIntoOne:p=!0,leadingZero:m=!0,negativeExtraSpace:g=!1}=t,v={convertToShorts:n,degPrecision:r,floatPrecision:i,transformPrecision:s,matrixToTransform:a,shortTranslate:o,shortScale:u,shortRotate:h,removeUseless:d,collapseIntoOne:p,leadingZero:m,negativeExtraSpace:g};return{element:{enter:w=>{w.attributes.transform!=null&&Ub(w,"transform",v),w.attributes.gradientTransform!=null&&Ub(w,"gradientTransform",v),w.attributes.patternTransform!=null&&Ub(w,"patternTransform",v)}}}},Ub=(e,t,n)=>{let r=SL(e.attributes[t]);n=VSe(r,n),n.collapseIntoOne&&r.length>1&&(r=[CL(r)]),n.convertToShorts?r=qSe(r,n):r.forEach(i=>R0(i,n)),n.removeUseless&&(r=YSe(r)),r.length?e.attributes[t]=Pg(r,n):delete e.attributes[t]},VSe=(e,{...t})=>{const n=[];for(const i of e)i.name=="matrix"&&n.push(...i.data.slice(0,4));let r=t.transformPrecision;return n.length&&(t.transformPrecision=Math.min(t.transformPrecision,Math.max.apply(Math,n.map(GSe))||t.transformPrecision),r=Math.max.apply(Math,n.map(i=>i.toString().replace(/\D+/g,"").length))),t.degPrecision==null&&(t.degPrecision=Math.max(0,Math.min(t.floatPrecision,r-2))),t},GSe=e=>{const t=e.toString();return t.slice(t.indexOf(".")).length-1},qSe=(e,t)=>{var n;for(let r=0;r<e.length;r++){let i=e[r];if(t.matrixToTransform&&i.name==="matrix"){const s=jSe(i,t);Pg(s,t).length<=Pg([i],t).length&&e.splice(r,1,...s),i=e[r]}R0(i,t),t.shortTranslate&&i.name==="translate"&&i.data.length===2&&!i.data[1]&&i.data.pop(),t.shortScale&&i.name==="scale"&&i.data.length===2&&i.data[0]===i.data[1]&&i.data.pop(),t.shortRotate&&((n=e[r-2])==null?void 0:n.name)==="translate"&&e[r-1].name==="rotate"&&e[r].name==="translate"&&e[r-2].data[0]===-e[r].data[0]&&e[r-2].data[1]===-e[r].data[1]&&(e.splice(r-2,3,{name:"rotate",data:[e[r-1].data[0],e[r-2].data[0],e[r-2].data[1]]}),r-=2)}return e},YSe=e=>e.filter(t=>!(["translate","rotate","skewX","skewY"].indexOf(t.name)>-1&&(t.data.length==1||t.name=="rotate")&&!t.data[0]||t.name=="translate"&&!t.data[0]&&!t.data[1]||t.name=="scale"&&t.data[0]==1&&(t.data.length<2||t.data[1]==1)||t.name=="matrix"&&t.data[0]==1&&t.data[3]==1&&!(t.data[1]||t.data[2]||t.data[4]||t.data[5]))),PL=Object.freeze(Object.defineProperty({__proto__:null,description:HSe,fn:WSe,name:USe},Symbol.toStringTag,{value:"Module"})),XSe="removeEmptyAttrs",KSe="removes empty attributes",ZSe=()=>({element:{enter:e=>{for(const[t,n]of Object.entries(e.attributes))n===""&&!Ui.conditionalProcessing.has(t)&&delete e.attributes[t]}}}),NL=Object.freeze(Object.defineProperty({__proto__:null,description:KSe,fn:ZSe,name:XSe},Symbol.toStringTag,{value:"Module"})),QSe="removeEmptyContainers",JSe="removes empty container elements",eCe=e=>{const t=Ia(e);return{element:{exit:(n,r)=>{n.name==="svg"||!kl.container.has(n.name)||n.children.length!==0||n.name==="pattern"&&Object.keys(n.attributes).length!==0||n.name==="mask"&&n.attributes.id!=null||r.type==="element"&&r.name==="switch"||n.name==="g"&&(n.attributes.filter!=null||Oa(t,n).filter)||zn(n,r)}}}},OL=Object.freeze(Object.defineProperty({__proto__:null,description:JSe,fn:eCe,name:QSe},Symbol.toStringTag,{value:"Module"})),tCe="mergePaths",nCe="merges multiple paths in one if possible";function rCe(e,t){const n=e[t];return(n==null?void 0:n.type)==="static"?O0(n.value):!1}const iCe=(e,t)=>{const{force:n=!1,floatPrecision:r=3,noSpaceAfterFlags:i=!1}=t,s=Ia(e);return{element:{enter:a=>{if(a.children.length<=1)return;const o=[];let u=a.children[0],h=null;const d=(p,m)=>{wL(p,m,{floatPrecision:r,noSpaceAfterFlags:i}),h=null};for(let p=1;p<a.children.length;p++){const m=a.children[p];if(u.type!=="element"||u.name!=="path"||u.children.length!==0||u.attributes.d==null){h&&u.type==="element"&&d(u,h),u=m;continue}if(m.type!=="element"||m.name!=="path"||m.children.length!==0||m.attributes.d==null){h&&d(u,h),u=m;continue}const g=Oa(s,m);if(g["marker-start"]||g["marker-mid"]||g["marker-end"]||g["clip-path"]||g.mask||g["mask-image"]||["fill","filter","stroke"].some(k=>rCe(g,k))){h&&d(u,h),u=m;continue}const v=Object.keys(m.attributes);if(v.length!==Object.keys(u.attributes).length){h&&d(u,h),u=m;continue}if(v.some(k=>k!=="d"&&u.type==="element"&&u.attributes[k]!==m.attributes[k])){h&&d(u,h),u=m;continue}const C=h!=null,x=Ag(m);if(h=h??Ag(u),n||!_L(h,x)){h.push(...x),o.push(m);continue}C&&d(u,h),u=m,h=null}h&&u.type==="element"&&d(u,h),a.children=a.children.filter(p=>!o.includes(p))}}}},RL=Object.freeze(Object.defineProperty({__proto__:null,description:nCe,fn:iCe,name:tCe},Symbol.toStringTag,{value:"Module"})),sCe="removeUnusedNS",aCe="removes unused namespaces declaration",oCe=()=>{const e=new Set;return{element:{enter:(t,n)=>{if(t.name==="svg"&&n.type==="root"){for(const r of Object.keys(t.attributes))if(r.startsWith("xmlns:")){const i=r.slice(6);e.add(i)}}if(e.size!==0){if(t.name.includes(":")){const[r]=t.name.split(":");e.has(r)&&e.delete(r)}for(const r of Object.keys(t.attributes))if(r.includes(":")){const[i]=r.split(":");e.delete(i)}}},exit:(t,n)=>{if(t.name==="svg"&&n.type==="root")for(const r of e)delete t.attributes[`xmlns:${r}`]}}}},ML=Object.freeze(Object.defineProperty({__proto__:null,description:aCe,fn:oCe,name:sCe},Symbol.toStringTag,{value:"Module"})),lCe="sortAttrs",cCe="Sort element attributes for better compression",uCe=(e,t)=>{const{order:n=["id","width","height","x","x1","x2","y","y1","y2","cx","cy","r","fill","stroke","marker","d","points"],xmlnsOrder:r="front"}=t,i=a=>{if(r==="front"){if(a==="xmlns")return 3;if(a.startsWith("xmlns:"))return 2}return a.includes(":")?1:0},s=([a],[o])=>{const u=i(a),d=i(o)-u;if(d!==0)return d;const[p]=a.split("-"),[m]=o.split("-");if(p!==m){const g=n.includes(p)?1:0,v=n.includes(m)?1:0;if(g===1&&v===1)return n.indexOf(p)-n.indexOf(m);const w=v-g;if(w!==0)return w}return a<o?-1:1};return{element:{enter:a=>{const o=Object.entries(a.attributes);o.sort(s);const u={};for(const[h,d]of o)u[h]=d;a.attributes=u}}}},LL=Object.freeze(Object.defineProperty({__proto__:null,description:cCe,fn:uCe,name:lCe},Symbol.toStringTag,{value:"Module"})),hCe="sortDefsChildren",dCe="Sorts children of <defs> to improve compression",fCe=()=>({element:{enter:e=>{if(e.name==="defs"){const t=new Map;for(const n of e.children)if(n.type==="element"){const r=t.get(n.name);r==null?t.set(n.name,1):t.set(n.name,r+1)}e.children.sort((n,r)=>{if(n.type!=="element"||r.type!=="element")return 0;const i=t.get(n.name),s=t.get(r.name);if(i!=null&&s!=null){const o=s-i;if(o!==0)return o}const a=r.name.length-n.name.length;return a!==0?a:n.name!==r.name?n.name>r.name?-1:1:0})}}}}),IL=Object.freeze(Object.defineProperty({__proto__:null,description:dCe,fn:fCe,name:hCe},Symbol.toStringTag,{value:"Module"})),pCe="removeDesc",mCe="removes <desc>",gCe=/^(Created with|Created using)/,yCe=(e,t)=>{const{removeAny:n=!1}=t;return{element:{enter:(r,i)=>{r.name==="desc"&&(n||r.children.length===0||r.children[0].type==="text"&&gCe.test(r.children[0].value))&&zn(r,i)}}}},$L=Object.freeze(Object.defineProperty({__proto__:null,description:mCe,fn:yCe,name:pCe},Symbol.toStringTag,{value:"Module"})),bCe=Loe({name:"preset-default",plugins:[pR,mR,gR,W6,V6,G6,q6,Y6,X6,Q6,eL,nL,rL,iL,oL,lL,cL,uL,fL,pL,mL,gL,yL,bL,xL,AL,PL,NL,OL,RL,ML,LL,IL,$L]}),vCe="addAttributesToSVGElement",xCe="adds attributes to an outer <svg> element",wCe=`Error in plugin "addAttributesToSVGElement": absent parameters.
It should have a list of "attributes" or one "attribute".
Config example:

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attribute: "mySvg"
    }
  }
]

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attributes: ["mySvg", "size-big"]
    }
  }
]

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attributes: [
        {
          focusable: false
        },
        {
          'data-image': icon
        }
      ]
    }
  }
]
`,_Ce=(e,t)=>{if(!Array.isArray(t.attributes)&&!t.attribute)return console.error(wCe),null;const n=t.attributes||[t.attribute];return{element:{enter:(r,i)=>{if(r.name==="svg"&&i.type==="root"){for(const s of n)if(typeof s=="string"&&r.attributes[s]==null&&(r.attributes[s]=void 0),typeof s=="object")for(const a of Object.keys(s))r.attributes[a]==null&&(r.attributes[a]=s[a])}}}}},kCe=Object.freeze(Object.defineProperty({__proto__:null,description:xCe,fn:_Ce,name:vCe},Symbol.toStringTag,{value:"Module"})),SCe="addClassesToSVGElement",CCe="adds classnames to an outer <svg> element",ECe=`Error in plugin "addClassesToSVGElement": absent parameters.
It should have a list of classes in "classNames" or one "className".
Config example:

plugins: [
  {
    name: "addClassesToSVGElement",
    params: {
      className: "mySvg"
    }
  }
]

plugins: [
  {
    name: "addClassesToSVGElement",
    params: {
      classNames: ["mySvg", "size-big"]
    }
  }
]
`,TCe=(e,t,n)=>{if(!(Array.isArray(t.classNames)&&t.classNames.length!==0)&&!t.className)return console.error(ECe),null;const r=t.classNames||[t.className];return{element:{enter:(i,s)=>{if(i.name==="svg"&&s.type==="root"){const a=new Set(i.attributes.class==null?null:i.attributes.class.split(" "));for(const o of r)if(o!=null){const u=typeof o=="string"?o:o(i,n);a.add(u)}i.attributes.class=Array.from(a).join(" ")}}}}},jCe=Object.freeze(Object.defineProperty({__proto__:null,description:CCe,fn:TCe,name:SCe},Symbol.toStringTag,{value:"Module"})),ACe="cleanupListOfValues",PCe="rounds list of values to the fixed precision",NCe=/^([-+]?\d*\.?\d+([eE][-+]?\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,OCe=/\s+,?\s*|,\s*/,lj={cm:96/2.54,mm:96/25.4,in:96,pt:4/3,pc:16,px:1},RCe=(e,t)=>{const{floatPrecision:n=3,leadingZero:r=!0,defaultPx:i=!0,convertToPx:s=!0}=t,a=o=>{const u=[];for(const h of o.split(OCe)){const d=h.match(NCe),p=h.match(/new/);if(d){let m=Number(Number(d[1]).toFixed(n)),v=d[3]||"";if(s&&v&&v in lj){const C=Number((lj[v]*Number(d[1])).toFixed(n));C.toString().length<d[0].length&&(m=C,v="px")}let w;r?w=tc(m):w=m.toString(),i&&v==="px"&&(v=""),u.push(w+v)}else p?u.push("new"):h&&u.push(h)}return u.join(" ")};return{element:{enter:o=>{o.attributes.points!=null&&(o.attributes.points=a(o.attributes.points)),o.attributes["enable-background"]!=null&&(o.attributes["enable-background"]=a(o.attributes["enable-background"])),o.attributes.viewBox!=null&&(o.attributes.viewBox=a(o.attributes.viewBox)),o.attributes["stroke-dasharray"]!=null&&(o.attributes["stroke-dasharray"]=a(o.attributes["stroke-dasharray"])),o.attributes.dx!=null&&(o.attributes.dx=a(o.attributes.dx)),o.attributes.dy!=null&&(o.attributes.dy=a(o.attributes.dy)),o.attributes.x!=null&&(o.attributes.x=a(o.attributes.x)),o.attributes.y!=null&&(o.attributes.y=a(o.attributes.y))}}}},MCe=Object.freeze(Object.defineProperty({__proto__:null,description:PCe,fn:RCe,name:ACe},Symbol.toStringTag,{value:"Module"})),LCe="convertOneStopGradients",ICe="converts one-stop (single color) gradients to a plain color",$Ce=e=>{const t=Ia(e),n=new Set,r=new Map,i=new Map;let s=0;return{element:{enter:(a,o)=>{if(a.attributes["xlink:href"]!=null&&s++,a.name==="defs"){r.set(a,o);return}if(a.name!=="linearGradient"&&a.name!=="radialGradient")return;const u=a.children.filter(k=>k.type==="element"&&k.name==="stop"),h=a.attributes["xlink:href"]||a.attributes.href,d=u.length===0&&h!=null&&h.startsWith("#")?fR(e,h):a;if(d==null||d.type!=="element"){i.set(a,o);return}const p=d.children.filter(k=>k.type==="element"&&k.name==="stop");if(p.length!==1||p[0].type!=="element")return;o.type==="element"&&o.name==="defs"&&n.add(o),i.set(a,o);let m;const g=Oa(t,p[0])["stop-color"];g!=null&&g.type==="static"&&(m=g.value);const v=`url(#${a.attributes.id})`,w=[...kx].map(k=>`[${k}="${v}"]`).join(","),C=of(e,w);for(const k of C)if(k.type==="element")for(const A of kx)k.attributes[A]===v&&(m!=null?k.attributes[A]=m:delete k.attributes[A]);const x=of(e,`[style*=${v}]`);for(const k of x)k.type==="element"&&(k.attributes.style=k.attributes.style.replace(v,m||g_.presentation["stop-color"]))},exit:a=>{if(a.name==="svg"){for(const[o,u]of i.entries())o.attributes["xlink:href"]!=null&&s--,zn(o,u);s===0&&delete a.attributes["xmlns:xlink"];for(const[o,u]of r.entries())n.has(o)&&o.children.length===0&&zn(o,u)}}}}},DCe=Object.freeze(Object.defineProperty({__proto__:null,description:ICe,fn:$Ce,name:LCe},Symbol.toStringTag,{value:"Module"})),zCe="convertStyleToAttrs",FCe="converts style to attributes",Lf=(...e)=>"(?:"+e.join("|")+")",BCe=Ui.presentation,_h="\\\\(?:[0-9a-f]{1,6}\\s?|\\r\\n|.)",UCe="\\s*("+Lf("[^:;\\\\]",_h)+"*?)\\s*",M0="'(?:[^'\\n\\r\\\\]|"+_h+")*?(?:'|$)",L0='"(?:[^"\\n\\r\\\\]|'+_h+')*?(?:"|$)',HCe=new RegExp("^"+Lf(M0,L0)+"$"),WCe="\\("+Lf(`[^'"()\\\\]+`,_h,M0,L0)+"*?\\)",VCe="\\s*("+Lf(`[^!'"();\\\\]+?`,_h,M0,L0,WCe,"[^;]*?")+"*?)",GCe="\\s*(?:;\\s*|$)",qCe="(\\s*!important(?![-(\\w]))?",cj=new RegExp(UCe+":"+VCe+qCe+GCe,"ig"),YCe=new RegExp(Lf(_h,M0,L0,"/\\*[^]*?\\*/"),"ig"),XCe=(e,t)=>{const{keepImportant:n=!1}=t;return{element:{enter:r=>{if(r.attributes.style!=null){let s=[];const a={},o=r.attributes.style.replace(YCe,u=>u[0]=="/"?"":u[0]=="\\"&&/[-g-z]/i.test(u[1])?u[1]:u);cj.lastIndex=0;for(var i;i=cj.exec(o);)(!n||!i[3])&&s.push([i[1],i[2]]);s.length&&(s=s.filter(function(u){if(u[0]){const h=u[0].toLowerCase();let d=u[1];if(HCe.test(d)&&(d=d.slice(1,-1)),BCe.has(h))return a[h]=d,!1}return!0}),Object.assign(r.attributes,a),s.length?r.attributes.style=s.map(u=>u.join(":")).join(";"):delete r.attributes.style)}}}}},KCe=Object.freeze(Object.defineProperty({__proto__:null,description:FCe,fn:XCe,name:zCe},Symbol.toStringTag,{value:"Module"})),ZCe="prefixIds",QCe="prefix IDs",JCe=e=>{const t=/[/\\]?([^/\\]+)$/.exec(e);return t?t[1]:""},eEe=e=>e.replace(/[. ]/g,"_"),tEe=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e,gd=(e,t)=>{const n=e(t);return t.startsWith(n)?t:n+t},Hb=(e,t)=>t.startsWith("#")?"#"+gd(e,t.slice(1)):null,nEe=(e,t,n,r,i,s)=>{if(typeof r=="function"){let a=s.get(e);return a!=null||(a=r(t,n)+i,s.set(e,a)),a}return typeof r=="string"?r+i:r===!1?"":n.path!=null&&n.path.length>0?eEe(JCe(n.path))+i:"prefix"+i},rEe=(e,t,n)=>{const{delim:r="__",prefix:i,prefixIds:s=!0,prefixClassNames:a=!0}=t,o=new Map;return{element:{enter:u=>{const h=d=>nEe(d,u,n,i,r,o);if(u.name==="style"){if(u.children.length===0)return;for(const d of u.children){if(d.type!=="text"&&d.type!=="cdata")continue;const p=d.value;let m;try{m=Yu(p,{parseValue:!0,parseCustomProperty:!1})}catch{return}Vs(m,g=>{if(s&&g.type==="IdSelector"||a&&g.type==="ClassSelector"){g.name=gd(h,g.name);return}if(g.type==="Url"&&g.value.length>0){const v=Hb(h,tEe(g.value));v!=null&&(g.value=v)}}),d.value=Ts(m)}}s&&u.attributes.id!=null&&u.attributes.id.length!==0&&(u.attributes.id=gd(h,u.attributes.id)),a&&u.attributes.class!=null&&u.attributes.class.length!==0&&(u.attributes.class=u.attributes.class.split(/\s+/).map(d=>gd(h,d)).join(" "));for(const d of["href","xlink:href"])if(u.attributes[d]!=null&&u.attributes[d].length!==0){const p=Hb(h,u.attributes[d]);p!=null&&(u.attributes[d]=p)}for(const d of f0)u.attributes[d]!=null&&u.attributes[d].length!==0&&(u.attributes[d]=u.attributes[d].replace(/\burl\((["'])?(#.+?)\1\)/gi,(p,m,g)=>{const v=Hb(h,g);return v==null?p:`url(${v})`}));for(const d of["begin","end"])if(u.attributes[d]!=null&&u.attributes[d].length!==0){const p=u.attributes[d].split(/\s*;\s+/).map(m=>{if(m.endsWith(".end")||m.endsWith(".start")){const[g,v]=m.split(".");return`${gd(h,g)}.${v}`}return m});u.attributes[d]=p.join("; ")}}}}},iEe=Object.freeze(Object.defineProperty({__proto__:null,description:QCe,fn:rEe,name:ZCe},Symbol.toStringTag,{value:"Module"})),sEe="removeAttributesBySelector",aEe="removes attributes of elements that match a css selector",oEe=(e,t)=>{const n=Array.isArray(t.selectors)?t.selectors:[t];for(const{selector:r,attributes:i}of n){const s=of(e,r);for(const a of s)if(a.type==="element")if(Array.isArray(i))for(const o of i)delete a.attributes[o];else delete a.attributes[i]}return{}},lEe=Object.freeze(Object.defineProperty({__proto__:null,description:aEe,fn:oEe,name:sEe},Symbol.toStringTag,{value:"Module"})),cEe="removeAttrs",uEe="removes specified attributes",hEe=":",dEe=`Warning: The plugin "removeAttrs" requires the "attrs" parameter.
It should have a pattern to remove, otherwise the plugin is a noop.
Config example:

plugins: [
  {
    name: "removeAttrs",
    params: {
      attrs: "(fill|stroke)"
    }
  }
]
`,fEe=(e,t)=>{if(typeof t.attrs>"u")return console.warn(dEe),null;const n=typeof t.elemSeparator=="string"?t.elemSeparator:hEe,r=typeof t.preserveCurrentColor=="boolean"?t.preserveCurrentColor:!1,i=Array.isArray(t.attrs)?t.attrs:[t.attrs];return{element:{enter:s=>{for(let a of i){a.includes(n)?a.split(n).length<3&&(a=[a,".*"].join(n)):a=[".*",a,".*"].join(n);const o=a.split(n).map(u=>(u==="*"&&(u=".*"),new RegExp(["^",u,"$"].join(""),"i")));if(o[0].test(s.name))for(const[u,h]of Object.entries(s.attributes)){const d=h.toLowerCase()==="currentcolor",p=r&&u=="fill"&&d,m=r&&u=="stroke"&&d;!p&&!m&&o[1].test(u)&&o[2].test(h)&&delete s.attributes[u]}}}}}},pEe=Object.freeze(Object.defineProperty({__proto__:null,description:uEe,fn:fEe,name:cEe},Symbol.toStringTag,{value:"Module"})),mEe="removeDimensions",gEe="removes width and height in presence of viewBox (opposite to removeViewBox)",yEe=()=>({element:{enter:e=>{if(e.name==="svg"){if(e.attributes.viewBox!=null)delete e.attributes.width,delete e.attributes.height;else if(e.attributes.width!=null&&e.attributes.height!=null&&Number.isNaN(Number(e.attributes.width))===!1&&Number.isNaN(Number(e.attributes.height))===!1){const t=Number(e.attributes.width),n=Number(e.attributes.height);e.attributes.viewBox=`0 0 ${t} ${n}`,delete e.attributes.width,delete e.attributes.height}}}}}),bEe=Object.freeze(Object.defineProperty({__proto__:null,description:gEe,fn:yEe,name:mEe},Symbol.toStringTag,{value:"Module"})),vEe="removeElementsByAttr",xEe="removes arbitrary elements by ID or className (disabled by default)",wEe=(e,t)=>{const n=t.id==null?[]:Array.isArray(t.id)?t.id:[t.id],r=t.class==null?[]:Array.isArray(t.class)?t.class:[t.class];return{element:{enter:(i,s)=>{if(i.attributes.id!=null&&n.length!==0&&n.includes(i.attributes.id)&&zn(i,s),i.attributes.class&&r.length!==0){const a=i.attributes.class.split(" ");for(const o of r)if(a.includes(o)){zn(i,s);break}}}}}},_Ee=Object.freeze(Object.defineProperty({__proto__:null,description:xEe,fn:wEe,name:vEe},Symbol.toStringTag,{value:"Module"})),kEe="removeOffCanvasPaths",SEe="removes elements that are drawn outside of the viewBox (disabled by default)",CEe=()=>{let e=null;return{element:{enter:(t,n)=>{if(t.name==="svg"&&n.type==="root"){let r="";t.attributes.viewBox!=null?r=t.attributes.viewBox:t.attributes.height!=null&&t.attributes.width!=null&&(r=`0 0 ${t.attributes.width} ${t.attributes.height}`),r=r.replace(/[,+]|px/g," ").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"");const i=/^(-?\d*\.?\d+) (-?\d*\.?\d+) (\d*\.?\d+) (\d*\.?\d+)$/.exec(r);if(i==null)return;const s=Number.parseFloat(i[1]),a=Number.parseFloat(i[2]),o=Number.parseFloat(i[3]),u=Number.parseFloat(i[4]);e={left:s,top:a,right:s+o,bottom:a+u,width:o,height:u}}if(t.attributes.transform!=null)return jo;if(t.name==="path"&&t.attributes.d!=null&&e!=null){const r=J_(t.attributes.d);let i=!1;for(const d of r)if(d.command==="M"){const[p,m]=d.args;p>=e.left&&p<=e.right&&m>=e.top&&m<=e.bottom&&(i=!0)}if(i)return;r.length===2&&r.push({command:"z",args:[]});const{left:s,top:a,width:o,height:u}=e;_L([{command:"M",args:[s,a]},{command:"h",args:[o]},{command:"v",args:[u]},{command:"H",args:[s]},{command:"z",args:[]}],r)===!1&&zn(t,n)}}}}},EEe=Object.freeze(Object.defineProperty({__proto__:null,description:SEe,fn:CEe,name:kEe},Symbol.toStringTag,{value:"Module"})),TEe="removeRasterImages",jEe="removes raster images (disabled by default)",AEe=()=>({element:{enter:(e,t)=>{e.name==="image"&&e.attributes["xlink:href"]!=null&&/(\.|image\/)(jpe?g|png|gif)/.test(e.attributes["xlink:href"])&&zn(e,t)}}}),PEe=Object.freeze(Object.defineProperty({__proto__:null,description:jEe,fn:AEe,name:TEe},Symbol.toStringTag,{value:"Module"})),NEe="removeScripts",OEe="removes scripts (disabled by default)",REe=[...Ui.animationEvent,...Ui.documentEvent,...Ui.documentElementEvent,...Ui.globalEvent,...Ui.graphicalEvent],MEe=()=>({element:{enter:(e,t)=>{if(e.name==="script"){zn(e,t);return}for(const n of REe)e.attributes[n]!=null&&delete e.attributes[n]},exit:(e,t)=>{if(e.name==="a"){for(const n of Object.keys(e.attributes))if(n==="href"||n.endsWith(":href")){if(e.attributes[n]==null||!e.attributes[n].trimStart().startsWith("javascript:"))continue;const r=t.children.indexOf(e),i=e.children.filter(s=>s.type!=="text");t.children.splice(r,1,...i)}}}}}),LEe=Object.freeze(Object.defineProperty({__proto__:null,description:OEe,fn:MEe,name:NEe},Symbol.toStringTag,{value:"Module"})),IEe="removeStyleElement",$Ee="removes <style> element (disabled by default)",DEe=()=>({element:{enter:(e,t)=>{e.name==="style"&&zn(e,t)}}}),zEe=Object.freeze(Object.defineProperty({__proto__:null,description:$Ee,fn:DEe,name:IEe},Symbol.toStringTag,{value:"Module"})),FEe="removeTitle",BEe="removes <title>",UEe=()=>({element:{enter:(e,t)=>{e.name==="title"&&zn(e,t)}}}),HEe=Object.freeze(Object.defineProperty({__proto__:null,description:BEe,fn:UEe,name:FEe},Symbol.toStringTag,{value:"Module"})),WEe="removeViewBox",VEe="removes viewBox attribute when possible",GEe=new Set(["pattern","svg","symbol"]),qEe=()=>({element:{enter:(e,t)=>{if(GEe.has(e.name)&&e.attributes.viewBox!=null&&e.attributes.width!=null&&e.attributes.height!=null){if(e.name==="svg"&&t.type!=="root")return;const n=e.attributes.viewBox.split(/[ ,]+/g);n[0]==="0"&&n[1]==="0"&&e.attributes.width.replace(/px$/,"")===n[2]&&e.attributes.height.replace(/px$/,"")===n[3]&&delete e.attributes.viewBox}}}}),YEe=Object.freeze(Object.defineProperty({__proto__:null,description:VEe,fn:qEe,name:WEe},Symbol.toStringTag,{value:"Module"})),XEe="removeXlink",KEe="remove xlink namespace and replaces attributes with the SVG 2 equivalent where applicable",uj="http://www.w3.org/1999/xlink",ZEe={new:"_blank",replace:"_self"},QEe=new Set(["cursor","filter","font-face-uri","glyphRef","tref"]),Wb=(e,t,n)=>t.map(r=>`${r}:${n}`).filter(r=>e.attributes[r]!=null),JEe=(e,t)=>{const{includeLegacy:n}=t,r=[],i=[],s=[];return{element:{enter:a=>{var p,m;for(const[g,v]of Object.entries(a.attributes))if(g.startsWith("xmlns:")){const w=g.split(":",2)[1];if(v===uj){r.push(w);continue}r.includes(w)&&i.push(w)}if(i.some(g=>r.includes(g)))return;const o=Wb(a,r,"show");let u=a.attributes.target!=null;for(let g=o.length-1;g>=0;g--){const v=o[g],w=a.attributes[v],C=ZEe[w];if(u||C==null){delete a.attributes[v];continue}C!==((m=(p=y_[a.name])==null?void 0:p.defaults)==null?void 0:m.target)&&(a.attributes.target=C),delete a.attributes[v],u=!0}const h=Wb(a,r,"title");for(let g=h.length-1;g>=0;g--){const v=h[g],w=a.attributes[v];if(a.children.filter(k=>k.type==="element"&&k.name==="title").length>0){delete a.attributes[v];continue}const x={type:"element",name:"title",attributes:{},children:[{type:"text",value:w}]};Object.defineProperty(x,"parentNode",{writable:!0,value:a}),a.children.unshift(x),delete a.attributes[v]}const d=Wb(a,r,"href");if(d.length>0&&QEe.has(a.name)&&!n){d.map(g=>g.split(":",1)[0]).forEach(g=>s.push(g));return}for(let g=d.length-1;g>=0;g--){const v=d[g],w=a.attributes[v];if(a.attributes.href!=null){delete a.attributes[v];continue}a.attributes.href=w,delete a.attributes[v]}},exit:a=>{for(const[o,u]of Object.entries(a.attributes)){const[h,d]=o.split(":",2);if(r.includes(h)&&!i.includes(h)&&!s.includes(h)&&!n){delete a.attributes[o];continue}if(o.startsWith("xmlns:")&&!s.includes(d)){if(u===uj){const p=r.indexOf(d);r.splice(p,1),delete a.attributes[o];continue}if(i.includes(h)){const p=i.indexOf(d);i.splice(p,1)}}}}}}},eTe=Object.freeze(Object.defineProperty({__proto__:null,description:KEe,fn:JEe,name:XEe},Symbol.toStringTag,{value:"Module"})),tTe="removeXMLNS",nTe="removes xmlns attribute (for inline svg, disabled by default)",rTe=()=>({element:{enter:e=>{e.name==="svg"&&delete e.attributes.xmlns}}}),iTe=Object.freeze(Object.defineProperty({__proto__:null,description:nTe,fn:rTe,name:tTe},Symbol.toStringTag,{value:"Module"})),sTe="reusePaths",aTe="Finds <path> elements with the same d, fill, and stroke, and converts them to <use> elements referencing a single <path> def.",oTe=e=>{const t=Ia(e),n=new Map;let r;const i=new Set;return{element:{enter:(s,a)=>{if(s.name==="path"&&s.attributes.d!=null){const o=s.attributes.d,u=s.attributes.fill||"",h=s.attributes.stroke||"",d=o+";s:"+h+";f:"+u;let p=n.get(d);p==null&&(p=[],n.set(d,p)),p.push(s)}if(r==null&&s.name==="defs"&&a.type==="element"&&a.name==="svg"&&(r=s),s.name==="use")for(const o of["href","xlink:href"]){const u=s.attributes[o];u!=null&&u.startsWith("#")&&u.length>1&&i.add(u.slice(1))}},exit:(s,a)=>{if(s.name==="svg"&&a.type==="root"){let o=r;o==null&&(o={type:"element",name:"defs",attributes:{},children:[]});let u=0;for(const h of n.values())if(h.length>1){const d={type:"element",name:"path",attributes:{},children:[]};for(const m of["fill","stroke","d"])h[0].attributes[m]!=null&&(d.attributes[m]=h[0].attributes[m]);const p=h[0].attributes.id;p==null||i.has(p)||t.rules.some(m=>m.selector===`#${p}`)?d.attributes.id="reuse-"+u++:(d.attributes.id=p,delete h[0].attributes.id),o.children.push(d);for(const m of h){if(delete m.attributes.d,delete m.attributes.stroke,delete m.attributes.fill,o.children.includes(m)&&m.children.length===0){if(Object.keys(m.attributes).length===0){zn(m,o);continue}if(Object.keys(m.attributes).length===1&&m.attributes.id!=null){zn(m,o);const g=`[xlink\\:href=#${m.attributes.id}], [href=#${m.attributes.id}]`;for(const v of of(s,g))if(v.type==="element")for(const w of["href","xlink:href"])v.attributes[w]!=null&&(v.attributes[w]="#"+d.attributes.id);continue}}m.name="use",m.attributes["xlink:href"]="#"+d.attributes.id}}o.children.length!==0&&(s.attributes["xmlns:xlink"]==null&&(s.attributes["xmlns:xlink"]="http://www.w3.org/1999/xlink"),r==null&&s.children.unshift(o))}}}}},lTe=Object.freeze(Object.defineProperty({__proto__:null,description:aTe,fn:oTe,name:sTe},Symbol.toStringTag,{value:"Module"})),cTe=Object.freeze([bCe,kCe,jCe,q6,uL,eL,MCe,rL,xL,iL,gL,DCe,AL,mL,KCe,PL,X6,RL,Y6,Q6,yL,bL,iEe,lEe,pEe,gR,W6,$L,bEe,pR,G6,_Ee,NL,OL,pL,fL,V6,lL,EEe,PEe,LEe,zEe,HEe,oL,ML,nL,cL,YEe,eTe,iTe,mR,lTe,LL,IL]);var DL={};const a1=Tj(Moe);var Vb={},Gp={exports:{}},Gb={},Gh={},hj;function uTe(){if(hj)return Gh;hj=1,Gh.byteLength=o,Gh.toByteArray=h,Gh.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function a(g){var v=g.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=v);var C=w===v?0:4-w%4;return[w,C]}function o(g){var v=a(g),w=v[0],C=v[1];return(w+C)*3/4-C}function u(g,v,w){return(v+w)*3/4-w}function h(g){var v,w=a(g),C=w[0],x=w[1],k=new n(u(g,C,x)),A=0,j=x>0?C-4:C,I;for(I=0;I<j;I+=4)v=t[g.charCodeAt(I)]<<18|t[g.charCodeAt(I+1)]<<12|t[g.charCodeAt(I+2)]<<6|t[g.charCodeAt(I+3)],k[A++]=v>>16&255,k[A++]=v>>8&255,k[A++]=v&255;return x===2&&(v=t[g.charCodeAt(I)]<<2|t[g.charCodeAt(I+1)]>>4,k[A++]=v&255),x===1&&(v=t[g.charCodeAt(I)]<<10|t[g.charCodeAt(I+1)]<<4|t[g.charCodeAt(I+2)]>>2,k[A++]=v>>8&255,k[A++]=v&255),k}function d(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function p(g,v,w){for(var C,x=[],k=v;k<w;k+=3)C=(g[k]<<16&16711680)+(g[k+1]<<8&65280)+(g[k+2]&255),x.push(d(C));return x.join("")}function m(g){for(var v,w=g.length,C=w%3,x=[],k=16383,A=0,j=w-C;A<j;A+=k)x.push(p(g,A,A+k>j?j:A+k));return C===1?(v=g[w-1],x.push(e[v>>2]+e[v<<4&63]+"==")):C===2&&(v=(g[w-2]<<8)+g[w-1],x.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),x.join("")}return Gh}var qp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var dj;function hTe(){return dj||(dj=1,qp.read=function(e,t,n,r,i){var s,a,o=i*8-r-1,u=(1<<o)-1,h=u>>1,d=-7,p=n?i-1:0,m=n?-1:1,g=e[t+p];for(p+=m,s=g&(1<<-d)-1,g>>=-d,d+=o;d>0;s=s*256+e[t+p],p+=m,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;d>0;a=a*256+e[t+p],p+=m,d-=8);if(s===0)s=1-h;else{if(s===u)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-h}return(g?-1:1)*a*Math.pow(2,s-r)},qp.write=function(e,t,n,r,i,s){var a,o,u,h=s*8-i-1,d=(1<<h)-1,p=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+p>=1?t+=m/u:t+=m*Math.pow(2,1-p),t*u>=2&&(a++,u/=2),a+p>=d?(o=0,a=d):a+p>=1?(o=(t*u-1)*Math.pow(2,i),a=a+p):(o=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+g]=o&255,g+=v,o/=256,i-=8);for(a=a<<i|o,h+=i;h>0;e[n+g]=a&255,g+=v,a/=256,h-=8);e[n+g-v]|=w*128}),qp}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var fj;function dTe(){return fj||(fj=1,function(e){var t=uTe(),n=hTe(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var ae=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(ae,M),ae.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(ae){if(ae>i)throw new RangeError('The value "'+ae+'" is invalid for option "size"');var M=new Uint8Array(ae);return Object.setPrototypeOf(M,o.prototype),M}function o(ae,M,L){if(typeof ae=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ae)}return u(ae,M,L)}o.poolSize=8192;function u(ae,M,L){if(typeof ae=="string")return m(ae,M);if(ArrayBuffer.isView(ae))return v(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(St(ae,ArrayBuffer)||ae&&St(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(St(ae,SharedArrayBuffer)||ae&&St(ae.buffer,SharedArrayBuffer)))return w(ae,M,L);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var J=ae.valueOf&&ae.valueOf();if(J!=null&&J!==ae)return o.from(J,M,L);var pe=C(ae);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return o.from(ae[Symbol.toPrimitive]("string"),M,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}o.from=function(ae,M,L){return u(ae,M,L)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function h(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function d(ae,M,L){return h(ae),ae<=0?a(ae):M!==void 0?typeof L=="string"?a(ae).fill(M,L):a(ae).fill(M):a(ae)}o.alloc=function(ae,M,L){return d(ae,M,L)};function p(ae){return h(ae),a(ae<0?0:x(ae)|0)}o.allocUnsafe=function(ae){return p(ae)},o.allocUnsafeSlow=function(ae){return p(ae)};function m(ae,M){if((typeof M!="string"||M==="")&&(M="utf8"),!o.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var L=A(ae,M)|0,J=a(L),pe=J.write(ae,M);return pe!==L&&(J=J.slice(0,pe)),J}function g(ae){for(var M=ae.length<0?0:x(ae.length)|0,L=a(M),J=0;J<M;J+=1)L[J]=ae[J]&255;return L}function v(ae){if(St(ae,Uint8Array)){var M=new Uint8Array(ae);return w(M.buffer,M.byteOffset,M.byteLength)}return g(ae)}function w(ae,M,L){if(M<0||ae.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<M+(L||0))throw new RangeError('"length" is outside of buffer bounds');var J;return M===void 0&&L===void 0?J=new Uint8Array(ae):L===void 0?J=new Uint8Array(ae,M):J=new Uint8Array(ae,M,L),Object.setPrototypeOf(J,o.prototype),J}function C(ae){if(o.isBuffer(ae)){var M=x(ae.length)|0,L=a(M);return L.length===0||ae.copy(L,0,0,M),L}if(ae.length!==void 0)return typeof ae.length!="number"||G(ae.length)?a(0):g(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return g(ae.data)}function x(ae){if(ae>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ae|0}function k(ae){return+ae!=ae&&(ae=0),o.alloc(+ae)}o.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==o.prototype},o.compare=function(M,L){if(St(M,Uint8Array)&&(M=o.from(M,M.offset,M.byteLength)),St(L,Uint8Array)&&(L=o.from(L,L.offset,L.byteLength)),!o.isBuffer(M)||!o.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===L)return 0;for(var J=M.length,pe=L.length,ve=0,me=Math.min(J,pe);ve<me;++ve)if(M[ve]!==L[ve]){J=M[ve],pe=L[ve];break}return J<pe?-1:pe<J?1:0},o.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(M,L){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return o.alloc(0);var J;if(L===void 0)for(L=0,J=0;J<M.length;++J)L+=M[J].length;var pe=o.allocUnsafe(L),ve=0;for(J=0;J<M.length;++J){var me=M[J];if(St(me,Uint8Array))ve+me.length>pe.length?o.from(me).copy(pe,ve):Uint8Array.prototype.set.call(pe,me,ve);else if(o.isBuffer(me))me.copy(pe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=me.length}return pe};function A(ae,M){if(o.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||St(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);var L=ae.length,J=arguments.length>2&&arguments[2]===!0;if(!J&&L===0)return 0;for(var pe=!1;;)switch(M){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return oe(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return ht(ae).length;default:if(pe)return J?-1:oe(ae).length;M=(""+M).toLowerCase(),pe=!0}}o.byteLength=A;function j(ae,M,L){var J=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,M>>>=0,L<=M))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return xe(this,M,L);case"utf8":case"utf-8":return H(this,M,L);case"ascii":return ke(this,M,L);case"latin1":case"binary":return Fe(this,M,L);case"base64":return ge(this,M,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,M,L);default:if(J)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),J=!0}}o.prototype._isBuffer=!0;function I(ae,M,L){var J=ae[M];ae[M]=ae[L],ae[L]=J}o.prototype.swap16=function(){var M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<M;L+=2)I(this,L,L+1);return this},o.prototype.swap32=function(){var M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<M;L+=4)I(this,L,L+3),I(this,L+1,L+2);return this},o.prototype.swap64=function(){var M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<M;L+=8)I(this,L,L+7),I(this,L+1,L+6),I(this,L+2,L+5),I(this,L+3,L+4);return this},o.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?H(this,0,M):j.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(M){if(!o.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:o.compare(this,M)===0},o.prototype.inspect=function(){var M="",L=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(M+=" ... "),"<Buffer "+M+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(M,L,J,pe,ve){if(St(M,Uint8Array)&&(M=o.from(M,M.offset,M.byteLength)),!o.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(L===void 0&&(L=0),J===void 0&&(J=M?M.length:0),pe===void 0&&(pe=0),ve===void 0&&(ve=this.length),L<0||J>M.length||pe<0||ve>this.length)throw new RangeError("out of range index");if(pe>=ve&&L>=J)return 0;if(pe>=ve)return-1;if(L>=J)return 1;if(L>>>=0,J>>>=0,pe>>>=0,ve>>>=0,this===M)return 0;for(var me=ve-pe,Le=J-L,Xe=Math.min(me,Le),De=this.slice(pe,ve),l=M.slice(L,J),f=0;f<Xe;++f)if(De[f]!==l[f]){me=De[f],Le=l[f];break}return me<Le?-1:Le<me?1:0};function E(ae,M,L,J,pe){if(ae.length===0)return-1;if(typeof L=="string"?(J=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,G(L)&&(L=pe?0:ae.length-1),L<0&&(L=ae.length+L),L>=ae.length){if(pe)return-1;L=ae.length-1}else if(L<0)if(pe)L=0;else return-1;if(typeof M=="string"&&(M=o.from(M,J)),o.isBuffer(M))return M.length===0?-1:U(ae,M,L,J,pe);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(ae,M,L):Uint8Array.prototype.lastIndexOf.call(ae,M,L):U(ae,[M],L,J,pe);throw new TypeError("val must be string, number or Buffer")}function U(ae,M,L,J,pe){var ve=1,me=ae.length,Le=M.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(ae.length<2||M.length<2)return-1;ve=2,me/=2,Le/=2,L/=2}function Xe(_,S){return ve===1?_[S]:_.readUInt16BE(S*ve)}var De;if(pe){var l=-1;for(De=L;De<me;De++)if(Xe(ae,De)===Xe(M,l===-1?0:De-l)){if(l===-1&&(l=De),De-l+1===Le)return l*ve}else l!==-1&&(De-=De-l),l=-1}else for(L+Le>me&&(L=me-Le),De=L;De>=0;De--){for(var f=!0,b=0;b<Le;b++)if(Xe(ae,De+b)!==Xe(M,b)){f=!1;break}if(f)return De}return-1}o.prototype.includes=function(M,L,J){return this.indexOf(M,L,J)!==-1},o.prototype.indexOf=function(M,L,J){return E(this,M,L,J,!0)},o.prototype.lastIndexOf=function(M,L,J){return E(this,M,L,J,!1)};function D(ae,M,L,J){L=Number(L)||0;var pe=ae.length-L;J?(J=Number(J),J>pe&&(J=pe)):J=pe;var ve=M.length;J>ve/2&&(J=ve/2);for(var me=0;me<J;++me){var Le=parseInt(M.substr(me*2,2),16);if(G(Le))return me;ae[L+me]=Le}return me}function R(ae,M,L,J){return Pt(oe(M,ae.length-L),ae,L,J)}function X(ae,M,L,J){return Pt(We(M),ae,L,J)}function ce(ae,M,L,J){return Pt(ht(M),ae,L,J)}function ie(ae,M,L,J){return Pt(Oe(M,ae.length-L),ae,L,J)}o.prototype.write=function(M,L,J,pe){if(L===void 0)pe="utf8",J=this.length,L=0;else if(J===void 0&&typeof L=="string")pe=L,J=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(J)?(J=J>>>0,pe===void 0&&(pe="utf8")):(pe=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ve=this.length-L;if((J===void 0||J>ve)&&(J=ve),M.length>0&&(J<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var me=!1;;)switch(pe){case"hex":return D(this,M,L,J);case"utf8":case"utf-8":return R(this,M,L,J);case"ascii":case"latin1":case"binary":return X(this,M,L,J);case"base64":return ce(this,M,L,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,M,L,J);default:if(me)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),me=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(ae,M,L){return M===0&&L===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(M,L))}function H(ae,M,L){L=Math.min(ae.length,L);for(var J=[],pe=M;pe<L;){var ve=ae[pe],me=null,Le=ve>239?4:ve>223?3:ve>191?2:1;if(pe+Le<=L){var Xe,De,l,f;switch(Le){case 1:ve<128&&(me=ve);break;case 2:Xe=ae[pe+1],(Xe&192)===128&&(f=(ve&31)<<6|Xe&63,f>127&&(me=f));break;case 3:Xe=ae[pe+1],De=ae[pe+2],(Xe&192)===128&&(De&192)===128&&(f=(ve&15)<<12|(Xe&63)<<6|De&63,f>2047&&(f<55296||f>57343)&&(me=f));break;case 4:Xe=ae[pe+1],De=ae[pe+2],l=ae[pe+3],(Xe&192)===128&&(De&192)===128&&(l&192)===128&&(f=(ve&15)<<18|(Xe&63)<<12|(De&63)<<6|l&63,f>65535&&f<1114112&&(me=f))}}me===null?(me=65533,Le=1):me>65535&&(me-=65536,J.push(me>>>10&1023|55296),me=56320|me&1023),J.push(me),pe+=Le}return je(J)}var ye=4096;function je(ae){var M=ae.length;if(M<=ye)return String.fromCharCode.apply(String,ae);for(var L="",J=0;J<M;)L+=String.fromCharCode.apply(String,ae.slice(J,J+=ye));return L}function ke(ae,M,L){var J="";L=Math.min(ae.length,L);for(var pe=M;pe<L;++pe)J+=String.fromCharCode(ae[pe]&127);return J}function Fe(ae,M,L){var J="";L=Math.min(ae.length,L);for(var pe=M;pe<L;++pe)J+=String.fromCharCode(ae[pe]);return J}function xe(ae,M,L){var J=ae.length;(!M||M<0)&&(M=0),(!L||L<0||L>J)&&(L=J);for(var pe="",ve=M;ve<L;++ve)pe+=qe[ae[ve]];return pe}function Me(ae,M,L){for(var J=ae.slice(M,L),pe="",ve=0;ve<J.length-1;ve+=2)pe+=String.fromCharCode(J[ve]+J[ve+1]*256);return pe}o.prototype.slice=function(M,L){var J=this.length;M=~~M,L=L===void 0?J:~~L,M<0?(M+=J,M<0&&(M=0)):M>J&&(M=J),L<0?(L+=J,L<0&&(L=0)):L>J&&(L=J),L<M&&(L=M);var pe=this.subarray(M,L);return Object.setPrototypeOf(pe,o.prototype),pe};function _e(ae,M,L){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+M>L)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(M,L,J){M=M>>>0,L=L>>>0,J||_e(M,L,this.length);for(var pe=this[M],ve=1,me=0;++me<L&&(ve*=256);)pe+=this[M+me]*ve;return pe},o.prototype.readUintBE=o.prototype.readUIntBE=function(M,L,J){M=M>>>0,L=L>>>0,J||_e(M,L,this.length);for(var pe=this[M+--L],ve=1;L>0&&(ve*=256);)pe+=this[M+--L]*ve;return pe},o.prototype.readUint8=o.prototype.readUInt8=function(M,L){return M=M>>>0,L||_e(M,1,this.length),this[M]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(M,L){return M=M>>>0,L||_e(M,2,this.length),this[M]|this[M+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(M,L){return M=M>>>0,L||_e(M,2,this.length),this[M]<<8|this[M+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},o.prototype.readIntLE=function(M,L,J){M=M>>>0,L=L>>>0,J||_e(M,L,this.length);for(var pe=this[M],ve=1,me=0;++me<L&&(ve*=256);)pe+=this[M+me]*ve;return ve*=128,pe>=ve&&(pe-=Math.pow(2,8*L)),pe},o.prototype.readIntBE=function(M,L,J){M=M>>>0,L=L>>>0,J||_e(M,L,this.length);for(var pe=L,ve=1,me=this[M+--pe];pe>0&&(ve*=256);)me+=this[M+--pe]*ve;return ve*=128,me>=ve&&(me-=Math.pow(2,8*L)),me},o.prototype.readInt8=function(M,L){return M=M>>>0,L||_e(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},o.prototype.readInt16LE=function(M,L){M=M>>>0,L||_e(M,2,this.length);var J=this[M]|this[M+1]<<8;return J&32768?J|4294901760:J},o.prototype.readInt16BE=function(M,L){M=M>>>0,L||_e(M,2,this.length);var J=this[M+1]|this[M]<<8;return J&32768?J|4294901760:J},o.prototype.readInt32LE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},o.prototype.readInt32BE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},o.prototype.readFloatLE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),n.read(this,M,!0,23,4)},o.prototype.readFloatBE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),n.read(this,M,!1,23,4)},o.prototype.readDoubleLE=function(M,L){return M=M>>>0,L||_e(M,8,this.length),n.read(this,M,!0,52,8)},o.prototype.readDoubleBE=function(M,L){return M=M>>>0,L||_e(M,8,this.length),n.read(this,M,!1,52,8)};function Ne(ae,M,L,J,pe,ve){if(!o.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>pe||M<ve)throw new RangeError('"value" argument is out of bounds');if(L+J>ae.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(M,L,J,pe){if(M=+M,L=L>>>0,J=J>>>0,!pe){var ve=Math.pow(2,8*J)-1;Ne(this,M,L,J,ve,0)}var me=1,Le=0;for(this[L]=M&255;++Le<J&&(me*=256);)this[L+Le]=M/me&255;return L+J},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(M,L,J,pe){if(M=+M,L=L>>>0,J=J>>>0,!pe){var ve=Math.pow(2,8*J)-1;Ne(this,M,L,J,ve,0)}var me=J-1,Le=1;for(this[L+me]=M&255;--me>=0&&(Le*=256);)this[L+me]=M/Le&255;return L+J},o.prototype.writeUint8=o.prototype.writeUInt8=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,1,255,0),this[L]=M&255,L+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,2,65535,0),this[L]=M&255,this[L+1]=M>>>8,L+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,2,65535,0),this[L]=M>>>8,this[L+1]=M&255,L+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,4,4294967295,0),this[L+3]=M>>>24,this[L+2]=M>>>16,this[L+1]=M>>>8,this[L]=M&255,L+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,4,4294967295,0),this[L]=M>>>24,this[L+1]=M>>>16,this[L+2]=M>>>8,this[L+3]=M&255,L+4},o.prototype.writeIntLE=function(M,L,J,pe){if(M=+M,L=L>>>0,!pe){var ve=Math.pow(2,8*J-1);Ne(this,M,L,J,ve-1,-ve)}var me=0,Le=1,Xe=0;for(this[L]=M&255;++me<J&&(Le*=256);)M<0&&Xe===0&&this[L+me-1]!==0&&(Xe=1),this[L+me]=(M/Le>>0)-Xe&255;return L+J},o.prototype.writeIntBE=function(M,L,J,pe){if(M=+M,L=L>>>0,!pe){var ve=Math.pow(2,8*J-1);Ne(this,M,L,J,ve-1,-ve)}var me=J-1,Le=1,Xe=0;for(this[L+me]=M&255;--me>=0&&(Le*=256);)M<0&&Xe===0&&this[L+me+1]!==0&&(Xe=1),this[L+me]=(M/Le>>0)-Xe&255;return L+J},o.prototype.writeInt8=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,1,127,-128),M<0&&(M=255+M+1),this[L]=M&255,L+1},o.prototype.writeInt16LE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,2,32767,-32768),this[L]=M&255,this[L+1]=M>>>8,L+2},o.prototype.writeInt16BE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,2,32767,-32768),this[L]=M>>>8,this[L+1]=M&255,L+2},o.prototype.writeInt32LE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,4,2147483647,-2147483648),this[L]=M&255,this[L+1]=M>>>8,this[L+2]=M>>>16,this[L+3]=M>>>24,L+4},o.prototype.writeInt32BE=function(M,L,J){return M=+M,L=L>>>0,J||Ne(this,M,L,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[L]=M>>>24,this[L+1]=M>>>16,this[L+2]=M>>>8,this[L+3]=M&255,L+4};function st(ae,M,L,J,pe,ve){if(L+J>ae.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function nt(ae,M,L,J,pe){return M=+M,L=L>>>0,pe||st(ae,M,L,4),n.write(ae,M,L,J,23,4),L+4}o.prototype.writeFloatLE=function(M,L,J){return nt(this,M,L,!0,J)},o.prototype.writeFloatBE=function(M,L,J){return nt(this,M,L,!1,J)};function Ue(ae,M,L,J,pe){return M=+M,L=L>>>0,pe||st(ae,M,L,8),n.write(ae,M,L,J,52,8),L+8}o.prototype.writeDoubleLE=function(M,L,J){return Ue(this,M,L,!0,J)},o.prototype.writeDoubleBE=function(M,L,J){return Ue(this,M,L,!1,J)},o.prototype.copy=function(M,L,J,pe){if(!o.isBuffer(M))throw new TypeError("argument should be a Buffer");if(J||(J=0),!pe&&pe!==0&&(pe=this.length),L>=M.length&&(L=M.length),L||(L=0),pe>0&&pe<J&&(pe=J),pe===J||M.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),M.length-L<pe-J&&(pe=M.length-L+J);var ve=pe-J;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,J,pe):Uint8Array.prototype.set.call(M,this.subarray(J,pe),L),ve},o.prototype.fill=function(M,L,J,pe){if(typeof M=="string"){if(typeof L=="string"?(pe=L,L=0,J=this.length):typeof J=="string"&&(pe=J,J=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(M.length===1){var ve=M.charCodeAt(0);(pe==="utf8"&&ve<128||pe==="latin1")&&(M=ve)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(L<0||this.length<L||this.length<J)throw new RangeError("Out of range index");if(J<=L)return this;L=L>>>0,J=J===void 0?this.length:J>>>0,M||(M=0);var me;if(typeof M=="number")for(me=L;me<J;++me)this[me]=M;else{var Le=o.isBuffer(M)?M:o.from(M,pe),Xe=Le.length;if(Xe===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(me=0;me<J-L;++me)this[me+L]=Le[me%Xe]}return this};var ct=/[^+/0-9A-Za-z-_]/g;function he(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(ct,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function oe(ae,M){M=M||1/0;for(var L,J=ae.length,pe=null,ve=[],me=0;me<J;++me){if(L=ae.charCodeAt(me),L>55295&&L<57344){if(!pe){if(L>56319){(M-=3)>-1&&ve.push(239,191,189);continue}else if(me+1===J){(M-=3)>-1&&ve.push(239,191,189);continue}pe=L;continue}if(L<56320){(M-=3)>-1&&ve.push(239,191,189),pe=L;continue}L=(pe-55296<<10|L-56320)+65536}else pe&&(M-=3)>-1&&ve.push(239,191,189);if(pe=null,L<128){if((M-=1)<0)break;ve.push(L)}else if(L<2048){if((M-=2)<0)break;ve.push(L>>6|192,L&63|128)}else if(L<65536){if((M-=3)<0)break;ve.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((M-=4)<0)break;ve.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return ve}function We(ae){for(var M=[],L=0;L<ae.length;++L)M.push(ae.charCodeAt(L)&255);return M}function Oe(ae,M){for(var L,J,pe,ve=[],me=0;me<ae.length&&!((M-=2)<0);++me)L=ae.charCodeAt(me),J=L>>8,pe=L%256,ve.push(pe),ve.push(J);return ve}function ht(ae){return t.toByteArray(he(ae))}function Pt(ae,M,L,J){for(var pe=0;pe<J&&!(pe+L>=M.length||pe>=ae.length);++pe)M[pe+L]=ae[pe];return pe}function St(ae,M){return ae instanceof M||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===M.name}function G(ae){return ae!==ae}var qe=function(){for(var ae="0123456789abcdef",M=new Array(256),L=0;L<16;++L)for(var J=L*16,pe=0;pe<16;++pe)M[J+pe]=ae[L]+ae[pe];return M}()}(Gb)),Gb}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var pj;function fTe(){return pj||(pj=1,function(e,t){var n=dTe(),r=n.Buffer;function i(a,o){for(var u in a)o[u]=a[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s);function s(a,o,u){return r(a,o,u)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(a,o,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,o,u)},s.alloc=function(a,o,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var h=r(a);return o!==void 0?typeof u=="string"?h.fill(o,u):h.fill(o):h.fill(0),h},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(Gp,Gp.exports)),Gp.exports}var mj;function pTe(){if(mj)return Vb;mj=1;var e=fTe().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var k;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(k)return;x=(""+x).toLowerCase(),k=!0}}function r(x){var k=n(x);if(typeof k!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return k||x}Vb.StringDecoder=i;function i(x){this.encoding=r(x);var k;switch(this.encoding){case"utf16le":this.text=p,this.end=m,k=4;break;case"utf8":this.fillLast=u,k=4;break;case"base64":this.text=g,this.end=v,k=3;break;default:this.write=w,this.end=C;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(k)}i.prototype.write=function(x){if(x.length===0)return"";var k,A;if(this.lastNeed){if(k=this.fillLast(x),k===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<x.length?k?k+this.text(x,A):this.text(x,A):k||""},i.prototype.end=d,i.prototype.text=h,i.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function s(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function a(x,k,A){var j=k.length-1;if(j<A)return 0;var I=s(k[j]);return I>=0?(I>0&&(x.lastNeed=I-1),I):--j<A||I===-2?0:(I=s(k[j]),I>=0?(I>0&&(x.lastNeed=I-2),I):--j<A||I===-2?0:(I=s(k[j]),I>=0?(I>0&&(I===2?I=0:x.lastNeed=I-3),I):0))}function o(x,k,A){if((k[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var k=this.lastTotal-this.lastNeed,A=o(this,x);if(A!==void 0)return A;if(this.lastNeed<=x.length)return x.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,k,0,x.length),this.lastNeed-=x.length}function h(x,k){var A=a(this,x,k);if(!this.lastNeed)return x.toString("utf8",k);this.lastTotal=A;var j=x.length-(A-this.lastNeed);return x.copy(this.lastChar,0,j),x.toString("utf8",k,j)}function d(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+"":k}function p(x,k){if((x.length-k)%2===0){var A=x.toString("utf16le",k);if(A){var j=A.charCodeAt(A.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",k,x.length-1)}function m(x){var k=x&&x.length?this.write(x):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,A)}return k}function g(x,k){var A=(x.length-k)%3;return A===0?x.toString("base64",k):(this.lastNeed=3-A,this.lastTotal=3,A===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",k,x.length-A))}function v(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function w(x){return x.toString(this.encoding)}function C(x){return x&&x.length?this.write(x):""}return Vb}(function(e){(function(t){t.parser=function(he,oe){return new r(he,oe)},t.SAXParser=r,t.SAXStream=d,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(he,oe){if(!(this instanceof r))return new r(he,oe);var We=this;s(We),We.q=We.c="",We.bufferCheckPosition=t.MAX_BUFFER_LENGTH,We.opt=oe||{},We.opt.lowercase=We.opt.lowercase||We.opt.lowercasetags,We.looseCase=We.opt.lowercase?"toLowerCase":"toUpperCase",We.tags=[],We.closed=We.closedRoot=We.sawRoot=!1,We.tag=We.error=null,We.strict=!!he,We.noscript=!!(he||We.opt.noscript),We.state=R.BEGIN,We.strictEntities=We.opt.strictEntities,We.ENTITIES=We.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),We.attribList=[],We.opt.xmlns&&(We.ns=Object.create(w)),We.opt.unquotedAttributeValues===void 0&&(We.opt.unquotedAttributeValues=!he),We.trackPosition=We.opt.position!==!1,We.trackPosition&&(We.position=We.line=We.column=0),ce(We,"onready")}Object.create||(Object.create=function(he){function oe(){}oe.prototype=he;var We=new oe;return We}),Object.keys||(Object.keys=function(he){var oe=[];for(var We in he)he.hasOwnProperty(We)&&oe.push(We);return oe});function i(he){for(var oe=Math.max(t.MAX_BUFFER_LENGTH,10),We=0,Oe=0,ht=n.length;Oe<ht;Oe++){var Pt=he[n[Oe]].length;if(Pt>oe)switch(n[Oe]){case"textNode":ge(he);break;case"cdata":ie(he,"oncdata",he.cdata),he.cdata="";break;case"script":ie(he,"onscript",he.script),he.script="";break;default:ye(he,"Max buffer length exceeded: "+n[Oe])}We=Math.max(We,Pt)}var St=t.MAX_BUFFER_LENGTH-We;he.bufferCheckPosition=St+he.position}function s(he){for(var oe=0,We=n.length;oe<We;oe++)he[n[oe]]=""}function a(he){ge(he),he.cdata!==""&&(ie(he,"oncdata",he.cdata),he.cdata=""),he.script!==""&&(ie(he,"onscript",he.script),he.script="")}r.prototype={end:function(){je(this)},write:ct,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var o;try{o=a1.Stream}catch{o=function(){}}o||(o=function(){});var u=t.EVENTS.filter(function(he){return he!=="error"&&he!=="end"});function h(he,oe){return new d(he,oe)}function d(he,oe){if(!(this instanceof d))return new d(he,oe);o.apply(this),this._parser=new r(he,oe),this.writable=!0,this.readable=!0;var We=this;this._parser.onend=function(){We.emit("end")},this._parser.onerror=function(Oe){We.emit("error",Oe),We._parser.error=null},this._decoder=null,u.forEach(function(Oe){Object.defineProperty(We,"on"+Oe,{get:function(){return We._parser["on"+Oe]},set:function(ht){if(!ht)return We.removeAllListeners(Oe),We._parser["on"+Oe]=ht,ht;We.on(Oe,ht)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(o.prototype,{constructor:{value:d}}),d.prototype.write=function(he){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(he)){if(!this._decoder){var oe=pTe().StringDecoder;this._decoder=new oe("utf8")}he=this._decoder.write(he)}return this._parser.write(he.toString()),this.emit("data",he),!0},d.prototype.end=function(he){return he&&he.length&&this.write(he),this._parser.end(),!0},d.prototype.on=function(he,oe){var We=this;return!We._parser["on"+he]&&u.indexOf(he)!==-1&&(We._parser["on"+he]=function(){var Oe=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Oe.splice(0,0,he),We.emit.apply(We,Oe)}),o.prototype.on.call(We,he,oe)};var p="[CDATA[",m="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",w={xml:g,xmlns:v},C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function j(he){return he===" "||he===`
`||he==="\r"||he==="	"}function I(he){return he==='"'||he==="'"}function E(he){return he===">"||j(he)}function U(he,oe){return he.test(oe)}function D(he,oe){return!U(he,oe)}var R=0;t.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(he){var oe=t.ENTITIES[he],We=typeof oe=="number"?String.fromCharCode(oe):oe;t.ENTITIES[he]=We});for(var X in t.STATE)t.STATE[t.STATE[X]]=X;R=t.STATE;function ce(he,oe,We){he[oe]&&he[oe](We)}function ie(he,oe,We){he.textNode&&ge(he),ce(he,oe,We)}function ge(he){he.textNode=H(he.opt,he.textNode),he.textNode&&ce(he,"ontext",he.textNode),he.textNode=""}function H(he,oe){return he.trim&&(oe=oe.trim()),he.normalize&&(oe=oe.replace(/\s+/g," ")),oe}function ye(he,oe){return ge(he),he.trackPosition&&(oe+=`
Line: `+he.line+`
Column: `+he.column+`
Char: `+he.c),oe=new Error(oe),he.error=oe,ce(he,"onerror",oe),he}function je(he){return he.sawRoot&&!he.closedRoot&&ke(he,"Unclosed root tag"),he.state!==R.BEGIN&&he.state!==R.BEGIN_WHITESPACE&&he.state!==R.TEXT&&ye(he,"Unexpected end"),ge(he),he.c="",he.closed=!0,ce(he,"onend"),r.call(he,he.strict,he.opt),he}function ke(he,oe){if(typeof he!="object"||!(he instanceof r))throw new Error("bad call to strictFail");he.strict&&ye(he,oe)}function Fe(he){he.strict||(he.tagName=he.tagName[he.looseCase]());var oe=he.tags[he.tags.length-1]||he,We=he.tag={name:he.tagName,attributes:{}};he.opt.xmlns&&(We.ns=oe.ns),he.attribList.length=0,ie(he,"onopentagstart",We)}function xe(he,oe){var We=he.indexOf(":"),Oe=We<0?["",he]:he.split(":"),ht=Oe[0],Pt=Oe[1];return oe&&he==="xmlns"&&(ht="xmlns",Pt=""),{prefix:ht,local:Pt}}function Me(he){if(he.strict||(he.attribName=he.attribName[he.looseCase]()),he.attribList.indexOf(he.attribName)!==-1||he.tag.attributes.hasOwnProperty(he.attribName)){he.attribName=he.attribValue="";return}if(he.opt.xmlns){var oe=xe(he.attribName,!0),We=oe.prefix,Oe=oe.local;if(We==="xmlns")if(Oe==="xml"&&he.attribValue!==g)ke(he,"xml: prefix must be bound to "+g+`
Actual: `+he.attribValue);else if(Oe==="xmlns"&&he.attribValue!==v)ke(he,"xmlns: prefix must be bound to "+v+`
Actual: `+he.attribValue);else{var ht=he.tag,Pt=he.tags[he.tags.length-1]||he;ht.ns===Pt.ns&&(ht.ns=Object.create(Pt.ns)),ht.ns[Oe]=he.attribValue}he.attribList.push([he.attribName,he.attribValue])}else he.tag.attributes[he.attribName]=he.attribValue,ie(he,"onattribute",{name:he.attribName,value:he.attribValue});he.attribName=he.attribValue=""}function _e(he,oe){if(he.opt.xmlns){var We=he.tag,Oe=xe(he.tagName);We.prefix=Oe.prefix,We.local=Oe.local,We.uri=We.ns[Oe.prefix]||"",We.prefix&&!We.uri&&(ke(he,"Unbound namespace prefix: "+JSON.stringify(he.tagName)),We.uri=Oe.prefix);var ht=he.tags[he.tags.length-1]||he;We.ns&&ht.ns!==We.ns&&Object.keys(We.ns).forEach(function(me){ie(he,"onopennamespace",{prefix:me,uri:We.ns[me]})});for(var Pt=0,St=he.attribList.length;Pt<St;Pt++){var G=he.attribList[Pt],qe=G[0],ae=G[1],M=xe(qe,!0),L=M.prefix,J=M.local,pe=L===""?"":We.ns[L]||"",ve={name:qe,value:ae,prefix:L,local:J,uri:pe};L&&L!=="xmlns"&&!pe&&(ke(he,"Unbound namespace prefix: "+JSON.stringify(L)),ve.uri=L),he.tag.attributes[qe]=ve,ie(he,"onattribute",ve)}he.attribList.length=0}he.tag.isSelfClosing=!!oe,he.sawRoot=!0,he.tags.push(he.tag),ie(he,"onopentag",he.tag),oe||(!he.noscript&&he.tagName.toLowerCase()==="script"?he.state=R.SCRIPT:he.state=R.TEXT,he.tag=null,he.tagName=""),he.attribName=he.attribValue="",he.attribList.length=0}function Ne(he){if(!he.tagName){ke(he,"Weird empty close tag."),he.textNode+="</>",he.state=R.TEXT;return}if(he.script){if(he.tagName!=="script"){he.script+="</"+he.tagName+">",he.tagName="",he.state=R.SCRIPT;return}ie(he,"onscript",he.script),he.script=""}var oe=he.tags.length,We=he.tagName;he.strict||(We=We[he.looseCase]());for(var Oe=We;oe--;){var ht=he.tags[oe];if(ht.name!==Oe)ke(he,"Unexpected close tag");else break}if(oe<0){ke(he,"Unmatched closing tag: "+he.tagName),he.textNode+="</"+he.tagName+">",he.state=R.TEXT;return}he.tagName=We;for(var Pt=he.tags.length;Pt-- >oe;){var St=he.tag=he.tags.pop();he.tagName=he.tag.name,ie(he,"onclosetag",he.tagName);var G={};for(var qe in St.ns)G[qe]=St.ns[qe];var ae=he.tags[he.tags.length-1]||he;he.opt.xmlns&&St.ns!==ae.ns&&Object.keys(St.ns).forEach(function(M){var L=St.ns[M];ie(he,"onclosenamespace",{prefix:M,uri:L})})}oe===0&&(he.closedRoot=!0),he.tagName=he.attribValue=he.attribName="",he.attribList.length=0,he.state=R.TEXT}function st(he){var oe=he.entity,We=oe.toLowerCase(),Oe,ht="";return he.ENTITIES[oe]?he.ENTITIES[oe]:he.ENTITIES[We]?he.ENTITIES[We]:(oe=We,oe.charAt(0)==="#"&&(oe.charAt(1)==="x"?(oe=oe.slice(2),Oe=parseInt(oe,16),ht=Oe.toString(16)):(oe=oe.slice(1),Oe=parseInt(oe,10),ht=Oe.toString(10))),oe=oe.replace(/^0+/,""),isNaN(Oe)||ht.toLowerCase()!==oe||Oe<0||Oe>1114111?(ke(he,"Invalid character entity"),"&"+he.entity+";"):String.fromCodePoint(Oe))}function nt(he,oe){oe==="<"?(he.state=R.OPEN_WAKA,he.startTagPosition=he.position):j(oe)||(ke(he,"Non-whitespace before first tag."),he.textNode=oe,he.state=R.TEXT)}function Ue(he,oe){var We="";return oe<he.length&&(We=he.charAt(oe)),We}function ct(he){var oe=this;if(this.error)throw this.error;if(oe.closed)return ye(oe,"Cannot write after close. Assign an onready handler.");if(he===null)return je(oe);typeof he=="object"&&(he=he.toString());for(var We=0,Oe="";Oe=Ue(he,We++),oe.c=Oe,!!Oe;)switch(oe.trackPosition&&(oe.position++,Oe===`
`?(oe.line++,oe.column=0):oe.column++),oe.state){case R.BEGIN:if(oe.state=R.BEGIN_WHITESPACE,Oe==="\uFEFF")continue;nt(oe,Oe);continue;case R.BEGIN_WHITESPACE:nt(oe,Oe);continue;case R.TEXT:if(oe.sawRoot&&!oe.closedRoot){for(var Pt=We-1;Oe&&Oe!=="<"&&Oe!=="&";)Oe=Ue(he,We++),Oe&&oe.trackPosition&&(oe.position++,Oe===`
`?(oe.line++,oe.column=0):oe.column++);oe.textNode+=he.substring(Pt,We-1)}Oe==="<"&&!(oe.sawRoot&&oe.closedRoot&&!oe.strict)?(oe.state=R.OPEN_WAKA,oe.startTagPosition=oe.position):(!j(Oe)&&(!oe.sawRoot||oe.closedRoot)&&ke(oe,"Text data outside of root node."),Oe==="&"?oe.state=R.TEXT_ENTITY:oe.textNode+=Oe);continue;case R.SCRIPT:Oe==="<"?oe.state=R.SCRIPT_ENDING:oe.script+=Oe;continue;case R.SCRIPT_ENDING:Oe==="/"?oe.state=R.CLOSE_TAG:(oe.script+="<"+Oe,oe.state=R.SCRIPT);continue;case R.OPEN_WAKA:if(Oe==="!")oe.state=R.SGML_DECL,oe.sgmlDecl="";else if(!j(Oe))if(U(C,Oe))oe.state=R.OPEN_TAG,oe.tagName=Oe;else if(Oe==="/")oe.state=R.CLOSE_TAG,oe.tagName="";else if(Oe==="?")oe.state=R.PROC_INST,oe.procInstName=oe.procInstBody="";else{if(ke(oe,"Unencoded <"),oe.startTagPosition+1<oe.position){var ht=oe.position-oe.startTagPosition;Oe=new Array(ht).join(" ")+Oe}oe.textNode+="<"+Oe,oe.state=R.TEXT}continue;case R.SGML_DECL:if(oe.sgmlDecl+Oe==="--"){oe.state=R.COMMENT,oe.comment="",oe.sgmlDecl="";continue}oe.doctype&&oe.doctype!==!0&&oe.sgmlDecl?(oe.state=R.DOCTYPE_DTD,oe.doctype+="<!"+oe.sgmlDecl+Oe,oe.sgmlDecl=""):(oe.sgmlDecl+Oe).toUpperCase()===p?(ie(oe,"onopencdata"),oe.state=R.CDATA,oe.sgmlDecl="",oe.cdata=""):(oe.sgmlDecl+Oe).toUpperCase()===m?(oe.state=R.DOCTYPE,(oe.doctype||oe.sawRoot)&&ke(oe,"Inappropriately located doctype declaration"),oe.doctype="",oe.sgmlDecl=""):Oe===">"?(ie(oe,"onsgmldeclaration",oe.sgmlDecl),oe.sgmlDecl="",oe.state=R.TEXT):(I(Oe)&&(oe.state=R.SGML_DECL_QUOTED),oe.sgmlDecl+=Oe);continue;case R.SGML_DECL_QUOTED:Oe===oe.q&&(oe.state=R.SGML_DECL,oe.q=""),oe.sgmlDecl+=Oe;continue;case R.DOCTYPE:Oe===">"?(oe.state=R.TEXT,ie(oe,"ondoctype",oe.doctype),oe.doctype=!0):(oe.doctype+=Oe,Oe==="["?oe.state=R.DOCTYPE_DTD:I(Oe)&&(oe.state=R.DOCTYPE_QUOTED,oe.q=Oe));continue;case R.DOCTYPE_QUOTED:oe.doctype+=Oe,Oe===oe.q&&(oe.q="",oe.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:Oe==="]"?(oe.doctype+=Oe,oe.state=R.DOCTYPE):Oe==="<"?(oe.state=R.OPEN_WAKA,oe.startTagPosition=oe.position):I(Oe)?(oe.doctype+=Oe,oe.state=R.DOCTYPE_DTD_QUOTED,oe.q=Oe):oe.doctype+=Oe;continue;case R.DOCTYPE_DTD_QUOTED:oe.doctype+=Oe,Oe===oe.q&&(oe.state=R.DOCTYPE_DTD,oe.q="");continue;case R.COMMENT:Oe==="-"?oe.state=R.COMMENT_ENDING:oe.comment+=Oe;continue;case R.COMMENT_ENDING:Oe==="-"?(oe.state=R.COMMENT_ENDED,oe.comment=H(oe.opt,oe.comment),oe.comment&&ie(oe,"oncomment",oe.comment),oe.comment=""):(oe.comment+="-"+Oe,oe.state=R.COMMENT);continue;case R.COMMENT_ENDED:Oe!==">"?(ke(oe,"Malformed comment"),oe.comment+="--"+Oe,oe.state=R.COMMENT):oe.doctype&&oe.doctype!==!0?oe.state=R.DOCTYPE_DTD:oe.state=R.TEXT;continue;case R.CDATA:for(var Pt=We-1;Oe&&Oe!=="]";)Oe=Ue(he,We++),Oe&&oe.trackPosition&&(oe.position++,Oe===`
`?(oe.line++,oe.column=0):oe.column++);oe.cdata+=he.substring(Pt,We-1),Oe==="]"&&(oe.state=R.CDATA_ENDING);continue;case R.CDATA_ENDING:Oe==="]"?oe.state=R.CDATA_ENDING_2:(oe.cdata+="]"+Oe,oe.state=R.CDATA);continue;case R.CDATA_ENDING_2:Oe===">"?(oe.cdata&&ie(oe,"oncdata",oe.cdata),ie(oe,"onclosecdata"),oe.cdata="",oe.state=R.TEXT):Oe==="]"?oe.cdata+="]":(oe.cdata+="]]"+Oe,oe.state=R.CDATA);continue;case R.PROC_INST:Oe==="?"?oe.state=R.PROC_INST_ENDING:j(Oe)?oe.state=R.PROC_INST_BODY:oe.procInstName+=Oe;continue;case R.PROC_INST_BODY:if(!oe.procInstBody&&j(Oe))continue;Oe==="?"?oe.state=R.PROC_INST_ENDING:oe.procInstBody+=Oe;continue;case R.PROC_INST_ENDING:Oe===">"?(ie(oe,"onprocessinginstruction",{name:oe.procInstName,body:oe.procInstBody}),oe.procInstName=oe.procInstBody="",oe.state=R.TEXT):(oe.procInstBody+="?"+Oe,oe.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:U(x,Oe)?oe.tagName+=Oe:(Fe(oe),Oe===">"?_e(oe):Oe==="/"?oe.state=R.OPEN_TAG_SLASH:(j(Oe)||ke(oe,"Invalid character in tag name"),oe.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:Oe===">"?(_e(oe,!0),Ne(oe)):(ke(oe,"Forward-slash in opening tag not followed by >"),oe.state=R.ATTRIB);continue;case R.ATTRIB:if(j(Oe))continue;Oe===">"?_e(oe):Oe==="/"?oe.state=R.OPEN_TAG_SLASH:U(C,Oe)?(oe.attribName=Oe,oe.attribValue="",oe.state=R.ATTRIB_NAME):ke(oe,"Invalid attribute name");continue;case R.ATTRIB_NAME:Oe==="="?oe.state=R.ATTRIB_VALUE:Oe===">"?(ke(oe,"Attribute without value"),oe.attribValue=oe.attribName,Me(oe),_e(oe)):j(Oe)?oe.state=R.ATTRIB_NAME_SAW_WHITE:U(x,Oe)?oe.attribName+=Oe:ke(oe,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if(Oe==="=")oe.state=R.ATTRIB_VALUE;else{if(j(Oe))continue;ke(oe,"Attribute without value"),oe.tag.attributes[oe.attribName]="",oe.attribValue="",ie(oe,"onattribute",{name:oe.attribName,value:""}),oe.attribName="",Oe===">"?_e(oe):U(C,Oe)?(oe.attribName=Oe,oe.state=R.ATTRIB_NAME):(ke(oe,"Invalid attribute name"),oe.state=R.ATTRIB)}continue;case R.ATTRIB_VALUE:if(j(Oe))continue;I(Oe)?(oe.q=Oe,oe.state=R.ATTRIB_VALUE_QUOTED):(oe.opt.unquotedAttributeValues||ye(oe,"Unquoted attribute value"),oe.state=R.ATTRIB_VALUE_UNQUOTED,oe.attribValue=Oe);continue;case R.ATTRIB_VALUE_QUOTED:if(Oe!==oe.q){Oe==="&"?oe.state=R.ATTRIB_VALUE_ENTITY_Q:oe.attribValue+=Oe;continue}Me(oe),oe.q="",oe.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:j(Oe)?oe.state=R.ATTRIB:Oe===">"?_e(oe):Oe==="/"?oe.state=R.OPEN_TAG_SLASH:U(C,Oe)?(ke(oe,"No whitespace between attributes"),oe.attribName=Oe,oe.attribValue="",oe.state=R.ATTRIB_NAME):ke(oe,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(!E(Oe)){Oe==="&"?oe.state=R.ATTRIB_VALUE_ENTITY_U:oe.attribValue+=Oe;continue}Me(oe),Oe===">"?_e(oe):oe.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(oe.tagName)Oe===">"?Ne(oe):U(x,Oe)?oe.tagName+=Oe:oe.script?(oe.script+="</"+oe.tagName,oe.tagName="",oe.state=R.SCRIPT):(j(Oe)||ke(oe,"Invalid tagname in closing tag"),oe.state=R.CLOSE_TAG_SAW_WHITE);else{if(j(Oe))continue;D(C,Oe)?oe.script?(oe.script+="</"+Oe,oe.state=R.SCRIPT):ke(oe,"Invalid tagname in closing tag."):oe.tagName=Oe}continue;case R.CLOSE_TAG_SAW_WHITE:if(j(Oe))continue;Oe===">"?Ne(oe):ke(oe,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:var St,G;switch(oe.state){case R.TEXT_ENTITY:St=R.TEXT,G="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:St=R.ATTRIB_VALUE_QUOTED,G="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:St=R.ATTRIB_VALUE_UNQUOTED,G="attribValue";break}if(Oe===";"){var qe=st(oe);oe.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(qe)?(oe.entity="",oe.state=St,oe.write(qe)):(oe[G]+=qe,oe.entity="",oe.state=St)}else U(oe.entity.length?A:k,Oe)?oe.entity+=Oe:(ke(oe,"Invalid character in entity name"),oe[G]+="&"+oe.entity+Oe,oe.entity="",oe.state=St);continue;default:throw new Error(oe,"Unknown state: "+oe.state)}return oe.position>=oe.bufferCheckPosition&&i(oe),oe}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var he=String.fromCharCode,oe=Math.floor,We=function(){var Oe=16384,ht=[],Pt,St,G=-1,qe=arguments.length;if(!qe)return"";for(var ae="";++G<qe;){var M=Number(arguments[G]);if(!isFinite(M)||M<0||M>1114111||oe(M)!==M)throw RangeError("Invalid code point: "+M);M<=65535?ht.push(M):(M-=65536,Pt=(M>>10)+55296,St=M%1024+56320,ht.push(Pt,St)),(G+1===qe||ht.length>Oe)&&(ae+=he.apply(null,ht),ht.length=0)}return ae};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:We,configurable:!0,writable:!0}):String.fromCodePoint=We}()})(e)})(DL);const mTe=yl(DL);class ik extends Error{constructor(t,n,r,i,s){super(t),this.name="SvgoParserError",this.message=`${s||"<input>"}:${n}:${r}: ${t}`,this.reason=t,this.line=n,this.column=r,this.source=i,Error.captureStackTrace&&Error.captureStackTrace(this,ik)}toString(){const t=this.source.split(/\r?\n/),n=Math.max(this.line-3,0),r=Math.min(this.line+2,t.length),i=String(r).length,s=Math.max(this.column-54,0),a=Math.max(this.column+20,80),o=t.slice(n,r).map((u,h)=>{const d=u.slice(s,a);let p="",m="";s!==0&&(p=s>u.length-1?" ":""),a<u.length-1&&(m="");const g=n+1+h,v=` ${g.toString().padStart(i)} | `;if(g===this.line){const w=v.replace(/[^|]/g," "),C=(p+u.slice(s,this.column-1)).replace(/[^\t]/g," "),x=w+C;return`>${v}${p}${d}${m}
 ${x}^`}return` ${v}${p}${d}${m}`}).join(`
`);return`${this.name}: ${this.message}

${o}
`}}const qb=/<!ENTITY\s+(\S+)\s+(?:'([^']+)'|"([^"]+)")\s*>/g,gj={strict:!0,trim:!1,normalize:!1,lowercase:!0,xmlns:!0,position:!0,unparsedEntities:!0},gTe=(e,t)=>{const n=mTe.parser(gj.strict,gj),r={type:"root",children:[]};let i=r;const s=[r],a=o=>{i.children.push(o)};return n.ondoctype=o=>{a({type:"doctype",name:"svg",data:{doctype:o}});const h=o.indexOf("[");if(h>=0){qb.lastIndex=h;let d=qb.exec(e);for(;d!=null;)n.ENTITIES[d[1]]=d[2]||d[3],d=qb.exec(e)}},n.onprocessinginstruction=o=>{const u={type:"instruction",name:o.name,value:o.body};a(u)},n.oncomment=o=>{const u={type:"comment",value:o.trim()};a(u)},n.oncdata=o=>{a({type:"cdata",value:o})},n.onopentag=o=>{const u={type:"element",name:o.name,attributes:{},children:[]};for(const[h,d]of Object.entries(o.attributes))u.attributes[h]=d.value;a(u),i=u,s.push(u)},n.ontext=o=>{if(i.type==="element")if(yR.has(i.name))a({type:"text",value:o});else{const u=o.trim();u!==""&&a({type:"text",value:u})}},n.onclosetag=()=>{s.pop(),i=s[s.length-1]},n.onerror=o=>{const u=o.message.split(`
`)[0],h=new ik(u,n.line+1,n.column,e,t);if(o.message.indexOf("Unexpected end")===-1)throw h},n.write(e).close(),r},yTe=e=>bTe[e],Bl={doctypeStart:"<!DOCTYPE",doctypeEnd:">",procInstStart:"<?",procInstEnd:"?>",tagOpenStart:"<",tagOpenEnd:">",tagCloseStart:"</",tagCloseEnd:">",tagShortStart:"<",tagShortEnd:"/>",attrStart:'="',attrEnd:'"',commentStart:"<!--",commentEnd:"-->",cdataStart:"<![CDATA[",cdataEnd:"]]>",textStart:"",textEnd:"",indent:4,regEntities:/[&'"<>]/g,regValEntities:/[&"<>]/g,encodeEntity:yTe,pretty:!1,useShortTags:!0,eol:"lf",finalNewline:!1},bTe={"&":"&amp;","'":"&apos;",'"':"&quot;",">":"&gt;","<":"&lt;"},vTe=(e,t={})=>{const n={...Bl,...t},r=n.indent;let i="    ";typeof r=="number"&&Number.isNaN(r)===!1?i=r<0?"	":" ".repeat(r):typeof r=="string"&&(i=r);const s={indent:i,textContext:null,indentLevel:0},a=n.eol==="crlf"?`\r
`:`
`;n.pretty&&(n.doctypeEnd+=a,n.procInstEnd+=a,n.commentEnd+=a,n.cdataEnd+=a,n.tagShortEnd+=a,n.tagOpenEnd+=a,n.tagCloseEnd+=a,n.textEnd+=a);let o=zL(e,n,s);return n.finalNewline&&o.length>0&&!o.endsWith(`
`)&&(o+=a),o},zL=(e,t,n)=>{let r="";n.indentLevel++;for(const i of e.children)switch(i.type){case"element":r+=STe(i,t,n);break;case"text":r+=CTe(i,t,n);break;case"doctype":r+=xTe(i,t);break;case"instruction":r+=wTe(i,t);break;case"comment":r+=_Te(i,t);break;case"cdata":r+=kTe(i,t,n)}return n.indentLevel--,r},Su=(e,t)=>{let n="";return e.pretty&&t.textContext==null&&(n=t.indent.repeat(t.indentLevel-1)),n},xTe=(e,t)=>t.doctypeStart+e.data.doctype+t.doctypeEnd,wTe=(e,t)=>t.procInstStart+e.name+" "+e.value+t.procInstEnd,_Te=(e,t)=>t.commentStart+e.value+t.commentEnd,kTe=(e,t,n)=>Su(t,n)+t.cdataStart+e.value+t.cdataEnd,STe=(e,t,n)=>{if(e.children.length===0)return t.useShortTags?Su(t,n)+t.tagShortStart+e.name+Yb(e,t)+t.tagShortEnd:Su(t,n)+t.tagShortStart+e.name+Yb(e,t)+t.tagOpenEnd+t.tagCloseStart+e.name+t.tagCloseEnd;let r=t.tagOpenStart,i=t.tagOpenEnd,s=t.tagCloseStart,a=t.tagCloseEnd,o=Su(t,n),u=Su(t,n);n.textContext?(r=Bl.tagOpenStart,i=Bl.tagOpenEnd,s=Bl.tagCloseStart,a=Bl.tagCloseEnd,o=""):yR.has(e.name)&&(i=Bl.tagOpenEnd,s=Bl.tagCloseStart,u="",n.textContext=e);const h=zL(e,t,n);return n.textContext===e&&(n.textContext=null),o+r+e.name+Yb(e,t)+i+h+u+s+e.name+a},Yb=(e,t)=>{let n="";for(const[r,i]of Object.entries(e.attributes))if(n+=" "+r,i!==void 0){const s=i.toString().replace(t.regValEntities,t.encodeEntity);n+=t.attrStart+s+t.attrEnd}return n},CTe=(e,t,n)=>Su(t,n)+t.textStart+e.value.replace(t.regEntities,t.encodeEntity)+(n.textContext?"":t.textEnd),o1=new Map;for(const e of cTe)o1.set(e.name,e);function yj(e){return e==="removeScriptElement"?(console.warn("Warning: removeScriptElement has been renamed to removeScripts, please update your SVGO config"),o1.get("removeScripts")):o1.get(e)}const ETe=e=>{if(typeof e=="string"){const t=yj(e);if(t==null)throw Error(`Unknown builtin plugin "${e}" specified.`);return{name:e,params:{},fn:t.fn}}if(typeof e=="object"&&e!=null){if(e.name==null)throw Error("Plugin name must be specified");let t=e.fn;if(t==null){const n=yj(e.name);if(n==null)throw Error(`Unknown builtin plugin "${e.name}" specified.`);t=n.fn}return{name:e.name,params:e.params,fn:t}}return null},TTe=(e,t)=>{if(t==null&&(t={}),typeof t!="object")throw Error("Config should be an object");const n=t.multipass?10:1;let r=Number.POSITIVE_INFINITY,i="";const s={};t.path!=null&&(s.path=t.path);for(let a=0;a<n;a+=1){s.multipassCount=a;const o=gTe(e,t.path),u=t.plugins||["preset-default"];if(!Array.isArray(u))throw Error("malformed config, `plugins` property must be an array.\nSee more info here: https://github.com/svg/svgo#configuration");const h=u.filter(p=>p!=null).map(ETe);h.length<u.length&&console.warn("Warning: plugins list includes null or undefined elements, these will be ignored.");const d={};if(t.floatPrecision!=null&&(d.floatPrecision=t.floatPrecision),DO(o,s,h,null,d),i=vTe(o,t.js2svg),i.length<r)e=i,r=i.length;else break}return t.datauri&&(i=c2e(i,t.datauri)),{data:i}},jTe=(e,t)=>{if(t==null&&(t={}),typeof t!="object")throw Error("Config should be an object");return TTe(e,{...t,js2svg:{eol:$O.EOL===`\r
`?"crlf":"lf",...t.js2svg}})},ATe={plugins:["cleanupAttrs","removeDoctype","removeXMLProcInst","removeComments","removeMetadata","removeEditorsNSData","removeEmptyAttrs","removeEmptyContainers","removeUnusedNS",{name:"cleanupNumericValues",params:{floatPrecision:3,leadingZero:!0,defaultPx:!0,convertToPx:!1}},{name:"convertTransform",params:{convertToShorts:!0,floatPrecision:3,transformPrecision:5,matrixToTransform:!0,shortTranslate:!0,shortScale:!0,shortRotate:!0,removeUseless:!0,collapseIntoOne:!1,leadingZero:!0,negativeExtraSpace:!1}},{name:"convertShapeToPath",params:{convertArcs:!1}},{name:"convertPathData",params:{applyTransforms:!0,applyTransformsStroked:!0,makeArcs:!1,straightCurves:!0,lineShorthands:!0,curveSmoothShorthands:!0,floatPrecision:3,transformPrecision:5,removeUseless:!0,collapseRepeated:!0,utilizeAbsolute:!0,leadingZero:!0,negativeExtraSpace:!0,noSpaceAfterFlags:!1,forceAbsolutePath:!1}}],multipass:!1,floatPrecision:3};function Xb(e,t={}){if(!e||typeof e!="string")return console.warn("[SVG-NORMALIZE] Invalid input:",typeof e),e||"";if(!e.includes("<svg"))return console.warn("[SVG-NORMALIZE] Input does not appear to be SVG"),e;try{const n=e.length,r={...ATe,...t},i=jTe(e,r);if(!i||!i.data)return console.error("[SVG-NORMALIZE] SVGO returned no output"),e;const s=i.data.length,a=n-s,o=(a/n*100).toFixed(1);return console.log(`[SVG-NORMALIZE] Optimized: ${n}  ${s} bytes (saved ${a} bytes, ${o}%)`),i.data.includes("<svg")?i.data:(console.error("[SVG-NORMALIZE] Output is not valid SVG, returning original"),e)}catch(n){return console.error("[SVG-NORMALIZE] Optimization failed:",n.message),e}}const Bc={SIMPLE_MAX:500,MODERATE_MAX:1500,COMPLEX_MAX:1e4};function PTe(e){if(!e)return 0;const t=e.match(/[MmLlHhVvCcSsQqTtAaZz]/g);return t?t.length:0}function NTe(e){if(!e)return[];const t=[],n=e.match(/[MmLlHhVvCcSsQqTtAaZz][^MmLlHhVvCcSsQqTtAaZz]*/g)||[];for(const r of n){const i=r[0],s=r.slice(1).trim().split(/[\s,]+/).filter(Boolean).map(Number);t.push({command:i,args:s,raw:r})}return t}function OTe(e){if(!e)return null;const t=NTe(e);if(t.length===0)return null;let n=1/0,r=1/0,i=-1/0,s=-1/0,a=0,o=0;for(const u of t){const{command:h,args:d}=u,p=h===h.toLowerCase();switch(h.toUpperCase()){case"M":case"L":case"T":d.length>=2&&(a=p?a+d[0]:d[0],o=p?o+d[1]:d[1]);break;case"H":d.length>=1&&(a=p?a+d[0]:d[0]);break;case"V":d.length>=1&&(o=p?o+d[0]:d[0]);break;case"C":if(d.length>=6){for(let g=0;g<d.length;g+=2){const v=p?a+d[g]:d[g],w=p?o+d[g+1]:d[g+1];n=Math.min(n,v),r=Math.min(r,w),i=Math.max(i,v),s=Math.max(s,w)}a=p?a+d[d.length-2]:d[d.length-2],o=p?o+d[d.length-1]:d[d.length-1]}break;case"S":case"Q":d.length>=4&&(a=p?a+d[d.length-2]:d[d.length-2],o=p?o+d[d.length-1]:d[d.length-1]);break;case"A":d.length>=7&&(a=p?a+d[5]:d[5],o=p?o+d[6]:d[6]);break}n=Math.min(n,a),r=Math.min(r,o),i=Math.max(i,a),s=Math.max(s,o)}return!isFinite(n)||!isFinite(r)?null:{minX:n,minY:r,maxX:i,maxY:s,width:i-n,height:s-r}}function RTe(e){const t=Array.from(e.querySelectorAll("path, rect, circle, ellipse, polygon"));if(t.length<2)return{hasHiddenShapes:!1,hiddenCount:0,details:[]};const n=t.map((i,s)=>{const a=i.getAttribute("d");let u=a?OTe(a):null;if(!u){const h=i.tagName.toLowerCase();if(h==="rect"){const d=parseFloat(i.getAttribute("x"))||0,p=parseFloat(i.getAttribute("y"))||0,m=parseFloat(i.getAttribute("width"))||0,g=parseFloat(i.getAttribute("height"))||0;u={minX:d,minY:p,maxX:d+m,maxY:p+g,width:m,height:g}}else if(h==="circle"){const d=parseFloat(i.getAttribute("cx"))||0,p=parseFloat(i.getAttribute("cy"))||0,m=parseFloat(i.getAttribute("r"))||0;u={minX:d-m,minY:p-m,maxX:d+m,maxY:p+m,width:m*2,height:m*2}}else if(h==="ellipse"){const d=parseFloat(i.getAttribute("cx"))||0,p=parseFloat(i.getAttribute("cy"))||0,m=parseFloat(i.getAttribute("rx"))||0,g=parseFloat(i.getAttribute("ry"))||0;u={minX:d-m,minY:p-g,maxX:d+m,maxY:p+g,width:m*2,height:g*2}}}return{element:i,index:s,bounds:u,regionId:i.getAttribute("data-region-id"),fill:i.getAttribute("fill")||"none",fillOpacity:parseFloat(i.getAttribute("fill-opacity"))||1}}).filter(i=>i.bounds),r=[];for(let i=0;i<n.length;i++){const s=n[i];if(!(s.fill==="none"||s.fillOpacity===0))for(let a=i+1;a<n.length;a++){const o=n[a];if(!(o.fill==="none"||o.fillOpacity===0)&&o.bounds.minX<=s.bounds.minX&&o.bounds.minY<=s.bounds.minY&&o.bounds.maxX>=s.bounds.maxX&&o.bounds.maxY>=s.bounds.maxY){r.push({hiddenIndex:i,hiddenRegion:s.regionId,coveringIndex:a,coveringRegion:o.regionId});break}}}return{hasHiddenShapes:r.length>0,hiddenCount:r.length,details:r}}function MTe(e){let t;if(typeof e=="string"){const g=new DOMParser().parseFromString(e,"image/svg+xml");if(g.querySelector("parsererror"))return{valid:!1,error:"SVG parse error",pathCount:0,totalSegments:0,estimatedComplexity:"unknown",warnings:["Failed to parse SVG"]};t=g.documentElement}else if(e instanceof Element)t=e;else return{valid:!1,error:"Invalid input",pathCount:0,totalSegments:0,estimatedComplexity:"unknown",warnings:["Input must be SVG string or Element"]};const n=t.querySelectorAll("path"),r=t.querySelectorAll("rect, circle, ellipse, polygon, polyline, line"),i=t.querySelectorAll("g");let s=0,a=0;const o=[];n.forEach((m,g)=>{const v=m.getAttribute("d"),w=PTe(v);s+=w,a=Math.max(a,w),o.push({index:g,segments:w,regionId:m.getAttribute("data-region-id")})});const u=r.length*4;s+=u;let h;s<=Bc.SIMPLE_MAX?h="simple":s<=Bc.MODERATE_MAX?h="moderate":s<=Bc.COMPLEX_MAX?h="complex":h="very_complex";const d=RTe(t),p=[];return s>Bc.MODERATE_MAX&&p.push(`High segment count (${s}) may slow boolean operations`),s>Bc.COMPLEX_MAX&&p.push('Consider using "Flatten Artwork" before boolean operations'),a>500&&p.push(`Complex path detected (${a} segments in single path)`),d.hasHiddenShapes&&p.push(`${d.hiddenCount} potentially hidden shape(s) detected`),i.length>20&&p.push(`Deep nesting detected (${i.length} groups)`),{valid:!0,pathCount:n.length,shapeCount:r.length,groupCount:i.length,totalSegments:s,maxSegmentsInPath:a,estimatedComplexity:h,hasHiddenShapes:d.hasHiddenShapes,hiddenShapeCount:d.hiddenCount,hiddenShapeDetails:d.details,warnings:p,thresholds:Bc,complexityColor:LTe(h),complexityLabel:ITe(h)}}function LTe(e){switch(e){case"simple":return"#22c55e";case"moderate":return"#eab308";case"complex":return"#f97316";case"very_complex":return"#ef4444";default:return"#6b7280"}}function ITe(e){switch(e){case"simple":return"Simple";case"moderate":return"Moderate";case"complex":return"Complex";case"very_complex":return"Very Complex";default:return"Unknown"}}function $Te({svgContent:e,showDetails:t=!1,compact:n=!1}){const[r,i]=fe.useState(t),[s,a]=fe.useState(null);if(fe.useEffect(()=>{if(!e){a(null);return}const C=MTe(e);a(C),C.valid&&console.log("[ComplexityBadge] SVG Analysis:",{paths:C.pathCount,segments:C.totalSegments,complexity:C.estimatedComplexity,warnings:C.warnings})},[e]),!e||!s||!s.valid)return null;const{pathCount:o,shapeCount:u,totalSegments:h,estimatedComplexity:d,complexityColor:p,complexityLabel:m,hasHiddenShapes:g,hiddenShapeCount:v,warnings:w}=s;return n?c.jsx("span",{className:"complexity-badge-compact",title:`${h} segments, ${o} paths`,style:{backgroundColor:p},children:m}):c.jsxs("div",{className:"complexity-badge",children:[c.jsxs("button",{className:"complexity-badge-toggle",onClick:()=>i(!r),style:{borderColor:p},children:[c.jsx("span",{className:"complexity-dot",style:{backgroundColor:p}}),c.jsx("span",{className:"complexity-label",children:m}),c.jsxs("span",{className:"complexity-segments",children:[h," seg"]}),c.jsx("span",{className:"complexity-chevron",children:r?"":""})]}),r&&c.jsxs("div",{className:"complexity-details",children:[c.jsxs("div",{className:"complexity-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Paths"}),c.jsx("span",{className:"stat-value",children:o})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Shapes"}),c.jsx("span",{className:"stat-value",children:u})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Segments"}),c.jsx("span",{className:"stat-value",children:h})]})]}),g&&c.jsxs("div",{className:"complexity-warning",children:[c.jsx("span",{className:"warning-icon",children:""}),c.jsxs("span",{children:[v," potentially hidden shape(s)"]})]}),w.length>0&&c.jsx("div",{className:"complexity-warnings",children:w.map((C,x)=>c.jsxs("div",{className:"complexity-warning",children:[c.jsx("span",{className:"warning-icon",children:""}),c.jsx("span",{children:C})]},x))}),d==="very_complex"&&c.jsxs("div",{className:"complexity-suggestion",children:[c.jsx("strong",{children:"Tip:"}),' Consider using "Flatten Artwork" to simplify this design before editing.']})]}),c.jsx("style",{jsx:!0,children:`
        .complexity-badge {
          display: inline-block;
          font-size: 0.75rem;
        }

        .complexity-badge-toggle {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.25rem 0.5rem;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 4px;
          cursor: pointer;
          font-size: 0.75rem;
          color: #475569;
          transition: all 0.15s ease;
        }

        .complexity-badge-toggle:hover {
          background: #f1f5f9;
        }

        .complexity-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          flex-shrink: 0;
        }

        .complexity-label {
          font-weight: 600;
        }

        .complexity-segments {
          color: #94a3b8;
        }

        .complexity-chevron {
          font-size: 0.6rem;
          color: #94a3b8;
        }

        .complexity-details {
          margin-top: 0.5rem;
          padding: 0.75rem;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 6px;
        }

        .complexity-stats {
          display: flex;
          gap: 1rem;
          margin-bottom: 0.5rem;
        }

        .stat {
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .stat-label {
          font-size: 0.65rem;
          color: #94a3b8;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .stat-value {
          font-size: 1rem;
          font-weight: 600;
          color: #1e293b;
        }

        .complexity-warnings {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        .complexity-warning {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.375rem 0.5rem;
          background: #fef3c7;
          border-radius: 4px;
          font-size: 0.7rem;
          color: #92400e;
        }

        .warning-icon {
          font-size: 0.8rem;
        }

        .complexity-suggestion {
          margin-top: 0.5rem;
          padding: 0.5rem;
          background: #dbeafe;
          border-radius: 4px;
          font-size: 0.7rem;
          color: #1e40af;
        }

        .complexity-badge-compact {
          display: inline-block;
          padding: 0.125rem 0.375rem;
          font-size: 0.65rem;
          font-weight: 600;
          color: white;
          border-radius: 3px;
          text-transform: uppercase;
          letter-spacing: 0.03em;
        }
      `})]})}var FL={exports:{}};(function(e){(function(){function t(){var n=this;this.versionnumber="1.2.6",this.imageToSVG=function(r,i,s){s=n.checkoptions(s),n.loadImage(r,function(a){i(n.imagedataToSVG(n.getImgdata(a),s))},s)},this.imagedataToSVG=function(r,i){i=n.checkoptions(i);var s=n.imagedataToTracedata(r,i);return n.getsvgstring(s,i)},this.imageToTracedata=function(r,i,s){s=n.checkoptions(s),n.loadImage(r,function(a){i(n.imagedataToTracedata(n.getImgdata(a),s))},s)},this.imagedataToTracedata=function(r,i){i=n.checkoptions(i);var s=n.colorquantization(r,i);if(i.layering===0)for(var a={layers:[],palette:s.palette,width:s.array[0].length-2,height:s.array.length-2},o=0;o<s.palette.length;o++){var u=n.batchtracepaths(n.internodes(n.pathscan(n.layeringstep(s,o),i.pathomit),i),i.ltres,i.qtres);a.layers.push(u)}else{var h=n.layering(s);i.layercontainerid&&n.drawLayers(h,n.specpalette,i.scale,i.layercontainerid);var d=n.batchpathscan(h,i.pathomit),p=n.batchinternodes(d,i),a={layers:n.batchtracelayers(p,i.ltres,i.qtres),palette:s.palette,width:r.width,height:r.height}}return a},this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.checkoptions=function(r){r=r||{},typeof r=="string"&&(r=r.toLowerCase(),n.optionpresets[r]?r=n.optionpresets[r]:r={});for(var i=Object.keys(n.optionpresets.default),s=0;s<i.length;s++)r.hasOwnProperty(i[s])||(r[i[s]]=n.optionpresets.default[i[s]]);return r},this.colorquantization=function(r,i){var s=[],a=0,o,u,h,d=[],p=r.width*r.height,m,g,v,w,C;if(r.data.length<p*4){for(var x=new Uint8ClampedArray(p*4),k=0;k<p;k++)x[k*4]=r.data[k*3],x[k*4+1]=r.data[k*3+1],x[k*4+2]=r.data[k*3+2],x[k*4+3]=255;r.data=x}for(g=0;g<r.height+2;g++)for(s[g]=[],m=0;m<r.width+2;m++)s[g][m]=-1;for(i.pal?C=i.pal:i.colorsampling===0?C=n.generatepalette(i.numberofcolors):i.colorsampling===1?C=n.samplepalette(i.numberofcolors,r):C=n.samplepalette2(i.numberofcolors,r),i.blurradius>0&&(r=n.blur(r,i.blurradius,i.blurdelta)),w=0;w<i.colorquantcycles;w++){if(w>0)for(v=0;v<C.length;v++)d[v].n>0&&(C[v]={r:Math.floor(d[v].r/d[v].n),g:Math.floor(d[v].g/d[v].n),b:Math.floor(d[v].b/d[v].n),a:Math.floor(d[v].a/d[v].n)}),d[v].n/p<i.mincolorratio&&w<i.colorquantcycles-1&&(C[v]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(m=0;m<C.length;m++)d[m]={r:0,g:0,b:0,a:0,n:0};for(g=0;g<r.height;g++)for(m=0;m<r.width;m++){for(a=(g*r.width+m)*4,h=0,u=1024,v=0;v<C.length;v++)o=Math.abs(C[v].r-r.data[a])+Math.abs(C[v].g-r.data[a+1])+Math.abs(C[v].b-r.data[a+2])+Math.abs(C[v].a-r.data[a+3]),o<u&&(u=o,h=v);d[h].r+=r.data[a],d[h].g+=r.data[a+1],d[h].b+=r.data[a+2],d[h].a+=r.data[a+3],d[h].n++,s[g+1][m+1]=h}}return{array:s,palette:C}},this.samplepalette=function(r,i){for(var s,a=[],o=0;o<r;o++)s=Math.floor(Math.random()*i.data.length/4)*4,a.push({r:i.data[s],g:i.data[s+1],b:i.data[s+2],a:i.data[s+3]});return a},this.samplepalette2=function(r,i){for(var s,a=[],o=Math.ceil(Math.sqrt(r)),u=Math.ceil(r/o),h=i.width/(o+1),d=i.height/(u+1),p=0;p<u;p++)for(var m=0;m<o&&a.length!==r;m++)s=Math.floor((p+1)*d*i.width+(m+1)*h)*4,a.push({r:i.data[s],g:i.data[s+1],b:i.data[s+2],a:i.data[s+3]});return a},this.generatepalette=function(r){var i=[],s,a,o;if(r<8)for(var u=Math.floor(255/(r-1)),h=0;h<r;h++)i.push({r:h*u,g:h*u,b:h*u,a:255});else{var d=Math.floor(Math.pow(r,.3333333333333333)),p=Math.floor(255/(d-1)),m=r-d*d*d;for(s=0;s<d;s++)for(a=0;a<d;a++)for(o=0;o<d;o++)i.push({r:s*p,g:a*p,b:o*p,a:255});for(s=0;s<m;s++)i.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return i},this.layering=function(r){var i=[],s=0,a=r.array.length,o=r.array[0].length,u,h,d,p,m,g,v,w,C,x,k;for(k=0;k<r.palette.length;k++)for(i[k]=[],x=0;x<a;x++)for(i[k][x]=[],C=0;C<o;C++)i[k][x][C]=0;for(x=1;x<a-1;x++)for(C=1;C<o-1;C++)s=r.array[x][C],u=r.array[x-1][C-1]===s?1:0,h=r.array[x-1][C]===s?1:0,d=r.array[x-1][C+1]===s?1:0,p=r.array[x][C-1]===s?1:0,m=r.array[x][C+1]===s?1:0,g=r.array[x+1][C-1]===s?1:0,v=r.array[x+1][C]===s?1:0,w=r.array[x+1][C+1]===s?1:0,i[s][x+1][C+1]=1+m*2+w*4+v*8,p||(i[s][x+1][C]=2+v*4+g*8),h||(i[s][x][C+1]=0+d*2+m*4+8),u||(i[s][x][C]=0+h*2+4+p*8);return i},this.layeringstep=function(r,i){var s=[],a=r.array.length,o=r.array[0].length,u,h;for(h=0;h<a;h++)for(s[h]=[],u=0;u<o;u++)s[h][u]=0;for(h=1;h<a;h++)for(u=1;u<o;u++)s[h][u]=(r.array[h-1][u-1]===i?1:0)+(r.array[h-1][u]===i?2:0)+(r.array[h][u-1]===i?8:0)+(r.array[h][u]===i?4:0);return s},this.pointinpoly=function(r,i){for(var s=!1,a=0,o=i.length-1;a<i.length;o=a++)s=i[a].y>r.y!=i[o].y>r.y&&r.x<(i[o].x-i[a].x)*(r.y-i[a].y)/(i[o].y-i[a].y)+i[a].x?!s:s;return s},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.pathscan=function(r,i){for(var s=[],a=0,o=0,u=0,h=0,d=r[0].length,p=r.length,m=0,g=!0,v=!1,w,C=0;C<p;C++)for(var x=0;x<d;x++)if(r[C][x]==4||r[C][x]==11)for(u=x,h=C,s[a]={},s[a].points=[],s[a].boundingbox=[u,h,u,h],s[a].holechildren=[],g=!1,o=0,v=r[C][x]==11,m=1;!g;){if(s[a].points[o]={},s[a].points[o].x=u-1,s[a].points[o].y=h-1,s[a].points[o].t=r[h][u],u-1<s[a].boundingbox[0]&&(s[a].boundingbox[0]=u-1),u-1>s[a].boundingbox[2]&&(s[a].boundingbox[2]=u-1),h-1<s[a].boundingbox[1]&&(s[a].boundingbox[1]=h-1),h-1>s[a].boundingbox[3]&&(s[a].boundingbox[3]=h-1),w=n.pathscan_combined_lookup[r[h][u]][m],r[h][u]=w[0],m=w[1],u+=w[2],h+=w[3],u-1===s[a].points[0].x&&h-1===s[a].points[0].y)if(g=!0,s[a].points.length<i)s.pop();else{if(s[a].isholepath=!!v,v){for(var k=0,A=[-1,-1,d+1,p+1],j=0;j<a;j++)!s[j].isholepath&&n.boundingboxincludes(s[j].boundingbox,s[a].boundingbox)&&n.boundingboxincludes(A,s[j].boundingbox)&&n.pointinpoly(s[a].points[0],s[j].points)&&(k=j,A=s[j].boundingbox);s[k].holechildren.push(a)}a++}o++}return s},this.boundingboxincludes=function(r,i){return r[0]<i[0]&&r[1]<i[1]&&r[2]>i[2]&&r[3]>i[3]},this.batchpathscan=function(r,i){var s=[];for(var a in r)r.hasOwnProperty(a)&&(s[a]=n.pathscan(r[a],i));return s},this.internodes=function(r,i){var s=[],a=0,o=0,u=0,h=0,d=0,p,m;for(p=0;p<r.length;p++)for(s[p]={},s[p].points=[],s[p].boundingbox=r[p].boundingbox,s[p].holechildren=r[p].holechildren,s[p].isholepath=r[p].isholepath,a=r[p].points.length,m=0;m<a;m++)o=(m+1)%a,u=(m+2)%a,h=(m-1+a)%a,d=(m-2+a)%a,i.rightangleenhance&&n.testrightangle(r[p],d,h,m,o,u)&&(s[p].points.length>0&&(s[p].points[s[p].points.length-1].linesegment=n.getdirection(s[p].points[s[p].points.length-1].x,s[p].points[s[p].points.length-1].y,r[p].points[m].x,r[p].points[m].y)),s[p].points.push({x:r[p].points[m].x,y:r[p].points[m].y,linesegment:n.getdirection(r[p].points[m].x,r[p].points[m].y,(r[p].points[m].x+r[p].points[o].x)/2,(r[p].points[m].y+r[p].points[o].y)/2)})),s[p].points.push({x:(r[p].points[m].x+r[p].points[o].x)/2,y:(r[p].points[m].y+r[p].points[o].y)/2,linesegment:n.getdirection((r[p].points[m].x+r[p].points[o].x)/2,(r[p].points[m].y+r[p].points[o].y)/2,(r[p].points[o].x+r[p].points[u].x)/2,(r[p].points[o].y+r[p].points[u].y)/2)});return s},this.testrightangle=function(r,i,s,a,o,u){return r.points[a].x===r.points[i].x&&r.points[a].x===r.points[s].x&&r.points[a].y===r.points[o].y&&r.points[a].y===r.points[u].y||r.points[a].y===r.points[i].y&&r.points[a].y===r.points[s].y&&r.points[a].x===r.points[o].x&&r.points[a].x===r.points[u].x},this.getdirection=function(r,i,s,a){var o=8;return r<s?i<a?o=1:i>a?o=7:o=0:r>s?i<a?o=3:i>a?o=5:o=4:i<a?o=2:i>a?o=6:o=8,o},this.batchinternodes=function(r,i){var s=[];for(var a in r)r.hasOwnProperty(a)&&(s[a]=n.internodes(r[a],i));return s},this.tracepath=function(r,i,s){var a=0,o,u,h,d={};for(d.segments=[],d.boundingbox=r.boundingbox,d.holechildren=r.holechildren,d.isholepath=r.isholepath;a<r.points.length;){for(o=r.points[a].linesegment,u=-1,h=a+1;(r.points[h].linesegment===o||r.points[h].linesegment===u||u===-1)&&h<r.points.length-1;)r.points[h].linesegment!==o&&u===-1&&(u=r.points[h].linesegment),h++;h===r.points.length-1&&(h=0),d.segments=d.segments.concat(n.fitseq(r,i,s,a,h)),h>0?a=h:a=r.points.length}return d},this.fitseq=function(r,i,s,a,o){if(o>r.points.length||o<0)return[];var u=a,h=0,d=!0,p,m,g,v=o-a;v<0&&(v+=r.points.length);for(var w=(r.points[o].x-r.points[a].x)/v,C=(r.points[o].y-r.points[a].y)/v,x=(a+1)%r.points.length,k;x!=o;)k=x-a,k<0&&(k+=r.points.length),p=r.points[a].x+w*k,m=r.points[a].y+C*k,g=(r.points[x].x-p)*(r.points[x].x-p)+(r.points[x].y-m)*(r.points[x].y-m),g>i&&(d=!1),g>h&&(u=x,h=g),x=(x+1)%r.points.length;if(d)return[{type:"L",x1:r.points[a].x,y1:r.points[a].y,x2:r.points[o].x,y2:r.points[o].y}];var A=u;d=!0,h=0;var j=(A-a)/v,I=(1-j)*(1-j),E=2*(1-j)*j,U=j*j,D=(I*r.points[a].x+U*r.points[o].x-r.points[A].x)/-E,R=(I*r.points[a].y+U*r.points[o].y-r.points[A].y)/-E;for(x=a+1;x!=o;)j=(x-a)/v,I=(1-j)*(1-j),E=2*(1-j)*j,U=j*j,p=I*r.points[a].x+E*D+U*r.points[o].x,m=I*r.points[a].y+E*R+U*r.points[o].y,g=(r.points[x].x-p)*(r.points[x].x-p)+(r.points[x].y-m)*(r.points[x].y-m),g>s&&(d=!1),g>h&&(u=x,h=g),x=(x+1)%r.points.length;if(d)return[{type:"Q",x1:r.points[a].x,y1:r.points[a].y,x2:D,y2:R,x3:r.points[o].x,y3:r.points[o].y}];var X=A;return n.fitseq(r,i,s,a,X).concat(n.fitseq(r,i,s,X,o))},this.batchtracepaths=function(r,i,s){var a=[];for(var o in r)r.hasOwnProperty(o)&&a.push(n.tracepath(r[o],i,s));return a},this.batchtracelayers=function(r,i,s){var a=[];for(var o in r)r.hasOwnProperty(o)&&(a[o]=n.batchtracepaths(r[o],i,s));return a},this.roundtodec=function(r,i){return+r.toFixed(i)},this.svgpathstring=function(r,i,s,a){var o=r.layers[i],u=o[s],h="",d;if(a.linefilter&&u.segments.length<3)return h;if(h="<path "+(a.desc?'desc="l '+i+" p "+s+'" ':"")+n.tosvgcolorstr(r.palette[i],a)+'d="',a.roundcoords===-1){for(h+="M "+u.segments[0].x1*a.scale+" "+u.segments[0].y1*a.scale+" ",d=0;d<u.segments.length;d++)h+=u.segments[d].type+" "+u.segments[d].x2*a.scale+" "+u.segments[d].y2*a.scale+" ",u.segments[d].hasOwnProperty("x3")&&(h+=u.segments[d].x3*a.scale+" "+u.segments[d].y3*a.scale+" ");h+="Z "}else{for(h+="M "+n.roundtodec(u.segments[0].x1*a.scale,a.roundcoords)+" "+n.roundtodec(u.segments[0].y1*a.scale,a.roundcoords)+" ",d=0;d<u.segments.length;d++)h+=u.segments[d].type+" "+n.roundtodec(u.segments[d].x2*a.scale,a.roundcoords)+" "+n.roundtodec(u.segments[d].y2*a.scale,a.roundcoords)+" ",u.segments[d].hasOwnProperty("x3")&&(h+=n.roundtodec(u.segments[d].x3*a.scale,a.roundcoords)+" "+n.roundtodec(u.segments[d].y3*a.scale,a.roundcoords)+" ");h+="Z "}for(var p=0;p<u.holechildren.length;p++){var m=o[u.holechildren[p]];if(a.roundcoords===-1)for(m.segments[m.segments.length-1].hasOwnProperty("x3")?h+="M "+m.segments[m.segments.length-1].x3*a.scale+" "+m.segments[m.segments.length-1].y3*a.scale+" ":h+="M "+m.segments[m.segments.length-1].x2*a.scale+" "+m.segments[m.segments.length-1].y2*a.scale+" ",d=m.segments.length-1;d>=0;d--)h+=m.segments[d].type+" ",m.segments[d].hasOwnProperty("x3")&&(h+=m.segments[d].x2*a.scale+" "+m.segments[d].y2*a.scale+" "),h+=m.segments[d].x1*a.scale+" "+m.segments[d].y1*a.scale+" ";else for(m.segments[m.segments.length-1].hasOwnProperty("x3")?h+="M "+n.roundtodec(m.segments[m.segments.length-1].x3*a.scale)+" "+n.roundtodec(m.segments[m.segments.length-1].y3*a.scale)+" ":h+="M "+n.roundtodec(m.segments[m.segments.length-1].x2*a.scale)+" "+n.roundtodec(m.segments[m.segments.length-1].y2*a.scale)+" ",d=m.segments.length-1;d>=0;d--)h+=m.segments[d].type+" ",m.segments[d].hasOwnProperty("x3")&&(h+=n.roundtodec(m.segments[d].x2*a.scale)+" "+n.roundtodec(m.segments[d].y2*a.scale)+" "),h+=n.roundtodec(m.segments[d].x1*a.scale)+" "+n.roundtodec(m.segments[d].y1*a.scale)+" ";h+="Z "}if(h+='" />',a.lcpr||a.qcpr){for(d=0;d<u.segments.length;d++)u.segments[d].hasOwnProperty("x3")&&a.qcpr&&(h+='<circle cx="'+u.segments[d].x2*a.scale+'" cy="'+u.segments[d].y2*a.scale+'" r="'+a.qcpr+'" fill="cyan" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<circle cx="'+u.segments[d].x3*a.scale+'" cy="'+u.segments[d].y3*a.scale+'" r="'+a.qcpr+'" fill="white" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<line x1="'+u.segments[d].x1*a.scale+'" y1="'+u.segments[d].y1*a.scale+'" x2="'+u.segments[d].x2*a.scale+'" y2="'+u.segments[d].y2*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />',h+='<line x1="'+u.segments[d].x2*a.scale+'" y1="'+u.segments[d].y2*a.scale+'" x2="'+u.segments[d].x3*a.scale+'" y2="'+u.segments[d].y3*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />'),!u.segments[d].hasOwnProperty("x3")&&a.lcpr&&(h+='<circle cx="'+u.segments[d].x2*a.scale+'" cy="'+u.segments[d].y2*a.scale+'" r="'+a.lcpr+'" fill="white" stroke-width="'+a.lcpr*.2+'" stroke="black" />');for(var p=0;p<u.holechildren.length;p++){var m=o[u.holechildren[p]];for(d=0;d<m.segments.length;d++)m.segments[d].hasOwnProperty("x3")&&a.qcpr&&(h+='<circle cx="'+m.segments[d].x2*a.scale+'" cy="'+m.segments[d].y2*a.scale+'" r="'+a.qcpr+'" fill="cyan" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<circle cx="'+m.segments[d].x3*a.scale+'" cy="'+m.segments[d].y3*a.scale+'" r="'+a.qcpr+'" fill="white" stroke-width="'+a.qcpr*.2+'" stroke="black" />',h+='<line x1="'+m.segments[d].x1*a.scale+'" y1="'+m.segments[d].y1*a.scale+'" x2="'+m.segments[d].x2*a.scale+'" y2="'+m.segments[d].y2*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />',h+='<line x1="'+m.segments[d].x2*a.scale+'" y1="'+m.segments[d].y2*a.scale+'" x2="'+m.segments[d].x3*a.scale+'" y2="'+m.segments[d].y3*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />'),!m.segments[d].hasOwnProperty("x3")&&a.lcpr&&(h+='<circle cx="'+m.segments[d].x2*a.scale+'" cy="'+m.segments[d].y2*a.scale+'" r="'+a.lcpr+'" fill="white" stroke-width="'+a.lcpr*.2+'" stroke="black" />')}}return h},this.getsvgstring=function(r,i){i=n.checkoptions(i);for(var s=r.width*i.scale,a=r.height*i.scale,o="<svg "+(i.viewbox?'viewBox="0 0 '+s+" "+a+'" ':'width="'+s+'" height="'+a+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+n.versionnumber+'" >',u=0;u<r.layers.length;u++)for(var h=0;h<r.layers[u].length;h++)r.layers[u][h].isholepath||(o+=n.svgpathstring(r,u,h,i));return o+="</svg>",o},this.compareNumbers=function(r,i){return r-i},this.torgbastr=function(r){return"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"},this.tosvgcolorstr=function(r,i){return'fill="rgb('+r.r+","+r.g+","+r.b+')" stroke="rgb('+r.r+","+r.g+","+r.b+')" stroke-width="'+i.strokewidth+'" opacity="'+r.a/255+'" '},this.appendSVGString=function(r,i){var s;i?(s=document.getElementById(i),s||(s=document.createElement("div"),s.id=i,document.body.appendChild(s))):(s=document.createElement("div"),document.body.appendChild(s)),s.innerHTML+=r},this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.blur=function(r,i,s){var a,o,u,h,d,p,m,g,v,w,C={width:r.width,height:r.height,data:[]};if(i=Math.floor(i),i<1)return r;i>5&&(i=5),s=Math.abs(s),s>1024&&(s=1024);var x=n.gks[i-1];for(o=0;o<r.height;o++)for(a=0;a<r.width;a++){for(p=0,m=0,g=0,v=0,w=0,u=-i;u<i+1;u++)a+u>0&&a+u<r.width&&(d=(o*r.width+a+u)*4,p+=r.data[d]*x[u+i],m+=r.data[d+1]*x[u+i],g+=r.data[d+2]*x[u+i],v+=r.data[d+3]*x[u+i],w+=x[u+i]);d=(o*r.width+a)*4,C.data[d]=Math.floor(p/w),C.data[d+1]=Math.floor(m/w),C.data[d+2]=Math.floor(g/w),C.data[d+3]=Math.floor(v/w)}var k=new Uint8ClampedArray(C.data);for(o=0;o<r.height;o++)for(a=0;a<r.width;a++){for(p=0,m=0,g=0,v=0,w=0,u=-i;u<i+1;u++)o+u>0&&o+u<r.height&&(d=((o+u)*r.width+a)*4,p+=k[d]*x[u+i],m+=k[d+1]*x[u+i],g+=k[d+2]*x[u+i],v+=k[d+3]*x[u+i],w+=x[u+i]);d=(o*r.width+a)*4,C.data[d]=Math.floor(p/w),C.data[d+1]=Math.floor(m/w),C.data[d+2]=Math.floor(g/w),C.data[d+3]=Math.floor(v/w)}for(o=0;o<r.height;o++)for(a=0;a<r.width;a++)d=(o*r.width+a)*4,h=Math.abs(C.data[d]-r.data[d])+Math.abs(C.data[d+1]-r.data[d+1])+Math.abs(C.data[d+2]-r.data[d+2])+Math.abs(C.data[d+3]-r.data[d+3]),h>s&&(C.data[d]=r.data[d],C.data[d+1]=r.data[d+1],C.data[d+2]=r.data[d+2],C.data[d+3]=r.data[d+3]);return C},this.loadImage=function(r,i,s){var a=new Image;s&&s.corsenabled&&(a.crossOrigin="Anonymous"),a.onload=function(){var o=document.createElement("canvas");o.width=a.width,o.height=a.height;var u=o.getContext("2d");u.drawImage(a,0,0),i(o)},a.src=r},this.getImgdata=function(r){var i=r.getContext("2d");return i.getImageData(0,0,r.width,r.height)},this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}],this.drawLayers=function(r,i,s,a){s=s||1;var o,u,h,d,p,m;a?(m=document.getElementById(a),m||(m=document.createElement("div"),m.id=a,document.body.appendChild(m))):(m=document.createElement("div"),document.body.appendChild(m));for(p in r)if(r.hasOwnProperty(p)){o=r[p][0].length,u=r[p].length;var g=document.createElement("canvas");g.width=o*s,g.height=u*s;var v=g.getContext("2d");for(d=0;d<u;d++)for(h=0;h<o;h++)v.fillStyle=n.torgbastr(i[r[p][d][h]%i.length]),v.fillRect(h*s,d*s,s,s);m.appendChild(g)}}}e.exports=new t})()})(FL);var DTe=FL.exports;const zTe=yl(DTe),BL=4096,FTe=25,bj={fast:{colorsampling:2,numberofcolors:24,mincolorratio:0,colorquantcycles:1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,blurradius:0,blurdelta:20,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0},clean:{colorsampling:1,numberofcolors:32,mincolorratio:0,colorquantcycles:3,ltres:.5,qtres:.5,pathomit:4,rightangleenhance:!0,blurradius:1,blurdelta:20,strokewidth:1,linefilter:!1,scale:1,roundcoords:2,viewbox:!1,desc:!1,lcpr:0,qcpr:0}};function BTe(e,t,n,r,i,s){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-i,2)+Math.pow(n-s,2))}function UL(e,t,n){let r=null,i=1/0;for(const s of pi){const a=BTe(e,t,n,s.R,s.G,s.B);a<i&&(i=a,r=s)}return r}function UTe(e,t=128){const n=e.data,r=new Uint8ClampedArray(n.length),i=new Map;for(let s=0;s<n.length;s+=4){const a=n[s],o=n[s+1],u=n[s+2];if(n[s+3]<t){r[s]=255,r[s+1]=255,r[s+2]=255,r[s+3]=0;continue}const d=`${a},${o},${u}`;let p=i.get(d);p||(p=UL(a,o,u),i.set(d,p)),r[s]=p.R,r[s+1]=p.G,r[s+2]=p.B,r[s+3]=255}return console.log(`[FLATTEN] Quantized to ${i.size} unique colors mapped to TPV palette`),new ImageData(r,e.width,e.height)}async function HTe(e,t=BL){return new Promise((n,r)=>{const a=new DOMParser().parseFromString(e,"image/svg+xml").documentElement;let o,u;const h=a.getAttribute("viewBox");if(h){const k=h.split(/\s+/).map(Number);o=k[2],u=k[3]}else o=parseFloat(a.getAttribute("width"))||1e3,u=parseFloat(a.getAttribute("height"))||1e3;const d=t/Math.max(o,u),p=Math.round(o*d),m=Math.round(u*d);console.log(`[FLATTEN] Rendering SVG ${o}x${u} to canvas ${p}x${m}`);const g=document.createElement("canvas");g.width=p,g.height=m;const v=g.getContext("2d");v.fillStyle="#ffffff",v.fillRect(0,0,p,m);const w=new Image,C=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),x=URL.createObjectURL(C);w.onload=()=>{v.drawImage(w,0,0,p,m),URL.revokeObjectURL(x),n({canvas:g,width:p,height:m,originalWidth:o,originalHeight:u})},w.onerror=()=>{URL.revokeObjectURL(x),r(new Error("Failed to load SVG for rasterization"))},w.src=x})}function WTe(e,t=FTe){const r=new DOMParser().parseFromString(e,"image/svg+xml"),s=r.documentElement.querySelectorAll("path");let a=0;return s.forEach(o=>{try{const u=o.getAttribute("d");if(!u)return;const h=u.match(/-?\d+\.?\d*/g);if(!h||h.length<4){o.remove(),a++;return}const d=h.map(Number);let p=1/0,m=-1/0,g=1/0,v=-1/0;for(let k=0;k<d.length-1;k+=2){const A=d[k],j=d[k+1];p=Math.min(p,A),m=Math.max(m,A),g=Math.min(g,j),v=Math.max(v,j)}const w=m-p,C=v-g;w*C<t&&(o.remove(),a++)}catch{}}),a>0&&console.log(`[FLATTEN] Removed ${a} small paths (speckle cleanup)`),new XMLSerializer().serializeToString(r)}function VTe(e,t,n){const i=new DOMParser().parseFromString(e,"image/svg+xml"),s=i.documentElement,a=s.getAttribute("width"),o=s.getAttribute("height");console.log(`[FLATTEN] structureSvg - canvas: ${t}x${n}, existing: ${a}x${o}`);const u=a?parseFloat(a):t,h=o?parseFloat(o):n;return s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("viewBox",`0 0 ${u} ${h}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("data-flattened","true"),s.setAttribute("data-flatten-date",new Date().toISOString()),console.log(`[FLATTEN] Final viewBox: 0 0 ${u} ${h}`),new XMLSerializer().serializeToString(i)}async function GTe(e,t={}){const{quality:n="fast",resolution:r=BL,quantize:i=!0,onProgress:s=()=>{}}=t,a=Date.now(),o={quality:n,resolution:r,quantized:i,originalSize:e.length,finalSize:0,processingTime:0};try{s(5),console.log(`[FLATTEN] Starting flatten (quality: ${n}, resolution: ${r})`),s(10);const{canvas:u,width:h,height:d,originalWidth:p,originalHeight:m}=await HTe(e,r),g=u.getContext("2d");s(20);let v=g.getImageData(0,0,h,d);i&&(s(30),v=UTe(v),g.putImageData(v,0,0)),s(50);const w=bj[n]||bj.fast,C=zTe.imagedataToSVG(v,w);s(80);let x=WTe(C);return s(90),x=VTe(x,h,d),s(100),o.finalSize=x.length,o.processingTime=Date.now()-a,console.log(`[FLATTEN] Complete in ${o.processingTime}ms`),console.log(`[FLATTEN] Size: ${o.originalSize} to ${o.finalSize} bytes`),{svg:x,stats:o}}catch(u){throw console.error("[FLATTEN] Error:",u),u}}function Kb(e){return e.includes('data-flattened="true"')}function qTe(e){const r=new DOMParser().parseFromString(e,"image/svg+xml").documentElement,i=new Map;r.querySelectorAll("path, rect, circle, ellipse, polygon").forEach(h=>{let d=h.getAttribute("fill");if(!d){const p=h.getAttribute("style");if(p){const m=p.match(/fill:\s*([^;]+)/);m&&(d=m[1].trim())}}if(d&&d!=="none"&&d!=="transparent"){if(d=d.toLowerCase(),d.startsWith("rgb")){const m=d.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);m&&(d="#"+[m[1],m[2],m[3]].map(g=>parseInt(g).toString(16).padStart(2,"0")).join(""))}const p=i.get(d)||0;i.set(d,p+1)}});const a=Array.from(i.values()).reduce((h,d)=>h+d,0),o=[],u=new Map;return i.forEach((h,d)=>{const p=YTe(d),m=a>0?Math.round(h/a*100):0;p&&(o.push({targetColor:{hex:d,areaPct:m},originalColor:{hex:d},blendColor:{hex:p.hex},chosenRecipe:{components:[{code:p.code,name:p.name,hex:p.hex,pct:100}],hex:p.hex},tpvCode:p.code,tpvName:p.name}),u.set(d,{blendHex:p.hex}))}),o.sort((h,d)=>d.targetColor.areaPct-h.targetColor.areaPct),console.log(`[FLATTEN] Built ${o.length} recipes from flattened SVG`),{recipes:o,colorMapping:u}}function YTe(e){const t=e.replace("#",""),n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return UL(n,r,i)}var XTe={exports:{}},Yp={exports:{}},vj;function KTe(){return vj||(vj=1,function(e,t){(function(n,r){r(t)})(Za,function(n){var r=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],i=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],s="-----------------------------------------------------------------------------------------------------------------------------------------------------",a="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},u="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",h={5:u,"5module":u+" export import",6:u+" const class extends export import super"},d=/^in(stanceof)?$/,p=new RegExp("["+a+"]"),m=new RegExp("["+a+s+"]");function g(y,O){for(var ee=65536,le=0;le<O.length;le+=2){if(ee+=O[le],ee>y)return!1;if(ee+=O[le+1],ee>=y)return!0}return!1}function v(y,O){return y<65?y===36:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&p.test(String.fromCharCode(y)):O===!1?!1:g(y,i)}function w(y,O){return y<48?y===36:y<58?!0:y<65?!1:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&m.test(String.fromCharCode(y)):O===!1?!1:g(y,i)||g(y,r)}var C=function(O,ee){ee===void 0&&(ee={}),this.label=O,this.keyword=ee.keyword,this.beforeExpr=!!ee.beforeExpr,this.startsExpr=!!ee.startsExpr,this.isLoop=!!ee.isLoop,this.isAssign=!!ee.isAssign,this.prefix=!!ee.prefix,this.postfix=!!ee.postfix,this.binop=ee.binop||null,this.updateContext=null};function x(y,O){return new C(y,{beforeExpr:!0,binop:O})}var k={beforeExpr:!0},A={startsExpr:!0},j={};function I(y,O){return O===void 0&&(O={}),O.keyword=y,j[y]=new C(y,O)}var E={num:new C("num",A),regexp:new C("regexp",A),string:new C("string",A),name:new C("name",A),privateId:new C("privateId",A),eof:new C("eof"),bracketL:new C("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new C("]"),braceL:new C("{",{beforeExpr:!0,startsExpr:!0}),braceR:new C("}"),parenL:new C("(",{beforeExpr:!0,startsExpr:!0}),parenR:new C(")"),comma:new C(",",k),semi:new C(";",k),colon:new C(":",k),dot:new C("."),question:new C("?",k),questionDot:new C("?."),arrow:new C("=>",k),template:new C("template"),invalidTemplate:new C("invalidTemplate"),ellipsis:new C("...",k),backQuote:new C("`",A),dollarBraceL:new C("${",{beforeExpr:!0,startsExpr:!0}),eq:new C("=",{beforeExpr:!0,isAssign:!0}),assign:new C("_=",{beforeExpr:!0,isAssign:!0}),incDec:new C("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new C("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:x("||",1),logicalAND:x("&&",2),bitwiseOR:x("|",3),bitwiseXOR:x("^",4),bitwiseAND:x("&",5),equality:x("==/!=/===/!==",6),relational:x("</>/<=/>=",7),bitShift:x("<</>>/>>>",8),plusMin:new C("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:x("%",10),star:x("*",10),slash:x("/",10),starstar:new C("**",{beforeExpr:!0}),coalesce:x("??",1),_break:I("break"),_case:I("case",k),_catch:I("catch"),_continue:I("continue"),_debugger:I("debugger"),_default:I("default",k),_do:I("do",{isLoop:!0,beforeExpr:!0}),_else:I("else",k),_finally:I("finally"),_for:I("for",{isLoop:!0}),_function:I("function",A),_if:I("if"),_return:I("return",k),_switch:I("switch"),_throw:I("throw",k),_try:I("try"),_var:I("var"),_const:I("const"),_while:I("while",{isLoop:!0}),_with:I("with"),_new:I("new",{beforeExpr:!0,startsExpr:!0}),_this:I("this",A),_super:I("super",A),_class:I("class",A),_extends:I("extends",k),_export:I("export"),_import:I("import",A),_null:I("null",A),_true:I("true",A),_false:I("false",A),_in:I("in",{beforeExpr:!0,binop:7}),_instanceof:I("instanceof",{beforeExpr:!0,binop:7}),_typeof:I("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:I("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:I("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},U=/\r\n?|\n|\u2028|\u2029/,D=new RegExp(U.source,"g");function R(y){return y===10||y===13||y===8232||y===8233}function X(y,O,ee){ee===void 0&&(ee=y.length);for(var le=O;le<ee;le++){var Ce=y.charCodeAt(le);if(R(Ce))return le<ee-1&&Ce===13&&y.charCodeAt(le+1)===10?le+2:le+1}return-1}var ce=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ie=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ge=Object.prototype,H=ge.hasOwnProperty,ye=ge.toString,je=Object.hasOwn||function(y,O){return H.call(y,O)},ke=Array.isArray||function(y){return ye.call(y)==="[object Array]"},Fe=Object.create(null);function xe(y){return Fe[y]||(Fe[y]=new RegExp("^(?:"+y.replace(/ /g,"|")+")$"))}function Me(y){return y<=65535?String.fromCharCode(y):(y-=65536,String.fromCharCode((y>>10)+55296,(y&1023)+56320))}var _e=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ne=function(O,ee){this.line=O,this.column=ee};Ne.prototype.offset=function(O){return new Ne(this.line,this.column+O)};var st=function(O,ee,le){this.start=ee,this.end=le,O.sourceFile!==null&&(this.source=O.sourceFile)};function nt(y,O){for(var ee=1,le=0;;){var Ce=X(y,le,O);if(Ce<0)return new Ne(ee,O-le);++ee,le=Ce}}var Ue={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ct=!1;function he(y){var O={};for(var ee in Ue)O[ee]=y&&je(y,ee)?y[ee]:Ue[ee];if(O.ecmaVersion==="latest"?O.ecmaVersion=1e8:O.ecmaVersion==null?(!ct&&typeof console=="object"&&console.warn&&(ct=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),O.ecmaVersion=11):O.ecmaVersion>=2015&&(O.ecmaVersion-=2009),O.allowReserved==null&&(O.allowReserved=O.ecmaVersion<5),(!y||y.allowHashBang==null)&&(O.allowHashBang=O.ecmaVersion>=14),ke(O.onToken)){var le=O.onToken;O.onToken=function(Ce){return le.push(Ce)}}return ke(O.onComment)&&(O.onComment=oe(O,O.onComment)),O}function oe(y,O){return function(ee,le,Ce,et,it,bt){var xt={type:ee?"Block":"Line",value:le,start:Ce,end:et};y.locations&&(xt.loc=new st(this,it,bt)),y.ranges&&(xt.range=[Ce,et]),O.push(xt)}}var We=1,Oe=2,ht=4,Pt=8,St=16,G=32,qe=64,ae=128,M=256,L=512,J=We|Oe|M;function pe(y,O){return Oe|(y?ht:0)|(O?Pt:0)}var ve=0,me=1,Le=2,Xe=3,De=4,l=5,f=function(O,ee,le){this.options=O=he(O),this.sourceFile=O.sourceFile,this.keywords=xe(h[O.ecmaVersion>=6?6:O.sourceType==="module"?"5module":5]);var Ce="";O.allowReserved!==!0&&(Ce=o[O.ecmaVersion>=6?6:O.ecmaVersion===5?5:3],O.sourceType==="module"&&(Ce+=" await")),this.reservedWords=xe(Ce);var et=(Ce?Ce+" ":"")+o.strict;this.reservedWordsStrict=xe(et),this.reservedWordsStrictBind=xe(et+" "+o.strictBind),this.input=String(ee),this.containsEsc=!1,le?(this.pos=le,this.lineStart=this.input.lastIndexOf(`
`,le-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(U).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=E.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=O.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&O.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(We),this.regexpState=null,this.privateNameStack=[]},b={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};f.prototype.parse=function(){var O=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(O)},b.inFunction.get=function(){return(this.currentVarScope().flags&Oe)>0},b.inGenerator.get=function(){return(this.currentVarScope().flags&Pt)>0},b.inAsync.get=function(){return(this.currentVarScope().flags&ht)>0},b.canAwait.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var O=this.scopeStack[y],ee=O.flags;if(ee&(M|L))return!1;if(ee&Oe)return(ee&ht)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},b.allowSuper.get=function(){var y=this.currentThisScope(),O=y.flags;return(O&qe)>0||this.options.allowSuperOutsideMethod},b.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ae)>0},b.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},b.allowNewDotTarget.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var O=this.scopeStack[y],ee=O.flags;if(ee&(M|L)||ee&Oe&&!(ee&St))return!0}return!1},b.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&M)>0},f.extend=function(){for(var O=[],ee=arguments.length;ee--;)O[ee]=arguments[ee];for(var le=this,Ce=0;Ce<O.length;Ce++)le=O[Ce](le);return le},f.parse=function(O,ee){return new this(ee,O).parse()},f.parseExpressionAt=function(O,ee,le){var Ce=new this(le,O,ee);return Ce.nextToken(),Ce.parseExpression()},f.tokenizer=function(O,ee){return new this(ee,O)},Object.defineProperties(f.prototype,b);var _=f.prototype,S=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;_.strictDirective=function(y){if(this.options.ecmaVersion<5)return!1;for(;;){ie.lastIndex=y,y+=ie.exec(this.input)[0].length;var O=S.exec(this.input.slice(y));if(!O)return!1;if((O[1]||O[2])==="use strict"){ie.lastIndex=y+O[0].length;var ee=ie.exec(this.input),le=ee.index+ee[0].length,Ce=this.input.charAt(le);return Ce===";"||Ce==="}"||U.test(ee[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Ce)||Ce==="!"&&this.input.charAt(le+1)==="=")}y+=O[0].length,ie.lastIndex=y,y+=ie.exec(this.input)[0].length,this.input[y]===";"&&y++}},_.eat=function(y){return this.type===y?(this.next(),!0):!1},_.isContextual=function(y){return this.type===E.name&&this.value===y&&!this.containsEsc},_.eatContextual=function(y){return this.isContextual(y)?(this.next(),!0):!1},_.expectContextual=function(y){this.eatContextual(y)||this.unexpected()},_.canInsertSemicolon=function(){return this.type===E.eof||this.type===E.braceR||U.test(this.input.slice(this.lastTokEnd,this.start))},_.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},_.semicolon=function(){!this.eat(E.semi)&&!this.insertSemicolon()&&this.unexpected()},_.afterTrailingComma=function(y,O){if(this.type===y)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),O||this.next(),!0},_.expect=function(y){this.eat(y)||this.unexpected()},_.unexpected=function(y){this.raise(y??this.start,"Unexpected token")};var P=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};_.checkPatternErrors=function(y,O){if(y){y.trailingComma>-1&&this.raiseRecoverable(y.trailingComma,"Comma is not permitted after the rest element");var ee=O?y.parenthesizedAssign:y.parenthesizedBind;ee>-1&&this.raiseRecoverable(ee,O?"Assigning to rvalue":"Parenthesized pattern")}},_.checkExpressionErrors=function(y,O){if(!y)return!1;var ee=y.shorthandAssign,le=y.doubleProto;if(!O)return ee>=0||le>=0;ee>=0&&this.raise(ee,"Shorthand property assignments are valid only in destructuring patterns"),le>=0&&this.raiseRecoverable(le,"Redefinition of __proto__ property")},_.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},_.isSimpleAssignTarget=function(y){return y.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(y.expression):y.type==="Identifier"||y.type==="MemberExpression"};var T=f.prototype;T.parseTopLevel=function(y){var O=Object.create(null);for(y.body||(y.body=[]);this.type!==E.eof;){var ee=this.parseStatement(null,!0,O);y.body.push(ee)}if(this.inModule)for(var le=0,Ce=Object.keys(this.undefinedExports);le<Ce.length;le+=1){var et=Ce[le];this.raiseRecoverable(this.undefinedExports[et].start,"Export '"+et+"' is not defined")}return this.adaptDirectivePrologue(y.body),this.next(),y.sourceType=this.options.sourceType,this.finishNode(y,"Program")};var N={kind:"loop"},$={kind:"switch"};T.isLet=function(y){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ie.lastIndex=this.pos;var O=ie.exec(this.input),ee=this.pos+O[0].length,le=this.input.charCodeAt(ee);if(le===91||le===92)return!0;if(y)return!1;if(le===123||le>55295&&le<56320)return!0;if(v(le,!0)){for(var Ce=ee+1;w(le=this.input.charCodeAt(Ce),!0);)++Ce;if(le===92||le>55295&&le<56320)return!0;var et=this.input.slice(ee,Ce);if(!d.test(et))return!0}return!1},T.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ie.lastIndex=this.pos;var y=ie.exec(this.input),O=this.pos+y[0].length,ee;return!U.test(this.input.slice(this.pos,O))&&this.input.slice(O,O+8)==="function"&&(O+8===this.input.length||!(w(ee=this.input.charCodeAt(O+8))||ee>55295&&ee<56320))},T.isUsingKeyword=function(y,O){if(this.options.ecmaVersion<17||!this.isContextual(y?"await":"using"))return!1;ie.lastIndex=this.pos;var ee=ie.exec(this.input),le=this.pos+ee[0].length;if(U.test(this.input.slice(this.pos,le)))return!1;if(y){var Ce=le+5,et;if(this.input.slice(le,Ce)!=="using"||Ce===this.input.length||w(et=this.input.charCodeAt(Ce))||et>55295&&et<56320)return!1;ie.lastIndex=Ce;var it=ie.exec(this.input);if(it&&U.test(this.input.slice(Ce,Ce+it[0].length)))return!1}if(O){var bt=le+2,xt;if(this.input.slice(le,bt)==="of"&&(bt===this.input.length||!w(xt=this.input.charCodeAt(bt))&&!(xt>55295&&xt<56320)))return!1}var Zt=this.input.charCodeAt(le);return v(Zt,!0)||Zt===92},T.isAwaitUsing=function(y){return this.isUsingKeyword(!0,y)},T.isUsing=function(y){return this.isUsingKeyword(!1,y)},T.parseStatement=function(y,O,ee){var le=this.type,Ce=this.startNode(),et;switch(this.isLet(y)&&(le=E._var,et="let"),le){case E._break:case E._continue:return this.parseBreakContinueStatement(Ce,le.keyword);case E._debugger:return this.parseDebuggerStatement(Ce);case E._do:return this.parseDoStatement(Ce);case E._for:return this.parseForStatement(Ce);case E._function:return y&&(this.strict||y!=="if"&&y!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Ce,!1,!y);case E._class:return y&&this.unexpected(),this.parseClass(Ce,!0);case E._if:return this.parseIfStatement(Ce);case E._return:return this.parseReturnStatement(Ce);case E._switch:return this.parseSwitchStatement(Ce);case E._throw:return this.parseThrowStatement(Ce);case E._try:return this.parseTryStatement(Ce);case E._const:case E._var:return et=et||this.value,y&&et!=="var"&&this.unexpected(),this.parseVarStatement(Ce,et);case E._while:return this.parseWhileStatement(Ce);case E._with:return this.parseWithStatement(Ce);case E.braceL:return this.parseBlock(!0,Ce);case E.semi:return this.parseEmptyStatement(Ce);case E._export:case E._import:if(this.options.ecmaVersion>10&&le===E._import){ie.lastIndex=this.pos;var it=ie.exec(this.input),bt=this.pos+it[0].length,xt=this.input.charCodeAt(bt);if(xt===40||xt===46)return this.parseExpressionStatement(Ce,this.parseExpression())}return this.options.allowImportExportEverywhere||(O||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),le===E._import?this.parseImport(Ce):this.parseExport(Ce,ee);default:if(this.isAsyncFunction())return y&&this.unexpected(),this.next(),this.parseFunctionStatement(Ce,!0,!y);var Zt=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(Zt)return O&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),Zt==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(Ce,!1,Zt),this.semicolon(),this.finishNode(Ce,"VariableDeclaration");var sn=this.value,Pn=this.parseExpression();return le===E.name&&Pn.type==="Identifier"&&this.eat(E.colon)?this.parseLabeledStatement(Ce,sn,Pn,y):this.parseExpressionStatement(Ce,Pn)}},T.parseBreakContinueStatement=function(y,O){var ee=O==="break";this.next(),this.eat(E.semi)||this.insertSemicolon()?y.label=null:this.type!==E.name?this.unexpected():(y.label=this.parseIdent(),this.semicolon());for(var le=0;le<this.labels.length;++le){var Ce=this.labels[le];if((y.label==null||Ce.name===y.label.name)&&(Ce.kind!=null&&(ee||Ce.kind==="loop")||y.label&&ee))break}return le===this.labels.length&&this.raise(y.start,"Unsyntactic "+O),this.finishNode(y,ee?"BreakStatement":"ContinueStatement")},T.parseDebuggerStatement=function(y){return this.next(),this.semicolon(),this.finishNode(y,"DebuggerStatement")},T.parseDoStatement=function(y){return this.next(),this.labels.push(N),y.body=this.parseStatement("do"),this.labels.pop(),this.expect(E._while),y.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(E.semi):this.semicolon(),this.finishNode(y,"DoWhileStatement")},T.parseForStatement=function(y){this.next();var O=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(N),this.enterScope(0),this.expect(E.parenL),this.type===E.semi)return O>-1&&this.unexpected(O),this.parseFor(y,null);var ee=this.isLet();if(this.type===E._var||this.type===E._const||ee){var le=this.startNode(),Ce=ee?"let":this.value;return this.next(),this.parseVar(le,!0,Ce),this.finishNode(le,"VariableDeclaration"),this.parseForAfterInit(y,le,O)}var et=this.isContextual("let"),it=!1,bt=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(bt){var xt=this.startNode();return this.next(),bt==="await using"&&this.next(),this.parseVar(xt,!0,bt),this.finishNode(xt,"VariableDeclaration"),this.parseForAfterInit(y,xt,O)}var Zt=this.containsEsc,sn=new P,Pn=this.start,sr=O>-1?this.parseExprSubscripts(sn,"await"):this.parseExpression(!0,sn);return this.type===E._in||(it=this.options.ecmaVersion>=6&&this.isContextual("of"))?(O>-1?(this.type===E._in&&this.unexpected(O),y.await=!0):it&&this.options.ecmaVersion>=8&&(sr.start===Pn&&!Zt&&sr.type==="Identifier"&&sr.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(y.await=!1)),et&&it&&this.raise(sr.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(sr,!1,sn),this.checkLValPattern(sr),this.parseForIn(y,sr)):(this.checkExpressionErrors(sn,!0),O>-1&&this.unexpected(O),this.parseFor(y,sr))},T.parseForAfterInit=function(y,O,ee){return(this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&O.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===E._in?ee>-1&&this.unexpected(ee):y.await=ee>-1),this.parseForIn(y,O)):(ee>-1&&this.unexpected(ee),this.parseFor(y,O))},T.parseFunctionStatement=function(y,O,ee){return this.next(),this.parseFunction(y,q|(ee?0:Q),!1,O)},T.parseIfStatement=function(y){return this.next(),y.test=this.parseParenExpression(),y.consequent=this.parseStatement("if"),y.alternate=this.eat(E._else)?this.parseStatement("if"):null,this.finishNode(y,"IfStatement")},T.parseReturnStatement=function(y){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(E.semi)||this.insertSemicolon()?y.argument=null:(y.argument=this.parseExpression(),this.semicolon()),this.finishNode(y,"ReturnStatement")},T.parseSwitchStatement=function(y){this.next(),y.discriminant=this.parseParenExpression(),y.cases=[],this.expect(E.braceL),this.labels.push($),this.enterScope(0);for(var O,ee=!1;this.type!==E.braceR;)if(this.type===E._case||this.type===E._default){var le=this.type===E._case;O&&this.finishNode(O,"SwitchCase"),y.cases.push(O=this.startNode()),O.consequent=[],this.next(),le?O.test=this.parseExpression():(ee&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),ee=!0,O.test=null),this.expect(E.colon)}else O||this.unexpected(),O.consequent.push(this.parseStatement(null));return this.exitScope(),O&&this.finishNode(O,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(y,"SwitchStatement")},T.parseThrowStatement=function(y){return this.next(),U.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),y.argument=this.parseExpression(),this.semicolon(),this.finishNode(y,"ThrowStatement")};var F=[];T.parseCatchClauseParam=function(){var y=this.parseBindingAtom(),O=y.type==="Identifier";return this.enterScope(O?G:0),this.checkLValPattern(y,O?De:Le),this.expect(E.parenR),y},T.parseTryStatement=function(y){if(this.next(),y.block=this.parseBlock(),y.handler=null,this.type===E._catch){var O=this.startNode();this.next(),this.eat(E.parenL)?O.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),O.param=null,this.enterScope(0)),O.body=this.parseBlock(!1),this.exitScope(),y.handler=this.finishNode(O,"CatchClause")}return y.finalizer=this.eat(E._finally)?this.parseBlock():null,!y.handler&&!y.finalizer&&this.raise(y.start,"Missing catch or finally clause"),this.finishNode(y,"TryStatement")},T.parseVarStatement=function(y,O,ee){return this.next(),this.parseVar(y,!1,O,ee),this.semicolon(),this.finishNode(y,"VariableDeclaration")},T.parseWhileStatement=function(y){return this.next(),y.test=this.parseParenExpression(),this.labels.push(N),y.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(y,"WhileStatement")},T.parseWithStatement=function(y){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),y.object=this.parseParenExpression(),y.body=this.parseStatement("with"),this.finishNode(y,"WithStatement")},T.parseEmptyStatement=function(y){return this.next(),this.finishNode(y,"EmptyStatement")},T.parseLabeledStatement=function(y,O,ee,le){for(var Ce=0,et=this.labels;Ce<et.length;Ce+=1){var it=et[Ce];it.name===O&&this.raise(ee.start,"Label '"+O+"' is already declared")}for(var bt=this.type.isLoop?"loop":this.type===E._switch?"switch":null,xt=this.labels.length-1;xt>=0;xt--){var Zt=this.labels[xt];if(Zt.statementStart===y.start)Zt.statementStart=this.start,Zt.kind=bt;else break}return this.labels.push({name:O,kind:bt,statementStart:this.start}),y.body=this.parseStatement(le?le.indexOf("label")===-1?le+"label":le:"label"),this.labels.pop(),y.label=ee,this.finishNode(y,"LabeledStatement")},T.parseExpressionStatement=function(y,O){return y.expression=O,this.semicolon(),this.finishNode(y,"ExpressionStatement")},T.parseBlock=function(y,O,ee){for(y===void 0&&(y=!0),O===void 0&&(O=this.startNode()),O.body=[],this.expect(E.braceL),y&&this.enterScope(0);this.type!==E.braceR;){var le=this.parseStatement(null);O.body.push(le)}return ee&&(this.strict=!1),this.next(),y&&this.exitScope(),this.finishNode(O,"BlockStatement")},T.parseFor=function(y,O){return y.init=O,this.expect(E.semi),y.test=this.type===E.semi?null:this.parseExpression(),this.expect(E.semi),y.update=this.type===E.parenR?null:this.parseExpression(),this.expect(E.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,"ForStatement")},T.parseForIn=function(y,O){var ee=this.type===E._in;return this.next(),O.type==="VariableDeclaration"&&O.declarations[0].init!=null&&(!ee||this.options.ecmaVersion<8||this.strict||O.kind!=="var"||O.declarations[0].id.type!=="Identifier")&&this.raise(O.start,(ee?"for-in":"for-of")+" loop variable declaration may not have an initializer"),y.left=O,y.right=ee?this.parseExpression():this.parseMaybeAssign(),this.expect(E.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,ee?"ForInStatement":"ForOfStatement")},T.parseVar=function(y,O,ee,le){for(y.declarations=[],y.kind=ee;;){var Ce=this.startNode();if(this.parseVarId(Ce,ee),this.eat(E.eq)?Ce.init=this.parseMaybeAssign(O):!le&&ee==="const"&&!(this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!le&&(ee==="using"||ee==="await using")&&this.options.ecmaVersion>=17&&this.type!==E._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+ee+" declaration"):!le&&Ce.id.type!=="Identifier"&&!(O&&(this.type===E._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Ce.init=null,y.declarations.push(this.finishNode(Ce,"VariableDeclarator")),!this.eat(E.comma))break}return y},T.parseVarId=function(y,O){y.id=O==="using"||O==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(y.id,O==="var"?me:Le,!1)};var q=1,Q=2,K=4;T.parseFunction=function(y,O,ee,le,Ce){this.initFunction(y),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!le)&&(this.type===E.star&&O&Q&&this.unexpected(),y.generator=this.eat(E.star)),this.options.ecmaVersion>=8&&(y.async=!!le),O&q&&(y.id=O&K&&this.type!==E.name?null:this.parseIdent(),y.id&&!(O&Q)&&this.checkLValSimple(y.id,this.strict||y.generator||y.async?this.treatFunctionsAsVar?me:Le:Xe));var et=this.yieldPos,it=this.awaitPos,bt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(pe(y.async,y.generator)),O&q||(y.id=this.type===E.name?this.parseIdent():null),this.parseFunctionParams(y),this.parseFunctionBody(y,ee,!1,Ce),this.yieldPos=et,this.awaitPos=it,this.awaitIdentPos=bt,this.finishNode(y,O&q?"FunctionDeclaration":"FunctionExpression")},T.parseFunctionParams=function(y){this.expect(E.parenL),y.params=this.parseBindingList(E.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},T.parseClass=function(y,O){this.next();var ee=this.strict;this.strict=!0,this.parseClassId(y,O),this.parseClassSuper(y);var le=this.enterClassBody(),Ce=this.startNode(),et=!1;for(Ce.body=[],this.expect(E.braceL);this.type!==E.braceR;){var it=this.parseClassElement(y.superClass!==null);it&&(Ce.body.push(it),it.type==="MethodDefinition"&&it.kind==="constructor"?(et&&this.raiseRecoverable(it.start,"Duplicate constructor in the same class"),et=!0):it.key&&it.key.type==="PrivateIdentifier"&&W(le,it)&&this.raiseRecoverable(it.key.start,"Identifier '#"+it.key.name+"' has already been declared"))}return this.strict=ee,this.next(),y.body=this.finishNode(Ce,"ClassBody"),this.exitClassBody(),this.finishNode(y,O?"ClassDeclaration":"ClassExpression")},T.parseClassElement=function(y){if(this.eat(E.semi))return null;var O=this.options.ecmaVersion,ee=this.startNode(),le="",Ce=!1,et=!1,it="method",bt=!1;if(this.eatContextual("static")){if(O>=13&&this.eat(E.braceL))return this.parseClassStaticBlock(ee),ee;this.isClassElementNameStart()||this.type===E.star?bt=!0:le="static"}if(ee.static=bt,!le&&O>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===E.star)&&!this.canInsertSemicolon()?et=!0:le="async"),!le&&(O>=9||!et)&&this.eat(E.star)&&(Ce=!0),!le&&!et&&!Ce){var xt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?it=xt:le=xt)}if(le?(ee.computed=!1,ee.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),ee.key.name=le,this.finishNode(ee.key,"Identifier")):this.parseClassElementName(ee),O<13||this.type===E.parenL||it!=="method"||Ce||et){var Zt=!ee.static&&Y(ee,"constructor"),sn=Zt&&y;Zt&&it!=="method"&&this.raise(ee.key.start,"Constructor can't have get/set modifier"),ee.kind=Zt?"constructor":it,this.parseClassMethod(ee,Ce,et,sn)}else this.parseClassField(ee);return ee},T.isClassElementNameStart=function(){return this.type===E.name||this.type===E.privateId||this.type===E.num||this.type===E.string||this.type===E.bracketL||this.type.keyword},T.parseClassElementName=function(y){this.type===E.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),y.computed=!1,y.key=this.parsePrivateIdent()):this.parsePropertyName(y)},T.parseClassMethod=function(y,O,ee,le){var Ce=y.key;y.kind==="constructor"?(O&&this.raise(Ce.start,"Constructor can't be a generator"),ee&&this.raise(Ce.start,"Constructor can't be an async method")):y.static&&Y(y,"prototype")&&this.raise(Ce.start,"Classes may not have a static property named prototype");var et=y.value=this.parseMethod(O,ee,le);return y.kind==="get"&&et.params.length!==0&&this.raiseRecoverable(et.start,"getter should have no params"),y.kind==="set"&&et.params.length!==1&&this.raiseRecoverable(et.start,"setter should have exactly one param"),y.kind==="set"&&et.params[0].type==="RestElement"&&this.raiseRecoverable(et.params[0].start,"Setter cannot use rest params"),this.finishNode(y,"MethodDefinition")},T.parseClassField=function(y){return Y(y,"constructor")?this.raise(y.key.start,"Classes can't have a field named 'constructor'"):y.static&&Y(y,"prototype")&&this.raise(y.key.start,"Classes can't have a static field named 'prototype'"),this.eat(E.eq)?(this.enterScope(L|qe),y.value=this.parseMaybeAssign(),this.exitScope()):y.value=null,this.semicolon(),this.finishNode(y,"PropertyDefinition")},T.parseClassStaticBlock=function(y){y.body=[];var O=this.labels;for(this.labels=[],this.enterScope(M|qe);this.type!==E.braceR;){var ee=this.parseStatement(null);y.body.push(ee)}return this.next(),this.exitScope(),this.labels=O,this.finishNode(y,"StaticBlock")},T.parseClassId=function(y,O){this.type===E.name?(y.id=this.parseIdent(),O&&this.checkLValSimple(y.id,Le,!1)):(O===!0&&this.unexpected(),y.id=null)},T.parseClassSuper=function(y){y.superClass=this.eat(E._extends)?this.parseExprSubscripts(null,!1):null},T.enterClassBody=function(){var y={declared:Object.create(null),used:[]};return this.privateNameStack.push(y),y.declared},T.exitClassBody=function(){var y=this.privateNameStack.pop(),O=y.declared,ee=y.used;if(this.options.checkPrivateFields)for(var le=this.privateNameStack.length,Ce=le===0?null:this.privateNameStack[le-1],et=0;et<ee.length;++et){var it=ee[et];je(O,it.name)||(Ce?Ce.used.push(it):this.raiseRecoverable(it.start,"Private field '#"+it.name+"' must be declared in an enclosing class"))}};function W(y,O){var ee=O.key.name,le=y[ee],Ce="true";return O.type==="MethodDefinition"&&(O.kind==="get"||O.kind==="set")&&(Ce=(O.static?"s":"i")+O.kind),le==="iget"&&Ce==="iset"||le==="iset"&&Ce==="iget"||le==="sget"&&Ce==="sset"||le==="sset"&&Ce==="sget"?(y[ee]="true",!1):le?!0:(y[ee]=Ce,!1)}function Y(y,O){var ee=y.computed,le=y.key;return!ee&&(le.type==="Identifier"&&le.name===O||le.type==="Literal"&&le.value===O)}T.parseExportAllDeclaration=function(y,O){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(y.exported=this.parseModuleExportName(),this.checkExport(O,y.exported,this.lastTokStart)):y.exported=null),this.expectContextual("from"),this.type!==E.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ExportAllDeclaration")},T.parseExport=function(y,O){if(this.next(),this.eat(E.star))return this.parseExportAllDeclaration(y,O);if(this.eat(E._default))return this.checkExport(O,"default",this.lastTokStart),y.declaration=this.parseExportDefaultDeclaration(),this.finishNode(y,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())y.declaration=this.parseExportDeclaration(y),y.declaration.type==="VariableDeclaration"?this.checkVariableExport(O,y.declaration.declarations):this.checkExport(O,y.declaration.id,y.declaration.id.start),y.specifiers=[],y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[]);else{if(y.declaration=null,y.specifiers=this.parseExportSpecifiers(O),this.eatContextual("from"))this.type!==E.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause());else{for(var ee=0,le=y.specifiers;ee<le.length;ee+=1){var Ce=le[ee];this.checkUnreserved(Ce.local),this.checkLocalExport(Ce.local),Ce.local.type==="Literal"&&this.raise(Ce.local.start,"A string literal cannot be used as an exported binding without `from`.")}y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[])}this.semicolon()}return this.finishNode(y,"ExportNamedDeclaration")},T.parseExportDeclaration=function(y){return this.parseStatement(null)},T.parseExportDefaultDeclaration=function(){var y;if(this.type===E._function||(y=this.isAsyncFunction())){var O=this.startNode();return this.next(),y&&this.next(),this.parseFunction(O,q|K,!1,y)}else if(this.type===E._class){var ee=this.startNode();return this.parseClass(ee,"nullableID")}else{var le=this.parseMaybeAssign();return this.semicolon(),le}},T.checkExport=function(y,O,ee){y&&(typeof O!="string"&&(O=O.type==="Identifier"?O.name:O.value),je(y,O)&&this.raiseRecoverable(ee,"Duplicate export '"+O+"'"),y[O]=!0)},T.checkPatternExport=function(y,O){var ee=O.type;if(ee==="Identifier")this.checkExport(y,O,O.start);else if(ee==="ObjectPattern")for(var le=0,Ce=O.properties;le<Ce.length;le+=1){var et=Ce[le];this.checkPatternExport(y,et)}else if(ee==="ArrayPattern")for(var it=0,bt=O.elements;it<bt.length;it+=1){var xt=bt[it];xt&&this.checkPatternExport(y,xt)}else ee==="Property"?this.checkPatternExport(y,O.value):ee==="AssignmentPattern"?this.checkPatternExport(y,O.left):ee==="RestElement"&&this.checkPatternExport(y,O.argument)},T.checkVariableExport=function(y,O){if(y)for(var ee=0,le=O;ee<le.length;ee+=1){var Ce=le[ee];this.checkPatternExport(y,Ce.id)}},T.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},T.parseExportSpecifier=function(y){var O=this.startNode();return O.local=this.parseModuleExportName(),O.exported=this.eatContextual("as")?this.parseModuleExportName():O.local,this.checkExport(y,O.exported,O.exported.start),this.finishNode(O,"ExportSpecifier")},T.parseExportSpecifiers=function(y){var O=[],ee=!0;for(this.expect(E.braceL);!this.eat(E.braceR);){if(ee)ee=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;O.push(this.parseExportSpecifier(y))}return O},T.parseImport=function(y){return this.next(),this.type===E.string?(y.specifiers=F,y.source=this.parseExprAtom()):(y.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),y.source=this.type===E.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ImportDeclaration")},T.parseImportSpecifier=function(){var y=this.startNode();return y.imported=this.parseModuleExportName(),this.eatContextual("as")?y.local=this.parseIdent():(this.checkUnreserved(y.imported),y.local=y.imported),this.checkLValSimple(y.local,Le),this.finishNode(y,"ImportSpecifier")},T.parseImportDefaultSpecifier=function(){var y=this.startNode();return y.local=this.parseIdent(),this.checkLValSimple(y.local,Le),this.finishNode(y,"ImportDefaultSpecifier")},T.parseImportNamespaceSpecifier=function(){var y=this.startNode();return this.next(),this.expectContextual("as"),y.local=this.parseIdent(),this.checkLValSimple(y.local,Le),this.finishNode(y,"ImportNamespaceSpecifier")},T.parseImportSpecifiers=function(){var y=[],O=!0;if(this.type===E.name&&(y.push(this.parseImportDefaultSpecifier()),!this.eat(E.comma)))return y;if(this.type===E.star)return y.push(this.parseImportNamespaceSpecifier()),y;for(this.expect(E.braceL);!this.eat(E.braceR);){if(O)O=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;y.push(this.parseImportSpecifier())}return y},T.parseWithClause=function(){var y=[];if(!this.eat(E._with))return y;this.expect(E.braceL);for(var O={},ee=!0;!this.eat(E.braceR);){if(ee)ee=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;var le=this.parseImportAttribute(),Ce=le.key.type==="Identifier"?le.key.name:le.key.value;je(O,Ce)&&this.raiseRecoverable(le.key.start,"Duplicate attribute key '"+Ce+"'"),O[Ce]=!0,y.push(le)}return y},T.parseImportAttribute=function(){var y=this.startNode();return y.key=this.type===E.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(E.colon),this.type!==E.string&&this.unexpected(),y.value=this.parseExprAtom(),this.finishNode(y,"ImportAttribute")},T.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===E.string){var y=this.parseLiteral(this.value);return _e.test(y.value)&&this.raise(y.start,"An export name cannot include a lone surrogate."),y}return this.parseIdent(!0)},T.adaptDirectivePrologue=function(y){for(var O=0;O<y.length&&this.isDirectiveCandidate(y[O]);++O)y[O].directive=y[O].expression.raw.slice(1,-1)},T.isDirectiveCandidate=function(y){return this.options.ecmaVersion>=5&&y.type==="ExpressionStatement"&&y.expression.type==="Literal"&&typeof y.expression.value=="string"&&(this.input[y.start]==='"'||this.input[y.start]==="'")};var B=f.prototype;B.toAssignable=function(y,O,ee){if(this.options.ecmaVersion>=6&&y)switch(y.type){case"Identifier":this.inAsync&&y.name==="await"&&this.raise(y.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":y.type="ObjectPattern",ee&&this.checkPatternErrors(ee,!0);for(var le=0,Ce=y.properties;le<Ce.length;le+=1){var et=Ce[le];this.toAssignable(et,O),et.type==="RestElement"&&(et.argument.type==="ArrayPattern"||et.argument.type==="ObjectPattern")&&this.raise(et.argument.start,"Unexpected token")}break;case"Property":y.kind!=="init"&&this.raise(y.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(y.value,O);break;case"ArrayExpression":y.type="ArrayPattern",ee&&this.checkPatternErrors(ee,!0),this.toAssignableList(y.elements,O);break;case"SpreadElement":y.type="RestElement",this.toAssignable(y.argument,O),y.argument.type==="AssignmentPattern"&&this.raise(y.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":y.operator!=="="&&this.raise(y.left.end,"Only '=' operator can be used for specifying default value."),y.type="AssignmentPattern",delete y.operator,this.toAssignable(y.left,O);break;case"ParenthesizedExpression":this.toAssignable(y.expression,O,ee);break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!O)break;default:this.raise(y.start,"Assigning to rvalue")}else ee&&this.checkPatternErrors(ee,!0);return y},B.toAssignableList=function(y,O){for(var ee=y.length,le=0;le<ee;le++){var Ce=y[le];Ce&&this.toAssignable(Ce,O)}if(ee){var et=y[ee-1];this.options.ecmaVersion===6&&O&&et&&et.type==="RestElement"&&et.argument.type!=="Identifier"&&this.unexpected(et.argument.start)}return y},B.parseSpread=function(y){var O=this.startNode();return this.next(),O.argument=this.parseMaybeAssign(!1,y),this.finishNode(O,"SpreadElement")},B.parseRestBinding=function(){var y=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==E.name&&this.unexpected(),y.argument=this.parseBindingAtom(),this.finishNode(y,"RestElement")},B.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case E.bracketL:var y=this.startNode();return this.next(),y.elements=this.parseBindingList(E.bracketR,!0,!0),this.finishNode(y,"ArrayPattern");case E.braceL:return this.parseObj(!0)}return this.parseIdent()},B.parseBindingList=function(y,O,ee,le){for(var Ce=[],et=!0;!this.eat(y);)if(et?et=!1:this.expect(E.comma),O&&this.type===E.comma)Ce.push(null);else{if(ee&&this.afterTrailingComma(y))break;if(this.type===E.ellipsis){var it=this.parseRestBinding();this.parseBindingListItem(it),Ce.push(it),this.type===E.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(y);break}else Ce.push(this.parseAssignableListItem(le))}return Ce},B.parseAssignableListItem=function(y){var O=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(O),O},B.parseBindingListItem=function(y){return y},B.parseMaybeDefault=function(y,O,ee){if(ee=ee||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(E.eq))return ee;var le=this.startNodeAt(y,O);return le.left=ee,le.right=this.parseMaybeAssign(),this.finishNode(le,"AssignmentPattern")},B.checkLValSimple=function(y,O,ee){O===void 0&&(O=ve);var le=O!==ve;switch(y.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(y.name)&&this.raiseRecoverable(y.start,(le?"Binding ":"Assigning to ")+y.name+" in strict mode"),le&&(O===Le&&y.name==="let"&&this.raiseRecoverable(y.start,"let is disallowed as a lexically bound name"),ee&&(je(ee,y.name)&&this.raiseRecoverable(y.start,"Argument name clash"),ee[y.name]=!0),O!==l&&this.declareName(y.name,O,y.start));break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":le&&this.raiseRecoverable(y.start,"Binding member expression");break;case"ParenthesizedExpression":return le&&this.raiseRecoverable(y.start,"Binding parenthesized expression"),this.checkLValSimple(y.expression,O,ee);default:this.raise(y.start,(le?"Binding":"Assigning to")+" rvalue")}},B.checkLValPattern=function(y,O,ee){switch(O===void 0&&(O=ve),y.type){case"ObjectPattern":for(var le=0,Ce=y.properties;le<Ce.length;le+=1){var et=Ce[le];this.checkLValInnerPattern(et,O,ee)}break;case"ArrayPattern":for(var it=0,bt=y.elements;it<bt.length;it+=1){var xt=bt[it];xt&&this.checkLValInnerPattern(xt,O,ee)}break;default:this.checkLValSimple(y,O,ee)}},B.checkLValInnerPattern=function(y,O,ee){switch(O===void 0&&(O=ve),y.type){case"Property":this.checkLValInnerPattern(y.value,O,ee);break;case"AssignmentPattern":this.checkLValPattern(y.left,O,ee);break;case"RestElement":this.checkLValPattern(y.argument,O,ee);break;default:this.checkLValPattern(y,O,ee)}};var Z=function(O,ee,le,Ce,et){this.token=O,this.isExpr=!!ee,this.preserveSpace=!!le,this.override=Ce,this.generator=!!et},V={b_stat:new Z("{",!1),b_expr:new Z("{",!0),b_tmpl:new Z("${",!1),p_stat:new Z("(",!1),p_expr:new Z("(",!0),q_tmpl:new Z("`",!0,!0,function(y){return y.tryReadTemplateToken()}),f_stat:new Z("function",!1),f_expr:new Z("function",!0),f_expr_gen:new Z("function",!0,!1,null,!0),f_gen:new Z("function",!1,!1,null,!0)},ne=f.prototype;ne.initialContext=function(){return[V.b_stat]},ne.curContext=function(){return this.context[this.context.length-1]},ne.braceIsBlock=function(y){var O=this.curContext();return O===V.f_expr||O===V.f_stat?!0:y===E.colon&&(O===V.b_stat||O===V.b_expr)?!O.isExpr:y===E._return||y===E.name&&this.exprAllowed?U.test(this.input.slice(this.lastTokEnd,this.start)):y===E._else||y===E.semi||y===E.eof||y===E.parenR||y===E.arrow?!0:y===E.braceL?O===V.b_stat:y===E._var||y===E._const||y===E.name?!1:!this.exprAllowed},ne.inGeneratorContext=function(){for(var y=this.context.length-1;y>=1;y--){var O=this.context[y];if(O.token==="function")return O.generator}return!1},ne.updateContext=function(y){var O,ee=this.type;ee.keyword&&y===E.dot?this.exprAllowed=!1:(O=ee.updateContext)?O.call(this,y):this.exprAllowed=ee.beforeExpr},ne.overrideContext=function(y){this.curContext()!==y&&(this.context[this.context.length-1]=y)},E.parenR.updateContext=E.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var y=this.context.pop();y===V.b_stat&&this.curContext().token==="function"&&(y=this.context.pop()),this.exprAllowed=!y.isExpr},E.braceL.updateContext=function(y){this.context.push(this.braceIsBlock(y)?V.b_stat:V.b_expr),this.exprAllowed=!0},E.dollarBraceL.updateContext=function(){this.context.push(V.b_tmpl),this.exprAllowed=!0},E.parenL.updateContext=function(y){var O=y===E._if||y===E._for||y===E._with||y===E._while;this.context.push(O?V.p_stat:V.p_expr),this.exprAllowed=!0},E.incDec.updateContext=function(){},E._function.updateContext=E._class.updateContext=function(y){y.beforeExpr&&y!==E._else&&!(y===E.semi&&this.curContext()!==V.p_stat)&&!(y===E._return&&U.test(this.input.slice(this.lastTokEnd,this.start)))&&!((y===E.colon||y===E.braceL)&&this.curContext()===V.b_stat)?this.context.push(V.f_expr):this.context.push(V.f_stat),this.exprAllowed=!1},E.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},E.backQuote.updateContext=function(){this.curContext()===V.q_tmpl?this.context.pop():this.context.push(V.q_tmpl),this.exprAllowed=!1},E.star.updateContext=function(y){if(y===E._function){var O=this.context.length-1;this.context[O]===V.f_expr?this.context[O]=V.f_expr_gen:this.context[O]=V.f_gen}this.exprAllowed=!0},E.name.updateContext=function(y){var O=!1;this.options.ecmaVersion>=6&&y!==E.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(O=!0),this.exprAllowed=O};var z=f.prototype;z.checkPropClash=function(y,O,ee){if(!(this.options.ecmaVersion>=9&&y.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(y.computed||y.method||y.shorthand))){var le=y.key,Ce;switch(le.type){case"Identifier":Ce=le.name;break;case"Literal":Ce=String(le.value);break;default:return}var et=y.kind;if(this.options.ecmaVersion>=6){Ce==="__proto__"&&et==="init"&&(O.proto&&(ee?ee.doubleProto<0&&(ee.doubleProto=le.start):this.raiseRecoverable(le.start,"Redefinition of __proto__ property")),O.proto=!0);return}Ce="$"+Ce;var it=O[Ce];if(it){var bt;et==="init"?bt=this.strict&&it.init||it.get||it.set:bt=it.init||it[et],bt&&this.raiseRecoverable(le.start,"Redefinition of property")}else it=O[Ce]={init:!1,get:!1,set:!1};it[et]=!0}},z.parseExpression=function(y,O){var ee=this.start,le=this.startLoc,Ce=this.parseMaybeAssign(y,O);if(this.type===E.comma){var et=this.startNodeAt(ee,le);for(et.expressions=[Ce];this.eat(E.comma);)et.expressions.push(this.parseMaybeAssign(y,O));return this.finishNode(et,"SequenceExpression")}return Ce},z.parseMaybeAssign=function(y,O,ee){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(y);this.exprAllowed=!1}var le=!1,Ce=-1,et=-1,it=-1;O?(Ce=O.parenthesizedAssign,et=O.trailingComma,it=O.doubleProto,O.parenthesizedAssign=O.trailingComma=-1):(O=new P,le=!0);var bt=this.start,xt=this.startLoc;(this.type===E.parenL||this.type===E.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=y==="await");var Zt=this.parseMaybeConditional(y,O);if(ee&&(Zt=ee.call(this,Zt,bt,xt)),this.type.isAssign){var sn=this.startNodeAt(bt,xt);return sn.operator=this.value,this.type===E.eq&&(Zt=this.toAssignable(Zt,!1,O)),le||(O.parenthesizedAssign=O.trailingComma=O.doubleProto=-1),O.shorthandAssign>=Zt.start&&(O.shorthandAssign=-1),this.type===E.eq?this.checkLValPattern(Zt):this.checkLValSimple(Zt),sn.left=Zt,this.next(),sn.right=this.parseMaybeAssign(y),it>-1&&(O.doubleProto=it),this.finishNode(sn,"AssignmentExpression")}else le&&this.checkExpressionErrors(O,!0);return Ce>-1&&(O.parenthesizedAssign=Ce),et>-1&&(O.trailingComma=et),Zt},z.parseMaybeConditional=function(y,O){var ee=this.start,le=this.startLoc,Ce=this.parseExprOps(y,O);if(this.checkExpressionErrors(O))return Ce;if(this.eat(E.question)){var et=this.startNodeAt(ee,le);return et.test=Ce,et.consequent=this.parseMaybeAssign(),this.expect(E.colon),et.alternate=this.parseMaybeAssign(y),this.finishNode(et,"ConditionalExpression")}return Ce},z.parseExprOps=function(y,O){var ee=this.start,le=this.startLoc,Ce=this.parseMaybeUnary(O,!1,!1,y);return this.checkExpressionErrors(O)||Ce.start===ee&&Ce.type==="ArrowFunctionExpression"?Ce:this.parseExprOp(Ce,ee,le,-1,y)},z.parseExprOp=function(y,O,ee,le,Ce){var et=this.type.binop;if(et!=null&&(!Ce||this.type!==E._in)&&et>le){var it=this.type===E.logicalOR||this.type===E.logicalAND,bt=this.type===E.coalesce;bt&&(et=E.logicalAND.binop);var xt=this.value;this.next();var Zt=this.start,sn=this.startLoc,Pn=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,Ce),Zt,sn,et,Ce),sr=this.buildBinary(O,ee,y,Pn,xt,it||bt);return(it&&this.type===E.coalesce||bt&&(this.type===E.logicalOR||this.type===E.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(sr,O,ee,le,Ce)}return y},z.buildBinary=function(y,O,ee,le,Ce,et){le.type==="PrivateIdentifier"&&this.raise(le.start,"Private identifier can only be left side of binary expression");var it=this.startNodeAt(y,O);return it.left=ee,it.operator=Ce,it.right=le,this.finishNode(it,et?"LogicalExpression":"BinaryExpression")},z.parseMaybeUnary=function(y,O,ee,le){var Ce=this.start,et=this.startLoc,it;if(this.isContextual("await")&&this.canAwait)it=this.parseAwait(le),O=!0;else if(this.type.prefix){var bt=this.startNode(),xt=this.type===E.incDec;bt.operator=this.value,bt.prefix=!0,this.next(),bt.argument=this.parseMaybeUnary(null,!0,xt,le),this.checkExpressionErrors(y,!0),xt?this.checkLValSimple(bt.argument):this.strict&&bt.operator==="delete"&&te(bt.argument)?this.raiseRecoverable(bt.start,"Deleting local variable in strict mode"):bt.operator==="delete"&&se(bt.argument)?this.raiseRecoverable(bt.start,"Private fields can not be deleted"):O=!0,it=this.finishNode(bt,xt?"UpdateExpression":"UnaryExpression")}else if(!O&&this.type===E.privateId)(le||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),it=this.parsePrivateIdent(),this.type!==E._in&&this.unexpected();else{if(it=this.parseExprSubscripts(y,le),this.checkExpressionErrors(y))return it;for(;this.type.postfix&&!this.canInsertSemicolon();){var Zt=this.startNodeAt(Ce,et);Zt.operator=this.value,Zt.prefix=!1,Zt.argument=it,this.checkLValSimple(it),this.next(),it=this.finishNode(Zt,"UpdateExpression")}}if(!ee&&this.eat(E.starstar))if(O)this.unexpected(this.lastTokStart);else return this.buildBinary(Ce,et,it,this.parseMaybeUnary(null,!1,!1,le),"**",!1);else return it};function te(y){return y.type==="Identifier"||y.type==="ParenthesizedExpression"&&te(y.expression)}function se(y){return y.type==="MemberExpression"&&y.property.type==="PrivateIdentifier"||y.type==="ChainExpression"&&se(y.expression)||y.type==="ParenthesizedExpression"&&se(y.expression)}z.parseExprSubscripts=function(y,O){var ee=this.start,le=this.startLoc,Ce=this.parseExprAtom(y,O);if(Ce.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Ce;var et=this.parseSubscripts(Ce,ee,le,!1,O);return y&&et.type==="MemberExpression"&&(y.parenthesizedAssign>=et.start&&(y.parenthesizedAssign=-1),y.parenthesizedBind>=et.start&&(y.parenthesizedBind=-1),y.trailingComma>=et.start&&(y.trailingComma=-1)),et},z.parseSubscripts=function(y,O,ee,le,Ce){for(var et=this.options.ecmaVersion>=8&&y.type==="Identifier"&&y.name==="async"&&this.lastTokEnd===y.end&&!this.canInsertSemicolon()&&y.end-y.start===5&&this.potentialArrowAt===y.start,it=!1;;){var bt=this.parseSubscript(y,O,ee,le,et,it,Ce);if(bt.optional&&(it=!0),bt===y||bt.type==="ArrowFunctionExpression"){if(it){var xt=this.startNodeAt(O,ee);xt.expression=bt,bt=this.finishNode(xt,"ChainExpression")}return bt}y=bt}},z.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(E.arrow)},z.parseSubscriptAsyncArrow=function(y,O,ee,le){return this.parseArrowExpression(this.startNodeAt(y,O),ee,!0,le)},z.parseSubscript=function(y,O,ee,le,Ce,et,it){var bt=this.options.ecmaVersion>=11,xt=bt&&this.eat(E.questionDot);le&&xt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Zt=this.eat(E.bracketL);if(Zt||xt&&this.type!==E.parenL&&this.type!==E.backQuote||this.eat(E.dot)){var sn=this.startNodeAt(O,ee);sn.object=y,Zt?(sn.property=this.parseExpression(),this.expect(E.bracketR)):this.type===E.privateId&&y.type!=="Super"?sn.property=this.parsePrivateIdent():sn.property=this.parseIdent(this.options.allowReserved!=="never"),sn.computed=!!Zt,bt&&(sn.optional=xt),y=this.finishNode(sn,"MemberExpression")}else if(!le&&this.eat(E.parenL)){var Pn=new P,sr=this.yieldPos,ts=this.awaitPos,Ut=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var He=this.parseExprList(E.parenR,this.options.ecmaVersion>=8,!1,Pn);if(Ce&&!xt&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Pn,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=sr,this.awaitPos=ts,this.awaitIdentPos=Ut,this.parseSubscriptAsyncArrow(O,ee,He,it);this.checkExpressionErrors(Pn,!0),this.yieldPos=sr||this.yieldPos,this.awaitPos=ts||this.awaitPos,this.awaitIdentPos=Ut||this.awaitIdentPos;var kt=this.startNodeAt(O,ee);kt.callee=y,kt.arguments=He,bt&&(kt.optional=xt),y=this.finishNode(kt,"CallExpression")}else if(this.type===E.backQuote){(xt||et)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Ot=this.startNodeAt(O,ee);Ot.tag=y,Ot.quasi=this.parseTemplate({isTagged:!0}),y=this.finishNode(Ot,"TaggedTemplateExpression")}return y},z.parseExprAtom=function(y,O,ee){this.type===E.slash&&this.readRegexp();var le,Ce=this.potentialArrowAt===this.start;switch(this.type){case E._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),le=this.startNode(),this.next(),this.type===E.parenL&&!this.allowDirectSuper&&this.raise(le.start,"super() call outside constructor of a subclass"),this.type!==E.dot&&this.type!==E.bracketL&&this.type!==E.parenL&&this.unexpected(),this.finishNode(le,"Super");case E._this:return le=this.startNode(),this.next(),this.finishNode(le,"ThisExpression");case E.name:var et=this.start,it=this.startLoc,bt=this.containsEsc,xt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!bt&&xt.name==="async"&&!this.canInsertSemicolon()&&this.eat(E._function))return this.overrideContext(V.f_expr),this.parseFunction(this.startNodeAt(et,it),0,!1,!0,O);if(Ce&&!this.canInsertSemicolon()){if(this.eat(E.arrow))return this.parseArrowExpression(this.startNodeAt(et,it),[xt],!1,O);if(this.options.ecmaVersion>=8&&xt.name==="async"&&this.type===E.name&&!bt&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return xt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(E.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(et,it),[xt],!0,O)}return xt;case E.regexp:var Zt=this.value;return le=this.parseLiteral(Zt.value),le.regex={pattern:Zt.pattern,flags:Zt.flags},le;case E.num:case E.string:return this.parseLiteral(this.value);case E._null:case E._true:case E._false:return le=this.startNode(),le.value=this.type===E._null?null:this.type===E._true,le.raw=this.type.keyword,this.next(),this.finishNode(le,"Literal");case E.parenL:var sn=this.start,Pn=this.parseParenAndDistinguishExpression(Ce,O);return y&&(y.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Pn)&&(y.parenthesizedAssign=sn),y.parenthesizedBind<0&&(y.parenthesizedBind=sn)),Pn;case E.bracketL:return le=this.startNode(),this.next(),le.elements=this.parseExprList(E.bracketR,!0,!0,y),this.finishNode(le,"ArrayExpression");case E.braceL:return this.overrideContext(V.b_expr),this.parseObj(!1,y);case E._function:return le=this.startNode(),this.next(),this.parseFunction(le,0);case E._class:return this.parseClass(this.startNode(),!1);case E._new:return this.parseNew();case E.backQuote:return this.parseTemplate();case E._import:return this.options.ecmaVersion>=11?this.parseExprImport(ee):this.unexpected();default:return this.parseExprAtomDefault()}},z.parseExprAtomDefault=function(){this.unexpected()},z.parseExprImport=function(y){var O=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===E.parenL&&!y)return this.parseDynamicImport(O);if(this.type===E.dot){var ee=this.startNodeAt(O.start,O.loc&&O.loc.start);return ee.name="import",O.meta=this.finishNode(ee,"Identifier"),this.parseImportMeta(O)}else this.unexpected()},z.parseDynamicImport=function(y){if(this.next(),y.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(E.parenR)?y.options=null:(this.expect(E.comma),this.afterTrailingComma(E.parenR)?y.options=null:(y.options=this.parseMaybeAssign(),this.eat(E.parenR)||(this.expect(E.comma),this.afterTrailingComma(E.parenR)||this.unexpected())));else if(!this.eat(E.parenR)){var O=this.start;this.eat(E.comma)&&this.eat(E.parenR)?this.raiseRecoverable(O,"Trailing comma is not allowed in import()"):this.unexpected(O)}return this.finishNode(y,"ImportExpression")},z.parseImportMeta=function(y){this.next();var O=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="meta"&&this.raiseRecoverable(y.property.start,"The only valid meta property for import is 'import.meta'"),O&&this.raiseRecoverable(y.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(y.start,"Cannot use 'import.meta' outside a module"),this.finishNode(y,"MetaProperty")},z.parseLiteral=function(y){var O=this.startNode();return O.value=y,O.raw=this.input.slice(this.start,this.end),O.raw.charCodeAt(O.raw.length-1)===110&&(O.bigint=O.value!=null?O.value.toString():O.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(O,"Literal")},z.parseParenExpression=function(){this.expect(E.parenL);var y=this.parseExpression();return this.expect(E.parenR),y},z.shouldParseArrow=function(y){return!this.canInsertSemicolon()},z.parseParenAndDistinguishExpression=function(y,O){var ee=this.start,le=this.startLoc,Ce,et=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var it=this.start,bt=this.startLoc,xt=[],Zt=!0,sn=!1,Pn=new P,sr=this.yieldPos,ts=this.awaitPos,Ut;for(this.yieldPos=0,this.awaitPos=0;this.type!==E.parenR;)if(Zt?Zt=!1:this.expect(E.comma),et&&this.afterTrailingComma(E.parenR,!0)){sn=!0;break}else if(this.type===E.ellipsis){Ut=this.start,xt.push(this.parseParenItem(this.parseRestBinding())),this.type===E.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else xt.push(this.parseMaybeAssign(!1,Pn,this.parseParenItem));var He=this.lastTokEnd,kt=this.lastTokEndLoc;if(this.expect(E.parenR),y&&this.shouldParseArrow(xt)&&this.eat(E.arrow))return this.checkPatternErrors(Pn,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=sr,this.awaitPos=ts,this.parseParenArrowList(ee,le,xt,O);(!xt.length||sn)&&this.unexpected(this.lastTokStart),Ut&&this.unexpected(Ut),this.checkExpressionErrors(Pn,!0),this.yieldPos=sr||this.yieldPos,this.awaitPos=ts||this.awaitPos,xt.length>1?(Ce=this.startNodeAt(it,bt),Ce.expressions=xt,this.finishNodeAt(Ce,"SequenceExpression",He,kt)):Ce=xt[0]}else Ce=this.parseParenExpression();if(this.options.preserveParens){var Ot=this.startNodeAt(ee,le);return Ot.expression=Ce,this.finishNode(Ot,"ParenthesizedExpression")}else return Ce},z.parseParenItem=function(y){return y},z.parseParenArrowList=function(y,O,ee,le){return this.parseArrowExpression(this.startNodeAt(y,O),ee,!1,le)};var ue=[];z.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var y=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===E.dot){var O=this.startNodeAt(y.start,y.loc&&y.loc.start);O.name="new",y.meta=this.finishNode(O,"Identifier"),this.next();var ee=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="target"&&this.raiseRecoverable(y.property.start,"The only valid meta property for new is 'new.target'"),ee&&this.raiseRecoverable(y.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(y.start,"'new.target' can only be used in functions and class static block"),this.finishNode(y,"MetaProperty")}var le=this.start,Ce=this.startLoc;return y.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),le,Ce,!0,!1),this.eat(E.parenL)?y.arguments=this.parseExprList(E.parenR,this.options.ecmaVersion>=8,!1):y.arguments=ue,this.finishNode(y,"NewExpression")},z.parseTemplateElement=function(y){var O=y.isTagged,ee=this.startNode();return this.type===E.invalidTemplate?(O||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),ee.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):ee.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),ee.tail=this.type===E.backQuote,this.finishNode(ee,"TemplateElement")},z.parseTemplate=function(y){y===void 0&&(y={});var O=y.isTagged;O===void 0&&(O=!1);var ee=this.startNode();this.next(),ee.expressions=[];var le=this.parseTemplateElement({isTagged:O});for(ee.quasis=[le];!le.tail;)this.type===E.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(E.dollarBraceL),ee.expressions.push(this.parseExpression()),this.expect(E.braceR),ee.quasis.push(le=this.parseTemplateElement({isTagged:O}));return this.next(),this.finishNode(ee,"TemplateLiteral")},z.isAsyncProp=function(y){return!y.computed&&y.key.type==="Identifier"&&y.key.name==="async"&&(this.type===E.name||this.type===E.num||this.type===E.string||this.type===E.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===E.star)&&!U.test(this.input.slice(this.lastTokEnd,this.start))},z.parseObj=function(y,O){var ee=this.startNode(),le=!0,Ce={};for(ee.properties=[],this.next();!this.eat(E.braceR);){if(le)le=!1;else if(this.expect(E.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(E.braceR))break;var et=this.parseProperty(y,O);y||this.checkPropClash(et,Ce,O),ee.properties.push(et)}return this.finishNode(ee,y?"ObjectPattern":"ObjectExpression")},z.parseProperty=function(y,O){var ee=this.startNode(),le,Ce,et,it;if(this.options.ecmaVersion>=9&&this.eat(E.ellipsis))return y?(ee.argument=this.parseIdent(!1),this.type===E.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(ee,"RestElement")):(ee.argument=this.parseMaybeAssign(!1,O),this.type===E.comma&&O&&O.trailingComma<0&&(O.trailingComma=this.start),this.finishNode(ee,"SpreadElement"));this.options.ecmaVersion>=6&&(ee.method=!1,ee.shorthand=!1,(y||O)&&(et=this.start,it=this.startLoc),y||(le=this.eat(E.star)));var bt=this.containsEsc;return this.parsePropertyName(ee),!y&&!bt&&this.options.ecmaVersion>=8&&!le&&this.isAsyncProp(ee)?(Ce=!0,le=this.options.ecmaVersion>=9&&this.eat(E.star),this.parsePropertyName(ee)):Ce=!1,this.parsePropertyValue(ee,y,le,Ce,et,it,O,bt),this.finishNode(ee,"Property")},z.parseGetterSetter=function(y){var O=y.key.name;this.parsePropertyName(y),y.value=this.parseMethod(!1),y.kind=O;var ee=y.kind==="get"?0:1;if(y.value.params.length!==ee){var le=y.value.start;y.kind==="get"?this.raiseRecoverable(le,"getter should have no params"):this.raiseRecoverable(le,"setter should have exactly one param")}else y.kind==="set"&&y.value.params[0].type==="RestElement"&&this.raiseRecoverable(y.value.params[0].start,"Setter cannot use rest params")},z.parsePropertyValue=function(y,O,ee,le,Ce,et,it,bt){(ee||le)&&this.type===E.colon&&this.unexpected(),this.eat(E.colon)?(y.value=O?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,it),y.kind="init"):this.options.ecmaVersion>=6&&this.type===E.parenL?(O&&this.unexpected(),y.method=!0,y.value=this.parseMethod(ee,le),y.kind="init"):!O&&!bt&&this.options.ecmaVersion>=5&&!y.computed&&y.key.type==="Identifier"&&(y.key.name==="get"||y.key.name==="set")&&this.type!==E.comma&&this.type!==E.braceR&&this.type!==E.eq?((ee||le)&&this.unexpected(),this.parseGetterSetter(y)):this.options.ecmaVersion>=6&&!y.computed&&y.key.type==="Identifier"?((ee||le)&&this.unexpected(),this.checkUnreserved(y.key),y.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Ce),O?y.value=this.parseMaybeDefault(Ce,et,this.copyNode(y.key)):this.type===E.eq&&it?(it.shorthandAssign<0&&(it.shorthandAssign=this.start),y.value=this.parseMaybeDefault(Ce,et,this.copyNode(y.key))):y.value=this.copyNode(y.key),y.kind="init",y.shorthand=!0):this.unexpected()},z.parsePropertyName=function(y){if(this.options.ecmaVersion>=6){if(this.eat(E.bracketL))return y.computed=!0,y.key=this.parseMaybeAssign(),this.expect(E.bracketR),y.key;y.computed=!1}return y.key=this.type===E.num||this.type===E.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},z.initFunction=function(y){y.id=null,this.options.ecmaVersion>=6&&(y.generator=y.expression=!1),this.options.ecmaVersion>=8&&(y.async=!1)},z.parseMethod=function(y,O,ee){var le=this.startNode(),Ce=this.yieldPos,et=this.awaitPos,it=this.awaitIdentPos;return this.initFunction(le),this.options.ecmaVersion>=6&&(le.generator=y),this.options.ecmaVersion>=8&&(le.async=!!O),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(pe(O,le.generator)|qe|(ee?ae:0)),this.expect(E.parenL),le.params=this.parseBindingList(E.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(le,!1,!0,!1),this.yieldPos=Ce,this.awaitPos=et,this.awaitIdentPos=it,this.finishNode(le,"FunctionExpression")},z.parseArrowExpression=function(y,O,ee,le){var Ce=this.yieldPos,et=this.awaitPos,it=this.awaitIdentPos;return this.enterScope(pe(ee,!1)|St),this.initFunction(y),this.options.ecmaVersion>=8&&(y.async=!!ee),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,y.params=this.toAssignableList(O,!0),this.parseFunctionBody(y,!0,!1,le),this.yieldPos=Ce,this.awaitPos=et,this.awaitIdentPos=it,this.finishNode(y,"ArrowFunctionExpression")},z.parseFunctionBody=function(y,O,ee,le){var Ce=O&&this.type!==E.braceL,et=this.strict,it=!1;if(Ce)y.body=this.parseMaybeAssign(le),y.expression=!0,this.checkParams(y,!1);else{var bt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(y.params);(!et||bt)&&(it=this.strictDirective(this.end),it&&bt&&this.raiseRecoverable(y.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var xt=this.labels;this.labels=[],it&&(this.strict=!0),this.checkParams(y,!et&&!it&&!O&&!ee&&this.isSimpleParamList(y.params)),this.strict&&y.id&&this.checkLValSimple(y.id,l),y.body=this.parseBlock(!1,void 0,it&&!et),y.expression=!1,this.adaptDirectivePrologue(y.body.body),this.labels=xt}this.exitScope()},z.isSimpleParamList=function(y){for(var O=0,ee=y;O<ee.length;O+=1){var le=ee[O];if(le.type!=="Identifier")return!1}return!0},z.checkParams=function(y,O){for(var ee=Object.create(null),le=0,Ce=y.params;le<Ce.length;le+=1){var et=Ce[le];this.checkLValInnerPattern(et,me,O?null:ee)}},z.parseExprList=function(y,O,ee,le){for(var Ce=[],et=!0;!this.eat(y);){if(et)et=!1;else if(this.expect(E.comma),O&&this.afterTrailingComma(y))break;var it=void 0;ee&&this.type===E.comma?it=null:this.type===E.ellipsis?(it=this.parseSpread(le),le&&this.type===E.comma&&le.trailingComma<0&&(le.trailingComma=this.start)):it=this.parseMaybeAssign(!1,le),Ce.push(it)}return Ce},z.checkUnreserved=function(y){var O=y.start,ee=y.end,le=y.name;if(this.inGenerator&&le==="yield"&&this.raiseRecoverable(O,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&le==="await"&&this.raiseRecoverable(O,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&J)&&le==="arguments"&&this.raiseRecoverable(O,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(le==="arguments"||le==="await")&&this.raise(O,"Cannot use "+le+" in class static initialization block"),this.keywords.test(le)&&this.raise(O,"Unexpected keyword '"+le+"'"),!(this.options.ecmaVersion<6&&this.input.slice(O,ee).indexOf("\\")!==-1)){var Ce=this.strict?this.reservedWordsStrict:this.reservedWords;Ce.test(le)&&(!this.inAsync&&le==="await"&&this.raiseRecoverable(O,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(O,"The keyword '"+le+"' is reserved"))}},z.parseIdent=function(y){var O=this.parseIdentNode();return this.next(!!y),this.finishNode(O,"Identifier"),y||(this.checkUnreserved(O),O.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=O.start)),O},z.parseIdentNode=function(){var y=this.startNode();return this.type===E.name?y.name=this.value:this.type.keyword?(y.name=this.type.keyword,(y.name==="class"||y.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=E.name):this.unexpected(),y},z.parsePrivateIdent=function(){var y=this.startNode();return this.type===E.privateId?y.name=this.value:this.unexpected(),this.next(),this.finishNode(y,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(y.start,"Private field '#"+y.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(y)),y},z.parseYield=function(y){this.yieldPos||(this.yieldPos=this.start);var O=this.startNode();return this.next(),this.type===E.semi||this.canInsertSemicolon()||this.type!==E.star&&!this.type.startsExpr?(O.delegate=!1,O.argument=null):(O.delegate=this.eat(E.star),O.argument=this.parseMaybeAssign(y)),this.finishNode(O,"YieldExpression")},z.parseAwait=function(y){this.awaitPos||(this.awaitPos=this.start);var O=this.startNode();return this.next(),O.argument=this.parseMaybeUnary(null,!0,!1,y),this.finishNode(O,"AwaitExpression")};var re=f.prototype;re.raise=function(y,O){var ee=nt(this.input,y);O+=" ("+ee.line+":"+ee.column+")",this.sourceFile&&(O+=" in "+this.sourceFile);var le=new SyntaxError(O);throw le.pos=y,le.loc=ee,le.raisedAt=this.pos,le},re.raiseRecoverable=re.raise,re.curPosition=function(){if(this.options.locations)return new Ne(this.curLine,this.pos-this.lineStart)};var be=f.prototype,Se=function(O){this.flags=O,this.var=[],this.lexical=[],this.functions=[]};be.enterScope=function(y){this.scopeStack.push(new Se(y))},be.exitScope=function(){this.scopeStack.pop()},be.treatFunctionsAsVarInScope=function(y){return y.flags&Oe||!this.inModule&&y.flags&We},be.declareName=function(y,O,ee){var le=!1;if(O===Le){var Ce=this.currentScope();le=Ce.lexical.indexOf(y)>-1||Ce.functions.indexOf(y)>-1||Ce.var.indexOf(y)>-1,Ce.lexical.push(y),this.inModule&&Ce.flags&We&&delete this.undefinedExports[y]}else if(O===De){var et=this.currentScope();et.lexical.push(y)}else if(O===Xe){var it=this.currentScope();this.treatFunctionsAsVar?le=it.lexical.indexOf(y)>-1:le=it.lexical.indexOf(y)>-1||it.var.indexOf(y)>-1,it.functions.push(y)}else for(var bt=this.scopeStack.length-1;bt>=0;--bt){var xt=this.scopeStack[bt];if(xt.lexical.indexOf(y)>-1&&!(xt.flags&G&&xt.lexical[0]===y)||!this.treatFunctionsAsVarInScope(xt)&&xt.functions.indexOf(y)>-1){le=!0;break}if(xt.var.push(y),this.inModule&&xt.flags&We&&delete this.undefinedExports[y],xt.flags&J)break}le&&this.raiseRecoverable(ee,"Identifier '"+y+"' has already been declared")},be.checkLocalExport=function(y){this.scopeStack[0].lexical.indexOf(y.name)===-1&&this.scopeStack[0].var.indexOf(y.name)===-1&&(this.undefinedExports[y.name]=y)},be.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},be.currentVarScope=function(){for(var y=this.scopeStack.length-1;;y--){var O=this.scopeStack[y];if(O.flags&(J|L|M))return O}},be.currentThisScope=function(){for(var y=this.scopeStack.length-1;;y--){var O=this.scopeStack[y];if(O.flags&(J|L|M)&&!(O.flags&St))return O}};var Pe=function(O,ee,le){this.type="",this.start=ee,this.end=0,O.options.locations&&(this.loc=new st(O,le)),O.options.directSourceFile&&(this.sourceFile=O.options.directSourceFile),O.options.ranges&&(this.range=[ee,0])},ze=f.prototype;ze.startNode=function(){return new Pe(this,this.start,this.startLoc)},ze.startNodeAt=function(y,O){return new Pe(this,y,O)};function we(y,O,ee,le){return y.type=O,y.end=ee,this.options.locations&&(y.loc.end=le),this.options.ranges&&(y.range[1]=ee),y}ze.finishNode=function(y,O){return we.call(this,y,O,this.lastTokEnd,this.lastTokEndLoc)},ze.finishNodeAt=function(y,O,ee,le){return we.call(this,y,O,ee,le)},ze.copyNode=function(y){var O=new Pe(this,y.start,this.startLoc);for(var ee in y)O[ee]=y[ee];return O};var $e="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",Be="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ye=Be+" Extended_Pictographic",Qe=Ye,Je=Qe+" EBase EComp EMod EPres ExtPict",dt=Je,pt=dt,Tt={9:Be,10:Ye,11:Qe,12:Je,13:dt,14:pt},wt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Ae={9:"",10:"",11:"",12:"",13:"",14:wt},Ke="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",yt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",At=yt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",_t=At+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",It=_t+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",jt=It+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Dt=jt+" "+$e,Bt={9:yt,10:At,11:_t,12:It,13:jt,14:Dt},Mt={};function tn(y){var O=Mt[y]={binary:xe(Tt[y]+" "+Ke),binaryOfStrings:xe(Ae[y]),nonBinary:{General_Category:xe(Ke),Script:xe(Bt[y])}};O.nonBinary.Script_Extensions=O.nonBinary.Script,O.nonBinary.gc=O.nonBinary.General_Category,O.nonBinary.sc=O.nonBinary.Script,O.nonBinary.scx=O.nonBinary.Script_Extensions}for(var nn=0,xn=[9,10,11,12,13,14];nn<xn.length;nn+=1){var Cn=xn[nn];tn(Cn)}var vt=f.prototype,En=function(O,ee){this.parent=O,this.base=ee||this};En.prototype.separatedFrom=function(O){for(var ee=this;ee;ee=ee.parent)for(var le=O;le;le=le.parent)if(ee.base===le.base&&ee!==le)return!0;return!1},En.prototype.sibling=function(){return new En(this.parent,this.base)};var On=function(O){this.parser=O,this.validFlags="gim"+(O.options.ecmaVersion>=6?"uy":"")+(O.options.ecmaVersion>=9?"s":"")+(O.options.ecmaVersion>=13?"d":"")+(O.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Mt[O.options.ecmaVersion>=14?14:O.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};On.prototype.reset=function(O,ee,le){var Ce=le.indexOf("v")!==-1,et=le.indexOf("u")!==-1;this.start=O|0,this.source=ee+"",this.flags=le,Ce&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=et&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=et&&this.parser.options.ecmaVersion>=9)},On.prototype.raise=function(O){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+O)},On.prototype.at=function(O,ee){ee===void 0&&(ee=!1);var le=this.source,Ce=le.length;if(O>=Ce)return-1;var et=le.charCodeAt(O);if(!(ee||this.switchU)||et<=55295||et>=57344||O+1>=Ce)return et;var it=le.charCodeAt(O+1);return it>=56320&&it<=57343?(et<<10)+it-56613888:et},On.prototype.nextIndex=function(O,ee){ee===void 0&&(ee=!1);var le=this.source,Ce=le.length;if(O>=Ce)return Ce;var et=le.charCodeAt(O),it;return!(ee||this.switchU)||et<=55295||et>=57344||O+1>=Ce||(it=le.charCodeAt(O+1))<56320||it>57343?O+1:O+2},On.prototype.current=function(O){return O===void 0&&(O=!1),this.at(this.pos,O)},On.prototype.lookahead=function(O){return O===void 0&&(O=!1),this.at(this.nextIndex(this.pos,O),O)},On.prototype.advance=function(O){O===void 0&&(O=!1),this.pos=this.nextIndex(this.pos,O)},On.prototype.eat=function(O,ee){return ee===void 0&&(ee=!1),this.current(ee)===O?(this.advance(ee),!0):!1},On.prototype.eatChars=function(O,ee){ee===void 0&&(ee=!1);for(var le=this.pos,Ce=0,et=O;Ce<et.length;Ce+=1){var it=et[Ce],bt=this.at(le,ee);if(bt===-1||bt!==it)return!1;le=this.nextIndex(le,ee)}return this.pos=le,!0},vt.validateRegExpFlags=function(y){for(var O=y.validFlags,ee=y.flags,le=!1,Ce=!1,et=0;et<ee.length;et++){var it=ee.charAt(et);O.indexOf(it)===-1&&this.raise(y.start,"Invalid regular expression flag"),ee.indexOf(it,et+1)>-1&&this.raise(y.start,"Duplicate regular expression flag"),it==="u"&&(le=!0),it==="v"&&(Ce=!0)}this.options.ecmaVersion>=15&&le&&Ce&&this.raise(y.start,"Invalid regular expression flag")};function wn(y){for(var O in y)return!0;return!1}vt.validateRegExpPattern=function(y){this.regexp_pattern(y),!y.switchN&&this.options.ecmaVersion>=9&&wn(y.groupNames)&&(y.switchN=!0,this.regexp_pattern(y))},vt.regexp_pattern=function(y){y.pos=0,y.lastIntValue=0,y.lastStringValue="",y.lastAssertionIsQuantifiable=!1,y.numCapturingParens=0,y.maxBackReference=0,y.groupNames=Object.create(null),y.backReferenceNames.length=0,y.branchID=null,this.regexp_disjunction(y),y.pos!==y.source.length&&(y.eat(41)&&y.raise("Unmatched ')'"),(y.eat(93)||y.eat(125))&&y.raise("Lone quantifier brackets")),y.maxBackReference>y.numCapturingParens&&y.raise("Invalid escape");for(var O=0,ee=y.backReferenceNames;O<ee.length;O+=1){var le=ee[O];y.groupNames[le]||y.raise("Invalid named capture referenced")}},vt.regexp_disjunction=function(y){var O=this.options.ecmaVersion>=16;for(O&&(y.branchID=new En(y.branchID,null)),this.regexp_alternative(y);y.eat(124);)O&&(y.branchID=y.branchID.sibling()),this.regexp_alternative(y);O&&(y.branchID=y.branchID.parent),this.regexp_eatQuantifier(y,!0)&&y.raise("Nothing to repeat"),y.eat(123)&&y.raise("Lone quantifier brackets")},vt.regexp_alternative=function(y){for(;y.pos<y.source.length&&this.regexp_eatTerm(y););},vt.regexp_eatTerm=function(y){return this.regexp_eatAssertion(y)?(y.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(y)&&y.switchU&&y.raise("Invalid quantifier"),!0):(y.switchU?this.regexp_eatAtom(y):this.regexp_eatExtendedAtom(y))?(this.regexp_eatQuantifier(y),!0):!1},vt.regexp_eatAssertion=function(y){var O=y.pos;if(y.lastAssertionIsQuantifiable=!1,y.eat(94)||y.eat(36))return!0;if(y.eat(92)){if(y.eat(66)||y.eat(98))return!0;y.pos=O}if(y.eat(40)&&y.eat(63)){var ee=!1;if(this.options.ecmaVersion>=9&&(ee=y.eat(60)),y.eat(61)||y.eat(33))return this.regexp_disjunction(y),y.eat(41)||y.raise("Unterminated group"),y.lastAssertionIsQuantifiable=!ee,!0}return y.pos=O,!1},vt.regexp_eatQuantifier=function(y,O){return O===void 0&&(O=!1),this.regexp_eatQuantifierPrefix(y,O)?(y.eat(63),!0):!1},vt.regexp_eatQuantifierPrefix=function(y,O){return y.eat(42)||y.eat(43)||y.eat(63)||this.regexp_eatBracedQuantifier(y,O)},vt.regexp_eatBracedQuantifier=function(y,O){var ee=y.pos;if(y.eat(123)){var le=0,Ce=-1;if(this.regexp_eatDecimalDigits(y)&&(le=y.lastIntValue,y.eat(44)&&this.regexp_eatDecimalDigits(y)&&(Ce=y.lastIntValue),y.eat(125)))return Ce!==-1&&Ce<le&&!O&&y.raise("numbers out of order in {} quantifier"),!0;y.switchU&&!O&&y.raise("Incomplete quantifier"),y.pos=ee}return!1},vt.regexp_eatAtom=function(y){return this.regexp_eatPatternCharacters(y)||y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)},vt.regexp_eatReverseSolidusAtomEscape=function(y){var O=y.pos;if(y.eat(92)){if(this.regexp_eatAtomEscape(y))return!0;y.pos=O}return!1},vt.regexp_eatUncapturingGroup=function(y){var O=y.pos;if(y.eat(40)){if(y.eat(63)){if(this.options.ecmaVersion>=16){var ee=this.regexp_eatModifiers(y),le=y.eat(45);if(ee||le){for(var Ce=0;Ce<ee.length;Ce++){var et=ee.charAt(Ce);ee.indexOf(et,Ce+1)>-1&&y.raise("Duplicate regular expression modifiers")}if(le){var it=this.regexp_eatModifiers(y);!ee&&!it&&y.current()===58&&y.raise("Invalid regular expression modifiers");for(var bt=0;bt<it.length;bt++){var xt=it.charAt(bt);(it.indexOf(xt,bt+1)>-1||ee.indexOf(xt)>-1)&&y.raise("Duplicate regular expression modifiers")}}}}if(y.eat(58)){if(this.regexp_disjunction(y),y.eat(41))return!0;y.raise("Unterminated group")}}y.pos=O}return!1},vt.regexp_eatCapturingGroup=function(y){if(y.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(y):y.current()===63&&y.raise("Invalid group"),this.regexp_disjunction(y),y.eat(41))return y.numCapturingParens+=1,!0;y.raise("Unterminated group")}return!1},vt.regexp_eatModifiers=function(y){for(var O="",ee=0;(ee=y.current())!==-1&&Sr(ee);)O+=Me(ee),y.advance();return O};function Sr(y){return y===105||y===109||y===115}vt.regexp_eatExtendedAtom=function(y){return y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)||this.regexp_eatInvalidBracedQuantifier(y)||this.regexp_eatExtendedPatternCharacter(y)},vt.regexp_eatInvalidBracedQuantifier=function(y){return this.regexp_eatBracedQuantifier(y,!0)&&y.raise("Nothing to repeat"),!1},vt.regexp_eatSyntaxCharacter=function(y){var O=y.current();return Nr(O)?(y.lastIntValue=O,y.advance(),!0):!1};function Nr(y){return y===36||y>=40&&y<=43||y===46||y===63||y>=91&&y<=94||y>=123&&y<=125}vt.regexp_eatPatternCharacters=function(y){for(var O=y.pos,ee=0;(ee=y.current())!==-1&&!Nr(ee);)y.advance();return y.pos!==O},vt.regexp_eatExtendedPatternCharacter=function(y){var O=y.current();return O!==-1&&O!==36&&!(O>=40&&O<=43)&&O!==46&&O!==63&&O!==91&&O!==94&&O!==124?(y.advance(),!0):!1},vt.regexp_groupSpecifier=function(y){if(y.eat(63)){this.regexp_eatGroupName(y)||y.raise("Invalid group");var O=this.options.ecmaVersion>=16,ee=y.groupNames[y.lastStringValue];if(ee)if(O)for(var le=0,Ce=ee;le<Ce.length;le+=1){var et=Ce[le];et.separatedFrom(y.branchID)||y.raise("Duplicate capture group name")}else y.raise("Duplicate capture group name");O?(ee||(y.groupNames[y.lastStringValue]=[])).push(y.branchID):y.groupNames[y.lastStringValue]=!0}},vt.regexp_eatGroupName=function(y){if(y.lastStringValue="",y.eat(60)){if(this.regexp_eatRegExpIdentifierName(y)&&y.eat(62))return!0;y.raise("Invalid capture group name")}return!1},vt.regexp_eatRegExpIdentifierName=function(y){if(y.lastStringValue="",this.regexp_eatRegExpIdentifierStart(y)){for(y.lastStringValue+=Me(y.lastIntValue);this.regexp_eatRegExpIdentifierPart(y);)y.lastStringValue+=Me(y.lastIntValue);return!0}return!1},vt.regexp_eatRegExpIdentifierStart=function(y){var O=y.pos,ee=this.options.ecmaVersion>=11,le=y.current(ee);return y.advance(ee),le===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,ee)&&(le=y.lastIntValue),cr(le)?(y.lastIntValue=le,!0):(y.pos=O,!1)};function cr(y){return v(y,!0)||y===36||y===95}vt.regexp_eatRegExpIdentifierPart=function(y){var O=y.pos,ee=this.options.ecmaVersion>=11,le=y.current(ee);return y.advance(ee),le===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,ee)&&(le=y.lastIntValue),ur(le)?(y.lastIntValue=le,!0):(y.pos=O,!1)};function ur(y){return w(y,!0)||y===36||y===95||y===8204||y===8205}vt.regexp_eatAtomEscape=function(y){return this.regexp_eatBackReference(y)||this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)||y.switchN&&this.regexp_eatKGroupName(y)?!0:(y.switchU&&(y.current()===99&&y.raise("Invalid unicode escape"),y.raise("Invalid escape")),!1)},vt.regexp_eatBackReference=function(y){var O=y.pos;if(this.regexp_eatDecimalEscape(y)){var ee=y.lastIntValue;if(y.switchU)return ee>y.maxBackReference&&(y.maxBackReference=ee),!0;if(ee<=y.numCapturingParens)return!0;y.pos=O}return!1},vt.regexp_eatKGroupName=function(y){if(y.eat(107)){if(this.regexp_eatGroupName(y))return y.backReferenceNames.push(y.lastStringValue),!0;y.raise("Invalid named reference")}return!1},vt.regexp_eatCharacterEscape=function(y){return this.regexp_eatControlEscape(y)||this.regexp_eatCControlLetter(y)||this.regexp_eatZero(y)||this.regexp_eatHexEscapeSequence(y)||this.regexp_eatRegExpUnicodeEscapeSequence(y,!1)||!y.switchU&&this.regexp_eatLegacyOctalEscapeSequence(y)||this.regexp_eatIdentityEscape(y)},vt.regexp_eatCControlLetter=function(y){var O=y.pos;if(y.eat(99)){if(this.regexp_eatControlLetter(y))return!0;y.pos=O}return!1},vt.regexp_eatZero=function(y){return y.current()===48&&!dr(y.lookahead())?(y.lastIntValue=0,y.advance(),!0):!1},vt.regexp_eatControlEscape=function(y){var O=y.current();return O===116?(y.lastIntValue=9,y.advance(),!0):O===110?(y.lastIntValue=10,y.advance(),!0):O===118?(y.lastIntValue=11,y.advance(),!0):O===102?(y.lastIntValue=12,y.advance(),!0):O===114?(y.lastIntValue=13,y.advance(),!0):!1},vt.regexp_eatControlLetter=function(y){var O=y.current();return pr(O)?(y.lastIntValue=O%32,y.advance(),!0):!1};function pr(y){return y>=65&&y<=90||y>=97&&y<=122}vt.regexp_eatRegExpUnicodeEscapeSequence=function(y,O){O===void 0&&(O=!1);var ee=y.pos,le=O||y.switchU;if(y.eat(117)){if(this.regexp_eatFixedHexDigits(y,4)){var Ce=y.lastIntValue;if(le&&Ce>=55296&&Ce<=56319){var et=y.pos;if(y.eat(92)&&y.eat(117)&&this.regexp_eatFixedHexDigits(y,4)){var it=y.lastIntValue;if(it>=56320&&it<=57343)return y.lastIntValue=(Ce-55296)*1024+(it-56320)+65536,!0}y.pos=et,y.lastIntValue=Ce}return!0}if(le&&y.eat(123)&&this.regexp_eatHexDigits(y)&&y.eat(125)&&Lr(y.lastIntValue))return!0;le&&y.raise("Invalid unicode escape"),y.pos=ee}return!1};function Lr(y){return y>=0&&y<=1114111}vt.regexp_eatIdentityEscape=function(y){if(y.switchU)return this.regexp_eatSyntaxCharacter(y)?!0:y.eat(47)?(y.lastIntValue=47,!0):!1;var O=y.current();return O!==99&&(!y.switchN||O!==107)?(y.lastIntValue=O,y.advance(),!0):!1},vt.regexp_eatDecimalEscape=function(y){y.lastIntValue=0;var O=y.current();if(O>=49&&O<=57){do y.lastIntValue=10*y.lastIntValue+(O-48),y.advance();while((O=y.current())>=48&&O<=57);return!0}return!1};var Kr=0,$n=1,Jn=2;vt.regexp_eatCharacterClassEscape=function(y){var O=y.current();if(yi(O))return y.lastIntValue=-1,y.advance(),$n;var ee=!1;if(y.switchU&&this.options.ecmaVersion>=9&&((ee=O===80)||O===112)){y.lastIntValue=-1,y.advance();var le;if(y.eat(123)&&(le=this.regexp_eatUnicodePropertyValueExpression(y))&&y.eat(125))return ee&&le===Jn&&y.raise("Invalid property name"),le;y.raise("Invalid property name")}return Kr};function yi(y){return y===100||y===68||y===115||y===83||y===119||y===87}vt.regexp_eatUnicodePropertyValueExpression=function(y){var O=y.pos;if(this.regexp_eatUnicodePropertyName(y)&&y.eat(61)){var ee=y.lastStringValue;if(this.regexp_eatUnicodePropertyValue(y)){var le=y.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(y,ee,le),$n}}if(y.pos=O,this.regexp_eatLoneUnicodePropertyNameOrValue(y)){var Ce=y.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(y,Ce)}return Kr},vt.regexp_validateUnicodePropertyNameAndValue=function(y,O,ee){je(y.unicodeProperties.nonBinary,O)||y.raise("Invalid property name"),y.unicodeProperties.nonBinary[O].test(ee)||y.raise("Invalid property value")},vt.regexp_validateUnicodePropertyNameOrValue=function(y,O){if(y.unicodeProperties.binary.test(O))return $n;if(y.switchV&&y.unicodeProperties.binaryOfStrings.test(O))return Jn;y.raise("Invalid property name")},vt.regexp_eatUnicodePropertyName=function(y){var O=0;for(y.lastStringValue="";_i(O=y.current());)y.lastStringValue+=Me(O),y.advance();return y.lastStringValue!==""};function _i(y){return pr(y)||y===95}vt.regexp_eatUnicodePropertyValue=function(y){var O=0;for(y.lastStringValue="";Zr(O=y.current());)y.lastStringValue+=Me(O),y.advance();return y.lastStringValue!==""};function Zr(y){return _i(y)||dr(y)}vt.regexp_eatLoneUnicodePropertyNameOrValue=function(y){return this.regexp_eatUnicodePropertyValue(y)},vt.regexp_eatCharacterClass=function(y){if(y.eat(91)){var O=y.eat(94),ee=this.regexp_classContents(y);return y.eat(93)||y.raise("Unterminated character class"),O&&ee===Jn&&y.raise("Negated character class may contain strings"),!0}return!1},vt.regexp_classContents=function(y){return y.current()===93?$n:y.switchV?this.regexp_classSetExpression(y):(this.regexp_nonEmptyClassRanges(y),$n)},vt.regexp_nonEmptyClassRanges=function(y){for(;this.regexp_eatClassAtom(y);){var O=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassAtom(y)){var ee=y.lastIntValue;y.switchU&&(O===-1||ee===-1)&&y.raise("Invalid character class"),O!==-1&&ee!==-1&&O>ee&&y.raise("Range out of order in character class")}}},vt.regexp_eatClassAtom=function(y){var O=y.pos;if(y.eat(92)){if(this.regexp_eatClassEscape(y))return!0;if(y.switchU){var ee=y.current();(ee===99||Vr(ee))&&y.raise("Invalid class escape"),y.raise("Invalid escape")}y.pos=O}var le=y.current();return le!==93?(y.lastIntValue=le,y.advance(),!0):!1},vt.regexp_eatClassEscape=function(y){var O=y.pos;if(y.eat(98))return y.lastIntValue=8,!0;if(y.switchU&&y.eat(45))return y.lastIntValue=45,!0;if(!y.switchU&&y.eat(99)){if(this.regexp_eatClassControlLetter(y))return!0;y.pos=O}return this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)},vt.regexp_classSetExpression=function(y){var O=$n,ee;if(!this.regexp_eatClassSetRange(y))if(ee=this.regexp_eatClassSetOperand(y)){ee===Jn&&(O=Jn);for(var le=y.pos;y.eatChars([38,38]);){if(y.current()!==38&&(ee=this.regexp_eatClassSetOperand(y))){ee!==Jn&&(O=$n);continue}y.raise("Invalid character in character class")}if(le!==y.pos)return O;for(;y.eatChars([45,45]);)this.regexp_eatClassSetOperand(y)||y.raise("Invalid character in character class");if(le!==y.pos)return O}else y.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(y)){if(ee=this.regexp_eatClassSetOperand(y),!ee)return O;ee===Jn&&(O=Jn)}},vt.regexp_eatClassSetRange=function(y){var O=y.pos;if(this.regexp_eatClassSetCharacter(y)){var ee=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassSetCharacter(y)){var le=y.lastIntValue;return ee!==-1&&le!==-1&&ee>le&&y.raise("Range out of order in character class"),!0}y.pos=O}return!1},vt.regexp_eatClassSetOperand=function(y){return this.regexp_eatClassSetCharacter(y)?$n:this.regexp_eatClassStringDisjunction(y)||this.regexp_eatNestedClass(y)},vt.regexp_eatNestedClass=function(y){var O=y.pos;if(y.eat(91)){var ee=y.eat(94),le=this.regexp_classContents(y);if(y.eat(93))return ee&&le===Jn&&y.raise("Negated character class may contain strings"),le;y.pos=O}if(y.eat(92)){var Ce=this.regexp_eatCharacterClassEscape(y);if(Ce)return Ce;y.pos=O}return null},vt.regexp_eatClassStringDisjunction=function(y){var O=y.pos;if(y.eatChars([92,113])){if(y.eat(123)){var ee=this.regexp_classStringDisjunctionContents(y);if(y.eat(125))return ee}else y.raise("Invalid escape");y.pos=O}return null},vt.regexp_classStringDisjunctionContents=function(y){for(var O=this.regexp_classString(y);y.eat(124);)this.regexp_classString(y)===Jn&&(O=Jn);return O},vt.regexp_classString=function(y){for(var O=0;this.regexp_eatClassSetCharacter(y);)O++;return O===1?$n:Jn},vt.regexp_eatClassSetCharacter=function(y){var O=y.pos;if(y.eat(92))return this.regexp_eatCharacterEscape(y)||this.regexp_eatClassSetReservedPunctuator(y)?!0:y.eat(98)?(y.lastIntValue=8,!0):(y.pos=O,!1);var ee=y.current();return ee<0||ee===y.lookahead()&&bi(ee)||Ni(ee)?!1:(y.advance(),y.lastIntValue=ee,!0)};function bi(y){return y===33||y>=35&&y<=38||y>=42&&y<=44||y===46||y>=58&&y<=64||y===94||y===96||y===126}function Ni(y){return y===40||y===41||y===45||y===47||y>=91&&y<=93||y>=123&&y<=125}vt.regexp_eatClassSetReservedPunctuator=function(y){var O=y.current();return hr(O)?(y.lastIntValue=O,y.advance(),!0):!1};function hr(y){return y===33||y===35||y===37||y===38||y===44||y===45||y>=58&&y<=62||y===64||y===96||y===126}vt.regexp_eatClassControlLetter=function(y){var O=y.current();return dr(O)||O===95?(y.lastIntValue=O%32,y.advance(),!0):!1},vt.regexp_eatHexEscapeSequence=function(y){var O=y.pos;if(y.eat(120)){if(this.regexp_eatFixedHexDigits(y,2))return!0;y.switchU&&y.raise("Invalid escape"),y.pos=O}return!1},vt.regexp_eatDecimalDigits=function(y){var O=y.pos,ee=0;for(y.lastIntValue=0;dr(ee=y.current());)y.lastIntValue=10*y.lastIntValue+(ee-48),y.advance();return y.pos!==O};function dr(y){return y>=48&&y<=57}vt.regexp_eatHexDigits=function(y){var O=y.pos,ee=0;for(y.lastIntValue=0;tr(ee=y.current());)y.lastIntValue=16*y.lastIntValue+Qr(ee),y.advance();return y.pos!==O};function tr(y){return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function Qr(y){return y>=65&&y<=70?10+(y-65):y>=97&&y<=102?10+(y-97):y-48}vt.regexp_eatLegacyOctalEscapeSequence=function(y){if(this.regexp_eatOctalDigit(y)){var O=y.lastIntValue;if(this.regexp_eatOctalDigit(y)){var ee=y.lastIntValue;O<=3&&this.regexp_eatOctalDigit(y)?y.lastIntValue=O*64+ee*8+y.lastIntValue:y.lastIntValue=O*8+ee}else y.lastIntValue=O;return!0}return!1},vt.regexp_eatOctalDigit=function(y){var O=y.current();return Vr(O)?(y.lastIntValue=O-48,y.advance(),!0):(y.lastIntValue=0,!1)};function Vr(y){return y>=48&&y<=55}vt.regexp_eatFixedHexDigits=function(y,O){var ee=y.pos;y.lastIntValue=0;for(var le=0;le<O;++le){var Ce=y.current();if(!tr(Ce))return y.pos=ee,!1;y.lastIntValue=16*y.lastIntValue+Qr(Ce),y.advance()}return!0};var mr=function(O){this.type=O.type,this.value=O.value,this.start=O.start,this.end=O.end,O.options.locations&&(this.loc=new st(O,O.startLoc,O.endLoc)),O.options.ranges&&(this.range=[O.start,O.end])},Qt=f.prototype;Qt.next=function(y){!y&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new mr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Qt.getToken=function(){return this.next(),new mr(this)},typeof Symbol<"u"&&(Qt[Symbol.iterator]=function(){var y=this;return{next:function(){var O=y.getToken();return{done:O.type===E.eof,value:O}}}}),Qt.nextToken=function(){var y=this.curContext();if((!y||!y.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(E.eof);if(y.override)return y.override(this);this.readToken(this.fullCharCodeAtPos())},Qt.readToken=function(y){return v(y,this.options.ecmaVersion>=6)||y===92?this.readWord():this.getTokenFromCode(y)},Qt.fullCharCodeAtPos=function(){var y=this.input.charCodeAt(this.pos);if(y<=55295||y>=56320)return y;var O=this.input.charCodeAt(this.pos+1);return O<=56319||O>=57344?y:(y<<10)+O-56613888},Qt.skipBlockComment=function(){var y=this.options.onComment&&this.curPosition(),O=this.pos,ee=this.input.indexOf("*/",this.pos+=2);if(ee===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=ee+2,this.options.locations)for(var le=void 0,Ce=O;(le=X(this.input,Ce,this.pos))>-1;)++this.curLine,Ce=this.lineStart=le;this.options.onComment&&this.options.onComment(!0,this.input.slice(O+2,ee),O,this.pos,y,this.curPosition())},Qt.skipLineComment=function(y){for(var O=this.pos,ee=this.options.onComment&&this.curPosition(),le=this.input.charCodeAt(this.pos+=y);this.pos<this.input.length&&!R(le);)le=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(O+y,this.pos),O,this.pos,ee,this.curPosition())},Qt.skipSpace=function(){e:for(;this.pos<this.input.length;){var y=this.input.charCodeAt(this.pos);switch(y){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(y>8&&y<14||y>=5760&&ce.test(String.fromCharCode(y)))++this.pos;else break e}}},Qt.finishToken=function(y,O){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var ee=this.type;this.type=y,this.value=O,this.updateContext(ee)},Qt.readToken_dot=function(){var y=this.input.charCodeAt(this.pos+1);if(y>=48&&y<=57)return this.readNumber(!0);var O=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&y===46&&O===46?(this.pos+=3,this.finishToken(E.ellipsis)):(++this.pos,this.finishToken(E.dot))},Qt.readToken_slash=function(){var y=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):y===61?this.finishOp(E.assign,2):this.finishOp(E.slash,1)},Qt.readToken_mult_modulo_exp=function(y){var O=this.input.charCodeAt(this.pos+1),ee=1,le=y===42?E.star:E.modulo;return this.options.ecmaVersion>=7&&y===42&&O===42&&(++ee,le=E.starstar,O=this.input.charCodeAt(this.pos+2)),O===61?this.finishOp(E.assign,ee+1):this.finishOp(le,ee)},Qt.readToken_pipe_amp=function(y){var O=this.input.charCodeAt(this.pos+1);if(O===y){if(this.options.ecmaVersion>=12){var ee=this.input.charCodeAt(this.pos+2);if(ee===61)return this.finishOp(E.assign,3)}return this.finishOp(y===124?E.logicalOR:E.logicalAND,2)}return O===61?this.finishOp(E.assign,2):this.finishOp(y===124?E.bitwiseOR:E.bitwiseAND,1)},Qt.readToken_caret=function(){var y=this.input.charCodeAt(this.pos+1);return y===61?this.finishOp(E.assign,2):this.finishOp(E.bitwiseXOR,1)},Qt.readToken_plus_min=function(y){var O=this.input.charCodeAt(this.pos+1);return O===y?O===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||U.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(E.incDec,2):O===61?this.finishOp(E.assign,2):this.finishOp(E.plusMin,1)},Qt.readToken_lt_gt=function(y){var O=this.input.charCodeAt(this.pos+1),ee=1;return O===y?(ee=y===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+ee)===61?this.finishOp(E.assign,ee+1):this.finishOp(E.bitShift,ee)):O===33&&y===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(O===61&&(ee=2),this.finishOp(E.relational,ee))},Qt.readToken_eq_excl=function(y){var O=this.input.charCodeAt(this.pos+1);return O===61?this.finishOp(E.equality,this.input.charCodeAt(this.pos+2)===61?3:2):y===61&&O===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(E.arrow)):this.finishOp(y===61?E.eq:E.prefix,1)},Qt.readToken_question=function(){var y=this.options.ecmaVersion;if(y>=11){var O=this.input.charCodeAt(this.pos+1);if(O===46){var ee=this.input.charCodeAt(this.pos+2);if(ee<48||ee>57)return this.finishOp(E.questionDot,2)}if(O===63){if(y>=12){var le=this.input.charCodeAt(this.pos+2);if(le===61)return this.finishOp(E.assign,3)}return this.finishOp(E.coalesce,2)}}return this.finishOp(E.question,1)},Qt.readToken_numberSign=function(){var y=this.options.ecmaVersion,O=35;if(y>=13&&(++this.pos,O=this.fullCharCodeAtPos(),v(O,!0)||O===92))return this.finishToken(E.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Me(O)+"'")},Qt.getTokenFromCode=function(y){switch(y){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(E.parenL);case 41:return++this.pos,this.finishToken(E.parenR);case 59:return++this.pos,this.finishToken(E.semi);case 44:return++this.pos,this.finishToken(E.comma);case 91:return++this.pos,this.finishToken(E.bracketL);case 93:return++this.pos,this.finishToken(E.bracketR);case 123:return++this.pos,this.finishToken(E.braceL);case 125:return++this.pos,this.finishToken(E.braceR);case 58:return++this.pos,this.finishToken(E.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(E.backQuote);case 48:var O=this.input.charCodeAt(this.pos+1);if(O===120||O===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(O===111||O===79)return this.readRadixNumber(8);if(O===98||O===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(y);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(y);case 124:case 38:return this.readToken_pipe_amp(y);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(y);case 60:case 62:return this.readToken_lt_gt(y);case 61:case 33:return this.readToken_eq_excl(y);case 63:return this.readToken_question();case 126:return this.finishOp(E.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Me(y)+"'")},Qt.finishOp=function(y,O){var ee=this.input.slice(this.pos,this.pos+O);return this.pos+=O,this.finishToken(y,ee)},Qt.readRegexp=function(){for(var y,O,ee=this.pos;;){this.pos>=this.input.length&&this.raise(ee,"Unterminated regular expression");var le=this.input.charAt(this.pos);if(U.test(le)&&this.raise(ee,"Unterminated regular expression"),y)y=!1;else{if(le==="[")O=!0;else if(le==="]"&&O)O=!1;else if(le==="/"&&!O)break;y=le==="\\"}++this.pos}var Ce=this.input.slice(ee,this.pos);++this.pos;var et=this.pos,it=this.readWord1();this.containsEsc&&this.unexpected(et);var bt=this.regexpState||(this.regexpState=new On(this));bt.reset(ee,Ce,it),this.validateRegExpFlags(bt),this.validateRegExpPattern(bt);var xt=null;try{xt=new RegExp(Ce,it)}catch{}return this.finishToken(E.regexp,{pattern:Ce,flags:it,value:xt})},Qt.readInt=function(y,O,ee){for(var le=this.options.ecmaVersion>=12&&O===void 0,Ce=ee&&this.input.charCodeAt(this.pos)===48,et=this.pos,it=0,bt=0,xt=0,Zt=O??1/0;xt<Zt;++xt,++this.pos){var sn=this.input.charCodeAt(this.pos),Pn=void 0;if(le&&sn===95){Ce&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),bt===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),xt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),bt=sn;continue}if(sn>=97?Pn=sn-97+10:sn>=65?Pn=sn-65+10:sn>=48&&sn<=57?Pn=sn-48:Pn=1/0,Pn>=y)break;bt=sn,it=it*y+Pn}return le&&bt===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===et||O!=null&&this.pos-et!==O?null:it};function Ir(y,O){return O?parseInt(y,8):parseFloat(y.replace(/_/g,""))}function bn(y){return typeof BigInt!="function"?null:BigInt(y.replace(/_/g,""))}Qt.readRadixNumber=function(y){var O=this.pos;this.pos+=2;var ee=this.readInt(y);return ee==null&&this.raise(this.start+2,"Expected number in radix "+y),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(ee=bn(this.input.slice(O,this.pos)),++this.pos):v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(E.num,ee)},Qt.readNumber=function(y){var O=this.pos;!y&&this.readInt(10,void 0,!0)===null&&this.raise(O,"Invalid number");var ee=this.pos-O>=2&&this.input.charCodeAt(O)===48;ee&&this.strict&&this.raise(O,"Invalid number");var le=this.input.charCodeAt(this.pos);if(!ee&&!y&&this.options.ecmaVersion>=11&&le===110){var Ce=bn(this.input.slice(O,this.pos));return++this.pos,v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(E.num,Ce)}ee&&/[89]/.test(this.input.slice(O,this.pos))&&(ee=!1),le===46&&!ee&&(++this.pos,this.readInt(10),le=this.input.charCodeAt(this.pos)),(le===69||le===101)&&!ee&&(le=this.input.charCodeAt(++this.pos),(le===43||le===45)&&++this.pos,this.readInt(10)===null&&this.raise(O,"Invalid number")),v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var et=Ir(this.input.slice(O,this.pos),ee);return this.finishToken(E.num,et)},Qt.readCodePoint=function(){var y=this.input.charCodeAt(this.pos),O;if(y===123){this.options.ecmaVersion<6&&this.unexpected();var ee=++this.pos;O=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,O>1114111&&this.invalidStringToken(ee,"Code point out of bounds")}else O=this.readHexChar(4);return O},Qt.readString=function(y){for(var O="",ee=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var le=this.input.charCodeAt(this.pos);if(le===y)break;le===92?(O+=this.input.slice(ee,this.pos),O+=this.readEscapedChar(!1),ee=this.pos):le===8232||le===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(R(le)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return O+=this.input.slice(ee,this.pos++),this.finishToken(E.string,O)};var Vn={};Qt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(y){if(y===Vn)this.readInvalidTemplateToken();else throw y}this.inTemplateElement=!1},Qt.invalidStringToken=function(y,O){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Vn;this.raise(y,O)},Qt.readTmplToken=function(){for(var y="",O=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var ee=this.input.charCodeAt(this.pos);if(ee===96||ee===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===E.template||this.type===E.invalidTemplate)?ee===36?(this.pos+=2,this.finishToken(E.dollarBraceL)):(++this.pos,this.finishToken(E.backQuote)):(y+=this.input.slice(O,this.pos),this.finishToken(E.template,y));if(ee===92)y+=this.input.slice(O,this.pos),y+=this.readEscapedChar(!0),O=this.pos;else if(R(ee)){switch(y+=this.input.slice(O,this.pos),++this.pos,ee){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:y+=`
`;break;default:y+=String.fromCharCode(ee);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),O=this.pos}else++this.pos}},Qt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(E.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Qt.readEscapedChar=function(y){var O=this.input.charCodeAt(++this.pos);switch(++this.pos,O){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Me(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),y){var ee=this.pos-1;this.invalidStringToken(ee,"Invalid escape sequence in template string")}default:if(O>=48&&O<=55){var le=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Ce=parseInt(le,8);return Ce>255&&(le=le.slice(0,-1),Ce=parseInt(le,8)),this.pos+=le.length-1,O=this.input.charCodeAt(this.pos),(le!=="0"||O===56||O===57)&&(this.strict||y)&&this.invalidStringToken(this.pos-1-le.length,y?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Ce)}return R(O)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(O)}},Qt.readHexChar=function(y){var O=this.pos,ee=this.readInt(16,y);return ee===null&&this.invalidStringToken(O,"Bad character escape sequence"),ee},Qt.readWord1=function(){this.containsEsc=!1;for(var y="",O=!0,ee=this.pos,le=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Ce=this.fullCharCodeAtPos();if(w(Ce,le))this.pos+=Ce<=65535?1:2;else if(Ce===92){this.containsEsc=!0,y+=this.input.slice(ee,this.pos);var et=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var it=this.readCodePoint();(O?v:w)(it,le)||this.invalidStringToken(et,"Invalid Unicode escape"),y+=Me(it),ee=this.pos}else break;O=!1}return y+this.input.slice(ee,this.pos)},Qt.readWord=function(){var y=this.readWord1(),O=E.name;return this.keywords.test(y)&&(O=j[y]),this.finishToken(O,y)};var Tn="8.15.0";f.acorn={Parser:f,version:Tn,defaultOptions:Ue,Position:Ne,SourceLocation:st,getLineInfo:nt,Node:Pe,TokenType:C,tokTypes:E,keywordTypes:j,TokContext:Z,tokContexts:V,isIdentifierChar:w,isIdentifierStart:v,Token:mr,isNewLine:R,lineBreak:U,lineBreakG:D,nonASCIIwhitespace:ce};function Gn(y,O){return f.parse(y,O)}function Gr(y,O,ee){return f.parseExpressionAt(y,O,ee)}function Yn(y,O){return f.tokenizer(y,O)}n.Node=Pe,n.Parser=f,n.Position=Ne,n.SourceLocation=st,n.TokContext=Z,n.Token=mr,n.TokenType=C,n.defaultOptions=Ue,n.getLineInfo=nt,n.isIdentifierChar=w,n.isIdentifierStart=v,n.isNewLine=R,n.keywordTypes=j,n.lineBreak=U,n.lineBreakG=D,n.nonASCIIwhitespace=ce,n.parse=Gn,n.parseExpressionAt=Gr,n.tokContexts=V,n.tokTypes=E,n.tokenizer=Yn,n.version=Tn})}(Yp,Yp.exports)),Yp.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(t,n){t=t||a1;var r=t.window,i=t.document,s=new function(){var l=/^(statics|enumerable|beans|preserve)$/,f=[],b=f.slice,_=Object.create,S=Object.getOwnPropertyDescriptor,P=Object.defineProperty,T=f.forEach||function(K,W){for(var Y=0,B=this.length;Y<B;Y++)K.call(W,this[Y],Y,this)},N=function(K,W){for(var Y in this)this.hasOwnProperty(Y)&&K.call(W,this[Y],Y,this)},$=Object.assign||function(K){for(var W=1,Y=arguments.length;W<Y;W++){var B=arguments[W];for(var Z in B)B.hasOwnProperty(Z)&&(K[Z]=B[Z])}return K},F=function(K,W,Y){if(K){var B=S(K,"length");(B&&typeof B.value=="number"?T:N).call(K,W,Y=Y||K)}return Y};function q(K,W,Y,B,Z){var V={};function ne(re,be){be=be||(be=S(W,re))&&(be.get?be:be.value),typeof be=="string"&&be[0]==="#"&&(be=K[be.substring(1)]||be);var Se=typeof be=="function",Pe=be,ze=Z||Se&&!be.base?be&&be.get?re in K:K[re]:null,we;(!Z||!ze)&&(Se&&ze&&(be.base=ze),Se&&B!==!1&&(we=re.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(V[we[3].toLowerCase()+we[4]]=we[2]),(!Pe||Se||!Pe.get||typeof Pe.get!="function"||!Q.isPlainObject(Pe))&&(Pe={value:Pe,writable:!0}),(S(K,re)||{configurable:!0}).configurable&&(Pe.configurable=!0,Pe.enumerable=Y??!we),P(K,re,Pe))}if(W){for(var z in W)W.hasOwnProperty(z)&&!l.test(z)&&ne(z);for(var z in V){var te=V[z],se=K["set"+te],ue=K["get"+te]||se&&K["is"+te];ue&&(B===!0||ue.length===0)&&ne(z,{get:ue,set:se})}}return K}function Q(){for(var K=0,W=arguments.length;K<W;K++){var Y=arguments[K];Y&&$(this,Y)}return this}return q(Q,{inject:function(K){if(K){var W=K.statics===!0?K:K.statics,Y=K.beans,B=K.preserve;W!==K&&q(this.prototype,K,K.enumerable,Y,B),q(this,W,null,Y,B)}for(var Z=1,V=arguments.length;Z<V;Z++)this.inject(arguments[Z]);return this},extend:function(){for(var K=this,W,Y,B=0,Z,V=arguments.length;B<V&&!(W&&Y);B++)Z=arguments[B],W=W||Z.initialize,Y=Y||Z.prototype;return W=W||function(){K.apply(this,arguments)},Y=W.prototype=Y||_(this.prototype),P(Y,"constructor",{value:W,writable:!0,configurable:!0}),q(W,this),arguments.length&&this.inject.apply(W,arguments),W.base=K,W}}).inject({enumerable:!1,initialize:Q,set:Q,inject:function(){for(var K=0,W=arguments.length;K<W;K++){var Y=arguments[K];Y&&q(this,Y,Y.enumerable,Y.beans,Y.preserve)}return this},extend:function(){var K=_(this);return K.inject.apply(K,arguments)},each:function(K,W){return F(this,K,W)},clone:function(){return new this.constructor(this)},statics:{set:$,each:F,create:_,define:P,describe:S,clone:function(K){return $(new K.constructor,K)},isPlainObject:function(K){var W=K!=null&&K.constructor;return W&&(W===Object||W===Q||W.name==="Object")},pick:function(K,W){return K!==n?K:W},slice:function(K,W,Y){return b.call(K,W,Y)}}})};e.exports=s,s.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(l,f){if(!/^_/.test(f)){var b=typeof l;this.push(f+": "+(b==="number"?d.instance.number(l):b==="string"?"'"+l+"'":l))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(l){return s.importJSON(l,this)},exportJSON:function(l){return s.exportJSON(this,l)},toJSON:function(){return s.serialize(this)},set:function(l,f){return l&&s.filter(this,l,f,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function l(){var f=l.base.apply(this,arguments),b=f.prototype._class;return b&&!s.exports[b]&&(s.exports[b]=f),f},equals:function(l,f){if(l===f)return!0;if(l&&l.equals)return l.equals(f);if(f&&f.equals)return f.equals(l);if(l&&f&&typeof l=="object"&&typeof f=="object"){if(Array.isArray(l)&&Array.isArray(f)){var b=l.length;if(b!==f.length)return!1;for(;b--;)if(!s.equals(l[b],f[b]))return!1}else{var _=Object.keys(l),b=_.length;if(b!==Object.keys(f).length)return!1;for(;b--;){var S=_[b];if(!(f.hasOwnProperty(S)&&s.equals(l[S],f[S])))return!1}}return!0}return!1},read:function(l,f,b,_){if(this===s){var S=this.peek(l,f);return l.__index++,S}var P=this.prototype,T=P._readIndex,N=f||T&&l.__index||0,$=l.length,F=l[N];if(_=_||$-N,F instanceof this||b&&b.readNull&&F==null&&_<=1)return T&&(l.__index=N+1),F&&b&&b.clone?F.clone():F;if(F=s.create(P),T&&(F.__read=!0),F=F.initialize.apply(F,N>0||N+_<$?s.slice(l,N,N+_):l)||F,T){l.__index=N+F.__read;var q=F.__filtered;q&&(l.__filtered=q,F.__filtered=n),F.__read=n}return F},peek:function(l,f){return l[l.__index=f||l.__index||0]},remain:function(l){return l.length-(l.__index||0)},readList:function(l,f,b,_){for(var S=[],P,T=f||0,N=_?T+_:l.length,$=T;$<N;$++)S.push(Array.isArray(P=l[$])?this.read(P,0,b):this.read(l,$,b,1));return S},readNamed:function(l,f,b,_,S){var P=this.getNamed(l,f),T=P!==n;if(T){var N=l.__filtered;if(!N){var $=this.getSource(l);N=l.__filtered=s.create($),N.__unfiltered=$}N[f]=n}return this.read(T?[P]:l,b,_,S)},readSupported:function(l,f){var b=this.getSource(l),_=this,S=!1;return b&&Object.keys(b).forEach(function(P){if(P in f){var T=_.readNamed(l,P);T!==n&&(f[P]=T),S=!0}}),S},getSource:function(l){var f=l.__source;if(f===n){var b=l.length===1&&l[0];f=l.__source=b&&s.isPlainObject(b)?b:null}return f},getNamed:function(l,f){var b=this.getSource(l);if(b)return f?b[f]:l.__filtered||b},hasNamed:function(l,f){return!!this.getNamed(l,f)},filter:function(l,f,b,_){var S;function P(q){if(!(b&&q in b)&&!(S&&q in S)){var Q=f[q];Q!==n&&(l[q]=Q)}}if(_){for(var T={},N=0,$,F=_.length;N<F;N++)($=_[N])in f&&(P($),T[$]=!0);S=T}return Object.keys(f.__unfiltered||f).forEach(P),l},isPlainValue:function(l,f){return s.isPlainObject(l)||Array.isArray(l)||f&&typeof l=="string"},serialize:function(l,f,b,_){f=f||{};var S=!_,P;if(S&&(f.formatter=new d(f.precision),_={length:0,definitions:{},references:{},add:function(Q,K){var W="#"+Q._id,Y=this.references[W];if(!Y){this.length++;var B=K.call(Q),Z=Q._class;Z&&B[0]!==Z&&B.unshift(Z),this.definitions[W]=B,Y=this.references[W]=[W]}return Y}}),l&&l._serialize){P=l._serialize(f,_);var T=l._class;T&&!l._compactSerialize&&(S||!b)&&P[0]!==T&&P.unshift(T)}else if(Array.isArray(l)){P=[];for(var N=0,$=l.length;N<$;N++)P[N]=s.serialize(l[N],f,b,_)}else if(s.isPlainObject(l)){P={};for(var F=Object.keys(l),N=0,$=F.length;N<$;N++){var q=F[N];P[q]=s.serialize(l[q],f,b,_)}}else typeof l=="number"?P=f.formatter.number(l,f.precision):P=l;return S&&_.length>0?[["dictionary",_.definitions],P]:P},deserialize:function(l,f,b,_,S){var P=l,T=!b,N=T&&l&&l.length&&l[0][0]==="dictionary";if(b=b||{},Array.isArray(l)){var $=l[0],F=$==="dictionary";if(l.length==1&&/^#/.test($))return b.dictionary[$];$=s.exports[$],P=[];for(var q=$?1:0,Q=l.length;q<Q;q++)P.push(s.deserialize(l[q],f,b,F,N));if($){var K=P;f?P=f($,K,T||S):P=new $(K)}}else if(s.isPlainObject(l)){P={},_&&(b.dictionary=P);for(var W in l)P[W]=s.deserialize(l[W],f,b)}return N?P[1]:P},exportJSON:function(l,f){var b=s.serialize(l,f);return f&&f.asString==!1?b:JSON.stringify(b)},importJSON:function(l,f){return s.deserialize(typeof l=="string"?JSON.parse(l):l,function(b,_,S){var P=S&&f&&f.constructor===b,T=P?f:s.create(b.prototype);if(_.length===1&&T instanceof E&&(P||!(T instanceof D))){var N=_[0];s.isPlainObject(N)&&(N.insert=!1,P&&(_=_.concat([E.INSERT])))}return(P?T.set:b).apply(T,_),P&&(f=null),T})},push:function(l,f){var b=f.length;if(b<4096)l.push.apply(l,f);else{var _=l.length;l.length+=b;for(var S=0;S<b;S++)l[_+S]=f[S]}return l},splice:function(l,f,b,_){var S=f&&f.length,P=b===n;b=P?l.length:b,b>l.length&&(b=l.length);for(var T=0;T<S;T++)f[T]._index=b+T;if(P)return s.push(l,f),[];var N=[b,_];f&&s.push(N,f);for(var $=l.splice.apply(l,N),T=0,F=$.length;T<F;T++)$[T]._index=n;for(var T=b+S,F=l.length;T<F;T++)l[T]._index=T;return $},capitalize:function(l){return l.replace(/\b[a-z]/g,function(f){return f.toUpperCase()})},camelize:function(l){return l.replace(/-(.)/g,function(f,b){return b.toUpperCase()})},hyphenate:function(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(l,f){if(typeof l!="string")s.each(l,function(P,T){this.on(T,P)},this);else{var b=this._eventTypes,_=b&&b[l],S=this._callbacks=this._callbacks||{};S=S[l]=S[l]||[],S.indexOf(f)===-1&&(S.push(f),_&&_.install&&S.length===1&&_.install.call(this,l))}return this},off:function(l,f){if(typeof l!="string"){s.each(l,function(T,N){this.off(N,T)},this);return}var b=this._eventTypes,_=b&&b[l],S=this._callbacks&&this._callbacks[l],P;return S&&(!f||(P=S.indexOf(f))!==-1&&S.length===1?(_&&_.uninstall&&_.uninstall.call(this,l),delete this._callbacks[l]):P!==-1&&S.splice(P,1)),this},once:function(l,f){return this.on(l,function b(){f.apply(this,arguments),this.off(l,b)})},emit:function(l,f){var b=this._callbacks&&this._callbacks[l];if(!b)return!1;var _=s.slice(arguments,1),S=f&&f.target&&!f.currentTarget;b=b.slice(),S&&(f.currentTarget=this);for(var P=0,T=b.length;P<T;P++)if(b[P].apply(this,_)==!1){f&&f.stop&&f.stop();break}return S&&delete f.currentTarget,!0},responds:function(l){return!!(this._callbacks&&this._callbacks[l])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(l){var f=this._eventTypes,b=this._callbacks,_=l?"install":"uninstall";if(f){for(var S in b)if(b[S].length>0){var P=f[S],T=P&&P[_];T&&T.call(this,S)}}},statics:{inject:function l(f){var b=f._events;if(b){var _={};s.each(b,function(S,P){var T=typeof S=="string",N=T?S:P,$=s.capitalize(N),F=N.substring(2).toLowerCase();_[F]=T?{}:S,N="_"+N,f["get"+$]=function(){return this[N]},f["set"+$]=function(q){var Q=this[N];Q&&this.off(F,Q),q&&this.on(F,q),this[N]=q}}),f._eventTypes=_}return l.base.apply(this,arguments)}}},o=s.extend({_class:"PaperScope",initialize:function l(){De=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=l._id++,l._scopes[this._id]=this;var f=l.prototype;if(!this.support){var b=ve.getContext(1,1)||{};f.support={nativeDash:"setLineDash"in b||"mozDash"in b,nativeBlendModes:me.nativeModes},ve.release(b)}if(!this.agent){var _=t.navigator.userAgent.toLowerCase(),S=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(_)||[])[0],P=S==="darwin"?"mac":S,T=f.agent=f.browser={platform:P};P&&(T[P]=!0),_.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(N,$,F,q,Q){if(!T.chrome){var K=$==="opera"?q:/^(node|trident)$/.test($)?Q:F;T.version=K,T.versionNumber=parseFloat(K),$={trident:"msie",jsdom:"node"}[$]||$,T.name=$,T[$]=!0}}),T.chrome&&delete T.webkit,T.atom&&delete T.chrome}},version:"0.12.18",getView:function(){var l=this.project;return l&&l._view},getPaper:function(){return this},execute:function(l,f){var b=De.PaperScript.execute(l,this,f);return ht.updateFocus(),b},install:function(l){var f=this;s.each(["project","view","tool"],function(_){s.define(l,_,{configurable:!0,get:function(){return f[_]}})});for(var b in this)!/^_/.test(b)&&this[b]&&(l[b]=this[b])},setup:function(l){return De=this,this.project=new I(l),this},createCanvas:function(l,f){return ve.getCanvas(l,f)},activate:function(){De=this},clear:function(){for(var l=this.projects,f=this.tools,b=l.length-1;b>=0;b--)l[b].remove();for(var b=f.length-1;b>=0;b--)f[b].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function l(f){return f+="Attribute",function(b,_){return b[f](_)||b[f]("data-paper-"+_)}}return{_scopes:{},_id:0,get:function(f){return this._scopes[f]||null},getAttribute:l("get"),hasAttribute:l("has")}}}),u=s.extend(a,{initialize:function(l){this._scope=De,this._index=this._scope[this._list].push(this)-1,(l||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var l=this._scope[this._reference];return l&&l!==this&&l.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",l),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),h={findItemBoundsCollisions:function(l,f,b){function _(T){for(var N=new Array(T.length),$=0;$<T.length;$++){var F=T[$].getBounds();N[$]=[F.left,F.top,F.right,F.bottom]}return N}var S=_(l),P=!f||f===l?S:_(f);return this.findBoundsCollisions(S,P,b||0)},findCurveBoundsCollisions:function(l,f,b,_){function S(K){for(var W=Math.min,Y=Math.max,B=new Array(K.length),Z=0;Z<K.length;Z++){var V=K[Z];B[Z]=[W(V[0],V[2],V[4],V[6]),W(V[1],V[3],V[5],V[7]),Y(V[0],V[2],V[4],V[6]),Y(V[1],V[3],V[5],V[7])]}return B}var P=S(l),T=!f||f===l?P:S(f);if(_){for(var N=this.findBoundsCollisions(P,T,b||0,!1,!0),$=this.findBoundsCollisions(P,T,b||0,!0,!0),F=[],q=0,Q=N.length;q<Q;q++)F[q]={hor:N[q],ver:$[q]};return F}return this.findBoundsCollisions(P,T,b||0)},findBoundsCollisions:function(l,f,b,_,S){var P=!f||l===f,T=P?l:l.concat(f),N=l.length,$=T.length;function F(pt,Tt,wt){for(var Ae=0,Ke=pt.length;Ae<Ke;){var yt=Ke+Ae>>>1;T[pt[yt]][Tt]<wt?Ae=yt+1:Ke=yt}return Ae-1}for(var q=_?1:0,Q=q+2,K=_?0:1,W=K+2,Y=new Array($),B=0;B<$;B++)Y[B]=B;Y.sort(function(pt,Tt){return T[pt][q]-T[Tt][q]});for(var Z=[],V=new Array(N),B=0;B<$;B++){var ne=Y[B],z=T[ne],te=P?ne:ne-N,se=ne<N,ue=P||!se,re=se?[]:null;if(Z.length){var be=F(Z,Q,z[q]-b)+1;if(Z.splice(0,be),P&&S){re=re.concat(Z);for(var Se=0;Se<Z.length;Se++){var Pe=Z[Se];V[Pe].push(te)}}else for(var ze=z[W],we=z[K],Se=0;Se<Z.length;Se++){var Pe=Z[Se],$e=T[Pe],Be=Pe<N,Ye=P||Pe>=N;(S||(se&&Ye||ue&&Be)&&ze>=$e[K]-b&&we<=$e[W]+b)&&(se&&Ye&&re.push(P?Pe:Pe-N),ue&&Be&&V[Pe].push(te))}}if(se&&(l===f&&re.push(ne),V[ne]=re),Z.length){var Qe=z[Q],Je=F(Z,Q,Qe);Z.splice(Je+1,0,ne)}else Z.push(ne)}for(var B=0;B<V.length;B++){var dt=V[B];dt&&dt.sort(function(Tt,wt){return Tt-wt})}return V}},d=s.extend({initialize:function(l){this.precision=s.pick(l,5),this.multiplier=Math.pow(10,this.precision)},number:function(l){return this.precision<16?Math.round(l*this.multiplier)/this.multiplier:l},pair:function(l,f,b){return this.number(l)+(b||",")+this.number(f)},point:function(l,f){return this.number(l.x)+(f||",")+this.number(l.y)},size:function(l,f){return this.number(l.width)+(f||",")+this.number(l.height)},rectangle:function(l,f){return this.point(l,f)+(f||",")+this.size(l,f)}});d.instance=new d;var p=new function(){var l=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],f=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],b=Math.abs,_=Math.sqrt,S=Math.pow,P=Math.log2||function(Q){return Math.log(Q)*Math.LOG2E},T=1e-12,N=112e-18;function $(Q,K,W){return Q<K?K:Q>W?W:Q}function F(Q,K,W){function Y(be){var Se=be*134217729,Pe=be-Se,ze=Pe+Se,we=be-ze;return[ze,we]}var B=K*K-Q*W,Z=K*K+Q*W;if(b(B)*3<Z){var V=Y(Q),ne=Y(K),z=Y(W),te=K*K,se=ne[0]*ne[0]-te+2*ne[0]*ne[1]+ne[1]*ne[1],ue=Q*W,re=V[0]*z[0]-ue+V[0]*z[1]+V[1]*z[0]+V[1]*z[1];B=te-ue+(se-re)}return B}function q(){var Q=Math.max.apply(Math,arguments);return Q&&(Q<1e-8||Q>1e8)?S(2,-Math.round(P(Q))):0}return{EPSILON:T,MACHINE_EPSILON:N,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(_(2)-1)/3,isZero:function(Q){return Q>=-T&&Q<=T},isMachineZero:function(Q){return Q>=-N&&Q<=N},clamp:$,integrate:function(Q,K,W,Y){for(var B=l[Y-2],Z=f[Y-2],V=(W-K)*.5,ne=V+K,z=0,te=Y+1>>1,se=Y&1?Z[z++]*Q(ne):0;z<te;){var ue=V*B[z];se+=Z[z++]*(Q(ne+ue)+Q(ne-ue))}return V*se},findRoot:function(Q,K,W,Y,B,Z,V){for(var ne=0;ne<Z;ne++){var z=Q(W),te=z/K(W),se=W-te;if(b(te)<V){W=se;break}z>0?(B=W,W=se<=Y?(Y+B)*.5:se):(Y=W,W=se>=B?(Y+B)*.5:se)}return $(W,Y,B)},solveQuadratic:function(Q,K,W,Y,B,Z){var V,ne=1/0;if(b(Q)<T){if(b(K)<T)return b(W)<T?-1:0;V=-W/K}else{K*=-.5;var z=F(Q,K,W);if(z&&b(z)<N){var te=q(b(Q),b(K),b(W));te&&(Q*=te,K*=te,W*=te,z=F(Q,K,W))}if(z>=-N){var se=z<0?0:_(z),ue=K+(K<0?-se:se);ue===0?(V=W/Q,ne=-V):(V=ue/Q,ne=W/ue)}}var re=0,be=B==null,Se=B-T,Pe=Z+T;return isFinite(V)&&(be||V>Se&&V<Pe)&&(Y[re++]=be?V:$(V,B,Z)),ne!==V&&isFinite(ne)&&(be||ne>Se&&ne<Pe)&&(Y[re++]=be?ne:$(ne,B,Z)),re},solveCubic:function(Q,K,W,Y,B,Z,V){var ne=q(b(Q),b(K),b(W),b(Y)),z,te,se,ue,re;ne&&(Q*=ne,K*=ne,W*=ne,Y*=ne);function be(Je){z=Je;var dt=Q*z;te=dt+K,se=te*z+W,ue=(dt+te)*z+se,re=se*z+Y}if(b(Q)<T)Q=K,te=W,se=Y,z=1/0;else if(b(Y)<T)te=K,se=W,z=0;else{be(-(K/Q)/3);var Se=re/Q,Pe=S(b(Se),1/3),ze=Se<0?-1:1,we=-ue/Q,$e=we>0?1.324717957244746*Math.max(Pe,_(we)):Pe,Be=z-ze*$e;if(Be!==z){do be(Be),Be=ue===0?z:z-re/ue/(1+N);while(ze*Be>ze*z);b(Q)*z*z>b(Y/z)&&(se=-Y/z,te=(se-W)/z)}}var Ye=p.solveQuadratic(Q,te,se,B,Z,V),Qe=Z==null;return isFinite(z)&&(Ye===0||Ye>0&&z!==B[0]&&z!==B[1])&&(Qe||z>Z-T&&z<V+T)&&(B[Ye++]=Qe?z:$(z,Z,V)),Ye}}},m={_id:1,_pools:{},get:function(l){if(l){var f=this._pools[l];return f||(f=this._pools[l]={_id:1}),f._id++}else return this._id++}},g=s.extend({_class:"Point",_readIndex:!0,initialize:function(f,b){var _=typeof f,S=this.__read,P=0;if(_==="number"){var T=typeof b=="number";this._set(f,T?b:f),S&&(P=T?2:1)}else if(_==="undefined"||f===null)this._set(0,0),S&&(P=f===null?1:0);else{var N=_==="string"?f.split(/[\s,]+/)||[]:f;P=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"x"in N?this._set(N.x||0,N.y||0):"width"in N?this._set(N.width||0,N.height||0):"angle"in N?(this._set(N.length||0,0),this.setAngle(N.angle||0)):(this._set(0,0),P=0)}return S&&(this.__read=P),this},set:"#initialize",_set:function(l,f){return this.x=l,this.y=f,this},equals:function(l){return this===l||l&&(this.x===l.x&&this.y===l.y||Array.isArray(l)&&this.x===l[0]&&this.y===l[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var l=d.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+" }"},_serialize:function(l){var f=l.formatter;return[f.number(this.x),f.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(l){if(this.isZero()){var f=this._angle||0;this._set(Math.cos(f)*l,Math.sin(f)*l)}else{var b=l/this.getLength();p.isZero(b)&&this.getAngle(),this._set(this.x*b,this.y*b)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(l){this.setAngleInRadians.call(this,l*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var l=g.read(arguments),f=this.getLength()*l.getLength();if(p.isZero(f))return NaN;var b=this.dot(l)/f;return Math.acos(b<-1?-1:b>1?1:b)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(l){if(this._angle=l,!this.isZero()){var f=this.getLength();this._set(Math.cos(l)*f,Math.sin(l)*f)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var l=g.read(arguments);return Math.atan2(this.cross(l),this.dot(l))*180/Math.PI},getDistance:function(){var l=arguments,f=g.read(l),b=f.x-this.x,_=f.y-this.y,S=b*b+_*_,P=s.read(l);return P?S:Math.sqrt(S)},normalize:function(l){l===n&&(l=1);var f=this.getLength(),b=f!==0?l/f:0,_=new g(this.x*b,this.y*b);return b>=0&&(_._angle=this._angle),_},rotate:function(l,f){if(l===0)return this.clone();l=l*Math.PI/180;var b=f?this.subtract(f):this,_=Math.sin(l),S=Math.cos(l);return b=new g(b.x*S-b.y*_,b.x*_+b.y*S),f?b.add(f):b},transform:function(l){return l?l._transformPoint(this):this},add:function(){var l=g.read(arguments);return new g(this.x+l.x,this.y+l.y)},subtract:function(){var l=g.read(arguments);return new g(this.x-l.x,this.y-l.y)},multiply:function(){var l=g.read(arguments);return new g(this.x*l.x,this.y*l.y)},divide:function(){var l=g.read(arguments);return new g(this.x/l.x,this.y/l.y)},modulo:function(){var l=g.read(arguments);return new g(this.x%l.x,this.y%l.y)},negate:function(){return new g(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var l=arguments,f=g.read(l),b=s.read(l);return this.getDistance(f)<=b},isCollinear:function(){var l=g.read(arguments);return g.isCollinear(this.x,this.y,l.x,l.y)},isColinear:"#isCollinear",isOrthogonal:function(){var l=g.read(arguments);return g.isOrthogonal(this.x,this.y,l.x,l.y)},isZero:function(){var l=p.isZero;return l(this.x)&&l(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(l){return this.x*(l>1&&l<4?-1:1)>=0&&this.y*(l>2?-1:1)>=0},dot:function(){var l=g.read(arguments);return this.x*l.x+this.y*l.y},cross:function(){var l=g.read(arguments);return this.x*l.y-this.y*l.x},project:function(){var l=g.read(arguments),f=l.isZero()?0:this.dot(l)/l.dot(l);return new g(l.x*f,l.y*f)},statics:{min:function(){var l=arguments,f=g.read(l),b=g.read(l);return new g(Math.min(f.x,b.x),Math.min(f.y,b.y))},max:function(){var l=arguments,f=g.read(l),b=g.read(l);return new g(Math.max(f.x,b.x),Math.max(f.y,b.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(l,f,b,_){return Math.abs(l*_-f*b)<=Math.sqrt((l*l+f*f)*(b*b+_*_))*1e-8},isOrthogonal:function(l,f,b,_){return Math.abs(l*b+f*_)<=Math.sqrt((l*l+f*f)*(b*b+_*_))*1e-8}}},s.each(["round","ceil","floor","abs"],function(l){var f=Math[l];this[l]=function(){return new g(f(this.x),f(this.y))}},{})),v=g.extend({initialize:function(f,b,_,S){this._x=f,this._y=b,this._owner=_,this._setter=S},_set:function(l,f,b){return this._x=l,this._y=f,b||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),w=s.extend({_class:"Size",_readIndex:!0,initialize:function(f,b){var _=typeof f,S=this.__read,P=0;if(_==="number"){var T=typeof b=="number";this._set(f,T?b:f),S&&(P=T?2:1)}else if(_==="undefined"||f===null)this._set(0,0),S&&(P=f===null?1:0);else{var N=_==="string"?f.split(/[\s,]+/)||[]:f;P=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"width"in N?this._set(N.width||0,N.height||0):"x"in N?this._set(N.x||0,N.y||0):(this._set(0,0),P=0)}return S&&(this.__read=P),this},set:"#initialize",_set:function(l,f){return this.width=l,this.height=f,this},equals:function(l){return l===this||l&&(this.width===l.width&&this.height===l.height||Array.isArray(l)&&this.width===l[0]&&this.height===l[1])||!1},clone:function(){return new w(this.width,this.height)},toString:function(){var l=d.instance;return"{ width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var f=l.formatter;return[f.number(this.width),f.number(this.height)]},add:function(){var l=w.read(arguments);return new w(this.width+l.width,this.height+l.height)},subtract:function(){var l=w.read(arguments);return new w(this.width-l.width,this.height-l.height)},multiply:function(){var l=w.read(arguments);return new w(this.width*l.width,this.height*l.height)},divide:function(){var l=w.read(arguments);return new w(this.width/l.width,this.height/l.height)},modulo:function(){var l=w.read(arguments);return new w(this.width%l.width,this.height%l.height)},negate:function(){return new w(-this.width,-this.height)},isZero:function(){var l=p.isZero;return l(this.width)&&l(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(l,f){return new w(Math.min(l.width,f.width),Math.min(l.height,f.height))},max:function(l,f){return new w(Math.max(l.width,f.width),Math.max(l.height,f.height))},random:function(){return new w(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(l){var f=Math[l];this[l]=function(){return new w(f(this.width),f(this.height))}},{})),C=w.extend({initialize:function(f,b,_,S){this._width=f,this._height=b,this._owner=_,this._setter=S},_set:function(l,f,b){return this._width=l,this._height=f,b||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(l){this._width=l,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(l){this._height=l,this._owner[this._setter](this)}}),x=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(f,b,_,S){var P=arguments,T=typeof f,N;if(T==="number"?(this._set(f,b,_,S),N=4):T==="undefined"||f===null?(this._set(0,0,0,0),N=f===null?1:0):P.length===1&&(Array.isArray(f)?(this._set.apply(this,f),N=1):f.x!==n||f.width!==n?(this._set(f.x||0,f.y||0,f.width||0,f.height||0),N=1):f.from===n&&f.to===n&&(this._set(0,0,0,0),s.readSupported(P,this)&&(N=1))),N===n){var $=g.readNamed(P,"from"),F=s.peek(P),q=$.x,Q=$.y,K,W;if(F&&F.x!==n||s.hasNamed(P,"to")){var Y=g.readNamed(P,"to");K=Y.x-q,W=Y.y-Q,K<0&&(q=Y.x,K=-K),W<0&&(Q=Y.y,W=-W)}else{var B=w.read(P);K=B.width,W=B.height}this._set(q,Q,K,W),N=P.__index}var Z=P.__filtered;return Z&&(this.__filtered=Z),this.__read&&(this.__read=N),this},set:"#initialize",_set:function(l,f,b,_){return this.x=l,this.y=f,this.width=b,this.height=_,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(l){var f=s.isPlainValue(l)?x.read(arguments):l;return f===this||f&&this.x===f.x&&this.y===f.y&&this.width===f.width&&this.height===f.height||!1},toString:function(){var l=d.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+", width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var f=l.formatter;return[f.number(this.x),f.number(this.y),f.number(this.width),f.number(this.height)]},getPoint:function(l){var f=l?g:v;return new f(this.x,this.y,this,"setPoint")},setPoint:function(){var l=g.read(arguments);this.x=l.x,this.y=l.y},getSize:function(l){var f=l?w:C;return new f(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var l=w.read(arguments),f=this._sx,b=this._sy,_=l.width,S=l.height;f&&(this.x+=(this.width-_)*f),b&&(this.y+=(this.height-S)*b),this.width=_,this.height=S,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(l){if(!this._fw){var f=l-this.x;this.width-=this._sx===.5?f*2:f}this.x=l,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(l){if(!this._fh){var f=l-this.y;this.height-=this._sy===.5?f*2:f}this.y=l,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(l){if(!this._fw){var f=l-this.x;this.width=this._sx===.5?f*2:f}this.x=l-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(l){if(!this._fh){var f=l-this.y;this.height=this._sy===.5?f*2:f}this.y=l-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(l){this._fw||this._sx===.5?this.x=l-this.width/2:(this._sx&&(this.x+=(l-this.x)*2*this._sx),this.width=(l-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(l){this._fh||this._sy===.5?this.y=l-this.height/2:(this._sy&&(this.y+=(l-this.y)*2*this._sy),this.height=(l-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(l){var f=l?g:v;return new f(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var l=g.read(arguments);return this.setCenterX(l.x),this.setCenterY(l.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(l){return l&&l.width!==n||(Array.isArray(l)?l:arguments).length===4?this._containsRectangle(x.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(l){var f=l.x,b=l.y;return f>=this.x&&b>=this.y&&f<=this.x+this.width&&b<=this.y+this.height},_containsRectangle:function(l){var f=l.x,b=l.y;return f>=this.x&&b>=this.y&&f+l.width<=this.x+this.width&&b+l.height<=this.y+this.height},intersects:function(){var l=x.read(arguments),f=s.read(arguments)||0;return l.x+l.width>this.x-f&&l.y+l.height>this.y-f&&l.x<this.x+this.width+f&&l.y<this.y+this.height+f},intersect:function(){var l=x.read(arguments),f=Math.max(this.x,l.x),b=Math.max(this.y,l.y),_=Math.min(this.x+this.width,l.x+l.width),S=Math.min(this.y+this.height,l.y+l.height);return new x(f,b,_-f,S-b)},unite:function(){var l=x.read(arguments),f=Math.min(this.x,l.x),b=Math.min(this.y,l.y),_=Math.max(this.x+this.width,l.x+l.width),S=Math.max(this.y+this.height,l.y+l.height);return new x(f,b,_-f,S-b)},include:function(){var l=g.read(arguments),f=Math.min(this.x,l.x),b=Math.min(this.y,l.y),_=Math.max(this.x+this.width,l.x),S=Math.max(this.y+this.height,l.y);return new x(f,b,_-f,S-b)},expand:function(){var l=w.read(arguments),f=l.width,b=l.height;return new x(this.x-f/2,this.y-b/2,this.width+f,this.height+b)},scale:function(l,f){return this.expand(this.width*l-this.width,this.height*(f===n?l:f)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(l,f){var b=l.join(""),_=/^[RL]/.test(b);f>=4&&(l[1]+=_?"Y":"X");var S=l[_?0:1],P=l[_?1:0],T="get"+S,N="get"+P,$="set"+S,F="set"+P,q="get"+b,Q="set"+b;this[q]=function(K){var W=K?g:v;return new W(this[T](),this[N](),this,Q)},this[Q]=function(){var K=g.read(arguments);this[$](K.x),this[F](K.y)}},{beans:!0})),k=x.extend({initialize:function(f,b,_,S,P,T){this._set(f,b,_,S,!0),this._owner=P,this._setter=T},_set:function(l,f,b,_,S){return this._x=l,this._y=f,this._width=b,this._height=_,S||this._owner[this._setter](this),this}},new function(){var l=x.prototype;return s.each(["x","y","width","height"],function(f){var b=s.capitalize(f),_="_"+f;this["get"+b]=function(){return this[_]},this["set"+b]=function(S){this[_]=S,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(f){var b="set"+f;this[b]=function(){this._dontNotify=!0,l[b].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(f){var b=this._owner;b._changeSelection&&b._changeSelection(2,f)}}))}),A=s.extend({_class:"Matrix",initialize:function l(f,b){var _=arguments,S=_.length,P=!0;if(S>=6?this._set.apply(this,_):S===1||S===2?f instanceof l?this._set(f._a,f._b,f._c,f._d,f._tx,f._ty,b):Array.isArray(f)?this._set.apply(this,b?f.concat([b]):f):P=!1:S?P=!1:this.reset(),!P)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(l,f,b,_,S,P,T){return this._a=l,this._b=f,this._c=b,this._d=_,this._tx=S,this._ty=P,T||this._changed(),this},_serialize:function(l,f){return s.serialize(this.getValues(),l,!0,f)},_changed:function(){var l=this._owner;l&&(l._applyMatrix?l.transform(null,!0):l._changed(25))},clone:function(){return new A(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(l){return l===this||l&&this._a===l._a&&this._b===l._b&&this._c===l._c&&this._d===l._d&&this._tx===l._tx&&this._ty===l._ty},toString:function(){var l=d.instance;return"[["+[l.number(this._a),l.number(this._c),l.number(this._tx)].join(", ")+"], ["+[l.number(this._b),l.number(this._d),l.number(this._ty)].join(", ")+"]]"},reset:function(l){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,l||this._changed(),this},apply:function(l,f){var b=this._owner;return b?(b.transform(null,s.pick(l,!0),f),this.isIdentity()):!1},translate:function(){var l=g.read(arguments),f=l.x,b=l.y;return this._tx+=f*this._a+b*this._c,this._ty+=f*this._b+b*this._d,this._changed(),this},scale:function(){var l=arguments,f=g.read(l),b=g.read(l,0,{readNull:!0});return b&&this.translate(b),this._a*=f.x,this._b*=f.x,this._c*=f.y,this._d*=f.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(l){l*=Math.PI/180;var f=g.read(arguments,1),b=f.x,_=f.y,S=Math.cos(l),P=Math.sin(l),T=b-b*S+_*P,N=_-b*P-_*S,$=this._a,F=this._b,q=this._c,Q=this._d;return this._a=S*$+P*q,this._b=S*F+P*Q,this._c=-P*$+S*q,this._d=-P*F+S*Q,this._tx+=T*$+N*q,this._ty+=T*F+N*Q,this._changed(),this},shear:function(){var l=arguments,f=g.read(l),b=g.read(l,0,{readNull:!0});b&&this.translate(b);var _=this._a,S=this._b;return this._a+=f.y*this._c,this._b+=f.y*this._d,this._c+=f.x*_,this._d+=f.x*S,b&&this.translate(b.negate()),this._changed(),this},skew:function(){var l=arguments,f=g.read(l),b=g.read(l,0,{readNull:!0}),_=Math.PI/180,S=new g(Math.tan(f.x*_),Math.tan(f.y*_));return this.shear(S,b)},append:function(l,f){if(l){var b=this._a,_=this._b,S=this._c,P=this._d,T=l._a,N=l._c,$=l._b,F=l._d,q=l._tx,Q=l._ty;this._a=T*b+$*S,this._c=N*b+F*S,this._b=T*_+$*P,this._d=N*_+F*P,this._tx+=q*b+Q*S,this._ty+=q*_+Q*P,f||this._changed()}return this},prepend:function(l,f){if(l){var b=this._a,_=this._b,S=this._c,P=this._d,T=this._tx,N=this._ty,$=l._a,F=l._c,q=l._b,Q=l._d,K=l._tx,W=l._ty;this._a=$*b+F*_,this._c=$*S+F*P,this._b=q*b+Q*_,this._d=q*S+Q*P,this._tx=$*T+F*N+K,this._ty=q*T+Q*N+W,f||this._changed()}return this},appended:function(l){return this.clone().append(l)},prepended:function(l){return this.clone().prepend(l)},invert:function(){var l=this._a,f=this._b,b=this._c,_=this._d,S=this._tx,P=this._ty,T=l*_-f*b,N=null;return T&&!isNaN(T)&&isFinite(S)&&isFinite(P)&&(this._a=_/T,this._b=-f/T,this._c=-b/T,this._d=l/T,this._tx=(b*P-_*S)/T,this._ty=(f*S-l*P)/T,N=this),N},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new A(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var l=this._a*this._d-this._c*this._b;return l&&!isNaN(l)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(l,f,b){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(l,f,b)},_transformPoint:function(l,f,b){var _=l.x,S=l.y;return f||(f=new g),f._set(_*this._a+S*this._c+this._tx,_*this._b+S*this._d+this._ty,b)},_transformCoordinates:function(l,f,b){for(var _=0,S=2*b;_<S;_+=2){var P=l[_],T=l[_+1];f[_]=P*this._a+T*this._c+this._tx,f[_+1]=P*this._b+T*this._d+this._ty}return f},_transformCorners:function(l){var f=l.x,b=l.y,_=f+l.width,S=b+l.height,P=[f,b,_,b,_,S,f,S];return this._transformCoordinates(P,P,4)},_transformBounds:function(l,f,b){for(var _=this._transformCorners(l),S=_.slice(0,2),P=S.slice(),T=2;T<8;T++){var N=_[T],$=T&1;N<S[$]?S[$]=N:N>P[$]&&(P[$]=N)}return f||(f=new x),f._set(S[0],S[1],P[0]-S[0],P[1]-S[1],b)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(l,f,b){var _=this._a,S=this._b,P=this._c,T=this._d,N=this._tx,$=this._ty,F=_*T-S*P,q=null;if(F&&!isNaN(F)&&isFinite(N)&&isFinite($)){var Q=l.x-this._tx,K=l.y-this._ty;f||(f=new g),q=f._set((Q*T-K*P)/F,(K*_-Q*S)/F,b)}return q},decompose:function(){var l=this._a,f=this._b,b=this._c,_=this._d,S=l*_-f*b,P=Math.sqrt,T=Math.atan2,N=180/Math.PI,$,F,q;if(l!==0||f!==0){var Q=P(l*l+f*f);$=Math.acos(l/Q)*(f>0?1:-1),F=[Q,S/Q],q=[T(l*b+f*_,Q*Q),0]}else if(b!==0||_!==0){var K=P(b*b+_*_);$=Math.asin(b/K)*(_>0?1:-1),F=[S/K,K],q=[0,T(l*b+f*_,K*K)]}else $=0,q=F=[0,0];return{translation:this.getTranslation(),rotation:$*N,scaling:new g(F),skewing:new g(q[0]*N,q[1]*N)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(l){this.isIdentity()||l.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(l){var f=s.capitalize(l),b="_"+l;this["get"+f]=function(){return this[b]},this["set"+f]=function(_){this[b]=_,this._changed()}},{})),j=s.extend({_class:"Line",initialize:function(f,b,_,S,P){var T=!1;arguments.length>=4?(this._px=f,this._py=b,this._vx=_,this._vy=S,T=P):(this._px=f.x,this._py=f.y,this._vx=b.x,this._vy=b.y,T=_),T||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(l,f){return j.intersect(this._px,this._py,this._vx,this._vy,l._px,l._py,l._vx,l._vy,!0,f)},getSide:function(l,f){return j.getSide(this._px,this._py,this._vx,this._vy,l.x,l.y,!0,f)},getDistance:function(l){return Math.abs(this.getSignedDistance(l))},getSignedDistance:function(l){return j.getSignedDistance(this._px,this._py,this._vx,this._vy,l.x,l.y,!0)},isCollinear:function(l){return g.isCollinear(this._vx,this._vy,l._vx,l._vy)},isOrthogonal:function(l){return g.isOrthogonal(this._vx,this._vy,l._vx,l._vy)},statics:{intersect:function(l,f,b,_,S,P,T,N,$,F){$||(b-=l,_-=f,T-=S,N-=P);var q=b*N-_*T;if(!p.isMachineZero(q)){var Q=l-S,K=f-P,W=(T*K-N*Q)/q,Y=(b*K-_*Q)/q,B=1e-12,Z=-B,V=1+B;if(F||Z<W&&W<V&&Z<Y&&Y<V)return F||(W=W<=0?0:W>=1?1:W),new g(l+W*b,f+W*_)}},getSide:function(l,f,b,_,S,P,T,N){T||(b-=l,_-=f);var $=S-l,F=P-f,q=$*_-F*b;return!N&&p.isMachineZero(q)&&(q=($*b+$*b)/(b*b+_*_),q>=0&&q<=1&&(q=0)),q<0?-1:q>0?1:0},getSignedDistance:function(l,f,b,_,S,P,T){return T||(b-=l,_-=f),b===0?_>0?S-l:l-S:_===0?b<0?P-f:f-P:((S-l)*_-(P-f)*b)/(_>b?_*Math.sqrt(1+b*b/(_*_)):b*Math.sqrt(1+_*_/(b*b)))},getDistance:function(l,f,b,_,S,P,T){return Math.abs(j.getSignedDistance(l,f,b,_,S,P,T))}}}),I=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(f){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new oe(null,null,this),this._view=ht.create(this,f||ve.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(l,f){return s.serialize(this._children,l,!0,f)},_changed:function(l,f){if(l&1){var b=this._view;b&&(b._needsUpdate=!0,!b._requested&&b._autoUpdate&&b.requestUpdate())}var _=this._changes;if(_&&f){var S=this._changesById,P=f._id,T=S[P];T?T.flags|=l:_.push(S[P]={item:f,flags:l})}},clear:function(){for(var l=this._children,f=l.length-1;f>=0;f--)l[f].remove()},isEmpty:function(){return!this._children.length},remove:function l(){return l.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(l){this._currentStyle.set(l)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new D({project:this,insert:!0})},getSymbolDefinitions:function(){var l=[],f={};return this.getItems({class:ce,match:function(b){var _=b._definition,S=_._id;return f[S]||(f[S]=!0,l.push(_)),!1}}),l},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var l=this._selectionItems,f=[];for(var b in l){var _=l[b],S=_._selection;S&1&&_.isInserted()?f.push(_):S||this._updateSelection(_)}return f},_updateSelection:function(l){var f=l._id,b=this._selectionItems;l._selection?b[f]!==l&&(this._selectionCount++,b[f]=l):b[f]===l&&(this._selectionCount--,delete b[f])},selectAll:function(){for(var l=this._children,f=0,b=l.length;f<b;f++)l[f].setFullySelected(!0)},deselectAll:function(){var l=this._selectionItems;for(var f in l)l[f].setFullySelected(!1)},addLayer:function(l){return this.insertLayer(n,l)},insertLayer:function(l,f){if(f instanceof D){f._remove(!1,!0),s.splice(this._children,[f],l,0),f._setProject(this,!0);var b=f._name;b&&f.setName(b),this._changes&&f._changed(5),this._activeLayer||(this._activeLayer=f)}else f=null;return f},_insertItem:function(l,f,b){return f=this.insertLayer(l,f)||(this._activeLayer||this._insertItem(n,new D(E.NO_INSERT),!0)).insertChild(l,f),b&&f.activate&&f.activate(),f},getItems:function(l){return E._getItems(this,l)},getItem:function(l){return E._getItems(this,l,null,null,!0)[0]||null},importJSON:function(l){this.activate();var f=this._activeLayer;return s.importJSON(l,f&&f.isEmpty()&&f)},removeOn:function(l){var f=this._removeSets;if(f){l==="mouseup"&&(f.mousedrag=null);var b=f[l];if(b){for(var _ in b){var S=b[_];for(var P in f){var T=f[P];T&&T!=b&&delete T[S._id]}S.remove()}f[l]=null}}},draw:function(l,f,b){this._updateVersion++,l.save(),f.applyToContext(l);for(var _=this._children,S=new s({offset:new g(0,0),pixelRatio:b,viewMatrix:f.isIdentity()?null:f,matrices:[new A],updateMatrix:!0}),P=0,T=_.length;P<T;P++)_[P].draw(l,S);if(l.restore(),this._selectionCount>0){l.save(),l.strokeWidth=1;var N=this._selectionItems,$=this._scope.settings.handleSize,F=this._updateVersion;for(var q in N)N[q]._drawSelection(l,f,$,N,F);l.restore()}}}),E=s.extend(a,{statics:{extend:function l(f){return f._serializeFields&&(f._serializeFields=s.set({},this.prototype._serializeFields,f._serializeFields)),l.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new A,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var l=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(l,function(f){this._events[f]={install:function(b){this.getView()._countItemEvent(b,1)},uninstall:function(b){this.getView()._countItemEvent(b,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:l}})},{initialize:function(){},_initialize:function(l,f){var b=l&&s.isPlainObject(l),_=b&&l.internal===!0,S=this._matrix=new A,P=b&&l.project||De.project,T=De.settings;return this._id=_?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&T.applyMatrix,f&&S.translate(f),S._owner=this,this._style=new oe(P._currentStyle,this,P),_||b&&l.insert==!1||!T.insertItems&&!(b&&l.insert==!0)?this._setProject(P):(b&&l.parent||P)._insertItem(n,this,!0),b&&l!==E.NO_INSERT&&l!==E.INSERT&&this.set(l,{internal:!0,insert:!0,project:!0,parent:!0}),b},_serialize:function(l,f){var b={},_=this;function S(P){for(var T in P){var N=_[T];s.equals(N,T==="leading"?P.fontSize*1.2:P[T])||(b[T]=s.serialize(N,l,T!=="data",f))}}return S(this._serializeFields),this instanceof U||S(this._style._defaults),[this._class,b]},_changed:function(l){var f=this._symbol,b=this._parent||f,_=this._project;l&8&&(this._bounds=this._position=this._decomposed=n),l&16&&(this._globalMatrix=n),b&&l&72&&E._clearBoundsCache(b),l&2&&E._clearBoundsCache(this),_&&_._changed(l,this),f&&f._changed(l)},getId:function(){return this._id},getName:function(){return this._name},setName:function(l){if(this._name&&this._removeNamed(),l===+l+"")throw new Error("Names consisting only of numbers are not supported.");var f=this._getOwner();if(l&&f){var b=f._children,_=f._namedChildren;(_[l]=_[l]||[]).push(this),l in b||(b[l]=this)}this._name=l||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(l){this.getStyle().set(l)}},s.each(["locked","visible","blendMode","opacity","guide"],function(l){var f=s.capitalize(l),b="_"+l,_={locked:256,visible:265};this["get"+f]=function(){return this[b]},this["set"+f]=function(S){S!=this[b]&&(this[b]=S,this._changed(_[l]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(l){if(l!==this._selection){this._selection=l;var f=this._project;f&&(f._updateSelection(this),this._changed(257))}},_changeSelection:function(l,f){var b=this._selection;this.setSelection(f?b|l:b&~l)},isSelected:function(){if(this._selectChildren){for(var l=this._children,f=0,b=l.length;f<b;f++)if(l[f].isSelected())return!0}return!!(this._selection&1)},setSelected:function(l){if(this._selectChildren)for(var f=this._children,b=0,_=f.length;b<_;b++)f[b].setSelected(l);this._changeSelection(1,l)},isFullySelected:function(){var l=this._children,f=!!(this._selection&1);if(l&&f){for(var b=0,_=l.length;b<_;b++)if(!l[b].isFullySelected())return!1;return!0}return f},setFullySelected:function(l){var f=this._children;if(f)for(var b=0,_=f.length;b<_;b++)f[b].setFullySelected(l);this._changeSelection(1,l)},isClipMask:function(){return this._clipMask},setClipMask:function(l){this._clipMask!=(l=!!l)&&(this._clipMask=l,l&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(l){this._data=l},getPosition:function(l){var f=l?g:v,b=this._position||(this._position=this._getPositionFromBounds());return new f(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(l){return this._pivot?this._matrix._transformPoint(this._pivot):(l||this.getBounds()).getCenter(!0)},getPivot:function(){var l=this._pivot;return l?new v(l.x,l.y,this,"setPivot"):null},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(l,f){this[f]=function(b){return this.getBounds(b,l)}},{beans:!0,getBounds:function(l,f){var b=f||l instanceof A,_=s.set({},b?f:l,this._boundsOptions);(!_.stroke||this.getStrokeScaling())&&(_.cacheItem=this);var S=this._getCachedBounds(b&&l,_).rect;return arguments.length?S:new k(S.x,S.y,S.width,S.height,this,"setBounds")},setBounds:function(){var l=x.read(arguments),f=this.getBounds(),b=this._matrix,_=new A,S=l.getCenter();_.translate(S),(l.width!=f.width||l.height!=f.height)&&(b.isInvertible()||(b.set(b._backup||new A().translate(b.getTranslation())),f=this.getBounds()),_.scale(f.width!==0?l.width/f.width:0,f.height!==0?l.height/f.height:0)),S=f.getCenter(),_.translate(-S.x,-S.y),this.transform(_)},_getBounds:function(l,f){var b=this._children;return!b||!b.length?new x:(E._updateBoundsCache(this,f.cacheItem),E._getBounds(b,l,f))},_getBoundsCacheKey:function(l,f){return[l.stroke?1:0,l.handle?1:0,f?1:0].join("")},_getCachedBounds:function(l,f,b){l=l&&l._orNullIfIdentity();var _=f.internal&&!b,S=f.cacheItem,P=_?null:this._matrix._orNullIfIdentity(),T=S&&(!l||l.equals(P))&&this._getBoundsCacheKey(f,_),N=this._bounds;if(E._updateBoundsCache(this._parent||this._symbol,S),T&&N&&T in N){var $=N[T];return{rect:$.rect.clone(),nonscaling:$.nonscaling}}var F=this._getBounds(l||P,f),q=F.rect||F,Q=this._style,K=F.nonscaling||Q.hasStroke()&&!Q.getStrokeScaling();if(T){N||(this._bounds=N={});var $=N[T]={rect:q.clone(),nonscaling:K,internal:_}}return{rect:q,nonscaling:K}},_getStrokeMatrix:function(l,f){var b=this.getStrokeScaling()?null:f&&f.internal?this:this._parent||this._symbol&&this._symbol._item,_=b?b.getViewMatrix().invert():l;return _&&_._shiftless()},statics:{_updateBoundsCache:function(l,f){if(l&&f){var b=f._id,_=l._boundsCache=l._boundsCache||{ids:{},list:[]};_.ids[b]||(_.list.push(f),_.ids[b]=f)}},_clearBoundsCache:function(l){var f=l._boundsCache;if(f){l._bounds=l._position=l._boundsCache=n;for(var b=0,_=f.list,S=_.length;b<S;b++){var P=_[b];P!==l&&(P._bounds=P._position=n,P._boundsCache&&E._clearBoundsCache(P))}}},_getBounds:function(l,f,b){var _=1/0,S=-_,P=_,T=S,N=!1;b=b||{};for(var $=0,F=l.length;$<F;$++){var q=l[$];if(q._visible&&!q.isEmpty(!0)){var Q=q._getCachedBounds(f&&f.appended(q._matrix),b,!0),K=Q.rect;_=Math.min(K.x,_),P=Math.min(K.y,P),S=Math.max(K.x+K.width,S),T=Math.max(K.y+K.height,T),Q.nonscaling&&(N=!0)}}return{rect:isFinite(_)?new x(_,P,S-_,T-P):new x,nonscaling:N}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var l=this._decompose();return l?l.rotation:0},setRotation:function(l){var f=this.getRotation();if(f!=null&&l!=null){var b=this._decomposed;this.rotate(l-f),b&&(b.rotation=l,this._decomposed=b)}},getScaling:function(){var l=this._decompose(),f=l&&l.scaling;return new v(f?f.x:1,f?f.y:1,this,"setScaling")},setScaling:function(){var l=this.getScaling(),f=g.read(arguments,0,{clone:!0,readNull:!0});if(l&&f&&!l.equals(f)){var b=this.getRotation(),_=this._decomposed,S=new A,P=p.isZero;if(P(l.x)||P(l.y))S.translate(_.translation),b&&S.rotate(b),S.scale(f.x,f.y),this._matrix.set(S);else{var T=this.getPosition(!0);S.translate(T),b&&S.rotate(b),S.scale(f.x/l.x,f.y/l.y),b&&S.rotate(-b),S.translate(T.negate()),this.transform(S)}_&&(_.scaling=f,this._decomposed=_)}},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},getGlobalMatrix:function(l){var f=this._globalMatrix;if(f)for(var b=this._parent,_=[];b;){if(!b._globalMatrix){f=null;for(var S=0,P=_.length;S<P;S++)_[S]._globalMatrix=null;break}_.push(b),b=b._parent}if(!f){f=this._globalMatrix=this._matrix.clone();var b=this._parent;b&&f.prepend(b.getGlobalMatrix(!0))}return l?f:f.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(l){(this._applyMatrix=this._canApplyMatrix&&!!l)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(l,f){if(this._project!==l){this._project&&this._installEvents(!1),this._project=l;for(var b=this._children,_=0,S=b&&b.length;_<S;_++)b[_]._setProject(l);f=!0}f&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function l(f){l.base.call(this,f);for(var b=this._children,_=0,S=b&&b.length;_<S;_++)b[_]._installEvents(f)},getLayer:function(){for(var l=this;l=l._parent;)if(l instanceof D)return l;return null},getParent:function(){return this._parent},setParent:function(l){return l.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(l){this.removeChildren(),this.addChildren(l)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var l=this._getOwner();return l&&l._children[this._index+1]||null},getPreviousSibling:function(){var l=this._getOwner();return l&&l._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(l){var f=this._parent,b=f&&f._children;b&&f.insertChildren(l in b?l:n,[this])},equals:function(l){return l===this||l&&this._class===l._class&&this._style.equals(l._style)&&this._matrix.equals(l._matrix)&&this._locked===l._locked&&this._visible===l._visible&&this._blendMode===l._blendMode&&this._opacity===l._opacity&&this._clipMask===l._clipMask&&this._guide===l._guide&&this._equals(l)||!1},_equals:function(l){return s.equals(this._children,l._children)},clone:function(l){var f=new this.constructor(E.NO_INSERT),b=this._children,_=s.pick(l?l.insert:n,l===n||l===!0),S=s.pick(l?l.deep:n,!0);b&&f.copyAttributes(this),(!b||S)&&f.copyContent(this),b||f.copyAttributes(this),_&&f.insertAbove(this);var P=this._name,T=this._parent;if(P&&T){for(var b=T._children,N=P,$=1;b[P];)P=N+" "+$++;P!==N&&f.setName(P)}return f},copyContent:function(l){for(var f=l._children,b=0,_=f&&f.length;b<_;b++)this.addChild(f[b].clone(!1),!0)},copyAttributes:function(l,f){this.setStyle(l._style);for(var b=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],_=0,S=b.length;_<S;_++){var P=b[_];l.hasOwnProperty(P)&&(this[P]=l[P])}f||this._matrix.set(l._matrix,!0),this.setApplyMatrix(l._applyMatrix),this.setPivot(l._pivot),this.setSelection(l._selection);var T=l._data,N=l._name;this._data=T?s.clone(T):null,N&&this.setName(N)},rasterize:function(l,f){var b,_,S;s.isPlainObject(l)?(b=l.resolution,_=l.insert,S=l.raster):(b=l,_=f),S||(S=new X(E.NO_INSERT));var P=this.getStrokeBounds(),T=(b||this.getView().getResolution())/72,N=P.getTopLeft().floor(),$=P.getBottomRight().ceil(),F=new w($.subtract(N)),q=F.multiply(T);if(S.setSize(q,!0),!q.isZero()){var Q=S.getContext(!0),K=new A().scale(T).translate(N.negate());Q.save(),K.applyToContext(Q),this.draw(Q,new s({matrices:[K]})),Q.restore()}return S._matrix.set(new A().translate(N.add(F.divide(2))).scale(1/T)),(_===n||_)&&S.insertAbove(this),S},contains:function(){var l=this._matrix;return l.isInvertible()&&!!this._contains(l._inverseTransform(g.read(arguments)))},_contains:function(l){var f=this._children;if(f){for(var b=f.length-1;b>=0;b--)if(f[b].contains(l))return!0;return!1}return l.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new xe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(l,f){return l instanceof E?this._asPathItem().getIntersections(l._asPathItem(),null,f,!0).length>0:!1}},new function(){function l(){var _=arguments;return this._hitTest(g.read(_),ge.getOptions(_))}function f(){var _=arguments,S=g.read(_),P=ge.getOptions(_),T=[];return this._hitTest(S,new s({all:T},P)),T}function b(_,S,P,T){var N=this._children;if(N)for(var $=N.length-1;$>=0;$--){var F=N[$],q=F!==T&&F._hitTest(_,S,P);if(q&&!S.all)return q}return null}return I.inject({hitTest:l,hitTestAll:f,_hitTest:b}),{hitTest:l,hitTestAll:f,_hitTestChildren:b}},{_hitTest:function(l,f,b){if(this._locked||!this._visible||this._guide&&!f.guides||this.isEmpty())return null;var _=this._matrix,S=b?b.appended(_):this.getGlobalMatrix().prepend(this.getView()._matrix),P=Math.max(f.tolerance,1e-12),T=f._tolerancePadding=new w(xe._getStrokePadding(P,_._shiftless().invert()));if(l=_._inverseTransform(l),!l||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(T.multiply(2))._containsPoint(l))return null;var N=!(f.guides&&!this._guide||f.selected&&!this.isSelected()||f.type&&f.type!==s.hyphenate(this._class)||f.class&&!(this instanceof f.class)),$=f.match,F=this,q,Q;function K(z){return z&&$&&!$(z)&&(z=null),z&&f.all&&f.all.push(z),z}function W(z,te){var se=te?q["get"+te]():F.getPosition();if(l.subtract(se).divide(T).length<=1)return new ge(z,F,{name:te?s.hyphenate(te):z,point:se})}var Y=f.position,B=f.center,Z=f.bounds;if(N&&this._parent&&(Y||B||Z)){if((B||Z)&&(q=this.getInternalBounds()),Q=Y&&W("position")||B&&W("center","Center"),!Q&&Z)for(var V=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],ne=0;ne<8&&!Q;ne++)Q=W("bounds",V[ne]);Q=K(Q)}return Q||(Q=this._hitTestChildren(l,f,S)||N&&K(this._hitTestSelf(l,f,S,this.getStrokeScaling()?null:S._shiftless().invert()))||null),Q&&Q.point&&(Q.point=_.transform(Q.point)),Q},_hitTestSelf:function(l,f){if(f.fill&&this.hasFill()&&this._contains(l))return new ge("fill",this)},matches:function(l,f){function b(T,N){for(var $ in T)if(T.hasOwnProperty($)){var F=T[$],q=N[$];if(s.isPlainObject(F)&&s.isPlainObject(q)){if(!b(F,q))return!1}else if(!s.equals(F,q))return!1}return!0}var _=typeof l;if(_==="object"){for(var S in l)if(l.hasOwnProperty(S)&&!this.matches(S,l[S]))return!1;return!0}else{if(_==="function")return l(this);if(l==="match")return f(this);var P=/^(empty|editable)$/.test(l)?this["is"+s.capitalize(l)]():l==="type"?s.hyphenate(this._class):this[l];if(l==="class"){if(typeof f=="function")return this instanceof f;P=this._class}if(typeof f=="function")return!!f(P);if(f){if(f.test)return f.test(P);if(s.isPlainObject(f))return b(f,P)}return s.equals(P,f)}},getItems:function(l){return E._getItems(this,l,this._matrix)},getItem:function(l){return E._getItems(this,l,this._matrix,null,!0)[0]||null},statics:{_getItems:function l(f,b,_,S,P){if(!S){var T=typeof b=="object"&&b,N=T&&T.overlapping,$=T&&T.inside,F=N||$,K=F&&x.read([F]);S={items:[],recursive:T&&T.recursive!==!1,inside:!!$,overlapping:!!N,rect:K,path:N&&new xe.Rectangle({rectangle:K,insert:!1})},T&&(b=s.filter({},b,{recursive:!0,inside:!0,overlapping:!0}))}var q=f._children,Q=S.items,K=S.rect;_=K&&(_||new A);for(var W=0,Y=q&&q.length;W<Y;W++){var B=q[W],Z=_&&_.appended(B._matrix),V=!0;if(K){var F=B.getBounds(Z);if(!K.intersects(F))continue;K.contains(F)||S.overlapping&&(F.contains(K)||S.path.intersects(B,Z))||(V=!1)}if(V&&B.matches(b)&&(Q.push(B),P)||(S.recursive!==!1&&l(B,b,Z,S,P),P&&Q.length>0))break}return Q}}},{importJSON:function(l){var f=s.importJSON(l,this);return f!==this?this.addChild(f):f},addChild:function(l){return this.insertChild(n,l)},insertChild:function(l,f){var b=f?this.insertChildren(l,[f]):null;return b&&b[0]},addChildren:function(l){return this.insertChildren(this._children.length,l)},insertChildren:function(l,f){var b=this._children;if(b&&f&&f.length>0){f=s.slice(f);for(var _={},S=f.length-1;S>=0;S--){var P=f[S],T=P&&P._id;!P||_[T]?f.splice(S,1):(P._remove(!1,!0),_[T]=!0)}s.splice(b,f,l,0);for(var N=this._project,$=N._changes,S=0,F=f.length;S<F;S++){var P=f[S],q=P._name;P._parent=this,P._setProject(N,!0),q&&P.setName(q),$&&P._changed(5)}this._changed(11)}else f=null;return f},_insertItem:"#insertChild",_insertAt:function(l,f){var b=l&&l._getOwner(),_=l!==this&&b?this:null;return _&&(_._remove(!1,!0),b._insertItem(l._index+f,_)),_},insertAbove:function(l){return this._insertAt(l,1)},insertBelow:function(l){return this._insertAt(l,0)},sendToBack:function(){var l=this._getOwner();return l?l._insertItem(0,this):null},bringToFront:function(){var l=this._getOwner();return l?l._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(l){return this.insertChild(0,l)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(l){return l._insertItem(n,this)},copyTo:function(l){return this.clone(!1).addTo(l)},reduce:function(l){var f=this._children;if(f&&f.length===1){var b=f[0].reduce(l);return this._parent?(b.insertAbove(this),this.remove()):b.remove(),b}return this},_removeNamed:function(){var l=this._getOwner();if(l){var f=l._children,b=l._namedChildren,_=this._name,S=b[_],P=S?S.indexOf(this):-1;P!==-1&&(f[_]==this&&delete f[_],S.splice(P,1),S.length?f[_]=S[0]:delete b[_])}},_remove:function(l,f){var b=this._getOwner(),_=this._project,S=this._index;return this._style&&this._style._dispose(),b?(this._name&&this._removeNamed(),S!=null&&(_._activeLayer===this&&(_._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(b._children,null,S,1)),this._installEvents(!1),l&&_._changes&&this._changed(5),f&&b._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(l){var f=l&&l.insertBelow(this);return f&&this.remove(),f},removeChildren:function(l,f){if(!this._children)return null;l=l||0,f=s.pick(f,this._children.length);for(var b=s.splice(this._children,null,l,f-l),_=b.length-1;_>=0;_--)b[_]._remove(!0,!1);return b.length>0&&this._changed(11),b},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var l=0,f=this._children.length;l<f;l++)this._children[l]._index=l;this._changed(11)}},isEmpty:function(l){var f=this._children,b=f?f.length:0;if(l){for(var _=0;_<b;_++)if(!f[_].isEmpty(l))return!1;return!0}return!b},isEditable:function(){for(var l=this;l;){if(!l._visible||l._locked)return!1;l=l._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(l){function f(T){var N=[];do N.unshift(T);while(T=T._parent);return N}for(var b=f(this),_=f(l),S=0,P=Math.min(b.length,_.length);S<P;S++)if(b[S]!=_[S])return b[S]._index<_[S]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(l){return this._getOrder(l)===-1},isBelow:function(l){return this._getOrder(l)===1},isParent:function(l){return this._parent===l},isChild:function(l){return l&&l._parent===this},isDescendant:function(l){for(var f=this;f=f._parent;)if(f===l)return!0;return!1},isAncestor:function(l){return l?l.isDescendant(this):!1},isSibling:function(l){return this._parent===l._parent},isGroupedWith:function(l){for(var f=this._parent;f;){if(f._parent&&/^(Group|Layer|CompoundPath)$/.test(f._class)&&l.isDescendant(f))return!0;f=f._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(l){var f=l==="rotate";this[l]=function(){var b=arguments,_=(f?s:g).read(b),S=g.read(b,0,{readNull:!0});return this.transform(new A()[l](_,S||this.getPosition(!0)))}},{translate:function(){var l=new A;return this.transform(l.translate.apply(l,arguments))},transform:function(l,f,b){var _=this._matrix,S=l&&!l.isIdentity(),P=b&&this._canApplyMatrix||this._applyMatrix&&(S||!_.isIdentity()||f&&this._children);if(!S&&!P)return this;if(S){!l.isInvertible()&&_.isInvertible()&&(_._backup=_.getValues()),_.prepend(l,!0);var T=this._style,N=T.getFillColor(!0),$=T.getStrokeColor(!0);N&&N.transform(l),$&&$.transform(l)}if(P&&(P=this._transformContent(_,f,b))){var F=this._pivot;F&&_._transformPoint(F,F,!0),_.reset(!0),b&&this._canApplyMatrix&&(this._applyMatrix=!0)}var q=this._bounds,Q=this._position;(S||P)&&this._changed(25);var K=S&&q&&l.decompose();if(K&&K.skewing.isZero()&&K.rotation%90===0){for(var W in q){var Y=q[W];if(Y.nonscaling)delete q[W];else if(P||!Y.internal){var B=Y.rect;l._transformBounds(B,B)}}this._bounds=q;var Z=q[this._getBoundsCacheKey(this._boundsOptions||{})];Z&&(this._position=this._getPositionFromBounds(Z.rect))}else S&&Q&&this._pivot&&(this._position=l._transformPoint(Q,Q));return this},_transformContent:function(l,f,b){var _=this._children;if(_){for(var S=0,P=_.length;S<P;S++)_[S].transform(l,f,b);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(l,f){l=x.read(arguments);var b=this.getBounds(),_=b.height/b.width,S=l.height/l.width,P=(f?_>S:_<S)?l.width/b.width:l.height/b.height,T=new x(new g,new w(b.width*P,b.height*P));T.setCenter(l.getCenter()),this.setBounds(T)}}),{_setStyles:function(l,f,b){var _=this._style,S=this._matrix;if(_.hasFill()&&(l.fillStyle=_.getFillColor().toCanvasStyle(l,S)),_.hasStroke()){l.strokeStyle=_.getStrokeColor().toCanvasStyle(l,S),l.lineWidth=_.getStrokeWidth();var P=_.getStrokeJoin(),T=_.getStrokeCap(),N=_.getMiterLimit();if(P&&(l.lineJoin=P),T&&(l.lineCap=T),N&&(l.miterLimit=N),De.support.nativeDash){var $=_.getDashArray(),F=_.getDashOffset();$&&$.length&&("setLineDash"in l?(l.setLineDash($),l.lineDashOffset=F):(l.mozDash=$,l.mozDashOffset=F))}}if(_.hasShadow()){var q=f.pixelRatio||1,Q=b._shiftless().prepend(new A().scale(q,q)),K=Q.transform(new g(_.getShadowBlur(),0)),W=Q.transform(this.getShadowOffset());l.shadowColor=_.getShadowColor().toCanvasStyle(l),l.shadowBlur=K.getLength(),l.shadowOffsetX=W.x,l.shadowOffsetY=W.y}},draw:function(l,f,b){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var _=f.matrices,S=f.viewMatrix,P=this._matrix,T=_[_.length-1].appended(P);if(T.isInvertible()){S=S?S.appended(T):T,_.push(T),f.updateMatrix&&(this._globalMatrix=T);var N=this._blendMode,$=p.clamp(this._opacity,0,1),F=N==="normal",q=me.nativeModes[N],Q=F&&$===1||f.dontStart||f.clip||(q||F&&$<1)&&this._canComposite(),K=f.pixelRatio||1,W,Y,B;if(!Q){var Z=this.getStrokeBounds(S);if(!Z.width||!Z.height){_.pop();return}B=f.offset,Y=f.offset=Z.getTopLeft().floor(),W=l,l=ve.getContext(Z.getSize().ceil().add(1).multiply(K)),K!==1&&l.scale(K,K)}l.save();var V=b?b.appended(P):this._canScaleStroke&&!this.getStrokeScaling(!0)&&S,ne=!Q&&f.clipItem,z=!V||ne;if(Q?(l.globalAlpha=$,q&&(l.globalCompositeOperation=N)):z&&l.translate(-Y.x,-Y.y),z&&(Q?P:S).applyToContext(l),ne&&f.clipItem.draw(l,f.extend({clip:!0})),V){l.setTransform(K,0,0,K,0,0);var te=f.offset;te&&l.translate(-te.x,-te.y)}this._draw(l,f,S,V),l.restore(),_.pop(),f.clip&&!f.dontFinish&&l.clip(this.getFillRule()),Q||(me.process(N,l,W,$,Y.subtract(B).multiply(K)),ve.release(l),f.offset=B)}}},_isUpdated:function(l){var f=this._parent;if(f instanceof Me)return f._isUpdated(l);var b=this._updateVersion===l;return!b&&f&&f._visible&&f._isUpdated(l)&&(this._updateVersion=l,b=!0),b},_drawSelection:function(l,f,b,_,S){var P=this._selection,T=P&1,N=P&2||T&&this._selectBounds,$=P&4;if(this._drawSelected||(T=!1),(T||N||$)&&this._isUpdated(S)){var F,q=this.getSelectedColor(!0)||(F=this.getLayer())&&F.getSelectedColor(!0),Q=f.appended(this.getGlobalMatrix(!0)),K=b/2;if(l.strokeStyle=l.fillStyle=q?q.toCanvasStyle(l):"#009dec",T&&this._drawSelected(l,Q,_),$){var W=this.getPosition(!0),Y=this._parent,B=Y?Y.localToGlobal(W):W,Z=B.x,V=B.y;l.beginPath(),l.arc(Z,V,K,0,Math.PI*2,!0),l.stroke();for(var ne=[[0,-1],[1,0],[0,1],[-1,0]],z=K,te=b+1,se=0;se<4;se++){var ue=ne[se],re=ue[0],be=ue[1];l.moveTo(Z+re*z,V+be*z),l.lineTo(Z+re*te,V+be*te),l.stroke()}}if(N){var Se=Q._transformCorners(this.getInternalBounds());l.beginPath();for(var se=0;se<8;se++)l[se?"lineTo":"moveTo"](Se[se],Se[++se]);l.closePath(),l.stroke();for(var se=0;se<8;se++)l.fillRect(Se[se]-K,Se[++se]-K,b,b)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(l){this["removeOn"+s.capitalize(l)]=function(){var f={};return f[l]=!0,this.removeOn(f)}},{removeOn:function(l){for(var f in l)if(l[f]){var b="mouse"+f,_=this._project,S=_._removeSets=_._removeSets||{};S[b]=S[b]||{},S[b][this._id]=this}return this}}),{tween:function(l,f,b){b||(b=f,f=l,l=null,b||(b=f,f=null));var _=b&&b.easing,S=b&&b.start,P=b!=null&&(typeof b=="number"?b:b.duration),T=new J(this,l,f,P,_,S);function N($){T._handleFrame($.time*1e3),T.running||this.off("frame",N)}return P&&this.on("frame",N),T},tweenTo:function(l,f){return this.tween(null,l,f)},tweenFrom:function(l,f){return this.tween(l,null,f)}}),U=E.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(f){this._children=[],this._namedChildren={},this._initialize(f)||this.addChildren(Array.isArray(f)?f:arguments)},_changed:function l(f){l.base.call(this,f),f&2050&&(this._clipItem=n)},_getClipItem:function(){var l=this._clipItem;if(l===n){l=null;for(var f=this._children,b=0,_=f.length;b<_;b++)if(f[b]._clipMask){l=f[b];break}this._clipItem=l}return l},isClipped:function(){return!!this._getClipItem()},setClipped:function(l){var f=this.getFirstChild();f&&f.setClipMask(l)},_getBounds:function l(f,b){var _=this._getClipItem();return _?_._getCachedBounds(_._matrix.prepended(f),s.set({},b,{stroke:!1})):l.base.call(this,f,b)},_hitTestChildren:function l(f,b,_){var S=this._getClipItem();return(!S||S.contains(f))&&l.base.call(this,f,b,_,S)},_draw:function(l,f){var b=f.clip,_=!b&&this._getClipItem();f=f.extend({clipItem:_,clip:!1}),b?(l.beginPath(),f.dontStart=f.dontFinish=!0):_&&_.draw(l,f.extend({clip:!0}));for(var S=this._children,P=0,T=S.length;P<T;P++){var N=S[P];N!==_&&N.draw(l,f)}}}),D=U.extend({_class:"Layer",initialize:function(){U.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function l(){return this._parent?l.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),R=E.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(f,b){this._initialize(f,b)},_equals:function(l){return this._type===l._type&&this._size.equals(l._size)&&s.equals(this._radius,l._radius)},copyContent:function(l){this.setType(l._type),this.setSize(l._size),this.setRadius(l._radius)},getType:function(){return this._type},setType:function(l){this._type=l},getShape:"#getType",setShape:"#setType",getSize:function(){var l=this._size;return new C(l.width,l.height,this,"setSize")},setSize:function(){var l=w.read(arguments);if(!this._size)this._size=l.clone();else if(!this._size.equals(l)){var f=this._type,b=l.width,_=l.height;f==="rectangle"?this._radius.set(w.min(this._radius,l.divide(2).abs())):f==="circle"?(b=_=(b+_)/2,this._radius=b/2):f==="ellipse"&&this._radius._set(b/2,_/2),this._size._set(b,_),this._changed(9)}},getRadius:function(){var l=this._radius;return this._type==="circle"?l:new C(l.width,l.height,this,"setRadius")},setRadius:function(l){var f=this._type;if(f==="circle"){if(l===this._radius)return;var b=l*2;this._radius=l,this._size._set(b,b)}else if(l=w.read(arguments),!this._radius)this._radius=l.clone();else{if(this._radius.equals(l))return;if(this._radius.set(l),f==="rectangle"){var b=w.max(this._size,l.multiply(2));this._size.set(b)}else f==="ellipse"&&this._size._set(l.width*2,l.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(l){var f=new xe[s.capitalize(this._type)]({center:new g,size:this._size,radius:this._radius,insert:!1});return f.copyAttributes(this),De.settings.applyMatrix&&f.setApplyMatrix(!0),(l===n||l)&&f.insertAbove(this),f},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(l,f,b,_){var S=this._style,P=S.hasFill(),T=S.hasStroke(),N=f.dontFinish||f.clip,$=!_;if(P||T||N){var F=this._type,q=this._radius,Q=F==="circle";if(f.dontStart||l.beginPath(),$&&Q)l.arc(0,0,q,0,Math.PI*2,!0);else{var K=Q?q:q.width,W=Q?q:q.height,Y=this._size,B=Y.width,Z=Y.height;if($&&F==="rectangle"&&K===0&&W===0)l.rect(-B/2,-Z/2,B,Z);else{var V=B/2,ne=Z/2,z=1-.5522847498307936,te=K*z,se=W*z,ue=[-V,-ne+W,-V,-ne+se,-V+te,-ne,-V+K,-ne,V-K,-ne,V-te,-ne,V,-ne+se,V,-ne+W,V,ne-W,V,ne-se,V-te,ne,V-K,ne,-V+K,ne,-V+te,ne,-V,ne-se,-V,ne-W];_&&_.transform(ue,ue,32),l.moveTo(ue[0],ue[1]),l.bezierCurveTo(ue[2],ue[3],ue[4],ue[5],ue[6],ue[7]),V!==K&&l.lineTo(ue[8],ue[9]),l.bezierCurveTo(ue[10],ue[11],ue[12],ue[13],ue[14],ue[15]),ne!==W&&l.lineTo(ue[16],ue[17]),l.bezierCurveTo(ue[18],ue[19],ue[20],ue[21],ue[22],ue[23]),V!==K&&l.lineTo(ue[24],ue[25]),l.bezierCurveTo(ue[26],ue[27],ue[28],ue[29],ue[30],ue[31])}}l.closePath()}!N&&(P||T)&&(this._setStyles(l,f,b),P&&(l.fill(S.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),T&&l.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(l,f){var b=new x(this._size).setCenter(0,0),_=this._style,S=f.stroke&&_.hasStroke()&&_.getStrokeWidth();return l&&(b=l._transformBounds(b)),S?b.expand(xe._getStrokePadding(S,this._getStrokeMatrix(l,f))):b}},new function(){function l(b,_,S){var P=b._radius;if(!P.isZero())for(var T=b._size.divide(2),N=1;N<=4;N++){var $=new g(N>1&&N<4?-1:1,N>2?-1:1),F=$.multiply(T),q=F.subtract($.multiply(P)),Q=new x(S?F.add($.multiply(S)):F,q);if(Q.contains(_))return{point:q,quadrant:N}}}function f(b,_,S,P){var T=b.divide(_);return(!P||T.isInQuadrant(P))&&T.subtract(T.normalize()).multiply(_).divide(S).length<=1}return{_contains:function b(_){if(this._type==="rectangle"){var S=l(this,_);return S?_.subtract(S.point).divide(this._radius).getLength()<=1:b.base.call(this,_)}else return _.divide(this.size).getLength()<=.5},_hitTestSelf:function b(_,S,P,T){var N=!1,$=this._style,F=S.stroke&&$.hasStroke(),q=S.fill&&$.hasFill();if(F||q){var Q=this._type,K=this._radius,W=F?$.getStrokeWidth()/2:0,Y=S._tolerancePadding.add(xe._getStrokePadding(W,!$.getStrokeScaling()&&T));if(Q==="rectangle"){var B=Y.multiply(2),Z=l(this,_,B);if(Z)N=f(_.subtract(Z.point),K,Y,Z.quadrant);else{var V=new x(this._size).setCenter(0,0),ne=V.expand(B),z=V.expand(B.negate());N=ne._containsPoint(_)&&!z._containsPoint(_)}}else N=f(_,K,Y)}return N?new ge(F?"stroke":"fill",this):b.base.apply(this,arguments)}}},{statics:new function(){function l(f,b,_,S,P){var T=s.create(R.prototype);return T._type=f,T._size=_,T._radius=S,T._initialize(s.getNamed(P),b),T}return{Circle:function(){var f=arguments,b=g.readNamed(f,"center"),_=s.readNamed(f,"radius");return l("circle",b,new w(_*2),_,f)},Rectangle:function(){var f=arguments,b=x.readNamed(f,"rectangle"),_=w.min(w.readNamed(f,"radius"),b.getSize(!0).divide(2));return l("rectangle",b.getCenter(!0),b.getSize(!0),_,f)},Ellipse:function(){var f=arguments,b=R._readEllipse(f),_=b.radius;return l("ellipse",b.center,_.multiply(2),_,f)},_readEllipse:function(f){var b,_;if(s.hasNamed(f,"radius"))b=g.readNamed(f,"center"),_=w.readNamed(f,"radius");else{var S=x.readNamed(f,"rectangle");b=S.getCenter(!0),_=S.getSize(!0).divide(2)}return{center:b,radius:_}}}}}),X=E.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(f,b){if(!this._initialize(f,b!==n&&g.read(arguments))){var _,S=typeof f,P=S==="string"?i.getElementById(f):S==="object"?f:null;if(P&&P!==E.NO_INSERT){if(P.getContext||P.naturalHeight!=null)_=P;else if(P){var T=w.read(arguments);T.isZero()||(_=ve.getCanvas(T))}}_?this.setImage(_):this.setSource(f)}this._size||(this._size=new w,this._loaded=!1)},_equals:function(l){return this.getSource()===l.getSource()},copyContent:function(l){var f=l._image,b=l._canvas;if(f)this._setImage(f);else if(b){var _=ve.getCanvas(l._size);_.getContext("2d").drawImage(b,0,0),this._setImage(_)}this._crossOrigin=l._crossOrigin},getSize:function(){var l=this._size;return new C(l?l.width:0,l?l.height:0,this,"setSize")},setSize:function(l,f){var b=w.read(arguments);if(b.equals(this._size))f&&this.clear();else if(b.width>0&&b.height>0){var _=!f&&this.getElement();this._setImage(ve.getCanvas(b)),_&&this.getContext(!0).drawImage(_,0,0,b.width,b.height)}else this._canvas&&ve.release(this._canvas),this._size=b.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(l){this.setSize(l,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(l){this.setSize(this.getWidth(),l)},getLoaded:function(){return this._loaded},isEmpty:function(){var l=this._size;return!l||l.width===0&&l.height===0},getResolution:function(){var l=this._matrix,f=new g(0,0).transform(l),b=new g(1,0).transform(l).subtract(f),_=new g(0,1).transform(l).subtract(f);return new w(72/b.getLength(),72/_.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(l){var f=this;function b(_){var S=f.getView(),P=_&&_.type||"load";S&&f.responds(P)&&(De=S._scope,f.emit(P,new St(_)))}this._setImage(l),this._loaded?setTimeout(b,0):l&&Oe.add(l,{load:function(_){f._setImage(l),b(_)},error:b})},_setImage:function(l){this._canvas&&ve.release(this._canvas),l&&l.getContext?(this._image=null,this._canvas=l,this._loaded=!0):(this._image=l,this._canvas=null,this._loaded=!!(l&&l.src&&l.complete)),this._size=new w(l?l.naturalWidth||l.width:0,l?l.naturalHeight||l.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var l=ve.getContext(this._size);try{this._image&&l.drawImage(this._image,0,0),this._canvas=l.canvas}catch{ve.release(l)}}return this._canvas},setCanvas:"#setImage",getContext:function(l){return this._context||(this._context=this.getCanvas().getContext("2d")),l&&(this._image=null,this._changed(1025)),this._context},setContext:function(l){this._context=l},getSource:function(){var l=this._image;return l&&l.src||this.toDataURL()},setSource:function(l){var f=new t.Image,b=this._crossOrigin;b&&(f.crossOrigin=b),l&&(f.src=l),this.setImage(f)},getCrossOrigin:function(){var l=this._image;return l&&l.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(l){this._crossOrigin=l;var f=this._image;f&&(f.crossOrigin=l)},getSmoothing:function(){return this._smoothing},setSmoothing:function(l){this._smoothing=typeof l=="string"?l:l?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var l=x.read(arguments),f=ve.getContext(l.getSize());return f.drawImage(this.getCanvas(),l.x,l.y,l.width,l.height,0,0,l.width,l.height),f.canvas},getSubRaster:function(){var l=x.read(arguments),f=new X(E.NO_INSERT);return f._setImage(this.getSubCanvas(l)),f.translate(l.getCenter().subtract(this.getSize().divide(2))),f._matrix.prepend(this._matrix),f.insertAbove(this),f},toDataURL:function(){var l=this._image,f=l&&l.src;if(/^data:/.test(f))return f;var b=this.getCanvas();return b?b.toDataURL.apply(b,arguments):null},drawImage:function(l){var f=g.read(arguments,1);this.getContext(!0).drawImage(l,f.x,f.y)},getAverageColor:function(l){var f,b;if(l?l instanceof Fe?(b=l,f=l.getBounds()):typeof l=="object"&&("width"in l?f=new x(l):"x"in l&&(f=new x(l.x-.5,l.y-.5,1,1))):f=this.getBounds(),!f)return null;var _=32,S=Math.min(f.width,_),P=Math.min(f.height,_),T=X._sampleContext;T?T.clearRect(0,0,_+1,_+1):T=X._sampleContext=ve.getContext(new w(_)),T.save();var N=new A().scale(S/f.width,P/f.height).translate(-f.x,-f.y);N.applyToContext(T),b&&b.draw(T,new s({clip:!0,matrices:[N]})),this._matrix.applyToContext(T);var $=this.getElement(),F=this._size;$&&T.drawImage($,-F.width/2,-F.height/2),T.restore();for(var q=T.getImageData(.5,.5,Math.ceil(S),Math.ceil(P)).data,Q=[0,0,0],K=0,W=0,Y=q.length;W<Y;W+=4){var B=q[W+3];K+=B,B/=255,Q[0]+=q[W]*B,Q[1]+=q[W+1]*B,Q[2]+=q[W+2]*B}for(var W=0;W<3;W++)Q[W]/=K;return K?Ue.read(Q):null},getPixel:function(){var l=g.read(arguments),f=this.getContext().getImageData(l.x,l.y,1,1).data;return new Ue("rgb",[f[0]/255,f[1]/255,f[2]/255],f[3]/255)},setPixel:function(){var l=arguments,f=g.read(l),b=Ue.read(l),_=b._convert("rgb"),S=b._alpha,P=this.getContext(!0),T=P.createImageData(1,1),N=T.data;N[0]=_[0]*255,N[1]=_[1]*255,N[2]=_[2]*255,N[3]=S!=null?S*255:255,P.putImageData(T,f.x,f.y)},clear:function(){var l=this._size;this.getContext(!0).clearRect(0,0,l.width+1,l.height+1)},createImageData:function(){var l=w.read(arguments);return this.getContext().createImageData(l.width,l.height)},getImageData:function(){var l=x.read(arguments);return l.isEmpty()&&(l=new x(this._size)),this.getContext().getImageData(l.x,l.y,l.width,l.height)},putImageData:function(l){var f=g.read(arguments,1);this.getContext(!0).putImageData(l,f.x,f.y)},setImageData:function(l){this.setSize(l),this.getContext(!0).putImageData(l,0,0)},_getBounds:function(l,f){var b=new x(this._size).setCenter(0,0);return l?l._transformBounds(b):b},_hitTestSelf:function(l){if(this._contains(l)){var f=this;return new ge("pixel",f,{offset:l.add(f._size.divide(2)).round(),color:{get:function(){return f.getPixel(this.offset)}}})}},_draw:function(l,f,b){var _=this.getElement();if(_&&_.width>0&&_.height>0){l.globalAlpha=p.clamp(this._opacity,0,1),this._setStyles(l,f,b);var S=this._smoothing,P=S==="off";We.setPrefixed(l,P?"imageSmoothingEnabled":"imageSmoothingQuality",P?!1:S),l.drawImage(_,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ce=E.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(f,b){this._initialize(f,b!==n&&g.read(arguments,1))||this.setDefinition(f instanceof ie?f:new ie(f))},_equals:function(l){return this._definition===l._definition},copyContent:function(l){this.setDefinition(l._definition)},getDefinition:function(){return this._definition},setDefinition:function(l){this._definition=l,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(l,f){var b=this._definition._item;return b._getCachedBounds(b._matrix.prepended(l),f)},_hitTestSelf:function(l,f,b){var _=f.extend({all:!1}),S=this._definition._item._hitTest(l,_,b);return S&&(S.item=this),S},_draw:function(l,f){this._definition._item.draw(l,f)}}),ie=s.extend({_class:"SymbolDefinition",initialize:function(f,b){this._id=m.get(),this.project=De.project,f&&this.setItem(f,b)},_serialize:function(l,f){return f.add(this,function(){return s.serialize([this._class,this._item],l,!1,f)})},_changed:function(l){l&8&&E._clearBoundsCache(this),l&1&&this.project._changed(l)},getItem:function(){return this._item},setItem:function(l,f){l._symbol&&(l=l.clone()),this._item&&(this._item._symbol=null),this._item=l,l.remove(),l.setSelected(!1),f||l.setPosition(new g),l._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(l){return new ce(this,l)},clone:function(){return new ie(this._item.clone(!1))},equals:function(l){return l===this||l&&this._item.equals(l._item)||!1}}),ge=s.extend({_class:"HitResult",initialize:function(f,b,_){this.type=f,this.item=b,_&&this.inject(_)},statics:{getOptions:function(l){var f=l&&s.read(l);return new s({type:null,tolerance:De.settings.hitTolerance,fill:!f,stroke:!f,segments:!f,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},f)}}}),H=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(f,b,_,S,P,T){var N=arguments.length,$,F,q,Q;N>0&&(f==null||typeof f=="object"?N===1&&f&&"point"in f?($=f.point,F=f.handleIn,q=f.handleOut,Q=f.selection):($=f,F=b,q=_,Q=S):($=[f,b],F=_!==n?[_,S]:null,q=P!==n?[P,T]:null)),new ye($,this,"_point"),new ye(F,this,"_handleIn"),new ye(q,this,"_handleOut"),Q&&this.setSelection(Q)},_serialize:function(l,f){var b=this._point,_=this._selection,S=_||this.hasHandles()?[b,this._handleIn,this._handleOut]:b;return _&&S.push(_),s.serialize(S,l,!0,f)},_changed:function(l){var f=this._path;if(f){var b=f._curves,_=this._index,S;b&&((!l||l===this._point||l===this._handleIn)&&(S=_>0?b[_-1]:f._closed?b[b.length-1]:null)&&S._changed(),(!l||l===this._point||l===this._handleOut)&&(S=b[_])&&S._changed()),f._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(g.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(g.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(g.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var l=this._handleIn,f=this._handleOut;return!l.isZero()&&!f.isZero()&&l.isCollinear(f)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(l){var f=this._selection,b=this._path;this._selection=l=l||0,b&&l!==f&&(b._updateSelection(this,f,l),b._changed(257))},_changeSelection:function(l,f){var b=this._selection;this.setSelection(f?b|l:b&~l)},isSelected:function(){return!!(this._selection&7)},setSelected:function(l){this._changeSelection(7,l)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var l=this._path,f=this._index;return l?(f>0&&!l._closed&&f===l._segments.length-1&&f--,l.getCurves()[f]||null):null},getLocation:function(){var l=this.getCurve();return l?new ke(l,this===l._segment1?0:1):null},getNext:function(){var l=this._path&&this._path._segments;return l&&(l[this._index+1]||this._path._closed&&l[0])||null},smooth:function(l,f,b){var _=l||{},S=_.type,P=_.factor,T=this.getPrevious(),N=this.getNext(),$=(T||this)._point,F=this._point,q=(N||this)._point,Q=$.getDistance(F),K=F.getDistance(q);if(!S||S==="catmull-rom"){var W=P===n?.5:P,Y=Math.pow(Q,W),B=Y*Y,Z=Math.pow(K,W),V=Z*Z;if(!f&&T){var ne=2*V+3*Z*Y+B,z=3*Z*(Z+Y);this.setHandleIn(z!==0?new g((V*$._x+ne*F._x-B*q._x)/z-F._x,(V*$._y+ne*F._y-B*q._y)/z-F._y):new g)}if(!b&&N){var ne=2*B+3*Y*Z+V,z=3*Y*(Y+Z);this.setHandleOut(z!==0?new g((B*q._x+ne*F._x-V*$._x)/z-F._x,(B*q._y+ne*F._y-V*$._y)/z-F._y):new g)}}else if(S==="geometric"){if(T&&N){var te=$.subtract(q),se=P===n?.4:P,ue=se*Q/(Q+K);f||this.setHandleIn(te.multiply(ue)),b||this.setHandleOut(te.multiply(ue-se))}}else throw new Error("Smoothing method '"+S+"' not supported.")},getPrevious:function(){var l=this._path&&this._path._segments;return l&&(l[this._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var l=this._path;return l&&this._index===l._segments.length-1||!1},reverse:function(){var l=this._handleIn,f=this._handleOut,b=l.clone();l.set(f),f.set(b)},reversed:function(){return new H(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new H(this._point,this._handleIn,this._handleOut)},equals:function(l){return l===this||l&&this._class===l._class&&this._point.equals(l._point)&&this._handleIn.equals(l._handleIn)&&this._handleOut.equals(l._handleOut)||!1},toString:function(){var l=["point: "+this._point];return this._handleIn.isZero()||l.push("handleIn: "+this._handleIn),this._handleOut.isZero()||l.push("handleOut: "+this._handleOut),"{ "+l.join(", ")+" }"},transform:function(l){this._transformCoordinates(l,new Array(6),!0),this._changed()},interpolate:function(l,f,b){var _=1-b,S=b,P=l._point,T=f._point,N=l._handleIn,$=f._handleIn,F=f._handleOut,q=l._handleOut;this._point._set(_*P._x+S*T._x,_*P._y+S*T._y,!0),this._handleIn._set(_*N._x+S*$._x,_*N._y+S*$._y,!0),this._handleOut._set(_*q._x+S*F._x,_*q._y+S*F._y,!0),this._changed()},_transformCoordinates:function(l,f,b){var _=this._point,S=!b||!this._handleIn.isZero()?this._handleIn:null,P=!b||!this._handleOut.isZero()?this._handleOut:null,T=_._x,N=_._y,$=2;return f[0]=T,f[1]=N,S&&(f[$++]=S._x+T,f[$++]=S._y+N),P&&(f[$++]=P._x+T,f[$++]=P._y+N),l&&(l._transformCoordinates(f,f,$/2),T=f[0],N=f[1],b?(_._x=T,_._y=N,$=2,S&&(S._x=f[$++]-T,S._y=f[$++]-N),P&&(P._x=f[$++]-T,P._y=f[$++]-N)):(S||(f[$++]=T,f[$++]=N),P||(f[$++]=T,f[$++]=N))),f}}),ye=g.extend({initialize:function(f,b,_){var S,P,T;if(!f)S=P=0;else if((S=f[0])!==n)P=f[1];else{var N=f;(S=N.x)===n&&(N=g.read(arguments),S=N.x),P=N.y,T=N.selected}this._x=S,this._y=P,this._owner=b,b[_]=this,T&&this.setSelected(!0)},_set:function(l,f){return this._x=l,this._y=f,this._owner._changed(this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner._changed(this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner._changed(this)},isZero:function(){var l=p.isZero;return l(this._x)&&l(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){var l=this._owner;return this===l._point?1:this===l._handleIn?2:this===l._handleOut?4:0}}),je=s.extend({_class:"Curve",beans:!0,initialize:function(f,b,_,S,P,T,N,$){var F=arguments.length,q,Q,K,W,Y,B;F===3?(this._path=f,q=b,Q=_):F?F===1?"segment1"in f?(q=new H(f.segment1),Q=new H(f.segment2)):"point1"in f?(K=f.point1,Y=f.handle1,B=f.handle2,W=f.point2):Array.isArray(f)&&(K=[f[0],f[1]],W=[f[6],f[7]],Y=[f[2]-f[0],f[3]-f[1]],B=[f[4]-f[6],f[5]-f[7]]):F===2?(q=new H(f),Q=new H(b)):F===4?(K=f,Y=b,B=_,W=S):F===8&&(K=[f,b],W=[N,$],Y=[_-f,S-b],B=[P-N,T-$]):(q=new H,Q=new H),this._segment1=q||new H(K,null,Y),this._segment2=Q||new H(W,B,null)},_serialize:function(l,f){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],l,!0,f)},_changed:function(){this._length=this._bounds=n},clone:function(){return new je(this._segment1,this._segment2)},toString:function(){var l=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||l.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||l.push("handle2: "+this._segment2._handleIn),l.push("point2: "+this._segment2._point),"{ "+l.join(", ")+" }"},classify:function(){return je.classify(this.getValues())},remove:function(){var l=!1;if(this._path){var f=this._segment2,b=f._handleOut;l=f.remove(),l&&this._segment1._handleOut.set(b)}return l},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(g.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(g.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(g.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(g.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index+1]||this._path._closed&&l[0])||null},getPrevious:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var l=this._path;return l&&this._segment1._index===l._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(l){this.getPoint1().setSelected(l),this.getHandle1().setSelected(l),this.getHandle2().setSelected(l),this.getPoint2().setSelected(l)},getValues:function(l){return je.getValues(this._segment1,this._segment2,l)},getPoints:function(){for(var l=this.getValues(),f=[],b=0;b<8;b+=2)f.push(new g(l[b],l[b+1]));return f}},{getLength:function(){return this._length==null&&(this._length=je.getLength(this.getValues(),0,1)),this._length},getArea:function(){return je.getArea(this.getValues())},getLine:function(){return new j(this._segment1._point,this._segment2._point)},getPart:function(l,f){return new je(je.getPart(this.getValues(),l,f))},getPartLength:function(l,f){return je.getLength(this.getValues(),l,f)},divideAt:function(l){return this.divideAtTime(l&&l.curve===this?l.time:this.getTimeAt(l))},divideAtTime:function(l,f){var b=1e-8,_=1-b,S=null;if(l>=b&&l<=_){var P=je.subdivide(this.getValues(),l),T=P[0],N=P[1],$=f||this.hasHandles(),F=this._segment1,q=this._segment2,Q=this._path;$&&(F._handleOut._set(T[2]-T[0],T[3]-T[1]),q._handleIn._set(N[4]-N[6],N[5]-N[7]));var K=T[6],W=T[7],Y=new H(new g(K,W),$&&new g(T[4]-K,T[5]-W),$&&new g(N[2]-K,N[3]-W));Q?(Q.insert(F._index+1,Y),S=this.getNext()):(this._segment2=Y,this._changed(),S=new je(Y,q))}return S},splitAt:function(l){var f=this._path;return f?f.splitAt(l):null},splitAtTime:function(l){return this.splitAt(this.getLocationAtTime(l))},divide:function(l,f){return this.divideAtTime(l===n?.5:f?l:this.getTimeAt(l))},split:function(l,f){return this.splitAtTime(l===n?.5:f?l:this.getTimeAt(l))},reversed:function(){return new je(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(l,f,b,_){var S=l._point,P=l._handleOut,T=f._handleIn,N=f._point,$=S.x,F=S.y,q=N.x,Q=N.y,K=_?[$,F,$,F,q,Q,q,Q]:[$,F,$+P._x,F+P._y,q+T._x,Q+T._y,q,Q];return b&&b._transformCoordinates(K,K,4),K},subdivide:function(l,f){var b=l[0],_=l[1],S=l[2],P=l[3],T=l[4],N=l[5],$=l[6],F=l[7];f===n&&(f=.5);var q=1-f,Q=q*b+f*S,K=q*_+f*P,W=q*S+f*T,Y=q*P+f*N,B=q*T+f*$,Z=q*N+f*F,V=q*Q+f*W,ne=q*K+f*Y,z=q*W+f*B,te=q*Y+f*Z,se=q*V+f*z,ue=q*ne+f*te;return[[b,_,Q,K,V,ne,se,ue],[se,ue,z,te,B,Z,$,F]]},getMonoCurves:function(l,f){var b=[],_=f?0:1,S=l[_+0],P=l[_+2],T=l[_+4],N=l[_+6];if(S>=P==P>=T&&P>=T==T>=N||je.isStraight(l))b.push(l);else{var $=3*(P-T)-S+N,F=2*(S+T)-4*P,q=P-S,Q=1e-8,K=1-Q,W=[],Y=p.solveQuadratic($,F,q,W,Q,K);if(!Y)b.push(l);else{W.sort();var B=W[0],Z=je.subdivide(l,B);b.push(Z[0]),Y>1&&(B=(W[1]-B)/(1-B),Z=je.subdivide(Z[1],B),b.push(Z[0])),b.push(Z[1])}}return b},solveCubic:function(l,f,b,_,S,P){var T=l[f],N=l[f+2],$=l[f+4],F=l[f+6],q=0;if(!(T<b&&F<b&&N<b&&$<b||T>b&&F>b&&N>b&&$>b)){var Q=3*(N-T),K=3*($-N)-Q,W=F-T-Q-K;q=p.solveCubic(W,K,Q,T-b,_,S,P)}return q},getTimeOf:function(l,f){var b=new g(l[0],l[1]),_=new g(l[6],l[7]),S=1e-12,P=1e-7,T=f.isClose(b,S)?0:f.isClose(_,S)?1:null;if(T===null)for(var N=[f.x,f.y],$=[],F=0;F<2;F++)for(var q=je.solveCubic(l,F,N[F],$,0,1),Q=0;Q<q;Q++){var K=$[Q];if(f.isClose(je.getPoint(l,K),P))return K}return f.isClose(b,P)?0:f.isClose(_,P)?1:null},getNearestTime:function(l,f){if(je.isStraight(l)){var b=l[0],_=l[1],S=l[6],P=l[7],T=S-b,N=P-_,$=T*T+N*N;if($===0)return 0;var F=((f.x-b)*T+(f.y-_)*N)/$;return F<1e-12?0:F>.999999999999?1:je.getTimeOf(l,new g(b+F*T,_+F*N))}var q=100,Q=1/0,K=0;function W(Z){if(Z>=0&&Z<=1){var V=f.getDistance(je.getPoint(l,Z),!0);if(V<Q)return Q=V,K=Z,!0}}for(var Y=0;Y<=q;Y++)W(Y/q);for(var B=1/(q*2);B>1e-8;)!W(K-B)&&!W(K+B)&&(B/=2);return K},getPart:function(l,f,b){var _=f>b;if(_){var S=f;f=b,b=S}return f>0&&(l=je.subdivide(l,f)[1]),b<1&&(l=je.subdivide(l,(b-f)/(1-f))[0]),_?[l[6],l[7],l[4],l[5],l[2],l[3],l[0],l[1]]:l},isFlatEnough:function(l,f){var b=l[0],_=l[1],S=l[2],P=l[3],T=l[4],N=l[5],$=l[6],F=l[7],q=3*S-2*b-$,Q=3*P-2*_-F,K=3*T-2*$-b,W=3*N-2*F-_;return Math.max(q*q,K*K)+Math.max(Q*Q,W*W)<=16*f*f},getArea:function(l){var f=l[0],b=l[1],_=l[2],S=l[3],P=l[4],T=l[5],N=l[6],$=l[7];return 3*(($-b)*(_+P)-(N-f)*(S+T)+S*(f-P)-_*(b-T)+$*(P+f/3)-N*(T+b/3))/20},getBounds:function(l){for(var f=l.slice(0,2),b=f.slice(),_=[0,0],S=0;S<2;S++)je._addBounds(l[S],l[S+2],l[S+4],l[S+6],S,0,f,b,_);return new x(f[0],f[1],b[0]-f[0],b[1]-f[1])},_addBounds:function(l,f,b,_,S,P,T,N,$){function F(se,ue){var re=se-ue,be=se+ue;re<T[S]&&(T[S]=re),be>N[S]&&(N[S]=be)}P/=2;var q=T[S]+P,Q=N[S]-P;if(l<q||f<q||b<q||_<q||l>Q||f>Q||b>Q||_>Q)if(f<l!=f<_&&b<l!=b<_)F(l,0),F(_,0);else{var K=3*(f-b)-l+_,W=2*(l+b)-4*f,Y=f-l,B=p.solveQuadratic(K,W,Y,$),Z=1e-8,V=1-Z;F(_,0);for(var ne=0;ne<B;ne++){var z=$[ne],te=1-z;Z<=z&&z<=V&&F(te*te*te*l+3*te*te*z*f+3*te*z*z*b+z*z*z*_,P)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(l){this[l]=function(){this._bounds||(this._bounds={});var f=this._bounds[l];return f||(f=this._bounds[l]=xe[l]([this._segment1,this._segment2],!1,this._path)),f.clone()}},{}),s.each({isStraight:function(l,f,b,_){if(f.isZero()&&b.isZero())return!0;var S=_.subtract(l);if(S.isZero())return!1;if(S.isCollinear(f)&&S.isCollinear(b)){var P=new j(l,_),T=1e-7;if(P.getDistance(l.add(f))<T&&P.getDistance(_.add(b))<T){var N=S.dot(S),$=S.dot(f)/N,F=S.dot(b)/N;return $>=0&&$<=1&&F<=0&&F>=-1}}return!1},isLinear:function(l,f,b,_){var S=_.subtract(l).divide(3);return f.equals(S)&&b.negate().equals(S)}},function(l,f){this[f]=function(b){var _=this._segment1,S=this._segment2;return l(_._point,_._handleOut,S._handleIn,S._point,b)},this.statics[f]=function(b,_){var S=b[0],P=b[1],T=b[6],N=b[7];return l(new g(S,P),new g(b[2]-S,b[3]-P),new g(b[4]-T,b[5]-N),new g(T,N),_)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(l){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(l||0)},isCollinear:function(l){return l&&this.isStraight()&&l.isStraight()&&this.getLine().isCollinear(l.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(l,f){return this.getLocationAtTime(f?l:this.getTimeAt(l))},getLocationAtTime:function(l){return l!=null&&l>=0&&l<=1?new ke(this,l):null},getTimeAt:function(l,f){return je.getTimeAt(this.getValues(),l,f)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var l=g.read(arguments);return l.isZero()?[]:je.getTimesWithTangent(this.getValues(),l)},getOffsetAtTime:function(l){return this.getPartLength(0,l)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getTimeOf:function(){return je.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var l=g.read(arguments),f=this.getValues(),b=je.getNearestTime(f,l),_=je.getPoint(f,b);return new ke(this,b,_,null,l.getDistance(_))},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()}},new function(){var l=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(l,function(f){this[f+"At"]=function(b,_){var S=this.getValues();return je[f](S,_?b:je.getTimeAt(S,b))},this[f+"AtTime"]=function(b){return je[f](this.getValues(),b)}},{statics:{_evaluateMethods:l}})},new function(){function l(_){var S=_[0],P=_[1],T=_[2],N=_[3],$=_[4],F=_[5],q=_[6],Q=_[7],K=9*(T-$)+3*(q-S),W=6*(S+$)-12*T,Y=3*(T-S),B=9*(N-F)+3*(Q-P),Z=6*(P+F)-12*N,V=3*(N-P);return function(ne){var z=(K*ne+W)*ne+Y,te=(B*ne+Z)*ne+V;return Math.sqrt(z*z+te*te)}}function f(_,S){return Math.max(2,Math.min(16,Math.ceil(Math.abs(S-_)*32)))}function b(_,S,P,T){if(S==null||S<0||S>1)return null;var N=_[0],$=_[1],F=_[2],q=_[3],Q=_[4],K=_[5],W=_[6],Y=_[7],B=p.isZero;B(F-N)&&B(q-$)&&(F=N,q=$),B(Q-W)&&B(K-Y)&&(Q=W,K=Y);var Z=3*(F-N),V=3*(Q-F)-Z,ne=W-N-Z-V,z=3*(q-$),te=3*(K-q)-z,se=Y-$-z-te,ue,re;if(P===0)ue=S===0?N:S===1?W:((ne*S+V)*S+Z)*S+N,re=S===0?$:S===1?Y:((se*S+te)*S+z)*S+$;else{var be=1e-8,Se=1-be;if(S<be?(ue=Z,re=z):S>Se?(ue=3*(W-Q),re=3*(Y-K)):(ue=(3*ne*S+2*V)*S+Z,re=(3*se*S+2*te)*S+z),T){ue===0&&re===0&&(S<be||S>Se)&&(ue=Q-F,re=K-q);var Pe=Math.sqrt(ue*ue+re*re);Pe&&(ue/=Pe,re/=Pe)}if(P===3){var Q=6*ne*S+2*V,K=6*se*S+2*te,ze=Math.pow(ue*ue+re*re,3/2);ue=ze!==0?(ue*K-re*Q)/ze:0,re=0}}return P===2?new g(re,-ue):new g(ue,re)}return{statics:{classify:function(_){var S=_[0],P=_[1],T=_[2],N=_[3],$=_[4],F=_[5],q=_[6],Q=_[7],K=S*(Q-F)+P*($-q)+q*F-Q*$,W=T*(P-Q)+N*(q-S)+S*Q-P*q,Y=$*(N-P)+F*(S-T)+T*P-N*S,B=3*Y,Z=B-W,V=Z-W+K,ne=Math.sqrt(V*V+Z*Z+B*B),z=ne!==0?1/ne:0,te=p.isZero,se="serpentine";V*=z,Z*=z,B*=z;function ue(Pe,ze,we){var $e=ze!==n,Be=$e&&ze>0&&ze<1,Ye=$e&&we>0&&we<1;return $e&&(!(Be||Ye)||Pe==="loop"&&!(Be&&Ye))&&(Pe="arch",Be=Ye=!1),{type:Pe,roots:Be||Ye?Be&&Ye?ze<we?[ze,we]:[we,ze]:[Be?ze:we]:null}}if(te(V))return te(Z)?ue(te(B)?"line":"quadratic"):ue(se,B/(3*Z));var re=3*Z*Z-4*V*B;if(te(re))return ue("cusp",Z/(2*V));var be=re>0?Math.sqrt(re/3):Math.sqrt(-re),Se=2*V;return ue(re>0?se:"loop",(Z+be)/Se,(Z-be)/Se)},getLength:function(_,S,P,T){if(S===n&&(S=0),P===n&&(P=1),je.isStraight(_)){var N=_;P<1&&(N=je.subdivide(N,P)[0],S/=P),S>0&&(N=je.subdivide(N,S)[1]);var $=N[6]-N[0],F=N[7]-N[1];return Math.sqrt($*$+F*F)}return p.integrate(T||l(_),S,P,f(S,P))},getTimeAt:function(_,S,P){if(P===n&&(P=S<0?1:0),S===0)return P;var T=Math.abs,N=1e-12,$=S>0,F=$?P:0,q=$?1:P,Q=l(_),K=je.getLength(_,F,q,Q),W=T(S)-K;if(T(W)<N)return $?q:F;if(W>N)return null;var Y=S/K,B=0;function Z(V){return B+=p.integrate(Q,P,V,f(P,V)),P=V,B-S}return p.findRoot(Z,Q,P+Y,F,q,32,1e-12)},getPoint:function(_,S){return b(_,S,0,!1)},getTangent:function(_,S){return b(_,S,1,!0)},getWeightedTangent:function(_,S){return b(_,S,1,!1)},getNormal:function(_,S){return b(_,S,2,!0)},getWeightedNormal:function(_,S){return b(_,S,2,!1)},getCurvature:function(_,S){return b(_,S,3,!1).x},getPeaks:function(_){var S=_[0],P=_[1],T=_[2],N=_[3],$=_[4],F=_[5],q=_[6],Q=_[7],K=-S+3*T-3*$+q,W=3*S-6*T+3*$,Y=-3*S+3*T,B=-P+3*N-3*F+Q,Z=3*P-6*N+3*F,V=-3*P+3*N,ne=1e-8,z=1-ne,te=[];return p.solveCubic(9*(K*K+B*B),9*(K*W+Z*B),2*(W*W+Z*Z)+3*(Y*K+V*B),Y*W+Z*V,te,ne,z),te.sort()}}}},new function(){function l(W,Y,B,Z,V,ne,z){var te=!z&&B.getPrevious()===V,se=!z&&B!==V&&B.getNext()===V,ue=1e-8,re=1-ue;if(Z!==null&&Z>=(te?ue:0)&&Z<=(se?re:1)&&ne!==null&&ne>=(se?ue:0)&&ne<=(te?re:1)){var be=new ke(B,Z,null,z),Se=new ke(V,ne,null,z);be._intersection=Se,Se._intersection=be,(!Y||Y(be))&&ke.insert(W,be,!0)}}function f(W,Y,B,Z,V,ne,z,te,se,ue,re,be,Se){if(++se>=4096||++te>=40)return se;var Pe=1e-9,ze=Y[0],we=Y[1],$e=Y[6],Be=Y[7],Ye=j.getSignedDistance,Qe=Ye(ze,we,$e,Be,Y[2],Y[3]),Je=Ye(ze,we,$e,Be,Y[4],Y[5]),dt=Qe*Je>0?3/4:4/9,pt=dt*Math.min(0,Qe,Je),Tt=dt*Math.max(0,Qe,Je),wt=Ye(ze,we,$e,Be,W[0],W[1]),Ae=Ye(ze,we,$e,Be,W[2],W[3]),Ke=Ye(ze,we,$e,Be,W[4],W[5]),yt=Ye(ze,we,$e,Be,W[6],W[7]),At=b(wt,Ae,Ke,yt),_t=At[0],It=At[1],jt,Dt;if(Qe===0&&Je===0&&wt===0&&Ae===0&&Ke===0&&yt===0||(jt=_(_t,It,pt,Tt))==null||(Dt=_(_t.reverse(),It.reverse(),pt,Tt))==null)return se;var Bt=ue+(re-ue)*jt,Mt=ue+(re-ue)*Dt;if(Math.max(Se-be,Mt-Bt)<Pe){var tn=(Bt+Mt)/2,nn=(be+Se)/2;l(V,ne,z?Z:B,z?nn:tn,z?B:Z,z?tn:nn)}else{W=je.getPart(W,jt,Dt);var xn=Se-be;if(Dt-jt>.8)if(Mt-Bt>xn){var Cn=je.subdivide(W,.5),tn=(Bt+Mt)/2;se=f(Y,Cn[0],Z,B,V,ne,!z,te,se,be,Se,Bt,tn),se=f(Y,Cn[1],Z,B,V,ne,!z,te,se,be,Se,tn,Mt)}else{var Cn=je.subdivide(Y,.5),nn=(be+Se)/2;se=f(Cn[0],W,Z,B,V,ne,!z,te,se,be,nn,Bt,Mt),se=f(Cn[1],W,Z,B,V,ne,!z,te,se,nn,Se,Bt,Mt)}else xn===0||xn>=Pe?se=f(Y,W,Z,B,V,ne,!z,te,se,be,Se,Bt,Mt):se=f(W,Y,B,Z,V,ne,z,te,se,Bt,Mt,be,Se)}return se}function b(W,Y,B,Z){var V=[0,W],ne=[1/3,Y],z=[2/3,B],te=[1,Z],se=Y-(2*W+Z)/3,ue=B-(W+2*Z)/3,re;if(se*ue<0)re=[[V,ne,te],[V,z,te]];else{var be=se/ue;re=[be>=2?[V,ne,te]:be<=.5?[V,z,te]:[V,ne,z,te],[V,te]]}return(se||ue)<0?re.reverse():re}function _(W,Y,B,Z){return W[0][1]<B?S(W,!0,B):Y[0][1]>Z?S(Y,!1,Z):W[0][0]}function S(W,Y,B){for(var Z=W[0][0],V=W[0][1],ne=1,z=W.length;ne<z;ne++){var te=W[ne][0],se=W[ne][1];if(Y?se>=B:se<=B)return se===B?te:Z+(B-V)*(te-Z)/(se-V);Z=te,V=se}return null}function P(W,Y,B,Z,V){var ne=p.isZero;if(ne(Z)&&ne(V)){var z=je.getTimeOf(W,new g(Y,B));return z===null?[]:[z]}for(var te=Math.atan2(-V,Z),se=Math.sin(te),ue=Math.cos(te),re=[],be=[],Se=0;Se<8;Se+=2){var Pe=W[Se]-Y,ze=W[Se+1]-B;re.push(Pe*ue-ze*se,Pe*se+ze*ue)}return je.solveCubic(re,1,0,be,0,1),be}function T(W,Y,B,Z,V,ne,z){for(var te=Y[0],se=Y[1],ue=Y[6],re=Y[7],be=P(W,te,se,ue-te,re-se),Se=0,Pe=be.length;Se<Pe;Se++){var ze=be[Se],we=je.getPoint(W,ze),$e=je.getTimeOf(Y,we);$e!==null&&l(V,ne,z?Z:B,z?$e:ze,z?B:Z,z?ze:$e)}}function N(W,Y,B,Z,V,ne){var z=j.intersect(W[0],W[1],W[6],W[7],Y[0],Y[1],Y[6],Y[7]);z&&l(V,ne,B,je.getTimeOf(W,z),Z,je.getTimeOf(Y,z))}function $(W,Y,B,Z,V,ne){var z=1e-12,te=Math.min,se=Math.max;if(se(W[0],W[2],W[4],W[6])+z>te(Y[0],Y[2],Y[4],Y[6])&&te(W[0],W[2],W[4],W[6])-z<se(Y[0],Y[2],Y[4],Y[6])&&se(W[1],W[3],W[5],W[7])+z>te(Y[1],Y[3],Y[5],Y[7])&&te(W[1],W[3],W[5],W[7])-z<se(Y[1],Y[3],Y[5],Y[7])){var ue=Q(W,Y);if(ue)for(var re=0;re<2;re++){var be=ue[re];l(V,ne,B,be[0],Z,be[1],!0)}else{var Se=je.isStraight(W),Pe=je.isStraight(Y),ze=Se&&Pe,we=Se&&!Pe,$e=V.length;if((ze?N:Se||Pe?T:f)(we?Y:W,we?W:Y,we?Z:B,we?B:Z,V,ne,we,0,0,0,1,0,1),!ze||V.length===$e)for(var re=0;re<4;re++){var Be=re>>1,Ye=re&1,Qe=Be*6,Je=Ye*6,dt=new g(W[Qe],W[Qe+1]),pt=new g(Y[Je],Y[Je+1]);dt.isClose(pt,z)&&l(V,ne,B,Be,Z,Ye)}}}return V}function F(W,Y,B,Z){var V=je.classify(W);if(V.type==="loop"){var ne=V.roots;l(B,Z,Y,ne[0],Y,ne[1])}return B}function q(W,Y,B,Z,V,ne){var z=1e-7,te=!Y;te&&(Y=W);for(var se=W.length,ue=Y.length,re=new Array(se),be=te?re:new Array(ue),Se=[],Pe=0;Pe<se;Pe++)re[Pe]=W[Pe].getValues(Z);if(!te)for(var Pe=0;Pe<ue;Pe++)be[Pe]=Y[Pe].getValues(V);for(var ze=h.findCurveBoundsCollisions(re,be,z),we=0;we<se;we++){var $e=W[we],Be=re[we];te&&F(Be,$e,Se,B);var Ye=ze[we];if(Ye)for(var Qe=0;Qe<Ye.length;Qe++){if(ne&&Se.length)return Se;var Je=Ye[Qe];if(!te||Je>we){var dt=Y[Je],pt=be[Je];$(Be,pt,$e,dt,Se,B)}}}return Se}function Q(W,Y){function B(yt){var At=yt[6]-yt[0],_t=yt[7]-yt[1];return At*At+_t*_t}var Z=Math.abs,V=j.getDistance,ne=1e-8,z=1e-7,te=je.isStraight(W),se=je.isStraight(Y),ue=te&&se,re=B(W)<B(Y),be=re?Y:W,Se=re?W:Y,Pe=be[0],ze=be[1],we=be[6]-Pe,$e=be[7]-ze;if(V(Pe,ze,we,$e,Se[0],Se[1],!0)<z&&V(Pe,ze,we,$e,Se[6],Se[7],!0)<z)!ue&&V(Pe,ze,we,$e,be[2],be[3],!0)<z&&V(Pe,ze,we,$e,be[4],be[5],!0)<z&&V(Pe,ze,we,$e,Se[2],Se[3],!0)<z&&V(Pe,ze,we,$e,Se[4],Se[5],!0)<z&&(te=se=ue=!0);else if(ue)return null;if(te^se)return null;for(var Be=[W,Y],Ye=[],Qe=0;Qe<4&&Ye.length<2;Qe++){var Je=Qe&1,dt=Je^1,pt=Qe>>1,Tt=je.getTimeOf(Be[Je],new g(Be[dt][pt?6:0],Be[dt][pt?7:1]));if(Tt!=null){var wt=Je?[pt,Tt]:[Tt,pt];(!Ye.length||Z(wt[0]-Ye[0][0])>ne&&Z(wt[1]-Ye[0][1])>ne)&&Ye.push(wt)}if(Qe>2&&!Ye.length)break}if(Ye.length!==2)Ye=null;else if(!ue){var Ae=je.getPart(W,Ye[0][0],Ye[1][0]),Ke=je.getPart(Y,Ye[0][1],Ye[1][1]);(Z(Ke[2]-Ae[2])>z||Z(Ke[3]-Ae[3])>z||Z(Ke[4]-Ae[4])>z||Z(Ke[5]-Ae[5])>z)&&(Ye=null)}return Ye}function K(W,Y){var B=W[0],Z=W[1],V=W[2],ne=W[3],z=W[4],te=W[5],se=W[6],ue=W[7],re=Y.normalize(),be=re.x,Se=re.y,Pe=3*se-9*z+9*V-3*B,ze=3*ue-9*te+9*ne-3*Z,we=6*z-12*V+6*B,$e=6*te-12*ne+6*Z,Be=3*V-3*B,Ye=3*ne-3*Z,Qe=2*Pe*Se-2*ze*be,Je=[];if(Math.abs(Qe)<p.CURVETIME_EPSILON){var dt=Pe*Ye-ze*Be,Qe=Pe*$e-ze*we;if(Qe!=0){var pt=-dt/Qe;pt>=0&&pt<=1&&Je.push(pt)}}else{var Tt=(we*we-4*Pe*Be)*Se*Se+(-2*we*$e+4*ze*Be+4*Pe*Ye)*be*Se+($e*$e-4*ze*Ye)*be*be,wt=we*Se-$e*be;if(Tt>=0&&Qe!=0){var Ae=Math.sqrt(Tt),Ke=-(wt+Ae)/Qe,yt=(-wt+Ae)/Qe;Ke>=0&&Ke<=1&&Je.push(Ke),yt>=0&&yt<=1&&Je.push(yt)}}return Je}return{getIntersections:function(W){var Y=this.getValues(),B=W&&W!==this&&W.getValues();return B?$(Y,B,this,W,[]):F(Y,this,[])},statics:{getOverlaps:Q,getIntersections:q,getCurveLineIntersections:P,getTimesWithTangent:K}}}),ke=s.extend({_class:"CurveLocation",initialize:function(f,b,_,S,P){if(b>=.99999999){var T=f.getNext();T&&(b=0,f=T)}this._setCurve(f),this._time=b,this._point=_||f.getPointAtTime(b),this._overlap=S,this._distance=P,this._intersection=this._next=this._previous=null},_setPath:function(l){this._path=l,this._version=l?l._version:0},_setCurve:function(l){this._setPath(l._path),this._curve=l,this._segment=null,this._segment1=l._segment1,this._segment2=l._segment2},_setSegment:function(l){var f=l.getCurve();f?this._setCurve(f):(this._setPath(l._path),this._segment1=l,this._segment2=null),this._segment=l,this._time=l===this._segment1?0:1,this._point=l._point.clone()},getSegment:function(){var l=this._segment;if(!l){var f=this.getCurve(),b=this.getTime();b===0?l=f._segment1:b===1?l=f._segment2:b!=null&&(l=f.getPartLength(0,b)<f.getPartLength(b,1)?f._segment1:f._segment2),this._segment=l}return l},getCurve:function(){var l=this._path,f=this;l&&l._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function b(_){var S=_&&_.getCurve();if(S&&(f._time=S.getTimeOf(f._point))!=null)return f._setCurve(S),S}return this._curve||b(this._segment)||b(this._segment1)||b(this._segment2.getPrevious())},getPath:function(){var l=this.getCurve();return l&&l._path},getIndex:function(){var l=this.getCurve();return l&&l.getIndex()},getTime:function(){var l=this.getCurve(),f=this._time;return l&&f==null?this._time=l.getTimeOf(this._point):f},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var l=this._offset;if(l==null){l=0;var f=this.getPath(),b=this.getIndex();if(f&&b!=null)for(var _=f.getCurves(),S=0;S<b;S++)l+=_[S].getLength();this._offset=l+=this.getCurveOffset()}return l},getCurveOffset:function(){var l=this._curveOffset;if(l==null){var f=this.getCurve(),b=this.getTime();this._curveOffset=l=b!=null&&f&&f.getPartLength(0,b)}return l},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var l=this.getCurve(),f=l&&l.divideAtTime(this.getTime());return f&&this._setSegment(f._segment1),f},split:function(){var l=this.getCurve(),f=l._path,b=l&&l.splitAtTime(this.getTime());return b&&this._setSegment(f.getLastSegment()),b},equals:function(l,f){var b=this===l;if(!b&&l instanceof ke){var _=this.getCurve(),S=l.getCurve(),P=_._path,T=S._path;if(P===T){var N=Math.abs,$=1e-7,F=N(this.getOffset()-l.getOffset()),q=!f&&this._intersection,Q=!f&&l._intersection;b=(F<$||P&&N(P.getLength()-F)<$)&&(!q&&!Q||q&&Q&&q.equals(Q,!0))}}return b},toString:function(){var l=[],f=this.getPoint(),b=d.instance;f&&l.push("point: "+f);var _=this.getIndex();_!=null&&l.push("index: "+_);var S=this.getTime();return S!=null&&l.push("time: "+b.number(S)),this._distance!=null&&l.push("distance: "+b.number(this._distance)),"{ "+l.join(", ")+" }"},isTouching:function(){var l=this._intersection;if(l&&this.getTangent().isCollinear(l.getTangent())){var f=this.getCurve(),b=l.getCurve();return!(f.isStraight()&&b.isStraight()&&f.getLine().intersect(b.getLine()))}return!1},isCrossing:function(){var l=this._intersection;if(!l)return!1;var f=this.getTime(),b=l.getTime(),_=1e-8,S=1-_,P=f>=_&&f<=S,T=b>=_&&b<=S;if(P&&T)return!this.isTouching();var N=this.getCurve(),$=N&&f<_?N.getPrevious():N,F=l.getCurve(),q=F&&b<_?F.getPrevious():F;if(f>S&&(N=N.getNext()),b>S&&(F=F.getNext()),!$||!N||!q||!F)return!1;var Q=[];function K(be,Se){var Pe=be.getValues(),ze=je.classify(Pe).roots||je.getPeaks(Pe),we=ze.length,$e=je.getLength(Pe,Se&&we?ze[we-1]:0,!Se&&we?ze[0]:1);Q.push(we?$e:$e/32)}function W(be,Se,Pe){return Se<Pe?be>Se&&be<Pe:be>Se||be<Pe}P||(K($,!0),K(N,!1)),T||(K(q,!0),K(F,!1));var Y=this.getPoint(),B=Math.min.apply(Math,Q),Z=P?N.getTangentAtTime(f):N.getPointAt(B).subtract(Y),V=P?Z.negate():$.getPointAt(-B).subtract(Y),ne=T?F.getTangentAtTime(b):F.getPointAt(B).subtract(Y),z=T?ne.negate():q.getPointAt(-B).subtract(Y),te=V.getAngle(),se=Z.getAngle(),ue=z.getAngle(),re=ne.getAngle();return!!(P?W(te,ue,re)^W(se,ue,re)&&W(te,re,ue)^W(se,re,ue):W(ue,te,se)^W(re,te,se)&&W(ue,se,te)^W(re,se,te))},hasOverlap:function(){return!!this._overlap}},s.each(je._evaluateMethods,function(l){var f=l+"At";this[l]=function(){var b=this.getCurve(),_=this.getTime();return _!=null&&b&&b[f](_,!0)}},{preserve:!0}),new function(){function l(f,b,_){var S=f.length,P=0,T=S-1;function N(Y,B){for(var Z=Y+B;Z>=-1&&Z<=S;Z+=B){var V=f[(Z%S+S)%S];if(!b.getPoint().isClose(V.getPoint(),1e-7))break;if(b.equals(V))return V}return null}for(;P<=T;){var $=P+T>>>1,F=f[$],q;if(_&&(q=b.equals(F)?F:N($,-1)||N($,1)))return b._overlap&&(q._overlap=q._intersection._overlap=!0),q;var Q=b.getPath(),K=F.getPath(),W=Q!==K?Q._id-K._id:b.getIndex()+b.getTime()-(F.getIndex()+F.getTime());W<0?T=$-1:P=$+1}return f.splice(P,0,b),b}return{statics:{insert:l,expand:function(f){for(var b=f.slice(),_=f.length-1;_>=0;_--)l(b,f[_]._intersection,!1);return b}}}}),Fe=E.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(l){var f,b,_;if(s.isPlainObject(l)?(b=l.segments,f=l.pathData):Array.isArray(l)?b=l:typeof l=="string"&&(f=l),b){var S=b[0];_=S&&Array.isArray(S[0])}else f&&(_=(f.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(f));var P=_?Me:xe;return new P(l)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(l){this.isClockwise()!=(l=!!l)&&this.reverse()},setPathData:function(l){var f=l&&l.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),b,_=!1,S,P,T=new g,N=new g;function $(z,te){var se=+b[z];return _&&(se+=T[te]),se}function F(z){return new g($(z,"x"),$(z+1,"y"))}this.clear();for(var q=0,Q=f&&f.length;q<Q;q++){var K=f[q],W=K[0],Y=W.toLowerCase();b=K.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var B=b&&b.length;switch(_=W===Y,S==="z"&&!/[mz]/.test(Y)&&this.moveTo(T),Y){case"m":case"l":for(var Z=Y==="m",V=0;V<B;V+=2)this[Z?"moveTo":"lineTo"](T=F(V)),Z&&(N=T,Z=!1);P=T;break;case"h":case"v":var ne=Y==="h"?"x":"y";T=T.clone();for(var V=0;V<B;V++)T[ne]=$(V,ne),this.lineTo(T);P=T;break;case"c":for(var V=0;V<B;V+=6)this.cubicCurveTo(F(V),P=F(V+2),T=F(V+4));break;case"s":for(var V=0;V<B;V+=4)this.cubicCurveTo(/[cs]/.test(S)?T.multiply(2).subtract(P):T,P=F(V),T=F(V+2)),S=Y;break;case"q":for(var V=0;V<B;V+=4)this.quadraticCurveTo(P=F(V),T=F(V+2));break;case"t":for(var V=0;V<B;V+=2)this.quadraticCurveTo(P=/[qt]/.test(S)?T.multiply(2).subtract(P):T,T=F(V)),S=Y;break;case"a":for(var V=0;V<B;V+=7)this.arcTo(T=F(V+5),new w(+b[V],+b[V+1]),+b[V+2],+b[V+4],+b[V+3]);break;case"z":this.closePath(1e-12),T=N;break}S=Y}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(l){var f=l.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(l):{};return f.onPath||!!(this.getFillRule()==="evenodd"?f.windingL&1||f.windingR&1:f.winding)},getIntersections:function(l,f,b,_){var S=this===l||!l,P=this._matrix._orNullIfIdentity(),T=S?P:(b||l._matrix)._orNullIfIdentity();return S||this.getBounds(P).intersects(l.getBounds(T),1e-12)?je.getIntersections(this.getCurves(),!S&&l.getCurves(),f,P,T,_):[]},getCrossings:function(l){return this.getIntersections(l,function(f){return f.isCrossing()})},getNearestLocation:function(){for(var l=g.read(arguments),f=this.getCurves(),b=1/0,_=null,S=0,P=f.length;S<P;S++){var T=f[S].getNearestLocation(l);T._distance<b&&(b=T._distance,_=T)}return _},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()},interpolate:function(l,f,b){var _=!this._children,S=_?"_segments":"_children",P=l[S],T=f[S],N=this[S];if(!P||!T||P.length!==T.length)throw new Error("Invalid operands in interpolate() call: "+l+", "+f);var $=N.length,F=T.length;if($<F)for(var q=_?H:xe,Q=$;Q<F;Q++)this.add(new q);else $>F&&this[_?"removeSegments":"removeChildren"](F,$);for(var Q=0;Q<F;Q++)N[Q].interpolate(P[Q],T[Q],b);_&&(this.setClosed(l._closed),this._changed(9))},compare:function(l){var f=!1;if(l){var b=this._children||[this],_=l._children?l._children.slice():[l],S=b.length,P=_.length,T=[],N=0;f=!0;for(var $=h.findItemBoundsCollisions(b,_,p.GEOMETRIC_EPSILON),F=S-1;F>=0&&f;F--){var q=b[F];f=!1;var Q=$[F];if(Q)for(var K=Q.length-1;K>=0&&!f;K--)q.compare(_[Q[K]])&&(T[Q[K]]||(T[Q[K]]=!0,N++),f=!0)}f=f&&N===P}return f}}),xe=Fe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(f){this._closed=!1,this._segments=[],this._version=0;var b=arguments,_=Array.isArray(f)?typeof f[0]=="object"?f:b:f&&f.size===n&&(f.x!==n||f.point!==n)?b:null;_&&_.length>0?this.setSegments(_):(this._curves=n,this._segmentSelection=0,!_&&typeof f=="string"&&(this.setPathData(f),f=null)),this._initialize(!_&&f)},_equals:function(l){return this._closed===l._closed&&s.equals(this._segments,l._segments)},copyContent:function(l){this.setSegments(l._segments),this._closed=l._closed},_changed:function l(f){if(l.base.call(this,f),f&8){if(this._length=this._area=n,f&32)this._version++;else if(this._curves)for(var b=0,_=this._curves.length;b<_;b++)this._curves[b]._changed()}else f&64&&(this._bounds=n)},getStyle:function(){var l=this._parent;return(l instanceof Me?l:this)._style},getSegments:function(){return this._segments},setSegments:function(l){var f=this.isFullySelected(),b=l&&l.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,b){var _=l[b-1];typeof _=="boolean"&&(this.setClosed(_),b--),this._add(H.readList(l,0,{},b))}f&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var l=this._curves,f=this._segments;if(!l){var b=this._countCurves();l=this._curves=new Array(b);for(var _=0;_<b;_++)l[_]=new je(this,f[_],f[_+1]||f[0])}return l},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var l=this.getCurves();return l[l.length-1]},isClosed:function(){return this._closed},setClosed:function(l){if(this._closed!=(l=!!l)){if(this._closed=l,this._curves){var f=this._curves.length=this._countCurves();l&&(this._curves[f-1]=new je(this,this._segments[f-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(l,f){var b=this._segments,_=b.length,S=new d(f),P=new Array(6),T=!0,N,$,F,q,Q,K,W,Y,B=[];function Z(ne,z){if(ne._transformCoordinates(l,P),N=P[0],$=P[1],T)B.push("M"+S.pair(N,$)),T=!1;else if(Q=P[2],K=P[3],Q===N&&K===$&&W===F&&Y===q){if(!z){var te=N-F,se=$-q;B.push(te===0?"v"+S.number(se):se===0?"h"+S.number(te):"l"+S.pair(te,se))}}else B.push("c"+S.pair(W-F,Y-q)+" "+S.pair(Q-F,K-q)+" "+S.pair(N-F,$-q));F=N,q=$,W=P[4],Y=P[5]}if(!_)return"";for(var V=0;V<_;V++)Z(b[V]);return this._closed&&_>0&&(Z(b[0],!0),B.push("z")),B.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(l){for(var f=this._segments,b=new Array(6),_=0,S=f.length;_<S;_++)f[_]._transformCoordinates(l,b,!0);return!0},_add:function(l,T){for(var b=this._segments,_=this._curves,S=l.length,P=T==null,T=P?b.length:T,N=0;N<S;N++){var $=l[N];$._path&&($=l[N]=$.clone()),$._path=this,$._index=T+N,$._selection&&this._updateSelection($,0,$._selection)}if(P)s.push(b,l);else{b.splice.apply(b,[T,0].concat(l));for(var N=T+S,F=b.length;N<F;N++)b[N]._index=N}if(_){var q=this._countCurves(),Q=T>0&&T+S-1===q?T-1:T,K=Q,W=Math.min(Q+S,q);l._curves&&(_.splice.apply(_,[Q,0].concat(l._curves)),K+=l._curves.length);for(var N=K;N<W;N++)_.splice(N,0,new je(this,null,null));this._adjustCurves(Q,W)}return this._changed(41),l},_adjustCurves:function(l,f){for(var b=this._segments,_=this._curves,S,P=l;P<f;P++)S=_[P],S._path=this,S._segment1=b[P],S._segment2=b[P+1]||b[0],S._changed();(S=_[this._closed&&!l?b.length-1:l-1])&&(S._segment2=b[l]||b[0],S._changed()),(S=_[f])&&(S._segment1=b[f],S._changed())},_countCurves:function(){var l=this._segments.length;return!this._closed&&l>0?l-1:l},add:function(l){var f=arguments;return f.length>1&&typeof l!="number"?this._add(H.readList(f)):this._add([H.read(f)])[0]},insert:function(l,f){var b=arguments;return b.length>2&&typeof f!="number"?this._add(H.readList(b,1),l):this._add([H.read(b,1)],l)[0]},addSegment:function(){return this._add([H.read(arguments)])[0]},insertSegment:function(l){return this._add([H.read(arguments,1)],l)[0]},addSegments:function(l){return this._add(H.readList(l))},insertSegments:function(l,f){return this._add(H.readList(f),l)},removeSegment:function(l){return this.removeSegments(l,l+1)[0]||null},removeSegments:function(l,f,b){l=l||0,f=s.pick(f,this._segments.length);var _=this._segments,S=this._curves,P=_.length,T=_.splice(l,f-l),N=T.length;if(!N)return T;for(var $=0;$<N;$++){var F=T[$];F._selection&&this._updateSelection(F,F._selection,0),F._index=F._path=null}for(var $=l,q=_.length;$<q;$++)_[$]._index=$;if(S){for(var Q=l>0&&f===P+(this._closed?1:0)?l-1:l,S=S.splice(Q,N),$=S.length-1;$>=0;$--)S[$]._path=null;b&&(T._curves=S.slice(1)),this._adjustCurves(Q,Q)}return this._changed(41),T},clear:"#removeSegments",hasHandles:function(){for(var l=this._segments,f=0,b=l.length;f<b;f++)if(l[f].hasHandles())return!0;return!1},clearHandles:function(){for(var l=this._segments,f=0,b=l.length;f<b;f++)l[f].clearHandles()},getLength:function(){if(this._length==null){for(var l=this.getCurves(),f=0,b=0,_=l.length;b<_;b++)f+=l[b].getLength();this._length=f}return this._length},getArea:function(){var l=this._area;if(l==null){var f=this._segments,b=this._closed;l=0;for(var _=0,S=f.length;_<S;_++){var P=_+1===S;l+=je.getArea(je.getValues(f[_],f[P?0:_+1],null,P&&!b))}this._area=l}return l},isFullySelected:function(){var l=this._segments.length;return this.isSelected()&&l>0&&this._segmentSelection===l*7},setFullySelected:function(l){l&&this._selectSegments(!0),this.setSelected(l)},setSelection:function l(f){f&1||this._selectSegments(!1),l.base.call(this,f)},_selectSegments:function(l){var f=this._segments,b=f.length,_=l?7:0;this._segmentSelection=_*b;for(var S=0;S<b;S++)f[S]._selection=_},_updateSelection:function(l,f,b){l._selection=b;var _=this._segmentSelection+=b-f;_>0&&this.setSelected(!0)},divideAt:function(l){var f=this.getLocationAt(l),b;return f&&(b=f.getCurve().divideAt(f.getCurveOffset()))?b._segment1:null},splitAt:function(l){var f=this.getLocationAt(l),b=f&&f.index,_=f&&f.time,S=1e-8,P=1-S;_>P&&(b++,_=0);var T=this.getCurves();if(b>=0&&b<T.length){_>=S&&T[b++].divideAtTime(_);var N=this.removeSegments(b,this._segments.length,!0),$;return this._closed?(this.setClosed(!1),$=this):($=new xe(E.NO_INSERT),$.insertAbove(this),$.copyAttributes(this)),$._add(N,0),this.addSegment(N[0]),$}return null},split:function(l,f){var b,_=f===n?l:(b=this.getCurves()[l])&&b.getLocationAtTime(f);return _!=null?this.splitAt(_):null},join:function(l,f){var b=f||0;if(l&&l!==this){var _=l._segments,S=this.getLastSegment(),P=l.getLastSegment();if(!P)return this;S&&S._point.isClose(P._point,b)&&l.reverse();var T=l.getFirstSegment();if(S&&S._point.isClose(T._point,b))S.setHandleOut(T._handleOut),this._add(_.slice(1));else{var N=this.getFirstSegment();N&&N._point.isClose(T._point,b)&&l.reverse(),P=l.getLastSegment(),N&&N._point.isClose(P._point,b)?(N.setHandleIn(P._handleIn),this._add(_.slice(0,_.length-1),0)):this._add(_.slice())}l._closed&&this._add([_[0]]),l.remove()}var $=this.getFirstSegment(),F=this.getLastSegment();return $!==F&&$._point.isClose(F._point,b)&&($.setHandleIn(F._handleIn),F.remove(),this.setClosed(!0)),this},reduce:function(l){for(var f=this.getCurves(),b=l&&l.simplify,_=b?1e-7:0,S=f.length-1;S>=0;S--){var P=f[S];!P.hasHandles()&&(!P.hasLength(_)||b&&P.isCollinear(P.getNext()))&&P.remove()}return this},reverse:function(){this._segments.reverse();for(var l=0,f=this._segments.length;l<f;l++){var b=this._segments[l],_=b._handleIn;b._handleIn=b._handleOut,b._handleOut=_,b._index=l}this._curves=null,this._changed(9)},flatten:function(l){for(var f=new _e(this,l||.25,256,!0),b=f.parts,_=b.length,S=[],P=0;P<_;P++)S.push(new H(b[P].curve.slice(0,2)));!this._closed&&_>0&&S.push(new H(b[_-1].curve.slice(6))),this.setSegments(S)},simplify:function(l){var f=new Ne(this).fit(l||2.5);return f&&this.setSegments(f),!!f},smooth:function(l){var f=this,b=l||{},_=b.type||"asymmetric",S=this._segments,P=S.length,T=this._closed;function N(_t,It){var jt=_t&&_t.index;if(jt!=null){var Dt=_t.path;if(Dt&&Dt!==f)throw new Error(_t._class+" "+jt+" of "+Dt+" is not part of "+f);It&&_t instanceof je&&jt++}else jt=typeof _t=="number"?_t:It;return Math.min(jt<0&&T?jt%P:jt<0?jt+P:jt,P-1)}var $=T&&b.from===n&&b.to===n,F=N(b.from,0),q=N(b.to,P-1);if(F>q)if(T)F-=P;else{var Q=F;F=q,q=Q}if(/^(?:asymmetric|continuous)$/.test(_)){var K=_==="asymmetric",W=Math.min,Y=q-F+1,B=Y-1,Z=$?W(Y,4):1,V=Z,ne=Z,z=[];if(T||(V=W(1,F),ne=W(1,P-q-1)),B+=V+ne,B<=1)return;for(var te=0,se=F-V;te<=B;te++,se++)z[te]=S[(se<0?se+P:se)%P]._point;for(var ue=z[0]._x+2*z[1]._x,re=z[0]._y+2*z[1]._y,be=2,Se=B-1,Pe=[ue],ze=[re],we=[be],$e=[],Be=[],te=1;te<B;te++){var Ye=te<Se,Qe=Ye||K?1:2,Je=Ye?4:K?2:7,dt=Ye?4:K?3:8,pt=Ye?2:K?0:1,Tt=Qe/be;be=we[te]=Je-Tt,ue=Pe[te]=dt*z[te]._x+pt*z[te+1]._x-Tt*ue,re=ze[te]=dt*z[te]._y+pt*z[te+1]._y-Tt*re}$e[Se]=Pe[Se]/we[Se],Be[Se]=ze[Se]/we[Se];for(var te=B-2;te>=0;te--)$e[te]=(Pe[te]-$e[te+1])/we[te],Be[te]=(ze[te]-Be[te+1])/we[te];$e[B]=(3*z[B]._x-$e[Se])/2,Be[B]=(3*z[B]._y-Be[Se])/2;for(var te=V,wt=B-ne,se=F;te<=wt;te++,se++){var Ae=S[se<0?se+P:se],Ke=Ae._point,yt=$e[te]-Ke._x,At=Be[te]-Ke._y;($||te<wt)&&Ae.setHandleOut(yt,At),($||te>V)&&Ae.setHandleIn(-yt,-At)}}else for(var te=F;te<=q;te++)S[te<0?te+P:te].smooth(b,!$&&te===F,!$&&te===q)},toShape:function(l){if(!this._closed)return null;var f=this._segments,b,_,S,P;function T(K,W){var Y=f[K],B=Y.getNext(),Z=f[W],V=Z.getNext();return Y._handleOut.isZero()&&B._handleIn.isZero()&&Z._handleOut.isZero()&&V._handleIn.isZero()&&B._point.subtract(Y._point).isCollinear(V._point.subtract(Z._point))}function N(K){var W=f[K],Y=W.getPrevious(),B=W.getNext();return Y._handleOut.isZero()&&W._handleIn.isZero()&&W._handleOut.isZero()&&B._handleIn.isZero()&&W._point.subtract(Y._point).isOrthogonal(B._point.subtract(W._point))}function $(K){var W=f[K],Y=W.getNext(),B=W._handleOut,Z=Y._handleIn,V=.5522847498307936;if(B.isOrthogonal(Z)){var ne=W._point,z=Y._point,te=new j(ne,B,!0).intersect(new j(z,Z,!0),!0);return te&&p.isZero(B.getLength()/te.subtract(ne).getLength()-V)&&p.isZero(Z.getLength()/te.subtract(z).getLength()-V)}return!1}function F(K,W){return f[K]._point.getDistance(f[W]._point)}if(!this.hasHandles()&&f.length===4&&T(0,2)&&T(1,3)&&N(1)?(b=R.Rectangle,_=new w(F(0,3),F(0,1)),P=f[1]._point.add(f[2]._point).divide(2)):f.length===8&&$(0)&&$(2)&&$(4)&&$(6)&&T(1,5)&&T(3,7)?(b=R.Rectangle,_=new w(F(1,6),F(0,3)),S=_.subtract(new w(F(0,7),F(1,2))).divide(2),P=f[3]._point.add(f[4]._point).divide(2)):f.length===4&&$(0)&&$(1)&&$(2)&&$(3)&&(p.isZero(F(0,2)-F(1,3))?(b=R.Circle,S=F(0,2)/2):(b=R.Ellipse,S=new w(F(2,0)/2,F(3,1)/2)),P=f[1]._point),b){var q=this.getPosition(!0),Q=new b({center:q,size:_,radius:S,insert:!1});return Q.copyAttributes(this,!0),Q._matrix.prepend(this._matrix),Q.rotate(P.subtract(q).getAngle()+90),(l===n||l)&&Q.insertAbove(this),Q}return null},toPath:"#clone",compare:function l(f){if(!f||f instanceof Me)return l.base.call(this,f);var b=this.getCurves(),_=f.getCurves(),S=b.length,P=_.length;if(!S||!P)return S==P;for(var T=b[0].getValues(),N=[],$=0,F,q=0,Q,K=0;K<P;K++){var Z=_[K].getValues();N.push(Z);var W=je.getOverlaps(T,Z);if(W){F=!K&&W[0][0]>0?P-1:K,Q=W[0][1];break}}for(var Y=Math.abs,B=1e-8,Z=N[F],V;T&&Z;){var W=je.getOverlaps(T,Z);if(W){var ne=W[0][0];if(Y(ne-q)<B){q=W[1][0],q===1&&(T=++$<S?b[$].getValues():null,q=0);var z=W[0][1];if(Y(z-Q)<B){if(V||(V=[F,z]),Q=W[1][1],Q===1&&(++F>=P&&(F=0),Z=N[F]||_[F].getValues(),Q=0),!T)return V[0]===F&&V[1]===Q;continue}}}break}return!1},_hitTestSelf:function(l,f,b,_){var S=this,P=this.getStyle(),T=this._segments,N=T.length,$=this._closed,F=f._tolerancePadding,q=F,Q,K,W,Y,B,Z,V=f.stroke&&P.hasStroke(),ne=f.fill&&P.hasFill(),z=f.curves,te=V?P.getStrokeWidth()/2:ne&&f.tolerance>0||z?0:null;te!==null&&(te>0?(Q=P.getStrokeJoin(),K=P.getStrokeCap(),W=P.getMiterLimit(),q=q.add(xe._getStrokePadding(te,_))):Q=K="round");function se($e,Be){return l.subtract($e).divide(Be).length<=1}function ue($e,Be,Ye){if(!f.selected||Be.isSelected()){var Qe=$e._point;if(Be!==Qe&&(Be=Be.add(Qe)),se(Be,q))return new ge(Ye,S,{segment:$e,point:Be})}}function re($e,Be){return(Be||f.segments)&&ue($e,$e._point,"segment")||!Be&&f.handles&&(ue($e,$e._handleIn,"handle-in")||ue($e,$e._handleOut,"handle-out"))}function be($e){Y.add($e)}function Se($e){var Be=$||$e._index>0&&$e._index<N-1;if((Be?Q:K)==="round")return se($e._point,q);if(Y=new xe({internal:!0,closed:!0}),Be?$e.isSmooth()||xe._addBevelJoin($e,Q,te,W,null,_,be,!0):K==="square"&&xe._addSquareCap($e,K,te,null,_,be,!0),!Y.isEmpty()){var Ye;return Y.contains(l)||(Ye=Y.getNearestLocation(l))&&se(Ye.getPoint(),F)}}if(f.ends&&!f.segments&&!$){if(Z=re(T[0],!0)||re(T[N-1],!0))return Z}else if(f.segments||f.handles){for(var Pe=0;Pe<N;Pe++)if(Z=re(T[Pe]))return Z}if(te!==null){if(B=this.getNearestLocation(l),B){var ze=B.getTime();ze===0||ze===1&&N>1?Se(B.getSegment())||(B=null):se(B.getPoint(),q)||(B=null)}if(!B&&Q==="miter"&&N>1)for(var Pe=0;Pe<N;Pe++){var we=T[Pe];if(l.getDistance(we._point)<=W*te&&Se(we)){B=we.getLocation();break}}}return!B&&ne&&this._contains(l)||B&&!V&&!z?new ge("fill",this):B?new ge(V?"stroke":"curve",this,{location:B,point:B.getPoint()}):null}},s.each(je._evaluateMethods,function(l){this[l+"At"]=function(f){var b=this.getLocationAt(f);return b&&b[l]()}},{beans:!1,getLocationOf:function(){for(var l=g.read(arguments),f=this.getCurves(),b=0,_=f.length;b<_;b++){var S=f[b].getLocationOf(l);if(S)return S}return null},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getLocationAt:function(l){if(typeof l=="number"){for(var f=this.getCurves(),b=0,_=0,S=f.length;_<S;_++){var P=b,T=f[_];if(b+=T.getLength(),b>l)return T.getLocationAt(l-P)}if(f.length>0&&l<=this.getLength())return new ke(f[f.length-1],1)}else if(l&&l.getPath&&l.getPath()===this)return l;return null},getOffsetsWithTangent:function(){var l=g.read(arguments);if(l.isZero())return[];for(var f=[],b=0,_=this.getCurves(),S=0,P=_.length;S<P;S++){for(var T=_[S],N=T.getTimesWithTangent(l),$=0,F=N.length;$<F;$++){var q=b+T.getOffsetAtTime(N[$]);f.indexOf(q)<0&&f.push(q)}b+=T.length}return f}}),new function(){function l(b,_,S,P){if(P<=0)return;var T=P/2,N=P-2,$=T-1,F=new Array(6),q,Q;function K(ne){var z=F[ne],te=F[ne+1];(q!=z||Q!=te)&&(b.beginPath(),b.moveTo(q,Q),b.lineTo(z,te),b.stroke(),b.beginPath(),b.arc(z,te,T,0,Math.PI*2,!0),b.fill())}for(var W=0,Y=_.length;W<Y;W++){var B=_[W],Z=B._selection;if(B._transformCoordinates(S,F),q=F[0],Q=F[1],Z&2&&K(2),Z&4&&K(4),b.fillRect(q-T,Q-T,P,P),N>0&&!(Z&1)){var V=b.fillStyle;b.fillStyle="#ffffff",b.fillRect(q-$,Q-$,N,N),b.fillStyle=V}}}function f(b,_,S){var P=_._segments,T=P.length,N=new Array(6),$=!0,F,q,Q,K,W,Y,B,Z;function V(z){if(S)z._transformCoordinates(S,N),F=N[0],q=N[1];else{var te=z._point;F=te._x,q=te._y}if($)b.moveTo(F,q),$=!1;else{if(S)W=N[2],Y=N[3];else{var se=z._handleIn;W=F+se._x,Y=q+se._y}W===F&&Y===q&&B===Q&&Z===K?b.lineTo(F,q):b.bezierCurveTo(B,Z,W,Y,F,q)}if(Q=F,K=q,S)B=N[4],Z=N[5];else{var se=z._handleOut;B=Q+se._x,Z=K+se._y}}for(var ne=0;ne<T;ne++)V(P[ne]);_._closed&&T>0&&V(P[0])}return{_draw:function(b,_,S,P){var T=_.dontStart,N=_.dontFinish||_.clip,$=this.getStyle(),F=$.hasFill(),q=$.hasStroke(),Q=$.getDashArray(),K=!De.support.nativeDash&&q&&Q&&Q.length;T||b.beginPath(),(F||q&&!K||N)&&(f(b,this,P),this._closed&&b.closePath());function W(z){return Q[(z%K+K)%K]}if(!N&&(F||q)&&(this._setStyles(b,_,S),F&&(b.fill($.getFillRule()),b.shadowColor="rgba(0,0,0,0)"),q)){if(K){T||b.beginPath();for(var Y=new _e(this,.25,32,!1,P),B=Y.length,Z=-$.getDashOffset(),V,ne=0;Z>0;)Z-=W(ne--)+W(ne--);for(;Z<B;)V=Z+W(ne++),(Z>0||V>0)&&Y.drawPart(b,Math.max(Z,0),Math.max(V,0)),Z=V+W(ne++)}b.stroke()}},_drawSelected:function(b,_){b.beginPath(),f(b,this,_),b.stroke(),l(b,this._segments,_,De.settings.handleSize)}}},new function(){function l(f){var b=f._segments;if(!b.length)throw new Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var f=this._segments;f.length===1&&this.removeSegment(0),f.length||this._add([new H(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new H(g.read(arguments))])},cubicCurveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),S=g.read(f),P=l(this);P.setHandleOut(b.subtract(P._point)),this._add([new H(S,_.subtract(S))])},quadraticCurveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),S=l(this)._point;this.cubicCurveTo(b.add(S.subtract(b).multiply(1/3)),b.add(_.subtract(b).multiply(1/3)),_)},curveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),S=s.pick(s.read(f),.5),P=1-S,T=l(this)._point,N=b.subtract(T.multiply(P*P)).subtract(_.multiply(S*S)).divide(2*S*P);if(N.isNaN())throw new Error("Cannot put a curve through points with parameter = "+S);this.quadraticCurveTo(N,_)},arcTo:function(){var f=arguments,b=Math.abs,_=Math.sqrt,S=l(this),P=S._point,T=g.read(f),N,$=s.peek(f),F=s.pick($,!0),q,Q,K,W;if(typeof F=="boolean")var Y=P.add(T).divide(2),N=Y.add(Y.subtract(P).rotate(F?-90:90));else if(s.remain(f)<=2)N=T,T=g.read(f);else if(!P.equals(T)){var B=w.read(f),Z=p.isZero;if(Z(B.width)||Z(B.height))return this.lineTo(T);var V=s.read(f),F=!!s.read(f),ne=!!s.read(f),Y=P.add(T).divide(2),z=P.subtract(Y).rotate(-V),te=z.x,se=z.y,ue=b(B.width),re=b(B.height),be=ue*ue,Se=re*re,Pe=te*te,ze=se*se,we=_(Pe/be+ze/Se);if(we>1&&(ue*=we,re*=we,be=ue*ue,Se=re*re),we=(be*Se-be*ze-Se*Pe)/(be*ze+Se*Pe),b(we)<1e-12&&(we=0),we<0)throw new Error("Cannot create an arc with the given arguments");q=new g(ue*se/re,-re*te/ue).multiply((ne===F?-1:1)*_(we)).rotate(V).add(Y),W=new A().translate(q).rotate(V).scale(ue,re),K=W._inverseTransform(P),Q=K.getDirectedAngle(W._inverseTransform(T)),!F&&Q>0?Q-=360:F&&Q<0&&(Q+=360)}if(N){var $e=new j(P.add(N).divide(2),N.subtract(P).rotate(90),!0),Be=new j(N.add(T).divide(2),T.subtract(N).rotate(90),!0),Ye=new j(P,T),Qe=Ye.getSide(N);if(q=$e.intersect(Be,!0),!q){if(!Qe)return this.lineTo(T);throw new Error("Cannot create an arc with the given arguments")}K=P.subtract(q),Q=K.getDirectedAngle(T.subtract(q));var Je=Ye.getSide(q,!0);Je===0?Q=Qe*b(Q):Qe===Je&&(Q+=Q<0?360:-360)}if(Q){for(var dt=1e-5,pt=b(Q),Tt=pt>=360?4:Math.ceil((pt-dt)/90),wt=Q/Tt,Ae=wt*Math.PI/360,Ke=4/3*Math.sin(Ae)/(1+Math.cos(Ae)),yt=[],At=0;At<=Tt;At++){var z=T,_t=null;if(At<Tt&&(_t=K.rotate(90).multiply(Ke),W?(z=W._transformPoint(K),_t=W._transformPoint(K.add(_t)).subtract(z)):z=q.add(K)),!At)S.setHandleOut(_t);else{var It=K.rotate(-90).multiply(Ke);W&&(It=W._transformPoint(K.add(It)).subtract(z)),yt.push(new H(z,It,_t))}K=K.rotate(wt)}this._add(yt)}},lineBy:function(){var f=g.read(arguments),b=l(this)._point;this.lineTo(b.add(f))},curveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),S=s.read(f),P=l(this)._point;this.curveTo(P.add(b),P.add(_),S)},cubicCurveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),S=g.read(f),P=l(this)._point;this.cubicCurveTo(P.add(b),P.add(_),P.add(S))},quadraticCurveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),S=l(this)._point;this.quadraticCurveTo(S.add(b),S.add(_))},arcBy:function(){var f=arguments,b=l(this)._point,_=b.add(g.read(f)),S=s.pick(s.peek(f),!0);typeof S=="boolean"?this.arcTo(_,S):this.arcTo(_,b.add(g.read(f)))},closePath:function(f){this.setClosed(!0),this.join(this,f)}}},{_getBounds:function(l,f){var b=f.handle?"getHandleBounds":f.stroke?"getStrokeBounds":"getBounds";return xe[b](this._segments,this._closed,this,l,f)},statics:{getBounds:function(l,f,b,_,S,P){var T=l[0];if(!T)return new x;var N=new Array(6),$=T._transformCoordinates(_,new Array(6)),F=$.slice(0,2),q=F.slice(),Q=new Array(2);function K(B){B._transformCoordinates(_,N);for(var Z=0;Z<2;Z++)je._addBounds($[Z],$[Z+4],N[Z+2],N[Z],Z,P?P[Z]:0,F,q,Q);var V=$;$=N,N=V}for(var W=1,Y=l.length;W<Y;W++)K(l[W]);return f&&K(T),new x(F[0],F[1],q[0]-F[0],q[1]-F[1])},getStrokeBounds:function(l,f,b,_,S){var P=b.getStyle(),T=P.hasStroke(),N=P.getStrokeWidth(),$=T&&b._getStrokeMatrix(_,S),F=T&&xe._getStrokePadding(N,$),q=xe.getBounds(l,f,b,_,S,F);if(!T)return q;var Q=N/2,K=P.getStrokeJoin(),W=P.getStrokeCap(),Y=P.getMiterLimit(),B=new x(new w(F));function Z(ue){q=q.include(ue)}function V(ue){q=q.unite(B.setCenter(ue._point.transform(_)))}function ne(ue,re){re==="round"||ue.isSmooth()?V(ue):xe._addBevelJoin(ue,re,Q,Y,_,$,Z)}function z(ue,re){re==="round"?V(ue):xe._addSquareCap(ue,re,Q,_,$,Z)}var te=l.length-(f?0:1);if(te>0){for(var se=1;se<te;se++)ne(l[se],K);f?ne(l[0],K):(z(l[0],W),z(l[l.length-1],W))}return q},_getStrokePadding:function(l,f){if(!f)return[l,l];var b=new g(l,0).transform(f),_=new g(0,l).transform(f),S=b.getAngleInRadians(),P=b.getLength(),T=_.getLength(),N=Math.sin(S),$=Math.cos(S),F=Math.tan(S),q=Math.atan2(T*F,P),Q=Math.atan2(T,F*P);return[Math.abs(P*Math.cos(q)*$+T*Math.sin(q)*N),Math.abs(T*Math.sin(Q)*$+P*Math.cos(Q)*N)]},_addBevelJoin:function(l,f,b,_,S,P,T,N){var $=l.getCurve(),F=$.getPrevious(),q=$.getPoint1().transform(S),Q=F.getNormalAtTime(1).multiply(b).transform(P),K=$.getNormalAtTime(0).multiply(b).transform(P),W=Q.getDirectedAngle(K);if((W<0||W>=180)&&(Q=Q.negate(),K=K.negate()),N&&T(q),T(q.add(Q)),f==="miter"){var Y=new j(q.add(Q),new g(-Q.y,Q.x),!0).intersect(new j(q.add(K),new g(-K.y,K.x),!0),!0);Y&&q.getDistance(Y)<=_*b&&T(Y)}T(q.add(K))},_addSquareCap:function(l,f,b,_,S,P,T){var N=l._point.transform(_),$=l.getLocation(),F=$.getNormal().multiply($.getTime()===0?b:-b).transform(S);f==="square"&&(T&&(P(N.subtract(F)),P(N.add(F))),N=N.add(F.rotate(-90))),P(N.add(F)),P(N.subtract(F))},getHandleBounds:function(l,f,b,_,S){var P=b.getStyle(),T=S.stroke&&P.hasStroke(),N,$;if(T){var F=b._getStrokeMatrix(_,S),q=P.getStrokeWidth()/2,Q=q;P.getStrokeJoin()==="miter"&&(Q=q*P.getMiterLimit()),P.getStrokeCap()==="square"&&(Q=Math.max(Q,q*Math.SQRT2)),N=xe._getStrokePadding(q,F),$=xe._getStrokePadding(Q,F)}for(var K=new Array(6),W=1/0,Y=-W,B=W,Z=Y,V=0,ne=l.length;V<ne;V++){var z=l[V];z._transformCoordinates(_,K);for(var te=0;te<6;te+=2){var se=te?N:$,ue=se?se[0]:0,re=se?se[1]:0,be=K[te],Se=K[te+1],Pe=be-ue,ze=be+ue,we=Se-re,$e=Se+re;Pe<W&&(W=Pe),ze>Y&&(Y=ze),we<B&&(B=we),$e>Z&&(Z=$e)}}return new x(W,B,Y-W,Z-B)}}});xe.inject({statics:new function(){var l=.5522847498307936,f=[new H([-1,0],[0,l],[0,-l]),new H([0,-1],[-l,0],[l,0]),new H([1,0],[0,-l],[0,l]),new H([0,1],[l,0],[-l,0])];function b(S,P,T){var N=s.getNamed(T),$=new xe(N&&(N.insert==!0?E.INSERT:N.insert==!1?E.NO_INSERT:null));return $._add(S),$._closed=P,$.set(N,E.INSERT)}function _(S,P,T){for(var N=new Array(4),$=0;$<4;$++){var F=f[$];N[$]=new H(F._point.multiply(P).add(S),F._handleIn.multiply(P),F._handleOut.multiply(P))}return b(N,!0,T)}return{Line:function(){var S=arguments;return b([new H(g.readNamed(S,"from")),new H(g.readNamed(S,"to"))],!1,S)},Circle:function(){var S=arguments,P=g.readNamed(S,"center"),T=s.readNamed(S,"radius");return _(P,new w(T),S)},Rectangle:function(){var S=arguments,P=x.readNamed(S,"rectangle"),T=w.readNamed(S,"radius",0,{readNull:!0}),N=P.getBottomLeft(!0),$=P.getTopLeft(!0),F=P.getTopRight(!0),q=P.getBottomRight(!0),Q;if(!T||T.isZero())Q=[new H(N),new H($),new H(F),new H(q)];else{T=w.min(T,P.getSize(!0).divide(2));var K=T.width,W=T.height,Y=K*l,B=W*l;Q=[new H(N.add(K,0),null,[-Y,0]),new H(N.subtract(0,W),[0,B]),new H($.add(0,W),null,[0,-B]),new H($.add(K,0),[-Y,0],null),new H(F.subtract(K,0),null,[Y,0]),new H(F.add(0,W),[0,-B],null),new H(q.subtract(0,W),null,[0,B]),new H(q.subtract(K,0),[Y,0])]}return b(Q,!0,S)},RoundRectangle:"#Rectangle",Ellipse:function(){var S=arguments,P=R._readEllipse(S);return _(P.center,P.radius,S)},Oval:"#Ellipse",Arc:function(){var S=arguments,P=g.readNamed(S,"from"),T=g.readNamed(S,"through"),N=g.readNamed(S,"to"),$=s.getNamed(S),F=new xe($&&$.insert==!1&&E.NO_INSERT);return F.moveTo(P),F.arcTo(T,N),F.set($)},RegularPolygon:function(){for(var S=arguments,P=g.readNamed(S,"center"),T=s.readNamed(S,"sides"),N=s.readNamed(S,"radius"),$=360/T,F=T%3===0,q=new g(0,F?-N:N),Q=F?-1:.5,K=new Array(T),W=0;W<T;W++)K[W]=new H(P.add(q.rotate((W+Q)*$)));return b(K,!0,S)},Star:function(){for(var S=arguments,P=g.readNamed(S,"center"),T=s.readNamed(S,"points")*2,N=s.readNamed(S,"radius1"),$=s.readNamed(S,"radius2"),F=360/T,q=new g(0,-1),Q=new Array(T),K=0;K<T;K++)Q[K]=new H(P.add(q.rotate(F*K).multiply(K%2?$:N)));return b(Q,!0,S)}}}});var Me=Fe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(f){this._children=[],this._namedChildren={},this._initialize(f)||(typeof f=="string"?this.setPathData(f):this.addChildren(Array.isArray(f)?f:arguments))},insertChildren:function l(f,b){var _=b,S=_[0];S&&typeof S[0]=="number"&&(_=[_]);for(var P=b.length-1;P>=0;P--){var T=_[P];_===b&&!(T instanceof xe)&&(_=s.slice(_)),Array.isArray(T)?_[P]=new xe({segments:T,insert:!1}):T instanceof Me&&(_.splice.apply(_,[P,1].concat(T.removeChildren())),T.remove())}return l.base.call(this,f,_)},reduce:function l(f){for(var b=this._children,_=b.length-1;_>=0;_--){var S=b[_].reduce(f);S.isEmpty()&&S.remove()}if(!b.length){var S=new xe(E.NO_INSERT);return S.copyAttributes(this),S.insertAbove(this),this.remove(),S}return l.base.call(this)},isClosed:function(){for(var l=this._children,f=0,b=l.length;f<b;f++)if(!l[f]._closed)return!1;return!0},setClosed:function(l){for(var f=this._children,b=0,_=f.length;b<_;b++)f[b].setClosed(l)},getFirstSegment:function(){var l=this.getFirstChild();return l&&l.getFirstSegment()},getLastSegment:function(){var l=this.getLastChild();return l&&l.getLastSegment()},getCurves:function(){for(var l=this._children,f=[],b=0,_=l.length;b<_;b++)s.push(f,l[b].getCurves());return f},getFirstCurve:function(){var l=this.getFirstChild();return l&&l.getFirstCurve()},getLastCurve:function(){var l=this.getLastChild();return l&&l.getLastCurve()},getArea:function(){for(var l=this._children,f=0,b=0,_=l.length;b<_;b++)f+=l[b].getArea();return f},getLength:function(){for(var l=this._children,f=0,b=0,_=l.length;b<_;b++)f+=l[b].getLength();return f},getPathData:function(l,f){for(var b=this._children,_=[],S=0,P=b.length;S<P;S++){var T=b[S],N=T._matrix;_.push(T.getPathData(l&&!N.isIdentity()?l.appended(N):l,f))}return _.join("")},_hitTestChildren:function l(f,b,_){return l.base.call(this,f,b.class===xe||b.type==="path"?b:s.set({},b,{fill:!1}),_)},_draw:function(l,f,b,_){var S=this._children;if(S.length){f=f.extend({dontStart:!0,dontFinish:!0}),l.beginPath();for(var P=0,T=S.length;P<T;P++)S[P].draw(l,f,_);if(!f.clip){this._setStyles(l,f,b);var N=this._style;N.hasFill()&&(l.fill(N.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),N.hasStroke()&&l.stroke()}}},_drawSelected:function(l,f,b){for(var _=this._children,S=0,P=_.length;S<P;S++){var T=_[S],N=T._matrix;b[T._id]||T._drawSelected(l,N.isIdentity()?f:f.appended(N))}}},new function(){function l(f,b){var _=f._children;if(b&&!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(f){this[f]=function(){var b=l(this,!0);b[f].apply(b,arguments)}},{moveTo:function(){var f=l(this),b=f&&f.isEmpty()?f:new xe(E.NO_INSERT);b!==f&&this.addChild(b),b.moveTo.apply(b,arguments)},moveBy:function(){var f=l(this,!0),b=f&&f.getLastSegment(),_=g.read(arguments);this.moveTo(b?_.add(b._point):_)},closePath:function(f){l(this,!0).closePath(f)}})},s.each(["reverse","flatten","simplify","smooth"],function(l){this[l]=function(f){for(var b=this._children,_,S=0,P=b.length;S<P;S++)_=b[S][l](f)||_;return _}},{}));Fe.inject(new function(){var l=Math.min,f=Math.max,b=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function S(V){return V._children||[V]}function P(V,ne){var z=V.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(ne){for(var te=S(z),se=0,ue=te.length;se<ue;se++){var V=te[se];!V._closed&&!V.isEmpty()&&(V.closePath(1e-12),V.getFirstSegment().setHandleIn(0,0),V.getLastSegment().setHandleOut(0,0))}z=z.resolveCrossings().reorient(z.getFillRule()==="nonzero",!0)}return z}function T(V,ne,z,te,se){var ue=new Me(E.NO_INSERT);return ue.addChildren(V,!0),ue=ue.reduce({simplify:ne}),se&&se.insert==!1||ue.insertAbove(te&&z.isSibling(te)&&z.getIndex()<te.getIndex()?te:z),ue.copyAttributes(z,!0),ue}function N(V){return V.hasOverlap()||V.isCrossing()}function $(V,ne,z,te){if(te&&(te.trace==!1||te.stroke)&&/^(subtract|intersect)$/.test(z))return F(V,ne,z);var se=P(V,!0),ue=ne&&V!==ne&&P(ne,!0),re=_[z];re[z]=!0,ue&&(re.subtract||re.exclude)^(ue.isClockwise()^se.isClockwise())&&ue.reverse();var be=W(ke.expand(se.getIntersections(ue,N))),Se=S(se),Pe=ue&&S(ue),ze=[],we=[],$e;function Be(_t){for(var It=0,jt=_t.length;It<jt;It++){var Dt=_t[It];s.push(ze,Dt._segments),s.push(we,Dt.getCurves()),Dt._overlapsOnly=!0}}function Ye(_t){for(var It=[],jt=0,Dt=_t&&_t.length;jt<Dt;jt++)It.push(we[_t[jt]]);return It}if(be.length){Be(Se),Pe&&Be(Pe);for(var Qe=new Array(we.length),Je=0,dt=we.length;Je<dt;Je++)Qe[Je]=we[Je].getValues();for(var pt=h.findCurveBoundsCollisions(Qe,Qe,0,!0),Tt={},Je=0;Je<we.length;Je++){var wt=we[Je],Ae=wt._path._id,Ke=Tt[Ae]=Tt[Ae]||{};Ke[wt.getIndex()]={hor:Ye(pt[Je].hor),ver:Ye(pt[Je].ver)}}for(var Je=0,dt=be.length;Je<dt;Je++)B(be[Je]._segment,se,ue,Tt,re);for(var Je=0,dt=ze.length;Je<dt;Je++){var yt=ze[Je],At=yt._intersection;yt._winding||B(yt,se,ue,Tt,re),At&&At._overlap||(yt._path._overlapsOnly=!1)}$e=Z(ze,re)}else $e=K(Pe?Se.concat(Pe):Se.slice(),function(_t){return!!re[_t]});return T($e,!0,V,ne,te)}function F(V,ne,z){var te=P(V),se=P(ne),ue=te.getIntersections(se,N),re=z==="subtract",be=z==="divide",Se={},Pe=[];function ze(Be){if(!Se[Be._id]&&(be||se.contains(Be.getPointAt(Be.getLength()/2))^re))return Pe.unshift(Be),Se[Be._id]=!0}for(var we=ue.length-1;we>=0;we--){var $e=ue[we].split();$e&&(ze($e)&&$e.getFirstSegment().setHandleIn(0,0),te.getLastSegment().setHandleOut(0,0))}return ze(te),T(Pe,!1,V,ne)}function q(V,ne){for(var z=V;z;){if(z===ne)return;z=z._previous}for(;V._next&&V._next!==ne;)V=V._next;if(!V._next){for(;ne._previous;)ne=ne._previous;V._next=ne,ne._previous=V}}function Q(V){for(var ne=V.length-1;ne>=0;ne--)V[ne].clearHandles()}function K(V,ne,z){var te=V&&V.length;if(te){var se=s.each(V,function(pt,Tt){this[pt._id]={container:null,winding:pt.isClockwise()?1:-1,index:Tt}},{}),ue=V.slice().sort(function(pt,Tt){return b(Tt.getArea())-b(pt.getArea())}),re=ue[0],be=h.findItemBoundsCollisions(ue,null,p.GEOMETRIC_EPSILON);z==null&&(z=re.isClockwise());for(var Se=0;Se<te;Se++){var Pe=ue[Se],ze=se[Pe._id],we=0,$e=be[Se];if($e){for(var Be=null,Ye=$e.length-1;Ye>=0;Ye--)if($e[Ye]<Se){Be=Be||Pe.getInteriorPoint();var Qe=ue[$e[Ye]];if(Qe.contains(Be)){var Je=se[Qe._id];we=Je.winding,ze.winding+=we,ze.container=Je.exclude?Je.container:Qe;break}}}if(ne(ze.winding)===ne(we))ze.exclude=!0,V[ze.index]=null;else{var dt=ze.container;Pe.setClockwise(dt?!dt.isClockwise():z)}}}return V}function W(V,ne,z){var te=ne&&[],se=1e-8,ue=1-se,re=!1,be=z||[],Se=z&&{},Pe,ze,we;function $e(It){return It._path._id+"."+It._segment1._index}for(var Be=(z&&z.length)-1;Be>=0;Be--){var Ye=z[Be];Ye._path&&(Se[$e(Ye)]=!0)}for(var Be=V.length-1;Be>=0;Be--){var Qe=V[Be],Je=Qe._time,dt=Je,pt=ne&&!ne(Qe),Ye=Qe._curve,Tt;if(Ye&&(Ye!==ze?(re=!Ye.hasHandles()||Se&&Se[$e(Ye)],Pe=[],we=null,ze=Ye):we>=se&&(Je/=we)),pt){Pe&&Pe.push(Qe);continue}else ne&&te.unshift(Qe);if(we=dt,Je<se)Tt=Ye._segment1;else if(Je>ue)Tt=Ye._segment2;else{var wt=Ye.divideAtTime(Je,!0);re&&be.push(Ye,wt),Tt=wt._segment1;for(var Ae=Pe.length-1;Ae>=0;Ae--){var Ke=Pe[Ae];Ke._time=(Ke._time-Je)/(1-Je)}}Qe._setSegment(Tt);var yt=Tt._intersection,At=Qe._intersection;if(yt){q(yt,At);for(var _t=yt;_t;)q(_t._intersection,yt),_t=_t._next}else Tt._intersection=At}return z||Q(be),te||V}function Y(V,ne,z,te,se){var ue=Array.isArray(ne)?ne:ne[z?"hor":"ver"],re=z?1:0,be=re^1,Se=[V.x,V.y],Pe=Se[re],ze=Se[be],we=1e-9,$e=1e-6,Be=Pe-we,Ye=Pe+we,Qe=0,Je=0,dt=0,pt=0,Tt=!1,wt=!1,Ae=1,Ke=[],yt,At;function _t(vt){var En=vt[be+0],On=vt[be+6];if(!(ze<l(En,On)||ze>f(En,On))){var wn=vt[re+0],Sr=vt[re+2],Nr=vt[re+4],cr=vt[re+6];if(En===On){(wn<Ye&&cr>Be||cr<Ye&&wn>Be)&&(Tt=!0);return}var ur=ze===En?0:ze===On||Be>f(wn,Sr,Nr,cr)||Ye<l(wn,Sr,Nr,cr)?1:je.solveCubic(vt,be,ze,Ke,0,1)>0?Ke[0]:1,pr=ur===0?wn:ur===1?cr:je.getPoint(vt,ur)[z?"y":"x"],Lr=En>On?1:-1,Kr=yt[be]>yt[be+6]?1:-1,$n=yt[re+6];return ze!==En?(pr<Be?dt+=Lr:pr>Ye?pt+=Lr:Tt=!0,pr>Pe-$e&&pr<Pe+$e&&(Ae/=2)):(Lr!==Kr?wn<Be?dt+=Lr:wn>Ye&&(pt+=Lr):wn!=$n&&($n<Ye&&pr>Ye?(pt+=Lr,Tt=!0):$n>Be&&pr<Be&&(dt+=Lr,Tt=!0)),Ae/=4),yt=vt,!se&&pr>Be&&pr<Ye&&je.getTangent(vt,ur)[z?"x":"y"]===0&&Y(V,ne,!z,te,!0)}}function It(vt){var En=vt[be+0],On=vt[be+2],wn=vt[be+4],Sr=vt[be+6];if(ze<=f(En,On,wn,Sr)&&ze>=l(En,On,wn,Sr)){for(var Nr=vt[re+0],cr=vt[re+2],ur=vt[re+4],pr=vt[re+6],Lr=Be>f(Nr,cr,ur,pr)||Ye<l(Nr,cr,ur,pr)?[vt]:je.getMonoCurves(vt,z),Kr,$n=0,Jn=Lr.length;$n<Jn;$n++)if(Kr=_t(Lr[$n]))return Kr}}for(var jt=0,Dt=ue.length;jt<Dt;jt++){var Bt=ue[jt],Mt=Bt._path,tn=Bt.getValues(),nn;if((!jt||ue[jt-1]._path!==Mt)&&(yt=null,Mt._closed||(At=je.getValues(Mt.getLastCurve().getSegment2(),Bt.getSegment1(),null,!te),At[be]!==At[be+6]&&(yt=At)),!yt)){yt=tn;for(var xn=Mt.getLastCurve();xn&&xn!==Bt;){var Cn=xn.getValues();if(Cn[be]!==Cn[be+6]){yt=Cn;break}xn=xn.getPrevious()}}if(nn=It(tn))return nn;if(jt+1===Dt||ue[jt+1]._path!==Mt){if(At&&(nn=It(At)))return nn;Tt&&!dt&&!pt&&(dt=pt=Mt.isClockwise(te)^z?1:-1),Qe+=dt,Je+=pt,dt=pt=0,Tt&&(wt=!0,Tt=!1),At=null}}return Qe=b(Qe),Je=b(Je),{winding:f(Qe,Je),windingL:Qe,windingR:Je,quality:Ae,onPath:wt}}function B(V,ne,z,te,se){var ue=[],re=V,be=0,we;do{var Se=V.getCurve();if(Se){var Pe=Se.getLength();ue.push({segment:V,curve:Se,length:Pe}),be+=Pe}V=V.getNext()}while(V&&!V._intersection&&V!==re);for(var ze=[.5,.25,.75],we={winding:0,quality:-1},$e=.001,Be=1-$e,Ye=0;Ye<ze.length&&we.quality<.5;Ye++)for(var Pe=be*ze[Ye],Qe=0,Je=ue.length;Qe<Je;Qe++){var dt=ue[Qe],pt=dt.length;if(Pe<=pt){var Se=dt.curve,Tt=Se._path,wt=Tt._parent,Ae=wt instanceof Me?wt:Tt,Ke=p.clamp(Se.getTimeAt(Pe),$e,Be),yt=Se.getPointAtTime(Ke),At=b(Se.getTangentAtTime(Ke).y)<Math.SQRT1_2,_t=null;if(se.subtract&&z){var It=Ae===ne?z:ne,jt=It._getWinding(yt,At,!0);if(Ae===ne&&jt.winding||Ae===z&&!jt.winding){if(jt.quality<1)continue;_t={winding:0,quality:1}}}_t=_t||Y(yt,te[Tt._id][Se.getIndex()],At,!0),_t.quality>we.quality&&(we=_t);break}Pe-=pt}for(var Qe=ue.length-1;Qe>=0;Qe--)ue[Qe].segment._winding=we}function Z(V,ne){var z=[],te;function se(Dt){var Bt;return!!(Dt&&!Dt._visited&&(!ne||ne[(Bt=Dt._winding||{}).winding]&&!(ne.unite&&Bt.winding===2&&Bt.windingL&&Bt.windingR)))}function ue(Dt){if(Dt){for(var Bt=0,Mt=te.length;Bt<Mt;Bt++)if(Dt===te[Bt])return!0}return!1}function re(Dt){for(var Bt=Dt._segments,Mt=0,tn=Bt.length;Mt<tn;Mt++)Bt[Mt]._visited=!0}function be(Dt,Bt){var Mt=Dt._intersection,tn=Mt,nn=[];Bt&&(te=[Dt]);function xn(Cn,vt){for(;Cn&&Cn!==vt;){var En=Cn._segment,On=En&&En._path;if(On){var wn=En.getNext()||On.getFirstSegment(),Sr=wn._intersection;En!==Dt&&(ue(En)||ue(wn)||wn&&se(En)&&(se(wn)||Sr&&se(Sr._segment)))&&nn.push(En),Bt&&te.push(En)}Cn=Cn._next}}if(Mt){for(xn(Mt);Mt&&Mt._previous;)Mt=Mt._previous;xn(Mt,tn)}return nn}V.sort(function(Dt,Bt){var Mt=Dt._intersection,tn=Bt._intersection,nn=!!(Mt&&Mt._overlap),xn=!!(tn&&tn._overlap),Cn=Dt._path,vt=Bt._path;return nn^xn?nn?1:-1:!Mt^!tn?Mt?1:-1:Cn!==vt?Cn._id-vt._id:Dt._index-Bt._index});for(var Se=0,Pe=V.length;Se<Pe;Se++){var ze=V[Se],we=se(ze),$e=null,Be=!1,Ye=!0,Qe=[],Je,dt,pt;if(we&&ze._path._overlapsOnly){var Tt=ze._path,wt=ze._intersection._segment._path;Tt.compare(wt)&&(Tt.getArea()&&z.push(Tt.clone(!1)),re(Tt),re(wt),we=!1)}for(;we;){var Ae=!$e,Ke=be(ze,Ae),yt=Ke.shift(),Be=!Ae&&(ue(ze)||ue(yt)),At=!Be&&yt;if(Ae&&($e=new xe(E.NO_INSERT),Je=null),Be){(ze.isFirst()||ze.isLast())&&(Ye=ze._path._closed),ze._visited=!0;break}if(At&&Je&&(Qe.push(Je),Je=null),Je||(At&&Ke.push(ze),Je={start:$e._segments.length,crossings:Ke,visited:dt=[],handleIn:pt}),At&&(ze=yt),!se(ze)){$e.removeSegments(Je.start);for(var _t=0,It=dt.length;_t<It;_t++)dt[_t]._visited=!1;dt.length=0;do ze=Je&&Je.crossings.shift(),(!ze||!ze._path)&&(ze=null,Je=Qe.pop(),Je&&(dt=Je.visited,pt=Je.handleIn));while(Je&&!se(ze));if(!ze)break}var jt=ze.getNext();$e.add(new H(ze._point,pt,jt&&ze._handleOut)),ze._visited=!0,dt.push(ze),ze=jt||ze._path.getFirstSegment(),pt=jt&&jt._handleIn}Be&&(Ye&&($e.getFirstSegment().setHandleIn(pt),$e.setClosed(Ye)),$e.getArea()!==0&&z.push($e))}return z}return{_getWinding:function(V,ne,z){return Y(V,this.getCurves(),ne,z)},unite:function(V,ne){return $(this,V,"unite",ne)},intersect:function(V,ne){return $(this,V,"intersect",ne)},subtract:function(V,ne){return $(this,V,"subtract",ne)},exclude:function(V,ne){return $(this,V,"exclude",ne)},divide:function(V,ne){return ne&&(ne.trace==!1||ne.stroke)?F(this,V,"divide"):T([this.subtract(V,ne),this.intersect(V,ne)],!0,this,V,ne)},resolveCrossings:function(){var V=this._children,ne=V||[this];function z(Je,dt){var pt=Je&&Je._intersection;return pt&&pt._overlap&&pt._path===dt}var te=!1,se=!1,ue=this.getIntersections(null,function(Je){return Je.hasOverlap()&&(te=!0)||Je.isCrossing()&&(se=!0)}),re=te&&se&&[];if(ue=ke.expand(ue),te)for(var be=W(ue,function(Je){return Je.hasOverlap()},re),Se=be.length-1;Se>=0;Se--){var Pe=be[Se],ze=Pe._path,we=Pe._segment,$e=we.getPrevious(),Be=we.getNext();z($e,ze)&&z(Be,ze)&&(we.remove(),$e._handleOut._set(0,0),Be._handleIn._set(0,0),$e!==we&&!$e.getCurve().hasLength()&&(Be._handleIn.set($e._handleIn),$e.remove()))}se&&(W(ue,te&&function(Je){var dt=Je.getCurve(),pt=Je.getSegment(),Tt=Je._intersection,wt=Tt._curve,Ae=Tt._segment;if(dt&&wt&&dt._path&&wt._path)return!0;pt&&(pt._intersection=null),Ae&&(Ae._intersection=null)},re),re&&Q(re),ne=Z(s.each(ne,function(Je){s.push(this,Je._segments)},[])));var Ye=ne.length,Qe;return Ye>1&&V?(ne!==V&&this.setChildren(ne),Qe=this):Ye===1&&!V&&(ne[0]!==this&&this.setSegments(ne[0].removeSegments()),Qe=this),Qe||(Qe=new Me(E.NO_INSERT),Qe.addChildren(ne),Qe=Qe.reduce(),Qe.copyAttributes(this),this.replaceWith(Qe)),Qe},reorient:function(V,ne){var z=this._children;return z&&z.length?this.setChildren(K(this.removeChildren(),function(te){return!!(V?te:te&1)},ne)):ne!==n&&this.setClockwise(ne),this},getInteriorPoint:function(){var V=this.getBounds(),ne=V.getCenter(!0);if(!this.contains(ne)){for(var z=this.getCurves(),te=ne.y,se=[],ue=[],re=0,be=z.length;re<be;re++){var Se=z[re].getValues(),Pe=Se[1],ze=Se[3],we=Se[5],$e=Se[7];if(te>=l(Pe,ze,we,$e)&&te<=f(Pe,ze,we,$e))for(var Be=je.getMonoCurves(Se),Ye=0,Qe=Be.length;Ye<Qe;Ye++){var Je=Be[Ye],dt=Je[1],pt=Je[7];if(dt!==pt&&(te>=dt&&te<=pt||te>=pt&&te<=dt)){var Tt=te===dt?Je[0]:te===pt?Je[6]:je.solveCubic(Je,1,te,ue,0,1)===1?je.getPoint(Je,ue[0]).x:(Je[0]+Je[6])/2;se.push(Tt)}}}se.length>1&&(se.sort(function(wt,Ae){return wt-Ae}),ne.x=(se[0]+se[1])/2)}return ne}}});var _e=s.extend({_class:"PathFlattener",initialize:function(l,f,b,_,S){var P=[],T=[],N=0,$=1/(b||32),F=l._segments,q=F[0],Q;function K(Z,V){var ne=je.getValues(Z,V,S);P.push(ne),W(ne,Z._index,0,1)}function W(Z,V,ne,z){if(z-ne>$&&!(_&&je.isStraight(Z))&&!je.isFlatEnough(Z,f||.25)){var te=je.subdivide(Z,.5),se=(ne+z)/2;W(te[0],V,ne,se),W(te[1],V,se,z)}else{var ue=Z[6]-Z[0],re=Z[7]-Z[1],be=Math.sqrt(ue*ue+re*re);be>0&&(N+=be,T.push({offset:N,curve:Z,index:V,time:z}))}}for(var Y=1,B=F.length;Y<B;Y++)Q=F[Y],K(q,Q),q=Q;l._closed&&K(Q||q,F[0]),this.curves=P,this.parts=T,this.length=N,this.index=0},_get:function(l){for(var f=this.parts,b=f.length,_,S=this.index;_=S,!(!S||f[--S].offset<l););for(;_<b;_++){var P=f[_];if(P.offset>=l){this.index=_;var T=f[_-1],N=T&&T.index===P.index?T.time:0,$=T?T.offset:0;return{index:P.index,time:N+(P.time-N)*(l-$)/(P.offset-$)}}}return{index:f[b-1].index,time:1}},drawPart:function(l,f,b){for(var _=this._get(f),S=this._get(b),P=_.index,T=S.index;P<=T;P++){var N=je.getPart(this.curves[P],P===_.index?_.time:0,P===S.index?S.time:1);P===_.index&&l.moveTo(N[0],N[1]),l.bezierCurveTo.apply(l,N.slice(2))}}},s.each(je._evaluateMethods,function(l){this[l+"At"]=function(f){var b=this._get(f);return je[l](this.curves[b.index],b.time)}},{})),Ne=s.extend({initialize:function(l){for(var f=this.points=[],b=l._segments,_=l._closed,S=0,P,T=b.length;S<T;S++){var N=b[S].point;(!P||!P.equals(N))&&f.push(P=N.clone())}_&&(f.unshift(f[f.length-1]),f.push(f[1])),this.closed=_},fit:function(l){var f=this.points,b=f.length,_=null;return b>0&&(_=[new H(f[0])],b>1&&(this.fitCubic(_,l,0,b-1,f[1].subtract(f[0]),f[b-2].subtract(f[b-1])),this.closed&&(_.shift(),_.pop()))),_},fitCubic:function(l,f,b,_,S,P){var T=this.points;if(_-b===1){var N=T[b],$=T[_],F=N.getDistance($)/3;this.addCurve(l,[N,N.add(S.normalize(F)),$.add(P.normalize(F)),$]);return}for(var q=this.chordLengthParameterize(b,_),Q=Math.max(f,f*f),K,W=!0,Y=0;Y<=4;Y++){var B=this.generateBezier(b,_,q,S,P),Z=this.findMaxError(b,_,B,q);if(Z.error<f&&W){this.addCurve(l,B);return}if(K=Z.index,Z.error>=Q)break;W=this.reparameterize(b,_,q,B),Q=Z.error}var V=T[K-1].subtract(T[K+1]);this.fitCubic(l,f,b,K,S,V),this.fitCubic(l,f,K,_,V.negate(),P)},addCurve:function(l,f){var b=l[l.length-1];b.setHandleOut(f[1].subtract(f[0])),l.push(new H(f[3],f[2].subtract(f[3])))},generateBezier:function(l,f,b,_,S){for(var P=1e-12,T=Math.abs,N=this.points,$=N[l],F=N[f],q=[[0,0],[0,0]],Q=[0,0],K=0,W=f-l+1;K<W;K++){var Y=b[K],B=1-Y,Z=3*Y*B,V=B*B*B,ne=Z*B,z=Z*Y,te=Y*Y*Y,se=_.normalize(ne),ue=S.normalize(z),re=N[l+K].subtract($.multiply(V+ne)).subtract(F.multiply(z+te));q[0][0]+=se.dot(se),q[0][1]+=se.dot(ue),q[1][0]=q[0][1],q[1][1]+=ue.dot(ue),Q[0]+=se.dot(re),Q[1]+=ue.dot(re)}var be=q[0][0]*q[1][1]-q[1][0]*q[0][1],Se,Pe;if(T(be)>P){var ze=q[0][0]*Q[1]-q[1][0]*Q[0],we=Q[0]*q[1][1]-Q[1]*q[0][1];Se=we/be,Pe=ze/be}else{var $e=q[0][0]+q[0][1],Be=q[1][0]+q[1][1];Se=Pe=T($e)>P?Q[0]/$e:T(Be)>P?Q[1]/Be:0}var Ye=F.getDistance($),Qe=P*Ye,Je,dt;if(Se<Qe||Pe<Qe)Se=Pe=Ye/3;else{var pt=F.subtract($);Je=_.normalize(Se),dt=S.normalize(Pe),Je.dot(pt)-dt.dot(pt)>Ye*Ye&&(Se=Pe=Ye/3,Je=dt=null)}return[$,$.add(Je||_.normalize(Se)),F.add(dt||S.normalize(Pe)),F]},reparameterize:function(l,f,b,_){for(var S=l;S<=f;S++)b[S-l]=this.findRoot(_,this.points[S],b[S-l]);for(var S=1,P=b.length;S<P;S++)if(b[S]<=b[S-1])return!1;return!0},findRoot:function(l,f,b){for(var _=[],S=[],P=0;P<=2;P++)_[P]=l[P+1].subtract(l[P]).multiply(3);for(var P=0;P<=1;P++)S[P]=_[P+1].subtract(_[P]).multiply(2);var T=this.evaluate(3,l,b),N=this.evaluate(2,_,b),$=this.evaluate(1,S,b),F=T.subtract(f),q=N.dot(N)+F.dot($);return p.isMachineZero(q)?b:b-F.dot(N)/q},evaluate:function(l,f,b){for(var _=f.slice(),S=1;S<=l;S++)for(var P=0;P<=l-S;P++)_[P]=_[P].multiply(1-b).add(_[P+1].multiply(b));return _[0]},chordLengthParameterize:function(l,f){for(var b=[0],_=l+1;_<=f;_++)b[_-l]=b[_-l-1]+this.points[_].getDistance(this.points[_-1]);for(var _=1,S=f-l;_<=S;_++)b[_]/=b[S];return b},findMaxError:function(l,f,b,_){for(var S=Math.floor((f-l+1)/2),P=0,T=l+1;T<f;T++){var N=this.evaluate(3,b,_[T-l]),$=N.subtract(this.points[T]),F=$.x*$.x+$.y*$.y;F>=P&&(P=F,S=T)}return{error:P,index:S}}}),st=E.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(f){this._content="",this._lines=[];var b=f&&s.isPlainObject(f)&&f.x===n&&f.y===n;this._initialize(b&&f,!b&&g.read(arguments))},_equals:function(l){return this._content===l._content},copyContent:function(l){this.setContent(l._content)},getContent:function(){return this._content},setContent:function(l){this._content=""+l,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),nt=st.extend({_class:"PointText",initialize:function(){st.apply(this,arguments)},getPoint:function(){var l=this._matrix.getTranslation();return new v(l.x,l.y,this,"setPoint")},setPoint:function(){var l=g.read(arguments);this.translate(l.subtract(this._matrix.getTranslation()))},_draw:function(l,f,b){if(this._content){this._setStyles(l,f,b);var _=this._lines,S=this._style,P=S.hasFill(),T=S.hasStroke(),N=S.getLeading(),$=l.shadowColor;l.font=S.getFontStyle(),l.textAlign=S.getJustification();for(var F=0,q=_.length;F<q;F++){l.shadowColor=$;var Q=_[F];P&&(l.fillText(Q,0,0),l.shadowColor="rgba(0,0,0,0)"),T&&l.strokeText(Q,0,0),l.translate(0,N)}}},_getBounds:function(l,f){var b=this._style,_=this._lines,S=_.length,P=b.getJustification(),T=b.getLeading(),N=this.getView().getTextWidth(b.getFontStyle(),_),$=0;P!=="left"&&($-=N/(P==="center"?2:1));var F=new x($,S?-.75*T:0,N,S*T);return l?l._transformBounds(F,F):F}}),Ue=s.extend(new function(){var l={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},f={},b={transparent:[0,0,0,0]},_;function S(N){var $=N.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||N.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),F="rgb",q;if($){var Q=$[4]?4:3;q=new Array(Q);for(var K=0;K<Q;K++){var W=$[K+1];q[K]=parseInt(W.length==1?W+W:W,16)/255}}else if($=N.match(/^(rgb|hsl)a?\((.*)\)$/)){F=$[1],q=$[2].trim().split(/[,\s]+/g);for(var Y=F==="hsl",K=0,B=Math.min(q.length,4);K<B;K++){var Z=q[K],W=parseFloat(Z);if(Y)if(K===0){var V=Z.match(/([a-z]*)$/)[1];W*={turn:360,rad:180/Math.PI,grad:.9}[V]||1}else K<3&&(W/=100);else K<3&&(W/=/%$/.test(Z)?100:255);q[K]=W}}else{var ne=b[N];if(!ne)if(r){_||(_=ve.getContext(1,1,{willReadFrequently:!0}),_.globalCompositeOperation="copy"),_.fillStyle="rgba(0,0,0,0)",_.fillStyle=N,_.fillRect(0,0,1,1);var z=_.getImageData(0,0,1,1).data;ne=b[N]=[z[0]/255,z[1]/255,z[2]/255]}else ne=[0,0,0];q=ne.slice()}return[F,q]}var P=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],T={"rgb-hsb":function(N,$,F){var q=Math.max(N,$,F),Q=Math.min(N,$,F),K=q-Q,W=K===0?0:(q==N?($-F)/K+($<F?6:0):q==$?(F-N)/K+2:(N-$)/K+4)*60;return[W,q===0?0:K/q,q]},"hsb-rgb":function(N,$,F){N=(N/60%6+6)%6;var Q=Math.floor(N),q=N-Q,Q=P[Q],K=[F,F*(1-$),F*(1-$*q),F*(1-$*(1-q))];return[K[Q[0]],K[Q[1]],K[Q[2]]]},"rgb-hsl":function(N,$,F){var q=Math.max(N,$,F),Q=Math.min(N,$,F),K=q-Q,W=K===0,Y=W?0:(q==N?($-F)/K+($<F?6:0):q==$?(F-N)/K+2:(N-$)/K+4)*60,B=(q+Q)/2,Z=W?0:B<.5?K/(q+Q):K/(2-q-Q);return[Y,Z,B]},"hsl-rgb":function(N,$,F){if(N=(N/360%1+1)%1,$===0)return[F,F,F];for(var q=[N+1/3,N,N-1/3],Q=F<.5?F*(1+$):F+$-F*$,K=2*F-Q,W=[],Y=0;Y<3;Y++){var B=q[Y];B<0&&(B+=1),B>1&&(B-=1),W[Y]=6*B<1?K+(Q-K)*6*B:2*B<1?Q:3*B<2?K+(Q-K)*(2/3-B)*6:K}return W},"rgb-gray":function(N,$,F){return[N*.2989+$*.587+F*.114]},"gray-rgb":function(N){return[N,N,N]},"gray-hsb":function(N){return[0,0,N]},"gray-hsl":function(N){return[0,0,N]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(l,function(N,$){f[$]=[],s.each(N,function(F,q){var Q=s.capitalize(F),K=/^(hue|saturation)$/.test(F),W=f[$][q]=$==="gradient"?F==="gradient"?function(Y){var B=this._components[0];return Y=ct.read(Array.isArray(Y)?Y:arguments,0,{readNull:!0}),B!==Y&&(B&&B._removeOwner(this),Y&&Y._addOwner(this)),Y}:function(){return g.read(arguments,0,{readNull:F==="highlight",clone:!0})}:function(Y){return Y==null||isNaN(Y)?0:+Y};this["get"+Q]=function(){return this._type===$||K&&/^hs[bl]$/.test(this._type)?this._components[q]:this._convert($)[q]},this["set"+Q]=function(Y){this._type!==$&&!(K&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert($),this._properties=l[$],this._type=$),this._components[q]=W.call(this,Y),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function N($){var F=arguments,q=this.__read,Q=0,K,W,Y,B;Array.isArray($)&&(F=$,$=F[0]);var Z=$!=null&&typeof $;if(Z==="string"&&$ in l&&(K=$,$=F[1],Array.isArray($)?(W=$,Y=F[2]):(q&&(Q=1),F=s.slice(F,1),Z=typeof $)),!W){if(B=Z==="number"?F:Z==="object"&&$.length!=null?$:null,B){K||(K=B.length>=3?"rgb":"gray");var V=l[K].length;Y=B[V],q&&(Q+=B===arguments?V+(Y!=null?1:0):1),B.length>V&&(B=s.slice(B,0,V))}else if(Z==="string"){var ne=S($);K=ne[0],W=ne[1],W.length===4&&(Y=W[3],W.length--)}else if(Z==="object")if($.constructor===N){if(K=$._type,W=$._components.slice(),Y=$._alpha,K==="gradient")for(var z=1,te=W.length;z<te;z++){var se=W[z];se&&(W[z]=se.clone())}}else if($.constructor===ct)K="gradient",B=F;else{K="hue"in $?"lightness"in $?"hsl":"hsb":"gradient"in $||"stops"in $||"radial"in $?"gradient":"gray"in $?"gray":"rgb";var ue=l[K],re=f[K];this._components=W=[];for(var z=0,te=ue.length;z<te;z++){var be=$[ue[z]];be==null&&!z&&K==="gradient"&&"stops"in $&&(be={stops:$.stops,radial:$.radial}),be=re[z].call(this,be),be!=null&&(W[z]=be)}Y=$.alpha}q&&K&&(Q=1)}if(this._type=K||"rgb",!W){this._components=W=[];for(var re=f[this._type],z=0,te=re.length;z<te;z++){var be=re[z].call(this,B&&B[z]);be!=null&&(W[z]=be)}}return this._components=W,this._properties=l[this._type],this._alpha=Y,q&&(this.__read=Q),this},set:"#initialize",_serialize:function(N,$){var F=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?F:[this._type].concat(F),N,!0,$)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(N){var $;return this._type===N?this._components.slice():($=T[this._type+"-"+N])?$.apply(this,this._components):T["rgb-"+N].apply(this,T[this._type+"-rgb"].apply(this,this._components))},convert:function(N){return new Ue(N,this._convert(N),this._alpha)},getType:function(){return this._type},setType:function(N){this._components=this._convert(N),this._properties=l[N],this._type=N},getComponents:function(){var N=this._components.slice();return this._alpha!=null&&N.push(this._alpha),N},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(N){this._alpha=N==null?null:Math.min(Math.max(N,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(N){var $=s.isPlainValue(N,!0)?Ue.read(arguments):N;return $===this||$&&this._class===$._class&&this._type===$._type&&this.getAlpha()===$.getAlpha()&&s.equals(this._components,$._components)||!1},toString:function(){for(var N=this._properties,$=[],F=this._type==="gradient",q=d.instance,Q=0,K=N.length;Q<K;Q++){var W=this._components[Q];W!=null&&$.push(N[Q]+": "+(F?W:q.number(W)))}return this._alpha!=null&&$.push("alpha: "+q.number(this._alpha)),"{ "+$.join(", ")+" }"},toCSS:function(N){var $=this._convert("rgb"),F=N||this._alpha==null?1:this._alpha;function q(Q){return Math.round((Q<0?0:Q>1?1:Q)*255)}return $=[q($[0]),q($[1]),q($[2])],F<1&&$.push(F<0?0:F),N?"#"+((1<<24)+($[0]<<16)+($[1]<<8)+$[2]).toString(16).slice(1):($.length==4?"rgba(":"rgb(")+$.join(",")+")"},toCanvasStyle:function(N,$){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var F=this._components,q=F[0],Q=q._stops,K=F[1],W=F[2],Y=F[3],B=$&&$.inverted(),Z;if(B&&(K=B._transformPoint(K),W=B._transformPoint(W),Y&&(Y=B._transformPoint(Y))),q._radial){var V=W.getDistance(K);if(Y){var ne=Y.subtract(K);ne.getLength()>V&&(Y=K.add(ne.normalize(V-.1)))}var z=Y||K;Z=N.createRadialGradient(z.x,z.y,0,K.x,K.y,V)}else Z=N.createLinearGradient(K.x,K.y,W.x,W.y);for(var te=0,se=Q.length;te<se;te++){var ue=Q[te],re=ue._offset;Z.addColorStop(re??te/(se-1),ue._color.toCanvasStyle())}return this._canvasStyle=Z},transform:function(N){if(this._type==="gradient"){for(var $=this._components,F=1,q=$.length;F<q;F++){var Q=$[F];N._transformPoint(Q,Q,!0)}this._changed()}},statics:{_types:l,random:function(){var N=Math.random;return new Ue(N(),N(),N())},_setOwner:function(N,$,F){return N&&(N._owner&&$&&N._owner!==$&&(N=N.clone()),!N._owner^!$&&(N._owner=$||null,N._setter=F||null)),N}}})},new function(){var l={add:function(f,b){return f+b},subtract:function(f,b){return f-b},multiply:function(f,b){return f*b},divide:function(f,b){return f/b}};return s.each(l,function(f,b){this[b]=function(_){_=Ue.read(arguments);for(var S=this._type,P=this._components,T=_._convert(S),N=0,$=P.length;N<$;N++)T[N]=f(P[N],T[N]);return new Ue(S,T,this._alpha!=null?f(this._alpha,_.getAlpha()):null)}},{})}),ct=s.extend({_class:"Gradient",initialize:function(f,b){this._id=m.get(),f&&s.isPlainObject(f)&&(this.set(f),f=b=null),this._stops==null&&this.setStops(f||["white","black"]),this._radial==null&&this.setRadial(typeof b=="string"&&b==="radial"||b||!1)},_serialize:function(l,f){return f.add(this,function(){return s.serialize([this._stops,this._radial],l,!0,f)})},_changed:function(){for(var l=0,f=this._owners&&this._owners.length;l<f;l++)this._owners[l]._changed()},_addOwner:function(l){this._owners||(this._owners=[]),this._owners.push(l)},_removeOwner:function(l){var f=this._owners?this._owners.indexOf(l):-1;f!=-1&&(this._owners.splice(f,1),this._owners.length||(this._owners=n))},clone:function(){for(var l=[],f=0,b=this._stops.length;f<b;f++)l[f]=this._stops[f].clone();return new ct(l,this._radial)},getStops:function(){return this._stops},setStops:function(l){if(l.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var f=this._stops;if(f)for(var b=0,_=f.length;b<_;b++)f[b]._owner=n;f=this._stops=he.readList(l,0,{clone:!0});for(var b=0,_=f.length;b<_;b++)f[b]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(l){this._radial=l,this._changed()},equals:function(l){if(l===this)return!0;if(l&&this._class===l._class){var f=this._stops,b=l._stops,_=f.length;if(_===b.length){for(var S=0;S<_;S++)if(!f[S].equals(b[S]))return!1;return!0}}return!1}}),he=s.extend({_class:"GradientStop",initialize:function(f,b){var _=f,S=b;typeof f=="object"&&b===n&&(Array.isArray(f)&&typeof f[0]!="number"?(_=f[0],S=f[1]):("color"in f||"offset"in f||"rampPoint"in f)&&(_=f.color,S=f.offset||f.rampPoint||0)),this.setColor(_),this.setOffset(S)},clone:function(){return new he(this._color.clone(),this._offset)},_serialize:function(l,f){var b=this._color,_=this._offset;return s.serialize(_==null?[b]:[b,_],l,!0,f)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(l){this._offset=l,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ue._setOwner(this._color,null),this._color=Ue._setOwner(Ue.read(arguments,0),this,"setColor"),this._changed()},equals:function(l){return l===this||l&&this._class===l._class&&this._color.equals(l._color)&&this._offset==l._offset||!1}}),oe=s.extend(new function(){var l={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},f=s.set({},l,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),b=s.set({},f,{fillColor:new Ue}),_={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},S={beans:!0},P={_class:"Style",beans:!0,initialize:function(N,$,F){this._values={},this._owner=$,this._project=$&&$._project||F||De.project,this._defaults=!$||$ instanceof U?f:$ instanceof st?b:l,N&&this.set(N)}};return s.each(f,function(T,N){var $=/Color$/.test(N),F=N==="shadowOffset",q=s.capitalize(N),Q=_[N],K="set"+q,W="get"+q;P[K]=function(Y){var B=this._owner,Z=B&&B._children,V=Z&&Z.length>0&&!(B instanceof Me);if(V)for(var ne=0,z=Z.length;ne<z;ne++)Z[ne]._style[K](Y);if((N==="selectedColor"||!V)&&N in this._defaults){var te=this._values[N];te!==Y&&($&&(te&&(Ue._setOwner(te,null),te._canvasStyle=null),Y&&Y.constructor===Ue&&(Y=Ue._setOwner(Y,B,V&&K))),this._values[N]=Y,B&&B._changed(Q||129))}},P[W]=function(Y){var B=this._owner,Z=B&&B._children,V=Z&&Z.length>0&&!(B instanceof Me),ne;if(V&&!Y)for(var z=0,te=Z.length;z<te;z++){var se=Z[z]._style[W]();if(!z)ne=se;else if(!s.equals(ne,se))return n}else if(N in this._defaults){var ne=this._values[N];if(ne===n)ne=this._defaults[N],ne&&ne.clone&&(ne=ne.clone());else{var ue=$?Ue:F?g:null;ue&&!(ne&&ne.constructor===ue)&&(this._values[N]=ne=ue.read([ne],0,{readNull:!0,clone:!0}))}}return ne&&$&&(ne=Ue._setOwner(ne,B,V&&K)),ne},S[W]=function(Y){return this._style[W](Y)},S[K]=function(Y){this._style[K](Y)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(T,N){var $="get"+N,F="set"+N;P[$]=S[$]="#get"+T,P[F]=S[F]="#set"+T}),E.inject(S),P},{set:function(l){var f=l instanceof oe,b=f?l._values:l;if(b){for(var _ in b)if(_ in this._defaults){var S=b[_];this[_]=S&&f&&S.clone?S.clone():S}}},equals:function(l){function f(b,_,S){var P=b._values,T=_._values,N=_._defaults;for(var $ in P){var F=P[$],q=T[$];if(!(S&&$ in T)&&!s.equals(F,q===n?N[$]:q))return!1}return!0}return l===this||l&&this._class===l._class&&f(this,l)&&f(l,this,!0)||!1},_dispose:function(){var l;l=this.getFillColor(),l&&(l._canvasStyle=null),l=this.getStrokeColor(),l&&(l._canvasStyle=null),l=this.getShadowColor(),l&&(l._canvasStyle=null)},hasFill:function(){var l=this.getFillColor();return!!l&&l.alpha>0},hasStroke:function(){var l=this.getStrokeColor();return!!l&&l.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var l=this.getShadowColor();return!!l&&l.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var l=this.getFontSize();return this.getFontWeight()+" "+l+(/[a-z]/i.test(l+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function l(){var f=l.base.call(this),b=this.getFontSize();return/pt|em|%|px/.test(b)&&(b=this.getView().getPixelSize(b)),f??b*1.2}}),We=new function(){function l(f,b,_,S){for(var P=["","webkit","moz","Moz","ms","o"],T=b[0].toUpperCase()+b.substring(1),N=0;N<6;N++){var $=P[N],F=$?$+T:b;if(F in f){if(_)f[F]=S;else return f[F];break}}}return{getStyles:function(f){var b=f&&f.nodeType!==9?f.ownerDocument:f,_=b&&b.defaultView;return _&&_.getComputedStyle(f,"")},getBounds:function(f,b){var _=f.ownerDocument,S=_.body,P=_.documentElement,T;try{T=f.getBoundingClientRect()}catch{T={left:0,top:0,width:0,height:0}}var N=T.left-(P.clientLeft||S.clientLeft||0),$=T.top-(P.clientTop||S.clientTop||0);if(!b){var F=_.defaultView;N+=F.pageXOffset||P.scrollLeft||S.scrollLeft,$+=F.pageYOffset||P.scrollTop||S.scrollTop}return new x(N,$,T.width,T.height)},getViewportBounds:function(f){var b=f.ownerDocument,_=b.defaultView,S=b.documentElement;return new x(0,0,_.innerWidth||S.clientWidth,_.innerHeight||S.clientHeight)},getOffset:function(f,b){return We.getBounds(f,b).getPoint()},getSize:function(f){return We.getBounds(f,!0).getSize()},isInvisible:function(f){return We.getSize(f).equals(new w(0,0))},isInView:function(f){return!We.isInvisible(f)&&We.getViewportBounds(f).intersects(We.getBounds(f,!0))},isInserted:function(f){return i.body.contains(f)},getPrefixed:function(f,b){return f&&l(f,b)},setPrefixed:function(f,b,_){if(typeof b=="object")for(var S in b)l(f,S,!0,b[S]);else l(f,b,!0,_)}}},Oe={add:function(l,f){if(l)for(var b in f)for(var _=f[b],S=b.split(/[\s,]+/g),P=0,T=S.length;P<T;P++){var N=S[P],$=l===i&&(N==="touchstart"||N==="touchmove")?{passive:!1}:!1;l.addEventListener(N,_,$)}},remove:function(l,f){if(l)for(var b in f)for(var _=f[b],S=b.split(/[\s,]+/g),P=0,T=S.length;P<T;P++)l.removeEventListener(S[P],_,!1)},getPoint:function(l){var f=l.targetTouches?l.targetTouches.length?l.targetTouches[0]:l.changedTouches[0]:l;return new g(f.pageX||f.clientX+i.documentElement.scrollLeft,f.pageY||f.clientY+i.documentElement.scrollTop)},getTarget:function(l){return l.target||l.srcElement},getRelatedTarget:function(l){return l.relatedTarget||l.toElement},getOffset:function(l,f){return Oe.getPoint(l).subtract(We.getOffset(f||Oe.getTarget(l)))}};Oe.requestAnimationFrame=new function(){var l=We.getPrefixed(r,"requestAnimationFrame"),f=!1,b=[],_;function S(){var P=b;b=[];for(var T=0,N=P.length;T<N;T++)P[T]();f=l&&b.length,f&&l(S)}return function(P){b.push(P),l?f||(l(S),f=!0):_||(_=setInterval(S,1e3/60))}};var ht=s.extend(a,{_class:"View",initialize:function l(f,b){function _(Q){return b[Q]||parseInt(b.getAttribute(Q),10)}function S(){var Q=We.getSize(b);return Q.isNaN()||Q.isZero()?new w(_("width"),_("height")):Q}var P;if(r&&b){this._id=b.getAttribute("id"),this._id==null&&b.setAttribute("id",this._id="paper-view-"+l._id++),Oe.add(b,this._viewEvents);var T="none";if(We.setPrefixed(b.style,{userDrag:T,userSelect:T,touchCallout:T,contentZooming:T,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(b,"resize")){var N=this;Oe.add(r,this._windowEvents={resize:function(){N.setViewSize(S())}})}if(P=S(),o.hasAttribute(b,"stats")&&typeof Stats<"u"){this._stats=new Stats;var $=this._stats.domElement,F=$.style,q=We.getOffset(b);F.position="absolute",F.left=q.x+"px",F.top=q.y+"px",i.body.appendChild($)}}else P=new w(b),b=null;this._project=f,this._scope=f._scope,this._element=b,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(P.width,P.height),this._viewSize=P,l._views.push(this),l._viewsById[this._id]=this,(this._matrix=new A)._owner=this,l._focused||(l._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!De.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;ht._focused===this&&(ht._focused=null),ht._views.splice(ht._views.indexOf(this),1),delete ht._viewsById[this._id];var l=this._project;return l._view===this&&(l._view=null),Oe.remove(this._element,this._viewEvents),Oe.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(E._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(l){this[l]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(l){this._autoUpdate=l,l&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var l=this;Oe.requestAnimationFrame(function(){if(l._requested=!1,l._animate){l.requestUpdate();var f=l._element;(!We.getPrefixed(i,"hidden")||o.getAttribute(f,"keepalive")==="true")&&We.isInView(f)&&l._handleFrame()}l._autoUpdate&&l.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){De=this._scope;var l=Date.now()/1e3,f=this._last?l-this._last:0;this._last=l,this.emit("frame",new s({delta:f,time:this._time+=f,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(l,f){var b=this._frameItems;f?(b[l._id]={item:l,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete b[l._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(l){for(var f in this._frameItems){var b=this._frameItems[f];b.item.emit("frame",new s(l,{time:b.time+=l.delta,count:b.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var l=this._viewSize;return new C(l.width,l.height,this,"setViewSize")},setViewSize:function(){var l=w.read(arguments),f=l.subtract(this._viewSize);f.isZero()||(this._setElementSize(l.width,l.height),this._viewSize.set(l),this._changed(),this.emit("resize",{size:l,delta:f}),this._autoUpdate&&this.update())},_setElementSize:function(l,f){var b=this._element;b&&(b.width!==l&&(b.width=l),b.height!==f&&(b.height=f))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return We.isInView(this._element)},isInserted:function(){return We.isInserted(this._element)},getPixelSize:function(l){var f=this._element,b;if(f){var _=f.parentNode,S=i.createElement("div");S.style.fontSize=l,_.appendChild(S),b=parseFloat(We.getStyles(S).fontSize),_.removeChild(S)}else b=parseFloat(b);return b},getTextWidth:function(l,f){return 0}},s.each(["rotate","scale","shear","skew"],function(l){var f=l==="rotate";this[l]=function(){var b=arguments,_=(f?s:g).read(b),S=g.read(b,0,{readNull:!0});return this.transform(new A()[l](_,S||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var l=new A;return this.transform(l.translate.apply(l,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var l=g.read(arguments);this.translate(this.getCenter().subtract(l))},getZoom:function(){var l=this._decompose().scaling;return(l.x+l.y)/2},setZoom:function(l){this.transform(new A().scale(l/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(l){var f=this.getRotation();f!=null&&l!=null&&this.rotate(l-f)},getScaling:function(){var l=this._decompose().scaling;return new v(l.x,l.y,this,"setScaling")},setScaling:function(){var l=this.getScaling(),f=g.read(arguments,0,{clone:!0,readNull:!0});l&&f&&this.scale(f.x/l.x,f.y/l.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},transform:function(l){this._matrix.append(l)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(l){return this.viewToProject(Oe.getOffset(l,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(l,f){i&&typeof f=="string"&&(f=i.getElementById(f));var b=r?Pt:ht;return new b(l,f)}}},new function(){if(!r)return;var l,f,b=!1,_=!1;function S(we){var $e=Oe.getTarget(we);return $e.getAttribute&&ht._viewsById[$e.getAttribute("id")]}function P(){var we=ht._focused;if(!we||!we.isVisible()){for(var $e=0,Be=ht._views.length;$e<Be;$e++)if((we=ht._views[$e]).isVisible()){ht._focused=f=we;break}}}function T(we,$e,Be){we._handleMouseEvent("mousemove",$e,Be)}var N=r.navigator,$,F,q;N.pointerEnabled||N.msPointerEnabled?($="pointerdown MSPointerDown",F="pointermove MSPointerMove",q="pointerup pointercancel MSPointerUp MSPointerCancel"):($="touchstart",F="touchmove",q="touchend touchcancel","ontouchstart"in r&&N.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||($+=" mousedown",F+=" mousemove",q+=" mouseup"));var Q={},K={mouseout:function(we){var $e=ht._focused,Be=Oe.getRelatedTarget(we);if($e&&(!Be||Be.nodeName==="HTML")){var Ye=Oe.getOffset(we,$e._element),Qe=Ye.x,Je=Math.abs,dt=Je(Qe),pt=1<<25,Tt=dt-pt;Ye.x=Je(Tt)<dt?Tt*(Qe<0?-1:1):Qe,T($e,we,$e.viewToProject(Ye))}},scroll:P};Q[$]=function(we){var $e=ht._focused=S(we);b||(b=!0,$e._handleMouseEvent("mousedown",we))},K[F]=function(we){var $e=ht._focused;if(!_){var Be=S(we);Be?$e!==Be&&($e&&T($e,we),l||(l=$e),$e=ht._focused=f=Be):f&&f===$e&&(l&&!l.isInserted()&&(l=null),$e=ht._focused=l,l=null,P())}$e&&T($e,we)},K[$]=function(){_=!0},K[q]=function(we){var $e=ht._focused;$e&&b&&$e._handleMouseEvent("mouseup",we),_=b=!1},Oe.add(i,K),Oe.add(r,{load:P});var W=!1,Y=!1,B={doubleclick:"click",mousedrag:"mousemove"},Z=!1,V,ne,z,te,se,ue,re,be;function Se(we,$e,Be,Ye,Qe,Je,dt){var pt=!1,Tt;function wt(Ae,Ke){if(Ae.responds(Ke)){if(Tt||(Tt=new ae(Ke,Ye,Qe,$e||Ae,Je?Qe.subtract(Je):null)),Ae.emit(Ke,Tt)&&(W=!0,Tt.prevented&&(Y=!0),Tt.stopped))return pt=!0}else{var yt=B[Ke];if(yt)return wt(Ae,yt)}}for(;we&&we!==dt&&!wt(we,Be);)we=we._parent;return pt}function Pe(we,$e,Be,Ye,Qe,Je){return we._project.removeOn(Be),Y=W=!1,se&&Se(se,null,Be,Ye,Qe,Je)||$e&&$e!==se&&!$e.isDescendant(se)&&Se($e,null,Be==="mousedrag"?"mousemove":Be,Ye,Qe,Je,se)||Se(we,se||$e||we,Be,Ye,Qe,Je)}var ze={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Q,_handleMouseEvent:function(we,$e,Be){var Ye=this._itemEvents,Qe=Ye.native[we],Je=we==="mousemove",dt=this._scope.tool,pt=this;function Tt(It){return Ye.virtual[It]||pt.responds(It)||dt&&dt.responds(It)}Je&&b&&Tt("mousedrag")&&(we="mousedrag"),Be||(Be=this.getEventPoint($e));var wt=this.getBounds().contains(Be),Ae=Qe&&wt&&pt._project.hitTest(Be,{tolerance:0,fill:!0,stroke:!0}),Ke=Ae&&Ae.item||null,yt=!1,At={};if(At[we.substr(5)]=!0,Qe&&Ke!==te&&(te&&Se(te,null,"mouseleave",$e,Be),Ke&&Se(Ke,null,"mouseenter",$e,Be),te=Ke),Z^wt&&(Se(this,null,wt?"mouseenter":"mouseleave",$e,Be),yt=!0),(wt||At.drag)&&!Be.equals(ne)&&(Pe(this,Ke,Je?we:"mousemove",$e,Be,ne),yt=!0),Z=wt,At.down&&wt||At.up&&V){if(Pe(this,Ke,we,$e,Be,V),At.down){if(be=Ke===ue&&Date.now()-re<300,z=ue=Ke,!Y&&Ke){for(var _t=Ke;_t&&!_t.responds("mousedrag");)_t=_t._parent;_t&&(se=Ke)}V=Be}else At.up&&(!Y&&Ke===z&&(re=Date.now(),Pe(this,Ke,be?"doubleclick":"click",$e,Be,V),be=!1),z=se=null);Z=!1,yt=!0}ne=Be,yt&&dt&&(W=dt._handleMouseEvent(we,$e,Be,At)||W),$e.cancelable!==!1&&(W&&!At.move||At.down&&Tt("mouseup"))&&$e.preventDefault()},_handleKeyEvent:function(we,$e,Be,Ye){var Qe=this._scope,Je=Qe.tool,dt;function pt(Tt){Tt.responds(we)&&(De=Qe,Tt.emit(we,dt=dt||new G(we,$e,Be,Ye)))}this.isVisible()&&(pt(this),Je&&Je.responds(we)&&pt(Je))},_countItemEvent:function(we,$e){var Be=this._itemEvents,Ye=Be.native,Qe=Be.virtual;for(var Je in ze)Ye[Je]=(Ye[Je]||0)+(ze[Je][we]||0)*$e;Qe[we]=(Qe[we]||0)+$e},statics:{updateFocus:P,_resetState:function(){b=_=W=Z=!1,l=f=V=ne=z=te=se=ue=re=be=null}}}}),Pt=ht.extend({_class:"CanvasView",initialize:function(f,b){if(!(b instanceof r.HTMLCanvasElement)){var _=w.read(arguments,1);if(_.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));b=ve.getCanvas(_)}var S=this._context=b.getContext("2d");if(S.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(b,"hidpi"))){var P=r.devicePixelRatio||1,T=We.getPrefixed(S,"backingStorePixelRatio")||1;this._pixelRatio=P/T}ht.call(this,f,b),this._needsUpdate=!0},remove:function l(){return this._context.restore(),l.base.call(this)},_setElementSize:function l(f,b){var _=this._pixelRatio;if(l.base.call(this,f*_,b*_),_!==1){var S=this._element,P=this._context;if(!o.hasAttribute(S,"resize")){var T=S.style;T.width=f+"px",T.height=b+"px"}P.restore(),P.save(),P.scale(_,_)}},getContext:function(){return this._context},getPixelSize:function l(f){var b=De.agent,_;if(b&&b.firefox)_=l.base.call(this,f);else{var S=this._context,P=S.font;S.font=f+" serif",_=parseFloat(S.font),S.font=P}return _},getTextWidth:function(l,f){var b=this._context,_=b.font,S=0;b.font=l;for(var P=0,T=f.length;P<T;P++)S=Math.max(S,b.measureText(f[P]).width);return b.font=_,S},update:function(){if(!this._needsUpdate)return!1;var l=this._project,f=this._context,b=this._viewSize;return f.clearRect(0,0,b.width+1,b.height+1),l&&l.draw(f,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),St=s.extend({_class:"Event",initialize:function(f){this.event=f,this.type=f&&f.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return qe.modifiers}}),G=St.extend({_class:"KeyEvent",initialize:function(f,b,_,S){this.type=f,this.event=b,this.key=_,this.character=S},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),qe=new function(){var l={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},f={tab:"	",space:" ",enter:"\r"},b={},_={},S,P,T=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var F=De&&De.agent;return F&&F.mac?this.meta:this.control}}});function N(F){var q=F.key||F.keyIdentifier;return q=/^U\+/.test(q)?String.fromCharCode(parseInt(q.substr(2),16)):/^Arrow[A-Z]/.test(q)?q.substr(5):q==="Unidentified"||q===n?String.fromCharCode(F.keyCode):q,l[q]||(q.length>1?s.hyphenate(q):q.toLowerCase())}function $(F,q,Q,K){var W=ht._focused,Y;if(b[q]=F,F?_[q]=Q:delete _[q],q.length>1&&(Y=s.camelize(q))in T){T[Y]=F;var B=De&&De.agent;if(Y==="meta"&&B&&B.mac)if(F)S={};else{for(var Z in S)Z in _&&$(!1,Z,S[Z],K);S=null}}else F&&S&&(S[q]=Q);W&&W._handleKeyEvent(F?"keydown":"keyup",K,q,Q)}return Oe.add(i,{keydown:function(F){var q=N(F),Q=De&&De.agent;q.length>1||Q&&Q.chrome&&(F.altKey||Q.mac&&F.metaKey||!Q.mac&&F.ctrlKey)?$(!0,q,f[q]||(q.length>1?"":q),F):P=q},keypress:function(F){if(P){var q=N(F),Q=F.charCode,K=Q>=32?String.fromCharCode(Q):q.length>1?"":q;q!==P&&(q=K.toLowerCase()),$(!0,q,K,F),P=null}},keyup:function(F){var q=N(F);q in _&&$(!1,q,_[q],F)}}),Oe.add(r,{blur:function(F){for(var q in _)$(!1,q,_[q],F)}}),{modifiers:T,isDown:function(F){return!!b[F]}}},ae=St.extend({_class:"MouseEvent",initialize:function(f,b,_,S,P){this.type=f,this.event=b,this.point=_,this.target=S,this.delta=P},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),M=St.extend({_class:"ToolEvent",_item:null,initialize:function(f,b,_){this.tool=f,this.type=b,this.event=_},_choosePoint:function(l,f){return l||(f?f.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(l){this._point=l},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(l){this._lastPoint=l},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(l){this._downPoint=l},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(l){this._middlePoint=l},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(l){this._delta=l},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(l){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=l},getItem:function(){if(!this._item){var l=this.tool._scope.project.hitTest(this.getPoint());if(l){for(var f=l.item,b=f._parent;/^(Group|CompoundPath)$/.test(b._class);)f=b,b=b._parent;this._item=f}}return this._item},setItem:function(l){this._item=l},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),L=u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(f){u.call(this),this._moveCount=-1,this._downCount=-1,this.set(f)},getMinDistance:function(){return this._minDistance},setMinDistance:function(l){this._minDistance=l,l!=null&&this._maxDistance!=null&&l>this._maxDistance&&(this._maxDistance=l)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(l){this._maxDistance=l,this._minDistance!=null&&l!=null&&l<this._minDistance&&(this._minDistance=l)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(l){this._minDistance=this._maxDistance=l},_handleMouseEvent:function(l,f,b,_){De=this._scope,_.drag&&!this.responds(l)&&(l="mousemove");var S=_.move||_.drag,P=this.responds(l),T=!1,N=this;function $(q,Q){var K=b,W=S?N._point:N._downPoint||K;if(S){if(N._moveCount>=0&&K.equals(W))return!1;if(W&&(q!=null||Q!=null)){var Y=K.subtract(W),B=Y.getLength();if(B<(q||0))return!1;Q&&(K=W.add(Y.normalize(Math.min(B,Q))))}N._moveCount++}return N._point=K,N._lastPoint=W||K,_.down&&(N._moveCount=-1,N._downPoint=K,N._downCount++),!0}function F(){P&&(T=N.emit(l,new M(N,l,f))||T)}if(_.down)$(),F();else if(_.up)$(null,this._maxDistance),F();else if(P)for(;$(this._minDistance,this._maxDistance);)F();return T}}),J=s.extend(a,{_class:"Tween",statics:{easings:new s({linear:function(l){return l},easeInQuad:function(l){return l*l},easeOutQuad:function(l){return l*(2-l)},easeInOutQuad:function(l){return l<.5?2*l*l:-1+2*(2-l)*l},easeInCubic:function(l){return l*l*l},easeOutCubic:function(l){return--l*l*l+1},easeInOutCubic:function(l){return l<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1},easeInQuart:function(l){return l*l*l*l},easeOutQuart:function(l){return 1- --l*l*l*l},easeInOutQuart:function(l){return l<.5?8*l*l*l*l:1-8*--l*l*l*l},easeInQuint:function(l){return l*l*l*l*l},easeOutQuint:function(l){return 1+--l*l*l*l*l},easeInOutQuint:function(l){return l<.5?16*l*l*l*l*l:1+16*--l*l*l*l*l}})},initialize:function l(f,b,_,S,P,T){this.object=f;var N=typeof P,$=N==="function";this.type=$?N:N==="string"?P:"linear",this.easing=$?P:l.easings[this.type],this.duration=S,this.running=!1,this._then=null,this._startTime=null;var F=b||_;this._keys=F?Object.keys(F):[],this._parsedKeys=this._parseKeys(this._keys),this._from=F&&this._getState(b),this._to=F&&this._getState(_),T!==!1&&this.start()},then:function(l){return this._then=l,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(l){if(this.running){l>=1&&(l=1,this.running=!1);for(var f=this.easing(l),b=this._keys,_=function(q){return typeof q=="function"?q(f,l):q},S=0,P=b&&b.length;S<P;S++){var T=b[S],N=_(this._from[T]),$=_(this._to[T]),F=N&&$&&N.__add&&$.__add?$.__subtract(N).__multiply(f).__add(N):($-N)*f+N;this._setProperty(this._parsedKeys[T],F)}this.responds("update")&&this.emit("update",new s({progress:l,factor:f})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(l){var f=this._startTime,b=f?(l-f)/this.duration:0;f||(this._startTime=l),this.update(b)},_getState:function(l){for(var f=this._keys,b={},_=0,S=f.length;_<S;_++){var P=f[_],T=this._parsedKeys[P],N=this._getProperty(T),$;if(l){var F=this._resolveValue(N,l[P]);this._setProperty(T,F),$=this._getProperty(T),$=$&&$.clone?$.clone():$,this._setProperty(T,N)}else $=N&&N.clone?N.clone():N;b[P]=$}return b},_resolveValue:function(l,f){if(f){if(Array.isArray(f)&&f.length===2){var b=f[0];return b&&b.match&&b.match(/^[+\-\*\/]=/)?this._calculate(l,b[0],f[1]):f}else if(typeof f=="string"){var _=f.match(/^[+\-*/]=(.*)/);if(_){var S=JSON.parse(_[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(l,f[0],S)}}}return f},_calculate:function(l,f,b){return De.PaperScript.calculateBinary(l,f,b)},_parseKeys:function(l){for(var f={},b=0,_=l.length;b<_;b++){var S=l[b],P=S.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");f[S]=P.split("/")}return f},_getProperty:function(l,f){for(var b=this.object,_=0,S=l.length-(f||0);_<S&&b;_++)b=b[l[_]];return b},_setProperty:function(l,f){var b=this._getProperty(l,1);b&&(b[l[l.length-1]]=f)}}),pe={request:function(l){var f=new t.XMLHttpRequest;return f.open((l.method||"get").toUpperCase(),l.url,s.pick(l.async,!0)),l.mimeType&&f.overrideMimeType(l.mimeType),f.onload=function(){var b=f.status;b===0||b===200?l.onLoad&&l.onLoad.call(f,f.responseText):f.onerror()},f.onerror=function(){var b=f.status,_='Could not load "'+l.url+'" (Status: '+b+")";if(l.onError)l.onError(_,b);else throw new Error(_)},f.send(null)}},ve=s.exports.CanvasProvider={canvases:[],getCanvas:function(l,f,b){if(!r)return null;var _,S=!0;typeof l=="object"&&(f=l.height,l=l.width),this.canvases.length?_=this.canvases.pop():(_=i.createElement("canvas"),S=!1);var P=_.getContext("2d",b||{});if(!P)throw new Error("Canvas "+_+" is unable to provide a 2D context.");return _.width===l&&_.height===f?S&&P.clearRect(0,0,l+1,f+1):(_.width=l,_.height=f),P.save(),_},getContext:function(l,f,b){var _=this.getCanvas(l,f,b);return _?_.getContext("2d",b||{}):null},release:function(l){var f=l&&l.canvas?l.canvas:l;f&&f.getContext&&(f.getContext("2d").restore(),this.canvases.push(f))}},me=new function(){var l=Math.min,f=Math.max,b=Math.abs,_,S,P,T,N,$,F,q,Q,K,W;function Y(se,ue,re){return .2989*se+.587*ue+.114*re}function B(se,ue,re,Pe){var Se=Pe-Y(se,ue,re);Q=se+Se,K=ue+Se,W=re+Se;var Pe=Y(Q,K,W),ze=l(Q,K,W),we=f(Q,K,W);if(ze<0){var $e=Pe-ze;Q=Pe+(Q-Pe)*Pe/$e,K=Pe+(K-Pe)*Pe/$e,W=Pe+(W-Pe)*Pe/$e}if(we>255){var Be=255-Pe,Ye=we-Pe;Q=Pe+(Q-Pe)*Be/Ye,K=Pe+(K-Pe)*Be/Ye,W=Pe+(W-Pe)*Be/Ye}}function Z(se,ue,re){return f(se,ue,re)-l(se,ue,re)}function V(se,ue,re,be){var Se=[se,ue,re],Pe=f(se,ue,re),ze=l(se,ue,re),we;ze=ze===se?0:ze===ue?1:2,Pe=Pe===se?0:Pe===ue?1:2,we=l(ze,Pe)===0?f(ze,Pe)===1?2:1:0,Se[Pe]>Se[ze]?(Se[we]=(Se[we]-Se[ze])*be/(Se[Pe]-Se[ze]),Se[Pe]=be):Se[we]=Se[Pe]=0,Se[ze]=0,Q=Se[0],K=Se[1],W=Se[2]}var ne={multiply:function(){Q=N*_/255,K=$*S/255,W=F*P/255},screen:function(){Q=N+_-N*_/255,K=$+S-$*S/255,W=F+P-F*P/255},overlay:function(){Q=N<128?2*N*_/255:255-2*(255-N)*(255-_)/255,K=$<128?2*$*S/255:255-2*(255-$)*(255-S)/255,W=F<128?2*F*P/255:255-2*(255-F)*(255-P)/255},"soft-light":function(){var se=_*N/255;Q=se+N*(255-(255-N)*(255-_)/255-se)/255,se=S*$/255,K=se+$*(255-(255-$)*(255-S)/255-se)/255,se=P*F/255,W=se+F*(255-(255-F)*(255-P)/255-se)/255},"hard-light":function(){Q=_<128?2*_*N/255:255-2*(255-_)*(255-N)/255,K=S<128?2*S*$/255:255-2*(255-S)*(255-$)/255,W=P<128?2*P*F/255:255-2*(255-P)*(255-F)/255},"color-dodge":function(){Q=N===0?0:_===255?255:l(255,255*N/(255-_)),K=$===0?0:S===255?255:l(255,255*$/(255-S)),W=F===0?0:P===255?255:l(255,255*F/(255-P))},"color-burn":function(){Q=N===255?255:_===0?0:f(0,255-(255-N)*255/_),K=$===255?255:S===0?0:f(0,255-(255-$)*255/S),W=F===255?255:P===0?0:f(0,255-(255-F)*255/P)},darken:function(){Q=N<_?N:_,K=$<S?$:S,W=F<P?F:P},lighten:function(){Q=N>_?N:_,K=$>S?$:S,W=F>P?F:P},difference:function(){Q=N-_,Q<0&&(Q=-Q),K=$-S,K<0&&(K=-K),W=F-P,W<0&&(W=-W)},exclusion:function(){Q=N+_*(255-N-N)/255,K=$+S*(255-$-$)/255,W=F+P*(255-F-F)/255},hue:function(){V(_,S,P,Z(N,$,F)),B(Q,K,W,Y(N,$,F))},saturation:function(){V(N,$,F,Z(_,S,P)),B(Q,K,W,Y(N,$,F))},luminosity:function(){B(N,$,F,Y(_,S,P))},color:function(){B(_,S,P,Y(N,$,F))},add:function(){Q=l(N+_,255),K=l($+S,255),W=l(F+P,255)},subtract:function(){Q=f(N-_,0),K=f($-S,0),W=f(F-P,0)},average:function(){Q=(N+_)/2,K=($+S)/2,W=(F+P)/2},negation:function(){Q=255-b(255-_-N),K=255-b(255-S-$),W=255-b(255-P-F)}},z=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(se){this[se]=!0},{}),te=ve.getContext(1,1,{willReadFrequently:!0});te&&(s.each(ne,function(se,ue){var re=ue==="darken",be=!1;te.save();try{te.fillStyle=re?"#300":"#a00",te.fillRect(0,0,1,1),te.globalCompositeOperation=ue,te.globalCompositeOperation===ue&&(te.fillStyle=re?"#a00":"#300",te.fillRect(0,0,1,1),be=te.getImageData(0,0,1,1).data[0]!==re?170:51)}catch{}te.restore(),z[ue]=be}),ve.release(te)),this.process=function(se,ue,re,be,Se){var Pe=ue.canvas,ze=se==="normal";if(ze||z[se])re.save(),re.setTransform(1,0,0,1,0,0),re.globalAlpha=be,ze||(re.globalCompositeOperation=se),re.drawImage(Pe,Se.x,Se.y),re.restore();else{var we=ne[se];if(!we)return;for(var $e=re.getImageData(Se.x,Se.y,Pe.width,Pe.height),Be=$e.data,Ye=ue.getImageData(0,0,Pe.width,Pe.height).data,Qe=0,Je=Be.length;Qe<Je;Qe+=4){_=Ye[Qe],N=Be[Qe],S=Ye[Qe+1],$=Be[Qe+1],P=Ye[Qe+2],F=Be[Qe+2],T=Ye[Qe+3],q=Be[Qe+3],we();var dt=T*be/255,pt=1-dt;Be[Qe]=dt*Q+pt*N,Be[Qe+1]=dt*K+pt*$,Be[Qe+2]=dt*W+pt*F,Be[Qe+3]=T*be+pt*q}re.putImageData($e,Se.x,Se.y)}}},Le=new function(){var l="http://www.w3.org/2000/svg",f="http://www.w3.org/2000/xmlns",b="http://www.w3.org/1999/xlink",_={href:b,xlink:f,xmlns:f+"/","xmlns:xlink":f+"/"};function S(N,$,F){return T(i.createElementNS(l,N),$,F)}function P(N,$){var F=_[$],q=F?N.getAttributeNS(F,$):N.getAttribute($);return q==="null"?null:q}function T(N,$,F){for(var q in $){var Q=$[q],K=_[q];typeof Q=="number"&&F&&(Q=F.number(Q)),K?N.setAttributeNS(K,q,Q):N.setAttribute(q,Q)}return N}return{svg:l,xmlns:f,xlink:b,create:S,get:P,set:T}},Xe=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(l,f){return!f&&(l instanceof Fe||l instanceof R||l instanceof st)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(l,f){var b=s.capitalize(f),_=l[2];this[f]={type:l[1],property:f,attribute:l[0],toSVG:_,fromSVG:_&&s.each(_,function(S,P){this[S]=P},{}),exportFilter:l[3],get:"get"+b,set:"set"+b}},{});new function(){var l;function f(ne,z,te){var se=new s,ue=ne.getTranslation();if(z){var re;ne.isInvertible()?(ne=ne._shiftless(),re=ne._inverseTransform(ue),ue=null):re=new g,se[te?"cx":"x"]=re.x,se[te?"cy":"y"]=re.y}if(!ne.isIdentity()){var be=ne.decompose();if(be){var Se=[],Pe=be.rotation,ze=be.scaling,we=be.skewing;ue&&!ue.isZero()&&Se.push("translate("+l.point(ue)+")"),Pe&&Se.push("rotate("+l.number(Pe)+")"),(!p.isZero(ze.x-1)||!p.isZero(ze.y-1))&&Se.push("scale("+l.point(ze)+")"),we.x&&Se.push("skewX("+l.number(we.x)+")"),we.y&&Se.push("skewY("+l.number(we.y)+")"),se.transform=Se.join(" ")}else se.transform="matrix("+ne.getValues().join(",")+")"}return se}function b(ne,z){for(var te=f(ne._matrix),se=ne._children,ue=Le.create("g",te,l),re=0,be=se.length;re<be;re++){var Se=se[re],Pe=Z(Se,z);if(Pe)if(Se.isClipMask()){var ze=Le.create("clipPath");ze.appendChild(Pe),Y(Se,ze,"clip"),Le.set(ue,{"clip-path":"url(#"+ze.id+")"})}else ue.appendChild(Pe)}return ue}function _(ne,z){var te=f(ne._matrix,!0),se=ne.getSize(),ue=ne.getImage();return te.x-=se.width/2,te.y-=se.height/2,te.width=se.width,te.height=se.height,te.href=z.embedImages==!1&&ue&&ue.src||ne.toDataURL(),Le.create("image",te,l)}function S(ne,z){var te=z.matchShapes;if(te){var se=ne.toShape(!1);if(se)return P(se)}var ue=ne._segments,re=ue.length,be,Se=f(ne._matrix);if(te&&re>=2&&!ne.hasHandles())if(re>2){be=ne._closed?"polygon":"polyline";for(var Pe=[],ze=0;ze<re;ze++)Pe.push(l.point(ue[ze]._point));Se.points=Pe.join(" ")}else{be="line";var we=ue[0]._point,$e=ue[1]._point;Se.set({x1:we.x,y1:we.y,x2:$e.x,y2:$e.y})}else be="path",Se.d=ne.getPathData(null,z.precision);return Le.create(be,Se,l)}function P(ne){var z=ne._type,te=ne._radius,se=f(ne._matrix,!0,z!=="rectangle");if(z==="rectangle"){z="rect";var ue=ne._size,re=ue.width,be=ue.height;se.x-=re/2,se.y-=be/2,se.width=re,se.height=be,te.isZero()&&(te=null)}return te&&(z==="circle"?se.r=te:(se.rx=te.width,se.ry=te.height)),Le.create(z,se,l)}function T(ne,z){var te=f(ne._matrix),se=ne.getPathData(null,z.precision);return se&&(te.d=se),Le.create("path",te,l)}function N(ne,z){var te=f(ne._matrix,!0),se=ne._definition,ue=W(se,"symbol"),re=se._item,be=re.getStrokeBounds();return ue||(ue=Le.create("symbol",{viewBox:l.rectangle(be)}),ue.appendChild(Z(re,z)),Y(se,ue,"symbol")),te.href="#"+ue.id,te.x+=be.x,te.y+=be.y,te.width=be.width,te.height=be.height,te.overflow="visible",Le.create("use",te,l)}function $(ne){var z=W(ne,"color");if(!z){var te=ne.getGradient(),se=te._radial,ue=ne.getOrigin(),re=ne.getDestination(),be;if(se){be={cx:ue.x,cy:ue.y,r:ue.getDistance(re)};var Se=ne.getHighlight();Se&&(be.fx=Se.x,be.fy=Se.y)}else be={x1:ue.x,y1:ue.y,x2:re.x,y2:re.y};be.gradientUnits="userSpaceOnUse",z=Le.create((se?"radial":"linear")+"Gradient",be,l);for(var Pe=te._stops,ze=0,we=Pe.length;ze<we;ze++){var $e=Pe[ze],Be=$e._color,Ye=Be.getAlpha(),Qe=$e._offset;be={offset:Qe??ze/(we-1)},Be&&(be["stop-color"]=Be.toCSS(!0)),Ye<1&&(be["stop-opacity"]=Ye),z.appendChild(Le.create("stop",be,l))}Y(ne,z,"color")}return"url(#"+z.id+")"}function F(ne){var z=Le.create("text",f(ne._matrix,!0),l);return z.textContent=ne._content,z}var q={Group:b,Layer:b,Raster:_,Path:S,Shape:P,CompoundPath:T,SymbolItem:N,PointText:F};function Q(ne,z,te,se){var ue={},re=!se&&ne.getParent(),be=[];return ne._name!=null&&(ue.id=ne._name),s.each(Xe,function(Se){var Pe=Se.get,ze=Se.type,we=ne[Pe]();if(Se.exportFilter?Se.exportFilter(ne,we):te.reduceAttributes==!1||!re||!s.equals(re[Pe](),we)){if(ze==="color"&&we!=null){var $e=we.getAlpha();$e<1&&(ue[Se.attribute+"-opacity"]=$e)}ze==="style"?be.push(Se.attribute+": "+we):ue[Se.attribute]=we==null?"none":ze==="color"?we.gradient?$(we):we.toCSS(!0):ze==="array"?we.join(","):ze==="lookup"?Se.toSVG[we]:we}}),be.length&&(ue.style=be.join(";")),ue.opacity===1&&delete ue.opacity,ne._visible||(ue.visibility="hidden"),Le.set(z,ue,l)}var K;function W(ne,z){return K||(K={ids:{},svgs:{}}),ne&&K.svgs[z+"-"+(ne._id||ne.__id||(ne.__id=m.get("svg")))]}function Y(ne,z,te){K||W();var se=K.ids[te]=(K.ids[te]||0)+1;z.id=te+"-"+se,K.svgs[te+"-"+(ne._id||ne.__id)]=z}function B(ne,z){var te=ne,se=null;if(K){te=ne.nodeName.toLowerCase()==="svg"&&ne;for(var ue in K.svgs)se||(te||(te=Le.create("svg"),te.appendChild(ne)),se=te.insertBefore(Le.create("defs"),te.firstChild)),se.appendChild(K.svgs[ue]);K=null}return z.asString?new t.XMLSerializer().serializeToString(te):te}function Z(ne,z,te){var se=q[ne._class],ue=se&&se(ne,z);if(ue){var re=z.onExport;re&&(ue=re(ne,ue,z)||ue);var be=JSON.stringify(ne._data);be&&be!=="{}"&&be!=="null"&&ue.setAttribute("data-paper-data",be)}return ue&&Q(ne,ue,z,te)}function V(ne){return ne||(ne={}),l=new d(ne.precision),ne}E.inject({exportSVG:function(ne){return ne=V(ne),B(Z(this,ne,!0),ne)}}),I.inject({exportSVG:function(ne){ne=V(ne);var z=this._children,te=this.getView(),se=s.pick(ne.bounds,"view"),ue=ne.matrix||se==="view"&&te._matrix,re=ue&&A.read([ue]),be=se==="view"?new x([0,0],te.getViewSize()):se==="content"?E._getBounds(z,re,{stroke:!0}).rect:x.read([se],0,{readNull:!0}),Se={version:"1.1",xmlns:Le.svg,"xmlns:xlink":Le.xlink};be&&(Se.width=be.width,Se.height=be.height,(be.x||be.x===0||be.y||be.y===0)&&(Se.viewBox=l.rectangle(be)));var Pe=Le.create("svg",Se,l),ze=Pe;re&&!re.isIdentity()&&(ze=Pe.appendChild(Le.create("g",f(re),l)));for(var we=0,$e=z.length;we<$e;we++)ze.appendChild(Z(z[we],ne,!0));return B(Pe,ne)}})},new function(){var l={},f;function b(z,te,se,ue,re,be){var Se=Le.get(z,te)||be,Pe=Se==null?ue?null:se?"":0:se?Se:parseFloat(Se);return/%\s*$/.test(Se)?Pe/100*(re?1:f[/x|^width/.test(te)?"width":"height"]):Pe}function _(z,te,se,ue,re,be,Se){return te=b(z,te||"x",!1,ue,re,be),se=b(z,se||"y",!1,ue,re,Se),ue&&(te==null||se==null)?null:new g(te,se)}function S(z,te,se,ue,re){return te=b(z,te||"width",!1,ue,re),se=b(z,se||"height",!1,ue,re),ue&&(te==null||se==null)?null:new w(te,se)}function P(z,te,se){return z==="none"?null:te==="number"?parseFloat(z):te==="array"?z?z.split(/[\s,]+/g).map(parseFloat):[]:te==="color"?Z(z)||z:te==="lookup"?se[z]:z}function T(z,te,se,ue){var re=z.childNodes,be=te==="clippath",Se=te==="defs",Pe=new U,ze=Pe._project,we=ze._currentStyle,$e=[];if(!be&&!Se&&(Pe=B(Pe,z,ue),ze._currentStyle=Pe._style.clone()),ue)for(var Be=z.querySelectorAll("defs"),Ye=0,Qe=Be.length;Ye<Qe;Ye++)V(Be[Ye],se,!1);for(var Ye=0,Qe=re.length;Ye<Qe;Ye++){var Je=re[Ye],dt;Je.nodeType===1&&!/^defs$/i.test(Je.nodeName)&&(dt=V(Je,se,!1))&&!(dt instanceof ie)&&$e.push(dt)}return Pe.addChildren($e),be&&(Pe=B(Pe.reduce(),z,ue)),ze._currentStyle=we,(be||Se)&&(Pe.remove(),Pe=null),Pe}function N(z,te){for(var se=z.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),ue=[],re=0,be=se.length;re<be;re+=2)ue.push(new g(parseFloat(se[re]),parseFloat(se[re+1])));var Se=new xe(ue);return te==="polygon"&&Se.closePath(),Se}function $(z){return Fe.create(z.getAttribute("d"))}function F(z,te){var se=(b(z,"href",!0)||"").substring(1),ue=te==="radialgradient",re;if(se)re=l[se].getGradient(),re._radial^ue&&(re=re.clone(),re._radial=ue);else{for(var be=z.childNodes,Se=[],Pe=0,ze=be.length;Pe<ze;Pe++){var we=be[Pe];we.nodeType===1&&Se.push(B(new he,we))}re=new ct(Se,ue)}var $e,Be,Ye,Qe=b(z,"gradientUnits",!0)!=="userSpaceOnUse";ue?($e=_(z,"cx","cy",!1,Qe,"50%","50%"),Be=$e.add(b(z,"r",!1,!1,Qe,"50%"),0),Ye=_(z,"fx","fy",!0,Qe)):($e=_(z,"x1","y1",!1,Qe,"0%","0%"),Be=_(z,"x2","y2",!1,Qe,"100%","0%"));var Je=B(new Ue(re,$e,Be,Ye),z);return Je._scaleToBounds=Qe,null}var q={"#document":function(z,te,se,ue){for(var re=z.childNodes,be=0,Se=re.length;be<Se;be++){var Pe=re[be];if(Pe.nodeType===1)return V(Pe,se,ue)}},g:T,svg:T,clippath:T,polygon:N,polyline:N,path:$,lineargradient:F,radialgradient:F,image:function(z){var te=new X(b(z,"href",!0));return te.on("load",function(){var se=S(z);this.setSize(se);var ue=_(z).add(se.divide(2));this._matrix.append(new A().translate(ue))}),te},symbol:function(z,te,se,ue){return new ie(T(z,te,se,ue),!0)},defs:T,use:function(z){var te=(b(z,"href",!0)||"").substring(1),se=l[te],ue=_(z);return se?se instanceof ie?se.place(ue):se.clone().translate(ue):null},circle:function(z){return new R.Circle(_(z,"cx","cy"),b(z,"r"))},ellipse:function(z){return new R.Ellipse({center:_(z,"cx","cy"),radius:S(z,"rx","ry")})},rect:function(z){return new R.Rectangle(new x(_(z),S(z)),S(z,"rx","ry"))},line:function(z){return new xe.Line(_(z,"x1","y1"),_(z,"x2","y2"))},text:function(z){var te=new nt(_(z).add(_(z,"dx","dy")));return te.setContent(z.textContent.trim()||""),te},switch:T};function Q(z,te,se,ue){if(z.transform){for(var re=(ue.getAttribute(se)||"").split(/\)\s*/g),be=new A,Se=0,Pe=re.length;Se<Pe;Se++){var ze=re[Se];if(!ze)break;for(var we=ze.split(/\(\s*/),$e=we[0].trim(),Be=we[1].split(/[\s,]+/g),Ye=0,Qe=Be.length;Ye<Qe;Ye++)Be[Ye]=parseFloat(Be[Ye]);switch($e){case"matrix":be.append(new A(Be[0],Be[1],Be[2],Be[3],Be[4],Be[5]));break;case"rotate":be.rotate(Be[0],Be[1]||0,Be[2]||0);break;case"translate":be.translate(Be[0],Be[1]||0);break;case"scale":be.scale(Be);break;case"skewX":be.skew(Be[0],0);break;case"skewY":be.skew(0,Be[0]);break}}z.transform(be)}}function K(z,te,se){var ue=se==="fill-opacity"?"getFillColor":"getStrokeColor",re=z[ue]&&z[ue]();re&&re.setAlpha(parseFloat(te))}var W=s.set(s.each(Xe,function(z){this[z.attribute]=function(te,se){if(te[z.set]&&(te[z.set](P(se,z.type,z.fromSVG)),z.type==="color")){var ue=te[z.get]();if(ue&&ue._scaleToBounds){var re=te.getBounds();ue.transform(new A().translate(re.getPoint()).scale(re.getSize()))}}}},{}),{id:function(z,te){l[te]=z,z.setName&&z.setName(te)},"clip-path":function(z,te){var se=Z(te);if(se)if(se=se.clone(),se.setClipMask(!0),z instanceof U)z.insertChild(0,se);else return new U(se,z)},gradientTransform:Q,transform:Q,"fill-opacity":K,"stroke-opacity":K,visibility:function(z,te){z.setVisible&&z.setVisible(te==="visible")},display:function(z,te){z.setVisible&&z.setVisible(te!==null)},"stop-color":function(z,te){z.setColor&&z.setColor(te)},"stop-opacity":function(z,te){z._color&&z._color.setAlpha(parseFloat(te))},offset:function(z,te){if(z.setOffset){var se=te.match(/(.*)%$/);z.setOffset(se?se[1]/100:parseFloat(te))}},viewBox:function(z,te,se,ue,re){var be=new x(P(te,"array")),Se=S(ue,null,null,!0),Pe,ze;if(z instanceof U){var we=Se?Se.divide(be.getSize()):1,ze=new A().scale(we).translate(be.getPoint().negate());Pe=z}else z instanceof ie&&(Se&&be.setSize(Se),Pe=z._item);if(Pe){if(Y(ue,"overflow",re)!=="visible"){var $e=new R.Rectangle(be);$e.setClipMask(!0),Pe.addChild($e)}ze&&Pe.transform(ze)}}});function Y(z,te,se){var ue=z.attributes[te],re=ue&&ue.value;if(!re&&z.style){var be=s.camelize(te);re=z.style[be],!re&&se.node[be]!==se.parent[be]&&(re=se.node[be])}return re?re==="none"?null:re:n}function B(z,te,se){var ue=te.parentNode,re={node:We.getStyles(te)||{},parent:!se&&!/^defs$/i.test(ue.tagName)&&We.getStyles(ue)||{}};return s.each(W,function(be,Se){var Pe=Y(te,Se,re);z=Pe!==n&&be(z,Pe,Se,te,re)||z}),z}function Z(z){var te=z&&z.match(/\((?:["'#]*)([^"')]+)/),se=te&&te[1],ue=se&&l[r?se.replace(r.location.href.split("#")[0]+"#",""):se];return ue&&ue._scaleToBounds&&(ue=ue.clone(),ue._scaleToBounds=!0),ue}function V(z,te,se){var ue=z.nodeName.toLowerCase(),re=ue!=="#document",be=i.body,Se,Pe,ze;se&&re&&(f=De.getView().getSize(),f=S(z,null,null,!0)||f,Se=Le.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Pe=z.parentNode,ze=z.nextSibling,Se.appendChild(z),be.appendChild(Se));var we=De.settings,$e=we.applyMatrix,Be=we.insertItems;we.applyMatrix=!1,we.insertItems=!1;var Ye=q[ue],Qe=Ye&&Ye(z,ue,te,se)||null;if(we.insertItems=Be,we.applyMatrix=$e,Qe){re&&!(Qe instanceof U)&&(Qe=B(Qe,z,se));var Je=te.onImport,dt=re&&z.getAttribute("data-paper-data");Je&&(Qe=Je(z,Qe,te)||Qe),te.expandShapes&&Qe instanceof R&&(Qe.remove(),Qe=Qe.toPath()),dt&&(Qe._data=JSON.parse(dt))}return Se&&(be.removeChild(Se),Pe&&(ze?Pe.insertBefore(z,ze):Pe.appendChild(z))),se&&(l={},Qe&&s.pick(te.applyMatrix,$e)&&Qe.matrix.apply(!0,!0)),Qe}function ne(z,te,se){if(!z)return null;te=typeof te=="function"?{onLoad:te}:te||{};var ue=De,re=null;function be(we){try{var $e=typeof we=="object"?we:new t.DOMParser().parseFromString(we.trim(),"image/svg+xml");if(!$e.nodeName)throw $e=null,new Error("Unsupported SVG source: "+z);De=ue,re=V($e,te,!0),(!te||te.insert!==!1)&&se._insertItem(n,re);var Be=te.onLoad;Be&&Be(re,we)}catch(Ye){Se(Ye)}}function Se(we,$e){var Be=te.onError;if(Be)Be(we,$e);else throw new Error(we)}if(typeof z=="string"&&!/^[\s\S]*</.test(z)){var Pe=i.getElementById(z);Pe?be(Pe):pe.request({url:z,async:!0,onLoad:be,onError:Se})}else if(typeof File<"u"&&z instanceof File){var ze=new FileReader;return ze.onload=function(){be(ze.result)},ze.onerror=function(){Se(ze.error)},ze.readAsText(z)}else be(z);return re}E.inject({importSVG:function(z,te){return ne(z,te,this)}}),I.inject({importSVG:function(z,te){return this.activate(),ne(z,te,this)}})},s.exports.PaperScript=(function(){var l=this,f=l.acorn;if(!f&&typeof ed<"u")try{f=KTe()}catch{}if(!f){var b,_;f=b=_={},function(B,Z){if(typeof b=="object"&&typeof _=="object")return Z(b);if(typeof n=="function"&&n.amd)return n(["exports"],Z);Z(B.acorn||(B.acorn={}))}(this,function(B){B.version="0.5.0";var Z,V,ne,z;B.parse=function(Ie,Ge){return V=String(Ie),ne=V.length,se(Ge),Mo(),I0(Z.program)};var te=B.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function se(Ie){Z=Ie||{};for(var Ge in te)Object.prototype.hasOwnProperty.call(Z,Ge)||(Z[Ge]=te[Ge]);z=Z.sourceFile||null}var ue=B.getLineInfo=function(Ie,Ge){for(var lt=1,gt=0;;){ai.lastIndex=gt;var an=ai.exec(Ie);if(an&&an.index<Ge)++lt,gt=an.index+an[0].length;else break}return{line:lt,column:Ge-gt}};B.tokenize=function(Ie,Ge){V=String(Ie),ne=V.length,se(Ge),Mo();var lt={};function gt(an){return dt=Se,on(an),lt.start=be,lt.end=Se,lt.startLoc=Pe,lt.endLoc=ze,lt.type=we,lt.value=$e,lt}return gt.jumpTo=function(an,ln){if(re=an,Z.locations){Ye=1,Qe=ai.lastIndex=0;for(var gn;(gn=ai.exec(V))&&gn.index<an;)++Ye,Qe=gn.index+gn[0].length}Be=ln,Et()},gt};var re,be,Se,Pe,ze,we,$e,Be,Ye,Qe,Je,dt,pt,Tt,wt,Ae;function Ke(Ie,Ge){var lt=ue(V,Ie);Ge+=" ("+lt.line+":"+lt.column+")";var gt=new SyntaxError(Ge);throw gt.pos=Ie,gt.loc=lt,gt.raisedAt=re,gt}var yt=[],At={type:"num"},_t={type:"regexp"},It={type:"string"},jt={type:"name"},Dt={type:"eof"},Bt={keyword:"break"},Mt={keyword:"case",beforeExpr:!0},tn={keyword:"catch"},nn={keyword:"continue"},xn={keyword:"debugger"},Cn={keyword:"default"},vt={keyword:"do",isLoop:!0},En={keyword:"else",beforeExpr:!0},On={keyword:"finally"},wn={keyword:"for",isLoop:!0},Sr={keyword:"function"},Nr={keyword:"if"},cr={keyword:"return",beforeExpr:!0},ur={keyword:"switch"},pr={keyword:"throw",beforeExpr:!0},Lr={keyword:"try"},Kr={keyword:"var"},$n={keyword:"while",isLoop:!0},Jn={keyword:"with"},yi={keyword:"new",beforeExpr:!0},_i={keyword:"this"},Zr={keyword:"null",atomValue:null},bi={keyword:"true",atomValue:!0},Ni={keyword:"false",atomValue:!1},hr={keyword:"in",binop:7,beforeExpr:!0},dr={break:Bt,case:Mt,catch:tn,continue:nn,debugger:xn,default:Cn,do:vt,else:En,finally:On,for:wn,function:Sr,if:Nr,return:cr,switch:ur,throw:pr,try:Lr,var:Kr,while:$n,with:Jn,null:Zr,true:bi,false:Ni,new:yi,in:hr,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:_i,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},tr={type:"[",beforeExpr:!0},Qr={type:"]"},Vr={type:"{",beforeExpr:!0},mr={type:"}"},Qt={type:"(",beforeExpr:!0},Ir={type:")"},bn={type:",",beforeExpr:!0},Vn={type:";",beforeExpr:!0},Tn={type:":",beforeExpr:!0},Gn={type:"."},Gr={type:"?",beforeExpr:!0},Yn={binop:10,beforeExpr:!0},y={isAssign:!0,beforeExpr:!0},O={isAssign:!0,beforeExpr:!0},ee={postfix:!0,prefix:!0,isUpdate:!0},le={prefix:!0,beforeExpr:!0},Ce={binop:1,beforeExpr:!0},et={binop:2,beforeExpr:!0},it={binop:3,beforeExpr:!0},bt={binop:4,beforeExpr:!0},xt={binop:5,beforeExpr:!0},Zt={binop:6,beforeExpr:!0},sn={binop:7,beforeExpr:!0},Pn={binop:8,beforeExpr:!0},sr={binop:9,prefix:!0,beforeExpr:!0},ts={binop:10,beforeExpr:!0};B.tokTypes={bracketL:tr,bracketR:Qr,braceL:Vr,braceR:mr,parenL:Qt,parenR:Ir,comma:bn,semi:Vn,colon:Tn,dot:Gn,question:Gr,slash:Yn,eq:y,name:jt,eof:Dt,num:At,regexp:_t,string:It};for(var Ut in dr)B.tokTypes["_"+Ut]=dr[Ut];function He(Ie){Ie=Ie.split(" ");var Ge="",lt=[];e:for(var gt=0;gt<Ie.length;++gt){for(var an=0;an<lt.length;++an)if(lt[an][0].length==Ie[gt].length){lt[an].push(Ie[gt]);continue e}lt.push([Ie[gt]])}function ln(Xn){if(Xn.length==1)return Ge+="return str === "+JSON.stringify(Xn[0])+";";Ge+="switch(str){";for(var ia=0;ia<Xn.length;++ia)Ge+="case "+JSON.stringify(Xn[ia])+":";Ge+="return true}return false;"}if(lt.length>3){lt.sort(function(Xn,ia){return ia.length-Xn.length}),Ge+="switch(str.length){";for(var gt=0;gt<lt.length;++gt){var gn=lt[gt];Ge+="case "+gn[0].length+":",ln(gn)}Ge+="}"}else ln(Ie);return new Function("str",Ge)}var kt=He("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ot=He("class enum extends super const export import"),Fn=He("implements interface let package private protected public static yield"),vn=He("eval arguments"),nr=He("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Jr=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Oi="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ta="------------------------------------------------------------------------------------------------------------------------------------------",na=new RegExp("["+Oi+"]"),fr=new RegExp("["+Oi+ta+"]"),Ri=/[\n\r\u2028\u2029]/,ai=/\r\n|[\n\r\u2028\u2029]/g,vs=B.isIdentifierStart=function(Ie){return Ie<65?Ie===36:Ie<91?!0:Ie<97?Ie===95:Ie<123?!0:Ie>=170&&na.test(String.fromCharCode(Ie))},Sl=B.isIdentifierChar=function(Ie){return Ie<48?Ie===36:Ie<58?!0:Ie<65?!1:Ie<91?!0:Ie<97?Ie===95:Ie<123?!0:Ie>=170&&fr.test(String.fromCharCode(Ie))};function xs(){this.line=Ye,this.column=re-Qe}function Mo(){Ye=1,re=Qe=0,Be=!0,Et()}function Ze(Ie,Ge){Se=re,Z.locations&&(ze=new xs),we=Ie,Et(),$e=Ge,Be=Ie.beforeExpr}function ft(){var Ie=Z.onComment&&Z.locations&&new xs,Ge=re,lt=V.indexOf("*/",re+=2);if(lt===-1&&Ke(re-2,"Unterminated comment"),re=lt+2,Z.locations){ai.lastIndex=Ge;for(var gt;(gt=ai.exec(V))&&gt.index<re;)++Ye,Qe=gt.index+gt[0].length}Z.onComment&&Z.onComment(!0,V.slice(Ge+2,lt),Ge,re,Ie,Z.locations&&new xs)}function at(){for(var Ie=re,Ge=Z.onComment&&Z.locations&&new xs,lt=V.charCodeAt(re+=2);re<ne&&lt!==10&&lt!==13&&lt!==8232&&lt!==8233;)++re,lt=V.charCodeAt(re);Z.onComment&&Z.onComment(!1,V.slice(Ie+2,re),Ie,re,Ge,Z.locations&&new xs)}function Et(){for(;re<ne;){var Ie=V.charCodeAt(re);if(Ie===32)++re;else if(Ie===13){++re;var Ge=V.charCodeAt(re);Ge===10&&++re,Z.locations&&(++Ye,Qe=re)}else if(Ie===10||Ie===8232||Ie===8233)++re,Z.locations&&(++Ye,Qe=re);else if(Ie>8&&Ie<14)++re;else if(Ie===47){var Ge=V.charCodeAt(re+1);if(Ge===42)ft();else if(Ge===47)at();else break}else if(Ie===160)++re;else if(Ie>=5760&&Jr.test(String.fromCharCode(Ie)))++re;else break}}function pn(){var Ie=V.charCodeAt(re+1);return Ie>=48&&Ie<=57?kh(!0):(++re,Ze(Gn))}function zt(){var Ie=V.charCodeAt(re+1);return Be?(++re,ns()):Ie===61?Yt(O,2):Yt(Yn,1)}function Ft(){var Ie=V.charCodeAt(re+1);return Ie===61?Yt(O,2):Yt(ts,1)}function Vt(Ie){var Ge=V.charCodeAt(re+1);return Ge===Ie?Yt(Ie===124?Ce:et,2):Ge===61?Yt(O,2):Yt(Ie===124?it:xt,1)}function jn(){var Ie=V.charCodeAt(re+1);return Ie===61?Yt(O,2):Yt(bt,1)}function qn(Ie){var Ge=V.charCodeAt(re+1);return Ge===Ie?Ge==45&&V.charCodeAt(re+2)==62&&Ri.test(V.slice(dt,re))?(re+=3,at(),Et(),on()):Yt(ee,2):Ge===61?Yt(O,2):Yt(sr,1)}function Bn(Ie){var Ge=V.charCodeAt(re+1),lt=1;return Ge===Ie?(lt=Ie===62&&V.charCodeAt(re+2)===62?3:2,V.charCodeAt(re+lt)===61?Yt(O,lt+1):Yt(Pn,lt)):Ge==33&&Ie==60&&V.charCodeAt(re+2)==45&&V.charCodeAt(re+3)==45?(re+=4,at(),Et(),on()):(Ge===61&&(lt=V.charCodeAt(re+2)===61?3:2),Yt(sn,lt))}function Cr(Ie){var Ge=V.charCodeAt(re+1);return Ge===61?Yt(Zt,V.charCodeAt(re+2)===61?3:2):Yt(Ie===61?y:le,1)}function er(Ie){switch(Ie){case 46:return pn();case 40:return++re,Ze(Qt);case 41:return++re,Ze(Ir);case 59:return++re,Ze(Vn);case 44:return++re,Ze(bn);case 91:return++re,Ze(tr);case 93:return++re,Ze(Qr);case 123:return++re,Ze(Vr);case 125:return++re,Ze(mr);case 58:return++re,Ze(Tn);case 63:return++re,Ze(Gr);case 48:var Ge=V.charCodeAt(re+1);if(Ge===120||Ge===88)return wc();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return kh(!1);case 34:case 39:return If(Ie);case 47:return zt();case 37:case 42:return Ft();case 124:case 38:return Vt(Ie);case 94:return jn();case 43:case 45:return qn(Ie);case 60:case 62:return Bn(Ie);case 61:case 33:return Cr(Ie);case 126:return Yt(le,1)}return!1}function on(Ie){if(Ie?re=be+1:be=re,Z.locations&&(Pe=new xs),Ie)return ns();if(re>=ne)return Ze(Dt);var Ge=V.charCodeAt(re);if(vs(Ge)||Ge===92)return Df();var lt=er(Ge);if(lt===!1){var gt=String.fromCharCode(Ge);if(gt==="\\"||na.test(gt))return Df();Ke(re,"Unexpected character '"+gt+"'")}return lt}function Yt(Ie,Ge){var lt=V.slice(re,re+Ge);re+=Ge,Ze(Ie,lt)}function ns(){for(var an="",Ie,Ge,lt=re;;){re>=ne&&Ke(lt,"Unterminated regular expression");var gt=V.charAt(re);if(Ri.test(gt)&&Ke(lt,"Unterminated regular expression"),Ie)Ie=!1;else{if(gt==="[")Ge=!0;else if(gt==="]"&&Ge)Ge=!1;else if(gt==="/"&&!Ge)break;Ie=gt==="\\"}++re}var an=V.slice(lt,re);++re;var ln=$f();ln&&!/^[gmsiy]*$/.test(ln)&&Ke(lt,"Invalid regexp flag");try{var gn=new RegExp(an,ln)}catch(Xn){Xn instanceof SyntaxError&&Ke(lt,Xn.message),Ke(Xn)}return Ze(_t,gn)}function Mi(Ie,Ge){for(var lt=re,gt=0,an=0,ln=Ge??1/0;an<ln;++an){var gn=V.charCodeAt(re),Xn;if(gn>=97?Xn=gn-97+10:gn>=65?Xn=gn-65+10:gn>=48&&gn<=57?Xn=gn-48:Xn=1/0,Xn>=Ie)break;++re,gt=gt*Ie+Xn}return re===lt||Ge!=null&&re-lt!==Ge?null:gt}function wc(){re+=2;var Ie=Mi(16);return Ie==null&&Ke(be+2,"Expected hexadecimal number"),vs(V.charCodeAt(re))&&Ke(re,"Identifier directly after number"),Ze(At,Ie)}function kh(Ie){var Ge=re,lt=!1,gt=V.charCodeAt(re)===48;!Ie&&Mi(10)===null&&Ke(Ge,"Invalid number"),V.charCodeAt(re)===46&&(++re,Mi(10),lt=!0);var an=V.charCodeAt(re);(an===69||an===101)&&(an=V.charCodeAt(++re),(an===43||an===45)&&++re,Mi(10)===null&&Ke(Ge,"Invalid number"),lt=!0),vs(V.charCodeAt(re))&&Ke(re,"Identifier directly after number");var ln=V.slice(Ge,re),gn;return lt?gn=parseFloat(ln):!gt||ln.length===1?gn=parseInt(ln,10):/[89]/.test(ln)||Ae?Ke(Ge,"Invalid number"):gn=parseInt(ln,8),Ze(At,gn)}function If(Ie){re++;for(var Ge="";;){re>=ne&&Ke(be,"Unterminated string constant");var lt=V.charCodeAt(re);if(lt===Ie)return++re,Ze(It,Ge);if(lt===92){lt=V.charCodeAt(++re);var gt=/^[0-7]+/.exec(V.slice(re,re+3));for(gt&&(gt=gt[0]);gt&&parseInt(gt,8)>255;)gt=gt.slice(0,-1);if(gt==="0"&&(gt=null),++re,gt)Ae&&Ke(re-2,"Octal literal in strict mode"),Ge+=String.fromCharCode(parseInt(gt,8)),re+=gt.length-1;else switch(lt){case 110:Ge+=`
`;break;case 114:Ge+="\r";break;case 120:Ge+=String.fromCharCode(Cl(2));break;case 117:Ge+=String.fromCharCode(Cl(4));break;case 85:Ge+=String.fromCharCode(Cl(8));break;case 116:Ge+="	";break;case 98:Ge+="\b";break;case 118:Ge+="\v";break;case 102:Ge+="\f";break;case 48:Ge+="\0";break;case 13:V.charCodeAt(re)===10&&++re;case 10:Z.locations&&(Qe=re,++Ye);break;default:Ge+=String.fromCharCode(lt);break}}else(lt===13||lt===10||lt===8232||lt===8233)&&Ke(be,"Unterminated string constant"),Ge+=String.fromCharCode(lt),++re}}function Cl(Ie){var Ge=Mi(16,Ie);return Ge===null&&Ke(be,"Bad character escape sequence"),Ge}var lo;function $f(){lo=!1;for(var Ie,Ge=!0,lt=re;;){var gt=V.charCodeAt(re);if(Sl(gt))lo&&(Ie+=V.charAt(re)),++re;else if(gt===92){lo||(Ie=V.slice(lt,re)),lo=!0,V.charCodeAt(++re)!=117&&Ke(re,"Expecting Unicode escape sequence \\uXXXX"),++re;var an=Cl(4),ln=String.fromCharCode(an);ln||Ke(re-1,"Invalid Unicode escape"),(Ge?vs(an):Sl(an))||Ke(re-4,"Invalid Unicode escape"),Ie+=ln}else break;Ge=!1}return lo?Ie:V.slice(lt,re)}function Df(){var Ie=$f(),Ge=jt;return!lo&&nr(Ie)&&(Ge=dr[Ie]),Ze(Ge,Ie)}function Rn(){Je=be,dt=Se,pt=ze,on()}function Sh(Ie){if(Ae=Ie,re=be,Z.locations)for(;re<Qe;)Qe=V.lastIndexOf(`
`,Qe-2)+1,--Ye;Et(),on()}function zf(){this.type=null,this.start=be,this.end=null}function Ff(){this.start=Pe,this.end=null,z!==null&&(this.source=z)}function oi(){var Ie=new zf;return Z.locations&&(Ie.loc=new Ff),Z.directSourceFile&&(Ie.sourceFile=Z.directSourceFile),Z.ranges&&(Ie.range=[be,0]),Ie}function $a(Ie){var Ge=new zf;return Ge.start=Ie.start,Z.locations&&(Ge.loc=new Ff,Ge.loc.start=Ie.loc.start),Z.ranges&&(Ge.range=[Ie.range[0],0]),Ge}function _n(Ie,Ge){return Ie.type=Ge,Ie.end=dt,Z.locations&&(Ie.loc.end=pt),Z.ranges&&(Ie.range[1]=dt),Ie}function Ch(Ie){return Z.ecmaVersion>=5&&Ie.type==="ExpressionStatement"&&Ie.expression.type==="Literal"&&Ie.expression.value==="use strict"}function Er(Ie){if(we===Ie)return Rn(),!0}function El(){return!Z.strictSemicolons&&(we===Dt||we===mr||Ri.test(V.slice(dt,be)))}function Da(){!Er(Vn)&&!El()&&ra()}function qr(Ie){we===Ie?Rn():ra()}function ra(){Ke(be,"Unexpected token")}function _c(Ie){Ie.type!=="Identifier"&&Ie.type!=="MemberExpression"&&Ke(Ie.start,"Assigning to rvalue"),Ae&&Ie.type==="Identifier"&&vn(Ie.name)&&Ke(Ie.start,"Assigning to "+Ie.name+" in strict mode")}function I0(Ie){Je=dt=re,Z.locations&&(pt=new xs),Tt=Ae=null,wt=[],on();var Ge=Ie||oi(),lt=!0;for(Ie||(Ge.body=[]);we!==Dt;){var gt=rs();Ge.body.push(gt),lt&&Ch(gt)&&Sh(!0),lt=!1}return _n(Ge,"Program")}var ni={kind:"loop"},Eh={kind:"switch"};function rs(){(we===Yn||we===O&&$e=="/=")&&on(!0);var Ie=we,Ge=oi();switch(Ie){case Bt:case nn:Rn();var lt=Ie===Bt;Er(Vn)||El()?Ge.label=null:we!==jt?ra():(Ge.label=rr(),Da());for(var gt=0;gt<wt.length;++gt){var an=wt[gt];if((Ge.label==null||an.name===Ge.label.name)&&(an.kind!=null&&(lt||an.kind==="loop")||Ge.label&&lt))break}return gt===wt.length&&Ke(Ge.start,"Unsyntactic "+Ie.keyword),_n(Ge,lt?"BreakStatement":"ContinueStatement");case xn:return Rn(),Da(),_n(Ge,"DebuggerStatement");case vt:return Rn(),wt.push(ni),Ge.body=rs(),wt.pop(),qr($n),Ge.test=Lo(),Da(),_n(Ge,"DoWhileStatement");case wn:if(Rn(),wt.push(ni),qr(Qt),we===Vn)return Ve(Ge,null);if(we===Kr){var ln=oi();return Rn(),Re(ln,!0),_n(ln,"VariableDeclaration"),ln.declarations.length===1&&Er(hr)?Ee(Ge,ln):Ve(Ge,ln)}var ln=rt(!1,!0);return Er(hr)?(_c(ln),Ee(Ge,ln)):Ve(Ge,ln);case Sr:return Rn(),ki(Ge,!0);case Nr:return Rn(),Ge.test=Lo(),Ge.consequent=rs(),Ge.alternate=Er(En)?rs():null,_n(Ge,"IfStatement");case cr:return!Tt&&!Z.allowReturnOutsideFunction&&Ke(be,"'return' outside of function"),Rn(),Er(Vn)||El()?Ge.argument=null:(Ge.argument=rt(),Da()),_n(Ge,"ReturnStatement");case ur:Rn(),Ge.discriminant=Lo(),Ge.cases=[],qr(Vr),wt.push(Eh);for(var gn,Xn;we!=mr;)if(we===Mt||we===Cn){var ia=we===Mt;gn&&_n(gn,"SwitchCase"),Ge.cases.push(gn=oi()),gn.consequent=[],Rn(),ia?gn.test=rt():(Xn&&Ke(Je,"Multiple default clauses"),Xn=!0,gn.test=null),qr(Tn)}else gn||ra(),gn.consequent.push(rs());return gn&&_n(gn,"SwitchCase"),Rn(),wt.pop(),_n(Ge,"SwitchStatement");case pr:return Rn(),Ri.test(V.slice(dt,be))&&Ke(dt,"Illegal newline after throw"),Ge.argument=rt(),Da(),_n(Ge,"ThrowStatement");case Lr:if(Rn(),Ge.block=de(),Ge.handler=null,we===tn){var Tl=oi();Rn(),qr(Qt),Tl.param=rr(),Ae&&vn(Tl.param.name)&&Ke(Tl.param.start,"Binding "+Tl.param.name+" in strict mode"),qr(Ir),Tl.guard=null,Tl.body=de(),Ge.handler=_n(Tl,"CatchClause")}return Ge.guardedHandlers=yt,Ge.finalizer=Er(On)?de():null,!Ge.handler&&!Ge.finalizer&&Ke(Ge.start,"Missing catch or finally clause"),_n(Ge,"TryStatement");case Kr:return Rn(),Re(Ge),Da(),_n(Ge,"VariableDeclaration");case $n:return Rn(),Ge.test=Lo(),wt.push(ni),Ge.body=rs(),wt.pop(),_n(Ge,"WhileStatement");case Jn:return Ae&&Ke(be,"'with' in strict mode"),Rn(),Ge.object=Lo(),Ge.body=rs(),_n(Ge,"WithStatement");case Vr:return de();case Vn:return Rn(),_n(Ge,"EmptyStatement");default:var $0=$e,Bf=rt();if(Ie===jt&&Bf.type==="Identifier"&&Er(Tn)){for(var gt=0;gt<wt.length;++gt)wt[gt].name===$0&&Ke(Bf.start,"Label '"+$0+"' is already declared");var HL=we.isLoop?"loop":we===ur?"switch":null;return wt.push({name:$0,kind:HL}),Ge.body=rs(),wt.pop(),Ge.label=Bf,_n(Ge,"LabeledStatement")}else return Ge.expression=Bf,Da(),_n(Ge,"ExpressionStatement")}}function Lo(){qr(Qt);var Ie=rt();return qr(Ir),Ie}function de(Ie){var Ge=oi(),lt=!0,gt=!1,an;for(Ge.body=[],qr(Vr);!Er(mr);){var ln=rs();Ge.body.push(ln),lt&&Ie&&Ch(ln)&&(an=gt,Sh(gt=!0)),lt=!1}return gt&&!an&&Sh(!1),_n(Ge,"BlockStatement")}function Ve(Ie,Ge){return Ie.init=Ge,qr(Vn),Ie.test=we===Vn?null:rt(),qr(Vn),Ie.update=we===Ir?null:rt(),qr(Ir),Ie.body=rs(),wt.pop(),_n(Ie,"ForStatement")}function Ee(Ie,Ge){return Ie.left=Ge,Ie.right=rt(),qr(Ir),Ie.body=rs(),wt.pop(),_n(Ie,"ForInStatement")}function Re(Ie,Ge){for(Ie.declarations=[],Ie.kind="var";;){var lt=oi();if(lt.id=rr(),Ae&&vn(lt.id.name)&&Ke(lt.id.start,"Binding "+lt.id.name+" in strict mode"),lt.init=Er(y)?rt(!0,Ge):null,Ie.declarations.push(_n(lt,"VariableDeclarator")),!Er(bn))break}return Ie}function rt(Ie,Ge){var lt=ot(Ge);if(!Ie&&we===bn){var gt=$a(lt);for(gt.expressions=[lt];Er(bn);)gt.expressions.push(ot(Ge));return _n(gt,"SequenceExpression")}return lt}function ot(Ie){var Ge=tt(Ie);if(we.isAssign){var lt=$a(Ge);return lt.operator=$e,lt.left=Ge,Rn(),lt.right=ot(Ie),_c(Ge),_n(lt,"AssignmentExpression")}return Ge}function tt(Ie){var Ge=mt(Ie);if(Er(Gr)){var lt=$a(Ge);return lt.test=Ge,lt.consequent=rt(!0),qr(Tn),lt.alternate=rt(!0,Ie),_n(lt,"ConditionalExpression")}return Ge}function mt(Ie){return ut(Ct(),-1,Ie)}function ut(Ie,Ge,lt){var gt=we.binop;if(gt!=null&&(!lt||we!==hr)&&gt>Ge){var an=$a(Ie);an.left=Ie,an.operator=$e;var ln=we;Rn(),an.right=ut(Ct(),gt,lt);var gn=_n(an,ln===Ce||ln===et?"LogicalExpression":"BinaryExpression");return ut(gn,Ge,lt)}return Ie}function Ct(){if(we.prefix){var Ie=oi(),Ge=we.isUpdate;return Ie.operator=$e,Ie.prefix=!0,Be=!0,Rn(),Ie.argument=Ct(),Ge?_c(Ie.argument):Ae&&Ie.operator==="delete"&&Ie.argument.type==="Identifier"&&Ke(Ie.start,"Deleting local variable in strict mode"),_n(Ie,Ge?"UpdateExpression":"UnaryExpression")}for(var lt=$t();we.postfix&&!El();){var Ie=$a(lt);Ie.operator=$e,Ie.prefix=!1,Ie.argument=lt,_c(lt),Rn(),lt=_n(Ie,"UpdateExpression")}return lt}function $t(){return en(mn())}function en(Ie,Ge){if(Er(Gn)){var lt=$a(Ie);return lt.object=Ie,lt.property=rr(!0),lt.computed=!1,en(_n(lt,"MemberExpression"),Ge)}else if(Er(tr)){var lt=$a(Ie);return lt.object=Ie,lt.property=rt(),lt.computed=!0,qr(Qr),en(_n(lt,"MemberExpression"),Ge)}else if(!Ge&&Er(Qt)){var lt=$a(Ie);return lt.callee=Ie,lt.arguments=co(Ir,!1),en(_n(lt,"CallExpression"),Ge)}else return Ie}function mn(){switch(we){case _i:var gt=oi();return Rn(),_n(gt,"ThisExpression");case jt:return rr();case At:case It:case _t:var gt=oi();return gt.value=$e,gt.raw=V.slice(be,Se),Rn(),_n(gt,"Literal");case Zr:case bi:case Ni:var gt=oi();return gt.value=we.atomValue,gt.raw=we.keyword,Rn(),_n(gt,"Literal");case Qt:var Ie=Pe,Ge=be;Rn();var lt=rt();return lt.start=Ge,lt.end=Se,Z.locations&&(lt.loc.start=Ie,lt.loc.end=ze),Z.ranges&&(lt.range=[Ge,Se]),qr(Ir),lt;case tr:var gt=oi();return Rn(),gt.elements=co(Qr,!0,!0),_n(gt,"ArrayExpression");case Vr:return Gt();case Sr:var gt=oi();return Rn(),ki(gt,!1);case yi:return qt();default:ra()}}function qt(){var Ie=oi();return Rn(),Ie.callee=en(mn(),!0),Er(Qt)?Ie.arguments=co(Ir,!1):Ie.arguments=yt,_n(Ie,"NewExpression")}function Gt(){var Ie=oi(),Ge=!0,lt=!1;for(Ie.properties=[],Rn();!Er(mr);){if(Ge)Ge=!1;else if(qr(bn),Z.allowTrailingCommas&&Er(mr))break;var gt={key:gr()},an=!1,ln;if(Er(Tn)?(gt.value=rt(!0),ln=gt.kind="init"):Z.ecmaVersion>=5&&gt.key.type==="Identifier"&&(gt.key.name==="get"||gt.key.name==="set")?(an=lt=!0,ln=gt.kind=gt.key.name,gt.key=gr(),we!==Qt&&ra(),gt.value=ki(oi(),!1)):ra(),gt.key.type==="Identifier"&&(Ae||lt))for(var gn=0;gn<Ie.properties.length;++gn){var Xn=Ie.properties[gn];if(Xn.key.name===gt.key.name){var ia=ln==Xn.kind||an&&Xn.kind==="init"||ln==="init"&&(Xn.kind==="get"||Xn.kind==="set");ia&&!Ae&&ln==="init"&&Xn.kind==="init"&&(ia=!1),ia&&Ke(gt.key.start,"Redefinition of property")}}Ie.properties.push(gt)}return _n(Ie,"ObjectExpression")}function gr(){return we===At||we===It?mn():rr(!0)}function ki(Ie,Ge){we===jt?Ie.id=rr():Ge?ra():Ie.id=null,Ie.params=[];var lt=!0;for(qr(Qt);!Er(Ir);)lt?lt=!1:qr(bn),Ie.params.push(rr());var gt=Tt,an=wt;if(Tt=!0,wt=[],Ie.body=de(!0),Tt=gt,wt=an,Ae||Ie.body.body.length&&Ch(Ie.body.body[0]))for(var ln=Ie.id?-1:0;ln<Ie.params.length;++ln){var gn=ln<0?Ie.id:Ie.params[ln];if((Fn(gn.name)||vn(gn.name))&&Ke(gn.start,"Defining '"+gn.name+"' in strict mode"),ln>=0)for(var Xn=0;Xn<ln;++Xn)gn.name===Ie.params[Xn].name&&Ke(gn.start,"Argument name clash in strict mode")}return _n(Ie,Ge?"FunctionDeclaration":"FunctionExpression")}function co(Ie,Ge,lt){for(var gt=[],an=!0;!Er(Ie);){if(an)an=!1;else if(qr(bn),Ge&&Z.allowTrailingCommas&&Er(Ie))break;lt&&we===bn?gt.push(null):gt.push(rt(!0))}return gt}function rr(Ie){var Ge=oi();return Ie&&Z.forbidReserved=="everywhere"&&(Ie=!1),we===jt?(!Ie&&(Z.forbidReserved&&(Z.ecmaVersion===3?kt:Ot)($e)||Ae&&Fn($e))&&V.slice(be,Se).indexOf("\\")==-1&&Ke(be,"The keyword '"+$e+"' is reserved"),Ge.name=$e):Ie&&we.keyword?Ge.name=we.keyword:ra(),Be=!1,Rn(),_n(Ge,"Identifier")}}),f.version||(f=null)}function S(B,Z){return(l.acorn||f).parse(B,Z)}var P={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},T={"-":"__negate","+":"__self"},N=s.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(B){this["__"+B]="#"+B},{__self:function(){return this}});g.inject(N),w.inject(N),Ue.inject(N);function $(B,Z,V){var ne=P[Z];if(B&&B[ne]){var z=B[ne](V);return Z==="!="?!z:z}switch(Z){case"+":return B+V;case"-":return B-V;case"*":return B*V;case"/":return B/V;case"%":return B%V;case"==":return B==V;case"!=":return B!=V}}function F(B,Z){var V=T[B];if(Z&&Z[V])return Z[V]();switch(B){case"+":return+Z;case"-":return-Z}}function q(B,Z){if(!B)return"";Z=Z||{};var V=[];function ne(Ae){for(var Ke=0,yt=V.length;Ke<yt;Ke++){var At=V[Ke];if(At[0]>=Ae)break;Ae+=At[1]}return Ae}function z(Ae){return B.substring(ne(Ae.range[0]),ne(Ae.range[1]))}function te(Ae,Ke){return B.substring(ne(Ae.range[1]),ne(Ke.range[0]))}function se(Ae,Ke){for(var yt=ne(Ae.range[0]),At=ne(Ae.range[1]),_t=0,It=V.length-1;It>=0;It--)if(yt>V[It][0]){_t=It+1;break}V.splice(_t,0,[yt,Ke.length-At+yt]),B=B.substring(0,yt)+Ke+B.substring(At)}function ue(Ae,Ke){switch(Ae.type){case"UnaryExpression":if(Ae.operator in T&&Ae.argument.type!=="Literal"){var yt=z(Ae.argument);se(Ae,'$__("'+Ae.operator+'", '+yt+")")}break;case"BinaryExpression":if(Ae.operator in P&&Ae.left.type!=="Literal"){var At=z(Ae.left),_t=z(Ae.right),It=te(Ae.left,Ae.right),jt=Ae.operator;se(Ae,"__$__("+At+","+It.replace(new RegExp("\\"+jt),'"'+jt+'"')+", "+_t+")")}break;case"UpdateExpression":case"AssignmentExpression":var Dt=Ke&&Ke.type;if(!(Dt==="ForStatement"||Dt==="BinaryExpression"&&/^[=!<>]/.test(Ke.operator)||Dt==="MemberExpression"&&Ke.computed)){if(Ae.type==="UpdateExpression"){var yt=z(Ae.argument),Bt="__$__("+yt+', "'+Ae.operator[0]+'", 1)',Mt=yt+" = "+Bt;Ae.prefix?Mt="("+Mt+")":(Dt==="AssignmentExpression"||Dt==="VariableDeclarator"||Dt==="BinaryExpression")&&(z(Ke.left||Ke.id)===yt&&(Mt=Bt),Mt=yt+"; "+Mt),se(Ae,Mt)}else if(/^.=$/.test(Ae.operator)&&Ae.left.type!=="Literal"){var At=z(Ae.left),_t=z(Ae.right),Bt=At+" = __$__("+At+', "'+Ae.operator[0]+'", '+_t+")";se(Ae,/^\(.*\)$/.test(z(Ae))?"("+Bt+")":Bt)}}break}}function re(Ae){switch(Ae.type){case"ExportDefaultDeclaration":se({range:[Ae.start,Ae.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Ke=Ae.declaration,yt=Ae.specifiers;if(Ke){var At=Ke.declarations;At&&(At.forEach(function(It){se(It,"module.exports."+z(It))}),se({range:[Ae.start,Ke.start+Ke.kind.length]},""))}else if(yt){var _t=yt.map(function(It){var jt=z(It);return"module.exports."+jt+" = "+jt+"; "}).join("");_t&&se(Ae,_t)}break}}function be(Ae,Ke,yt){if(Ae){for(var At in Ae)if(At!=="range"&&At!=="loc"){var _t=Ae[At];if(Array.isArray(_t))for(var It=0,jt=_t.length;It<jt;It++)be(_t[It],Ae,yt);else _t&&typeof _t=="object"&&be(_t,Ae,yt)}yt.operatorOverloading!==!1&&ue(Ae,Ke),yt.moduleExports!==!1&&re(Ae)}}function Se(Ae){var Ke="",yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ae=(Math.abs(Ae)<<1)+(Ae<0?1:0);Ae||!Ke;){var At=Ae&31;Ae>>=5,Ae&&(At|=32),Ke+=yt[At]}return Ke}var Pe=Z.url||"",ze=Z.sourceMaps,we=Z.paperFeatures||{},$e=Z.source||B,Be=Z.offset||0,Ye=De.agent,Qe=Ye.versionNumber,Je=!1,dt=/\r\n|\n|\r/mg,pt;if(ze&&(Ye.chrome&&Qe>=30||Ye.webkit&&Qe>=537.76||Ye.firefox&&Qe>=23||Ye.node)){if(Ye.node)Be-=2;else if(r&&Pe&&!r.location.href.indexOf(Pe)){var Tt=i.getElementsByTagName("html")[0].innerHTML;Be=Tt.substr(0,Tt.indexOf(B)+1).match(dt).length+1}Je=Be>0&&!(Ye.chrome&&Qe>=36||Ye.safari&&Qe>=600||Ye.firefox&&Qe>=40||Ye.node);var wt=["AA"+Se(Je?0:Be)+"A"];wt.length=(B.match(dt)||[]).length+1+(Je?Be:0),pt={version:3,file:Pe,names:[],mappings:wt.join(";AACA"),sourceRoot:"",sources:[Pe],sourcesContent:[$e]}}return(we.operatorOverloading!==!1||we.moduleExports!==!1)&&be(S(B,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,we),pt&&(Je&&(B=new Array(Be+1).join(`
`)+B),/^(inline|both)$/.test(ze)&&(B+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(pt))))),B+=`
//# sourceURL=`+(Pe||"paperscript")),{url:Pe,source:$e,code:B,map:pt}}function Q(B,Z,V){De=Z;var ne=Z.getView(),z=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(B)&&!/\bnew\s+Tool\b/.test(B)?new L:null,te=z?z._events:[],se=["onFrame","onResize"].concat(te),ue=[],re=[],be,Se=typeof B=="object"?B:q(B,V);B=Se.code;function Pe(Qe,Je){for(var dt in Qe)(Je||!/^_/.test(dt))&&new RegExp("([\\b\\s\\W]|^)"+dt.replace(/\$/g,"\\$")+"\\b").test(B)&&(ue.push(dt),re.push(Qe[dt]))}Pe({__$__:$,$__:F,paper:Z,tool:z},!0),Pe(Z),B="var module = { exports: {} }; "+B;var Be=s.each(se,function(Qe){new RegExp("\\s+"+Qe+"\\b").test(B)&&(ue.push(Qe),this.push("module.exports."+Qe+" = "+Qe+";"))},[]).join(`
`);Be&&(B+=`
`+Be),B+=`
return module.exports;`;var ze=De.agent;if(i&&(ze.chrome||ze.firefox&&ze.versionNumber<40)){var we=i.createElement("script"),$e=i.head||i.getElementsByTagName("head")[0];ze.firefox&&(B=`
`+B),we.appendChild(i.createTextNode("document.__paperscript__ = function("+ue+") {"+B+`
}`)),$e.appendChild(we),be=i.__paperscript__,delete i.__paperscript__,$e.removeChild(we)}else be=Function(ue,B);var Be=be&&be.apply(Z,re),Ye=Be||{};return s.each(te,function(Qe){var Je=Ye[Qe];Je&&(z[Qe]=Je)}),ne&&(Ye.onResize&&ne.setOnResize(Ye.onResize),ne.emit("resize",{size:ne.size,delta:new g}),Ye.onFrame&&ne.setOnFrame(Ye.onFrame),ne.requestUpdate()),Be}function K(B){if(/^text\/(?:x-|)paperscript$/.test(B.type)&&o.getAttribute(B,"ignore")!=="true"){var Z=o.getAttribute(B,"canvas"),V=i.getElementById(Z),ne=B.src||B.getAttribute("data-src"),z=o.hasAttribute(B,"async"),te="data-paper-scope";if(!V)throw new Error('Unable to find canvas with id "'+Z+'"');var se=o.get(V.getAttribute(te))||new o().setup(V);return V.setAttribute(te,se._id),ne?pe.request({url:ne,async:z,mimeType:"text/plain",onLoad:function(ue){Q(ue,se,ne)}}):Q(B.innerHTML,se,B.baseURI),B.setAttribute("data-paper-ignore","true"),se}}function W(){s.each(i&&i.getElementsByTagName("script"),K)}function Y(B){return B?K(B):W()}return r&&(i.readyState==="complete"?setTimeout(W):Oe.add(r,{load:W})),{compile:q,execute:Q,load:Y,parse:S,calculateBinary:$,calculateUnary:F}}).call(this);var De=new(o.inject(s.exports,{Base:s,Numerical:p,Key:qe,DomEvent:Oe,DomElement:We,document:i,window:r,Symbol:ie,PlacedSymbol:ce}));return De.agent.node&&a1(De),typeof n=="function"&&n.amd?n("paper",De):e&&(e.exports=De),De}).call(Za,typeof self=="object"?self:null)})(XTe);function ZTe(e,t,n){return"#"+[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("").toUpperCase()}async function QTe(e,t={}){const{canvasSize:n=500,ignoreWhite:r=!0,ignoreTransparent:i=!0}=t;return new Promise((s,a)=>{const o=document.createElement("canvas");o.width=n,o.height=n;const u=o.getContext("2d",{willReadFrequently:!0}),h=new Image,d=new Blob([e],{type:"image/svg+xml"}),p=URL.createObjectURL(d);h.onload=()=>{try{u.clearRect(0,0,n,n);const m=Math.min(n/h.width,n/h.height),g=h.width*m,v=h.height*m,w=(n-g)/2,C=(n-v)/2;u.drawImage(h,w,C,g,v);const k=u.getImageData(0,0,n,n).data,A=new Map;let j=0;for(let E=0;E<k.length;E+=4){const U=k[E],D=k[E+1],R=k[E+2],X=k[E+3];if(i&&X<128||r&&U>250&&D>250&&R>250)continue;const ce=ZTe(U,D,R),ie=A.get(ce)||0;A.set(ce,ie+1),j++}const I=new Map;for(const[E,U]of A)I.set(E,{coverage:j>0?U/j*100:0,pixelCount:U});URL.revokeObjectURL(p),s(I)}catch(m){URL.revokeObjectURL(p),a(m)}},h.onerror=m=>{URL.revokeObjectURL(p),a(new Error("Failed to load SVG for coverage analysis"))},h.src=p})}function nc(e){if(!e)return null;let t=e.replace("#","").toUpperCase();return t.length===3&&(t=t.split("").map(n=>n+n).join("")),"#"+t}function JTe(e,t=10){const n=Array.from(e.entries()),r=new Map,i=new Set;for(const[s,a]of n){if(i.has(s))continue;let o=a.coverage,u=a.pixelCount;const h=xj(s);for(const[d,p]of n){if(s===d||i.has(d))continue;const m=xj(d);Math.max(Math.abs(h.r-m.r),Math.abs(h.g-m.g),Math.abs(h.b-m.b))<=t&&(o+=p.coverage,u+=p.pixelCount,i.add(d))}i.add(s),r.set(s,{coverage:o,pixelCount:u})}return r}function xj(e){const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}}async function e5e(e,t={}){try{const r=await(await fetch(e)).text();return QTe(r,t)}catch(n){throw console.error("[CoverageAnalyzer] Failed to fetch SVG from URL:",n),n}}const t5e=[{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH70",name:"Black",hex:"#231F20"}];function n5e(e){if(!e)return null;const t=nc(e);return t5e.find(n=>nc(n.hex)===t)||null}function wj(e){const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}}function _j(e,t,n=10){const r=nc(t);if(!r)return 0;for(const[o,u]of e)if(nc(o)===r)return u.coverage;const i=wj(r);let s=null,a=1/0;for(const[o,u]of e){const h=wj(nc(o)),d=Math.max(Math.abs(i.r-h.r),Math.abs(i.g-h.g),Math.abs(i.b-h.b));d<=n&&d<a&&(a=d,s=u)}return s?s.coverage:0}async function kj(e,t,n,r="solid"){var i,s;if(!e||!t)return t||[];try{const a=await e5e(e,{canvasSize:600,ignoreWhite:!0,ignoreTransparent:!0}),o=JTe(a,5);console.log("[deriveCurrentColors] Coverage analysis:",o);const u=new Map;n&&n.size>0&&n.forEach(p=>{const m=typeof p=="string"?p:p.hex,g=nc(m);g&&m!=="transparent"&&m!=="none"&&(!u.has(g)||p.tpvCode)&&u.set(g,{hex:g,tpvCode:p.tpvCode||null,tpvName:p.tpvName||null,editType:p.editType||"unknown",blendComponents:p.blendComponents||null})});const h=new Map;for(const p of t){const m=nc(((i=p.blendColor)==null?void 0:i.hex)||((s=p.targetColor)==null?void 0:s.hex));if(!m)continue;const g=_j(o,m,10);g>.1&&h.set(m,{...p,targetColor:{...p.targetColor,areaPct:g}})}for(const[p,m]of u)if(!h.has(p)){const g=_j(o,p,10);if(g>.1){const v=m.tpvCode?{code:m.tpvCode,name:m.tpvName}:n5e(p);h.set(p,{originalColor:{hex:p},targetColor:{hex:p,areaPct:g},blendColor:{hex:p},chosenRecipe:m.blendComponents?{components:m.blendComponents,deltaE:0,quality:"Custom Blend"}:{components:v?[{code:v.code,name:v.name,percentage:100,parts:10}]:[{code:"CUSTOM",name:"Custom Color",percentage:100,parts:10}],deltaE:0,quality:v?"Pure TPV Colour":"Custom"},tpvCode:m.tpvCode||(v==null?void 0:v.code)||null,tpvName:m.tpvName||(v==null?void 0:v.name)||null,isAddedFromEdit:!0})}}const d=Array.from(h.values()).sort((p,m)=>{var g,v;return(((g=m.targetColor)==null?void 0:g.areaPct)||0)-(((v=p.targetColor)==null?void 0:v.areaPct)||0)});return console.log("[deriveCurrentColors] Derived colors:",d.length,"colors"),d}catch(a){return console.error("[deriveCurrentColors] Failed to analyze coverage:",a),t}}function r5e(e){if(!e||e.size===0)return!1;for(const t of e.values()){const n=typeof t=="string"?t:t.hex;if(n&&n!=="transparent"&&n!=="none")return!0}return!1}const Sj={landscape:[{name:"1:1",ratio:1,width:1024,height:1024},{name:"4:3",ratio:4/3,width:1024,height:768},{name:"3:2",ratio:3/2,width:1024,height:683},{name:"16:9",ratio:16/9,width:1024,height:576},{name:"2:1",ratio:2,width:1024,height:512},{name:"3:1",ratio:3,width:1024,height:341}],portrait:[{name:"1:1",ratio:1,width:1024,height:1024},{name:"3:4",ratio:3/4,width:768,height:1024},{name:"2:3",ratio:2/3,width:683,height:1024},{name:"9:16",ratio:9/16,width:576,height:1024},{name:"1:2",ratio:1/2,width:512,height:1024},{name:"1:3",ratio:1/3,width:341,height:1024}]},qh={safeDifference:.3,tilingThreshold:3.5,framingThreshold:2.5};function i5e(e,t){return e/t}function s5e(e){return e>=.95&&e<=1.05?"square":e>1?"landscape":"portrait"}function a5e(e,t){const n=t==="portrait"?Sj.portrait:Sj.landscape;let r=n[0],i=Math.abs(e-r.ratio);for(const s of n){const a=Math.abs(e-s.ratio);a<i&&(i=a,r=s)}return{...r,difference:i}}function o5e(e,t,n){return e>=qh.tilingThreshold||e<=1/qh.tilingThreshold?{mode:"tiling",reason:"Extreme aspect ratio - design will repeat along length",warning:!0}:n>=qh.safeDifference||e>=qh.framingThreshold||e<=1/qh.framingThreshold?{mode:"framing",reason:"Design panel centered with base color surround",warning:!1}:{mode:"full",reason:"Design fills entire surface",warning:!1}}function l5e(e,t){const n=i5e(e,t),r=s5e(n),i=a5e(n,r),s=o5e(n,i.ratio,i.difference);return{user:{widthMM:e,heightMM:t,aspectRatio:n,orientation:r,formatted:`${(e/1e3).toFixed(1)}m  ${(t/1e3).toFixed(1)}m`},canonical:{name:i.name,ratio:i.ratio,width:i.width,height:i.height,difference:i.difference},layout:s,recraft:{width:i.width,height:i.height,metadata:{targetWidthMM:e,targetHeightMM:t,layoutMode:s.mode}}}}function c5e(e){return e.layout.warning||e.layout.mode!=="full"}async function u5e(e,t="tpv-studio-uploads"){try{const n=Date.now(),r=Math.random().toString(36).substring(7),i=e.name.split(".").pop(),a=`uploads/${`${n}-${r}.${i}`}`;console.log("[Upload] Uploading file:",e.name,"",a);const{data:o,error:u}=await hi.storage.from(t).upload(a,e,{cacheControl:"3600",upsert:!1});if(u)return console.error("[Upload] Error:",u),{success:!1,error:u.message||"Failed to upload file"};const{data:{publicUrl:h}}=hi.storage.from(t).getPublicUrl(a);return console.log("[Upload] Success:",h),{success:!0,url:h,path:a}}catch(n){return console.error("[Upload] Unexpected error:",n),{success:!1,error:n.message||"Unexpected error during upload"}}}function Cj(e,t={}){const{maxSizeMB:n=10,allowedTypes:r=["image/png","image/jpeg","image/svg+xml"]}=t;if(!e)return{valid:!1,error:"No file selected"};if(!r.includes(e.type))return{valid:!1,error:`Invalid file type. Allowed: ${r.map(a=>a.split("/")[1].toUpperCase()).join(", ")}`};const i=n*1024*1024;return e.size>i?{valid:!1,error:`File too large. Maximum size: ${n}MB`}:{valid:!0}}function h5e({onExportSVG:e,onExportPNG:t,onExportPDF:n,onExportTiles:r,onExportDXF:i,onExportCanvasPDF:s,viewMode:a,exporting:o,disabled:u}){const[h,d]=fe.useState(!1),p=fe.useRef(null);fe.useEffect(()=>{const v=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return h&&document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[h]);const m=a==="solid"?"Solid":"Blend",g=v=>{d(!1),v()};return c.jsxs("div",{className:"playground-export-menu",ref:p,children:[c.jsxs("button",{className:"action-bar__btn action-bar__btn--export",onClick:()=>d(!h),disabled:u||o,children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),c.jsx("polyline",{points:"7 10 12 15 17 10"}),c.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),o?"Exporting...":"Export",c.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginLeft:"0.25rem"},children:c.jsx("path",{d:h?"M18 15l-6-6-6 6":"M6 9l6 6 6-6"})})]}),h&&c.jsxs("div",{className:"playground-export-menu__dropdown",children:[c.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(e),children:[c.jsx("span",{className:"playground-export-menu__icon",children:""}),c.jsxs("div",{className:"playground-export-menu__content",children:[c.jsxs("span",{className:"playground-export-menu__title",children:["Download ",m," SVG"]}),c.jsx("span",{className:"playground-export-menu__desc",children:"Vector format for CAD/printing"})]})]}),c.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(t),children:[c.jsx("span",{className:"playground-export-menu__icon",children:""}),c.jsxs("div",{className:"playground-export-menu__content",children:[c.jsxs("span",{className:"playground-export-menu__title",children:["Download ",m," PNG"]}),c.jsx("span",{className:"playground-export-menu__desc",children:"High-res image for presentations"})]})]}),c.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(r),children:[c.jsx("span",{className:"playground-export-menu__icon",children:""}),c.jsxs("div",{className:"playground-export-menu__content",children:[c.jsx("span",{className:"playground-export-menu__title",children:"Download Tiles ZIP"}),c.jsx("span",{className:"playground-export-menu__desc",children:"1m1m SVG tiles for large printing"})]})]}),c.jsx("div",{className:"playground-export-menu__divider"}),c.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(n),children:[c.jsx("span",{className:"playground-export-menu__icon",children:""}),c.jsxs("div",{className:"playground-export-menu__content",children:[c.jsxs("span",{className:"playground-export-menu__title",children:[m," Recipe Report (PDF)"]}),c.jsx("span",{className:"playground-export-menu__desc",children:"TPV quantities & specifications"})]})]}),s&&c.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(s),children:[c.jsx("span",{className:"playground-export-menu__icon",children:""}),c.jsxs("div",{className:"playground-export-menu__content",children:[c.jsx("span",{className:"playground-export-menu__title",children:"Canvas PDF (1:100)"}),c.jsx("span",{className:"playground-export-menu__desc",children:"Scaled design with dimensions"})]})]}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"playground-export-menu__divider"}),c.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(i),children:[c.jsx("span",{className:"playground-export-menu__icon",children:""}),c.jsxs("div",{className:"playground-export-menu__content",children:[c.jsx("span",{className:"playground-export-menu__title",children:"Download DXF"}),c.jsx("span",{className:"playground-export-menu__desc",children:"CAD format for AutoCAD/Rhino"})]})]})]})]})]})}function Yh(e){var n;if(!e)return null;if(e.type==="image/svg+xml")return"svg";if(e.type==="image/png"||e.type==="image/jpeg")return"image";const t=(n=e.name.split(".").pop())==null?void 0:n.toLowerCase();return t==="svg"?"svg":["png","jpg","jpeg"].includes(t)?"image":null}function d5e({loadedDesign:e,onDesignSaved:t,isEmbedded:n=!1}){const r=Qm(),{inputMode:i,prompt:s,lengthMM:a,widthMM:o,arMapping:u,uploadedFileUrl:h,result:d,jobId:p,blendRecipes:m,colorMapping:g,blendSvgUrl:v,blendEditedColors:w,solidRecipes:C,solidColorMapping:x,solidSvgUrl:k,solidEditedColors:A,viewMode:j,showFinalRecipes:I,showSolidSummary:E,regionOverrides:U,originalTaggedSvg:D,regionOverridesHistory:R,historyIndex:X,designName:ce,currentDesignId:ie,hasUnsavedChanges:ge,resetDesign:H,originalUnflattenedSvg:ye,originalRecipesState:je}=r,ke=r.setInputMode,Fe=r.setPrompt,xe=r.setDimensions,Me=r.setArMapping;r.setGenerationResult;const _e=r.setResult,Ne=r.setJobId;r.setBlendState;const st=r.setBlendRecipes,nt=r.setColorMapping,Ue=r.setBlendSvgUrl;r.setSolidState;const ct=r.setSolidRecipes,he=r.setSolidColorMapping,oe=r.setSolidSvgUrl;r.updateBlendSvgUrl,r.updateSolidSvgUrl;const We=r.setBlendEditedColors,Oe=r.setSolidEditedColors;r.setViewMode;const ht=r.setShowFinalRecipes,Pt=r.setShowSolidSummary,St=r.setRegionOverrides;r.addRegionOverride;const G=r.setOriginalTaggedSvg,qe=r.setRegionOverridesHistory,ae=r.setHistoryIndex;r.canUndo,r.canRedo,r.undo,r.redo;const M=r.setDesignName,L=r.setCurrentDesignId,J=r.loadDesign,pe=r.setOriginalUnflattenedSvg,ve=r.setOriginalRecipesState,me=Ze=>xe(Ze,a),Le=Ze=>xe(o,Ze),[Xe,De]=fe.useState(null),[l,f]=fe.useState(null),[b,_]=fe.useState(!1),[S,P]=fe.useState(!1),[T,N]=fe.useState(null),[$,F]=fe.useState(null),[q,Q]=fe.useState(""),[K,W]=fe.useState(null),[Y,B]=fe.useState(!1),[Z,V]=fe.useState(null),[ne,z]=fe.useState(!1),[te,se]=fe.useState(null),[ue,re]=fe.useState([]),[be,Se]=fe.useState(!1),[Pe,ze]=fe.useState(!1),[we,$e]=fe.useState(null),[Be,Ye]=fe.useState(!1),[Qe,Je]=fe.useState(!1),[dt,pt]=fe.useState(!1),[Tt,wt]=fe.useState(null),[Ae,Ke]=fe.useState(!1),[yt,At]=fe.useState(null),[_t,It]=fe.useState(null),[jt,Dt]=fe.useState(null),[Bt,Mt]=fe.useState(!1),[tn,nn]=fe.useState(0),[xn,Cn]=fe.useState(null),[vt,En]=fe.useState(!1),[On,wn]=fe.useState(!1),[Sr,Nr]=fe.useState(null),[cr,ur]=fe.useState(!1),[pr,Lr]=fe.useState(null),[Kr,$n]=fe.useState(null),[Jn,yi]=fe.useState(null),[_i,Zr]=fe.useState(!1),[bi,Ni]=fe.useState(null),hr=fe.useRef(null),dr=fe.useRef(null);fe.useEffect(()=>{(k||v)&&hr.current&&!Pe&&!Y&&setTimeout(()=>{var Ze;(Ze=hr.current)==null||Ze.scrollIntoView({behavior:"smooth",block:"start"})},300)},[k,v,Pe,Y]),fe.useEffect(()=>{if(!Pe)return;const Ze=ft=>{ft.key==="Escape"&&(ft.stopImmediatePropagation(),ft.preventDefault(),ze(!1),$e(null))};return window.addEventListener("keydown",Ze,!0),()=>window.removeEventListener("keydown",Ze,!0)},[Pe]),fe.useEffect(()=>{(async()=>{try{const ft=await Km({limit:1,offset:0});Ni(ft.designs.length>0)}catch(ft){console.error("[INSPIRE] Failed to check for existing designs:",ft),Ni(!0)}})()},[]),fe.useEffect(()=>{i==="upload"?xe(null,null):i==="prompt"&&(o===null||a===null)&&xe(5e3,5e3)},[i,xe]),fe.useEffect(()=>()=>{dr.current&&dr.current.abort(),v&&v.startsWith("blob:")&&URL.revokeObjectURL(v),k&&k.startsWith("blob:")&&URL.revokeObjectURL(k)},[]),fe.useEffect(()=>{const Ze=ft=>{ft.key==="Escape"&&ne&&(z(!1),se(null))};return window.addEventListener("keydown",Ze),()=>window.removeEventListener("keydown",Ze)},[ne]),fe.useEffect(()=>{ue.length>0&&!be&&nr()},[ue,be]),fe.useEffect(()=>{(async()=>{if(!v&&!k){$n(null),yi(null);return}if(!r5e(U)){$n(m),yi(C);return}Zr(!0);try{if(v&&m){const ft=await kj(v,m,U,"blend");$n(ft)}if(k&&C){const ft=await kj(k,C,U,"solid");yi(ft)}}catch(ft){console.error("[INSPIRE] Failed to recalculate recipes:",ft),$n(m),yi(C)}finally{Zr(!1)}})()},[v,k,U,m,C]),fe.useEffect(()=>{if(e){const Ze=vx(e);J(Ze),e.name&&M(e.name),e.id&&L(e.id),setTimeout(async()=>{var ft;if((ft=Ze.result)!=null&&ft.svg_url){let at=Ze.originalTaggedSvg||null;if(at)G(at);else try{const pn=await(await fetch(Ze.result.svg_url)).text(),zt=Xb(pn);at=Kl(zt),G(at)}catch(Et){console.error("[INSPIRE] Failed to tag SVG regions:",Et)}try{Ze.blendRecipes&&Ze.colorMapping&&await xs(Ze.result.svg_url,Ze.colorMapping,Ze.blendRecipes,Ze.blendEditedColors,at,Ze.regionOverrides),Ze.solidRecipes&&Ze.solidColorMapping&&await Mo(Ze.result.svg_url,Ze.solidColorMapping,Ze.solidRecipes,Ze.solidEditedColors,at,Ze.regionOverrides)}catch(Et){console.error("[INSPIRE] Failed to regenerate SVGs:",Et),F("Failed to restore design preview. Please try reloading.")}}},100)}},[e,J,M,L,G]);const tr=fe.useRef(!1);fe.useEffect(()=>{if(e||tr.current||!((d==null?void 0:d.svg_url)&&!v&&!k&&(m||C)))return;tr.current=!0,(async()=>{let at=D||null;if(!at)try{const pn=await(await fetch(d.svg_url)).text(),zt=Xb(pn);at=Kl(zt),G(at)}catch(Et){console.error("[INSPIRE] Failed to tag SVG regions:",Et)}try{m&&g&&await xs(d.svg_url,g,m,w,at,U),C&&x&&await Mo(d.svg_url,x,C,A,at,U)}catch(Et){console.error("[INSPIRE] Failed to regenerate SVGs:",Et),F("Failed to restore design preview. Please try reloading.")}})()},[d,v,k,m,C,g,x,e,U,D]),fe.useEffect(()=>{d||(tr.current=!1)},[d]);const Qr=Ze=>{var Et;const ft=(Et=Ze.target.files)==null?void 0:Et[0];if(!ft){De(null);return}const at=Cj(ft,{maxSizeMB:10,allowedTypes:["image/png","image/jpeg","image/svg+xml"]});if(!at.valid){F(at.error),De(null);return}De(ft),F(null)},Vr=Ze=>{Ze.preventDefault(),Ze.stopPropagation(),_(!0)},mr=Ze=>{Ze.preventDefault(),Ze.stopPropagation(),Ze.currentTarget===Ze.target&&_(!1)},Qt=Ze=>{Ze.preventDefault(),Ze.stopPropagation()},Ir=Ze=>{Ze.preventDefault(),Ze.stopPropagation(),_(!1);const ft=Ze.dataTransfer.files;if(ft&&ft.length>0){const at=ft[0],Et=Cj(at,{maxSizeMB:10,allowedTypes:["image/png","image/jpeg","image/svg+xml"]});if(!Et.valid){F(Et.error),De(null);return}De(at),F(null)}},bn=async()=>{var Ze,ft;if(i==="prompt"&&!s.trim()){F("Please enter a design description");return}if(i==="upload"&&!Xe){F("Please select a file to upload");return}if(i==="upload"&&Xe&&!Yh(Xe)){F("Unsupported file type. Please upload PNG, JPG, or SVG.");return}F(null),P(!0),N(null),_e(null),Ne(null),Q("Initialising..."),W(null);try{let at;if(i==="upload"&&Xe){const Ft=Yh(Xe);Q(Ft==="svg"?"Uploading SVG file...":"Uploading image..."),f("Uploading...");const Vt=await u5e(Xe);if(!Vt.success)throw new Error(Vt.error||"Failed to upload file");if(f(null),Ft==="svg"){if(Q("Processing SVG..."),at=await Pl.processUploadedSVG({svg_url:Vt.url}),!at.success)throw new Error(at.error||"Failed to process SVG");Ne(at.jobId),Q(" SVG uploaded successfully!"),P(!1);const jn=await Pl.getRecraftStatus(at.jobId);N(jn),_e(jn.result),(Ze=jn.result)!=null&&Ze.svg_url&&await sr(jn.result.svg_url,at.jobId);return}else{if(Q("Starting vectorisation..."),at=await Pl.vectorizeImage({image_url:Vt.url}),!at.success)throw new Error(at.error||"Failed to start vectorisation");Q(" AI is vectorising your image...")}}else if(i==="prompt"){const Ft=l5e(a,o);if(Me(Ft),c5e(Ft)?Q(`Generating ${Ft.canonical.name} design panel...`):Q("Initialising..."),at=await Pl.generateRecraft({prompt:s.trim(),lengthMM:Ft.recraft.height,widthMM:Ft.recraft.width}),!at.success)throw new Error(at.error||"Failed to start generation");Q(" AI is creating your design...")}Ne(at.jobId),Q("Request submitted, waiting for processing...");let Et=null,pn=Date.now();dr.current=new AbortController,await Pl.waitForRecraftCompletion(at.jobId,Ft=>{var jn,qn;N(Ft);const Vt=Math.floor((Date.now()-pn)/1e3);if(Ft.status==="queued"){const Bn=[` Preparing your canvas... (${Vt}s)`,` Warming up the AI brushes... (${Vt}s)`,` Queueing your masterpiece... (${Vt}s)`,` Mixing digital paints... (${Vt}s)`,` AI is contemplating your vision... (${Vt}s)`,` Selecting the perfect colours... (${Vt}s)`,` Calculating vector paths... (${Vt}s)`,` Almost ready to create... (${Vt}s)`],Cr=Math.floor(Vt/4)%Bn.length;Q(Bn[Cr])}else if(Ft.status==="running")if(Et!=="running")Q(" AI is creating your design..."),Et="running";else{const Bn=[` Creating vector shapes... (${Vt}s)`,` Applying colours and patterns... (${Vt}s)`,` Refining design details... (${Vt}s)`,` Finalising artwork... (${Vt}s)`],Cr=Math.floor(Vt/5)%Bn.length;Q(Bn[Cr])}else if(Ft.status==="retrying"){const Bn=((jn=Ft.recraft)==null?void 0:jn.attempt_current)||0,Cr=((qn=Ft.recraft)==null?void 0:qn.attempt_max)||3;Q(` Retrying generation (attempt ${Bn}/${Cr})...`)}},2e3,dr.current.signal);const zt=await Pl.getRecraftStatus(at.jobId);N(zt),_e(zt.result),zt.status==="completed"&&(Q(" Design ready!"),P(!1),(ft=zt.result)!=null&&ft.svg_url&&await sr(zt.result.svg_url,at.jobId))}catch(at){if(at.name==="AbortError")return;console.error("Generation failed:",at),F(at.message),Q(""),P(!1)}},Vn=()=>{const Ze=j==="solid"?k:v,ft=j==="solid"?"tpv-solid":"tpv-blend";if(Ze){const at=document.createElement("a");at.href=Ze,at.download=`${ft}-${Date.now()}.svg`,document.body.appendChild(at),at.click(),document.body.removeChild(at)}},Tn=async Ze=>{try{const at=await(await fetch(Ze)).text(),zt=new DOMParser().parseFromString(at,"image/svg+xml").querySelector("svg");if(!zt)return null;let Ft,Vt;const jn=zt.getAttribute("viewBox");if(jn){const Bn=jn.split(/\s+/).map(Number);Ft=Bn[2],Vt=Bn[3]}else Ft=parseFloat(zt.getAttribute("width"))||1024,Vt=parseFloat(zt.getAttribute("height"))||1024;return Ft/Vt}catch(ft){return console.error("[DIMENSION] Failed to detect aspect ratio:",ft),null}},Gn=(Ze,ft)=>{me(Ze),Le(ft),Dt({width:Ze,height:ft}),_t==="pdf"?setTimeout(()=>Zt(Ze,ft),100):_t==="tiles"?setTimeout(()=>Pn(Ze,ft),100):_t==="insitu"?setTimeout(()=>pt(!0),100):_t==="save"&&Ye(!0),It(null)},Gr=async()=>{const Ze=j==="solid"?k:v;if(i==="upload"&&(!o||!a)){const ft=await Tn(Ze);if(ft){At(ft),It("insitu"),Ke(!0);return}else{At(1),It("insitu"),Ke(!0);return}}pt(!0)},Yn=async(Ze="fast")=>{const ft=j==="solid"?k:v;if(!(!ft||Bt)){if(D&&Kb(D)){Cn("This artwork has already been flattened.");return}Mt(!0),nn(0),Cn(null);try{console.log(`[INSPIRE] Starting flatten (quality: ${Ze})`);const Et=await(await fetch(ft)).text();ye||(pe(Et),ve({solidRecipes:C,solidColorMapping:x,blendRecipes:m,colorMapping:g}),console.log("[INSPIRE] Saved original SVG and recipes for revert"));const{svg:pn,stats:zt}=await GTe(Et,{quality:Ze,resolution:4096,quantize:!0,onProgress:nn});console.log("[INSPIRE] Flatten complete:",zt);const Ft=Kl(pn);G(Ft),St(new Map),qe([new Map]),ae(0);const Vt=new Blob([Ft],{type:"image/svg+xml"}),jn=URL.createObjectURL(Vt);j==="solid"?oe(jn):Ue(jn);const{recipes:qn,colorMapping:Bn}=qTe(Ft);j==="solid"?(ct(qn),he(Bn)):(st(qn),nt(Bn)),console.log("[INSPIRE] Rebuilt recipes from flattened SVG:",qn.length,"colors"),nn(100),console.log("[INSPIRE] Flatten applied successfully")}catch(at){console.error("[INSPIRE] Flatten failed:",at),Cn(at.message||"Flatten failed. Please try again.")}finally{Mt(!1)}}},y=Ze=>{Nr(Ze),wn(!0),En(!1)},O=()=>{wn(!1),Yn(Sr)},ee=async()=>{if(!ye)return;console.log("[INSPIRE] Reverting to original unflattened SVG");const Ze=new Blob([ye],{type:"image/svg+xml"}),ft=URL.createObjectURL(Ze);G(ye),j==="solid"?oe(ft):Ue(ft),je&&(ct(je.solidRecipes),he(je.solidColorMapping),st(je.blendRecipes),nt(je.colorMapping),console.log("[INSPIRE] Restored original recipes and color mapping")),pe(null),ve(null),St(new Map),qe([new Map]),ae(0),console.log("[INSPIRE] Reverted to original successfully")},le=()=>{const Ze=j==="solid"?k:v,ft=j==="solid"?"tpv-solid":"tpv-blend";if(Ze){const at=new Image;at.onload=()=>{const Et=document.createElement("canvas");Et.width=at.naturalWidth||1e3,Et.height=at.naturalHeight||1e3,Et.getContext("2d").drawImage(at,0,0),Et.toBlob(zt=>{const Ft=URL.createObjectURL(zt),Vt=document.createElement("a");Vt.href=Ft,Vt.download=`${ft}-${Date.now()}.png`,document.body.appendChild(Vt),Vt.click(),document.body.removeChild(Vt),URL.revokeObjectURL(Ft)})},at.src=Ze}},Ce=()=>{ge()&&!window.confirm(`Start a new design?

You have unsaved changes that will be lost.`)||(H(),De(null),P(!1),N(null),F(null),Q(""),W(null),B(!1),V(null),z(!1),se(null),ze(!1),$e(null),pe(null),ve(null),En(!1),wn(!1),Nr(null))},et=async()=>{const Ze=j==="solid"?k:v,ft=o>0&&a>0;if(i==="upload"&&!ft){const Et=await Tn(Ze);if(Et){At(Et),It("save"),Ke(!0);return}else{At(1),It("save"),Ke(!0);return}}Ye(!0)},[it,bt]=fe.useState(!1),xt=async()=>{const Ze=j==="solid"?k:v;if(i==="upload"&&(!o||!a)){const ft=await Tn(Ze);if(ft){At(ft),It("pdf"),Ke(!0);return}else{At(1),It("pdf"),Ke(!0);return}}await Zt(o,a)},Zt=async(Ze,ft)=>{const at=j==="solid"?k:v,Et=j==="solid"?Jn||C:Kr||m,pn=j==="solid"?"tpv-solid":"tpv-blend";if(!at||!Et){F("Cannot generate PDF: missing SVG or recipes");return}bt(!0),F(null);try{const Ft=await(await fetch(at)).text(),Vt=new AbortController,jn=setTimeout(()=>Vt.abort(),3e4),qn=await xa.getSession(),Bn={"Content-Type":"application/json"};qn!=null&&qn.access_token&&(Bn.Authorization=`Bearer ${qn.access_token}`);const Cr=await fetch("/api/export-pdf",{method:"POST",headers:Bn,signal:Vt.signal,body:JSON.stringify({svgString:Ft,designName:ce||s||"TPV Design",projectName:"TPV Studio",dimensions:{widthMM:Ze,lengthMM:ft},recipes:Et,mode:j,designId:p||""})});if(clearTimeout(jn),!Cr.ok){const ns=Cr.headers.get("content-type");if(ns&&ns.includes("application/json")){const Mi=await Cr.json();throw new Error(Mi.message||"PDF generation failed")}else{const Mi=await Cr.text();throw console.error("PDF API error response:",Mi),new Error(`Server error: ${Cr.status}`)}}const er=await Cr.blob(),on=URL.createObjectURL(er),Yt=document.createElement("a");Yt.href=on,Yt.download=`${pn}-${Date.now()}.pdf`,document.body.appendChild(Yt),Yt.click(),document.body.removeChild(Yt),URL.revokeObjectURL(on)}catch(zt){console.error("PDF download error:",zt),zt.name==="AbortError"?F("PDF generation timed out. Please try again."):F(`PDF generation failed: ${zt.message}`)}finally{bt(!1)}},sn=async()=>{const Ze=j==="solid"?k:v;if(!Ze){F("No SVG available to slice");return}if(i==="upload"&&(!o||!a)){const ft=await Tn(Ze);if(ft){At(ft),It("tiles"),Ke(!0);return}else{At(1),It("tiles"),Ke(!0);return}}await Pn(o,a)},Pn=async(Ze,ft)=>{const at=j==="solid"?k:v;try{await U9(at,{width:Ze,length:ft},ce||"tpv-design")}catch(Et){console.error("Tile download error:",Et),F(`Failed to download tiles: ${Et.message}`)}},sr=async(Ze=null,ft=null)=>{const at=Ze||(d==null?void 0:d.svg_url),Et=ft||p;if(!at){F("No SVG available to analyse");return}{F(null),Q(" Processing design colours...");let pn=null;try{const Ft=await(await fetch(at)).text(),Vt=Xb(Ft);pn=Kl(Vt),G(pn)}catch(zt){console.error("[TPV-STUDIO] Failed to tag SVG regions:",zt)}await kt(at,Et,pn);return}},ts=async()=>{B(!1),V(null),ze(!1),$e(null),j==="solid"?Oe(new Map):We(new Map),d!=null&&d.svg_url&&await sr(d.svg_url,p)},Ut=async Ze=>{var ft;if(!ce){if(!s||i!=="prompt"){Xe&&M(`TPV Design  ${Xe.name.replace(/\.[^/.]+$/,"")}`);return}Je(!0);try{const at=(Ze==null?void 0:Ze.slice(0,6).map(pn=>{var Ft,Vt;const zt=(Vt=(Ft=pn.chosenRecipe)==null?void 0:Ft.components)==null?void 0:Vt[0];return(zt==null?void 0:zt.name)||null}).filter(Boolean))||[],Et=await Pl.generateDesignName({prompt:s,colors:at,dimensions:{widthMM:o,lengthMM:a}});Et.success&&((ft=Et.names)==null?void 0:ft.length)>0?M(Et.names[0]):M(He(s))}catch(at){console.error("[TPV-STUDIO] Name generation failed:",at),M(He(s))}finally{Je(!1)}}},He=Ze=>Ze?`TPV Design  ${Ze.split(/[,.]/)[0].trim().slice(0,40)}`:"TPV Playground Design",kt=async(Ze=null,ft=null,at=null)=>{const Et=Ze||(d==null?void 0:d.svg_url),pn=ft||p,zt=at||D;if(Et)try{const Ft=await fetch("/api/solid-recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({svg_url:Et,job_id:pn,max_colors:15})}),Vt=await Ft.json();if(!Ft.ok)throw new Error(Vt.error||"Failed to generate solid recipes");if(Vt.success){ct(Vt.recipes);const jn=new Map(Object.entries(Vt.colorMapping||{}));he(jn);try{const{dataUrl:qn,stats:Bn}=await Vl(Et,jn,zt);oe(qn),Bn.colorsNotMapped&&Bn.colorsNotMapped.size>0&&console.warn("[TPV-STUDIO] Unmapped colors in solid mode:",Array.from(Bn.colorsNotMapped)),Ut(Vt.recipes)}catch(qn){console.error("[TPV-STUDIO] Failed to generate solid SVG:",qn)}}}catch(Ft){console.error("[TPV-STUDIO] Solid generation failed:",Ft)}},Ot=(Ze,ft="palette")=>{if(ne&&te&&ft==="palette"){vn(te.regionId,Ze.hex),z(!1),se(null);return}ft==="palette"&&(j==="blend"?($e(Ze),ze(!0),ht(!1)):(V(Ze),B(!0),Pt(!1)))},Fn=Ze=>{ne?(vn(te.regionId,Ze.sourceColor),z(!1),se(null)):(z(!0),se(Ze))},vn=(Ze,ft)=>{const at=typeof ft=="string"?{hex:ft,editType:"eyedrop"}:ft;re(Et=>[...Et,{regionId:Ze,colorData:{...at,hex:at.hex.toLowerCase()},viewMode:j}])},nr=async()=>{if(be||ue.length===0)return;Se(!0);const Ze=ue[0],ft=Ze.colorData;try{const at=new Map(U);at.set(Ze.regionId,ft),Ze.viewMode==="blend"?await ai(null,null,at):await vs(null,null,at),St(at);const Et=r.historyIndex,zt=r.regionOverridesHistory.slice(0,Et+1);zt.push(new Map(at)),zt.length>50&&zt.shift(),qe(zt),ae(zt.length-1)}catch(at){console.error("[TPV-STUDIO] Failed to process region recolor:",at)}finally{re(at=>at.slice(1)),Se(!1)}},Jr=()=>{z(!1),se(null)},Oi=()=>{te&&(vn(te.regionId,"transparent"),z(!1),se(null))},ta=Ze=>{if(!te)return;const ft={hex:Ze.hex,tpvCode:Ze.code,tpvName:Ze.name,originalHex:te.sourceColor,editType:"solid"};vn(te.regionId,ft),z(!1),se(null)},na=async()=>{if(X<=0)return;const Ze=X-1,ft=R[Ze];St(new Map(ft)),ae(Ze),j==="blend"?await ai(null,null,ft):await vs(null,null,ft)},fr=async()=>{if(X>=R.length-1)return;const Ze=X+1,ft=R[Ze];St(new Map(ft)),ae(Ze),j==="blend"?await ai(null,null,ft):await vs(null,null,ft)},Ri=async Ze=>{if(Z)if(j==="solid"){const at=(Jn||C).find(Et=>Et.targetColor.hex.toLowerCase()===Z.hex.toLowerCase());if(at!=null&&at.isAddedFromEdit){const Et=Z.hex.toLowerCase(),pn=new Map(U),zt=pi.find(Vt=>Vt.hex.toLowerCase()===Ze.toLowerCase());U.forEach((Vt,jn)=>{(typeof Vt=="string"?Vt:Vt.hex).toLowerCase()===Et&&pn.set(jn,{hex:Ze,tpvCode:(zt==null?void 0:zt.code)||null,tpvName:(zt==null?void 0:zt.name)||null,originalHex:Vt.originalHex||Et,editType:"solid"})});const Ft=R.slice(0,X+1);Ft.push(new Map(pn)),Ft.length>50&&Ft.shift(),St(pn),qe(Ft),ae(Ft.length-1),V({...Z,hex:Ze,blendHex:Ze}),await vs(A,Ze,pn)}else{const Et=new Map(A);((at==null?void 0:at.mergedOriginalColors)||[Z.originalHex.toLowerCase()]).forEach(zt=>{Et.set(zt,{newHex:Ze.toLowerCase()})}),Oe(Et),V({...Z,hex:Ze,blendHex:Ze}),await vs(Et,Ze)}}else{const ft=new Map(w);ft.set(Z.originalHex.toLowerCase(),{newHex:Ze.toLowerCase()}),We(ft),V({...Z,hex:Ze,blendHex:Ze}),await ai(ft,Ze)}};fe.useCallback(async({blendHex:Ze,parts:ft,recipe:at})=>{if(we)if(we.isAddedFromEdit){const Et=we.hex.toLowerCase(),pn=new Map(U);U.forEach((Ft,Vt)=>{(typeof Ft=="string"?Ft:Ft.hex).toLowerCase()===Et&&pn.set(Vt,{hex:Ze,originalHex:Ft.originalHex||Et,editType:"blend",blendComponents:(at==null?void 0:at.components)||null})}),$e({...we,hex:Ze,blendHex:Ze}),await ai(w,Ze,pn);const zt=R.slice(0,X+1);zt.push(new Map(pn)),zt.length>50&&zt.shift(),St(pn),qe(zt),ae(zt.length-1)}else{const Et=new Map(w);Et.set(we.originalHex.toLowerCase(),{newHex:Ze.toLowerCase(),recipe:at,parts:ft}),We(Et),$e({...we,hex:Ze,blendHex:Ze}),await ai(Et,Ze)}},[we,w,U,R,X,d,g]);const ai=async(Ze=null,ft=null,at=null)=>{if(!(!(d!=null&&d.svg_url)||!g||!m))try{const Et=new Map(g),pn=Ze||w;pn.forEach((er,on)=>{if(er.newHex){const Yt=on.toLowerCase();Et.set(Yt,{...Et.get(Yt),blendHex:er.newHex})}});const zt=m.map(er=>{const on=pn.get(er.originalColor.hex.toLowerCase());if(on!=null&&on.newHex){const Yt={...er,targetColor:{...er.targetColor,hex:on.newHex},blendColor:{...er.blendColor,hex:on.newHex}};return on.recipe&&on.recipe.components&&(Yt.chosenRecipe={...er.chosenRecipe,components:on.recipe.components,deltaE:0,quality:"Excellent"}),Yt}return er}),{svgText:Ft,stats:Vt}=await Vl(d.svg_url,Et,D),jn=at!==null?at:U,qn=xu(Ft,jn);v&&v.startsWith("blob:")&&URL.revokeObjectURL(v);const Bn=new Blob([qn],{type:"image/svg+xml"}),Cr=URL.createObjectURL(Bn);Ue(Cr),nt(Et),st(zt),jn.size>0}catch(Et){console.error("[TPV-STUDIO] Failed to regenerate blend SVG:",Et)}},vs=async(Ze=null,ft=null,at=null)=>{if(!(!(d!=null&&d.svg_url)||!x||!C))try{const Et=new Map(x),pn=Ze||A;pn.forEach((er,on)=>{if(er.newHex){const Yt=on.toLowerCase();Et.set(Yt,{...Et.get(Yt),blendHex:er.newHex})}});const zt=C.map(er=>{const on=pn.get(er.originalColor.hex.toLowerCase());if(on!=null&&on.newHex){const Yt=pi.find(ns=>ns.hex.toLowerCase()===on.newHex.toLowerCase());return Yt?{...er,targetColor:{...er.targetColor,hex:on.newHex},blendColor:{hex:on.newHex,rgb:Yt.rgb,lab:Yt.lab},chosenRecipe:{components:[{code:Yt.code,name:Yt.name,hex:Yt.hex,rgb:Yt.rgb,lab:Yt.lab,ratio:1}],blendColor:{hex:Yt.hex,rgb:Yt.rgb,lab:Yt.lab},deltaE:0,quality:"Perfect"}}:{...er,targetColor:{...er.targetColor,hex:on.newHex},blendColor:{...er.blendColor,hex:on.newHex}}}return er}),{svgText:Ft,stats:Vt}=await Vl(d.svg_url,Et,D),jn=at!==null?at:U,qn=xu(Ft,jn);k&&k.startsWith("blob:")&&URL.revokeObjectURL(k);const Bn=new Blob([qn],{type:"image/svg+xml"}),Cr=URL.createObjectURL(Bn);oe(Cr),he(Et),ct(zt),jn.size>0}catch(Et){console.error("[TPV-STUDIO] Failed to regenerate solid SVG:",Et)}},Sl=Ze=>{if(!(Ze!=null&&Ze.components))return null;const ft={};return Ze.components.forEach(at=>{at.code&&at.parts&&(ft[at.code]=at.parts)}),Object.keys(ft).length>0?{parts:ft}:null};fe.useCallback(Ze=>{var at;if(!Ze)return null;const ft=w.get((at=Ze.originalHex)==null?void 0:at.toLowerCase());return ft!=null&&ft.recipe?ft.recipe:Ze.isAddedFromEdit&&Ze.chosenRecipe?Sl(Ze.chosenRecipe):Ze.recipe||null},[w]);const xs=async(Ze,ft,at,Et,pn=null,zt=null)=>{try{const Ft=new Map(ft);Et&&Et.size>0&&Et.forEach((er,on)=>{const Yt=on.toLowerCase();Ft.has(Yt)&&Ft.set(Yt,{...Ft.get(Yt),blendHex:er.newHex})});const{dataUrl:Vt,svgText:jn}=await Vl(Ze,Ft,pn);let qn=jn;zt&&zt.size>0&&(qn=xu(jn,zt));const Bn=new Blob([qn],{type:"image/svg+xml"}),Cr=URL.createObjectURL(Bn);Ue(Cr)}catch(Ft){console.error("[INSPIRE] Failed to regenerate blend SVG:",Ft)}},Mo=async(Ze,ft,at,Et,pn=null,zt=null)=>{try{const Ft=new Map(ft);Et&&Et.size>0&&Et.forEach((er,on)=>{const Yt=on.toLowerCase();Ft.has(Yt)&&Ft.set(Yt,{...Ft.get(Yt),blendHex:er.newHex})});const{dataUrl:Vt,svgText:jn}=await Vl(Ze,Ft,pn);let qn=jn;zt&&zt.size>0&&(qn=xu(jn,zt));const Bn=new Blob([qn],{type:"image/svg+xml"}),Cr=URL.createObjectURL(Bn);oe(Cr)}catch(Ft){console.error("[INSPIRE] Failed to regenerate solid SVG:",Ft)}};return c.jsxs("div",{className:`inspire-panel-recraft${n?" inspire-panel-recraft--embedded":""}`,children:[!n&&c.jsxs("div",{className:"panel-header",children:[c.jsx("h2",{children:"TPV Studio - Vector AI"}),c.jsx("p",{className:"subtitle",children:"AI-powered vector designs for playground surfacing"})]}),!d&&!S&&bi===!1&&c.jsxs("div",{className:"welcome-guidance",children:[c.jsx("div",{className:"welcome-icon",children:""}),c.jsx("h3",{children:"Create Your First Design"}),c.jsx("p",{children:"Choose how you'd like to create your TPV design below. You can describe what you want, upload an image to convert, or process an existing SVG file. Once generated, you'll be able to edit colours, export PDFs with specifications, and preview designs on-site."})]}),c.jsxs("div",{className:"input-mode-tabs",children:[c.jsxs("button",{className:`input-mode-tab ${i==="prompt"?"active":""}`,onClick:()=>{ke("prompt"),De(null),F(null)},disabled:S,children:[c.jsxs("svg",{className:"mode-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M12 3l1.545 4.635L18.18 9.18l-4.635 1.545L12 15.36l-1.545-4.635L5.82 9.18l4.635-1.545L12 3z"}),c.jsx("path",{d:"M5 21l1.5-4.5L2 15l4.5-1.5L8 9l1.5 4.5L14 15l-4.5 1.5L8 21z",opacity:"0.5"})]}),c.jsx("span",{className:"mode-title",children:"Text Prompt"}),c.jsx("span",{className:"mode-description",children:"Describe your design"})]}),c.jsxs("button",{className:`input-mode-tab ${i==="upload"?"active":""}`,onClick:()=>{ke("upload"),Fe(""),F(null)},disabled:S,children:[c.jsxs("svg",{className:"mode-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"17 8 12 3 7 8"}),c.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),c.jsx("span",{className:"mode-title",children:"Upload Design"}),c.jsx("span",{className:"mode-description",children:"PNG, JPG, or SVG"})]})]}),c.jsxs("div",{className:"form-section",children:[i==="prompt"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"prompt",children:"Design Description"}),c.jsx("textarea",{id:"prompt",value:s,onChange:Ze=>Fe(Ze.target.value),placeholder:"e.g., calm ocean theme with big fish silhouettes and waves",rows:4,disabled:S,className:"prompt-input"}),c.jsx("p",{className:"helper-text",children:"Describe the design you want to generate. The AI will create a vector illustration based on your description. Perfect for creating completely new designs from scratch - just describe colors, themes, and elements you want."})]}),i==="upload"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"design-upload",children:"Upload Design File"}),c.jsxs("div",{className:`drop-zone ${b?"dragging":""} ${Xe?"has-file":""}`,onDragEnter:Vr,onDragLeave:mr,onDragOver:Qt,onDrop:Ir,children:[c.jsx("input",{id:"design-upload",type:"file",accept:".png,.jpg,.jpeg,.svg,image/png,image/jpeg,image/svg+xml",onChange:Qr,disabled:S,className:"file-input-hidden"}),c.jsx("label",{htmlFor:"design-upload",className:"drop-zone-content",children:Xe?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"upload-icon success",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),c.jsx("span",{className:"file-name",children:Xe.name}),c.jsx("span",{className:"file-type-badge",children:Yh(Xe)==="svg"?"SVG - will process immediately":"Image - will vectorise with AI"}),c.jsx("span",{className:"drop-hint",children:"Click to change file"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"17 8 12 3 7 8"}),c.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),c.jsx("span",{className:"drop-text",children:"Drag & drop your design here"}),c.jsx("span",{className:"drop-hint",children:"or click to browse"}),c.jsx("span",{className:"supported-formats",children:"PNG, JPG, or SVG"})]})})]}),c.jsxs("p",{className:"helper-text",children:["Upload your design file. ",c.jsx("strong",{children:"PNG/JPG"})," images will be vectorised with AI (~30 seconds). ",c.jsx("strong",{children:"SVG"})," files are processed immediately for TPV colour matching."]})]}),i==="prompt"&&c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"length",children:"Length (mm)"}),c.jsx("input",{id:"length",type:"number",value:a,onChange:Ze=>Le(parseInt(Ze.target.value,10)),min:1e3,max:2e4,step:100,disabled:S})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"width",children:"Width (mm)"}),c.jsx("input",{id:"width",type:"number",value:o,onChange:Ze=>me(parseInt(Ze.target.value,10)),min:1e3,max:2e4,step:100,disabled:S})]})]}),$&&c.jsxs("div",{className:"error-message",children:[c.jsx("strong",{children:"Error:"})," ",$]}),l&&c.jsx("div",{className:"upload-progress",children:c.jsx("p",{children:l})}),c.jsx("button",{onClick:bn,disabled:S||i==="prompt"&&!s.trim()||i==="upload"&&!Xe,className:"generate-button",children:S?i==="upload"&&Xe&&Yh(Xe)==="svg"?"Processing...":"Generating...":i==="prompt"?"Generate Vector Design":Xe&&Yh(Xe)==="svg"?"Process SVG":"Vectorise & Process"})]}),S&&c.jsxs("div",{className:"progress-section",children:[c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-bar-fill"})}),c.jsx("p",{className:"progress-message",children:q})]}),d&&!S&&c.jsxs("div",{className:"results-section",children:[u&&c.jsxs("div",{className:`ar-info ${u.layout.mode}`,children:[c.jsxs("div",{className:"ar-info-header",children:[c.jsx("strong",{children:"Layout:"})," ",u.layout.reason]}),c.jsxs("div",{className:"ar-info-details",children:[c.jsxs("span",{children:["Requested: ",u.user.formatted]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Generated: ",u.canonical.name," panel"]}),u.layout.mode==="framing"&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{className:"layout-note",children:"Panel centred with base colour surround"})]}),u.layout.mode==="tiling"&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{className:"layout-note",children:"Pattern will repeat along length"})]})]})]}),Wl.BLEND_MODE_ENABLED,D&&(v||k)&&c.jsxs("div",{className:"complexity-indicator",children:[c.jsx($Te,{svgContent:D}),ye&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"simplified-badge",children:"Simplified"}),c.jsx("button",{className:"revert-btn",onClick:ee,title:"Restore original artwork",children:" Revert"})]}),!ye&&!Kb(D)&&c.jsxs("div",{className:"troubleshoot-dropdown",children:[c.jsxs("button",{className:"troubleshoot-toggle",onClick:()=>En(!vt),children:["Having issues? ",vt?"":""]}),vt&&c.jsxs("div",{className:"troubleshoot-menu",children:[c.jsx("div",{className:"troubleshoot-header",children:"Simplify Artwork"}),c.jsx("p",{className:"troubleshoot-desc",children:"If editing feels slow or you see visual artifacts, simplifying can help."}),c.jsxs("div",{className:"troubleshoot-buttons",children:[c.jsx("button",{onClick:()=>y("fast"),disabled:Bt,children:"Quick"}),c.jsx("button",{onClick:()=>y("clean"),disabled:Bt,children:"Smooth"})]})]})]}),!ye&&Kb(D)&&c.jsx("span",{className:"simplified-badge",children:"Simplified"})]}),On&&c.jsx("div",{className:"modal-overlay",onClick:()=>wn(!1),children:c.jsxs("div",{className:"flatten-confirm-modal",onClick:Ze=>Ze.stopPropagation(),children:[c.jsx("h3",{children:"Simplify Artwork?"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Converts vector paths to traced outlines"}),c.jsx("li",{children:"Locks in current colors"}),c.jsx("li",{children:"May slightly simplify geometry"})]}),c.jsx("p",{className:"modal-note",children:"You can revert to the original later."}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{onClick:()=>wn(!1),children:"Cancel"}),c.jsx("button",{onClick:O,className:"primary",children:"Simplify"})]})]})}),Bt&&c.jsx("div",{className:"flatten-overlay",children:c.jsxs("div",{className:"flatten-modal",children:[c.jsx("div",{className:"flatten-spinner"}),c.jsx("div",{className:"flatten-title",children:"Flattening Artwork..."}),c.jsx("div",{className:"flatten-progress-bar",children:c.jsx("div",{className:"flatten-progress-fill",style:{width:`${tn}%`}})}),c.jsxs("div",{className:"flatten-progress-text",children:[tn,"%"]}),c.jsx("div",{className:"flatten-warning",children:"This converts paths to traced outlines. Region colors will be reset."})]})}),xn&&c.jsxs("div",{className:"flatten-error",children:[c.jsx("span",{children:xn}),c.jsx("button",{onClick:()=>Cn(null),children:""})]}),Wl.BLEND_MODE_ENABLED,j==="solid"&&k&&C&&c.jsx("div",{ref:hr,children:c.jsx(iU,{blendSvgUrl:k,recipes:Jn||C,mode:"solid",onColorClick:Ot,onRegionClick:Fn,onEyedropperCancel:Jr,onMakeTransparent:Oi,onSelectTPVColor:ta,selectedColor:Z,editedColors:A,onResetAll:ts,designName:ce,onNameChange:M,isNameLoading:Qe,onInSituClick:Gr,eyedropperActive:ne,eyedropperRegion:te,onRegionUndo:na,onRegionRedo:fr,canUndo:X>0,canRedo:X<R.length-1,regionOverridesCount:U.size})}),Wl.BLEND_MODE_ENABLED,(v||k)&&c.jsxs("div",{className:"action-bar",children:[c.jsxs("button",{className:"action-bar__btn action-bar__btn--secondary",onClick:Ce,title:"Start a new design",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 5v14M5 12h14"})}),"New"]}),c.jsxs("button",{className:"action-bar__btn action-bar__btn--primary",onClick:et,title:"Save this design to your gallery",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save"]}),c.jsx(h5e,{onExportSVG:Vn,onExportPNG:le,onExportPDF:xt,onExportTiles:sn,viewMode:j,exporting:it,disabled:!(v||k)})]})]}),Wl.BLEND_MODE_ENABLED,j==="solid"&&k&&C&&!E&&c.jsxs("div",{className:"finalize-section",children:[c.jsx("button",{onClick:()=>Pt(!0),className:"finalize-button",children:"View TPV Colours Used"}),c.jsx("p",{className:"finalize-hint",children:"See which pure TPV colours are used in this design"})]}),Wl.BLEND_MODE_ENABLED,E&&C&&c.jsx(tU,{recipes:Jn||C,onClose:()=>{Pt(!1)},isRecalculating:_i}),Y&&Z&&c.jsx(goe,{color:Z,mode:j,onColorChange:Ri,onClose:()=>{B(!1),V(null)}}),Be&&c.jsx(voe,{currentState:{inputMode:i,prompt:s,selectedFile:Xe,lengthMM:(jt==null?void 0:jt.height)||a,widthMM:(jt==null?void 0:jt.width)||o,result:d,viewMode:j,blendRecipes:m,solidRecipes:C,colorMapping:g,solidColorMapping:x,solidEditedColors:A,blendEditedColors:w,blendSvgUrl:v,solidSvgUrl:k,arMapping:u,jobId:p,inSituData:Tt,regionOverrides:U,originalTaggedSvg:D,originalUnflattenedSvg:ye},existingDesignId:ie,initialName:ce,onClose:()=>{Ye(!1),Dt(null)},onSaved:(Ze,ft)=>{Ye(!1),Dt(null),Ni(!0),ft&&M(ft),t&&t(ft)}}),dt&&c.jsx(IO,{designUrl:j==="solid"?k:v,designDimensions:{width:o,length:a},onClose:()=>pt(!1),onSaved:Ze=>{wt(Ze),pt(!1)}}),c.jsx(Roe,{isOpen:Ae,onClose:()=>{Ke(!1),It(null)},onConfirm:Gn,aspectRatio:yt,defaultLongestSide:5e3}),c.jsx("style",{jsx:!0,children:`
        .inspire-panel-recraft {
          max-width: var(--max-width-xl);
          margin: 0 auto;
          padding: var(--space-4);
        }

        .panel-header {
          text-align: center;
          margin-bottom: var(--space-6);
        }

        .panel-header h2 {
          font-family: var(--font-heading);
          font-size: var(--text-3xl);
          margin: 0 0 var(--space-2) 0;
          color: var(--color-primary);
          font-weight: var(--font-bold);
          letter-spacing: var(--tracking-tight);
        }

        .subtitle {
          color: var(--color-text-secondary);
          font-size: var(--text-base);
          line-height: var(--leading-relaxed);
        }

        /* Complexity Indicator (Phase 1.5 Diagnostics) */
        .complexity-indicator {
          display: flex;
          align-items: center;
          justify-content: flex-end;
          gap: 1rem;
          padding: 0.5rem 0;
          margin-bottom: 0.5rem;
        }

        /* Troubleshoot Dropdown (Phase 3) */
        .troubleshoot-dropdown {
          position: relative;
        }

        .troubleshoot-toggle {
          padding: 0.375rem 0.75rem;
          font-size: 0.75rem;
          font-weight: 500;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 4px;
          color: #64748b;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .troubleshoot-toggle:hover {
          background: #f1f5f9;
          border-color: #cbd5e1;
          color: #475569;
        }

        .troubleshoot-menu {
          position: absolute;
          top: 100%;
          right: 0;
          margin-top: 0.5rem;
          padding: 1rem;
          background: white;
          border: 1px solid #e2e8f0;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          min-width: 240px;
          z-index: 100;
        }

        .troubleshoot-header {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 0.5rem;
        }

        .troubleshoot-desc {
          font-size: 0.75rem;
          color: #64748b;
          margin: 0 0 0.75rem 0;
          line-height: 1.4;
        }

        .troubleshoot-buttons {
          display: flex;
          gap: 0.5rem;
        }

        .troubleshoot-buttons button {
          flex: 1;
          padding: 0.5rem 0.75rem;
          font-size: 0.75rem;
          font-weight: 500;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.15s ease;
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          color: #475569;
        }

        .troubleshoot-buttons button:hover:not(:disabled) {
          background: #e2e8f0;
          border-color: #94a3b8;
        }

        .troubleshoot-buttons button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Simplified Badge & Revert Button */
        .simplified-badge {
          display: inline-block;
          padding: 0.125rem 0.5rem;
          font-size: 0.65rem;
          font-weight: 600;
          color: white;
          background: #22c55e;
          border-radius: 3px;
          text-transform: uppercase;
          letter-spacing: 0.03em;
        }

        .revert-btn {
          padding: 0.25rem 0.625rem;
          font-size: 0.75rem;
          font-weight: 500;
          background: #fef3c7;
          border: 1px solid #fcd34d;
          border-radius: 4px;
          color: #92400e;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .revert-btn:hover {
          background: #fde68a;
          border-color: #fbbf24;
        }

        /* Flatten Confirmation Modal */
        .flatten-confirm-modal {
          background: white;
          padding: 1.5rem;
          border-radius: 12px;
          max-width: 360px;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .flatten-confirm-modal h3 {
          margin: 0 0 1rem 0;
          font-size: 1.125rem;
          color: #1e293b;
        }

        .flatten-confirm-modal ul {
          margin: 0 0 1rem 0;
          padding-left: 1.25rem;
          color: #475569;
          font-size: 0.875rem;
        }

        .flatten-confirm-modal li {
          margin-bottom: 0.25rem;
        }

        .flatten-confirm-modal .modal-note {
          margin: 0 0 1rem 0;
          padding: 0.75rem;
          background: #f0fdf4;
          border-radius: 6px;
          font-size: 0.8rem;
          color: #166534;
        }

        .flatten-confirm-modal .modal-actions {
          display: flex;
          gap: 0.75rem;
          justify-content: flex-end;
        }

        .flatten-confirm-modal .modal-actions button {
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          font-weight: 500;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .flatten-confirm-modal .modal-actions button:first-child {
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          color: #475569;
        }

        .flatten-confirm-modal .modal-actions button:first-child:hover {
          background: #e2e8f0;
        }

        .flatten-confirm-modal .modal-actions button.primary {
          background: #ff6b35;
          border: 1px solid #ff6b35;
          color: white;
        }

        .flatten-confirm-modal .modal-actions button.primary:hover {
          background: #e55a2b;
        }

        /* Flatten Progress Overlay */
        .flatten-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }

        .flatten-modal {
          background: white;
          border-radius: 12px;
          padding: 2rem;
          text-align: center;
          max-width: 320px;
          box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .flatten-spinner {
          width: 48px;
          height: 48px;
          border: 4px solid #e2e8f0;
          border-top-color: #3b82f6;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .flatten-title {
          font-size: 1.125rem;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 1rem;
        }

        .flatten-progress-bar {
          height: 8px;
          background: #e2e8f0;
          border-radius: 4px;
          overflow: hidden;
          margin-bottom: 0.5rem;
        }

        .flatten-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, #3b82f6, #60a5fa);
          border-radius: 4px;
          transition: width 0.2s ease;
        }

        .flatten-progress-text {
          font-size: 0.875rem;
          font-weight: 500;
          color: #64748b;
          margin-bottom: 1rem;
        }

        .flatten-warning {
          font-size: 0.75rem;
          color: #94a3b8;
          line-height: 1.4;
        }

        /* Flatten Error */
        .flatten-error {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 0.5rem;
          padding: 0.75rem 1rem;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 6px;
          margin-bottom: 0.5rem;
          font-size: 0.875rem;
          color: #dc2626;
        }

        .flatten-error button {
          background: none;
          border: none;
          font-size: 1.25rem;
          color: #dc2626;
          cursor: pointer;
          padding: 0;
          line-height: 1;
          opacity: 0.6;
        }

        .flatten-error button:hover {
          opacity: 1;
        }

        /* Welcome Guidance */
        .welcome-guidance {
          background: linear-gradient(135deg, #fff5f0 0%, #fff9f7 100%);
          border: 2px solid #ff6b35;
          border-radius: var(--radius-lg);
          padding: var(--space-6);
          margin-bottom: var(--space-6);
          text-align: center;
        }

        .welcome-icon {
          font-size: 3rem;
          margin-bottom: var(--space-2);
        }

        .welcome-guidance h3 {
          margin: 0 0 var(--space-3);
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          color: var(--color-primary);
        }

        .welcome-guidance p {
          margin: 0;
          color: var(--color-text-secondary);
          font-size: var(--text-base);
          line-height: var(--leading-relaxed);
          max-width: 600px;
          margin-left: auto;
          margin-right: auto;
        }

        /* Input Mode Tabs - Enhanced cards */
        .input-mode-tabs {
          display: flex;
          gap: var(--space-2);
          margin-bottom: var(--space-3);
          background: var(--color-bg-subtle);
          padding: var(--space-1);
          border-radius: var(--radius-lg);
        }

        .input-mode-tab {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: var(--space-1);
          padding: var(--space-3);
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .input-mode-tab:hover:not(:disabled) {
          border-color: var(--color-primary);
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        .input-mode-tab.active {
          background: linear-gradient(135deg, var(--color-bg-subtle) 0%, var(--color-bg-card) 100%);
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .input-mode-tab:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mode-icon {
          width: 28px;
          height: 28px;
          color: var(--color-text-secondary);
          transition: all var(--transition-base);
        }

        .input-mode-tab:hover:not(:disabled) .mode-icon {
          color: var(--color-primary);
          transform: scale(1.1);
        }

        .input-mode-tab.active .mode-icon {
          color: var(--color-primary);
        }

        .input-mode-tab .mode-title {
          font-family: var(--font-heading);
          font-size: var(--text-sm);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
          margin-top: 0;
        }

        .input-mode-tab .mode-description {
          display: none; /* Hidden to save space */
        }

        .input-mode-tab.active .mode-title {
          color: var(--color-primary);
          font-weight: var(--font-bold);
        }

        /* Helper text */
        .helper-text {
          margin-top: var(--space-1);
          font-size: var(--text-sm);
          color: var(--color-text-tertiary);
          font-style: normal;
          line-height: var(--leading-snug);
        }

        /* Drag & Drop File Upload */
        .file-input-hidden {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
        }

        .drop-zone {
          position: relative;
          width: 100%;
          min-height: 120px;
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-subtle);
          transition: all var(--transition-base);
        }

        .drop-zone.dragging {
          border-color: var(--color-primary);
          background: var(--color-primary-light);
          background: linear-gradient(135deg, rgba(30, 74, 122, 0.05) 0%, rgba(30, 74, 122, 0.1) 100%);
          box-shadow: var(--shadow-glow);
        }

        .drop-zone.has-file {
          border-color: var(--color-success);
          background: var(--color-success-light);
        }

        .drop-zone-content {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: var(--space-1);
          padding: var(--space-4);
          cursor: pointer;
          min-height: 120px;
        }

        .upload-icon {
          width: 36px;
          height: 36px;
          color: var(--color-text-secondary);
          transition: all var(--transition-base);
        }

        .upload-icon.success {
          color: var(--color-success);
        }

        .drop-zone:hover .upload-icon {
          color: var(--color-primary);
          transform: scale(1.1);
        }

        .drop-zone.has-file:hover .upload-icon.success {
          color: var(--color-success);
        }

        .drop-text {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
        }

        .file-name {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-success);
          max-width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .drop-hint {
          font-size: var(--text-sm);
          color: var(--color-text-tertiary);
        }

        .file-type-badge {
          display: inline-block;
          font-size: var(--text-xs);
          color: var(--color-text-secondary);
          background: var(--color-bg-tertiary);
          padding: var(--space-1) var(--space-2);
          border-radius: var(--radius-sm);
          margin-top: var(--space-1);
        }

        .supported-formats {
          display: block;
          font-size: var(--text-xs);
          color: var(--color-text-tertiary);
          margin-top: var(--space-2);
          font-weight: var(--font-medium);
        }

        .drop-zone.dragging .drop-text,
        .drop-zone.dragging .drop-hint {
          color: var(--color-primary);
        }

        .upload-progress {
          padding: var(--space-2);
          background: var(--color-info-light);
          border: 1px solid var(--color-info);
          border-radius: var(--radius-md);
          color: var(--color-info);
          margin-bottom: var(--space-2);
          text-align: center;
          font-size: var(--text-sm);
        }

        .form-section {
          background: var(--color-bg-card);
          padding: var(--space-3);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-3);
          border: 1px solid var(--color-border);
          box-shadow: var(--shadow-xs);
        }

        .form-group {
          margin-bottom: var(--space-3);
        }

        .form-group label {
          display: block;
          margin-bottom: var(--space-2);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
          font-size: var(--text-sm);
        }

        .prompt-input {
          width: 100%;
          padding: var(--space-3);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          font-family: inherit;
          font-size: var(--text-base);
          background: var(--color-bg-card);
          color: var(--color-text-primary);
          transition: border-color var(--transition-base);
        }

        .prompt-input:focus {
          outline: none;
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: var(--space-3);
        }

        input[type="number"] {
          width: 100%;
          padding: var(--space-2);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          background: var(--color-bg-card);
          color: var(--color-text-primary);
          font-size: var(--text-base);
          transition: border-color var(--transition-base);
        }

        input[type="number"]:focus {
          outline: none;
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .error-message {
          padding: var(--space-3);
          background: var(--color-error-light);
          border: 1px solid var(--color-error);
          border-radius: var(--radius-md);
          color: var(--color-error);
          margin-bottom: var(--space-4);
          font-size: var(--text-sm);
        }

        .generate-button {
          width: 100%;
          padding: var(--space-4);
          background: var(--color-accent);
          color: white;
          border: none;
          border-radius: var(--radius-md);
          font-size: var(--text-lg);
          font-weight: var(--font-semibold);
          cursor: pointer;
          transition: all var(--transition-base);
          box-shadow: var(--shadow-sm);
        }

        .generate-button:hover:not(:disabled) {
          background: var(--color-accent-hover);
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
        }

        .generate-button:disabled {
          background: var(--color-bg-subtle);
          color: var(--color-text-tertiary);
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
        }

        .progress-section {
          padding: var(--space-4);
          background: var(--color-info-light);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-4);
          border: 1px solid var(--color-info);
        }

        .progress-bar {
          height: 4px;
          background: var(--color-border);
          border-radius: var(--radius-full);
          overflow: hidden;
          margin-bottom: var(--space-3);
        }

        .progress-bar-fill {
          height: 100%;
          background: var(--color-accent);
          animation: progress 2s ease-in-out infinite;
        }

        @keyframes progress {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }

        .progress-message {
          text-align: center;
          color: var(--color-text-secondary);
          font-weight: var(--font-medium);
          font-size: var(--text-base);
        }

        .results-section {
          background: var(--color-bg-card);
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          border: 1px solid var(--color-border);
          box-shadow: var(--shadow-sm);
        }

        .results-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: var(--space-3);
        }

        .results-header h3 {
          font-family: var(--font-heading);
          margin: 0;
          color: var(--color-primary);
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
        }

        /* Aspect Ratio Info */
        .ar-info {
          padding: var(--space-3) var(--space-4);
          border-radius: var(--radius-md);
          margin-bottom: var(--space-3);
          font-size: var(--text-sm);
        }

        .ar-info.full {
          background: var(--color-success-light);
          border: 1px solid var(--color-success);
        }

        .ar-info.framing {
          background: var(--color-warning-light);
          border: 1px solid var(--color-warning);
        }

        .ar-info.tiling {
          background: var(--color-info-light);
          border: 1px solid var(--color-info);
        }

        .ar-info-header {
          color: var(--color-text-primary);
          margin-bottom: var(--space-2);
          font-weight: var(--font-semibold);
        }

        .ar-info-details {
          display: flex;
          flex-wrap: wrap;
          gap: var(--space-2);
          align-items: center;
          color: var(--color-text-secondary);
          font-size: var(--text-sm);
        }

        .ar-info-details span {
          white-space: nowrap;
        }

        .layout-note {
          color: var(--color-accent);
          font-weight: var(--font-medium);
        }

        /* Mode Toggle Tabs */
        .mode-tabs {
          display: flex;
          gap: var(--space-2);
          margin-bottom: var(--space-3);
          background: var(--color-bg-subtle);
          padding: var(--space-1);
          border-radius: var(--radius-lg);
        }

        .mode-tab {
          flex: 1;
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
          gap: var(--space-2);
          padding: var(--space-2);
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .mode-tab:hover:not(:disabled) {
          border-color: var(--color-accent);
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        .mode-tab.active {
          background: var(--color-accent);
          border-color: var(--color-accent);
          box-shadow: var(--shadow-glow-accent);
        }

        .mode-tab:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mode-title {
          font-family: var(--font-heading);
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-primary);
        }

        .mode-description {
          display: none; /* Hidden to save space */
        }

        .mode-tab.active .mode-title {
          color: white;
          font-weight: var(--font-bold);
        }

        .svg-preview {
          margin: var(--space-2) 0;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          background: var(--color-bg-subtle);
          padding: var(--space-2);
        }

        .design-preview {
          width: 100%;
          height: auto;
          display: block;
        }

        /* Finalize Section */
        .finalize-section {
          background: var(--color-accent-light);
          border: 2px solid var(--color-accent);
          border-radius: var(--radius-lg);
          padding: var(--space-3);
          margin-top: var(--space-3);
          text-align: center;
        }

        .finalize-button {
          width: 100%;
          max-width: 400px;
          padding: var(--space-3);
          background: var(--color-accent);
          color: white;
          border: none;
          border-radius: var(--radius-md);
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          cursor: pointer;
          transition: all var(--transition-base);
          box-shadow: var(--shadow-sm);
        }

        .finalize-button:hover {
          background: var(--color-accent-hover);
          transform: translateY(-1px);
          box-shadow: var(--shadow-md);
        }

        .finalize-hint {
          margin: var(--space-2) 0 0 0;
          color: var(--color-text-secondary);
          font-size: var(--text-xs);
        }

        /* Mixer Widget Container Styles */
        .mixer-widget-container {
          margin-top: var(--space-3);
          background: white;
          border-radius: 12px;
          padding: var(--space-3);
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .mixer-widget-header {
          display: flex;
          justify-content: flex-end;
          margin-bottom: var(--space-2);
          padding-bottom: var(--space-2);
          border-bottom: 2px solid var(--color-border);
        }

        .mixer-close-btn {
          padding: var(--space-2) var(--space-4);
          background: var(--color-primary);
          color: white;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          font-size: var(--text-sm);
          cursor: pointer;
          transition: all 0.2s;
        }

        .mixer-close-btn:hover {
          background: #2563eb;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
          transform: translateY(-1px);
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
          .inspire-panel-recraft {
            padding: var(--space-2);
          }

          .panel-header {
            margin-bottom: var(--space-4);
          }

          .panel-header h2 {
            font-size: var(--text-xl);
          }

          .subtitle {
            font-size: var(--text-sm);
          }

          .welcome-guidance {
            padding: var(--space-4);
            margin-bottom: var(--space-4);
          }

          .welcome-icon {
            font-size: 2rem;
          }

          .welcome-guidance h3 {
            font-size: var(--text-lg);
          }

          .welcome-guidance p {
            font-size: var(--text-sm);
          }

          /* Stack input mode tabs vertically on mobile */
          .input-mode-tabs {
            flex-direction: column;
            gap: var(--space-1);
          }

          .input-mode-tab {
            flex-direction: row;
            justify-content: flex-start;
            padding: var(--space-3);
            min-height: 44px;
          }

          .mode-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
          }

          .input-mode-tab .mode-title {
            font-size: var(--text-sm);
            margin-top: 0;
          }

          .input-mode-tab .mode-description {
            display: none;
          }

          /* Form sections */
          .form-section {
            padding: var(--space-3);
          }

          .form-group label {
            font-size: var(--text-xs);
          }

          /* Stack form rows on mobile */
          .form-row {
            grid-template-columns: 1fr;
            gap: var(--space-2);
          }

          /* Drop zone adjustments */
          .drop-zone {
            min-height: 140px;
          }

          .drop-zone-content {
            padding: var(--space-4);
            min-height: 140px;
          }

          .upload-icon {
            width: 36px;
            height: 36px;
          }

          .drop-text {
            font-size: var(--text-sm);
          }

          /* Generate button */
          .generate-button {
            padding: var(--space-3);
            font-size: var(--text-base);
            min-height: 44px;
          }

          /* Results section - minimal padding for max image width */
          .results-section {
            padding: var(--space-2);
            border-radius: var(--radius-md);
          }

          .results-header h3 {
            font-size: var(--text-lg);
          }

          /* Mode tabs */
          .mode-tabs {
            flex-direction: column;
            gap: var(--space-1);
          }

          .mode-tab {
            flex-direction: row;
            justify-content: flex-start;
            padding: var(--space-3);
            min-height: 44px;
          }

          .mode-title {
            font-size: var(--text-sm);
          }

          .mode-description {
            display: none;
          }

          /* AR info */
          .ar-info {
            padding: var(--space-2) var(--space-3);
          }

          .ar-info-details {
            flex-direction: column;
            align-items: flex-start;
            gap: var(--space-1);
          }

          /* Finalize section */
          .finalize-section {
            padding: var(--space-3);
          }

          .finalize-button {
            padding: var(--space-3);
            font-size: var(--text-base);
          }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
          .inspire-panel-recraft {
            padding: var(--space-1);
          }

          .panel-header h2 {
            font-size: var(--text-lg);
          }

          /* Results section - even less padding */
          .results-section {
            padding: var(--space-1);
            margin: 0 calc(-1 * var(--space-1));
            border-radius: 0;
          }

          .input-mode-tab {
            padding: var(--space-2);
          }

          .mode-tab {
            padding: var(--space-2);
          }
        }
      `})]})}function f5e({isOpen:e,onClose:t}){const[n,r]=fe.useState(!1),[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),{addMotif:u}=rn(),h=Qm(),{currentDesignId:d,blendSvgUrl:p,solidSvgUrl:m,designName:g}=h,v=p||m,w=!!d;fe.useEffect(()=>{if(!e)return;const A=j=>{j.key==="Escape"&&t()};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e,t]),fe.useEffect(()=>{e||(o(!1),r(!1),s(!1))},[e]);const C=fe.useCallback((A,j)=>{console.log("[EDITOR] Design saved:",A,j),o(!1)},[]),x=async()=>{if(!(!d||i)){s(!0);try{const A=bx(h);await Xm({id:d,name:g||"Untitled Design",description:"",tags:[],design_data:A,input_mode:h.inputMode}),console.log("[EDITOR] Saved changes to design:",d),o(!0),setTimeout(()=>{t()},600)}catch(A){console.error("[EDITOR] Failed to save changes:",A),alert("Failed to save changes: "+A.message)}finally{s(!1)}}},k=async()=>{var A,j;if(!(!v||n)){r(!0);try{const{blendSvgUrl:I,solidSvgUrl:E,widthMM:U,lengthMM:D}=h;let R=null,X=null;if(E)try{R=await(await fetch(E)).text(),console.log("[EDITOR] Fetched solid SVG from blob:",R.length,"chars")}catch(Me){console.error("[EDITOR] Failed to fetch solid SVG:",Me)}if(I)try{X=await(await fetch(I)).text(),console.log("[EDITOR] Fetched blend SVG from blob:",X.length,"chars")}catch(Me){console.error("[EDITOR] Failed to fetch blend SVG:",Me)}if(!R&&!X)throw new Error("No SVG content available. Please ensure a design has been generated.");const ie=dw(R||X);let ge=U||5e3,H=D||5e3;if(ie){const Me=ie.width/ie.height;Me>1?(ge=Math.max(U||5e3,5e3),H=ge/Me):(H=Math.max(D||5e3,5e3),ge=H*Me),console.log("[EDITOR] Using SVG aspect ratio:",Me,"",ge,"x",H,"mm")}s(!0);let ye=d;const je=g||`Design ${new Date().toLocaleString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}`,ke=bx(h);ye=(await Xm({id:ye||void 0,name:je,description:"",tags:[],design_data:ke,input_mode:h.inputMode})).design_id,h.setCurrentDesignId(ye),h.setDesignName(je),s(!1);const xe=((A=h.result)==null?void 0:A.thumb_url)||((j=h.result)==null?void 0:j.png_url)||null;u(ye,je,R||X,ge,H,xe,{solidSvgContent:R,blendSvgContent:X,hasBothVersions:!!(R&&X)}),o(!0),setTimeout(()=>{t()},600)}catch(I){console.error("[EDITOR] Failed to add to canvas:",I),alert("Failed to add design to canvas: "+I.message),s(!1)}finally{r(!1)}}};return e?c.jsx("div",{className:"design-editor-overlay",children:c.jsxs("div",{className:"design-editor-modal",children:[c.jsxs("div",{className:"design-editor__header",children:[c.jsx("div",{className:"design-editor__title",children:c.jsx("h2",{children:"Design Editor"})}),c.jsx("div",{className:"design-editor__hint",children:"Generate a design with AI or upload your own SVG"}),c.jsx("button",{className:"design-editor__close",onClick:t,title:"Close (Esc)",children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:c.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),c.jsx("div",{className:"design-editor__content",children:c.jsx(d5e,{onDesignSaved:C,isEmbedded:!0})}),c.jsx("div",{className:`design-editor__footer ${a?"design-editor__footer--success":""}`,children:a?c.jsxs("div",{className:"design-editor__success",children:[c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})}),c.jsx("span",{children:"Added to canvas!"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"design-editor__status",children:v?w?c.jsxs("span",{className:"design-editor__saved-indicator",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M20 6L9 17l-5-5"})}),"Saved to library"]}):c.jsx("span",{className:"design-editor__unsaved-indicator",children:"Design ready  Will auto-save when added"}):c.jsx("span",{className:"design-editor__no-design",children:"Generate or upload a design to continue"})}),c.jsxs("div",{className:"design-editor__actions",children:[c.jsx("button",{className:"design-editor__btn design-editor__btn--secondary",onClick:t,children:"Cancel"}),w&&c.jsx("button",{className:"design-editor__btn design-editor__btn--secondary",onClick:x,disabled:!v||i,title:"Save changes to the source design without adding a new motif",children:i&&!n?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"design-editor__spinner"}),"Saving..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save Changes"]})}),c.jsx("button",{className:"design-editor__btn design-editor__btn--primary",onClick:k,disabled:!v||n,children:n?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"design-editor__spinner"}),i?"Saving...":"Adding..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),c.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add to Canvas"]})})]})]})})]})}):null}function p5e(){const{addShape:e,addText:t,addExclusionZone:n,standaloneMode:r,startPathDrawing:i}=rn(),[s,a]=fe.useState(!1);if(r)return null;const o=[{preset:"rectangle",icon:"",label:"Shape"},{preset:"blob",icon:"",label:"Blob"},{preset:"path",icon:"",label:"Pen"}],u=p=>{p==="path"?(i(),a(!1)):e(p)},h=()=>{t(),a(!1)},d=()=>{n("rectangle")};return c.jsxs("div",{className:`shape-toolbar ${s?"shape-toolbar--expanded":""}`,children:[c.jsxs("button",{className:"shape-toolbar__toggle",onClick:()=>a(!s),title:s?"Collapse elements panel":"Add elements",children:[c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),c.jsx("polyline",{points:"2 17 12 22 22 17"}),c.jsx("polyline",{points:"2 12 12 17 22 12"})]}),!s&&c.jsx("span",{className:"shape-toolbar__label",children:"Elements"})]}),s&&c.jsxs("div",{className:"shape-toolbar__shapes",children:[c.jsxs("button",{className:"shape-toolbar__btn shape-toolbar__btn--text",onClick:h,title:"Add Text Label",children:[c.jsx("span",{className:"shape-toolbar__icon",children:"T"}),c.jsx("span",{className:"shape-toolbar__name",children:"Text"})]}),c.jsx("div",{className:"shape-toolbar__divider"}),o.map(p=>c.jsxs("button",{className:"shape-toolbar__btn",onClick:()=>u(p.preset),title:`Add ${p.label}`,children:[c.jsx("span",{className:"shape-toolbar__icon",children:p.icon}),c.jsx("span",{className:"shape-toolbar__name",children:p.label})]},p.preset)),c.jsx("div",{className:"shape-toolbar__divider"}),c.jsxs("button",{className:"shape-toolbar__btn shape-toolbar__btn--exclusion",onClick:d,title:"Add Exclusion Zone (building, planter, obstacle)",children:[c.jsx("span",{className:"shape-toolbar__icon",style:{fontSize:"1rem"},children:""}),c.jsx("span",{className:"shape-toolbar__name",children:"Exclusion"})]})]})]})}function m5e({loadedDesign:e}){var V,ne,z,te,se,ue,re,be,Se,Pe,ze,we,$e,Be,Ye,Qe,Je,dt,pt,Tt,wt;const[t,n]=fe.useState(!1),[r,i]=fe.useState(()=>{const Ae=rn.getState().surface;return Ae!=null&&Ae.width_mm?String(Ae.width_mm/1e3):"50"}),[s,a]=fe.useState(()=>{const Ae=rn.getState().surface;return Ae!=null&&Ae.length_mm?String(Ae.length_mm/1e3):"50"}),[o,u]=fe.useState(!1),[h,d]=fe.useState(!1),[p,m]=fe.useState(!1),[g,v]=fe.useState(!1),[w,C]=fe.useState(!1),[x,k]=fe.useState(null),[A,j]=fe.useState(!1),[I,E]=fe.useState(null),[U,D]=fe.useState(""),[R,X]=fe.useState(!1),[ce,ie]=fe.useState(!1),ge=fe.useRef(null);fe.useEffect(()=>{if(e){const Ae=e.design_data||{},Ke=e.input_mode||Ae.input_mode||Ae.blend_recipes||Ae.solid_recipes,yt=Ae.courts||Ae.surface||Ae.tracks;if(console.log("[TPV] Design detection:",{id:e.id,name:e.name,hasDesignData:!!e.design_data,topLevelInputMode:e.input_mode,isPlaygroundDesign:Ke,isSportsDesign:yt}),Ke&&!yt){console.log("[TPV] Loading playground design into editor:",e.id,e.name);const At=vx(e),_t=Qm.getState();_t.loadDesign(At),e.name&&_t.setDesignName(e.name),_t.setCurrentDesignId(e.id),v(!0)}else e.design_data?(console.log("[SPORTS] Loading design from prop:",e.id,e.name),rn.getState().loadDesign(Ae),E(e.id),D(e.name||""),n(!1)):console.warn("[TPV] Design has no design_data and is not a playground design:",e.id,e.name)}},[e]);const{surface:H,courts:ye,tracks:je,selectedCourtId:ke,selectedTrackId:Fe,selectedMotifId:xe,selectedShapeId:Me,selectedTextId:_e,selectedGroupId:Ne,selectedElementIds:st,showCourtLibrary:nt,showPropertiesPanel:Ue,toggleCourtLibrary:ct,togglePropertiesPanel:he,setSurfaceDimensions:oe,setSurfaceColor:We,setSurfaceBoundaryPreset:Oe,resetSurfaceBoundary:ht,updateBoundaryParams:Pt,resetDesign:St,hasUnsavedChanges:G,standaloneMode:qe,toggleStandaloneMode:ae,groupSelected:M,ungroup:L,alignElements:J,distributeElements:pe,addShape:ve,addText:me,addExclusionZone:Le,startPathDrawing:Xe,pathDrawingMode:De,mobileLibraryOpen:l,mobilePropertiesOpen:f,mobileColoursOpen:b,mobileActiveTab:_,setMobileLibraryOpen:S,setMobilePropertiesOpen:P,setMobileColoursOpen:T,setMobileActiveTab:N,closeMobileSheets:$,isDirty:F,clearAutosaveTimer:q}=rn(),Q=Ae=>{Ae.preventDefault();const Ke=parseFloat(r)*1e3,yt=parseFloat(s)*1e3;Ke>0&&yt>0&&(oe(Ke,yt),n(!1))},K=Ae=>{We({tpv_code:Ae.code,hex:Ae.hex,name:Ae.name}),u(!1)},W=()=>{G()&&!window.confirm(`Start a new design?

You have unsaved changes that will be lost.`)||(St(),E(null),D(""),i("50"),a("50"))},Y=()=>{const Ae=ge.current||document.querySelector(".court-canvas__svg");if(!Ae){alert("Canvas not ready");return}const Ke=rn.getState().exportDesignData(),yt=pw(Ae,Ke),At=new Blob([yt],{type:"image/svg+xml"}),_t=URL.createObjectURL(At);x&&URL.revokeObjectURL(x),k(_t),C(!0)},B=()=>{C(!1),x&&(URL.revokeObjectURL(x),k(null))},Z=async Ae=>{if(!Ae){alert("Source design ID not found");return}try{const Ke=await wf(Ae),yt=(Ke==null?void 0:Ke.design)||Ke;if(!yt)throw new Error("Design not found");const At=vx(yt),_t=Qm.getState();_t.loadDesign(At),yt.name&&_t.setDesignName(yt.name),_t.setCurrentDesignId(Ae),v(!0),console.log("[TPV] Loaded source design for editing:",yt.name)}catch(Ke){console.error("[TPV] Failed to load source design:",Ke),alert("Failed to load design: "+Ke.message)}};return fe.useEffect(()=>{if(!R)return;const Ae=()=>{X(!1),ie(!1)};return document.addEventListener("click",Ae),()=>document.removeEventListener("click",Ae)},[R]),fe.useEffect(()=>{if(!ce)return;const Ae=()=>ie(!1);return document.addEventListener("click",Ae),()=>document.removeEventListener("click",Ae)},[ce]),fe.useEffect(()=>{const Ae=Ke=>{if(F)return Ke.preventDefault(),Ke.returnValue="You have unsaved changes.",Ke.returnValue};return window.addEventListener("beforeunload",Ae),()=>window.removeEventListener("beforeunload",Ae)},[F]),fe.useEffect(()=>()=>q(),[q]),fe.useEffect(()=>{const Ae=Ke=>{const yt=Ke.target.tagName.toLowerCase();if(yt==="input"||yt==="textarea"||yt==="select")return;const{removeCourt:At,removeTrack:_t,removeMotif:It,removeShape:jt,removeText:Dt,deselectCourt:Bt,deselectTrack:Mt,deselectMotif:tn,deselectShape:nn,deselectText:xn,stopEditingText:Cn,undo:vt,redo:En,canUndo:On,canRedo:wn,duplicateCourt:Sr,duplicateMotif:Nr,duplicateShape:cr,duplicateText:ur,updateCourtPosition:pr,updateTrackPosition:Lr,updateMotifPosition:Kr,updateShapePosition:$n,updateTextPosition:Jn,courts:yi,tracks:_i,motifs:Zr,shapes:bi,texts:Ni,selectedMotifId:hr,selectedShapeId:dr,selectedTextId:tr,editingTextId:Qr,elementOrder:Vr,setElementOrder:mr,toggleSnapToGrid:Qt,snapToGrid:Ir,addToHistory:bn}=rn.getState(),Vn=ke||Fe||hr||dr||tr;if((Ke.key==="Delete"||Ke.key==="Backspace")&&Vn&&!Qr&&(Ke.preventDefault(),ke?At(ke):Fe?_t(Fe):hr?It(hr):dr?jt(dr):tr&&Dt(tr)),Ke.key==="Escape"&&(Qr?Cn():Vn&&(ke?Bt():Fe?Mt():hr?tn():dr?nn():tr&&xn())),(Ke.ctrlKey||Ke.metaKey)&&Ke.key==="z"&&!Ke.shiftKey&&(Ke.preventDefault(),On()&&vt()),(Ke.ctrlKey||Ke.metaKey)&&Ke.key==="z"&&Ke.shiftKey&&(Ke.preventDefault(),wn()&&En()),(Ke.ctrlKey||Ke.metaKey)&&Ke.key==="d"&&Vn&&(Ke.preventDefault(),ke?Sr(ke):hr?Nr(hr):dr?cr(dr):tr&&ur(tr)),Vn&&!Qr&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(Ke.key)){Ke.preventDefault();const Tn=Ke.shiftKey?10:100;let Gn=0,Gr=0;if(Ke.key==="ArrowLeft"&&(Gn=-Tn),Ke.key==="ArrowRight"&&(Gn=Tn),Ke.key==="ArrowUp"&&(Gr=-Tn),Ke.key==="ArrowDown"&&(Gr=Tn),ke){const Yn=yi[ke];Yn&&(pr(ke,{x:Yn.position.x+Gn,y:Yn.position.y+Gr}),bn())}else if(Fe){const Yn=_i[Fe];Yn&&(Lr(Fe,{x:Yn.position.x+Gn,y:Yn.position.y+Gr}),bn())}else if(hr){const Yn=Zr[hr];Yn&&(Kr(hr,{x:Yn.position.x+Gn,y:Yn.position.y+Gr}),bn())}else if(dr){const Yn=bi[dr];Yn&&($n(dr,{x:Yn.position.x+Gn,y:Yn.position.y+Gr}),bn())}else if(tr){const Yn=Ni[tr];Yn&&(Jn(tr,{x:Yn.position.x+Gn,y:Yn.position.y+Gr}),bn())}}if(Vn&&(Ke.key==="["||Ke.key==="]")){Ke.preventDefault();const Tn=Vr.indexOf(Vn);if(Tn===-1)return;const Gn=[...Vr];Ke.key==="["&&Tn>0?([Gn[Tn],Gn[Tn-1]]=[Gn[Tn-1],Gn[Tn]],mr(Gn),bn()):Ke.key==="]"&&Tn<Vr.length-1&&([Gn[Tn],Gn[Tn+1]]=[Gn[Tn+1],Gn[Tn]],mr(Gn),bn())}(Ke.key==="g"||Ke.key==="G")&&(Ke.preventDefault(),Qt()),(Ke.key==="?"||Ke.shiftKey&&Ke.key==="/")&&(Ke.preventDefault(),m(!0))};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[ke,Fe,xe,Me,_e]),c.jsxs("div",{className:"sports-designer",children:[t&&c.jsx("div",{className:"sports-designer__modal-overlay",onClick:()=>n(!1),children:c.jsxs("div",{className:"sports-designer__modal",onClick:Ae=>Ae.stopPropagation(),children:[c.jsx("h2",{children:"Edit Surface Size"}),c.jsx("p",{children:"Adjust the dimensions of your sports surface"}),c.jsxs("form",{onSubmit:Q,children:[c.jsxs("div",{className:"sports-designer__dimension-inputs",children:[c.jsxs("div",{className:"sports-designer__input-group",children:[c.jsx("label",{htmlFor:"width",children:"Width (metres)"}),c.jsx("input",{id:"width",type:"number",min:"5",max:"100",step:"0.5",value:r,onChange:Ae=>i(Ae.target.value),required:!0,autoFocus:!0})]}),c.jsx("span",{className:"sports-designer__dimension-separator",children:""}),c.jsxs("div",{className:"sports-designer__input-group",children:[c.jsx("label",{htmlFor:"length",children:"Length (metres)"}),c.jsx("input",{id:"length",type:"number",min:"5",max:"100",step:"0.5",value:s,onChange:Ae=>a(Ae.target.value),required:!0})]})]}),c.jsx("p",{className:"sports-designer__dimension-hint",children:"Common sizes: 37m  34m (tennis), 40m  20m (futsal), 50m  50m (multi-sport)"}),c.jsxs("div",{className:"sports-designer__boundary-section",children:[c.jsx("label",{htmlFor:"boundary-shape",children:"Surface Shape"}),c.jsxs("div",{className:"sports-designer__boundary-options",children:[c.jsxs("select",{id:"boundary-shape",value:((V=H.boundary)==null?void 0:V.type)||"rectangle",onChange:Ae=>{const Ke=Ae.target.value;Ke==="rectangle"?ht():Oe(Ke)},className:"sports-designer__select",children:[c.jsx("option",{value:"rectangle",children:"Rectangle (default)"}),c.jsx("option",{value:"l-shape",children:"L-Shape"}),c.jsx("option",{value:"u-shape",children:"U-Shape"}),c.jsx("option",{value:"t-shape",children:"T-Shape"})]}),((ne=H.boundary)==null?void 0:ne.type)&&H.boundary.type!=="rectangle"&&c.jsx("button",{type:"button",className:"sports-designer__btn-secondary",onClick:ht,title:"Reset to rectangle",children:"Reset"})]}),((z=H.boundary)==null?void 0:z.type)==="l-shape"&&c.jsxs("div",{className:"sports-designer__boundary-params",children:[c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Cut Width: ",Math.round((((te=H.boundary.params)==null?void 0:te.cutWidth)||.6)*100),"%"]}),c.jsx("input",{type:"range",min:"20",max:"80",value:(((se=H.boundary.params)==null?void 0:se.cutWidth)||.6)*100,onChange:Ae=>Pt({cutWidth:parseInt(Ae.target.value)/100})})]}),c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Cut Height: ",Math.round((((ue=H.boundary.params)==null?void 0:ue.cutHeight)||.4)*100),"%"]}),c.jsx("input",{type:"range",min:"20",max:"80",value:(((re=H.boundary.params)==null?void 0:re.cutHeight)||.4)*100,onChange:Ae=>Pt({cutHeight:parseInt(Ae.target.value)/100})})]})]}),((be=H.boundary)==null?void 0:be.type)==="u-shape"&&c.jsxs("div",{className:"sports-designer__boundary-params",children:[c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Cut Start: ",Math.round((((Se=H.boundary.params)==null?void 0:Se.cutStart)||.35)*100),"%"]}),c.jsx("input",{type:"range",min:"10",max:"45",value:(((Pe=H.boundary.params)==null?void 0:Pe.cutStart)||.35)*100,onChange:Ae=>Pt({cutStart:parseInt(Ae.target.value)/100})})]}),c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Cut End: ",Math.round((((ze=H.boundary.params)==null?void 0:ze.cutEnd)||.65)*100),"%"]}),c.jsx("input",{type:"range",min:"55",max:"90",value:(((we=H.boundary.params)==null?void 0:we.cutEnd)||.65)*100,onChange:Ae=>Pt({cutEnd:parseInt(Ae.target.value)/100})})]}),c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Cut Height: ",Math.round(((($e=H.boundary.params)==null?void 0:$e.cutHeight)||.4)*100),"%"]}),c.jsx("input",{type:"range",min:"20",max:"80",value:(((Be=H.boundary.params)==null?void 0:Be.cutHeight)||.4)*100,onChange:Ae=>Pt({cutHeight:parseInt(Ae.target.value)/100})})]})]}),((Ye=H.boundary)==null?void 0:Ye.type)==="t-shape"&&c.jsxs("div",{className:"sports-designer__boundary-params",children:[c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Stem Start: ",Math.round((((Qe=H.boundary.params)==null?void 0:Qe.stemStart)||.3)*100),"%"]}),c.jsx("input",{type:"range",min:"10",max:"45",value:(((Je=H.boundary.params)==null?void 0:Je.stemStart)||.3)*100,onChange:Ae=>Pt({stemStart:parseInt(Ae.target.value)/100})})]}),c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Stem End: ",Math.round((((dt=H.boundary.params)==null?void 0:dt.stemEnd)||.7)*100),"%"]}),c.jsx("input",{type:"range",min:"55",max:"90",value:(((pt=H.boundary.params)==null?void 0:pt.stemEnd)||.7)*100,onChange:Ae=>Pt({stemEnd:parseInt(Ae.target.value)/100})})]}),c.jsxs("div",{className:"sports-designer__param-row",children:[c.jsxs("label",{children:["Bar Height: ",Math.round((((Tt=H.boundary.params)==null?void 0:Tt.stemHeight)||.4)*100),"%"]}),c.jsx("input",{type:"range",min:"20",max:"80",value:(((wt=H.boundary.params)==null?void 0:wt.stemHeight)||.4)*100,onChange:Ae=>Pt({stemHeight:parseInt(Ae.target.value)/100})})]})]}),c.jsx("p",{className:"sports-designer__boundary-hint",children:"Non-rectangular shapes are useful for L-shaped buildings or irregular sites"})]}),c.jsx("button",{type:"submit",className:"sports-designer__btn-primary",children:"Update Surface"})]})]})}),c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"sports-designer__mobile-header",children:[c.jsx("span",{className:"sports-designer__mobile-header-title",children:"TPV Designer"}),c.jsxs("div",{className:"sports-designer__mobile-header-actions",children:[c.jsx("button",{className:"sports-designer__mobile-header-btn",onClick:()=>{i(String(H.width_mm/1e3)),a(String(H.length_mm/1e3)),n(!0)},title:"Surface settings",children:c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"3"}),c.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})}),c.jsx(AS,{svgRef:ge,mobileMode:!0})]})]}),c.jsxs("nav",{className:"sports-designer__mobile-action-bar",children:[c.jsxs("button",{className:`sports-designer__mobile-action-btn ${l?"sports-designer__mobile-action-btn--active":""}`,onClick:()=>{$(),S(!0)},children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),c.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),c.jsx("span",{children:"Add"})]}),c.jsxs("button",{className:"sports-designer__mobile-action-btn",onClick:()=>{$(),T(!0)},children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),c.jsx("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),c.jsx("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),c.jsx("circle",{cx:"6.5",cy:"12.5",r:"2.5"})]}),c.jsx("span",{children:"Colours"})]}),c.jsxs("button",{className:`sports-designer__mobile-action-btn ${ke||Fe||xe||Me||_e?"":"sports-designer__mobile-action-btn--disabled"}`,onClick:()=>{(ke||Fe||xe||Me||_e)&&($(),P(!0))},disabled:!ke&&!Fe&&!xe&&!Me&&!_e,children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),c.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),c.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),c.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),c.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),c.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),c.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),c.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),c.jsx("span",{children:"Properties"})]}),c.jsxs("button",{className:"sports-designer__mobile-action-btn",onClick:()=>d(!0),children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),c.jsx("span",{children:"Save"})]})]}),c.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${l?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>S(!1)}),c.jsxs("div",{className:`sports-designer__bottom-sheet ${l?"sports-designer__bottom-sheet--open":""}`,children:[c.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),c.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[c.jsx("h3",{children:"Add Element"}),c.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>S(!1),children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsxs("div",{className:"sports-designer__mobile-tabs",children:[c.jsx("button",{className:`sports-designer__mobile-tab ${_==="courts"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("courts"),children:"Courts"}),c.jsx("button",{className:`sports-designer__mobile-tab ${_==="tracks"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("tracks"),children:"Tracks"}),c.jsx("button",{className:`sports-designer__mobile-tab ${_==="shapes"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("shapes"),children:"Shapes"}),c.jsx("button",{className:`sports-designer__mobile-tab ${_==="designs"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("designs"),children:"Designs"})]}),c.jsx("div",{className:"sports-designer__bottom-sheet-content",children:c.jsx(sN,{mobileMode:!0,activeTab:_,onItemAdded:()=>S(!1),onOpenGenerator:()=>{S(!1),v(!0)}})})]}),c.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${b?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>T(!1)}),c.jsxs("div",{className:`sports-designer__bottom-sheet ${b?"sports-designer__bottom-sheet--open":""}`,children:[c.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),c.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[c.jsx("h3",{children:"Surface Colour"}),c.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>T(!1),children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsx("div",{className:"sports-designer__bottom-sheet-content",children:c.jsx("div",{className:"sports-designer__color-grid",children:pi.map(Ae=>c.jsx("button",{className:`sports-designer__color-swatch ${H.color.tpv_code===Ae.code?"sports-designer__color-swatch--selected":""}`,style:{backgroundColor:Ae.hex},onClick:()=>{K(Ae),T(!1)},title:`${Ae.code} - ${Ae.name}`,children:c.jsx("span",{className:"sports-designer__color-code",children:Ae.code})},Ae.code))})})]}),c.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${f?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>P(!1)}),c.jsxs("div",{className:`sports-designer__bottom-sheet ${f?"sports-designer__bottom-sheet--open":""}`,children:[c.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),c.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[c.jsx("h3",{children:"Properties"}),c.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>P(!1),children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsx("div",{className:"sports-designer__bottom-sheet-content",children:(ke||Fe||xe||Me||_e)&&c.jsx(bS,{mobileMode:!0,onEditSourceDesign:Z})})]}),c.jsxs("div",{className:"sports-designer__content",children:[!qe&&c.jsxs("aside",{className:`sports-designer__sidebar ${nt?"":"sports-designer__sidebar--collapsed"}`,children:[c.jsxs("div",{className:"sidebar-content",children:[c.jsx("div",{className:"sidebar-add-element",children:c.jsxs("button",{className:"sidebar-add-element__btn",onClick:()=>j(!0),children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),c.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add Courts & Designs"]})}),c.jsx(_9,{})]}),c.jsx("button",{className:"sidebar-toggle sidebar-toggle--left",onClick:ct,title:nt?"Collapse panel":"Expand panel",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:nt?c.jsx("polyline",{points:"15 18 9 12 15 6"}):c.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),c.jsxs("main",{className:"sports-designer__canvas-container",children:[c.jsxs("div",{className:"sports-toolbar",children:[c.jsxs("div",{className:"sports-toolbar__group",children:[c.jsx("button",{className:`sports-toolbar__btn ${nt?"sports-toolbar__btn--active":""}`,onClick:ct,title:"Element Library",disabled:qe,children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),c.jsx("button",{className:`sports-toolbar__btn ${Ue&&(ke||Fe||xe||Me||_e)?"sports-toolbar__btn--active":""}`,onClick:he,title:"Properties",disabled:!ke&&!Fe&&!xe&&!Me&&!_e||qe,children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),c.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),c.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),c.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),c.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),c.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),c.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),c.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})})]}),c.jsx("div",{className:"sports-toolbar__divider"}),c.jsxs("div",{className:"sports-toolbar__group",style:{position:"relative"},children:[c.jsxs("button",{className:`sports-toolbar__btn sports-toolbar__btn--with-label ${ce?"sports-toolbar__btn--active":""}`,onClick:Ae=>{Ae.stopPropagation(),ie(!ce)},title:"Add Elements",children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),c.jsx("polyline",{points:"2 17 12 22 22 17"}),c.jsx("polyline",{points:"2 12 12 17 22 12"})]}),c.jsx("span",{children:"Elements"}),c.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:c.jsx("path",{d:"M6 9l6 6 6-6"})})]}),ce&&c.jsxs("div",{className:"sports-toolbar__dropdown-menu",onClick:Ae=>Ae.stopPropagation(),children:[c.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{me(),ie(!1)},children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 7V4h16v3"}),c.jsx("path",{d:"M12 4v16"}),c.jsx("path",{d:"M8 20h8"})]}),c.jsx("span",{children:"Text"}),c.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"T"})]}),c.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ve("rectangle"),ie(!1)},children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})}),c.jsx("span",{children:"Shape"}),c.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"S"})]}),c.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ve("blob"),ie(!1)},children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M12 3c-4 0-7 3-8 6s0 6 2 8c2 2 5 3 8 2s5-3 6-6-1-6-3-8c-1-1-3-2-5-2z"})}),c.jsx("span",{children:"Blob"}),c.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"B"})]}),c.jsxs("button",{className:`sports-toolbar__dropdown-item ${De?"sports-toolbar__dropdown-item--active":""}`,onClick:()=>{Xe(),ie(!1)},children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),c.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),c.jsx("path",{d:"M2 2l7.586 7.586"})]}),c.jsx("span",{children:"Pen"}),c.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"P"})]}),c.jsx("div",{className:"sports-toolbar__dropdown-divider"}),c.jsxs("button",{className:"sports-toolbar__dropdown-item sports-toolbar__dropdown-item--exclusion",onClick:()=>{Le("rectangle"),ie(!1)},children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"})]}),c.jsx("span",{children:"Exclusion Zone"}),c.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"E"})]})]})]}),c.jsx("div",{className:"sports-toolbar__divider"}),c.jsxs("div",{className:"sports-toolbar__group",children:[c.jsxs("button",{className:"sports-toolbar__dimensions",onClick:()=>{i(String(H.width_mm/1e3)),a(String(H.length_mm/1e3)),n(!0)},title:"Click to edit surface size",children:[(H.width_mm/1e3).toFixed(0),"m  ",(H.length_mm/1e3).toFixed(0),"m"]}),c.jsx("button",{className:"sports-toolbar__color-swatch",style:{backgroundColor:H.color.hex},onClick:()=>u(!0),title:`${H.color.name} (${H.color.tpv_code}) - Click to change`})]}),c.jsx("div",{className:"sports-toolbar__divider"}),c.jsxs("div",{className:"sports-toolbar__group",children:[c.jsx("button",{className:"sports-toolbar__btn",disabled:!rn.getState().canUndo(),onClick:()=>rn.getState().undo(),title:"Undo (Ctrl+Z)",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M3 7v6h6"}),c.jsx("path",{d:"M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"})]})}),c.jsx("button",{className:"sports-toolbar__btn",disabled:!rn.getState().canRedo(),onClick:()=>rn.getState().redo(),title:"Redo (Ctrl+Shift+Z)",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 7v6h-6"}),c.jsx("path",{d:"M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"})]})})]}),(st.length>=2||Ne)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"sports-toolbar__divider"}),c.jsxs("div",{className:"sports-toolbar__group",children:[st.length>=2&&c.jsx("button",{className:"sports-toolbar__btn",onClick:M,title:"Group selected elements (Cmd+G)",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),c.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),c.jsx("path",{d:"M10 7h4"}),c.jsx("path",{d:"M10 17h4"}),c.jsx("path",{d:"M7 10v4"}),c.jsx("path",{d:"M17 10v4"})]})}),Ne&&c.jsx("button",{className:"sports-toolbar__btn",onClick:()=>L(Ne),title:"Ungroup (Cmd+Shift+G)",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),c.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),c.jsx("path",{d:"M10 7h4",strokeDasharray:"2 2"}),c.jsx("path",{d:"M10 17h4",strokeDasharray:"2 2"}),c.jsx("path",{d:"M7 10v4",strokeDasharray:"2 2"}),c.jsx("path",{d:"M17 10v4",strokeDasharray:"2 2"})]})})]}),st.length>=2&&c.jsxs("div",{className:"sports-toolbar__align-dropdown",style:{position:"relative"},children:[c.jsx("button",{className:`sports-toolbar__btn ${R?"sports-toolbar__btn--active":""}`,onClick:Ae=>{Ae.stopPropagation(),X(!R)},title:"Align elements",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),c.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),c.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),c.jsx("line",{x1:"21",y1:"18",x2:"3",y2:"18"})]})}),R&&c.jsxs("div",{className:"sports-toolbar__align-menu",style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"8px",zIndex:100,minWidth:"120px"},onClick:Ae=>Ae.stopPropagation(),children:[c.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Align"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{J("left"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Left"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{J("center"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Center"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{J("right"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Right"}),c.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{J("top"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Top"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{J("middle"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Middle"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{J("bottom"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Bottom"}),st.length>=3&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),c.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Distribute"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("horizontal"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Horizontal"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("vertical"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Vertical"}),c.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),c.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Distribute Centres"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("center-horizontal"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Centres H"}),c.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("center-vertical"),X(!1)},onMouseOver:Ae=>Ae.currentTarget.style.background="#f1f5f9",onMouseOut:Ae=>Ae.currentTarget.style.background="transparent",children:" Centres V"})]})]})]})]}),c.jsx("div",{className:"sports-toolbar__divider"}),c.jsxs("div",{className:"sports-toolbar__group",children:[c.jsx("button",{className:"sports-toolbar__btn",onClick:W,title:"Start new design",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),c.jsx("polyline",{points:"14 2 14 8 20 8"}),c.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),c.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),c.jsx("button",{className:"sports-toolbar__btn",onClick:Y,title:"View In-Situ Preview",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),c.jsx("button",{className:"sports-toolbar__btn",onClick:()=>m(!0),title:"Keyboard shortcuts (?)",children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),c.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),c.jsx("button",{className:"sports-toolbar__btn-primary",onClick:()=>d(!0),children:"Save"}),c.jsx(AS,{svgRef:ge})]})]}),c.jsx(YF,{ref:ge}),c.jsx(p5e,{})]}),(ke||Fe||xe||Me||_e)&&!qe&&c.jsxs("aside",{className:`sports-designer__properties ${Ue?"":"sports-designer__properties--collapsed"}`,children:[c.jsx("button",{className:"sidebar-toggle sidebar-toggle--right",onClick:he,title:Ue?"Collapse properties":"Expand properties",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Ue?c.jsx("polyline",{points:"9 18 15 12 9 6"}):c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsx("div",{className:"sidebar-content",children:c.jsx(bS,{onEditSourceDesign:Z})})]})]}),o&&c.jsx("div",{className:"sports-designer__color-modal-overlay",onClick:()=>u(!1),children:c.jsxs("div",{className:"sports-designer__color-modal",onClick:Ae=>Ae.stopPropagation(),children:[c.jsxs("div",{className:"sports-designer__color-modal-header",children:[c.jsx("h4",{children:"Select Surface Colour"}),c.jsx("button",{onClick:()=>u(!1),children:""})]}),c.jsx("div",{className:"sports-designer__color-grid",children:pi.map(Ae=>c.jsx("button",{className:`sports-designer__color-swatch ${H.color.tpv_code===Ae.code?"sports-designer__color-swatch--selected":""}`,style:{backgroundColor:Ae.hex},onClick:()=>K(Ae),title:`${Ae.code} - ${Ae.name}`,children:c.jsx("span",{className:"sports-designer__color-code",children:Ae.code})},Ae.code))})]})}),h&&c.jsx(R9,{existingDesignId:I,initialName:U,svgRef:ge,onClose:()=>d(!1),onSaved:(Ae,Ke)=>{E(Ae.design_id),D(Ke),console.log("[SPORTS] Design saved:",Ae.design_id)}}),c.jsx(JB,{isOpen:p,onClose:()=>m(!1)}),c.jsx(m9,{isOpen:A,onClose:()=>j(!1),onOpenGenerator:()=>v(!0)}),c.jsx(f5e,{isOpen:g,onClose:()=>v(!1)}),w&&x&&c.jsx(IO,{designUrl:x,designDimensions:{width:H.width_mm,length:H.length_mm},onClose:B,onSaved:Ae=>{console.log("[TPV] In-situ preview saved:",Ae),B()}})]})]})}function g5e({onShowDesigns:e,onShowAdmin:t,isAdmin:n,currentDesignName:r}){const[i,s]=fe.useState(!1),a=async()=>{confirm("Sign out?")&&(await xa.signOut(),window.location.reload())};return c.jsx("header",{className:"studio-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{className:"studio-title",children:"TPV Designer"}),r&&c.jsxs("span",{className:"current-design-indicator",children:[c.jsx("svg",{width:"4",height:"4",viewBox:"0 0 4 4",children:c.jsx("circle",{cx:"2",cy:"2",r:"2",fill:"currentColor"})}),r]})]}),c.jsxs("div",{className:"header-right",children:[c.jsxs("button",{onClick:e,className:"btn-my-designs",children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),c.jsx("path",{d:"M9 22V12h6v10"})]}),"My Designs"]}),n&&c.jsxs("button",{onClick:t,className:"btn-admin",children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),c.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]}),"Admin"]}),c.jsxs("div",{className:"user-menu",children:[c.jsx("button",{onClick:()=>s(!i),className:"user-menu-button",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"user-menu-backdrop",onClick:()=>s(!1)}),c.jsx("div",{className:"user-menu-dropdown",children:c.jsxs("button",{onClick:a,className:"menu-item sign-out",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})}),"Sign Out"]})})]})]})]})]})})}function y5e({design:e,onLoad:t,onDelete:n,onUpdateMetadata:r}){var v;const[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),u=async()=>{if(confirm(`Delete "${e.name}"? This cannot be undone.`)){o(!0);try{await n(e.id)}catch(w){console.error("Failed to delete design:",w),alert(`Failed to delete: ${w.message}`),o(!1)}}},h=w=>{const C=new Date(w),x=new Date,k=x-C,A=Math.floor(k/(1e3*60*60*24));return A===0?"Today":A===1?"Yesterday":A<7?`${A} days ago`:A<30?`${Math.floor(A/7)} weeks ago`:C.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:C.getFullYear()!==x.getFullYear()?"numeric":void 0})},d=e.input_mode==="sports_surface"||((v=e.design_data)==null?void 0:v.type)==="sports_surface",p=e.thumbnail_url||e.original_png_url||e.original_svg_url,g=d?{label:"Surface",icon:"",className:"type-surface"}:{label:"Motif",icon:"",className:"type-motif"};return c.jsxs("div",{className:`design-card ${a?"deleting":""}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[c.jsxs("div",{className:`design-type-badge ${g.className}`,children:[c.jsx("span",{className:"type-icon",children:g.icon}),c.jsx("span",{className:"type-label",children:g.label})]}),c.jsxs("div",{className:"card-thumbnail",onClick:()=>t(e.id),children:[p?c.jsx("img",{src:p,alt:e.name}):c.jsx("div",{className:"no-thumbnail",children:c.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),i&&c.jsx("div",{className:"thumbnail-overlay",children:c.jsx("button",{className:"btn-load",children:"Open"})})]}),c.jsxs("div",{className:"card-info",children:[c.jsx("h3",{className:"design-name",title:e.name,children:e.name}),e.description&&c.jsx("p",{className:"design-description",title:e.description,children:e.description}),c.jsxs("div",{className:"card-meta",children:[e.projects&&c.jsx("span",{className:"project-badge",style:{backgroundColor:e.projects.color||"#1a365d"},title:e.projects.name,children:e.projects.name}),c.jsx("span",{className:"design-date",title:new Date(e.updated_at).toLocaleString(),children:h(e.updated_at)})]}),e.tags&&e.tags.length>0&&c.jsxs("div",{className:"design-tags",children:[e.tags.slice(0,3).map((w,C)=>c.jsx("span",{className:"tag",children:w},C)),e.tags.length>3&&c.jsxs("span",{className:"tag more",children:["+",e.tags.length-3]})]})]}),i&&!a&&c.jsxs("div",{className:"card-actions",children:[c.jsx("button",{onClick:()=>t(e.id),className:"action-btn load-btn",title:"Load design",children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),c.jsx("button",{onClick:u,className:"action-btn delete-btn",title:"Delete design",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),a&&c.jsx("div",{className:"deleting-overlay",children:c.jsx("div",{className:"spinner"})})]})}function b5e({onClose:e,onLoadDesign:t}){const[n,r]=fe.useState([]),[i,s]=fe.useState([]),[a,o]=fe.useState(!0),[u,h]=fe.useState(null),[d,p]=fe.useState(""),[m,g]=fe.useState(""),[v,w]=fe.useState(!1),[C,x]=fe.useState(!1);fe.useEffect(()=>{k()},[d,m]);const k=async()=>{o(!0),h(null);try{const[E,U]=await Promise.all([fw(),Km({project_id:d||void 0,search:m||void 0,limit:12,offset:0})]);s(E.projects),r(U.designs),w(U.pagination.has_more)}catch(E){console.error("Failed to load designs:",E),h(E.message)}finally{o(!1)}},A=async()=>{if(!(C||!v)){x(!0);try{const E=await Km({project_id:d||void 0,search:m||void 0,limit:12,offset:n.length});r([...n,...E.designs]),w(E.pagination.has_more)}catch(E){console.error("Failed to load more designs:",E),h(E.message)}finally{x(!1)}}},j=async E=>{try{const{design:U}=await wf(E);t(U),e()}catch(U){console.error("Failed to load design:",U),alert(`Failed to load design: ${U.message}`)}},I=async E=>{try{await Dz(E),r(n.filter(U=>U.id!==E))}catch(U){throw console.error("Failed to delete design:",U),U}};return c.jsx("div",{className:"modal-overlay",onClick:e,children:c.jsxs("div",{className:"modal-content design-gallery-modal",onClick:E=>E.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"My Designs"}),c.jsx("button",{onClick:e,className:"close-button",children:""})]}),c.jsxs("div",{className:"gallery-filters",children:[c.jsx("div",{className:"filter-group",children:c.jsx("input",{type:"text",placeholder:"Search designs...",value:m,onChange:E=>g(E.target.value),className:"search-input"})}),c.jsx("div",{className:"filter-group",children:c.jsxs("select",{value:d,onChange:E=>p(E.target.value),className:"project-filter",children:[c.jsx("option",{value:"",children:"All Projects"}),i.map(E=>c.jsxs("option",{value:E.id,children:[E.name," (",E.design_count,")"]},E.id))]})})]}),c.jsxs("div",{className:"modal-body",children:[u&&c.jsxs("div",{className:"error-message",children:[u,c.jsx("button",{onClick:k,className:"btn-retry",children:"Retry"})]}),a?c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"spinner-large"}),c.jsx("p",{children:"Loading your designs..."})]}):n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),c.jsx("path",{d:"M17 21v-8H7v8M7 3v5h8"})]}),c.jsx("h3",{children:"No designs yet"}),c.jsx("p",{children:m||d?"No designs match your filters. Try adjusting your search.":"Create your first design to see it here!"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"designs-grid",children:n.map(E=>c.jsx(y5e,{design:E,onLoad:j,onDelete:I},E.id))}),v&&c.jsx("div",{className:"load-more-section",children:c.jsx("button",{onClick:A,className:"btn-load-more",disabled:C,children:C?"Loading...":"Load More"})})]})]})]})})}function v5e(){const[e,t]=fe.useState([]),[n,r]=fe.useState(0),[i,s]=fe.useState(!1),[a,o]=fe.useState(null),[u,h]=fe.useState("all"),[d,p]=fe.useState("all"),[m,g]=fe.useState(""),[v,w]=fe.useState(0),C=50,x=async()=>{var D,R;const E=await hi.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(R=(D=E==null?void 0:E.data)==null?void 0:D.session)==null?void 0:R.access_token}`}},k=async()=>{s(!0),o(null);try{const E=await x(),U=new URLSearchParams({limit:C.toString(),offset:v.toString()});u!=="all"&&U.append("status",u),d!=="all"&&U.append("saved_status",d),m&&U.append("search",m);const D=await fetch(`/api/admin/jobs?${U.toString()}`,{headers:E}),R=await D.json();if(!D.ok)throw new Error(R.error||"Failed to fetch jobs");t(R.jobs),r(R.total)}catch(E){console.error("Failed to fetch jobs:",E),o(E.message)}finally{s(!1)}};fe.useEffect(()=>{k()},[u,d,m,v]);const A=e.filter(E=>E.status==="completed").length,j=e.filter(E=>!E.is_saved&&E.status==="completed").length,I=e.filter(E=>E.is_saved).length;return c.jsxs("div",{className:"generations-tab",children:[c.jsxs("div",{className:"admin-stats-grid",children:[c.jsxs("div",{className:"admin-stat-card",children:[c.jsx("h3",{children:"Total Generations"}),c.jsx("p",{className:"stat-value",children:n}),c.jsx("span",{className:"stat-label",children:"All time"})]}),c.jsxs("div",{className:"admin-stat-card",children:[c.jsx("h3",{children:"Completed"}),c.jsx("p",{className:"stat-value",children:A}),c.jsx("span",{className:"stat-label",children:"Current page"})]}),c.jsxs("div",{className:"admin-stat-card success",children:[c.jsx("h3",{children:"Saved"}),c.jsx("p",{className:"stat-value",children:I}),c.jsx("span",{className:"stat-label",children:" Linked to designs"})]}),c.jsxs("div",{className:"admin-stat-card warning",children:[c.jsx("h3",{children:"Orphaned"}),c.jsx("p",{className:"stat-value",children:j}),c.jsx("span",{className:"stat-label",children:" Not saved"})]})]}),c.jsxs("div",{className:"admin-filters",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Status:"}),c.jsxs("select",{value:u,onChange:E=>h(E.target.value),children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"failed",children:"Failed"}),c.jsx("option",{value:"running",children:"Running"}),c.jsx("option",{value:"queued",children:"Queued"})]})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Saved:"}),c.jsxs("select",{value:d,onChange:E=>p(E.target.value),children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"saved",children:"Saved only"}),c.jsx("option",{value:"orphaned",children:"Orphaned only"})]})]}),c.jsxs("div",{className:"filter-group search",children:[c.jsx("label",{children:"Search prompt:"}),c.jsx("input",{type:"text",placeholder:"Search in prompts...",value:m,onChange:E=>g(E.target.value)})]})]}),i&&c.jsxs("div",{className:"admin-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading jobs..."})]}),a&&c.jsx("div",{className:"admin-error",children:c.jsxs("p",{children:["Error: ",a]})}),!i&&e.length>0&&c.jsx("div",{className:"jobs-table-container",children:c.jsxs("table",{className:"jobs-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Thumbnail"}),c.jsx("th",{children:"Prompt"}),c.jsx("th",{children:"Dimensions"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Saved"}),c.jsx("th",{children:"User"}),c.jsx("th",{children:"Created"})]})}),c.jsx("tbody",{children:e.map(E=>c.jsxs("tr",{className:`job-row ${E.is_saved?"saved":"orphaned"} ${E.status}`,children:[c.jsx("td",{className:"thumbnail-cell",children:E.thumbnail_url?c.jsx("img",{src:E.thumbnail_url,alt:"Design",className:"job-thumbnail"}):c.jsx("div",{className:"thumbnail-placeholder",children:"No image"})}),c.jsx("td",{className:"prompt-cell",children:c.jsx("div",{className:"prompt-text",title:E.prompt,children:E.prompt||c.jsx("em",{children:"No prompt"})})}),c.jsx("td",{className:"dimensions-cell",children:E.width_mm&&E.length_mm?c.jsxs("span",{children:[E.width_mm,"  ",E.length_mm," mm"]}):c.jsx("em",{children:"N/A"})}),c.jsx("td",{className:"status-cell",children:c.jsx("span",{className:`status-badge ${E.status}`,children:E.status})}),c.jsx("td",{className:"saved-cell",children:E.is_saved?c.jsx("span",{className:"saved-badge",children:" Saved"}):c.jsx("span",{className:"orphaned-badge",children:" Orphaned"})}),c.jsx("td",{className:"user-cell",children:E.user_email}),c.jsx("td",{className:"date-cell",children:new Date(E.created_at).toLocaleDateString()})]},E.id))})]})}),!i&&e.length===0&&c.jsx("div",{className:"admin-empty",children:c.jsx("p",{children:"No jobs found matching your filters."})}),n>C&&c.jsxs("div",{className:"admin-pagination",children:[c.jsx("button",{onClick:()=>w(Math.max(0,v-C)),disabled:v===0,children:"Previous"}),c.jsxs("span",{children:["Showing ",v+1," to ",Math.min(v+C,n)," of ",n]}),c.jsx("button",{onClick:()=>w(v+C),disabled:v+C>=n,children:"Next"})]}),c.jsx("style",{children:`
        .jobs-table-container {
          overflow-x: auto;
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .jobs-table {
          width: 100%;
          border-collapse: collapse;
        }

        .jobs-table th {
          background: #f9fafb;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          font-size: 0.875rem;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .jobs-table td {
          padding: 1rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .job-row.saved {
          background: rgba(16, 185, 129, 0.03);
        }

        .job-row.orphaned {
          background: rgba(245, 158, 11, 0.03);
        }

        .thumbnail-cell {
          width: 80px;
        }

        .job-thumbnail {
          width: 64px;
          height: 64px;
          object-fit: cover;
          border-radius: 4px;
        }

        .thumbnail-placeholder {
          width: 64px;
          height: 64px;
          background: #f3f4f6;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 0.75rem;
          color: #9ca3af;
        }

        .prompt-cell {
          max-width: 300px;
        }

        .prompt-text {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .status-badge.completed {
          background: #d1fae5;
          color: #065f46;
        }

        .status-badge.failed {
          background: #fee2e2;
          color: #991b1b;
        }

        .status-badge.running {
          background: #dbeafe;
          color: #1e40af;
        }

        .status-badge.queued {
          background: #e0e7ff;
          color: #3730a3;
        }

        .saved-badge {
          color: #059669;
          font-weight: 500;
        }

        .orphaned-badge {
          color: #d97706;
          font-weight: 500;
        }

        .user-cell {
          font-size: 0.875rem;
          color: #6b7280;
        }

        .date-cell {
          font-size: 0.875rem;
          color: #6b7280;
          white-space: nowrap;
        }

        .admin-stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 1.5rem;
          margin-bottom: 2rem;
        }

        .admin-stat-card {
          background: white;
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .admin-stat-card h3 {
          font-size: 0.875rem;
          color: #64748b;
          margin-bottom: 0.5rem;
          font-weight: 500;
        }

        .admin-stat-card .value {
          font-size: 2rem;
          font-weight: 700;
          color: #1e293b;
        }

        .admin-stat-card.success {
          border-left: 4px solid #10b981;
        }

        .admin-stat-card.warning {
          border-left: 4px solid #f59e0b;
        }

        .admin-filters {
          display: flex;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          align-items: center;
        }

        .admin-pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 0.5rem;
          margin-top: 1.5rem;
          padding: 1rem 0;
        }

        .admin-empty {
          text-align: center;
          padding: 3rem;
          color: #64748b;
        }
      `})]})}function x5e(){const[e,t]=fe.useState([]),[n,r]=fe.useState(null),[i,s]=fe.useState(!1),[a,o]=fe.useState(null),[u,h]=fe.useState(!1),[d,p]=fe.useState(new Set),[m,g]=fe.useState("all"),v=async()=>{var E,U;const j=await hi.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(U=(E=j==null?void 0:j.data)==null?void 0:E.session)==null?void 0:U.access_token}`}},w=async()=>{s(!0),o(null);try{const j=await v(),I=new URLSearchParams;m!=="all"&&I.append("age_filter",m);const E=await fetch(`/api/admin/recovery/orphaned?${I.toString()}`,{headers:j}),U=await E.json();if(!E.ok)throw new Error(U.error||"Failed to fetch orphaned jobs");t(U.orphaned_jobs),r(U.age_buckets)}catch(j){console.error("Failed to fetch orphaned jobs:",j),o(j.message)}finally{s(!1)}};fe.useEffect(()=>{w()},[m]);const C=j=>{const I=new Set(d);I.has(j)?I.delete(j):I.add(j),p(I)},x=()=>{p(new Set(e.map(j=>j.id)))},k=()=>{p(new Set)},A=async()=>{if(d.size===0){alert("Please select at least one job to recover");return}if(confirm(`Recover ${d.size} orphaned ${d.size===1?"design":"designs"}?`)){h(!0),o(null);try{const j=await v(),I=await fetch("/api/admin/recovery/create",{method:"POST",headers:j,body:JSON.stringify({job_ids:Array.from(d)})}),E=await I.json();if(!I.ok)throw new Error(E.error||"Failed to recover designs");alert(`Successfully recovered ${E.recovered_count} ${E.recovered_count===1?"design":"designs"}!`),k(),await w()}catch(j){console.error("Failed to recover designs:",j),o(j.message),alert(`Recovery failed: ${j.message}`)}finally{h(!1)}}};return c.jsxs("div",{className:"recovery-tab",children:[c.jsxs("div",{className:"admin-stats-grid",children:[c.jsxs("div",{className:"admin-stat-card warning",children:[c.jsx("h3",{children:"Total Orphaned"}),c.jsx("p",{className:"stat-value",children:e.length}),c.jsx("span",{className:"stat-label",children:"Designs not saved"})]}),n&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-stat-card",children:[c.jsx("h3",{children:"<24 hours"}),c.jsx("p",{className:"stat-value",children:n["<24h"]}),c.jsx("span",{className:"stat-label",children:"Recent"})]}),c.jsxs("div",{className:"admin-stat-card",children:[c.jsx("h3",{children:"1-7 days"}),c.jsx("p",{className:"stat-value",children:n["1-7d"]}),c.jsx("span",{className:"stat-label",children:"This week"})]}),c.jsxs("div",{className:"admin-stat-card",children:[c.jsx("h3",{children:">7 days"}),c.jsx("p",{className:"stat-value",children:n["7-30d"]+n[">30d"]}),c.jsx("span",{className:"stat-label",children:"Older"})]})]})]}),c.jsxs("div",{className:"recovery-controls",children:[c.jsx("div",{className:"admin-filters",children:c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Age:"}),c.jsxs("select",{value:m,onChange:j=>g(j.target.value),children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"24h",children:"<24 hours"}),c.jsx("option",{value:"7d",children:"<7 days"}),c.jsx("option",{value:"30d",children:"<30 days"})]})]})}),c.jsxs("div",{className:"bulk-actions",children:[c.jsx("button",{onClick:x,className:"btn-secondary",children:"Select All"}),c.jsxs("button",{onClick:k,className:"btn-secondary",children:["Clear (",d.size,")"]}),c.jsx("button",{onClick:A,disabled:d.size===0||u,className:"btn-primary",children:u?"Recovering...":`Recover Selected (${d.size})`})]})]}),i&&c.jsxs("div",{className:"admin-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading orphaned jobs..."})]}),a&&c.jsx("div",{className:"admin-error",children:c.jsxs("p",{children:["Error: ",a]})}),!i&&e.length>0&&c.jsx("div",{className:"recovery-table-container",children:c.jsxs("table",{className:"recovery-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"40px"},children:c.jsx("input",{type:"checkbox",checked:d.size===e.length,onChange:j=>j.target.checked?x():k()})}),c.jsx("th",{children:"Thumbnail"}),c.jsx("th",{children:"Prompt / Auto-name"}),c.jsx("th",{children:"Dimensions"}),c.jsx("th",{children:"Age"}),c.jsx("th",{children:"User"})]})}),c.jsx("tbody",{children:e.map(j=>c.jsxs("tr",{className:d.has(j.id)?"selected":"",onClick:()=>C(j.id),children:[c.jsx("td",{onClick:I=>I.stopPropagation(),children:c.jsx("input",{type:"checkbox",checked:d.has(j.id),onChange:()=>C(j.id)})}),c.jsx("td",{className:"thumbnail-cell",children:j.thumbnail_url?c.jsx("img",{src:j.thumbnail_url,alt:"Design",className:"job-thumbnail"}):c.jsx("div",{className:"thumbnail-placeholder",children:"No image"})}),c.jsxs("td",{className:"prompt-cell",children:[c.jsx("div",{className:"prompt-text",title:j.prompt,children:j.auto_name}),j.prompt&&j.prompt.length>50&&c.jsx("div",{className:"prompt-full",children:j.prompt})]}),c.jsx("td",{className:"dimensions-cell",children:j.width_mm&&j.length_mm?c.jsxs("span",{children:[j.width_mm,"  ",j.length_mm," mm"]}):c.jsx("em",{children:"N/A"})}),c.jsx("td",{className:"age-cell",children:c.jsxs("span",{className:`age-badge ${j.age_bucket.replace(/[<>]/g,"")}`,children:[j.age_days," ",j.age_days===1?"day":"days"]})}),c.jsx("td",{className:"user-cell",children:j.user_email})]},j.id))})]})}),!i&&e.length===0&&c.jsx("div",{className:"admin-empty",children:c.jsx("p",{children:"No orphaned jobs found. All designs have been saved!"})}),c.jsx("style",{children:`
        .admin-stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 1.5rem;
          margin-bottom: 2rem;
        }

        .admin-stat-card {
          background: white;
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .admin-stat-card h3 {
          font-size: 0.875rem;
          color: #64748b;
          margin-bottom: 0.5rem;
          font-weight: 500;
        }

        .admin-stat-card .value {
          font-size: 2rem;
          font-weight: 700;
          color: #1e293b;
        }

        .admin-filters {
          display: flex;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          align-items: center;
        }

        .admin-pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 0.5rem;
          margin-top: 1.5rem;
          padding: 1rem 0;
        }

        .admin-empty {
          text-align: center;
          padding: 3rem;
          color: #64748b;
        }

        .recovery-controls {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          gap: 1rem;
        }

        .bulk-actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn-primary {
          padding: 0.5rem 1rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 4px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-primary:hover:not(:disabled) {
          background: #e55a2b;
        }

        .btn-primary:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        .btn-secondary {
          padding: 0.5rem 1rem;
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
          border-radius: 4px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-secondary:hover {
          background: #f9fafb;
        }

        .recovery-table-container {
          overflow-x: auto;
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .recovery-table {
          width: 100%;
          border-collapse: collapse;
        }

        .recovery-table th {
          background: #f9fafb;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          font-size: 0.875rem;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .recovery-table td {
          padding: 1rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .recovery-table tbody tr {
          cursor: pointer;
          transition: background 0.15s;
        }

        .recovery-table tbody tr:hover {
          background: #f9fafb;
        }

        .recovery-table tbody tr.selected {
          background: #eff6ff;
        }

        .age-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .age-badge.24h {
          background: #fee2e2;
          color: #991b1b;
        }

        .age-badge.1-7d {
          background: #fed7aa;
          color: #92400e;
        }

        .age-badge.7-30d {
          background: #fef3c7;
          color: #78350f;
        }

        .age-badge.30d {
          background: #e5e7eb;
          color: #374151;
        }

        .prompt-full {
          font-size: 0.75rem;
          color: #6b7280;
          margin-top: 0.25rem;
          display: none;
        }

        .recovery-table tbody tr:hover .prompt-full {
          display: block;
        }
      `})]})}function w5e({onClose:e}){const[t,n]=fe.useState("overview"),[r,i]=fe.useState(!0),[s,a]=fe.useState(null),[o,u]=fe.useState(null),[h,d]=fe.useState([]),[p,m]=fe.useState([]),[g,v]=fe.useState(0),[w,C]=fe.useState(null),x=async()=>{var D,R;const E=await hi.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(R=(D=E==null?void 0:E.data)==null?void 0:D.session)==null?void 0:R.access_token}`}},k=async()=>{try{const E=await x(),U=await fetch("/api/admin/analytics/overview",{headers:E}),D=await U.json();if(!U.ok)throw new Error(D.error||"Failed to fetch overview");u(D.stats)}catch(E){console.error("Failed to fetch overview:",E),a(E.message)}},A=async()=>{try{const E=await x(),U=await fetch("/api/admin/users",{headers:E}),D=await U.json();if(!U.ok)throw new Error(D.error||"Failed to fetch users");d(D.users)}catch(E){console.error("Failed to fetch users:",E),a(E.message)}},j=async()=>{try{const E=await x(),U=await fetch("/api/admin/designs?limit=50",{headers:E}),D=await U.json();if(!U.ok)throw new Error(D.error||"Failed to fetch designs");m(D.designs),v(D.total)}catch(E){console.error("Failed to fetch designs:",E),a(E.message)}},I=async()=>{try{const E=await x(),U=await fetch("/api/admin/analytics/colours",{headers:E}),D=await U.json();if(!U.ok)throw new Error(D.error||"Failed to fetch colour analytics");C(D.analytics)}catch(E){console.error("Failed to fetch colours:",E),a(E.message)}};return fe.useEffect(()=>{(async()=>{i(!0),await k(),i(!1)})()},[]),fe.useEffect(()=>{t==="users"&&h.length===0?A():t==="designs"&&p.length===0?j():t==="colours"&&!w&&I()},[t]),r?c.jsxs("div",{className:"admin-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading admin dashboard..."})]}):s?c.jsxs("div",{className:"admin-error",children:[c.jsx("h2",{children:"Access Denied"}),c.jsx("p",{children:s}),c.jsx("p",{children:"You need admin privileges to view this page."})]}):c.jsxs("div",{className:"admin-dashboard",children:[c.jsxs("header",{className:"admin-header",children:[c.jsxs("div",{className:"admin-header-left",children:[c.jsxs("button",{onClick:e,className:"btn-back",children:[c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Studio"]}),c.jsx("h1",{children:"TPV Studio Admin"})]}),c.jsxs("nav",{className:"admin-nav",children:[c.jsx("button",{className:t==="overview"?"active":"",onClick:()=>n("overview"),children:"Overview"}),c.jsx("button",{className:t==="generations"?"active":"",onClick:()=>n("generations"),children:"Generations"}),c.jsx("button",{className:t==="recovery"?"active":"",onClick:()=>n("recovery"),children:"Recovery"}),c.jsx("button",{className:t==="users"?"active":"",onClick:()=>n("users"),children:"Users"}),c.jsx("button",{className:t==="designs"?"active":"",onClick:()=>n("designs"),children:"Designs"}),c.jsx("button",{className:t==="colours"?"active":"",onClick:()=>n("colours"),children:"Colour Analytics"})]})]}),c.jsxs("main",{className:"admin-content",children:[t==="overview"&&o&&c.jsx(_5e,{stats:o}),t==="generations"&&c.jsx(v5e,{}),t==="recovery"&&c.jsx(x5e,{}),t==="users"&&c.jsx(k5e,{users:h}),t==="designs"&&c.jsx(S5e,{designs:p,total:g}),t==="colours"&&w&&c.jsx(C5e,{analytics:w})]}),c.jsx("style",{jsx:!0,children:`
        .admin-dashboard {
          min-height: 100vh;
          background: #f8fafc;
        }

        .admin-header {
          background: white;
          border-bottom: 1px solid #e5e7eb;
          padding: 20px 40px;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .admin-header-left {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .btn-back {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 6px 12px;
          background: #f3f4f6;
          border: 1px solid #e5e7eb;
          border-radius: 6px;
          font-size: 13px;
          color: #6b7280;
          cursor: pointer;
          transition: all 0.2s;
          width: fit-content;
        }

        .btn-back:hover {
          background: #e5e7eb;
          color: #374151;
        }

        .admin-header h1 {
          margin: 0;
          font-size: 24px;
          color: #1e4a7a;
        }

        .admin-nav {
          display: flex;
          gap: 8px;
        }

        .admin-nav button {
          padding: 8px 16px;
          border: 1px solid #e5e7eb;
          background: white;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          color: #64748b;
          transition: all 0.2s;
        }

        .admin-nav button:hover {
          background: #f8fafc;
          color: #1e4a7a;
        }

        .admin-nav button.active {
          background: #1e4a7a;
          color: white;
          border-color: #1e4a7a;
        }

        .admin-content {
          padding: 24px 40px;
        }

        .admin-loading,
        .admin-error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 50vh;
          text-align: center;
        }

        .admin-error h2 {
          color: #dc2626;
        }

        .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid #e5e7eb;
          border-top-color: #1e4a7a;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 16px;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function _5e({stats:e}){return c.jsxs("div",{className:"overview-panel",children:[c.jsx("h2",{children:"Dashboard Overview"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.totals.users}),c.jsx("div",{className:"stat-label",children:"Total Users"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.totals.designs}),c.jsx("div",{className:"stat-label",children:"Total Designs"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.totals.projects}),c.jsx("div",{className:"stat-label",children:"Total Projects"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.totals.jobs}),c.jsx("div",{className:"stat-label",children:"AI Jobs Run"})]})]}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-card highlight",children:[c.jsx("div",{className:"stat-value",children:e.activity.active_users_30d}),c.jsx("div",{className:"stat-label",children:"Active Users (30d)"})]}),c.jsxs("div",{className:"stat-card highlight",children:[c.jsx("div",{className:"stat-value",children:e.activity.designs_7d}),c.jsx("div",{className:"stat-label",children:"Designs This Week"})]}),c.jsxs("div",{className:"stat-card highlight",children:[c.jsx("div",{className:"stat-value",children:e.activity.designs_30d}),c.jsx("div",{className:"stat-label",children:"Designs This Month"})]}),c.jsxs("div",{className:"stat-card highlight",children:[c.jsxs("div",{className:"stat-value",children:[e.activity.job_success_rate,"%"]}),c.jsx("div",{className:"stat-label",children:"Job Success Rate"})]})]}),c.jsx("h3",{children:"Activity Timeline (14 Days)"}),c.jsx("div",{className:"activity-chart",children:e.timeline.map((t,n)=>c.jsxs("div",{className:"bar-container",children:[c.jsx("div",{className:"bar",style:{height:`${Math.max(4,t.count*20)}px`},title:`${t.date}: ${t.count} designs`}),c.jsx("div",{className:"bar-label",children:t.date.split("-")[2]})]},n))}),c.jsxs("div",{className:"breakdowns",children:[c.jsxs("div",{className:"breakdown-card",children:[c.jsx("h4",{children:"Input Mode"}),c.jsxs("div",{className:"breakdown-items",children:[c.jsxs("div",{className:"breakdown-item",children:[c.jsx("span",{children:"Prompt"}),c.jsx("strong",{children:e.breakdowns.input_mode.prompt})]}),c.jsxs("div",{className:"breakdown-item",children:[c.jsx("span",{children:"Image Upload"}),c.jsx("strong",{children:e.breakdowns.input_mode.image})]}),c.jsxs("div",{className:"breakdown-item",children:[c.jsx("span",{children:"SVG Upload"}),c.jsx("strong",{children:e.breakdowns.input_mode.svg})]})]})]}),c.jsxs("div",{className:"breakdown-card",children:[c.jsx("h4",{children:"View Mode Preference"}),c.jsxs("div",{className:"breakdown-items",children:[c.jsxs("div",{className:"breakdown-item",children:[c.jsx("span",{children:"Solid TPV"}),c.jsx("strong",{children:e.breakdowns.view_mode.solid})]}),c.jsxs("div",{className:"breakdown-item",children:[c.jsx("span",{children:"Blend TPV"}),c.jsx("strong",{children:e.breakdowns.view_mode.blend})]})]})]})]}),c.jsx("style",{jsx:!0,children:`
        .overview-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .overview-panel h3 {
          margin: 32px 0 16px 0;
          color: #1a202c;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 16px;
          margin-bottom: 16px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .stat-card.highlight {
          border-color: #1e4a7a;
          border-width: 2px;
        }

        .stat-value {
          font-size: 32px;
          font-weight: 700;
          color: #1e4a7a;
        }

        .stat-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }

        .activity-chart {
          display: flex;
          align-items: flex-end;
          gap: 8px;
          height: 120px;
          padding: 16px;
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .bar-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .bar {
          width: 100%;
          background: #1e4a7a;
          border-radius: 4px 4px 0 0;
          min-height: 4px;
        }

        .bar-label {
          font-size: 10px;
          color: #64748b;
          margin-top: 4px;
        }

        .breakdowns {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-top: 24px;
        }

        .breakdown-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .breakdown-card h4 {
          margin: 0 0 12px 0;
          color: #1a202c;
        }

        .breakdown-item {
          display: flex;
          justify-content: space-between;
          padding: 8px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .breakdown-item:last-child {
          border-bottom: none;
        }

        .breakdown-item span {
          color: #64748b;
        }

        .breakdown-item strong {
          color: #1a202c;
        }
      `})]})}function k5e({users:e}){return c.jsxs("div",{className:"users-panel",children:[c.jsxs("h2",{children:["User Management (",e.length," users)"]}),c.jsxs("table",{className:"users-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Email"}),c.jsx("th",{children:"Role"}),c.jsx("th",{children:"Designs"}),c.jsx("th",{children:"Projects"}),c.jsx("th",{children:"Jobs"}),c.jsx("th",{children:"Last Design"}),c.jsx("th",{children:"Joined"})]})}),c.jsx("tbody",{children:e.map(t=>c.jsxs("tr",{children:[c.jsx("td",{children:t.email}),c.jsx("td",{children:c.jsx("span",{className:`role-badge ${t.role}`,children:t.role})}),c.jsx("td",{children:t.design_count}),c.jsx("td",{children:t.project_count}),c.jsx("td",{children:t.job_count}),c.jsx("td",{children:t.last_design_at?new Date(t.last_design_at).toLocaleDateString():"-"}),c.jsx("td",{children:new Date(t.created_at).toLocaleDateString()})]},t.id))})]}),c.jsx("style",{jsx:!0,children:`
        .users-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .users-table {
          width: 100%;
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          border-collapse: collapse;
        }

        .users-table th,
        .users-table td {
          padding: 12px 16px;
          text-align: left;
          border-bottom: 1px solid #e5e7eb;
        }

        .users-table th {
          background: #f8fafc;
          font-weight: 600;
          color: #64748b;
          font-size: 12px;
          text-transform: uppercase;
        }

        .users-table td {
          font-size: 14px;
          color: #1a202c;
        }

        .role-badge {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
        }

        .role-badge.user {
          background: #f3f4f6;
          color: #64748b;
        }

        .role-badge.admin {
          background: #dbeafe;
          color: #1e40af;
        }

        .role-badge.superadmin {
          background: #fef3c7;
          color: #92400e;
        }
      `})]})}function S5e({designs:e,total:t}){return c.jsxs("div",{className:"designs-panel",children:[c.jsxs("h2",{children:["All Designs (",t," total)"]}),c.jsx("div",{className:"designs-grid",children:e.map(n=>c.jsxs("div",{className:"design-card",children:[c.jsx("div",{className:"design-thumbnail",children:n.thumbnail_url||n.original_png_url?c.jsx("img",{src:n.thumbnail_url||n.original_png_url,alt:n.name}):c.jsx("div",{className:"no-image",children:"No preview"})}),c.jsxs("div",{className:"design-info",children:[c.jsx("h4",{children:n.name}),c.jsx("p",{className:"design-user",children:n.user_email}),c.jsx("p",{className:"design-date",children:new Date(n.created_at).toLocaleDateString()}),n.project&&c.jsx("span",{className:"project-badge",style:{backgroundColor:n.project.color||"#64748b"},children:n.project.name})]})]},n.id))}),c.jsx("style",{jsx:!0,children:`
        .designs-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .designs-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 16px;
        }

        .design-card {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .design-thumbnail {
          aspect-ratio: 1;
          background: #f3f4f6;
          overflow: hidden;
        }

        .design-thumbnail img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .no-image {
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #9ca3af;
          font-size: 14px;
        }

        .design-info {
          padding: 12px;
        }

        .design-info h4 {
          margin: 0 0 4px 0;
          font-size: 14px;
          color: #1a202c;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .design-user {
          margin: 0;
          font-size: 12px;
          color: #64748b;
        }

        .design-date {
          margin: 4px 0;
          font-size: 12px;
          color: #9ca3af;
        }

        .project-badge {
          display: inline-block;
          padding: 2px 8px;
          border-radius: 10px;
          font-size: 10px;
          color: white;
        }
      `})]})}function C5e({analytics:e}){return c.jsxs("div",{className:"colours-panel",children:[c.jsx("h2",{children:"Colour Usage Analytics"}),c.jsxs("div",{className:"colour-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.totals.designs_analysed}),c.jsx("div",{className:"stat-label",children:"Designs Analysed"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-value",children:e.totals.colour_usages}),c.jsx("div",{className:"stat-label",children:"Total Colour Uses"})]})]}),c.jsx("h3",{children:"Top 10 TPV Colours"}),c.jsx("div",{className:"colour-list",children:e.top_colours.map((t,n)=>c.jsxs("div",{className:"colour-item",children:[c.jsxs("span",{className:"colour-rank",children:["#",n+1]}),c.jsx("div",{className:"colour-swatch",style:{backgroundColor:t.hex}}),c.jsxs("div",{className:"colour-info",children:[c.jsx("strong",{children:t.code}),c.jsx("span",{children:t.name})]}),c.jsxs("div",{className:"colour-count",children:[t.count," uses"]})]},t.code))}),c.jsx("h3",{children:"Colour Family Breakdown"}),c.jsx("div",{className:"family-bars",children:Object.entries(e.families).map(([t,n])=>c.jsxs("div",{className:"family-bar",children:[c.jsx("span",{className:"family-name",children:t}),c.jsx("div",{className:"bar-bg",children:c.jsx("div",{className:"bar-fill",style:{width:`${n/e.totals.colour_usages*100}%`,backgroundColor:E5e(t)}})}),c.jsx("span",{className:"family-count",children:n})]},t))}),c.jsx("style",{jsx:!0,children:`
        .colours-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .colours-panel h3 {
          margin: 32px 0 16px 0;
          color: #1a202c;
        }

        .colour-stats {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-bottom: 24px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .stat-value {
          font-size: 32px;
          font-weight: 700;
          color: #1e4a7a;
        }

        .stat-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }

        .colour-list {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .colour-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          border-bottom: 1px solid #f3f4f6;
        }

        .colour-item:last-child {
          border-bottom: none;
        }

        .colour-rank {
          width: 30px;
          font-size: 12px;
          color: #9ca3af;
        }

        .colour-swatch {
          width: 32px;
          height: 32px;
          border-radius: 6px;
          border: 1px solid #e5e7eb;
        }

        .colour-info {
          flex: 1;
        }

        .colour-info strong {
          display: block;
          color: #1a202c;
        }

        .colour-info span {
          font-size: 12px;
          color: #64748b;
        }

        .colour-count {
          font-weight: 600;
          color: #1e4a7a;
        }

        .family-bars {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          padding: 16px;
        }

        .family-bar {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 12px;
        }

        .family-bar:last-child {
          margin-bottom: 0;
        }

        .family-name {
          width: 80px;
          font-size: 14px;
          color: #64748b;
          text-transform: capitalize;
        }

        .bar-bg {
          flex: 1;
          height: 20px;
          background: #f3f4f6;
          border-radius: 4px;
          overflow: hidden;
        }

        .bar-fill {
          height: 100%;
          border-radius: 4px;
        }

        .family-count {
          width: 50px;
          text-align: right;
          font-weight: 600;
          color: #1a202c;
        }

        .blend-list {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .blend-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          border-bottom: 1px solid #f3f4f6;
        }

        .blend-item:last-child {
          border-bottom: none;
        }

        .blend-swatches {
          display: flex;
          gap: 4px;
        }

        .blend-swatch {
          width: 24px;
          height: 24px;
          border-radius: 4px;
          border: 1px solid #e5e7eb;
        }

        .blend-codes {
          flex: 1;
          font-size: 14px;
          color: #1a202c;
        }

        .blend-count {
          font-weight: 600;
          color: #1e4a7a;
        }
      `})]})}function E5e(e){return{reds:"#dc2626",greens:"#16a34a",blues:"#2563eb",yellows:"#ca8a04",neutrals:"#6b7280"}[e]||"#6b7280"}const Zb=[{code:"RH30",name:"Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH40",name:"Mustard",hex:"#E5A144"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH70",name:"Black",hex:"#231F20"}],Ej=["ocean theme with dolphins and waves","jungle adventure with parrots","solar system with planets","garden with butterflies and flowers","racing track with cars","underwater coral reef scene","dinosaur footprints trail","rainbow with clouds"],T5e=[...Array(60)].map(e=>({delay:`${Math.random()*3}s`,x:`${Math.random()*100}%`,y:`${Math.random()*100}%`,size:`${8+Math.random()*12}px`}));function j5e(){const[e,t]=fe.useState(""),[n,r]=fe.useState(""),[i,s]=fe.useState(""),[a,o]=fe.useState(!1),[u,h]=fe.useState(!1),[d,p]=fe.useState(0);fe.useEffect(()=>{const v=setInterval(()=>{p(w=>(w+1)%Ej.length)},5e3);return()=>clearInterval(v)},[]);const m=async v=>{v.preventDefault(),s(""),o(!0);try{await xa.signIn(e,n)}catch(w){s(w.message||"Sign in failed")}finally{o(!1)}},g=v=>{var w;(w=document.getElementById(v))==null||w.scrollIntoView({behavior:"smooth"})};return c.jsxs("div",{className:"landing-page",children:[c.jsxs("nav",{className:"landing-nav",children:[c.jsxs("div",{className:"nav-logo",children:[c.jsxs("div",{className:"logo-main",children:[c.jsxs("span",{className:"logo-text",children:["Rosehill TPV",c.jsx("sup",{children:""})]}),c.jsx("span",{className:"logo-accent",children:"Studio"})]}),c.jsx("span",{className:"logo-byline",children:"by Rosehill Sports & Play"})]}),c.jsxs("div",{className:"nav-links",children:[c.jsx("button",{onClick:()=>g("features"),children:"Features"}),c.jsx("button",{onClick:()=>g("palette"),children:"Colours"}),c.jsx("button",{onClick:()=>h(!0),className:"nav-cta",children:"Sign In"})]})]}),c.jsxs("section",{className:"hero",children:[c.jsx("div",{className:"hero-background",children:c.jsx("div",{className:"granule-field",children:T5e.map((v,w)=>c.jsx("div",{className:"granule",style:{"--delay":v.delay,"--x":v.x,"--y":v.y,"--color":Zb[w%Zb.length].hex,"--size":v.size}},w))})}),c.jsxs("div",{className:"hero-content",children:[c.jsxs("div",{className:"hero-badge",children:["Rosehill TPV",c.jsx("sup",{children:""})," Surface Design Platform"]}),c.jsxs("h1",{children:[c.jsx("span",{className:"hero-line-1",children:"Design Any"}),c.jsxs("span",{className:"hero-line-2",children:["Rosehill TPV",c.jsx("sup",{children:""})," Surface"]})]}),c.jsxs("p",{className:"hero-subtitle",children:["From AI-generated playground art to professional sports courts  one powerful design platform for all your Rosehill TPV",c.jsx("sup",{children:""})," surfaces."]}),c.jsxs("div",{className:"hero-ctas",children:[c.jsxs("button",{onClick:()=>h(!0),className:"cta-primary",children:["Start Designing",c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),c.jsx("button",{onClick:()=>g("how-it-works"),className:"cta-secondary",children:"See How It Works"})]})]}),c.jsx("div",{className:"hero-visual",children:c.jsx("div",{className:"mockup-container",children:c.jsxs("div",{className:"mockup-screen",children:[c.jsx("div",{className:"mockup-header",children:c.jsxs("div",{className:"mockup-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})}),c.jsxs("div",{className:"mockup-content",children:[c.jsx("div",{className:"mockup-input",children:c.jsx("span",{className:"typing-text",children:Ej[d]},d)}),c.jsxs("div",{className:"mockup-preview",children:[c.jsx("div",{className:"preview-shape shape-1"}),c.jsx("div",{className:"preview-shape shape-2"}),c.jsx("div",{className:"preview-shape shape-3"})]})]})]})})})]}),c.jsxs("section",{className:"unified-showcase",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("span",{className:"section-tag",children:"One Powerful Tool"}),c.jsx("h2",{children:"Design Any Surface"}),c.jsx("p",{className:"section-subtitle",children:"Courts, tracks, playgrounds, and custom graphics  all in one canvas"})]}),c.jsx("div",{className:"showcase-container",children:c.jsxs("div",{className:"showcase-card",children:[c.jsxs("div",{className:"showcase-canvas",children:[c.jsxs("div",{className:"canvas-preview",children:[c.jsx("div",{className:"canvas-grid"}),c.jsxs("div",{className:"canvas-surface",children:[c.jsx("div",{className:"surface-court"}),c.jsx("div",{className:"surface-motif"})]})]}),c.jsxs("div",{className:"capability-pill pill-courts",children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"}),c.jsx("path",{d:"M2 12h4M18 12h4"})]}),c.jsx("span",{children:"Courts & Tracks"})]}),c.jsxs("div",{className:"capability-pill pill-ai",children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:c.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})}),c.jsx("span",{children:"AI Artwork"})]}),c.jsxs("div",{className:"capability-pill pill-upload",children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("path",{d:"M21 15l-5-5L5 21"})]}),c.jsx("span",{children:"Custom Images"})]}),c.jsxs("div",{className:"capability-pill pill-layers",children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),c.jsx("path",{d:"M2 17l10 5 10-5"}),c.jsx("path",{d:"M2 12l10 5 10-5"})]}),c.jsx("span",{children:"Layer & Combine"})]})]}),c.jsx("div",{className:"showcase-tagline",children:"One canvas. Unlimited possibilities."}),c.jsxs("div",{className:"showcase-features",children:[c.jsxs("div",{className:"showcase-feature",children:[c.jsx("div",{className:"feature-badge ai-badge",children:"AI-POWERED"}),c.jsx("span",{children:"Generate motifs from text descriptions"})]}),c.jsxs("div",{className:"showcase-feature",children:[c.jsx("div",{className:"feature-badge template-badge",children:"TEMPLATES"}),c.jsx("span",{children:"15+ professional court layouts"})]}),c.jsxs("div",{className:"showcase-feature",children:[c.jsx("div",{className:"feature-badge compose-badge",children:"COMPOSE"}),c.jsx("span",{children:"Mix courts, tracks & artwork freely"})]})]}),c.jsxs("button",{onClick:()=>h(!0),className:"cta-primary showcase-cta",children:["Start Designing",c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})})]}),c.jsxs("section",{id:"how-it-works",className:"how-it-works",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("span",{className:"section-tag",children:"Process"}),c.jsx("h2",{children:"Three Steps to Production-Ready Designs"})]}),c.jsxs("div",{className:"steps-container",children:[c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:"01"}),c.jsx("div",{className:"step-icon",children:c.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),c.jsx("path",{d:"M3 9h18M9 21V9"})]})}),c.jsx("h3",{children:"Set Up Your Surface"}),c.jsx("p",{children:"Define your dimensions and choose your base colour. Start with any size from small playgrounds to full athletic facilities."})]}),c.jsx("div",{className:"step-connector",children:c.jsx("svg",{viewBox:"0 0 100 20",preserveAspectRatio:"none",children:c.jsx("path",{d:"M0 10 Q50 10 100 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 4"})})}),c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:"02"}),c.jsx("div",{className:"step-icon",children:c.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),c.jsx("path",{d:"M2 17l10 5 10-5"}),c.jsx("path",{d:"M2 12l10 5 10-5"})]})}),c.jsx("h3",{children:"Add Elements"}),c.jsx("p",{children:"Drop in courts and tracks from the library, generate AI artwork, upload your own designs  layer and combine freely."})]}),c.jsx("div",{className:"step-connector",children:c.jsx("svg",{viewBox:"0 0 100 20",preserveAspectRatio:"none",children:c.jsx("path",{d:"M0 10 Q50 10 100 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 4"})})}),c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:"03"}),c.jsx("div",{className:"step-icon",children:c.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),c.jsx("path",{d:"M14 2v6h6M12 18v-6M9 15l3 3 3-3"})]})}),c.jsx("h3",{children:"Export & Build"}),c.jsx("p",{children:"Generate professional PDFs with material specifications, colour recipes, and exact quantities for installation."})]})]})]}),c.jsxs("section",{id:"features",className:"features",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("span",{className:"section-tag",children:"Capabilities"}),c.jsxs("h2",{children:["Everything You Need to Design Rosehill TPV",c.jsx("sup",{children:""})," Surfaces"]})]}),c.jsxs("div",{className:"features-grid unified-features",children:[c.jsxs("div",{className:"feature-card feature-highlight",children:[c.jsx("div",{className:"feature-icon",children:c.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:c.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),c.jsx("h3",{children:"AI Text-to-Vector"}),c.jsxs("p",{children:["Describe any concept in natural language. Our AI transforms your words into production-ready vector designs optimised for Rosehill TPV",c.jsx("sup",{children:""})," surfaces."]}),c.jsx("div",{className:"feature-example",children:'"vibrant underwater scene with coral reef"'})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:c.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"}),c.jsx("path",{d:"M2 12h4M18 12h4"})]})}),c.jsx("h3",{children:"Court & Track Library"}),c.jsx("p",{children:"15+ professional templates including basketball, tennis, netball, futsal, and running tracks."})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:c.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),c.jsx("h3",{children:"Image Vectorisation"}),c.jsxs("p",{children:["Upload any image and convert it to clean vectors optimised for Rosehill TPV",c.jsx("sup",{children:""})," production."]})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:c.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),c.jsx("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),c.jsx("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),c.jsx("circle",{cx:"6.5",cy:"12.5",r:"2.5"})]})}),c.jsx("h3",{children:"Colour Matching"}),c.jsxs("p",{children:["Automatic colour matching to the Rosehill TPV",c.jsx("sup",{children:""})," palette with precise specifications."]})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:c.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),c.jsx("path",{d:"M2 17l10 5 10-5"}),c.jsx("path",{d:"M2 12l10 5 10-5"})]})}),c.jsx("h3",{children:"Layer Management"}),c.jsx("p",{children:"Combine courts, tracks, and motifs freely. Drag, rotate, and layer with precision controls."})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:c.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[c.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),c.jsx("path",{d:"M14 2v6h6M12 18v-6M9 15l3 3 3-3"})]})}),c.jsx("h3",{children:"PDF Specifications"}),c.jsx("p",{children:"Export production-ready material specs with colour specifications and installation guides."})]})]})]}),c.jsxs("section",{id:"palette",className:"palette-section",children:[c.jsxs("div",{className:"section-header light",children:[c.jsx("span",{className:"section-tag",children:"Palette"}),c.jsxs("h2",{children:["21 Standard Rosehill TPV",c.jsx("sup",{children:""})," Colours"]}),c.jsxs("p",{className:"section-subtitle",children:["The complete Rosehill TPV",c.jsx("sup",{children:""})," granule palette at your fingertips"]})]}),c.jsx("div",{className:"palette-grid",children:Zb.map((v,w)=>c.jsxs("div",{className:"palette-swatch",style:{"--swatch-color":v.hex,"--delay":`${w*.03}s`},children:[c.jsx("div",{className:"swatch-color"}),c.jsxs("div",{className:"swatch-info",children:[c.jsx("span",{className:"swatch-name",children:v.name}),c.jsx("span",{className:"swatch-code",children:v.code})]})]},v.code))})]}),c.jsx("section",{className:"benefits",children:c.jsxs("div",{className:"benefits-grid benefits-grid-4",children:[c.jsxs("div",{className:"benefit",children:[c.jsx("div",{className:"benefit-metric",children:"10x"}),c.jsx("div",{className:"benefit-label",children:"Faster Design"}),c.jsx("p",{children:"What took hours now takes minutes with AI and templates."})]}),c.jsxs("div",{className:"benefit",children:[c.jsx("div",{className:"benefit-metric",children:"100%"}),c.jsx("div",{className:"benefit-label",children:"Production Accurate"}),c.jsxs("p",{children:["Exact Rosehill TPV",c.jsx("sup",{children:""})," granule specs with precise specifications."]})]}),c.jsxs("div",{className:"benefit",children:[c.jsx("div",{className:"benefit-metric infinite-symbol",children:""}),c.jsx("div",{className:"benefit-label",children:"Combinations"}),c.jsx("p",{children:"Mix courts, tracks, and artwork in unlimited configurations."})]}),c.jsxs("div",{className:"benefit",children:[c.jsx("div",{className:"benefit-metric",children:"21"}),c.jsx("div",{className:"benefit-label",children:"Standard Colours"}),c.jsxs("p",{children:["Complete Rosehill TPV",c.jsx("sup",{children:""})," standard colour palette."]})]})]})}),c.jsx("footer",{className:"landing-footer",children:c.jsxs("div",{className:"footer-content",children:[c.jsxs("div",{className:"footer-brand",children:[c.jsxs("span",{className:"footer-logo",children:["Rosehill TPV",c.jsx("sup",{children:""})," Studio"]}),c.jsx("span",{className:"footer-tagline",children:"A web app by Rosehill Sports & Play"}),c.jsx("span",{className:"footer-division",children:"A Division of Rosehill Group"})]}),c.jsxs("div",{className:"footer-links",children:[c.jsx("a",{href:"https://rosehilltpv.com",target:"_blank",rel:"noopener noreferrer",children:"rosehilltpv.com"}),c.jsx("a",{href:"mailto:info@rosehill.group",children:"info@rosehill.group"})]})]})}),c.jsx("section",{className:"cta-footer",children:c.jsxs("div",{className:"cta-content",children:[c.jsx("h2",{children:"Ready to Design Your Surface?"}),c.jsxs("p",{children:["Create playgrounds or sports facilities with production-ready Rosehill TPV",c.jsx("sup",{children:""})," specifications."]}),c.jsxs("button",{onClick:()=>h(!0),className:"cta-primary large",children:["Sign In to Rosehill TPV",c.jsx("sup",{children:""})," Studio",c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),c.jsxs("p",{className:"cta-note",children:["Need an account? Contact ",c.jsx("a",{href:"mailto:info@rosehill.group",children:"info@rosehill.group"})]})]})}),u&&c.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:c.jsxs("div",{className:"sign-in-modal",onClick:v=>v.stopPropagation(),children:[c.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Sign In"}),c.jsxs("p",{children:["Access your Rosehill TPV",c.jsx("sup",{children:""})," Studio account"]})]}),i&&c.jsx("div",{className:"form-error",children:i}),c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:e,onChange:v=>t(v.target.value),placeholder:"your.email@company.com",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:n,onChange:v=>r(v.target.value),required:!0})]}),c.jsx("button",{type:"submit",disabled:a,className:"submit-btn",children:a?"Signing in...":"Sign In"})]}),c.jsx("p",{className:"modal-footer-text",children:"Don't have an account? Contact your administrator."})]})}),c.jsx("style",{jsx:!0,children:`
        /* ============================================
           TPV STUDIO LANDING PAGE
           Aesthetic: Sophisticated Industrial-Creative
           ============================================ */

        @import url('https://fonts.googleapis.com/css2?family=Overpass:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap');

        .landing-page {
          --primary: #1a365d;
          --primary-light: #2a4a73;
          --accent: #ff6b35;
          --accent-hover: #e55a2a;
          --text: #1a202c;
          --text-secondary: #64748b;
          --text-light: #94a3b8;
          --bg: #fafbfc;
          --bg-dark: #0f172a;
          --card: #ffffff;
          --border: #e2e8f0;

          font-family: 'Source Sans Pro', sans-serif;
          background: var(--bg);
          color: var(--text);
          overflow-x: hidden;
        }

        /* Navigation */
        .landing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 3rem;
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(12px);
          border-bottom: 1px solid var(--border);
        }

        .nav-logo {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 700;
        }

        .logo-text {
          color: var(--primary);
        }

        .logo-accent {
          color: var(--accent);
        }

        .nav-links {
          display: flex;
          align-items: center;
          gap: 2rem;
        }

        .nav-links button {
          background: none;
          border: none;
          font-family: inherit;
          font-size: 0.875rem;
          font-weight: 500;
          color: var(--text-secondary);
          cursor: pointer;
          transition: color 0.2s;
        }

        .nav-links button:hover {
          color: var(--text);
        }

        .nav-cta {
          background: var(--primary) !important;
          color: white !important;
          padding: 0.5rem 1.25rem !important;
          border-radius: 6px !important;
        }

        .nav-cta:hover {
          background: var(--primary-light) !important;
        }

        .logo-main {
          display: flex;
          align-items: baseline;
          gap: 0.25rem;
        }

        .logo-byline {
          display: block;
          font-size: 0.625rem;
          font-weight: 400;
          color: var(--text-light);
          margin-top: 2px;
          letter-spacing: 0.02em;
        }

        .landing-page sup {
          font-size: 0.6em;
          vertical-align: super;
          line-height: 0;
        }

        /* Hero Section */
        .hero {
          min-height: 100vh;
          display: grid;
          grid-template-columns: 1fr 1fr;
          align-items: center;
          padding: 8rem 4rem 4rem;
          position: relative;
          overflow: hidden;
        }

        .hero-background {
          position: absolute;
          inset: 0;
          pointer-events: none;
        }

        .granule-field {
          position: absolute;
          inset: 0;
        }

        .granule {
          position: absolute;
          left: var(--x);
          top: var(--y);
          width: var(--size);
          height: var(--size);
          background: var(--color);
          border-radius: 50%;
          opacity: 0.15;
          animation: float 8s ease-in-out infinite;
          animation-delay: var(--delay);
        }

        @keyframes float {
          0%, 100% { transform: translateY(0) scale(1); }
          50% { transform: translateY(-20px) scale(1.1); }
        }

        .hero-content {
          position: relative;
          z-index: 10;
        }

        .hero-badge {
          display: inline-block;
          padding: 0.5rem 1rem;
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
          font-size: 0.75rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.1em;
          border-radius: 50px;
          margin-bottom: 1.5rem;
        }

        .hero h1 {
          font-family: 'Overpass', sans-serif;
          font-size: 3.5rem;
          font-weight: 700;
          line-height: 1.1;
          margin: 0 0 1.5rem;
        }

        .hero-line-1 {
          display: block;
          color: var(--text-secondary);
        }

        .hero-line-2 {
          display: block;
          color: var(--primary);
        }

        .hero-subtitle {
          font-size: 1.125rem;
          color: var(--text-secondary);
          line-height: 1.7;
          max-width: 480px;
          margin-bottom: 2rem;
        }

        .hero-ctas {
          display: flex;
          gap: 1rem;
        }

        .cta-primary {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.875rem 1.5rem;
          background: var(--accent);
          color: white;
          border: none;
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .cta-primary:hover {
          background: var(--accent-hover);
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
        }

        .cta-primary.large {
          padding: 1rem 2rem;
          font-size: 1rem;
        }

        .cta-secondary {
          padding: 0.875rem 1.5rem;
          background: white;
          color: var(--text);
          border: 2px solid var(--border);
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .cta-secondary:hover {
          border-color: var(--primary);
          color: var(--primary);
        }

        /* Hero Visual / Mockup */
        .hero-visual {
          position: relative;
          z-index: 10;
          display: flex;
          justify-content: center;
        }

        .mockup-container {
          perspective: 1000px;
        }

        .mockup-screen {
          width: 400px;
          background: white;
          border-radius: 12px;
          box-shadow: 0 24px 80px rgba(0, 0, 0, 0.15);
          overflow: hidden;
          transform: rotateY(-5deg) rotateX(2deg);
          animation: mockupFloat 6s ease-in-out infinite;
        }

        @keyframes mockupFloat {
          0%, 100% { transform: rotateY(-5deg) rotateX(2deg) translateY(0); }
          50% { transform: rotateY(-5deg) rotateX(2deg) translateY(-10px); }
        }

        .mockup-header {
          padding: 0.75rem 1rem;
          background: #f8f8f8;
          border-bottom: 1px solid #eee;
        }

        .mockup-dots {
          display: flex;
          gap: 6px;
        }

        .mockup-dots span {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          background: #ddd;
        }

        .mockup-dots span:nth-child(1) { background: #ff5f56; }
        .mockup-dots span:nth-child(2) { background: #ffbd2e; }
        .mockup-dots span:nth-child(3) { background: #27ca41; }

        .mockup-content {
          padding: 1.5rem;
        }

        .mockup-input {
          background: #f5f5f5;
          padding: 1rem;
          border-radius: 8px;
          font-size: 0.875rem;
          color: var(--text-secondary);
          margin-bottom: 1.5rem;
          display: flex;
          align-items: center;
        }

        .typing-text {
          display: inline-block;
          overflow: hidden;
          white-space: nowrap;
          border-right: 2px solid var(--primary);
          animation: typing 5s steps(40, end) forwards, blink 0.7s step-end infinite;
        }

        @keyframes typing {
          0% { max-width: 0; }
          35% { max-width: 500px; }
          65% { max-width: 500px; }
          100% { max-width: 0; }
        }

        @keyframes blink {
          50% { border-color: transparent; }
        }

        .mockup-preview {
          height: 180px;
          background: linear-gradient(135deg, #e8f4f8, #f0f4ff);
          border-radius: 8px;
          position: relative;
          overflow: hidden;
        }

        .preview-shape {
          position: absolute;
          border-radius: 50%;
          animation: shapeReveal 4s ease-out infinite;
        }

        .shape-1 {
          width: 80px;
          height: 80px;
          background: var(--accent);
          opacity: 0.8;
          top: 20%;
          left: 15%;
          animation-delay: 0s;
        }

        .shape-2 {
          width: 60px;
          height: 60px;
          background: #30D5C8;
          opacity: 0.8;
          top: 40%;
          left: 50%;
          animation-delay: 0.3s;
        }

        .shape-3 {
          width: 100px;
          height: 100px;
          background: var(--primary);
          opacity: 0.8;
          top: 50%;
          right: 10%;
          animation-delay: 0.6s;
        }

        @keyframes shapeReveal {
          0%, 100% { transform: scale(0.8); opacity: 0.4; }
          50% { transform: scale(1); opacity: 0.8; }
        }

        /* Section Headers */
        .section-header {
          text-align: center;
          margin-bottom: 4rem;
        }

        .section-header.light h2,
        .section-header.light .section-subtitle {
          color: white;
        }

        .section-header.light .section-tag {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.9);
        }

        .section-tag {
          display: inline-block;
          padding: 0.375rem 0.875rem;
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
          font-size: 0.6875rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.15em;
          border-radius: 50px;
          margin-bottom: 1rem;
        }

        .section-header h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text);
          margin: 0;
        }

        .section-subtitle {
          margin-top: 1rem;
          font-size: 1.125rem;
          color: var(--text-secondary);
        }

        /* How It Works */
        .how-it-works {
          padding: 6rem 4rem;
          background: white;
        }

        .steps-container {
          display: flex;
          align-items: flex-start;
          justify-content: center;
          gap: 1rem;
        }

        .step {
          flex: 1;
          max-width: 280px;
          text-align: center;
          padding: 2rem 1.5rem;
        }

        .step-number {
          font-family: 'Overpass', sans-serif;
          font-size: 3rem;
          font-weight: 700;
          color: rgba(30, 74, 122, 0.1);
          margin-bottom: 1rem;
        }

        .step-icon {
          width: 64px;
          height: 64px;
          margin: 0 auto 1.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(255, 107, 53, 0.1);
          border-radius: 16px;
          color: var(--accent);
        }

        .step h3 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.25rem;
          font-weight: 600;
          margin: 0 0 0.75rem;
          color: var(--text);
        }

        .step p {
          font-size: 0.9375rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        .step-connector {
          width: 100px;
          padding-top: 5rem;
          color: var(--border);
        }

        /* Features */
        .features {
          padding: 6rem 4rem;
          background: var(--bg);
        }

        .features-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 1.5rem;
          max-width: 1200px;
          margin: 0 auto;
        }

        .feature-card {
          background: white;
          padding: 2rem;
          border-radius: 12px;
          border: 1px solid var(--border);
          transition: all 0.3s;
        }

        .feature-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
        }

        .feature-highlight {
          grid-column: span 2;
          background: linear-gradient(135deg, var(--primary), var(--primary-light));
          color: white;
          border: none;
        }

        .feature-highlight .feature-icon {
          background: rgba(255, 255, 255, 0.2);
          color: white;
        }

        .feature-highlight h3 {
          color: white;
        }

        .feature-highlight p {
          color: rgba(255, 255, 255, 0.9);
        }

        .feature-icon {
          width: 56px;
          height: 56px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(30, 74, 122, 0.1);
          border-radius: 12px;
          color: var(--primary);
          margin-bottom: 1.25rem;
        }

        .feature-card h3 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.125rem;
          font-weight: 600;
          margin: 0 0 0.5rem;
        }

        .feature-card p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        .feature-example {
          margin-top: 1.5rem;
          padding: 0.875rem 1rem;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          font-size: 0.8125rem;
          font-style: italic;
          opacity: 0.9;
        }

        /* Unified Showcase Section */
        .unified-showcase {
          padding: 6rem 4rem;
          background: white;
        }

        .showcase-container {
          max-width: 900px;
          margin: 0 auto;
        }

        .showcase-card {
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 24px;
          padding: 3rem;
          border: 1px solid var(--border);
          text-align: center;
        }

        .showcase-canvas {
          position: relative;
          height: 280px;
          margin-bottom: 2rem;
        }

        .canvas-preview {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 240px;
          height: 160px;
          background: white;
          border-radius: 12px;
          border: 2px solid var(--border);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
          overflow: hidden;
        }

        .canvas-grid {
          position: absolute;
          inset: 0;
          background-image:
            linear-gradient(rgba(30, 74, 122, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(30, 74, 122, 0.05) 1px, transparent 1px);
          background-size: 20px 20px;
        }

        .canvas-surface {
          position: absolute;
          inset: 10px;
          background: #e8f4f8;
          border-radius: 4px;
        }

        .surface-court {
          position: absolute;
          top: 20%;
          left: 15%;
          width: 70%;
          height: 60%;
          border: 2px solid #00a6a3;
          border-radius: 4px;
          opacity: 0.8;
        }

        .surface-court::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 2px;
          background: #00a6a3;
        }

        .surface-court::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          border: 2px solid #00a6a3;
          border-radius: 50%;
        }

        .surface-motif {
          position: absolute;
          bottom: 10%;
          right: 10%;
          width: 35px;
          height: 35px;
          background: var(--accent);
          border-radius: 50%;
          opacity: 0.8;
          animation: motifPulse 3s ease-in-out infinite;
        }

        @keyframes motifPulse {
          0%, 100% { transform: scale(1); opacity: 0.8; }
          50% { transform: scale(1.1); opacity: 1; }
        }

        .capability-pill {
          position: absolute;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.625rem 1rem;
          background: white;
          border-radius: 50px;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
          font-size: 0.8125rem;
          font-weight: 500;
          color: var(--text);
          animation: pillFloat 4s ease-in-out infinite;
        }

        .pill-courts {
          top: 10%;
          left: 5%;
          animation-delay: 0s;
        }

        .pill-courts svg {
          color: #00a6a3;
        }

        .pill-ai {
          top: 5%;
          right: 10%;
          animation-delay: 0.5s;
        }

        .pill-ai svg {
          color: var(--accent);
        }

        .pill-upload {
          bottom: 15%;
          left: 8%;
          animation-delay: 1s;
        }

        .pill-upload svg {
          color: var(--primary);
        }

        .pill-layers {
          bottom: 10%;
          right: 5%;
          animation-delay: 1.5s;
        }

        .pill-layers svg {
          color: #30D5C8;
        }

        @keyframes pillFloat {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }

        .showcase-tagline {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          color: var(--text);
          margin-bottom: 2rem;
        }

        .showcase-features {
          display: flex;
          justify-content: center;
          gap: 2rem;
          flex-wrap: wrap;
          margin-bottom: 2rem;
        }

        .showcase-feature {
          display: flex;
          align-items: center;
          gap: 0.625rem;
          font-size: 0.875rem;
          color: var(--text-secondary);
        }

        .feature-badge {
          padding: 0.25rem 0.625rem;
          border-radius: 50px;
          font-size: 0.625rem;
          font-weight: 700;
          letter-spacing: 0.05em;
        }

        .ai-badge {
          background: rgba(255, 107, 53, 0.1);
          color: var(--accent);
        }

        .template-badge {
          background: rgba(0, 166, 163, 0.1);
          color: #00a6a3;
        }

        .compose-badge {
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
        }

        .showcase-cta {
          margin: 0 auto;
        }

        /* Unified Features Grid */
        .unified-features {
          grid-template-columns: repeat(3, 1fr);
        }

        /* Infinite symbol styling */
        .infinite-symbol {
          font-size: 3.5rem;
          line-height: 1;
        }

        /* Benefits Grid 4 columns */
        .benefits-grid-4 {
          grid-template-columns: repeat(4, 1fr);
        }

        /* Palette Section */
        .palette-section {
          padding: 6rem 4rem;
          background: var(--bg-dark);
        }

        .palette-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 1rem;
          max-width: 1000px;
          margin: 0 auto;
        }

        .palette-swatch {
          animation: swatchReveal 0.5s ease-out forwards;
          animation-delay: var(--delay);
          opacity: 0;
          transform: translateY(20px);
        }

        @keyframes swatchReveal {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .swatch-color {
          aspect-ratio: 1;
          background: var(--swatch-color);
          border-radius: 8px;
          margin-bottom: 0.5rem;
          transition: transform 0.2s;
        }

        .palette-swatch:hover .swatch-color {
          transform: scale(1.1);
        }

        .swatch-info {
          text-align: center;
        }

        .swatch-name {
          display: block;
          font-size: 0.6875rem;
          font-weight: 500;
          color: white;
        }

        .swatch-code {
          display: block;
          font-size: 0.625rem;
          color: rgba(255, 255, 255, 0.5);
        }

        /* Benefits */
        .benefits {
          padding: 6rem 4rem;
          background: white;
        }

        .benefits-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 3rem;
          max-width: 1000px;
          margin: 0 auto;
          text-align: center;
        }

        .benefit-metric {
          font-family: 'Overpass', sans-serif;
          font-size: 4rem;
          font-weight: 700;
          color: var(--accent);
          line-height: 1;
        }

        .benefit-label {
          font-family: 'Overpass', sans-serif;
          font-size: 1.125rem;
          font-weight: 600;
          color: var(--text);
          margin: 0.5rem 0 1rem;
        }

        .benefit p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        /* Company Footer */
        .landing-footer {
          padding: 3rem 4rem;
          background: var(--bg-dark);
          border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-content {
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: 2rem;
        }

        .footer-brand {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        .footer-logo {
          font-family: 'Overpass', sans-serif;
          font-size: 1.25rem;
          font-weight: 600;
          color: white;
        }

        .footer-tagline {
          font-size: 0.875rem;
          color: rgba(255, 255, 255, 0.8);
        }

        .footer-division {
          font-size: 0.75rem;
          color: rgba(255, 255, 255, 0.5);
        }

        .footer-links {
          display: flex;
          gap: 2rem;
        }

        .footer-links a {
          font-size: 0.875rem;
          color: rgba(255, 255, 255, 0.7);
          text-decoration: none;
          transition: color 0.2s;
        }

        .footer-links a:hover {
          color: var(--accent);
        }

        /* CTA Footer */
        .cta-footer {
          padding: 6rem 4rem;
          background: var(--bg);
          text-align: center;
        }

        .cta-content h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text);
          margin: 0 0 1rem;
        }

        .cta-content > p {
          font-size: 1.125rem;
          color: var(--text-secondary);
          margin-bottom: 2rem;
        }

        .cta-note {
          margin-top: 1.5rem;
          font-size: 0.875rem;
          color: var(--text-light);
        }

        .cta-note a {
          color: var(--primary);
          text-decoration: none;
        }

        .cta-note a:hover {
          text-decoration: underline;
        }

        /* Modal */
        .modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.5);
          backdrop-filter: blur(4px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 2000;
          padding: 2rem;
        }

        .sign-in-modal {
          background: white;
          border-radius: 16px;
          padding: 2.5rem;
          width: 100%;
          max-width: 400px;
          position: relative;
          animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
        }

        .modal-close {
          position: absolute;
          top: 1rem;
          right: 1rem;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: none;
          border: none;
          color: var(--text-light);
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.2s;
        }

        .modal-close:hover {
          background: var(--bg);
          color: var(--text);
        }

        .modal-header {
          text-align: center;
          margin-bottom: 1.5rem;
        }

        .modal-header h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          margin: 0 0 0.25rem;
        }

        .modal-header p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          margin: 0;
        }

        .form-error {
          padding: 0.75rem 1rem;
          background: #fef2f2;
          color: #dc2626;
          border-radius: 8px;
          font-size: 0.875rem;
          margin-bottom: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          font-size: 0.875rem;
          font-weight: 500;
          margin-bottom: 0.5rem;
        }

        .form-group input {
          width: 100%;
          padding: 0.75rem 1rem;
          border: 1px solid var(--border);
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          transition: all 0.2s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(30, 74, 122, 0.1);
        }

        .submit-btn {
          width: 100%;
          padding: 0.875rem;
          background: var(--accent);
          color: white;
          border: none;
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .submit-btn:hover:not(:disabled) {
          background: var(--accent-hover);
        }

        .submit-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .modal-footer-text {
          text-align: center;
          font-size: 0.8125rem;
          color: var(--text-light);
          margin: 1.5rem 0 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
          .hero {
            grid-template-columns: 1fr;
            text-align: center;
          }

          .hero-content {
            max-width: 600px;
            margin: 0 auto;
          }

          .hero-subtitle {
            margin-left: auto;
            margin-right: auto;
          }

          .hero-ctas {
            justify-content: center;
          }

          .hero-visual {
            display: none;
          }

          .showcase-canvas {
            height: 240px;
          }

          .capability-pill {
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
          }

          .features-grid {
            grid-template-columns: repeat(2, 1fr);
          }

          .unified-features {
            grid-template-columns: repeat(2, 1fr);
          }

          .feature-highlight {
            grid-column: span 2;
          }

          .benefits-grid-4 {
            grid-template-columns: repeat(2, 1fr);
          }

          .palette-grid {
            grid-template-columns: repeat(5, 1fr);
          }
        }

        @media (max-width: 768px) {
          .landing-nav {
            padding: 1rem 1.5rem;
          }

          .nav-links {
            gap: 1rem;
          }

          .hero {
            padding: 6rem 1.5rem 3rem;
          }

          .hero h1 {
            font-size: 2.5rem;
          }

          .steps-container {
            flex-direction: column;
            gap: 0;
          }

          .step-connector {
            display: none;
          }

          .features-grid,
          .unified-features {
            grid-template-columns: 1fr;
          }

          .feature-highlight {
            grid-column: span 1;
          }

          .section-header h2 {
            font-size: 2rem;
          }

          .how-it-works,
          .features,
          .palette-section,
          .benefits,
          .cta-footer,
          .unified-showcase,
          .landing-footer {
            padding: 4rem 1.5rem;
          }

          .footer-content {
            flex-direction: column;
            text-align: center;
          }

          .footer-links {
            flex-direction: column;
            gap: 1rem;
          }

          .logo-byline {
            display: none;
          }

          .showcase-card {
            padding: 2rem 1.5rem;
          }

          .showcase-canvas {
            height: 200px;
          }

          .canvas-preview {
            width: 180px;
            height: 120px;
          }

          .capability-pill {
            display: none;
          }

          .showcase-features {
            flex-direction: column;
            gap: 1rem;
          }

          .showcase-tagline {
            font-size: 1.25rem;
          }

          .benefits-grid,
          .benefits-grid-4 {
            grid-template-columns: 1fr;
            gap: 2rem;
          }

          .palette-grid {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        @media (max-width: 480px) {
          .nav-links button:not(.nav-cta) {
            display: none;
          }

          .hero h1 {
            font-size: 2rem;
          }

          .cta-content h2 {
            font-size: 1.75rem;
          }

          .palette-grid {
            grid-template-columns: repeat(3, 1fr);
          }
        }
      `})]})}function A5e({user:e,onPasswordSet:t}){const[n,r]=fe.useState(""),[i,s]=fe.useState(""),[a,o]=fe.useState(!1),[u,h]=fe.useState(""),d=async p=>{if(p.preventDefault(),h(""),n.length<8){h("Password must be at least 8 characters long");return}if(!/[A-Z]/.test(n)){h("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(n)){h("Password must contain at least one lowercase letter");return}if(!/[0-9]/.test(n)){h("Password must contain at least one number");return}if(n!==i){h("Passwords do not match");return}o(!0);try{await xa.updatePassword(n),t()}catch(m){h(m.message||"Failed to set password. Please try again.")}finally{o(!1)}};return c.jsx("div",{className:"tpv-studio",children:c.jsx("div",{className:"tpv-studio__container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{maxWidth:"400px",width:"100%",padding:"2rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[c.jsx("h2",{style:{marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Welcome to TPV Studio"}),c.jsxs("p",{style:{marginBottom:"1.5rem",color:"#666",fontSize:"0.9rem"},children:["Please set a password for your account: ",c.jsx("strong",{children:e.email})]}),c.jsxs("form",{onSubmit:d,children:[c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"New Password"}),c.jsx("input",{type:"password",value:n,onChange:p=>r(p.target.value),placeholder:"Enter your password",required:!0,minLength:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"}}),c.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#666"},children:"At least 8 characters with uppercase, lowercase, and a number"})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Confirm Password"}),c.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Confirm your password",required:!0,minLength:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"}})]}),u&&c.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",background:"#fee",border:"1px solid #fcc",borderRadius:"4px",color:"#c00",fontSize:"0.9rem"},children:u}),c.jsx("button",{type:"submit",disabled:a,style:{width:"100%",padding:"0.75rem",background:a?"#ccc":"#007bff",color:"#fff",border:"none",borderRadius:"4px",fontSize:"1rem",fontWeight:"500",cursor:a?"not-allowed":"pointer"},children:a?"Setting Password...":"Set Password"})]})]})})})}function P5e(){const[e,t]=fe.useState(null),[n,r]=fe.useState(!0),[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),[u,h]=fe.useState(!1),[d,p]=fe.useState(!1),[m,g]=fe.useState(null),[v,w]=fe.useState(null),C=async()=>{try{const j=await xa.getSession();if(!(j!=null&&j.access_token)){h(!1);return}const I=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${j.access_token}`}});h(I.ok)}catch{console.error("[APP] Admin check failed"),h(!1)}},x=async j=>{try{console.log("[APP] Loading design from URL:",j);const{design:I}=await wf(j);if(I){k(I);const E=new URL(window.location);E.searchParams.delete("design"),window.history.replaceState({},"",E)}}catch(I){console.error("[APP] Failed to load design from URL:",I)}};fe.useEffect(()=>{xa.getSession().then(I=>{var U;const E=(I==null?void 0:I.user)||null;if(t(E),r(!1),E){const D=(U=E.user_metadata)==null?void 0:U.password_setup_complete;p(!D),C();const X=new URLSearchParams(window.location.search).get("design");X&&x(X)}});const{data:j}=xa.onAuthStateChange((I,E)=>{var D;const U=(E==null?void 0:E.user)||null;if(t(U),U){const R=(D=U.user_metadata)==null?void 0:D.password_setup_complete;p(!R),C()}else h(!1),p(!1)});return()=>j==null?void 0:j.unsubscribe()},[]);const k=j=>{g(j),w(j.name)},A=async()=>{p(!1);const j=await xa.getSession();t((j==null?void 0:j.user)||null)};return n?c.jsx("div",{className:"tpv-studio",children:c.jsx("div",{className:"tpv-studio__container",children:c.jsxs("div",{className:"tpv-studio__empty",children:[c.jsx("div",{className:"tpv-studio__spinner"}),c.jsx("p",{children:"Loading..."})]})})}):e?d?c.jsx(A5e,{user:e,onPasswordSet:A}):a?c.jsx("div",{className:"tpv-studio",children:c.jsx(w5e,{onClose:()=>o(!1)})}):c.jsx(zz,{children:c.jsxs("div",{className:"tpv-studio",children:[c.jsx(g5e,{onShowDesigns:()=>s(!0),onShowAdmin:()=>o(!0),isAdmin:u,currentDesignName:v}),c.jsx("main",{className:"tpv-studio__container tpv-studio__container--full",children:c.jsx(m5e,{loadedDesign:m})}),i&&c.jsx(b5e,{onClose:()=>s(!1),onLoadDesign:k})]})}):c.jsx(j5e,{})}Qb.createRoot(document.getElementById("root")).render(c.jsx(Te.StrictMode,{children:c.jsx(P5e,{})}))});export default N5e();
//# sourceMappingURL=index-DmqHOoil.js.map
