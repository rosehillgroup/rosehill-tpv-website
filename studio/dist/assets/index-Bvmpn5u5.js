var YL=Object.defineProperty;var XL=(e,t,n)=>t in e?YL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var KL=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qf=(e,t,n)=>XL(e,typeof t!="symbol"?t+"":t,n);var $5e=KL((Ps,Ns)=>{function ZL(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nj(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Oj={exports:{}},Ig={},Rj={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=Symbol.for("react.element"),QL=Symbol.for("react.portal"),JL=Symbol.for("react.fragment"),eI=Symbol.for("react.strict_mode"),tI=Symbol.for("react.profiler"),nI=Symbol.for("react.provider"),rI=Symbol.for("react.context"),iI=Symbol.for("react.forward_ref"),sI=Symbol.for("react.suspense"),aI=Symbol.for("react.memo"),oI=Symbol.for("react.lazy"),c2=Symbol.iterator;function lI(e){return e===null||typeof e!="object"?null:(e=c2&&e[c2]||e["@@iterator"],typeof e=="function"?e:null)}var Mj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lj=Object.assign,Ij={};function sd(e,t,n){this.props=e,this.context=t,this.refs=Ij,this.updater=n||Mj}sd.prototype.isReactComponent={};sd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $j(){}$j.prototype=sd.prototype;function h1(e,t,n){this.props=e,this.context=t,this.refs=Ij,this.updater=n||Mj}var f1=h1.prototype=new $j;f1.constructor=h1;Lj(f1,sd.prototype);f1.isPureReactComponent=!0;var u2=Array.isArray,Dj=Object.prototype.hasOwnProperty,p1={current:null},zj={key:!0,ref:!0,__self:!0,__source:!0};function Fj(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Dj.call(t,r)&&!zj.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var u=Array(o),d=0;d<o;d++)u[d]=arguments[d+2];i.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:vf,type:e,key:s,ref:a,props:i,_owner:p1.current}}function cI(e,t){return{$$typeof:vf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function m1(e){return typeof e=="object"&&e!==null&&e.$$typeof===vf}function uI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var d2=/\/+/g;function U0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uI(""+e.key):t.toString(36)}function em(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case vf:case QL:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+U0(a,0):r,u2(i)?(n="",e!=null&&(n=e.replace(d2,"$&/")+"/"),em(i,t,n,"",function(d){return d})):i!=null&&(m1(i)&&(i=cI(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(d2,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",u2(e))for(var o=0;o<e.length;o++){s=e[o];var u=r+U0(s,o);a+=em(s,t,n,u,i)}else if(u=lI(e),typeof u=="function")for(e=u.call(e),o=0;!(s=e.next()).done;)s=s.value,u=r+U0(s,o++),a+=em(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Yf(e,t,n){if(e==null)return e;var r=[],i=0;return em(e,r,"","",function(s){return t.call(n,s,i++)}),r}function dI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ji={current:null},tm={transition:null},hI={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:tm,ReactCurrentOwner:p1};function Bj(){throw Error("act(...) is not supported in production builds of React.")}jn.Children={map:Yf,forEach:function(e,t,n){Yf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yf(e,function(){t++}),t},toArray:function(e){return Yf(e,function(t){return t})||[]},only:function(e){if(!m1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jn.Component=sd;jn.Fragment=JL;jn.Profiler=tI;jn.PureComponent=h1;jn.StrictMode=eI;jn.Suspense=sI;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hI;jn.act=Bj;jn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Lj({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=p1.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Dj.call(t,u)&&!zj.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var d=0;d<u;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:vf,type:e.type,key:i,ref:s,props:r,_owner:a}};jn.createContext=function(e){return e={$$typeof:rI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nI,_context:e},e.Consumer=e};jn.createElement=Fj;jn.createFactory=function(e){var t=Fj.bind(null,e);return t.type=e,t};jn.createRef=function(){return{current:null}};jn.forwardRef=function(e){return{$$typeof:iI,render:e}};jn.isValidElement=m1;jn.lazy=function(e){return{$$typeof:oI,_payload:{_status:-1,_result:e},_init:dI}};jn.memo=function(e,t){return{$$typeof:aI,type:e,compare:t===void 0?null:t}};jn.startTransition=function(e){var t=tm.transition;tm.transition={};try{e()}finally{tm.transition=t}};jn.unstable_act=Bj;jn.useCallback=function(e,t){return Ji.current.useCallback(e,t)};jn.useContext=function(e){return Ji.current.useContext(e)};jn.useDebugValue=function(){};jn.useDeferredValue=function(e){return Ji.current.useDeferredValue(e)};jn.useEffect=function(e,t){return Ji.current.useEffect(e,t)};jn.useId=function(){return Ji.current.useId()};jn.useImperativeHandle=function(e,t,n){return Ji.current.useImperativeHandle(e,t,n)};jn.useInsertionEffect=function(e,t){return Ji.current.useInsertionEffect(e,t)};jn.useLayoutEffect=function(e,t){return Ji.current.useLayoutEffect(e,t)};jn.useMemo=function(e,t){return Ji.current.useMemo(e,t)};jn.useReducer=function(e,t,n){return Ji.current.useReducer(e,t,n)};jn.useRef=function(e){return Ji.current.useRef(e)};jn.useState=function(e){return Ji.current.useState(e)};jn.useSyncExternalStore=function(e,t,n){return Ji.current.useSyncExternalStore(e,t,n)};jn.useTransition=function(){return Ji.current.useTransition()};jn.version="18.3.1";Rj.exports=jn;var fe=Rj.exports;const je=vl(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI=fe,pI=Symbol.for("react.element"),mI=Symbol.for("react.fragment"),gI=Object.prototype.hasOwnProperty,yI=fI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bI={key:!0,ref:!0,__self:!0,__source:!0};function Uj(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gI.call(t,r)&&!bI.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:pI,type:e,key:s,ref:a,props:i,_owner:yI.current}}Ig.Fragment=mI;Ig.jsx=Uj;Ig.jsxs=Uj;Oj.exports=Ig;var l=Oj.exports,nv={},Hj={exports:{}},Ls={},Wj={exports:{}},Vj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ze,xe){var Re=ze.length;ze.push(xe);e:for(;0<Re;){var _e=Re-1>>>1,Pe=ze[_e];if(0<i(Pe,xe))ze[_e]=xe,ze[Re]=Pe,Re=_e;else break e}}function n(ze){return ze.length===0?null:ze[0]}function r(ze){if(ze.length===0)return null;var xe=ze[0],Re=ze.pop();if(Re!==xe){ze[0]=Re;e:for(var _e=0,Pe=ze.length,it=Pe>>>1;_e<it;){var tt=2*(_e+1)-1,Ue=ze[tt],ut=tt+1,de=ze[ut];if(0>i(Ue,Re))ut<Pe&&0>i(de,Ue)?(ze[_e]=de,ze[ut]=Re,_e=ut):(ze[_e]=Ue,ze[tt]=Re,_e=tt);else if(ut<Pe&&0>i(de,Re))ze[_e]=de,ze[ut]=Re,_e=ut;else break e}}return xe}function i(ze,xe){var Re=ze.sortIndex-xe.sortIndex;return Re!==0?Re:ze.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],d=[],h=1,p=null,m=3,g=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ze){for(var xe=n(d);xe!==null;){if(xe.callback===null)r(d);else if(xe.startTime<=ze)r(d),xe.sortIndex=xe.expirationTime,t(u,xe);else break;xe=n(d)}}function O(ze){if(w=!1,j(ze),!v)if(n(u)!==null)v=!0,Ee(I);else{var xe=n(d);xe!==null&&ke(O,xe.startTime-ze)}}function I(ze,xe){v=!1,w&&(w=!1,x(D),D=-1),g=!0;var Re=m;try{for(j(xe),p=n(u);p!==null&&(!(p.expirationTime>xe)||ze&&!ce());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,m=p.priorityLevel;var Pe=_e(p.expirationTime<=xe);xe=e.unstable_now(),typeof Pe=="function"?p.callback=Pe:p===n(u)&&r(u),j(xe)}else r(u);p=n(u)}if(p!==null)var it=!0;else{var tt=n(d);tt!==null&&ke(O,tt.startTime-xe),it=!1}return it}finally{p=null,m=Re,g=!1}}var E=!1,U=null,D=-1,R=5,W=-1;function ce(){return!(e.unstable_now()-W<R)}function te(){if(U!==null){var ze=e.unstable_now();W=ze;var xe=!0;try{xe=U(!0,ze)}finally{xe?me():(E=!1,U=null)}}else E=!1}var me;if(typeof k=="function")me=function(){k(te)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ge=H.port2;H.port1.onmessage=te,me=function(){ge.postMessage(null)}}else me=function(){S(te,0)};function Ee(ze){U=ze,E||(E=!0,me())}function ke(ze,xe){D=S(function(){ze(e.unstable_now())},xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ze){ze.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Ee(I))},e.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ze?Math.floor(1e3/ze):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(ze){switch(m){case 1:case 2:case 3:var xe=3;break;default:xe=m}var Re=m;m=xe;try{return ze()}finally{m=Re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ze,xe){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var Re=m;m=ze;try{return xe()}finally{m=Re}},e.unstable_scheduleCallback=function(ze,xe,Re){var _e=e.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?_e+Re:_e):Re=_e,ze){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=Re+Pe,ze={id:h++,callback:xe,priorityLevel:ze,startTime:Re,expirationTime:Pe,sortIndex:-1},Re>_e?(ze.sortIndex=Re,t(d,ze),n(u)===null&&ze===n(d)&&(w?(x(D),D=-1):w=!0,ke(O,Re-_e))):(ze.sortIndex=Pe,t(u,ze),v||g||(v=!0,Ee(I))),ze},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(ze){var xe=m;return function(){var Re=m;m=xe;try{return ze.apply(this,arguments)}finally{m=Re}}}})(Vj);Wj.exports=Vj;var vI=Wj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=fe,Rs=vI;function Nt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gj=new Set,zh={};function pc(e,t){Fu(e,t),Fu(e+"Capture",t)}function Fu(e,t){for(zh[e]=t,e=0;e<t.length;e++)Gj.add(t[e])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rv=Object.prototype.hasOwnProperty,wI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h2={},f2={};function _I(e){return rv.call(f2,e)?!0:rv.call(h2,e)?!1:wI.test(e)?f2[e]=!0:(h2[e]=!0,!1)}function kI(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SI(e,t,n,r){if(t===null||typeof t>"u"||kI(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function es(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ai[e]=new es(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ai[t]=new es(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ai[e]=new es(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ai[e]=new es(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ai[e]=new es(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ai[e]=new es(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ai[e]=new es(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ai[e]=new es(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ai[e]=new es(e,5,!1,e.toLowerCase(),null,!1,!1)});var g1=/[\-:]([a-z])/g;function y1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g1,y1);Ai[t]=new es(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g1,y1);Ai[t]=new es(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g1,y1);Ai[t]=new es(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ai[e]=new es(e,1,!1,e.toLowerCase(),null,!1,!1)});Ai.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ai[e]=new es(e,1,!1,e.toLowerCase(),null,!0,!0)});function b1(e,t,n,r){var i=Ai.hasOwnProperty(t)?Ai[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SI(t,n,i,r)&&(n=null),r||i===null?_I(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Oo=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xf=Symbol.for("react.element"),du=Symbol.for("react.portal"),hu=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),iv=Symbol.for("react.profiler"),qj=Symbol.for("react.provider"),Yj=Symbol.for("react.context"),x1=Symbol.for("react.forward_ref"),sv=Symbol.for("react.suspense"),av=Symbol.for("react.suspense_list"),w1=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),Xj=Symbol.for("react.offscreen"),p2=Symbol.iterator;function Pd(e){return e===null||typeof e!="object"?null:(e=p2&&e[p2]||e["@@iterator"],typeof e=="function"?e:null)}var zr=Object.assign,H0;function Jd(e){if(H0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H0=t&&t[1]||""}return`
`+H0+e}var W0=!1;function V0(e,t){if(!e||W0)return"";W0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=o);break}}}finally{W0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jd(e):""}function CI(e){switch(e.tag){case 5:return Jd(e.type);case 16:return Jd("Lazy");case 13:return Jd("Suspense");case 19:return Jd("SuspenseList");case 0:case 2:case 15:return e=V0(e.type,!1),e;case 11:return e=V0(e.type.render,!1),e;case 1:return e=V0(e.type,!0),e;default:return""}}function ov(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hu:return"Fragment";case du:return"Portal";case iv:return"Profiler";case v1:return"StrictMode";case sv:return"Suspense";case av:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yj:return(e.displayName||"Context")+".Consumer";case qj:return(e._context.displayName||"Context")+".Provider";case x1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case w1:return t=e.displayName||null,t!==null?t:ov(e.type)||"Memo";case Go:t=e._payload,e=e._init;try{return ov(e(t))}catch{}}return null}function EI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ov(t);case 8:return t===v1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TI(e){var t=Kj(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kf(e){e._valueTracker||(e._valueTracker=TI(e))}function Zj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Kj(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Cm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lv(e,t){var n=t.checked;return zr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function m2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=hl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qj(e,t){t=t.checked,t!=null&&b1(e,"checked",t,!1)}function cv(e,t){Qj(e,t);var n=hl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uv(e,t.type,n):t.hasOwnProperty("defaultValue")&&uv(e,t.type,hl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function g2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function uv(e,t,n){(t!=="number"||Cm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var eh=Array.isArray;function ju(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+hl(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function dv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Nt(91));return zr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function y2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Nt(92));if(eh(n)){if(1<n.length)throw Error(Nt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hl(n)}}function Jj(e,t){var n=hl(t.value),r=hl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function b2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function e3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?e3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zf,t3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zf=Zf||document.createElement("div"),Zf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jI=["Webkit","ms","Moz","O"];Object.keys(wh).forEach(function(e){jI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wh[t]=wh[e]})});function n3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wh.hasOwnProperty(e)&&wh[e]?(""+t).trim():t+"px"}function r3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=n3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var AI=zr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fv(e,t){if(t){if(AI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Nt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Nt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Nt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Nt(62))}}function pv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mv=null;function _1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gv=null,Au=null,Pu=null;function v2(e){if(e=_f(e)){if(typeof gv!="function")throw Error(Nt(280));var t=e.stateNode;t&&(t=Bg(t),gv(e.stateNode,e.type,t))}}function i3(e){Au?Pu?Pu.push(e):Pu=[e]:Au=e}function s3(){if(Au){var e=Au,t=Pu;if(Pu=Au=null,v2(e),t)for(e=0;e<t.length;e++)v2(t[e])}}function a3(e,t){return e(t)}function o3(){}var G0=!1;function l3(e,t,n){if(G0)return e(t,n);G0=!0;try{return a3(e,t,n)}finally{G0=!1,(Au!==null||Pu!==null)&&(o3(),s3())}}function Bh(e,t){var n=e.stateNode;if(n===null)return null;var r=Bg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Nt(231,t,typeof n));return n}var yv=!1;if(Eo)try{var Nd={};Object.defineProperty(Nd,"passive",{get:function(){yv=!0}}),window.addEventListener("test",Nd,Nd),window.removeEventListener("test",Nd,Nd)}catch{yv=!1}function PI(e,t,n,r,i,s,a,o,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var _h=!1,Em=null,Tm=!1,bv=null,NI={onError:function(e){_h=!0,Em=e}};function OI(e,t,n,r,i,s,a,o,u){_h=!1,Em=null,PI.apply(NI,arguments)}function RI(e,t,n,r,i,s,a,o,u){if(OI.apply(this,arguments),_h){if(_h){var d=Em;_h=!1,Em=null}else throw Error(Nt(198));Tm||(Tm=!0,bv=d)}}function mc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function c3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x2(e){if(mc(e)!==e)throw Error(Nt(188))}function MI(e){var t=e.alternate;if(!t){if(t=mc(e),t===null)throw Error(Nt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return x2(i),e;if(s===r)return x2(i),t;s=s.sibling}throw Error(Nt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Nt(189))}}if(n.alternate!==r)throw Error(Nt(190))}if(n.tag!==3)throw Error(Nt(188));return n.stateNode.current===n?e:t}function u3(e){return e=MI(e),e!==null?d3(e):null}function d3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=d3(e);if(t!==null)return t;e=e.sibling}return null}var h3=Rs.unstable_scheduleCallback,w2=Rs.unstable_cancelCallback,LI=Rs.unstable_shouldYield,II=Rs.unstable_requestPaint,Kr=Rs.unstable_now,$I=Rs.unstable_getCurrentPriorityLevel,k1=Rs.unstable_ImmediatePriority,f3=Rs.unstable_UserBlockingPriority,jm=Rs.unstable_NormalPriority,DI=Rs.unstable_LowPriority,p3=Rs.unstable_IdlePriority,$g=null,io=null;function zI(e){if(io&&typeof io.onCommitFiberRoot=="function")try{io.onCommitFiberRoot($g,e,void 0,(e.current.flags&128)===128)}catch{}}var Sa=Math.clz32?Math.clz32:UI,FI=Math.log,BI=Math.LN2;function UI(e){return e>>>=0,e===0?32:31-(FI(e)/BI|0)|0}var Qf=64,Jf=4194304;function th(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Am(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=th(o):(s&=a,s!==0&&(r=th(s)))}else a=n&~i,a!==0?r=th(a):s!==0&&(r=th(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sa(t),i=1<<n,r|=e[n],t&=~i;return r}function HI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Sa(s),o=1<<a,u=i[a];u===-1?(!(o&n)||o&r)&&(i[a]=HI(o,t)):u<=t&&(e.expiredLanes|=o),s&=~o}}function vv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function m3(){var e=Qf;return Qf<<=1,!(Qf&4194240)&&(Qf=64),e}function q0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sa(t),e[t]=n}function VI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Sa(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function S1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var er=0;function g3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var y3,C1,b3,v3,x3,xv=!1,ep=[],il=null,sl=null,al=null,Uh=new Map,Hh=new Map,Xo=[],GI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _2(e,t){switch(e){case"focusin":case"focusout":il=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":Uh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hh.delete(t.pointerId)}}function Od(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_f(t),t!==null&&C1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qI(e,t,n,r,i){switch(t){case"focusin":return il=Od(il,e,t,n,r,i),!0;case"dragenter":return sl=Od(sl,e,t,n,r,i),!0;case"mouseover":return al=Od(al,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Uh.set(s,Od(Uh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hh.set(s,Od(Hh.get(s)||null,e,t,n,r,i)),!0}return!1}function w3(e){var t=Yl(e.target);if(t!==null){var n=mc(t);if(n!==null){if(t=n.tag,t===13){if(t=c3(n),t!==null){e.blockedOn=t,x3(e.priority,function(){b3(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);mv=r,n.target.dispatchEvent(r),mv=null}else return t=_f(n),t!==null&&C1(t),e.blockedOn=n,!1;t.shift()}return!0}function k2(e,t,n){nm(e)&&n.delete(t)}function YI(){xv=!1,il!==null&&nm(il)&&(il=null),sl!==null&&nm(sl)&&(sl=null),al!==null&&nm(al)&&(al=null),Uh.forEach(k2),Hh.forEach(k2)}function Rd(e,t){e.blockedOn===t&&(e.blockedOn=null,xv||(xv=!0,Rs.unstable_scheduleCallback(Rs.unstable_NormalPriority,YI)))}function Wh(e){function t(i){return Rd(i,e)}if(0<ep.length){Rd(ep[0],e);for(var n=1;n<ep.length;n++){var r=ep[n];r.blockedOn===e&&(r.blockedOn=null)}}for(il!==null&&Rd(il,e),sl!==null&&Rd(sl,e),al!==null&&Rd(al,e),Uh.forEach(t),Hh.forEach(t),n=0;n<Xo.length;n++)r=Xo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xo.length&&(n=Xo[0],n.blockedOn===null);)w3(n),n.blockedOn===null&&Xo.shift()}var Nu=Oo.ReactCurrentBatchConfig,Pm=!0;function XI(e,t,n,r){var i=er,s=Nu.transition;Nu.transition=null;try{er=1,E1(e,t,n,r)}finally{er=i,Nu.transition=s}}function KI(e,t,n,r){var i=er,s=Nu.transition;Nu.transition=null;try{er=4,E1(e,t,n,r)}finally{er=i,Nu.transition=s}}function E1(e,t,n,r){if(Pm){var i=wv(e,t,n,r);if(i===null)ry(e,t,r,Nm,n),_2(e,r);else if(qI(i,e,t,n,r))r.stopPropagation();else if(_2(e,r),t&4&&-1<GI.indexOf(e)){for(;i!==null;){var s=_f(i);if(s!==null&&y3(s),s=wv(e,t,n,r),s===null&&ry(e,t,r,Nm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ry(e,t,r,null,n)}}var Nm=null;function wv(e,t,n,r){if(Nm=null,e=_1(r),e=Yl(e),e!==null)if(t=mc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=c3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nm=e,null}function _3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($I()){case k1:return 1;case f3:return 4;case jm:case DI:return 16;case p3:return 536870912;default:return 16}default:return 16}}var el=null,T1=null,rm=null;function k3(){if(rm)return rm;var e,t=T1,n=t.length,r,i="value"in el?el.value:el.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return rm=i.slice(e,1<r?1-r:void 0)}function im(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tp(){return!0}function S2(){return!1}function Is(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tp:S2,this.isPropagationStopped=S2,this}return zr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tp)},persist:function(){},isPersistent:tp}),t}var ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j1=Is(ad),wf=zr({},ad,{view:0,detail:0}),ZI=Is(wf),Y0,X0,Md,Dg=zr({},wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Md&&(Md&&e.type==="mousemove"?(Y0=e.screenX-Md.screenX,X0=e.screenY-Md.screenY):X0=Y0=0,Md=e),Y0)},movementY:function(e){return"movementY"in e?e.movementY:X0}}),C2=Is(Dg),QI=zr({},Dg,{dataTransfer:0}),JI=Is(QI),e8=zr({},wf,{relatedTarget:0}),K0=Is(e8),t8=zr({},ad,{animationName:0,elapsedTime:0,pseudoElement:0}),n8=Is(t8),r8=zr({},ad,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),i8=Is(r8),s8=zr({},ad,{data:0}),E2=Is(s8),a8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l8[e])?!!t[e]:!1}function A1(){return c8}var u8=zr({},wf,{key:function(e){if(e.key){var t=a8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=im(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A1,charCode:function(e){return e.type==="keypress"?im(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?im(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),d8=Is(u8),h8=zr({},Dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T2=Is(h8),f8=zr({},wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A1}),p8=Is(f8),m8=zr({},ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),g8=Is(m8),y8=zr({},Dg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b8=Is(y8),v8=[9,13,27,32],P1=Eo&&"CompositionEvent"in window,kh=null;Eo&&"documentMode"in document&&(kh=document.documentMode);var x8=Eo&&"TextEvent"in window&&!kh,S3=Eo&&(!P1||kh&&8<kh&&11>=kh),j2=" ",A2=!1;function C3(e,t){switch(e){case"keyup":return v8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fu=!1;function w8(e,t){switch(e){case"compositionend":return E3(t);case"keypress":return t.which!==32?null:(A2=!0,j2);case"textInput":return e=t.data,e===j2&&A2?null:e;default:return null}}function _8(e,t){if(fu)return e==="compositionend"||!P1&&C3(e,t)?(e=k3(),rm=T1=el=null,fu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return S3&&t.locale!=="ko"?null:t.data;default:return null}}var k8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!k8[e.type]:t==="textarea"}function T3(e,t,n,r){i3(r),t=Om(t,"onChange"),0<t.length&&(n=new j1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Sh=null,Vh=null;function S8(e){D3(e,0)}function zg(e){var t=gu(e);if(Zj(t))return e}function C8(e,t){if(e==="change")return t}var j3=!1;if(Eo){var Z0;if(Eo){var Q0="oninput"in document;if(!Q0){var N2=document.createElement("div");N2.setAttribute("oninput","return;"),Q0=typeof N2.oninput=="function"}Z0=Q0}else Z0=!1;j3=Z0&&(!document.documentMode||9<document.documentMode)}function O2(){Sh&&(Sh.detachEvent("onpropertychange",A3),Vh=Sh=null)}function A3(e){if(e.propertyName==="value"&&zg(Vh)){var t=[];T3(t,Vh,e,_1(e)),l3(S8,t)}}function E8(e,t,n){e==="focusin"?(O2(),Sh=t,Vh=n,Sh.attachEvent("onpropertychange",A3)):e==="focusout"&&O2()}function T8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zg(Vh)}function j8(e,t){if(e==="click")return zg(t)}function A8(e,t){if(e==="input"||e==="change")return zg(t)}function P8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Aa=typeof Object.is=="function"?Object.is:P8;function Gh(e,t){if(Aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rv.call(t,i)||!Aa(e[i],t[i]))return!1}return!0}function R2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M2(e,t){var n=R2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R2(n)}}function P3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?P3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function N3(){for(var e=window,t=Cm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Cm(e.document)}return t}function N1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function N8(e){var t=N3(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&P3(n.ownerDocument.documentElement,n)){if(r!==null&&N1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=M2(n,s);var a=M2(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var O8=Eo&&"documentMode"in document&&11>=document.documentMode,pu=null,_v=null,Ch=null,kv=!1;function L2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kv||pu==null||pu!==Cm(r)||(r=pu,"selectionStart"in r&&N1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ch&&Gh(Ch,r)||(Ch=r,r=Om(_v,"onSelect"),0<r.length&&(t=new j1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pu)))}function np(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mu={animationend:np("Animation","AnimationEnd"),animationiteration:np("Animation","AnimationIteration"),animationstart:np("Animation","AnimationStart"),transitionend:np("Transition","TransitionEnd")},J0={},O3={};Eo&&(O3=document.createElement("div").style,"AnimationEvent"in window||(delete mu.animationend.animation,delete mu.animationiteration.animation,delete mu.animationstart.animation),"TransitionEvent"in window||delete mu.transitionend.transition);function Fg(e){if(J0[e])return J0[e];if(!mu[e])return e;var t=mu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in O3)return J0[e]=t[n];return e}var R3=Fg("animationend"),M3=Fg("animationiteration"),L3=Fg("animationstart"),I3=Fg("transitionend"),$3=new Map,I2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(e,t){$3.set(e,t),pc(t,[e])}for(var ey=0;ey<I2.length;ey++){var ty=I2[ey],R8=ty.toLowerCase(),M8=ty[0].toUpperCase()+ty.slice(1);xl(R8,"on"+M8)}xl(R3,"onAnimationEnd");xl(M3,"onAnimationIteration");xl(L3,"onAnimationStart");xl("dblclick","onDoubleClick");xl("focusin","onFocus");xl("focusout","onBlur");xl(I3,"onTransitionEnd");Fu("onMouseEnter",["mouseout","mouseover"]);Fu("onMouseLeave",["mouseout","mouseover"]);Fu("onPointerEnter",["pointerout","pointerover"]);Fu("onPointerLeave",["pointerout","pointerover"]);pc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pc("onBeforeInput",["compositionend","keypress","textInput","paste"]);pc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L8=new Set("cancel close invalid load scroll toggle".split(" ").concat(nh));function $2(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,RI(r,t,void 0,e),e.currentTarget=null}function D3(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],u=o.instance,d=o.currentTarget;if(o=o.listener,u!==s&&i.isPropagationStopped())break e;$2(i,o,d),s=u}else for(a=0;a<r.length;a++){if(o=r[a],u=o.instance,d=o.currentTarget,o=o.listener,u!==s&&i.isPropagationStopped())break e;$2(i,o,d),s=u}}}if(Tm)throw e=bv,Tm=!1,bv=null,e}function kr(e,t){var n=t[jv];n===void 0&&(n=t[jv]=new Set);var r=e+"__bubble";n.has(r)||(z3(t,e,2,!1),n.add(r))}function ny(e,t,n){var r=0;t&&(r|=4),z3(n,e,r,t)}var rp="_reactListening"+Math.random().toString(36).slice(2);function qh(e){if(!e[rp]){e[rp]=!0,Gj.forEach(function(n){n!=="selectionchange"&&(L8.has(n)||ny(n,!1,e),ny(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rp]||(t[rp]=!0,ny("selectionchange",!1,t))}}function z3(e,t,n,r){switch(_3(t)){case 1:var i=XI;break;case 4:i=KI;break;default:i=E1}n=i.bind(null,t,n,e),i=void 0,!yv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ry(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Yl(o),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}o=o.parentNode}}r=r.return}l3(function(){var d=s,h=_1(n),p=[];e:{var m=$3.get(e);if(m!==void 0){var g=j1,v=e;switch(e){case"keypress":if(im(n)===0)break e;case"keydown":case"keyup":g=d8;break;case"focusin":v="focus",g=K0;break;case"focusout":v="blur",g=K0;break;case"beforeblur":case"afterblur":g=K0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=C2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=JI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=p8;break;case R3:case M3:case L3:g=n8;break;case I3:g=g8;break;case"scroll":g=ZI;break;case"wheel":g=b8;break;case"copy":case"cut":case"paste":g=i8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=T2}var w=(t&4)!==0,S=!w&&e==="scroll",x=w?m!==null?m+"Capture":null:m;w=[];for(var k=d,j;k!==null;){j=k;var O=j.stateNode;if(j.tag===5&&O!==null&&(j=O,x!==null&&(O=Bh(k,x),O!=null&&w.push(Yh(k,O,j)))),S)break;k=k.return}0<w.length&&(m=new g(m,v,null,n,h),p.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==mv&&(v=n.relatedTarget||n.fromElement)&&(Yl(v)||v[To]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=d,v=v?Yl(v):null,v!==null&&(S=mc(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=d),g!==v)){if(w=C2,O="onMouseLeave",x="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(w=T2,O="onPointerLeave",x="onPointerEnter",k="pointer"),S=g==null?m:gu(g),j=v==null?m:gu(v),m=new w(O,k+"leave",g,n,h),m.target=S,m.relatedTarget=j,O=null,Yl(h)===d&&(w=new w(x,k+"enter",v,n,h),w.target=j,w.relatedTarget=S,O=w),S=O,g&&v)t:{for(w=g,x=v,k=0,j=w;j;j=Cc(j))k++;for(j=0,O=x;O;O=Cc(O))j++;for(;0<k-j;)w=Cc(w),k--;for(;0<j-k;)x=Cc(x),j--;for(;k--;){if(w===x||x!==null&&w===x.alternate)break t;w=Cc(w),x=Cc(x)}w=null}else w=null;g!==null&&D2(p,m,g,w,!1),v!==null&&S!==null&&D2(p,S,v,w,!0)}}e:{if(m=d?gu(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var I=C8;else if(P2(m))if(j3)I=A8;else{I=T8;var E=E8}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=j8);if(I&&(I=I(e,d))){T3(p,I,n,h);break e}E&&E(e,m,d),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&uv(m,"number",m.value)}switch(E=d?gu(d):window,e){case"focusin":(P2(E)||E.contentEditable==="true")&&(pu=E,_v=d,Ch=null);break;case"focusout":Ch=_v=pu=null;break;case"mousedown":kv=!0;break;case"contextmenu":case"mouseup":case"dragend":kv=!1,L2(p,n,h);break;case"selectionchange":if(O8)break;case"keydown":case"keyup":L2(p,n,h)}var U;if(P1)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else fu?C3(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(S3&&n.locale!=="ko"&&(fu||D!=="onCompositionStart"?D==="onCompositionEnd"&&fu&&(U=k3()):(el=h,T1="value"in el?el.value:el.textContent,fu=!0)),E=Om(d,D),0<E.length&&(D=new E2(D,e,null,n,h),p.push({event:D,listeners:E}),U?D.data=U:(U=E3(n),U!==null&&(D.data=U)))),(U=x8?w8(e,n):_8(e,n))&&(d=Om(d,"onBeforeInput"),0<d.length&&(h=new E2("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=U))}D3(p,t)})}function Yh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Om(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bh(e,n),s!=null&&r.unshift(Yh(e,s,i)),s=Bh(e,t),s!=null&&r.push(Yh(e,s,i))),e=e.return}return r}function Cc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function D2(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,u=o.alternate,d=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&d!==null&&(o=d,i?(u=Bh(n,s),u!=null&&a.unshift(Yh(n,u,o))):i||(u=Bh(n,s),u!=null&&a.push(Yh(n,u,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var I8=/\r\n?/g,$8=/\u0000|\uFFFD/g;function z2(e){return(typeof e=="string"?e:""+e).replace(I8,`
`).replace($8,"")}function ip(e,t,n){if(t=z2(t),z2(e)!==t&&n)throw Error(Nt(425))}function Rm(){}var Sv=null,Cv=null;function Ev(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tv=typeof setTimeout=="function"?setTimeout:void 0,D8=typeof clearTimeout=="function"?clearTimeout:void 0,F2=typeof Promise=="function"?Promise:void 0,z8=typeof queueMicrotask=="function"?queueMicrotask:typeof F2<"u"?function(e){return F2.resolve(null).then(e).catch(F8)}:Tv;function F8(e){setTimeout(function(){throw e})}function iy(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Wh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wh(t)}function ol(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function B2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var od=Math.random().toString(36).slice(2),Ka="__reactFiber$"+od,Xh="__reactProps$"+od,To="__reactContainer$"+od,jv="__reactEvents$"+od,B8="__reactListeners$"+od,U8="__reactHandles$"+od;function Yl(e){var t=e[Ka];if(t)return t;for(var n=e.parentNode;n;){if(t=n[To]||n[Ka]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=B2(e);e!==null;){if(n=e[Ka])return n;e=B2(e)}return t}e=n,n=e.parentNode}return null}function _f(e){return e=e[Ka]||e[To],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Nt(33))}function Bg(e){return e[Xh]||null}var Av=[],yu=-1;function wl(e){return{current:e}}function Er(e){0>yu||(e.current=Av[yu],Av[yu]=null,yu--)}function vr(e,t){yu++,Av[yu]=e.current,e.current=t}var fl={},Hi=wl(fl),hs=wl(!1),sc=fl;function Bu(e,t){var n=e.type.contextTypes;if(!n)return fl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fs(e){return e=e.childContextTypes,e!=null}function Mm(){Er(hs),Er(Hi)}function U2(e,t,n){if(Hi.current!==fl)throw Error(Nt(168));vr(Hi,t),vr(hs,n)}function F3(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Nt(108,EI(e)||"Unknown",i));return zr({},n,r)}function Lm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fl,sc=Hi.current,vr(Hi,e),vr(hs,hs.current),!0}function H2(e,t,n){var r=e.stateNode;if(!r)throw Error(Nt(169));n?(e=F3(e,t,sc),r.__reactInternalMemoizedMergedChildContext=e,Er(hs),Er(Hi),vr(Hi,e)):Er(hs),vr(hs,n)}var bo=null,Ug=!1,sy=!1;function B3(e){bo===null?bo=[e]:bo.push(e)}function H8(e){Ug=!0,B3(e)}function _l(){if(!sy&&bo!==null){sy=!0;var e=0,t=er;try{var n=bo;for(er=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bo=null,Ug=!1}catch(i){throw bo!==null&&(bo=bo.slice(e+1)),h3(k1,_l),i}finally{er=t,sy=!1}}return null}var bu=[],vu=0,Im=null,$m=0,Us=[],Hs=0,ac=null,wo=1,_o="";function Il(e,t){bu[vu++]=$m,bu[vu++]=Im,Im=e,$m=t}function U3(e,t,n){Us[Hs++]=wo,Us[Hs++]=_o,Us[Hs++]=ac,ac=e;var r=wo;e=_o;var i=32-Sa(r)-1;r&=~(1<<i),n+=1;var s=32-Sa(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,wo=1<<32-Sa(t)+i|n<<i|r,_o=s+e}else wo=1<<s|n<<i|r,_o=e}function O1(e){e.return!==null&&(Il(e,1),U3(e,1,0))}function R1(e){for(;e===Im;)Im=bu[--vu],bu[vu]=null,$m=bu[--vu],bu[vu]=null;for(;e===ac;)ac=Us[--Hs],Us[Hs]=null,_o=Us[--Hs],Us[Hs]=null,wo=Us[--Hs],Us[Hs]=null}var Os=null,As=null,Pr=!1,wa=null;function H3(e,t){var n=Vs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function W2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Os=e,As=ol(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Os=e,As=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ac!==null?{id:wo,overflow:_o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Os=e,As=null,!0):!1;default:return!1}}function Pv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nv(e){if(Pr){var t=As;if(t){var n=t;if(!W2(e,t)){if(Pv(e))throw Error(Nt(418));t=ol(n.nextSibling);var r=Os;t&&W2(e,t)?H3(r,n):(e.flags=e.flags&-4097|2,Pr=!1,Os=e)}}else{if(Pv(e))throw Error(Nt(418));e.flags=e.flags&-4097|2,Pr=!1,Os=e}}}function V2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Os=e}function sp(e){if(e!==Os)return!1;if(!Pr)return V2(e),Pr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ev(e.type,e.memoizedProps)),t&&(t=As)){if(Pv(e))throw W3(),Error(Nt(418));for(;t;)H3(e,t),t=ol(t.nextSibling)}if(V2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Nt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){As=ol(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}As=null}}else As=Os?ol(e.stateNode.nextSibling):null;return!0}function W3(){for(var e=As;e;)e=ol(e.nextSibling)}function Uu(){As=Os=null,Pr=!1}function M1(e){wa===null?wa=[e]:wa.push(e)}var W8=Oo.ReactCurrentBatchConfig;function Ld(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Nt(309));var r=n.stateNode}if(!r)throw Error(Nt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Nt(284));if(!n._owner)throw Error(Nt(290,e))}return e}function ap(e,t){throw e=Object.prototype.toString.call(t),Error(Nt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function G2(e){var t=e._init;return t(e._payload)}function V3(e){function t(x,k){if(e){var j=x.deletions;j===null?(x.deletions=[k],x.flags|=16):j.push(k)}}function n(x,k){if(!e)return null;for(;k!==null;)t(x,k),k=k.sibling;return null}function r(x,k){for(x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function i(x,k){return x=dl(x,k),x.index=0,x.sibling=null,x}function s(x,k,j){return x.index=j,e?(j=x.alternate,j!==null?(j=j.index,j<k?(x.flags|=2,k):j):(x.flags|=2,k)):(x.flags|=1048576,k)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,k,j,O){return k===null||k.tag!==6?(k=hy(j,x.mode,O),k.return=x,k):(k=i(k,j),k.return=x,k)}function u(x,k,j,O){var I=j.type;return I===hu?h(x,k,j.props.children,O,j.key):k!==null&&(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Go&&G2(I)===k.type)?(O=i(k,j.props),O.ref=Ld(x,k,j),O.return=x,O):(O=dm(j.type,j.key,j.props,null,x.mode,O),O.ref=Ld(x,k,j),O.return=x,O)}function d(x,k,j,O){return k===null||k.tag!==4||k.stateNode.containerInfo!==j.containerInfo||k.stateNode.implementation!==j.implementation?(k=fy(j,x.mode,O),k.return=x,k):(k=i(k,j.children||[]),k.return=x,k)}function h(x,k,j,O,I){return k===null||k.tag!==7?(k=tc(j,x.mode,O,I),k.return=x,k):(k=i(k,j),k.return=x,k)}function p(x,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return k=hy(""+k,x.mode,j),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Xf:return j=dm(k.type,k.key,k.props,null,x.mode,j),j.ref=Ld(x,null,k),j.return=x,j;case du:return k=fy(k,x.mode,j),k.return=x,k;case Go:var O=k._init;return p(x,O(k._payload),j)}if(eh(k)||Pd(k))return k=tc(k,x.mode,j,null),k.return=x,k;ap(x,k)}return null}function m(x,k,j,O){var I=k!==null?k.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return I!==null?null:o(x,k,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Xf:return j.key===I?u(x,k,j,O):null;case du:return j.key===I?d(x,k,j,O):null;case Go:return I=j._init,m(x,k,I(j._payload),O)}if(eh(j)||Pd(j))return I!==null?null:h(x,k,j,O,null);ap(x,j)}return null}function g(x,k,j,O,I){if(typeof O=="string"&&O!==""||typeof O=="number")return x=x.get(j)||null,o(k,x,""+O,I);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Xf:return x=x.get(O.key===null?j:O.key)||null,u(k,x,O,I);case du:return x=x.get(O.key===null?j:O.key)||null,d(k,x,O,I);case Go:var E=O._init;return g(x,k,j,E(O._payload),I)}if(eh(O)||Pd(O))return x=x.get(j)||null,h(k,x,O,I,null);ap(k,O)}return null}function v(x,k,j,O){for(var I=null,E=null,U=k,D=k=0,R=null;U!==null&&D<j.length;D++){U.index>D?(R=U,U=null):R=U.sibling;var W=m(x,U,j[D],O);if(W===null){U===null&&(U=R);break}e&&U&&W.alternate===null&&t(x,U),k=s(W,k,D),E===null?I=W:E.sibling=W,E=W,U=R}if(D===j.length)return n(x,U),Pr&&Il(x,D),I;if(U===null){for(;D<j.length;D++)U=p(x,j[D],O),U!==null&&(k=s(U,k,D),E===null?I=U:E.sibling=U,E=U);return Pr&&Il(x,D),I}for(U=r(x,U);D<j.length;D++)R=g(U,x,D,j[D],O),R!==null&&(e&&R.alternate!==null&&U.delete(R.key===null?D:R.key),k=s(R,k,D),E===null?I=R:E.sibling=R,E=R);return e&&U.forEach(function(ce){return t(x,ce)}),Pr&&Il(x,D),I}function w(x,k,j,O){var I=Pd(j);if(typeof I!="function")throw Error(Nt(150));if(j=I.call(j),j==null)throw Error(Nt(151));for(var E=I=null,U=k,D=k=0,R=null,W=j.next();U!==null&&!W.done;D++,W=j.next()){U.index>D?(R=U,U=null):R=U.sibling;var ce=m(x,U,W.value,O);if(ce===null){U===null&&(U=R);break}e&&U&&ce.alternate===null&&t(x,U),k=s(ce,k,D),E===null?I=ce:E.sibling=ce,E=ce,U=R}if(W.done)return n(x,U),Pr&&Il(x,D),I;if(U===null){for(;!W.done;D++,W=j.next())W=p(x,W.value,O),W!==null&&(k=s(W,k,D),E===null?I=W:E.sibling=W,E=W);return Pr&&Il(x,D),I}for(U=r(x,U);!W.done;D++,W=j.next())W=g(U,x,D,W.value,O),W!==null&&(e&&W.alternate!==null&&U.delete(W.key===null?D:W.key),k=s(W,k,D),E===null?I=W:E.sibling=W,E=W);return e&&U.forEach(function(te){return t(x,te)}),Pr&&Il(x,D),I}function S(x,k,j,O){if(typeof j=="object"&&j!==null&&j.type===hu&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Xf:e:{for(var I=j.key,E=k;E!==null;){if(E.key===I){if(I=j.type,I===hu){if(E.tag===7){n(x,E.sibling),k=i(E,j.props.children),k.return=x,x=k;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Go&&G2(I)===E.type){n(x,E.sibling),k=i(E,j.props),k.ref=Ld(x,E,j),k.return=x,x=k;break e}n(x,E);break}else t(x,E);E=E.sibling}j.type===hu?(k=tc(j.props.children,x.mode,O,j.key),k.return=x,x=k):(O=dm(j.type,j.key,j.props,null,x.mode,O),O.ref=Ld(x,k,j),O.return=x,x=O)}return a(x);case du:e:{for(E=j.key;k!==null;){if(k.key===E)if(k.tag===4&&k.stateNode.containerInfo===j.containerInfo&&k.stateNode.implementation===j.implementation){n(x,k.sibling),k=i(k,j.children||[]),k.return=x,x=k;break e}else{n(x,k);break}else t(x,k);k=k.sibling}k=fy(j,x.mode,O),k.return=x,x=k}return a(x);case Go:return E=j._init,S(x,k,E(j._payload),O)}if(eh(j))return v(x,k,j,O);if(Pd(j))return w(x,k,j,O);ap(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,k!==null&&k.tag===6?(n(x,k.sibling),k=i(k,j),k.return=x,x=k):(n(x,k),k=hy(j,x.mode,O),k.return=x,x=k),a(x)):n(x,k)}return S}var Hu=V3(!0),G3=V3(!1),Dm=wl(null),zm=null,xu=null,L1=null;function I1(){L1=xu=zm=null}function $1(e){var t=Dm.current;Er(Dm),e._currentValue=t}function Ov(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ou(e,t){zm=e,L1=xu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ds=!0),e.firstContext=null)}function Xs(e){var t=e._currentValue;if(L1!==e)if(e={context:e,memoizedValue:t,next:null},xu===null){if(zm===null)throw Error(Nt(308));xu=e,zm.dependencies={lanes:0,firstContext:e}}else xu=xu.next=e;return t}var Xl=null;function D1(e){Xl===null?Xl=[e]:Xl.push(e)}function q3(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,D1(t)):(n.next=i.next,i.next=n),t.interleaved=n,jo(e,r)}function jo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qo=!1;function z1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ko(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ll(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Wn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jo(e,n)}return i=r.interleaved,i===null?(t.next=t,D1(r)):(t.next=i.next,i.next=t),r.interleaved=t,jo(e,n)}function sm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,S1(e,n)}}function q2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fm(e,t,n,r){var i=e.updateQueue;qo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,d=u.next;u.next=null,a===null?s=d:a.next=d,a=u;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;a=0,h=d=u=null,o=s;do{var m=o.lane,g=o.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(m=t,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=zr({},p,m);break e;case 2:qo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=g,u=p):h=h.next=g,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);lc|=a,e.lanes=a,e.memoizedState=p}}function Y2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Nt(191,i));i.call(r)}}}var kf={},so=wl(kf),Kh=wl(kf),Zh=wl(kf);function Kl(e){if(e===kf)throw Error(Nt(174));return e}function F1(e,t){switch(vr(Zh,t),vr(Kh,e),vr(so,kf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hv(t,e)}Er(so),vr(so,t)}function Wu(){Er(so),Er(Kh),Er(Zh)}function X3(e){Kl(Zh.current);var t=Kl(so.current),n=hv(t,e.type);t!==n&&(vr(Kh,e),vr(so,n))}function B1(e){Kh.current===e&&(Er(so),Er(Kh))}var Ir=wl(0);function Bm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ay=[];function U1(){for(var e=0;e<ay.length;e++)ay[e]._workInProgressVersionPrimary=null;ay.length=0}var am=Oo.ReactCurrentDispatcher,oy=Oo.ReactCurrentBatchConfig,oc=0,$r=null,ui=null,vi=null,Um=!1,Eh=!1,Qh=0,V8=0;function Li(){throw Error(Nt(321))}function H1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Aa(e[n],t[n]))return!1;return!0}function W1(e,t,n,r,i,s){if(oc=s,$r=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,am.current=e===null||e.memoizedState===null?X8:K8,e=n(r,i),Eh){s=0;do{if(Eh=!1,Qh=0,25<=s)throw Error(Nt(301));s+=1,vi=ui=null,t.updateQueue=null,am.current=Z8,e=n(r,i)}while(Eh)}if(am.current=Hm,t=ui!==null&&ui.next!==null,oc=0,vi=ui=$r=null,Um=!1,t)throw Error(Nt(300));return e}function V1(){var e=Qh!==0;return Qh=0,e}function Ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?$r.memoizedState=vi=e:vi=vi.next=e,vi}function Ks(){if(ui===null){var e=$r.alternate;e=e!==null?e.memoizedState:null}else e=ui.next;var t=vi===null?$r.memoizedState:vi.next;if(t!==null)vi=t,ui=e;else{if(e===null)throw Error(Nt(310));ui=e,e={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},vi===null?$r.memoizedState=vi=e:vi=vi.next=e}return vi}function Jh(e,t){return typeof t=="function"?t(e):t}function ly(e){var t=Ks(),n=t.queue;if(n===null)throw Error(Nt(311));n.lastRenderedReducer=e;var r=ui,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,u=null,d=s;do{var h=d.lane;if((oc&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(o=u=p,a=r):u=u.next=p,$r.lanes|=h,lc|=h}d=d.next}while(d!==null&&d!==s);u===null?a=r:u.next=o,Aa(r,t.memoizedState)||(ds=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,$r.lanes|=s,lc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cy(e){var t=Ks(),n=t.queue;if(n===null)throw Error(Nt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Aa(s,t.memoizedState)||(ds=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function K3(){}function Z3(e,t){var n=$r,r=Ks(),i=t(),s=!Aa(r.memoizedState,i);if(s&&(r.memoizedState=i,ds=!0),r=r.queue,G1(eA.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,ef(9,J3.bind(null,n,r,i,t),void 0,null),wi===null)throw Error(Nt(349));oc&30||Q3(n,t,i)}return i}function Q3(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$r.updateQueue,t===null?(t={lastEffect:null,stores:null},$r.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function J3(e,t,n,r){t.value=n,t.getSnapshot=r,tA(t)&&nA(e)}function eA(e,t,n){return n(function(){tA(t)&&nA(e)})}function tA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Aa(e,n)}catch{return!0}}function nA(e){var t=jo(e,1);t!==null&&Ca(t,e,1,-1)}function X2(e){var t=Ga();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:e},t.queue=e,e=e.dispatch=Y8.bind(null,$r,e),[t.memoizedState,e]}function ef(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=$r.updateQueue,t===null?(t={lastEffect:null,stores:null},$r.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rA(){return Ks().memoizedState}function om(e,t,n,r){var i=Ga();$r.flags|=e,i.memoizedState=ef(1|t,n,void 0,r===void 0?null:r)}function Hg(e,t,n,r){var i=Ks();r=r===void 0?null:r;var s=void 0;if(ui!==null){var a=ui.memoizedState;if(s=a.destroy,r!==null&&H1(r,a.deps)){i.memoizedState=ef(t,n,s,r);return}}$r.flags|=e,i.memoizedState=ef(1|t,n,s,r)}function K2(e,t){return om(8390656,8,e,t)}function G1(e,t){return Hg(2048,8,e,t)}function iA(e,t){return Hg(4,2,e,t)}function sA(e,t){return Hg(4,4,e,t)}function aA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oA(e,t,n){return n=n!=null?n.concat([e]):null,Hg(4,4,aA.bind(null,t,e),n)}function q1(){}function lA(e,t){var n=Ks();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&H1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cA(e,t){var n=Ks();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&H1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uA(e,t,n){return oc&21?(Aa(n,t)||(n=m3(),$r.lanes|=n,lc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ds=!0),e.memoizedState=n)}function G8(e,t){var n=er;er=n!==0&&4>n?n:4,e(!0);var r=oy.transition;oy.transition={};try{e(!1),t()}finally{er=n,oy.transition=r}}function dA(){return Ks().memoizedState}function q8(e,t,n){var r=ul(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hA(e))fA(t,n);else if(n=q3(e,t,n,r),n!==null){var i=Zi();Ca(n,e,r,i),pA(n,t,r)}}function Y8(e,t,n){var r=ul(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hA(e))fA(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Aa(o,a)){var u=t.interleaved;u===null?(i.next=i,D1(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=q3(e,t,i,r),n!==null&&(i=Zi(),Ca(n,e,r,i),pA(n,t,r))}}function hA(e){var t=e.alternate;return e===$r||t!==null&&t===$r}function fA(e,t){Eh=Um=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pA(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,S1(e,n)}}var Hm={readContext:Xs,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},X8={readContext:Xs,useCallback:function(e,t){return Ga().memoizedState=[e,t===void 0?null:t],e},useContext:Xs,useEffect:K2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,om(4194308,4,aA.bind(null,t,e),n)},useLayoutEffect:function(e,t){return om(4194308,4,e,t)},useInsertionEffect:function(e,t){return om(4,2,e,t)},useMemo:function(e,t){var n=Ga();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ga();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=q8.bind(null,$r,e),[r.memoizedState,e]},useRef:function(e){var t=Ga();return e={current:e},t.memoizedState=e},useState:X2,useDebugValue:q1,useDeferredValue:function(e){return Ga().memoizedState=e},useTransition:function(){var e=X2(!1),t=e[0];return e=G8.bind(null,e[1]),Ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=$r,i=Ga();if(Pr){if(n===void 0)throw Error(Nt(407));n=n()}else{if(n=t(),wi===null)throw Error(Nt(349));oc&30||Q3(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,K2(eA.bind(null,r,s,e),[e]),r.flags|=2048,ef(9,J3.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ga(),t=wi.identifierPrefix;if(Pr){var n=_o,r=wo;n=(r&~(1<<32-Sa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=V8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},K8={readContext:Xs,useCallback:lA,useContext:Xs,useEffect:G1,useImperativeHandle:oA,useInsertionEffect:iA,useLayoutEffect:sA,useMemo:cA,useReducer:ly,useRef:rA,useState:function(){return ly(Jh)},useDebugValue:q1,useDeferredValue:function(e){var t=Ks();return uA(t,ui.memoizedState,e)},useTransition:function(){var e=ly(Jh)[0],t=Ks().memoizedState;return[e,t]},useMutableSource:K3,useSyncExternalStore:Z3,useId:dA,unstable_isNewReconciler:!1},Z8={readContext:Xs,useCallback:lA,useContext:Xs,useEffect:G1,useImperativeHandle:oA,useInsertionEffect:iA,useLayoutEffect:sA,useMemo:cA,useReducer:cy,useRef:rA,useState:function(){return cy(Jh)},useDebugValue:q1,useDeferredValue:function(e){var t=Ks();return ui===null?t.memoizedState=e:uA(t,ui.memoizedState,e)},useTransition:function(){var e=cy(Jh)[0],t=Ks().memoizedState;return[e,t]},useMutableSource:K3,useSyncExternalStore:Z3,useId:dA,unstable_isNewReconciler:!1};function pa(e,t){if(e&&e.defaultProps){t=zr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:zr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wg={isMounted:function(e){return(e=e._reactInternals)?mc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zi(),i=ul(e),s=ko(r,i);s.payload=t,n!=null&&(s.callback=n),t=ll(e,s,i),t!==null&&(Ca(t,e,i,r),sm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zi(),i=ul(e),s=ko(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ll(e,s,i),t!==null&&(Ca(t,e,i,r),sm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zi(),r=ul(e),i=ko(n,r);i.tag=2,t!=null&&(i.callback=t),t=ll(e,i,r),t!==null&&(Ca(t,e,r,n),sm(t,e,r))}};function Z2(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Gh(n,r)||!Gh(i,s):!0}function mA(e,t,n){var r=!1,i=fl,s=t.contextType;return typeof s=="object"&&s!==null?s=Xs(s):(i=fs(t)?sc:Hi.current,r=t.contextTypes,s=(r=r!=null)?Bu(e,i):fl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Q2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wg.enqueueReplaceState(t,t.state,null)}function Mv(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},z1(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Xs(s):(s=fs(t)?sc:Hi.current,i.context=Bu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Rv(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Wg.enqueueReplaceState(i,i.state,null),Fm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Vu(e,t){try{var n="",r=t;do n+=CI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function uy(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Q8=typeof WeakMap=="function"?WeakMap:Map;function gA(e,t,n){n=ko(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vm||(Vm=!0,Vv=r),Lv(e,t)},n}function yA(e,t,n){n=ko(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Lv(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lv(e,t),typeof r!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function J2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Q8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=h$.bind(null,e,t,n),t.then(e,e))}function ek(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tk(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ko(-1,1),t.tag=2,ll(n,t,1))),n.lanes|=1),e)}var J8=Oo.ReactCurrentOwner,ds=!1;function Yi(e,t,n,r){t.child=e===null?G3(t,null,n,r):Hu(t,e.child,n,r)}function nk(e,t,n,r,i){n=n.render;var s=t.ref;return Ou(t,i),r=W1(e,t,n,r,s,i),n=V1(),e!==null&&!ds?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ao(e,t,i)):(Pr&&n&&O1(t),t.flags|=1,Yi(e,t,r,i),t.child)}function rk(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!tw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,bA(e,t,s,r,i)):(e=dm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gh,n(a,r)&&e.ref===t.ref)return Ao(e,t,i)}return t.flags|=1,e=dl(s,r),e.ref=t.ref,e.return=t,t.child=e}function bA(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Gh(s,r)&&e.ref===t.ref)if(ds=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ds=!0);else return t.lanes=e.lanes,Ao(e,t,i)}return Iv(e,t,n,r,i)}function vA(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(_u,ks),ks|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vr(_u,ks),ks|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,vr(_u,ks),ks|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,vr(_u,ks),ks|=r;return Yi(e,t,i,n),t.child}function xA(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iv(e,t,n,r,i){var s=fs(n)?sc:Hi.current;return s=Bu(t,s),Ou(t,i),n=W1(e,t,n,r,s,i),r=V1(),e!==null&&!ds?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ao(e,t,i)):(Pr&&r&&O1(t),t.flags|=1,Yi(e,t,n,i),t.child)}function ik(e,t,n,r,i){if(fs(n)){var s=!0;Lm(t)}else s=!1;if(Ou(t,i),t.stateNode===null)lm(e,t),mA(t,n,r),Mv(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Xs(d):(d=fs(n)?sc:Hi.current,d=Bu(t,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||u!==d)&&Q2(t,a,r,d),qo=!1;var m=t.memoizedState;a.state=m,Fm(t,r,a,i),u=t.memoizedState,o!==r||m!==u||hs.current||qo?(typeof h=="function"&&(Rv(t,n,h,r),u=t.memoizedState),(o=qo||Z2(t,n,o,r,m,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Y3(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:pa(t.type,o),a.props=d,p=t.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xs(u):(u=fs(n)?sc:Hi.current,u=Bu(t,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==u)&&Q2(t,a,r,u),qo=!1,m=t.memoizedState,a.state=m,Fm(t,r,a,i);var v=t.memoizedState;o!==p||m!==v||hs.current||qo?(typeof g=="function"&&(Rv(t,n,g,r),v=t.memoizedState),(d=qo||Z2(t,n,d,r,m,v,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return $v(e,t,n,r,s,i)}function $v(e,t,n,r,i,s){xA(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&H2(t,n,!1),Ao(e,t,s);r=t.stateNode,J8.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Hu(t,e.child,null,s),t.child=Hu(t,null,o,s)):Yi(e,t,o,s),t.memoizedState=r.state,i&&H2(t,n,!0),t.child}function wA(e){var t=e.stateNode;t.pendingContext?U2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&U2(e,t.context,!1),F1(e,t.containerInfo)}function sk(e,t,n,r,i){return Uu(),M1(i),t.flags|=256,Yi(e,t,n,r),t.child}var Dv={dehydrated:null,treeContext:null,retryLane:0};function zv(e){return{baseLanes:e,cachePool:null,transitions:null}}function _A(e,t,n){var r=t.pendingProps,i=Ir.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),vr(Ir,i&1),e===null)return Nv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=qg(a,r,0,null),e=tc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zv(n),t.memoizedState=Dv,e):Y1(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return e$(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=dl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=dl(o,s):(s=tc(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?zv(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Dv,r}return s=e.child,e=s.sibling,r=dl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Y1(e,t){return t=qg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function op(e,t,n,r){return r!==null&&M1(r),Hu(t,e.child,null,n),e=Y1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function e$(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=uy(Error(Nt(422))),op(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=qg({mode:"visible",children:r.children},i,0,null),s=tc(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Hu(t,e.child,null,a),t.child.memoizedState=zv(a),t.memoizedState=Dv,s);if(!(t.mode&1))return op(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Nt(419)),r=uy(s,r,void 0),op(e,t,a,r)}if(o=(a&e.childLanes)!==0,ds||o){if(r=wi,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jo(e,i),Ca(r,e,i,-1))}return ew(),r=uy(Error(Nt(421))),op(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=f$.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,As=ol(i.nextSibling),Os=t,Pr=!0,wa=null,e!==null&&(Us[Hs++]=wo,Us[Hs++]=_o,Us[Hs++]=ac,wo=e.id,_o=e.overflow,ac=t),t=Y1(t,r.children),t.flags|=4096,t)}function ak(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ov(e.return,t,n)}function dy(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function kA(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Yi(e,t,r.children,n),r=Ir.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ak(e,n,t);else if(e.tag===19)ak(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vr(Ir,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Bm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),dy(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Bm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}dy(t,!0,n,null,s);break;case"together":dy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ao(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),lc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Nt(153));if(t.child!==null){for(e=t.child,n=dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function t$(e,t,n){switch(t.tag){case 3:wA(t),Uu();break;case 5:X3(t);break;case 1:fs(t.type)&&Lm(t);break;case 4:F1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;vr(Dm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(vr(Ir,Ir.current&1),t.flags|=128,null):n&t.child.childLanes?_A(e,t,n):(vr(Ir,Ir.current&1),e=Ao(e,t,n),e!==null?e.sibling:null);vr(Ir,Ir.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kA(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vr(Ir,Ir.current),r)break;return null;case 22:case 23:return t.lanes=0,vA(e,t,n)}return Ao(e,t,n)}var SA,Fv,CA,EA;SA=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fv=function(){};CA=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Kl(so.current);var s=null;switch(n){case"input":i=lv(e,i),r=lv(e,r),s=[];break;case"select":i=zr({},i,{value:void 0}),r=zr({},r,{value:void 0}),s=[];break;case"textarea":i=dv(e,i),r=dv(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rm)}fv(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(zh.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(o=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==o&&(u!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(zh.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&kr("scroll",e),s||o===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};EA=function(e,t,n,r){n!==r&&(t.flags|=4)};function Id(e,t){if(!Pr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ii(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function n$(e,t,n){var r=t.pendingProps;switch(R1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(t),null;case 1:return fs(t.type)&&Mm(),Ii(t),null;case 3:return r=t.stateNode,Wu(),Er(hs),Er(Hi),U1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wa!==null&&(Yv(wa),wa=null))),Fv(e,t),Ii(t),null;case 5:B1(t);var i=Kl(Zh.current);if(n=t.type,e!==null&&t.stateNode!=null)CA(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Nt(166));return Ii(t),null}if(e=Kl(so.current),sp(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ka]=t,r[Xh]=s,e=(t.mode&1)!==0,n){case"dialog":kr("cancel",r),kr("close",r);break;case"iframe":case"object":case"embed":kr("load",r);break;case"video":case"audio":for(i=0;i<nh.length;i++)kr(nh[i],r);break;case"source":kr("error",r);break;case"img":case"image":case"link":kr("error",r),kr("load",r);break;case"details":kr("toggle",r);break;case"input":m2(r,s),kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},kr("invalid",r);break;case"textarea":y2(r,s),kr("invalid",r)}fv(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&ip(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ip(r.textContent,o,e),i=["children",""+o]):zh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&kr("scroll",r)}switch(n){case"input":Kf(r),g2(r,s,!0);break;case"textarea":Kf(r),b2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=e3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ka]=t,e[Xh]=r,SA(e,t,!1,!1),t.stateNode=e;e:{switch(a=pv(n,r),n){case"dialog":kr("cancel",e),kr("close",e),i=r;break;case"iframe":case"object":case"embed":kr("load",e),i=r;break;case"video":case"audio":for(i=0;i<nh.length;i++)kr(nh[i],e);i=r;break;case"source":kr("error",e),i=r;break;case"img":case"image":case"link":kr("error",e),kr("load",e),i=r;break;case"details":kr("toggle",e),i=r;break;case"input":m2(e,r),i=lv(e,r),kr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=zr({},r,{value:void 0}),kr("invalid",e);break;case"textarea":y2(e,r),i=dv(e,r),kr("invalid",e);break;default:i=r}fv(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?r3(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&t3(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fh(e,u):typeof u=="number"&&Fh(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zh.hasOwnProperty(s)?u!=null&&s==="onScroll"&&kr("scroll",e):u!=null&&b1(e,s,u,a))}switch(n){case"input":Kf(e),g2(e,r,!1);break;case"textarea":Kf(e),b2(e);break;case"option":r.value!=null&&e.setAttribute("value",""+hl(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ju(e,!!r.multiple,s,!1):r.defaultValue!=null&&ju(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Rm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ii(t),null;case 6:if(e&&t.stateNode!=null)EA(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Nt(166));if(n=Kl(Zh.current),Kl(so.current),sp(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ka]=t,(s=r.nodeValue!==n)&&(e=Os,e!==null))switch(e.tag){case 3:ip(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ip(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ka]=t,t.stateNode=r}return Ii(t),null;case 13:if(Er(Ir),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pr&&As!==null&&t.mode&1&&!(t.flags&128))W3(),Uu(),t.flags|=98560,s=!1;else if(s=sp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Nt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Nt(317));s[Ka]=t}else Uu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ii(t),s=!1}else wa!==null&&(Yv(wa),wa=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ir.current&1?hi===0&&(hi=3):ew())),t.updateQueue!==null&&(t.flags|=4),Ii(t),null);case 4:return Wu(),Fv(e,t),e===null&&qh(t.stateNode.containerInfo),Ii(t),null;case 10:return $1(t.type._context),Ii(t),null;case 17:return fs(t.type)&&Mm(),Ii(t),null;case 19:if(Er(Ir),s=t.memoizedState,s===null)return Ii(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Id(s,!1);else{if(hi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Bm(e),a!==null){for(t.flags|=128,Id(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return vr(Ir,Ir.current&1|2),t.child}e=e.sibling}s.tail!==null&&Kr()>Gu&&(t.flags|=128,r=!0,Id(s,!1),t.lanes=4194304)}else{if(!r)if(e=Bm(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Id(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Pr)return Ii(t),null}else 2*Kr()-s.renderingStartTime>Gu&&n!==1073741824&&(t.flags|=128,r=!0,Id(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kr(),t.sibling=null,n=Ir.current,vr(Ir,r?n&1|2:n&1),t):(Ii(t),null);case 22:case 23:return J1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ks&1073741824&&(Ii(t),t.subtreeFlags&6&&(t.flags|=8192)):Ii(t),null;case 24:return null;case 25:return null}throw Error(Nt(156,t.tag))}function r$(e,t){switch(R1(t),t.tag){case 1:return fs(t.type)&&Mm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wu(),Er(hs),Er(Hi),U1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return B1(t),null;case 13:if(Er(Ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Nt(340));Uu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Er(Ir),null;case 4:return Wu(),null;case 10:return $1(t.type._context),null;case 22:case 23:return J1(),null;case 24:return null;default:return null}}var lp=!1,Bi=!1,i$=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function wu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hr(e,t,r)}else n.current=null}function Bv(e,t,n){try{n()}catch(r){Hr(e,t,r)}}var ok=!1;function s$(e,t){if(Sv=Pm,e=N3(),N1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,d=0,h=0,p=e,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++d===i&&(o=a),m===s&&++h===r&&(u=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cv={focusedElem:e,selectionRange:n},Pm=!1,Wt=t;Wt!==null;)if(t=Wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Wt=e;else for(;Wt!==null;){t=Wt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,S=v.memoizedState,x=t.stateNode,k=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:pa(t.type,w),S);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Nt(163))}}catch(O){Hr(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,Wt=e;break}Wt=t.return}return v=ok,ok=!1,v}function Th(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Bv(t,n,s)}i=i.next}while(i!==r)}}function Vg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Uv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function TA(e){var t=e.alternate;t!==null&&(e.alternate=null,TA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ka],delete t[Xh],delete t[jv],delete t[B8],delete t[U8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jA(e){return e.tag===5||e.tag===3||e.tag===4}function lk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rm));else if(r!==4&&(e=e.child,e!==null))for(Hv(e,t,n),e=e.sibling;e!==null;)Hv(e,t,n),e=e.sibling}function Wv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Wv(e,t,n),e=e.sibling;e!==null;)Wv(e,t,n),e=e.sibling}var Si=null,ba=!1;function Do(e,t,n){for(n=n.child;n!==null;)AA(e,t,n),n=n.sibling}function AA(e,t,n){if(io&&typeof io.onCommitFiberUnmount=="function")try{io.onCommitFiberUnmount($g,n)}catch{}switch(n.tag){case 5:Bi||wu(n,t);case 6:var r=Si,i=ba;Si=null,Do(e,t,n),Si=r,ba=i,Si!==null&&(ba?(e=Si,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Si.removeChild(n.stateNode));break;case 18:Si!==null&&(ba?(e=Si,n=n.stateNode,e.nodeType===8?iy(e.parentNode,n):e.nodeType===1&&iy(e,n),Wh(e)):iy(Si,n.stateNode));break;case 4:r=Si,i=ba,Si=n.stateNode.containerInfo,ba=!0,Do(e,t,n),Si=r,ba=i;break;case 0:case 11:case 14:case 15:if(!Bi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Bv(n,t,a),i=i.next}while(i!==r)}Do(e,t,n);break;case 1:if(!Bi&&(wu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Hr(n,t,o)}Do(e,t,n);break;case 21:Do(e,t,n);break;case 22:n.mode&1?(Bi=(r=Bi)||n.memoizedState!==null,Do(e,t,n),Bi=r):Do(e,t,n);break;default:Do(e,t,n)}}function ck(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new i$),t.forEach(function(r){var i=p$.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function aa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Si=o.stateNode,ba=!1;break e;case 3:Si=o.stateNode.containerInfo,ba=!0;break e;case 4:Si=o.stateNode.containerInfo,ba=!0;break e}o=o.return}if(Si===null)throw Error(Nt(160));AA(s,a,i),Si=null,ba=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Hr(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PA(t,e),t=t.sibling}function PA(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(aa(t,e),Ba(e),r&4){try{Th(3,e,e.return),Vg(3,e)}catch(w){Hr(e,e.return,w)}try{Th(5,e,e.return)}catch(w){Hr(e,e.return,w)}}break;case 1:aa(t,e),Ba(e),r&512&&n!==null&&wu(n,n.return);break;case 5:if(aa(t,e),Ba(e),r&512&&n!==null&&wu(n,n.return),e.flags&32){var i=e.stateNode;try{Fh(i,"")}catch(w){Hr(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Qj(i,s),pv(o,a);var d=pv(o,s);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];h==="style"?r3(i,p):h==="dangerouslySetInnerHTML"?t3(i,p):h==="children"?Fh(i,p):b1(i,h,p,d)}switch(o){case"input":cv(i,s);break;case"textarea":Jj(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ju(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?ju(i,!!s.multiple,s.defaultValue,!0):ju(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xh]=s}catch(w){Hr(e,e.return,w)}}break;case 6:if(aa(t,e),Ba(e),r&4){if(e.stateNode===null)throw Error(Nt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(w){Hr(e,e.return,w)}}break;case 3:if(aa(t,e),Ba(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(w){Hr(e,e.return,w)}break;case 4:aa(t,e),Ba(e);break;case 13:aa(t,e),Ba(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Z1=Kr())),r&4&&ck(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Bi=(d=Bi)||h,aa(t,e),Bi=d):aa(t,e),Ba(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Wt=e,h=e.child;h!==null;){for(p=Wt=h;Wt!==null;){switch(m=Wt,g=m.child,m.tag){case 0:case 11:case 14:case 15:Th(4,m,m.return);break;case 1:wu(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){Hr(r,n,w)}}break;case 5:wu(m,m.return);break;case 22:if(m.memoizedState!==null){dk(p);continue}}g!==null?(g.return=m,Wt=g):dk(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=n3("display",a))}catch(w){Hr(e,e.return,w)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(w){Hr(e,e.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:aa(t,e),Ba(e),r&4&&ck(e);break;case 21:break;default:aa(t,e),Ba(e)}}function Ba(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jA(n)){var r=n;break e}n=n.return}throw Error(Nt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fh(i,""),r.flags&=-33);var s=lk(e);Wv(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=lk(e);Hv(e,o,a);break;default:throw Error(Nt(161))}}catch(u){Hr(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function a$(e,t,n){Wt=e,NA(e)}function NA(e,t,n){for(var r=(e.mode&1)!==0;Wt!==null;){var i=Wt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||lp;if(!a){var o=i.alternate,u=o!==null&&o.memoizedState!==null||Bi;o=lp;var d=Bi;if(lp=a,(Bi=u)&&!d)for(Wt=i;Wt!==null;)a=Wt,u=a.child,a.tag===22&&a.memoizedState!==null?hk(i):u!==null?(u.return=a,Wt=u):hk(i);for(;s!==null;)Wt=s,NA(s),s=s.sibling;Wt=i,lp=o,Bi=d}uk(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Wt=s):uk(e)}}function uk(e){for(;Wt!==null;){var t=Wt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bi||Vg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bi)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Y2(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Y2(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Wh(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Nt(163))}Bi||t.flags&512&&Uv(t)}catch(m){Hr(t,t.return,m)}}if(t===e){Wt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Wt=n;break}Wt=t.return}}function dk(e){for(;Wt!==null;){var t=Wt;if(t===e){Wt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Wt=n;break}Wt=t.return}}function hk(e){for(;Wt!==null;){var t=Wt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vg(4,t)}catch(u){Hr(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Hr(t,i,u)}}var s=t.return;try{Uv(t)}catch(u){Hr(t,s,u)}break;case 5:var a=t.return;try{Uv(t)}catch(u){Hr(t,a,u)}}}catch(u){Hr(t,t.return,u)}if(t===e){Wt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Wt=o;break}Wt=t.return}}var o$=Math.ceil,Wm=Oo.ReactCurrentDispatcher,X1=Oo.ReactCurrentOwner,qs=Oo.ReactCurrentBatchConfig,Wn=0,wi=null,ni=null,Ti=0,ks=0,_u=wl(0),hi=0,tf=null,lc=0,Gg=0,K1=0,jh=null,us=null,Z1=0,Gu=1/0,go=null,Vm=!1,Vv=null,cl=null,cp=!1,tl=null,Gm=0,Ah=0,Gv=null,cm=-1,um=0;function Zi(){return Wn&6?Kr():cm!==-1?cm:cm=Kr()}function ul(e){return e.mode&1?Wn&2&&Ti!==0?Ti&-Ti:W8.transition!==null?(um===0&&(um=m3()),um):(e=er,e!==0||(e=window.event,e=e===void 0?16:_3(e.type)),e):1}function Ca(e,t,n,r){if(50<Ah)throw Ah=0,Gv=null,Error(Nt(185));xf(e,n,r),(!(Wn&2)||e!==wi)&&(e===wi&&(!(Wn&2)&&(Gg|=n),hi===4&&Ko(e,Ti)),ps(e,r),n===1&&Wn===0&&!(t.mode&1)&&(Gu=Kr()+500,Ug&&_l()))}function ps(e,t){var n=e.callbackNode;WI(e,t);var r=Am(e,e===wi?Ti:0);if(r===0)n!==null&&w2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&w2(n),t===1)e.tag===0?H8(fk.bind(null,e)):B3(fk.bind(null,e)),z8(function(){!(Wn&6)&&_l()}),n=null;else{switch(g3(r)){case 1:n=k1;break;case 4:n=f3;break;case 16:n=jm;break;case 536870912:n=p3;break;default:n=jm}n=zA(n,OA.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function OA(e,t){if(cm=-1,um=0,Wn&6)throw Error(Nt(327));var n=e.callbackNode;if(Ru()&&e.callbackNode!==n)return null;var r=Am(e,e===wi?Ti:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qm(e,r);else{t=r;var i=Wn;Wn|=2;var s=MA();(wi!==e||Ti!==t)&&(go=null,Gu=Kr()+500,ec(e,t));do try{u$();break}catch(o){RA(e,o)}while(!0);I1(),Wm.current=s,Wn=i,ni!==null?t=0:(wi=null,Ti=0,t=hi)}if(t!==0){if(t===2&&(i=vv(e),i!==0&&(r=i,t=qv(e,i))),t===1)throw n=tf,ec(e,0),Ko(e,r),ps(e,Kr()),n;if(t===6)Ko(e,r);else{if(i=e.current.alternate,!(r&30)&&!l$(i)&&(t=qm(e,r),t===2&&(s=vv(e),s!==0&&(r=s,t=qv(e,s))),t===1))throw n=tf,ec(e,0),Ko(e,r),ps(e,Kr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Nt(345));case 2:$l(e,us,go);break;case 3:if(Ko(e,r),(r&130023424)===r&&(t=Z1+500-Kr(),10<t)){if(Am(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Zi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Tv($l.bind(null,e,us,go),t);break}$l(e,us,go);break;case 4:if(Ko(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Sa(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Kr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o$(r/1960))-r,10<r){e.timeoutHandle=Tv($l.bind(null,e,us,go),r);break}$l(e,us,go);break;case 5:$l(e,us,go);break;default:throw Error(Nt(329))}}}return ps(e,Kr()),e.callbackNode===n?OA.bind(null,e):null}function qv(e,t){var n=jh;return e.current.memoizedState.isDehydrated&&(ec(e,t).flags|=256),e=qm(e,t),e!==2&&(t=us,us=n,t!==null&&Yv(t)),e}function Yv(e){us===null?us=e:us.push.apply(us,e)}function l$(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Aa(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ko(e,t){for(t&=~K1,t&=~Gg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sa(t),r=1<<n;e[n]=-1,t&=~r}}function fk(e){if(Wn&6)throw Error(Nt(327));Ru();var t=Am(e,0);if(!(t&1))return ps(e,Kr()),null;var n=qm(e,t);if(e.tag!==0&&n===2){var r=vv(e);r!==0&&(t=r,n=qv(e,r))}if(n===1)throw n=tf,ec(e,0),Ko(e,t),ps(e,Kr()),n;if(n===6)throw Error(Nt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$l(e,us,go),ps(e,Kr()),null}function Q1(e,t){var n=Wn;Wn|=1;try{return e(t)}finally{Wn=n,Wn===0&&(Gu=Kr()+500,Ug&&_l())}}function cc(e){tl!==null&&tl.tag===0&&!(Wn&6)&&Ru();var t=Wn;Wn|=1;var n=qs.transition,r=er;try{if(qs.transition=null,er=1,e)return e()}finally{er=r,qs.transition=n,Wn=t,!(Wn&6)&&_l()}}function J1(){ks=_u.current,Er(_u)}function ec(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,D8(n)),ni!==null)for(n=ni.return;n!==null;){var r=n;switch(R1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mm();break;case 3:Wu(),Er(hs),Er(Hi),U1();break;case 5:B1(r);break;case 4:Wu();break;case 13:Er(Ir);break;case 19:Er(Ir);break;case 10:$1(r.type._context);break;case 22:case 23:J1()}n=n.return}if(wi=e,ni=e=dl(e.current,null),Ti=ks=t,hi=0,tf=null,K1=Gg=lc=0,us=jh=null,Xl!==null){for(t=0;t<Xl.length;t++)if(n=Xl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Xl=null}return e}function RA(e,t){do{var n=ni;try{if(I1(),am.current=Hm,Um){for(var r=$r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Um=!1}if(oc=0,vi=ui=$r=null,Eh=!1,Qh=0,X1.current=null,n===null||n.return===null){hi=1,tf=t,ni=null;break}e:{var s=e,a=n.return,o=n,u=t;if(t=Ti,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=o,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ek(a);if(g!==null){g.flags&=-257,tk(g,a,o,s,t),g.mode&1&&J2(s,d,t),t=g,u=d;var v=t.updateQueue;if(v===null){var w=new Set;w.add(u),t.updateQueue=w}else v.add(u);break e}else{if(!(t&1)){J2(s,d,t),ew();break e}u=Error(Nt(426))}}else if(Pr&&o.mode&1){var S=ek(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),tk(S,a,o,s,t),M1(Vu(u,o));break e}}s=u=Vu(u,o),hi!==4&&(hi=2),jh===null?jh=[s]:jh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=gA(s,u,t);q2(s,x);break e;case 1:o=u;var k=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(cl===null||!cl.has(j)))){s.flags|=65536,t&=-t,s.lanes|=t;var O=yA(s,o,t);q2(s,O);break e}}s=s.return}while(s!==null)}IA(n)}catch(I){t=I,ni===n&&n!==null&&(ni=n=n.return);continue}break}while(!0)}function MA(){var e=Wm.current;return Wm.current=Hm,e===null?Hm:e}function ew(){(hi===0||hi===3||hi===2)&&(hi=4),wi===null||!(lc&268435455)&&!(Gg&268435455)||Ko(wi,Ti)}function qm(e,t){var n=Wn;Wn|=2;var r=MA();(wi!==e||Ti!==t)&&(go=null,ec(e,t));do try{c$();break}catch(i){RA(e,i)}while(!0);if(I1(),Wn=n,Wm.current=r,ni!==null)throw Error(Nt(261));return wi=null,Ti=0,hi}function c$(){for(;ni!==null;)LA(ni)}function u$(){for(;ni!==null&&!LI();)LA(ni)}function LA(e){var t=DA(e.alternate,e,ks);e.memoizedProps=e.pendingProps,t===null?IA(e):ni=t,X1.current=null}function IA(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=r$(n,t),n!==null){n.flags&=32767,ni=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hi=6,ni=null;return}}else if(n=n$(n,t,ks),n!==null){ni=n;return}if(t=t.sibling,t!==null){ni=t;return}ni=t=e}while(t!==null);hi===0&&(hi=5)}function $l(e,t,n){var r=er,i=qs.transition;try{qs.transition=null,er=1,d$(e,t,n,r)}finally{qs.transition=i,er=r}return null}function d$(e,t,n,r){do Ru();while(tl!==null);if(Wn&6)throw Error(Nt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Nt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(VI(e,s),e===wi&&(ni=wi=null,Ti=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cp||(cp=!0,zA(jm,function(){return Ru(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qs.transition,qs.transition=null;var a=er;er=1;var o=Wn;Wn|=4,X1.current=null,s$(e,n),PA(n,e),N8(Cv),Pm=!!Sv,Cv=Sv=null,e.current=n,a$(n),II(),Wn=o,er=a,qs.transition=s}else e.current=n;if(cp&&(cp=!1,tl=e,Gm=i),s=e.pendingLanes,s===0&&(cl=null),zI(n.stateNode),ps(e,Kr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vm)throw Vm=!1,e=Vv,Vv=null,e;return Gm&1&&e.tag!==0&&Ru(),s=e.pendingLanes,s&1?e===Gv?Ah++:(Ah=0,Gv=e):Ah=0,_l(),null}function Ru(){if(tl!==null){var e=g3(Gm),t=qs.transition,n=er;try{if(qs.transition=null,er=16>e?16:e,tl===null)var r=!1;else{if(e=tl,tl=null,Gm=0,Wn&6)throw Error(Nt(331));var i=Wn;for(Wn|=4,Wt=e.current;Wt!==null;){var s=Wt,a=s.child;if(Wt.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var d=o[u];for(Wt=d;Wt!==null;){var h=Wt;switch(h.tag){case 0:case 11:case 15:Th(8,h,s)}var p=h.child;if(p!==null)p.return=h,Wt=p;else for(;Wt!==null;){h=Wt;var m=h.sibling,g=h.return;if(TA(h),h===d){Wt=null;break}if(m!==null){m.return=g,Wt=m;break}Wt=g}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}Wt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Wt=a;else e:for(;Wt!==null;){if(s=Wt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Th(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Wt=x;break e}Wt=s.return}}var k=e.current;for(Wt=k;Wt!==null;){a=Wt;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,Wt=j;else e:for(a=k;Wt!==null;){if(o=Wt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Vg(9,o)}}catch(I){Hr(o,o.return,I)}if(o===a){Wt=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,Wt=O;break e}Wt=o.return}}if(Wn=i,_l(),io&&typeof io.onPostCommitFiberRoot=="function")try{io.onPostCommitFiberRoot($g,e)}catch{}r=!0}return r}finally{er=n,qs.transition=t}}return!1}function pk(e,t,n){t=Vu(n,t),t=gA(e,t,1),e=ll(e,t,1),t=Zi(),e!==null&&(xf(e,1,t),ps(e,t))}function Hr(e,t,n){if(e.tag===3)pk(e,e,n);else for(;t!==null;){if(t.tag===3){pk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))){e=Vu(n,e),e=yA(t,e,1),t=ll(t,e,1),e=Zi(),t!==null&&(xf(t,1,e),ps(t,e));break}}t=t.return}}function h$(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Zi(),e.pingedLanes|=e.suspendedLanes&n,wi===e&&(Ti&n)===n&&(hi===4||hi===3&&(Ti&130023424)===Ti&&500>Kr()-Z1?ec(e,0):K1|=n),ps(e,t)}function $A(e,t){t===0&&(e.mode&1?(t=Jf,Jf<<=1,!(Jf&130023424)&&(Jf=4194304)):t=1);var n=Zi();e=jo(e,t),e!==null&&(xf(e,t,n),ps(e,n))}function f$(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$A(e,n)}function p$(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Nt(314))}r!==null&&r.delete(t),$A(e,n)}var DA;DA=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hs.current)ds=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ds=!1,t$(e,t,n);ds=!!(e.flags&131072)}else ds=!1,Pr&&t.flags&1048576&&U3(t,$m,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;lm(e,t),e=t.pendingProps;var i=Bu(t,Hi.current);Ou(t,n),i=W1(null,t,r,e,i,n);var s=V1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fs(r)?(s=!0,Lm(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,z1(t),i.updater=Wg,t.stateNode=i,i._reactInternals=t,Mv(t,r,e,n),t=$v(null,t,r,!0,s,n)):(t.tag=0,Pr&&s&&O1(t),Yi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(lm(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=g$(r),e=pa(r,e),i){case 0:t=Iv(null,t,r,e,n);break e;case 1:t=ik(null,t,r,e,n);break e;case 11:t=nk(null,t,r,e,n);break e;case 14:t=rk(null,t,r,pa(r.type,e),n);break e}throw Error(Nt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pa(r,i),Iv(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pa(r,i),ik(e,t,r,i,n);case 3:e:{if(wA(t),e===null)throw Error(Nt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Y3(e,t),Fm(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Vu(Error(Nt(423)),t),t=sk(e,t,r,n,i);break e}else if(r!==i){i=Vu(Error(Nt(424)),t),t=sk(e,t,r,n,i);break e}else for(As=ol(t.stateNode.containerInfo.firstChild),Os=t,Pr=!0,wa=null,n=G3(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uu(),r===i){t=Ao(e,t,n);break e}Yi(e,t,r,n)}t=t.child}return t;case 5:return X3(t),e===null&&Nv(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Ev(r,i)?a=null:s!==null&&Ev(r,s)&&(t.flags|=32),xA(e,t),Yi(e,t,a,n),t.child;case 6:return e===null&&Nv(t),null;case 13:return _A(e,t,n);case 4:return F1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Hu(t,null,r,n):Yi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pa(r,i),nk(e,t,r,i,n);case 7:return Yi(e,t,t.pendingProps,n),t.child;case 8:return Yi(e,t,t.pendingProps.children,n),t.child;case 12:return Yi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,vr(Dm,r._currentValue),r._currentValue=a,s!==null)if(Aa(s.value,a)){if(s.children===i.children&&!hs.current){t=Ao(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ko(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ov(s.return,n,t),o.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Nt(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Ov(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Yi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ou(t,n),i=Xs(i),r=r(i),t.flags|=1,Yi(e,t,r,n),t.child;case 14:return r=t.type,i=pa(r,t.pendingProps),i=pa(r.type,i),rk(e,t,r,i,n);case 15:return bA(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pa(r,i),lm(e,t),t.tag=1,fs(r)?(e=!0,Lm(t)):e=!1,Ou(t,n),mA(t,r,i),Mv(t,r,i,n),$v(null,t,r,!0,e,n);case 19:return kA(e,t,n);case 22:return vA(e,t,n)}throw Error(Nt(156,t.tag))};function zA(e,t){return h3(e,t)}function m$(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(e,t,n,r){return new m$(e,t,n,r)}function tw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function g$(e){if(typeof e=="function")return tw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===x1)return 11;if(e===w1)return 14}return 2}function dl(e,t){var n=e.alternate;return n===null?(n=Vs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function dm(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")tw(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case hu:return tc(n.children,i,s,t);case v1:a=8,i|=8;break;case iv:return e=Vs(12,n,t,i|2),e.elementType=iv,e.lanes=s,e;case sv:return e=Vs(13,n,t,i),e.elementType=sv,e.lanes=s,e;case av:return e=Vs(19,n,t,i),e.elementType=av,e.lanes=s,e;case Xj:return qg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qj:a=10;break e;case Yj:a=9;break e;case x1:a=11;break e;case w1:a=14;break e;case Go:a=16,r=null;break e}throw Error(Nt(130,e==null?e:typeof e,""))}return t=Vs(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function tc(e,t,n,r){return e=Vs(7,e,r,t),e.lanes=n,e}function qg(e,t,n,r){return e=Vs(22,e,r,t),e.elementType=Xj,e.lanes=n,e.stateNode={isHidden:!1},e}function hy(e,t,n){return e=Vs(6,e,null,t),e.lanes=n,e}function fy(e,t,n){return t=Vs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function y$(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q0(0),this.expirationTimes=q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nw(e,t,n,r,i,s,a,o,u){return e=new y$(e,t,n,o,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Vs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},z1(s),e}function b$(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:du,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function FA(e){if(!e)return fl;e=e._reactInternals;e:{if(mc(e)!==e||e.tag!==1)throw Error(Nt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Nt(171))}if(e.tag===1){var n=e.type;if(fs(n))return F3(e,n,t)}return t}function BA(e,t,n,r,i,s,a,o,u){return e=nw(n,r,!0,e,i,s,a,o,u),e.context=FA(null),n=e.current,r=Zi(),i=ul(n),s=ko(r,i),s.callback=t??null,ll(n,s,i),e.current.lanes=i,xf(e,i,r),ps(e,r),e}function Yg(e,t,n,r){var i=t.current,s=Zi(),a=ul(i);return n=FA(n),t.context===null?t.context=n:t.pendingContext=n,t=ko(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ll(i,t,a),e!==null&&(Ca(e,i,a,s),sm(e,i,a)),a}function Ym(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rw(e,t){mk(e,t),(e=e.alternate)&&mk(e,t)}function v$(){return null}var UA=typeof reportError=="function"?reportError:function(e){console.error(e)};function iw(e){this._internalRoot=e}Xg.prototype.render=iw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Nt(409));Yg(e,t,null,null)};Xg.prototype.unmount=iw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cc(function(){Yg(null,e,null,null)}),t[To]=null}};function Xg(e){this._internalRoot=e}Xg.prototype.unstable_scheduleHydration=function(e){if(e){var t=v3();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xo.length&&t!==0&&t<Xo[n].priority;n++);Xo.splice(n,0,e),n===0&&w3(e)}};function sw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gk(){}function x$(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Ym(a);s.call(d)}}var a=BA(t,r,e,0,null,!1,!1,"",gk);return e._reactRootContainer=a,e[To]=a.current,qh(e.nodeType===8?e.parentNode:e),cc(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var d=Ym(u);o.call(d)}}var u=nw(e,0,!1,null,null,!1,!1,"",gk);return e._reactRootContainer=u,e[To]=u.current,qh(e.nodeType===8?e.parentNode:e),cc(function(){Yg(t,u,n,r)}),u}function Zg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var u=Ym(a);o.call(u)}}Yg(t,a,e,i)}else a=x$(n,t,e,i,r);return Ym(a)}y3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=th(t.pendingLanes);n!==0&&(S1(t,n|1),ps(t,Kr()),!(Wn&6)&&(Gu=Kr()+500,_l()))}break;case 13:cc(function(){var r=jo(e,1);if(r!==null){var i=Zi();Ca(r,e,1,i)}}),rw(e,1)}};C1=function(e){if(e.tag===13){var t=jo(e,134217728);if(t!==null){var n=Zi();Ca(t,e,134217728,n)}rw(e,134217728)}};b3=function(e){if(e.tag===13){var t=ul(e),n=jo(e,t);if(n!==null){var r=Zi();Ca(n,e,t,r)}rw(e,t)}};v3=function(){return er};x3=function(e,t){var n=er;try{return er=e,t()}finally{er=n}};gv=function(e,t,n){switch(t){case"input":if(cv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Bg(r);if(!i)throw Error(Nt(90));Zj(r),cv(r,i)}}}break;case"textarea":Jj(e,n);break;case"select":t=n.value,t!=null&&ju(e,!!n.multiple,t,!1)}};a3=Q1;o3=cc;var w$={usingClientEntryPoint:!1,Events:[_f,gu,Bg,i3,s3,Q1]},$d={findFiberByHostInstance:Yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_$={bundleType:$d.bundleType,version:$d.version,rendererPackageName:$d.rendererPackageName,rendererConfig:$d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=u3(e),e===null?null:e.stateNode},findFiberByHostInstance:$d.findFiberByHostInstance||v$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!up.isDisabled&&up.supportsFiber)try{$g=up.inject(_$),io=up}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w$;Ls.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sw(t))throw Error(Nt(200));return b$(e,t,null,n)};Ls.createRoot=function(e,t){if(!sw(e))throw Error(Nt(299));var n=!1,r="",i=UA;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=nw(e,1,!1,null,null,n,!1,r,i),e[To]=t.current,qh(e.nodeType===8?e.parentNode:e),new iw(t)};Ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Nt(188)):(e=Object.keys(e).join(","),Error(Nt(268,e)));return e=u3(t),e=e===null?null:e.stateNode,e};Ls.flushSync=function(e){return cc(e)};Ls.hydrate=function(e,t,n){if(!Kg(t))throw Error(Nt(200));return Zg(null,e,t,!0,n)};Ls.hydrateRoot=function(e,t,n){if(!sw(e))throw Error(Nt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=UA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=BA(t,null,e,1,n??null,i,!1,s,a),e[To]=t.current,qh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xg(t)};Ls.render=function(e,t,n){if(!Kg(t))throw Error(Nt(200));return Zg(null,e,t,!1,n)};Ls.unmountComponentAtNode=function(e){if(!Kg(e))throw Error(Nt(40));return e._reactRootContainer?(cc(function(){Zg(null,null,e,!1,function(){e._reactRootContainer=null,e[To]=null})}),!0):!1};Ls.unstable_batchedUpdates=Q1;Ls.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kg(n))throw Error(Nt(200));if(e==null||e._reactInternals===void 0)throw Error(Nt(38));return Zg(e,t,n,!1,r)};Ls.version="18.3.1-next-f1338f8080-20240426";function HA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HA)}catch(e){console.error(e)}}HA(),Hj.exports=Ls;var k$=Hj.exports,yk=k$;nv.createRoot=yk.createRoot,nv.hydrateRoot=yk.hydrateRoot;var Xv=function(e,t){return Xv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Xv(e,t)};function WA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Xv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Xm=function(){return Xm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xm.apply(this,arguments)};function ld(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function VA(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function GA(e,t){return function(n,r){t(n,r,e)}}function qA(e,t,n,r,i,s){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,u=o==="getter"?"get":o==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(x||null))};var S=(0,n[g])(o==="accessor"?{get:h.get,set:h.set}:h[u],v);if(o==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(p=a(S.get))&&(h.get=p),(p=a(S.set))&&(h.set=p),(p=a(S.init))&&i.unshift(p)}else(p=a(S))&&(o==="field"?i.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0}function YA(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function XA(e){return typeof e=="symbol"?e:"".concat(e)}function KA(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function ZA(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Kt(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(h){try{d(r.next(h))}catch(p){a(p)}}function u(h){try{d(r.throw(h))}catch(p){a(p)}}function d(h){h.done?s(h.value):i(h.value).then(o,u)}d((r=r.apply(e,t||[])).next())})}function QA(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Qg=Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function JA(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Qg(t,e,n)}function Km(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function aw(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function eP(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(aw(arguments[t]));return e}function tP(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}function nP(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function qu(e){return this instanceof qu?(this.v=e,this):new qu(e)}function rP(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(v){return Promise.resolve(v).then(g,p)}}function o(g,v){r[g]&&(i[g]=function(w){return new Promise(function(S,x){s.push([g,w,S,x])>1||u(g,w)})},v&&(i[g]=v(i[g])))}function u(g,v){try{d(r[g](v))}catch(w){m(s[0][3],w)}}function d(g){g.value instanceof qu?Promise.resolve(g.value.v).then(h,p):m(s[0][2],g)}function h(g){u("next",g)}function p(g){u("throw",g)}function m(g,v){g(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function iP(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(a){return(n=!n)?{value:qu(e[i](a)),done:!1}:s?s(a):a}:s}}function sP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Km=="function"?Km(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(o,u){a=e[s](a),i(o,u,a.done,a.value)})}}function i(s,a,o,u){Promise.resolve(u).then(function(d){s({value:d,done:o})},a)}}function aP(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S$=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Kv=function(e){return Kv=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},Kv(e)};function oP(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Kv(e),r=0;r<n.length;r++)n[r]!=="default"&&Qg(t,e,n[r]);return S$(t,e),t}function lP(e){return e&&e.__esModule?e:{default:e}}function cP(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function uP(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function dP(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function hP(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var C$=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function fP(e){function t(s){e.error=e.hasError?new C$(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return t(a),i()})}else r|=1}catch(a){t(a)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function pP(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?t?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):e}const E$={__extends:WA,__assign:Xm,__rest:ld,__decorate:VA,__param:GA,__esDecorate:qA,__runInitializers:YA,__propKey:XA,__setFunctionName:KA,__metadata:ZA,__awaiter:Kt,__generator:QA,__createBinding:Qg,__exportStar:JA,__values:Km,__read:aw,__spread:eP,__spreadArrays:tP,__spreadArray:nP,__await:qu,__asyncGenerator:rP,__asyncDelegator:iP,__asyncValues:sP,__makeTemplateObject:aP,__importStar:oP,__importDefault:lP,__classPrivateFieldGet:cP,__classPrivateFieldSet:uP,__classPrivateFieldIn:dP,__addDisposableResource:hP,__disposeResources:fP,__rewriteRelativeImportExtension:pP},T$=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:hP,get __assign(){return Xm},__asyncDelegator:iP,__asyncGenerator:rP,__asyncValues:sP,__await:qu,__awaiter:Kt,__classPrivateFieldGet:cP,__classPrivateFieldIn:dP,__classPrivateFieldSet:uP,__createBinding:Qg,__decorate:VA,__disposeResources:fP,__esDecorate:qA,__exportStar:JA,__extends:WA,__generator:QA,__importDefault:lP,__importStar:oP,__makeTemplateObject:aP,__metadata:ZA,__param:GA,__propKey:XA,__read:aw,__rest:ld,__rewriteRelativeImportExtension:pP,__runInitializers:YA,__setFunctionName:KA,__spread:eP,__spreadArray:nP,__spreadArrays:tP,__values:Km,default:E$},Symbol.toStringTag,{value:"Module"})),j$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ow extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class bk extends ow{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class vk extends ow{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class xk extends ow{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Zv||(Zv={}));class A${constructor(t,{headers:n={},customFetch:r,region:i=Zv.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=j$(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Kt(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:o,signal:u}=r;let d={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let m;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=o):typeof o=="string"?(d["Content-Type"]="text/plain",m=o):typeof FormData<"u"&&o instanceof FormData?m=o:(d["Content-Type"]="application/json",m=JSON.stringify(o)):m=o;const g=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:m,signal:u}).catch(x=>{throw x.name==="AbortError"?x:new bk(x)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new vk(g);if(!g.ok)throw new xk(g);let w=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield g.json():w==="application/octet-stream"||w==="application/pdf"?S=yield g.blob():w==="text/event-stream"?S=g:w==="multipart/form-data"?S=yield g.formData():S=yield g.text(),{data:S,error:null,response:g}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new bk(s)}:{data:null,error:s,response:s instanceof xk||s instanceof vk?s.context:void 0}}})}}var Xi={};const cd=Nj(T$);var dp={},hp={},fp={},pp={},mp={},gp={},wk;function mP(){if(wk)return gp;wk=1,Object.defineProperty(gp,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return gp.default=e,gp}var _k;function gP(){if(_k)return mp;_k=1,Object.defineProperty(mp,"__esModule",{value:!0});const t=cd.__importDefault(mP());class n{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,p,m;let g=null,v=null,w=null,S=u.status,x=u.statusText;if(u.ok){if(this.method!=="HEAD"){const I=await u.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?v=I:v=JSON.parse(I))}const j=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),O=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");j&&O&&O.length>1&&(w=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,S=406,x="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const j=await u.text();try{g=JSON.parse(j),Array.isArray(g)&&u.status===404&&(v=[],g=null,S=200,x="OK")}catch{u.status===404&&j===""?(S=204,x="No Content"):g={message:j}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,S=200,x="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:v,count:w,status:S,statusText:x}});return this.shouldThrowOnError||(o=o.catch(u=>{var d,h,p;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(p=u==null?void 0:u.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}}return mp.default=n,mp}var kk;function yP(){if(kk)return pp;kk=1,Object.defineProperty(pp,"__esModule",{value:!0});const t=cd.__importDefault(gP());class n extends t.default{select(i){let s=!1;const a=(i??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:o=a}={}){const u=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:o=!1,wal:u=!1,format:d="text"}={}){var h;const p=[i?"analyze":null,s?"verbose":null,a?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${m}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return pp.default=n,pp}var Sk;function lw(){if(Sk)return fp;Sk=1,Object.defineProperty(fp,"__esModule",{value:!0});const t=cd.__importDefault(yP()),n=new RegExp("[,()]");class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const o=Array.from(new Set(a)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:o,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${d}fts${h}.${a}`),this}match(s){return Object.entries(s).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(s,a,o){return this.url.searchParams.append(s,`not.${a}.${o}`),this}or(s,{foreignTable:a,referencedTable:o=a}={}){const u=o?`${o}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,o){return this.url.searchParams.append(s,`${a}.${o}`),this}}return fp.default=r,fp}var Ck;function bP(){if(Ck)return hp;Ck=1,Object.defineProperty(hp,"__esModule",{value:!0});const t=cd.__importDefault(lw());class n{constructor(i,{headers:s={},schema:a,fetch:o}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=o}select(i,s){const{head:a=!1,count:o}=s??{},u=a?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var o;const u="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:o,defaultToNull:u=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:s}={}){var a;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return hp.default=n,hp}var Ek;function P$(){if(Ek)return dp;Ek=1,Object.defineProperty(dp,"__esModule",{value:!0});const e=cd,t=e.__importDefault(bP()),n=e.__importDefault(lw());class r{constructor(s,{headers:a={},schema:o,fetch:u}={}){this.url=s,this.headers=new Headers(a),this.schemaName=o,this.fetch=u}from(s){const a=new URL(`${this.url}/${s}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:o=!1,get:u=!1,count:d}={}){var h;let p;const m=new URL(`${this.url}/rpc/${s}`);let g;o||u?(p=o?"HEAD":"GET",Object.entries(a).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{m.searchParams.append(w,S)})):(p="POST",g=a);const v=new Headers(this.headers);return d&&v.set("Prefer",`count=${d}`),new n.default({method:p,url:m,headers:v,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return dp.default=r,dp}Object.defineProperty(Xi,"__esModule",{value:!0});var vP=Xi.PostgrestError=AP=Xi.PostgrestBuilder=TP=Xi.PostgrestTransformBuilder=CP=Xi.PostgrestFilterBuilder=kP=Xi.PostgrestQueryBuilder=wP=Xi.PostgrestClient=void 0;const ud=cd,xP=ud.__importDefault(P$());var wP=Xi.PostgrestClient=xP.default;const _P=ud.__importDefault(bP());var kP=Xi.PostgrestQueryBuilder=_P.default;const SP=ud.__importDefault(lw());var CP=Xi.PostgrestFilterBuilder=SP.default;const EP=ud.__importDefault(yP());var TP=Xi.PostgrestTransformBuilder=EP.default;const jP=ud.__importDefault(gP());var AP=Xi.PostgrestBuilder=jP.default;const PP=ud.__importDefault(mP());vP=Xi.PostgrestError=PP.default;var NP=Xi.default={PostgrestClient:xP.default,PostgrestQueryBuilder:_P.default,PostgrestFilterBuilder:SP.default,PostgrestTransformBuilder:EP.default,PostgrestBuilder:jP.default,PostgrestError:PP.default};const N$=ZL({__proto__:null,get PostgrestBuilder(){return AP},get PostgrestClient(){return wP},get PostgrestError(){return vP},get PostgrestFilterBuilder(){return CP},get PostgrestQueryBuilder(){return kP},get PostgrestTransformBuilder(){return TP},default:NP},[Xi]),{PostgrestClient:O$,PostgrestQueryBuilder:z5e,PostgrestFilterBuilder:F5e,PostgrestTransformBuilder:B5e,PostgrestBuilder:U5e,PostgrestError:H5e}=NP||N$;class R${static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const M$="2.79.0",L$=`realtime-js/${M$}`,I$="1.0.0",Qv=1e4,$$=1e3,D$=100;var Ph;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ph||(Ph={}));var li;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(li||(li={}));var va;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(va||(va={}));var Jv;(function(e){e.websocket="websocket"})(Jv||(Jv={}));var Wl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Wl||(Wl={}));class z${constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const u=r.decode(t.slice(a,a+s));a=a+s;const d=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:u,payload:d}}}class OP{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pr||(pr={}));const Tk=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=F$(a,e,t,i),s),{}):{}},F$=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?RP(s,a):ex(a)},RP=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return W$(t,n)}switch(e){case pr.bool:return B$(t);case pr.float4:case pr.float8:case pr.int2:case pr.int4:case pr.int8:case pr.numeric:case pr.oid:return U$(t);case pr.json:case pr.jsonb:return H$(t);case pr.timestamp:return V$(t);case pr.abstime:case pr.date:case pr.daterange:case pr.int4range:case pr.int8range:case pr.money:case pr.reltime:case pr.text:case pr.time:case pr.timestamptz:case pr.timetz:case pr.tsrange:case pr.tstzrange:return ex(t);default:return ex(t)}},ex=e=>e,B$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},U$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},H$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},W$=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>RP(t,o))}return e},V$=e=>typeof e=="string"?e.replace(" ","T"):e,MP=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class py{constructor(t,n,r={},i=Qv){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jk||(jk={}));class Nh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(u=>{this.state=Nh.syncDiff(this.state,u,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Nh.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},u={};return this.map(s,(d,h)=>{a[d]||(u[d]=h)}),this.map(a,(d,h)=>{const p=s[d];if(p){const m=h.map(S=>S.presence_ref),g=p.map(S=>S.presence_ref),v=h.filter(S=>g.indexOf(S.presence_ref)<0),w=p.filter(S=>m.indexOf(S.presence_ref)<0);v.length>0&&(o[d]=v),w.length>0&&(u[d]=w)}else o[d]=h}),this.syncDiff(s,{joins:o,leaves:u},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,u)=>{var d;const h=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(u),h.length>0){const p=t[o].map(g=>g.presence_ref),m=h.filter(g=>p.indexOf(g.presence_ref)<0);t[o].unshift(...m)}r(o,h,u)}),this.map(a,(o,u)=>{let d=t[o];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),t[o]=d,i(o,d,u),d.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ak;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ak||(Ak={}));var Oh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Oh||(Oh={}));var yo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yo||(yo={}));class cw{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=li.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new py(this,va.join,this.params,this.timeout),this.rejoinTimer=new OP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=li.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=li.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this._on(va.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Nh(this),this.broadcastEndpointURL=MP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==li.closed){const{config:{broadcast:a,presence:o,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Oh.PRESENCE]&&this.bindings[Oh.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},m={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(yo.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(yo.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){t==null||t(yo.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,x=[];for(let k=0;k<S;k++){const j=w[k],{filter:{event:O,schema:I,table:E,filter:U}}=j,D=g&&g[k];if(D&&D.event===O&&D.schema===I&&D.table===E&&D.filter===U)x.push(Object.assign(Object.assign({},j),{id:D.id}));else{this.unsubscribe(),this.state=li.errored,t==null||t(yo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(yo.SUBSCRIBED);return}}).receive("error",g=>{this.state=li.errored,t==null||t(yo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===li.joined&&t===Oh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let u=o.statusText;try{const d=await o.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,u;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=li.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(va.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new py(this,va.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=li.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new py(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>D$){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:u,leave:d,join:h}=va;if(r&&[o,u,d,h].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,w,S;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((S=(w=g.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===a}).map(g=>g.callback(m,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var v,w,S,x,k,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const O=g.id,I=(v=g.filter)===null||v===void 0?void 0:v.event;return O&&((w=n.ids)===null||w===void 0?void 0:w.includes(O))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(k=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return O==="*"||O===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:S,commit_timestamp:x,type:k,errors:j}=v;m=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:x,eventType:k,new:{},old:{},errors:j}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===li.closed}_isJoined(){return this.state===li.joined}_isJoining(){return this.state===li.joining}_isLeaving(){return this.state===li.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&cw.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(va.close,{},t)}_onError(t){this._on(va.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=li.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Tk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Tk(t.columns,t.old_record)),n}}const my=()=>{},yp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},G$=[1e3,2e3,5e3,1e4],q$=1e4,Y$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class X${constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qv,this.transport=null,this.heartbeatIntervalMs=yp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=my,this.ref=0,this.reconnectTimer=null,this.logger=my,this.conn=null,this.sendBuffer=[],this.serializer=new z$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Jv.websocket}`,this.httpEndpoint=MP(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=R$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:I$}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ph.connecting:return Wl.Connecting;case Ph.open:return Wl.Open;case Ph.closing:return Wl.Closing;default:return Wl.Closed}}isConnected(){return this.connectionState()===Wl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new cw(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($$,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},yp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${i} ${o}`.trim(),s),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(va.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Y$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:L$};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(va.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new OP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,u,d,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Qv,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:yp.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:my,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:p=>G$[p-1]||q$,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(p,m)=>m(JSON.stringify(p)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class uw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Rr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class K$ extends uw{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tx extends uw{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const dw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Z$=()=>Response,nx=e=>{if(Array.isArray(e))return e.map(n=>nx(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=nx(r)}),t},Q$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gy=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},J$=(e,t,n)=>Kt(void 0,void 0,void 0,function*(){const r=yield Z$();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new K$(gy(i),s,a))}).catch(i=>{t(new tx(gy(i),i))}):t(new tx(gy(e),e))}),eD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(Q$(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Sf(e,t,n,r,i,s){return Kt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,eD(t,r,i,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>J$(u,o,r))})})}function nf(e,t,n,r){return Kt(this,void 0,void 0,function*(){return Sf(e,"GET",t,n,r)})}function ma(e,t,n,r,i){return Kt(this,void 0,void 0,function*(){return Sf(e,"POST",t,r,i,n)})}function rx(e,t,n,r,i){return Kt(this,void 0,void 0,function*(){return Sf(e,"PUT",t,r,i,n)})}function tD(e,t,n,r){return Kt(this,void 0,void 0,function*(){return Sf(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function hw(e,t,n,r,i){return Kt(this,void 0,void 0,function*(){return Sf(e,"DELETE",t,r,i,n)})}class nD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Kt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Rr(t))return{data:null,error:t};throw t}})}}var LP;class rD{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[LP]="BlobDownloadBuilder",this.promise=null}asStream(){return new nD(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Kt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Rr(t))return{data:null,error:t};throw t}})}}LP=Symbol.toStringTag;const iD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sD{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=dw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Kt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Pk),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),u&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(u))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),p=yield(t=="PUT"?rx:ma)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Rr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Kt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:Pk.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield rx(this.fetch,o.toString(),u,{headers:h});return{data:{path:s,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Rr(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,n){return Kt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield ma(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new uw("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}update(t,n,r){return Kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Kt(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Kt(this,void 0,void 0,function*(){try{return{data:{path:(yield ma(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Kt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield ma(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Kt(this,void 0,void 0,function*(){try{const i=yield ma(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(t),u=()=>nf(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new rD(u,this.shouldThrowOnError)}info(t){return Kt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield nf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:nx(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}exists(t){return Kt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield tD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r)&&r instanceof tx){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}remove(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield hw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}list(t,n,r){return Kt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},iD),n),{prefix:t||""});return{data:yield ma(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}listV2(t,n){return Kt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ma(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const IP="2.79.0",$P={"X-Client-Info":`storage-js/${IP}`};class aD{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$P),n),this.fetch=dw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Kt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield nf(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}getBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield nf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}createBucket(t){return Kt(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Kt(this,void 0,void 0,function*(){try{return{data:yield rx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield hw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class oD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$P),n),this.fetch=dw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}listBuckets(t){return Kt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield nf(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield hw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}})}}const fw={"X-Client-Info":`storage-js/${IP}`,"Content-Type":"application/json"};class DP extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Es(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class yy extends DP{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lD extends DP{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Nk;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Nk||(Nk={}));const pw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),cD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ok=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uD=(e,t,n)=>Kt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";t(new yy(Ok(a),i,o))}).catch(()=>{const a=i+"",o=s.statusText||`HTTP ${i} error`;t(new yy(o,i,a))});else{const a=i+"",o=s.statusText||`HTTP ${i} error`;t(new yy(o,i,a))}}else t(new lD(Ok(e),e))}),dD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(cD(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function hD(e,t,n,r,i,s){return Kt(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,dD(t,r,i,s)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>uD(u,o,r))})})}function Ts(e,t,n,r,i){return Kt(this,void 0,void 0,function*(){return hD(e,"POST",t,r,i,n)})}class fD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fw),n),this.fetch=pw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Kt(this,void 0,void 0,function*(){try{return{data:(yield Ts(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Kt(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Es(r))return{data:null,error:r};throw r}})}listIndexes(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Kt(this,void 0,void 0,function*(){try{return{data:(yield Ts(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Es(r))return{data:null,error:r};throw r}})}}class pD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fw),n),this.fetch=pw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Kt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ts(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}getVectors(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}listVectors(t){return Kt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ts(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}queryVectors(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Kt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ts(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}}class mD{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fw),n),this.fetch=pw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:(yield Ts(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}getBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}listBuckets(){return Kt(this,arguments,void 0,function*(t={}){try{return{data:yield Ts(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Kt(this,void 0,void 0,function*(){try{return{data:(yield Ts(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Es(n))return{data:null,error:n};throw n}})}}class gD extends mD{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new yD(this.url,this.headers,t,this.fetch)}}class yD extends fD{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Kt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Kt(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Kt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Kt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new bD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class bD extends pD{constructor(t,n,r,i,s){super(t,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Kt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Kt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Kt(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Kt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Kt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class vD extends aD{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new sD(this.url,this.headers,t,this.fetch)}get vectors(){return new gD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oD(this.url+"/iceberg",this.headers,this.fetch)}}const xD="2.79.0";let rh="";typeof Deno<"u"?rh="deno":typeof document<"u"?rh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rh="react-native":rh="node";const wD={"X-Client-Info":`supabase-js-${rh}/${xD}`},_D={headers:wD},kD={schema:"public"},SD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CD={},ED=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),TD=()=>Headers,jD=(e,t,n)=>{const r=ED(n),i=TD();return async(s,a)=>{var o;const u=(o=await t())!==null&&o!==void 0?o:e;let d=new i(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},a),{headers:d}))}};function AD(e){return e.endsWith("/")?e:e+"/"}function PD(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:u,auth:d,realtime:h,global:p}=t,m={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function ND(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(AD(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const zP="2.79.0",Vc=30*1e3,ix=3,by=ix*Vc,OD="http://localhost:9999",RD="supabase.auth.token",MD={"X-Client-Info":`gotrue-js/${zP}`},sx="X-Supabase-Api-Version",FP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},LD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ID=10*60*1e3;class rf extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Jt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $D extends rf{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function DD(e){return Jt(e)&&e.name==="AuthApiError"}class Vl extends rf{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class kl extends rf{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ua extends kl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zD(e){return Jt(e)&&e.name==="AuthSessionMissingError"}class Ec extends kl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bp extends kl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vp extends kl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function FD(e){return Jt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Rk extends kl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ax extends kl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function vy(e){return Jt(e)&&e.name==="AuthRetryableFetchError"}class Mk extends kl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ox extends kl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lk=` 	
\r=`.split(""),BD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lk.length;t+=1)e[Lk[t].charCodeAt(0)]=-2;for(let t=0;t<Zm.length;t+=1)e[Zm[t].charCodeAt(0)]=t;return e})();function Ik(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zm[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zm[r]),t.queuedBits-=6}}function BP(e,t,n){const r=BD[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $k(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{WD(a,r,n)};for(let a=0;a<e.length;a+=1)BP(e.charCodeAt(a),i,s);return t.join("")}function UD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function HD(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}UD(r,t)}}function WD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Mu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)BP(e.charCodeAt(i),n,r);return new Uint8Array(t)}function VD(e){const t=[];return HD(e,n=>t.push(n)),new Uint8Array(t)}function Zl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Ik(i,n,r)),Ik(null,n,r),t.join("")}function GD(e){return Math.round(Date.now()/1e3)+e}function qD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const $i=()=>typeof window<"u"&&typeof document<"u",Pl={tested:!1,writable:!1},UP=()=>{if(!$i())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pl.tested)return Pl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pl.tested=!0,Pl.writable=!0}catch{Pl.tested=!0,Pl.writable=!1}return Pl.writable};function YD(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const HP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),XD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Gc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Nl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zo=async(e,t)=>{await e.removeItem(t)};class Jg{constructor(){this.promise=new Jg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Jg.promiseConstructor=Promise;function xy(e){const t=e.split(".");if(t.length!==3)throw new ox("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!LD.test(t[r]))throw new ox("JWT not in base64url format");return{header:JSON.parse($k(t[0])),payload:JSON.parse($k(t[1])),signature:Mu(t[2]),raw:{header:t[0],payload:t[1]}}}async function KD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ZD(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function QD(e){return("0"+e.toString(16)).substr(-2)}function JD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,QD).join("")}async function ez(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function tz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await ez(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tc(e,t,n=!1){const r=JD();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Gc(e,`${t}-code-verifier`,i);const s=await tz(r);return[s,r===s?"plain":"s256"]}const nz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rz(e){const t=e.headers.get(sx);if(!t||!t.match(nz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const az=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jc(e){if(!az.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wy(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oz(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Dk(e){return JSON.parse(JSON.stringify(e))}const Dl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lz=[502,503,504];async function zk(e){var t;if(!XD(e))throw new ax(Dl(e),0);if(lz.includes(e.status))throw new ax(Dl(e),e.status);let n;try{n=await e.json()}catch(s){throw new Vl(Dl(s),s)}let r;const i=rz(e);if(i&&i.getTime()>=FP["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Mk(Dl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ua}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Mk(Dl(n),e.status,n.weak_password.reasons);throw new $D(Dl(n),e.status||500,r)}const cz=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function cn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[sx]||(s[sx]=FP["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await uz(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function uz(e,t,n,r,i,s){const a=cz(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(u){throw console.error(u),new ax(Dl(u),0)}if(o.ok||await zk(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(u){await zk(u)}}function da(e){var t;let n=null;fz(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=GD(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Fk(e){const t=da(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dz(e){return{data:e,error:null}}function hz(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=ld(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},u=Object.assign({},a);return{data:{properties:o,user:u},error:null}}function Bk(e){return e}function fz(e){return e.access_token&&e.refresh_token&&e.expires_in}const _y=["global","local","others"];class pz{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=HP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=_y[0]){if(_y.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_y.join(", ")}`);try{return await cn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await cn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ld(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await cn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:hz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Jt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zo})}catch(n){if(Jt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,u;try{const d={nextPage:null,lastPage:0,total:0},h=await cn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Bk});if(h.error)throw h.error;const p=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(v.split(";")[1].split("=")[1]);d[`${S}Page`]=w}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Jt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){jc(t);try{return await cn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zo})}catch(n){if(Jt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){jc(t);try{return await cn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Zo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){jc(t);try{return await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zo})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){jc(t.userId);try{const{data:n,error:r}=await cn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){jc(t.userId),jc(t.id);try{return{data:await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,a,o,u;try{const d={nextPage:null,lastPage:0,total:0},h=await cn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Bk});if(h.error)throw h.error;const p=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(v.split(";")[1].split("=")[1]);d[`${S}Page`]=w}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Jt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await cn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await cn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await cn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Jt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Jt(n))return{data:null,error:n};throw n}}}function Uk(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ac={debug:!!(globalThis&&UP()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class WP extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mz extends WP{}async function gz(e,t,n){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ac.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function yz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function VP(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function bz(e){return parseInt(e,16)}function vz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function xz(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:u,resources:d,scheme:h,uri:p,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=VP(e.address),v=h?`${h}://${r}`:r,w=e.statement?`${e.statement}
`:"",S=`${v} wants you to sign in with your Ethereum account:
${g}

${w}`;let x=`URI: ${p}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),u&&(x+=`
Request ID: ${u}`),d){let k=`
Resources:`;for(const j of d){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);k+=`
- ${j}`}x+=k}return`${S}
${x}`}class Jr extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Qm extends Jr{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function wz({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Jr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Jr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Jr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Jr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Jr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Jr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Jr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Jr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(GP(a)){if(s.rp.id!==a)return new Jr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Jr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _z({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Jr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Jr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(GP(r)){if(n.rpId!==r)return new Jr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class kz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Sz=new kz;function Cz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=ld(e,["challenge","user","excludeCredentials"]),s=Mu(t).buffer,a=Object.assign(Object.assign({},n),{id:Mu(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];o.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:Mu(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function Ez(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ld(e,["challenge","allowCredentials"]),i=Mu(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Mu(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function Tz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zl(new Uint8Array(i.authenticatorData)),clientDataJSON:Zl(new Uint8Array(i.clientDataJSON)),signature:Zl(new Uint8Array(i.signature)),userHandle:i.userHandle?Zl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function GP(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Hk(){var e,t;return!!($i()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Az(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qm("Browser returned unexpected credential type",t)}:{data:null,error:new Qm("Empty credential response",t)}}catch(t){return{data:null,error:wz({error:t,options:e})}}}async function Pz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qm("Browser returned unexpected credential type",t)}:{data:null,error:new Qm("Empty credential response",t)}}catch(t){return{data:null,error:_z({error:t,options:e})}}}const Nz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Oz={userVerification:"preferred",hints:["security-key"]};function Jm(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(t(a)){const o=r[s];t(o)?r[s]=Jm(o,a):r[s]=Jm(a)}else r[s]=a}return r}function Rz(e,t){return Jm(Nz,e,t||{})}function Mz(e,t){return Jm(Oz,e,t||{})}class Lz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:o};const u=i??Sz.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=Rz(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:p}=await Az({publicKey:d,signal:u});return h?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const d=Mz(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:p}=await Pz(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new Vl("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new rf("rpId is required for WebAuthn authentication")};try{if(!Hk())return{data:null,error:new Vl("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:u}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new Vl("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new rf("rpId is required for WebAuthn registration")};try{if(!Hk())return{data:null,error:new Vl("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:u,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(a){return Jt(a)?{data:null,error:a}:{data:null,error:new Vl("Unexpected error in register",a)}}}}yz();const Iz={url:OD,storageKey:RD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Wk(e,t,n){return await n()}const Pc={};class sf{get jwks(){var t,n;return(n=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sf.nextInstanceID,sf.nextInstanceID+=1,this.instanceID>0&&$i()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Iz),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new pz({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=HP(i.fetch),this.lock=i.lock||Wk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:$i()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=gz:this.lock=Wk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Lz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:UP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Uk(this.memoryStorage)),$i()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zP}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if($i()&&(n=YD(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),$i()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),FD(s)){const u=(t=s.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Jt(n)?this._returnResult({error:n}):this._returnResult({error:new Vl("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:da}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:h,password:p,options:m}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Tc(this.storage,this.storageKey)),s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:da})}else if("phone"in t){const{phone:h,password:p,options:m}=t;s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:da})}else throw new bp("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fk})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fk})}else throw new bp("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Ec;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,a,o,u,d,h,p,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:w,wallet:S,statement:x,options:k}=t;let j;if($i())if(typeof S=="object")j=S;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")j=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=S}const O=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),I=await j.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=VP(I[0]);let U=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const R=await j.request({method:"eth_chainId"});U=bz(R)}const D={domain:O.host,address:E,statement:x,uri:O.href,version:"1",chainId:U,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=xz(D),v=await j.request({method:"personal_sign",params:[vz(g),E]})}try{const{data:w,error:S}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:da});if(S)throw S;if(!w||!w.session||!w.user){const x=new Ec;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:S})}catch(w){if(Jt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,i,s,a,o,u,d,h,p,m,g;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:S,wallet:x,statement:k,options:j}=t;let O;if($i())if(typeof x=="object")O=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))O=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=x}const I=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const E=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),k?{statement:k}:null));let U;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")U=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)U=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)v=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),w=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${I.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=j==null?void 0:j.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((a=j==null?void 0:j.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const E=await O.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:S,error:x}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Zl(w)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:da});if(x)throw x;if(!S||!S.session||!S.user){const k=new Ec;return this._returnResult({data:{user:null,session:null},error:k})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:x})}catch(S){if(Jt(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(t){const n=await Nl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:da});if(await zo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Ec;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Jt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:da}),{data:u,error:d}=o;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new Ec;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:u}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Tc(this.storage,this.storageKey));const{error:p}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:u}=t,{data:d,error:h}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new bp("You must provide either an email or phone number.")}catch(o){if(Jt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await cn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:da});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,d=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(Jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Tc(this.storage,this.storageKey));const o=await cn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:dz});return this._returnResult(o)}catch(s){if(Jt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ua;const{error:i}=await cn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(Jt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new bp("You must provide either an email or phone number and a type")}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Nl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<by:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Nl(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=wy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=oz(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zo}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ua}:await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Zo})})}catch(n){if(Jt(n))return zD(n)&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ua;const a=i.session;let o=null,u=null;this.flowType==="pkce"&&t.email!=null&&([o,u]=await Tc(this.storage,this.storageKey));const{data:d,error:h}=await cn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:u}),jwt:a.access_token,xform:Zo});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(Jt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ua;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=xy(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:u}=await this._getUser(t.access_token);if(u)throw u;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Jt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ua;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!$i())throw new vp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Rk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Rk("No code detected.");const{data:k,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:u,token_type:d}=t;if(!s||!o||!a||!d)throw new vp("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(o);let m=h+p;u&&(m=parseInt(u));const g=m-h;g*1e3<=Vc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const v=m-p;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,h);const{data:w,error:S}=await this._getUser(s);if(S)throw S;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:a,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(Jt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Nl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(DD(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=qD(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Tc(this.storage,this.storageKey,!0));try{return await cn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Jt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,u,d,h;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await cn(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return $i()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Jt(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:u,access_token:d,nonce:h}=t,p=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:da}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Ec}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(Jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await cn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ZD(async i=>(i>0&&await KD(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await cn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:da})),(i,s)=>{const a=200*Math.pow(2,i);return s&&vy(s)&&Date.now()+a-r<Vc})}catch(r){if(this._debug(n,"error",r),Jt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),$i()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Nl(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Nl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Gc(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:wy()}else if(i&&!i.user&&!i.user){const a=await Nl(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await zo(this.storage,this.storageKey+"-user"),await Gc(this.storage,this.storageKey,i)):i.user=wy()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<by;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${by}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),vy(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ua;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Jg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new ua;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),Jt(s)){const a={data:null,error:s};return vy(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Gc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Dk(i);await Gc(this.storage,this.storageKey,s)}else{const i=Dk(n);await Gc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await zo(this.storage,this.storageKey),await zo(this.storage,this.storageKey+"-code-verifier"),await zo(this.storage,this.storageKey+"-user"),this.userStorage&&await zo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&$i()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Vc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vc}ms, refresh threshold is ${ix} ticks`),i<=ix&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof WP)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$i()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Tc(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await cn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await cn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Tz(t.webauthn.credential_response):jz(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:u}=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:u}))})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Cz(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Ez(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=xy(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const d=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await cn(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ua})})}catch(n){if(Jt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ua});const a=await cn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&$i()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ua});const a=await cn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&$i()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+ID>i)return r;const{data:s,error:a}=await cn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:u}}=xy(r);n!=null&&n.allowExpired||iz(s.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:a},error:null}}const h=sz(i.alg),p=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,VD(`${o}.${u}`)))throw new ox("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(Jt(r))return this._returnResult({data:null,error:r});throw r}}}sf.nextInstanceID=0;const $z=sf;class Dz extends $z{constructor(t){super(t)}}class zz{constructor(t,n,r){var i,s,a;this.supabaseUrl=t,this.supabaseKey=n;const o=ND(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:kD,realtime:CD,auth:Object.assign(Object.assign({},SD),{storageKey:u}),global:_D},h=PD(r??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=jD(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new O$(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new vD(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new A$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:o,lock:u,debug:d,throwOnError:h},p,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dz({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:o,lock:u,debug:d,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new X$(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fz=(e,t,n)=>new zz(e,t,n);function Bz(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Bz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Vk={DRAFTIFY:"/api/studio-draftify",GEOMETRIC_GENERATE:"/api/studio-generate-geometric"},Gk={URL:"https://okakomwfikxmwllvliva.supabase.co",ANON_KEY:""},qk={AUTH_SESSION:"studio_auth_session"},Gl={BLEND_MODE_ENABLED:!1},ti=Fz(Gk.URL,Gk.ANON_KEY),_a={async signIn(e,t){const{data:n,error:r}=await ti.auth.signInWithPassword({email:e,password:t});if(r)throw r;return localStorage.setItem(qk.AUTH_SESSION,JSON.stringify(n.session)),n},async signOut(){await ti.auth.signOut(),localStorage.removeItem(qk.AUTH_SESSION)},async getSession(){const{data:e}=await ti.auth.getSession();return e.session},async updatePassword(e){const{data:t,error:n}=await ti.auth.updateUser({password:e});if(n)throw n;return await ti.auth.updateUser({data:{password_setup_complete:!0}}),t},onAuthStateChange(e){return ti.auth.onAuthStateChange(e)}};async function Cf(){var n,r;const e=await ti.auth.getSession(),t=(r=(n=e==null?void 0:e.data)==null?void 0:n.session)==null?void 0:r.access_token;if(!t)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async function eg(e){const t=await Cf(),n=await fetch("/api/designs/save",{method:"POST",headers:t,body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to save your design. Please check your connection and try again.")}return n.json()}async function tg({project_id:e,limit:t=50,offset:n=0,search:r}={}){const i=await Cf(),s=new URLSearchParams;e&&s.append("project_id",e),s.append("limit",t),s.append("offset",n),r&&s.append("search",r);const a=await fetch(`/api/designs/list?${s}`,{method:"GET",headers:i});if(!a.ok){const o=await a.json();throw new Error(o.error||"Unable to load your designs. Please refresh the page and try again.")}return a.json()}async function Ef(e){const t=await Cf(),n=await fetch(`/api/designs/by-id?id=${e}`,{method:"GET",headers:t});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to open this design. It may have been deleted or you may not have permission to view it.")}return n.json()}async function Uz(e){const t=await Cf(),n=await fetch(`/api/designs/by-id?id=${e}`,{method:"DELETE",headers:t});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to delete this design. Please check your connection and try again.")}return n.json()}async function Hz(e){const t=await Cf(),n=await fetch("/api/designs/fork",{method:"POST",headers:t,body:JSON.stringify({source_design_id:e})});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to create a copy of this design. Please try again.")}return n.json()}const Wz="modulepreload",Vz=function(e){return"/"+e},Yk={},Gz=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Vz(u),u in Yk)return;Yk[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Wz,d||(p.as="script"),p.crossOrigin="",p.href=u,o&&p.setAttribute("nonce",o),document.head.appendChild(p),d)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},Xk=e=>{let t;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const m=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,m))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=t=e(r,i,o);return o},qz=e=>e?Xk(e):Xk,Yz=e=>e;function Xz(e,t=Yz){const n=je.useSyncExternalStore(e.subscribe,je.useCallback(()=>t(e.getState()),[e,t]),je.useCallback(()=>t(e.getInitialState()),[e,t]));return je.useDebugValue(n),n}const Kk=e=>{const t=qz(e),n=r=>Xz(t,r);return Object.assign(n,t),n},qP=e=>e?Kk(e):Kk,Zk={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},af=new Map,xp=e=>{const t=af.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Kz=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=af.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return af.set(n.name,i),{type:"tracked",store:e,...i}},Zz=(e,t)=>{if(t===void 0)return;const n=af.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&af.delete(e))},Qz=e=>{var t,n;if(!e)return;const r=e.split(`
`),i=r.findIndex(a=>a.includes("api.setState"));if(i<0)return;const s=((t=r[i+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(s))==null?void 0:n[1]},Jz=(e,t={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:a,store:o,...u}=t;let d;try{d=(s??(Zk?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return e(n,r,i);const{connection:h,...p}=Kz(o,d,u);let m=!0;i.setState=(w,S,x)=>{const k=n(w,S);if(!m)return k;const j=x===void 0?{type:a||Qz(new Error().stack)||"anonymous"}:typeof x=="string"?{type:x}:x;return o===void 0?(h==null||h.send(j,r()),k):(h==null||h.send({...j,type:`${o}/${j.type}`},{...xp(u.name),[o]:i.getState()}),k)},i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),Zz(u.name,o)}};const g=(...w)=>{const S=m;m=!1,n(...w),m=S},v=e(i.setState,r,i);if(p.type==="untracked"?h==null||h.init(v):(p.stores[p.store]=i,h==null||h.init(Object.fromEntries(Object.entries(p.stores).map(([w,S])=>[w,w===p.store?v:S.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let w=!1;const S=i.dispatch;i.dispatch=(...x)=>{(Zk?"production":void 0)!=="production"&&x[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),S(...x)}}return h.subscribe(w=>{var S;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return ky(w.payload,x=>{if(x.type==="__setState"){if(o===void 0){g(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const k=x.state[o];if(k==null)return;JSON.stringify(i.getState())!==JSON.stringify(k)&&g(k);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(x)});case"DISPATCH":switch(w.payload.type){case"RESET":return g(v),o===void 0?h==null?void 0:h.init(i.getState()):h==null?void 0:h.init(xp(u.name));case"COMMIT":if(o===void 0){h==null||h.init(i.getState());return}return h==null?void 0:h.init(xp(u.name));case"ROLLBACK":return ky(w.state,x=>{if(o===void 0){g(x),h==null||h.init(i.getState());return}g(x[o]),h==null||h.init(xp(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return ky(w.state,x=>{if(o===void 0){g(x);return}JSON.stringify(i.getState())!==JSON.stringify(x[o])&&g(x[o])});case"IMPORT_STATE":{const{nextLiftedState:x}=w.payload,k=(S=x.computedStates.slice(-1)[0])==null?void 0:S.state;if(!k)return;g(o===void 0?k:k[o]),h==null||h.send(null,x);return}case"PAUSE_RECORDING":return m=!m}return}}),v},YP=Jz,ky=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function XP(e){let t=e%2147483647;return t<=0&&(t+=2147483646),function(){return t=t*16807%2147483647,(t-1)/2147483646}}function Qk(e,t,n){const r=XP(n),i=[],s=.4,a=.5,o=.5;for(let u=0;u<e;u++){const d=u/e*Math.PI*2-Math.PI/2,h=(r()-.5)*.4*t,p=d+h,m=1+(r()-.5)*t*.8,g=s*m,v=a+g*Math.cos(p),w=o+g*Math.sin(p),S=.35/e*(1+t*(r()-.5)),x=p+Math.PI/2,k=(r()-.5)*.3*t,j=x+Math.PI+k,O=x+k;i.push({x:v,y:w,handleIn:{x:Math.cos(j)*S,y:Math.sin(j)*S},handleOut:{x:Math.cos(O)*S,y:Math.sin(O)*S}})}return i}function eF(e,t,n){if(!e||e.length<3)return tF(t,n);const r=[],i=e.length;for(let s=0;s<i;s++){const a=e[s],o=e[(s+1)%i],u=a.x*t,d=a.y*n,h=o.x*t,p=o.y*n,m=u+a.handleOut.x*t,g=d+a.handleOut.y*n,v=h+o.handleIn.x*t,w=p+o.handleIn.y*n;s===0&&r.push(`M ${u.toFixed(2)},${d.toFixed(2)}`),r.push(`C ${m.toFixed(2)},${g.toFixed(2)} ${v.toFixed(2)},${w.toFixed(2)} ${h.toFixed(2)},${p.toFixed(2)}`)}return r.push("Z"),r.join(" ")}function tF(e,t){const n=e/2,r=t/2,i=n,s=r;return`M ${i-n},${s} A ${n},${r} 0 1,1 ${i+n},${s} A ${n},${r} 0 1,1 ${i-n},${s} Z`}function nF(){const n=[];for(let a=0;a<8;a++){const o=a/8*Math.PI*2-Math.PI/2,u=.5+.4*Math.cos(o),d=.5+.4*Math.sin(o),h=o+Math.PI/2;n.push({x:u,y:d,handleIn:{x:Math.cos(h+Math.PI)*.2,y:Math.sin(h+Math.PI)*.2},handleOut:{x:Math.cos(h)*.2,y:Math.sin(h)*.2}})}return n}const ng={organic:{name:"Organic",description:"Smooth, gentle curves like a pebble",minPoints:6,maxPoints:8,blobinessMin:.15,blobinessMax:.25,handleLengthFactor:.4,radiusVariation:.15},splashy:{name:"Splashy",description:"Irregular edges, some spikes like paint splatter",minPoints:10,maxPoints:12,blobinessMin:.3,blobinessMax:.5,handleLengthFactor:.25,radiusVariation:.35},cloudy:{name:"Cloudy",description:"Soft bumps, fluffy cloud-like appearance",minPoints:8,maxPoints:10,blobinessMin:.2,blobinessMax:.3,handleLengthFactor:.5,radiusVariation:.2},rocky:{name:"Rocky",description:"Angular variations, irregular stone-like edges",minPoints:8,maxPoints:12,blobinessMin:.25,blobinessMax:.4,handleLengthFactor:.2,radiusVariation:.3}};function Sy(e,t){const n=ng[e]||ng.organic,r=XP(t),i=Math.floor(r()*(n.maxPoints-n.minPoints+1))+n.minPoints,s=n.blobinessMin+r()*(n.blobinessMax-n.blobinessMin),a=[],o=.4,u=.5,d=.5;for(let h=0;h<i;h++){const p=h/i*Math.PI*2-Math.PI/2,m=(r()-.5)*.4*s,g=p+m,v=1+(r()-.5)*n.radiusVariation*2,w=o*v,S=u+w*Math.cos(g),x=d+w*Math.sin(g),j=n.handleLengthFactor/i*(.8+r()*.4),O=g+Math.PI/2,I=(r()-.5)*.3*s,E=O+Math.PI+I,U=O+I;a.push({x:S,y:x,handleIn:{x:Math.cos(E)*j,y:Math.sin(E)*j},handleOut:{x:Math.cos(U)*j,y:Math.sin(U)*j}})}return a}function rF(e,t,n,r){return{x:n?.5-(e-.5):e,y:r?.5-(t-.5):t}}function iF(e,t,n,r){return{x:n?-e:e,y:r?-t:t}}function KP(e,t,n,r=4){const i=[{index:e,mirrorX:!1,mirrorY:!1,rotationAngle:0}];if(n==="none"||!n)return i;if(n==="horizontal"){const s=(t-e)%t;return s!==e&&i.push({index:s,mirrorX:!0,mirrorY:!1,rotationAngle:0}),i}if(n==="vertical"){const s=(Math.floor(t/2)-e+t)%t;return s!==e&&i.push({index:s,mirrorX:!1,mirrorY:!0,rotationAngle:0}),i}if(n==="radial"){for(let s=1;s<r;s++){const a=Math.round(e+s*t/r)%t;if(a!==e){const o=s*2*Math.PI/r;i.push({index:a,mirrorX:!1,mirrorY:!1,rotationAngle:o})}}return i}return i}function sF(e,t,n,r,i,s=4){if(i==="none"||!i)return e.map((o,u)=>u!==t?o:{...o,x:n,y:r});const a=KP(t,e.length,i,s);return e.map((o,u)=>{const d=a.find(p=>p.index===u);if(!d)return o;if(d.rotationAngle!==0){const g=n-.5,v=r-.5,w=Math.cos(d.rotationAngle),S=Math.sin(d.rotationAngle);return{...o,x:.5+g*w-v*S,y:.5+g*S+v*w}}const h=rF(n,r,d.mirrorX,d.mirrorY);return{...o,x:h.x,y:h.y}})}function aF(e,t,n,r,i,s,a=4){if(s==="none"||!s)return e.map((u,d)=>d!==t?u:{...u,[n]:{x:r,y:i}});const o=KP(t,e.length,s,a);return e.map((u,d)=>{const h=o.find(v=>v.index===d);if(!h)return u;let p=n,m=r,g=i;if(h.rotationAngle!==0){const v=Math.cos(h.rotationAngle),w=Math.sin(h.rotationAngle);m=r*v-i*w,g=r*w+i*v}else{const v=iF(r,i,h.mirrorX,h.mirrorY);m=v.x,g=v.y}return{...u,[p]:{x:m,y:g}}})}function ZP(e,t,n,r=!0,i=!1){if(!e||e.length<2)return"";const s=[],a=e.length;for(let o=0;o<a;o++){const u=e[o],d=o===a-1,h=r?e[(o+1)%a]:d?null:e[o+1],p=u.x*t,m=u.y*n;if(o===0&&s.push(`M ${p.toFixed(2)},${m.toFixed(2)}`),!h)continue;const g=h.x*t,v=h.y*n;if(i&&u.handleOut&&h.handleIn){const w=p+u.handleOut.x*t,S=m+u.handleOut.y*n,x=g+h.handleIn.x*t,k=v+h.handleIn.y*n;s.push(`C ${w.toFixed(2)},${S.toFixed(2)} ${x.toFixed(2)},${k.toFixed(2)} ${g.toFixed(2)},${v.toFixed(2)}`)}else s.push(`L ${g.toFixed(2)},${v.toFixed(2)}`)}return r&&s.push("Z"),s.join(" ")}function Cy(e,t=!0,n=.3){if(!e||e.length<2)return e;const r=e.length,i=e.map(s=>({...s,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}));for(let s=0;s<r;s++){const a=t?e[(s-1+r)%r]:s>0?e[s-1]:e[s];e[s];const o=t?e[(s+1)%r]:s<r-1?e[s+1]:e[s],u=o.x-a.x,d=o.y-a.y,h=n*.5;!t&&s===0?(i[s].handleIn={x:0,y:0},i[s].handleOut={x:u*h,y:d*h}):!t&&s===r-1?(i[s].handleIn={x:-u*h,y:-d*h},i[s].handleOut={x:0,y:0}):(i[s].handleIn={x:-u*h,y:-d*h},i[s].handleOut={x:u*h,y:d*h})}return i}function oF(e,t,n,r){const i={x:n,y:r,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},s=[...e];return s.splice(t,0,i),s}function lF(e,t,n=3){if(e.length<=n)return null;const r=[...e];return r.splice(t,1),r}function cF(e){switch(e){case"l-shape":return[{x:0,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:.5,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:.5,y:.5,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:.5,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:0,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}];case"custom":default:return[{x:0,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:0,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:1,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}},{x:0,y:1,handleIn:{x:0,y:0},handleOut:{x:0,y:0}}]}}function Jk(e,t={}){switch(e){case"l-shape":{const n=t.cutWidth??.6,r=t.cutHeight??.4;return[{x:0,y:0},{x:n,y:0},{x:n,y:r},{x:1,y:r},{x:1,y:1},{x:0,y:1}]}case"u-shape":{const n=t.cutStart??.35,r=t.cutEnd??.65,i=t.cutHeight??.4;return[{x:0,y:0},{x:n,y:0},{x:n,y:i},{x:r,y:i},{x:r,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}case"t-shape":{const n=t.stemStart??.3,r=t.stemEnd??.7,i=t.stemHeight??.4;return[{x:0,y:0},{x:1,y:0},{x:1,y:i},{x:r,y:i},{x:r,y:1},{x:n,y:1},{x:n,y:i},{x:0,y:i}]}case"rectangle":default:return null}}function uF(e){switch(e){case"l-shape":return{cutWidth:.6,cutHeight:.4};case"u-shape":return{cutStart:.35,cutEnd:.65,cutHeight:.4};case"t-shape":return{stemStart:.3,stemEnd:.7,stemHeight:.4};default:return{}}}const Ey={surface:{width_mm:5e4,length_mm:5e4,color:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"},boundary:{type:"rectangle",controlPoints:null}},courts:{},selectedCourtId:null,tracks:{},selectedTrackId:null,motifs:{},selectedMotifId:null,shapes:{},selectedShapeId:null,texts:{},selectedTextId:null,exclusionZones:{},selectedExclusionZoneId:null,groups:{},selectedGroupId:null,selectedElementIds:[],clipboard:null,editingGroupId:null,elementOrder:[],customMarkings:[],backgroundZones:[],designName:"Untitled Design",designDescription:"",designTags:[],history:[],historyIndex:-1,maxHistory:50,showCourtLibrary:!0,showPropertiesPanel:!0,propertiesPanelUserClosed:!1,showColorEditor:!1,snapToGrid:!0,gridSize_mm:100,zoom:1,mobileLibraryOpen:!1,mobilePropertiesOpen:!1,mobileColoursOpen:!1,mobileActiveTab:"courts",standaloneMode:!1,standaloneDesignId:null,pathDrawingMode:!1,activePathId:null,isSaving:!1,lastSaved:null,isDirty:!1,isInteracting:!1,lastSavedHash:null,autosaveTimer:null,isBorrowed:!1,borrowedFromId:null,borrowedFromUser:null,isForking:!1,forkedDesignId:null},tn=qP(YP((e,t)=>({...Ey,setSurfaceDimensions:(n,r)=>{e(i=>({surface:{...i.surface,width_mm:n,length_mm:r}})),t().addToHistory()},setSurfaceColor:n=>{e(r=>({surface:{...r.surface,color:n}})),t().addToHistory()},setSurfaceBoundaryPreset:n=>{const r=uF(n),i=Jk(n,r);e(s=>({surface:{...s.surface,boundary:{type:n,controlPoints:i,params:r}}})),t().addToHistory()},updateBoundaryParams:n=>{var o;const r=t(),i=(o=r.surface.boundary)==null?void 0:o.type;if(!i||i==="rectangle"||i==="custom")return;const s={...r.surface.boundary.params,...n},a=Jk(i,s);e(u=>({surface:{...u.surface,boundary:{...u.surface.boundary,controlPoints:a,params:s}}})),t().addToHistory()},setSurfaceBoundaryPoints:n=>{e(r=>({surface:{...r.surface,boundary:{type:"custom",controlPoints:n}}})),t().addToHistory()},resetSurfaceBoundary:()=>{e(n=>({surface:{...n.surface,boundary:{type:"rectangle",controlPoints:null}}})),t().addToHistory()},addCourt:(n,r)=>{const i=`court-${Date.now()}`,s=h=>({RH01:{tpv_code:"RH01",hex:"#A5362F",name:"Standard Red"},RH02:{tpv_code:"RH02",hex:"#E21F2F",name:"Bright Red"},RH10:{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},RH11:{tpv_code:"RH11",hex:"#3BB44A",name:"Bright Green"},RH12:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"},RH20:{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},RH21:{tpv_code:"RH21",hex:"#493D8C",name:"Purple"},RH22:{tpv_code:"RH22",hex:"#47AFE3",name:"Light Blue"},RH23:{tpv_code:"RH23",hex:"#039DC4",name:"Azure"},RH26:{tpv_code:"RH26",hex:"#00A6A3",name:"Turquoise"},RH30:{tpv_code:"RH30",hex:"#E4C4AA",name:"Standard Beige"},RH31:{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},RH32:{tpv_code:"RH32",hex:"#8B5F3C",name:"Brown"},RH40:{tpv_code:"RH40",hex:"#E5A144",name:"Mustard Yellow"},RH41:{tpv_code:"RH41",hex:"#FFD833",name:"Bright Yellow"},RH50:{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},RH60:{tpv_code:"RH60",hex:"#59595B",name:"Dark Grey"},RH61:{tpv_code:"RH61",hex:"#939598",name:"Light Grey"},RH65:{tpv_code:"RH65",hex:"#D9D9D6",name:"Pale Grey"},RH70:{tpv_code:"RH70",hex:"#231F20",name:"Black"},RH90:{tpv_code:"RH90",hex:"#E8457E",name:"Funky Pink"}})[h]||{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},a={};if(r.defaultLineColor){const h=s(r.defaultLineColor);r.markings.forEach(p=>{a[p.id]=h})}const o={};if(r.defaultSurfaceColor&&r.zones){const h=s(r.defaultSurfaceColor);r.zones.forEach(p=>{o[p.id]=h})}const u=r.defaultSurfaceColor?s(r.defaultSurfaceColor):null,d={id:i,templateId:n,template:r,position:{x:t().surface.width_mm/2-r.dimensions.width_mm/2,y:t().surface.length_mm/2-r.dimensions.length_mm/2},rotation:0,scale:1,lineColorOverrides:a,zoneColorOverrides:o,courtSurfaceColor:u};e(h=>({courts:{...h.courts,[i]:d},elementOrder:[...h.elementOrder,i],selectedCourtId:i,selectedTrackId:null})),t().addToHistory()},removeCourt:n=>{const{[n]:r,...i}=t().courts;e(s=>({courts:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedCourtId:s.selectedCourtId===n?null:s.selectedCourtId})),t().addToHistory()},updateCourtPosition:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],position:r}}}))},updateCourtRotation:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],rotation:r}}}))},updateCourtScale:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],scale:r}}}))},duplicateCourt:n=>{const r=t().courts[n];if(!r)return;const i=`court-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({courts:{...a.courts,[i]:s},elementOrder:[...a.elementOrder,i],selectedCourtId:i,selectedTrackId:null})),t().addToHistory()},duplicateTrack:n=>{const r=t().tracks[n];if(!r)return;const i=`track-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({tracks:{...a.tracks,[i]:s},elementOrder:[...a.elementOrder,i],selectedTrackId:i,selectedCourtId:null})),t().addToHistory()},renameElement:(n,r)=>{n.startsWith("court-")?e(i=>({courts:{...i.courts,[n]:{...i.courts[n],customName:r}}})):n.startsWith("track-")?e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],customName:r}}})):n.startsWith("motif-")?e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],customName:r}}})):n.startsWith("shape-")?e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],customName:r}}})):n.startsWith("text-")?e(i=>({texts:{...i.texts,[n]:{...i.texts[n],customName:r}}})):n.startsWith("exclusion-")&&e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],customName:r}}})),t().addToHistory()},toggleElementLock:n=>{n.startsWith("court-")?e(r=>{var i;return{courts:{...r.courts,[n]:{...r.courts[n],locked:!((i=r.courts[n])!=null&&i.locked)}}}}):n.startsWith("track-")?e(r=>{var i;return{tracks:{...r.tracks,[n]:{...r.tracks[n],locked:!((i=r.tracks[n])!=null&&i.locked)}}}}):n.startsWith("motif-")?e(r=>{var i;return{motifs:{...r.motifs,[n]:{...r.motifs[n],locked:!((i=r.motifs[n])!=null&&i.locked)}}}}):n.startsWith("shape-")?e(r=>{var i;return{shapes:{...r.shapes,[n]:{...r.shapes[n],locked:!((i=r.shapes[n])!=null&&i.locked)}}}}):n.startsWith("text-")?e(r=>{var i;return{texts:{...r.texts,[n]:{...r.texts[n],locked:!((i=r.texts[n])!=null&&i.locked)}}}}):n.startsWith("exclusion-")?e(r=>{var i;return{exclusionZones:{...r.exclusionZones,[n]:{...r.exclusionZones[n],locked:!((i=r.exclusionZones[n])!=null&&i.locked)}}}}):n.startsWith("group-")&&e(r=>{var i;return{groups:{...r.groups,[n]:{...r.groups[n],locked:!((i=r.groups[n])!=null&&i.locked)}}}}),t().addToHistory()},toggleElementVisibility:n=>{n.startsWith("court-")?e(r=>{var i;return{courts:{...r.courts,[n]:{...r.courts[n],visible:((i=r.courts[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("track-")?e(r=>{var i;return{tracks:{...r.tracks,[n]:{...r.tracks[n],visible:((i=r.tracks[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("motif-")?e(r=>{var i;return{motifs:{...r.motifs,[n]:{...r.motifs[n],visible:((i=r.motifs[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("shape-")?e(r=>{var i;return{shapes:{...r.shapes,[n]:{...r.shapes[n],visible:((i=r.shapes[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("text-")?e(r=>{var i;return{texts:{...r.texts,[n]:{...r.texts[n],visible:((i=r.texts[n])==null?void 0:i.visible)===!1}}}}):n.startsWith("exclusion-")&&e(r=>{var i;return{exclusionZones:{...r.exclusionZones,[n]:{...r.exclusionZones[n],visible:((i=r.exclusionZones[n])==null?void 0:i.visible)===!1}}}}),t().addToHistory()},setLineColor:(n,r,i)=>{e(s=>({courts:{...s.courts,[n]:{...s.courts[n],lineColorOverrides:{...s.courts[n].lineColorOverrides,[r]:i}}}})),t().addToHistory()},setZoneColor:(n,r,i)=>{e(s=>({courts:{...s.courts,[n]:{...s.courts[n],zoneColorOverrides:{...s.courts[n].zoneColorOverrides,[r]:i}}}})),t().addToHistory()},resetCourtColors:n=>{e(r=>({courts:{...r.courts,[n]:{...r.courts[n],lineColorOverrides:{},zoneColorOverrides:{}}}})),t().addToHistory()},setCourtSurfaceColor:(n,r)=>{e(i=>({courts:{...i.courts,[n]:{...i.courts[n],courtSurfaceColor:r}}})),t().addToHistory()},selectCourt:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedCourtId:n,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedCourtId:n,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectCourt:()=>{e({selectedCourtId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},setElementOrder:n=>{e({elementOrder:n})},moveElementUp:n=>{const{elementOrder:r}=t(),i=r.indexOf(n);if(i<r.length-1){const s=[...r];[s[i],s[i+1]]=[s[i+1],s[i]],e({elementOrder:s}),t().addToHistory()}},moveElementDown:n=>{const{elementOrder:r}=t(),i=r.indexOf(n);if(i>0){const s=[...r];[s[i],s[i-1]]=[s[i-1],s[i]],e({elementOrder:s}),t().addToHistory()}},bringToFront:n=>{const{elementOrder:r}=t(),i=r.filter(s=>s!==n);i.push(n),e({elementOrder:i}),t().addToHistory()},sendToBack:n=>{const{elementOrder:r}=t(),i=r.filter(s=>s!==n);i.unshift(n),e({elementOrder:i}),t().addToHistory()},addTrack:(n,r)=>{const i=`track-${Date.now()}`,s=t().surface,a=s.width_mm,o=s.length_mm,u=x=>({RH01:{tpv_code:"RH01",hex:"#A5362F",name:"Standard Red"},RH31:{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},RH30:{tpv_code:"RH30",hex:"#E4C4AA",name:"Standard Beige"},RH20:{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},RH12:{tpv_code:"RH12",hex:"#006C55",name:"Dark Green"}})[x]||{tpv_code:x,hex:"#A5362F",name:"Standard Red"},d=r.defaultTrackSurfaceColor?u(r.defaultTrackSurfaceColor):u("RH01"),h=u("RH31"),p=r.trackType==="straight";let m,g,v;const w={enabled:!1,depth_mm:800,lineWidth_mm:50,style:"staggered",direction:"counterclockwise",startPosition:0};if(p){const x=r.parameters.numLanes,k=r.parameters.laneWidth_mm,j=x*k,O=Math.max(a,o)*.9,I=r.parameters.height_mm||1e5,E=Math.min(I,O);m={...r.parameters,width_mm:j,height_mm:E,cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},laneWidth_mm:k,startingBoxes:{...w,...r.parameters.startingBoxes}},v=90,g={x:a/2-j/2,y:o/2-E/2}}else{const x=a*.9,k=o*.9,j=r.parameters.width_mm||25e3,O=r.parameters.height_mm||15e3,I=x/j,E=k/O,U=Math.min(I,E),D=r.parameters.cornerRadius||{topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},R={topLeft:D.topLeft*U,topRight:D.topRight*U,bottomLeft:D.bottomLeft*U,bottomRight:D.bottomRight*U};m={...r.parameters,width_mm:x,height_mm:k,cornerRadius:R,laneWidth_mm:r.parameters.laneWidth_mm,startingBoxes:{...w,...r.parameters.startingBoxes}},v=0,g={x:a/2-x/2,y:o/2-k/2}}const S={id:i,templateId:n,template:r,position:g,rotation:v,parameters:m,trackSurfaceColor:d,laneSurfaceColors:[],trackLineColor:h};e(x=>({tracks:{...x.tracks,[i]:S},elementOrder:[...x.elementOrder,i],selectedTrackId:i,selectedCourtId:null})),t().addToHistory()},removeTrack:n=>{const{[n]:r,...i}=t().tracks;e(s=>({tracks:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedTrackId:s.selectedTrackId===n?null:s.selectedTrackId})),t().addToHistory()},updateTrackParameters:(n,r)=>{e(i=>{var p;const s=i.tracks[n];if(!s)return i;const a=s.parameters,o={...a,...r},u=((p=s.template)==null?void 0:p.trackType)==="straight";let d=s.position,h=s.laneSurfaceColors||[];if(r.numLanes!==void 0&&r.numLanes!==a.numLanes&&r.numLanes<a.numLanes&&(h=h.slice(0,r.numLanes)),u&&r.numLanes!==void 0&&r.numLanes!==a.numLanes){const m=a.laneWidth_mm,g=a.numLanes*m,v=r.numLanes*m;o.width_mm=v;const w=s.position.x+g/2,S=s.position.y+a.height_mm/2;d={x:w-v/2,y:S-o.height_mm/2}}return{tracks:{...i.tracks,[n]:{...s,parameters:o,position:d,laneSurfaceColors:h}}}}),t().addToHistory()},updateTrackPosition:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],position:r}}}))},updateTrackRotation:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],rotation:r}}}))},setTrackSurfaceColor:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],trackSurfaceColor:r}}})),t().addToHistory()},setTrackLineColor:(n,r)=>{e(i=>({tracks:{...i.tracks,[n]:{...i.tracks[n],trackLineColor:r}}})),t().addToHistory()},setLaneSurfaceColor:(n,r,i)=>{e(s=>{const a=s.tracks[n];if(!a)return s;const o=[...a.laneSurfaceColors||[]];for(;o.length<r;)o.push(null);return o[r-1]=i,{tracks:{...s.tracks,[n]:{...a,laneSurfaceColors:o}}}}),t().addToHistory()},resetLaneSurfaceColors:n=>{e(r=>({tracks:{...r.tracks,[n]:{...r.tracks[n],laneSurfaceColors:[]}}})),t().addToHistory()},selectTrack:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedTrackId:n,selectedCourtId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedTrackId:n,selectedCourtId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectTrack:()=>{e({selectedTrackId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},addMotif:(n,r,i,s,a,o=null,u={})=>{const d=`motif-${Date.now()}`,h=t().surface,p={id:d,type:"motif",sourceDesignId:n,sourceDesignName:r,sourceThumbnailUrl:o,solidSvgContent:u.solidSvgContent||i,blendSvgContent:u.blendSvgContent||null,hasBothVersions:u.hasBothVersions||!1,viewMode:"solid",svgContent:u.solidSvgContent||i,originalWidth_mm:s,originalHeight_mm:a,position:{x:h.width_mm/2-s/2,y:h.length_mm/2-a/2},rotation:0,scale:1};e(m=>({motifs:{...m.motifs,[d]:p},elementOrder:[...m.elementOrder,d],selectedMotifId:d,selectedCourtId:null,selectedTrackId:null})),t().addToHistory()},removeMotif:n=>{const{[n]:r,...i}=t().motifs;e(s=>({motifs:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedMotifId:s.selectedMotifId===n?null:s.selectedMotifId})),t().addToHistory()},updateMotifPosition:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],position:r}}}))},updateMotifRotation:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],rotation:r}}}))},updateMotifScale:(n,r)=>{e(i=>({motifs:{...i.motifs,[n]:{...i.motifs[n],scale:r}}}))},setMotifViewMode:(n,r)=>{const i=t().motifs[n];if(!i)return;const s=r==="blend"?i.blendSvgContent||i.solidSvgContent:i.solidSvgContent||i.blendSvgContent;e(a=>({motifs:{...a.motifs,[n]:{...a.motifs[n],viewMode:r,svgContent:s}}})),t().addToHistory()},duplicateMotif:n=>{const r=t().motifs[n];if(!r)return;const i=`motif-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({motifs:{...a.motifs,[i]:s},elementOrder:[...a.elementOrder,i],selectedMotifId:i,selectedCourtId:null,selectedTrackId:null})),t().addToHistory()},refreshMotif:async n=>{const r=t().motifs[n];if(!r)return{success:!1,error:"Motif not found"};try{const{fetchMotifFromDesign:i}=await Gz(async()=>{const{fetchMotifFromDesign:d}=await Promise.resolve().then(()=>g7);return{fetchMotifFromDesign:d}},void 0),s=await i(r.sourceDesignId),o=(r.viewMode||"solid")==="blend"?s.blendSvgContent||s.solidSvgContent:s.solidSvgContent||s.blendSvgContent;let u=r.scale||1;return r.originalWidth_mm&&s.originalWidth_mm&&(u=r.originalWidth_mm*(r.scale||1)/s.originalWidth_mm),e(d=>({motifs:{...d.motifs,[n]:{...d.motifs[n],solidSvgContent:s.solidSvgContent,blendSvgContent:s.blendSvgContent,hasBothVersions:s.hasBothVersions,svgContent:o,sourceThumbnailUrl:s.sourceThumbnailUrl,sourceDesignName:s.sourceDesignName,originalWidth_mm:s.originalWidth_mm,originalHeight_mm:s.originalHeight_mm,scale:u}},lastModified:Date.now()})),t().addToHistory(),{success:!0}}catch(i){return console.error("[MOTIF] Failed to refresh:",i),{success:!1,error:i.message}}},selectMotif:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedMotifId:n,selectedCourtId:null,selectedTrackId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedMotifId:n,selectedCourtId:null,selectedTrackId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectMotif:()=>{e({selectedMotifId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},addShape:(n="rectangle")=>{const r=`shape-${Date.now()}`,i=t().surface,s=t().shapes,a={rectangle:{sides:4,aspectLocked:!1,width:3e3,height:2e3},square:{sides:4,aspectLocked:!0,width:2e3,height:2e3},circle:{sides:32,aspectLocked:!0,width:2e3,height:2e3},triangle:{sides:3,aspectLocked:!0,width:2e3,height:2e3},pentagon:{sides:5,aspectLocked:!0,width:2e3,height:2e3},hexagon:{sides:6,aspectLocked:!0,width:2e3,height:2e3},polygon:{sides:6,aspectLocked:!0,width:2e3,height:2e3},star:{sides:5,aspectLocked:!0,width:2e3,height:2e3,starMode:!0,innerRadius:.5}},o=[{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},{tpv_code:"RH21",hex:"#493D8C",name:"Purple"},{tpv_code:"RH41",hex:"#FFD833",name:"Bright Yellow"},{tpv_code:"RH26",hex:"#00A6A3",name:"Turquoise"},{tpv_code:"RH02",hex:"#E21F2F",name:"Bright Red"},{tpv_code:"RH90",hex:"#E8457E",name:"Funky Pink"}],u=Object.keys(s).length,d=o[u%o.length];if(n==="blob"){const m=Math.floor(Math.random()*1e5),g="organic",v=Sy(g,m),w={id:r,type:"shape",shapeType:"blob",blobStyle:g,seed:m,controlPoints:v,editPointsVisible:!1,numPoints:v.length,blobiness:.2,symmetryMode:"none",radialSymmetryCount:4,width_mm:2e3,height_mm:2e3,position:{x:i.width_mm/2-1e3,y:i.length_mm/2-1e3},rotation:0,fillColor:d,strokeEnabled:!1,strokeColor:null,strokeWidth_mm:50,aspectLocked:!1,locked:!1,visible:!0};e(S=>({shapes:{...S.shapes,[r]:w},elementOrder:[...S.elementOrder,r],selectedShapeId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory();return}const h=a[n]||a.rectangle,p={id:r,type:"shape",shapeType:"polygon",sides:h.sides,width_mm:h.width,height_mm:h.height,cornerRadius:0,starMode:h.starMode||!1,innerRadius:h.innerRadius||.5,position:{x:i.width_mm/2-h.width/2,y:i.length_mm/2-h.height/2},rotation:0,fillColor:d,strokeEnabled:!1,strokeColor:null,strokeWidth_mm:50,aspectLocked:h.aspectLocked,locked:!1,visible:!0};e(m=>({shapes:{...m.shapes,[r]:p},elementOrder:[...m.elementOrder,r],selectedShapeId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory()},removeShape:n=>{const{[n]:r,...i}=t().shapes;e(s=>({shapes:i,elementOrder:s.elementOrder.filter(a=>a!==n),selectedShapeId:s.selectedShapeId===n?null:s.selectedShapeId})),t().addToHistory()},updateShapePosition:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],position:r}}}))},updateShapeDimensions:(n,r,i)=>{e(s=>({shapes:{...s.shapes,[n]:{...s.shapes[n],width_mm:r,height_mm:i}}}))},updateShapeSides:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s)return i;const a=Math.max(3,Math.min(32,r));let o=s.width_mm,u=s.height_mm;if(a!==4){const d=Math.min(s.width_mm,s.height_mm);o=d,u=d}return{shapes:{...i.shapes,[n]:{...s,sides:a,width_mm:o,height_mm:u,aspectLocked:a!==4}}}}),t().addToHistory()},updateShapeCornerRadius:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],cornerRadius:Math.max(0,Math.min(100,r))}}})),t().addToHistory()},setShapeStarMode:(n,r)=>{e(i=>{const s=i.shapes[n];return{shapes:{...i.shapes,[n]:{...s,starMode:r,sides:r&&s.sides<3?3:s.sides,innerRadius:s.innerRadius??.5}}}}),t().addToHistory()},setShapeInnerRadius:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],innerRadius:Math.max(.1,Math.min(.9,r))}}})),t().addToHistory()},updateShapeRotation:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],rotation:r}}}))},setShapeFillColor:(n,r)=>{e(i=>({shapes:{...i.shapes,[n]:{...i.shapes[n],fillColor:r}}})),t().addToHistory()},setShapeStroke:(n,r,i=null,s=50)=>{e(a=>({shapes:{...a.shapes,[n]:{...a.shapes[n],strokeEnabled:r,strokeColor:i,strokeWidth_mm:s}}})),t().addToHistory()},setShapeAspectLock:(n,r)=>{e(i=>{const s=i.shapes[n];return{shapes:{...i.shapes,[n]:{...s,aspectLocked:r}}}}),t().addToHistory()},updateBlobPoints:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=Qk(r,s.blobiness,s.seed);return{shapes:{...i.shapes,[n]:{...s,numPoints:r,controlPoints:a}}}}),t().addToHistory()},updateBlobiness:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=Qk(s.numPoints,r,s.seed);return{shapes:{...i.shapes,[n]:{...s,blobiness:r,controlPoints:a}}}}),t().addToHistory()},randomizeBlob:n=>{e(r=>{const i=r.shapes[n];if(!i||i.shapeType!=="blob")return r;const s=Math.floor(Math.random()*1e5),a=i.blobStyle||"organic",o=Sy(a,s);return{shapes:{...r.shapes,[n]:{...i,seed:s,controlPoints:o,numPoints:o.length}}}}),t().addToHistory()},setBlobStyle:(n,r)=>{e(i=>{const s=i.shapes[n];if(!s||s.shapeType!=="blob")return i;const a=Sy(r,s.seed);return{shapes:{...i.shapes,[n]:{...s,blobStyle:r,controlPoints:a,numPoints:a.length}}}}),t().addToHistory()},setEditPointsVisible:(n,r)=>{e(i=>{const s=i.shapes[n];return!s||s.shapeType!=="blob"&&s.shapeType!=="path"?i:{shapes:{...i.shapes,[n]:{...s,editPointsVisible:r}}}})},resetBlob:n=>{e(r=>{const i=r.shapes[n];if(!i||i.shapeType!=="blob")return r;const s=nF();return{shapes:{...r.shapes,[n]:{...i,blobiness:0,controlPoints:s}}}}),t().addToHistory()},updateBlobControlPoint:(n,r,i,s)=>{e(a=>{const o=a.shapes[n];if(!o||o.shapeType!=="blob"||!o.controlPoints)return a;const u=Math.max(0,Math.min(1,i)),d=Math.max(0,Math.min(1,s)),h=sF(o.controlPoints,r,u,d,o.symmetryMode||"none",o.radialSymmetryCount||4);return{shapes:{...a.shapes,[n]:{...o,controlPoints:h}}}})},updateBlobHandle:(n,r,i,s,a)=>{e(o=>{const u=o.shapes[n];if(!u||u.shapeType!=="blob"||!u.controlPoints)return o;const d=aF(u.controlPoints,r,i,s,a,u.symmetryMode||"none",u.radialSymmetryCount||4);return{shapes:{...o.shapes,[n]:{...u,controlPoints:d}}}})},commitBlobEdit:()=>{t().addToHistory()},setBlobSymmetry:(n,r,i=4)=>{e(s=>{const a=s.shapes[n];return!a||a.shapeType!=="blob"?s:{shapes:{...s.shapes,[n]:{...a,symmetryMode:r,radialSymmetryCount:i}}}}),t().addToHistory()},applyBlobPreset:(n,r)=>{const i=BLOB_PRESETS[r];!i||!i.controlPoints||(e(s=>{const a=s.shapes[n];return!a||a.shapeType!=="blob"?s:{shapes:{...s.shapes,[n]:{...a,numPoints:i.controlPoints.length,blobiness:0,controlPoints:JSON.parse(JSON.stringify(i.controlPoints))}}}}),t().addToHistory())},duplicateShape:n=>{const r=t().shapes[n];if(!r)return;const i=`shape-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500}};e(a=>({shapes:{...a.shapes,[i]:s},elementOrder:[...a.elementOrder,i],selectedShapeId:i,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null})),t().addToHistory()},selectShape:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null}:{selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectShape:()=>{e({selectedShapeId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},startPathDrawing:()=>{const n=`shape-path-${Date.now()}`,r=t().surface,i=t().shapes,s=[{tpv_code:"RH20",hex:"#0075BC",name:"Standard Blue"},{tpv_code:"RH50",hex:"#F15B32",name:"Orange"},{tpv_code:"RH10",hex:"#609B63",name:"Standard Green"},{tpv_code:"RH21",hex:"#493D8C",name:"Purple"}],a=Object.keys(i).length,o=s[a%s.length],u={id:n,type:"shape",shapeType:"path",controlPoints:[],closed:!0,smooth:!1,editPointsVisible:!1,width_mm:r.width_mm,height_mm:r.length_mm,position:{x:0,y:0},rotation:0,fillColor:o,strokeEnabled:!0,strokeColor:{tpv_code:"RH70",hex:"#A8A9AD",name:"Light Grey"},strokeWidth_mm:20,aspectLocked:!1,locked:!1,visible:!0};e({pathDrawingMode:!0,activePathId:n,shapes:{...t().shapes,[n]:u},elementOrder:[...t().elementOrder,n],selectedShapeId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null})},addPointToPath:(n,r)=>{const{activePathId:i,shapes:s,pathDrawingMode:a}=t();if(!a||!i)return;const o=s[i];if(!o||o.shapeType!=="path")return;const u={x:n,y:r,handleIn:{x:0,y:0},handleOut:{x:0,y:0}};e({shapes:{...s,[i]:{...o,controlPoints:[...o.controlPoints,u]}}})},finishPath:()=>{const{activePathId:n,shapes:r,pathDrawingMode:i}=t();if(!i||!n)return;const s=r[n];if(!s)return;if(s.controlPoints.length<3){t().cancelPath();return}const a=s.controlPoints;let o=1/0,u=1/0,d=-1/0,h=-1/0;for(const O of a)o=Math.min(o,O.x),u=Math.min(u,O.y),d=Math.max(d,O.x),h=Math.max(h,O.y);const p=d-o||1,m=h-u||1,g=.05,v=a.map(O=>({...O,x:g+(O.x-o)/p*(1-2*g),y:g+(O.y-u)/m*(1-2*g)})),w=t().surface,S=p*w.width_mm,x=m*w.length_mm,k=o*w.width_mm,j=u*w.length_mm;e({pathDrawingMode:!1,activePathId:null,shapes:{...r,[n]:{...s,controlPoints:v,width_mm:Math.max(500,S),height_mm:Math.max(500,x),position:{x:k,y:j},strokeEnabled:!1}}}),t().addToHistory()},cancelPath:()=>{const{activePathId:n,shapes:r,elementOrder:i}=t();if(!n){e({pathDrawingMode:!1});return}const s={...r};delete s[n],e({pathDrawingMode:!1,activePathId:null,shapes:s,elementOrder:i.filter(a=>a!==n),selectedShapeId:null})},setPathClosed:(n,r)=>{const i=t().shapes[n];!i||i.shapeType!=="path"||(e({shapes:{...t().shapes,[n]:{...i,closed:r}}}),t().addToHistory())},setPathSmooth:(n,r)=>{const i=t().shapes[n];if(!i||i.shapeType!=="path")return;let s=i.controlPoints;r&&i.controlPoints.length>=2?s=Cy(i.controlPoints,i.closed,.3):s=i.controlPoints.map(a=>({...a,handleIn:{x:0,y:0},handleOut:{x:0,y:0}})),e({shapes:{...t().shapes,[n]:{...i,smooth:r,controlPoints:s}}}),t().addToHistory()},updatePathControlPoint:(n,r,i,s)=>{const a=t().shapes[n];if(!a||a.shapeType!=="path")return;const o=[...a.controlPoints];o[r]={...o[r],x:i,y:s},e({shapes:{...t().shapes,[n]:{...a,controlPoints:o}}})},updatePathHandle:(n,r,i,s,a)=>{const o=t().shapes[n];if(!o||o.shapeType!=="path")return;const u=[...o.controlPoints];u[r]={...u[r],[i]:{x:s,y:a}},e({shapes:{...t().shapes,[n]:{...o,controlPoints:u}}})},addPointToExistingPath:(n,r,i,s)=>{const a=t().shapes[n];if(!a||a.shapeType!=="path")return;const o=oF(a.controlPoints,r,i,s),u=a.smooth?Cy(o,a.closed,.3):o;e({shapes:{...t().shapes,[n]:{...a,controlPoints:u}}}),t().addToHistory()},removePointFromPath:(n,r)=>{const i=t().shapes[n];if(!i||i.shapeType!=="path")return;const s=i.closed?3:2,a=lF(i.controlPoints,r,s);if(!a){console.log("[STORE] Cannot remove point - minimum reached");return}const o=i.smooth?Cy(a,i.closed,.3):a;e({shapes:{...t().shapes,[n]:{...i,controlPoints:o}}}),t().addToHistory()},commitPathEdit:()=>{t().addToHistory()},addText:()=>{const{surface:n}=t(),r=`text-${Date.now()}`,i={id:r,type:"text",content:"Text",fontFamily:"Open Sans, sans-serif",fontSize_mm:500,scale_x:1,scale_y:1,fontWeight:"normal",fontStyle:"normal",textAlign:"left",position:{x:n.width_mm/2,y:n.length_mm/2},rotation:0,fillColor:{tpv_code:"RH70",hex:"#1C1C1C",name:"Black"},strokeColor:null,strokeWidth_mm:0,locked:!1,visible:!0,customName:null};e(s=>({texts:{...s.texts,[r]:i},elementOrder:[...s.elementOrder,r],selectedTextId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,showPropertiesPanel:!0})),t().addToHistory()},removeText:n=>{e(r=>{const{[n]:i,...s}=r.texts;return{texts:s,elementOrder:r.elementOrder.filter(a=>a!==n),selectedTextId:r.selectedTextId===n?null:r.selectedTextId}}),t().addToHistory()},selectText:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedTextId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedExclusionZoneId:null}:{selectedTextId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedExclusionZoneId:null,showPropertiesPanel:!0})},deselectText:()=>{e({selectedTextId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},updateTextContent:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],content:r}}}))},updateTextPosition:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],position:r}}}))},updateTextScale:(n,r,i)=>{e(s=>({texts:{...s.texts,[n]:{...s.texts[n],scale_x:Math.max(.01,r),scale_y:Math.max(.01,i)}}}))},updateTextFontSize:(n,r)=>{if(!t().texts[n])return;const a=r/500;e(o=>({texts:{...o.texts,[n]:{...o.texts[n],scale_x:Math.max(.01,a),scale_y:Math.max(.01,a)}}})),t().addToHistory()},updateTextFont:(n,r,i,s)=>{e(a=>({texts:{...a.texts,[n]:{...a.texts[n],fontFamily:r,fontWeight:i,fontStyle:s}}})),t().addToHistory()},updateTextAlign:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],textAlign:r}}})),t().addToHistory()},updateTextRotation:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],rotation:r}}}))},setTextFillColor:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],fillColor:r}}})),t().addToHistory()},setTextStrokeColor:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],strokeColor:r}}})),t().addToHistory()},updateTextStrokeWidth:(n,r)=>{e(i=>({texts:{...i.texts,[n]:{...i.texts[n],strokeWidth_mm:r}}}))},duplicateText:n=>{const{texts:r}=t(),i=r[n];if(!i)return;const s=`text-${Date.now()}`,a={...i,id:s,position:{x:i.position.x+500,y:i.position.y+500},customName:i.customName?`${i.customName} (copy)`:null};e(o=>({texts:{...o.texts,[s]:a},elementOrder:[...o.elementOrder,s],selectedTextId:s,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null})),t().addToHistory()},addExclusionZone:(n="rectangle")=>{const r=`exclusion-${Date.now()}`,i=t().surface,s={rectangle:{shapeType:"polygon",sides:4,width:3e3,height:2e3},square:{shapeType:"polygon",sides:4,width:2e3,height:2e3},circle:{shapeType:"polygon",sides:32,width:2e3,height:2e3},"l-shape":{shapeType:"path",width:4e3,height:3e3},custom:{shapeType:"path",width:3e3,height:3e3}},a=s[n]||s.rectangle,o={id:r,type:"exclusion",shapeType:a.shapeType,sides:a.sides||4,width_mm:a.width,height_mm:a.height,position:{x:i.width_mm/2-a.width/2,y:i.length_mm/2-a.height/2},rotation:0,cornerRadius:0,locked:!1,visible:!0,customName:null,controlPoints:a.shapeType==="path"?cF(n):null};e(u=>({exclusionZones:{...u.exclusionZones,[r]:o},selectedExclusionZoneId:r,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null})),t().addToHistory()},removeExclusionZone:n=>{const{[n]:r,...i}=t().exclusionZones;e(s=>({exclusionZones:i,selectedExclusionZoneId:s.selectedExclusionZoneId===n?null:s.selectedExclusionZoneId})),t().addToHistory()},updateExclusionZonePosition:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],position:r}}}))},updateExclusionZoneDimensions:(n,r,i)=>{e(s=>({exclusionZones:{...s.exclusionZones,[n]:{...s.exclusionZones[n],width_mm:r,height_mm:i}}}))},updateExclusionZoneRotation:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],rotation:r}}}))},updateExclusionZoneCornerRadius:(n,r)=>{e(i=>({exclusionZones:{...i.exclusionZones,[n]:{...i.exclusionZones[n],cornerRadius:Math.max(0,Math.min(100,r))}}})),t().addToHistory()},selectExclusionZone:n=>{const{propertiesPanelUserClosed:r}=t();e(r?{selectedExclusionZoneId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null}:{selectedExclusionZoneId:n,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,showPropertiesPanel:!0})},deselectExclusionZone:()=>{e({selectedExclusionZoneId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},duplicateExclusionZone:n=>{const r=t().exclusionZones[n];if(!r)return;const i=`exclusion-${Date.now()}`,s={...r,id:i,position:{x:r.position.x+500,y:r.position.y+500},customName:r.customName?`${r.customName} (copy)`:null};e(a=>({exclusionZones:{...a.exclusionZones,[i]:s},selectedExclusionZoneId:i,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null})),t().addToHistory()},calculateGroupBounds:n=>{var u,d,h,p,m,g;const r=t();let i=1/0,s=1/0,a=-1/0,o=-1/0;for(const v of n)if(v.startsWith("shape-")){const w=r.shapes[v];if(w){const S=w.position.x,x=w.position.y;i=Math.min(i,S),s=Math.min(s,x),a=Math.max(a,S+w.width_mm),o=Math.max(o,x+w.height_mm)}}else if(v.startsWith("text-")){const w=r.texts[v];if(w){const S=w.fontSize_mm||500,x=w.scale_x||1,k=w.scale_y||1,j=w.content||"Text",O=S*.5,E=j.length*O*x,U=S*k;let D,R;const W=w.textAlign||"left";W==="center"?(D=w.position.x-E/2,R=w.position.x+E/2):W==="right"?(D=w.position.x-E,R=w.position.x):(D=w.position.x,R=w.position.x+E);const ce=w.position.y-U,te=w.position.y+S*.2*k;i=Math.min(i,D),s=Math.min(s,ce),a=Math.max(a,R),o=Math.max(o,te)}}else if(v.startsWith("court-")){const w=r.courts[v];if(w){const S=w.position.x,x=w.position.y,k=w.scale||1,j=(((d=(u=w.template)==null?void 0:u.dimensions)==null?void 0:d.width_mm)||0)*k,O=(((p=(h=w.template)==null?void 0:h.dimensions)==null?void 0:p.length_mm)||0)*k;i=Math.min(i,S),s=Math.min(s,x),a=Math.max(a,S+j),o=Math.max(o,x+O)}}else if(v.startsWith("track-")){const w=r.tracks[v];if(w){const S=w.position.x,x=w.position.y,k=w.scale||1,j=(((m=w.parameters)==null?void 0:m.width_mm)||5e3)*k,O=(((g=w.parameters)==null?void 0:g.height_mm)||1e4)*k;i=Math.min(i,S),s=Math.min(s,x),a=Math.max(a,S+j),o=Math.max(o,x+O)}}else if(v.startsWith("motif-")){const w=r.motifs[v];if(w){const S=w.position.x,x=w.position.y,k=(w.originalWidth_mm||1e3)*(w.scale||1),j=(w.originalHeight_mm||1e3)*(w.scale||1);i=Math.min(i,S),s=Math.min(s,x),a=Math.max(a,S+k),o=Math.max(o,x+j)}}return i===1/0?{x:0,y:0,width:0,height:0}:{x:i,y:s,width:a-i,height:o-s}},createGroup:(n,r={})=>{if(!n||n.length<2)return null;const i=`group-${Date.now()}`,s=t().calculateGroupBounds(n),a=t().elementOrder,o=[...n].sort((d,h)=>{const p=a.indexOf(d),m=a.indexOf(h);return p-m}),u={id:i,type:"group",childIds:o,compoundType:r.compoundType||null,generatorSeed:r.generatorSeed||null,customName:r.customName||null,locked:!1,visible:!0,bounds:s};return e(d=>{const h=Math.min(...n.map(m=>d.elementOrder.indexOf(m)).filter(m=>m>=0)),p=d.elementOrder.filter(m=>!n.includes(m));return p.splice(h,0,i),{groups:{...d.groups,[i]:u},elementOrder:p,selectedGroupId:i,selectedShapeId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,selectedElementIds:[]}}),t().addToHistory(),i},ungroup:n=>{const r=t().groups[n];r&&(e(i=>{const s=i.elementOrder.indexOf(n),a=i.elementOrder.filter(d=>d!==n);a.splice(s,0,...r.childIds);const{[n]:o,...u}=i.groups;return{groups:u,elementOrder:a,selectedGroupId:null,selectedElementIds:[...r.childIds]}}),t().addToHistory())},selectGroup:n=>{const{propertiesPanelUserClosed:r}=t();e({selectedGroupId:n,selectedShapeId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null,editingGroupId:null,selectedElementIds:[],showPropertiesPanel:!r})},deselectGroup:()=>{const n=t().editingGroupId;n&&t().refreshGroupBounds(n),e({selectedGroupId:null,editingGroupId:null,showPropertiesPanel:!1,propertiesPanelUserClosed:!0})},enterGroup:n=>{e({editingGroupId:n,selectedGroupId:null})},exitGroup:()=>{const n=t().editingGroupId;n&&(t().refreshGroupBounds(n),e({editingGroupId:null,selectedGroupId:n,selectedShapeId:null}))},updateGroupPosition:(n,r,i)=>{const s=t().groups[n];s&&e(a=>{const o={...a.shapes},u={...a.texts},d={...a.courts},h={...a.tracks},p={...a.motifs};for(const g of s.childIds)g.startsWith("shape-")&&o[g]?o[g]={...o[g],position:{x:o[g].position.x+r,y:o[g].position.y+i}}:g.startsWith("text-")&&u[g]?u[g]={...u[g],position:{x:u[g].position.x+r,y:u[g].position.y+i}}:g.startsWith("court-")&&d[g]?d[g]={...d[g],position:{x:d[g].position.x+r,y:d[g].position.y+i}}:g.startsWith("track-")&&h[g]?h[g]={...h[g],position:{x:h[g].position.x+r,y:h[g].position.y+i}}:g.startsWith("motif-")&&p[g]&&(p[g]={...p[g],position:{x:p[g].position.x+r,y:p[g].position.y+i}});const m={...s.bounds,x:s.bounds.x+r,y:s.bounds.y+i};return{shapes:o,texts:u,courts:d,tracks:h,motifs:p,groups:{...a.groups,[n]:{...s,bounds:m}}}})},commitGroupMove:()=>{t().addToHistory()},updateGroupScale:(n,r,i,s,a=null)=>{const o=t().groups[n];o&&e(u=>{const d={...u.shapes},h={...u.texts},p={...u.courts},m={...u.tracks},g={...u.motifs};for(const w of o.childIds){const S=a==null?void 0:a[w];if(w.startsWith("shape-")){const x=d[w];if(x){const k=(S==null?void 0:S.position)||x.position,j=(S==null?void 0:S.width_mm)||x.width_mm,O=(S==null?void 0:S.height_mm)||x.height_mm,I=k.x-s.x,E=k.y-s.y;d[w]={...x,position:{x:s.x+I*r,y:s.y+E*i},width_mm:j*r,height_mm:O*i}}}else if(w.startsWith("text-")){const x=h[w];if(x){const k=(S==null?void 0:S.position)||x.position,j=(S==null?void 0:S.width_mm)||x.width_mm||1e3,O=(S==null?void 0:S.height_mm)||x.height_mm||500,I=(S==null?void 0:S.fontSize)||x.fontSize||200,E=k.x-s.x,U=k.y-s.y;h[w]={...x,position:{x:s.x+E*r,y:s.y+U*i},width_mm:j*r,height_mm:O*i,fontSize:I*Math.min(r,i)}}}else if(w.startsWith("court-")){const x=p[w];if(x){const k=(S==null?void 0:S.position)||x.position,j=(S==null?void 0:S.scale)||x.scale||1,O=k.x-s.x,I=k.y-s.y,E=r===1?i:i===1?r:Math.min(r,i);p[w]={...x,position:{x:s.x+O*r,y:s.y+I*i},scale:j*E}}}else if(w.startsWith("track-")){const x=m[w];if(x){const k=(S==null?void 0:S.position)||x.position,j=(S==null?void 0:S.scale)||x.scale||1,O=k.x-s.x,I=k.y-s.y,E=r===1?i:i===1?r:Math.min(r,i);m[w]={...x,position:{x:s.x+O*r,y:s.y+I*i},scale:j*E}}}else if(w.startsWith("motif-")){const x=g[w];if(x){const k=(S==null?void 0:S.position)||x.position,j=(S==null?void 0:S.scale)||x.scale||1,O=k.x-s.x,I=k.y-s.y,E=r===1?i:i===1?r:Math.min(r,i);g[w]={...x,position:{x:s.x+O*r,y:s.y+I*i},scale:j*E}}}}const v=t().calculateGroupBounds(o.childIds);return{shapes:d,texts:h,courts:p,tracks:m,motifs:g,groups:{...u.groups,[n]:{...o,bounds:v}}}})},updateGroupRotation:(n,r,i,s=null)=>{const a=t().groups[n];if(!a)return;const o=(u,d,h,p,m)=>{const g=m*Math.PI/180,v=Math.cos(g),w=Math.sin(g),S=u-h,x=d-p;return{x:h+S*v-x*w,y:p+S*w+x*v}};e(u=>{var v,w,S,x,k,j;const d={...u.shapes},h={...u.texts},p={...u.courts},m={...u.tracks},g={...u.motifs};for(const O of a.childIds){const I=s==null?void 0:s[O];if(O.startsWith("shape-")){const E=d[O];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=U.x+(E.width_mm||0)/2,W=U.y+(E.height_mm||0)/2,ce=o(R,W,i.x,i.y,r);d[O]={...E,position:{x:ce.x-(E.width_mm||0)/2,y:ce.y-(E.height_mm||0)/2},rotation:(D+r)%360}}}else if(O.startsWith("text-")){const E=h[O];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=U.x+(E.width_mm||0)/2,W=U.y+(E.height_mm||0)/2,ce=o(R,W,i.x,i.y,r);h[O]={...E,position:{x:ce.x-(E.width_mm||0)/2,y:ce.y-(E.height_mm||0)/2},rotation:(D+r)%360}}}else if(O.startsWith("court-")){const E=p[O];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=E.scale||1,W=(((w=(v=E.template)==null?void 0:v.dimensions)==null?void 0:w.width_mm)||0)*R,ce=(((x=(S=E.template)==null?void 0:S.dimensions)==null?void 0:x.length_mm)||0)*R,te=U.x+W/2,me=U.y+ce/2,H=o(te,me,i.x,i.y,r);p[O]={...E,position:{x:H.x-W/2,y:H.y-ce/2},rotation:(D+r)%360}}}else if(O.startsWith("track-")){const E=m[O];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=E.scale||1,W=(((k=E.parameters)==null?void 0:k.width_mm)||5e3)*R,ce=(((j=E.parameters)==null?void 0:j.height_mm)||1e4)*R,te=U.x+W/2,me=U.y+ce/2,H=o(te,me,i.x,i.y,r);m[O]={...E,position:{x:H.x-W/2,y:H.y-ce/2},rotation:(D+r)%360}}}else if(O.startsWith("motif-")){const E=g[O];if(E){const U=(I==null?void 0:I.position)||E.position,D=(I==null?void 0:I.rotation)||E.rotation||0,R=E.scale||1,W=(E.originalWidth_mm||0)*R,ce=(E.originalHeight_mm||0)*R,te=U.x+W/2,me=U.y+ce/2,H=o(te,me,i.x,i.y,r);g[O]={...E,position:{x:H.x-W/2,y:H.y-ce/2},rotation:(D+r)%360}}}}return{shapes:d,texts:h,courts:p,tracks:m,motifs:g}})},addToSelection:n=>{e(r=>{if(r.selectedElementIds.includes(n))return{selectedElementIds:r.selectedElementIds.filter(a=>a!==n)};let i=[...r.selectedElementIds];const s=r.selectedShapeId||r.selectedTextId||r.selectedCourtId||r.selectedTrackId||r.selectedMotifId||r.selectedExclusionZoneId;return s&&!i.includes(s)&&i.push(s),i.push(n),{selectedElementIds:i,selectedShapeId:null,selectedGroupId:null,selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedTextId:null,selectedExclusionZoneId:null}})},clearMultiSelection:()=>{e({selectedElementIds:[]})},groupSelected:()=>{const{selectedElementIds:n}=t();n.length<2||t().createGroup(n)},alignElements:n=>{const{selectedElementIds:r,shapes:i,texts:s,courts:a,tracks:o,motifs:u}=t();if(r.length<2)return;const d=k=>{const j=k.fontSize_mm||500,O=k.scale_x||1,I=k.scale_y||1,E=k.content||"Text",U=j*.5,D=E.length*U*O,R=j*I,W=j*1.2*I;let ce=k.position.x;const te=k.textAlign||"left";return te==="center"?ce=k.position.x-D/2:te==="right"&&(ce=k.position.x-D),{x:ce,y:k.position.y-R,width:D,height:W,baselineOffset:R,alignOffset:k.position.x-ce}},h=r.map(k=>{var j,O,I,E,U,D;if(k.startsWith("shape-")){const R=i[k];if(R)return{id:k,type:"shape",x:R.position.x,y:R.position.y,width:R.width_mm||0,height:R.height_mm||0}}if(k.startsWith("text-")){const R=s[k];if(R){const W=d(R);return{id:k,type:"text",...W}}}if(k.startsWith("court-")){const R=a[k];if(R){const W=R.scale||1;return{id:k,type:"court",x:R.position.x,y:R.position.y,width:(((O=(j=R.template)==null?void 0:j.dimensions)==null?void 0:O.width_mm)||0)*W,height:(((E=(I=R.template)==null?void 0:I.dimensions)==null?void 0:E.length_mm)||0)*W}}}if(k.startsWith("track-")){const R=o[k];if(R){const W=R.scale||1;return{id:k,type:"track",x:R.position.x,y:R.position.y,width:(((U=R.parameters)==null?void 0:U.width_mm)||5e3)*W,height:(((D=R.parameters)==null?void 0:D.height_mm)||1e4)*W}}}if(k.startsWith("motif-")){const R=u[k];if(R)return{id:k,type:"motif",x:R.position.x,y:R.position.y,width:(R.originalWidth_mm||1e3)*(R.scale||1),height:(R.originalHeight_mm||1e3)*(R.scale||1)}}return null}).filter(Boolean);if(h.length<2)return;const p=Math.min(...h.map(k=>k.x)),m=Math.max(...h.map(k=>k.x+k.width)),g=Math.min(...h.map(k=>k.y)),v=Math.max(...h.map(k=>k.y+k.height)),w=(p+m)/2,S=(g+v)/2,x={};for(const k of h){let j=k.x,O=k.y;switch(n){case"left":j=p;break;case"center":j=w-k.width/2;break;case"right":j=m-k.width;break;case"top":O=g;break;case"middle":O=S-k.height/2;break;case"bottom":O=v-k.height;break}(j!==k.x||O!==k.y)&&(x[k.id]={x:j,y:O,type:k.type,baselineOffset:k.baselineOffset,alignOffset:k.alignOffset})}e(k=>{const j={...k.shapes},O={...k.texts},I={...k.courts},E={...k.tracks},U={...k.motifs};for(const[D,R]of Object.entries(x))R.type==="shape"&&j[D]?j[D]={...j[D],position:{x:R.x,y:R.y}}:R.type==="text"&&O[D]?O[D]={...O[D],position:{x:R.x+(R.alignOffset||0),y:R.y+(R.baselineOffset||0)}}:R.type==="court"&&I[D]?I[D]={...I[D],position:{x:R.x,y:R.y}}:R.type==="track"&&E[D]?E[D]={...E[D],position:{x:R.x,y:R.y}}:R.type==="motif"&&U[D]&&(U[D]={...U[D],position:{x:R.x,y:R.y}});return{shapes:j,texts:O,courts:I,tracks:E,motifs:U}}),t().addToHistory()},distributeElements:n=>{const{selectedElementIds:r,shapes:i,texts:s,courts:a,tracks:o,motifs:u}=t();if(r.length<3)return;const d=r.map(x=>{var k,j,O,I,E,U;if(x.startsWith("shape-")){const D=i[x];if(D)return{id:x,type:"shape",x:D.position.x,y:D.position.y,width:D.width_mm||0,height:D.height_mm||0}}if(x.startsWith("text-")){const D=s[x];if(D){const R=D.fontSize_mm||500,W=D.scale_x||1,ce=D.scale_y||1,te=D.content||"Text",me=D.textAlign||"left",H=R*.5,Ee=te.length*H*W,ke=R*ce,ze=R*1.2*ce;let xe,Re=0;me==="center"?(xe=D.position.x-Ee/2,Re=Ee/2):me==="right"?(xe=D.position.x-Ee,Re=Ee):(xe=D.position.x,Re=0);const _e=D.position.y-ke;return{id:x,type:"text",x:xe,y:_e,width:Ee,height:ze,alignOffset:Re,baselineOffset:ke}}}if(x.startsWith("court-")){const D=a[x];if(D){const R=D.scale||1;return{id:x,type:"court",x:D.position.x,y:D.position.y,width:(((j=(k=D.template)==null?void 0:k.dimensions)==null?void 0:j.width_mm)||0)*R,height:(((I=(O=D.template)==null?void 0:O.dimensions)==null?void 0:I.length_mm)||0)*R}}}if(x.startsWith("track-")){const D=o[x];if(D){const R=D.scale||1;return{id:x,type:"track",x:D.position.x,y:D.position.y,width:(((E=D.parameters)==null?void 0:E.width_mm)||5e3)*R,height:(((U=D.parameters)==null?void 0:U.height_mm)||1e4)*R}}}if(x.startsWith("motif-")){const D=u[x];if(D)return{id:x,type:"motif",x:D.position.x,y:D.position.y,width:(D.originalWidth_mm||1e3)*(D.scale||1),height:(D.originalHeight_mm||1e3)*(D.scale||1)}}return null}).filter(Boolean);if(d.length<3)return;const h={},p=n==="horizontal"||n==="center-horizontal",m=n==="center-horizontal"||n==="center-vertical",g=[...d].sort((x,k)=>p?m?x.x+x.width/2-(k.x+k.width/2):x.x-k.x:m?x.y+x.height/2-(k.y+k.height/2):x.y-k.y),v=g[0],w=g[g.length-1],S=g.length;if(m){let x,k;p?(x=v.x+v.width/2,k=w.x+w.width/2):(x=v.y+v.height/2,k=w.y+w.height/2);const j=(k-x)/(S-1);for(let O=0;O<g.length;O++){const I=g[O];let E=I.x,U=I.y;p?E=x+O*j-I.width/2:U=x+O*j-I.height/2,(E!==I.x||U!==I.y)&&(h[I.id]={x:E,y:U,type:I.type,alignOffset:I.alignOffset,baselineOffset:I.baselineOffset})}}else{let x,k;p?(x=w.x+w.width-v.x,k=g.reduce((I,E)=>I+E.width,0)):(x=w.y+w.height-v.y,k=g.reduce((I,E)=>I+E.height,0));const j=(x-k)/(S-1);let O=p?v.x:v.y;for(const I of g){let E=I.x,U=I.y;p?(E=O,O+=I.width+j):(U=O,O+=I.height+j),(E!==I.x||U!==I.y)&&(h[I.id]={x:E,y:U,type:I.type,alignOffset:I.alignOffset,baselineOffset:I.baselineOffset})}}e(x=>{const k={...x.shapes},j={...x.texts},O={...x.courts},I={...x.tracks},E={...x.motifs};for(const[U,D]of Object.entries(h))D.type==="shape"&&k[U]?k[U]={...k[U],position:{x:D.x,y:D.y}}:D.type==="text"&&j[U]?j[U]={...j[U],position:{x:D.x+(D.alignOffset||0),y:D.y+(D.baselineOffset||0)}}:D.type==="court"&&O[U]?O[U]={...O[U],position:{x:D.x,y:D.y}}:D.type==="track"&&I[U]?I[U]={...I[U],position:{x:D.x,y:D.y}}:D.type==="motif"&&E[U]&&(E[U]={...E[U],position:{x:D.x,y:D.y}});return{shapes:k,texts:j,courts:O,tracks:I,motifs:E}}),t().addToHistory()},copySelection:()=>{const{selectedElementIds:n,selectedGroupId:r,groups:i,shapes:s,texts:a}=t();if(r){const d=i[r];if(!d)return;const h=d.childIds.map(p=>s[p]?{type:"shape",data:JSON.parse(JSON.stringify(s[p]))}:a[p]?{type:"text",data:JSON.parse(JSON.stringify(a[p]))}:null).filter(Boolean);e({clipboard:{type:"group",groupData:JSON.parse(JSON.stringify(d)),children:h}});return}if(n.length>0){const d=n.map(h=>s[h]?{type:"shape",data:JSON.parse(JSON.stringify(s[h]))}:a[h]?{type:"text",data:JSON.parse(JSON.stringify(a[h]))}:null).filter(Boolean);e({clipboard:{type:"elements",data:d}});return}const{selectedShapeId:o,selectedTextId:u}=t();o&&s[o]?e({clipboard:{type:"elements",data:[{type:"shape",data:JSON.parse(JSON.stringify(s[o]))}]}}):u&&a[u]&&e({clipboard:{type:"elements",data:[{type:"text",data:JSON.parse(JSON.stringify(a[u]))}]}})},pasteClipboard:()=>{const{clipboard:n}=t();if(!n)return;const r=500;if(n.type==="group"){const i=`group-${Date.now()}`,s=[],a=Date.now();e(o=>{const u={...o.shapes},d={...o.texts};let h=[...o.elementOrder];n.children.forEach((m,g)=>{const v=`${m.type}-${a}-${g}`;s.push(v),m.type==="shape"?u[v]={...m.data,id:v,position:{x:m.data.position.x+r,y:m.data.position.y+r}}:m.type==="text"&&(d[v]={...m.data,id:v,position:{x:m.data.position.x+r,y:m.data.position.y+r}})});const p={...n.groupData,id:i,childIds:s,customName:n.groupData.customName?`${n.groupData.customName} (copy)`:"Group (copy)",bounds:{...n.groupData.bounds,x:n.groupData.bounds.x+r,y:n.groupData.bounds.y+r}};return h.push(i),{shapes:u,texts:d,groups:{...o.groups,[i]:p},elementOrder:h,selectedGroupId:i,selectedShapeId:null,selectedTextId:null,selectedElementIds:[]}})}else{const i=Date.now(),s=[];e(a=>{const o={...a.shapes},u={...a.texts};let d=[...a.elementOrder];return n.data.forEach((h,p)=>{const m=`${h.type}-${i}-${p}`;s.push(m),h.type==="shape"?(o[m]={...h.data,id:m,position:{x:h.data.position.x+r,y:h.data.position.y+r}},d.push(m)):h.type==="text"&&(u[m]={...h.data,id:m,position:{x:h.data.position.x+r,y:h.data.position.y+r}},d.push(m))}),{shapes:o,texts:u,elementOrder:d,selectedElementIds:s.length>1?s:[],selectedShapeId:s.length===1&&n.data[0].type==="shape"?s[0]:null,selectedTextId:s.length===1&&n.data[0].type==="text"?s[0]:null,selectedGroupId:null}})}t().addToHistory()},removeGroup:n=>{t().ungroup(n)},deleteGroupWithChildren:n=>{const r=t().groups[n];r&&(e(i=>{const s={...i.shapes},a={...i.texts},o={...i.courts},u={...i.tracks},d={...i.motifs},h={...i.exclusionZones};for(const v of r.childIds)v.startsWith("shape-")?delete s[v]:v.startsWith("text-")?delete a[v]:v.startsWith("court-")?delete o[v]:v.startsWith("track-")?delete u[v]:v.startsWith("motif-")?delete d[v]:v.startsWith("exclusion-")&&delete h[v];const{[n]:p,...m}=i.groups,g=i.elementOrder.filter(v=>v!==n&&!r.childIds.includes(v));return{shapes:s,texts:a,courts:o,tracks:u,motifs:d,exclusionZones:h,groups:m,elementOrder:g,selectedGroupId:null,selectedShapeId:null}}),t().addToHistory())},refreshGroupBounds:n=>{const r=t().groups[n];if(!r)return;const i=t().calculateGroupBounds(r.childIds);e(s=>({groups:{...s.groups,[n]:{...r,bounds:i}}}))},addCustomMarking:n=>{e(r=>({customMarkings:[...r.customMarkings,{...n,id:`custom-${Date.now()}`}]})),t().addToHistory()},removeCustomMarking:n=>{e(r=>({customMarkings:r.customMarkings.filter(i=>i.id!==n)})),t().addToHistory()},addBackgroundZone:n=>{e(r=>({backgroundZones:[...r.backgroundZones,{...n,id:`zone-${Date.now()}`}]})),t().addToHistory()},removeBackgroundZone:n=>{e(r=>({backgroundZones:r.backgroundZones.filter(i=>i.id!==n)})),t().addToHistory()},setDesignName:n=>{e({designName:n})},setDesignDescription:n=>{e({designDescription:n})},setDesignTags:n=>{e({designTags:n})},addToHistory:()=>{const n=t(),r=JSON.parse(JSON.stringify({surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones}));e(i=>{const s=i.history.slice(0,i.historyIndex+1);return s.push(r),s.length>i.maxHistory&&s.shift(),{history:s,historyIndex:s.length-1}}),t().markDirty()},undo:()=>{const{history:n,historyIndex:r}=t();if(r>0){const i=n[r-1];e({surface:i.surface,courts:i.courts,tracks:i.tracks,motifs:i.motifs,shapes:i.shapes,texts:i.texts,exclusionZones:i.exclusionZones,groups:i.groups,elementOrder:i.elementOrder,customMarkings:i.customMarkings,backgroundZones:i.backgroundZones,historyIndex:r-1})}},redo:()=>{const{history:n,historyIndex:r}=t();if(r<n.length-1){const i=n[r+1];e({surface:i.surface,courts:i.courts,tracks:i.tracks,motifs:i.motifs,shapes:i.shapes,texts:i.texts,exclusionZones:i.exclusionZones,groups:i.groups,elementOrder:i.elementOrder,customMarkings:i.customMarkings,backgroundZones:i.backgroundZones,historyIndex:r+1})}},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().history.length-1,selectDesignForSave:()=>{const n=t();return{surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones,designName:n.designName,designDescription:n.designDescription,designTags:n.designTags}},hashDesignState:n=>{const r=JSON.stringify(n);let i=5381;for(let s=0;s<r.length;s++)i=(i<<5)+i+r.charCodeAt(s);return(i>>>0).toString(36)},markDirty:async()=>{const n=t();if(n.isBorrowed&&!n.isForking&&n.borrowedFromId){e({isForking:!0});try{console.log("[STORE] Auto-forking borrowed design:",n.borrowedFromId);const r=await Hz(n.borrowedFromId);r.success&&r.design&&(console.log("[STORE] Fork successful, new design ID:",r.design.id),e({isBorrowed:!1,borrowedFromId:null,borrowedFromUser:null,forkedDesignId:r.design.id,designName:r.design.name}))}catch(r){console.error("[STORE] Fork failed:",r)}finally{e({isForking:!1})}}e({isDirty:!0}),t().scheduleAutosave()},setInteracting:n=>{e({isInteracting:n})},scheduleAutosave:()=>{const n=t();n.autosaveTimer&&clearTimeout(n.autosaveTimer);const r=setTimeout(()=>{const i=t();if(i.isInteracting){t().scheduleAutosave();return}if(i.isDirty){const s=t().selectDesignForSave(),a=t().hashDesignState(s);a!==i.lastSavedHash?(console.log("[AUTOSAVE] Design changed, would save here"),e({isDirty:!1,lastSavedHash:a,lastSaved:new Date().toISOString()})):e({isDirty:!1})}},15e3);e({autosaveTimer:r})},clearAutosaveTimer:()=>{const n=t().autosaveTimer;n&&(clearTimeout(n),e({autosaveTimer:null}))},getComplexityScore:()=>{const n=t(),r=Object.keys(n.courts).length,i=Object.keys(n.tracks).length,s=Object.keys(n.motifs).length,a=Object.keys(n.shapes).length,o=Object.keys(n.texts).length,u=Object.keys(n.exclusionZones).length,d=r+i+s+a+o+u,h=Object.values(n.shapes).filter(g=>g.type==="path"||g.type==="blob").length,p=n.surface.width_mm*n.surface.length_mm/1e6,m=d+s*3+h*2+Math.floor(p/100);return{score:m,elementCount:d,courtCount:r,trackCount:i,motifCount:s,shapeCount:a,textCount:o,pathCount:h,areaSqM:p,isLarge:m>50,isHuge:m>100}},toggleCourtLibrary:()=>{e(n=>({showCourtLibrary:!n.showCourtLibrary}))},togglePropertiesPanel:()=>{e(n=>({showPropertiesPanel:!n.showPropertiesPanel,propertiesPanelUserClosed:!!n.showPropertiesPanel}))},setShowPropertiesPanel:n=>{e({showPropertiesPanel:n,propertiesPanelUserClosed:!n})},setMobileLibraryOpen:n=>e({mobileLibraryOpen:n}),setMobilePropertiesOpen:n=>e({mobilePropertiesOpen:n}),setMobileColoursOpen:n=>e({mobileColoursOpen:n}),setMobileActiveTab:n=>e({mobileActiveTab:n}),closeMobileSheets:()=>e({mobileLibraryOpen:!1,mobilePropertiesOpen:!1,mobileColoursOpen:!1}),toggleColorEditor:()=>{e(n=>({showColorEditor:!n.showColorEditor}))},toggleSnapToGrid:()=>{e(n=>({snapToGrid:!n.snapToGrid}))},setGridSize:n=>{e({gridSize_mm:n})},setZoom:n=>{e({zoom:Math.max(.25,Math.min(5,n))})},toggleStandaloneMode:()=>{e(n=>({standaloneMode:!n.standaloneMode}))},setStandaloneMode:(n,r=null)=>{e({standaloneMode:n,standaloneDesignId:r})},setSaving:n=>{e({isSaving:n})},setLastSaved:n=>{e({lastSaved:n})},loadDesign:n=>{let r=n.elementOrder;!r&&(n.courtOrder||n.trackOrder)&&(r=[...n.trackOrder||[],...n.courtOrder||[]]),e({surface:n.surface||Ey.surface,courts:n.courts||{},tracks:n.tracks||{},motifs:n.motifs||{},shapes:n.shapes||{},texts:n.texts||{},exclusionZones:n.exclusionZones||{},groups:n.groups||{},elementOrder:r||[],customMarkings:n.customMarkings||[],backgroundZones:n.backgroundZones||[],designName:n.name||"Untitled Design",designDescription:n.description||"",designTags:n.tags||[],selectedCourtId:null,selectedTrackId:null,selectedMotifId:null,selectedShapeId:null,selectedTextId:null,selectedExclusionZoneId:null,selectedGroupId:null,editingGroupId:null,history:[],historyIndex:-1}),t().addToHistory()},setBorrowed:(n,r)=>{e({isBorrowed:!0,borrowedFromId:n,borrowedFromUser:r,forkedDesignId:null})},clearBorrowed:()=>{e({isBorrowed:!1,borrowedFromId:null,borrowedFromUser:null,isForking:!1,forkedDesignId:null})},exportDesignData:()=>{const n=t();return{surface:n.surface,courts:n.courts,tracks:n.tracks,motifs:n.motifs,shapes:n.shapes,texts:n.texts,exclusionZones:n.exclusionZones,groups:n.groups,elementOrder:n.elementOrder,customMarkings:n.customMarkings,backgroundZones:n.backgroundZones,name:n.designName,description:n.designDescription,tags:n.designTags}},resetDesign:()=>{e(Ey)},hasUnsavedChanges:()=>{const n=t();return Object.keys(n.courts).length>0||Object.keys(n.tracks).length>0||Object.keys(n.motifs).length>0||Object.keys(n.shapes).length>0||Object.keys(n.texts).length>0||Object.keys(n.exclusionZones).length>0}}),{name:"SportsDesignStore"}));class dF extends je.Component{constructor(n){super(n);qf(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?l.jsxs("div",{className:"error-boundary",children:[l.jsxs("div",{className:"error-content",children:[l.jsx("h1",{children:"Something went wrong"}),l.jsx("p",{children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),l.jsxs("div",{className:"error-actions",children:[l.jsx("button",{onClick:this.handleReset,className:"btn-primary",children:"Try Again"}),l.jsx("button",{onClick:()=>window.location.reload(),className:"btn-secondary",children:"Refresh Page"})]}),!1]}),l.jsx("style",{jsx:!0,children:`
            .error-boundary {
              min-height: 100vh;
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 2rem;
              background: #f9fafb;
            }

            .error-content {
              max-width: 500px;
              text-align: center;
              background: white;
              padding: 3rem;
              border-radius: 12px;
              box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            h1 {
              color: #1e4a7a;
              margin: 0 0 1rem 0;
              font-size: 1.75rem;
            }

            p {
              color: #6b7280;
              margin: 0 0 2rem 0;
              line-height: 1.6;
            }

            .error-actions {
              display: flex;
              gap: 1rem;
              justify-content: center;
            }

            .btn-primary,
            .btn-secondary {
              padding: 0.75rem 1.5rem;
              border-radius: 6px;
              font-weight: 500;
              cursor: pointer;
              transition: all 0.2s;
              border: none;
            }

            .btn-primary {
              background: #ff6b35;
              color: white;
            }

            .btn-primary:hover {
              background: #e55a2b;
              transform: translateY(-1px);
            }

            .btn-secondary {
              background: white;
              color: #374151;
              border: 1px solid #d1d5db;
            }

            .btn-secondary:hover {
              background: #f9fafb;
            }

            .error-details {
              margin-top: 2rem;
              text-align: left;
              font-size: 0.875rem;
            }

            .error-details summary {
              cursor: pointer;
              color: #6b7280;
              margin-bottom: 0.5rem;
            }

            .error-details pre {
              background: #f3f4f6;
              padding: 1rem;
              border-radius: 4px;
              overflow-x: auto;
              font-size: 0.75rem;
              color: #dc2626;
            }
          `})]}):this.props.children}}const eS={inputMode:"prompt",prompt:"",lengthMM:5e3,widthMM:5e3,selectedFileName:null,uploadedFileUrl:null,arMapping:null,result:null,jobId:null,blendRecipes:null,blendSvgUrl:null,colorMapping:null,blendEditedColors:new Map,solidRecipes:null,solidSvgUrl:null,solidColorMapping:null,solidEditedColors:new Map,viewMode:"solid",showFinalRecipes:!1,showSolidSummary:!1,regionOverrides:new Map,originalTaggedSvg:null,originalUnflattenedSvg:null,originalRecipesState:null,regionOverridesHistory:[new Map],historyIndex:0,designName:"",currentDesignId:null,hasGeneratedContent:!1,lastModified:null},rg=qP(YP((e,t)=>({...eS,setInputMode:n=>e({inputMode:n}),setPrompt:n=>e({prompt:n,lastModified:Date.now()}),setDimensions:(n,r)=>e({widthMM:n,lengthMM:r,lastModified:Date.now()}),setArMapping:n=>e({arMapping:n}),setSelectedFile:(n,r)=>e({selectedFileName:n,uploadedFileUrl:r,lastModified:Date.now()}),clearSelectedFile:()=>e({selectedFileName:null,uploadedFileUrl:null}),setGenerationResult:(n,r)=>e({result:n,jobId:r,hasGeneratedContent:!0,lastModified:Date.now()}),setResult:n=>e({result:n,hasGeneratedContent:!!n,lastModified:Date.now()}),setJobId:n=>e({jobId:n}),setBlendState:(n,r,i)=>e({blendRecipes:n,colorMapping:r,blendSvgUrl:i,lastModified:Date.now()}),setBlendRecipes:n=>e({blendRecipes:n,lastModified:Date.now()}),setColorMapping:n=>e({colorMapping:n,lastModified:Date.now()}),setBlendSvgUrl:n=>e({blendSvgUrl:n}),setBlendEditedColors:n=>e({blendEditedColors:n,lastModified:Date.now()}),updateBlendSvgUrl:n=>e({blendSvgUrl:n}),setSolidState:(n,r,i)=>e({solidRecipes:n,solidColorMapping:r,solidSvgUrl:i,lastModified:Date.now()}),setSolidRecipes:n=>e({solidRecipes:n,lastModified:Date.now()}),setSolidColorMapping:n=>e({solidColorMapping:n,lastModified:Date.now()}),setSolidSvgUrl:n=>e({solidSvgUrl:n}),setSolidEditedColors:n=>e({solidEditedColors:n,lastModified:Date.now()}),updateSolidSvgUrl:n=>e({solidSvgUrl:n}),setViewMode:n=>{if(n==="blend"){console.log("[STORE] Blend mode disabled - forcing solid mode");return}e({viewMode:n})},setShowFinalRecipes:n=>e({showFinalRecipes:n}),setShowSolidSummary:n=>e({showSolidSummary:n}),setOriginalTaggedSvg:n=>e({originalTaggedSvg:n}),setOriginalUnflattenedSvg:n=>e({originalUnflattenedSvg:n}),setOriginalRecipesState:n=>e({originalRecipesState:n}),setRegionOverrides:n=>e({regionOverrides:n,lastModified:Date.now()}),addRegionOverride:(n,r)=>{const i=new Map(t().regionOverrides),s=typeof r=="string"?{hex:r}:r;i.set(n,s);const a=t().regionOverridesHistory,o=t().historyIndex,u=a.slice(0,o+1);u.push(new Map(i)),u.length>50&&u.shift(),e({regionOverrides:i,regionOverridesHistory:u,historyIndex:u.length-1,lastModified:Date.now()})},setRegionOverridesHistory:n=>{e(typeof n=="function"?{regionOverridesHistory:n(t().regionOverridesHistory)}:{regionOverridesHistory:n})},setHistoryIndex:n=>{e(typeof n=="function"?{historyIndex:n(t().historyIndex)}:{historyIndex:n})},canUndo:()=>t().historyIndex>0,canRedo:()=>t().historyIndex<t().regionOverridesHistory.length-1,undo:()=>{const{historyIndex:n,regionOverridesHistory:r}=t();if(n>0){const i=n-1;e({historyIndex:i,regionOverrides:new Map(r[i])})}},redo:()=>{const{historyIndex:n,regionOverridesHistory:r}=t();if(n<r.length-1){const i=n+1;e({historyIndex:i,regionOverrides:new Map(r[i])})}},setRegionOverridesHistory:(n,r)=>e({regionOverridesHistory:n,historyIndex:r}),setDesignName:n=>e({designName:n}),setCurrentDesignId:n=>e({currentDesignId:n}),loadDesign:n=>{const r=n.regionOverrides||new Map,i=r.size>0?[new Map,new Map(r)]:[new Map],s=r.size>0?1:0;e({inputMode:n.inputMode||"prompt",prompt:n.prompt||"",lengthMM:n.lengthMM||5e3,widthMM:n.widthMM||5e3,uploadedFileUrl:n.selectedFile||null,result:n.result||null,blendRecipes:n.blendRecipes||null,solidRecipes:n.solidRecipes||null,colorMapping:n.colorMapping||null,solidColorMapping:n.solidColorMapping||null,solidEditedColors:n.solidEditedColors||new Map,blendEditedColors:n.blendEditedColors||new Map,blendSvgUrl:n.blendSvgUrl||null,solidSvgUrl:n.solidSvgUrl||null,viewMode:"solid",arMapping:n.arMapping||null,jobId:n.jobId||null,showFinalRecipes:n.showFinalRecipes||!1,showSolidSummary:n.showSolidSummary||!1,hasGeneratedContent:!!n.result,regionOverrides:r,originalTaggedSvg:n.originalTaggedSvg||null,regionOverridesHistory:i,historyIndex:s,originalUnflattenedSvg:n.originalUnflattenedSvg||null,originalRecipesState:n.originalRecipesState||null,lastModified:Date.now()})},exportDesignData:()=>{const n=t();return{inputMode:n.inputMode,prompt:n.prompt,lengthMM:n.lengthMM,widthMM:n.widthMM,uploadedFileUrl:n.uploadedFileUrl,result:n.result,blendRecipes:n.blendRecipes,solidRecipes:n.solidRecipes,colorMapping:n.colorMapping,solidColorMapping:n.solidColorMapping,solidEditedColors:n.solidEditedColors,blendEditedColors:n.blendEditedColors,viewMode:n.viewMode,arMapping:n.arMapping,jobId:n.jobId,showFinalRecipes:n.showFinalRecipes,showSolidSummary:n.showSolidSummary,regionOverrides:n.regionOverrides,designName:n.designName,currentDesignId:n.currentDesignId}},resetDesign:()=>{const{blendSvgUrl:n,solidSvgUrl:r}=t();n&&n.startsWith("blob:")&&URL.revokeObjectURL(n),r&&r.startsWith("blob:")&&URL.revokeObjectURL(r),e({...eS,blendEditedColors:new Map,solidEditedColors:new Map,regionOverrides:new Map,regionOverridesHistory:[new Map]})},hasUnsavedChanges:()=>{const n=t();return n.hasGeneratedContent||n.prompt.trim()!==""||n.selectedFileName!==null}}),{name:"PlaygroundDesignStore"})),QP={"basketball-full":{id:"basketball-full",name:"Basketball (Full Court)",sport:"basketball",standard:"FIBA 2020",category:"court",description:"Official FIBA standard full basketball court with all markings",dimensions:{length_mm:28e3,width_mm:15e3,min_surround_mm:2e3},defaultSurfaceColor:"RH20",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15e3,height:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:14e3,x2:15e3,y2:14e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7500,cy:14e3,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-arc-top",name:"Three-Point Arc (Top)",type:"arc",params:{cx:7500,cy:26425,radius:6750,startAngle:192,endAngle:348},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-arc-bottom",name:"Three-Point Arc (Bottom)",type:"arc",params:{cx:7500,cy:1575,radius:6750,startAngle:12,endAngle:168},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-bottom-left",name:"Three-Point Line Bottom Left",type:"line",params:{x1:900,y1:0,x2:900,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-bottom-right",name:"Three-Point Line Bottom Right",type:"line",params:{x1:14100,y1:0,x2:14100,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-top-left",name:"Three-Point Line Top Left",type:"line",params:{x1:900,y1:25010,x2:900,y2:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-top-right",name:"Three-Point Line Top Right",type:"line",params:{x1:14100,y1:25010,x2:14100,y2:28e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-top",name:"Free Throw Line (Top)",type:"line",params:{x1:5050,y1:22200,x2:9950,y2:22200},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-bottom",name:"Free Throw Line (Bottom)",type:"line",params:{x1:5050,y1:5800,x2:9950,y2:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle-top",name:"Free Throw Circle (Top)",type:"circle",params:{cx:7500,cy:22200,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle-bottom",name:"Free Throw Circle (Bottom)",type:"circle",params:{cx:7500,cy:5800,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane-top",name:"Key Lane (Top)",type:"rectangle",params:{x:5050,y:22200,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane-bottom",name:"Key Lane (Bottom)",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area-top",name:"Restricted Area (Top)",type:"arc",params:{cx:7500,cy:28e3,radius:1250,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area-bottom",name:"Restricted Area (Bottom)",type:"arc",params:{cx:7500,cy:0,radius:1250,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"three-point-arc-area-bottom",name:"3-Point Arc (Bottom)",type:"path",params:{d:"M 900,2990 A 6750,6750 0 0,1 14100,2990 L 14100,0 L 9950,0 L 9950,5800 L 5050,5800 L 5050,0 L 900,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:52.5},{id:"three-point-arc-area-top",name:"3-Point Arc (Top)",type:"path",params:{d:"M 900,25010 A 6750,6750 0 0,0 14100,25010 L 14100,28000 L 9950,28000 L 9950,22200 L 5050,22200 L 5050,28000 L 900,28000 Z"},defaultColor:"RH20",paintable:!0,area_m2:52.5},{id:"three-point-corner-bottom-left",name:"3-Point Corner (Bottom Left)",type:"rectangle",params:{x:0,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-bottom-right",name:"3-Point Corner (Bottom Right)",type:"rectangle",params:{x:14100,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-top-left",name:"3-Point Corner (Top Left)",type:"rectangle",params:{x:0,y:25010,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-top-right",name:"3-Point Corner (Top Right)",type:"rectangle",params:{x:14100,y:25010,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"key-area-top",name:"Key Area (Top)",type:"rectangle",params:{x:5050,y:22200,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"key-area-bottom",name:"Key Area (Bottom)",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"free-throw-semicircle-top",name:"Free-Throw Semi-Circle (Top)",type:"path",params:{d:"M 5700,22200 A 1800,1800 0 0,1 9300,22200 Z"},defaultColor:"RH20",paintable:!0,area_m2:5.09},{id:"free-throw-semicircle-bottom",name:"Free-Throw Semi-Circle (Bottom)",type:"path",params:{d:"M 5700,5800 A 1800,1800 0 0,0 9300,5800 Z"},defaultColor:"RH20",paintable:!0,area_m2:5.09},{id:"restricted-area-bottom",name:"Restricted Area (Bottom)",type:"path",params:{d:"M 6250,0 A 1250,1250 0 0,0 8750,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:2.45},{id:"restricted-area-top",name:"Restricted Area (Top)",type:"path",params:{d:"M 6250,28000 A 1250,1250 0 0,1 8750,28000 Z"},defaultColor:"RH20",paintable:!0,area_m2:2.45},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7500,cy:14e3,radius:1800},defaultColor:"RH20",paintable:!0,area_m2:10.18}]},"netball-full":{id:"netball-full",name:"Netball (Full Court)",sport:"netball",standard:"World Netball 2020",category:"court",description:"Official World Netball standard court with goal circles and thirds",dimensions:{length_mm:30500,width_mm:15250,min_surround_mm:3050},defaultSurfaceColor:"RH01",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15250,height:30500},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"transverse-line-1",name:"Transverse Line 1",type:"line",params:{x1:0,y1:10167,x2:15250,y2:10167},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"transverse-line-2",name:"Transverse Line 2",type:"line",params:{x1:0,y1:20333,x2:15250,y2:20333},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7625,cy:15250,radius:450},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-circle-bottom",name:"Goal Circle (Bottom)",type:"arc",params:{cx:7625,cy:0,radius:4900,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-circle-top",name:"Goal Circle (Top)",type:"arc",params:{cx:7625,cy:30500,radius:4900,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"goal-third-bottom",name:"Goal Third (Bottom)",type:"rectangle",params:{x:0,y:0,width:15250,height:10167},defaultColor:"RH01",paintable:!0,area_m2:155.05},{id:"center-third",name:"Center Third",type:"rectangle",params:{x:0,y:10167,width:15250,height:10166},defaultColor:"RH01",paintable:!0,area_m2:155.03},{id:"goal-third-top",name:"Goal Third (Top)",type:"rectangle",params:{x:0,y:20333,width:15250,height:10167},defaultColor:"RH01",paintable:!0,area_m2:155.05},{id:"goal-circle-bottom",name:"Goal Circle (Bottom)",type:"path",params:{d:"M 2725,0 A 4900,4900 0 0,0 12525,0 Z"},defaultColor:"RH01",paintable:!0,area_m2:37.72},{id:"goal-circle-top",name:"Goal Circle (Top)",type:"path",params:{d:"M 2725,30500 A 4900,4900 0 0,1 12525,30500 Z"},defaultColor:"RH01",paintable:!0,area_m2:37.72},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:7625,cy:15250,radius:450},defaultColor:"RH01",paintable:!0,area_m2:.64}]},"tennis-doubles":{id:"tennis-doubles",name:"Tennis (Doubles)",sport:"tennis",standard:"ITF 2020",category:"court",description:"Official ITF standard doubles tennis court with all service boxes",dimensions:{length_mm:23770,width_mm:10970,min_surround_mm:3660},defaultSurfaceColor:"RH22",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:10970,height:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"singles-sideline-left",name:"Singles Sideline (Left)",type:"line",params:{x1:1370,y1:0,x2:1370,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"singles-sideline-right",name:"Singles Sideline (Right)",type:"line",params:{x1:9600,y1:0,x2:9600,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:6400,x2:10970,y2:6400},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17370,x2:10970,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:5485,y1:6400,x2:5485,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-bottom",name:"Center Mark (Bottom)",type:"line",params:{x1:5485,y1:0,x2:5485,y2:100},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-top",name:"Center Mark (Top)",type:"line",params:{x1:5485,y1:23670,x2:5485,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"doubles-alley-left",name:"Doubles Alley (Left)",type:"rectangle",params:{x:0,y:0,width:1370,height:23770},defaultColor:"RH22",paintable:!0,area_m2:32.57},{id:"doubles-alley-right",name:"Doubles Alley (Right)",type:"rectangle",params:{x:9600,y:0,width:1370,height:23770},defaultColor:"RH22",paintable:!0,area_m2:32.57},{id:"back-court-bottom",name:"Back Court (Bottom)",type:"rectangle",params:{x:1370,y:0,width:8230,height:6400},defaultColor:"RH22",paintable:!0,area_m2:52.67},{id:"back-court-top",name:"Back Court (Top)",type:"rectangle",params:{x:1370,y:17370,width:8230,height:6400},defaultColor:"RH22",paintable:!0,area_m2:52.67},{id:"service-box-bottom-left",name:"Service Box (Bottom Left)",type:"rectangle",params:{x:1370,y:6400,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57},{id:"service-box-bottom-right",name:"Service Box (Bottom Right)",type:"rectangle",params:{x:5485,y:6400,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57},{id:"service-box-top-left",name:"Service Box (Top Left)",type:"rectangle",params:{x:1370,y:11885,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57},{id:"service-box-top-right",name:"Service Box (Top Right)",type:"rectangle",params:{x:5485,y:11885,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57}]},"futsal-standard":{id:"futsal-standard",name:"Futsal (5-a-side)",sport:"futsal",standard:"FIFA 2020",category:"court",description:"Official FIFA standard futsal court for international matches",dimensions:{length_mm:4e4,width_mm:2e4,min_surround_mm:1e3},defaultSurfaceColor:"RH50",defaultLineColor:"RH30",defaultLineWidth_mm:80,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:2e4,height:4e4},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:2e4,x2:2e4,y2:2e4},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:1e4,cy:2e4,radius:3e3},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"center-spot",name:"Center Spot",type:"circle",params:{cx:1e4,cy:2e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-area-bottom",name:"Penalty Area (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:6e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-area-top",name:"Penalty Area (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:6e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-mark-bottom",name:"Penalty Mark (Bottom)",type:"circle",params:{cx:1e4,cy:6e3,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"penalty-mark-top",name:"Penalty Mark (Top)",type:"circle",params:{cx:1e4,cy:34e3,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"second-penalty-mark-bottom",name:"Second Penalty Mark (Bottom)",type:"circle",params:{cx:1e4,cy:1e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"second-penalty-mark-top",name:"Second Penalty Mark (Top)",type:"circle",params:{cx:1e4,cy:3e4,radius:100},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-bl",name:"Corner Arc (Bottom Left)",type:"arc",params:{cx:0,cy:0,radius:250,startAngle:0,endAngle:90},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-br",name:"Corner Arc (Bottom Right)",type:"arc",params:{cx:2e4,cy:0,radius:250,startAngle:90,endAngle:180},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-tl",name:"Corner Arc (Top Left)",type:"arc",params:{cx:0,cy:4e4,radius:250,startAngle:270,endAngle:360},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"},{id:"corner-arc-tr",name:"Corner Arc (Top Right)",type:"arc",params:{cx:2e4,cy:4e4,radius:250,startAngle:180,endAngle:270},defaultColor:"RH31",lineWidth_mm:80,required:!0,category:"court-marking"}],zones:[{id:"half-bottom",name:"Half (Bottom)",type:"rectangle",params:{x:0,y:0,width:2e4,height:2e4},defaultColor:"RH50",paintable:!0,area_m2:400},{id:"half-top",name:"Half (Top)",type:"rectangle",params:{x:0,y:2e4,width:2e4,height:2e4},defaultColor:"RH50",paintable:!0,area_m2:400},{id:"penalty-area-bottom",name:"Penalty Area (Bottom)",type:"path",params:{d:"M 4000,0 A 6000,6000 0 0,0 16000,0 Z"},defaultColor:"RH50",paintable:!0,area_m2:56.55},{id:"penalty-area-top",name:"Penalty Area (Top)",type:"path",params:{d:"M 4000,40000 A 6000,6000 0 0,1 16000,40000 Z"},defaultColor:"RH50",paintable:!0,area_m2:56.55},{id:"center-circle",name:"Center Circle",type:"circle",params:{cx:1e4,cy:2e4,radius:3e3},defaultColor:"RH50",paintable:!0,area_m2:28.27}]},"volleyball-indoor":{id:"volleyball-indoor",name:"Volleyball (Indoor)",sport:"volleyball",standard:"FIVB",category:"court",description:"Official FIVB standard indoor volleyball court with attack lines",dimensions:{length_mm:18e3,width_mm:9e3,min_surround_mm:3e3},defaultSurfaceColor:"RH40",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:9e3,height:18e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:9e3,x2:9e3,y2:9e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"attack-line-bottom",name:"Attack Line (Bottom)",type:"line",params:{x1:0,y1:6e3,x2:9e3,y2:6e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"attack-line-top",name:"Attack Line (Top)",type:"line",params:{x1:0,y1:12e3,x2:9e3,y2:12e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"back-court-bottom",name:"Back Court (Bottom)",type:"rectangle",params:{x:0,y:0,width:9e3,height:6e3},defaultColor:"RH40",paintable:!0,area_m2:54},{id:"attack-zone-bottom",name:"Attack Zone (Bottom)",type:"rectangle",params:{x:0,y:6e3,width:9e3,height:3e3},defaultColor:"RH40",paintable:!0,area_m2:27},{id:"attack-zone-top",name:"Attack Zone (Top)",type:"rectangle",params:{x:0,y:9e3,width:9e3,height:3e3},defaultColor:"RH40",paintable:!0,area_m2:27},{id:"back-court-top",name:"Back Court (Top)",type:"rectangle",params:{x:0,y:12e3,width:9e3,height:6e3},defaultColor:"RH40",paintable:!0,area_m2:54}]},"badminton-full":{id:"badminton-full",name:"Badminton (Full Court)",sport:"badminton",standard:"BWF",category:"court",description:"Official BWF standard full badminton court with singles and doubles lines",dimensions:{length_mm:13400,width_mm:6100,min_surround_mm:1e3},defaultSurfaceColor:"RH26",defaultLineColor:"RH12",defaultLineWidth_mm:40,markings:[{id:"boundary",name:"Boundary Lines (Doubles)",type:"rectangle",params:{x:0,y:0,width:6100,height:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"boundary"},{id:"singles-sideline-left",name:"Singles Sideline (Left)",type:"line",params:{x1:460,y1:0,x2:460,y2:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"singles-sideline-right",name:"Singles Sideline (Right)",type:"line",params:{x1:5640,y1:0,x2:5640,y2:13400},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"short-service-line-bottom",name:"Short Service Line (Bottom)",type:"line",params:{x1:0,y1:1980,x2:6100,y2:1980},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"short-service-line-top",name:"Short Service Line (Top)",type:"line",params:{x1:0,y1:11420,x2:6100,y2:11420},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"doubles-long-service-line-bottom",name:"Doubles Long Service Line (Bottom)",type:"line",params:{x1:0,y1:760,x2:6100,y2:760},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"doubles-long-service-line-top",name:"Doubles Long Service Line (Top)",type:"line",params:{x1:0,y1:12640,x2:6100,y2:12640},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:3050,y1:1980,x2:3050,y2:11420},defaultColor:"RH31",lineWidth_mm:40,required:!0,category:"court-marking"}],zones:[{id:"singles-alley-left",name:"Singles Alley (Left)",type:"rectangle",params:{x:0,y:0,width:460,height:13400},defaultColor:"RH26",paintable:!0,area_m2:6.16},{id:"singles-alley-right",name:"Singles Alley (Right)",type:"rectangle",params:{x:5640,y:0,width:460,height:13400},defaultColor:"RH26",paintable:!0,area_m2:6.16},{id:"back-service-bottom",name:"Back Service (Bottom)",type:"rectangle",params:{x:0,y:0,width:6100,height:760},defaultColor:"RH26",paintable:!0,area_m2:4.64},{id:"back-service-top",name:"Back Service (Top)",type:"rectangle",params:{x:0,y:12640,width:6100,height:760},defaultColor:"RH26",paintable:!0,area_m2:4.64},{id:"service-box-bottom-left",name:"Service Box (Bottom Left)",type:"rectangle",params:{x:460,y:1980,width:2590,height:4720},defaultColor:"RH26",paintable:!0,area_m2:12.22},{id:"service-box-bottom-right",name:"Service Box (Bottom Right)",type:"rectangle",params:{x:3050,y:1980,width:2590,height:4720},defaultColor:"RH26",paintable:!0,area_m2:12.22},{id:"service-box-top-left",name:"Service Box (Top Left)",type:"rectangle",params:{x:460,y:6700,width:2590,height:4720},defaultColor:"RH26",paintable:!0,area_m2:12.22},{id:"service-box-top-right",name:"Service Box (Top Right)",type:"rectangle",params:{x:3050,y:6700,width:2590,height:4720},defaultColor:"RH26",paintable:!0,area_m2:12.22},{id:"rear-court-bottom",name:"Rear Court (Bottom)",type:"rectangle",params:{x:460,y:760,width:5180,height:1220},defaultColor:"RH26",paintable:!0,area_m2:6.32},{id:"rear-court-top",name:"Rear Court (Top)",type:"rectangle",params:{x:460,y:11420,width:5180,height:1220},defaultColor:"RH26",paintable:!0,area_m2:6.32}]},"pickleball-standard":{id:"pickleball-standard",name:"Pickleball",sport:"pickleball",standard:"USA Pickleball",category:"court",description:"Official USA Pickleball standard court with non-volley zone (kitchen)",dimensions:{length_mm:13410,width_mm:6100,min_surround_mm:1e3},defaultSurfaceColor:"RH11",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:6100,height:13410},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"non-volley-zone-line-bottom",name:"Non-Volley Zone Line (Bottom)",type:"line",params:{x1:0,y1:2130,x2:6100,y2:2130},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"non-volley-zone-line-top",name:"Non-Volley Zone Line (Top)",type:"line",params:{x1:0,y1:11280,x2:6100,y2:11280},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-line",name:"Center Line (Net)",type:"line",params:{x1:0,y1:6705,x2:6100,y2:6705},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:3050,y1:0,x2:3050,y2:13410},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"kitchen-bottom",name:"Kitchen (Bottom)",type:"rectangle",params:{x:0,y:0,width:6100,height:2130},defaultColor:"RH11",paintable:!0,area_m2:12.99},{id:"kitchen-top",name:"Kitchen (Top)",type:"rectangle",params:{x:0,y:11280,width:6100,height:2130},defaultColor:"RH11",paintable:!0,area_m2:12.99},{id:"service-box-bottom-left",name:"Service Box (Bottom Left)",type:"rectangle",params:{x:0,y:2130,width:3050,height:4575},defaultColor:"RH11",paintable:!0,area_m2:13.95},{id:"service-box-bottom-right",name:"Service Box (Bottom Right)",type:"rectangle",params:{x:3050,y:2130,width:3050,height:4575},defaultColor:"RH11",paintable:!0,area_m2:13.95},{id:"service-box-top-left",name:"Service Box (Top Left)",type:"rectangle",params:{x:0,y:6705,width:3050,height:4575},defaultColor:"RH11",paintable:!0,area_m2:13.95},{id:"service-box-top-right",name:"Service Box (Top Right)",type:"rectangle",params:{x:3050,y:6705,width:3050,height:4575},defaultColor:"RH11",paintable:!0,area_m2:13.95}]},"basketball-half":{id:"basketball-half",name:"Basketball (Half Court / 3x3)",sport:"basketball",standard:"FIBA 3x3",category:"court",description:"Half-court basketball for 3x3 games, practice, or space-constrained areas",dimensions:{length_mm:11e3,width_mm:15e3,min_surround_mm:2e3},defaultSurfaceColor:"RH20",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:15e3,height:11e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"three-point-arc",name:"Three-Point Arc",type:"arc",params:{cx:7500,cy:1575,radius:6750,startAngle:12,endAngle:168},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-left",name:"Three-Point Line (Left)",type:"line",params:{x1:900,y1:0,x2:900,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"three-point-line-right",name:"Three-Point Line (Right)",type:"line",params:{x1:14100,y1:0,x2:14100,y2:2990},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line",name:"Free Throw Line",type:"line",params:{x1:5050,y1:5800,x2:9950,y2:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-circle",name:"Free Throw Circle",type:"circle",params:{cx:7500,cy:5800,radius:1800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"key-lane",name:"Key Lane",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"restricted-area",name:"Restricted Area",type:"arc",params:{cx:7500,cy:0,radius:1250,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"three-point-arc-area",name:"3-Point Arc",type:"path",params:{d:"M 900,2990 A 6750,6750 0 0,1 14100,2990 L 14100,0 L 9950,0 L 9950,5800 L 5050,5800 L 5050,0 L 900,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:52.5},{id:"three-point-corner-left",name:"3-Point Corner (Left)",type:"rectangle",params:{x:0,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"three-point-corner-right",name:"3-Point Corner (Right)",type:"rectangle",params:{x:14100,y:0,width:900,height:2990},defaultColor:"RH20",paintable:!0,area_m2:2.69},{id:"key-area",name:"Key Area",type:"rectangle",params:{x:5050,y:0,width:4900,height:5800},defaultColor:"RH20",paintable:!0,area_m2:28.42},{id:"free-throw-semicircle",name:"Free-Throw Semi-Circle",type:"path",params:{d:"M 5700,5800 A 1800,1800 0 0,0 9300,5800 Z"},defaultColor:"RH20",paintable:!0,area_m2:5.09},{id:"restricted-area",name:"Restricted Area",type:"path",params:{d:"M 6250,0 A 1250,1250 0 0,0 8750,0 Z"},defaultColor:"RH20",paintable:!0,area_m2:2.45}]},"tennis-singles":{id:"tennis-singles",name:"Tennis (Singles)",sport:"tennis",standard:"ITF",category:"court",description:"Singles-only tennis court without doubles alleys",dimensions:{length_mm:23770,width_mm:8230,min_surround_mm:3660},defaultSurfaceColor:"RH22",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:8230,height:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:6400,x2:8230,y2:6400},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17370,x2:8230,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:4115,y1:6400,x2:4115,y2:17370},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-bottom",name:"Center Mark (Bottom)",type:"line",params:{x1:4115,y1:0,x2:4115,y2:100},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-mark-top",name:"Center Mark (Top)",type:"line",params:{x1:4115,y1:23670,x2:4115,y2:23770},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"back-court-bottom",name:"Back Court (Bottom)",type:"rectangle",params:{x:0,y:0,width:8230,height:6400},defaultColor:"RH22",paintable:!0,area_m2:52.67},{id:"back-court-top",name:"Back Court (Top)",type:"rectangle",params:{x:0,y:17370,width:8230,height:6400},defaultColor:"RH22",paintable:!0,area_m2:52.67},{id:"service-box-bottom-left",name:"Service Box (Bottom Left)",type:"rectangle",params:{x:0,y:6400,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57},{id:"service-box-bottom-right",name:"Service Box (Bottom Right)",type:"rectangle",params:{x:4115,y:6400,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57},{id:"service-box-top-left",name:"Service Box (Top Left)",type:"rectangle",params:{x:0,y:11885,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57},{id:"service-box-top-right",name:"Service Box (Top Right)",type:"rectangle",params:{x:4115,y:11885,width:4115,height:5485},defaultColor:"RH22",paintable:!0,area_m2:22.57}]},"mini-tennis-red":{id:"mini-tennis-red",name:"Mini Tennis (Red Court)",sport:"tennis",standard:"ITF Play+Stay",category:"court",description:"Beginner/youth court for red stage tennis coaching (36ft)",dimensions:{length_mm:10970,width_mm:5490,min_surround_mm:2e3},defaultSurfaceColor:"RH02",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:5490,height:10970},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"net-line",name:"Net Line",type:"line",params:{x1:0,y1:5485,x2:5490,y2:5485},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:2745,x2:5490,y2:2745},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:8225,x2:5490,y2:8225},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line",name:"Center Service Line",type:"line",params:{x1:2745,y1:2745,x2:2745,y2:8225},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"back-court-bottom",name:"Back Court (Bottom)",type:"rectangle",params:{x:0,y:0,width:5490,height:2745},defaultColor:"RH02",paintable:!0,area_m2:15.07},{id:"back-court-top",name:"Back Court (Top)",type:"rectangle",params:{x:0,y:8225,width:5490,height:2745},defaultColor:"RH02",paintable:!0,area_m2:15.07},{id:"service-box-bottom-left",name:"Service Box (Bottom Left)",type:"rectangle",params:{x:0,y:2745,width:2745,height:2740},defaultColor:"RH02",paintable:!0,area_m2:7.52},{id:"service-box-bottom-right",name:"Service Box (Bottom Right)",type:"rectangle",params:{x:2745,y:2745,width:2745,height:2740},defaultColor:"RH02",paintable:!0,area_m2:7.52},{id:"service-box-top-left",name:"Service Box (Top Left)",type:"rectangle",params:{x:0,y:5485,width:2745,height:2740},defaultColor:"RH02",paintable:!0,area_m2:7.52},{id:"service-box-top-right",name:"Service Box (Top Right)",type:"rectangle",params:{x:2745,y:5485,width:2745,height:2740},defaultColor:"RH02",paintable:!0,area_m2:7.52}]},"padel-standard":{id:"padel-standard",name:"Padel",sport:"padel",standard:"FIP",category:"court",description:"Official FIP padel court with service boxes",dimensions:{length_mm:2e4,width_mm:1e4,min_surround_mm:0},defaultSurfaceColor:"RH60",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:1e4,height:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"net-line",name:"Net Line",type:"line",params:{x1:0,y1:1e4,x2:1e4,y2:1e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-bottom",name:"Service Line (Bottom)",type:"line",params:{x1:0,y1:3e3,x2:1e4,y2:3e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"service-line-top",name:"Service Line (Top)",type:"line",params:{x1:0,y1:17e3,x2:1e4,y2:17e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line-bottom",name:"Center Service Line (Bottom)",type:"line",params:{x1:5e3,y1:0,x2:5e3,y2:3e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-service-line-top",name:"Center Service Line (Top)",type:"line",params:{x1:5e3,y1:17e3,x2:5e3,y2:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-line",name:"Center Line",type:"line",params:{x1:5e3,y1:3e3,x2:5e3,y2:17e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"service-box-bottom-left",name:"Service Box (Bottom Left)",type:"rectangle",params:{x:0,y:0,width:5e3,height:3e3},defaultColor:"RH60",paintable:!0,area_m2:15},{id:"service-box-bottom-right",name:"Service Box (Bottom Right)",type:"rectangle",params:{x:5e3,y:0,width:5e3,height:3e3},defaultColor:"RH60",paintable:!0,area_m2:15},{id:"service-box-top-left",name:"Service Box (Top Left)",type:"rectangle",params:{x:0,y:17e3,width:5e3,height:3e3},defaultColor:"RH60",paintable:!0,area_m2:15},{id:"service-box-top-right",name:"Service Box (Top Right)",type:"rectangle",params:{x:5e3,y:17e3,width:5e3,height:3e3},defaultColor:"RH60",paintable:!0,area_m2:15},{id:"main-court-bottom-left",name:"Main Court (Bottom Left)",type:"rectangle",params:{x:0,y:3e3,width:5e3,height:7e3},defaultColor:"RH60",paintable:!0,area_m2:35},{id:"main-court-bottom-right",name:"Main Court (Bottom Right)",type:"rectangle",params:{x:5e3,y:3e3,width:5e3,height:7e3},defaultColor:"RH60",paintable:!0,area_m2:35},{id:"main-court-top-left",name:"Main Court (Top Left)",type:"rectangle",params:{x:0,y:1e4,width:5e3,height:7e3},defaultColor:"RH60",paintable:!0,area_m2:35},{id:"main-court-top-right",name:"Main Court (Top Right)",type:"rectangle",params:{x:5e3,y:1e4,width:5e3,height:7e3},defaultColor:"RH60",paintable:!0,area_m2:35}]},"handball-standard":{id:"handball-standard",name:"Handball",sport:"handball",standard:"IHF",category:"court",description:"Official IHF handball court with goal areas and penalty lines",dimensions:{length_mm:4e4,width_mm:2e4,min_surround_mm:1e3},defaultSurfaceColor:"RH10",defaultLineColor:"RH31",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:2e4,height:4e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:2e4,x2:2e4,y2:2e4},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-area-bottom",name:"Goal Area (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:6e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-area-top",name:"Goal Area (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:6e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-bottom",name:"Free-Throw Line (Bottom)",type:"arc",params:{cx:1e4,cy:0,radius:9e3,startAngle:0,endAngle:180,dashed:!0,dashPattern:"300 150"},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"free-throw-line-top",name:"Free-Throw Line (Top)",type:"arc",params:{cx:1e4,cy:4e4,radius:9e3,startAngle:180,endAngle:360,dashed:!0,dashPattern:"300 150"},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"7m-line-bottom",name:"7m Penalty Line (Bottom)",type:"line",params:{x1:9e3,y1:7e3,x2:11e3,y2:7e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"7m-line-top",name:"7m Penalty Line (Top)",type:"line",params:{x1:9e3,y1:33e3,x2:11e3,y2:33e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goalkeeper-line-bottom",name:"Goalkeeper Restriction Line (Bottom)",type:"line",params:{x1:9500,y1:4e3,x2:10500,y2:4e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goalkeeper-line-top",name:"Goalkeeper Restriction Line (Top)",type:"line",params:{x1:9500,y1:36e3,x2:10500,y2:36e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"half-bottom",name:"Half (Bottom)",type:"rectangle",params:{x:0,y:0,width:2e4,height:2e4},defaultColor:"RH10",paintable:!0,area_m2:400},{id:"half-top",name:"Half (Top)",type:"rectangle",params:{x:0,y:2e4,width:2e4,height:2e4},defaultColor:"RH10",paintable:!0,area_m2:400},{id:"goal-area-bottom",name:"Goal Area (Bottom)",type:"path",params:{d:"M 4000,0 A 6000,6000 0 0,0 16000,0 Z"},defaultColor:"RH10",paintable:!0,area_m2:56.55},{id:"goal-area-top",name:"Goal Area (Top)",type:"path",params:{d:"M 4000,40000 A 6000,6000 0 0,1 16000,40000 Z"},defaultColor:"RH10",paintable:!0,area_m2:56.55}]},"hockey-d":{id:"hockey-d",name:"Field Hockey D",sport:"hockey",standard:"FIH",category:"overlay",description:"Hockey shooting circle (D) for overlay on sports surfaces",dimensions:{length_mm:14630,width_mm:29260,min_surround_mm:0},defaultSurfaceColor:"RH23",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"shooting-circle",name:"Shooting Circle (D)",type:"arc",params:{cx:14630,cy:0,radius:14630,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"goal-line",name:"Goal Line",type:"line",params:{x1:0,y1:0,x2:29260,y2:0},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"penalty-spot",name:"Penalty Spot",type:"circle",params:{cx:14630,cy:6400,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"shooting-circle",name:"Shooting Circle",type:"path",params:{d:"M 0,0 A 14630,14630 0 0,0 29260,0 Z"},defaultColor:"RH23",paintable:!0,area_m2:336.24}]},"hockey-5s":{id:"hockey-5s",name:"Hockey 5s",sport:"hockey",standard:"England Hockey",category:"court",description:"Scaled-down hockey pitch for 5-a-side games",dimensions:{length_mm:55e3,width_mm:41100,min_surround_mm:2e3},defaultSurfaceColor:"RH23",defaultLineColor:"RH29",defaultLineWidth_mm:50,markings:[{id:"boundary",name:"Boundary Lines",type:"rectangle",params:{x:0,y:0,width:41100,height:55e3},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"boundary"},{id:"center-line",name:"Center Line",type:"line",params:{x1:0,y1:27500,x2:41100,y2:27500},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"center-spot",name:"Center Spot",type:"circle",params:{cx:20550,cy:27500,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"shooting-circle-bottom",name:"Shooting Circle (Bottom)",type:"arc",params:{cx:20550,cy:0,radius:9e3,startAngle:0,endAngle:180},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"shooting-circle-top",name:"Shooting Circle (Top)",type:"arc",params:{cx:20550,cy:55e3,radius:9e3,startAngle:180,endAngle:360},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"penalty-spot-bottom",name:"Penalty Spot (Bottom)",type:"circle",params:{cx:20550,cy:6400,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"},{id:"penalty-spot-top",name:"Penalty Spot (Top)",type:"circle",params:{cx:20550,cy:48600,radius:150},defaultColor:"RH31",lineWidth_mm:50,required:!0,category:"court-marking"}],zones:[{id:"half-bottom",name:"Half (Bottom)",type:"rectangle",params:{x:0,y:0,width:41100,height:27500},defaultColor:"RH23",paintable:!0,area_m2:1130.25},{id:"half-top",name:"Half (Top)",type:"rectangle",params:{x:0,y:27500,width:41100,height:27500},defaultColor:"RH23",paintable:!0,area_m2:1130.25},{id:"shooting-circle-bottom",name:"Shooting Circle (Bottom)",type:"path",params:{d:"M 11550,0 A 9000,9000 0 0,0 29550,0 Z"},defaultColor:"RH23",paintable:!0,area_m2:127.23},{id:"shooting-circle-top",name:"Shooting Circle (Top)",type:"path",params:{d:"M 11550,55000 A 9000,9000 0 0,1 29550,55000 Z"},defaultColor:"RH23",paintable:!0,area_m2:127.23}]}},fi=[{code:"RH01",name:"Standard Red",hex:"#A5362F",R:165,G:54,B:47,L:39.4,a:58.5,b:29},{code:"RH02",name:"Bright Red",hex:"#E21F2F",R:226,G:31,B:47,L:47.4,a:70.1,b:44},{code:"RH10",name:"Standard Green",hex:"#609B63",R:96,G:155,B:99,L:40.5,a:-42.2,b:17.9},{code:"RH11",name:"Bright Green",hex:"#3BB44A",R:59,G:180,B:74,L:62.1,a:-47.7,b:47.2},{code:"RH12",name:"Dark Green",hex:"#006C55",R:0,G:108,B:85,L:39.6,a:-38.3,b:13.1},{code:"RH20",name:"Standard Blue",hex:"#0075BC",R:0,G:117,B:188,L:36.4,a:14.2,b:-46.7},{code:"RH21",name:"Purple",hex:"#493D8C",R:73,G:61,B:140,L:31.5,a:41.9,b:-40.9},{code:"RH22",name:"Light Blue",hex:"#47AFE3",R:71,G:175,B:227,L:55.3,a:-19.1,b:-37.3},{code:"RH23",name:"Azure",hex:"#039DC4",R:3,G:157,B:196,L:47.7,a:-4.8,b:-34.8},{code:"RH26",name:"Turquoise",hex:"#00A6A3",R:0,G:166,B:163,L:58.8,a:-38.4,b:-3},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA",R:228,G:196,B:170,L:75.2,a:3.8,b:24.8},{code:"RH31",name:"Cream",hex:"#E8E3D8",R:232,G:227,B:216,L:91.8,a:-.5,b:12.5},{code:"RH32",name:"Brown",hex:"#8B5F3C",R:139,G:95,B:60,L:40,a:15.9,b:27.1},{code:"RH90",name:"Funky Pink",hex:"#E8457E",R:232,G:69,B:126,L:55,a:66.1,b:4.9},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144",R:229,G:161,B:68,L:66,a:8.4,b:56.3},{code:"RH41",name:"Bright Yellow",hex:"#FFD833",R:255,G:216,B:51,L:86.9,a:-1,b:90.6},{code:"RH50",name:"Orange",hex:"#F15B32",R:241,G:91,B:50,L:63.2,a:49.8,b:60.2},{code:"RH60",name:"Dark Grey",hex:"#59595B",R:89,G:89,B:91,L:34.1,a:-.4,b:-2.4},{code:"RH61",name:"Light Grey",hex:"#939598",R:147,G:149,B:152,L:69,a:-.5,b:-1},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6",R:217,G:217,B:214,L:87.6,a:-.2,b:-.7},{code:"RH70",name:"Black",hex:"#231F20",R:35,G:31,B:32,L:9.1,a:-.3,b:-6.3}];function hF(){return Object.values(QP)}function fF(e){return QP[e]||null}function pF(e,t,n){const{type:r,params:i}=e;switch(r){case"line":return gF(i,t,n);case"rectangle":return yF(i,t,n);case"circle":return bF(i,t,n);case"arc":return vF(i,t,n);case"polyline":return xF(i,t,n);default:return console.warn(`Unknown marking type: ${r}`),null}}function mF(e,t){const{type:n,params:r}=e;switch(n){case"rectangle":return{type:"rect",x:r.x,y:r.y,width:r.width,height:r.height,fill:t};case"circle":return{type:"circle",cx:r.cx,cy:r.cy,r:r.radius,fill:t};case"polygon":return{type:"polygon",points:r.points,fill:t};case"path":return{type:"path",d:r.d,fill:t};default:return console.warn(`Unknown zone type: ${n}`),null}}function gF(e,t,n){const r={type:"line",x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:t,strokeWidth:n};return e.dashed&&(r.strokeDasharray=e.dashPattern||"200 100"),r}function yF(e,t,n){return{type:"rect",x:e.x,y:e.y,width:e.width,height:e.height,stroke:t,strokeWidth:n,fill:"none"}}function bF(e,t,n){return{type:"circle",cx:e.cx,cy:e.cy,r:e.radius,stroke:t,strokeWidth:n,fill:"none"}}function vF(e,t,n){const{cx:r,cy:i,radius:s,startAngle:a,endAngle:o}=e,u=a*Math.PI/180,d=o*Math.PI/180,h=r+s*Math.cos(u),p=i+s*Math.sin(u),m=r+s*Math.cos(d),g=i+s*Math.sin(d),v=o-a>180?1:0,S={type:"path",d:`M ${h} ${p} A ${s} ${s} 0 ${v} 1 ${m} ${g}`,stroke:t,strokeWidth:n,fill:"none"};return e.dashed&&(S.strokeDasharray=e.dashPattern||"200 100"),S}function xF(e,t,n){return{type:"polyline",points:e.points.map(i=>`${i[0]},${i[1]}`).join(" "),stroke:t,strokeWidth:n,fill:"none"}}function tS(e){if(e&&e.startsWith("#"))return e;const t=fi.find(n=>n.code===e);return t?t.hex:"#000000"}function wF(e){var a;const{template:t,lineColorOverrides:n,zoneColorOverrides:r}=e;if(!t)return console.error("No template provided for court"),{markings:[],zones:[]};const i=t.markings.map(o=>{var p;const u=((p=n[o.id])==null?void 0:p.hex)||t.defaultLineColor,d=tS(u),h=o.lineWidth_mm||t.defaultLineWidth_mm;return{id:o.id,name:o.name,...pF(o,d,h)}}).filter(Boolean),s=((a=t.zones)==null?void 0:a.map(o=>{var h;const u=((h=r[o.id])==null?void 0:h.hex)||o.defaultColor,d=tS(u);return{id:o.id,name:o.name,...mF(o,d)}}).filter(Boolean))||[];return{markings:i,zones:s}}function nS(e,t){return Math.round(e/t)*t}function _F(e,t){return{x:nS(e.x,t),y:nS(e.y,t)}}function JP(e){let t=e%360;return t<0&&(t+=360),t}function wp(e,t,n){const{width_mm:r,length_mm:i}=t,{width_mm:s,length_mm:a}=n,o=500,u=-(r-o),d=s-o,h=-(i-o),p=a-o;return{x:Math.max(u,Math.min(e.x,d)),y:Math.max(h,Math.min(e.y,p))}}function kF(e){const{position:t,rotation:n,scale:r,template:i}=e,s=i.dimensions.width_mm/2,a=i.dimensions.length_mm/2;return`translate(${t.x}, ${t.y}) scale(${r}) rotate(${n}, ${s}, ${a})`}function SF({court:e,svgRef:t}){const{updateCourtRotation:n,updateCourtScale:r,updateCourtPosition:i,addToHistory:s}=tn(),[a,o]=fe.useState(!1),[u,d]=fe.useState(!1),[h,p]=fe.useState(null),[m,g]=fe.useState(null),{template:v,position:w,rotation:S,scale:x}=e,k=v.dimensions.width_mm*x,j=v.dimensions.length_mm*x,O=w.x+v.dimensions.width_mm*x/2,I=w.y+v.dimensions.length_mm*x/2,E=v.dimensions.width_mm/2,U=-1e3,D=(H,ge)=>{if(!t.current)return{x:0,y:0};const Ee=t.current.createSVGPoint();Ee.x=H,Ee.y=ge;const ke=Ee.matrixTransform(t.current.getScreenCTM().inverse());return{x:ke.x,y:ke.y}},R=H=>{H.stopPropagation(),o(!0),g({x:H.clientX,y:H.clientY})},W=(H,ge)=>{H.stopPropagation(),d(!0),p(ge),g({x:H.clientX,y:H.clientY,initialScale:x,initialWidth:k,initialHeight:j,initialPosition:{...w}})};fe.useEffect(()=>{if(!a&&!u)return;const H=Ee=>{if(a){const ke=D(Ee.clientX,Ee.clientY),ze=ke.x-O,xe=ke.y-I;let Re=Math.atan2(xe,ze)*(180/Math.PI)+90;Re=JP(Re),Ee.shiftKey&&(Re=Math.round(Re/15)*15),n(e.id,Re)}else if(u&&m){const ke=D(Ee.clientX,Ee.clientY),ze=D(m.x,m.y),xe=ke.x-ze.x,Re=ke.y-ze.y;let _e=m.initialScale,Pe={...w};switch(h){case"se":_e=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm);break;case"nw":_e=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Pe.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*_e),Pe.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*_e);break;case"ne":_e=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm),Pe.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*_e);break;case"sw":_e=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Pe.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*_e);break;case"e":_e=Math.max(.3,m.initialScale+xe/v.dimensions.width_mm);break;case"w":_e=Math.max(.3,m.initialScale-xe/v.dimensions.width_mm),Pe.x=m.initialPosition.x+(m.initialWidth-v.dimensions.width_mm*_e);break;case"n":_e=Math.max(.3,m.initialScale-Re/v.dimensions.length_mm),Pe.y=m.initialPosition.y+(m.initialHeight-v.dimensions.length_mm*_e);break;case"s":_e=Math.max(.3,m.initialScale+Re/v.dimensions.length_mm);break}_e=Math.min(3,Math.max(.3,_e)),r(e.id,_e),(Pe.x!==w.x||Pe.y!==w.y)&&i(e.id,Pe)}},ge=()=>{(a||u)&&s(),o(!1),d(!1),p(null),g(null)};return window.addEventListener("mousemove",H),window.addEventListener("mouseup",ge),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",ge)}},[a,u,m,O,I,e.id,w,x,h]);const ce=[{type:"nw",x:0,y:0,cursor:"nwse-resize"},{type:"n",x:v.dimensions.width_mm/2,y:0,cursor:"ns-resize"},{type:"ne",x:v.dimensions.width_mm,y:0,cursor:"nesw-resize"},{type:"e",x:v.dimensions.width_mm,y:v.dimensions.length_mm/2,cursor:"ew-resize"},{type:"se",x:v.dimensions.width_mm,y:v.dimensions.length_mm,cursor:"nwse-resize"},{type:"s",x:v.dimensions.width_mm/2,y:v.dimensions.length_mm,cursor:"ns-resize"},{type:"sw",x:0,y:v.dimensions.length_mm,cursor:"nesw-resize"},{type:"w",x:0,y:v.dimensions.length_mm/2,cursor:"ew-resize"}],te=300,me=250;return l.jsxs("g",{className:"transform-handles",children:[l.jsxs("g",{className:"rotation-handle",onMouseDown:R,style:{cursor:a?"grabbing":"grab"},children:[l.jsx("line",{x1:E,y1:0,x2:E,y2:U+me,stroke:"#007bff",strokeWidth:30,strokeDasharray:"100 50"}),l.jsx("circle",{cx:E,cy:U,r:me,fill:"white",stroke:"#007bff",strokeWidth:40}),l.jsx("path",{d:`M ${E-me*.4} ${U}
              A ${me*.5} ${me*.5} 0 1 1 ${E+me*.4} ${U}`,fill:"none",stroke:"#007bff",strokeWidth:30,strokeLinecap:"round"}),l.jsx("path",{d:`M ${E+me*.4} ${U}
              L ${E+me*.6} ${U-me*.2}
              M ${E+me*.4} ${U}
              L ${E+me*.6} ${U+me*.2}`,fill:"none",stroke:"#007bff",strokeWidth:30,strokeLinecap:"round"})]}),ce.map(H=>l.jsx("rect",{className:`scale-handle scale-handle--${H.type}`,x:H.x-te/2,y:H.y-te/2,width:te,height:te,fill:"white",stroke:"#007bff",strokeWidth:40,rx:30,ry:30,style:{cursor:u&&h===H.type?"grabbing":H.cursor,pointerEvents:"all"},onMouseDown:ge=>W(ge,H.type)},H.type)),a&&l.jsxs("text",{x:v.dimensions.width_mm/2,y:-1e3-me-200,textAnchor:"middle",fontSize:400,fill:"#007bff",fontWeight:"bold",style:{pointerEvents:"none"},children:[Math.round(S),""]}),u&&l.jsxs("text",{x:v.dimensions.width_mm/2,y:v.dimensions.length_mm+600,textAnchor:"middle",fontSize:400,fill:"#007bff",fontWeight:"bold",style:{pointerEvents:"none"},children:[(x*100).toFixed(0),"%"]})]})}function eN(e){const{width_mm:t,height_mm:n,numLanes:r,laneWidth_mm:i,cornerRadius:s={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},lineWidth_mm:a=50}=e,o=[];if(s.topLeft===0&&s.topRight===0&&s.bottomLeft===0&&s.bottomRight===0){const d=r*i;for(let h=0;h<r;h++){const p=h*i;o.push({laneNumber:h+1,innerPath:null,outerPath:CF(i,n,h),perimeter:2*(i+n)/1e3,isParallel:!0,laneX:p,laneWidth:i})}return{lanes:o,totalWidth:d,totalLength:n,usableWidth:d,usableHeight:n,isStraightTrack:!0}}else for(let d=0;d<r;d++){const h=d*i,p=(d+1)*i,m=Math.max(0,t-p*2),g=Math.max(0,n-p*2),v=Math.max(0,t-h*2),w=Math.max(0,n-h*2),S={topLeft:Math.max(0,s.topLeft-p),topRight:Math.max(0,s.topRight-p),bottomLeft:Math.max(0,s.bottomLeft-p),bottomRight:Math.max(0,s.bottomRight-p)},x={topLeft:Math.max(0,s.topLeft-h),topRight:Math.max(0,s.topRight-h),bottomLeft:Math.max(0,s.bottomLeft-h),bottomRight:Math.max(0,s.bottomRight-h)};o.push({laneNumber:d+1,innerPath:rS(m,g,S,p),outerPath:rS(v,w,x,h),perimeter:EF(v,w,x),isParallel:!1})}return{lanes:o,totalWidth:t,totalLength:n,usableWidth:t-r*i*2,usableHeight:n-r*i*2}}function rS(e,t,n,r=0){if(e<=0||t<=0)return`M ${r} ${r} L ${r} ${r}`;const i=Math.min(e/2,t/2),s=Math.min(n.topLeft,i),a=Math.min(n.topRight,i),o=Math.min(n.bottomRight,i),u=Math.min(n.bottomLeft,i),d=r,h=r+e,p=r,m=r+t;return`
    M ${d+s} ${p}
    L ${h-a} ${p}
    ${a>0?`A ${a} ${a} 0 0 1 ${h} ${p+a}`:""}
    L ${h} ${m-o}
    ${o>0?`A ${o} ${o} 0 0 1 ${h-o} ${m}`:""}
    L ${d+u} ${m}
    ${u>0?`A ${u} ${u} 0 0 1 ${d} ${m-u}`:""}
    L ${d} ${p+s}
    ${s>0?`A ${s} ${s} 0 0 1 ${d+s} ${p}`:""}
    Z
  `.trim().replace(/\s+/g," ")}function CF(e,t,n){const r=n*e;return`M ${r} 0 L ${r+e} 0 L ${r+e} ${t} L ${r} ${t} Z`}function EF(e,t,n){if(e<=0||t<=0)return 0;const r=Math.min(e/2,t/2),i=Math.min(n.topLeft,r),s=Math.min(n.topRight,r),a=Math.min(n.bottomRight,r),o=Math.min(n.bottomLeft,r),u=e-i-s,d=t-s-a,h=e-a-o,p=t-o-i,m=Math.PI*i/2,g=Math.PI*s/2,v=Math.PI*a/2,w=Math.PI*o/2;return(u+d+h+p+m+g+v+w)/1e3}function tN(e){if(!e||!e.lanes||e.lanes.length===0)return[];const t=e.lanes.length-1,n=e.lanes[t].perimeter;return e.lanes.map((r,i)=>r.perimeter-n)}function iS(e,t,n){const{width_mm:r,height_mm:i,laneWidth_mm:s,cornerRadius:a={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3}}=n,o=e*s,u=Math.max(0,r-o*2),d=Math.max(0,i-o*2),h=Math.min(u/2,d/2),p=Math.min(Math.max(0,a.topLeft-o),h),m=Math.min(Math.max(0,a.topRight-o),h),g=Math.min(Math.max(0,a.bottomRight-o),h),v=Math.min(Math.max(0,a.bottomLeft-o),h),w=o,S=o+u,x=o,k=o+d,j=[{type:"arc",length:Math.PI*v/2,radius:v,corner:"bottomLeft"},{type:"straight",length:d-v-p,dir:"up"},{type:"arc",length:Math.PI*p/2,radius:p,corner:"topLeft"},{type:"straight",length:u-p-m,dir:"right"},{type:"arc",length:Math.PI*m/2,radius:m,corner:"topRight"},{type:"straight",length:d-m-g,dir:"down"},{type:"arc",length:Math.PI*g/2,radius:g,corner:"bottomRight"},{type:"straight",length:u-g-v,dir:"left"}];let O=t;const I=j.reduce((U,D)=>U+D.length,0);for(;O<0;)O+=I;for(;O>=I;)O-=I;let E=0;for(const U of j){if(O<=E+U.length){const D=O-E,R=U.length>0?D/U.length:0;return U.type==="arc"?TF(U,R,{left:w,right:S,top:x,bottom:k,tl:p,tr:m,br:g,bl:v}):jF(U,R,{left:w,right:S,top:x,bottom:k,tl:p,tr:m,br:g,bl:v})}E+=U.length}return{x:w,y:k-v,angle:-Math.PI/2}}function TF(e,t,n){const{left:r,right:i,top:s,bottom:a,tl:o,tr:u,br:d,bl:h}=n,p=t*(Math.PI/2);switch(e.corner){case"bottomLeft":{const m=r+h,g=a-h,w=Math.PI/2+p;return{x:m+h*Math.cos(w),y:g+h*Math.sin(w),angle:w+Math.PI/2}}case"topLeft":{const m=r+o,g=s+o,w=Math.PI+p;return{x:m+o*Math.cos(w),y:g+o*Math.sin(w),angle:w+Math.PI/2}}case"topRight":{const m=i-u,g=s+u,w=-Math.PI/2+p;return{x:m+u*Math.cos(w),y:g+u*Math.sin(w),angle:w+Math.PI/2}}case"bottomRight":{const m=i-d,g=a-d,w=0+p;return{x:m+d*Math.cos(w),y:g+d*Math.sin(w),angle:w+Math.PI/2}}default:return{x:r,y:s,angle:0}}}function jF(e,t,n){const{left:r,right:i,top:s,bottom:a,tl:o,tr:u,br:d,bl:h}=n;switch(e.dir){case"up":{const p=a-h,m=s+o;return{x:r,y:p+t*(m-p),angle:-Math.PI/2}}case"right":{const p=r+o,m=i-u;return{x:p+t*(m-p),y:s,angle:0}}case"down":{const p=s+u,m=a-d;return{x:i,y:p+t*(m-p),angle:Math.PI/2}}case"left":{const p=i-d,m=r+h;return{x:p+t*(m-p),y:a,angle:Math.PI}}default:return{x:r,y:s,angle:0}}}function sS(e,t,n){const r=iS(e,t,n),i=iS(e+1,t,n);return{x:(r.x+i.x)/2,y:(r.y+i.y)/2,angle:r.angle,innerX:i.x,innerY:i.y,outerX:r.x,outerY:r.y}}function aS(e,t,n){const{width_mm:r,height_mm:i,laneWidth_mm:s,cornerRadius:a={topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3}}=n,o=e*s,u=Math.max(0,r-o*2),d=Math.max(0,i-o*2),h=Math.min(u/2,d/2),p=Math.min(Math.max(0,a.topLeft-o),h),m=Math.min(Math.max(0,a.topRight-o),h),g=Math.min(Math.max(0,a.bottomRight-o),h),v=Math.min(Math.max(0,a.bottomLeft-o),h),w=[{type:"arc",length:Math.PI*v/2,corner:"bottomLeft"},{type:"straight",length:d-v-p,dir:"up"},{type:"arc",length:Math.PI*p/2,corner:"topLeft"},{type:"straight",length:u-p-m,dir:"right"},{type:"arc",length:Math.PI*m/2,corner:"topRight"},{type:"straight",length:d-m-g,dir:"down"},{type:"arc",length:Math.PI*g/2,corner:"bottomRight"},{type:"straight",length:u-g-v,dir:"left"}],S=w.reduce((j,O)=>j+O.length,0);let x=t;for(;x<0;)x+=S;for(;x>=S;)x-=S;let k=0;for(let j=0;j<w.length;j++){if(x<=k+w[j].length){const O=x-k,I=w[j].length>0?O/w[j].length:0;return{segmentIndex:j,t:I,segments:w,totalPerimeter:S}}k+=w[j].length}return{segmentIndex:0,t:0,segments:w,totalPerimeter:S}}function oS(e,t,n,r){const i=aS(n,t,r),s=aS(e,0,r);let a=0;for(let d=0;d<i.segmentIndex;d++)a+=s.segments[d].length;const o=s.segments[i.segmentIndex].length;return a+i.t*o}function AF({track:e,svgRef:t}){var H;const{updateTrackParameters:n,updateTrackPosition:r,updateTrackRotation:i,addToHistory:s}=tn(),[a,o]=fe.useState(!1),[u,d]=fe.useState(!1),[h,p]=fe.useState(null),[m,g]=fe.useState(null),{parameters:v,position:w,rotation:S}=e,x=v.width_mm,k=v.height_mm,j=w.x+x/2,O=w.y+k/2,I=x/2,E=-1e3,U=(ge,Ee)=>{if(!t.current)return{x:0,y:0};const ke=t.current.createSVGPoint();ke.x=ge,ke.y=Ee;const ze=ke.matrixTransform(t.current.getScreenCTM().inverse());return{x:ze.x,y:ze.y}},D=ge=>{ge.stopPropagation();const Ee=ge.touches?ge.touches[0].clientX:ge.clientX,ke=ge.touches?ge.touches[0].clientY:ge.clientY;d(!0),g({x:Ee,y:ke})},R=(ge,Ee)=>{var Pe;ge.stopPropagation(),o(!0),p(Ee);const ke=ge.touches?ge.touches[0].clientX:ge.clientX,ze=ge.touches?ge.touches[0].clientY:ge.clientY,xe=U(ke,ze),Re=((Pe=e.template)==null?void 0:Pe.trackType)==="straight";let _e={};if(Re){const it=S*Math.PI/180,tt=Math.sin(it),Ue=Math.cos(it),ut=w.x+x/2,de=w.y+k/2,oe=Ee==="n"||Ee==="nw"||Ee==="ne";_e={fixedEdgeCenter:oe?{x:ut-k/2*tt,y:de+k/2*Ue}:{x:ut+k/2*tt,y:de-k/2*Ue},fixedEdgeIsSouth:oe,sinR:tt,cosR:Ue}}g({screenX:ke,screenY:ze,svgX:xe.x,svgY:xe.y,initialWidth:x,initialHeight:k,initialPosition:{...w},initialCornerRadius:{...v.cornerRadius},..._e})};fe.useEffect(()=>{if(!a&&!u)return;const ge=ke=>{var Ne;const ze=ke.touches?ke.touches[0].clientX:ke.clientX,xe=ke.touches?ke.touches[0].clientY:ke.clientY;if(u){const ft=U(ze,xe),Pt=ft.x-j,Ct=ft.y-O;let q=Math.atan2(Ct,Pt)*(180/Math.PI)+90;q=JP(q),ke.shiftKey&&(q=Math.round(q/15)*15),i(e.id,q);return}if(!m)return;const Re=U(ze,xe),_e=Re.x-m.svgX,Pe=Re.y-m.svgY;let it=m.initialWidth,tt=m.initialHeight,Ue={...w},ut={...m.initialCornerRadius};const de=3e3,oe=((Ne=e.template)==null?void 0:Ne.trackType)==="straight";if(oe&&(h==="e"||h==="w"))return;if(oe&&m.fixedEdgeCenter){const{fixedEdgeCenter:ft,fixedEdgeIsSouth:Pt,sinR:Ct,cosR:q}=m,qe=Re.x-ft.x,ae=Re.y-ft.y,M=Pt?Ct:-Ct,L=Pt?-q:q,ee=qe*M+ae*L;tt=Math.max(de,ee);const pe=ft.x+tt/2*M,ve=ft.y+tt/2*L;Ue={x:pe-it/2,y:ve-tt/2}}else switch(h){case"se":it=Math.max(de,m.initialWidth+_e),tt=Math.max(de,m.initialHeight+Pe);const ft=Math.min(it/m.initialWidth,tt/m.initialHeight);ut={topLeft:m.initialCornerRadius.topLeft*ft,topRight:m.initialCornerRadius.topRight*ft,bottomLeft:m.initialCornerRadius.bottomLeft*ft,bottomRight:m.initialCornerRadius.bottomRight*ft};break;case"nw":it=Math.max(de,m.initialWidth-_e),tt=Math.max(de,m.initialHeight-Pe),Ue.x=m.initialPosition.x+(m.initialWidth-it),Ue.y=m.initialPosition.y+(m.initialHeight-tt);const Pt=Math.min(it/m.initialWidth,tt/m.initialHeight);ut={topLeft:m.initialCornerRadius.topLeft*Pt,topRight:m.initialCornerRadius.topRight*Pt,bottomLeft:m.initialCornerRadius.bottomLeft*Pt,bottomRight:m.initialCornerRadius.bottomRight*Pt};break;case"ne":it=Math.max(de,m.initialWidth+_e),tt=Math.max(de,m.initialHeight-Pe),Ue.y=m.initialPosition.y+(m.initialHeight-tt);const Ct=Math.min(it/m.initialWidth,tt/m.initialHeight);ut={topLeft:m.initialCornerRadius.topLeft*Ct,topRight:m.initialCornerRadius.topRight*Ct,bottomLeft:m.initialCornerRadius.bottomLeft*Ct,bottomRight:m.initialCornerRadius.bottomRight*Ct};break;case"sw":it=Math.max(de,m.initialWidth-_e),tt=Math.max(de,m.initialHeight+Pe),Ue.x=m.initialPosition.x+(m.initialWidth-it);const q=Math.min(it/m.initialWidth,tt/m.initialHeight);ut={topLeft:m.initialCornerRadius.topLeft*q,topRight:m.initialCornerRadius.topRight*q,bottomLeft:m.initialCornerRadius.bottomLeft*q,bottomRight:m.initialCornerRadius.bottomRight*q};break;case"e":it=Math.max(de,m.initialWidth+_e);const qe=it/m.initialWidth;ut={topLeft:m.initialCornerRadius.topLeft*qe,topRight:m.initialCornerRadius.topRight*qe,bottomLeft:m.initialCornerRadius.bottomLeft*qe,bottomRight:m.initialCornerRadius.bottomRight*qe};break;case"w":it=Math.max(de,m.initialWidth-_e),Ue.x=m.initialPosition.x+(m.initialWidth-it);const ae=it/m.initialWidth;ut={topLeft:m.initialCornerRadius.topLeft*ae,topRight:m.initialCornerRadius.topRight*ae,bottomLeft:m.initialCornerRadius.bottomLeft*ae,bottomRight:m.initialCornerRadius.bottomRight*ae};break;case"n":tt=Math.max(de,m.initialHeight-Pe),Ue.y=m.initialPosition.y+(m.initialHeight-tt);const M=tt/m.initialHeight;ut={topLeft:m.initialCornerRadius.topLeft*M,topRight:m.initialCornerRadius.topRight*M,bottomLeft:m.initialCornerRadius.bottomLeft*M,bottomRight:m.initialCornerRadius.bottomRight*M};break;case"s":tt=Math.max(de,m.initialHeight+Pe);const L=tt/m.initialHeight;ut={topLeft:m.initialCornerRadius.topLeft*L,topRight:m.initialCornerRadius.topRight*L,bottomLeft:m.initialCornerRadius.bottomLeft*L,bottomRight:m.initialCornerRadius.bottomRight*L};break}const We=Math.min(it,tt)/2;ut={topLeft:Math.min(ut.topLeft,We),topRight:Math.min(ut.topRight,We),bottomLeft:Math.min(ut.bottomLeft,We),bottomRight:Math.min(ut.bottomRight,We)},n(e.id,{width_mm:it,height_mm:tt,cornerRadius:ut}),(Ue.x!==w.x||Ue.y!==w.y)&&r(e.id,Ue)},Ee=()=>{(a||u)&&s(),o(!1),d(!1),p(null),g(null)};return window.addEventListener("mousemove",ge),window.addEventListener("mouseup",Ee),window.addEventListener("touchmove",ge,{passive:!1}),window.addEventListener("touchend",Ee),window.addEventListener("touchcancel",Ee),()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",Ee),window.removeEventListener("touchmove",ge),window.removeEventListener("touchend",Ee),window.removeEventListener("touchcancel",Ee)}},[a,m,h,e.id,w,v,n,r,s]);const W=((H=e.template)==null?void 0:H.trackType)==="straight",ce=[{type:"nw",x:0,y:0,cursor:"nwse-resize"},{type:"n",x:x/2,y:0,cursor:"ns-resize"},{type:"ne",x,y:0,cursor:"nesw-resize"},{type:"e",x,y:k/2,cursor:"ew-resize"},{type:"se",x,y:k,cursor:"nwse-resize"},{type:"s",x:x/2,y:k,cursor:"ns-resize"},{type:"sw",x:0,y:k,cursor:"nesw-resize"},{type:"w",x:0,y:k/2,cursor:"ew-resize"}],te=W?ce.filter(ge=>ge.type==="n"||ge.type==="s"):ce,me=400;return l.jsxs("g",{className:"track-resize-handles",children:[l.jsxs("g",{className:"rotation-handle-group",children:[l.jsx("line",{x1:I,y1:0,x2:I,y2:E,stroke:"#0066CC",strokeWidth:30,strokeDasharray:"100 100",opacity:.5,style:{pointerEvents:"none"}}),l.jsx("circle",{className:"rotation-handle",cx:I,cy:E,r:me/2,fill:"white",stroke:"#0066CC",strokeWidth:50,style:{cursor:u?"grabbing":"grab",pointerEvents:"all"},onMouseDown:D,onTouchStart:D}),l.jsx("path",{d:`M ${I-100} ${E-50}
              A 100 100 0 1 1 ${I+100} ${E-50}`,fill:"none",stroke:"#0066CC",strokeWidth:40,strokeLinecap:"round",style:{pointerEvents:"none"}}),l.jsx("path",{d:`M ${I+100} ${E-50}
              L ${I+80} ${E-120}
              L ${I+150} ${E-80}
              Z`,fill:"#0066CC",style:{pointerEvents:"none"}})]}),te.map(ge=>l.jsx("rect",{className:`resize-handle resize-handle--${ge.type}`,x:ge.x-me/2,y:ge.y-me/2,width:me,height:me,fill:"white",stroke:"#0066CC",strokeWidth:50,rx:40,ry:40,style:{cursor:a&&h===ge.type?"grabbing":ge.cursor,pointerEvents:"all"},onMouseDown:Ee=>R(Ee,ge.type),onTouchStart:Ee=>R(Ee,ge.type)},ge.type)),a&&l.jsxs("text",{x:x/2,y:k+800,textAnchor:"middle",fontSize:400,fill:"#0066CC",fontWeight:"bold",style:{pointerEvents:"none"},children:[(x/1e3).toFixed(1),"m  ",(k/1e3).toFixed(1),"m"]}),u&&l.jsxs("text",{x:x/2,y:-1500,textAnchor:"middle",fontSize:400,fill:"#0066CC",fontWeight:"bold",style:{pointerEvents:"none"},children:[S.toFixed(0),""]})]})}function PF({geometry:e,parameters:t,boxConfig:n,surfaceColor:r,lineColor:i,isStraightTrack:s}){if(!n||!n.enabled)return null;const{depth_mm:a=800,lineWidth_mm:o=50,perLaneOffsets:u=[],style:d="staggered",direction:h="counterclockwise",startPosition:p=0}=n,m="'Black Ops One', 'Impact', sans-serif",g=r||"#A5362F",v=i||"#E8E3D8",w=d==="staggered"||d==="both",S=d==="straight"||d==="both";return l.jsx("g",{className:"starting-boxes",children:e.lanes.map((x,k)=>{const j=k+1;return s?NF(k,j,t,e,a,o,g,v,m,w,S,u,h):OF(k,j,t,e,a,o,g,v,m,w,S,u,h,p)})})}function NF(e,t,n,r,i,s,a,o,u,d,h,p,m){const g=e*n.laneWidth_mm,v=n.laneWidth_mm,w=m==="clockwise",S=w?r.totalLength-i:0,x=w?0:r.totalLength-i,k=(p[e]||0)*1e3,j=[];if(d&&!h){const O=w?S-k:S+k;j.push(l.jsx(_p,{x:g,y:O,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:!w},`stagger-${t}`))}else if(h&&!d)j.push(l.jsx(_p,{x:g,y:S,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:!w},`straight-${t}`));else if(d&&h){const O=w?S-k:S+k;j.push(l.jsx(_p,{x:g,y:O,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:!w},`stagger-${t}`)),j.push(l.jsx(_p,{x:g,y:x,width:v,height:i,laneNumber:t,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u,flipLine:w},`straight-${t}`))}return l.jsx("g",{children:j},`lane-boxes-${t}`)}function _p({x:e,y:t,width:n,height:r,laneNumber:i,boxFillColor:s,lineColor:a,lineWidth:o,fontFamily:u,flipLine:d}){const h=d?t+r:t;return l.jsxs("g",{children:[l.jsx("line",{x1:e,y1:h,x2:e+n,y2:h,stroke:a,strokeWidth:o,strokeLinecap:"butt",pointerEvents:"none"}),l.jsx("text",{x:e+n/2,y:t+r/2,fontSize:Math.min(r*.6,n*.5),fill:a,textAnchor:"middle",dominantBaseline:"middle",fontFamily:u,fontWeight:"bold",pointerEvents:"none",opacity:"0.9",children:i})]})}function OF(e,t,n,r,i,s,a,o,u,d,h,p,m,g=0){var D,R;const v=m==="clockwise",w=r.lanes.length-1,S=(((D=r.lanes[w])==null?void 0:D.perimeter)||0)*1e3,x=S/2,k=g/100*S,j=oS(e,k,w,n),I=(((R=r.lanes[e])==null?void 0:R.perimeter)||0)*1e3/2,E=(p[e]||0)*1e3,U=[];if(d&&!h){const W=v?j+I+E:j+E;U.push(l.jsx(kp,{index:e,laneNumber:t,distance:W,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`stagger-${t}`))}else if(h&&!d){const W=v?j+I:j;U.push(l.jsx(kp,{index:e,laneNumber:t,distance:W,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`straight-${t}`))}else if(d&&h){const W=v?j+I+E:j+E,ce=v?k:k+x,te=oS(e,ce,w,n),me=te;U.push(l.jsx(kp,{index:e,laneNumber:t,distance:W,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`stagger-${t}`)),U.push(l.jsx(kp,{index:e,laneNumber:t,distance:me,depth_mm:i,parameters:n,boxFillColor:a,lineColor:o,lineWidth:s,fontFamily:u},`straight-${t}`))}return l.jsx("g",{children:U},`lane-boxes-${t}`)}function kp({index:e,laneNumber:t,distance:n,depth_mm:r,parameters:i,boxFillColor:s,lineColor:a,lineWidth:o,fontFamily:u}){const d=sS(e,n,i),h=d.angle+Math.PI/2,p=i.laneWidth_mm/2,m=d.x+Math.cos(h)*p,g=d.y+Math.sin(h)*p,v=d.x-Math.cos(h)*p,w=d.y-Math.sin(h)*p,S=sS(e,n+r/2,i);return l.jsxs("g",{children:[l.jsx("line",{x1:m,y1:g,x2:v,y2:w,stroke:a,strokeWidth:o,strokeLinecap:"butt",pointerEvents:"none"}),l.jsx("text",{x:S.x,y:S.y,fontSize:Math.min(r*.6,i.laneWidth_mm*.5),fill:a,textAnchor:"middle",dominantBaseline:"middle",fontFamily:u,fontWeight:"bold",pointerEvents:"none",opacity:"0.9",transform:`rotate(${S.angle*180/Math.PI+90}, ${S.x}, ${S.y})`,children:t})]})}const RF=()=>{};function lS({track:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,svgRef:s}){var D,R,W;const{parameters:a,position:o,rotation:u,scale:d=1,trackSurfaceColor:h,trackLineColor:p,laneSurfaceColors:m}=e,g=eN(a),v=g.lanes.length>0&&g.lanes[0].isParallel===!0,w=g.totalWidth,S=g.totalLength,x=w/2,k=S/2,j=`translate(${o.x}, ${o.y}) scale(${d}) rotate(${u}, ${x}, ${k})`,O=(h==null?void 0:h.hex)||"#A5362F",I=(p==null?void 0:p.hex)||"#E8E3D8",E=a.lineWidth_mm||50,U=ce=>{const te=m==null?void 0:m[ce-1];return(te==null?void 0:te.hex)||O};return RF("TrackRenderer - geometry.lanes.length:",g.lanes.length),l.jsxs("g",{className:`track-element ${t?"track-element--selected":""}`,transform:j,style:{cursor:"move"},children:[v?l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:"0",y:"0",width:w,height:S,fill:"transparent",pointerEvents:"all",onMouseDown:n,onTouchStart:r,onDoubleClick:i,style:{cursor:"move"}}),g.lanes.map(ce=>l.jsx("path",{d:ce.outerPath,fill:U(ce.laneNumber),stroke:"none",pointerEvents:"none"},`lane-fill-${ce.laneNumber}`))]}):l.jsx(l.Fragment,{children:g.lanes.map((ce,te)=>{const me=g.lanes[te+1],H=me?me.outerPath:ce.innerPath,ge=te===0;return l.jsx("path",{d:`${ce.outerPath} ${H}`,fill:U(ce.laneNumber),fillRule:"evenodd",stroke:"none",pointerEvents:ge?"all":"none",onMouseDown:ge?n:void 0,onTouchStart:ge?r:void 0,onDoubleClick:ge?i:void 0,style:ge?{cursor:"move"}:void 0},`lane-fill-${ce.laneNumber}`)})}),g.lanes.map((ce,te)=>l.jsx(MF,{lane:ce,lineColor:I,lineWidth:E,isLastLane:te===g.lanes.length-1,isStraightTrack:v,geometry:g},`stroke-${ce.laneNumber}`)),((D=a.startingBoxes)==null?void 0:D.enabled)&&l.jsx(PF,{geometry:g,parameters:a,boxConfig:{...a.startingBoxes,perLaneOffsets:((R=e.template)==null?void 0:R.trackType)==="curved"?tN(g):[]},surfaceColor:O,lineColor:I,isStraightTrack:((W=e.template)==null?void 0:W.trackType)==="straight"}),t&&l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:"-10",y:"-10",width:w+20,height:S+20,fill:"none",stroke:"#0066CC",strokeWidth:"80",strokeDasharray:"400 400",opacity:"0.5",pointerEvents:"none"}),l.jsx(AF,{track:e,svgRef:s})]})]})}function MF({lane:e,lineColor:t,lineWidth:n,isLastLane:r,isStraightTrack:i,geometry:s}){const{innerPath:a,outerPath:o}=e,u=50;return i?l.jsxs("g",{className:"track-lane-stroke",children:[e.laneNumber===1&&l.jsx("line",{x1:e.laneX,y1:0,x2:e.laneX,y2:s.totalLength,stroke:t,strokeWidth:u,pointerEvents:"none"}),l.jsx("line",{x1:e.laneX+e.laneWidth,y1:0,x2:e.laneX+e.laneWidth,y2:s.totalLength,stroke:t,strokeWidth:u,pointerEvents:"none"})]}):l.jsxs("g",{className:"track-lane-stroke",children:[l.jsx("path",{d:o,fill:"none",stroke:t,strokeWidth:u,pointerEvents:"none"}),r&&l.jsx("path",{d:a,fill:"none",stroke:t,strokeWidth:u,pointerEvents:"none"})]})}const LF=200,nN=30,IF=120;function dd(e=1,t=1){const n=1/e,r=LF*n,i=nN*n,s=r*.25;return{size:r,strokeWidth:i,cornerRadius:s}}function $F(e=1){const t=1/e,n=IF*t,r=n*.7,i=nN*.5*t;return{pointSize:n,handleSize:r,strokeWidth:i}}function hd(e){return{distance:e*2.5,size:e*.8,stemWidth:e*.15}}function fd(e=1,t=1){const n=1/e;return{strokeWidth:60*n,dashArray:`${300*n} ${300*n}`,padding:40}}function cS({motif:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{svgContent:u,originalWidth_mm:d,originalHeight_mm:h,position:p,rotation:m,scale:g}=e,v=fe.useMemo(()=>{if(!u)return null;const U=u.match(/viewBox=["']([^"']+)["']/i);if(U){const W=U[1].split(/\s+/).map(Number);if(W.length>=4)return{width:W[2],height:W[3]}}const D=u.match(/\bwidth=["']?(\d+(?:\.\d+)?)/i),R=u.match(/\bheight=["']?(\d+(?:\.\d+)?)/i);return D&&R?{width:parseFloat(D[1]),height:parseFloat(R[1])}:null},[u]),w=fe.useMemo(()=>{if(!v)return{width:d,height:h};const U=v.width/v.height,D=d/h,R=U>=1,W=D>=1;if(R!==W){console.warn("[MOTIF] Orientation mismatch detected - using SVG viewBox aspect ratio"),console.log("[MOTIF] SVG viewBox:",v,"AR:",U.toFixed(2)),console.log("[MOTIF] Physical dims:",d,"",h,"AR:",D.toFixed(2));const ce=d*h,te=Math.sqrt(ce*U),me=te/U;return{width:te,height:me}}return{width:d,height:h}},[v,d,h]),S=w.width*(g||1),x=w.height*(g||1),k=S/2,j=x/2,O=`translate(${p.x}, ${p.y}) rotate(${m||0}, ${k}, ${j})`,I=fe.useMemo(()=>{if(!u)return null;try{let U=u;return U=U.replace(/\s+(width|height)=["'][^"']*["']/gi,""),U.includes("viewBox")||(U=U.replace("<svg",`<svg viewBox="0 0 ${w.width} ${w.height}"`)),U}catch(U){return console.error("[MOTIF] Error processing SVG:",U),u}},[u,w]),E=fe.useMemo(()=>{if(!I)return null;try{return`data:image/svg+xml,${encodeURIComponent(I).replace(/'/g,"%27").replace(/"/g,"%22")}`}catch(U){return console.error("[MOTIF] Error creating data URL:",U),null}},[I]);return E?l.jsxs("g",{className:`motif-element ${t?"motif-element--selected":""}`,transform:O,style:{cursor:"move"},children:[l.jsx("image",{href:E,x:"0",y:"0",width:S,height:x,preserveAspectRatio:"xMidYMid meet",pointerEvents:"none"}),l.jsx("rect",{x:"0",y:"0",width:S,height:x,fill:"transparent",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const U=fd(n,g||1);return l.jsx("rect",{x:"-10",y:"-10",width:S+20,height:x+20,fill:"none",stroke:"#3b82f6",strokeWidth:U.strokeWidth,strokeDasharray:U.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&l.jsx(DF,{width:S,height:x,zoom:n,scale:g||1,onScaleStart:a,onRotateStart:o})]}):l.jsxs("g",{transform:O,children:[l.jsx("rect",{x:"0",y:"0",width:S,height:x,fill:"#f0f0f0",stroke:"#ccc",strokeWidth:"50",strokeDasharray:"200 200"}),l.jsx("text",{x:S/2,y:x/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:Math.min(S,x)/10,fill:"#999",children:"Motif Error"})]})}function DF({width:e,height:t,zoom:n,scale:r,onScaleStart:i,onRotateStart:s}){const{size:a,strokeWidth:o,cornerRadius:u}=dd(n,r),d=hd(a),h=[{x:-a/2,y:-a/2,corner:"nw",cursor:"nwse-resize"},{x:e-a/2,y:-a/2,corner:"ne",cursor:"nesw-resize"},{x:-a/2,y:t-a/2,corner:"sw",cursor:"nesw-resize"},{x:e-a/2,y:t-a/2,corner:"se",cursor:"nwse-resize"}];return l.jsxs("g",{className:"motif-handles",children:[h.map(p=>l.jsx("rect",{x:p.x,y:p.y,width:a,height:a,fill:"#3b82f6",stroke:"#fff",strokeWidth:o,rx:u,style:{cursor:p.cursor},pointerEvents:"all",onMouseDown:m=>{m.stopPropagation(),i==null||i(m,p.corner)},onTouchStart:m=>{m.stopPropagation(),i==null||i(m,p.corner)}},p.corner)),l.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-d.distance+d.size/2,stroke:"#3b82f6",strokeWidth:d.stemWidth,pointerEvents:"none"}),l.jsx("circle",{cx:e/2,cy:-d.distance,r:d.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:o,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),s==null||s(p)},onTouchStart:p=>{p.stopPropagation(),s==null||s(p)}}),l.jsx("path",{d:`M ${e/2-d.size*.4} ${-d.distance}
            A ${d.size*.4} ${d.size*.4} 0 1 1
            ${e/2+d.size*.4} ${-d.distance}`,fill:"none",stroke:"#fff",strokeWidth:o*.7,strokeLinecap:"round",pointerEvents:"none"}),l.jsx("polygon",{points:`${e/2+d.size*.4},${-d.distance-d.size*.25}
                 ${e/2+d.size*.4},${-d.distance+d.size*.25}
                 ${e/2+d.size*.65},${-d.distance}`,fill:"#fff",pointerEvents:"none"})]})}function rN(e,t,n,r=0,i=!1,s=.5){if(i&&e>=3)return FF(e,t,n,s,r);if(e>=32)return UF(t,n);const a=zF(e,t,n);return r>0?iN(a,r):`M ${a.map(o=>`${o.x},${o.y}`).join(" L ")} Z`}function zF(e,t,n){if(e===4)return[{x:0,y:0},{x:t,y:0},{x:t,y:n},{x:0,y:n}];const r=[],i=2*Math.PI/e,s=-Math.PI/2;for(let v=0;v<e;v++){const w=s+i*v;r.push({x:Math.cos(w),y:Math.sin(w)})}let a=1/0,o=-1/0,u=1/0,d=-1/0;for(const v of r)a=Math.min(a,v.x),o=Math.max(o,v.x),u=Math.min(u,v.y),d=Math.max(d,v.y);const h=o-a,p=d-u,m=t/h,g=n/p;return r.map(v=>({x:(v.x-a)*m,y:(v.y-u)*g}))}function FF(e,t,n,r=.5,i=0){const s=BF(e,t,n,r);return i>0?iN(s,i):`M ${s.map(a=>`${a.x},${a.y}`).join(" L ")} Z`}function BF(e,t,n,r=.5){const i=[],s=e*2,a=2*Math.PI/s,o=-Math.PI/2,u=Math.max(.1,Math.min(.9,r));for(let x=0;x<s;x++){const k=o+a*x,j=x%2===0?1:u;i.push({x:Math.cos(k)*j,y:Math.sin(k)*j})}let d=1/0,h=-1/0,p=1/0,m=-1/0;for(const x of i)d=Math.min(d,x.x),h=Math.max(h,x.x),p=Math.min(p,x.y),m=Math.max(m,x.y);const g=h-d,v=m-p,w=t/g,S=n/v;return i.map(x=>({x:(x.x-d)*w,y:(x.y-p)*S}))}function UF(e,t){const n=e/2,r=t/2,i=n,s=r;return`M ${i-n},${s} A ${n},${r} 0 1,1 ${i+n},${s} A ${n},${r} 0 1,1 ${i-n},${s} Z`}function iN(e,t,n,r){if(e.length<3)return"";let i=1/0;for(let m=0;m<e.length;m++){const g=e[m],v=e[(m+1)%e.length],w=Math.sqrt(Math.pow(v.x-g.x,2)+Math.pow(v.y-g.y,2));i=Math.min(i,w)}const s=i/2,a=t/100*s;if(a<1)return`M ${e.map(m=>`${m.x},${m.y}`).join(" L ")} Z`;const o=[];for(let m=0;m<e.length;m++){const g=e[(m-1+e.length)%e.length],v=e[m],w=e[(m+1)%e.length],S=Ty({x:g.x-v.x,y:g.y-v.y}),x=Ty({x:w.x-v.x,y:w.y-v.y}),k={x:v.x+S.x*a,y:v.y+S.y*a},j={x:v.x+x.x*a,y:v.y+x.y*a};m===0?o.push(`M ${k.x},${k.y}`):o.push(`L ${k.x},${k.y}`),o.push(`Q ${v.x},${v.y} ${j.x},${j.y}`)}const u=e[e.length-1],d=e[0],h=Ty({x:u.x-d.x,y:u.y-d.y}),p={x:d.x+h.x*a,y:d.y+h.y*a};return o.push(`L ${p.x},${p.y}`),o.push("Z"),o.join(" ")}function Ty(e){const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:{x:e.x/t,y:e.y/t}}function HF(e,t=!1){if(t)return e===5?"Star":`${e}-Point Star`;const n={3:"Triangle",4:"Rectangle",5:"Pentagon",6:"Hexagon",7:"Heptagon",8:"Octagon",9:"Nonagon",10:"Decagon",12:"Dodecagon"};return e>=32?"Circle":n[e]?n[e]:`${e}-gon`}function WF(e,t=!1){return t?"":e>=32?"":e===3?"":e===4?"":e===5?"":e===6?"":`${e}`}function uS({shape:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{sides:u,width_mm:d,height_mm:h,cornerRadius:p,starMode:m,innerRadius:g,position:v,rotation:w,fillColor:S,strokeEnabled:x,strokeColor:k,strokeWidth_mm:j}=e,O=fe.useMemo(()=>rN(u,d,h,p,m,g),[u,d,h,p,m,g]),I=d/2,E=h/2,U=`translate(${v.x}, ${v.y}) rotate(${w||0}, ${I}, ${E})`;return l.jsxs("g",{className:`shape-element ${t?"shape-element--selected":""}`,transform:U,style:{cursor:"move"},children:[l.jsx("path",{d:O,fill:(S==null?void 0:S.hex)||"#609B63",stroke:x&&k?k.hex:"none",strokeWidth:x?j:0,pointerEvents:"none"}),l.jsx("path",{d:O,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(j,100),pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const D=fd(n);return l.jsx("rect",{x:"-10",y:"-10",width:d+20,height:h+20,fill:"none",stroke:"#3b82f6",strokeWidth:D.strokeWidth,strokeDasharray:D.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&l.jsx(VF,{width:d,height:h,zoom:n,onScaleStart:a,onRotateStart:o})]})}function VF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=dd(n),u=hd(s),d=[{x:e/2-s/2,y:-s/2,corner:"n",cursor:"ns-resize"},{x:e/2-s/2,y:t-s/2,corner:"s",cursor:"ns-resize"},{x:e-s/2,y:t/2-s/2,corner:"e",cursor:"ew-resize"},{x:-s/2,y:t/2-s/2,corner:"w",cursor:"ew-resize"}];return l.jsxs("g",{className:"shape-handles",children:[d.map(h=>l.jsx("rect",{x:h.x,y:h.y,width:s,height:s,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:h.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,h.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,h.corner)}},h.corner)),l.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-u.distance+u.size/2,stroke:"#3b82f6",strokeWidth:u.stemWidth,pointerEvents:"none"}),l.jsx("circle",{cx:e/2,cy:-u.distance,r:u.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:h=>{h.stopPropagation(),i==null||i(h)},onTouchStart:h=>{h.stopPropagation(),i==null||i(h)}}),l.jsx("path",{d:`M ${e/2-u.size*.4} ${-u.distance}
            A ${u.size*.4} ${u.size*.4} 0 1 1
            ${e/2+u.size*.4} ${-u.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),l.jsx("polygon",{points:`${e/2+u.size*.4},${-u.distance-u.size*.25}
                 ${e/2+u.size*.4},${-u.distance+u.size*.25}
                 ${e/2+u.size*.65},${-u.distance}`,fill:"#fff",pointerEvents:"none"})]})}function sN({controlPoints:e,width:t,height:n,zoom:r=1,onPointDrag:i,onHandleDrag:s,onDragEnd:a,showHandles:o=!0,selectedPointIndex:u,onPointSelect:d,onPointDelete:h,onAddPoint:p,closed:m=!0}){const[g,v]=fe.useState(null),[w,S]=fe.useState(null),{pointSize:x,handleSize:k,strokeWidth:j}=$F(r),O=fe.useCallback((R,W)=>{R.stopPropagation(),R.preventDefault(),d==null||d(W),v({type:"point",index:W}),S({x:R.clientX,y:R.clientY})},[d]),I=fe.useCallback((R,W)=>{R.preventDefault(),R.stopPropagation(),h==null||h(W)},[h]),E=fe.useCallback((R,W)=>{if(R.preventDefault(),R.stopPropagation(),!p)return;const ce=document.querySelector(".court-canvas__svg");if(!ce)return;const te=R.target.closest("g.path-element");if(!te)return;const me=ce.createSVGPoint();me.x=R.clientX,me.y=R.clientY;const H=te.getScreenCTM();if(!H)return;const ge=me.matrixTransform(H.inverse()),Ee=ge.x,ke=ge.y,ze=e[W],xe=(W+1)%e.length,Re=e[xe],_e=ze.x*t,Pe=ze.y*n,it=Re.x*t,tt=Re.y*n,Ue=it-_e,ut=tt-Pe,de=Ue*Ue+ut*ut;if(de===0){p(W+1,ze.x,ze.y);return}let oe=((Ee-_e)*Ue+(ke-Pe)*ut)/de;oe=Math.max(.1,Math.min(.9,oe));const We=_e+oe*Ue,Ne=Pe+oe*ut,ft=We/t,Pt=Ne/n;p(W+1,ft,Pt)},[e,t,n,p]),U=fe.useCallback((R,W,ce)=>{R.stopPropagation(),R.preventDefault(),v({type:"handle",index:W,handleType:ce}),S({x:R.clientX,y:R.clientY})},[]);if(fe.useEffect(()=>{if(!g)return;const R=ce=>{if(!w)return;const te=document.querySelector(".court-canvas__svg");if(!te)return;const me=te.getBoundingClientRect(),H=te.viewBox.baseVal,ge=H.width/me.width,Ee=H.height/me.height,ke=(ce.clientX-w.x)*ge,ze=(ce.clientY-w.y)*Ee;if(g.type==="point"){const xe=e[g.index],Re=xe.x+ke/t,_e=xe.y+ze/n;i==null||i(g.index,Re,_e)}else if(g.type==="handle"){const Re=e[g.index][g.handleType],_e=Re.x+ke/t,Pe=Re.y+ze/n;s==null||s(g.index,g.handleType,_e,Pe)}S({x:ce.clientX,y:ce.clientY})},W=()=>{v(null),S(null),a==null||a()};return window.addEventListener("mousemove",R),window.addEventListener("mouseup",W),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",W)}},[g,w,e,t,n,i,s,a]),!e||e.length===0)return null;const D=[];if(p&&e.length>=2){const R=m?e.length:e.length-1;for(let W=0;W<R;W++){const ce=e[W],te=e[(W+1)%e.length];D.push({index:W,x1:ce.x*t,y1:ce.y*n,x2:te.x*t,y2:te.y*n})}}return l.jsxs("g",{className:"blob-edit-handles",children:[D.map(R=>l.jsx("line",{x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,stroke:"transparent",strokeWidth:x*2,style:{cursor:"copy"},pointerEvents:"stroke",onDoubleClick:W=>E(W,R.index)},`segment-${R.index}`)),e.map((R,W)=>{const ce=R.x*t,te=R.y*n,me=ce+R.handleIn.x*t,H=te+R.handleIn.y*n,ge=ce+R.handleOut.x*t,Ee=te+R.handleOut.y*n,ke=(g==null?void 0:g.type)==="point"&&(g==null?void 0:g.index)===W,ze=(g==null?void 0:g.type)==="handle"&&(g==null?void 0:g.index)===W&&(g==null?void 0:g.handleType)==="handleIn",xe=(g==null?void 0:g.type)==="handle"&&(g==null?void 0:g.index)===W&&(g==null?void 0:g.handleType)==="handleOut",Re=u===W;return l.jsxs("g",{className:"blob-control-point-group",children:[o&&l.jsxs(l.Fragment,{children:[l.jsx("line",{x1:ce,y1:te,x2:me,y2:H,stroke:"#94a3b8",strokeWidth:j,strokeDasharray:`${j*3} ${j*2}`,pointerEvents:"none",opacity:"0.8"}),l.jsx("line",{x1:ce,y1:te,x2:ge,y2:Ee,stroke:"#94a3b8",strokeWidth:j,strokeDasharray:`${j*3} ${j*2}`,pointerEvents:"none",opacity:"0.8"}),l.jsx("circle",{cx:me,cy:H,r:k,fill:ze?"#f97316":"#ffffff",stroke:"#64748b",strokeWidth:j,style:{cursor:"crosshair"},pointerEvents:"all",onMouseDown:_e=>U(_e,W,"handleIn")}),l.jsx("circle",{cx:ge,cy:Ee,r:k,fill:xe?"#f97316":"#ffffff",stroke:"#64748b",strokeWidth:j,style:{cursor:"crosshair"},pointerEvents:"all",onMouseDown:_e=>U(_e,W,"handleOut")})]}),l.jsx("circle",{cx:ce,cy:te,r:x,fill:Re?"#ef4444":ke?"#f97316":"#3b82f6",stroke:"#ffffff",strokeWidth:j*1.3,style:{cursor:"move"},pointerEvents:"all",onMouseDown:_e=>O(_e,W),onContextMenu:_e=>I(_e,W)}),l.jsx("text",{x:ce,y:te+x*.35,textAnchor:"middle",fontSize:x*.8,fill:"#ffffff",fontWeight:"bold",pointerEvents:"none",children:W+1})]},W)})]})}function dS({shape:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o,onPointDrag:u,onHandleDrag:d,onDragEnd:h,selectedPointIndex:p,onPointSelect:m,onPointDelete:g}){const{controlPoints:v,width_mm:w,height_mm:S,position:x,rotation:k,fillColor:j,strokeEnabled:O,strokeColor:I,strokeWidth_mm:E,editPointsVisible:U}=e,D=fe.useMemo(()=>eF(v,w,S),[v,w,S]),R=w/2,W=S/2,ce=`translate(${x.x}, ${x.y}) rotate(${k||0}, ${R}, ${W})`;return l.jsxs("g",{className:`blob-element ${t?"blob-element--selected":""}`,transform:ce,style:{cursor:"move"},children:[l.jsx("path",{d:D,fill:(j==null?void 0:j.hex)||"#609B63",stroke:O&&I?I.hex:"none",strokeWidth:O?E:0,pointerEvents:"none"}),l.jsx("path",{d:D,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(E||0,100),pointerEvents:"all",onTouchStart:i,onMouseDown:r,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const te=fd(n);return l.jsx("rect",{x:"-10",y:"-10",width:w+20,height:S+20,fill:"none",stroke:"#3b82f6",strokeWidth:te.strokeWidth,strokeDasharray:te.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&l.jsx(GF,{width:w,height:S,zoom:n,onScaleStart:a,onRotateStart:o}),t&&v&&U&&l.jsx(sN,{controlPoints:v,width:w,height:S,zoom:n,onPointDrag:u,onHandleDrag:d,onDragEnd:h,showHandles:!0,selectedPointIndex:p,onPointSelect:m,onPointDelete:g})]})}function GF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=dd(n),u=hd(s),d=[{x:-s/2,y:-s/2,corner:"nw",cursor:"nwse-resize"},{x:e-s/2,y:-s/2,corner:"ne",cursor:"nesw-resize"},{x:-s/2,y:t-s/2,corner:"sw",cursor:"nesw-resize"},{x:e-s/2,y:t-s/2,corner:"se",cursor:"nwse-resize"}];return l.jsxs("g",{className:"blob-resize-handles",children:[d.map(h=>l.jsx("rect",{x:h.x,y:h.y,width:s,height:s,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:h.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,h.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,h.corner)}},h.corner)),l.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-u.distance+u.size/2,stroke:"#3b82f6",strokeWidth:u.stemWidth,pointerEvents:"none"}),l.jsx("circle",{cx:e/2,cy:-u.distance,r:u.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:h=>{h.stopPropagation(),i==null||i(h)},onTouchStart:h=>{h.stopPropagation(),i==null||i(h)}}),l.jsx("path",{d:`M ${e/2-u.size*.4} ${-u.distance}
            A ${u.size*.4} ${u.size*.4} 0 1 1
            ${e/2+u.size*.4} ${-u.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),l.jsx("polygon",{points:`${e/2+u.size*.4},${-u.distance-u.size*.25}
                 ${e/2+u.size*.4},${-u.distance+u.size*.25}
                 ${e/2+u.size*.65},${-u.distance}`,fill:"#fff",pointerEvents:"none"})]})}function hS({shape:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,onScaleStart:s,onRotateStart:a,onPointDrag:o,onHandleDrag:u,onDragEnd:d,selectedPointIndex:h,onPointSelect:p,onPointDelete:m,onAddPoint:g,zoom:v=1}){const{controlPoints:w,width_mm:S,height_mm:x,position:k,rotation:j,fillColor:O,strokeEnabled:I,strokeColor:E,strokeWidth_mm:U,editPointsVisible:D,closed:R,smooth:W}=e,ce=fe.useMemo(()=>!w||w.length<2?"":ZP(w,S,x,R,W),[w,S,x,R,W]),te=S/2,me=x/2,H=`translate(${k.x}, ${k.y}) rotate(${j||0}, ${te}, ${me})`;return ce?l.jsxs("g",{className:`path-element ${t?"path-element--selected":""}`,transform:H,style:{cursor:"move"},children:[l.jsx("path",{d:ce,fill:R?(O==null?void 0:O.hex)||"#609B63":"none",stroke:I&&E?E.hex:R?"none":(O==null?void 0:O.hex)||"#609B63",strokeWidth:I?U:R?0:50,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),l.jsx("path",{d:ce,fill:"transparent",stroke:"transparent",strokeWidth:Math.max(U||0,200),pointerEvents:"all",onTouchStart:r,onMouseDown:n,onDoubleClick:i,style:{cursor:"move"}}),t&&l.jsx("rect",{x:"-10",y:"-10",width:S+20,height:x+20,fill:"none",stroke:"#3b82f6",strokeWidth:"80",strokeDasharray:"400 400",opacity:"0.7",pointerEvents:"none"}),t&&l.jsx(qF,{width:S,height:x,onScaleStart:s,onRotateStart:a}),t&&w&&D&&l.jsx(sN,{controlPoints:w,width:S,height:x,zoom:v,onPointDrag:o,onHandleDrag:u,onDragEnd:d,showHandles:W,selectedPointIndex:h,onPointSelect:p,onPointDelete:m,onAddPoint:g,closed:R})]}):null}function qF({width:e,height:t,onScaleStart:n,onRotateStart:r}){const i=Math.min(e,t)*.08,o=Math.max(150,Math.min(400,i)),u=[{x:-o/2,y:-o/2,corner:"nw",cursor:"nwse-resize"},{x:e-o/2,y:-o/2,corner:"ne",cursor:"nesw-resize"},{x:-o/2,y:t-o/2,corner:"sw",cursor:"nesw-resize"},{x:e-o/2,y:t-o/2,corner:"se",cursor:"nwse-resize"}],d=o*2.5,h=o*.8;return l.jsxs("g",{className:"path-resize-handles",children:[u.map(p=>l.jsx("rect",{x:p.x,y:p.y,width:o,height:o,fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",rx:o/4,style:{cursor:p.cursor},pointerEvents:"all",onMouseDown:m=>{m.stopPropagation(),n==null||n(m,p.corner)},onTouchStart:m=>{m.stopPropagation(),n==null||n(m,p.corner)}},p.corner)),l.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-d+h/2,stroke:"#3b82f6",strokeWidth:"30",pointerEvents:"none"}),l.jsx("circle",{cx:e/2,cy:-d,r:h,fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",style:{cursor:"grab"},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p)}}),l.jsx("path",{d:`M ${e/2-h*.4} ${-d}
            A ${h*.4} ${h*.4} 0 1 1
            ${e/2+h*.4} ${-d}`,fill:"none",stroke:"#fff",strokeWidth:"25",strokeLinecap:"round",pointerEvents:"none"}),l.jsx("polygon",{points:`${e/2+h*.4},${-d-h*.25}
                 ${e/2+h*.4},${-d+h*.25}
                 ${e/2+h*.65},${-d}`,fill:"#fff",pointerEvents:"none"})]})}function vo(e,t,n,r="normal",i="normal"){vo._canvas||(vo._canvas=document.createElement("canvas"),vo._ctx=vo._canvas.getContext("2d"));const s=vo._ctx,a=i==="italic"?"italic ":"",o=r==="bold"?"bold ":"";s.font=`${a}${o}${n}px ${t}`;const u=s.measureText(e||"Double-click to edit");return{width:Math.max(u.width,100),height:n*1.2}}function YF(){return[{name:"Open Sans",family:"Open Sans, sans-serif"},{name:"Roboto",family:"Roboto, sans-serif"},{name:"Montserrat",family:"Montserrat, sans-serif"},{name:"Oswald",family:"Oswald, sans-serif"},{name:"Black Ops One",family:"Black Ops One, sans-serif"},{name:"Playfair Display",family:"Playfair Display, serif"},{name:"Arial",family:"Arial, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, sans-serif"}]}const XF=500,Xa=40;function fS({text:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{content:u,fontFamily:d,fontSize_mm:h,scale_x:p=1,scale_y:m=1,fontWeight:g,fontStyle:v,textAlign:w,position:S,rotation:x,fillColor:k,strokeColor:j,strokeWidth_mm:O}=e,I=h||XF,E=fe.useMemo(()=>vo(u||"Text",d,I,g,v),[u,d,I,g,v]);fe.useMemo(()=>({width:E.width*p,height:I*1.2*m}),[E.width,I,p,m]);const U=fe.useMemo(()=>{switch(w){case"center":return-E.width/2;case"right":return-E.width;default:return 0}},[w,E.width]),D=`translate(${S.x}, ${S.y}) rotate(${x||0}) scale(${p}, ${m})`,R=u||"Text",W=fd(n,Math.max(p,m));return l.jsxs("g",{className:`text-element ${t?"text-element--selected":""}`,transform:D,children:[l.jsx("text",{x:"0",y:"0",fontFamily:d,fontSize:I,fontWeight:g,fontStyle:v,textAnchor:w==="center"?"middle":w==="right"?"end":"start",fill:(k==null?void 0:k.hex)||"#1C1C1C",stroke:(j==null?void 0:j.hex)||"none",strokeWidth:O||0,strokeLinejoin:"round",strokeLinecap:"round",paintOrder:"stroke fill",style:{cursor:"move",userSelect:"none"},pointerEvents:"none",children:R}),l.jsx("rect",{x:U-Xa/2,y:-I*.85,width:E.width+Xa,height:I*1.2,fill:"transparent",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&l.jsxs("g",{transform:`scale(${1/p}, ${1/m})`,children:[l.jsx("rect",{x:(U-Xa)*p,y:(-I-Xa)*m,width:(E.width+Xa*2)*p,height:(I*1.2+Xa*2)*m,fill:"none",stroke:"#3b82f6",strokeWidth:W.strokeWidth,strokeDasharray:W.dashArray,opacity:"0.7",pointerEvents:"none"}),l.jsx(KF,{bounds:E,fontSize:I,alignOffset:U,scale_x:p,scale_y:m,zoom:n,onScaleStart:a,onRotateStart:o})]})]})}function KF({bounds:e,fontSize:t,alignOffset:n,scale_x:r,scale_y:i,zoom:s,onScaleStart:a,onRotateStart:o}){const{size:u,strokeWidth:d,cornerRadius:h}=dd(s),p=hd(u),m=(n-Xa)*r,g=(-t-Xa)*i,v=(e.width+Xa*2)*r,w=(t*1.2+Xa*2)*i,S=[{x:m-u/2,y:g-u/2,corner:"nw",cursor:"nwse-resize"},{x:m+v-u/2,y:g-u/2,corner:"ne",cursor:"nesw-resize"},{x:m-u/2,y:g+w-u/2,corner:"sw",cursor:"nesw-resize"},{x:m+v-u/2,y:g+w-u/2,corner:"se",cursor:"nwse-resize"}],x=m+v/2;return l.jsxs("g",{className:"text-handles",children:[S.map(k=>l.jsx("rect",{x:k.x,y:k.y,width:u,height:u,fill:"#3b82f6",stroke:"#fff",strokeWidth:d,rx:h,style:{cursor:k.cursor},pointerEvents:"all",onMouseDown:j=>{j.stopPropagation(),a==null||a(j,k.corner)},onTouchStart:j=>{j.stopPropagation(),a==null||a(j,k.corner)}},k.corner)),l.jsx("line",{x1:x,y1:g,x2:x,y2:g-p.distance+p.size/2,stroke:"#3b82f6",strokeWidth:p.stemWidth,pointerEvents:"none"}),l.jsx("circle",{cx:x,cy:g-p.distance,r:p.size,fill:"#3b82f6",stroke:"#fff",strokeWidth:d,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:k=>{k.stopPropagation(),o==null||o(k)},onTouchStart:k=>{k.stopPropagation(),o==null||o(k)}}),l.jsx("path",{d:`M ${x-p.size*.4} ${g-p.distance}
            A ${p.size*.4} ${p.size*.4} 0 1 1
            ${x+p.size*.4} ${g-p.distance}`,fill:"none",stroke:"#fff",strokeWidth:d*.7,strokeLinecap:"round",pointerEvents:"none"}),l.jsx("polygon",{points:`${x+p.size*.4},${g-p.distance-p.size*.25}
                 ${x+p.size*.4},${g-p.distance+p.size*.25}
                 ${x+p.size*.65},${g-p.distance}`,fill:"#fff",pointerEvents:"none"})]})}function ZF({zone:e,isSelected:t,zoom:n=1,onMouseDown:r,onTouchStart:i,onDoubleClick:s,onScaleStart:a,onRotateStart:o}){const{id:u,shapeType:d,sides:h,width_mm:p,height_mm:m,cornerRadius:g,position:v,rotation:w,controlPoints:S}=e,x=`exclusion-crosshatch-${u}`,k=fe.useMemo(()=>d==="path"&&S?ZP(S,p,m,!0):rN(h||4,p,m,g||0),[d,h,p,m,g,S]),j=p/2,O=m/2,I=`translate(${v.x}, ${v.y}) rotate(${w||0}, ${j}, ${O})`,E=Math.min(p,m)*.02,R=Math.max(100,Math.min(500,E)),W=R*.15;return l.jsxs("g",{className:`exclusion-zone-element ${t?"exclusion-zone-element--selected":""}`,transform:I,style:{cursor:"move"},children:[l.jsx("defs",{children:l.jsxs("pattern",{id:x,patternUnits:"userSpaceOnUse",width:R,height:R,patternTransform:"rotate(45)",children:[l.jsx("rect",{width:R,height:R,fill:"#e5e5e5"}),l.jsx("line",{x1:"0",y1:"0",x2:"0",y2:R,stroke:"#999",strokeWidth:W}),l.jsx("line",{x1:R/2,y1:"0",x2:R/2,y2:R,stroke:"#999",strokeWidth:W})]})}),l.jsx("path",{d:k,fill:`url(#${x})`,stroke:"#666",strokeWidth:"60",strokeDasharray:"200 100",pointerEvents:"none"}),l.jsx("path",{d:k,fill:"transparent",stroke:"transparent",strokeWidth:"200",pointerEvents:"all",onMouseDown:r,onTouchStart:i,onDoubleClick:s,style:{cursor:"move"}}),t&&(()=>{const ce=fd(n);return l.jsx("rect",{x:"-10",y:"-10",width:p+20,height:m+20,fill:"none",stroke:"#ef4444",strokeWidth:ce.strokeWidth,strokeDasharray:ce.dashArray,opacity:"0.7",pointerEvents:"none"})})(),t&&l.jsx(QF,{width:p,height:m,zoom:n,onScaleStart:a,onRotateStart:o})]})}function QF({width:e,height:t,zoom:n,onScaleStart:r,onRotateStart:i}){const{size:s,strokeWidth:a,cornerRadius:o}=dd(n),u=hd(s),d=[{x:e/2-s/2,y:-s/2,corner:"n",cursor:"ns-resize"},{x:e/2-s/2,y:t-s/2,corner:"s",cursor:"ns-resize"},{x:e-s/2,y:t/2-s/2,corner:"e",cursor:"ew-resize"},{x:-s/2,y:t/2-s/2,corner:"w",cursor:"ew-resize"}];return l.jsxs("g",{className:"exclusion-zone-handles",children:[d.map(h=>l.jsx("rect",{x:h.x,y:h.y,width:s,height:s,fill:"#ef4444",stroke:"#fff",strokeWidth:a,rx:o,style:{cursor:h.cursor},pointerEvents:"all",onMouseDown:p=>{p.stopPropagation(),r==null||r(p,h.corner)},onTouchStart:p=>{p.stopPropagation(),r==null||r(p,h.corner)}},h.corner)),l.jsx("line",{x1:e/2,y1:0,x2:e/2,y2:-u.distance+u.size/2,stroke:"#ef4444",strokeWidth:u.stemWidth,pointerEvents:"none"}),l.jsx("circle",{cx:e/2,cy:-u.distance,r:u.size,fill:"#ef4444",stroke:"#fff",strokeWidth:a,style:{cursor:"grab"},pointerEvents:"all",onMouseDown:h=>{h.stopPropagation(),i==null||i(h)},onTouchStart:h=>{h.stopPropagation(),i==null||i(h)}}),l.jsx("path",{d:`M ${e/2-u.size*.4} ${-u.distance}
            A ${u.size*.4} ${u.size*.4} 0 1 1
            ${e/2+u.size*.4} ${-u.distance}`,fill:"none",stroke:"#fff",strokeWidth:a*.7,strokeLinecap:"round",pointerEvents:"none"}),l.jsx("polygon",{points:`${e/2+u.size*.4},${-u.distance-u.size*.25}
                 ${e/2+u.size*.4},${-u.distance+u.size*.25}
                 ${e/2+u.size*.65},${-u.distance}`,fill:"#fff",pointerEvents:"none"})]})}function JF({groupId:e,zoom:t=1,onDragStart:n,onScaleStart:r,onRotateStart:i,screenToSVG:s}){const{groups:a,selectedGroupId:o,editingGroupId:u,shapes:d,selectGroup:h,enterGroup:p,updateGroupPosition:m,commitGroupMove:g}=tn(),v=a[e];if(!v||!v.bounds||u===e)return null;const w=o===e,{x:S,y:x,width:k,height:j}=v.bounds,{size:O,strokeWidth:I,cornerRadius:E}=dd(t),U=hd(O),D=O/2,R=fd(t),W=O*.8,ce=ge=>{if(ge.stopPropagation(),h(e),!v.locked&&n&&s){const Ee=ge.touches?ge.touches[0].clientX:ge.clientX,ke=ge.touches?ge.touches[0].clientY:ge.clientY,ze=s(Ee,ke);n(e,{x:ze.x-v.bounds.x,y:ze.y-v.bounds.y})}},te=ge=>{ge.stopPropagation(),p(e)},me=(ge,Ee)=>{ge.stopPropagation(),r&&r(ge,e,Ee)},H=ge=>{ge.stopPropagation(),i&&i(ge,e)};return v.childIds.map(ge=>d[ge]).filter(Boolean),l.jsxs("g",{className:"group-element",children:[l.jsx("rect",{x:S,y:x,width:k,height:j,fill:"transparent",stroke:w?"#9333ea":"#a855f7",strokeWidth:w?R.strokeWidth:R.strokeWidth*.5,strokeDasharray:w?"none":R.dashArray,rx:E,ry:E,style:{cursor:"move"},onMouseDown:ce,onTouchStart:ce,onDoubleClick:te}),!w&&l.jsx("text",{x:S+I,y:x-I,fontSize:W,fill:"#9333ea",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"500",children:v.compoundType?`${v.compoundType.charAt(0).toUpperCase()+v.compoundType.slice(1)} Group`:v.customName||"Group"}),w&&l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:S-D,y:x-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nwse-resize"},onMouseDown:ge=>me(ge,"nw"),onTouchStart:ge=>me(ge,"nw")}),l.jsx("rect",{x:S+k-D,y:x-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nesw-resize"},onMouseDown:ge=>me(ge,"ne"),onTouchStart:ge=>me(ge,"ne")}),l.jsx("rect",{x:S-D,y:x+j-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nesw-resize"},onMouseDown:ge=>me(ge,"sw"),onTouchStart:ge=>me(ge,"sw")}),l.jsx("rect",{x:S+k-D,y:x+j-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"nwse-resize"},onMouseDown:ge=>me(ge,"se"),onTouchStart:ge=>me(ge,"se")}),l.jsx("rect",{x:S+k/2-D,y:x-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ns-resize"},onMouseDown:ge=>me(ge,"n"),onTouchStart:ge=>me(ge,"n")}),l.jsx("rect",{x:S+k/2-D,y:x+j-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ns-resize"},onMouseDown:ge=>me(ge,"s"),onTouchStart:ge=>me(ge,"s")}),l.jsx("rect",{x:S-D,y:x+j/2-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ew-resize"},onMouseDown:ge=>me(ge,"w"),onTouchStart:ge=>me(ge,"w")}),l.jsx("rect",{x:S+k-D,y:x+j/2-D,width:O,height:O,fill:"white",stroke:"#9333ea",strokeWidth:I,rx:E,style:{cursor:"ew-resize"},onMouseDown:ge=>me(ge,"e"),onTouchStart:ge=>me(ge,"e")}),l.jsx("line",{x1:S+k/2,y1:x,x2:S+k/2,y2:x-U.distance+U.size/2,stroke:"#9333ea",strokeWidth:U.stemWidth}),l.jsx("circle",{cx:S+k/2,cy:x-U.distance,r:U.size,fill:"white",stroke:"#9333ea",strokeWidth:I,style:{cursor:"grab"},onMouseDown:H,onTouchStart:H}),l.jsx("text",{x:S+k/2,y:x-U.distance-O-W*.5,fontSize:W,fill:"#9333ea",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"600",textAnchor:"middle",children:v.compoundType?`${v.compoundType.charAt(0).toUpperCase()+v.compoundType.slice(1)}`:v.customName||"Group"}),l.jsxs("g",{transform:`translate(${S+k+D}, ${x-D})`,children:[l.jsx("circle",{cx:0,cy:0,r:D,fill:"#9333ea"}),l.jsx("text",{x:0,y:0,fontSize:W*.7,fill:"white",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"600",textAnchor:"middle",dominantBaseline:"central",children:v.childIds.length})]})]})]})}function pS(e,t,n){if(!e||e.type==="rectangle"||!e.controlPoints)return null;const r=e.controlPoints;if(!r||r.length<3)return null;const i=r.map(a=>({x:a.x*t,y:a.y*n}));let s=`M ${i[0].x} ${i[0].y}`;for(let a=1;a<i.length;a++)s+=` L ${i[a].x} ${i[a].y}`;return s+=" Z",s}const e7=fe.forwardRef(function(t,n){var is,$o;const r=fe.useRef(null),i=fe.useRef(null);fe.useImperativeHandle(n,()=>r.current);const[s,a]=fe.useState(1),[o,u]=fe.useState({x:0,y:0}),[d,h]=fe.useState(!1),[p,m]=fe.useState({x:0,y:0}),[g,v]=fe.useState(!1),[w,S]=fe.useState({active:!1,mode:null,initialDistance:0,initialZoom:1,initialPan:{x:0,y:0},initialCenter:{x:0,y:0}}),[x,k]=fe.useState(!1),[j,O]=fe.useState(null),[I,E]=fe.useState(null),[U,D]=fe.useState(null),[R,W]=fe.useState(null),[ce,te]=fe.useState(null),[me,H]=fe.useState(null),[ge,Ee]=fe.useState(null),[ke,ze]=fe.useState(null),xe=fe.useRef(null),[Re,_e]=fe.useState(null),Pe=fe.useRef(null),it=fe.useRef(0),[tt,Ue]=fe.useState(!1),[ut,de]=fe.useState(null),[oe,We]=fe.useState(null),[Ne,ft]=fe.useState(!1),[Pt,Ct]=fe.useState(null),[q,qe]=fe.useState(null),[ae,M]=fe.useState(!1),[L,ee]=fe.useState(null),[pe,ve]=fe.useState(null),[ye,Me]=fe.useState(!1),[Xe,$e]=fe.useState(null),[c,f]=fe.useState(null),[b,_]=fe.useState(!1),[C,A]=fe.useState(null),[T,N]=fe.useState(null),[$,F]=fe.useState(!1),[Y,Q]=fe.useState(null),[K,V]=fe.useState(null),[X,B]=fe.useState(!1),[Z,G]=fe.useState(null),[re,z]=fe.useState(null),[ne,se]=fe.useState(!1),[ue,ie]=fe.useState(null),[be,Se]=fe.useState(null),[Ae,De]=fe.useState(!1),[we,Ie]=fe.useState(null),[Fe,Ye]=fe.useState(null),[Ze,Qe]=fe.useState(!1),[pt,gt]=fe.useState(null),[At,kt]=fe.useState(null),[at,lt]=fe.useState(null),[Tt,Ot]=fe.useState(0),[Be,dt]=fe.useState(null),{surface:vt,courts:Lt,tracks:It,motifs:$t,shapes:nn,texts:rn,exclusionZones:vn,elementOrder:Cn,selectedCourtId:wt,selectedTrackId:En,selectedMotifId:Nn,selectedShapeId:xn,selectedTextId:xr,selectedExclusionZoneId:Tr,snapToGrid:or,gridSize_mm:lr,selectCourt:ur,deselectCourt:Nr,selectTrack:Vr,deselectTrack:In,selectMotif:Kn,deselectMotif:gi,selectShape:_i,deselectShape:Gr,selectText:yi,deselectText:Ni,selectExclusionZone:ri,deselectExclusionZone:ii,updateCourtPosition:qr,updateTrackPosition:si,updateMotifPosition:tr,updateMotifScale:zn,updateMotifRotation:Gt,updateShapePosition:dr,updateShapeDimensions:kn,updateShapeRotation:nr,updateTextPosition:Or,updateTextScale:ts,updateTextRotation:Br,showPropertiesPanel:bi,setShowPropertiesPanel:y,updateExclusionZonePosition:P,updateExclusionZoneDimensions:J,updateExclusionZoneRotation:le,updateBlobControlPoint:Ce,updateBlobHandle:Je,commitBlobEdit:rt,pathDrawingMode:xt,activePathId:_t,addPointToPath:Qt,finishPath:sn,cancelPath:An,updatePathControlPoint:rr,updatePathHandle:ns,commitPathEdit:Ut,removePointFromPath:He,addPointToExistingPath:St,groups:Rt,selectedGroupId:Fn,selectedElementIds:bn,editingGroupId:Qn,selectGroup:Yr,deselectGroup:Oi,enterGroup:na,exitGroup:ra,addToSelection:cr,clearMultiSelection:Ri,updateGroupPosition:ai,updateGroupScale:xs,updateGroupRotation:El,commitGroupMove:ws,setZoom:Io,setInteracting:Ke}=tn();fe.useEffect(()=>{Io(s)},[s,Io]);const mt=fe.useCallback((he,Ve)=>!Re||Re.id!==Ve||!he?he:{...he,position:{x:he.position.x+Re.offset.x,y:he.position.y+Re.offset.y}},[Re]),st=fe.useCallback((he,Ve)=>{const Te=r.current;if(!Te||!Te.getScreenCTM())return{x:0,y:0};const Oe=Te.createSVGPoint();Oe.x=he,Oe.y=Ve;const nt=Te.getScreenCTM();if(!nt)return{x:0,y:0};const ot=Oe.matrixTransform(nt.inverse());return{x:ot.x,y:ot.y}},[]),jt=(he,Ve)=>{if(he.stopPropagation(),he.shiftKey){cr(Ve);return}bn.length>0&&Ri(),ur(Ve);const Oe=Lt[Ve];if(Oe!=null&&Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot);O({x:et.x-Oe.position.x,y:et.y-Oe.position.y}),E(Ve),k(!0)},pn=(he,Ve)=>{he.stopPropagation(),ur(Ve),tn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Ft=(he,Ve)=>{if(he.stopPropagation(),he.shiftKey){cr(Ve);return}bn.length>0&&Ri(),Vr(Ve);const Oe=It[Ve];if(Oe!=null&&Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot);O({x:et.x-Oe.position.x,y:et.y-Oe.position.y}),D(Ve),k(!0)},Bt=(he,Ve)=>{he.stopPropagation(),Vr(Ve),tn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Vt=(he,Ve)=>{if(he.stopPropagation(),he.shiftKey){cr(Ve);return}bn.length>0&&Ri(),Kn(Ve);const Oe=$t[Ve];if(Oe!=null&&Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot);O({x:et.x-Oe.position.x,y:et.y-Oe.position.y}),W(Ve),k(!0)},Tn=(he,Ve)=>{he.stopPropagation(),Kn(Ve),tn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Vn=(he,Ve,Te)=>{he.stopPropagation();const Oe=$t[Ve];if(!Oe||Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot),yt=Oe.originalWidth_mm*(Oe.scale||1),ht=Oe.originalHeight_mm*(Oe.scale||1);let Et;switch(Te){case"nw":Et={x:Oe.position.x+yt,y:Oe.position.y+ht};break;case"ne":Et={x:Oe.position.x,y:Oe.position.y+ht};break;case"sw":Et={x:Oe.position.x+yt,y:Oe.position.y};break;case"se":default:Et={x:Oe.position.x,y:Oe.position.y};break}const zt=Math.sqrt(Math.pow(et.x-Et.x,2)+Math.pow(et.y-Et.y,2));We({initialDistance:zt,originalScale:Oe.scale||1,originalWidth:yt,originalHeight:ht,corner:Te,anchorPoint:Et}),de(Ve),Ue(!0)},Bn=(he,Ve)=>{he.stopPropagation();const Te=$t[Ve];if(!Te||Te.locked)return;const Oe=he.touches?he.touches[0].clientX:he.clientX,nt=he.touches?he.touches[0].clientY:he.clientY,ot=st(Oe,nt),et=Te.originalWidth_mm*(Te.scale||1),yt=Te.originalHeight_mm*(Te.scale||1),ht={x:Te.position.x+et/2,y:Te.position.y+yt/2},Et=Math.atan2(ot.y-ht.y,ot.x-ht.x)*(180/Math.PI);qe({initialAngle:Et,originalRotation:Te.rotation||0,motifCenter:ht}),Ct(Ve),ft(!0)},wr=he=>{for(const[Ve,Te]of Object.entries(Rt))if(Te.childIds.includes(he))return Ve;return null},Zn=wr,on=(he,Ve)=>{he.stopPropagation();const Te=Zn(Ve);if(Te&&Qn!==Te){Yr(Te);const ht=Rt[Te];if(ht!=null&&ht.locked)return;const Et=he.touches?he.touches[0].clientX:he.clientX,zt=he.touches?he.touches[0].clientY:he.clientY,en=st(Et,zt);O({x:en.x-ht.bounds.x,y:en.y-ht.bounds.y}),ze(Te),k(!0);return}if(he.shiftKey){cr(Ve);return}bn.length>0&&Ri(),_i(Ve);const nt=nn[Ve];if(nt!=null&&nt.locked)return;const ot=he.touches?he.touches[0].clientX:he.clientX,et=he.touches?he.touches[0].clientY:he.clientY,yt=st(ot,et);O({x:yt.x-nt.position.x,y:yt.y-nt.position.y}),te(Ve),k(!0)},Xt=(he,Ve)=>{he.stopPropagation(),_i(Ve),tn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},rs=(he,Ve,Te)=>{he.stopPropagation();const Oe=nn[Ve];if(!Oe||Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot),{width_mm:yt,height_mm:ht}=Oe;let Et;switch(Te){case"n":Et={x:Oe.position.x+yt/2,y:Oe.position.y+ht};break;case"s":Et={x:Oe.position.x+yt/2,y:Oe.position.y};break;case"e":Et={x:Oe.position.x,y:Oe.position.y+ht/2};break;case"w":Et={x:Oe.position.x+yt,y:Oe.position.y+ht/2};break;case"nw":Et={x:Oe.position.x+yt,y:Oe.position.y+ht};break;case"ne":Et={x:Oe.position.x,y:Oe.position.y+ht};break;case"sw":Et={x:Oe.position.x+yt,y:Oe.position.y};break;case"se":default:Et={x:Oe.position.x,y:Oe.position.y};break}const zt=Math.sqrt(Math.pow(et.x-Et.x,2)+Math.pow(et.y-Et.y,2));ve({initialDistance:zt,originalWidth:yt,originalHeight:ht,aspectLocked:Oe.aspectLocked,corner:Te,anchorPoint:Et}),ee(Ve),M(!0)},Mi=(he,Ve)=>{he.stopPropagation();const Te=nn[Ve];if(!Te||Te.locked)return;const Oe=he.touches?he.touches[0].clientX:he.clientX,nt=he.touches?he.touches[0].clientY:he.clientY,ot=st(Oe,nt),{width_mm:et,height_mm:yt}=Te,ht={x:Te.position.x+et/2,y:Te.position.y+yt/2},Et=Math.atan2(ot.y-ht.y,ot.x-ht.x)*(180/Math.PI);f({initialAngle:Et,originalRotation:Te.rotation||0,shapeCenter:ht}),$e(Ve),Me(!0)},kc=(he,Ve)=>{he.stopPropagation();const Te=wr(Ve);if(Te&&Qn!==Te){Yr(Te);const ht=Rt[Te];if(ht!=null&&ht.locked)return;const Et=he.touches?he.touches[0].clientX:he.clientX,zt=he.touches?he.touches[0].clientY:he.clientY,en=st(Et,zt);O({x:en.x-ht.bounds.x,y:en.y-ht.bounds.y}),ze(Te),k(!0);return}if(he.shiftKey){cr(Ve);return}bn.length>0&&Ri(),yi(Ve);const nt=rn[Ve];if(nt!=null&&nt.locked)return;const ot=he.touches?he.touches[0].clientX:he.clientX,et=he.touches?he.touches[0].clientY:he.clientY,yt=st(ot,et);O({x:yt.x-nt.position.x,y:yt.y-nt.position.y}),H(Ve),k(!0)},Ed=(he,Ve)=>{he.stopPropagation(),yi(Ve),y(!0)},Bf=(he,Ve,Te)=>{he.stopPropagation();const Oe=rn[Ve];if(!Oe||Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot),yt=Oe.fontSize_mm||500,ht=vo(Oe.content||"Text",Oe.fontFamily,yt,Oe.fontWeight,Oe.fontStyle),Et=Oe.scale_x||1,zt=Oe.scale_y||1,en=ht.width*Et,mn=yt*1.2*zt;let Yt=Oe.position.x;Oe.textAlign==="center"?Yt-=en/2:Oe.textAlign==="right"&&(Yt-=en);const qt=Oe.position.y-yt*zt;let hr;switch(Te){case"nw":hr={x:Yt+en,y:qt+mn};break;case"ne":hr={x:Yt,y:qt+mn};break;case"sw":hr={x:Yt+en,y:qt};break;case"se":default:hr={x:Yt,y:qt};break}const ki=Math.sqrt(Math.pow(et.x-hr.x,2)+Math.pow(et.y-hr.y,2));N({initialDistance:ki,originalScale:{x:Et,y:zt},originalPosition:{...Oe.position},baseBounds:ht,baseFontSize:yt,textAlign:Oe.textAlign,corner:Te,anchorPoint:hr}),A(Ve),_(!0)},Tl=(he,Ve)=>{he.stopPropagation();const Te=rn[Ve];if(!Te||Te.locked)return;const Oe=he.touches?he.touches[0].clientX:he.clientX,nt=he.touches?he.touches[0].clientY:he.clientY,ot=st(Oe,nt),et=vo(Te.content,Te.fontFamily,Te.fontSize_mm,Te.fontWeight,Te.fontStyle);let yt=Te.position.x;Te.textAlign==="center"?yt=Te.position.x:Te.textAlign==="right"?yt=Te.position.x-et.width/2:yt=Te.position.x+et.width/2;const ht={x:yt,y:Te.position.y-Te.fontSize_mm*.4},Et=Math.atan2(ot.y-ht.y,ot.x-ht.x)*(180/Math.PI);V({initialAngle:Et,originalRotation:Te.rotation||0,textCenter:ht}),Q(Ve),F(!0)},uo=(he,Ve)=>{he.stopPropagation(),ri(Ve);const Te=vn[Ve];if(Te!=null&&Te.locked)return;const Oe=he.touches?he.touches[0].clientX:he.clientX,nt=he.touches?he.touches[0].clientY:he.clientY,ot=st(Oe,nt);O({x:ot.x-Te.position.x,y:ot.y-Te.position.y}),Ee(Ve),k(!0)},Uf=(he,Ve)=>{he.stopPropagation(),ri(Ve),tn.setState({showPropertiesPanel:!0,propertiesPanelUserClosed:!1})},Hf=(he,Ve,Te)=>{he.stopPropagation();const Oe=vn[Ve];if(!Oe||Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot),{width_mm:yt,height_mm:ht}=Oe;let Et;switch(Te){case"n":Et={x:Oe.position.x+yt/2,y:Oe.position.y+ht};break;case"s":Et={x:Oe.position.x+yt/2,y:Oe.position.y};break;case"e":Et={x:Oe.position.x,y:Oe.position.y+ht/2};break;case"w":Et={x:Oe.position.x+yt,y:Oe.position.y+ht/2};break;default:Et={x:Oe.position.x,y:Oe.position.y};break}const zt=Math.sqrt(Math.pow(et.x-Et.x,2)+Math.pow(et.y-Et.y,2));z({initialDistance:zt,originalWidth:yt,originalHeight:ht,corner:Te,anchorPoint:Et}),G(Ve),B(!0)},On=(he,Ve)=>{he.stopPropagation();const Te=vn[Ve];if(!Te||Te.locked)return;const Oe=he.touches?he.touches[0].clientX:he.clientX,nt=he.touches?he.touches[0].clientY:he.clientY,ot=st(Oe,nt),{width_mm:et,height_mm:yt}=Te,ht={x:Te.position.x+et/2,y:Te.position.y+yt/2},Et=Math.atan2(ot.y-ht.y,ot.x-ht.x)*(180/Math.PI);Se({initialAngle:Et,originalRotation:Te.rotation||0,zoneCenter:ht}),ie(Ve),se(!0)},Td=(he,Ve,Te)=>{he.stopPropagation();const Oe=Rt[Ve];if(!Oe||Oe.locked)return;const nt=he.touches?he.touches[0].clientX:he.clientX,ot=he.touches?he.touches[0].clientY:he.clientY,et=st(nt,ot),{x:yt,y:ht,width:Et,height:zt}=Oe.bounds;let en;switch(Te){case"n":en={x:yt+Et/2,y:ht+zt};break;case"s":en={x:yt+Et/2,y:ht};break;case"e":en={x:yt,y:ht+zt/2};break;case"w":en={x:yt+Et,y:ht+zt/2};break;case"nw":en={x:yt+Et,y:ht+zt};break;case"ne":en={x:yt,y:ht+zt};break;case"sw":en={x:yt+Et,y:ht};break;case"se":default:en={x:yt,y:ht};break}const mn=Math.sqrt(Math.pow(et.x-en.x,2)+Math.pow(et.y-en.y,2)),Yt={};for(const qt of Oe.childIds)qt.startsWith("shape-")&&nn[qt]?Yt[qt]={position:{...nn[qt].position},width_mm:nn[qt].width_mm,height_mm:nn[qt].height_mm}:qt.startsWith("text-")&&rn[qt]?Yt[qt]={position:{...rn[qt].position},width_mm:rn[qt].width_mm||1e3,height_mm:rn[qt].height_mm||500,fontSize:rn[qt].fontSize||200}:qt.startsWith("court-")&&Lt[qt]?Yt[qt]={position:{...Lt[qt].position},scale:Lt[qt].scale||1}:qt.startsWith("track-")&&It[qt]?Yt[qt]={position:{...It[qt].position},scale:It[qt].scale||1}:qt.startsWith("motif-")&&$t[qt]&&(Yt[qt]={position:{...$t[qt].position},scale:$t[qt].scale||1});Ye({initialDistance:mn,originalBounds:{...Oe.bounds},corner:Te,anchorPoint:en,originalChildren:Yt}),Ie(Ve),De(!0)},Wf=(he,Ve)=>{he.stopPropagation();const Te=Rt[Ve];if(!Te||Te.locked)return;const Oe=he.touches?he.touches[0].clientX:he.clientX,nt=he.touches?he.touches[0].clientY:he.clientY,ot=st(Oe,nt),{x:et,y:yt,width:ht,height:Et}=Te.bounds,zt={x:et+ht/2,y:yt+Et/2},en=Math.atan2(ot.y-zt.y,ot.x-zt.x)*(180/Math.PI),mn={};for(const Yt of Te.childIds)Yt.startsWith("shape-")&&nn[Yt]?mn[Yt]={position:{...nn[Yt].position},rotation:nn[Yt].rotation||0}:Yt.startsWith("text-")&&rn[Yt]?mn[Yt]={position:{...rn[Yt].position},rotation:rn[Yt].rotation||0}:Yt.startsWith("court-")&&Lt[Yt]?mn[Yt]={position:{...Lt[Yt].position},rotation:Lt[Yt].rotation||0}:Yt.startsWith("track-")&&It[Yt]?mn[Yt]={position:{...It[Yt].position},rotation:It[Yt].rotation||0}:Yt.startsWith("motif-")&&$t[Yt]&&(mn[Yt]={position:{...$t[Yt].position},rotation:$t[Yt].rotation||0});kt({initialAngle:en,center:zt,originalBounds:{...Te.bounds},originalChildren:mn}),gt(Ve),Qe(!0)};fe.useEffect(()=>{k(!1),E(null),D(null),W(null),te(null),H(null),Ee(null),O(null)},[vt.width_mm,vt.length_mm]),fe.useEffect(()=>{if(!x||!I&&!U&&!R&&!ce&&!me&&!ge&&!ke)return;Ke(!0);const Te={id:I||U||R||ce||me||ge||ke,type:I?"court":U?"track":R?"motif":ce?"shape":me?"text":ge?"exclusionZone":ke?"group":null,offset:{x:0,y:0}};_e(Te),Pe.current=Te;const Oe=ot=>{xe.current||(xe.current=requestAnimationFrame(()=>{var Yt,qt,hr,ki,ho,Jn,Le;xe.current=null;const et=ot.touches?ot.touches[0].clientX:ot.clientX,yt=ot.touches?ot.touches[0].clientY:ot.clientY,ht=st(et,yt);let Et={x:ht.x-j.x,y:ht.y-j.y};or&&(Et=_F(Et,lr));let zt=null;if(I?zt=(Yt=Lt[I])==null?void 0:Yt.position:U?zt=(qt=It[U])==null?void 0:qt.position:R?zt=(hr=$t[R])==null?void 0:hr.position:ce?zt=(ki=nn[ce])==null?void 0:ki.position:me?zt=(ho=rn[me])==null?void 0:ho.position:ge?zt=(Jn=vn[ge])==null?void 0:Jn.position:ke&&(zt=((Le=Rt[ke])==null?void 0:Le.bounds)||{x:0,y:0}),!zt)return;const en={x:Et.x-zt.x,y:Et.y-zt.y},mn=Pe.current?{...Pe.current,offset:en}:null;Pe.current=mn,_e(mn)}))},nt=()=>{xe.current&&(cancelAnimationFrame(xe.current),xe.current=null);const ot=Pe.current;if(ot&&(ot.offset.x!==0||ot.offset.y!==0)){if(I){const et=Lt[I];let yt={x:et.position.x+ot.offset.x,y:et.position.y+ot.offset.y};const ht={width_mm:et.template.dimensions.width_mm*et.scale,length_mm:et.template.dimensions.length_mm*et.scale};yt=wp(yt,ht,vt),qr(I,yt)}else if(U){const et=It[U],yt={x:et.position.x+ot.offset.x,y:et.position.y+ot.offset.y};si(U,yt)}else if(R){const et=$t[R];let yt={x:et.position.x+ot.offset.x,y:et.position.y+ot.offset.y};const ht={width_mm:et.originalWidth_mm*(et.scale||1),length_mm:et.originalHeight_mm*(et.scale||1)};yt=wp(yt,ht,vt),tr(R,yt)}else if(ce){const et=nn[ce];let yt={x:et.position.x+ot.offset.x,y:et.position.y+ot.offset.y};const ht={width_mm:et.width_mm,length_mm:et.height_mm};yt=wp(yt,ht,vt),dr(ce,yt)}else if(me){const et=rn[me],yt={x:et.position.x+ot.offset.x,y:et.position.y+ot.offset.y};Or(me,yt)}else if(ge){const et=vn[ge];let yt={x:et.position.x+ot.offset.x,y:et.position.y+ot.offset.y};const ht={width_mm:et.width_mm,length_mm:et.height_mm};yt=wp(yt,ht,vt),P(ge,yt)}else ke&&Rt[ke]&&(ai(ke,ot.offset.x,ot.offset.y),ws(ke));tn.getState().addToHistory()}_e(null),Pe.current=null,Ke(!1),k(!1),E(null),D(null),W(null),te(null),H(null),Ee(null),ze(null),O(null)};return window.addEventListener("mousemove",Oe),window.addEventListener("mouseup",nt),window.addEventListener("touchmove",Oe,{passive:!1}),window.addEventListener("touchend",nt),window.addEventListener("touchcancel",nt),()=>{window.removeEventListener("mousemove",Oe),window.removeEventListener("mouseup",nt),window.removeEventListener("touchmove",Oe),window.removeEventListener("touchend",nt),window.removeEventListener("touchcancel",nt),xe.current&&(cancelAnimationFrame(xe.current),xe.current=null),Pe.current=null,Ke(!1)}},[x,I,U,R,ce,me,ge,ke,j,Lt,It,$t,nn,rn,vn,Rt,or,lr,vt,qr,si,tr,dr,Or,P,ai,ws,Ke]),fe.useEffect(()=>{if(!tt||!ut||!oe)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),et=$t[ut];if(!et)return;const ht=Math.sqrt(Math.pow(ot.x-oe.anchorPoint.x,2)+Math.pow(ot.y-oe.anchorPoint.y,2))/oe.initialDistance;let Et=oe.originalScale*ht;Et=Math.max(.1,Et),Et=Math.round(Et*100)/100;const zt=et.originalWidth_mm*Et,en=et.originalHeight_mm*Et;let mn;switch(oe.corner){case"nw":mn={x:oe.anchorPoint.x-zt,y:oe.anchorPoint.y-en};break;case"ne":mn={x:oe.anchorPoint.x,y:oe.anchorPoint.y-en};break;case"sw":mn={x:oe.anchorPoint.x-zt,y:oe.anchorPoint.y};break;case"se":default:mn={x:oe.anchorPoint.x,y:oe.anchorPoint.y};break}zn(ut,Et),tr(ut,mn)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),Ue(!1),de(null),We(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[tt,ut,oe,$t,zn,tr]),fe.useEffect(()=>{if(!Ne||!Pt||!q)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),yt=Math.atan2(ot.y-q.motifCenter.y,ot.x-q.motifCenter.x)*(180/Math.PI)-q.initialAngle;let ht=q.originalRotation+yt;ht=(ht%360+360)%360,Te.shiftKey&&(ht=Math.round(ht/15)*15),ht=Math.round(ht*10)/10,Gt(Pt,ht)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),ft(!1),Ct(null),qe(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Ne,Pt,q,Gt]),fe.useEffect(()=>{if(!ae||!L||!pe)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt);if(!nn[L])return;const ht=Math.sqrt(Math.pow(ot.x-pe.anchorPoint.x,2)+Math.pow(ot.y-pe.anchorPoint.y,2))/pe.initialDistance;let Et,zt;const en=pe.corner,mn=["n","s","e","w"].includes(en);if(pe.aspectLocked)Et=pe.originalWidth*ht,zt=pe.originalHeight*ht;else if(mn){const qt=Math.abs(ot.y-pe.anchorPoint.y),hr=Math.abs(ot.x-pe.anchorPoint.x);en==="n"||en==="s"?(Et=pe.originalWidth,zt=Math.max(100,qt)):(Et=Math.max(100,hr),zt=pe.originalHeight)}else{const qt=Math.abs(ot.x-pe.anchorPoint.x),hr=Math.abs(ot.y-pe.anchorPoint.y);Et=Math.max(100,qt),zt=Math.max(100,hr)}Et=Math.round(Et),zt=Math.round(zt);let Yt;switch(en){case"n":Yt={x:pe.anchorPoint.x-Et/2,y:pe.anchorPoint.y-zt};break;case"s":Yt={x:pe.anchorPoint.x-Et/2,y:pe.anchorPoint.y};break;case"e":Yt={x:pe.anchorPoint.x,y:pe.anchorPoint.y-zt/2};break;case"w":Yt={x:pe.anchorPoint.x-Et,y:pe.anchorPoint.y-zt/2};break;case"nw":Yt={x:pe.anchorPoint.x-Et,y:pe.anchorPoint.y-zt};break;case"ne":Yt={x:pe.anchorPoint.x,y:pe.anchorPoint.y-zt};break;case"sw":Yt={x:pe.anchorPoint.x-Et,y:pe.anchorPoint.y};break;case"se":default:Yt={x:pe.anchorPoint.x,y:pe.anchorPoint.y};break}kn(L,Et,zt),dr(L,Yt)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),M(!1),ee(null),ve(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[ae,L,pe,nn,kn,dr]),fe.useEffect(()=>{if(!ye||!Xe||!c)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),yt=Math.atan2(ot.y-c.shapeCenter.y,ot.x-c.shapeCenter.x)*(180/Math.PI)-c.initialAngle;let ht=c.originalRotation+yt;ht=(ht%360+360)%360,Te.shiftKey&&(ht=Math.round(ht/15)*15),ht=Math.round(ht*10)/10,nr(Xe,ht)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),Me(!1),$e(null),f(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[ye,Xe,c,nr]),fe.useEffect(()=>{if(!b||!C||!T)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt);if(!rn[C])return;const ht=Math.sqrt(Math.pow(ot.x-T.anchorPoint.x,2)+Math.pow(ot.y-T.anchorPoint.y,2))/T.initialDistance,Et=Math.max(.01,T.originalScale.x*ht),zt=Math.max(.01,T.originalScale.y*ht),{baseBounds:en,baseFontSize:mn,corner:Yt,anchorPoint:qt,textAlign:hr}=T,ki=en.width*Et,ho=mn*1.2*zt;let Jn={...T.originalPosition};switch(Yt){case"nw":hr==="left"?Jn.x=qt.x-ki:hr==="center"?Jn.x=qt.x-ki/2:Jn.x=qt.x,Jn.y=qt.y-ho*.17;break;case"ne":hr==="left"?Jn.x=qt.x:hr==="center"?Jn.x=qt.x+ki/2:Jn.x=qt.x+ki,Jn.y=qt.y-ho*.17;break;case"sw":hr==="left"?Jn.x=qt.x-ki:hr==="center"?Jn.x=qt.x-ki/2:Jn.x=qt.x,Jn.y=qt.y+mn*zt;break;case"se":default:hr==="left"?Jn.x=qt.x:hr==="center"?Jn.x=qt.x+ki/2:Jn.x=qt.x+ki,Jn.y=qt.y+mn*zt;break}ts(C,Et,zt),Or(C,Jn)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),_(!1),A(null),N(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[b,C,T,rn,ts,Or]),fe.useEffect(()=>{if(!$||!Y||!K)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),yt=Math.atan2(ot.y-K.textCenter.y,ot.x-K.textCenter.x)*(180/Math.PI)-K.initialAngle;let ht=K.originalRotation+yt;ht=(ht%360+360)%360,Te.shiftKey&&(ht=Math.round(ht/15)*15),ht=Math.round(ht*10)/10,Br(Y,ht)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),F(!1),Q(null),V(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[$,Y,K,Br]),fe.useEffect(()=>{if(!X||!Z||!re)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt);if(!vn[Z])return;const yt=re.corner,ht=Math.abs(ot.y-re.anchorPoint.y),Et=Math.abs(ot.x-re.anchorPoint.x);let zt,en;yt==="n"||yt==="s"?(zt=re.originalWidth,en=Math.max(500,ht)):yt==="e"||yt==="w"?(zt=Math.max(500,Et),en=re.originalHeight):(zt=Math.max(500,Et),en=Math.max(500,ht)),zt=Math.round(zt),en=Math.round(en);let mn;switch(yt){case"n":mn={x:re.anchorPoint.x-zt/2,y:re.anchorPoint.y-en};break;case"s":mn={x:re.anchorPoint.x-zt/2,y:re.anchorPoint.y};break;case"e":mn={x:re.anchorPoint.x,y:re.anchorPoint.y-en/2};break;case"w":mn={x:re.anchorPoint.x-zt,y:re.anchorPoint.y-en/2};break;default:mn={x:re.anchorPoint.x,y:re.anchorPoint.y};break}J(Z,zt,en),P(Z,mn)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),B(!1),G(null),z(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[X,Z,re,vn,J,P]),fe.useEffect(()=>{if(!ne||!ue||!be)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),yt=Math.atan2(ot.y-be.zoneCenter.y,ot.x-be.zoneCenter.x)*(180/Math.PI)-be.initialAngle;let ht=be.originalRotation+yt;ht=(ht%360+360)%360,Te.shiftKey&&(ht=Math.round(ht/15)*15),ht=Math.round(ht*10)/10,le(ue,ht)},Ve=()=>{const{addToHistory:Te}=tn.getState();Te(),it.current=Date.now(),se(!1),ie(null),Se(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[ne,ue,be,le]),fe.useEffect(()=>{if(!Ae||!we||!Fe)return;const he=Te=>{const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),{initialDistance:et,originalBounds:yt,corner:ht,anchorPoint:Et,originalChildren:zt}=Fe;let mn=Math.sqrt(Math.pow(ot.x-Et.x,2)+Math.pow(ot.y-Et.y,2))/et;mn<.1&&(mn=.1),mn>10&&(mn=10);let Yt=mn,qt=mn;ht==="n"||ht==="s"?Yt=1:(ht==="e"||ht==="w")&&(qt=1),xs(we,Yt,qt,Et,zt)},Ve=()=>{const{addToHistory:Te,refreshGroupBounds:Oe}=tn.getState();Oe(we),Te(),it.current=Date.now(),De(!1),Ie(null),Ye(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Ae,we,Fe,Rt,xs]),fe.useEffect(()=>{if(!Ze||!pt||!At)return;const he=Te=>{Te.preventDefault();const Oe=Te.touches?Te.touches[0].clientX:Te.clientX,nt=Te.touches?Te.touches[0].clientY:Te.clientY,ot=st(Oe,nt),{initialAngle:et,center:yt,originalChildren:ht}=At;let zt=Math.atan2(ot.y-yt.y,ot.x-yt.x)*(180/Math.PI)-et;Te.shiftKey&&(zt=Math.round(zt/15)*15),El(pt,zt,yt,ht)},Ve=()=>{const{addToHistory:Te,refreshGroupBounds:Oe}=tn.getState();Oe(pt),Te(),it.current=Date.now(),Qe(!1),gt(null),kt(null)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",he,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",he),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[Ze,pt,At,Rt,El]);const Vf=he=>{var Oe;if(xt&&_t&&(he.target===he.currentTarget||he.target.tagName==="svg"||he.target.closest("svg"))){he.preventDefault(),he.stopPropagation();const nt=Date.now(),ot=nt-Tt;if(Ot(nt),ot<300&&ot>0){sn();return}const et=he.clientX,yt=he.clientY,ht=st(et,yt),Et=nn[_t];if(Et){const zt=(ht.x-Et.position.x)/Et.width_mm,en=(ht.y-Et.position.y)/Et.height_mm,mn=Math.max(-.5,Math.min(1.5,zt)),Yt=Math.max(-.5,Math.min(1.5,en));Qt(mn,Yt)}return}if(Date.now()-it.current<100)return;(he.target===he.currentTarget||he.target.tagName==="svg"||((Oe=he.target.classList)==null?void 0:Oe.contains("court-canvas__surface"))||he.target.closest(".court-canvas__scroll-container")===he.target)&&(Nr(),In(),gi(),Gr(),Ni(),ii(),Oi(),Ri(),dt(null))},oi=()=>{a(he=>Math.min(he*1.25,5))},za=()=>{a(he=>Math.max(he/1.25,.25))},wn=()=>{a(1),u({x:0,y:0})},jd=he=>{if(he.ctrlKey||he.metaKey){he.preventDefault();const Ve=he.deltaY*-.002;a(Te=>Math.min(Math.max(Te+Te*Ve,.25),5))}else{he.preventDefault();const Ve=1;u(Te=>({x:Te.x-he.deltaX*Ve,y:Te.y-he.deltaY*Ve}))}},_r=he=>{(he.button===1||he.button===0&&g)&&(he.preventDefault(),he.stopPropagation(),h(!0),m({x:he.clientX-o.x,y:he.clientY-o.y}))},jl=he=>{const Ve=he[0].clientX-he[1].clientX,Te=he[0].clientY-he[1].clientY;return Math.sqrt(Ve*Ve+Te*Te)},Fa=he=>({x:(he[0].clientX+he[1].clientX)/2,y:(he[0].clientY+he[1].clientY)/2}),Ur=he=>{if(he.touches.length===2){he.preventDefault();const Ve=jl(he.touches),Te=Fa(he.touches);S({active:!0,mode:"pinch",initialDistance:Ve,initialZoom:s,initialPan:{...o},initialCenter:Te})}else he.touches.length===1&&(he.preventDefault(),S({active:!0,mode:"pan",initialDistance:0,initialZoom:s,initialPan:{...o},initialCenter:{x:he.touches[0].clientX,y:he.touches[0].clientY}}))},ia=he=>{if(he.touches.length===2&&w.active&&w.mode==="pinch"){he.preventDefault();const Te=jl(he.touches)/w.initialDistance;let Oe=w.initialZoom*Te;Oe=Math.min(Math.max(Oe,.25),5);const nt=Fa(he.touches),ot=nt.x-w.initialCenter.x,et=nt.y-w.initialCenter.y;a(Oe),u({x:w.initialPan.x+ot,y:w.initialPan.y+et})}else if(he.touches.length===1&&w.active&&w.mode==="pan"){he.preventDefault();const Ve=he.touches[0].clientX-w.initialCenter.x,Te=he.touches[0].clientY-w.initialCenter.y;u({x:w.initialPan.x+Ve,y:w.initialPan.y+Te})}},Sc=he=>{(he.touches.length===0||w.mode==="pinch"&&he.touches.length<2)&&S({active:!1,mode:null,initialDistance:0,initialZoom:1,initialPan:{x:0,y:0},initialCenter:{x:0,y:0}})};fe.useEffect(()=>{if(!d)return;const he=Te=>{u({x:Te.clientX-p.x,y:Te.clientY-p.y})},Ve=()=>{h(!1)};return window.addEventListener("mousemove",he),window.addEventListener("mouseup",Ve),()=>{window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",Ve)}},[d,p]),fe.useEffect(()=>{const he=Te=>{if(Te.code==="Space"&&!Te.repeat){if(Te.target.tagName==="INPUT"||Te.target.tagName==="TEXTAREA")return;Te.preventDefault(),v(!0)}if(Te.code==="Escape"&&xt&&_t&&(Te.preventDefault(),An()),Te.code==="Enter"&&xt&&_t&&(Te.preventDefault(),sn()),Te.code==="Escape"&&Qn&&(Te.preventDefault(),ra()),(Te.code==="Delete"||Te.code==="Backspace")&&xn&&Be!==null){if(Te.target.tagName==="INPUT"||Te.target.tagName==="TEXTAREA")return;const Oe=nn[xn];Oe&&(Oe.shapeType==="path"||Oe.shapeType==="blob")&&Oe.editPointsVisible&&(Te.preventDefault(),He(xn,Be),dt(null))}if((Te.metaKey||Te.ctrlKey)&&Te.key.toLowerCase()==="g"&&!Te.shiftKey){if(Te.target.tagName==="INPUT"||Te.target.tagName==="TEXTAREA")return;bn.length>=2&&(Te.preventDefault(),tn.getState().groupSelected())}if((Te.metaKey||Te.ctrlKey)&&Te.shiftKey&&Te.key.toLowerCase()==="g"){if(Te.target.tagName==="INPUT"||Te.target.tagName==="TEXTAREA")return;Fn&&(Te.preventDefault(),tn.getState().ungroup(Fn))}if((Te.metaKey||Te.ctrlKey)&&Te.key.toLowerCase()==="c"&&!Te.shiftKey){if(Te.target.tagName==="INPUT"||Te.target.tagName==="TEXTAREA")return;const Oe=tn.getState();(Oe.selectedGroupId||Oe.selectedElementIds.length>0||Oe.selectedShapeId||Oe.selectedTextId)&&(Te.preventDefault(),Oe.copySelection())}if((Te.metaKey||Te.ctrlKey)&&Te.key.toLowerCase()==="v"&&!Te.shiftKey){if(Te.target.tagName==="INPUT"||Te.target.tagName==="TEXTAREA")return;const Oe=tn.getState();Oe.clipboard&&(Te.preventDefault(),Oe.pasteClipboard())}},Ve=Te=>{Te.code==="Space"&&(v(!1),h(!1))};return window.addEventListener("keydown",he),window.addEventListener("keyup",Ve),()=>{window.removeEventListener("keydown",he),window.removeEventListener("keyup",Ve)}},[xt,_t,An,sn,xn,Be,nn,He,bn,Fn,Qn,ra]);const F0=he=>{if(xt&&_t){const Ve=st(he.clientX,he.clientY);lt(Ve)}},Qr=xt&&_t?nn[_t]:null,Ad=((is=Qr==null?void 0:Qr.controlPoints)==null?void 0:is.length)>0?Qr.controlPoints[Qr.controlPoints.length-1]:null;return l.jsxs("div",{className:`court-canvas ${xt?"court-canvas--drawing":""}`,onClick:Vf,onMouseMove:F0,children:[xt&&l.jsx("div",{className:"court-canvas__drawing-indicator",children:"Click to add points  Double-click or Enter to finish  Escape to cancel"}),l.jsxs("div",{className:"court-canvas__zoom-controls",children:[l.jsx("button",{onClick:oi,className:"court-canvas__zoom-btn",title:"Zoom In (Ctrl + Scroll)",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),l.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),l.jsx("path",{d:"m21 21-4.35-4.35"})]})}),l.jsx("button",{onClick:za,className:"court-canvas__zoom-btn",title:"Zoom Out (Ctrl + Scroll)",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),l.jsx("path",{d:"m21 21-4.35-4.35"})]})}),l.jsx("button",{onClick:wn,className:"court-canvas__zoom-btn",title:"Reset View",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 4v6h6"}),l.jsx("path",{d:"M23 20v-6h-6"}),l.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}),l.jsxs("span",{className:"court-canvas__zoom-level",title:"Scroll to pan, Ctrl+Scroll to zoom, Space+Drag to pan",children:[Math.round(s*100),"%"]})]}),l.jsx("div",{ref:i,className:"court-canvas__viewport",onWheel:jd,onMouseDown:_r,onTouchStart:Ur,onTouchMove:ia,onTouchEnd:Sc,style:{cursor:d?"grabbing":g?"grab":void 0,touchAction:"none"},children:l.jsx("div",{className:"court-canvas__transform-wrapper",style:{transform:`translate(${o.x}px, ${o.y}px) scale(${s})`,transformOrigin:"center center"},children:l.jsxs("svg",{ref:r,className:"court-canvas__svg",viewBox:`0 0 ${vt.width_mm} ${vt.length_mm}`,preserveAspectRatio:"xMidYMid meet",children:[l.jsx("defs",{children:vt.boundary&&vt.boundary.type!=="rectangle"&&vt.boundary.controlPoints&&l.jsx("clipPath",{id:"surface-boundary-clip",children:l.jsx("path",{d:pS(vt.boundary,vt.width_mm,vt.length_mm)})})}),l.jsx("g",{clipPath:vt.boundary&&vt.boundary.type!=="rectangle"&&vt.boundary.controlPoints?"url(#surface-boundary-clip)":void 0,children:l.jsx("rect",{x:"0",y:"0",width:vt.width_mm,height:vt.length_mm,fill:vt.color.hex,className:"court-canvas__surface"})}),vt.boundary&&vt.boundary.type!=="rectangle"&&vt.boundary.controlPoints&&l.jsx("path",{d:pS(vt.boundary,vt.width_mm,vt.length_mm),fill:"none",stroke:"#94a3b8",strokeWidth:"60",strokeDasharray:"300 200",pointerEvents:"none"}),Object.values(vn).map(he=>{if(he.visible===!1)return null;const Ve=mt(he,he.id);return l.jsx(ZF,{zone:Ve,isSelected:he.id===Tr,zoom:s,onMouseDown:Te=>uo(Te,Ve.id),onTouchStart:Te=>uo(Te,Ve.id),onDoubleClick:Te=>Uf(Te,Ve.id),onScaleStart:(Te,Oe)=>Hf(Te,Ve.id,Oe),onRotateStart:Te=>On(Te,Ve.id)},he.id)}),Cn.map(he=>{if(he.startsWith("court-")){const Ve=Lt[he];if(!Ve||Ve.visible===!1)return null;const Te=he===wt||bn.includes(he);return l.jsx(mS,{court:mt(Ve,he),isSelected:Te,onMouseDown:Oe=>jt(Oe,he),onTouchStart:Oe=>jt(Oe,he),onDoubleClick:Oe=>pn(Oe,he),svgRef:r},he)}if(he.startsWith("track-")){const Ve=It[he];if(!Ve||Ve.visible===!1)return null;const Te=he===En||bn.includes(he);return l.jsx(lS,{track:mt(Ve,he),isSelected:Te,onMouseDown:Oe=>Ft(Oe,he),onTouchStart:Oe=>Ft(Oe,he),onDoubleClick:Oe=>Bt(Oe,he),svgRef:r},he)}if(he.startsWith("motif-")){const Ve=$t[he];if(!Ve||Ve.visible===!1)return null;const Te=he===Nn||bn.includes(he);return l.jsx(cS,{motif:mt(Ve,he),isSelected:Te,zoom:s,onMouseDown:Oe=>Vt(Oe,he),onTouchStart:Oe=>Vt(Oe,he),onDoubleClick:Oe=>Tn(Oe,he),onScaleStart:(Oe,nt)=>Vn(Oe,he,nt),onRotateStart:Oe=>Bn(Oe,he)},he)}if(he.startsWith("shape-")){const Ve=nn[he];if(!Ve||Ve.visible===!1)return null;const Te=mt(Ve,he),Oe=he===xn||bn.includes(he);return Te.shapeType==="blob"?l.jsx(dS,{shape:Te,isSelected:Oe,zoom:s,onMouseDown:nt=>on(nt,he),onTouchStart:nt=>on(nt,he),onDoubleClick:nt=>Xt(nt,he),onScaleStart:(nt,ot)=>rs(nt,he,ot),onRotateStart:nt=>Mi(nt,he),onPointDrag:(nt,ot,et)=>Ce(he,nt,ot,et),onHandleDrag:(nt,ot,et,yt)=>Je(he,nt,ot,et,yt),onDragEnd:()=>rt(),selectedPointIndex:he===xn?Be:null,onPointSelect:nt=>dt(nt),onPointDelete:nt=>He(he,nt)},he):Te.shapeType==="path"?l.jsx(hS,{shape:Te,isSelected:Oe,zoom:s,onMouseDown:nt=>on(nt,he),onTouchStart:nt=>on(nt,he),onDoubleClick:nt=>Xt(nt,he),onScaleStart:(nt,ot)=>rs(nt,he,ot),onRotateStart:nt=>Mi(nt,he),onPointDrag:(nt,ot,et)=>rr(he,nt,ot,et),onHandleDrag:(nt,ot,et,yt)=>ns(he,nt,ot,et,yt),onDragEnd:()=>Ut(),selectedPointIndex:he===xn?Be:null,onPointSelect:nt=>dt(nt),onPointDelete:nt=>He(he,nt),onAddPoint:(nt,ot,et)=>St(he,nt,ot,et)},he):l.jsx(uS,{shape:Te,isSelected:Oe,zoom:s,onMouseDown:nt=>on(nt,he),onTouchStart:nt=>on(nt,he),onDoubleClick:nt=>Xt(nt,he),onScaleStart:(nt,ot)=>rs(nt,he,ot),onRotateStart:nt=>Mi(nt,he)},he)}if(he.startsWith("text-")){const Ve=rn[he];if(!Ve||Ve.visible===!1)return null;const Te=mt(Ve,he);return l.jsx(fS,{text:Te,isSelected:he===xr||bn.includes(he),zoom:s,onMouseDown:Oe=>kc(Oe,he),onTouchStart:Oe=>kc(Oe,he),onDoubleClick:Oe=>Ed(Oe,he),onScaleStart:(Oe,nt)=>Bf(Oe,he,nt),onRotateStart:Oe=>Tl(Oe,he)},he)}if(he.startsWith("group-")){const Ve=Rt[he];if(!Ve||Ve.visible===!1)return null;const Te=(Re==null?void 0:Re.id)===he?`translate(${Re.offset.x}, ${Re.offset.y})`:void 0;return l.jsx("g",{transform:Te,children:Ve.childIds.map(Oe=>{if(Oe.startsWith("shape-")){const nt=nn[Oe];if(!nt||nt.visible===!1)return null;const ot=Oe===xn||bn.includes(Oe);return nt.shapeType==="blob"?l.jsx(dS,{shape:nt,isSelected:ot,zoom:s,onMouseDown:et=>on(et,Oe),onTouchStart:et=>on(et,Oe),onDoubleClick:et=>Xt(et,Oe),onScaleStart:(et,yt)=>rs(et,Oe,yt),onRotateStart:et=>Mi(et,Oe),onPointDrag:(et,yt,ht)=>Ce(Oe,et,yt,ht),onHandleDrag:(et,yt,ht,Et)=>Je(Oe,et,yt,ht,Et),onDragEnd:()=>rt(),selectedPointIndex:Oe===xn?Be:null,onPointSelect:et=>dt(et),onPointDelete:et=>He(Oe,et)},Oe):nt.shapeType==="path"?l.jsx(hS,{shape:nt,isSelected:ot,zoom:s,onMouseDown:et=>on(et,Oe),onTouchStart:et=>on(et,Oe),onDoubleClick:et=>Xt(et,Oe),onScaleStart:(et,yt)=>rs(et,Oe,yt),onRotateStart:et=>Mi(et,Oe),onPointDrag:(et,yt,ht)=>rr(Oe,et,yt,ht),onHandleDrag:(et,yt,ht,Et)=>ns(Oe,et,yt,ht,Et),onDragEnd:()=>Ut(),selectedPointIndex:Oe===xn?Be:null,onPointSelect:et=>dt(et),onPointDelete:et=>He(Oe,et),onAddPoint:(et,yt,ht)=>St(Oe,et,yt,ht)},Oe):l.jsx(uS,{shape:nt,isSelected:ot,zoom:s,onMouseDown:et=>on(et,Oe),onTouchStart:et=>on(et,Oe),onDoubleClick:et=>Xt(et,Oe),onScaleStart:(et,yt)=>rs(et,Oe,yt),onRotateStart:et=>Mi(et,Oe)},Oe)}if(Oe.startsWith("text-")){const nt=rn[Oe];return!nt||nt.visible===!1?null:l.jsx(fS,{text:nt,isSelected:Oe===xr||bn.includes(Oe),zoom:s,onMouseDown:ot=>kc(ot,Oe),onTouchStart:ot=>kc(ot,Oe),onDoubleClick:ot=>Ed(ot,Oe),onScaleStart:(ot,et)=>Bf(ot,Oe,et),onRotateStart:ot=>Tl(ot,Oe)},Oe)}if(Oe.startsWith("court-")){const nt=Lt[Oe];if(!nt||nt.visible===!1)return null;const ot=Oe===wt||bn.includes(Oe);return l.jsx(mS,{court:nt,isSelected:ot,onMouseDown:et=>jt(et,Oe),onTouchStart:et=>jt(et,Oe),onDoubleClick:et=>pn(et,Oe),svgRef:r},Oe)}if(Oe.startsWith("track-")){const nt=It[Oe];if(!nt||nt.visible===!1)return null;const ot=Oe===En||bn.includes(Oe);return l.jsx(lS,{track:nt,isSelected:ot,onMouseDown:et=>Ft(et,Oe),onTouchStart:et=>Ft(et,Oe),onDoubleClick:et=>Bt(et,Oe),svgRef:r},Oe)}if(Oe.startsWith("motif-")){const nt=$t[Oe];if(!nt||nt.visible===!1)return null;const ot=Oe===Nn||bn.includes(Oe);return l.jsx(cS,{motif:nt,isSelected:ot,zoom:s,onMouseDown:et=>Vt(et,Oe),onTouchStart:et=>Vt(et,Oe),onDoubleClick:et=>Tn(et,Oe),onScaleStart:(et,yt)=>Vn(et,Oe,yt),onRotateStart:et=>Bn(et,Oe)},Oe)}return null})},he)}return null}),Object.keys(Rt).map(he=>l.jsx(JF,{groupId:he,zoom:s,screenToSVG:st,onDragStart:(Ve,Te)=>{O(Te),ze(Ve),k(!0)},onScaleStart:(Ve,Te,Oe)=>Td(Ve,Te,Oe),onRotateStart:(Ve,Te)=>Wf(Ve,Te)},he)),xt&&Qr&&Ad&&at&&l.jsx("line",{x1:Qr.position.x+Ad.x*Qr.width_mm,y1:Qr.position.y+Ad.y*Qr.height_mm,x2:at.x,y2:at.y,stroke:"#3b82f6",strokeWidth:"50",strokeDasharray:"100 100",opacity:"0.6",pointerEvents:"none"}),xt&&Qr&&(($o=Qr.controlPoints)==null?void 0:$o.map((he,Ve)=>l.jsx("circle",{cx:Qr.position.x+he.x*Qr.width_mm,cy:Qr.position.y+he.y*Qr.height_mm,r:"80",fill:"#3b82f6",stroke:"#fff",strokeWidth:"20",pointerEvents:"none"},`preview-point-${Ve}`)))]})})}),l.jsxs("div",{className:"court-canvas__info",children:[l.jsxs("span",{children:[(vt.width_mm/1e3).toFixed(1),"m  ",(vt.length_mm/1e3).toFixed(1),"m"]}),or&&l.jsxs("span",{className:"court-canvas__grid-indicator",children:["Grid: ",lr,"mm"]})]}),Cn.length===0&&l.jsxs("div",{className:"court-canvas__empty-state",children:[l.jsx("div",{className:"court-canvas__empty-icon",children:l.jsxs("svg",{width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("path",{d:"M12 2L14.4 8.4L21 9.6L16.2 14.4L17.6 21L12 17.6L6.4 21L7.8 14.4L3 9.6L9.6 8.4L12 2Z",fill:"rgba(255,255,255,0.15)",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),l.jsx("circle",{cx:"19",cy:"5",r:"1.5",fill:"currentColor",opacity:"0.6"}),l.jsx("circle",{cx:"5",cy:"18",r:"1",fill:"currentColor",opacity:"0.4"}),l.jsx("circle",{cx:"20",cy:"16",r:"0.8",fill:"currentColor",opacity:"0.5"})]})}),l.jsx("h3",{className:"court-canvas__empty-title",children:"Your canvas is ready"}),l.jsx("p",{className:"court-canvas__empty-text",children:"Design your perfect TPV surface in minutes"}),l.jsxs("div",{className:"court-canvas__empty-hints",children:[l.jsxs("div",{className:"court-canvas__hint",children:[l.jsx("span",{className:"court-canvas__hint-icon",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]})}),l.jsxs("span",{children:["Add ",l.jsx("strong",{children:"Courts"}),", ",l.jsx("strong",{children:"Tracks"}),", ",l.jsx("strong",{children:"Shapes"})," or ",l.jsx("strong",{children:"Designs"})]})]}),l.jsxs("div",{className:"court-canvas__hint",children:[l.jsx("span",{className:"court-canvas__hint-icon",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M12 5v14M5 12h14"})})}),l.jsx("span",{children:"Click elements in the library to place them"})]}),l.jsxs("div",{className:"court-canvas__hint",children:[l.jsx("span",{className:"court-canvas__hint-icon",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M5 9l4 4-4 4"}),l.jsx("path",{d:"M12 4h7a2 2 0 012 2v12a2 2 0 01-2 2h-7"})]})}),l.jsx("span",{children:"Arrange, customise colours and export"})]})]})]})]})});function mS({court:e,isSelected:t,onMouseDown:n,onTouchStart:r,onDoubleClick:i,svgRef:s}){var h;const{markings:a,zones:o}=wF(e),u=((h=e.courtSurfaceColor)==null?void 0:h.hex)||null,d=`court-clip-${e.id}`;return l.jsxs("g",{className:`court-canvas__court ${t?"court-canvas__court--selected":""}`,transform:kF(e),style:{cursor:"move"},children:[l.jsx("defs",{children:l.jsx("clipPath",{id:d,children:l.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm})})}),u&&l.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:u,className:"court-canvas__court-surface"}),l.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:"none",pointerEvents:"all",onMouseDown:n,onTouchStart:r,onDoubleClick:i,style:{cursor:"move"}}),l.jsx("g",{clipPath:`url(#${d})`,children:o.map(p=>l.jsx(t7,{zone:p},p.id))}),a.map(p=>l.jsx(n7,{marking:p},p.id)),t&&l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:"0",y:"0",width:e.template.dimensions.width_mm,height:e.template.dimensions.length_mm,fill:"none",stroke:"#007bff",strokeWidth:"100",strokeDasharray:"400 400",className:"court-canvas__selection-outline"}),l.jsx(SF,{court:e,svgRef:s})]})]})}function t7({zone:e}){switch(e.type){case"rect":return l.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill,pointerEvents:"none"});case"circle":return l.jsx("circle",{cx:e.cx,cy:e.cy,r:e.r,fill:e.fill,pointerEvents:"none"});case"polygon":return l.jsx("polygon",{points:e.points,fill:e.fill,pointerEvents:"none"});case"path":return l.jsx("path",{d:e.d,fill:e.fill,pointerEvents:"none"});default:return null}}function n7({marking:e}){switch(e.type){case"line":return l.jsx("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.stroke,strokeWidth:e.strokeWidth});case"rect":return l.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"circle":return l.jsx("circle",{cx:e.cx,cy:e.cy,r:e.r,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"path":return l.jsx("path",{d:e.d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});case"polyline":return l.jsx("polyline",{points:e.points,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill});default:return null}}const aN={"track-flexible":{id:"track-flexible",name:"Running Track",type:"running-track",trackType:"curved",standard:"Flexible Design",category:"track",description:"Flexible running track - adjust size, lanes, and corner radius to fit your surface",parameters:{numLanes:4,laneWidth_mm:1220,width_mm:25e3,height_mm:15e3,cornerRadius:{topLeft:3e3,topRight:3e3,bottomLeft:3e3,bottomRight:3e3},lineWidth_mm:50,startingBoxes:{enabled:!1,depth_mm:400,lineWidth_mm:50}},defaultLineColor:"RH31",defaultTrackSurfaceColor:"RH01",calculatedDimensions:{totalWidth_mm:25e3,totalLength_mm:15e3}},"track-straight":{id:"track-straight",name:"Straight Track",type:"running-track",trackType:"straight",standard:"Sprint Track",category:"track",description:"Straight sprint track - perfect for 60m, 100m, or custom length sprints",parameters:{numLanes:6,laneWidth_mm:1220,width_mm:7320,height_mm:1e5,cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},lineWidth_mm:50,startingBoxes:{enabled:!1,depth_mm:400,lineWidth_mm:50}},defaultLineColor:"RH31",defaultTrackSurfaceColor:"RH01",calculatedDimensions:{totalWidth_mm:7320,totalLength_mm:1e5}}};function r7(){return Object.values(aN)}function i7(e){return aN[e]||null}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */var jy,gS;function yS(){if(gS)return jy;gS=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:a,create:o}=Object,{apply:u,construct:d}=typeof Reflect<"u"&&Reflect;s||(s=function(Me){return Me}),a||(a=function(Me){return Me}),u||(u=function(Me,Xe){for(var $e=arguments.length,c=new Array($e>2?$e-2:0),f=2;f<$e;f++)c[f-2]=arguments[f];return Me.apply(Xe,c)}),d||(d=function(Me){for(var Xe=arguments.length,$e=new Array(Xe>1?Xe-1:0),c=1;c<Xe;c++)$e[c-1]=arguments[c];return new Me(...$e)});const h=D(Array.prototype.forEach),p=D(Array.prototype.lastIndexOf),m=D(Array.prototype.pop),g=D(Array.prototype.push),v=D(Array.prototype.splice),w=D(String.prototype.toLowerCase),S=D(String.prototype.toString),x=D(String.prototype.match),k=D(String.prototype.replace),j=D(String.prototype.indexOf),O=D(String.prototype.trim),I=D(Object.prototype.hasOwnProperty),E=D(RegExp.prototype.test),U=R(TypeError);function D(ye){return function(Me){Me instanceof RegExp&&(Me.lastIndex=0);for(var Xe=arguments.length,$e=new Array(Xe>1?Xe-1:0),c=1;c<Xe;c++)$e[c-1]=arguments[c];return u(ye,Me,$e)}}function R(ye){return function(){for(var Me=arguments.length,Xe=new Array(Me),$e=0;$e<Me;$e++)Xe[$e]=arguments[$e];return d(ye,Xe)}}function W(ye,Me){let Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w;t&&t(ye,null);let $e=Me.length;for(;$e--;){let c=Me[$e];if(typeof c=="string"){const f=Xe(c);f!==c&&(n(Me)||(Me[$e]=f),c=f)}ye[c]=!0}return ye}function ce(ye){for(let Me=0;Me<ye.length;Me++)I(ye,Me)||(ye[Me]=null);return ye}function te(ye){const Me=o(null);for(const[Xe,$e]of e(ye))I(ye,Xe)&&(Array.isArray($e)?Me[Xe]=ce($e):$e&&typeof $e=="object"&&$e.constructor===Object?Me[Xe]=te($e):Me[Xe]=$e);return Me}function me(ye,Me){for(;ye!==null;){const $e=i(ye,Me);if($e){if($e.get)return D($e.get);if(typeof $e.value=="function")return D($e.value)}ye=r(ye)}function Xe(){return null}return Xe}const H=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ge=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ee=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ke=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ze=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xe=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Re=s(["#text"]),_e=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Pe=s(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),it=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),tt=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ue=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ut=a(/<%[\w\W]*|[\w\W]*%>/gm),de=a(/\$\{[\w\W]*/gm),oe=a(/^data-[\-\w.\u00B7-\uFFFF]+$/),We=a(/^aria-[\-\w]+$/),Ne=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ft=a(/^(?:\w+script|data):/i),Pt=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ct=a(/^html$/i),q=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var qe=Object.freeze({__proto__:null,ARIA_ATTR:We,ATTR_WHITESPACE:Pt,CUSTOM_ELEMENT:q,DATA_ATTR:oe,DOCTYPE_NAME:Ct,ERB_EXPR:ut,IS_ALLOWED_URI:Ne,IS_SCRIPT_OR_DATA:ft,MUSTACHE_EXPR:Ue,TMPLIT_EXPR:de});const ae={element:1,text:3,progressingInstruction:7,comment:8,document:9},M=function(){return typeof window>"u"?null:window},L=function(Me,Xe){if(typeof Me!="object"||typeof Me.createPolicy!="function")return null;let $e=null;const c="data-tt-policy-suffix";Xe&&Xe.hasAttribute(c)&&($e=Xe.getAttribute(c));const f="dompurify"+($e?"#"+$e:"");try{return Me.createPolicy(f,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},ee=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function pe(){let ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M();const Me=Ut=>pe(Ut);if(Me.version="3.3.0",Me.removed=[],!ye||!ye.document||ye.document.nodeType!==ae.document||!ye.Element)return Me.isSupported=!1,Me;let{document:Xe}=ye;const $e=Xe,c=$e.currentScript,{DocumentFragment:f,HTMLTemplateElement:b,Node:_,Element:C,NodeFilter:A,NamedNodeMap:T=ye.NamedNodeMap||ye.MozNamedAttrMap,HTMLFormElement:N,DOMParser:$,trustedTypes:F}=ye,Y=C.prototype,Q=me(Y,"cloneNode"),K=me(Y,"remove"),V=me(Y,"nextSibling"),X=me(Y,"childNodes"),B=me(Y,"parentNode");if(typeof b=="function"){const Ut=Xe.createElement("template");Ut.content&&Ut.content.ownerDocument&&(Xe=Ut.content.ownerDocument)}let Z,G="";const{implementation:re,createNodeIterator:z,createDocumentFragment:ne,getElementsByTagName:se}=Xe,{importNode:ue}=$e;let ie=ee();Me.isSupported=typeof e=="function"&&typeof B=="function"&&re&&re.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:Se,TMPLIT_EXPR:Ae,DATA_ATTR:De,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:Ie,ATTR_WHITESPACE:Fe,CUSTOM_ELEMENT:Ye}=qe;let{IS_ALLOWED_URI:Ze}=qe,Qe=null;const pt=W({},[...H,...ge,...Ee,...ze,...Re]);let gt=null;const At=W({},[..._e,...Pe,...it,...tt]);let kt=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),at=null,lt=null;const Tt=Object.seal(o(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ot=!0,Be=!0,dt=!1,vt=!0,Lt=!1,It=!0,$t=!1,nn=!1,rn=!1,vn=!1,Cn=!1,wt=!1,En=!0,Nn=!1;const xn="user-content-";let xr=!0,Tr=!1,or={},lr=null;const ur=W({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Nr=null;const Vr=W({},["audio","video","img","source","image","track"]);let In=null;const Kn=W({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gi="http://www.w3.org/1998/Math/MathML",_i="http://www.w3.org/2000/svg",Gr="http://www.w3.org/1999/xhtml";let yi=Gr,Ni=!1,ri=null;const ii=W({},[gi,_i,Gr],S);let qr=W({},["mi","mo","mn","ms","mtext"]),si=W({},["annotation-xml"]);const tr=W({},["title","style","font","a","script"]);let zn=null;const Gt=["application/xhtml+xml","text/html"],dr="text/html";let kn=null,nr=null;const Or=Xe.createElement("form"),ts=function(He){return He instanceof RegExp||He instanceof Function},Br=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(nr&&nr===He)){if((!He||typeof He!="object")&&(He={}),He=te(He),zn=Gt.indexOf(He.PARSER_MEDIA_TYPE)===-1?dr:He.PARSER_MEDIA_TYPE,kn=zn==="application/xhtml+xml"?S:w,Qe=I(He,"ALLOWED_TAGS")?W({},He.ALLOWED_TAGS,kn):pt,gt=I(He,"ALLOWED_ATTR")?W({},He.ALLOWED_ATTR,kn):At,ri=I(He,"ALLOWED_NAMESPACES")?W({},He.ALLOWED_NAMESPACES,S):ii,In=I(He,"ADD_URI_SAFE_ATTR")?W(te(Kn),He.ADD_URI_SAFE_ATTR,kn):Kn,Nr=I(He,"ADD_DATA_URI_TAGS")?W(te(Vr),He.ADD_DATA_URI_TAGS,kn):Vr,lr=I(He,"FORBID_CONTENTS")?W({},He.FORBID_CONTENTS,kn):ur,at=I(He,"FORBID_TAGS")?W({},He.FORBID_TAGS,kn):te({}),lt=I(He,"FORBID_ATTR")?W({},He.FORBID_ATTR,kn):te({}),or=I(He,"USE_PROFILES")?He.USE_PROFILES:!1,Ot=He.ALLOW_ARIA_ATTR!==!1,Be=He.ALLOW_DATA_ATTR!==!1,dt=He.ALLOW_UNKNOWN_PROTOCOLS||!1,vt=He.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Lt=He.SAFE_FOR_TEMPLATES||!1,It=He.SAFE_FOR_XML!==!1,$t=He.WHOLE_DOCUMENT||!1,vn=He.RETURN_DOM||!1,Cn=He.RETURN_DOM_FRAGMENT||!1,wt=He.RETURN_TRUSTED_TYPE||!1,rn=He.FORCE_BODY||!1,En=He.SANITIZE_DOM!==!1,Nn=He.SANITIZE_NAMED_PROPS||!1,xr=He.KEEP_CONTENT!==!1,Tr=He.IN_PLACE||!1,Ze=He.ALLOWED_URI_REGEXP||Ne,yi=He.NAMESPACE||Gr,qr=He.MATHML_TEXT_INTEGRATION_POINTS||qr,si=He.HTML_INTEGRATION_POINTS||si,kt=He.CUSTOM_ELEMENT_HANDLING||{},He.CUSTOM_ELEMENT_HANDLING&&ts(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kt.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&ts(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kt.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(kt.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Lt&&(Be=!1),Cn&&(vn=!0),or&&(Qe=W({},Re),gt=[],or.html===!0&&(W(Qe,H),W(gt,_e)),or.svg===!0&&(W(Qe,ge),W(gt,Pe),W(gt,tt)),or.svgFilters===!0&&(W(Qe,Ee),W(gt,Pe),W(gt,tt)),or.mathMl===!0&&(W(Qe,ze),W(gt,it),W(gt,tt))),He.ADD_TAGS&&(typeof He.ADD_TAGS=="function"?Tt.tagCheck=He.ADD_TAGS:(Qe===pt&&(Qe=te(Qe)),W(Qe,He.ADD_TAGS,kn))),He.ADD_ATTR&&(typeof He.ADD_ATTR=="function"?Tt.attributeCheck=He.ADD_ATTR:(gt===At&&(gt=te(gt)),W(gt,He.ADD_ATTR,kn))),He.ADD_URI_SAFE_ATTR&&W(In,He.ADD_URI_SAFE_ATTR,kn),He.FORBID_CONTENTS&&(lr===ur&&(lr=te(lr)),W(lr,He.FORBID_CONTENTS,kn)),xr&&(Qe["#text"]=!0),$t&&W(Qe,["html","head","body"]),Qe.table&&(W(Qe,["tbody"]),delete at.tbody),He.TRUSTED_TYPES_POLICY){if(typeof He.TRUSTED_TYPES_POLICY.createHTML!="function")throw U('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof He.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw U('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Z=He.TRUSTED_TYPES_POLICY,G=Z.createHTML("")}else Z===void 0&&(Z=L(F,c)),Z!==null&&typeof G=="string"&&(G=Z.createHTML(""));s&&s(He),nr=He}},bi=W({},[...ge,...Ee,...ke]),y=W({},[...ze,...xe]),P=function(He){let St=B(He);(!St||!St.tagName)&&(St={namespaceURI:yi,tagName:"template"});const Rt=w(He.tagName),Fn=w(St.tagName);return ri[He.namespaceURI]?He.namespaceURI===_i?St.namespaceURI===Gr?Rt==="svg":St.namespaceURI===gi?Rt==="svg"&&(Fn==="annotation-xml"||qr[Fn]):!!bi[Rt]:He.namespaceURI===gi?St.namespaceURI===Gr?Rt==="math":St.namespaceURI===_i?Rt==="math"&&si[Fn]:!!y[Rt]:He.namespaceURI===Gr?St.namespaceURI===_i&&!si[Fn]||St.namespaceURI===gi&&!qr[Fn]?!1:!y[Rt]&&(tr[Rt]||!bi[Rt]):!!(zn==="application/xhtml+xml"&&ri[He.namespaceURI]):!1},J=function(He){g(Me.removed,{element:He});try{B(He).removeChild(He)}catch{K(He)}},le=function(He,St){try{g(Me.removed,{attribute:St.getAttributeNode(He),from:St})}catch{g(Me.removed,{attribute:null,from:St})}if(St.removeAttribute(He),He==="is")if(vn||Cn)try{J(St)}catch{}else try{St.setAttribute(He,"")}catch{}},Ce=function(He){let St=null,Rt=null;if(rn)He="<remove></remove>"+He;else{const Qn=x(He,/^[\r\n\t ]+/);Rt=Qn&&Qn[0]}zn==="application/xhtml+xml"&&yi===Gr&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");const Fn=Z?Z.createHTML(He):He;if(yi===Gr)try{St=new $().parseFromString(Fn,zn)}catch{}if(!St||!St.documentElement){St=re.createDocument(yi,"template",null);try{St.documentElement.innerHTML=Ni?G:Fn}catch{}}const bn=St.body||St.documentElement;return He&&Rt&&bn.insertBefore(Xe.createTextNode(Rt),bn.childNodes[0]||null),yi===Gr?se.call(St,$t?"html":"body")[0]:$t?St.documentElement:bn},Je=function(He){return z.call(He.ownerDocument||He,He,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},rt=function(He){return He instanceof N&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof T)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function"||typeof He.hasChildNodes!="function")},xt=function(He){return typeof _=="function"&&He instanceof _};function _t(Ut,He,St){h(Ut,Rt=>{Rt.call(Me,He,St,nr)})}const Qt=function(He){let St=null;if(_t(ie.beforeSanitizeElements,He,null),rt(He))return J(He),!0;const Rt=kn(He.nodeName);if(_t(ie.uponSanitizeElement,He,{tagName:Rt,allowedTags:Qe}),It&&He.hasChildNodes()&&!xt(He.firstElementChild)&&E(/<[/\w!]/g,He.innerHTML)&&E(/<[/\w!]/g,He.textContent)||He.nodeType===ae.progressingInstruction||It&&He.nodeType===ae.comment&&E(/<[/\w]/g,He.data))return J(He),!0;if(!(Tt.tagCheck instanceof Function&&Tt.tagCheck(Rt))&&(!Qe[Rt]||at[Rt])){if(!at[Rt]&&An(Rt)&&(kt.tagNameCheck instanceof RegExp&&E(kt.tagNameCheck,Rt)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(Rt)))return!1;if(xr&&!lr[Rt]){const Fn=B(He)||He.parentNode,bn=X(He)||He.childNodes;if(bn&&Fn){const Qn=bn.length;for(let Yr=Qn-1;Yr>=0;--Yr){const Oi=Q(bn[Yr],!0);Oi.__removalCount=(He.__removalCount||0)+1,Fn.insertBefore(Oi,V(He))}}}return J(He),!0}return He instanceof C&&!P(He)||(Rt==="noscript"||Rt==="noembed"||Rt==="noframes")&&E(/<\/no(script|embed|frames)/i,He.innerHTML)?(J(He),!0):(Lt&&He.nodeType===ae.text&&(St=He.textContent,h([be,Se,Ae],Fn=>{St=k(St,Fn," ")}),He.textContent!==St&&(g(Me.removed,{element:He.cloneNode()}),He.textContent=St)),_t(ie.afterSanitizeElements,He,null),!1)},sn=function(He,St,Rt){if(En&&(St==="id"||St==="name")&&(Rt in Xe||Rt in Or))return!1;if(!(Be&&!lt[St]&&E(De,St))){if(!(Ot&&E(we,St))){if(!(Tt.attributeCheck instanceof Function&&Tt.attributeCheck(St,He))){if(!gt[St]||lt[St]){if(!(An(He)&&(kt.tagNameCheck instanceof RegExp&&E(kt.tagNameCheck,He)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(He))&&(kt.attributeNameCheck instanceof RegExp&&E(kt.attributeNameCheck,St)||kt.attributeNameCheck instanceof Function&&kt.attributeNameCheck(St,He))||St==="is"&&kt.allowCustomizedBuiltInElements&&(kt.tagNameCheck instanceof RegExp&&E(kt.tagNameCheck,Rt)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(Rt))))return!1}else if(!In[St]){if(!E(Ze,k(Rt,Fe,""))){if(!((St==="src"||St==="xlink:href"||St==="href")&&He!=="script"&&j(Rt,"data:")===0&&Nr[He])){if(!(dt&&!E(Ie,k(Rt,Fe,"")))){if(Rt)return!1}}}}}}}return!0},An=function(He){return He!=="annotation-xml"&&x(He,Ye)},rr=function(He){_t(ie.beforeSanitizeAttributes,He,null);const{attributes:St}=He;if(!St||rt(He))return;const Rt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gt,forceKeepAttr:void 0};let Fn=St.length;for(;Fn--;){const bn=St[Fn],{name:Qn,namespaceURI:Yr,value:Oi}=bn,na=kn(Qn),ra=Oi;let cr=Qn==="value"?ra:O(ra);if(Rt.attrName=na,Rt.attrValue=cr,Rt.keepAttr=!0,Rt.forceKeepAttr=void 0,_t(ie.uponSanitizeAttribute,He,Rt),cr=Rt.attrValue,Nn&&(na==="id"||na==="name")&&(le(Qn,He),cr=xn+cr),It&&E(/((--!?|])>)|<\/(style|title|textarea)/i,cr)){le(Qn,He);continue}if(na==="attributename"&&x(cr,"href")){le(Qn,He);continue}if(Rt.forceKeepAttr)continue;if(!Rt.keepAttr){le(Qn,He);continue}if(!vt&&E(/\/>/i,cr)){le(Qn,He);continue}Lt&&h([be,Se,Ae],ai=>{cr=k(cr,ai," ")});const Ri=kn(He.nodeName);if(!sn(Ri,na,cr)){le(Qn,He);continue}if(Z&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!Yr)switch(F.getAttributeType(Ri,na)){case"TrustedHTML":{cr=Z.createHTML(cr);break}case"TrustedScriptURL":{cr=Z.createScriptURL(cr);break}}if(cr!==ra)try{Yr?He.setAttributeNS(Yr,Qn,cr):He.setAttribute(Qn,cr),rt(He)?J(He):m(Me.removed)}catch{le(Qn,He)}}_t(ie.afterSanitizeAttributes,He,null)},ns=function Ut(He){let St=null;const Rt=Je(He);for(_t(ie.beforeSanitizeShadowDOM,He,null);St=Rt.nextNode();)_t(ie.uponSanitizeShadowNode,St,null),Qt(St),rr(St),St.content instanceof f&&Ut(St.content);_t(ie.afterSanitizeShadowDOM,He,null)};return Me.sanitize=function(Ut){let He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=null,Rt=null,Fn=null,bn=null;if(Ni=!Ut,Ni&&(Ut="<!-->"),typeof Ut!="string"&&!xt(Ut))if(typeof Ut.toString=="function"){if(Ut=Ut.toString(),typeof Ut!="string")throw U("dirty is not a string, aborting")}else throw U("toString is not a function");if(!Me.isSupported)return Ut;if(nn||Br(He),Me.removed=[],typeof Ut=="string"&&(Tr=!1),Tr){if(Ut.nodeName){const Oi=kn(Ut.nodeName);if(!Qe[Oi]||at[Oi])throw U("root node is forbidden and cannot be sanitized in-place")}}else if(Ut instanceof _)St=Ce("<!---->"),Rt=St.ownerDocument.importNode(Ut,!0),Rt.nodeType===ae.element&&Rt.nodeName==="BODY"||Rt.nodeName==="HTML"?St=Rt:St.appendChild(Rt);else{if(!vn&&!Lt&&!$t&&Ut.indexOf("<")===-1)return Z&&wt?Z.createHTML(Ut):Ut;if(St=Ce(Ut),!St)return vn?null:wt?G:""}St&&rn&&J(St.firstChild);const Qn=Je(Tr?Ut:St);for(;Fn=Qn.nextNode();)Qt(Fn),rr(Fn),Fn.content instanceof f&&ns(Fn.content);if(Tr)return Ut;if(vn){if(Cn)for(bn=ne.call(St.ownerDocument);St.firstChild;)bn.appendChild(St.firstChild);else bn=St;return(gt.shadowroot||gt.shadowrootmode)&&(bn=ue.call($e,bn,!0)),bn}let Yr=$t?St.outerHTML:St.innerHTML;return $t&&Qe["!doctype"]&&St.ownerDocument&&St.ownerDocument.doctype&&St.ownerDocument.doctype.name&&E(Ct,St.ownerDocument.doctype.name)&&(Yr="<!DOCTYPE "+St.ownerDocument.doctype.name+`>
`+Yr),Lt&&h([be,Se,Ae],Oi=>{Yr=k(Yr,Oi," ")}),Z&&wt?Z.createHTML(Yr):Yr},Me.setConfig=function(){let Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Br(Ut),nn=!0},Me.clearConfig=function(){nr=null,nn=!1},Me.isValidAttribute=function(Ut,He,St){nr||Br({});const Rt=kn(Ut),Fn=kn(He);return sn(Rt,Fn,St)},Me.addHook=function(Ut,He){typeof He=="function"&&g(ie[Ut],He)},Me.removeHook=function(Ut,He){if(He!==void 0){const St=p(ie[Ut],He);return St===-1?void 0:v(ie[Ut],St,1)[0]}return m(ie[Ut])},Me.removeHooks=function(Ut){ie[Ut]=[]},Me.removeAllHooks=function(){ie=ee()},Me}var ve=pe();return jy=ve,jy}var s7=self.DOMPurify||(self.DOMPurify=yS().default||yS());const a7=vl(s7);function mw(e,t={}){if(!e||typeof e!="string")return console.warn("[SVG-SANITIZE] Invalid input:",typeof e),"";const n={USE_PROFILES:{svg:!0,svgFilters:!0},FORBID_TAGS:["script","foreignObject","iframe","embed"],FORBID_ATTR:["onload","onerror","onclick","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onmousedown","onmouseup","onfocus","onblur","onkeydown","onkeyup","onkeypress","onsubmit","onreset","onselect","onchange","oninput","onanimationstart","onanimationend","onanimationiteration","ontransitionend","ontransitionrun","ontransitionstart","ontransitioncancel","xlink:href",...t.additionalForbiddenAttrs||[]],ALLOW_DATA_ATTR:!0,ALLOW_COMMENTS:!1,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,HOOKS:{afterSanitizeAttributes:r=>{if(r.hasAttribute("href")){const i=r.getAttribute("href");i&&i.toLowerCase().trim().startsWith("javascript:")&&(r.removeAttribute("href"),console.warn("[SVG-SANITIZE] Removed javascript: href"))}if(r.hasAttribute("xlink:href")){const i=r.getAttribute("xlink:href");i&&(i.toLowerCase().trim().startsWith("javascript:")||i.toLowerCase().trim().startsWith("data:text/html"))&&(r.removeAttribute("xlink:href"),console.warn("[SVG-SANITIZE] Removed dangerous xlink:href"))}}},...t};try{const r=a7.sanitize(e,n);if(!r||!r.includes("<svg"))return console.error("[SVG-SANITIZE] Sanitization removed SVG content - input may be malicious"),"";const i=e.length,s=r.length,a=(i-s)/i*100;return a>10&&console.warn(`[SVG-SANITIZE] Removed ${a.toFixed(1)}% of content (${i-s} chars) - possible malicious SVG detected`),r}catch(r){return console.error("[SVG-SANITIZE] Sanitization failed:",r),""}}function o7(e){if(!e||typeof e!="string")return!1;const t=e.toLowerCase(),n=["<script","javascript:","onload=","onerror=","onclick=","onmouseover=","<foreignobject","<iframe","<embed","data:text/html"];for(const r of n)if(t.includes(r))return console.warn(`[SVG-VALIDATE] Dangerous pattern detected: ${r}`),!1;return t.includes("<svg")?!0:(console.warn("[SVG-VALIDATE] Content does not appear to be valid SVG (no <svg> tag found)"),!1)}function l7(e){return e.replace("#","").toLowerCase()}async function ql(e,t,n=null){try{let r;if(n)r=n;else{const v=await fetch(e);if(!v.ok)throw new Error(`Failed to fetch SVG: ${v.status} ${v.statusText}`);r=await v.text()}const i=mw(r);if(!i)throw new Error("SVG sanitization failed - content rejected");const a=new DOMParser().parseFromString(i,"image/svg+xml"),o=a.querySelector("parsererror");if(o)throw new Error(`SVG parse error: ${o.textContent}`);const u=a.documentElement;if(u.tagName!=="svg")throw new Error("Invalid SVG: root element is not <svg>");const d=c7(u,t),p=new XMLSerializer().serializeToString(a),m=new Blob([p],{type:"image/svg+xml"});return{dataUrl:URL.createObjectURL(m),svgText:p,stats:d}}catch(r){throw console.error("[SVG-RECOLOR] Error:",r),r}}function c7(e,t){const n={totalElements:0,fillsReplaced:0,strokesReplaced:0,stopColorsReplaced:0,stylesProcessed:0,colorsNotMapped:new Set},r=e.querySelectorAll("*");n.totalElements=r.length;for(const a of r){const o=a.getAttribute("fill");if(o&&o!=="none"){const p=eo(o,t,n.colorsNotMapped);p!==o&&(p==="transparent"||p==="none"?(a.setAttribute("fill","none"),a.setAttribute("fill-opacity","0")):a.setAttribute("fill",p),n.fillsReplaced++)}const u=a.getAttribute("stroke");if(u&&u!=="none"){const p=eo(u,t,n.colorsNotMapped);p!==u&&(p==="transparent"||p==="none"?(a.setAttribute("stroke","none"),a.setAttribute("stroke-opacity","0")):a.setAttribute("stroke",p),n.strokesReplaced++)}const d=a.getAttribute("stop-color");if(d&&d!=="none"){const p=eo(d,t,n.colorsNotMapped);p!==d&&(a.setAttribute("stop-color",p),n.stopColorsReplaced++)}const h=a.getAttribute("style");if(h){const p=xS(h,t,n);p!==h&&(a.setAttribute("style",p),n.stylesProcessed++)}}const i=e.querySelectorAll("style");for(const a of i){const o=a.textContent,u=d7(o,t,n);u!==o&&(a.textContent=u,n.stylesProcessed++)}const s=e.querySelectorAll("stop");for(const a of s){const o=a.getAttribute("stop-color");if(o&&o!=="none"){const d=eo(o,t,n.colorsNotMapped);d!==o&&(a.setAttribute("stop-color",d),n.stopColorsReplaced++)}const u=a.getAttribute("style");if(u&&u.includes("stop-color")){const d=xS(u,t,n);d!==u&&(a.setAttribute("style",d),n.stylesProcessed++)}}return n}function eo(e,t,n){const r=h7(e);if(!r)return e;const i=`#${r}`,s=t.get(i);if(s)return s.blendHex;const a=bS(r);if(!a)return e;const o=vS(a);let u=null,d=1/0;for(const[h,p]of t.entries()){const m=bS(h.replace("#",""));if(!m)continue;const g=vS(m),v=u7(o,g);if(v<d&&(d=v,u=p),v<=9)return p.blendHex}return u?(n&&n.add(e),u.blendHex):(console.warn(`[SVG-RECOLOR] No mapping found: ${i}`),e)}function bS(e){if(e.length!==6)return null;const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return isNaN(t)||isNaN(n)||isNaN(r)?null:{r:t,g:n,b:r}}function vS(e){let t=e.r/255,n=e.g/255,r=e.b/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;const i=(t*.4124+n*.3576+r*.1805)*100,s=(t*.2126+n*.7152+r*.0722)*100,a=(t*.0193+n*.1192+r*.9505)*100,o=95.047,u=100,d=108.883;let h=i/o,p=s/u,m=a/d;return h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,{L:116*p-16,a:500*(h-p),b:200*(p-m)}}function u7(e,t){const s=Math.PI*2,a=Math.PI,o=(e.L+t.L)/2,u=Math.sqrt(e.a*e.a+e.b*e.b),d=Math.sqrt(t.a*t.a+t.b*t.b),h=(u+d)/2,p=.5*(1-Math.sqrt(Math.pow(h,7)/(Math.pow(h,7)+Math.pow(25,7)))),m=e.a*(1+p),g=t.a*(1+p),v=Math.sqrt(m*m+e.b*e.b),w=Math.sqrt(g*g+t.b*t.b),S=(v+w)/2;let x=Math.atan2(e.b,m);x<0&&(x+=s);let k=Math.atan2(t.b,g);k<0&&(k+=s);const j=Math.abs(x-k)>a?(x+k+s)/2:(x+k)/2,O=1-.17*Math.cos(j-Math.PI/6)+.24*Math.cos(2*j)+.32*Math.cos(3*j+Math.PI/30)-.2*Math.cos(4*j-63*Math.PI/180);let I=k-x;Math.abs(I)>a&&(I=I>0?I-s:I+s);const E=t.L-e.L,U=w-v,D=2*Math.sqrt(v*w)*Math.sin(I/2),R=1+.015*Math.pow(o-50,2)/Math.sqrt(20+Math.pow(o-50,2)),W=1+.045*S,ce=1+.015*S*O,te=30*Math.PI/180*Math.exp(-Math.pow((j-275*Math.PI/180)/(25*Math.PI/180),2)),H=-(2*Math.sqrt(Math.pow(S,7)/(Math.pow(S,7)+Math.pow(25,7))))*Math.sin(2*te);return Math.sqrt(Math.pow(E/(1*R),2)+Math.pow(U/(1*W),2)+Math.pow(D/(1*ce),2)+H*(U/(1*W))*(D/(1*ce)))}function xS(e,t,n){let r=e;return r=r.replace(/fill:\s*([^;]+)/gi,(i,s)=>`fill: ${eo(s.trim(),t,n.colorsNotMapped)}`),r=r.replace(/stroke:\s*([^;]+)/gi,(i,s)=>`stroke: ${eo(s.trim(),t,n.colorsNotMapped)}`),r=r.replace(/stop-color:\s*([^;]+)/gi,(i,s)=>`stop-color: ${eo(s.trim(),t,n.colorsNotMapped)}`),r}function d7(e,t,n){let r=e;return r=r.replace(/fill:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`fill: ${eo(a,t,n.colorsNotMapped)}`}),r=r.replace(/stroke:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`stroke: ${eo(a,t,n.colorsNotMapped)}`}),r=r.replace(/stop-color:\s*([^;}\s]+)/gi,(i,s)=>{const a=s.trim();return`stop-color: ${eo(a,t,n.colorsNotMapped)}`}),r}function h7(e){const t=e.trim().toLowerCase();if(t.match(/^#?[0-9a-f]{6}$/))return l7(t);const n=t.match(/^#?([0-9a-f]{3})$/);if(n)return n[1].split("").map(a=>a+a).join("");const r=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(r){const s=parseInt(r[1],10),a=parseInt(r[2],10),o=parseInt(r[3],10);return f7(s,a,o)}const i={white:"ffffff",black:"000000",red:"ff0000",green:"008000",blue:"0000ff",yellow:"ffff00",cyan:"00ffff",magenta:"ff00ff",gray:"808080",grey:"808080",orange:"ffa500",purple:"800080"};return i[t]?i[t]:null}function f7(e,t,n){const r=i=>Math.max(0,Math.min(255,i)).toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`}function Ql(e){const n=new DOMParser().parseFromString(e,"image/svg+xml"),r=n.querySelector("parsererror");if(r)return console.error("[SVG-REGION-TAGGER] Parse error:",r.textContent),e;const i=n.documentElement;if(!i.hasAttribute("viewBox")){const o=i.getAttribute("width"),u=i.getAttribute("height");if(o&&u){const d=parseFloat(o),h=parseFloat(u);!isNaN(d)&&!isNaN(h)&&(i.setAttribute("viewBox",`0 0 ${d} ${h}`),console.log(`[SVG-REGION-TAGGER] Added viewBox from dimensions: 0 0 ${d} ${h}`))}else{const d=p7(n);d&&(i.setAttribute("viewBox",`${d.x} ${d.y} ${d.width} ${d.height}`),console.log(`[SVG-REGION-TAGGER] Added viewBox from content bounds: ${d.x} ${d.y} ${d.width} ${d.height}`))}}let s=0;return n.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line").forEach(o=>{o.hasAttribute("data-region-id")||o.setAttribute("data-region-id",`region-${s++}`)}),console.log(`[SVG-REGION-TAGGER] Tagged ${s} regions`),new XMLSerializer().serializeToString(n)}function p7(e){try{const t=e.documentElement.cloneNode(!0),n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",document.body.appendChild(n),n.appendChild(t);const r=t.getBBox();if(document.body.removeChild(n),r.width>0&&r.height>0)return{x:Math.floor(r.x),y:Math.floor(r.y),width:Math.ceil(r.width),height:Math.ceil(r.height)}}catch(t){console.warn("[SVG-REGION-TAGGER] Could not calculate content bounds:",t)}return null}function ku(e,t){if(!t||t.size===0)return e;const r=new DOMParser().parseFromString(e,"image/svg+xml"),i=r.querySelector("parsererror");if(i)return console.error("[SVG-REGION-OVERRIDES] Parse error:",i.textContent),e;let s=0;return t.forEach((a,o)=>{const u=typeof a=="string"?a:a.hex,d=r.querySelector(`[data-region-id="${o}"]`);if(d){const h=u==="transparent"||u==="none";if((d.hasAttribute("fill")||h)&&(h?(d.setAttribute("fill","none"),d.setAttribute("fill-opacity","0")):(d.setAttribute("fill",u),d.removeAttribute("fill-opacity")),s++),d.hasAttribute("stroke")&&d.getAttribute("stroke")!=="none"){const m=d.getAttribute("stroke");m&&m!=="#000"&&m!=="#000000"&&m!=="#fff"&&m!=="#ffffff"&&(h?(d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity","0")):d.setAttribute("stroke",u))}const p=d.getAttribute("style");if(p&&p.includes("fill:"))if(h){const m=p.replace(/fill:\s*[^;]+/,"fill: none");d.setAttribute("style",m)}else{const m=p.replace(/fill:\s*[^;]+/,`fill: ${u}`);d.setAttribute("style",m)}}else console.warn(`[SVG-REGION-OVERRIDES] Region not found: ${o}`)}),console.log(`[SVG-REGION-OVERRIDES] Applied ${s} region overrides`),new XMLSerializer().serializeToString(r)}async function oN(e){var x,k;const t=await Ef(e),n=(t==null?void 0:t.design)||t;if(!n)throw new Error("Design not found");if(n.input_mode==="sports_surface")throw new Error("Cannot use a sports surface design as a motif");const r=n.original_svg_url;if(!r||r.startsWith("blob:"))throw new Error("Design does not have a valid original SVG. Please ensure the design was saved after generation.");if(!n.solid_color_mapping&&!n.color_mapping)throw new Error("Design does not have color mappings. Please ensure the design was saved after color mapping.");console.log("[MOTIF] Fetching original SVG from:",r);const i=((x=n.design_data)==null?void 0:x.region_overrides)||n.region_overrides||null,s=((k=n.design_data)==null?void 0:k.original_tagged_svg)||n.original_tagged_svg||null;console.log("[MOTIF] Region overrides:",i?Object.keys(i).length:0,"regions"),console.log("[MOTIF] Original tagged SVG:",s?"present":"not present");const a=i?new Map(Object.entries(i)):null,o=await m7(r);if(!o)throw new Error("Failed to load or sanitize the original SVG.");console.log("[MOTIF] Original SVG loaded, regenerating recolored versions...");let u=null,d=null;if(n.solid_color_mapping&&Object.keys(n.solid_color_mapping).length>0)try{const j=wS(n.solid_color_mapping);console.log("[MOTIF] Solid mapping has",j.size,"colors");const{svgText:O}=await ql(null,j,o);if(u=O,console.log("[MOTIF] Generated solid SVG:",u.length,"chars"),a&&a.size>0&&u){console.log("[MOTIF] Applying",a.size,"region overrides to solid SVG");let I=u;I=Ql(u),u=ku(I,a),console.log("[MOTIF] Applied region overrides to solid SVG")}}catch(j){console.error("[MOTIF] Failed to generate solid SVG:",j)}if(n.color_mapping&&Object.keys(n.color_mapping).length>0)try{const j=wS(n.color_mapping);console.log("[MOTIF] Blend mapping has",j.size,"colors");const{svgText:O}=await ql(null,j,o);if(d=O,console.log("[MOTIF] Generated blend SVG:",d.length,"chars"),a&&a.size>0&&d){console.log("[MOTIF] Applying",a.size,"region overrides to blend SVG");let I=Ql(d);d=ku(I,a),console.log("[MOTIF] Applied region overrides to blend SVG")}}catch(j){console.error("[MOTIF] Failed to generate blend SVG:",j)}if(!u&&!d)throw new Error("Failed to regenerate TPV-recolored SVG versions.");const h=n.dimensions||{};let p=h.widthMM||h.width_mm||5e3,m=h.lengthMM||h.length_mm||5e3;const g=p===5e3&&m===5e3,v=u||d;if(v){const j=gw(v);if(j&&j.width&&j.height){const O=j.width/j.height;(g||Math.abs(O-1)>.01)&&(O>1?(p=5e3,m=Math.round(5e3/O)):O<1&&(m=5e3,p=Math.round(5e3*O)),console.log("[MOTIF] Corrected dimensions from SVG viewBox:",p,"x",m,"mm (aspect ratio:",O.toFixed(3),")"))}}const w=n.thumbnail_url||n.original_png_url||null,S=u&&d;return{sourceDesignId:e,sourceDesignName:n.name||"Unnamed Design",sourceThumbnailUrl:w,solidSvgContent:u,blendSvgContent:d,svgContent:u||d,hasBothVersions:S,originalWidth_mm:p,originalHeight_mm:m}}function wS(e){const t=new Map;if(!e||typeof e!="object")return t;for(const[n,r]of Object.entries(e)){const i=n.startsWith("#")?n:`#${n}`;t.set(i,r)}return t}async function m7(e){try{console.log("[MOTIF] Fetching SVG from:",e);const t=await fetch(e);if(!t.ok)return console.error("[MOTIF] Failed to fetch SVG:",t.status,t.statusText),null;const n=await t.text();if(console.log("[MOTIF] Fetched content length:",n.length,"chars"),console.log("[MOTIF] Content starts with:",n.substring(0,100)),!o7(n))return console.error("[MOTIF] SVG failed quick validation"),null;const r=mw(n);return r?(console.log("[MOTIF] Sanitized SVG length:",r.length,"chars"),r):(console.error("[MOTIF] SVG sanitization failed"),null)}catch(t){return console.error("[MOTIF] Error fetching SVG:",t),null}}async function lN(e={}){const t=await tg(e);return{designs:(t.designs||[]).filter(r=>r.input_mode==="sports_surface"?!1:r.thumbnail_url||r.original_svg_url||r.original_png_url),pagination:t.pagination}}function gw(e){if(!e)return null;const t=e.match(/viewBox=["']([^"']+)["']/i);if(t){const i=t[1].split(/\s+/).map(Number);if(i.length>=4)return{width:i[2],height:i[3]}}const n=e.match(/\bwidth=["']?(\d+(?:\.\d+)?)/i),r=e.match(/\bheight=["']?(\d+(?:\.\d+)?)/i);return n&&r?{width:parseFloat(n[1]),height:parseFloat(r[1])}:null}const g7=Object.freeze(Object.defineProperty({__proto__:null,extractSVGDimensions:gw,fetchMotifFromDesign:oN,listPlaygroundDesigns:lN},Symbol.toStringTag,{value:"Module"}));function Xr(e,t="error"){const n=document.querySelector(".studio-toast");n&&n.remove();const r=document.createElement("div");r.className=`studio-toast studio-toast--${t}`,r.textContent=e,r.setAttribute("role","alert"),r.onclick=()=>r.remove(),document.body.appendChild(r),r.offsetHeight,r.classList.add("studio-toast--visible"),setTimeout(()=>{r.parentElement&&(r.classList.remove("studio-toast--visible"),setTimeout(()=>r.remove(),300))},t==="success"?3e3:5e3)}function cN({onOpenGenerator:e,mobileMode:t=!1,modalMode:n=!1,activeTab:r,onItemAdded:i}){const[s,a]=fe.useState(null),[o,u]=fe.useState("courts"),d=t?r:o,h=t?()=>{}:u,[p,m]=fe.useState([]),[g,v]=fe.useState(!1),[w,S]=fe.useState(null),[x,k]=fe.useState(null),{addCourt:j,addTrack:O,addMotif:I,addShape:E,courts:U,tracks:D,motifs:R,shapes:W}=tn(),ce=Object.keys(U).length,te=Object.keys(D).length,me=Object.keys(R).length,H=hF(),ge=r7();fe.useEffect(()=>{d==="designs"&&p.length===0&&!g&&Ee()},[d]);const Ee=async()=>{v(!0),S(null);try{const Ue=await lN({limit:50});m(Ue.designs||[])}catch(Ue){console.error("[MOTIFS] Failed to load designs:",Ue),S(Ue.message||"Failed to load designs")}finally{v(!1)}},ke=t||n,ze=Ue=>{const ut=fF(Ue);ut&&(j(Ue,ut),ke&&i&&i())},xe=Ue=>{const ut=i7(Ue);ut&&(O(Ue,ut),ke&&i&&i())},Re=async Ue=>{if(!x){k(Ue);try{const ut=await oN(Ue);I(ut.sourceDesignId,ut.sourceDesignName,ut.svgContent,ut.originalWidth_mm,ut.originalHeight_mm,ut.sourceThumbnailUrl,{solidSvgContent:ut.solidSvgContent,blendSvgContent:ut.blendSvgContent,hasBothVersions:ut.hasBothVersions}),ke&&i&&i()}catch(ut){console.error("[MOTIFS] Failed to add motif:",ut),Xr("Failed to add motif. Please try again.")}finally{k(null)}}},_e=[{id:"rectangle",name:"Rectangle",icon:""},{id:"square",name:"Square",icon:""},{id:"circle",name:"Circle",icon:""},{id:"triangle",name:"Triangle",icon:""},{id:"pentagon",name:"Pentagon",icon:""},{id:"hexagon",name:"Hexagon",icon:""},{id:"blob",name:"Blob",icon:""}],Pe=Object.keys(W||{}).length,tt=(()=>{switch(d){case"courts":return{title:"Courts",count:ce,hint:"Select a court to add"};case"tracks":return{title:"Tracks",count:te,hint:"Select a track to add"};case"shapes":return{title:"Shapes",count:Pe,hint:"Tap a shape to add it"};case"designs":return{title:"Designs",count:me,hint:"Add your saved designs as motifs"};default:return{title:"Library",count:0,hint:""}}})();return l.jsxs("div",{className:`court-library ${t?"court-library--mobile":""}`,children:[!t&&l.jsxs("div",{className:"court-library__header",children:[l.jsxs("div",{className:"court-library__header-row",children:[l.jsx("h2",{children:tt.title}),l.jsxs("span",{className:"court-library__count",children:[tt.count," on canvas"]})]}),l.jsx("p",{children:tt.hint})]}),!t&&l.jsxs("div",{className:"court-library__tabs",children:[l.jsx("button",{className:`court-library__tab ${d==="courts"?"court-library__tab--active":""}`,onClick:()=>{h("courts"),a(null)},children:"Courts"}),l.jsx("button",{className:`court-library__tab ${d==="tracks"?"court-library__tab--active":""}`,onClick:()=>{h("tracks"),a(null)},children:"Tracks"}),l.jsx("button",{className:`court-library__tab ${d==="designs"?"court-library__tab--active":""}`,onClick:()=>{h("designs"),a(null)},children:"Designs"})]}),l.jsxs("div",{className:`court-library__list ${t?"court-library__list--mobile":""}`,children:[d==="courts"&&H.map(Ue=>l.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""}`,onClick:()=>ke?ze(Ue.id):a(Ue.id),onDoubleClick:()=>!ke&&ze(Ue.id),children:[l.jsx("div",{className:"court-library__preview",children:l.jsx(y7,{template:Ue})}),l.jsxs("div",{className:"court-library__info",children:[l.jsx("div",{className:"court-library__name",children:Ue.name}),l.jsxs("div",{className:"court-library__dimensions",children:[(Ue.dimensions.width_mm/1e3).toFixed(1),"m  ",(Ue.dimensions.length_mm/1e3).toFixed(1),"m"]}),l.jsx("div",{className:"court-library__standard",children:Ue.standard})]}),s===Ue.id&&l.jsx("button",{className:"court-library__add-btn",onClick:ut=>{ut.stopPropagation(),ze(Ue.id)},children:"+ ADD"})]},Ue.id)),d==="tracks"&&ge.map(Ue=>l.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""}`,onClick:()=>ke?xe(Ue.id):a(Ue.id),onDoubleClick:()=>!ke&&xe(Ue.id),children:[l.jsx("div",{className:"court-library__preview",children:l.jsx(v7,{template:Ue})}),l.jsxs("div",{className:"court-library__info",children:[l.jsx("div",{className:"court-library__name",children:Ue.name}),l.jsxs("div",{className:"court-library__standard",children:[Ue.parameters.numLanes," Lanes  ",Ue.standard]}),l.jsx("div",{className:"court-library__note",children:"Scales to fit canvas"})]}),s===Ue.id&&l.jsx("button",{className:"court-library__add-btn",onClick:ut=>{ut.stopPropagation(),xe(Ue.id)},children:"+ ADD"})]},Ue.id)),d==="shapes"&&l.jsx("div",{className:`court-library__shapes-grid ${t?"court-library__shapes-grid--mobile":""}`,children:_e.map(Ue=>l.jsxs("button",{className:"court-library__shape-btn",onClick:()=>{E(Ue.id),t&&i&&i()},children:[l.jsx("span",{className:"court-library__shape-icon",children:Ue.icon}),l.jsx("span",{className:"court-library__shape-name",children:Ue.name})]},Ue.id))}),d==="designs"&&l.jsxs(l.Fragment,{children:[g&&l.jsxs("div",{className:"court-library__loading",children:[l.jsx("div",{className:"court-library__spinner"}),l.jsx("p",{children:"Loading your designs..."})]}),w&&l.jsxs("div",{className:"court-library__error",children:[l.jsx("p",{children:w}),l.jsx("button",{onClick:Ee,children:"Try Again"})]}),!g&&!w&&p.length===0&&l.jsxs("div",{className:"court-library__empty",children:[l.jsx("p",{children:"No designs found."}),l.jsx("p",{className:"court-library__empty-hint",children:"Generate new designs or save them to use as motifs."})]}),!g&&p.map(Ue=>{var ut,de;return l.jsxs("div",{className:`court-library__item ${s===Ue.id?"court-library__item--selected":""} ${x===Ue.id?"court-library__item--loading":""}`,onClick:()=>ke?Re(Ue.id):a(Ue.id),onDoubleClick:()=>!ke&&Re(Ue.id),children:[l.jsx("div",{className:"court-library__preview",children:l.jsx(x7,{design:Ue})}),l.jsxs("div",{className:"court-library__info",children:[l.jsx("div",{className:"court-library__name",children:Ue.name||"Unnamed Design"}),l.jsxs("div",{className:"court-library__dimensions",children:[((((ut=Ue.design_data)==null?void 0:ut.widthMM)||5e3)/1e3).toFixed(1),"m  ",((((de=Ue.design_data)==null?void 0:de.lengthMM)||5e3)/1e3).toFixed(1),"m"]}),l.jsx("div",{className:"court-library__note",children:"Playground Design"})]}),s===Ue.id&&l.jsx("button",{className:"court-library__add-btn",onClick:oe=>{oe.stopPropagation(),Re(Ue.id)},disabled:x===Ue.id,children:x===Ue.id?"Adding...":"+ ADD"})]},Ue.id)})]})]}),l.jsx("div",{className:"court-library__generate",children:l.jsxs("button",{className:"court-library__generate-btn",onClick:e,children:[l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M12 5v14M5 12h14"})}),"Generate New Design"]})}),!t&&!n&&l.jsx("div",{className:"court-library__footer",children:l.jsxs("p",{className:"court-library__hint",children:[d==="courts"&&"Double-click a court to add it instantly",d==="tracks"&&"Double-click a track to add it instantly",d==="designs"&&"Double-click a design to add it as a motif"]})})]})}function y7({template:e}){const t=e.dimensions.width_mm,n=e.dimensions.length_mm,r=Math.min(62/t,62/n),i=t*r,s=n*r;return l.jsxs("svg",{width:"62",height:"62",viewBox:"0 0 62 62",className:"court-library__svg-preview",children:[l.jsx("rect",{x:(62-i)/2,y:(62-s)/2,width:i,height:s,fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"1.5"}),e.markings.map((a,o)=>l.jsx(b7,{marking:a,scale:r,offsetX:(62-i)/2,offsetY:(62-s)/2},o))]})}function b7({marking:e,scale:t,offsetX:n,offsetY:r}){const{type:i,params:s}=e;switch(i){case"line":return l.jsx("line",{x1:s.x1*t+n,y1:s.y1*t+r,x2:s.x2*t+n,y2:s.y2*t+r,stroke:"#1e293b",strokeWidth:"1.5"});case"rectangle":return l.jsx("rect",{x:s.x*t+n,y:s.y*t+r,width:s.width*t,height:s.height*t,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"});case"circle":return l.jsx("circle",{cx:s.cx*t+n,cy:s.cy*t+r,r:s.radius*t,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"});case"arc":{const{cx:a,cy:o,radius:u,startAngle:d,endAngle:h}=s,p=d*Math.PI/180,m=h*Math.PI/180,g=(a+u*Math.cos(p))*t+n,v=(o+u*Math.sin(p))*t+r,w=(a+u*Math.cos(m))*t+n,S=(o+u*Math.sin(m))*t+r,x=h-d>180?1:0,k=`M ${g} ${v} A ${u*t} ${u*t} 0 ${x} 1 ${w} ${S}`;return l.jsx("path",{d:k,stroke:"#1e293b",strokeWidth:"1.5",fill:"none"})}default:return null}}function v7({template:e}){const{parameters:t}=e,n=t.width_mm,r=t.height_mm,i=Math.min(58/n,58/r),s=n*i,a=r*i,o=t.numLanes,u=t.laneWidth_mm*i,d=t.cornerRadius,p=(d.topLeft+d.topRight+d.bottomLeft+d.bottomRight)/4*i,m=(62-s)/2,g=(62-a)/2;return l.jsxs("svg",{width:"62",height:"62",viewBox:"0 0 62 62",className:"court-library__svg-preview",children:[l.jsx("rect",{x:m,y:g,width:s,height:a,rx:p,fill:"#e5e7eb"}),Array.from({length:o}).map((v,w)=>{const S=w*u,x=Math.max(0,p-S);return l.jsx("rect",{x:m+S,y:g+S,width:Math.max(0,s-S*2),height:Math.max(0,a-S*2),rx:x,stroke:"#1e293b",strokeWidth:"1",fill:"none"},w)})]})}function x7({design:e}){const t=e.thumbnail_url||e.original_png_url;return t?l.jsx("img",{src:t,alt:e.name||"Design preview",className:"court-library__motif-img",style:{width:"62px",height:"62px",objectFit:"contain",borderRadius:"4px",backgroundColor:"#f3f4f6"},onError:n=>{n.target.style.display="none",n.target.nextSibling&&(n.target.nextSibling.style.display="flex")}}):l.jsx("div",{className:"court-library__motif-placeholder",style:{width:"62px",height:"62px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e5e7eb",borderRadius:"4px",color:"#9ca3af",fontSize:"10px",textAlign:"center"},children:"No Preview"})}function w7({isOpen:e,onClose:t,onOpenGenerator:n}){return fe.useEffect(()=>{if(!e)return;const r=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]),fe.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?l.jsx("div",{className:"court-library-modal__overlay",onClick:t,children:l.jsxs("div",{className:"court-library-modal__container",onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"court-library-modal__header",children:[l.jsx("h2",{children:"Element Library"}),l.jsx("p",{children:"Select courts, tracks, or designs to add to your canvas"}),l.jsx("button",{className:"court-library-modal__close",onClick:t,"aria-label":"Close",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsx("div",{className:"court-library-modal__content",children:l.jsx(cN,{modalMode:!0,onItemAdded:t,onOpenGenerator:()=>{t(),n()}})})]})}):null}function _S({onEditSourceDesign:e}){var M,L;const{courts:t,tracks:n,motifs:r,shapes:i,texts:s,exclusionZones:a,groups:o,selectedCourtId:u,selectedTrackId:d,selectedMotifId:h,selectedShapeId:p,selectedTextId:m,selectedExclusionZoneId:g,selectedGroupId:v,editingGroupId:w,updateCourtPosition:S,updateCourtRotation:x,updateCourtScale:k,setLineColor:j,setZoneColor:O,setCourtSurfaceColor:I,resetCourtColors:E,removeCourt:U,removeTrack:D,removeMotif:R,updateMotifPosition:W,updateMotifRotation:ce,updateMotifScale:te,updateTrackParameters:me,enterGroup:H,exitGroup:ge,ungroup:Ee,deleteGroupWithChildren:ke,addToHistory:ze}=tn(),[xe,Re]=fe.useState("transform"),[_e,Pe]=fe.useState(null);if(v){const ee=o[v];return ee?l.jsx(T7,{group:ee,groupId:v,shapes:i,isEditing:w===v,onEnterGroup:()=>H(v),onExitGroup:()=>ge(),onUngroup:()=>Ee(v),onDelete:()=>ke(v)}):null}if(g){const ee=a[g];return ee?l.jsx(E7,{zone:ee,zoneId:g}):null}if(m){const ee=s[m];return ee?l.jsx(C7,{text:ee,textId:m}):null}if(p){const ee=i[p];return ee?l.jsx(S7,{shape:ee,shapeId:p}):null}if(h){const ee=r[h];return ee?l.jsx(k7,{motif:ee,motifId:h,onEditSourceDesign:e}):null}if(d){const ee=n[d];return ee?l.jsx(_7,{track:ee,trackId:d}):null}if(!u)return l.jsx("div",{className:"properties-panel properties-panel--empty",children:l.jsxs("div",{className:"properties-panel__empty-state",children:[l.jsx("p",{children:"No element selected"}),l.jsx("span",{className:"properties-panel__hint",children:"Click on a court, track, or motif to view and edit its properties"})]})});const it=t[u];if(!it)return null;const{position:tt,rotation:Ue,scale:ut,template:de,lineColorOverrides:oe,zoneColorOverrides:We}=it,Ne=(ee,pe)=>{const ve=parseFloat(pe);isNaN(ve)||S(u,{...tt,[ee]:ve})},ft=ee=>{const pe=parseFloat(ee);isNaN(pe)||x(u,pe)},Pt=ee=>{const pe=parseFloat(ee);isNaN(pe)||pe<=0||k(u,pe)},Ct=()=>{window.confirm(`Delete ${de.name}? This action cannot be undone.`)&&U(u)},q=ee=>{if(!_e)return;if(_e.type==="courtSurface"&&ee===null){I(u,null),Pe(null);return}if(!ee)return;const pe={tpv_code:ee.code,hex:ee.hex,name:ee.name};_e.type==="line"?j(u,_e.id,pe):_e.type==="zone"?O(u,_e.id,pe):_e.type==="courtSurface"?I(u,pe):_e.type==="allLines"?de.markings.forEach(ve=>{j(u,ve.id,pe)}):_e.type==="allZones"&&de.zones.forEach(ve=>{O(u,ve.id,pe)}),Pe(null)},qe=ee=>{const pe=oe[ee.id];if(pe)return{code:pe.tpv_code,hex:pe.hex,name:pe.name};const ve=fi.find(ye=>ye.code===de.defaultLineColor);return ve?{code:ve.code,hex:ve.hex,name:ve.name}:null},ae=ee=>{const pe=We[ee.id];if(pe)return{code:pe.tpv_code,hex:pe.hex,name:pe.name};const ve=fi.find(ye=>ye.code===ee.defaultColor);return ve?{code:ve.code,hex:ve.hex,name:ve.name}:null};return l.jsxs("div",{className:"properties-panel",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsx("h3",{children:"Properties"}),l.jsxs("div",{className:"properties-panel__court-info",children:[l.jsx("span",{className:"court-name",children:de.name}),l.jsx("span",{className:"court-standard",children:de.standard})]})]}),l.jsxs("div",{className:"properties-panel__tabs",children:[l.jsx("button",{className:`tab ${xe==="transform"?"tab--active":""}`,onClick:()=>Re("transform"),children:"Transform"}),l.jsx("button",{className:`tab ${xe==="lines"?"tab--active":""}`,onClick:()=>Re("lines"),children:"Lines"}),l.jsx("button",{className:`tab ${xe==="zones"?"tab--active":""}`,onClick:()=>Re("zones"),children:"Zones"})]}),l.jsxs("div",{className:"properties-panel__content",children:[xe==="transform"&&l.jsxs("div",{className:"properties-section",children:[l.jsx("div",{className:"properties-section__header",children:l.jsx("h4",{children:"Transform"})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Position"}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"X"}),l.jsx("input",{type:"number",value:Math.round(tt.x),onChange:ee=>Ne("x",ee.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"Y"}),l.jsx("input",{type:"number",value:Math.round(tt.y),onChange:ee=>Ne("y",ee.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Rotation"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"360",value:Ue,onChange:ee=>ft(ee.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(Ue),onChange:ee=>ft(ee.target.value),min:"0",max:"360"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Scale"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:ut,onChange:ee=>Pt(ee.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:ut.toFixed(2),onChange:ee=>Pt(ee.target.value),min:"0.5",max:"2.0",step:"0.1"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Dimensions"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[(de.dimensions.width_mm*ut/1e3).toFixed(1),"m  ",(de.dimensions.length_mm*ut/1e3).toFixed(1),"m"]})})]}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-delete",onClick:Ct,title:"Delete court (Delete key)",children:" Delete Court"})})]}),xe==="lines"&&l.jsxs("div",{className:"properties-section",children:[l.jsxs("div",{className:"properties-section__header",children:[l.jsx("h4",{children:"Line Markings"}),l.jsx("button",{className:"btn-reset",onClick:()=>E(u),title:"Reset all colours to defaults",children:"Reset"})]}),l.jsxs("div",{className:"color-item color-item--all-lines",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:"Change All Lines"}),l.jsx("span",{className:"color-item__hint",children:"Set all lines to same colour"})]}),l.jsx("button",{className:"color-item__swatch color-item__swatch--all",onClick:()=>Pe({type:"allLines"}),title:"Change all line colours at once",children:l.jsx("span",{style:{fontSize:"1rem"},children:""})})]}),l.jsx("div",{className:"color-list",children:de.markings.map(ee=>{const pe=qe(ee);return l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:ee.name}),pe&&l.jsx("span",{className:"color-item__code",children:pe.code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(pe==null?void 0:pe.hex)||"#000"},onClick:()=>Pe({type:"line",id:ee.id}),title:(pe==null?void 0:pe.name)||"Select colour"})]},ee.id)})})]}),xe==="zones"&&l.jsxs("div",{className:"properties-section",children:[l.jsx("div",{className:"properties-section__header",children:l.jsx("h4",{children:"Fill Colours"})}),l.jsxs("div",{className:"color-item color-item--surface-fill",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:"Court Surface"}),l.jsx("span",{className:"color-item__hint",children:it.courtSurfaceColor?it.courtSurfaceColor.name:"No Fill (transparent)"}),it.courtSurfaceColor&&l.jsx("span",{className:"color-item__code",children:it.courtSurfaceColor.tpv_code})]}),l.jsx("button",{className:`color-item__swatch ${it.courtSurfaceColor?"":"color-item__swatch--no-fill"}`,style:{backgroundColor:((M=it.courtSurfaceColor)==null?void 0:M.hex)||"transparent"},onClick:()=>Pe({type:"courtSurface"}),title:((L=it.courtSurfaceColor)==null?void 0:L.name)||"No Fill - Click to select colour"})]}),de.zones&&de.zones.length>0&&l.jsx("div",{className:"properties-section__divider",children:l.jsx("span",{children:"Paint Zones"})}),de.zones&&de.zones.length>0&&l.jsxs("div",{className:"color-item color-item--all-zones",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:"Change All Zones"}),l.jsx("span",{className:"color-item__hint",children:"Set all zones to same colour"})]}),l.jsx("button",{className:"color-item__swatch color-item__swatch--all",onClick:()=>Pe({type:"allZones"}),title:"Change all zone colours at once",children:l.jsx("span",{style:{fontSize:"1rem"},children:""})})]}),de.zones&&de.zones.length>0&&l.jsx("div",{className:"color-list",children:de.zones.map(ee=>{var ve;const pe=ae(ee);return l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:ee.name}),l.jsxs("span",{className:"color-item__area",children:[((ve=ee.area_m2)==null?void 0:ve.toFixed(1))||0," m"]}),pe&&l.jsx("span",{className:"color-item__code",children:pe.code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(pe==null?void 0:pe.hex)||"#000"},onClick:()=>Pe({type:"zone",id:ee.id}),title:(pe==null?void 0:pe.name)||"Select colour"})]},ee.id)})})]})]}),_e&&l.jsx("div",{className:"color-picker-modal",onClick:()=>Pe(null),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:_e.type==="allLines"?"Change All Line Colours":_e.type==="allZones"?"Change All Zone Colours":_e.type==="courtSurface"?"Select Court Fill Colour":"Select TPV Colour"}),l.jsx("button",{onClick:()=>Pe(null),children:""})]}),l.jsxs("div",{className:"color-picker-grid",children:[_e.type==="courtSurface"&&l.jsx("button",{className:"color-picker-swatch color-picker-swatch--no-fill",onClick:()=>q(null),title:"No Fill (transparent)",children:l.jsx("span",{className:"color-picker-swatch__code",children:"None"})}),fi.map(ee=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:ee.hex},onClick:()=>q(ee),title:`${ee.code} - ${ee.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:ee.code})},ee.code))]})]})})]})}function _7({track:e,trackId:t}){var _,C,A;const{updateTrackParameters:n,updateTrackRotation:r,removeTrack:i,setTrackSurfaceColor:s,setTrackLineColor:a,setLaneSurfaceColor:o,resetLaneSurfaceColors:u,addToHistory:d}=tn(),{parameters:h,template:p,trackSurfaceColor:m,trackLineColor:g,laneSurfaceColors:v,rotation:w}=e,[S,x]=je.useState(!0),[k,j]=je.useState(!1),[O,I]=je.useState(!1),[E,U]=je.useState(null),[D,R]=je.useState(""),[W,ce]=je.useState(""),[te,me]=je.useState(""),[H,ge]=je.useState(!1),[Ee,ke]=je.useState(!1),[ze,xe]=je.useState(!1),Re=p.trackType==="straight",_e=eN(h),Pe=((_=_e.lanes[0])==null?void 0:_.perimeter)||0,it=_e.lanes[_e.lanes.length-1],tt=(it==null?void 0:it.perimeter)||0,Ue=Re?[]:tN(_e),ut=T=>{const N=parseInt(T);if(!(isNaN(N)||N<1||N>8))if(Re){const $=N*h.laneWidth_mm;n(t,{numLanes:N,width_mm:$})}else n(t,{numLanes:N})},de=T=>{const N=parseFloat(T)*1e3;return isNaN(N)||N<3e3?!1:(n(t,{width_mm:N}),!0)},oe=T=>{const N=parseFloat(T)*1e3;return isNaN(N)||N<3e3?!1:(n(t,{height_mm:N}),!0)},We=()=>{ge(!0),R((h.width_mm/1e3).toFixed(1))},Ne=()=>{ge(!1),de(D)},ft=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(ge(!1),R((h.width_mm/1e3).toFixed(1)))},Pt=()=>{ke(!0),ce((h.height_mm/1e3).toFixed(1))},Ct=()=>{ke(!1),oe(W)},q=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(ke(!1),ce((h.height_mm/1e3).toFixed(1)))},qe=T=>{let N=parseFloat(T);return isNaN(N)?!1:(N=(N%360+360)%360,r(t,N),d(),!0)},ae=()=>{xe(!0),me(w.toFixed(0))},M=()=>{xe(!1),qe(te)},L=T=>{T.key==="Enter"?T.target.blur():T.key==="Escape"&&(xe(!1),me(w.toFixed(0)))},ee=(T,N)=>{const $=parseFloat(N)*1e3;if(isNaN($)||$<0)return;const F=Math.min(h.width_mm,h.height_mm)/2,Y=Math.min($,F);S?n(t,{cornerRadius:{topLeft:Y,topRight:Y,bottomLeft:Y,bottomRight:Y}}):n(t,{cornerRadius:{...h.cornerRadius,[T]:Y}})},pe=()=>{window.confirm(`Delete ${p.name}? This action cannot be undone.`)&&i(t)},ve=T=>{s(t,{tpv_code:T.code,hex:T.hex,name:T.name}),j(!1)},ye=T=>{a(t,{tpv_code:T.code,hex:T.hex,name:T.name}),I(!1)},Me=T=>{n(t,{startingBoxes:{...h.startingBoxes,enabled:T}})},Xe=T=>{const N=parseFloat(T)*1e3;isNaN(N)||N<100||n(t,{startingBoxes:{...h.startingBoxes,depth_mm:N}})},$e=T=>{n(t,{startingBoxes:{...h.startingBoxes,style:T}})},c=T=>{n(t,{startingBoxes:{...h.startingBoxes,direction:T}})},f=T=>{const N=parseFloat(T);isNaN(N)||N<0||N>100||n(t,{startingBoxes:{...h.startingBoxes,startPosition:N}})},b=(h.cornerRadius.topLeft+h.cornerRadius.topRight+h.cornerRadius.bottomLeft+h.cornerRadius.bottomRight)/4;return l.jsxs("div",{className:"properties-panel",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsx("h3",{children:"Track Properties"}),l.jsxs("div",{className:"properties-panel__court-info",children:[l.jsx("span",{className:"court-name",children:p.name}),l.jsx("span",{className:"court-standard",children:p.standard})]})]}),l.jsx("div",{className:"properties-panel__content",children:l.jsxs("div",{className:"properties-section",children:[l.jsx("div",{className:"properties-section__header",children:l.jsx("h4",{children:"Track Parameters"})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Number of Lanes"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"1",max:"8",value:h.numLanes,onChange:T=>ut(T.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:h.numLanes,onChange:T=>ut(T.target.value),min:"1",max:"8"}),l.jsx("span",{className:"property-unit",children:"lanes"})]})]})]}),Re?l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Track Width"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[(h.width_mm/1e3).toFixed(1),"m (Auto-calculated from lanes)"]})})]}):l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Track Width"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:H?D:(h.width_mm/1e3).toFixed(1),onChange:T=>R(T.target.value),onFocus:We,onBlur:Ne,onKeyDown:ft,min:"3",max:"100",step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:Re?"Track Length":"Track Height"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:Ee?W:(h.height_mm/1e3).toFixed(1),onChange:T=>ce(T.target.value),onFocus:Pt,onBlur:Ct,onKeyDown:q,min:"3",max:"100",step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Rotation"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:ze?te:w.toFixed(0),onChange:T=>me(T.target.value),onFocus:ae,onBlur:M,onKeyDown:L,min:"0",max:"360",step:"15"}),l.jsx("span",{className:"property-unit",children:""})]})]}),!Re&&l.jsxs("div",{className:"property-group",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsx("label",{children:"Corner Radius"}),l.jsx("button",{className:"btn-toggle",onClick:()=>x(!S),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:S?"#0066CC":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:S?"Click to edit corners independently":"Click to lock all corners together",children:S?" Locked":" Independent"})]}),S?l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:(b/1e3).toFixed(2),onChange:T=>ee("topLeft",T.target.value),min:"0",max:(Math.min(h.width_mm,h.height_mm)/2e3).toFixed(0),step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]}):l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Top Left"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:(h.cornerRadius.topLeft/1e3).toFixed(2),onChange:T=>ee("topLeft",T.target.value),min:"0",max:(Math.min(h.width_mm,h.height_mm)/2e3).toFixed(0),step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Top Right"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:(h.cornerRadius.topRight/1e3).toFixed(2),onChange:T=>ee("topRight",T.target.value),min:"0",max:(Math.min(h.width_mm,h.height_mm)/2e3).toFixed(0),step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Bottom Left"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:(h.cornerRadius.bottomLeft/1e3).toFixed(2),onChange:T=>ee("bottomLeft",T.target.value),min:"0",max:(Math.min(h.width_mm,h.height_mm)/2e3).toFixed(0),step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Bottom Right"}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("input",{type:"number",value:(h.cornerRadius.bottomRight/1e3).toFixed(2),onChange:T=>ee("bottomRight",T.target.value),min:"0",max:(Math.min(h.width_mm,h.height_mm)/2e3).toFixed(0),step:"0.5"}),l.jsx("span",{className:"property-unit",children:"m"})]})]})]})]}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Lane Width"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[(h.laneWidth_mm/1e3).toFixed(2),"m (Fixed)"]})})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Track Surface Colour"}),l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:(m==null?void 0:m.name)||"Select Colour"}),m&&l.jsx("span",{className:"color-item__code",children:m.tpv_code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(m==null?void 0:m.hex)||"#A5362F"},onClick:()=>j(!0),title:(m==null?void 0:m.name)||"Select colour"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsx("label",{style:{margin:0},children:"Lane Colours"}),(v==null?void 0:v.some(T=>T!=null))&&l.jsx("button",{onClick:()=>u(t),title:"Reset all lanes to track surface colour",style:{padding:"0.25rem 0.5rem",fontSize:"0.7rem",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",color:"#64748b"},children:"Reset All"})]}),l.jsx("div",{className:"lane-color-grid",children:_e.lanes.map(T=>{const N=(v==null?void 0:v[T.laneNumber-1])||m,$=(v==null?void 0:v[T.laneNumber-1])!=null;return l.jsxs("div",{className:"lane-color-item",children:[l.jsxs("span",{className:"lane-number",children:["Lane ",T.laneNumber]}),l.jsx("button",{className:`color-item__swatch lane-swatch ${$?"lane-swatch--override":""}`,style:{backgroundColor:(N==null?void 0:N.hex)||"#A5362F"},onClick:()=>U({laneNumber:T.laneNumber}),title:`${(N==null?void 0:N.name)||"Standard Red"}${$?" (custom)":" (default)"}`}),$&&l.jsx("button",{className:"lane-reset-btn",onClick:()=>o(t,T.laneNumber,null),title:"Reset to track default",children:""})]},T.laneNumber)})}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#94a3b8",marginTop:"0.5rem"},children:"Click a swatch to change lane colour"})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Line Colour"}),l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:(g==null?void 0:g.name)||"Cream"}),g&&l.jsx("span",{className:"color-item__code",children:g.tpv_code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(g==null?void 0:g.hex)||"#E8E3D8"},onClick:()=>I(!0),title:(g==null?void 0:g.name)||"Select colour"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("input",{type:"checkbox",checked:((C=h.startingBoxes)==null?void 0:C.enabled)||!1,onChange:T=>Me(T.target.checked)}),"Show Starting Boxes"]}),((A=h.startingBoxes)==null?void 0:A.enabled)&&l.jsxs("div",{style:{marginTop:"0.75rem"},children:[l.jsxs("div",{className:"property-input-group",style:{marginBottom:"0.75rem"},children:[l.jsx("span",{className:"property-label",style:{fontSize:"0.875rem"},children:"Depth"}),l.jsx("input",{type:"number",value:(h.startingBoxes.depth_mm/1e3).toFixed(2),onChange:T=>Xe(T.target.value),min:"0.1",max:"1.0",step:"0.05"}),l.jsx("span",{className:"property-unit",children:"m"})]}),!Re&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:"Start Style"}),l.jsxs("select",{value:h.startingBoxes.style||"staggered",onChange:T=>$e(T.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",background:"white"},children:[l.jsx("option",{value:"straight",children:"Straight Start"}),l.jsx("option",{value:"staggered",children:"Staggered Start"}),l.jsx("option",{value:"both",children:"Both (opposite ends)"})]})]}),l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:"Direction of Travel"}),l.jsxs("select",{value:h.startingBoxes.direction||"counterclockwise",onChange:T=>c(T.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",background:"white"},children:[l.jsx("option",{value:"counterclockwise",children:"Counterclockwise (Standard)"}),l.jsx("option",{value:"clockwise",children:"Clockwise"})]})]}),!Re&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#64748b",marginBottom:"0.375rem"},children:["Start Position (",h.startingBoxes.startPosition||0,"%)"]}),l.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:h.startingBoxes.startPosition||0,onChange:T=>f(T.target.value),className:"property-slider",style:{width:"100%"}}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#94a3b8",marginTop:"0.25rem"},children:"Slide to adjust where the start line appears around the track"})]}),l.jsx("div",{className:"property-info",style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"Boxes use track surface colour with white starting line and lane numbers"}),!Re&&Ue.length>0&&(h.startingBoxes.style==="staggered"||h.startingBoxes.style==="both")&&l.jsxs("div",{style:{marginTop:"0.75rem",padding:"0.5rem",background:"#f8fafc",borderRadius:"4px"},children:[l.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.25rem"},children:"Auto-Calculated Staggers:"}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",lineHeight:"1.4"},children:Ue.map((T,N)=>l.jsxs("div",{children:["Lane ",N+1,": ",(T/1e3).toFixed(2),"m"]},N))}),l.jsx("div",{style:{fontSize:"0.65rem",color:"#64748b",marginTop:"0.25rem",fontStyle:"italic"},children:"Outer lanes start ahead to equalize distance"})]})]})]}),l.jsx("div",{className:"property-divider"}),l.jsx("div",{className:"properties-section__header",children:l.jsx("h4",{children:"Calculated Dimensions"})}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Usable Infield"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[(_e.usableWidth/1e3).toFixed(1),"m  ",(_e.usableHeight/1e3).toFixed(1),"m"]})})]}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Lane 1 Perimeter"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[Pe.toFixed(2),"m"]})})]}),h.numLanes>1&&!Re&&l.jsxs("div",{className:"property-group property-group--info",children:[l.jsxs("label",{children:["Lane ",h.numLanes," Perimeter"]}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[tt.toFixed(2),"m"]})})]}),l.jsx("div",{className:"property-group",children:l.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Use drag handles on the canvas or edit values here. Corner radius auto-adjusts when locked."})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-delete",onClick:pe,title:"Delete track (Delete key)",children:" Delete Track"})})]})}),k&&l.jsx("div",{className:"color-picker-modal",onClick:()=>j(!1),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:"Select Track Surface Colour"}),l.jsx("button",{onClick:()=>j(!1),children:""})]}),l.jsx("div",{className:"color-picker-grid",children:fi.map(T=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>ve(T),title:`${T.code} - ${T.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))})]})}),O&&l.jsx("div",{className:"color-picker-modal",onClick:()=>I(!1),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:"Select Line Colour"}),l.jsx("button",{onClick:()=>I(!1),children:""})]}),l.jsx("div",{className:"color-picker-grid",children:fi.map(T=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>ye(T),title:`${T.code} - ${T.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))})]})}),E&&l.jsx("div",{className:"color-picker-modal",onClick:()=>U(null),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsxs("h4",{children:["Lane ",E.laneNumber," Surface Colour"]}),l.jsx("button",{onClick:()=>U(null),children:""})]}),l.jsxs("div",{className:"color-picker-grid",children:[l.jsx("button",{className:"color-picker-swatch color-picker-swatch--default",onClick:()=>{o(t,E.laneNumber,null),U(null)},title:"Use track default colour",style:{backgroundColor:(m==null?void 0:m.hex)||"#A5362F"},children:l.jsx("span",{className:"color-picker-swatch__code",children:"Default"})}),fi.map(T=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:T.hex},onClick:()=>{o(t,E.laneNumber,{tpv_code:T.code,hex:T.hex,name:T.name}),U(null)},title:`${T.code} - ${T.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:T.code})},T.code))]})]})})]})}function k7({motif:e,motifId:t,onEditSourceDesign:n}){const{updateMotifPosition:r,updateMotifRotation:i,updateMotifScale:s,removeMotif:a,duplicateMotif:o,refreshMotif:u,setMotifViewMode:d}=tn(),{position:h,rotation:p,scale:m,sourceDesignName:g,sourceDesignId:v,originalWidth_mm:w,originalHeight_mm:S,sourceThumbnailUrl:x,viewMode:k,hasBothVersions:j}=e,[O,I]=je.useState(!1),[E,U]=je.useState(null),D=(ke,ze)=>{const xe=parseFloat(ze);isNaN(xe)||r(t,{...h,[ke]:xe})},R=ke=>{const ze=parseFloat(ke);isNaN(ze)||i(t,ze)},W=ke=>{const ze=parseFloat(ke);isNaN(ze)||ze<=0||s(t,ze)},ce=()=>{window.confirm("Delete this motif? This action cannot be undone.")&&a(t)},te=()=>{o(t)},me=()=>{if(n)n(v);else{if(!v){Xr("Source design ID not found");return}window.open(`/studio/?design=${v}`,"_blank")}},H=async()=>{if(!O){I(!0),U(null);try{const ke=await u(t);ke.success||U(ke.error||"Failed to refresh")}catch(ke){U(ke.message||"Failed to refresh")}finally{I(!1)}}},ge=w*(m||1)/1e3,Ee=S*(m||1)/1e3;return l.jsxs("div",{className:"properties-panel",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsx("h3",{children:"Motif Properties"}),l.jsxs("div",{className:"properties-panel__court-info",children:[l.jsx("span",{className:"court-name",children:g||"Unnamed Motif"}),l.jsx("span",{className:"court-standard",children:"Playground Design"})]})]}),l.jsx("div",{className:"properties-panel__content",children:l.jsxs("div",{className:"properties-section",children:[x&&l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Preview"}),l.jsx("div",{style:{width:"100%",height:"80px",background:"#f3f4f6",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:l.jsx("img",{src:x,alt:g,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]}),Gl.BLEND_MODE_ENABLED,l.jsx("div",{className:"properties-section__header",children:l.jsx("h4",{children:"Transform"})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Position"}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"X"}),l.jsx("input",{type:"number",value:Math.round(h.x),onChange:ke=>D("x",ke.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"Y"}),l.jsx("input",{type:"number",value:Math.round(h.y),onChange:ke=>D("y",ke.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Rotation"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"360",value:p||0,onChange:ke=>R(ke.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(p||0),onChange:ke=>R(ke.target.value),min:"0",max:"360"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("label",{children:["Scale",l.jsx("span",{style:{fontSize:"0.7rem",color:"#64748b",marginLeft:"0.5rem"},children:"(aspect locked)"})]}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:Math.min(m||1,10),onChange:ke=>W(ke.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:(m||1).toFixed(2),onChange:ke=>W(ke.target.value),min:"0.1",step:"0.1"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Current Size"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[ge.toFixed(2),"m  ",Ee.toFixed(2),"m"]})})]}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Original Size"}),l.jsx("div",{className:"property-info",children:l.jsxs("span",{children:[(w/1e3).toFixed(2),"m  ",(S/1e3).toFixed(2),"m"]})})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Source Design"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-primary",onClick:me,title:"Edit the source playground design in a new tab",style:{width:"100%",padding:"0.5rem",background:"var(--color-primary, #1e4a7a)",color:"white",border:"none",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:" Edit Source Design"})}),l.jsxs("div",{className:"property-group property-group--actions",children:[l.jsx("button",{className:"btn-secondary",onClick:H,disabled:O,title:"Refresh this motif with the latest version from the source design",style:{width:"100%",padding:"0.5rem",background:O?"#e5e7eb":"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:O?"not-allowed":"pointer",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:O?" Refreshing...":" Refresh from Source"}),E&&l.jsx("div",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem"},children:E}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:"Click after editing the source design to update this motif"})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Actions"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-secondary",onClick:te,title:"Duplicate motif (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Motif"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-delete",onClick:ce,title:"Delete motif (Delete key)",children:" Delete Motif"})}),l.jsx("div",{className:"property-group",children:l.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:' Tip: Drag the motif on the canvas to reposition. Edit the source design and click "Refresh" to update.'})})]})})]})}function S7({shape:e,shapeId:t}){var V;const{updateShapePosition:n,updateShapeDimensions:r,updateShapeSides:i,updateShapeCornerRadius:s,setShapeStarMode:a,setShapeInnerRadius:o,updateShapeRotation:u,setShapeFillColor:d,setShapeStroke:h,setShapeAspectLock:p,removeShape:m,duplicateShape:g,randomizeBlob:v,setBlobStyle:w,setEditPointsVisible:S,setPathClosed:x,setPathSmooth:k}=tn(),[j,O]=je.useState(!1),[I,E]=je.useState(!1),[U,D]=je.useState(""),[R,W]=je.useState(""),[ce,te]=je.useState(!1),[me,H]=je.useState(!1),{shapeType:ge,sides:Ee,width_mm:ke,height_mm:ze,cornerRadius:xe,starMode:Re,innerRadius:_e,position:Pe,rotation:it,fillColor:tt,strokeEnabled:Ue,strokeColor:ut,strokeWidth_mm:de,aspectLocked:oe,blobStyle:We,editPointsVisible:Ne,closed:ft,smooth:Pt,controlPoints:Ct}=e,q=ge==="blob",qe=ge==="path",ae=(X,B)=>{const Z=parseFloat(B);isNaN(Z)||n(t,{...Pe,[X]:Z})},M=X=>{const B=parseFloat(X);if(isNaN(B)||B<100)return!1;if(oe){const Z=ze/ke;r(t,B,B*Z)}else r(t,B,ze);return!0},L=X=>{const B=parseFloat(X);if(isNaN(B)||B<100)return!1;if(oe){const Z=ke/ze;r(t,B*Z,B)}else r(t,ke,B);return!0},ee=()=>{te(!0),D(ke.toFixed(0))},pe=()=>{te(!1),M(U)},ve=X=>{X.key==="Enter"?X.target.blur():X.key==="Escape"&&(te(!1),D(ke.toFixed(0)))},ye=()=>{H(!0),W(ze.toFixed(0))},Me=()=>{H(!1),L(R)},Xe=X=>{X.key==="Enter"?X.target.blur():X.key==="Escape"&&(H(!1),W(ze.toFixed(0)))},$e=X=>{const B=parseInt(X);isNaN(B)||B<3||i(t,B)},c=X=>{const B=parseFloat(X);isNaN(B)||B<0||B>100||s(t,B)},f=X=>{const B=parseFloat(X);isNaN(B)||u(t,B)},b=X=>{d(t,{tpv_code:X.code,hex:X.hex,name:X.name}),O(!1)},_=X=>{h(t,!0,{tpv_code:X.code,hex:X.hex,name:X.name},de),E(!1)},C=X=>{X&&!ut?h(t,!0,{tpv_code:"RH31",hex:"#E8E3D8",name:"Cream"},de):h(t,X,ut,de)},A=X=>{const B=parseFloat(X);isNaN(B)||B<10||h(t,Ue,ut,B)},T=()=>{p(t,!oe)},N=()=>{window.confirm("Delete this shape? This action cannot be undone.")&&m(t)},$=()=>{g(t)},F=[{sides:3,name:"Triangle",icon:""},{sides:4,name:"Rectangle",icon:""},{sides:5,name:"Pentagon",icon:""},{sides:6,name:"Hexagon",icon:""},{sides:8,name:"Octagon",icon:""},{sides:32,name:"Circle",icon:""},{sides:5,name:"Star",icon:"",starMode:!0}],Y=X=>{X.starMode?(a(t,!0),Ee!==X.sides&&$e(X.sides)):(Re&&a(t,!1),$e(X.sides))},Q=X=>{const B=parseFloat(X)/100;o(t,B)},K=X=>X.starMode?Re&&Ee===X.sides:!Re&&Ee===X.sides;return l.jsxs("div",{className:"properties-panel",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsx("h3",{children:q?"Blob Shape":qe?"Pen Path":"Shape Properties"}),l.jsxs("div",{className:"properties-panel__court-info",children:[l.jsx("span",{className:"court-name",children:q?((V=ng[We||"organic"])==null?void 0:V.name)||"Organic":qe?ft?"Closed Path":"Open Path":HF(Ee,Re)}),l.jsx("span",{className:"court-standard",children:q?" Blob":qe?` ${(Ct==null?void 0:Ct.length)||0} points`:`${WF(Ee,Re)} ${Ee} ${Re?"points":"sides"}`})]})]}),l.jsx("div",{className:"properties-panel__content",children:l.jsxs("div",{className:"properties-section",children:[q?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Style"}),l.jsx("select",{value:We||"organic",onChange:X=>w(t,X.target.value),style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",cursor:"pointer",background:"#fff"},children:Object.entries(ng).map(([X,B])=>l.jsxs("option",{value:X,children:[B.name," - ",B.description]},X))})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("button",{onClick:()=>v(t),style:{width:"100%",padding:"0.75rem 1rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.1rem"},children:""})," New Shape"]}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem",textAlign:"center"},children:"Generate a new random shape in the selected style"})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Ne?"#eff6ff":"#fff"},children:[l.jsx("input",{type:"checkbox",checked:Ne||!1,onChange:X=>S(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),l.jsx("span",{style:{fontSize:"0.875rem"},children:"Edit Points"})]}),Ne&&l.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:"Drag points and handles on canvas for precise control"})]})]}):qe?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"property-group",children:[l.jsx("label",{style:{marginBottom:"0.5rem",display:"block"},children:"Path Options"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:ft?"#eff6ff":"#fff",marginBottom:"0.5rem"},children:[l.jsx("input",{type:"checkbox",checked:ft||!1,onChange:X=>x(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),l.jsx("span",{style:{fontSize:"0.875rem"},children:"Closed Path"})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Pt?"#eff6ff":"#fff"},children:[l.jsx("input",{type:"checkbox",checked:Pt||!1,onChange:X=>k(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),l.jsx("span",{style:{fontSize:"0.875rem"},children:"Smooth Curves"})]}),Pt&&l.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:"Uses bezier curves for smooth transitions"})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",background:Ne?"#eff6ff":"#fff"},children:[l.jsx("input",{type:"checkbox",checked:Ne||!1,onChange:X=>S(t,X.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),l.jsx("span",{style:{fontSize:"0.875rem"},children:"Edit Points"})]}),Ne&&l.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.5rem"},children:["Drag points to reshape. ",Pt?"Drag handles for curve control.":"Enable smooth curves for bezier handles."]})]}),l.jsx("div",{className:"property-group",style:{background:"#f8fafc",padding:"0.75rem",borderRadius:"6px"},children:l.jsxs("div",{style:{fontSize:"0.8125rem",color:"#475569"},children:[l.jsx("strong",{children:(Ct==null?void 0:Ct.length)||0})," control points"]})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Shape Type"}),l.jsx("div",{className:"shape-presets",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginTop:"0.5rem"},children:F.map(X=>{const B=K(X);return l.jsxs("button",{onClick:()=>Y(X),title:X.name,style:{padding:"0.5rem",border:B?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:B?"#eff6ff":"#fff",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem"},children:[l.jsx("span",{children:X.icon}),l.jsx("span",{style:{fontSize:"0.65rem",color:"#64748b"},children:X.name})]},`${X.name}-${X.sides}`)})})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:Re?"Number of Points":"Number of Sides"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"3",max:Re?12:32,value:Ee,onChange:X=>$e(X.target.value),className:"property-slider"}),l.jsx("div",{className:"property-input-group property-input-group--compact",children:l.jsx("input",{type:"number",value:Ee,onChange:X=>$e(X.target.value),min:"3",max:Re?12:32})})]})]}),Re&&l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Star Depth"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"10",max:"90",value:Math.round((_e||.5)*100),onChange:X=>Q(X.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round((_e||.5)*100),onChange:X=>Q(X.target.value),min:"10",max:"90"}),l.jsx("span",{className:"property-unit",children:"%"})]})]}),l.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:"Lower values = deeper points, higher = shallower"})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Corner Smoothing"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"100",value:xe,onChange:X=>c(X.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:xe,onChange:X=>c(X.target.value),min:"0",max:"100"}),l.jsx("span",{className:"property-unit",children:"%"})]})]})]})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Dimensions"})}),l.jsxs("div",{className:"property-group",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsx("label",{style:{margin:0},children:"Size"}),l.jsx("button",{onClick:T,style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:oe?"#3b82f6":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:oe?"Aspect ratio locked":"Aspect ratio unlocked",children:oe?" Locked":" Free"})]}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"W"}),l.jsx("input",{type:"number",value:ce?U:ke.toFixed(0),onChange:X=>D(X.target.value),onFocus:ee,onBlur:pe,onKeyDown:ve,step:"100",min:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"H"}),l.jsx("input",{type:"number",value:me?R:ze.toFixed(0),onChange:X=>W(X.target.value),onFocus:ye,onBlur:Me,onKeyDown:Xe,step:"100",min:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]}),l.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:[(ke/1e3).toFixed(2),"m  ",(ze/1e3).toFixed(2),"m"]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Position"}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"X"}),l.jsx("input",{type:"number",value:Math.round(Pe.x),onChange:X=>ae("x",X.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"Y"}),l.jsx("input",{type:"number",value:Math.round(Pe.y),onChange:X=>ae("y",X.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Rotation"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"360",value:it||0,onChange:X=>f(X.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(it||0),onChange:X=>f(X.target.value),min:"0",max:"360"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Appearance"})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Fill Colour"}),l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:(tt==null?void 0:tt.name)||"Select Colour"}),tt&&l.jsx("span",{className:"color-item__code",children:tt.tpv_code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(tt==null?void 0:tt.hex)||"#609B63"},onClick:()=>O(!0),title:(tt==null?void 0:tt.name)||"Select colour"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("input",{type:"checkbox",checked:Ue||!1,onChange:X=>C(X.target.checked)}),"Border"]}),Ue&&l.jsxs("div",{style:{marginTop:"0.5rem"},children:[l.jsxs("div",{className:"color-item",style:{marginBottom:"0.5rem"},children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:(ut==null?void 0:ut.name)||"Select Colour"}),ut&&l.jsx("span",{className:"color-item__code",children:ut.tpv_code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(ut==null?void 0:ut.hex)||"#FFFFFF"},onClick:()=>E(!0),title:(ut==null?void 0:ut.name)||"Select colour"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",style:{fontSize:"0.8rem"},children:"Width"}),l.jsx("input",{type:"number",value:de,onChange:X=>A(X.target.value),step:"10",min:"10"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Actions"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-secondary",onClick:$,title:"Duplicate shape (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Shape"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-delete",onClick:N,title:"Delete shape (Delete key)",children:" Delete Shape"})}),l.jsx("div",{className:"property-group",children:l.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Drag corners to resize, drag the rotation handle above the shape to rotate. Hold Shift to snap rotation to 15 increments."})})]})}),j&&l.jsx("div",{className:"color-picker-modal",onClick:()=>O(!1),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:"Select Fill Colour"}),l.jsx("button",{onClick:()=>O(!1),children:""})]}),l.jsx("div",{className:"color-picker-grid",children:fi.map(X=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:X.hex},onClick:()=>b(X),title:`${X.code} - ${X.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:X.code})},X.code))})]})}),I&&l.jsx("div",{className:"color-picker-modal",onClick:()=>E(!1),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:"Select Border Colour"}),l.jsx("button",{onClick:()=>E(!1),children:""})]}),l.jsx("div",{className:"color-picker-grid",children:fi.map(X=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:X.hex},onClick:()=>_(X),title:`${X.code} - ${X.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:X.code})},X.code))})]})})]})}function C7({text:e,textId:t}){const{updateTextContent:n,updateTextPosition:r,updateTextScale:i,updateTextFont:s,updateTextAlign:a,updateTextRotation:o,setTextFillColor:u,setTextStrokeColor:d,updateTextStrokeWidth:h,removeText:p,duplicateText:m}=tn(),[g,v]=je.useState(!1),[w,S]=je.useState(!1),{content:x,fontFamily:k,fontSize_mm:j,scale_x:O=1,scale_y:I=1,fontWeight:E,fontStyle:U,textAlign:D,position:R,rotation:W,fillColor:ce,strokeColor:te,strokeWidth_mm:me}=e,H=j||500,ge=vo(x||"Text",k,H,E,U),Ee=Math.round(ge.width*O),ke=Math.round(H*1.2*I),ze=YF(),xe=q=>{n(t,q)},Re=(q,qe)=>{const ae=parseFloat(qe);isNaN(ae)||r(t,{...R,[q]:ae})},_e=q=>{const qe=parseFloat(q);if(isNaN(qe)||qe<10)return;const ae=qe/ge.width;i(t,ae,ae)},Pe=q=>{const qe=parseFloat(q);if(isNaN(qe)||qe<10)return;const ae=H*1.2,M=qe/ae;i(t,M,M)},it=q=>{s(t,q,E,U)},tt=()=>{s(t,k,E==="bold"?"normal":"bold",U)},Ue=()=>{s(t,k,E,U==="italic"?"normal":"italic")},ut=q=>{a(t,q)},de=q=>{const qe=parseFloat(q);isNaN(qe)||o(t,qe)},oe=q=>{u(t,{tpv_code:q.code,hex:q.hex,name:q.name}),v(!1)},We=q=>{d(t,{tpv_code:q.code,hex:q.hex,name:q.name}),(!me||me===0)&&h(t,Math.round(H*I*.05)),S(!1)},Ne=q=>{const qe=parseFloat(q);isNaN(qe)||qe<0||h(t,qe)},ft=()=>{d(t,null),h(t,0)},Pt=()=>{window.confirm("Delete this text? This action cannot be undone.")&&p(t)},Ct=()=>{m(t)};return l.jsxs("div",{className:"properties-panel",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsx("h3",{children:"Text Properties"}),l.jsxs("div",{className:"properties-panel__court-info",children:[l.jsx("span",{className:"court-name",style:{fontFamily:k},children:x||"Text Label"}),l.jsx("span",{className:"court-standard",children:"T Text Element"})]})]}),l.jsx("div",{className:"properties-panel__content",children:l.jsxs("div",{className:"properties-section",children:[l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Text Content"}),l.jsx("input",{type:"text",value:x,onChange:q=>xe(q.target.value),placeholder:"Enter text...",style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontFamily:k,fontSize:"1rem"}})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Typography"})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Font Family"}),l.jsx("select",{value:k,onChange:q=>it(q.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e4e9f0",borderRadius:"6px",fontFamily:"inherit",fontSize:"0.875rem"},children:ze.map(q=>l.jsx("option",{value:q.family,style:{fontFamily:q.family},children:q.name},q.name))})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Size"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l.jsxs("div",{className:"property-input-group property-input-group--compact",style:{flex:1},children:[l.jsx("span",{className:"property-unit",style:{marginRight:"0.25rem"},children:"W"}),l.jsx("input",{type:"number",value:Ee,onChange:q=>_e(q.target.value),min:"10",step:"10",style:{width:"70px"}}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group property-input-group--compact",style:{flex:1},children:[l.jsx("span",{className:"property-unit",style:{marginRight:"0.25rem"},children:"H"}),l.jsx("input",{type:"number",value:ke,onChange:q=>Pe(q.target.value),min:"10",step:"10",style:{width:"70px"}}),l.jsx("span",{className:"property-unit",children:"mm"})]})]}),l.jsxs("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"0.25rem"},children:[" ",(Ee/1e3).toFixed(2),"m  ",(ke/1e3).toFixed(2),"m"]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Style"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{onClick:tt,style:{flex:1,padding:"0.5rem",border:E==="bold"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:E==="bold"?"#eff6ff":"#fff",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},title:"Bold",children:"B"}),l.jsx("button",{onClick:Ue,style:{flex:1,padding:"0.5rem",border:U==="italic"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:U==="italic"?"#eff6ff":"#fff",fontStyle:"italic",fontSize:"1rem",cursor:"pointer"},title:"Italic",children:"I"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Alignment"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{onClick:()=>ut("left"),style:{flex:1,padding:"0.5rem",border:D==="left"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="left"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Left",children:""}),l.jsx("button",{onClick:()=>ut("center"),style:{flex:1,padding:"0.5rem",border:D==="center"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="center"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Center",children:""}),l.jsx("button",{onClick:()=>ut("right"),style:{flex:1,padding:"0.5rem",border:D==="right"?"2px solid #3b82f6":"1px solid #e4e9f0",borderRadius:"6px",background:D==="right"?"#eff6ff":"#fff",cursor:"pointer"},title:"Align Right",children:""})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Text Colour"}),l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:(ce==null?void 0:ce.name)||"Select Colour"}),ce&&l.jsx("span",{className:"color-item__code",children:ce.tpv_code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:(ce==null?void 0:ce.hex)||"#1C1C1C"},onClick:()=>v(!0),title:(ce==null?void 0:ce.name)||"Select colour"})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Outline"}),te?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"color-item",children:[l.jsxs("div",{className:"color-item__info",children:[l.jsx("span",{className:"color-item__name",children:te.name}),l.jsx("span",{className:"color-item__code",children:te.tpv_code})]}),l.jsx("button",{className:"color-item__swatch",style:{backgroundColor:te.hex},onClick:()=>S(!0),title:te.name})]}),l.jsxs("div",{className:"property-input-row",style:{marginTop:"0.5rem"},children:[l.jsx("input",{type:"range",min:"1",max:Math.round(j*.2),step:"1",value:me||0,onChange:q=>Ne(q.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(me||0),onChange:q=>Ne(q.target.value),min:"0",step:"1"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]}),l.jsx("button",{onClick:ft,style:{marginTop:"0.5rem",padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626",cursor:"pointer"},children:"Remove Outline"})]}):l.jsx("button",{onClick:()=>S(!0),style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",fontSize:"0.875rem",color:"#6b7280",cursor:"pointer"},children:"+ Add Outline"})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Transform"})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Position"}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"X"}),l.jsx("input",{type:"number",value:Math.round(R.x),onChange:q=>Re("x",q.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"Y"}),l.jsx("input",{type:"number",value:Math.round(R.y),onChange:q=>Re("y",q.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Rotation"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"360",value:W||0,onChange:q=>de(q.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(W||0),onChange:q=>de(q.target.value),min:"0",max:"360"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Actions"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-secondary",onClick:Ct,title:"Duplicate text (Ctrl+D)",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:" Duplicate Text"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-delete",onClick:Pt,title:"Delete text (Delete key)",children:" Delete Text"})}),l.jsx("div",{className:"property-group",children:l.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:" Tip: Drag corners to resize text. Hold Shift while rotating to snap to 15 increments."})})]})}),g&&l.jsx("div",{className:"color-picker-modal",onClick:()=>v(!1),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:q=>q.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:"Select Text Colour"}),l.jsx("button",{onClick:()=>v(!1),children:""})]}),l.jsx("div",{className:"color-picker-grid",children:fi.map(q=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:q.hex},onClick:()=>oe(q),title:`${q.code} - ${q.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:q.code})},q.code))})]})}),w&&l.jsx("div",{className:"color-picker-modal",onClick:()=>S(!1),children:l.jsxs("div",{className:"color-picker-modal__content",onClick:q=>q.stopPropagation(),children:[l.jsxs("div",{className:"color-picker-modal__header",children:[l.jsx("h4",{children:"Select Outline Colour"}),l.jsx("button",{onClick:()=>S(!1),children:""})]}),l.jsx("div",{className:"color-picker-grid",children:fi.map(q=>l.jsx("button",{className:"color-picker-swatch",style:{backgroundColor:q.hex},onClick:()=>We(q),title:`${q.code} - ${q.name}`,children:l.jsx("span",{className:"color-picker-swatch__code",children:q.code})},q.code))})]})})]})}function E7({zone:e,zoneId:t}){const{updateExclusionZonePosition:n,updateExclusionZoneDimensions:r,updateExclusionZoneRotation:i,updateExclusionZoneCornerRadius:s,removeExclusionZone:a,duplicateExclusionZone:o,addToHistory:u}=tn(),{position:d,rotation:h,width_mm:p,height_mm:m,sides:g,cornerRadius:v,customName:w}=e,S=(R,W)=>{const ce=parseFloat(W);isNaN(ce)||n(t,{...d,[R]:ce})},x=(R,W)=>{const ce=parseFloat(W);isNaN(ce)||ce<500||(R==="width"?r(t,ce,m):r(t,p,ce),u())},k=R=>{const W=parseFloat(R);isNaN(W)||(i(t,W),u())},j=R=>{const W=parseFloat(R);isNaN(W)||s(t,W)},O=()=>{window.confirm("Delete this exclusion zone? This action cannot be undone.")&&a(t)},I=()=>{o(t)},E=p*m/1e6,U=w||"Exclusion Zone",D=g===4?"Rectangle":g>=32?"Circle":`${g}-sided`;return l.jsxs("div",{className:"properties-panel",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsx("h3",{children:"Exclusion Zone"}),l.jsxs("div",{className:"properties-panel__court-info",children:[l.jsx("span",{className:"court-name",children:U}),l.jsx("span",{className:"court-standard",style:{background:"#f87171",color:"white"},children:"Excluded Area"})]})]}),l.jsx("div",{className:"properties-panel__content",children:l.jsxs("div",{className:"properties-section",children:[l.jsx("div",{className:"property-group",style:{background:"#fef2f2",padding:"0.75rem",borderRadius:"6px",marginBottom:"1rem",border:"1px solid #fecaca"},children:l.jsx("p",{style:{fontSize:"0.75rem",color:"#991b1b",margin:0},children:"This area represents a building, planter, or other obstacle. It is excluded from material calculations."})}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Dimensions"}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"W"}),l.jsx("input",{type:"number",value:Math.round(p),onChange:R=>x("width",R.target.value),step:"100",min:"500"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"H"}),l.jsx("input",{type:"number",value:Math.round(m),onChange:R=>x("height",R.target.value),step:"100",min:"500"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Position"}),l.jsxs("div",{className:"property-input-row",children:[l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"X"}),l.jsx("input",{type:"number",value:Math.round(d.x),onChange:R=>S("x",R.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]}),l.jsxs("div",{className:"property-input-group",children:[l.jsx("span",{className:"property-label",children:"Y"}),l.jsx("input",{type:"number",value:Math.round(d.y),onChange:R=>S("y",R.target.value),step:"100"}),l.jsx("span",{className:"property-unit",children:"mm"})]})]})]}),l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Rotation"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"360",value:h||0,onChange:R=>k(R.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(h||0),onChange:R=>k(R.target.value),min:"0",max:"360"}),l.jsx("span",{className:"property-unit",children:""})]})]})]}),g===4&&l.jsxs("div",{className:"property-group",children:[l.jsx("label",{children:"Corner Radius"}),l.jsxs("div",{className:"property-input-row",children:[l.jsx("input",{type:"range",min:"0",max:"100",value:v||0,onChange:R=>j(R.target.value),className:"property-slider"}),l.jsxs("div",{className:"property-input-group property-input-group--compact",children:[l.jsx("input",{type:"number",value:Math.round(v||0),onChange:R=>j(R.target.value),min:"0",max:"100"}),l.jsx("span",{className:"property-unit",children:"%"})]})]})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Exclusion Info"})}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Shape"}),l.jsx("div",{className:"property-info",children:l.jsx("span",{children:D})})]}),l.jsxs("div",{className:"property-group property-group--info",children:[l.jsx("label",{children:"Excluded Area"}),l.jsx("div",{className:"property-info",style:{color:"#dc2626"},children:l.jsxs("span",{children:[E.toFixed(2)," m"]})})]}),l.jsx("div",{className:"properties-section__divider",style:{margin:"1rem 0"},children:l.jsx("span",{children:"Actions"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-secondary",onClick:I,title:"Duplicate exclusion zone",style:{width:"100%",padding:"0.5rem",background:"#f3f4f6",border:"1px solid #e4e9f0",borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",cursor:"pointer",marginBottom:"0.5rem"},children:"Duplicate Zone"})}),l.jsx("div",{className:"property-group property-group--actions",children:l.jsx("button",{className:"btn-delete",onClick:O,title:"Delete exclusion zone",children:"Delete Zone"})}),l.jsx("div",{className:"property-group",children:l.jsx("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:"Drag the zone on the canvas to reposition. Use handles to resize."})})]})})]})}function T7({group:e,groupId:t,shapes:n,isEditing:r,onEnterGroup:i,onExitGroup:s,onUngroup:a,onDelete:o}){const u=e.customName||"Group",d=e.childIds.map(p=>n[p]).filter(Boolean),h=e.bounds||{width:0,height:0};return l.jsx("div",{className:"properties-panel properties-panel--group",children:l.jsxs("div",{className:"properties-panel__scroll-container",children:[l.jsxs("div",{className:"properties-panel__header",children:[l.jsxs("div",{className:"properties-panel__title-row",children:[l.jsx("span",{className:"properties-panel__icon",style:{color:"#9333ea"},children:""}),l.jsx("h3",{className:"properties-panel__title",children:u})]}),l.jsxs("span",{className:"properties-panel__subtitle",children:[e.childIds.length," element",e.childIds.length!==1?"s":""]})]}),l.jsxs("div",{className:"properties-panel__content",children:[l.jsxs("div",{className:"property-section",children:[l.jsx("div",{className:"property-group",style:{marginBottom:"1rem"},children:r?l.jsx("button",{className:"property-btn property-btn--secondary property-btn--full",onClick:s,style:{borderColor:"#9333ea",color:"#9333ea"},children:" Exit Group Editing"}):l.jsx("button",{className:"property-btn property-btn--primary property-btn--full",onClick:i,style:{background:"#9333ea"},children:"Edit Group Elements"})}),r&&l.jsx("div",{className:"property-hint",style:{fontSize:"0.75rem",color:"#9333ea",marginBottom:"1rem"},children:"Click on individual elements to select and edit them"})]}),l.jsxs("div",{className:"property-section",children:[l.jsx("h4",{className:"property-section__title",children:"Dimensions"}),l.jsxs("div",{className:"property-group",children:[l.jsxs("div",{className:"property-row",children:[l.jsx("label",{className:"property-label",children:"Width"}),l.jsxs("span",{className:"property-value",children:[(h.width/1e3).toFixed(2),"m"]})]}),l.jsxs("div",{className:"property-row",children:[l.jsx("label",{className:"property-label",children:"Height"}),l.jsxs("span",{className:"property-value",children:[(h.height/1e3).toFixed(2),"m"]})]})]})]}),l.jsxs("div",{className:"property-section",children:[l.jsxs("h4",{className:"property-section__title",children:["Elements (",d.length,")"]}),l.jsx("div",{className:"property-group",children:l.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",borderRadius:"6px",border:"1px solid #e5e7eb"},children:d.map((p,m)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderBottom:m<d.length-1?"1px solid #f1f5f9":"none",fontSize:"0.8rem"},children:[l.jsx("span",{style:{color:"#9333ea"},children:p.shapeType==="blob"?"":""}),l.jsx("span",{style:{color:"#475569"},children:p.customName||`${p.blobStyle||p.shapeType} ${m+1}`}),l.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.7rem",color:"#9ca3af"},children:[(p.width_mm/1e3).toFixed(1),"m"]})]},p.id))})})]}),l.jsxs("div",{className:"property-section",children:[l.jsx("h4",{className:"property-section__title",children:"Actions"}),l.jsxs("div",{className:"property-group",style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx("button",{className:"property-btn property-btn--secondary property-btn--full",onClick:a,title:"Dissolve the group and make elements independent",children:" Ungroup Elements"}),l.jsx("button",{className:"property-btn property-btn--danger property-btn--full",onClick:()=>{confirm(`Delete "${u}" and all its elements?`)&&o()},title:"Delete group and all its elements",children:" Delete Group"})]})]}),l.jsx("div",{className:"property-group",children:l.jsxs("div",{className:"property-hint",style:{fontStyle:"normal",color:"#64748b",fontSize:"0.75rem",marginTop:"1rem"},children:[l.jsx("strong",{children:"Tip:"})," Double-click a group to edit its contents. Press Escape to exit.",l.jsx("br",{}),l.jsx("strong",{children:"Shortcuts:"})," G to group, G to ungroup."]})})]})]})})}function j7(){const{courts:e,tracks:t,motifs:n,shapes:r,texts:i,exclusionZones:s,groups:a,elementOrder:o,selectedCourtId:u,selectedTrackId:d,selectedMotifId:h,selectedShapeId:p,selectedTextId:m,selectedExclusionZoneId:g,selectedGroupId:v,editingGroupId:w,setElementOrder:S,selectCourt:x,selectTrack:k,selectMotif:j,selectShape:O,selectText:I,selectExclusionZone:E,selectGroup:U,deselectGroup:D,enterGroup:R,exitGroup:W,ungroup:ce,deleteGroupWithChildren:te,bringToFront:me,sendToBack:H,duplicateCourt:ge,duplicateTrack:Ee,duplicateMotif:ke,duplicateShape:ze,duplicateText:xe,removeCourt:Re,removeTrack:_e,removeMotif:Pe,removeShape:it,removeText:tt,removeExclusionZone:Ue,renameElement:ut,toggleElementLock:de,toggleElementVisibility:oe,addToHistory:We}=tn(),[Ne,ft]=fe.useState(null),[Pt,Ct]=fe.useState(null),[q,qe]=fe.useState(null),[ae,M]=fe.useState(null),[L,ee]=fe.useState(""),[pe,ve]=fe.useState(new Set);fe.useEffect(()=>{const B=()=>qe(null);if(q)return document.addEventListener("click",B),()=>document.removeEventListener("click",B)},[q]);const ye=[...o].filter(B=>!B.startsWith("group-")).reverse(),Me=B=>{var Z,G,re;if(B.startsWith("court-")){const z=e[B];return{type:"court",name:(z==null?void 0:z.customName)||((Z=z==null?void 0:z.template)==null?void 0:Z.name)||"Unknown Court",icon:"",sport:((G=z==null?void 0:z.template)==null?void 0:G.sport)||"",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("track-")){const z=t[B];return{type:"track",name:(z==null?void 0:z.customName)||((re=z==null?void 0:z.template)==null?void 0:re.name)||"Unknown Track",icon:"",sport:"athletics",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("motif-")){const z=n[B];return{type:"motif",name:(z==null?void 0:z.customName)||(z==null?void 0:z.sourceDesignName)||"Unknown Motif",icon:"",sport:"playground",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("shape-")){const z=r[B];let ne="Shape",se="";if((z==null?void 0:z.shapeType)==="blob")ne={organic:"Organic Blob",splashy:"Splashy Blob",cloudy:"Cloudy Blob",rocky:"Rocky Blob"}[z.blobStyle]||"Blob",se="";else if((z==null?void 0:z.shapeType)==="path")ne=z.closed?"Custom Shape":"Path",se="";else if(z!=null&&z.starMode)ne=`${z.sides||5}-Point Star`,se="";else if(z!=null&&z.sides){const ue=z.sides;ue>=32?(ne="Circle",se=""):ue===3?(ne="Triangle",se=""):ue===4?(ne="Rectangle",se=""):ue===5?(ne="Pentagon",se=""):ue===6?(ne="Hexagon",se=""):ue===8?(ne="Octagon",se=""):(ne=`${ue}-gon`,se="")}return{type:"shape",name:(z==null?void 0:z.customName)||ne,icon:se,sport:"shape",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("text-")){const z=i[B],ne=(z==null?void 0:z.content)||"Text Label",se=ne.length>20?ne.substring(0,20)+"...":ne;return{type:"text",name:(z==null?void 0:z.customName)||se,icon:"T",sport:"text",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}else if(B.startsWith("exclusion-")){const z=s[B];return{type:"exclusion",name:(z==null?void 0:z.customName)||"Exclusion Zone",icon:"",sport:"exclusion",locked:(z==null?void 0:z.locked)||!1,visible:(z==null?void 0:z.visible)!==!1}}return{type:"unknown",name:"Unknown",icon:"",sport:"",locked:!1,visible:!0}},Xe=B=>B===u||B===d||B===h||B===p||B===m||B===g,$e=B=>{B.startsWith("court-")?x(B):B.startsWith("track-")?k(B):B.startsWith("motif-")?j(B):B.startsWith("shape-")?O(B):B.startsWith("text-")?I(B):B.startsWith("exclusion-")&&E(B)},c=(B,Z)=>{ft(Z),B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/plain",Z),setTimeout(()=>{B.target.classList.add("layer-item--dragging")},0)},f=B=>{B.target.classList.remove("layer-item--dragging"),ft(null),Ct(null)},b=(B,Z)=>{B.preventDefault(),B.dataTransfer.dropEffect="move",Z!==Ne&&Ct(Z)},_=()=>{Ct(null)},C=(B,Z)=>{if(B.preventDefault(),!Ne||Ne===Z){ft(null),Ct(null);return}const G=[...o],re=G.indexOf(Ne),z=G.indexOf(Z);if(re===-1||z===-1)return;G.splice(re,1);const ne=ye.indexOf(Ne),se=ye.indexOf(Z);ne<se,G.splice(z,0,Ne),S(G),We(),ft(null),Ct(null)},A=(B,Z)=>{B.stopPropagation(),me(Z),qe(null)},T=(B,Z)=>{B.stopPropagation(),H(Z),qe(null)},N=(B,Z)=>{B.stopPropagation(),Z.startsWith("court-")?ge(Z):Z.startsWith("track-")?Ee(Z):Z.startsWith("motif-")?ke(Z):Z.startsWith("shape-")?ze(Z):Z.startsWith("text-")&&xe(Z),qe(null)},$=(B,Z)=>{B.stopPropagation();const G=Me(Z);confirm(`Delete "${G.name}"?`)&&(Z.startsWith("court-")?Re(Z):Z.startsWith("track-")?_e(Z):Z.startsWith("motif-")?Pe(Z):Z.startsWith("shape-")?it(Z):Z.startsWith("text-")?tt(Z):Z.startsWith("exclusion-")&&Ue(Z)),qe(null)},F=(B,Z)=>{B.stopPropagation();const G=Me(Z);M(Z),ee(G.name),qe(null)},Y=B=>{L.trim()&&ut(B,L.trim()),M(null),ee("")},Q=(B,Z)=>{B.key==="Enter"?Y(Z):B.key==="Escape"&&(M(null),ee(""))},K=(B,Z)=>{B.stopPropagation(),de(Z),qe(null)},V=(B,Z)=>{B.stopPropagation(),oe(Z),qe(null)},X=(B,Z)=>{B.stopPropagation(),qe(q===Z?null:Z)};return ye.length===0&&Object.keys(a).length===0?l.jsx("div",{className:"layers-panel layers-panel--empty",children:l.jsxs("div",{className:"layers-panel__empty-state",children:[l.jsx("span",{className:"layers-panel__empty-icon",children:""}),l.jsx("p",{children:"No elements yet"}),l.jsx("span",{className:"layers-panel__empty-hint",children:"Add courts, tracks, motifs, shapes, or text"})]})}):l.jsxs("div",{className:"layers-panel",children:[l.jsxs("div",{className:"layers-panel__header",children:[l.jsx("h4",{children:"Layers"}),l.jsx("span",{className:"layers-panel__count",children:ye.length})]}),l.jsx("div",{className:"layers-panel__hint",children:"Drag to reorder layers. Top = front, bottom = back."}),l.jsx("div",{className:"layers-panel__list",children:ye.map((B,Z)=>{const G=Me(B),re=Xe(B),z=B===Pt,ne=Z===0,se=Z===ye.length-1,ue=ae===B;return l.jsxs("div",{className:`layer-item ${re?"layer-item--selected":""} ${z?"layer-item--drag-over":""} ${G.locked?"layer-item--locked":""} ${G.visible?"":"layer-item--hidden"}`,draggable:!G.locked&&!ue,onDragStart:ie=>c(ie,B),onDragEnd:f,onDragOver:ie=>b(ie,B),onDragLeave:_,onDrop:ie=>C(ie,B),onClick:()=>!ue&&$e(B),children:[l.jsx("span",{className:`layer-item__handle ${G.locked?"layer-item__handle--disabled":""}`,title:G.locked?"Locked":"Drag to reorder",children:G.locked?"":""}),ue?l.jsx("input",{type:"text",className:"layer-item__rename-input",value:L,onChange:ie=>ee(ie.target.value),onBlur:()=>Y(B),onKeyDown:ie=>Q(ie,B),autoFocus:!0,onClick:ie=>ie.stopPropagation()}):l.jsx("span",{className:`layer-item__name ${G.visible?"":"layer-item__name--hidden"}`,children:G.name}),l.jsx("div",{className:"layer-item__indicators",children:!G.visible&&l.jsx("span",{className:"layer-item__indicator",title:"Hidden",children:""})}),l.jsxs("div",{className:"layer-item__actions",children:[l.jsx("button",{className:"layer-item__menu-btn",onClick:ie=>X(ie,B),title:"More actions",children:""}),q===B&&l.jsxs("div",{className:"layer-item__menu",children:[l.jsx("button",{onClick:ie=>A(ie,B),disabled:ne,children:" Bring to Front"}),l.jsx("button",{onClick:ie=>T(ie,B),disabled:se,children:" Send to Back"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:ie=>N(ie,B),children:" Duplicate"}),l.jsx("button",{onClick:ie=>F(ie,B),children:" Rename"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:ie=>K(ie,B),children:G.locked?" Unlock":" Lock"}),l.jsx("button",{onClick:ie=>V(ie,B),children:G.visible?" Hide":" Show"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:ie=>$(ie,B),className:"layer-item__menu-delete",children:" Delete"})]})]})]},B)})}),Object.keys(a).length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"layers-panel__section-divider",children:l.jsx("span",{children:"Groups"})}),l.jsx("div",{className:"layers-panel__list layers-panel__list--groups",children:Object.entries(a).map(([B,Z])=>{const G=pe.has(B),re=v===B,z=w===B,ne=Z.customName||"Group";return l.jsxs("div",{className:"layer-group",children:[l.jsxs("div",{className:`layer-item layer-item--group ${re?"layer-item--selected":""} ${z?"layer-item--editing":""} ${Z.locked?"layer-item--locked":""}`,onClick:()=>!Z.locked&&U(B),onDoubleClick:()=>!Z.locked&&R(B),children:[l.jsx("button",{className:"layer-item__expand-btn",onClick:se=>{se.stopPropagation(),ve(ue=>{const ie=new Set(ue);return ie.has(B)?ie.delete(B):ie.add(B),ie})},title:G?"Collapse":"Expand",children:G?"":""}),l.jsx("span",{className:"layer-item__handle layer-item__handle--group",children:Z.locked?"":""}),l.jsxs("span",{className:"layer-item__name",children:[ne,l.jsxs("span",{className:"layer-item__child-count",children:["(",Z.childIds.length,")"]})]}),z&&l.jsx("span",{className:"layer-item__edit-indicator",title:"Editing group",children:""}),l.jsxs("div",{className:"layer-item__actions",children:[l.jsx("button",{className:"layer-item__menu-btn",onClick:se=>X(se,B),title:"More actions",children:""}),q===B&&l.jsxs("div",{className:"layer-item__menu",children:[l.jsx("button",{onClick:se=>{se.stopPropagation(),R(B),qe(null)},children:" Edit Group"}),l.jsx("button",{onClick:se=>{se.stopPropagation(),ce(B),qe(null)},children:" Ungroup"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:se=>{se.stopPropagation(),de(B),qe(null)},children:Z.locked?" Unlock":" Lock"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:se=>{se.stopPropagation(),confirm(`Delete group "${ne}" and all its contents?`)&&te(B),qe(null)},className:"layer-item__menu-delete",children:" Delete Group"})]})]})]}),G&&l.jsx("div",{className:"layer-group__children",children:Z.childIds.map(se=>{const ue=Me(se),ie=se===p||se===h;return l.jsxs("div",{className:`layer-item layer-item--child ${ie?"layer-item--selected":""}`,onClick:be=>{be.stopPropagation(),z&&$e(se)},children:[l.jsx("span",{className:"layer-item__indent"}),l.jsx("span",{className:"layer-item__handle layer-item__handle--disabled",children:ue.icon}),l.jsx("span",{className:`layer-item__name ${ue.visible?"":"layer-item__name--hidden"}`,children:ue.name})]},se)})})]},B)})}),w&&l.jsx("div",{className:"layers-panel__exit-group",children:l.jsx("button",{className:"layers-panel__exit-group-btn",onClick:()=>W(),children:" Exit Group Editing"})})]}),Object.keys(s).length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"layers-panel__section-divider",children:l.jsx("span",{children:"Exclusion Zones"})}),l.jsx("div",{className:"layers-panel__list layers-panel__list--exclusions",children:Object.keys(s).map(B=>{const Z=Me(B),G=Xe(B);return l.jsxs("div",{className:`layer-item layer-item--exclusion ${G?"layer-item--selected":""} ${Z.locked?"layer-item--locked":""} ${Z.visible?"":"layer-item--hidden"}`,onClick:()=>$e(B),children:[l.jsx("span",{className:"layer-item__handle layer-item__handle--disabled",children:Z.icon}),l.jsx("span",{className:`layer-item__name ${Z.visible?"":"layer-item__name--hidden"}`,children:Z.name}),l.jsx("div",{className:"layer-item__indicators",children:!Z.visible&&l.jsx("span",{className:"layer-item__indicator",title:"Hidden",children:""})}),l.jsxs("div",{className:"layer-item__actions",children:[l.jsx("button",{className:"layer-item__menu-btn",onClick:re=>X(re,B),title:"More actions",children:""}),q===B&&l.jsxs("div",{className:"layer-item__menu",children:[l.jsx("button",{onClick:re=>F(re,B),children:" Rename"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:re=>K(re,B),children:Z.locked?" Unlock":" Lock"}),l.jsx("button",{onClick:re=>V(re,B),children:Z.visible?" Hide":" Show"}),l.jsx("div",{className:"layer-item__menu-divider"}),l.jsx("button",{onClick:re=>$(re,B),className:"layer-item__menu-delete",children:" Delete"})]})]})]},B)})})]}),l.jsx("div",{className:"layers-panel__footer",children:l.jsx("span",{className:"layers-panel__shortcut-hint",children:"[ ] to reorder  G to group  G to ungroup"})})]})}async function uN(){var n,r;const e=await ti.auth.getSession(),t=(r=(n=e==null?void 0:e.data)==null?void 0:n.session)==null?void 0:r.access_token;if(!t)throw new Error("Not authenticated");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async function dN(e){const t=await uN(),n=await fetch("/api/projects/create",{method:"POST",headers:t,body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Unable to create project. Please check your connection and try again.")}return n.json()}async function yw(){const e=await uN(),t=await fetch("/api/projects/list",{method:"GET",headers:e});if(!t.ok){const n=await t.json();throw new Error(n.error||"Unable to load your projects. Please refresh the page and try again.")}return t.json()}function A7(e,t={}){var n,r;return{type:"sports_surface",version:"1.0",name:t.name||e.name||"Untitled Design",description:t.description||e.description||"",tags:t.tags||e.tags||[],surface:e.surface,courts:P7(e.courts),tracks:N7(e.tracks),motifs:O7(e.motifs),exclusionZones:R7(e.exclusionZones),shapes:M7(e.shapes),texts:L7(e.texts),elementOrder:e.elementOrder||[],customMarkings:e.customMarkings||[],backgroundZones:e.backgroundZones||[],dimensions:{width_mm:((n=e.surface)==null?void 0:n.width_mm)||5e4,length_mm:((r=e.surface)==null?void 0:r.length_mm)||5e4}}}function P7(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,templateId:n.templateId,template:n.template,position:n.position,rotation:n.rotation,scale:n.scale,lineColorOverrides:n.lineColorOverrides||{},zoneColorOverrides:n.zoneColorOverrides||{},courtSurfaceColor:n.courtSurfaceColor}])):{}}function N7(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,templateId:n.templateId,template:n.template,position:n.position,rotation:n.rotation,parameters:n.parameters,trackSurfaceColor:n.trackSurfaceColor,laneSurfaceColors:n.laneSurfaceColors||[],trackLineColor:n.trackLineColor}])):{}}function O7(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,type:"motif",sourceDesignId:n.sourceDesignId,sourceDesignName:n.sourceDesignName,sourceThumbnailUrl:n.sourceThumbnailUrl,svgContent:n.svgContent,originalWidth_mm:n.originalWidth_mm,originalHeight_mm:n.originalHeight_mm,position:n.position,rotation:n.rotation,scale:n.scale}])):{}}function R7(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,type:"exclusion",shapeType:n.shapeType,sides:n.sides,width_mm:n.width_mm,height_mm:n.height_mm,position:n.position,rotation:n.rotation,cornerRadius:n.cornerRadius,locked:n.locked,visible:n.visible,customName:n.customName,controlPoints:n.controlPoints}])):{}}function M7(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,shapeType:n.shapeType,controlPoints:n.controlPoints,width_mm:n.width_mm,height_mm:n.height_mm,position:n.position,rotation:n.rotation,fillColor:n.fillColor,strokeEnabled:n.strokeEnabled,strokeColor:n.strokeColor,strokeWidth_mm:n.strokeWidth_mm,sides:n.sides,cornerRadius:n.cornerRadius,closed:n.closed,smooth:n.smooth,editPointsVisible:n.editPointsVisible}])):{}}function L7(e){return e?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{id:n.id,content:n.content,fontFamily:n.fontFamily,fontSize_mm:n.fontSize_mm,scale_x:n.scale_x??1,scale_y:n.scale_y??1,fontWeight:n.fontWeight,fontStyle:n.fontStyle,textAlign:n.textAlign,position:n.position,rotation:n.rotation,fillColor:n.fillColor,strokeColor:n.strokeColor,strokeWidth_mm:n.strokeWidth_mm}])):{}}function I7(e){var r,i;const t=[];return e.surface||t.push("Surface configuration is required"),(!((r=e.surface)!=null&&r.width_mm)||!((i=e.surface)!=null&&i.length_mm))&&t.push("Surface dimensions are required"),e.courts&&Object.keys(e.courts).length>0||e.tracks&&Object.keys(e.tracks).length>0||e.motifs&&Object.keys(e.motifs).length>0||t.push("Add at least one court, track, or motif to save"),{valid:t.length===0,errors:t}}async function $7(e,t=400){return new Promise((n,r)=>{try{const i=e.cloneNode(!0);i.querySelectorAll(".court-canvas__court--selected, .transform-handles").forEach(v=>{v.classList.remove("court-canvas__court--selected")}),i.querySelectorAll(".transform-handles").forEach(v=>v.remove());const s=e.getAttribute("viewBox").split(" ").map(Number),a=s[2],o=s[3];let u,d;a>o?(u=t,d=Math.round(o/a*t)):(d=t,u=Math.round(a/o*t)),i.setAttribute("width",u),i.setAttribute("height",d);const h=new XMLSerializer().serializeToString(i),p=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(p),g=new Image;g.onload=()=>{const v=document.createElement("canvas");v.width=u,v.height=d;const w=v.getContext("2d");w.fillStyle="#ffffff",w.fillRect(0,0,u,d),w.drawImage(g,0,0,u,d),v.toBlob(S=>{URL.revokeObjectURL(m),n(S)},"image/png",.9)},g.onerror=v=>{URL.revokeObjectURL(m),r(new Error("Failed to load SVG for thumbnail"))},g.src=m}catch(i){r(i)}})}async function D7(e){const n=`thumbnails/sports/${`sports-${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`}`,{data:r,error:i}=await ti.storage.from("tpv-studio-uploads").upload(n,e,{cacheControl:"3600",contentType:"image/png",upsert:!1});if(i)throw i;const{data:{publicUrl:s}}=ti.storage.from("tpv-studio-uploads").getPublicUrl(n);return s}function z7({existingDesignId:e=null,initialName:t="",svgRef:n=null,onClose:r,onSaved:i}){const s=tn(Re=>Re.exportDesignData),[a,o]=fe.useState(t),[u,d]=fe.useState(""),[h,p]=fe.useState(""),[m,g]=fe.useState(""),[v,w]=fe.useState(!1),[S,x]=fe.useState([]),[k,j]=fe.useState(!1),[O,I]=fe.useState(""),[E,U]=fe.useState("#1a365d"),[D,R]=fe.useState(!1),[W,ce]=fe.useState(!1),[te,me]=fe.useState(!1),[H,ge]=fe.useState(null);fe.useEffect(()=>{Ee()},[]);const Ee=async()=>{try{const{projects:Re}=await yw();x(Re)}catch(Re){console.error("Failed to load projects:",Re),ge("Failed to load projects")}},ke=async()=>{if(!O.trim()){ge("Project name is required");return}me(!0),ge(null);try{const{project:Re}=await dN({name:O.trim(),color:E});x([Re,...S]),p(Re.id),j(!1),I(""),U("#1a365d")}catch(Re){console.error("Failed to create project:",Re),ge(Re.message)}finally{me(!1)}},ze=async(Re=!1)=>{if(!a.trim()){ge("Design name is required");return}const _e=s(),Pe=I7(_e);if(!Pe.valid){ge(Pe.errors.join(", "));return}Re?ce(!0):R(!0),ge(null);try{let it=null;if(n!=null&&n.current)try{console.log("[SPORTS-SAVE] Generating thumbnail...");const de=await $7(n.current);console.log("[SPORTS-SAVE] Uploading thumbnail..."),it=await D7(de),console.log("[SPORTS-SAVE] Thumbnail uploaded:",it)}catch(de){console.warn("[SPORTS-SAVE] Thumbnail generation failed, continuing without:",de)}const tt=A7(_e,{name:a.trim(),description:u.trim()||"",tags:m.split(",").map(de=>de.trim()).filter(de=>de)});console.log("[SPORTS-SAVE] Serialized design data:",tt);const Ue={name:a.trim(),description:u.trim()||null,project_id:h||null,tags:m.split(",").map(de=>de.trim()).filter(de=>de),is_public:v,design_data:tt,thumbnail_url:it};e&&!Re&&(Ue.id=e);const ut=await eg(Ue);i&&i(ut,a.trim()),r()}catch(it){console.error("Failed to save design:",it),ge(it.message)}finally{R(!1),ce(!1)}},xe=["#1a365d","#ff6b35","#4a90e2","#50c878","#9b59b6","#e74c3c"];return l.jsx("div",{className:"modal-overlay",onClick:r,children:l.jsxs("div",{className:"modal-content save-design-modal",onClick:Re=>Re.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:e?"Update Design":"Save Design"}),l.jsx("button",{onClick:r,className:"close-button",children:""})]}),l.jsxs("div",{className:"modal-body",children:[H&&l.jsx("div",{className:"error-message",children:H}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-name",children:"Design Name *"}),l.jsx("input",{id:"design-name",type:"text",value:a,onChange:Re=>o(Re.target.value),placeholder:"e.g., Multi-Sport Court Design",autoFocus:!0,disabled:D||W})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-description",children:"Description"}),l.jsx("textarea",{id:"design-description",value:u,onChange:Re=>d(Re.target.value),placeholder:"Optional notes about this sports surface design...",rows:3,disabled:D||W})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-project",children:"Project"}),k?l.jsxs("div",{className:"new-project-form",children:[l.jsxs("div",{className:"input-row",children:[l.jsx("input",{type:"text",value:O,onChange:Re=>I(Re.target.value),placeholder:"Project name...",disabled:te}),l.jsx("div",{className:"color-picker-inline",children:xe.map(Re=>l.jsx("button",{type:"button",className:`color-swatch ${E===Re?"active":""}`,style:{backgroundColor:Re},onClick:()=>U(Re),disabled:te},Re))})]}),l.jsxs("div",{className:"button-row",children:[l.jsx("button",{type:"button",onClick:ke,className:"btn-primary btn-small",disabled:te,children:te?"Creating...":"Create"}),l.jsx("button",{type:"button",onClick:()=>j(!1),className:"btn-secondary btn-small",disabled:te,children:"Cancel"})]})]}):l.jsxs("div",{className:"project-selector",children:[l.jsxs("select",{id:"design-project",value:h,onChange:Re=>p(Re.target.value),disabled:D||W,children:[l.jsx("option",{value:"",children:"No Project"}),S.map(Re=>l.jsxs("option",{value:Re.id,children:[Re.name," (",Re.design_count," designs)"]},Re.id))]}),l.jsx("button",{type:"button",onClick:()=>j(!0),className:"btn-secondary btn-small",disabled:D||W,children:"+ New Project"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-tags",children:"Tags"}),l.jsx("input",{id:"design-tags",type:"text",value:m,onChange:Re=>g(Re.target.value),placeholder:"e.g., tennis, multi-sport, school (comma-separated)",disabled:D||W}),l.jsx("small",{className:"help-text",children:"Separate tags with commas"})]}),l.jsx("div",{className:"form-group checkbox-group",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:v,onChange:Re=>w(Re.target.checked),disabled:D||W}),l.jsx("span",{children:"Make this design public (shareable link)"})]})})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{onClick:r,className:"btn-secondary",disabled:D||W,children:"Cancel"}),e&&l.jsx("button",{onClick:()=>ze(!0),className:"btn-secondary",disabled:D||W,children:W?"Saving...":"Save as New"}),l.jsx("button",{onClick:()=>ze(!1),className:"btn-primary",disabled:D||W,children:D?"Saving...":e?"Update":"Save Design"})]})]})})}function F7(){return new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})})}function bw(e,t){var h,p,m,g;if(!e)throw new Error("SVG element not found");const n=e.cloneNode(!0);n.querySelectorAll('.court-canvas__selection-outline, .transform-handles, .track-resize-handles, [class*="selection"], [class*="handle"]').forEach(v=>v.remove());const i=document.createElementNS("http://www.w3.org/2000/svg","title");i.textContent=(t==null?void 0:t.name)||"Sports Surface Design",n.insertBefore(i,n.firstChild);const s=document.createElementNS("http://www.w3.org/2000/svg","desc");s.textContent=`Generated by TPV Designer. Dimensions: ${(((h=t==null?void 0:t.surface)==null?void 0:h.width_mm)/1e3).toFixed(1)}m  ${(((p=t==null?void 0:t.surface)==null?void 0:p.length_mm)/1e3).toFixed(1)}m`,n.insertBefore(s,n.firstChild.nextSibling),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const a=((m=t==null?void 0:t.surface)==null?void 0:m.width_mm)||5e4,o=((g=t==null?void 0:t.surface)==null?void 0:g.length_mm)||5e4;n.setAttribute("width",`${a}mm`),n.setAttribute("height",`${o}mm`),n.setAttribute("data-tpv-studio","1.0"),n.setAttribute("data-design-type","sports_surface");let d=new XMLSerializer().serializeToString(n);return d=`<?xml version="1.0" encoding="UTF-8"?>
`+d,d}function B7(e,t="sports-surface.svg"){const n=new Blob([e],{type:"image/svg+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}async function U7(e,t,n="sports-surface.png",r=2){return new Promise((i,s)=>{try{const a=bw(e,t),o=document.createElement("canvas"),u=o.getContext("2d"),d=e.getAttribute("viewBox");let h=1200,p=1200;if(d){const[,,w,S]=d.split(" ").map(Number),x=2400,k=S/w;h=Math.min(w/10,x),p=h*k}o.width=h*r,o.height=p*r;const m=new Image,g=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(g);m.onload=()=>{u.fillStyle="#ffffff",u.fillRect(0,0,o.width,o.height),u.drawImage(m,0,0,o.width,o.height),o.toBlob(w=>{if(!w){s(new Error("Failed to create PNG blob"));return}const S=URL.createObjectURL(w),x=document.createElement("a");x.href=S,x.download=n,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),URL.revokeObjectURL(S),i()},"image/png",.95)},m.onerror=w=>{URL.revokeObjectURL(v),s(new Error("Failed to load SVG for PNG conversion"))},m.src=v}catch(a){s(a)}})}function Dd(e,t){const n=(e||"sports-surface").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50),r=new Date().toISOString().split("T")[0];return`${n}_${r}.${t}`}function kS(e){const t=e.querySelectorAll('image[href^="data:image/svg+xml"]');console.log(`[EXPORT] Found ${t.length} motif images to inline`),t.forEach((n,r)=>{try{const i=n.getAttribute("href");if(!i)return;let s;if(i.includes(",")){const O=i.split(",")[1];i.includes("base64")?s=atob(O):s=decodeURIComponent(O)}else{console.warn(`[EXPORT] Motif ${r}: Invalid data URL format`);return}const u=new DOMParser().parseFromString(s,"image/svg+xml").documentElement;if(u.querySelector("parsererror")){console.warn(`[EXPORT] Motif ${r}: SVG parse error`);return}const d=parseFloat(n.getAttribute("x"))||0,h=parseFloat(n.getAttribute("y"))||0,p=parseFloat(n.getAttribute("width")),m=parseFloat(n.getAttribute("height"));if(!p||!m){console.warn(`[EXPORT] Motif ${r}: Missing dimensions`);return}const g=u.getAttribute("viewBox");let v=1,w=1;if(g){const O=g.split(/\s+/).map(Number);if(O.length===4){const[,,I,E]=O;I>0&&E>0&&(v=p/I,w=m/E)}}const S=n.closest("g"),x=(S==null?void 0:S.getAttribute("transform"))||"",k=document.createElementNS("http://www.w3.org/2000/svg","g");k.setAttribute("class","motif-inline"),k.setAttribute("transform",`translate(${d}, ${h}) scale(${v}, ${w})`);const j=u.querySelector("defs");if(j){const O=e.querySelector("defs")||(()=>{const I=document.createElementNS("http://www.w3.org/2000/svg","defs");return e.insertBefore(I,e.firstChild),I})();for(;j.firstChild;)O.appendChild(j.firstChild)}for(;u.firstChild;)u.firstChild.nodeName!=="defs"?k.appendChild(u.firstChild):u.removeChild(u.firstChild);n.parentNode.replaceChild(k,n),console.log(`[EXPORT] Motif ${r}: Inlined successfully (scale: ${v.toFixed(3)}, ${w.toFixed(3)})`)}catch(i){console.warn(`[EXPORT] Failed to inline motif ${r}:`,i.message)}})}function ih(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hN={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(d,h){if(!i[d]){if(!r[d]){var p=typeof ih=="function"&&ih;if(!h&&p)return p(d,!0);if(o)return o(d,!0);var m=new Error("Cannot find module '"+d+"'");throw m.code="MODULE_NOT_FOUND",m}var g=i[d]={exports:{}};r[d][0].call(g.exports,function(v){var w=r[d][1][v];return a(w||v)},g,g.exports,n,r,i,s)}return i[d].exports}for(var o=typeof ih=="function"&&ih,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var d,h,p,m,g,v,w,S=[],x=0,k=u.length,j=k,O=s.getTypeOf(u)!=="string";x<u.length;)j=k-x,p=O?(d=u[x++],h=x<k?u[x++]:0,x<k?u[x++]:0):(d=u.charCodeAt(x++),h=x<k?u.charCodeAt(x++):0,x<k?u.charCodeAt(x++):0),m=d>>2,g=(3&d)<<4|h>>4,v=1<j?(15&h)<<2|p>>6:64,w=2<j?63&p:64,S.push(o.charAt(m)+o.charAt(g)+o.charAt(v)+o.charAt(w));return S.join("")},i.decode=function(u){var d,h,p,m,g,v,w=0,S=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var k,j=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&j--,u.charAt(u.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=a.uint8array?new Uint8Array(0|j):new Array(0|j);w<u.length;)d=o.indexOf(u.charAt(w++))<<2|(m=o.indexOf(u.charAt(w++)))>>4,h=(15&m)<<4|(g=o.indexOf(u.charAt(w++)))>>2,p=(3&g)<<6|(v=o.indexOf(u.charAt(w++))),k[S++]=d,g!==64&&(k[S++]=h),v!==64&&(k[S++]=p);return k}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function d(h,p,m,g,v){this.compressedSize=h,this.uncompressedSize=p,this.crc32=m,this.compression=g,this.compressedContent=v}d.prototype={getContentWorker:function(){var h=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return h.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,p,m){return h.pipe(new o).pipe(new u("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var o,u=[],d=0;d<256;d++){o=d;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;u[d]=o}return u}();r.exports=function(o,u){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(d,h,p,m){var g=a,v=m+p;d^=-1;for(var w=m;w<v;w++)d=d>>>8^g[255&(d^h[w])];return-1^d}(0|u,o,o.length,0):function(d,h,p,m){var g=a,v=m+p;d^=-1;for(var w=m;w<v;w++)d=d>>>8^g[255&(d^h.charCodeAt(w))];return-1^d}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),u=n("./stream/GenericWorker"),d=s?"uint8array":"array";function h(p,m){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}i.magic="\b\0",o.inherits(h,u),h.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(d,p.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},i.compressWorker=function(p){return new h("Deflate",p)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(g,v){var w,S="";for(w=0;w<v;w++)S+=String.fromCharCode(255&g),g>>>=8;return S}function a(g,v,w,S,x,k){var j,O,I=g.file,E=g.compression,U=k!==d.utf8encode,D=o.transformTo("string",k(I.name)),R=o.transformTo("string",d.utf8encode(I.name)),W=I.comment,ce=o.transformTo("string",k(W)),te=o.transformTo("string",d.utf8encode(W)),me=R.length!==I.name.length,H=te.length!==W.length,ge="",Ee="",ke="",ze=I.dir,xe=I.date,Re={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(Re.crc32=g.crc32,Re.compressedSize=g.compressedSize,Re.uncompressedSize=g.uncompressedSize);var _e=0;v&&(_e|=8),U||!me&&!H||(_e|=2048);var Pe=0,it=0;ze&&(Pe|=16),x==="UNIX"?(it=798,Pe|=function(Ue,ut){var de=Ue;return Ue||(de=ut?16893:33204),(65535&de)<<16}(I.unixPermissions,ze)):(it=20,Pe|=function(Ue){return 63&(Ue||0)}(I.dosPermissions)),j=xe.getUTCHours(),j<<=6,j|=xe.getUTCMinutes(),j<<=5,j|=xe.getUTCSeconds()/2,O=xe.getUTCFullYear()-1980,O<<=4,O|=xe.getUTCMonth()+1,O<<=5,O|=xe.getUTCDate(),me&&(Ee=s(1,1)+s(h(D),4)+R,ge+="up"+s(Ee.length,2)+Ee),H&&(ke=s(1,1)+s(h(ce),4)+te,ge+="uc"+s(ke.length,2)+ke);var tt="";return tt+=`
\0`,tt+=s(_e,2),tt+=E.magic,tt+=s(j,2),tt+=s(O,2),tt+=s(Re.crc32,4),tt+=s(Re.compressedSize,4),tt+=s(Re.uncompressedSize,4),tt+=s(D.length,2),tt+=s(ge.length,2),{fileRecord:p.LOCAL_FILE_HEADER+tt+D+ge,dirRecord:p.CENTRAL_FILE_HEADER+s(it,2)+tt+s(ce.length,2)+"\0\0\0\0"+s(Pe,4)+s(S,4)+D+ge+ce}}var o=n("../utils"),u=n("../stream/GenericWorker"),d=n("../utf8"),h=n("../crc32"),p=n("../signature");function m(g,v,w,S){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=S,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,u),m.prototype.push=function(g){var v=g.meta.percent||0,w=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-S-1))/w:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var w=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,w=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(S){return p.DATA_DESCRIPTOR+s(S.crc32,4)+s(S.compressedSize,4)+s(S.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-g,S=function(x,k,j,O,I){var E=o.transformTo("string",I(O));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(k,4)+s(j,4)+s(E.length,2)+E}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(w){v.processChunk(w)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(w){v.error(w)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var w=0;w<v.length;w++)try{v[w].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(o,u,d){var h=new a(u.streamFiles,d,u.platform,u.encodeFileName),p=0;try{o.forEach(function(m,g){p++;var v=function(k,j){var O=k||j,I=s[O];if(!I)throw new Error(O+" is not a valid compression method !");return I}(g.options.compression,u.compression),w=g.options.compressionOptions||u.compressionOptions||{},S=g.dir,x=g.date;g._compressWorker(v,w).withStreamInfo("file",{name:m,dir:S,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=p}catch(m){h.error(m)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),u=n("./zipEntries"),d=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function p(m){return new a.Promise(function(g,v){var w=m.decompressed.getContentWorker().pipe(new d);w.on("error",function(S){v(S)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(m)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(w){var S=new u(g);return S.load(w),S}).then(function(w){var S=[a.Promise.resolve(w)],x=w.files;if(g.checkCRC32)for(var k=0;k<x.length;k++)S.push(p(x[k]));return a.Promise.all(S)}).then(function(w){for(var S=w.shift(),x=S.files,k=0;k<x.length;k++){var j=x[k],O=j.fileNameStr,I=s.resolve(j.fileNameStr);v.file(I,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:g.createFolders}),j.dir||(v.file(I).unsafeOriginalName=O)}return S.zipComment.length&&(v.comment=S.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(u,d){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(o,a),o.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(o,u,d){s.call(this,u),this._helper=o;var h=this;o.on("data",function(p,m){h.push(p)||h._helper.pause(),d&&d(m)}).on("error",function(p){h.emit("error",p)}).on("end",function(){h.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(I,E,U){var D,R=o.getTypeOf(E),W=o.extend(U||{},h);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(I=x(I)),W.createFolders&&(D=S(I))&&k.call(this,D,!0);var ce=R==="string"&&W.binary===!1&&W.base64===!1;U&&U.binary!==void 0||(W.binary=!ce),(E instanceof p&&E.uncompressedSize===0||W.dir||!E||E.length===0)&&(W.base64=!1,W.binary=!0,E="",W.compression="STORE",R="string");var te=null;te=E instanceof p||E instanceof u?E:v.isNode&&v.isStream(E)?new w(I,E):o.prepareContent(I,E,W.binary,W.optimizedBinaryString,W.base64);var me=new m(I,te,W);this.files[I]=me}var a=n("./utf8"),o=n("./utils"),u=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),h=n("./defaults"),p=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),S=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var E=I.lastIndexOf("/");return 0<E?I.substring(0,E):""},x=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},k=function(I,E){return E=E!==void 0?E:h.createFolders,I=x(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:E}),this.files[I]};function j(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var E,U,D;for(E in this.files)D=this.files[E],(U=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&I(U,D)},filter:function(I){var E=[];return this.forEach(function(U,D){I(U,D)&&E.push(D)}),E},file:function(I,E,U){if(arguments.length!==1)return I=this.root+I,s.call(this,I,E,U),this;if(j(I)){var D=I;return this.filter(function(W,ce){return!ce.dir&&D.test(W)})}var R=this.files[this.root+I];return R&&!R.dir?R:null},folder:function(I){if(!I)return this;if(j(I))return this.filter(function(R,W){return W.dir&&I.test(R)});var E=this.root+I,U=k.call(this,E),D=this.clone();return D.root=U.name,D},remove:function(I){I=this.root+I;var E=this.files[I];if(E||(I.slice(-1)!=="/"&&(I+="/"),E=this.files[I]),E&&!E.dir)delete this.files[I];else for(var U=this.filter(function(R,W){return W.name.slice(0,I.length)===I}),D=0;D<U.length;D++)delete this.files[U[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var E,U={};try{if((U=o.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");o.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var D=U.comment||this.comment||"";E=g.generateWorker(this,U,D)}catch(R){(E=new u("error")).error(R)}return new d(E,U.type||"string",U.mimeType)},generateAsync:function(I,E){return this.generateInternalStream(I).accumulate(E)},generateNodeStream:function(I,E){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(E)}};r.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),d=o.charCodeAt(1),h=o.charCodeAt(2),p=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===d&&this.data[m+2]===h&&this.data[m+3]===p)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),d=o.charCodeAt(1),h=o.charCodeAt(2),p=o.charCodeAt(3),m=this.readData(4);return u===m[0]&&d===m[1]&&h===m[2]&&p===m[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,d=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=o,d},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),u=n("./StringReader"),d=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(p){var m=s.getTypeOf(p);return s.checkSupport(m),m!=="string"||a.uint8array?m==="nodebuffer"?new d(p):a.uint8array?new h(s.transformTo("uint8array",p)):new o(s.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}a.prototype.processChunk.call(this,u)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=s.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),u=n("../base64"),d=n("../support"),h=n("../external"),p=null;if(d.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,w){return new h.Promise(function(S,x){var k=[],j=v._internalType,O=v._outputType,I=v._mimeType;v.on("data",function(E,U){k.push(E),w&&w(U)}).on("error",function(E){k=[],x(E)}).on("end",function(){try{var E=function(U,D,R){switch(U){case"blob":return s.newBlob(s.transformTo("arraybuffer",D),R);case"base64":return u.encode(D);default:return s.transformTo(U,D)}}(O,function(U,D){var R,W=0,ce=null,te=0;for(R=0;R<D.length;R++)te+=D[R].length;switch(U){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(ce=new Uint8Array(te),R=0;R<D.length;R++)ce.set(D[R],W),W+=D[R].length;return ce;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+U+"'")}}(j,k),I);S(E)}catch(U){x(U)}k=[]}).resume()})}function g(v,w,S){var x=w;switch(w){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=w,this._mimeType=S,s.checkSupport(x),this._worker=v.pipe(new a(x)),v.lock()}catch(k){this._worker=new o("error"),this._worker.error(k)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,w){var S=this;return v==="data"?this._worker.on(v,function(x){w.call(S,x.data,x.meta)}):this._worker.on(v,function(){s.delay(w,arguments,S)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),u=n("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}i.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var w,S,x,k,j,O=v.length,I=0;for(k=0;k<O;k++)(64512&(S=v.charCodeAt(k)))==55296&&k+1<O&&(64512&(x=v.charCodeAt(k+1)))==56320&&(S=65536+(S-55296<<10)+(x-56320),k++),I+=S<128?1:S<2048?2:S<65536?3:4;for(w=a.uint8array?new Uint8Array(I):new Array(I),k=j=0;j<I;k++)(64512&(S=v.charCodeAt(k)))==55296&&k+1<O&&(64512&(x=v.charCodeAt(k+1)))==56320&&(S=65536+(S-55296<<10)+(x-56320),k++),S<128?w[j++]=S:(S<2048?w[j++]=192|S>>>6:(S<65536?w[j++]=224|S>>>12:(w[j++]=240|S>>>18,w[j++]=128|S>>>12&63),w[j++]=128|S>>>6&63),w[j++]=128|63&S);return w}(g)},i.utf8decode=function(g){return a.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(v){var w,S,x,k,j=v.length,O=new Array(2*j);for(w=S=0;w<j;)if((x=v[w++])<128)O[S++]=x;else if(4<(k=d[x]))O[S++]=65533,w+=k-1;else{for(x&=k===2?31:k===3?15:7;1<k&&w<j;)x=x<<6|63&v[w++],k--;1<k?O[S++]=65533:x<65536?O[S++]=x:(x-=65536,O[S++]=55296|x>>10&1023,O[S++]=56320|1023&x)}return O.length!==S&&(O.subarray?O=O.subarray(0,S):O.length=S),s.applyFromCharCode(O)}(g=s.transformTo(a.uint8array?"uint8array":"array",g))},s.inherits(p,u),p.prototype.processChunk=function(g){var v=s.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var S=function(k,j){var O;for((j=j||k.length)>k.length&&(j=k.length),O=j-1;0<=O&&(192&k[O])==128;)O--;return O<0||O===0?j:O+d[k[O]]>j?O:j}(v),x=v;S!==v.length&&(a.uint8array?(x=v.subarray(0,S),this.leftOver=v.subarray(S,v.length)):(x=v.slice(0,S),this.leftOver=v.slice(S,v.length))),this.push({data:i.utf8decode(x),meta:g.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,s.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),u=n("./external");function d(w){return w}function h(w,S){for(var x=0;x<w.length;++x)S[x]=255&w.charCodeAt(x);return S}n("setimmediate"),i.newBlob=function(w,S){i.checkSupport("blob");try{return new Blob([w],{type:S})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(w),x.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(w,S,x){var k=[],j=0,O=w.length;if(O<=x)return String.fromCharCode.apply(null,w);for(;j<O;)S==="array"||S==="nodebuffer"?k.push(String.fromCharCode.apply(null,w.slice(j,Math.min(j+x,O)))):k.push(String.fromCharCode.apply(null,w.subarray(j,Math.min(j+x,O)))),j+=x;return k.join("")},stringifyByChar:function(w){for(var S="",x=0;x<w.length;x++)S+=String.fromCharCode(w[x]);return S},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(w){var S=65536,x=i.getTypeOf(w),k=!0;if(x==="uint8array"?k=p.applyCanBeUsed.uint8array:x==="nodebuffer"&&(k=p.applyCanBeUsed.nodebuffer),k)for(;1<S;)try{return p.stringifyByChunk(w,x,S)}catch{S=Math.floor(S/2)}return p.stringifyByChar(w)}function g(w,S){for(var x=0;x<w.length;x++)S[x]=w[x];return S}i.applyFromCharCode=m;var v={};v.string={string:d,array:function(w){return h(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return h(w,new Uint8Array(w.length))},nodebuffer:function(w){return h(w,o.allocBuffer(w.length))}},v.array={string:m,array:d,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(w)}},v.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:d,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:d,nodebuffer:function(w){return o.newBufferFrom(w)}},v.nodebuffer={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:d},i.transformTo=function(w,S){if(S=S||"",!w)return S;i.checkSupport(w);var x=i.getTypeOf(S);return v[x][w](S)},i.resolve=function(w){for(var S=w.split("/"),x=[],k=0;k<S.length;k++){var j=S[k];j==="."||j===""&&k!==0&&k!==S.length-1||(j===".."?x.pop():x.push(j))}return x.join("/")},i.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(w)?"nodebuffer":s.uint8array&&w instanceof Uint8Array?"uint8array":s.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(w){if(!s[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(w){var S,x,k="";for(x=0;x<(w||"").length;x++)k+="\\x"+((S=w.charCodeAt(x))<16?"0":"")+S.toString(16).toUpperCase();return k},i.delay=function(w,S,x){setImmediate(function(){w.apply(x||null,S||[])})},i.inherits=function(w,S){function x(){}x.prototype=S.prototype,w.prototype=new x},i.extend=function(){var w,S,x={};for(w=0;w<arguments.length;w++)for(S in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],S)&&x[S]===void 0&&(x[S]=arguments[w][S]);return x},i.prepareContent=function(w,S,x,k,j){return u.Promise.resolve(S).then(function(O){return s.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new u.Promise(function(I,E){var U=new FileReader;U.onload=function(D){I(D.target.result)},U.onerror=function(D){E(D.target.error)},U.readAsArrayBuffer(O)}):O}).then(function(O){var I=i.getTypeOf(O);return I?(I==="arraybuffer"?O=i.transformTo("uint8array",O):I==="string"&&(j?O=a.decode(O):x&&k!==!0&&(O=function(E){return h(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))}(O))),O):u.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),u=n("./zipEntry"),d=n("./support");function h(p){this.files=[],this.loadOptions=p}h.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(m)+", expected "+a.pretty(p)+")")}},isSignature:function(p,m){var g=this.reader.index;this.reader.setIndex(p);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=d.uint8array?"uint8array":"array",g=a.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,g,v=this.zip64EndOfCentralSize-44;0<v;)p=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),u=n("./crc32"),d=n("./utf8"),h=n("./compressions"),p=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(S){for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)&&h[x].magic===S)return h[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,w,S,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),w=g.readInt(2),S=g.readData(w),this.extraFields[v]={id:v,length:w,value:S};g.setIndex(x)},handleUTF8:function(){var g=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var x=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=s(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:d.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=s(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:d.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(v,w,S){this.name=v,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=w,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),u=n("./utf8"),d=n("./compressedObject"),h=n("./stream/GenericWorker");s.prototype={internalStream:function(v){var w=null,S="string";try{if(!v)throw new Error("No output type specified.");var x=(S=v.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),w=this._decompressWorker();var k=!this._dataBinary;k&&!x&&(w=w.pipe(new u.Utf8EncodeWorker)),!k&&x&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(j){(w=new h("error")).error(j)}return new a(w,S,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof d&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(S,v,w)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<p.length;g++)s.prototype[p[g]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,o,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var d=0,h=new u(v),p=s.document.createTextNode("");h.observe(p,{characterData:!0}),a=function(){p.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var w=s.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var m=new s.MessageChannel;m.port1.onmessage=v,a=function(){m.port2.postMessage(0)}}var g=[];function v(){var w,S;o=!0;for(var x=g.length;x;){for(S=g,g=[],w=-1;++w<x;)S[w]();x=g.length}o=!1}r.exports=function(w){g.push(w)!==1||o||a()}}).call(this,typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},u=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function p(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,x!==a&&w(this,x)}function m(x,k,j){this.promise=x,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function g(x,k,j){s(function(){var O;try{O=k(j)}catch(I){return o.reject(x,I)}O===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,O)})}function v(x){var k=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof k=="function")return function(){k.apply(x,arguments)}}function w(x,k){var j=!1;function O(U){j||(j=!0,o.reject(x,U))}function I(U){j||(j=!0,o.resolve(x,U))}var E=S(function(){k(I,O)});E.status==="error"&&O(E.value)}function S(x,k){var j={};try{j.value=x(k),j.status="success"}catch(O){j.status="error",j.value=O}return j}(r.exports=p).prototype.finally=function(x){if(typeof x!="function")return this;var k=this.constructor;return this.then(function(j){return k.resolve(x()).then(function(){return j})},function(j){return k.resolve(x()).then(function(){throw j})})},p.prototype.catch=function(x){return this.then(null,x)},p.prototype.then=function(x,k){if(typeof x!="function"&&this.state===d||typeof k!="function"&&this.state===u)return this;var j=new this.constructor(a);return this.state!==h?g(j,this.state===d?x:k,this.outcome):this.queue.push(new m(j,x,k)),j},m.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){o.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},o.resolve=function(x,k){var j=S(v,k);if(j.status==="error")return o.reject(x,j.value);var O=j.value;if(O)w(x,O);else{x.state=d,x.outcome=k;for(var I=-1,E=x.queue.length;++I<E;)x.queue[I].callFulfilled(k)}return x},o.reject=function(x,k){x.state=u,x.outcome=k;for(var j=-1,O=x.queue.length;++j<O;)x.queue[j].callRejected(k);return x},p.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},p.reject=function(x){var k=new this(a);return o.reject(k,x)},p.all=function(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=x.length,O=!1;if(!j)return this.resolve([]);for(var I=new Array(j),E=0,U=-1,D=new this(a);++U<j;)R(x[U],U);return D;function R(W,ce){k.resolve(W).then(function(te){I[ce]=te,++E!==j||O||(O=!0,o.resolve(D,I))},function(te){O||(O=!0,o.reject(D,te))})}},p.race=function(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=x.length,O=!1;if(!j)return this.resolve([]);for(var I=-1,E=new this(a);++I<j;)U=x[I],k.resolve(U).then(function(D){O||(O=!0,o.resolve(E,D))},function(D){O||(O=!0,o.reject(E,D))});var U;return E}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=Object.prototype.toString,p=0,m=-1,g=0,v=8;function w(x){if(!(this instanceof w))return new w(x);this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var j=s.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(j!==p)throw new Error(u[j]);if(k.header&&s.deflateSetHeader(this.strm,k.header),k.dictionary){var O;if(O=typeof k.dictionary=="string"?o.string2buf(k.dictionary):h.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(j=s.deflateSetDictionary(this.strm,O))!==p)throw new Error(u[j]);this._dict_set=!0}}function S(x,k){var j=new w(k);if(j.push(x,!0),j.err)throw j.msg||u[j.err];return j.result}w.prototype.push=function(x,k){var j,O,I=this.strm,E=this.options.chunkSize;if(this.ended)return!1;O=k===~~k?k:k===!0?4:0,typeof x=="string"?I.input=o.string2buf(x):h.call(x)==="[object ArrayBuffer]"?I.input=new Uint8Array(x):I.input=x,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(E),I.next_out=0,I.avail_out=E),(j=s.deflate(I,O))!==1&&j!==p)return this.onEnd(j),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&j!==1);return O===4?(j=s.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===p):O!==2||(this.onEnd(p),!(I.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=w,i.deflate=S,i.deflateRaw=function(x,k){return(k=k||{}).raw=!0,S(x,k)},i.gzip=function(x,k){return(k=k||{}).gzip=!0,S(x,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/constants"),d=n("./zlib/messages"),h=n("./zlib/zstream"),p=n("./zlib/gzheader"),m=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},w||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||w&&w.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&!(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,S.windowBits);if(x!==u.Z_OK)throw new Error(d[x]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function v(w,S){var x=new g(S);if(x.push(w,!0),x.err)throw x.msg||d[x.err];return x.result}g.prototype.push=function(w,S){var x,k,j,O,I,E,U=this.strm,D=this.options.chunkSize,R=this.options.dictionary,W=!1;if(this.ended)return!1;k=S===~~S?S:S===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?U.input=o.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?U.input=new Uint8Array(w):U.input=w,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new a.Buf8(D),U.next_out=0,U.avail_out=D),(x=s.inflate(U,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&R&&(E=typeof R=="string"?o.string2buf(R):m.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,x=s.inflateSetDictionary(this.strm,E)),x===u.Z_BUF_ERROR&&W===!0&&(x=u.Z_OK,W=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&x!==u.Z_STREAM_END&&(U.avail_in!==0||k!==u.Z_FINISH&&k!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(U.output,U.next_out),O=U.next_out-j,I=o.buf2string(U.output,j),U.next_out=O,U.avail_out=D-O,O&&a.arraySet(U.output,U.output,j,O,0),this.onData(I)):this.onData(a.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(W=!0)}while((0<U.avail_in||U.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(k=u.Z_FINISH),k===u.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):k!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(U.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Inflate=g,i.inflate=v,i.inflateRaw=function(w,S){return(S=S||{}).raw=!0,v(w,S)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var p in h)h.hasOwnProperty(p)&&(u[p]=h[p])}}return u},i.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var a={arraySet:function(u,d,h,p,m){if(d.subarray&&u.subarray)u.set(d.subarray(h,h+p),m);else for(var g=0;g<p;g++)u[m+g]=d[h+g]},flattenChunks:function(u){var d,h,p,m,g,v;for(d=p=0,h=u.length;d<h;d++)p+=u[d].length;for(v=new Uint8Array(p),d=m=0,h=u.length;d<h;d++)g=u[d],v.set(g,m),m+=g.length;return v}},o={arraySet:function(u,d,h,p,m){for(var g=0;g<p;g++)u[m+g]=d[h+g]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(p,m){if(m<65537&&(p.subarray&&o||!p.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(p,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(p[v]);return g}u[254]=u[254]=1,i.string2buf=function(p){var m,g,v,w,S,x=p.length,k=0;for(w=0;w<x;w++)(64512&(g=p.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=p.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),k+=g<128?1:g<2048?2:g<65536?3:4;for(m=new s.Buf8(k),w=S=0;S<k;w++)(64512&(g=p.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=p.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),g<128?m[S++]=g:(g<2048?m[S++]=192|g>>>6:(g<65536?m[S++]=224|g>>>12:(m[S++]=240|g>>>18,m[S++]=128|g>>>12&63),m[S++]=128|g>>>6&63),m[S++]=128|63&g);return m},i.buf2binstring=function(p){return h(p,p.length)},i.binstring2buf=function(p){for(var m=new s.Buf8(p.length),g=0,v=m.length;g<v;g++)m[g]=p.charCodeAt(g);return m},i.buf2string=function(p,m){var g,v,w,S,x=m||p.length,k=new Array(2*x);for(g=v=0;g<x;)if((w=p[g++])<128)k[v++]=w;else if(4<(S=u[w]))k[v++]=65533,g+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&g<x;)w=w<<6|63&p[g++],S--;1<S?k[v++]=65533:w<65536?k[v++]=w:(w-=65536,k[v++]=55296|w>>10&1023,k[v++]=56320|1023&w)}return h(k,v)},i.utf8border=function(p,m){var g;for((m=m||p.length)>p.length&&(m=p.length),g=m-1;0<=g&&(192&p[g])==128;)g--;return g<0||g===0?m:g+u[p[g]]>m?g:m}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,o,u){for(var d=65535&s|0,h=s>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;h=h+(d=d+a[u++]|0)|0,--p;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,o=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;o[u]=a}return o}();r.exports=function(a,o,u,d){var h=s,p=d+u;a^=-1;for(var m=d;m<p;m++)a=a>>>8^h[255&(a^o[m])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),o=n("./trees"),u=n("./adler32"),d=n("./crc32"),h=n("./messages"),p=0,m=4,g=0,v=-2,w=-1,S=4,x=2,k=8,j=9,O=286,I=30,E=19,U=2*O+1,D=15,R=3,W=258,ce=W+R+1,te=42,me=113,H=1,ge=2,Ee=3,ke=4;function ze(q,qe){return q.msg=h[qe],qe}function xe(q){return(q<<1)-(4<q?9:0)}function Re(q){for(var qe=q.length;0<=--qe;)q[qe]=0}function _e(q){var qe=q.state,ae=qe.pending;ae>q.avail_out&&(ae=q.avail_out),ae!==0&&(a.arraySet(q.output,qe.pending_buf,qe.pending_out,ae,q.next_out),q.next_out+=ae,qe.pending_out+=ae,q.total_out+=ae,q.avail_out-=ae,qe.pending-=ae,qe.pending===0&&(qe.pending_out=0))}function Pe(q,qe){o._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,qe),q.block_start=q.strstart,_e(q.strm)}function it(q,qe){q.pending_buf[q.pending++]=qe}function tt(q,qe){q.pending_buf[q.pending++]=qe>>>8&255,q.pending_buf[q.pending++]=255&qe}function Ue(q,qe){var ae,M,L=q.max_chain_length,ee=q.strstart,pe=q.prev_length,ve=q.nice_match,ye=q.strstart>q.w_size-ce?q.strstart-(q.w_size-ce):0,Me=q.window,Xe=q.w_mask,$e=q.prev,c=q.strstart+W,f=Me[ee+pe-1],b=Me[ee+pe];q.prev_length>=q.good_match&&(L>>=2),ve>q.lookahead&&(ve=q.lookahead);do if(Me[(ae=qe)+pe]===b&&Me[ae+pe-1]===f&&Me[ae]===Me[ee]&&Me[++ae]===Me[ee+1]){ee+=2,ae++;do;while(Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&Me[++ee]===Me[++ae]&&ee<c);if(M=W-(c-ee),ee=c-W,pe<M){if(q.match_start=qe,ve<=(pe=M))break;f=Me[ee+pe-1],b=Me[ee+pe]}}while((qe=$e[qe&Xe])>ye&&--L!=0);return pe<=q.lookahead?pe:q.lookahead}function ut(q){var qe,ae,M,L,ee,pe,ve,ye,Me,Xe,$e=q.w_size;do{if(L=q.window_size-q.lookahead-q.strstart,q.strstart>=$e+($e-ce)){for(a.arraySet(q.window,q.window,$e,$e,0),q.match_start-=$e,q.strstart-=$e,q.block_start-=$e,qe=ae=q.hash_size;M=q.head[--qe],q.head[qe]=$e<=M?M-$e:0,--ae;);for(qe=ae=$e;M=q.prev[--qe],q.prev[qe]=$e<=M?M-$e:0,--ae;);L+=$e}if(q.strm.avail_in===0)break;if(pe=q.strm,ve=q.window,ye=q.strstart+q.lookahead,Me=L,Xe=void 0,Xe=pe.avail_in,Me<Xe&&(Xe=Me),ae=Xe===0?0:(pe.avail_in-=Xe,a.arraySet(ve,pe.input,pe.next_in,Xe,ye),pe.state.wrap===1?pe.adler=u(pe.adler,ve,Xe,ye):pe.state.wrap===2&&(pe.adler=d(pe.adler,ve,Xe,ye)),pe.next_in+=Xe,pe.total_in+=Xe,Xe),q.lookahead+=ae,q.lookahead+q.insert>=R)for(ee=q.strstart-q.insert,q.ins_h=q.window[ee],q.ins_h=(q.ins_h<<q.hash_shift^q.window[ee+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[ee+R-1])&q.hash_mask,q.prev[ee&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=ee,ee++,q.insert--,!(q.lookahead+q.insert<R)););}while(q.lookahead<ce&&q.strm.avail_in!==0)}function de(q,qe){for(var ae,M;;){if(q.lookahead<ce){if(ut(q),q.lookahead<ce&&qe===p)return H;if(q.lookahead===0)break}if(ae=0,q.lookahead>=R&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,ae=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),ae!==0&&q.strstart-ae<=q.w_size-ce&&(q.match_length=Ue(q,ae)),q.match_length>=R)if(M=o._tr_tally(q,q.strstart-q.match_start,q.match_length-R),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=R){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,ae=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else M=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(M&&(Pe(q,!1),q.strm.avail_out===0))return H}return q.insert=q.strstart<R-1?q.strstart:R-1,qe===m?(Pe(q,!0),q.strm.avail_out===0?Ee:ke):q.last_lit&&(Pe(q,!1),q.strm.avail_out===0)?H:ge}function oe(q,qe){for(var ae,M,L;;){if(q.lookahead<ce){if(ut(q),q.lookahead<ce&&qe===p)return H;if(q.lookahead===0)break}if(ae=0,q.lookahead>=R&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,ae=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=R-1,ae!==0&&q.prev_length<q.max_lazy_match&&q.strstart-ae<=q.w_size-ce&&(q.match_length=Ue(q,ae),q.match_length<=5&&(q.strategy===1||q.match_length===R&&4096<q.strstart-q.match_start)&&(q.match_length=R-1)),q.prev_length>=R&&q.match_length<=q.prev_length){for(L=q.strstart+q.lookahead-R,M=o._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-R),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=L&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+R-1])&q.hash_mask,ae=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=R-1,q.strstart++,M&&(Pe(q,!1),q.strm.avail_out===0))return H}else if(q.match_available){if((M=o._tr_tally(q,0,q.window[q.strstart-1]))&&Pe(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return H}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(M=o._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<R-1?q.strstart:R-1,qe===m?(Pe(q,!0),q.strm.avail_out===0?Ee:ke):q.last_lit&&(Pe(q,!1),q.strm.avail_out===0)?H:ge}function We(q,qe,ae,M,L){this.good_length=q,this.max_lazy=qe,this.nice_length=ae,this.max_chain=M,this.func=L}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*U),this.dyn_dtree=new a.Buf16(2*(2*I+1)),this.bl_tree=new a.Buf16(2*(2*E+1)),Re(this.dyn_ltree),Re(this.dyn_dtree),Re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*O+1),Re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*O+1),Re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ft(q){var qe;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=x,(qe=q.state).pending=0,qe.pending_out=0,qe.wrap<0&&(qe.wrap=-qe.wrap),qe.status=qe.wrap?te:me,q.adler=qe.wrap===2?0:1,qe.last_flush=p,o._tr_init(qe),g):ze(q,v)}function Pt(q){var qe=ft(q);return qe===g&&function(ae){ae.window_size=2*ae.w_size,Re(ae.head),ae.max_lazy_match=s[ae.level].max_lazy,ae.good_match=s[ae.level].good_length,ae.nice_match=s[ae.level].nice_length,ae.max_chain_length=s[ae.level].max_chain,ae.strstart=0,ae.block_start=0,ae.lookahead=0,ae.insert=0,ae.match_length=ae.prev_length=R-1,ae.match_available=0,ae.ins_h=0}(q.state),qe}function Ct(q,qe,ae,M,L,ee){if(!q)return v;var pe=1;if(qe===w&&(qe=6),M<0?(pe=0,M=-M):15<M&&(pe=2,M-=16),L<1||j<L||ae!==k||M<8||15<M||qe<0||9<qe||ee<0||S<ee)return ze(q,v);M===8&&(M=9);var ve=new Ne;return(q.state=ve).strm=q,ve.wrap=pe,ve.gzhead=null,ve.w_bits=M,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=L+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+R-1)/R),ve.window=new a.Buf8(2*ve.w_size),ve.head=new a.Buf16(ve.hash_size),ve.prev=new a.Buf16(ve.w_size),ve.lit_bufsize=1<<L+6,ve.pending_buf_size=4*ve.lit_bufsize,ve.pending_buf=new a.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=qe,ve.strategy=ee,ve.method=ae,Pt(q)}s=[new We(0,0,0,0,function(q,qe){var ae=65535;for(ae>q.pending_buf_size-5&&(ae=q.pending_buf_size-5);;){if(q.lookahead<=1){if(ut(q),q.lookahead===0&&qe===p)return H;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var M=q.block_start+ae;if((q.strstart===0||q.strstart>=M)&&(q.lookahead=q.strstart-M,q.strstart=M,Pe(q,!1),q.strm.avail_out===0)||q.strstart-q.block_start>=q.w_size-ce&&(Pe(q,!1),q.strm.avail_out===0))return H}return q.insert=0,qe===m?(Pe(q,!0),q.strm.avail_out===0?Ee:ke):(q.strstart>q.block_start&&(Pe(q,!1),q.strm.avail_out),H)}),new We(4,4,8,4,de),new We(4,5,16,8,de),new We(4,6,32,32,de),new We(4,4,16,16,oe),new We(8,16,32,32,oe),new We(8,16,128,128,oe),new We(8,32,128,256,oe),new We(32,128,258,1024,oe),new We(32,258,258,4096,oe)],i.deflateInit=function(q,qe){return Ct(q,qe,k,15,8,0)},i.deflateInit2=Ct,i.deflateReset=Pt,i.deflateResetKeep=ft,i.deflateSetHeader=function(q,qe){return q&&q.state?q.state.wrap!==2?v:(q.state.gzhead=qe,g):v},i.deflate=function(q,qe){var ae,M,L,ee;if(!q||!q.state||5<qe||qe<0)return q?ze(q,v):v;if(M=q.state,!q.output||!q.input&&q.avail_in!==0||M.status===666&&qe!==m)return ze(q,q.avail_out===0?-5:v);if(M.strm=q,ae=M.last_flush,M.last_flush=qe,M.status===te)if(M.wrap===2)q.adler=0,it(M,31),it(M,139),it(M,8),M.gzhead?(it(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),it(M,255&M.gzhead.time),it(M,M.gzhead.time>>8&255),it(M,M.gzhead.time>>16&255),it(M,M.gzhead.time>>24&255),it(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),it(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(it(M,255&M.gzhead.extra.length),it(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(q.adler=d(q.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(it(M,0),it(M,0),it(M,0),it(M,0),it(M,0),it(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),it(M,3),M.status=me);else{var pe=k+(M.w_bits-8<<4)<<8;pe|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(pe|=32),pe+=31-pe%31,M.status=me,tt(M,pe),M.strstart!==0&&(tt(M,q.adler>>>16),tt(M,65535&q.adler)),q.adler=1}if(M.status===69)if(M.gzhead.extra){for(L=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>L&&(q.adler=d(q.adler,M.pending_buf,M.pending-L,L)),_e(q),L=M.pending,M.pending!==M.pending_buf_size));)it(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>L&&(q.adler=d(q.adler,M.pending_buf,M.pending-L,L)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){L=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>L&&(q.adler=d(q.adler,M.pending_buf,M.pending-L,L)),_e(q),L=M.pending,M.pending===M.pending_buf_size)){ee=1;break}ee=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,it(M,ee)}while(ee!==0);M.gzhead.hcrc&&M.pending>L&&(q.adler=d(q.adler,M.pending_buf,M.pending-L,L)),ee===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){L=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>L&&(q.adler=d(q.adler,M.pending_buf,M.pending-L,L)),_e(q),L=M.pending,M.pending===M.pending_buf_size)){ee=1;break}ee=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,it(M,ee)}while(ee!==0);M.gzhead.hcrc&&M.pending>L&&(q.adler=d(q.adler,M.pending_buf,M.pending-L,L)),ee===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&_e(q),M.pending+2<=M.pending_buf_size&&(it(M,255&q.adler),it(M,q.adler>>8&255),q.adler=0,M.status=me)):M.status=me),M.pending!==0){if(_e(q),q.avail_out===0)return M.last_flush=-1,g}else if(q.avail_in===0&&xe(qe)<=xe(ae)&&qe!==m)return ze(q,-5);if(M.status===666&&q.avail_in!==0)return ze(q,-5);if(q.avail_in!==0||M.lookahead!==0||qe!==p&&M.status!==666){var ve=M.strategy===2?function(ye,Me){for(var Xe;;){if(ye.lookahead===0&&(ut(ye),ye.lookahead===0)){if(Me===p)return H;break}if(ye.match_length=0,Xe=o._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++,Xe&&(Pe(ye,!1),ye.strm.avail_out===0))return H}return ye.insert=0,Me===m?(Pe(ye,!0),ye.strm.avail_out===0?Ee:ke):ye.last_lit&&(Pe(ye,!1),ye.strm.avail_out===0)?H:ge}(M,qe):M.strategy===3?function(ye,Me){for(var Xe,$e,c,f,b=ye.window;;){if(ye.lookahead<=W){if(ut(ye),ye.lookahead<=W&&Me===p)return H;if(ye.lookahead===0)break}if(ye.match_length=0,ye.lookahead>=R&&0<ye.strstart&&($e=b[c=ye.strstart-1])===b[++c]&&$e===b[++c]&&$e===b[++c]){f=ye.strstart+W;do;while($e===b[++c]&&$e===b[++c]&&$e===b[++c]&&$e===b[++c]&&$e===b[++c]&&$e===b[++c]&&$e===b[++c]&&$e===b[++c]&&c<f);ye.match_length=W-(f-c),ye.match_length>ye.lookahead&&(ye.match_length=ye.lookahead)}if(ye.match_length>=R?(Xe=o._tr_tally(ye,1,ye.match_length-R),ye.lookahead-=ye.match_length,ye.strstart+=ye.match_length,ye.match_length=0):(Xe=o._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++),Xe&&(Pe(ye,!1),ye.strm.avail_out===0))return H}return ye.insert=0,Me===m?(Pe(ye,!0),ye.strm.avail_out===0?Ee:ke):ye.last_lit&&(Pe(ye,!1),ye.strm.avail_out===0)?H:ge}(M,qe):s[M.level].func(M,qe);if(ve!==Ee&&ve!==ke||(M.status=666),ve===H||ve===Ee)return q.avail_out===0&&(M.last_flush=-1),g;if(ve===ge&&(qe===1?o._tr_align(M):qe!==5&&(o._tr_stored_block(M,0,0,!1),qe===3&&(Re(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),_e(q),q.avail_out===0))return M.last_flush=-1,g}return qe!==m?g:M.wrap<=0?1:(M.wrap===2?(it(M,255&q.adler),it(M,q.adler>>8&255),it(M,q.adler>>16&255),it(M,q.adler>>24&255),it(M,255&q.total_in),it(M,q.total_in>>8&255),it(M,q.total_in>>16&255),it(M,q.total_in>>24&255)):(tt(M,q.adler>>>16),tt(M,65535&q.adler)),_e(q),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?g:1)},i.deflateEnd=function(q){var qe;return q&&q.state?(qe=q.state.status)!==te&&qe!==69&&qe!==73&&qe!==91&&qe!==103&&qe!==me&&qe!==666?ze(q,v):(q.state=null,qe===me?ze(q,-3):g):v},i.deflateSetDictionary=function(q,qe){var ae,M,L,ee,pe,ve,ye,Me,Xe=qe.length;if(!q||!q.state||(ee=(ae=q.state).wrap)===2||ee===1&&ae.status!==te||ae.lookahead)return v;for(ee===1&&(q.adler=u(q.adler,qe,Xe,0)),ae.wrap=0,Xe>=ae.w_size&&(ee===0&&(Re(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),Me=new a.Buf8(ae.w_size),a.arraySet(Me,qe,Xe-ae.w_size,ae.w_size,0),qe=Me,Xe=ae.w_size),pe=q.avail_in,ve=q.next_in,ye=q.input,q.avail_in=Xe,q.next_in=0,q.input=qe,ut(ae);ae.lookahead>=R;){for(M=ae.strstart,L=ae.lookahead-(R-1);ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[M+R-1])&ae.hash_mask,ae.prev[M&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=M,M++,--L;);ae.strstart=M,ae.lookahead=R-1,ut(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=R-1,ae.match_available=0,q.next_in=ve,q.input=ye,q.avail_in=pe,ae.wrap=ee,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var o,u,d,h,p,m,g,v,w,S,x,k,j,O,I,E,U,D,R,W,ce,te,me,H,ge;o=s.state,u=s.next_in,H=s.input,d=u+(s.avail_in-5),h=s.next_out,ge=s.output,p=h-(a-s.avail_out),m=h+(s.avail_out-257),g=o.dmax,v=o.wsize,w=o.whave,S=o.wnext,x=o.window,k=o.hold,j=o.bits,O=o.lencode,I=o.distcode,E=(1<<o.lenbits)-1,U=(1<<o.distbits)-1;e:do{j<15&&(k+=H[u++]<<j,j+=8,k+=H[u++]<<j,j+=8),D=O[k&E];t:for(;;){if(k>>>=R=D>>>24,j-=R,(R=D>>>16&255)===0)ge[h++]=65535&D;else{if(!(16&R)){if(!(64&R)){D=O[(65535&D)+(k&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}W=65535&D,(R&=15)&&(j<R&&(k+=H[u++]<<j,j+=8),W+=k&(1<<R)-1,k>>>=R,j-=R),j<15&&(k+=H[u++]<<j,j+=8,k+=H[u++]<<j,j+=8),D=I[k&U];n:for(;;){if(k>>>=R=D>>>24,j-=R,!(16&(R=D>>>16&255))){if(!(64&R)){D=I[(65535&D)+(k&(1<<R)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(ce=65535&D,j<(R&=15)&&(k+=H[u++]<<j,(j+=8)<R&&(k+=H[u++]<<j,j+=8)),g<(ce+=k&(1<<R)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(k>>>=R,j-=R,(R=h-p)<ce){if(w<(R=ce-R)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(me=x,(te=0)===S){if(te+=v-R,R<W){for(W-=R;ge[h++]=x[te++],--R;);te=h-ce,me=ge}}else if(S<R){if(te+=v+S-R,(R-=S)<W){for(W-=R;ge[h++]=x[te++],--R;);if(te=0,S<W){for(W-=R=S;ge[h++]=x[te++],--R;);te=h-ce,me=ge}}}else if(te+=S-R,R<W){for(W-=R;ge[h++]=x[te++],--R;);te=h-ce,me=ge}for(;2<W;)ge[h++]=me[te++],ge[h++]=me[te++],ge[h++]=me[te++],W-=3;W&&(ge[h++]=me[te++],1<W&&(ge[h++]=me[te++]))}else{for(te=h-ce;ge[h++]=ge[te++],ge[h++]=ge[te++],ge[h++]=ge[te++],2<(W-=3););W&&(ge[h++]=ge[te++],1<W&&(ge[h++]=ge[te++]))}break}}break}}while(u<d&&h<m);u-=W=j>>3,k&=(1<<(j-=W<<3))-1,s.next_in=u,s.next_out=h,s.avail_in=u<d?d-u+5:5-(u-d),s.avail_out=h<m?m-h+257:257-(h-m),o.hold=k,o.bits=j}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),u=n("./inffast"),d=n("./inftrees"),h=1,p=2,m=0,g=-2,v=1,w=852,S=592;function x(te){return(te>>>24&255)+(te>>>8&65280)+((65280&te)<<8)+((255&te)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(te){var me;return te&&te.state?(me=te.state,te.total_in=te.total_out=me.total=0,te.msg="",me.wrap&&(te.adler=1&me.wrap),me.mode=v,me.last=0,me.havedict=0,me.dmax=32768,me.head=null,me.hold=0,me.bits=0,me.lencode=me.lendyn=new s.Buf32(w),me.distcode=me.distdyn=new s.Buf32(S),me.sane=1,me.back=-1,m):g}function O(te){var me;return te&&te.state?((me=te.state).wsize=0,me.whave=0,me.wnext=0,j(te)):g}function I(te,me){var H,ge;return te&&te.state?(ge=te.state,me<0?(H=0,me=-me):(H=1+(me>>4),me<48&&(me&=15)),me&&(me<8||15<me)?g:(ge.window!==null&&ge.wbits!==me&&(ge.window=null),ge.wrap=H,ge.wbits=me,O(te))):g}function E(te,me){var H,ge;return te?(ge=new k,(te.state=ge).window=null,(H=I(te,me))!==m&&(te.state=null),H):g}var U,D,R=!0;function W(te){if(R){var me;for(U=new s.Buf32(512),D=new s.Buf32(32),me=0;me<144;)te.lens[me++]=8;for(;me<256;)te.lens[me++]=9;for(;me<280;)te.lens[me++]=7;for(;me<288;)te.lens[me++]=8;for(d(h,te.lens,0,288,U,0,te.work,{bits:9}),me=0;me<32;)te.lens[me++]=5;d(p,te.lens,0,32,D,0,te.work,{bits:5}),R=!1}te.lencode=U,te.lenbits=9,te.distcode=D,te.distbits=5}function ce(te,me,H,ge){var Ee,ke=te.state;return ke.window===null&&(ke.wsize=1<<ke.wbits,ke.wnext=0,ke.whave=0,ke.window=new s.Buf8(ke.wsize)),ge>=ke.wsize?(s.arraySet(ke.window,me,H-ke.wsize,ke.wsize,0),ke.wnext=0,ke.whave=ke.wsize):(ge<(Ee=ke.wsize-ke.wnext)&&(Ee=ge),s.arraySet(ke.window,me,H-ge,Ee,ke.wnext),(ge-=Ee)?(s.arraySet(ke.window,me,H-ge,ge,0),ke.wnext=ge,ke.whave=ke.wsize):(ke.wnext+=Ee,ke.wnext===ke.wsize&&(ke.wnext=0),ke.whave<ke.wsize&&(ke.whave+=Ee))),0}i.inflateReset=O,i.inflateReset2=I,i.inflateResetKeep=j,i.inflateInit=function(te){return E(te,15)},i.inflateInit2=E,i.inflate=function(te,me){var H,ge,Ee,ke,ze,xe,Re,_e,Pe,it,tt,Ue,ut,de,oe,We,Ne,ft,Pt,Ct,q,qe,ae,M,L=0,ee=new s.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!te||!te.state||!te.output||!te.input&&te.avail_in!==0)return g;(H=te.state).mode===12&&(H.mode=13),ze=te.next_out,Ee=te.output,Re=te.avail_out,ke=te.next_in,ge=te.input,xe=te.avail_in,_e=H.hold,Pe=H.bits,it=xe,tt=Re,qe=m;e:for(;;)switch(H.mode){case v:if(H.wrap===0){H.mode=13;break}for(;Pe<16;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(2&H.wrap&&_e===35615){ee[H.check=0]=255&_e,ee[1]=_e>>>8&255,H.check=o(H.check,ee,2,0),Pe=_e=0,H.mode=2;break}if(H.flags=0,H.head&&(H.head.done=!1),!(1&H.wrap)||(((255&_e)<<8)+(_e>>8))%31){te.msg="incorrect header check",H.mode=30;break}if((15&_e)!=8){te.msg="unknown compression method",H.mode=30;break}if(Pe-=4,q=8+(15&(_e>>>=4)),H.wbits===0)H.wbits=q;else if(q>H.wbits){te.msg="invalid window size",H.mode=30;break}H.dmax=1<<q,te.adler=H.check=1,H.mode=512&_e?10:12,Pe=_e=0;break;case 2:for(;Pe<16;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(H.flags=_e,(255&H.flags)!=8){te.msg="unknown compression method",H.mode=30;break}if(57344&H.flags){te.msg="unknown header flags set",H.mode=30;break}H.head&&(H.head.text=_e>>8&1),512&H.flags&&(ee[0]=255&_e,ee[1]=_e>>>8&255,H.check=o(H.check,ee,2,0)),Pe=_e=0,H.mode=3;case 3:for(;Pe<32;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}H.head&&(H.head.time=_e),512&H.flags&&(ee[0]=255&_e,ee[1]=_e>>>8&255,ee[2]=_e>>>16&255,ee[3]=_e>>>24&255,H.check=o(H.check,ee,4,0)),Pe=_e=0,H.mode=4;case 4:for(;Pe<16;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}H.head&&(H.head.xflags=255&_e,H.head.os=_e>>8),512&H.flags&&(ee[0]=255&_e,ee[1]=_e>>>8&255,H.check=o(H.check,ee,2,0)),Pe=_e=0,H.mode=5;case 5:if(1024&H.flags){for(;Pe<16;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}H.length=_e,H.head&&(H.head.extra_len=_e),512&H.flags&&(ee[0]=255&_e,ee[1]=_e>>>8&255,H.check=o(H.check,ee,2,0)),Pe=_e=0}else H.head&&(H.head.extra=null);H.mode=6;case 6:if(1024&H.flags&&(xe<(Ue=H.length)&&(Ue=xe),Ue&&(H.head&&(q=H.head.extra_len-H.length,H.head.extra||(H.head.extra=new Array(H.head.extra_len)),s.arraySet(H.head.extra,ge,ke,Ue,q)),512&H.flags&&(H.check=o(H.check,ge,Ue,ke)),xe-=Ue,ke+=Ue,H.length-=Ue),H.length))break e;H.length=0,H.mode=7;case 7:if(2048&H.flags){if(xe===0)break e;for(Ue=0;q=ge[ke+Ue++],H.head&&q&&H.length<65536&&(H.head.name+=String.fromCharCode(q)),q&&Ue<xe;);if(512&H.flags&&(H.check=o(H.check,ge,Ue,ke)),xe-=Ue,ke+=Ue,q)break e}else H.head&&(H.head.name=null);H.length=0,H.mode=8;case 8:if(4096&H.flags){if(xe===0)break e;for(Ue=0;q=ge[ke+Ue++],H.head&&q&&H.length<65536&&(H.head.comment+=String.fromCharCode(q)),q&&Ue<xe;);if(512&H.flags&&(H.check=o(H.check,ge,Ue,ke)),xe-=Ue,ke+=Ue,q)break e}else H.head&&(H.head.comment=null);H.mode=9;case 9:if(512&H.flags){for(;Pe<16;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(_e!==(65535&H.check)){te.msg="header crc mismatch",H.mode=30;break}Pe=_e=0}H.head&&(H.head.hcrc=H.flags>>9&1,H.head.done=!0),te.adler=H.check=0,H.mode=12;break;case 10:for(;Pe<32;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}te.adler=H.check=x(_e),Pe=_e=0,H.mode=11;case 11:if(H.havedict===0)return te.next_out=ze,te.avail_out=Re,te.next_in=ke,te.avail_in=xe,H.hold=_e,H.bits=Pe,2;te.adler=H.check=1,H.mode=12;case 12:if(me===5||me===6)break e;case 13:if(H.last){_e>>>=7&Pe,Pe-=7&Pe,H.mode=27;break}for(;Pe<3;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}switch(H.last=1&_e,Pe-=1,3&(_e>>>=1)){case 0:H.mode=14;break;case 1:if(W(H),H.mode=20,me!==6)break;_e>>>=2,Pe-=2;break e;case 2:H.mode=17;break;case 3:te.msg="invalid block type",H.mode=30}_e>>>=2,Pe-=2;break;case 14:for(_e>>>=7&Pe,Pe-=7&Pe;Pe<32;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if((65535&_e)!=(_e>>>16^65535)){te.msg="invalid stored block lengths",H.mode=30;break}if(H.length=65535&_e,Pe=_e=0,H.mode=15,me===6)break e;case 15:H.mode=16;case 16:if(Ue=H.length){if(xe<Ue&&(Ue=xe),Re<Ue&&(Ue=Re),Ue===0)break e;s.arraySet(Ee,ge,ke,Ue,ze),xe-=Ue,ke+=Ue,Re-=Ue,ze+=Ue,H.length-=Ue;break}H.mode=12;break;case 17:for(;Pe<14;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(H.nlen=257+(31&_e),_e>>>=5,Pe-=5,H.ndist=1+(31&_e),_e>>>=5,Pe-=5,H.ncode=4+(15&_e),_e>>>=4,Pe-=4,286<H.nlen||30<H.ndist){te.msg="too many length or distance symbols",H.mode=30;break}H.have=0,H.mode=18;case 18:for(;H.have<H.ncode;){for(;Pe<3;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}H.lens[pe[H.have++]]=7&_e,_e>>>=3,Pe-=3}for(;H.have<19;)H.lens[pe[H.have++]]=0;if(H.lencode=H.lendyn,H.lenbits=7,ae={bits:H.lenbits},qe=d(0,H.lens,0,19,H.lencode,0,H.work,ae),H.lenbits=ae.bits,qe){te.msg="invalid code lengths set",H.mode=30;break}H.have=0,H.mode=19;case 19:for(;H.have<H.nlen+H.ndist;){for(;We=(L=H.lencode[_e&(1<<H.lenbits)-1])>>>16&255,Ne=65535&L,!((oe=L>>>24)<=Pe);){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(Ne<16)_e>>>=oe,Pe-=oe,H.lens[H.have++]=Ne;else{if(Ne===16){for(M=oe+2;Pe<M;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(_e>>>=oe,Pe-=oe,H.have===0){te.msg="invalid bit length repeat",H.mode=30;break}q=H.lens[H.have-1],Ue=3+(3&_e),_e>>>=2,Pe-=2}else if(Ne===17){for(M=oe+3;Pe<M;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}Pe-=oe,q=0,Ue=3+(7&(_e>>>=oe)),_e>>>=3,Pe-=3}else{for(M=oe+7;Pe<M;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}Pe-=oe,q=0,Ue=11+(127&(_e>>>=oe)),_e>>>=7,Pe-=7}if(H.have+Ue>H.nlen+H.ndist){te.msg="invalid bit length repeat",H.mode=30;break}for(;Ue--;)H.lens[H.have++]=q}}if(H.mode===30)break;if(H.lens[256]===0){te.msg="invalid code -- missing end-of-block",H.mode=30;break}if(H.lenbits=9,ae={bits:H.lenbits},qe=d(h,H.lens,0,H.nlen,H.lencode,0,H.work,ae),H.lenbits=ae.bits,qe){te.msg="invalid literal/lengths set",H.mode=30;break}if(H.distbits=6,H.distcode=H.distdyn,ae={bits:H.distbits},qe=d(p,H.lens,H.nlen,H.ndist,H.distcode,0,H.work,ae),H.distbits=ae.bits,qe){te.msg="invalid distances set",H.mode=30;break}if(H.mode=20,me===6)break e;case 20:H.mode=21;case 21:if(6<=xe&&258<=Re){te.next_out=ze,te.avail_out=Re,te.next_in=ke,te.avail_in=xe,H.hold=_e,H.bits=Pe,u(te,tt),ze=te.next_out,Ee=te.output,Re=te.avail_out,ke=te.next_in,ge=te.input,xe=te.avail_in,_e=H.hold,Pe=H.bits,H.mode===12&&(H.back=-1);break}for(H.back=0;We=(L=H.lencode[_e&(1<<H.lenbits)-1])>>>16&255,Ne=65535&L,!((oe=L>>>24)<=Pe);){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(We&&!(240&We)){for(ft=oe,Pt=We,Ct=Ne;We=(L=H.lencode[Ct+((_e&(1<<ft+Pt)-1)>>ft)])>>>16&255,Ne=65535&L,!(ft+(oe=L>>>24)<=Pe);){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}_e>>>=ft,Pe-=ft,H.back+=ft}if(_e>>>=oe,Pe-=oe,H.back+=oe,H.length=Ne,We===0){H.mode=26;break}if(32&We){H.back=-1,H.mode=12;break}if(64&We){te.msg="invalid literal/length code",H.mode=30;break}H.extra=15&We,H.mode=22;case 22:if(H.extra){for(M=H.extra;Pe<M;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}H.length+=_e&(1<<H.extra)-1,_e>>>=H.extra,Pe-=H.extra,H.back+=H.extra}H.was=H.length,H.mode=23;case 23:for(;We=(L=H.distcode[_e&(1<<H.distbits)-1])>>>16&255,Ne=65535&L,!((oe=L>>>24)<=Pe);){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(!(240&We)){for(ft=oe,Pt=We,Ct=Ne;We=(L=H.distcode[Ct+((_e&(1<<ft+Pt)-1)>>ft)])>>>16&255,Ne=65535&L,!(ft+(oe=L>>>24)<=Pe);){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}_e>>>=ft,Pe-=ft,H.back+=ft}if(_e>>>=oe,Pe-=oe,H.back+=oe,64&We){te.msg="invalid distance code",H.mode=30;break}H.offset=Ne,H.extra=15&We,H.mode=24;case 24:if(H.extra){for(M=H.extra;Pe<M;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}H.offset+=_e&(1<<H.extra)-1,_e>>>=H.extra,Pe-=H.extra,H.back+=H.extra}if(H.offset>H.dmax){te.msg="invalid distance too far back",H.mode=30;break}H.mode=25;case 25:if(Re===0)break e;if(Ue=tt-Re,H.offset>Ue){if((Ue=H.offset-Ue)>H.whave&&H.sane){te.msg="invalid distance too far back",H.mode=30;break}ut=Ue>H.wnext?(Ue-=H.wnext,H.wsize-Ue):H.wnext-Ue,Ue>H.length&&(Ue=H.length),de=H.window}else de=Ee,ut=ze-H.offset,Ue=H.length;for(Re<Ue&&(Ue=Re),Re-=Ue,H.length-=Ue;Ee[ze++]=de[ut++],--Ue;);H.length===0&&(H.mode=21);break;case 26:if(Re===0)break e;Ee[ze++]=H.length,Re--,H.mode=21;break;case 27:if(H.wrap){for(;Pe<32;){if(xe===0)break e;xe--,_e|=ge[ke++]<<Pe,Pe+=8}if(tt-=Re,te.total_out+=tt,H.total+=tt,tt&&(te.adler=H.check=H.flags?o(H.check,Ee,tt,ze-tt):a(H.check,Ee,tt,ze-tt)),tt=Re,(H.flags?_e:x(_e))!==H.check){te.msg="incorrect data check",H.mode=30;break}Pe=_e=0}H.mode=28;case 28:if(H.wrap&&H.flags){for(;Pe<32;){if(xe===0)break e;xe--,_e+=ge[ke++]<<Pe,Pe+=8}if(_e!==(4294967295&H.total)){te.msg="incorrect length check",H.mode=30;break}Pe=_e=0}H.mode=29;case 29:qe=1;break e;case 30:qe=-3;break e;case 31:return-4;case 32:default:return g}return te.next_out=ze,te.avail_out=Re,te.next_in=ke,te.avail_in=xe,H.hold=_e,H.bits=Pe,(H.wsize||tt!==te.avail_out&&H.mode<30&&(H.mode<27||me!==4))&&ce(te,te.output,te.next_out,tt-te.avail_out)?(H.mode=31,-4):(it-=te.avail_in,tt-=te.avail_out,te.total_in+=it,te.total_out+=tt,H.total+=tt,H.wrap&&tt&&(te.adler=H.check=H.flags?o(H.check,Ee,tt,te.next_out-tt):a(H.check,Ee,tt,te.next_out-tt)),te.data_type=H.bits+(H.last?64:0)+(H.mode===12?128:0)+(H.mode===20||H.mode===15?256:0),(it==0&&tt===0||me===4)&&qe===m&&(qe=-5),qe)},i.inflateEnd=function(te){if(!te||!te.state)return g;var me=te.state;return me.window&&(me.window=null),te.state=null,m},i.inflateGetHeader=function(te,me){var H;return te&&te.state&&2&(H=te.state).wrap?((H.head=me).done=!1,m):g},i.inflateSetDictionary=function(te,me){var H,ge=me.length;return te&&te.state?(H=te.state).wrap!==0&&H.mode!==11?g:H.mode===11&&a(1,me,ge,0)!==H.check?-3:ce(te,me,ge,ge)?(H.mode=31,-4):(H.havedict=1,m):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,p,m,g,v,w,S,x){var k,j,O,I,E,U,D,R,W,ce=x.bits,te=0,me=0,H=0,ge=0,Ee=0,ke=0,ze=0,xe=0,Re=0,_e=0,Pe=null,it=0,tt=new s.Buf16(16),Ue=new s.Buf16(16),ut=null,de=0;for(te=0;te<=15;te++)tt[te]=0;for(me=0;me<g;me++)tt[p[m+me]]++;for(Ee=ce,ge=15;1<=ge&&tt[ge]===0;ge--);if(ge<Ee&&(Ee=ge),ge===0)return v[w++]=20971520,v[w++]=20971520,x.bits=1,0;for(H=1;H<ge&&tt[H]===0;H++);for(Ee<H&&(Ee=H),te=xe=1;te<=15;te++)if(xe<<=1,(xe-=tt[te])<0)return-1;if(0<xe&&(h===0||ge!==1))return-1;for(Ue[1]=0,te=1;te<15;te++)Ue[te+1]=Ue[te]+tt[te];for(me=0;me<g;me++)p[m+me]!==0&&(S[Ue[p[m+me]]++]=me);if(U=h===0?(Pe=ut=S,19):h===1?(Pe=a,it-=257,ut=o,de-=257,256):(Pe=u,ut=d,-1),te=H,E=w,ze=me=_e=0,O=-1,I=(Re=1<<(ke=Ee))-1,h===1&&852<Re||h===2&&592<Re)return 1;for(;;){for(D=te-ze,W=S[me]<U?(R=0,S[me]):S[me]>U?(R=ut[de+S[me]],Pe[it+S[me]]):(R=96,0),k=1<<te-ze,H=j=1<<ke;v[E+(_e>>ze)+(j-=k)]=D<<24|R<<16|W|0,j!==0;);for(k=1<<te-1;_e&k;)k>>=1;if(k!==0?(_e&=k-1,_e+=k):_e=0,me++,--tt[te]==0){if(te===ge)break;te=p[m+S[me]]}if(Ee<te&&(_e&I)!==O){for(ze===0&&(ze=Ee),E+=H,xe=1<<(ke=te-ze);ke+ze<ge&&!((xe-=tt[ke+ze])<=0);)ke++,xe<<=1;if(Re+=1<<ke,h===1&&852<Re||h===2&&592<Re)return 1;v[O=_e&I]=Ee<<24|ke<<16|E-w|0}}return _e!==0&&(v[E+_e]=te-ze<<24|64<<16|0),x.bits=Ee,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,o=1;function u(L){for(var ee=L.length;0<=--ee;)L[ee]=0}var d=0,h=29,p=256,m=p+1+h,g=30,v=19,w=2*m+1,S=15,x=16,k=7,j=256,O=16,I=17,E=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=new Array(2*(m+2));u(ce);var te=new Array(2*g);u(te);var me=new Array(512);u(me);var H=new Array(256);u(H);var ge=new Array(h);u(ge);var Ee,ke,ze,xe=new Array(g);function Re(L,ee,pe,ve,ye){this.static_tree=L,this.extra_bits=ee,this.extra_base=pe,this.elems=ve,this.max_length=ye,this.has_stree=L&&L.length}function _e(L,ee){this.dyn_tree=L,this.max_code=0,this.stat_desc=ee}function Pe(L){return L<256?me[L]:me[256+(L>>>7)]}function it(L,ee){L.pending_buf[L.pending++]=255&ee,L.pending_buf[L.pending++]=ee>>>8&255}function tt(L,ee,pe){L.bi_valid>x-pe?(L.bi_buf|=ee<<L.bi_valid&65535,it(L,L.bi_buf),L.bi_buf=ee>>x-L.bi_valid,L.bi_valid+=pe-x):(L.bi_buf|=ee<<L.bi_valid&65535,L.bi_valid+=pe)}function Ue(L,ee,pe){tt(L,pe[2*ee],pe[2*ee+1])}function ut(L,ee){for(var pe=0;pe|=1&L,L>>>=1,pe<<=1,0<--ee;);return pe>>>1}function de(L,ee,pe){var ve,ye,Me=new Array(S+1),Xe=0;for(ve=1;ve<=S;ve++)Me[ve]=Xe=Xe+pe[ve-1]<<1;for(ye=0;ye<=ee;ye++){var $e=L[2*ye+1];$e!==0&&(L[2*ye]=ut(Me[$e]++,$e))}}function oe(L){var ee;for(ee=0;ee<m;ee++)L.dyn_ltree[2*ee]=0;for(ee=0;ee<g;ee++)L.dyn_dtree[2*ee]=0;for(ee=0;ee<v;ee++)L.bl_tree[2*ee]=0;L.dyn_ltree[2*j]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function We(L){8<L.bi_valid?it(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Ne(L,ee,pe,ve){var ye=2*ee,Me=2*pe;return L[ye]<L[Me]||L[ye]===L[Me]&&ve[ee]<=ve[pe]}function ft(L,ee,pe){for(var ve=L.heap[pe],ye=pe<<1;ye<=L.heap_len&&(ye<L.heap_len&&Ne(ee,L.heap[ye+1],L.heap[ye],L.depth)&&ye++,!Ne(ee,ve,L.heap[ye],L.depth));)L.heap[pe]=L.heap[ye],pe=ye,ye<<=1;L.heap[pe]=ve}function Pt(L,ee,pe){var ve,ye,Me,Xe,$e=0;if(L.last_lit!==0)for(;ve=L.pending_buf[L.d_buf+2*$e]<<8|L.pending_buf[L.d_buf+2*$e+1],ye=L.pending_buf[L.l_buf+$e],$e++,ve===0?Ue(L,ye,ee):(Ue(L,(Me=H[ye])+p+1,ee),(Xe=U[Me])!==0&&tt(L,ye-=ge[Me],Xe),Ue(L,Me=Pe(--ve),pe),(Xe=D[Me])!==0&&tt(L,ve-=xe[Me],Xe)),$e<L.last_lit;);Ue(L,j,ee)}function Ct(L,ee){var pe,ve,ye,Me=ee.dyn_tree,Xe=ee.stat_desc.static_tree,$e=ee.stat_desc.has_stree,c=ee.stat_desc.elems,f=-1;for(L.heap_len=0,L.heap_max=w,pe=0;pe<c;pe++)Me[2*pe]!==0?(L.heap[++L.heap_len]=f=pe,L.depth[pe]=0):Me[2*pe+1]=0;for(;L.heap_len<2;)Me[2*(ye=L.heap[++L.heap_len]=f<2?++f:0)]=1,L.depth[ye]=0,L.opt_len--,$e&&(L.static_len-=Xe[2*ye+1]);for(ee.max_code=f,pe=L.heap_len>>1;1<=pe;pe--)ft(L,Me,pe);for(ye=c;pe=L.heap[1],L.heap[1]=L.heap[L.heap_len--],ft(L,Me,1),ve=L.heap[1],L.heap[--L.heap_max]=pe,L.heap[--L.heap_max]=ve,Me[2*ye]=Me[2*pe]+Me[2*ve],L.depth[ye]=(L.depth[pe]>=L.depth[ve]?L.depth[pe]:L.depth[ve])+1,Me[2*pe+1]=Me[2*ve+1]=ye,L.heap[1]=ye++,ft(L,Me,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(b,_){var C,A,T,N,$,F,Y=_.dyn_tree,Q=_.max_code,K=_.stat_desc.static_tree,V=_.stat_desc.has_stree,X=_.stat_desc.extra_bits,B=_.stat_desc.extra_base,Z=_.stat_desc.max_length,G=0;for(N=0;N<=S;N++)b.bl_count[N]=0;for(Y[2*b.heap[b.heap_max]+1]=0,C=b.heap_max+1;C<w;C++)Z<(N=Y[2*Y[2*(A=b.heap[C])+1]+1]+1)&&(N=Z,G++),Y[2*A+1]=N,Q<A||(b.bl_count[N]++,$=0,B<=A&&($=X[A-B]),F=Y[2*A],b.opt_len+=F*(N+$),V&&(b.static_len+=F*(K[2*A+1]+$)));if(G!==0){do{for(N=Z-1;b.bl_count[N]===0;)N--;b.bl_count[N]--,b.bl_count[N+1]+=2,b.bl_count[Z]--,G-=2}while(0<G);for(N=Z;N!==0;N--)for(A=b.bl_count[N];A!==0;)Q<(T=b.heap[--C])||(Y[2*T+1]!==N&&(b.opt_len+=(N-Y[2*T+1])*Y[2*T],Y[2*T+1]=N),A--)}}(L,ee),de(Me,f,L.bl_count)}function q(L,ee,pe){var ve,ye,Me=-1,Xe=ee[1],$e=0,c=7,f=4;for(Xe===0&&(c=138,f=3),ee[2*(pe+1)+1]=65535,ve=0;ve<=pe;ve++)ye=Xe,Xe=ee[2*(ve+1)+1],++$e<c&&ye===Xe||($e<f?L.bl_tree[2*ye]+=$e:ye!==0?(ye!==Me&&L.bl_tree[2*ye]++,L.bl_tree[2*O]++):$e<=10?L.bl_tree[2*I]++:L.bl_tree[2*E]++,Me=ye,f=($e=0)===Xe?(c=138,3):ye===Xe?(c=6,3):(c=7,4))}function qe(L,ee,pe){var ve,ye,Me=-1,Xe=ee[1],$e=0,c=7,f=4;for(Xe===0&&(c=138,f=3),ve=0;ve<=pe;ve++)if(ye=Xe,Xe=ee[2*(ve+1)+1],!(++$e<c&&ye===Xe)){if($e<f)for(;Ue(L,ye,L.bl_tree),--$e!=0;);else ye!==0?(ye!==Me&&(Ue(L,ye,L.bl_tree),$e--),Ue(L,O,L.bl_tree),tt(L,$e-3,2)):$e<=10?(Ue(L,I,L.bl_tree),tt(L,$e-3,3)):(Ue(L,E,L.bl_tree),tt(L,$e-11,7));Me=ye,f=($e=0)===Xe?(c=138,3):ye===Xe?(c=6,3):(c=7,4)}}u(xe);var ae=!1;function M(L,ee,pe,ve){tt(L,(d<<1)+(ve?1:0),3),function(ye,Me,Xe,$e){We(ye),it(ye,Xe),it(ye,~Xe),s.arraySet(ye.pending_buf,ye.window,Me,Xe,ye.pending),ye.pending+=Xe}(L,ee,pe)}i._tr_init=function(L){ae||(function(){var ee,pe,ve,ye,Me,Xe=new Array(S+1);for(ye=ve=0;ye<h-1;ye++)for(ge[ye]=ve,ee=0;ee<1<<U[ye];ee++)H[ve++]=ye;for(H[ve-1]=ye,ye=Me=0;ye<16;ye++)for(xe[ye]=Me,ee=0;ee<1<<D[ye];ee++)me[Me++]=ye;for(Me>>=7;ye<g;ye++)for(xe[ye]=Me<<7,ee=0;ee<1<<D[ye]-7;ee++)me[256+Me++]=ye;for(pe=0;pe<=S;pe++)Xe[pe]=0;for(ee=0;ee<=143;)ce[2*ee+1]=8,ee++,Xe[8]++;for(;ee<=255;)ce[2*ee+1]=9,ee++,Xe[9]++;for(;ee<=279;)ce[2*ee+1]=7,ee++,Xe[7]++;for(;ee<=287;)ce[2*ee+1]=8,ee++,Xe[8]++;for(de(ce,m+1,Xe),ee=0;ee<g;ee++)te[2*ee+1]=5,te[2*ee]=ut(ee,5);Ee=new Re(ce,U,p+1,m,S),ke=new Re(te,D,0,g,S),ze=new Re(new Array(0),R,0,v,k)}(),ae=!0),L.l_desc=new _e(L.dyn_ltree,Ee),L.d_desc=new _e(L.dyn_dtree,ke),L.bl_desc=new _e(L.bl_tree,ze),L.bi_buf=0,L.bi_valid=0,oe(L)},i._tr_stored_block=M,i._tr_flush_block=function(L,ee,pe,ve){var ye,Me,Xe=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function($e){var c,f=4093624447;for(c=0;c<=31;c++,f>>>=1)if(1&f&&$e.dyn_ltree[2*c]!==0)return a;if($e.dyn_ltree[18]!==0||$e.dyn_ltree[20]!==0||$e.dyn_ltree[26]!==0)return o;for(c=32;c<p;c++)if($e.dyn_ltree[2*c]!==0)return o;return a}(L)),Ct(L,L.l_desc),Ct(L,L.d_desc),Xe=function($e){var c;for(q($e,$e.dyn_ltree,$e.l_desc.max_code),q($e,$e.dyn_dtree,$e.d_desc.max_code),Ct($e,$e.bl_desc),c=v-1;3<=c&&$e.bl_tree[2*W[c]+1]===0;c--);return $e.opt_len+=3*(c+1)+5+5+4,c}(L),ye=L.opt_len+3+7>>>3,(Me=L.static_len+3+7>>>3)<=ye&&(ye=Me)):ye=Me=pe+5,pe+4<=ye&&ee!==-1?M(L,ee,pe,ve):L.strategy===4||Me===ye?(tt(L,2+(ve?1:0),3),Pt(L,ce,te)):(tt(L,4+(ve?1:0),3),function($e,c,f,b){var _;for(tt($e,c-257,5),tt($e,f-1,5),tt($e,b-4,4),_=0;_<b;_++)tt($e,$e.bl_tree[2*W[_]+1],3);qe($e,$e.dyn_ltree,c-1),qe($e,$e.dyn_dtree,f-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Xe+1),Pt(L,L.dyn_ltree,L.dyn_dtree)),oe(L),ve&&We(L)},i._tr_tally=function(L,ee,pe){return L.pending_buf[L.d_buf+2*L.last_lit]=ee>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&ee,L.pending_buf[L.l_buf+L.last_lit]=255&pe,L.last_lit++,ee===0?L.dyn_ltree[2*pe]++:(L.matches++,ee--,L.dyn_ltree[2*(H[pe]+p+1)]++,L.dyn_dtree[2*Pe(ee)]++),L.last_lit===L.lit_bufsize-1},i._tr_align=function(L){tt(L,2,3),Ue(L,j,ce),function(ee){ee.bi_valid===16?(it(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,o){if(!a.setImmediate){var u,d,h,p,m=1,g={},v=!1,w=a.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(a);S=S&&S.setTimeout?S:a,u={}.toString.call(a.process)==="[object process]"?function(O){process.nextTick(function(){k(O)})}:function(){if(a.postMessage&&!a.importScripts){var O=!0,I=a.onmessage;return a.onmessage=function(){O=!1},a.postMessage("","*"),a.onmessage=I,O}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",j,!1):a.attachEvent("onmessage",j),function(O){a.postMessage(p+O,"*")}):a.MessageChannel?((h=new MessageChannel).port1.onmessage=function(O){k(O.data)},function(O){h.port2.postMessage(O)}):w&&"onreadystatechange"in w.createElement("script")?(d=w.documentElement,function(O){var I=w.createElement("script");I.onreadystatechange=function(){k(O),I.onreadystatechange=null,d.removeChild(I),I=null},d.appendChild(I)}):function(O){setTimeout(k,0,O)},S.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var I=new Array(arguments.length-1),E=0;E<I.length;E++)I[E]=arguments[E+1];var U={callback:O,args:I};return g[m]=U,u(m),m++},S.clearImmediate=x}function x(O){delete g[O]}function k(O){if(v)setTimeout(k,0,O);else{var I=g[O];if(I){v=!0;try{(function(E){var U=E.callback,D=E.args;switch(D.length){case 0:U();break;case 1:U(D[0]);break;case 2:U(D[0],D[1]);break;case 3:U(D[0],D[1],D[2]);break;default:U.apply(o,D)}})(I)}finally{x(O),v=!1}}}}function j(O){O.source===a&&typeof O.data=="string"&&O.data.indexOf(p)===0&&k(+O.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hN);var H7=hN.exports;const W7=vl(H7);function V7(e){let t="",n=e;for(;n>=0;)t=String.fromCharCode(n%26+65)+t,n=Math.floor(n/26)-1;return t}function G7(e,t){return`${V7(e)}${t+1}`}async function fN(e,t,n="design"){const i=Math.ceil(t.width/1e3),s=Math.ceil(t.length/1e3);console.log(`[SLICER] Creating ${i}${s} grid (${i*s} tiles) for ${t.width}mm  ${t.length}mm design`);const u=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!u)throw new Error("Invalid SVG content");const d=u.getAttribute("viewBox");let h,p;if(d){const U=d.split(/\s+/).map(Number);h=U[2],p=U[3]}else h=parseFloat(u.getAttribute("width"))||1024,p=parseFloat(u.getAttribute("height"))||1024;console.log(`[SLICER] SVG internal dimensions: ${h}  ${p}`);const m=h/t.width,g=p/t.length,v=1e3*m,w=1e3*g;console.log(`[SLICER] Tile size in SVG units: ${v}  ${w}`);const S=u.innerHTML,x=u.getAttribute("xmlns")||"http://www.w3.org/2000/svg",k=new W7,j=k.folder("tiles"),O=[];for(let U=0;U<s;U++){const D=[];for(let R=0;R<i;R++){const W=G7(R,U);D.push(W);const ce=R*v,te=U*w,me=`${ce} ${te} ${v} ${w}`,H=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="${x}" viewBox="${me}" width="1000mm" height="1000mm">
  <defs>
    <clipPath id="tile-clip">
      <rect x="${ce}" y="${te}" width="${v}" height="${w}"/>
    </clipPath>
  </defs>
  <g clip-path="url(#tile-clip)">
${S}
  </g>
</svg>`,ge=`${pN(n)}_${W}.svg`;j.file(ge,H)}O.push(D)}const I=q7(O,t,n);k.file("layout-guide.txt",I);const E=await k.generateAsync({type:"blob"});return console.log(`[SLICER] Created ZIP with ${i*s} tiles`),E}function q7(e,t,n){const r=e.length,i=e[0].length;let s=`TPV Studio - Tile Layout Guide
================================

Design: ${n}
Total Size: ${t.width}mm  ${t.length}mm (${t.width/1e3}m  ${t.length/1e3}m)
Tile Size: 1000mm  1000mm (1m  1m)
Grid: ${i} columns  ${r} rows (${i*r} tiles)

Layout (view from above):
-------------------------

`;const a=6;s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`;for(let o=0;o<r;o++){s+="";for(let u=0;u<i;u++){const d=e[o][u],h=a-d.length,p=Math.floor(h/2),m=h-p;s+=" ".repeat(p)+d+" ".repeat(m)+""}s+=`
`,o<r-1?s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`:s+=""+("".repeat(a)+"").repeat(i-1)+"".repeat(a)+`
`}return s+=`
Installation Notes:
-------------------
- Each tile is exactly 1m  1m
- Tiles are named by column (A-Z) and row (1-${r})
- Start from top-left corner (A1) when laying out
- Tiles align perfectly when placed edge-to-edge
- Edge tiles may contain partial content if design isn't exactly divisible by 1m

Generated by TPV Studio
`,s}function pN(e){return e.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"-").substring(0,50)}function mN(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function Y7(e,t,n="design"){try{const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch SVG: ${r.statusText}`);const i=await r.text(),s=await fN(i,t,n),a=`${pN(n)}-tiles-1mx1m.zip`;return mN(s,a),console.log(`[SLICER] Downloaded ${a}`),!0}catch(r){throw console.error("[SLICER] Failed to download tiles:",r),r}}var rl;let X7=(rl=class{static next(){return(++rl.seed).toString(16).toUpperCase()}static peek(){return(rl.seed+1).toString(16).toUpperCase()}},qf(rl,"seed",0),rl);var vw=X7;const K7=vw;let Z7=class{constructor(t=null){this.handle=K7.next(),this.ownerObjectHandle="0",this.subclassMarkers=[],t&&(Array.isArray(t)?this.subclassMarkers.push(...t):this.subclassMarkers.push(t))}tags(t){t.push(5,this.handle),t.push(330,this.ownerObjectHandle);for(const n of this.subclassMarkers)t.push(100,n)}};var Fr=Z7;const Q7=Fr;let J7=class extends Q7{constructor(t,n,r){super(["AcDbSymbolTableRecord","AcDbLinetypeTableRecord"]),this.name=t,this.description=n,this.elements=r}tags(t){t.push(0,"LTYPE"),super.tags(t),t.push(2,this.name),t.push(3,this.description),t.push(70,0),t.push(72,65),t.push(73,this.elements.length),t.push(40,this.getElementsSum()),this.elements.forEach(n=>{t.push(49,n),t.push(74,0)})}getElementsSum(){return this.elements.reduce((t,n)=>t+Math.abs(n),0)}};var e9=J7;const t9=Fr;let n9=class extends t9{constructor(t,n,r=null){super(["AcDbSymbolTableRecord","AcDbLayerTableRecord"]),this.name=t,this.colorNumber=n,this.lineTypeName=r,this.shapes=[],this.trueColor=-1}tags(t){t.push(0,"LAYER"),super.tags(t),t.push(2,this.name),this.trueColor!==-1?t.push(420,this.trueColor):t.push(62,this.colorNumber),t.push(70,0),this.lineTypeName&&t.push(6,this.lineTypeName),t.push(390,1)}setTrueColor(t){this.trueColor=t}addShape(t){this.shapes.push(t),t.layer=this}getShapes(){return this.shapes}shapesTags(t,n){for(const r of this.shapes)r.ownerObjectHandle=t.handle,r.tags(n)}};var r9=n9;const i9=Fr;let s9=class extends i9{constructor(t){super("AcDbSymbolTable"),this.name=t,this.elements=[]}add(t){t.ownerObjectHandle=this.handle,this.elements.push(t)}tags(t){t.push(0,"TABLE"),t.push(2,this.name),super.tags(t),t.push(70,this.elements.length),this.elements.forEach(n=>{n.tags(t)}),t.push(0,"ENDTAB")}};var gN=s9;const a9=Fr,o9=gN;let l9=class extends o9{constructor(t){super(t),this.subclassMarkers.push("AcDbDimStyleTable")}tags(t){t.push(0,"TABLE"),t.push(2,this.name),a9.prototype.tags.call(this,t),t.push(70,this.elements.length),t.push(71,1);for(const n of this.elements)n.tags(t);t.push(0,"ENDTAB")}};var c9=l9;const u9=Fr;let d9=class extends u9{constructor(n){super(["AcDbSymbolTableRecord","AcDbTextStyleTableRecord"]);qf(this,"fontFileName","txt");this.name=n}tags(n){n.push(0,"STYLE"),super.tags(n),n.push(2,this.name),n.push(70,0),n.push(40,0),n.push(41,1),n.push(50,0),n.push(71,0),n.push(42,1),n.push(3,this.fontFileName),n.push(4,"")}};var h9=d9;const f9=Fr;let p9=class extends f9{constructor(t,n){super(["AcDbSymbolTableRecord","AcDbViewportTableRecord"]),this.name=t,this.height=n}tags(t){t.push(0,"VPORT"),super.tags(t),t.push(2,this.name),t.push(40,this.height),t.push(70,0)}};var m9=p9;const g9=Fr;let y9=class extends g9{constructor(t){super(["AcDbSymbolTableRecord","AcDbRegAppTableRecord"]),this.name=t}tags(t){t.push(0,"APPID"),super.tags(t),t.push(2,this.name),t.push(70,0)}};var b9=y9;const SS=Fr;let v9=class extends SS{constructor(t){super(["AcDbEntity","AcDbBlockBegin"]),this.name=t,this.end=new SS(["AcDbEntity","AcDbBlockEnd"]),this.recordHandle=null}tags(t){t.push(0,"BLOCK"),super.tags(t),t.push(2,this.name),t.push(70,0),t.point(0,0),t.push(3,this.name),t.push(1,""),t.push(0,"ENDBLK"),this.end.tags(t)}};var x9=v9;const w9=Fr;let _9=class extends w9{constructor(t){super(["AcDbSymbolTableRecord","AcDbBlockTableRecord"]),this.name=t}tags(t){t.push(0,"BLOCK_RECORD"),super.tags(t),t.push(2,this.name),t.push(70,0),t.push(280,0),t.push(281,1)}};var k9=_9;const S9=Fr;let C9=class extends S9{constructor(){super("AcDbDictionary"),this.children={}}addChildDictionary(t,n){n.ownerObjectHandle=this.handle,this.children[t]=n}tags(t){t.push(0,"DICTIONARY"),super.tags(t),t.push(281,1);const n=Object.entries(this.children);for(const i of n){const[s,a]=i;t.push(3,s),t.push(350,a.handle)}const r=Object.values(this.children);for(const i of r)i.tags(t)}};var E9=C9;const T9=Fr;let j9=class extends T9{constructor(t,n,r,i){super(["AcDbEntity","AcDbLine"]),this.x1=t,this.y1=n,this.x2=r,this.y2=i}tags(t){t.push(0,"LINE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,0)}};var A9=j9;const P9=Fr;let N9=class extends P9{constructor(t,n,r,i,s,a){super(["AcDbEntity","AcDbLine"]),this.x1=t,this.y1=n,this.z1=r,this.x2=i,this.y2=s,this.z2=a}tags(t){t.push(0,"LINE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1,this.z1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,this.z2)}};var O9=N9;const R9=Fr;let M9=class extends R9{constructor(t,n,r,i,s){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.r=r,this.startAngle=i,this.endAngle=s}tags(t){t.push(0,"ARC"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.r),t.push(100,"AcDbArc"),t.push(50,this.startAngle),t.push(51,this.endAngle)}};var L9=M9;const I9=Fr;let $9=class extends I9{constructor(t,n,r){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.r=r}tags(t){t.push(0,"CIRCLE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.r)}};var D9=$9;const z9=Fr;let F9=class extends z9{constructor(t,n,r,i,s,a,o,u){super(["AcDbEntity","AcDbCircle"]),this.x=t,this.y=n,this.z=r,this.r=i,this.thickness=s,this.extrusionDirectionX=a,this.extrusionDirectionY=o,this.extrusionDirectionZ=u}tags(t){t.push(0,"CIRCLE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y,this.z),t.push(40,this.r),t.push(39,this.thickness),t.push(210,this.extrusionDirectionX),t.push(220,this.extrusionDirectionY),t.push(230,this.extrusionDirectionZ)}};var B9=F9;const U9=Fr,CS=["left","center","right"],ES=["baseline","bottom","middle","top"];let H9=class extends U9{constructor(t,n,r,i,s,a="left",o="baseline"){super(["AcDbEntity","AcDbText"]),this.x=t,this.y=n,this.height=r,this.rotation=i,this.value=s,this.hAlign=a,this.vAlign=o}tags(t){t.push(0,"TEXT"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(40,this.height),t.push(1,this.value),t.push(50,this.rotation),CS.includes(this.hAlign,1)||ES.includes(this.vAlign,1)?(t.push(72,Math.max(CS.indexOf(this.hAlign),0)),t.push(11,this.x),t.push(21,this.y),t.push(31,0),t.push(100,"AcDbText"),t.push(73,Math.max(ES.indexOf(this.vAlign),0))):t.push(100,"AcDbText")}};var W9=H9;const V9=Fr;let G9=class extends V9{constructor(t,n=!1,r=0,i=0){super(["AcDbEntity","AcDbPolyline"]),this.points=t,this.closed=n,this.startWidth=r,this.endWidth=i}tags(t){t.push(0,"LWPOLYLINE"),super.tags(t),t.push(8,this.layer.name),t.push(6,"ByLayer"),t.push(62,256),t.push(370,-1),t.push(90,this.points.length),t.push(70,this.closed?1:0),this.points.forEach(n=>{const[r,i,s]=n;t.push(10,r),t.push(20,i),(this.startWidth!==0||this.endWidth!==0)&&(t.push(40,this.startWidth),t.push(41,this.endWidth)),s!==void 0&&t.push(42,s)})}};var q9=G9;const Y9=Fr;let X9=class extends Y9{constructor(t,n,r){super(["AcDbEntity","AcDbVertex","AcDb3dPolylineVertex"]),this.x=t,this.y=n,this.z=r}tags(t){t.push(0,"VERTEX"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y,this.z),t.push(70,32)}};var K9=X9;const Z9=Fr,Q9=vw,J9=K9;let eB=class extends Z9{constructor(t){super(["AcDbEntity","AcDb3dPolyline"]),this.verticies=t.map(n=>{const[r,i,s]=n,a=new J9(r,i,s);return a.ownerObjectHandle=this.handle,a}),this.seqendHandle=Q9.next()}tags(t){t.push(0,"POLYLINE"),super.tags(t),t.push(8,this.layer.name),t.push(66,1),t.push(70,0),t.point(0,0),this.verticies.forEach(n=>{n.layer=this.layer,n.tags(t)}),t.push(0,"SEQEND"),t.push(5,this.seqendHandle),t.push(100,"AcDbEntity"),t.push(8,this.layer.name)}};var tB=eB;const nB=Fr;let rB=class extends nB{constructor(t,n,r,i,s,a,o,u,d,h,p,m){super(["AcDbEntity","AcDbFace"]),this.x1=t,this.y1=n,this.z1=r,this.x2=i,this.y2=s,this.z2=a,this.x3=o,this.y3=u,this.z3=d,this.x4=h,this.y4=p,this.z4=m}tags(t){t.push(0,"3DFACE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x1,this.y1,this.z1),t.push(11,this.x2),t.push(21,this.y2),t.push(31,this.z2),t.push(12,this.x3),t.push(22,this.y3),t.push(32,this.z3),t.push(13,this.x4),t.push(23,this.y4),t.push(33,this.z4)}};var iB=rB;const sB=Fr;let aB=class extends sB{constructor(t,n){super(["AcDbEntity","AcDbPoint"]),this.x=t,this.y=n}tags(t){t.push(0,"POINT"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y)}};var oB=aB;const lB=Fr;let cB=class extends lB{constructor(t,n=3,r=null,i=null,s=[]){if(super(["AcDbEntity","AcDbSpline"]),t.length<n+1)throw new Error(`For degree ${n} spline, expected at least ${n+1} control points, but received only ${t.length}`);if(r==null){r=[];for(let p=0;p<n+1;p++)r.push(0);for(let p=1;p<t.length-n;p++)r.push(p);for(let p=0;p<n+1;p++)r.push(t.length-n)}if(r.length!==t.length+n+1)throw new Error(`Invalid knot vector length. Expected ${t.length+n+1} but received ${r.length}.`);this.controlPoints=t,this.knots=r,this.fitPoints=s,this.degree=n,this.weights=i;const a=0,o=0,u=this.weights?1:0,d=1,h=0;this.type=a*1+o*2+u*4+d*8+h*16}tags(t){t.push(0,"SPLINE"),super.tags(t),t.push(8,this.layer.name),t.push(210,0),t.push(220,0),t.push(230,1),t.push(70,this.type),t.push(71,this.degree),t.push(72,this.knots.length),t.push(73,this.controlPoints.length),t.push(74,this.fitPoints.length),t.push(42,1e-7),t.push(43,1e-7),t.push(44,1e-10),this.knots.forEach(n=>{t.push(40,n)}),this.weights&&this.weights.forEach(n=>{t.push(41,n)}),this.controlPoints.forEach(n=>{t.point(n[0],n[1])})}};var uB=cB;const dB=Fr;let hB=class extends dB{constructor(t,n,r,i,s,a,o){super(["AcDbEntity","AcDbEllipse"]),this.x=t,this.y=n,this.majorAxisX=r,this.majorAxisY=i,this.axisRatio=s,this.startAngle=a,this.endAngle=o}tags(t){t.push(0,"ELLIPSE"),super.tags(t),t.push(8,this.layer.name),t.point(this.x,this.y),t.push(11,this.majorAxisX),t.push(21,this.majorAxisY),t.push(31,0),t.push(40,this.axisRatio),t.push(41,this.startAngle),t.push(42,this.endAngle)}};var fB=hB;let pB=class{constructor(){this.lines=[]}point(t,n,r=0){this.push(10,t),this.push(20,n),this.push(30,r)}start(t){this.push(0,"SECTION"),this.push(2,t)}end(){this.push(0,"ENDSEC")}addHeaderVariable(t,n){this.push(9,`$${t}`),n.forEach(r=>{this.push(r[0],r[1])})}push(t,n){this.lines.push(t,n)}toDxfString(){return this.lines.join(`
`)}};var mB=pB;const gB=e9,yB=r9,Sp=gN,bB=c9,vB=h9,xB=m9,wB=b9,_B=x9,kB=k9,TS=E9,SB=A9,CB=O9,EB=L9,TB=D9,jB=B9,AB=W9,Cp=q9,PB=tB,NB=iB,OB=oB,RB=uB,MB=fB,LB=mB,IB=vw;let Yu=class zl{constructor(){this.layers={},this.activeLayer=null,this.lineTypes={},this.headers={},this.tables={},this.blocks={},this.dictionary=new TS,this.setUnits("Unitless");for(const t of zl.LINE_TYPES)this.addLineType(t.name,t.description,t.elements);for(const t of zl.LAYERS)this.addLayer(t.name,t.colorNumber,t.lineTypeName);this.setActiveLayer("0"),this.generateAutocadExtras()}addLineType(t,n,r){return this.lineTypes[t]=new gB(t,n,r),this}addLayer(t,n,r){return this.layers[t]=new yB(t,n,r),this}setActiveLayer(t){return this.activeLayer=this.layers[t],this}addTable(t){const n=new Sp(t);return this.tables[t]=n,n}addBlock(t){const n=new _B(t);return this.blocks[t]=n,n}drawLine(t,n,r,i){return this.activeLayer.addShape(new SB(t,n,r,i)),this}drawLine3d(t,n,r,i,s,a){return this.activeLayer.addShape(new CB(t,n,r,i,s,a)),this}drawPoint(t,n){return this.activeLayer.addShape(new OB(t,n)),this}drawRect(t,n,r,i,s,a){const o=r-t,u=i-n;a=a||0;let d=null;return s?d=new Cp([[t+o-s,n,a],[t+o,n+s],[t+o,n+u-s,a],[t+o-s,n+u],[t+s,n+u,a],[t,n+u-s],[t,n+s,a],[t+s,n]],!0):d=new Cp([[t,n],[t,n+u],[t+o,n+u],[t+o,n]],!0),this.activeLayer.addShape(d),this}drawPolygon(t,n,r,i,s=0,a=!1){const o=2*Math.PI/r,u=[];let d=i;const h=s*Math.PI/180;a&&(d=i/Math.cos(Math.PI/r));for(let p=0;p<r;p++)u.push([t+d*Math.sin(h+p*o),n+d*Math.cos(h+p*o)]);return this.activeLayer.addShape(new Cp(u,!0)),this}drawArc(t,n,r,i,s){return this.activeLayer.addShape(new EB(t,n,r,i,s)),this}drawCircle(t,n,r){return this.activeLayer.addShape(new TB(t,n,r)),this}drawCylinder(t,n,r,i,s,a,o,u){return this.activeLayer.addShape(new jB(t,n,r,i,s,a,o,u)),this}drawText(t,n,r,i,s,a="left",o="baseline"){return this.activeLayer.addShape(new AB(t,n,r,i,s,a,o)),this}drawPolyline(t,n=!1,r=0,i=0){return this.activeLayer.addShape(new Cp(t,n,r,i)),this}drawPolyline3d(t){return t.forEach(n=>{if(n.length!==3)throw"Require 3D coordinates"}),this.activeLayer.addShape(new PB(t)),this}setTrueColor(t){return this.activeLayer.setTrueColor(t),this}drawSpline(t,n=3,r=null,i=null,s=[]){return this.activeLayer.addShape(new RB(t,n,r,i,s)),this}drawEllipse(t,n,r,i,s,a=0,o=2*Math.PI){return this.activeLayer.addShape(new MB(t,n,r,i,s,a,o)),this}drawFace(t,n,r,i,s,a,o,u,d,h,p,m){return this.activeLayer.addShape(new NB(t,n,r,i,s,a,o,u,d,h,p,m)),this}_ltypeTable(){const t=new Sp("LTYPE"),n=Object.values(this.lineTypes);for(const r of n)t.add(r);return t}_layerTable(t){const n=new Sp("LAYER"),r=Object.values(this.layers);for(const i of r)n.add(i);return n}header(t,n){return this.headers[t]=n,this}setUnits(t){return typeof zl.UNITS[t]<"u"?zl.UNITS[t]:zl.UNITS.Unitless,this.header("INSUNITS",[[70,zl.UNITS[t]]]),this}generateAutocadExtras(){this.headers.ACADVER||this.header("ACADVER",[[1,"AC1021"]]),this.lineTypes.ByBlock||this.addLineType("ByBlock","",[]),this.lineTypes.ByLayer||this.addLineType("ByLayer","",[]);let t=this.tables.VPORT;t||(t=this.addTable("VPORT"));let n=this.tables.STYLE;n||(n=this.addTable("STYLE")),this.tables.VIEW||this.addTable("VIEW"),this.tables.UCS||this.addTable("UCS");let r=this.tables.APPID;if(r||(r=this.addTable("APPID")),!this.tables.DIMSTYLE){const s=new bB("DIMSTYLE");this.tables.DIMSTYLE=s}t.add(new xB("*ACTIVE",1e3)),n.add(new vB("standard")),r.add(new wB("ACAD")),this.modelSpace=this.addBlock("*Model_Space"),this.addBlock("*Paper_Space");const i=new TS;this.dictionary.addChildDictionary("ACAD_GROUP",i)}_tagsManager(){const t=new LB,n=new Sp("BLOCK_RECORD"),r=Object.values(this.blocks);for(const d of r){const h=new kB(d.name);n.add(h)}const i=this._ltypeTable(),s=this._layerTable();t.start("HEADER"),t.addHeaderVariable("HANDSEED",[[5,IB.peek()]]);const a=Object.entries(this.headers);for(const d of a){const[h,p]=d;t.addHeaderVariable(h,p)}t.end(),t.start("CLASSES"),t.end(),t.start("TABLES"),i.tags(t),s.tags(t);const o=Object.values(this.tables);for(const d of o)d.tags(t);n.tags(t),t.end(),t.start("BLOCKS");for(const d of r)d.tags(t);t.end(),t.start("ENTITIES");const u=Object.values(this.layers);for(const d of u)d.shapesTags(this.modelSpace,t);return t.end(),t.start("OBJECTS"),this.dictionary.tags(t),t.end(),t.push(0,"EOF"),t}toDxfString(){return this._tagsManager().toDxfString()}};Yu.ACI={LAYER:0,RED:1,YELLOW:2,GREEN:3,CYAN:4,BLUE:5,MAGENTA:6,WHITE:7};Yu.LINE_TYPES=[{name:"CONTINUOUS",description:"______",elements:[]},{name:"DASHED",description:"_ _ _ ",elements:[5,-5]},{name:"DOTTED",description:". . . ",elements:[0,-5]}];Yu.LAYERS=[{name:"0",colorNumber:Yu.ACI.WHITE,lineTypeName:"CONTINUOUS"}];Yu.UNITS={Unitless:0,Inches:1,Feet:2,Miles:3,Millimeters:4,Centimeters:5,Meters:6,Kilometers:7,Microinches:8,Mils:9,Yards:10,Angstroms:11,Nanometers:12,Microns:13,Decimeters:14,Decameters:15,Hectometers:16,Gigameters:17,"Astronomical units":18,"Light years":19,Parsecs:20};var $B=Yu,DB=$B;const zB=vl(DB);function FB(e,t=2){if(!e)return[];const n=[];let r=[],i=0,s=0,a=0,o=0;const u=BB(e);for(const d of u){const h=d.type,p=d.args;switch(h){case"M":r.length>0&&n.push(r),i=p[0],s=p[1],a=i,o=s,r=[{x:i,y:s}];break;case"m":r.length>0&&n.push(r),i+=p[0],s+=p[1],a=i,o=s,r=[{x:i,y:s}];break;case"L":i=p[0],s=p[1],r.push({x:i,y:s});break;case"l":i+=p[0],s+=p[1],r.push({x:i,y:s});break;case"H":i=p[0],r.push({x:i,y:s});break;case"h":i+=p[0],r.push({x:i,y:s});break;case"V":s=p[0],r.push({x:i,y:s});break;case"v":s+=p[0],r.push({x:i,y:s});break;case"C":{const m=lx(i,s,p[0],p[1],p[2],p[3],p[4],p[5],t);r.push(...m.slice(1)),i=p[4],s=p[5]}break;case"c":{const m=lx(i,s,i+p[0],s+p[1],i+p[2],s+p[3],i+p[4],s+p[5],t);r.push(...m.slice(1)),i+=p[4],s+=p[5]}break;case"Q":{const m=jS(i,s,p[0],p[1],p[2],p[3],t);r.push(...m.slice(1)),i=p[2],s=p[3]}break;case"q":{const m=jS(i,s,i+p[0],s+p[1],i+p[2],s+p[3],t);r.push(...m.slice(1)),i+=p[2],s+=p[3]}break;case"A":{const m=AS(i,s,p[0],p[1],p[2],p[3],p[4],p[5],p[6],t);r.push(...m.slice(1)),i=p[5],s=p[6]}break;case"a":{const m=i+p[5],g=s+p[6],v=AS(i,s,p[0],p[1],p[2],p[3],p[4],m,g,t);r.push(...v.slice(1)),i=m,s=g}break;case"Z":case"z":r.length>0&&(r.push({x:a,y:o}),i=a,s=o);break}}return r.length>0&&n.push(r),n}function BB(e){const t=[],n=/([MmLlHhVvCcSsQqTtAaZz])([^MmLlHhVvCcSsQqTtAaZz]*)/g,r=[...e.matchAll(n)];for(const i of r){const s=i[1],o=i[2].trim().split(/[\s,]+/).filter(u=>u.length>0).map(Number);t.push({type:s,args:o})}return t}function lx(e,t,n,r,i,s,a,o,u){const d=[{x:e,y:t}];return cx(e,t,n,r,i,s,a,o,u,d),d.push({x:a,y:o}),d}function cx(e,t,n,r,i,s,a,o,u,d){const h=a-e,p=o-t;if(Math.sqrt(h*h+p*p)<.001)return;const g=PS(n,r,e,t,a,o),v=PS(i,s,e,t,a,o);if(g<u&&v<u)return;const w=(e+n)/2,S=(t+r)/2,x=(n+i)/2,k=(r+s)/2,j=(i+a)/2,O=(s+o)/2,I=(w+x)/2,E=(S+k)/2,U=(x+j)/2,D=(k+O)/2,R=(I+U)/2,W=(E+D)/2;cx(e,t,w,S,I,E,R,W,u,d),d.push({x:R,y:W}),cx(R,W,U,D,j,O,a,o,u,d)}function jS(e,t,n,r,i,s,a){const o=e+.6666666666666666*(n-e),u=t+2/3*(r-t),d=i+2/3*(n-i),h=s+2/3*(r-s);return lx(e,t,o,u,d,h,i,s,a)}function AS(e,t,n,r,i,s,a,o,u,d){if(n===0||r===0)return[{x:e,y:t},{x:o,y:u}];const h=UB(e,t,n,r,i,s,a,o,u);if(!h)return[{x:e,y:t},{x:o,y:u}];const{cx:p,cy:m,theta1:g,dtheta:v,rx:w,ry:S}=h,x=i*Math.PI/180,k=(w+S)/2,j=Math.abs(v)*k,O=Math.max(4,Math.ceil(j/(2*Math.sqrt(2*d*k)))),I=[];for(let E=0;E<=O;E++){const U=g+v*E/O,D=Math.cos(U),R=Math.sin(U),W=Math.cos(x),ce=Math.sin(x),te=p+w*D*W-S*R*ce,me=m+w*D*ce+S*R*W;I.push({x:te,y:me})}return I}function UB(e,t,n,r,i,s,a,o,u){const d=i*Math.PI/180,h=Math.cos(d),p=Math.sin(d),m=(e-o)/2,g=(t-u)/2,v=h*m+p*g,w=-p*m+h*g;n=Math.abs(n),r=Math.abs(r);const S=v*v/(n*n)+w*w/(r*r);if(S>1){const Re=Math.sqrt(S);n*=Re,r*=Re}const x=n*n,k=r*r,j=v*v,O=w*w;let I=(x*k-x*O-k*j)/(x*O+k*j);I<0&&(I=0);const E=(s!==a?1:-1)*Math.sqrt(I),U=E*(n*w)/r,D=E*-(r*v)/n,R=h*U-p*D+(e+o)/2,W=p*U+h*D+(t+u)/2,ce=(v-U)/n,te=(w-D)/r,me=(-v-U)/n,H=(-w-D)/r,ge=Math.sqrt(ce*ce+te*te),Ee=(te>=0?1:-1)*Math.acos(ce/ge),ke=ce*me+te*H,ze=ce*H-te*me;let xe=Math.acos(Math.max(-1,Math.min(1,ke/(ge*Math.sqrt(me*me+H*H)))));return ze<0&&(xe=-xe),!a&&xe>0&&(xe-=2*Math.PI),a&&xe<0&&(xe+=2*Math.PI),{cx:R,cy:W,theta1:Ee,dtheta:xe,rx:n,ry:r}}function PS(e,t,n,r,i,s){const a=i-n,o=s-r,u=Math.sqrt(a*a+o*o);return u===0?Math.sqrt((e-n)**2+(t-r)**2):Math.abs((o*e-a*t+i*r-s*n)/u)}function HB(e,t,n,r,i=0,s=0){if(e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0,r=parseFloat(r)||0,i=parseFloat(i)||0,s=parseFloat(s)||i,i===0&&s===0)return[{x:e,y:t},{x:e+n,y:t},{x:e+n,y:t+r},{x:e,y:t+r},{x:e,y:t}];i=Math.min(i,n/2),s=Math.min(s,r/2);const a=[],o=8;for(let u=0;u<=o;u++){const d=-Math.PI/2+Math.PI/2*(u/o);a.push({x:e+n-i+i*Math.cos(d),y:t+s+s*Math.sin(d)})}for(let u=0;u<=o;u++){const d=0+Math.PI/2*(u/o);a.push({x:e+n-i+i*Math.cos(d),y:t+r-s+s*Math.sin(d)})}for(let u=0;u<=o;u++){const d=Math.PI/2+Math.PI/2*(u/o);a.push({x:e+i+i*Math.cos(d),y:t+r-s+s*Math.sin(d)})}for(let u=0;u<=o;u++){const d=Math.PI+Math.PI/2*(u/o);a.push({x:e+i+i*Math.cos(d),y:t+s+s*Math.sin(d)})}return a.push(a[0]),a}function WB(e,t,n,r=32){e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0;const i=[];for(let s=0;s<=r;s++){const a=2*Math.PI*s/r;i.push({x:e+n*Math.cos(a),y:t+n*Math.sin(a)})}return i}function VB(e,t,n,r,i=32){e=parseFloat(e)||0,t=parseFloat(t)||0,n=parseFloat(n)||0,r=parseFloat(r)||0;const s=[];for(let a=0;a<=i;a++){const o=2*Math.PI*a/i;s.push({x:e+n*Math.cos(o),y:t+r*Math.sin(o)})}return s}function GB(e){if(!e)return[];const t=e.trim().split(/[\s,]+/).map(Number),n=[];for(let r=0;r<t.length;r+=2)r+1<t.length&&n.push({x:t[r],y:t[r+1]});return n.length>0&&n.push({x:n[0].x,y:n[0].y}),n}function qB(e){if(!e)return[];const t=e.trim().split(/[\s,]+/).map(Number),n=[];for(let r=0;r<t.length;r+=2)r+1<t.length&&n.push({x:t[r],y:t[r+1]});return n}function YB(e,t,n,r){return[{x:parseFloat(e)||0,y:parseFloat(t)||0},{x:parseFloat(n)||0,y:parseFloat(r)||0}]}function ig(e,t){if(!t||!e.length)return e;const n=XB(t);return e.map(r=>ZB(r,n))}function XB(e){let t=[1,0,0,1,0,0];const n=e.match(/\w+\([^)]+\)/g)||[];for(const r of n){const i=r.match(/(\w+)\(([^)]+)\)/);if(!i)continue;const s=i[1],a=i[2].split(/[\s,]+/).map(Number);let o;switch(s){case"translate":o=[1,0,0,1,a[0]||0,a[1]||0];break;case"scale":o=[a[0]||1,0,0,a[1]??a[0]??1,0,0];break;case"rotate":const u=(a[0]||0)*Math.PI/180,d=Math.cos(u),h=Math.sin(u);if(a.length===3){const p=a[1],m=a[2];o=[d,h,-h,d,p-d*p+h*m,m-h*p-d*m]}else o=[d,h,-h,d,0,0];break;case"matrix":for(o=a.slice(0,6);o.length<6;)o.push(0);break;default:continue}t=KB(t,o)}return t}function KB(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function ZB(e,t){return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}let Ep=[];const Ay={"#A5362F":"RH01","#E21F2F":"RH02","#609B63":"RH10","#3BB44A":"RH11","#006C55":"RH12","#0075BC":"RH20","#493D8C":"RH21","#47AFE3":"RH22","#039DC4":"RH23","#00A6A3":"RH26","#E4C4AA":"RH30","#E8E3D8":"RH31","#8B5F3C":"RH32","#E5A144":"RH40","#FFD833":"RH41","#F15B32":"RH50","#59595B":"RH60","#939598":"RH61","#D9D9D6":"RH65","#231F20":"RH70","#E8457E":"RH90"},Py={RH01:1,RH02:1,RH10:3,RH11:3,RH12:3,RH20:5,RH21:6,RH22:4,RH23:4,RH26:4,RH30:52,RH31:7,RH32:38,RH40:2,RH41:2,RH50:30,RH60:8,RH61:8,RH65:9,RH70:250,RH90:6,OUTER_BORDER:2,NOTES:4,TEXT_OUTLINES:7,OTHER_COLORS:7};function QB(e,t){const{widthMm:n,lengthMm:r,designName:i="TPV Design",seed:s,motifs:a}=t;Ep=[];const o=new zB,u=tU(e),d=n/u.width,h=r/u.height,p=new Map,m=e.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line");let g=0,v=0,w=0;for(const x of m){const k=x.getAttribute("display"),j=x.getAttribute("visibility");if(k==="none"||j==="hidden")continue;const O=x.getAttribute("class")||"";if(O.includes("handle")||O.includes("selection"))continue;const I=bN(x);if(!I||I==="none"||I==="transparent"){v++;continue}const U=vN(I)||"OTHER_COLORS";p.has(U)||p.set(U,[]);let D;try{D=xN(x)}catch(me){console.warn("[DXF] Error converting element:",me),w++;continue}if(!D||D.length===0){w++;continue}const R=yN(x),ce=(R?ig(D,R):D).filter(me=>isFinite(me.x)&&isFinite(me.y)&&!isNaN(me.x)&&!isNaN(me.y));if(ce.length<2){w++;continue}const te=ce.map(me=>({x:me.x*d,y:r-me.y*h}));p.get(U).push(te),g++}const S=e.querySelectorAll("text");if(S.length>0){Ep.push(`${S.length} text element(s) were converted to outlines. Edit text in CAD if needed.`);for(const x of S)try{const k=JB(x,d,h,r);k&&(p.has("TEXT_OUTLINES")||p.set("TEXT_OUTLINES",[]),p.get("TEXT_OUTLINES").push(k),g++)}catch(k){console.warn("[DXF] Error converting text:",k)}}if(a&&Object.keys(a).length>0){let x=0,k=0;for(const[j,O]of Object.entries(a)){if(!O.svgContent){k++;continue}try{const I=eU(O,d,h,r);for(const{layerName:E,vertices:U}of I)p.has(E)||p.set(E,[]),p.get(E).push(U),g++;x++}catch(I){console.warn(`[DXF] Error processing motif ${j}:`,I),k++}}x>0&&console.log(`[DXF] Processed ${x} motif(s)`),k>0&&Ep.push(`${k} motif(s) could not be fully exported due to missing or invalid SVG content.`)}for(const[x,k]of p){const j=Py[x]||7;try{o.addLayer(x,j,"CONTINUOUS"),o.setActiveLayer(x)}catch(O){console.warn(`[DXF] Error creating layer ${x}:`,O);continue}for(const O of k)if(O.length>=2)try{const I=O.length>2&&Math.abs(O[0].x-O[O.length-1].x)<.01&&Math.abs(O[0].y-O[O.length-1].y)<.01,E=O.map(D=>[D.x,D.y]);I&&E.length>1&&E.pop();const U=E.filter(D=>isFinite(D[0])&&isFinite(D[1])&&!isNaN(D[0])&&!isNaN(D[1]));U.length>=2&&o.drawPolyline(U,I)}catch(I){console.warn("[DXF] Error drawing polyline:",I)}}try{o.addLayer("OUTER_BORDER",Py.OUTER_BORDER,"CONTINUOUS"),o.setActiveLayer("OUTER_BORDER"),o.drawPolyline([[0,0],[n,0],[n,r],[0,r]],!0)}catch(x){console.warn("[DXF] Error adding border:",x)}try{o.addLayer("NOTES",Py.NOTES,"CONTINUOUS"),o.setActiveLayer("NOTES");const x=[`Project: ${i}`,`Size: ${(n/1e3).toFixed(2)}m x ${(r/1e3).toFixed(2)}m`,`Generated: ${new Date().toISOString().split("T")[0]}`,s?`Seed: ${s}`:null,"TPV Studio | rosehilltpv.com"].filter(Boolean).join("\\P");o.drawText(10,-50,100,0,x)}catch(x){console.warn("[DXF] Error adding notes:",x)}return console.log(`[DXF] Export complete: ${g} elements processed, ${v} transparent skipped, ${w} invalid skipped`),{dxfContent:o.toDxfString(),warnings:Ep}}function yN(e){const t=[];let n=e;for(;n&&n.getAttribute;){const r=n.getAttribute("transform");r&&t.unshift(r),n=n.parentElement}return t.length>0?t.join(" "):null}function JB(e,t,n,r){try{const i=e.getBBox?e.getBBox():null;if(i&&i.width>0&&i.height>0){const s=yN(e);let a=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height},{x:i.x,y:i.y}];return s&&(a=ig(a,s)),a.map(o=>({x:o.x*t,y:r-o.y*n}))}}catch(i){console.warn("[DXF] Could not get text bounds:",i)}return null}function eU(e,t,n,r){const i=[],{svgContent:s,position:a,rotation:o,scale:u,originalWidth_mm:d,originalHeight_mm:h}=e,g=new DOMParser().parseFromString(s,"image/svg+xml").querySelector("svg");if(!g)return console.warn("[DXF] Could not parse motif SVG"),i;const v=g.getAttribute("viewBox");let w={width:100,height:100};if(v){const D=v.split(/\s+/).map(Number);D.length>=4&&(w={width:D[2],height:D[3]})}const S=(d||1e3)*(u||1),x=(h||1e3)*(u||1),k=S/w.width,j=x/w.height,O=S/2,I=x/2,E=`translate(${a.x}, ${a.y}) rotate(${o||0}, ${O}, ${I})`,U=g.querySelectorAll("path, rect, circle, ellipse, polygon, polyline");for(const D of U){const R=D.getAttribute("display"),W=D.getAttribute("visibility");if(R==="none"||W==="hidden")continue;const ce=bN(D);if(!ce||ce==="none"||ce==="transparent")continue;const me=vN(ce)||"OTHER_COLORS";let H;try{H=xN(D)}catch{continue}if(!H||H.length===0)continue;const ge=D.getAttribute("transform");ge&&(H=ig(H,ge)),H=H.map(ze=>({x:ze.x*k,y:ze.y*j})),H=ig(H,E);const Ee=H.filter(ze=>isFinite(ze.x)&&isFinite(ze.y)&&!isNaN(ze.x)&&!isNaN(ze.y));if(Ee.length<2)continue;const ke=Ee.map(ze=>({x:ze.x*t,y:r-ze.y*n}));i.push({layerName:me,vertices:ke})}return i}function tU(e){const t=e.getAttribute("viewBox");if(t){const[i,s,a,o]=t.split(/\s+/).map(Number);return{minX:i,minY:s,width:a,height:o}}const n=parseFloat(e.getAttribute("width"))||1e3,r=parseFloat(e.getAttribute("height"))||1e3;return{minX:0,minY:0,width:n,height:r}}function bN(e){const t=e.getAttribute("style");if(t){const r=t.match(/fill:\s*([^;]+)/i);if(r)return NS(r[1].trim())}const n=e.getAttribute("fill");return n?NS(n):"#000000"}function NS(e){if(!e)return null;if(e.startsWith("#"))return e.length===4?"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]:e.toUpperCase();const t=e.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);if(t){const n=parseInt(t[1]).toString(16).padStart(2,"0"),r=parseInt(t[2]).toString(16).padStart(2,"0"),i=parseInt(t[3]).toString(16).padStart(2,"0");return`#${n}${r}${i}`.toUpperCase()}return e}function vN(e){if(!e)return null;const t=e.toUpperCase();if(Ay[t])return Ay[t];let n=null,r=1/0;const i=OS(t);if(!i)return null;for(const[s,a]of Object.entries(Ay)){const o=OS(s);if(!o)continue;const u=Math.sqrt(Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));u<r&&(r=u,n=a)}return r<=50?n:null}function OS(e){if(!e||!e.startsWith("#"))return null;const t=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function xN(e){switch(e.tagName.toLowerCase()){case"path":const n=e.getAttribute("d"),r=FB(n,2);return r.length>0?r[0]:[];case"rect":return HB(e.getAttribute("x"),e.getAttribute("y"),e.getAttribute("width"),e.getAttribute("height"),e.getAttribute("rx"),e.getAttribute("ry"));case"circle":return WB(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("r"),32);case"ellipse":return VB(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("rx"),e.getAttribute("ry"),32);case"polygon":return GB(e.getAttribute("points"));case"polyline":return qB(e.getAttribute("points"));case"line":return YB(e.getAttribute("x1"),e.getAttribute("y1"),e.getAttribute("x2"),e.getAttribute("y2"));default:return[]}}function nU(e,t="design.dxf"){const n=new Blob([e],{type:"application/dxf"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}function rU(e){const t=e.cloneNode(!0),n=[".court-canvas__selection-outline",".transform-handles",".track-resize-handles",'[class*="selection"]','[class*="handle"]',"[stroke-dasharray]"];for(const r of n)t.querySelectorAll(r).forEach(i=>i.remove());return t}async function iU(e){const t=Object.values(e||{});return t.length===0?[]:(await Promise.all(t.map(async r=>{try{const i=await Ef(r.sourceDesignId),s=(i==null?void 0:i.design)||i;if(!s)return console.warn(`[EXPORT] Could not fetch design for motif ${r.id}`),null;console.log("[EXPORT] Loaded design for motif:",s.name),console.log("[EXPORT] Design has solid_recipes:",!!s.solid_recipes),console.log("[EXPORT] Design has blend_recipes:",!!s.blend_recipes);const a=r.scale||1,o=r.originalWidth_mm*a/1e3,u=r.originalHeight_mm*a/1e3,d=o*u,h=r.viewMode||"solid",p=h==="blend"?s.blend_recipes:s.solid_recipes;return console.log(`[EXPORT] Using ${h} recipes:`,(p==null?void 0:p.length)||0,"recipes"),{id:r.id,name:r.customName||r.sourceDesignName||s.name||"Motif",areaM2:d,viewMode:h,widthM:o,heightM:u,recipes:p||[]}}catch(i){return console.error(`[EXPORT] Error processing motif ${r.id}:`,i),null}}))).filter(Boolean)}function RS({svgRef:e}){const[t,n]=fe.useState(!1),[r,i]=fe.useState(null),s=fe.useRef(null),a=tn(O=>O.exportDesignData),o=tn(O=>O.surface),u=tn(O=>O.designName),d=tn(O=>O.motifs),h=tn(O=>O.shapes),p=tn(O=>O.texts),m=tn(O=>O.exclusionZones);fe.useEffect(()=>{const O=I=>{s.current&&!s.current.contains(I.target)&&n(!1)};return t&&document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[t]);const g=()=>e!=null&&e.current?e.current:document.querySelector(".court-canvas__svg"),v=async()=>{i("svg");try{const O=g();if(!O)throw new Error("Canvas not found");const I=a(),E=bw(O,I),U=Dd(I.name,"svg");B7(E,U)}catch(O){console.error("SVG export failed:",O),Xr("Failed to export SVG. Please try again.")}finally{i(null),n(!1)}},w=async()=>{i("png");try{const O=g();if(!O)throw new Error("Canvas not found");const I=a(),E=Dd(I.name,"png");await U7(O,I,E,2)}catch(O){console.error("PNG export failed:",O),Xr("Failed to export PNG. Please try again.")}finally{i(null),n(!1)}},S=async()=>{i("pdf"),n(!1);try{const O=g();if(!O)throw new Error("Canvas not found");const I=await _a.getSession();if(!(I!=null&&I.access_token))throw new Error("Authentication required for PDF export");const E=a(),U=E.name||"TPV Design";await F7();const D=O.cloneNode(!0);D.querySelectorAll('[class*="selected"], .transform-handles, .track-resize-handles, .court-canvas__selection-outline, [class*="selection"], [class*="handle"]').forEach(ge=>ge.remove()),D.setAttribute("xmlns","http://www.w3.org/2000/svg"),D.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),kS(D);const R=new XMLSerializer().serializeToString(D);console.log("[EXPORT] Courts in state:",Object.keys(E.courts).length),console.log("[EXPORT] SVG contains court elements:",R.includes("court-canvas__court")),console.log("[EXPORT] Generating PDF report via API...");const W=await iU(d);console.log("[EXPORT] Motifs for PDF:",W.length);const ce=await fetch("/api/export-sports-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.access_token}`},body:JSON.stringify({svgString:R,designName:U,surface:E.surface,courts:E.courts,tracks:E.tracks,shapes:h,texts:p,motifs:W,exclusionZones:m,dimensions:{widthMM:E.surface.width_mm,lengthMM:E.surface.length_mm}})});if(!ce.ok){const ge=await ce.json().catch(()=>({error:"Unknown error"}));throw new Error(ge.error||`Server error: ${ce.status}`)}const te=await ce.blob(),me=Dd(U,"pdf"),H=document.createElement("a");H.href=URL.createObjectURL(te),H.download=me,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(H.href),console.log("[EXPORT] PDF downloaded:",me)}catch(O){console.error("PDF export failed:",O),Xr("Failed to export PDF. Please try again.")}finally{i(null)}},x=async()=>{i("tiles"),n(!1);try{const O=g();if(!O)throw new Error("Canvas not found");const E=new XMLSerializer().serializeToString(O),U={width:o.width_mm,length:o.length_mm},D=u||"sports-surface",R=await fN(E,U,D),W=`${D.replace(/[^a-zA-Z0-9-_]/g,"-")}-tiles-1mx1m.zip`;mN(R,W),console.log("[EXPORT] Tiles ZIP downloaded:",W)}catch(O){console.error("Tiles export failed:",O),Xr("Failed to export tiles. Please try again.")}finally{i(null)}},k=async()=>{i("dxf"),n(!1);try{const O=g();if(!O)throw new Error("Canvas not found");const I=a(),E=rU(O),U=QB(E,{widthMm:I.surface.width_mm,lengthMm:I.surface.length_mm,designName:I.name||"Sports Surface",seed:I.seed,motifs:d}),D=Dd(I.name,"dxf");if(nU(U.dxfContent,D),console.log("[EXPORT] DXF downloaded:",D),U.warnings&&U.warnings.length>0){const R=`DXF Export Notes:

`+U.warnings.join(`

`);Xr(R,"warning")}}catch(O){console.error("DXF export failed:",O),Xr("Failed to export DXF. Please try again.")}finally{i(null)}},j=async()=>{i("canvas-pdf"),n(!1);try{const O=g();if(!O)throw new Error("Canvas not found");const I=await _a.getSession();if(!(I!=null&&I.access_token))throw new Error("Authentication required for PDF export");const E=a(),U=E.name||"TPV Design",D=O.cloneNode(!0);D.querySelectorAll('[class*="selected"], .transform-handles, .track-resize-handles, .court-canvas__selection-outline, [class*="selection"], [class*="handle"]').forEach(H=>H.remove()),D.setAttribute("xmlns","http://www.w3.org/2000/svg"),D.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),kS(D);const R=new XMLSerializer().serializeToString(D),W=await fetch("/api/export-canvas-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.access_token}`},body:JSON.stringify({svgString:R,designName:U,widthMm:E.surface.width_mm,lengthMm:E.surface.length_mm,designType:"sports"})});if(!W.ok){const H=await W.json().catch(()=>({error:"Unknown error"}));throw new Error(H.error||`Server error: ${W.status}`)}const ce=await W.blob(),te=Dd(U,"pdf").replace(".pdf","-canvas.pdf"),me=document.createElement("a");me.href=URL.createObjectURL(ce),me.download=te,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(me.href),console.log("[EXPORT] Canvas PDF downloaded:",te)}catch(O){console.error("Canvas PDF export failed:",O),Xr("Failed to export PDF. Please try again.")}finally{i(null)}};return l.jsxs("div",{className:"export-menu",ref:s,children:[(r==="pdf"||r==="canvas-pdf")&&l.jsx("div",{className:"export-loading-overlay",children:l.jsxs("div",{className:"export-loading-modal",children:[l.jsx("div",{className:"export-loading-spinner"}),l.jsx("div",{className:"export-loading-title",children:r==="pdf"?"Generating Materials Report...":"Generating Canvas PDF..."}),l.jsx("div",{className:"export-loading-subtitle",children:"This may take a moment for complex designs"})]})}),l.jsxs("button",{className:"sports-toolbar__btn-export",onClick:()=>n(!t),title:"Export Design",children:["Export",l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:t?"M18 15l-6-6-6 6":"M6 9l6 6 6-6"})})]}),t&&l.jsxs("div",{className:"export-menu__dropdown",children:[l.jsxs("button",{className:"export-menu__item",onClick:v,disabled:r!==null,children:[l.jsx("span",{className:"export-menu__icon",children:""}),l.jsxs("div",{className:"export-menu__item-content",children:[l.jsx("span",{className:"export-menu__item-title",children:r==="svg"?"Exporting...":"Download SVG"}),l.jsx("span",{className:"export-menu__item-desc",children:"Vector format for CAD/printing"})]})]}),l.jsxs("button",{className:"export-menu__item",onClick:w,disabled:r!==null,children:[l.jsx("span",{className:"export-menu__icon",children:""}),l.jsxs("div",{className:"export-menu__item-content",children:[l.jsx("span",{className:"export-menu__item-title",children:r==="png"?"Exporting...":"Download PNG"}),l.jsx("span",{className:"export-menu__item-desc",children:"High-res image for presentations"})]})]}),l.jsxs("button",{className:"export-menu__item",onClick:x,disabled:r!==null,children:[l.jsx("span",{className:"export-menu__icon",children:""}),l.jsxs("div",{className:"export-menu__item-content",children:[l.jsx("span",{className:"export-menu__item-title",children:r==="tiles"?"Generating...":"Download Tiles ZIP"}),l.jsx("span",{className:"export-menu__item-desc",children:"1m1m SVG tiles for large-format printing"})]})]}),l.jsx("div",{className:"export-menu__divider"}),l.jsxs("button",{className:"export-menu__item",onClick:S,disabled:r!==null,children:[l.jsx("span",{className:"export-menu__icon",children:""}),l.jsxs("div",{className:"export-menu__item-content",children:[l.jsx("span",{className:"export-menu__item-title",children:r==="pdf"?"Generating...":"Materials Report (PDF)"}),l.jsx("span",{className:"export-menu__item-desc",children:"TPV quantities & specifications"})]})]}),l.jsxs("button",{className:"export-menu__item",onClick:j,disabled:r!==null,children:[l.jsx("span",{className:"export-menu__icon",children:""}),l.jsxs("div",{className:"export-menu__item-content",children:[l.jsx("span",{className:"export-menu__item-title",children:r==="canvas-pdf"?"Generating...":"Canvas PDF (1:100)"}),l.jsx("span",{className:"export-menu__item-desc",children:"Scaled design with dimensions"})]})]}),l.jsx("div",{className:"export-menu__divider"}),l.jsxs("button",{className:"export-menu__item",onClick:k,disabled:r!==null,children:[l.jsx("span",{className:"export-menu__icon",children:""}),l.jsxs("div",{className:"export-menu__item-content",children:[l.jsx("span",{className:"export-menu__item-title",children:r==="dxf"?"Exporting...":"Download DXF"}),l.jsx("span",{className:"export-menu__item-desc",children:"CAD format for AutoCAD/Rhino"})]})]})]})]})}function sU({isOpen:e,onClose:t}){if(!e)return null;const n=[{category:"Selection",items:[{keys:["Delete"],description:"Remove selected element"},{keys:["Escape"],description:"Deselect / exit group edit"}]},{category:"Edit",items:[{keys:["Ctrl","Z"],description:"Undo"},{keys:["Ctrl","Shift","Z"],description:"Redo"},{keys:["Ctrl","D"],description:"Duplicate selected"},{keys:["Ctrl","C"],description:"Copy selection"},{keys:["Ctrl","V"],description:"Paste"}]},{category:"Groups",items:[{keys:["Ctrl","G"],description:"Group selected elements"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group"}]},{category:"Move",items:[{keys:["Arrow Keys"],description:"Nudge element (10mm)"},{keys:["Shift","Arrow Keys"],description:"Large nudge (100mm)"}]},{category:"Layers",items:[{keys:["["],description:"Send backward"},{keys:["]"],description:"Bring forward"}]},{category:"View",items:[{keys:["G"],description:"Toggle snap to grid"},{keys:["?"],description:"Show this help"}]}],i=navigator.platform.toUpperCase().indexOf("MAC")>=0?"":"Ctrl";return l.jsx("div",{className:"keyboard-shortcuts-overlay",onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:l.jsxs("div",{className:"keyboard-shortcuts-modal",onClick:s=>s.stopPropagation(),style:{background:"#fff",borderRadius:"8px",padding:"24px",maxWidth:"480px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:600},children:"Keyboard Shortcuts"}),l.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"4px 8px",color:"#666"},"aria-label":"Close",children:""})]}),n.map(s=>l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",color:"#666",marginBottom:"8px",letterSpacing:"0.5px"},children:s.category}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.items.map((a,o)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[l.jsx("span",{style:{color:"#333",fontSize:"0.9rem"},children:a.description}),l.jsx("div",{style:{display:"flex",gap:"4px"},children:a.keys.map((u,d)=>l.jsx("kbd",{style:{display:"inline-block",padding:"4px 8px",fontSize:"0.75rem",fontFamily:"system-ui, -apple-system, sans-serif",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",minWidth:"24px",textAlign:"center"},children:u==="Ctrl"?i:u},d))})]},o))})]},s.category)),l.jsxs("p",{style:{fontSize:"0.8rem",color:"#888",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #eee",marginBottom:0},children:["Press ",l.jsx("kbd",{style:{padding:"2px 6px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.75rem"},children:"?"})," at any time to show this help"]})]})})}class aU{async _getAuthHeaders(){const t=await _a.getSession(),n={"Content-Type":"application/json"};return t!=null&&t.access_token&&(n.Authorization=`Bearer ${t.access_token}`),n}async generateRecraft(t){const n={prompt:t.prompt,width_mm:t.widthMM||5e3,length_mm:t.lengthMM||5e3,max_colours:t.maxColours||6,seed:t.seed||null},r=await this._getAuthHeaders(),i=await fetch("/api/recraft-generate",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Recraft generation failed")}return i.json()}async vectorizeImage(t){const n={image_url:t.image_url,width_mm:t.width_mm||5e3,length_mm:t.length_mm||5e3,seed:t.seed||null},r=await this._getAuthHeaders(),i=await fetch("/api/recraft-vectorize",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Vectorization failed")}return i.json()}async processUploadedSVG(t){const n={svg_url:t.svg_url,width_mm:t.width_mm||5e3,length_mm:t.length_mm||5e3},r=await this._getAuthHeaders(),i=await fetch("/api/process-uploaded-svg",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"SVG processing failed")}return i.json()}async getRecraftStatus(t){const n=await this._getAuthHeaders(),r=await fetch(`/api/studio-job-status?jobId=${t}`,{headers:n});if(!r.ok){const i=await r.json();throw new Error(i.error||"Status fetch failed")}return r.json()}async waitForRecraftCompletion(t,n=null,r=2e3,i=null){return new Promise((s,a)=>{let o=null;i&&i.addEventListener("abort",()=>{o&&clearTimeout(o),a(new DOMException("Polling aborted","AbortError"))});const u=async()=>{var d,h;if(i!=null&&i.aborted){a(new DOMException("Polling aborted","AbortError"));return}try{const p=await this.getRecraftStatus(t);n&&n(p),p.status==="completed"?((d=p.result)==null?void 0:d.svg_url)?s(p):a(new Error("Job completed but no output received")):p.status==="failed"?(h=p.result)!=null&&h.svg_url?s(p):a(new Error(p.error||"Job failed")):(p.status==="retrying"||p.status==="pending"||p.status==="queued"||p.status,o=setTimeout(u,r))}catch(p){a(p)}};u()})}async matchColor(t,n=2){const r=await fetch("/api/match-color",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hex:t,max_components:n})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Color matching failed")}return r.json()}async generateDesignName(t){const n={prompt:t.prompt,colors:t.colors||[],dimensions:t.dimensions||{}},r=await this._getAuthHeaders(),i=await fetch("/api/generate-design-name",{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw new Error(s.error||"Name generation failed")}return i.json()}async inspireSimpleCreateJob(t){const n={prompt:t.prompt,surface:{width_mm:t.lengthMM||5e3,height_mm:t.widthMM||5e3},max_colours:t.maxColours||6,try_simpler:t.trySimpler||!1};t.seed&&(n.seed=t.seed);const r=await fetch("/api/studio-inspire-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to start design generation. Please check your connection and try again.")}return r.json()}async inspireSimpleGetStatus(t){const n=await this._getAuthHeaders(),r=await fetch(`/api/studio-job-status?jobId=${t}`,{headers:n});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to check generation status. Please try again.")}return r.json()}async inspireSimpleWaitForCompletion(t,n=null,r=2e3){return new Promise((i,s)=>{const a=async()=>{var o;try{const u=await this.inspireSimpleGetStatus(t);n&&n(u),u.status==="completed"?((o=u.result)==null?void 0:o.final_url)?(console.log("[API] Job complete with JPG output, resolving"),i(u)):(console.log("[API] Job completed but no output received"),s(new Error("Job completed but no output received"))):u.status==="failed"?s(new Error(u.error||"Job failed")):setTimeout(a,r)}catch(u){s(u)}};a()})}async draftify(t){const n=await fetch(Vk.DRAFTIFY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Unable to convert image to vector format. Please try a different image.")}return n.json()}async generateGeometric(t){const n={brief:t.prompt||t.brief,canvas:{width_mm:t.lengthMM||5e3,height_mm:t.widthMM||5e3},options:{mood:t.mood||"playful",composition:t.composition||"mixed",colorCount:t.maxColours||t.colorCount||5,seed:t.seed},validate:!0},r=await fetch(Vk.GEOMETRIC_GENERATE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Unable to generate design. Please try a different prompt or settings.")}return r.json()}}const Ol=new aU;function oU({recipes:e,onClose:t}){if(!e||e.length===0)return l.jsxs("div",{className:"solid-summary-empty",children:[l.jsx("p",{children:"No colours in design."}),l.jsx("button",{onClick:t,className:"close-button",children:"Close"})]});const n=e.reduce((r,i)=>r+i.targetColor.areaPct,0);return l.jsxs("div",{className:"solid-color-summary",children:[l.jsxs("div",{className:"summary-header",children:[l.jsx("h3",{children:"TPV Colours Used"}),l.jsx("button",{onClick:t,className:"close-button-icon",children:""})]}),l.jsx("div",{className:"summary-info",children:l.jsxs("p",{className:"summary-description",children:["This design uses ",l.jsx("strong",{children:e.length})," pure TPV colour",e.length!==1?"s":""," (no blending required)"]})}),l.jsx("div",{className:"colors-list",children:e.map((r,i)=>{const s=r.chosenRecipe.components[0],a=r.targetColor.areaPct;return l.jsxs("div",{className:"color-item",children:[l.jsx("div",{className:"color-swatch",style:{backgroundColor:r.blendColor.hex},title:`${s.code} - ${s.name}`}),l.jsxs("div",{className:"color-details",children:[l.jsxs("div",{className:"color-primary",children:[l.jsx("span",{className:"color-code",children:s.code}),l.jsx("span",{className:"color-name",children:s.name})]}),l.jsxs("div",{className:"color-secondary",children:[l.jsx("span",{className:"hex-value",children:r.blendColor.hex}),l.jsxs("span",{className:"coverage-badge",children:[a.toFixed(1),"%"]})]})]})]},i)})}),l.jsxs("div",{className:"summary-footer",children:[l.jsxs("div",{className:"footer-stat",children:[l.jsx("span",{className:"stat-label",children:"Total Coverage:"}),l.jsxs("span",{className:"stat-value",children:[n.toFixed(1),"%"]})]}),l.jsxs("div",{className:"footer-stat",children:[l.jsx("span",{className:"stat-label",children:"TPV Colours:"}),l.jsx("span",{className:"stat-value",children:e.length})]})]}),l.jsx("style",{jsx:!0,children:`
        .solid-color-summary {
          background: #fff;
          border-radius: 8px;
          border: 1px solid #ddd;
          padding: 2rem;
          max-width: 800px;
          margin: 2rem auto;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .solid-summary-empty {
          background: #fff;
          border-radius: 8px;
          padding: 2rem;
          text-align: center;
        }

        .summary-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          padding-bottom: 1rem;
          border-bottom: 2px solid #1a365d;
        }

        .summary-header h3 {
          margin: 0;
          color: #1a365d;
          font-size: 1.8rem;
        }

        .close-button-icon {
          background: none;
          border: none;
          font-size: 2rem;
          color: #666;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          line-height: 1;
          transition: color 0.2s;
        }

        .close-button-icon:hover {
          color: #333;
        }

        .summary-info {
          background: #f9f9f9;
          padding: 1rem;
          border-radius: 6px;
          margin-bottom: 1.5rem;
        }

        .summary-description {
          margin: 0;
          color: #333;
          font-size: 1rem;
          line-height: 1.5;
        }

        /* Colors List */
        .colors-list {
          display: flex;
          flex-direction: column;
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        .color-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
          border: 1px solid #e0e0e0;
          transition: all 0.2s;
        }

        .color-item:hover {
          border-color: #ff6b35;
          box-shadow: 0 2px 8px rgba(255, 107, 53, 0.15);
        }

        .color-swatch {
          width: 60px;
          height: 60px;
          border-radius: 8px;
          border: 2px solid #ddd;
          flex-shrink: 0;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .color-details {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .color-primary {
          display: flex;
          align-items: baseline;
          gap: 0.5rem;
        }

        .color-code {
          font-family: 'Courier New', monospace;
          font-weight: 700;
          font-size: 1.2rem;
          color: #1a365d;
        }

        .color-name {
          font-size: 1.1rem;
          color: #333;
          font-weight: 500;
        }

        .color-secondary {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .hex-value {
          font-family: 'Courier New', monospace;
          font-size: 0.9rem;
          color: #666;
        }

        .coverage-badge {
          background: #ff6b35;
          color: white;
          padding: 0.25rem 0.75rem;
          border-radius: 12px;
          font-weight: 600;
          font-size: 0.9rem;
        }

        /* Summary Footer */
        .summary-footer {
          display: flex;
          justify-content: space-around;
          padding: 1.5rem;
          background: #f9f9f9;
          border-radius: 6px;
          border: 2px solid #ff6b35;
        }

        .footer-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
        }

        .stat-label {
          font-size: 0.9rem;
          color: #666;
          font-weight: 500;
        }

        .stat-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: #1a365d;
        }

        .close-button {
          padding: 0.75rem 1.5rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 4px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .close-button:hover {
          background: #e55a25;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
          .solid-color-summary {
            padding: 1rem;
          }

          .summary-header h3 {
            font-size: 1.4rem;
          }

          .color-item {
            flex-direction: column;
            align-items: flex-start;
          }

          .color-swatch {
            width: 100%;
            height: 50px;
          }

          .summary-footer {
            flex-direction: column;
            gap: 1rem;
          }
        }
      `})]})}function xw({content:e,position:t="top"}){const[n,r]=fe.useState(!1);return l.jsxs("div",{className:"help-icon-container",children:[l.jsx("button",{className:"help-icon",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:i=>{i.preventDefault(),i.stopPropagation(),r(!n)},type:"button","aria-label":"Help",children:"?"}),n&&l.jsx("div",{className:`help-tooltip help-tooltip-${t}`,children:e}),l.jsx("style",{children:`
        .help-icon-container {
          position: relative;
          display: inline-block;
        }

        .help-icon {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 18px;
          height: 18px;
          border-radius: 50%;
          background: #6b7280;
          color: white;
          border: none;
          font-size: 12px;
          font-weight: 600;
          cursor: help;
          transition: all 0.2s;
          padding: 0;
          line-height: 1;
        }

        .help-icon:hover {
          background: #374151;
          transform: scale(1.1);
        }

        .help-tooltip {
          position: absolute;
          z-index: 1000;
          background: #1f2937;
          color: white;
          padding: 0.75rem 1rem;
          border-radius: 6px;
          font-size: 0.875rem;
          line-height: 1.5;
          max-width: 300px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          pointer-events: none;
          white-space: normal;
        }

        .help-tooltip-top {
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
        }

        .help-tooltip-top::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          border: 6px solid transparent;
          border-top-color: #1f2937;
        }

        .help-tooltip-bottom {
          top: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
        }

        .help-tooltip-bottom::after {
          content: '';
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          border: 6px solid transparent;
          border-bottom-color: #1f2937;
        }

        .help-tooltip-right {
          left: calc(100% + 8px);
          top: 50%;
          transform: translateY(-50%);
        }

        .help-tooltip-right::after {
          content: '';
          position: absolute;
          right: 100%;
          top: 50%;
          transform: translateY(-50%);
          border: 6px solid transparent;
          border-right-color: #1f2937;
        }

        .help-tooltip-left {
          right: calc(100% + 8px);
          top: 50%;
          transform: translateY(-50%);
        }

        .help-tooltip-left::after {
          content: '';
          position: absolute;
          left: 100%;
          top: 50%;
          transform: translateY(-50%);
          border: 6px solid transparent;
          border-left-color: #1f2937;
        }

        @media (max-width: 768px) {
          .help-tooltip {
            max-width: 250px;
            font-size: 0.8125rem;
            padding: 0.625rem 0.875rem;
          }
        }
      `})]})}function lU({recipes:e,mode:t="blend",onColorClick:n,selectedColor:r,editedColors:i,onResetAll:s}){if(!e||e.length===0)return null;const a=m=>!i||i.size===0?!1:i.has(m.originalColor.hex.toLowerCase()),o=m=>{if(!i||i.size===0)return!1;const g=i.get(m.originalColor.hex.toLowerCase());return(g==null?void 0:g.newHex)==="transparent"||(g==null?void 0:g.newHex)==="none"},u=i&&i.size>0,d=m=>{const g=m.toLowerCase();return fi.find(v=>v.hex.toLowerCase()===g)},h=m=>{if(o(m))return"Transparent";if(t==="solid"){const g=d(m.blendColor.hex);if(g)return`${g.code} - ${g.name}`}return m.blendColor.hex},p=m=>{if(!r)return!1;const g=r.blendHex||r.hex;return m.blendColor.hex===g||m.targetColor.hex===g};return l.jsxs("div",{className:"color-legend",children:[l.jsxs("div",{className:"legend-header",children:[l.jsxs("div",{className:"legend-header-left",children:[l.jsx("span",{className:"legend-title",children:"Colours"}),l.jsx(xw,{content:"Click any colour to edit all instances of that colour across the design. Changes apply to every region using that colour.",position:"right"}),n&&l.jsx("span",{className:"edit-hint",children:"(click to edit)"})]}),u&&s&&l.jsx("button",{onClick:s,className:"reset-all-btn",title:"Reset all colours to original",children:"Reset All"})]}),l.jsx("div",{className:"legend-colors",children:e.map((m,g)=>l.jsxs("div",{className:`color-item ${n?"clickable":""} ${p(m)?"selected":""}`,onClick:()=>{n&&n({hex:m.targetColor.hex,originalHex:m.originalColor.hex,blendHex:m.blendColor.hex,areaPct:m.targetColor.areaPct,recipe:m.chosenRecipe,targetColor:m.targetColor,isAddedFromEdit:m.isAddedFromEdit||!1,chosenRecipe:m.chosenRecipe},"palette")},title:n?"Click to edit this colour":"",children:[l.jsxs("div",{className:"color-swatch-wrapper",children:[l.jsx("div",{className:`color-swatch ${o(m)?"transparent-swatch":""}`,style:o(m)?{}:{backgroundColor:m.blendColor.hex}}),o(m)&&l.jsx("span",{className:"transparent-indicator",title:"Made transparent",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",width:"14",height:"14",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"20"})]})}),a(m)&&!o(m)&&l.jsx("span",{className:"edit-indicator",title:"Colour has been modified",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:l.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})})]}),l.jsxs("div",{className:"color-info",children:[l.jsx("span",{className:t==="solid"?"tpv-label":"hex-value",children:h(m)}),l.jsxs("span",{className:"coverage",children:[m.targetColor.areaPct.toFixed(1),"%"]})]})]},g))}),l.jsx("style",{jsx:!0,children:`
        .color-legend {
          background: rgba(255, 255, 255, 0.95);
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 1rem;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          width: 100%;
        }

        .legend-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 0.5rem;
          margin-bottom: 0.75rem;
          padding-bottom: 0.5rem;
          border-bottom: 1px solid #e0e0e0;
        }

        .legend-header-left {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .legend-title {
          font-weight: 600;
          color: #1a365d;
          font-size: 0.95rem;
        }

        .edit-hint {
          font-size: 0.75rem;
          color: #ff6b35;
          font-weight: normal;
        }

        .reset-all-btn {
          padding: 0.25rem 0.5rem;
          font-size: 0.7rem;
          font-weight: 600;
          color: #ff6b35;
          background: #fff5f0;
          border: 1px solid #ff6b35;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .reset-all-btn:hover {
          background: #ff6b35;
          color: white;
        }

        .legend-colors {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
          gap: 0.75rem;
        }

        .color-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.5rem;
          border-radius: 4px;
          background: white;
          border: 1px solid #e8e8e8;
          transition: all 0.2s;
        }

        .color-item.clickable {
          cursor: pointer;
        }

        .color-item.clickable:hover {
          border-color: #ff6b35;
          background: #fff9f7;
          box-shadow: 0 2px 4px rgba(255, 107, 53, 0.15);
          transform: translateY(-2px);
        }

        .color-item.selected {
          border-color: #ff6b35;
          border-width: 2px;
          background: #fff9f7;
          box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2);
          transform: translateY(-2px);
        }

        .color-swatch-wrapper {
          position: relative;
          flex-shrink: 0;
        }

        .color-swatch {
          width: 40px;
          height: 40px;
          border-radius: 4px;
          border: 2px solid #ddd;
        }

        .color-swatch.transparent-swatch {
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
          border-color: #999;
        }

        .transparent-indicator {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 18px;
          height: 18px;
          background: #6b7280;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .transparent-indicator svg {
          width: 12px;
          height: 12px;
        }

        .edit-indicator {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 16px;
          height: 16px;
          background: #ff6b35;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .edit-indicator svg {
          width: 10px;
          height: 10px;
        }

        .color-info {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          font-size: 0.85rem;
        }

        .hex-value {
          font-family: 'Courier New', monospace;
          font-weight: 600;
          color: #333;
        }

        .tpv-label {
          font-weight: 600;
          color: #1a365d;
          font-size: 0.9rem;
        }

        .coverage {
          color: #666;
          font-size: 0.8rem;
        }

        /* Mobile - compact horizontal grid of swatches */
        @media (max-width: 768px) {
          .color-legend {
            padding: 0.75rem;
          }

          .legend-header {
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
          }

          .legend-title {
            font-size: 0.85rem;
          }

          .edit-hint {
            font-size: 0.7rem;
          }

          .reset-all-btn {
            font-size: 0.65rem;
            padding: 0.2rem 0.4rem;
            min-height: 28px;
          }

          /* Horizontal scrolling grid of swatches */
          .legend-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: flex-start;
          }

          .color-item {
            flex-direction: column;
            padding: 0.25rem;
            border-radius: 6px;
            width: auto;
            min-width: 44px;
          }

          /* Hide text info on mobile - just show swatches */
          .color-info {
            display: none;
          }

          .color-swatch {
            width: 44px;
            height: 44px;
            border-radius: 6px;
          }

          .color-item.selected {
            transform: none;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.4);
          }

          .color-item.clickable:hover {
            transform: none;
          }

          .edit-indicator {
            top: -2px;
            right: -2px;
            width: 14px;
            height: 14px;
          }

          .edit-indicator svg {
            width: 8px;
            height: 8px;
          }
        }

        @media (max-width: 480px) {
          .color-legend {
            padding: 0.5rem;
          }

          .legend-colors {
            gap: 0.35rem;
          }

          .color-swatch {
            width: 40px;
            height: 40px;
          }

          .color-item {
            min-width: 40px;
          }
        }
      `})]})}const oa=()=>{},cU=[{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH70",name:"Black",hex:"#231F20"}];function uU({blendSvgUrl:e,recipes:t,mode:n="blend",onColorClick:r,onRegionClick:i,onEyedropperCancel:s,onMakeTransparent:a,onTrueCutout:o,isCutoutProcessing:u=!1,cutoutError:d=null,onSelectTPVColor:h,selectedColor:p,editedColors:m,onResetAll:g,designName:v="",onNameChange:w,isNameLoading:S=!1,onInSituClick:x,eyedropperActive:k=!1,eyedropperRegion:j=null,onRegionUndo:O,onRegionRedo:I,canUndo:E=!1,canRedo:U=!1,regionOverridesCount:D=0}){const[R,W]=fe.useState(null),[ce,te]=fe.useState(null),me=fe.useRef(null),H=fe.useRef(null);fe.useRef(null);const[ge,Ee]=fe.useState(1),[ke,ze]=fe.useState({x:0,y:0}),[xe,Re]=fe.useState(!1),[_e,Pe]=fe.useState({x:0,y:0}),it=fe.useRef(null),tt=fe.useRef(!1),[Ue,ut]=fe.useState(()=>localStorage.getItem("tpv_color_editing_tip_dismissed")!=="true");fe.useEffect(()=>{if(!k||!s)return;const ve=ye=>{ye.key==="Escape"&&(ye.stopImmediatePropagation(),ye.preventDefault(),s())};return window.addEventListener("keydown",ve,!0),()=>window.removeEventListener("keydown",ve,!0)},[k,s]);const de=()=>{ut(!1),localStorage.setItem("tpv_color_editing_tip_dismissed","true")};fe.useEffect(()=>{if(!e){te(null);return}(async()=>{try{const Me=await(await fetch(e)).text();te(Me);const Xe=Me.includes("data-region-id"),$e=(Me.match(/data-region-id/g)||[]).length;oa("[SVGPreview] Fetched inline SVG content - length:",Me.length,"hasRegionTags:",Xe,"regionCount:",$e)}catch(ye){console.error("[SVGPreview] Failed to fetch SVG content:",ye),te(null)}})()},[e]);const oe=fe.useMemo(()=>{if(!ce)return null;const ve=mw(ce);return ve?(oa("[SVGPreview] SVG sanitization complete - length:",ve.length),oa("[SVGPreview] Sanitized content preview:",ve.substring(0,200)),ve.includes("<svg")?ve.replace(/<svg([^>]*)>/i,(Me,Xe)=>(Xe.includes("width=")||(Xe+=' width="100%"'),Xe.includes("height=")||(Xe+=' height="100%"'),`<svg${Xe}>`)):(console.error("[SVGPreview] Sanitized SVG does not contain <svg> tag!"),null)):(console.error("[SVGPreview] SVG sanitization failed - content rejected"),null)},[ce]);fe.useEffect(()=>{if(!p||!e){W(null);return}(async()=>{try{oa("[SVGPreview] Creating highlight for color:",p);const ye=new Image;ye.crossOrigin="anonymous";const Me=new Promise(($,F)=>{ye.onload=()=>{oa("[SVGPreview] Image loaded:",ye.width,"x",ye.height),$()},ye.onerror=Y=>{console.error("[SVGPreview] Image load error:",Y),F(Y)}});ye.src=e,await Me;const Xe=document.createElement("canvas");Xe.width=ye.naturalWidth||ye.width||1e3,Xe.height=ye.naturalHeight||ye.height||1e3;const $e=Xe.getContext("2d");$e.drawImage(ye,0,0);const f=$e.getImageData(0,0,Xe.width,Xe.height).data,b=p.hex,_=We(b);oa("[SVGPreview] Target color:",b,_);const C=new Set;let A=0;for(let $=0;$<Xe.height;$++)for(let F=0;F<Xe.width;F++){const Y=($*Xe.width+F)*4,Q=f[Y],K=f[Y+1],V=f[Y+2];f[Y+3]>0&&Ne(Q,K,V,_)&&(C.add(`${F},${$}`),A++)}if(oa("[SVGPreview] Matched pixels:",A),A===0){console.warn("[SVGPreview] No pixels matched the target color"),W(null);return}const T=$e.createImageData(Xe.width,Xe.height);for(let $=0;$<Xe.height;$++)for(let F=0;F<Xe.width;F++){const Y=($*Xe.width+F)*4;C.has(`${F},${$}`)&&(!C.has(`${F-1},${$}`)||!C.has(`${F+1},${$}`)||!C.has(`${F},${$-1}`)||!C.has(`${F},${$+1}`))&&(T.data[Y]=255,T.data[Y+1]=0,T.data[Y+2]=255,T.data[Y+3]=255)}$e.clearRect(0,0,Xe.width,Xe.height),$e.putImageData(T,0,0);const N=Xe.toDataURL();oa("[SVGPreview] Highlight mask created"),W(N)}catch(ye){console.error("[SVGPreview] Failed to create highlight mask:",ye),W(null)}})()},[p,e]);const We=ve=>{const ye=ve.replace("#","");return{r:parseInt(ye.substring(0,2),16),g:parseInt(ye.substring(2,4),16),b:parseInt(ye.substring(4,6),16)}},Ne=(ve,ye,Me,Xe)=>Math.abs(ve-Xe.r)<=50&&Math.abs(ye-Xe.g)<=50&&Math.abs(Me-Xe.b)<=50,ft=async(ve,ye)=>{try{if(!me.current||!e)return null;const Me=new Image;Me.crossOrigin="anonymous";const Xe=new Promise(($,F)=>{Me.onload=$,Me.onerror=F});Me.src=e,await Xe;const $e=document.createElement("canvas");$e.width=Me.naturalWidth||Me.width||1e3,$e.height=Me.naturalHeight||Me.height||1e3;const c=$e.getContext("2d");c.drawImage(Me,0,0);const f=me.current.getBoundingClientRect(),b=$e.width/f.width,_=$e.height/f.height,C=Math.floor(ve*b),A=Math.floor(ye*_),N=c.getImageData(C,A,1,1).data;return{r:N[0],g:N[1],b:N[2],a:N[3]}}catch(Me){return console.error("[SVGPreview] Failed to get color at position:",Me),null}},Pt=()=>{Ee(ve=>Math.min(ve*1.5,5))},Ct=()=>{Ee(ve=>Math.max(ve/1.5,.5))},q=()=>{Ee(1),ze({x:0,y:0})},qe=ve=>{ve.preventDefault();const ye=ve.deltaY*-.001;Ee(Me=>Math.min(Math.max(Me+ye,.5),5))},ae=ve=>{ve.button===0&&(Re(!0),Pe({x:ve.clientX-ke.x,y:ve.clientY-ke.y}),tt.current=!1)},M=ve=>{if(!xe)return;const ye=Math.abs(ve.clientX-(_e.x+ke.x)),Me=Math.abs(ve.clientY-(_e.y+ke.y));(ye>5||Me>5)&&(tt.current=!0),ze({x:ve.clientX-_e.x,y:ve.clientY-_e.y})},L=()=>{Re(!1)};fe.useEffect(()=>{if(xe)return document.addEventListener("mousemove",M),document.addEventListener("mouseup",L),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)}},[xe,_e,ke]);const ee=ve=>{let ye=ve;for(;ye&&ye!==H.current;){if(ye.hasAttribute&&ye.hasAttribute("data-region-id"))return ye;ye=ye.parentElement}return null},pe=async ve=>{var b,_;if(tt.current)return;if(oa("[SVGPreview] Click detected - onRegionClick:",!!i,"inlineSvgContent:",!!ce,"target:",ve.target.tagName),i&&ce){oa("[SVGPreview] Attempting region detection on target:",ve.target);const C=ee(ve.target);if(C){const A=C.getAttribute("data-region-id"),T=C.getAttribute("fill")||((_=(b=C.getAttribute("style"))==null?void 0:b.match(/fill:\s*([^;]+)/))==null?void 0:_[1]);i({regionId:A,sourceColor:T,element:C});return}}if(!r||!t||t.length===0)return;const ye=ve.currentTarget.getBoundingClientRect(),Me=ve.clientX-ye.left,Xe=ve.clientY-ye.top,$e=await ft(Me,Xe);if(!$e||$e.a===0)return;let c=null,f=1/0;for(const C of t){const A=C.targetColor.hex,T=We(A);if(Ne($e.r,$e.g,$e.b,T)){const N=Math.sqrt(Math.pow($e.r-T.r,2)+Math.pow($e.g-T.g,2)+Math.pow($e.b-T.b,2));N<f&&(f=N,c=C)}}c&&(oa("[SVGPreview] Matched recipe:",c.targetColor.hex),r({hex:c.targetColor.hex,originalHex:c.originalColor.hex,blendHex:c.blendColor.hex,areaPct:c.targetColor.areaPct,recipe:c.chosenRecipe,targetColor:c.targetColor,isAddedFromEdit:c.isAddedFromEdit||!1,chosenRecipe:c.chosenRecipe}))};return e?l.jsxs("div",{className:"svg-preview",children:[l.jsxs("div",{className:"preview-header",children:[l.jsxs("div",{className:"design-name-container",children:[w?l.jsx("input",{type:"text",className:"design-name-input",value:v,onChange:ve=>w(ve.target.value),placeholder:S?"Generating name...":"Enter project name"}):l.jsx("h3",{children:v||"TPV Blend Design"}),S&&l.jsx("span",{className:"name-loading",children:"Generating..."})]}),p&&l.jsxs("span",{className:"editing-hint",children:["Editing: ",p.hex||p.blendHex]})]}),Ue&&r&&l.jsxs("div",{className:"color-editing-tip",children:[l.jsx("div",{className:"tip-icon",children:""}),l.jsxs("div",{className:"tip-content",children:[l.jsx("strong",{children:"Tip:"})," Click colours in the legend below to edit all instances, or click directly on the design to edit individual regions."]}),l.jsx("button",{onClick:de,className:"tip-close",title:"Dismiss tip",children:""})]}),l.jsxs("div",{className:"svg-display-container",children:[l.jsxs("div",{className:"svg-panel",children:[l.jsxs("div",{className:"zoom-controls",children:[l.jsx("button",{onClick:Pt,className:"zoom-btn",title:"Zoom In",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),l.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),l.jsx("path",{d:"m21 21-4.35-4.35"})]})}),l.jsx("button",{onClick:Ct,className:"zoom-btn",title:"Zoom Out",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"}),l.jsx("path",{d:"m21 21-4.35-4.35"})]})}),l.jsx("button",{onClick:q,className:"zoom-btn",title:"Reset View",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 4v6h6"}),l.jsx("path",{d:"M23 20v-6h-6"}),l.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}),l.jsxs("span",{className:"zoom-level",children:[Math.round(ge*100),"%"]})]}),D>0&&l.jsxs("div",{className:"undo-redo-controls",children:[l.jsx("button",{onClick:O,className:"undo-redo-btn",title:"Undo (Ctrl+Z)",disabled:!E,children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M3 7v6h6"}),l.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),l.jsx("button",{onClick:I,className:"undo-redo-btn",title:"Redo (Ctrl+Y)",disabled:!U,children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 7v6h-6"}),l.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})]})})]}),x&&l.jsxs("button",{onClick:x,className:"in-situ-btn",title:"Upload a photo of your installation site and see how this design will look in place with realistic perspective",children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l.jsx("path",{d:"m21 15-5-5L5 21"})]}),l.jsx("span",{children:"Preview In-Situ"})]}),l.jsx("div",{ref:it,className:"svg-wrapper",onWheel:qe,children:l.jsxs("div",{className:"svg-image-container",onClick:pe,onMouseDown:ae,style:{transform:`translate(${ke.x}px, ${ke.y}px) scale(${ge})`,cursor:xe?"grabbing":ge>1?"grab":k?"crosshair":r?"pointer":"default"},children:[oe?l.jsx("div",{ref:H,className:"svg-inline-container",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:oe}}):l.jsx("img",{ref:me,src:e,alt:"TPV blend design",className:"svg-image"}),R&&l.jsx("img",{src:R,alt:"Colour highlight",className:"svg-highlight-mask"})]})}),k&&j&&l.jsx("div",{className:"eyedropper-overlay",children:l.jsxs("div",{className:"eyedropper-content",children:[l.jsx("div",{className:"eyedropper-header",children:l.jsxs("div",{className:"eyedropper-color-indicator",children:[l.jsx("div",{className:"eyedropper-color-swatch",style:{backgroundColor:j.sourceColor}}),l.jsx("span",{children:"Click another area to copy its colour, or select a TPV colour:"})]})}),l.jsx("div",{className:"eyedropper-palette",children:l.jsx("div",{className:"palette-grid",children:cU.map(ve=>l.jsx("button",{className:"palette-swatch",style:{backgroundColor:ve.hex},onClick:ye=>{ye.stopPropagation(),h&&h({hex:ve.hex,code:ve.code,name:ve.name})},title:`${ve.name} (${ve.code})`},ve.code))})}),l.jsxs("div",{className:"eyedropper-actions",children:[l.jsxs("div",{className:"transparency-options",children:[l.jsxs("button",{className:"eyedropper-transparent",onClick:ve=>{ve.stopPropagation(),a&&a()},title:"Make region visually transparent (reversible, fast)",children:[l.jsx("span",{className:"transparent-icon",children:""}),"Transparent (Visual)"]}),o&&l.jsx("button",{className:"eyedropper-cutout",onClick:ve=>{ve.stopPropagation(),o()},disabled:u,title:"Remove geometry completely - fixes hidden shapes (slower, irreversible)",children:u?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cutout-spinner"}),"Cutting..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cutout-icon",children:""}),"True Cut-out"]})})]}),d&&l.jsx("div",{className:"cutout-error",children:d}),l.jsx("button",{className:"eyedropper-cancel",onClick:ve=>{ve.stopPropagation(),s&&s()},children:"Cancel (Esc)"})]})]})})]}),t&&t.length>0&&l.jsx("div",{className:"legend-sidebar",children:l.jsx(lU,{recipes:t,mode:n,onColorClick:r,selectedColor:p,editedColors:m,onResetAll:g})})]}),l.jsx("style",{jsx:!0,children:`
        .svg-preview {
          background: #fff;
          border-radius: 8px;
          border: 1px solid #ddd;
          padding: 1.5rem;
          margin-top: 1.5rem;
        }

        .preview-header {
          margin-bottom: 1.5rem;
          display: flex;
          align-items: center;
          justify-content: space-between;
          flex-wrap: wrap;
          gap: 0.5rem;
        }

        .design-name-container {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          flex: 1;
        }

        .preview-header h3 {
          margin: 0;
          color: #1a365d;
          font-size: 1.5rem;
        }

        .design-name-input {
          font-family: var(--font-heading), 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          color: #1a365d;
          border: none;
          border-bottom: 2px solid transparent;
          background: transparent;
          padding: 0.25rem 0;
          width: 100%;
          max-width: 400px;
          transition: border-color 0.2s;
        }

        .design-name-input:hover {
          border-bottom-color: #e5e7eb;
        }

        .design-name-input:focus {
          outline: none;
          border-bottom-color: #ff6b35;
        }

        .design-name-input::placeholder {
          color: #9ca3af;
          font-weight: normal;
        }

        .name-loading {
          font-size: 0.75rem;
          color: #9ca3af;
          font-style: italic;
        }

        /* Color Editing Tip Banner */
        .color-editing-tip {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.875rem 1rem;
          background: linear-gradient(to right, #fff7ed, #fffbeb);
          border: 1px solid #fed7aa;
          border-radius: 6px;
          margin-bottom: 1rem;
          font-size: 0.875rem;
          line-height: 1.5;
        }

        .tip-icon {
          font-size: 1.25rem;
          flex-shrink: 0;
        }

        .tip-content {
          flex: 1;
          color: #78350f;
        }

        .tip-content strong {
          color: #92400e;
        }

        .tip-close {
          background: none;
          border: none;
          font-size: 1.5rem;
          color: #92400e;
          cursor: pointer;
          padding: 0;
          line-height: 1;
          opacity: 0.6;
          transition: opacity 0.2s;
          flex-shrink: 0;
        }

        .tip-close:hover {
          opacity: 1;
        }

        /* SVG Display */
        .svg-display-container {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          align-items: stretch;
        }

        .svg-panel {
          position: relative;
          flex: 1;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          overflow: hidden;
          background: #fafafa;
        }

        /* Zoom Controls */
        .zoom-controls {
          position: absolute;
          top: 1rem;
          right: 1rem;
          display: flex;
          gap: 0.5rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
          z-index: 10;
          align-items: center;
        }

        .zoom-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          padding: 0;
          background: white;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          cursor: pointer;
          color: #1a365d;
          transition: all 0.2s ease;
        }

        .zoom-btn:hover {
          background: #f8fafc;
          border-color: #1e4a7a;
          transform: translateY(-1px);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .zoom-btn:active {
          transform: translateY(0);
        }

        .zoom-btn svg {
          width: 20px;
          height: 20px;
        }

        .zoom-level {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1a365d;
          min-width: 50px;
          text-align: center;
          padding: 0 0.5rem;
        }

        /* Undo/Redo Controls */
        .undo-redo-controls {
          position: absolute;
          top: 5rem;
          right: 1rem;
          display: flex;
          gap: 0.5rem;
          background: white;
          border-radius: 8px;
          padding: 0.5rem;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
          z-index: 10;
        }

        .undo-redo-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 36px;
          height: 36px;
          padding: 0;
          background: white;
          border: 1px solid #e0e0e0;
          border-radius: 6px;
          cursor: pointer;
          color: #1a365d;
          transition: all 0.2s ease;
        }

        .undo-redo-btn:hover:not(:disabled) {
          background: #f8fafc;
          border-color: #1e4a7a;
          transform: translateY(-1px);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .undo-redo-btn:active:not(:disabled) {
          transform: translateY(0);
        }

        .undo-redo-btn:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }

        .undo-redo-btn svg {
          width: 20px;
          height: 20px;
        }

        .in-situ-btn {
          position: absolute;
          top: 1rem;
          left: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          box-shadow: 0 2px 12px rgba(255, 107, 53, 0.3);
          z-index: 10;
          transition: all 0.2s ease;
        }

        .in-situ-btn:hover {
          background: #e55a2b;
          transform: translateY(-1px);
          box-shadow: 0 4px 16px rgba(255, 107, 53, 0.4);
        }

        .in-situ-btn:active {
          transform: translateY(0);
        }

        .in-situ-btn svg {
          width: 18px;
          height: 18px;
        }

        .svg-wrapper {
          padding: 2rem;
          background: white;
          min-height: 400px;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: relative;
        }

        .svg-image-container {
          position: relative;
          display: inline-block;
          user-select: none;
          transition: transform 0.1s ease-out;
          transform-origin: center center;
        }

        .svg-image {
          max-width: 100%;
          height: auto;
          display: block;
          border-radius: 4px;
          pointer-events: ${r?"auto":"none"};
        }

        .svg-inline-container {
          max-width: 100%;
          display: block;
          border-radius: 4px;
        }

        .svg-inline-container svg {
          max-width: 100%;
          height: auto;
          display: block;
        }

        .svg-highlight-mask {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          border-radius: 4px;
          filter: drop-shadow(0 0 3px rgba(255, 0, 255, 0.8)) drop-shadow(0 0 1px rgba(0, 0, 0, 0.6));
          animation: pulse 2s ease-in-out infinite;
        }

        .eyedropper-overlay {
          position: absolute;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 100;
        }

        .eyedropper-content {
          background: white;
          border-radius: 12px;
          padding: 16px 20px;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
          display: flex;
          flex-direction: column;
          gap: 12px;
          border: 2px solid #3b82f6;
          max-width: 320px;
        }

        .eyedropper-header {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .eyedropper-color-indicator {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 0.9rem;
          font-weight: 500;
          color: #111827;
        }

        .eyedropper-color-swatch {
          width: 28px;
          height: 28px;
          border-radius: 6px;
          border: 2px solid #d1d5db;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          flex-shrink: 0;
        }

        .eyedropper-palette {
          padding: 10px;
          background: #f9fafb;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .palette-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 4px;
        }

        .palette-swatch {
          width: 32px;
          height: 32px;
          border: 2px solid rgba(0, 0, 0, 0.15);
          border-radius: 4px;
          cursor: pointer;
          padding: 0;
          transition: all 0.15s ease;
        }

        .palette-swatch:hover {
          transform: scale(1.15);
          z-index: 1;
          box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);
          border-color: #3b82f6;
        }

        .eyedropper-cancel {
          padding: 8px 16px;
          background: #ef4444;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-cancel:hover {
          background: #dc2626;
          box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
        }

        .eyedropper-actions {
          display: flex;
          flex-direction: column;
          gap: 8px;
          align-items: center;
          justify-content: center;
        }

        .eyedropper-transparent {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: linear-gradient(135deg, #f3f4f6 25%, #d1d5db 25%, #d1d5db 50%, #f3f4f6 50%, #f3f4f6 75%, #d1d5db 75%);
          background-size: 8px 8px;
          color: #374151;
          border: 2px solid #6b7280;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-transparent:hover {
          border-color: #374151;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
          transform: translateY(-1px);
        }

        .transparent-icon {
          width: 16px;
          height: 16px;
          background: linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
                      linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
          border: 1px solid #999;
          border-radius: 2px;
          display: inline-block;
          font-size: 0;
        }

        .transparency-options {
          display: flex;
          gap: 6px;
          flex-wrap: wrap;
          justify-content: center;
        }

        .eyedropper-cutout {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: #fef3c7;
          color: #92400e;
          border: 2px solid #f59e0b;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }

        .eyedropper-cutout:hover:not(:disabled) {
          background: #fde68a;
          border-color: #d97706;
          box-shadow: 0 2px 6px rgba(245, 158, 11, 0.3);
          transform: translateY(-1px);
        }

        .eyedropper-cutout:disabled {
          opacity: 0.7;
          cursor: not-allowed;
        }

        .cutout-icon {
          font-size: 1rem;
        }

        .cutout-spinner {
          width: 14px;
          height: 14px;
          border: 2px solid rgba(146, 64, 14, 0.3);
          border-top-color: #92400e;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .cutout-error {
          width: 100%;
          padding: 6px 10px;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 4px;
          color: #dc2626;
          font-size: 0.8rem;
          text-align: center;
          margin-top: 6px;
        }

        @keyframes pulse {
          0%, 100% {
            opacity: 0.8;
          }
          50% {
            opacity: 1;
          }
        }

        .editing-hint {
          font-size: 0.9rem;
          color: #ff6b35;
          font-weight: 500;
          margin-left: 1rem;
        }

        .legend-sidebar {
          width: 100%;
        }

        @media (max-width: 768px) {
          .svg-preview {
            padding: 0.5rem;
            margin-top: 0.75rem;
            border-radius: 6px;
          }

          .preview-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
          }

          .preview-header h3 {
            font-size: 1.1rem;
          }

          .design-name-input {
            font-size: 1.1rem;
            max-width: 100%;
          }

          .editing-hint {
            margin-left: 0;
            font-size: 0.75rem;
          }

          .svg-panel {
            border: none;
            border-radius: 0;
          }

          .svg-wrapper {
            padding: 0;
            min-height: auto;
          }

          /* Position zoom controls at bottom-right on mobile */
          .zoom-controls {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            top: auto;
            flex-direction: column;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            z-index: 50;
          }

          /* Position undo/redo controls above zoom on mobile */
          .undo-redo-controls {
            position: fixed;
            bottom: 12rem;
            right: 1rem;
            top: auto;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            z-index: 50;
          }

          /* Make buttons circular and compact on mobile */
          .zoom-btn,
          .undo-redo-btn {
            width: 44px;
            height: 44px;
            padding: 0;
            border-radius: 50%;
            min-width: unset;
            font-size: 1.1rem;
          }

          /* Hide text labels on mobile */
          .zoom-btn span {
            display: none;
          }

          /* In-situ button - compact on mobile */
          .in-situ-btn {
            padding: 0.4rem;
            font-size: 0;
            top: 0.5rem;
            left: 0.5rem;
            border-radius: 50%;
            width: 36px;
            height: 36px;
          }

          .in-situ-btn span {
            display: none;
          }

          .in-situ-btn svg {
            width: 18px;
            height: 18px;
          }

          .svg-image-container {
            /* Allow zoom on mobile via buttons */
            cursor: default !important;
          }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
          .svg-preview {
            padding: 0.25rem;
            margin-top: 0.5rem;
          }

          .preview-header {
            padding: 0 0.25rem;
          }

          .preview-header h3 {
            font-size: 1rem;
          }

          .design-name-input {
            font-size: 1rem;
          }
        }
      `})]}):null}var Ws={},Tf={},dU=typeof Ja=="object"&&Ja&&Ja.Object===Object&&Ja,wN=dU,hU=wN,fU=typeof self=="object"&&self&&self.Object===Object&&self,pU=hU||fU||Function("return this")(),lo=pU,mU=lo,gU=mU.Symbol,jf=gU,MS=jf,_N=Object.prototype,yU=_N.hasOwnProperty,bU=_N.toString,zd=MS?MS.toStringTag:void 0;function vU(e){var t=yU.call(e,zd),n=e[zd];try{e[zd]=void 0;var r=!0}catch{}var i=bU.call(e);return r&&(t?e[zd]=n:delete e[zd]),i}var xU=vU,wU=Object.prototype,_U=wU.toString;function kU(e){return _U.call(e)}var SU=kU,LS=jf,CU=xU,EU=SU,TU="[object Null]",jU="[object Undefined]",IS=LS?LS.toStringTag:void 0;function AU(e){return e==null?e===void 0?jU:TU:IS&&IS in Object(e)?CU(e):EU(e)}var gc=AU,PU=Array.isArray,La=PU;function NU(e){return e!=null&&typeof e=="object"}var Ro=NU,OU=gc,RU=La,MU=Ro,LU="[object String]";function IU(e){return typeof e=="string"||!RU(e)&&MU(e)&&OU(e)==LU}var $U=IU;function DU(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var u=a[e?o:++i];if(n(s[u],u,s)===!1)break}return t}}var zU=DU,FU=zU,BU=FU(),UU=BU;function HU(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var WU=HU,VU=gc,GU=Ro,qU="[object Arguments]";function YU(e){return GU(e)&&VU(e)==qU}var XU=YU,$S=XU,KU=Ro,kN=Object.prototype,ZU=kN.hasOwnProperty,QU=kN.propertyIsEnumerable,JU=$S(function(){return arguments}())?$S:function(e){return KU(e)&&ZU.call(e,"callee")&&!QU.call(e,"callee")},SN=JU,sg={exports:{}};function eH(){return!1}var tH=eH;sg.exports;(function(e,t){var n=lo,r=tH,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?n.Buffer:void 0,u=o?o.isBuffer:void 0,d=u||r;e.exports=d})(sg,sg.exports);var ww=sg.exports,nH=9007199254740991,rH=/^(?:0|[1-9]\d*)$/;function iH(e,t){var n=typeof e;return t=t??nH,!!t&&(n=="number"||n!="symbol"&&rH.test(e))&&e>-1&&e%1==0&&e<t}var CN=iH,sH=9007199254740991;function aH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sH}var _w=aH,oH=gc,lH=_w,cH=Ro,uH="[object Arguments]",dH="[object Array]",hH="[object Boolean]",fH="[object Date]",pH="[object Error]",mH="[object Function]",gH="[object Map]",yH="[object Number]",bH="[object Object]",vH="[object RegExp]",xH="[object Set]",wH="[object String]",_H="[object WeakMap]",kH="[object ArrayBuffer]",SH="[object DataView]",CH="[object Float32Array]",EH="[object Float64Array]",TH="[object Int8Array]",jH="[object Int16Array]",AH="[object Int32Array]",PH="[object Uint8Array]",NH="[object Uint8ClampedArray]",OH="[object Uint16Array]",RH="[object Uint32Array]",Sr={};Sr[CH]=Sr[EH]=Sr[TH]=Sr[jH]=Sr[AH]=Sr[PH]=Sr[NH]=Sr[OH]=Sr[RH]=!0;Sr[uH]=Sr[dH]=Sr[kH]=Sr[hH]=Sr[SH]=Sr[fH]=Sr[pH]=Sr[mH]=Sr[gH]=Sr[yH]=Sr[bH]=Sr[vH]=Sr[xH]=Sr[wH]=Sr[_H]=!1;function MH(e){return cH(e)&&lH(e.length)&&!!Sr[oH(e)]}var LH=MH;function IH(e){return function(t){return e(t)}}var kw=IH,ag={exports:{}};ag.exports;(function(e,t){var n=wN,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o})(ag,ag.exports);var Sw=ag.exports,$H=LH,DH=kw,DS=Sw,zS=DS&&DS.isTypedArray,zH=zS?DH(zS):$H,EN=zH,FH=WU,BH=SN,UH=La,HH=ww,WH=CN,VH=EN,GH=Object.prototype,qH=GH.hasOwnProperty;function YH(e,t){var n=UH(e),r=!n&&BH(e),i=!n&&!r&&HH(e),s=!n&&!r&&!i&&VH(e),a=n||r||i||s,o=a?FH(e.length,String):[],u=o.length;for(var d in e)(t||qH.call(e,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||WH(d,u)))&&o.push(d);return o}var TN=YH,XH=Object.prototype;function KH(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||XH;return e===n}var Cw=KH;function ZH(e,t){return function(n){return e(t(n))}}var jN=ZH,QH=jN,JH=QH(Object.keys,Object),eW=JH,tW=Cw,nW=eW,rW=Object.prototype,iW=rW.hasOwnProperty;function sW(e){if(!tW(e))return nW(e);var t=[];for(var n in Object(e))iW.call(e,n)&&n!="constructor"&&t.push(n);return t}var aW=sW;function oW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var pd=oW,lW=gc,cW=pd,uW="[object AsyncFunction]",dW="[object Function]",hW="[object GeneratorFunction]",fW="[object Proxy]";function pW(e){if(!cW(e))return!1;var t=lW(e);return t==dW||t==hW||t==uW||t==fW}var AN=pW,mW=AN,gW=_w;function yW(e){return e!=null&&gW(e.length)&&!mW(e)}var e0=yW,bW=TN,vW=aW,xW=e0;function wW(e){return xW(e)?bW(e):vW(e)}var Af=wW,_W=UU,kW=Af;function SW(e,t){return e&&_W(e,t,kW)}var PN=SW;function CW(e){return e}var NN=CW,EW=NN;function TW(e){return typeof e=="function"?e:EW}var jW=TW,AW=PN,PW=jW;function NW(e,t){return e&&AW(e,PW(t))}var Ew=NW,OW=jN,RW=OW(Object.getPrototypeOf,Object),Tw=RW,MW=gc,LW=Tw,IW=Ro,$W="[object Object]",DW=Function.prototype,zW=Object.prototype,ON=DW.toString,FW=zW.hasOwnProperty,BW=ON.call(Object);function UW(e){if(!IW(e)||MW(e)!=$W)return!1;var t=LW(e);if(t===null)return!0;var n=FW.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ON.call(n)==BW}var HW=UW;function WW(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var RN=WW;function VW(){this.__data__=[],this.size=0}var GW=VW;function qW(e,t){return e===t||e!==e&&t!==t}var jw=qW,YW=jw;function XW(e,t){for(var n=e.length;n--;)if(YW(e[n][0],t))return n;return-1}var t0=XW,KW=t0,ZW=Array.prototype,QW=ZW.splice;function JW(e){var t=this.__data__,n=KW(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():QW.call(t,n,1),--this.size,!0}var eV=JW,tV=t0;function nV(e){var t=this.__data__,n=tV(t,e);return n<0?void 0:t[n][1]}var rV=nV,iV=t0;function sV(e){return iV(this.__data__,e)>-1}var aV=sV,oV=t0;function lV(e,t){var n=this.__data__,r=oV(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var cV=lV,uV=GW,dV=eV,hV=rV,fV=aV,pV=cV;function md(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}md.prototype.clear=uV;md.prototype.delete=dV;md.prototype.get=hV;md.prototype.has=fV;md.prototype.set=pV;var n0=md,mV=n0;function gV(){this.__data__=new mV,this.size=0}var yV=gV;function bV(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var vV=bV;function xV(e){return this.__data__.get(e)}var wV=xV;function _V(e){return this.__data__.has(e)}var kV=_V,SV=lo,CV=SV["__core-js_shared__"],EV=CV,Ny=EV,FS=function(){var e=/[^.]+$/.exec(Ny&&Ny.keys&&Ny.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function TV(e){return!!FS&&FS in e}var jV=TV,AV=Function.prototype,PV=AV.toString;function NV(e){if(e!=null){try{return PV.call(e)}catch{}try{return e+""}catch{}}return""}var MN=NV,OV=AN,RV=jV,MV=pd,LV=MN,IV=/[\\^$.*+?()[\]{}|]/g,$V=/^\[object .+?Constructor\]$/,DV=Function.prototype,zV=Object.prototype,FV=DV.toString,BV=zV.hasOwnProperty,UV=RegExp("^"+FV.call(BV).replace(IV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function HV(e){if(!MV(e)||RV(e))return!1;var t=OV(e)?UV:$V;return t.test(LV(e))}var WV=HV;function VV(e,t){return e==null?void 0:e[t]}var GV=VV,qV=WV,YV=GV;function XV(e,t){var n=YV(e,t);return qV(n)?n:void 0}var yc=XV,KV=yc,ZV=lo,QV=KV(ZV,"Map"),Aw=QV,JV=yc,eG=JV(Object,"create"),r0=eG,BS=r0;function tG(){this.__data__=BS?BS(null):{},this.size=0}var nG=tG;function rG(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var iG=rG,sG=r0,aG="__lodash_hash_undefined__",oG=Object.prototype,lG=oG.hasOwnProperty;function cG(e){var t=this.__data__;if(sG){var n=t[e];return n===aG?void 0:n}return lG.call(t,e)?t[e]:void 0}var uG=cG,dG=r0,hG=Object.prototype,fG=hG.hasOwnProperty;function pG(e){var t=this.__data__;return dG?t[e]!==void 0:fG.call(t,e)}var mG=pG,gG=r0,yG="__lodash_hash_undefined__";function bG(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gG&&t===void 0?yG:t,this}var vG=bG,xG=nG,wG=iG,_G=uG,kG=mG,SG=vG;function gd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gd.prototype.clear=xG;gd.prototype.delete=wG;gd.prototype.get=_G;gd.prototype.has=kG;gd.prototype.set=SG;var CG=gd,US=CG,EG=n0,TG=Aw;function jG(){this.size=0,this.__data__={hash:new US,map:new(TG||EG),string:new US}}var AG=jG;function PG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var NG=PG,OG=NG;function RG(e,t){var n=e.__data__;return OG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var i0=RG,MG=i0;function LG(e){var t=MG(this,e).delete(e);return this.size-=t?1:0,t}var IG=LG,$G=i0;function DG(e){return $G(this,e).get(e)}var zG=DG,FG=i0;function BG(e){return FG(this,e).has(e)}var UG=BG,HG=i0;function WG(e,t){var n=HG(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var VG=WG,GG=AG,qG=IG,YG=zG,XG=UG,KG=VG;function yd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yd.prototype.clear=GG;yd.prototype.delete=qG;yd.prototype.get=YG;yd.prototype.has=XG;yd.prototype.set=KG;var Pw=yd,ZG=n0,QG=Aw,JG=Pw,eq=200;function tq(e,t){var n=this.__data__;if(n instanceof ZG){var r=n.__data__;if(!QG||r.length<eq-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new JG(r)}return n.set(e,t),this.size=n.size,this}var nq=tq,rq=n0,iq=yV,sq=vV,aq=wV,oq=kV,lq=nq;function bd(e){var t=this.__data__=new rq(e);this.size=t.size}bd.prototype.clear=iq;bd.prototype.delete=sq;bd.prototype.get=aq;bd.prototype.has=oq;bd.prototype.set=lq;var Nw=bd,cq="__lodash_hash_undefined__";function uq(e){return this.__data__.set(e,cq),this}var dq=uq;function hq(e){return this.__data__.has(e)}var fq=hq,pq=Pw,mq=dq,gq=fq;function og(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new pq;++t<n;)this.add(e[t])}og.prototype.add=og.prototype.push=mq;og.prototype.has=gq;var yq=og;function bq(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var vq=bq;function xq(e,t){return e.has(t)}var wq=xq,_q=yq,kq=vq,Sq=wq,Cq=1,Eq=2;function Tq(e,t,n,r,i,s){var a=n&Cq,o=e.length,u=t.length;if(o!=u&&!(a&&u>o))return!1;var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var p=-1,m=!0,g=n&Eq?new _q:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var v=e[p],w=t[p];if(r)var S=a?r(w,v,p,t,e,s):r(v,w,p,e,t,s);if(S!==void 0){if(S)continue;m=!1;break}if(g){if(!kq(t,function(x,k){if(!Sq(g,k)&&(v===x||i(v,x,n,r,s)))return g.push(k)})){m=!1;break}}else if(!(v===w||i(v,w,n,r,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var LN=Tq,jq=lo,Aq=jq.Uint8Array,IN=Aq;function Pq(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var Nq=Pq;function Oq(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Rq=Oq,HS=jf,WS=IN,Mq=jw,Lq=LN,Iq=Nq,$q=Rq,Dq=1,zq=2,Fq="[object Boolean]",Bq="[object Date]",Uq="[object Error]",Hq="[object Map]",Wq="[object Number]",Vq="[object RegExp]",Gq="[object Set]",qq="[object String]",Yq="[object Symbol]",Xq="[object ArrayBuffer]",Kq="[object DataView]",VS=HS?HS.prototype:void 0,Oy=VS?VS.valueOf:void 0;function Zq(e,t,n,r,i,s,a){switch(n){case Kq:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xq:return!(e.byteLength!=t.byteLength||!s(new WS(e),new WS(t)));case Fq:case Bq:case Wq:return Mq(+e,+t);case Uq:return e.name==t.name&&e.message==t.message;case Vq:case qq:return e==t+"";case Hq:var o=Iq;case Gq:var u=r&Dq;if(o||(o=$q),e.size!=t.size&&!u)return!1;var d=a.get(e);if(d)return d==t;r|=zq,a.set(e,t);var h=Lq(o(e),o(t),r,i,s,a);return a.delete(e),h;case Yq:if(Oy)return Oy.call(e)==Oy.call(t)}return!1}var Qq=Zq;function Jq(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var $N=Jq,eY=$N,tY=La;function nY(e,t,n){var r=t(e);return tY(e)?r:eY(r,n(e))}var DN=nY;function rY(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}var iY=rY;function sY(){return[]}var zN=sY,aY=iY,oY=zN,lY=Object.prototype,cY=lY.propertyIsEnumerable,GS=Object.getOwnPropertySymbols,uY=GS?function(e){return e==null?[]:(e=Object(e),aY(GS(e),function(t){return cY.call(e,t)}))}:oY,Ow=uY,dY=DN,hY=Ow,fY=Af;function pY(e){return dY(e,fY,hY)}var FN=pY,qS=FN,mY=1,gY=Object.prototype,yY=gY.hasOwnProperty;function bY(e,t,n,r,i,s){var a=n&mY,o=qS(e),u=o.length,d=qS(t),h=d.length;if(u!=h&&!a)return!1;for(var p=u;p--;){var m=o[p];if(!(a?m in t:yY.call(t,m)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var w=!0;s.set(e,t),s.set(t,e);for(var S=a;++p<u;){m=o[p];var x=e[m],k=t[m];if(r)var j=a?r(k,x,m,t,e,s):r(x,k,m,e,t,s);if(!(j===void 0?x===k||i(x,k,n,r,s):j)){w=!1;break}S||(S=m=="constructor")}if(w&&!S){var O=e.constructor,I=t.constructor;O!=I&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof I=="function"&&I instanceof I)&&(w=!1)}return s.delete(e),s.delete(t),w}var vY=bY,xY=yc,wY=lo,_Y=xY(wY,"DataView"),kY=_Y,SY=yc,CY=lo,EY=SY(CY,"Promise"),TY=EY,jY=yc,AY=lo,PY=jY(AY,"Set"),NY=PY,OY=yc,RY=lo,MY=OY(RY,"WeakMap"),LY=MY,ux=kY,dx=Aw,hx=TY,fx=NY,px=LY,BN=gc,vd=MN,YS="[object Map]",IY="[object Object]",XS="[object Promise]",KS="[object Set]",ZS="[object WeakMap]",QS="[object DataView]",$Y=vd(ux),DY=vd(dx),zY=vd(hx),FY=vd(fx),BY=vd(px),Fl=BN;(ux&&Fl(new ux(new ArrayBuffer(1)))!=QS||dx&&Fl(new dx)!=YS||hx&&Fl(hx.resolve())!=XS||fx&&Fl(new fx)!=KS||px&&Fl(new px)!=ZS)&&(Fl=function(e){var t=BN(e),n=t==IY?e.constructor:void 0,r=n?vd(n):"";if(r)switch(r){case $Y:return QS;case DY:return YS;case zY:return XS;case FY:return KS;case BY:return ZS}return t});var s0=Fl,Ry=Nw,UY=LN,HY=Qq,WY=vY,JS=s0,eC=La,tC=ww,VY=EN,GY=1,nC="[object Arguments]",rC="[object Array]",Tp="[object Object]",qY=Object.prototype,iC=qY.hasOwnProperty;function YY(e,t,n,r,i,s){var a=eC(e),o=eC(t),u=a?rC:JS(e),d=o?rC:JS(t);u=u==nC?Tp:u,d=d==nC?Tp:d;var h=u==Tp,p=d==Tp,m=u==d;if(m&&tC(e)){if(!tC(t))return!1;a=!0,h=!1}if(m&&!h)return s||(s=new Ry),a||VY(e)?UY(e,t,n,r,i,s):HY(e,t,u,n,r,i,s);if(!(n&GY)){var g=h&&iC.call(e,"__wrapped__"),v=p&&iC.call(t,"__wrapped__");if(g||v){var w=g?e.value():e,S=v?t.value():t;return s||(s=new Ry),i(w,S,n,r,s)}}return m?(s||(s=new Ry),WY(e,t,n,r,i,s)):!1}var XY=YY,KY=XY,sC=Ro;function UN(e,t,n,r,i){return e===t?!0:e==null||t==null||!sC(e)&&!sC(t)?e!==e&&t!==t:KY(e,t,n,r,UN,i)}var HN=UN,ZY=Nw,QY=HN,JY=1,eX=2;function tX(e,t,n,r){var i=n.length,s=i,a=!r;if(e==null)return!s;for(e=Object(e);i--;){var o=n[i];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){o=n[i];var u=o[0],d=e[u],h=o[1];if(a&&o[2]){if(d===void 0&&!(u in e))return!1}else{var p=new ZY;if(r)var m=r(d,h,u,e,t,p);if(!(m===void 0?QY(h,d,JY|eX,r,p):m))return!1}}return!0}var nX=tX,rX=pd;function iX(e){return e===e&&!rX(e)}var WN=iX,sX=WN,aX=Af;function oX(e){for(var t=aX(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,sX(i)]}return t}var lX=oX;function cX(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var VN=cX,uX=nX,dX=lX,hX=VN;function fX(e){var t=dX(e);return t.length==1&&t[0][2]?hX(t[0][0],t[0][1]):function(n){return n===e||uX(n,e,t)}}var pX=fX,mX=gc,gX=Ro,yX="[object Symbol]";function bX(e){return typeof e=="symbol"||gX(e)&&mX(e)==yX}var Rw=bX,vX=La,xX=Rw,wX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_X=/^\w*$/;function kX(e,t){if(vX(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||xX(e)?!0:_X.test(e)||!wX.test(e)||t!=null&&e in Object(t)}var Mw=kX,GN=Pw,SX="Expected a function";function Lw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(SX);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Lw.Cache||GN),n}Lw.Cache=GN;var CX=Lw,EX=CX,TX=500;function jX(e){var t=EX(e,function(r){return n.size===TX&&n.clear(),r}),n=t.cache;return t}var AX=jX,PX=AX,NX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,OX=/\\(\\)?/g,RX=PX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(NX,function(n,r,i,s){t.push(i?s.replace(OX,"$1"):r||n)}),t}),MX=RX,aC=jf,LX=RN,IX=La,$X=Rw,oC=aC?aC.prototype:void 0,lC=oC?oC.toString:void 0;function qN(e){if(typeof e=="string")return e;if(IX(e))return LX(e,qN)+"";if($X(e))return lC?lC.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var DX=qN,zX=DX;function FX(e){return e==null?"":zX(e)}var BX=FX,UX=La,HX=Mw,WX=MX,VX=BX;function GX(e,t){return UX(e)?e:HX(e,t)?[e]:WX(VX(e))}var YN=GX,qX=Rw;function YX(e){if(typeof e=="string"||qX(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var a0=YX,XX=YN,KX=a0;function ZX(e,t){t=XX(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[KX(t[n++])];return n&&n==r?e:void 0}var XN=ZX,QX=XN;function JX(e,t,n){var r=e==null?void 0:QX(e,t);return r===void 0?n:r}var eK=JX;function tK(e,t){return e!=null&&t in Object(e)}var nK=tK,rK=YN,iK=SN,sK=La,aK=CN,oK=_w,lK=a0;function cK(e,t,n){t=rK(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=lK(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&oK(i)&&aK(a,i)&&(sK(e)||iK(e)))}var uK=cK,dK=nK,hK=uK;function fK(e,t){return e!=null&&hK(e,t,dK)}var pK=fK,mK=HN,gK=eK,yK=pK,bK=Mw,vK=WN,xK=VN,wK=a0,_K=1,kK=2;function SK(e,t){return bK(e)&&vK(t)?xK(wK(e),t):function(n){var r=gK(n,e);return r===void 0&&r===t?yK(n,e):mK(t,r,_K|kK)}}var CK=SK;function EK(e){return function(t){return t==null?void 0:t[e]}}var TK=EK,jK=XN;function AK(e){return function(t){return jK(t,e)}}var PK=AK,NK=TK,OK=PK,RK=Mw,MK=a0;function LK(e){return RK(e)?NK(MK(e)):OK(e)}var IK=LK,$K=pX,DK=CK,zK=NN,FK=La,BK=IK;function UK(e){return typeof e=="function"?e:e==null?zK:typeof e=="object"?FK(e)?DK(e[0],e[1]):$K(e):BK(e)}var HK=UK,WK=e0;function VK(e,t){return function(n,r){if(n==null)return n;if(!WK(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var GK=VK,qK=PN,YK=GK,XK=YK(qK),KK=XK,ZK=KK,QK=e0;function JK(e,t){var n=-1,r=QK(e)?Array(e.length):[];return ZK(e,function(i,s,a){r[++n]=t(i,s,a)}),r}var eZ=JK,tZ=RN,nZ=HK,rZ=eZ,iZ=La;function sZ(e,t){var n=iZ(e)?tZ:rZ;return n(e,nZ(t))}var aZ=sZ;Object.defineProperty(Tf,"__esModule",{value:!0});Tf.flattenNames=void 0;var oZ=$U,lZ=o0(oZ),cZ=Ew,uZ=o0(cZ),dZ=HW,hZ=o0(dZ),fZ=aZ,pZ=o0(fZ);function o0(e){return e&&e.__esModule?e:{default:e}}var mZ=Tf.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,pZ.default)(t,function(r){Array.isArray(r)?e(r).map(function(i){return n.push(i)}):(0,hZ.default)(r)?(0,uZ.default)(r,function(i,s){i===!0&&n.push(s),n.push(s+"-"+i)}):(0,lZ.default)(r)&&n.push(r)}),n};Tf.default=mZ;var Pf={};function gZ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var yZ=gZ,bZ=yc,vZ=function(){try{var e=bZ(Object,"defineProperty");return e({},"",{}),e}catch{}}(),xZ=vZ,cC=xZ;function wZ(e,t,n){t=="__proto__"&&cC?cC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var KN=wZ,_Z=KN,kZ=jw,SZ=Object.prototype,CZ=SZ.hasOwnProperty;function EZ(e,t,n){var r=e[t];(!(CZ.call(e,t)&&kZ(r,n))||n===void 0&&!(t in e))&&_Z(e,t,n)}var ZN=EZ,TZ=ZN,jZ=KN;function AZ(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],u=r?r(n[o],e[o],o,n,e):void 0;u===void 0&&(u=e[o]),i?jZ(n,o,u):TZ(n,o,u)}return n}var l0=AZ,PZ=l0,NZ=Af;function OZ(e,t){return e&&PZ(t,NZ(t),e)}var RZ=OZ;function MZ(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var LZ=MZ,IZ=pd,$Z=Cw,DZ=LZ,zZ=Object.prototype,FZ=zZ.hasOwnProperty;function BZ(e){if(!IZ(e))return DZ(e);var t=$Z(e),n=[];for(var r in e)r=="constructor"&&(t||!FZ.call(e,r))||n.push(r);return n}var UZ=BZ,HZ=TN,WZ=UZ,VZ=e0;function GZ(e){return VZ(e)?HZ(e,!0):WZ(e)}var Iw=GZ,qZ=l0,YZ=Iw;function XZ(e,t){return e&&qZ(t,YZ(t),e)}var KZ=XZ,lg={exports:{}};lg.exports;(function(e,t){var n=lo,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,m=o?o(p):new d.constructor(p);return d.copy(m),m}e.exports=u})(lg,lg.exports);var ZZ=lg.exports;function QZ(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var JZ=QZ,eQ=l0,tQ=Ow;function nQ(e,t){return eQ(e,tQ(e),t)}var rQ=nQ,iQ=$N,sQ=Tw,aQ=Ow,oQ=zN,lQ=Object.getOwnPropertySymbols,cQ=lQ?function(e){for(var t=[];e;)iQ(t,aQ(e)),e=sQ(e);return t}:oQ,QN=cQ,uQ=l0,dQ=QN;function hQ(e,t){return uQ(e,dQ(e),t)}var fQ=hQ,pQ=DN,mQ=QN,gQ=Iw;function yQ(e){return pQ(e,gQ,mQ)}var bQ=yQ,vQ=Object.prototype,xQ=vQ.hasOwnProperty;function wQ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&xQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var _Q=wQ,uC=IN;function kQ(e){var t=new e.constructor(e.byteLength);return new uC(t).set(new uC(e)),t}var $w=kQ,SQ=$w;function CQ(e,t){var n=t?SQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var EQ=CQ,TQ=/\w*$/;function jQ(e){var t=new e.constructor(e.source,TQ.exec(e));return t.lastIndex=e.lastIndex,t}var AQ=jQ,dC=jf,hC=dC?dC.prototype:void 0,fC=hC?hC.valueOf:void 0;function PQ(e){return fC?Object(fC.call(e)):{}}var NQ=PQ,OQ=$w;function RQ(e,t){var n=t?OQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var MQ=RQ,LQ=$w,IQ=EQ,$Q=AQ,DQ=NQ,zQ=MQ,FQ="[object Boolean]",BQ="[object Date]",UQ="[object Map]",HQ="[object Number]",WQ="[object RegExp]",VQ="[object Set]",GQ="[object String]",qQ="[object Symbol]",YQ="[object ArrayBuffer]",XQ="[object DataView]",KQ="[object Float32Array]",ZQ="[object Float64Array]",QQ="[object Int8Array]",JQ="[object Int16Array]",eJ="[object Int32Array]",tJ="[object Uint8Array]",nJ="[object Uint8ClampedArray]",rJ="[object Uint16Array]",iJ="[object Uint32Array]";function sJ(e,t,n){var r=e.constructor;switch(t){case YQ:return LQ(e);case FQ:case BQ:return new r(+e);case XQ:return IQ(e,n);case KQ:case ZQ:case QQ:case JQ:case eJ:case tJ:case nJ:case rJ:case iJ:return zQ(e,n);case UQ:return new r;case HQ:case GQ:return new r(e);case WQ:return $Q(e);case VQ:return new r;case qQ:return DQ(e)}}var aJ=sJ,oJ=pd,pC=Object.create,lJ=function(){function e(){}return function(t){if(!oJ(t))return{};if(pC)return pC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),cJ=lJ,uJ=cJ,dJ=Tw,hJ=Cw;function fJ(e){return typeof e.constructor=="function"&&!hJ(e)?uJ(dJ(e)):{}}var pJ=fJ,mJ=s0,gJ=Ro,yJ="[object Map]";function bJ(e){return gJ(e)&&mJ(e)==yJ}var vJ=bJ,xJ=vJ,wJ=kw,mC=Sw,gC=mC&&mC.isMap,_J=gC?wJ(gC):xJ,kJ=_J,SJ=s0,CJ=Ro,EJ="[object Set]";function TJ(e){return CJ(e)&&SJ(e)==EJ}var jJ=TJ,AJ=jJ,PJ=kw,yC=Sw,bC=yC&&yC.isSet,NJ=bC?PJ(bC):AJ,OJ=NJ,RJ=Nw,MJ=yZ,LJ=ZN,IJ=RZ,$J=KZ,DJ=ZZ,zJ=JZ,FJ=rQ,BJ=fQ,UJ=FN,HJ=bQ,WJ=s0,VJ=_Q,GJ=aJ,qJ=pJ,YJ=La,XJ=ww,KJ=kJ,ZJ=pd,QJ=OJ,JJ=Af,eee=Iw,tee=1,nee=2,ree=4,JN="[object Arguments]",iee="[object Array]",see="[object Boolean]",aee="[object Date]",oee="[object Error]",eO="[object Function]",lee="[object GeneratorFunction]",cee="[object Map]",uee="[object Number]",tO="[object Object]",dee="[object RegExp]",hee="[object Set]",fee="[object String]",pee="[object Symbol]",mee="[object WeakMap]",gee="[object ArrayBuffer]",yee="[object DataView]",bee="[object Float32Array]",vee="[object Float64Array]",xee="[object Int8Array]",wee="[object Int16Array]",_ee="[object Int32Array]",kee="[object Uint8Array]",See="[object Uint8ClampedArray]",Cee="[object Uint16Array]",Eee="[object Uint32Array]",gr={};gr[JN]=gr[iee]=gr[gee]=gr[yee]=gr[see]=gr[aee]=gr[bee]=gr[vee]=gr[xee]=gr[wee]=gr[_ee]=gr[cee]=gr[uee]=gr[tO]=gr[dee]=gr[hee]=gr[fee]=gr[pee]=gr[kee]=gr[See]=gr[Cee]=gr[Eee]=!0;gr[oee]=gr[eO]=gr[mee]=!1;function hm(e,t,n,r,i,s){var a,o=t&tee,u=t&nee,d=t&ree;if(n&&(a=i?n(e,r,i,s):n(e)),a!==void 0)return a;if(!ZJ(e))return e;var h=YJ(e);if(h){if(a=VJ(e),!o)return zJ(e,a)}else{var p=WJ(e),m=p==eO||p==lee;if(XJ(e))return DJ(e,o);if(p==tO||p==JN||m&&!i){if(a=u||m?{}:qJ(e),!o)return u?BJ(e,$J(a,e)):FJ(e,IJ(a,e))}else{if(!gr[p])return i?e:{};a=GJ(e,p,o)}}s||(s=new RJ);var g=s.get(e);if(g)return g;s.set(e,a),QJ(e)?e.forEach(function(S){a.add(hm(S,t,n,S,e,s))}):KJ(e)&&e.forEach(function(S,x){a.set(x,hm(S,t,n,x,e,s))});var v=d?u?HJ:UJ:u?eee:JJ,w=h?void 0:v(e);return MJ(w||e,function(S,x){w&&(x=S,S=e[x]),LJ(a,x,hm(S,t,n,x,e,s))}),a}var Tee=hm,jee=Tee,Aee=1,Pee=4;function Nee(e){return jee(e,Aee|Pee)}var Oee=Nee;Object.defineProperty(Pf,"__esModule",{value:!0});Pf.mergeClasses=void 0;var Ree=Ew,Mee=nO(Ree),Lee=Oee,Iee=nO(Lee),$ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function nO(e){return e&&e.__esModule?e:{default:e}}var Dee=Pf.mergeClasses=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t.default&&(0,Iee.default)(t.default)||{};return n.map(function(i){var s=t[i];return s&&(0,Mee.default)(s,function(a,o){r[o]||(r[o]={}),r[o]=$ee({},r[o],s[o])}),i}),r};Pf.default=Dee;var Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.autoprefix=void 0;var zee=Ew,vC=Bee(zee),Fee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Bee(e){return e&&e.__esModule?e:{default:e}}var Uee={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var n=t&&t.split(" ");return{position:"absolute",top:n&&n[0],right:n&&n[1],bottom:n&&n[2],left:n&&n[3]}},extend:function(t,n){var r=n[t];return r||{extend:t}}},Hee=Nf.autoprefix=function(t){var n={};return(0,vC.default)(t,function(r,i){var s={};(0,vC.default)(r,function(a,o){var u=Uee[o];u?s=Fee({},s,u(a)):s[o]=a}),n[i]=s}),n};Nf.default=Hee;var Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.hover=void 0;var Wee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vee=fe,My=Gee(Vee);function Gee(e){return e&&e.__esModule?e:{default:e}}function qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Yee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xee=Of.hover=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Yee(i,r);function i(){var s,a,o,u;qee(this,i);for(var d=arguments.length,h=Array(d),p=0;p<d;p++)h[p]=arguments[p];return u=(a=(o=xC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(h))),o),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return My.default.createElement(n,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},My.default.createElement(t,Wee({},o.props,o.state)))},a),xC(o,u)}return i}(My.default.Component)};Of.default=Xee;var Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.active=void 0;var Kee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zee=fe,Ly=Qee(Zee);function Qee(e){return e&&e.__esModule?e:{default:e}}function Jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ete(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var tte=Rf.active=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){ete(i,r);function i(){var s,a,o,u;Jee(this,i);for(var d=arguments.length,h=Array(d),p=0;p<d;p++)h[p]=arguments[p];return u=(a=(o=wC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(h))),o),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return Ly.default.createElement(n,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},Ly.default.createElement(t,Kee({},o.props,o.state)))},a),wC(o,u)}return i}(Ly.default.Component)};Rf.default=tte;var Dw={};Object.defineProperty(Dw,"__esModule",{value:!0});var nte=function(t,n){var r={},i=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=o};return t===0&&i("first-child"),t===n-1&&i("last-child"),(t===0||t%2===0)&&i("even"),Math.abs(t%2)===1&&i("odd"),i("nth-child",t),r};Dw.default=nte;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.ReactCSS=Ws.loop=Ws.handleActive=zw=Ws.handleHover=Ws.hover=void 0;var rte=Tf,ite=xd(rte),ste=Pf,ate=xd(ste),ote=Nf,lte=xd(ote),cte=Of,rO=xd(cte),ute=Rf,dte=xd(ute),hte=Dw,fte=xd(hte);function xd(e){return e&&e.__esModule?e:{default:e}}Ws.hover=rO.default;var zw=Ws.handleHover=rO.default;Ws.handleActive=dte.default;Ws.loop=fte.default;var pte=Ws.ReactCSS=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=(0,ite.default)(r),a=(0,ate.default)(t,s);return(0,lte.default)(a)},yn=Ws.default=pte,mte=function(t,n,r,i,s){var a=s.clientWidth,o=s.clientHeight,u=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=u-(s.getBoundingClientRect().left+window.pageXOffset),p=d-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var m=void 0;if(p<0?m=0:p>o?m=1:m=Math.round(p*100/o)/100,n.a!==m)return{h:n.h,s:n.s,l:n.l,a:m,source:"rgb"}}else{var g=void 0;if(h<0?g=0:h>a?g=1:g=Math.round(h*100/a)/100,i!==g)return{h:n.h,s:n.s,l:n.l,a:g,source:"rgb"}}return null},Iy={},gte=function(t,n,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var a=s.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,s.width,s.height),a.fillStyle=n,a.fillRect(0,0,r,r),a.translate(r,r),a.fillRect(0,0,r,r),s.toDataURL()):null},yte=function(t,n,r,i){var s=t+"-"+n+"-"+r+(i?"-server":"");if(Iy[s])return Iy[s];var a=gte(t,n,r,i);return Iy[s]=a,a},_C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wd=function(t){var n=t.white,r=t.grey,i=t.size,s=t.renderers,a=t.borderRadius,o=t.boxShadow,u=t.children,d=yn({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+yte(n,r,i,s.canvas)+") center left"}}});return fe.isValidElement(u)?je.cloneElement(u,_C({},u.props,{style:_C({},u.props.style,d.grid)})):je.createElement("div",{style:d.grid})};wd.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var bte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function xte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Fw=function(e){wte(t,e);function t(){var n,r,i,s;xte(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=(r=(i=kC(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(o))),i),i.handleChange=function(d){var h=mte(d,i.props.hsl,i.props.direction,i.props.a,i.container);h&&typeof i.props.onChange=="function"&&i.props.onChange(h,d)},i.handleMouseDown=function(d){i.handleChange(d),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),kC(i,s)}return vte(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=yn({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:bte({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return je.createElement("div",{style:s.alpha},je.createElement("div",{style:s.checkboard},je.createElement(wd,{renderers:this.props.renderers})),je.createElement("div",{style:s.gradient}),je.createElement("div",{style:s.container,ref:function(o){return r.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("div",{style:s.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:s.slider}))))}}]),t}(fe.PureComponent||fe.Component),_te=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function kte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cte(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ete(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Tte=1,iO=38,jte=40,Ate=[iO,jte],Pte=function(t){return Ate.indexOf(t)>-1},Nte=function(t){return Number(String(t).replace(/%/g,""))},Ote=1,Mn=function(e){Ete(t,e);function t(n){Ste(this,t);var r=Cte(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=Nte(i.target.value);if(!isNaN(s)&&Pte(i.keyCode)){var a=r.getArrowOffset(),o=i.keyCode===iO?s+a:s-a;r.setUpdatedValue(o,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+Ote++,r}return _te(t,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return kte({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Tte}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=yn({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return je.createElement("div",{style:i.wrap},je.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return r.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?je.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(fe.PureComponent||fe.Component),Rte=function(t,n,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=o-(i.getBoundingClientRect().left+window.pageXOffset),h=u-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var p=void 0;if(h<0)p=359;else if(h>a)p=0;else{var m=-(h*100/a)+100;p=360*m/100}if(r.h!==p)return{h:p,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var g=void 0;if(d<0)g=0;else if(d>s)g=359;else{var v=d*100/s;g=360*v/100}if(r.h!==g)return{h:g,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},Mte=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ite(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _d=function(e){Ite(t,e);function t(){var n,r,i,s;Lte(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=(r=(i=SC(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(o))),i),i.handleChange=function(d){var h=Rte(d,i.props.direction,i.props.hsl,i.container);h&&typeof i.props.onChange=="function"&&i.props.onChange(h,d)},i.handleMouseDown=function(d){i.handleChange(d),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),SC(i,s)}return Mte(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,a=yn({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return je.createElement("div",{style:a.hue},je.createElement("div",{className:"hue-"+s,style:a.container,ref:function(u){return r.container=u},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),je.createElement("div",{style:a.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:a.slider}))))}}]),t}(fe.PureComponent||fe.Component),sO={exports:{}},$te="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Dte=$te,zte=Dte;function aO(){}function oO(){}oO.resetWarningCache=aO;var Fte=function(){function e(r,i,s,a,o,u){if(u!==zte){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:oO,resetWarningCache:aO};return n.PropTypes=n,n};sO.exports=Fte();var Bte=sO.exports;const Dt=vl(Bte);function Ute(){this.__data__=[],this.size=0}function Mf(e,t){return e===t||e!==e&&t!==t}function c0(e,t){for(var n=e.length;n--;)if(Mf(e[n][0],t))return n;return-1}var Hte=Array.prototype,Wte=Hte.splice;function Vte(e){var t=this.__data__,n=c0(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Wte.call(t,n,1),--this.size,!0}function Gte(e){var t=this.__data__,n=c0(t,e);return n<0?void 0:t[n][1]}function qte(e){return c0(this.__data__,e)>-1}function Yte(e,t){var n=this.__data__,r=c0(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Mo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Mo.prototype.clear=Ute;Mo.prototype.delete=Vte;Mo.prototype.get=Gte;Mo.prototype.has=qte;Mo.prototype.set=Yte;function Xte(){this.__data__=new Mo,this.size=0}function Kte(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Zte(e){return this.__data__.get(e)}function Qte(e){return this.__data__.has(e)}var lO=typeof global=="object"&&global&&global.Object===Object&&global,Jte=typeof self=="object"&&self&&self.Object===Object&&self,Ia=lO||Jte||Function("return this")(),pl=Ia.Symbol,cO=Object.prototype,ene=cO.hasOwnProperty,tne=cO.toString,Fd=pl?pl.toStringTag:void 0;function nne(e){var t=ene.call(e,Fd),n=e[Fd];try{e[Fd]=void 0;var r=!0}catch{}var i=tne.call(e);return r&&(t?e[Fd]=n:delete e[Fd]),i}var rne=Object.prototype,ine=rne.toString;function sne(e){return ine.call(e)}var ane="[object Null]",one="[object Undefined]",CC=pl?pl.toStringTag:void 0;function bc(e){return e==null?e===void 0?one:ane:CC&&CC in Object(e)?nne(e):sne(e)}function Zs(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var lne="[object AsyncFunction]",cne="[object Function]",une="[object GeneratorFunction]",dne="[object Proxy]";function Bw(e){if(!Zs(e))return!1;var t=bc(e);return t==cne||t==une||t==lne||t==dne}var $y=Ia["__core-js_shared__"],EC=function(){var e=/[^.]+$/.exec($y&&$y.keys&&$y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function hne(e){return!!EC&&EC in e}var fne=Function.prototype,pne=fne.toString;function vc(e){if(e!=null){try{return pne.call(e)}catch{}try{return e+""}catch{}}return""}var mne=/[\\^$.*+?()[\]{}|]/g,gne=/^\[object .+?Constructor\]$/,yne=Function.prototype,bne=Object.prototype,vne=yne.toString,xne=bne.hasOwnProperty,wne=RegExp("^"+vne.call(xne).replace(mne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _ne(e){if(!Zs(e)||hne(e))return!1;var t=Bw(e)?wne:gne;return t.test(vc(e))}function kne(e,t){return e==null?void 0:e[t]}function xc(e,t){var n=kne(e,t);return _ne(n)?n:void 0}var of=xc(Ia,"Map"),lf=xc(Object,"create");function Sne(){this.__data__=lf?lf(null):{},this.size=0}function Cne(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ene="__lodash_hash_undefined__",Tne=Object.prototype,jne=Tne.hasOwnProperty;function Ane(e){var t=this.__data__;if(lf){var n=t[e];return n===Ene?void 0:n}return jne.call(t,e)?t[e]:void 0}var Pne=Object.prototype,Nne=Pne.hasOwnProperty;function One(e){var t=this.__data__;return lf?t[e]!==void 0:Nne.call(t,e)}var Rne="__lodash_hash_undefined__";function Mne(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=lf&&t===void 0?Rne:t,this}function uc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}uc.prototype.clear=Sne;uc.prototype.delete=Cne;uc.prototype.get=Ane;uc.prototype.has=One;uc.prototype.set=Mne;function Lne(){this.size=0,this.__data__={hash:new uc,map:new(of||Mo),string:new uc}}function Ine(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function u0(e,t){var n=e.__data__;return Ine(t)?n[typeof t=="string"?"string":"hash"]:n.map}function $ne(e){var t=u0(this,e).delete(e);return this.size-=t?1:0,t}function Dne(e){return u0(this,e).get(e)}function zne(e){return u0(this,e).has(e)}function Fne(e,t){var n=u0(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Lo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Lo.prototype.clear=Lne;Lo.prototype.delete=$ne;Lo.prototype.get=Dne;Lo.prototype.has=zne;Lo.prototype.set=Fne;var Bne=200;function Une(e,t){var n=this.__data__;if(n instanceof Mo){var r=n.__data__;if(!of||r.length<Bne-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Lo(r)}return n.set(e,t),this.size=n.size,this}function ao(e){var t=this.__data__=new Mo(e);this.size=t.size}ao.prototype.clear=Xte;ao.prototype.delete=Kte;ao.prototype.get=Zte;ao.prototype.has=Qte;ao.prototype.set=Une;var cg=function(){try{var e=xc(Object,"defineProperty");return e({},"",{}),e}catch{}}();function Uw(e,t,n){t=="__proto__"&&cg?cg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function mx(e,t,n){(n!==void 0&&!Mf(e[t],n)||n===void 0&&!(t in e))&&Uw(e,t,n)}function Hne(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var u=a[++i];if(n(s[u],u,s)===!1)break}return t}}var uO=Hne(),dO=typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,TC=dO&&typeof Ns=="object"&&Ns&&!Ns.nodeType&&Ns,Wne=TC&&TC.exports===dO,jC=Wne?Ia.Buffer:void 0;jC&&jC.allocUnsafe;function Vne(e,t){return e.slice()}var ug=Ia.Uint8Array;function Gne(e){var t=new e.constructor(e.byteLength);return new ug(t).set(new ug(e)),t}function qne(e,t){var n=Gne(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function Yne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var AC=Object.create,Xne=function(){function e(){}return function(t){if(!Zs(t))return{};if(AC)return AC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function hO(e,t){return function(n){return e(t(n))}}var fO=hO(Object.getPrototypeOf,Object),Kne=Object.prototype;function Hw(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Kne;return e===n}function Zne(e){return typeof e.constructor=="function"&&!Hw(e)?Xne(fO(e)):{}}function ml(e){return e!=null&&typeof e=="object"}var Qne="[object Arguments]";function PC(e){return ml(e)&&bc(e)==Qne}var pO=Object.prototype,Jne=pO.hasOwnProperty,ere=pO.propertyIsEnumerable,dg=PC(function(){return arguments}())?PC:function(e){return ml(e)&&Jne.call(e,"callee")&&!ere.call(e,"callee")},Ms=Array.isArray,tre=9007199254740991;function Ww(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tre}function kd(e){return e!=null&&Ww(e.length)&&!Bw(e)}function nre(e){return ml(e)&&kd(e)}function rre(){return!1}var mO=typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,NC=mO&&typeof Ns=="object"&&Ns&&!Ns.nodeType&&Ns,ire=NC&&NC.exports===mO,OC=ire?Ia.Buffer:void 0,sre=OC?OC.isBuffer:void 0,hg=sre||rre,are="[object Object]",ore=Function.prototype,lre=Object.prototype,gO=ore.toString,cre=lre.hasOwnProperty,ure=gO.call(Object);function dre(e){if(!ml(e)||bc(e)!=are)return!1;var t=fO(e);if(t===null)return!0;var n=cre.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&gO.call(n)==ure}var hre="[object Arguments]",fre="[object Array]",pre="[object Boolean]",mre="[object Date]",gre="[object Error]",yre="[object Function]",bre="[object Map]",vre="[object Number]",xre="[object Object]",wre="[object RegExp]",_re="[object Set]",kre="[object String]",Sre="[object WeakMap]",Cre="[object ArrayBuffer]",Ere="[object DataView]",Tre="[object Float32Array]",jre="[object Float64Array]",Are="[object Int8Array]",Pre="[object Int16Array]",Nre="[object Int32Array]",Ore="[object Uint8Array]",Rre="[object Uint8ClampedArray]",Mre="[object Uint16Array]",Lre="[object Uint32Array]",Cr={};Cr[Tre]=Cr[jre]=Cr[Are]=Cr[Pre]=Cr[Nre]=Cr[Ore]=Cr[Rre]=Cr[Mre]=Cr[Lre]=!0;Cr[hre]=Cr[fre]=Cr[Cre]=Cr[pre]=Cr[Ere]=Cr[mre]=Cr[gre]=Cr[yre]=Cr[bre]=Cr[vre]=Cr[xre]=Cr[wre]=Cr[_re]=Cr[kre]=Cr[Sre]=!1;function Ire(e){return ml(e)&&Ww(e.length)&&!!Cr[bc(e)]}function $re(e){return function(t){return e(t)}}var yO=typeof Ps=="object"&&Ps&&!Ps.nodeType&&Ps,Rh=yO&&typeof Ns=="object"&&Ns&&!Ns.nodeType&&Ns,Dre=Rh&&Rh.exports===yO,Dy=Dre&&lO.process,RC=function(){try{var e=Rh&&Rh.require&&Rh.require("util").types;return e||Dy&&Dy.binding&&Dy.binding("util")}catch{}}(),MC=RC&&RC.isTypedArray,Vw=MC?$re(MC):Ire;function gx(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var zre=Object.prototype,Fre=zre.hasOwnProperty;function Bre(e,t,n){var r=e[t];(!(Fre.call(e,t)&&Mf(r,n))||n===void 0&&!(t in e))&&Uw(e,t,n)}function Ure(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],u=void 0;u===void 0&&(u=e[o]),i?Uw(n,o,u):Bre(n,o,u)}return n}function Hre(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Wre=9007199254740991,Vre=/^(?:0|[1-9]\d*)$/;function Gw(e,t){var n=typeof e;return t=t??Wre,!!t&&(n=="number"||n!="symbol"&&Vre.test(e))&&e>-1&&e%1==0&&e<t}var Gre=Object.prototype,qre=Gre.hasOwnProperty;function bO(e,t){var n=Ms(e),r=!n&&dg(e),i=!n&&!r&&hg(e),s=!n&&!r&&!i&&Vw(e),a=n||r||i||s,o=a?Hre(e.length,String):[],u=o.length;for(var d in e)(t||qre.call(e,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Gw(d,u)))&&o.push(d);return o}function Yre(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Xre=Object.prototype,Kre=Xre.hasOwnProperty;function Zre(e){if(!Zs(e))return Yre(e);var t=Hw(e),n=[];for(var r in e)r=="constructor"&&(t||!Kre.call(e,r))||n.push(r);return n}function vO(e){return kd(e)?bO(e,!0):Zre(e)}function Qre(e){return Ure(e,vO(e))}function Jre(e,t,n,r,i,s,a){var o=gx(e,n),u=gx(t,n),d=a.get(u);if(d){mx(e,n,d);return}var h=s?s(o,u,n+"",e,t,a):void 0,p=h===void 0;if(p){var m=Ms(u),g=!m&&hg(u),v=!m&&!g&&Vw(u);h=u,m||g||v?Ms(o)?h=o:nre(o)?h=Yne(o):g?(p=!1,h=Vne(u)):v?(p=!1,h=qne(u)):h=[]:dre(u)||dg(u)?(h=o,dg(o)?h=Qre(o):(!Zs(o)||Bw(o))&&(h=Zne(u))):p=!1}p&&(a.set(u,h),i(h,u,r,s,a),a.delete(u)),mx(e,n,h)}function xO(e,t,n,r,i){e!==t&&uO(t,function(s,a){if(i||(i=new ao),Zs(s))Jre(e,t,a,n,xO,r,i);else{var o=r?r(gx(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),mx(e,a,o)}},vO)}function d0(e){return e}function eie(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var LC=Math.max;function tie(e,t,n){return t=LC(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=LC(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),eie(e,this,o)}}function nie(e){return function(){return e}}var rie=cg?function(e,t){return cg(e,"toString",{configurable:!0,enumerable:!1,value:nie(t),writable:!0})}:d0,iie=800,sie=16,aie=Date.now;function oie(e){var t=0,n=0;return function(){var r=aie(),i=sie-(r-n);if(n=r,i>0){if(++t>=iie)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var lie=oie(rie);function cie(e,t){return lie(tie(e,t,d0),e+"")}function uie(e,t,n){if(!Zs(n))return!1;var r=typeof t;return(r=="number"?kd(n)&&Gw(t,n.length):r=="string"&&t in n)?Mf(n[t],e):!1}function die(e){return cie(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&uie(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var ys=die(function(e,t,n){xO(e,t,n)}),Lf=function(t){var n=t.zDepth,r=t.radius,i=t.background,s=t.children,a=t.styles,o=a===void 0?{}:a,u=yn(ys({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":n===1});return je.createElement("div",{style:u.wrap},je.createElement("div",{style:u.bg}),je.createElement("div",{style:u.content},s))};Lf.propTypes={background:Dt.string,zDepth:Dt.oneOf([0,1,2,3,4,5]),radius:Dt.number,styles:Dt.object};Lf.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var zy=function(){return Ia.Date.now()},hie=/\s/;function fie(e){for(var t=e.length;t--&&hie.test(e.charAt(t)););return t}var pie=/^\s+/;function mie(e){return e&&e.slice(0,fie(e)+1).replace(pie,"")}var gie="[object Symbol]";function h0(e){return typeof e=="symbol"||ml(e)&&bc(e)==gie}var IC=NaN,yie=/^[-+]0x[0-9a-f]+$/i,bie=/^0b[01]+$/i,vie=/^0o[0-7]+$/i,xie=parseInt;function $C(e){if(typeof e=="number")return e;if(h0(e))return IC;if(Zs(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Zs(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mie(e);var n=bie.test(e);return n||vie.test(e)?xie(e.slice(2),n?2:8):yie.test(e)?IC:+e}var wie="Expected a function",_ie=Math.max,kie=Math.min;function wO(e,t,n){var r,i,s,a,o,u,d=0,h=!1,p=!1,m=!0;if(typeof e!="function")throw new TypeError(wie);t=$C(t)||0,Zs(n)&&(h=!!n.leading,p="maxWait"in n,s=p?_ie($C(n.maxWait)||0,t):s,m="trailing"in n?!!n.trailing:m);function g(E){var U=r,D=i;return r=i=void 0,d=E,a=e.apply(D,U),a}function v(E){return d=E,o=setTimeout(x,t),h?g(E):a}function w(E){var U=E-u,D=E-d,R=t-U;return p?kie(R,s-D):R}function S(E){var U=E-u,D=E-d;return u===void 0||U>=t||U<0||p&&D>=s}function x(){var E=zy();if(S(E))return k(E);o=setTimeout(x,w(E))}function k(E){return o=void 0,m&&r?g(E):(r=i=void 0,a)}function j(){o!==void 0&&clearTimeout(o),d=0,r=u=i=o=void 0}function O(){return o===void 0?a:k(zy())}function I(){var E=zy(),U=S(E);if(r=arguments,i=this,u=E,U){if(o===void 0)return v(u);if(p)return clearTimeout(o),o=setTimeout(x,t),g(u)}return o===void 0&&(o=setTimeout(x,t)),a}return I.cancel=j,I.flush=O,I}var Sie="Expected a function";function Cie(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Sie);return Zs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),wO(e,t,{leading:r,maxWait:t,trailing:i})}var Eie=function(t,n,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=o-(r.getBoundingClientRect().left+window.pageXOffset),h=u-(r.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>s&&(d=s),h<0?h=0:h>a&&(h=a);var p=d/s,m=1-h/a;return{h:n.h,s:p,v:m,a:n.a,source:"hsv"}},Tie=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function jie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Pie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f0=function(e){Pie(t,e);function t(n){jie(this,t);var r=Aie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,Eie(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Cie(function(i,s,a){i(s,a)},50),r}return Tie(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,a=i.white,o=i.black,u=i.pointer,d=i.circle,h=yn({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:a,black:o,pointer:u,circle:d}},{custom:!!this.props.style});return je.createElement("div",{style:h.color,ref:function(m){return r.container=m},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),je.createElement("div",{style:h.white,className:"saturation-white"},je.createElement("div",{style:h.black,className:"saturation-black"}),je.createElement("div",{style:h.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:h.circle}))))}}]),t}(fe.PureComponent||fe.Component);function Nie(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Oie=hO(Object.keys,Object),Rie=Object.prototype,Mie=Rie.hasOwnProperty;function Lie(e){if(!Hw(e))return Oie(e);var t=[];for(var n in Object(e))Mie.call(e,n)&&n!="constructor"&&t.push(n);return t}function qw(e){return kd(e)?bO(e):Lie(e)}function Iie(e,t){return e&&uO(e,t,qw)}function $ie(e,t){return function(n,r){if(n==null)return n;if(!kd(n))return e(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var _O=$ie(Iie);function Die(e){return typeof e=="function"?e:d0}function zie(e,t){var n=Ms(e)?Nie:_O;return n(e,Die(t))}function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}var Fie=/^\s+/,Bie=/\s+$/;function Zt(e,t){if(e=e||"",t=t||{},e instanceof Zt)return e;if(!(this instanceof Zt))return new Zt(e,t);var n=Uie(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Zt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,s,a,o;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(t){return this._a=kO(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=zC(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=zC(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=DC(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=DC(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return FC(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Gie(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ar(this._r,255)*100)+"%",g:Math.round(Ar(this._g,255)*100)+"%",b:Math.round(Ar(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ar(this._r,255)*100)+"%, "+Math.round(Ar(this._g,255)*100)+"%, "+Math.round(Ar(this._b,255)*100)+"%)":"rgba("+Math.round(Ar(this._r,255)*100)+"%, "+Math.round(Ar(this._g,255)*100)+"%, "+Math.round(Ar(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ise[FC(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+BC(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var s=Zt(t);r="#"+BC(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Zt(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Kie,arguments)},brighten:function(){return this._applyModification(Zie,arguments)},darken:function(){return this._applyModification(Qie,arguments)},desaturate:function(){return this._applyModification(qie,arguments)},saturate:function(){return this._applyModification(Yie,arguments)},greyscale:function(){return this._applyModification(Xie,arguments)},spin:function(){return this._applyModification(Jie,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(nse,arguments)},complement:function(){return this._applyCombination(ese,arguments)},monochromatic:function(){return this._applyCombination(rse,arguments)},splitcomplement:function(){return this._applyCombination(tse,arguments)},triad:function(){return this._applyCombination(UC,[3])},tetrad:function(){return this._applyCombination(UC,[4])}};Zt.fromRatio=function(e,t){if(fg(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=sh(e[r]));e=n}return Zt(e,t)};function Uie(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof e=="string"&&(e=lse(e)),fg(e)=="object"&&(fo(e.r)&&fo(e.g)&&fo(e.b)?(t=Hie(e.r,e.g,e.b),a=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):fo(e.h)&&fo(e.s)&&fo(e.v)?(r=sh(e.s),i=sh(e.v),t=Vie(e.h,r,i),a=!0,o="hsv"):fo(e.h)&&fo(e.s)&&fo(e.l)&&(r=sh(e.s),s=sh(e.l),t=Wie(e.h,r,s),a=!0,o="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=kO(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function Hie(e,t,n){return{r:Ar(e,255)*255,g:Ar(t,255)*255,b:Ar(n,255)*255}}function DC(e,t,n){e=Ar(e,255),t=Ar(t,255),n=Ar(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var u=r-i;switch(a=o>.5?u/(2-r-i):u/(r+i),r){case e:s=(t-n)/u+(t<n?6:0);break;case t:s=(n-e)/u+2;break;case n:s=(e-t)/u+4;break}s/=6}return{h:s,s:a,l:o}}function Wie(e,t,n){var r,i,s;e=Ar(e,360),t=Ar(t,100),n=Ar(n,100);function a(d,h,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(h-d)*6*p:p<1/2?h:p<2/3?d+(h-d)*(2/3-p)*6:d}if(t===0)r=i=s=n;else{var o=n<.5?n*(1+t):n+t-n*t,u=2*n-o;r=a(u,o,e+1/3),i=a(u,o,e),s=a(u,o,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function zC(e,t,n){e=Ar(e,255),t=Ar(t,255),n=Ar(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=r,u=r-i;if(a=r===0?0:u/r,r==i)s=0;else{switch(r){case e:s=(t-n)/u+(t<n?6:0);break;case t:s=(n-e)/u+2;break;case n:s=(e-t)/u+4;break}s/=6}return{h:s,s:a,v:o}}function Vie(e,t,n){e=Ar(e,360)*6,t=Ar(t,100),n=Ar(n,100);var r=Math.floor(e),i=e-r,s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),u=r%6,d=[n,a,s,s,o,n][u],h=[o,n,n,a,s,s][u],p=[s,s,o,n,n,a][u];return{r:d*255,g:h*255,b:p*255}}function FC(e,t,n,r){var i=[ka(Math.round(e).toString(16)),ka(Math.round(t).toString(16)),ka(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Gie(e,t,n,r,i){var s=[ka(Math.round(e).toString(16)),ka(Math.round(t).toString(16)),ka(Math.round(n).toString(16)),ka(SO(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function BC(e,t,n,r){var i=[ka(SO(r)),ka(Math.round(e).toString(16)),ka(Math.round(t).toString(16)),ka(Math.round(n).toString(16))];return i.join("")}Zt.equals=function(e,t){return!e||!t?!1:Zt(e).toRgbString()==Zt(t).toRgbString()};Zt.random=function(){return Zt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function qie(e,t){t=t===0?0:t||10;var n=Zt(e).toHsl();return n.s-=t/100,n.s=p0(n.s),Zt(n)}function Yie(e,t){t=t===0?0:t||10;var n=Zt(e).toHsl();return n.s+=t/100,n.s=p0(n.s),Zt(n)}function Xie(e){return Zt(e).desaturate(100)}function Kie(e,t){t=t===0?0:t||10;var n=Zt(e).toHsl();return n.l+=t/100,n.l=p0(n.l),Zt(n)}function Zie(e,t){t=t===0?0:t||10;var n=Zt(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),Zt(n)}function Qie(e,t){t=t===0?0:t||10;var n=Zt(e).toHsl();return n.l-=t/100,n.l=p0(n.l),Zt(n)}function Jie(e,t){var n=Zt(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Zt(n)}function ese(e){var t=Zt(e).toHsl();return t.h=(t.h+180)%360,Zt(t)}function UC(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Zt(e).toHsl(),r=[Zt(e)],i=360/t,s=1;s<t;s++)r.push(Zt({h:(n.h+s*i)%360,s:n.s,l:n.l}));return r}function tse(e){var t=Zt(e).toHsl(),n=t.h;return[Zt(e),Zt({h:(n+72)%360,s:t.s,l:t.l}),Zt({h:(n+216)%360,s:t.s,l:t.l})]}function nse(e,t,n){t=t||6,n=n||30;var r=Zt(e).toHsl(),i=360/n,s=[Zt(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(Zt(r));return s}function rse(e,t){t=t||6;for(var n=Zt(e).toHsv(),r=n.h,i=n.s,s=n.v,a=[],o=1/t;t--;)a.push(Zt({h:r,s:i,v:s})),s=(s+o)%1;return a}Zt.mix=function(e,t,n){n=n===0?0:n||50;var r=Zt(e).toRgb(),i=Zt(t).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Zt(a)};Zt.readability=function(e,t){var n=Zt(e),r=Zt(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Zt.isReadable=function(e,t,n){var r=Zt.readability(e,t),i,s;switch(s=!1,i=cse(n),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Zt.mostReadable=function(e,t,n){var r=null,i=0,s,a,o,u;n=n||{},a=n.includeFallbackColors,o=n.level,u=n.size;for(var d=0;d<t.length;d++)s=Zt.readability(e,t[d]),s>i&&(i=s,r=Zt(t[d]));return Zt.isReadable(e,r,{level:o,size:u})||!a?r:(n.includeFallbackColors=!1,Zt.mostReadable(e,["#fff","#000"],n))};var yx=Zt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ise=Zt.hexNames=sse(yx);function sse(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function kO(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ar(e,t){ase(e)&&(e="100%");var n=ose(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function p0(e){return Math.min(1,Math.max(0,e))}function _s(e){return parseInt(e,16)}function ase(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function ose(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ka(e){return e.length==1?"0"+e:""+e}function sh(e){return e<=1&&(e=e*100+"%"),e}function SO(e){return Math.round(parseFloat(e)*255).toString(16)}function HC(e){return _s(e)/255}var ha=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function fo(e){return!!ha.CSS_UNIT.exec(e)}function lse(e){e=e.replace(Fie,"").replace(Bie,"").toLowerCase();var t=!1;if(yx[e])e=yx[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=ha.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=ha.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ha.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=ha.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ha.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=ha.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ha.hex8.exec(e))?{r:_s(n[1]),g:_s(n[2]),b:_s(n[3]),a:HC(n[4]),format:t?"name":"hex8"}:(n=ha.hex6.exec(e))?{r:_s(n[1]),g:_s(n[2]),b:_s(n[3]),format:t?"name":"hex"}:(n=ha.hex4.exec(e))?{r:_s(n[1]+""+n[1]),g:_s(n[2]+""+n[2]),b:_s(n[3]+""+n[3]),a:HC(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=ha.hex3.exec(e))?{r:_s(n[1]+""+n[1]),g:_s(n[2]+""+n[2]),b:_s(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function cse(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var WC=function(t){var n=["r","g","b","a","h","s","l","v"],r=0,i=0;return zie(n,function(s){if(t[s]&&(r+=1,isNaN(t[s])||(i+=1),s==="s"||s==="l")){var a=/^\d+%$/;a.test(t[s])&&(i+=1)}}),r===i?t:!1},ah=function(t,n){var r=t.hex?Zt(t.hex):Zt(t),i=r.toHsl(),s=r.toHsv(),a=r.toRgb(),o=r.toHex();i.s===0&&(i.h=n||0,s.h=n||0);var u=o==="000000"&&a.a===0;return{hsl:i,hex:u?"transparent":"#"+o,rgb:a,hsv:s,oldHue:t.h||n||i.h,source:t.source}},Sl=function(t){if(t==="transparent")return!0;var n=String(t).charAt(0)==="#"?1:0;return t.length!==4+n&&t.length<7+n&&Zt(t).isValid()},Yw=function(t){if(!t)return"#fff";var n=ah(t);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},Fy=function(t,n){var r=t.replace("","");return Zt(n+" ("+r+")")._ok},Bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},use=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function dse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hse(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bs=function(t){var n=function(r){fse(i,r);function i(s){dse(this,i);var a=hse(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(o,u){var d=WC(o);if(d){var h=ah(o,o.h||a.state.oldHue);a.setState(h),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,h,u),a.props.onChange&&a.props.onChange(h,u)}},a.handleSwatchHover=function(o,u){var d=WC(o);if(d){var h=ah(o,o.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(h,u)}},a.state=Bd({},ah(s.color,0)),a.debounce=wO(function(o,u,d){o(u,d)},100),a}return use(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),je.createElement(t,Bd({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,o){return Bd({},ah(a.color,o.oldHue))}}]),i}(fe.PureComponent||fe.Component);return n.propTypes=Bd({},t.propTypes),n.defaultProps=Bd({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},pse=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mse=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function gse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bse=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){yse(i,r);function i(){var s,a,o,u;gse(this,i);for(var d=arguments.length,h=Array(d),p=0;p<d;p++)h[p]=arguments[p];return u=(a=(o=VC(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(h))),o),o.state={focus:!1},o.handleFocus=function(){return o.setState({focus:!0})},o.handleBlur=function(){return o.setState({focus:!1})},a),VC(o,u)}return mse(i,[{key:"render",value:function(){return je.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},je.createElement(t,pse({},this.props,this.state)))}}]),i}(je.Component)},GC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vse=13,xse=function(t){var n=t.color,r=t.style,i=t.onClick,s=i===void 0?function(){}:i,a=t.onHover,o=t.title,u=o===void 0?n:o,d=t.children,h=t.focus,p=t.focusStyle,m=p===void 0?{}:p,g=n==="transparent",v=yn({default:{swatch:GC({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,h?m:{})}}),w=function(O){return s(n,O)},S=function(O){return O.keyCode===vse&&s(n,O)},x=function(O){return a(n,O)},k={};return a&&(k.onMouseOver=x),je.createElement("div",GC({style:v.swatch,onClick:w,title:u,tabIndex:0,onKeyDown:S},k),d,g&&je.createElement(wd,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const wc=bse(xse);var wse=function(t){var n=t.direction,r=yn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return je.createElement("div",{style:r.picker})},_se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CO=function(t){var n=t.rgb,r=t.hsl,i=t.width,s=t.height,a=t.onChange,o=t.direction,u=t.style,d=t.renderers,h=t.pointer,p=t.className,m=p===void 0?"":p,g=yn({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:u}}});return je.createElement("div",{style:g.picker,className:"alpha-picker "+m},je.createElement(Fw,_se({},g.alpha,{rgb:n,hsl:r,pointer:h,renderers:d,onChange:a,direction:o})))};CO.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:wse};bs(CO);function EO(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var kse="__lodash_hash_undefined__";function Sse(e){return this.__data__.set(e,kse),this}function Cse(e){return this.__data__.has(e)}function pg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Lo;++t<n;)this.add(e[t])}pg.prototype.add=pg.prototype.push=Sse;pg.prototype.has=Cse;function Ese(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Tse(e,t){return e.has(t)}var jse=1,Ase=2;function TO(e,t,n,r,i,s){var a=n&jse,o=e.length,u=t.length;if(o!=u&&!(a&&u>o))return!1;var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var p=-1,m=!0,g=n&Ase?new pg:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var v=e[p],w=t[p];if(r)var S=a?r(w,v,p,t,e,s):r(v,w,p,e,t,s);if(S!==void 0){if(S)continue;m=!1;break}if(g){if(!Ese(t,function(x,k){if(!Tse(g,k)&&(v===x||i(v,x,n,r,s)))return g.push(k)})){m=!1;break}}else if(!(v===w||i(v,w,n,r,s))){m=!1;break}}return s.delete(e),s.delete(t),m}function Pse(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Nse(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Ose=1,Rse=2,Mse="[object Boolean]",Lse="[object Date]",Ise="[object Error]",$se="[object Map]",Dse="[object Number]",zse="[object RegExp]",Fse="[object Set]",Bse="[object String]",Use="[object Symbol]",Hse="[object ArrayBuffer]",Wse="[object DataView]",qC=pl?pl.prototype:void 0,By=qC?qC.valueOf:void 0;function Vse(e,t,n,r,i,s,a){switch(n){case Wse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Hse:return!(e.byteLength!=t.byteLength||!s(new ug(e),new ug(t)));case Mse:case Lse:case Dse:return Mf(+e,+t);case Ise:return e.name==t.name&&e.message==t.message;case zse:case Bse:return e==t+"";case $se:var o=Pse;case Fse:var u=r&Ose;if(o||(o=Nse),e.size!=t.size&&!u)return!1;var d=a.get(e);if(d)return d==t;r|=Rse,a.set(e,t);var h=TO(o(e),o(t),r,i,s,a);return a.delete(e),h;case Use:if(By)return By.call(e)==By.call(t)}return!1}function Gse(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function qse(e,t,n){var r=t(e);return Ms(e)?r:Gse(r,n(e))}function Yse(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Xse(){return[]}var Kse=Object.prototype,Zse=Kse.propertyIsEnumerable,YC=Object.getOwnPropertySymbols,Qse=YC?function(e){return e==null?[]:(e=Object(e),Yse(YC(e),function(t){return Zse.call(e,t)}))}:Xse;function XC(e){return qse(e,qw,Qse)}var Jse=1,eae=Object.prototype,tae=eae.hasOwnProperty;function nae(e,t,n,r,i,s){var a=n&Jse,o=XC(e),u=o.length,d=XC(t),h=d.length;if(u!=h&&!a)return!1;for(var p=u;p--;){var m=o[p];if(!(a?m in t:tae.call(t,m)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var w=!0;s.set(e,t),s.set(t,e);for(var S=a;++p<u;){m=o[p];var x=e[m],k=t[m];if(r)var j=a?r(k,x,m,t,e,s):r(x,k,m,e,t,s);if(!(j===void 0?x===k||i(x,k,n,r,s):j)){w=!1;break}S||(S=m=="constructor")}if(w&&!S){var O=e.constructor,I=t.constructor;O!=I&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof I=="function"&&I instanceof I)&&(w=!1)}return s.delete(e),s.delete(t),w}var bx=xc(Ia,"DataView"),vx=xc(Ia,"Promise"),xx=xc(Ia,"Set"),wx=xc(Ia,"WeakMap"),KC="[object Map]",rae="[object Object]",ZC="[object Promise]",QC="[object Set]",JC="[object WeakMap]",eE="[object DataView]",iae=vc(bx),sae=vc(of),aae=vc(vx),oae=vc(xx),lae=vc(wx),Yo=bc;(bx&&Yo(new bx(new ArrayBuffer(1)))!=eE||of&&Yo(new of)!=KC||vx&&Yo(vx.resolve())!=ZC||xx&&Yo(new xx)!=QC||wx&&Yo(new wx)!=JC)&&(Yo=function(e){var t=bc(e),n=t==rae?e.constructor:void 0,r=n?vc(n):"";if(r)switch(r){case iae:return eE;case sae:return KC;case aae:return ZC;case oae:return QC;case lae:return JC}return t});var cae=1,tE="[object Arguments]",nE="[object Array]",jp="[object Object]",uae=Object.prototype,rE=uae.hasOwnProperty;function dae(e,t,n,r,i,s){var a=Ms(e),o=Ms(t),u=a?nE:Yo(e),d=o?nE:Yo(t);u=u==tE?jp:u,d=d==tE?jp:d;var h=u==jp,p=d==jp,m=u==d;if(m&&hg(e)){if(!hg(t))return!1;a=!0,h=!1}if(m&&!h)return s||(s=new ao),a||Vw(e)?TO(e,t,n,r,i,s):Vse(e,t,u,n,r,i,s);if(!(n&cae)){var g=h&&rE.call(e,"__wrapped__"),v=p&&rE.call(t,"__wrapped__");if(g||v){var w=g?e.value():e,S=v?t.value():t;return s||(s=new ao),i(w,S,n,r,s)}}return m?(s||(s=new ao),nae(e,t,n,r,i,s)):!1}function Xw(e,t,n,r,i){return e===t?!0:e==null||t==null||!ml(e)&&!ml(t)?e!==e&&t!==t:dae(e,t,n,r,Xw,i)}var hae=1,fae=2;function pae(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=n[i];var o=a[0],u=e[o],d=a[1];if(a[2]){if(u===void 0&&!(o in e))return!1}else{var h=new ao,p;if(!(p===void 0?Xw(d,u,hae|fae,r,h):p))return!1}}return!0}function jO(e){return e===e&&!Zs(e)}function mae(e){for(var t=qw(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,jO(i)]}return t}function AO(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function gae(e){var t=mae(e);return t.length==1&&t[0][2]?AO(t[0][0],t[0][1]):function(n){return n===e||pae(n,e,t)}}var yae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bae=/^\w*$/;function Kw(e,t){if(Ms(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||h0(e)?!0:bae.test(e)||!yae.test(e)||t!=null&&e in Object(t)}var vae="Expected a function";function Zw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(vae);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Zw.Cache||Lo),n}Zw.Cache=Lo;var xae=500;function wae(e){var t=Zw(e,function(r){return n.size===xae&&n.clear(),r}),n=t.cache;return t}var _ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kae=/\\(\\)?/g,Sae=wae(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_ae,function(n,r,i,s){t.push(i?s.replace(kae,"$1"):r||n)}),t}),iE=pl?pl.prototype:void 0,sE=iE?iE.toString:void 0;function PO(e){if(typeof e=="string")return e;if(Ms(e))return EO(e,PO)+"";if(h0(e))return sE?sE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Cae(e){return e==null?"":PO(e)}function NO(e,t){return Ms(e)?e:Kw(e,t)?[e]:Sae(Cae(e))}function m0(e){if(typeof e=="string"||h0(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function OO(e,t){t=NO(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[m0(t[n++])];return n&&n==r?e:void 0}function Eae(e,t,n){var r=e==null?void 0:OO(e,t);return r===void 0?n:r}function Tae(e,t){return e!=null&&t in Object(e)}function jae(e,t,n){t=NO(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=m0(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Ww(i)&&Gw(a,i)&&(Ms(e)||dg(e)))}function Aae(e,t){return e!=null&&jae(e,t,Tae)}var Pae=1,Nae=2;function Oae(e,t){return Kw(e)&&jO(t)?AO(m0(e),t):function(n){var r=Eae(n,e);return r===void 0&&r===t?Aae(n,e):Xw(t,r,Pae|Nae)}}function Rae(e){return function(t){return t==null?void 0:t[e]}}function Mae(e){return function(t){return OO(t,e)}}function Lae(e){return Kw(e)?Rae(m0(e)):Mae(e)}function Iae(e){return typeof e=="function"?e:e==null?d0:typeof e=="object"?Ms(e)?Oae(e[0],e[1]):gae(e):Lae(e)}function $ae(e,t){var n=-1,r=kd(e)?Array(e.length):[];return _O(e,function(i,s,a){r[++n]=t(i,s,a)}),r}function _c(e,t){var n=Ms(e)?EO:$ae;return n(e,Iae(t))}var Dae=function(t){var n=t.colors,r=t.onClick,i=t.onSwatchHover,s=yn({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return je.createElement("div",{style:s.swatches},_c(n,function(a){return je.createElement(wc,{key:a,color:a,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+a}})}),je.createElement("div",{style:s.clear}))},Qw=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.hex,s=t.colors,a=t.width,o=t.triangle,u=t.styles,d=u===void 0?{}:u,h=t.className,p=h===void 0?"":h,m=i==="transparent",g=function(S,x){Sl(S)&&n({hex:S,source:"hex"},x)},v=yn(ys({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Yw(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},d),{"hide-triangle":o==="hide"});return je.createElement("div",{style:v.card,className:"block-picker "+p},je.createElement("div",{style:v.triangle}),je.createElement("div",{style:v.head},m&&je.createElement(wd,{borderRadius:"6px 6px 0 0"}),je.createElement("div",{style:v.label},i)),je.createElement("div",{style:v.body},je.createElement(Dae,{colors:s,onClick:g,onSwatchHover:r}),je.createElement(Mn,{style:{input:v.input},value:i,onChange:g})))};Qw.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),colors:Dt.arrayOf(Dt.string),triangle:Dt.oneOf(["top","hide"]),styles:Dt.object};Qw.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};bs(Qw);var qc={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Yc={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Xc={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Kc={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Zc={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Qc={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Jc={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},eu={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},tu={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},oh={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},nu={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},ru={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},iu={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},su={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},au={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},ou={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},lu={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},cu={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},RO=function(t){var n=t.color,r=t.onClick,i=t.onSwatchHover,s=t.hover,a=t.active,o=t.circleSize,u=t.circleSpacing,d=yn({default:{swatch:{width:o,height:o,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:s,active:a});return je.createElement("div",{style:d.swatch},je.createElement(wc,{style:d.Swatch,color:n,onClick:r,onHover:i,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+n}}))};RO.defaultProps={circleSize:28,circleSpacing:14};const zae=zw(RO);var Jw=function(t){var n=t.width,r=t.onChange,i=t.onSwatchHover,s=t.colors,a=t.hex,o=t.circleSize,u=t.styles,d=u===void 0?{}:u,h=t.circleSpacing,p=t.className,m=p===void 0?"":p,g=yn(ys({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-h,marginBottom:-h}}},d)),v=function(S,x){return r({hex:S,source:"hex"},x)};return je.createElement("div",{style:g.card,className:"circle-picker "+m},_c(s,function(w){return je.createElement(zae,{key:w,color:w,onClick:v,onSwatchHover:i,active:a===w.toLowerCase(),circleSize:o,circleSpacing:h})}))};Jw.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),circleSize:Dt.number,circleSpacing:Dt.number,styles:Dt.object};Jw.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[qc[500],Yc[500],Xc[500],Kc[500],Zc[500],Qc[500],Jc[500],eu[500],tu[500],oh[500],nu[500],ru[500],iu[500],su[500],au[500],ou[500],lu[500],cu[500]],styles:{}};bs(Jw);function aE(e){return e===void 0}var MO={};Object.defineProperty(MO,"__esModule",{value:!0});var oE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fae=fe,lE=Bae(Fae);function Bae(e){return e&&e.__esModule?e:{default:e}}function Uae(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Ap=24,Hae=MO.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Ap:r,s=e.height,a=s===void 0?Ap:s,o=e.style,u=o===void 0?{}:o,d=Uae(e,["fill","width","height","style"]);return lE.default.createElement("svg",oE({viewBox:"0 0 "+Ap+" "+Ap,style:oE({fill:n,width:i,height:a},u)},d),lE.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Wae=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Vae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var LO=function(e){qae(t,e);function t(n){Vae(this,t);var r=Gae(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?Sl(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(aE(i.s)?r.props.hsl.s:i.s),l:Number(aE(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return Wae(t,[{key:"render",value:function(){var r=this,i=yn({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),je.createElement("div",{style:i.alpha},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),je.createElement("div",{style:i.alpha},je.createElement(Mn,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),je.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,je.createElement("div",{style:i.toggle},je.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(o){return r.icon=o}},je.createElement(Hae,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t}(je.Component);LO.defaultProps={view:"hex"};var cE=function(){var t=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return je.createElement("div",{style:t.picker})},Yae=function(){var t=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return je.createElement("div",{style:t.picker})},e_=function(t){var n=t.width,r=t.onChange,i=t.disableAlpha,s=t.rgb,a=t.hsl,o=t.hsv,u=t.hex,d=t.renderers,h=t.styles,p=h===void 0?{}:h,m=t.className,g=m===void 0?"":m,v=t.defaultView,w=yn(ys({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},p),{disableAlpha:i});return je.createElement("div",{style:w.picker,className:"chrome-picker "+g},je.createElement("div",{style:w.saturation},je.createElement(f0,{style:w.Saturation,hsl:a,hsv:o,pointer:Yae,onChange:r})),je.createElement("div",{style:w.body},je.createElement("div",{style:w.controls,className:"flexbox-fix"},je.createElement("div",{style:w.color},je.createElement("div",{style:w.swatch},je.createElement("div",{style:w.active}),je.createElement(wd,{renderers:d}))),je.createElement("div",{style:w.toggles},je.createElement("div",{style:w.hue},je.createElement(_d,{style:w.Hue,hsl:a,pointer:cE,onChange:r})),je.createElement("div",{style:w.alpha},je.createElement(Fw,{style:w.Alpha,rgb:s,hsl:a,pointer:cE,renderers:d,onChange:r})))),je.createElement(LO,{rgb:s,hsl:a,hex:u,view:v,onChange:r,disableAlpha:i})))};e_.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),disableAlpha:Dt.bool,styles:Dt.object,defaultView:Dt.oneOf(["hex","rgb","hsl"])};e_.defaultProps={width:225,disableAlpha:!1,styles:{}};bs(e_);var Xae=function(t){var n=t.color,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=t.active,o=yn({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Yw(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return je.createElement(wc,{style:o.color,color:n,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},je.createElement("div",{style:o.dot}))},Kae=function(t){var n=t.hex,r=t.rgb,i=t.onChange,s=yn({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(u,d){u.r||u.g||u.b?i({r:u.r||r.r,g:u.g||r.g,b:u.b||r.b,source:"rgb"},d):i({hex:u.hex,source:"hex"},d)};return je.createElement("div",{style:s.fields,className:"flexbox-fix"},je.createElement("div",{style:s.active}),je.createElement(Mn,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:n,onChange:a}),je.createElement(Mn,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:a}),je.createElement(Mn,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:a}),je.createElement(Mn,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:a}))},t_=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.colors,s=t.hex,a=t.rgb,o=t.styles,u=o===void 0?{}:o,d=t.className,h=d===void 0?"":d,p=yn(ys({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},u)),m=function(v,w){v.hex?Sl(v.hex)&&n({hex:v.hex,source:"hex"},w):n(v,w)};return je.createElement(Lf,{style:p.Compact,styles:u},je.createElement("div",{style:p.compact,className:"compact-picker "+h},je.createElement("div",null,_c(i,function(g){return je.createElement(Xae,{key:g,color:g,active:g.toLowerCase()===s,onClick:m,onSwatchHover:r})}),je.createElement("div",{style:p.clear})),je.createElement(Kae,{hex:s,rgb:a,onChange:m})))};t_.propTypes={colors:Dt.arrayOf(Dt.string),styles:Dt.object};t_.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};bs(t_);var Zae=function(t){var n=t.hover,r=t.color,i=t.onClick,s=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=yn({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:n});return je.createElement("div",{style:o.swatch},je.createElement(wc,{color:r,onClick:i,onHover:s,focusStyle:a}))};const Qae=zw(Zae);var n_=function(t){var n=t.width,r=t.colors,i=t.onChange,s=t.onSwatchHover,a=t.triangle,o=t.styles,u=o===void 0?{}:o,d=t.className,h=d===void 0?"":d,p=yn(ys({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},u),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),m=function(v,w){return i({hex:v,source:"hex"},w)};return je.createElement("div",{style:p.card,className:"github-picker "+h},je.createElement("div",{style:p.triangleShadow}),je.createElement("div",{style:p.triangle}),_c(r,function(g){return je.createElement(Qae,{color:g,key:g,onClick:m,onSwatchHover:s})}))};n_.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),colors:Dt.arrayOf(Dt.string),triangle:Dt.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Dt.object};n_.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};bs(n_);var Jae=function(t){var n=t.direction,r=yn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return je.createElement("div",{style:r.picker})},eoe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r_=function(t){var n=t.width,r=t.height,i=t.onChange,s=t.hsl,a=t.direction,o=t.pointer,u=t.styles,d=u===void 0?{}:u,h=t.className,p=h===void 0?"":h,m=yn(ys({default:{picker:{position:"relative",width:n,height:r},hue:{radius:"2px"}}},d)),g=function(w){return i({a:1,h:w.h,l:.5,s:1})};return je.createElement("div",{style:m.picker,className:"hue-picker "+p},je.createElement(_d,eoe({},m.hue,{hsl:s,pointer:o,onChange:g,direction:a})))};r_.propTypes={styles:Dt.object};r_.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Jae,styles:{}};bs(r_);var toe=function(t){var n=t.onChange,r=t.hex,i=t.rgb,s=t.styles,a=s===void 0?{}:s,o=t.className,u=o===void 0?"":o,d=yn(ys({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),h=function(m,g){m.hex?Sl(m.hex)&&n({hex:m.hex,source:"hex"},g):(m.r||m.g||m.b)&&n({r:m.r||i.r,g:m.g||i.g,b:m.b||i.b,source:"rgb"},g)};return je.createElement(Lf,{styles:a},je.createElement("div",{style:d.material,className:"material-picker "+u},je.createElement(Mn,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:r,onChange:h}),je.createElement("div",{style:d.split,className:"flexbox-fix"},je.createElement("div",{style:d.third},je.createElement(Mn,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:i.r,onChange:h})),je.createElement("div",{style:d.third},je.createElement(Mn,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:i.g,onChange:h})),je.createElement("div",{style:d.third},je.createElement(Mn,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:i.b,onChange:h})))))};bs(toe);var noe=function(t){var n=t.onChange,r=t.rgb,i=t.hsv,s=t.hex,a=yn({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(d,h){d["#"]?Sl(d["#"])&&n({hex:d["#"],source:"hex"},h):d.r||d.g||d.b?n({r:d.r||r.r,g:d.g||r.g,b:d.b||r.b,source:"rgb"},h):(d.h||d.s||d.v)&&n({h:d.h||i.h,s:d.s||i.s,v:d.v||i.v,source:"hsv"},h)};return je.createElement("div",{style:a.fields},je.createElement(Mn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:o}),je.createElement(Mn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:o}),je.createElement(Mn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:o}),je.createElement("div",{style:a.divider}),je.createElement(Mn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:o}),je.createElement(Mn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:o}),je.createElement(Mn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:o}),je.createElement("div",{style:a.divider}),je.createElement(Mn,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:s.replace("#",""),onChange:o}),je.createElement("div",{style:a.fieldSymbols},je.createElement("div",{style:a.symbol},""),je.createElement("div",{style:a.symbol},"%"),je.createElement("div",{style:a.symbol},"%")))},roe=function(t){var n=t.hsl,r=yn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return je.createElement("div",{style:r.picker})},ioe=function(){var t=yn({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return je.createElement("div",{style:t.pointer},je.createElement("div",{style:t.left},je.createElement("div",{style:t.leftInside})),je.createElement("div",{style:t.right},je.createElement("div",{style:t.rightInside})))},uE=function(t){var n=t.onClick,r=t.label,i=t.children,s=t.active,a=yn({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return je.createElement("div",{style:a.button,onClick:n},r||i)},soe=function(t){var n=t.rgb,r=t.currentColor,i=yn({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return je.createElement("div",null,je.createElement("div",{style:i.label},"new"),je.createElement("div",{style:i.swatches},je.createElement("div",{style:i.new}),je.createElement("div",{style:i.current})),je.createElement("div",{style:i.label},"current"))},aoe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ooe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function loe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function coe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i_=function(e){coe(t,e);function t(n){ooe(this,t);var r=loe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:n.hex},r}return aoe(t,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,a=r.className,o=a===void 0?"":a,u=yn(ys({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return je.createElement("div",{style:u.picker,className:"photoshop-picker "+o},je.createElement("div",{style:u.head},this.props.header),je.createElement("div",{style:u.body,className:"flexbox-fix"},je.createElement("div",{style:u.saturation},je.createElement(f0,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:roe,onChange:this.props.onChange})),je.createElement("div",{style:u.hue},je.createElement(_d,{direction:"vertical",hsl:this.props.hsl,pointer:ioe,onChange:this.props.onChange})),je.createElement("div",{style:u.controls},je.createElement("div",{style:u.top,className:"flexbox-fix"},je.createElement("div",{style:u.previews},je.createElement(soe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),je.createElement("div",{style:u.actions},je.createElement(uE,{label:"OK",onClick:this.props.onAccept,active:!0}),je.createElement(uE,{label:"Cancel",onClick:this.props.onCancel}),je.createElement(noe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(je.Component);i_.propTypes={header:Dt.string,styles:Dt.object};i_.defaultProps={header:"Color Picker",styles:{}};bs(i_);var uoe=function(t){var n=t.onChange,r=t.rgb,i=t.hsl,s=t.hex,a=t.disableAlpha,o=yn({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),u=function(h,p){h.hex?Sl(h.hex)&&n({hex:h.hex,source:"hex"},p):h.r||h.g||h.b?n({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,a:r.a,source:"rgb"},p):h.a&&(h.a<0?h.a=0:h.a>100&&(h.a=100),h.a/=100,n({h:i.h,s:i.s,l:i.l,a:h.a,source:"rgb"},p))};return je.createElement("div",{style:o.fields,className:"flexbox-fix"},je.createElement("div",{style:o.double},je.createElement(Mn,{style:{input:o.input,label:o.label},label:"hex",value:s.replace("#",""),onChange:u})),je.createElement("div",{style:o.single},je.createElement(Mn,{style:{input:o.input,label:o.label},label:"r",value:r.r,onChange:u,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:o.single},je.createElement(Mn,{style:{input:o.input,label:o.label},label:"g",value:r.g,onChange:u,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:o.single},je.createElement(Mn,{style:{input:o.input,label:o.label},label:"b",value:r.b,onChange:u,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:o.alpha},je.createElement(Mn,{style:{input:o.input,label:o.label},label:"a",value:Math.round(r.a*100),onChange:u,dragLabel:"true",dragMax:"100"})))},doe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IO=function(t){var n=t.colors,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=yn({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),o=function(d,h){i({hex:d,source:"hex"},h)};return je.createElement("div",{style:a.colors,className:"flexbox-fix"},n.map(function(u){var d=typeof u=="string"?{color:u}:u,h=""+d.color+(d.title||"");return je.createElement("div",{key:h,style:a.swatchWrap},je.createElement(wc,doe({},d,{style:a.swatch,onClick:o,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+d.color}})))}))};IO.propTypes={colors:Dt.arrayOf(Dt.oneOfType([Dt.string,Dt.shape({color:Dt.string,title:Dt.string})])).isRequired};var hoe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s_=function(t){var n=t.width,r=t.rgb,i=t.hex,s=t.hsv,a=t.hsl,o=t.onChange,u=t.onSwatchHover,d=t.disableAlpha,h=t.presetColors,p=t.renderers,m=t.styles,g=m===void 0?{}:m,v=t.className,w=v===void 0?"":v,S=yn(ys({default:hoe({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},g),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},g),{disableAlpha:d});return je.createElement("div",{style:S.picker,className:"sketch-picker "+w},je.createElement("div",{style:S.saturation},je.createElement(f0,{style:S.Saturation,hsl:a,hsv:s,onChange:o})),je.createElement("div",{style:S.controls,className:"flexbox-fix"},je.createElement("div",{style:S.sliders},je.createElement("div",{style:S.hue},je.createElement(_d,{style:S.Hue,hsl:a,onChange:o})),je.createElement("div",{style:S.alpha},je.createElement(Fw,{style:S.Alpha,rgb:r,hsl:a,renderers:p,onChange:o}))),je.createElement("div",{style:S.color},je.createElement(wd,null),je.createElement("div",{style:S.activeColor}))),je.createElement(uoe,{rgb:r,hsl:a,hex:i,onChange:o,disableAlpha:d}),je.createElement(IO,{colors:h,onClick:o,onSwatchHover:u}))};s_.propTypes={disableAlpha:Dt.bool,width:Dt.oneOfType([Dt.string,Dt.number]),styles:Dt.object};s_.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};bs(s_);var Ud=function(t){var n=t.hsl,r=t.offset,i=t.onClick,s=i===void 0?function(){}:i,a=t.active,o=t.first,u=t.last,d=yn({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:u}),h=function(m){return s({h:n.h,s:.5,l:r,source:"hsl"},m)};return je.createElement("div",{style:d.swatch,onClick:h})},foe=function(t){var n=t.onClick,r=t.hsl,i=yn({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return je.createElement("div",{style:i.swatches},je.createElement("div",{style:i.swatch},je.createElement(Ud,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:n,first:!0})),je.createElement("div",{style:i.swatch},je.createElement(Ud,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:n})),je.createElement("div",{style:i.swatch},je.createElement(Ud,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:n})),je.createElement("div",{style:i.swatch},je.createElement(Ud,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:n})),je.createElement("div",{style:i.swatch},je.createElement(Ud,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:n,last:!0})),je.createElement("div",{style:i.clear}))},poe=function(){var t=yn({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return je.createElement("div",{style:t.picker})},a_=function(t){var n=t.hsl,r=t.onChange,i=t.pointer,s=t.styles,a=s===void 0?{}:s,o=t.className,u=o===void 0?"":o,d=yn(ys({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return je.createElement("div",{style:d.wrap||{},className:"slider-picker "+u},je.createElement("div",{style:d.hue},je.createElement(_d,{style:d.Hue,hsl:n,pointer:i,onChange:r})),je.createElement("div",{style:d.swatches},je.createElement(foe,{hsl:n,onClick:r})))};a_.propTypes={styles:Dt.object};a_.defaultProps={pointer:poe,styles:{}};bs(a_);var $O={};Object.defineProperty($O,"__esModule",{value:!0});var dE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},moe=fe,hE=goe(moe);function goe(e){return e&&e.__esModule?e:{default:e}}function yoe(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Pp=24,boe=$O.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Pp:r,s=e.height,a=s===void 0?Pp:s,o=e.style,u=o===void 0?{}:o,d=yoe(e,["fill","width","height","style"]);return hE.default.createElement("svg",dE({viewBox:"0 0 "+Pp+" "+Pp,style:dE({fill:n,width:i,height:a},u)},d),hE.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},voe=function(t){var n=t.color,r=t.onClick,i=r===void 0?function(){}:r,s=t.onSwatchHover,a=t.first,o=t.last,u=t.active,d=yn({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:Yw(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:u,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return je.createElement(wc,{color:n,style:d.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},je.createElement("div",{style:d.check},je.createElement(boe,null)))},xoe=function(t){var n=t.onClick,r=t.onSwatchHover,i=t.group,s=t.active,a=yn({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return je.createElement("div",{style:a.group},_c(i,function(o,u){return je.createElement(voe,{key:o,color:o,active:o.toLowerCase()===s,first:u===0,last:u===i.length-1,onClick:n,onSwatchHover:r})}))},o_=function(t){var n=t.width,r=t.height,i=t.onChange,s=t.onSwatchHover,a=t.colors,o=t.hex,u=t.styles,d=u===void 0?{}:u,h=t.className,p=h===void 0?"":h,m=yn(ys({default:{picker:{width:n,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},d)),g=function(w,S){return i({hex:w,source:"hex"},S)};return je.createElement("div",{style:m.picker,className:"swatches-picker "+p},je.createElement(Lf,null,je.createElement("div",{style:m.overflow},je.createElement("div",{style:m.body},_c(a,function(v){return je.createElement(xoe,{key:v.toString(),group:v,active:o,onClick:g,onSwatchHover:s})}),je.createElement("div",{style:m.clear})))))};o_.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),height:Dt.oneOfType([Dt.string,Dt.number]),colors:Dt.arrayOf(Dt.arrayOf(Dt.string)),styles:Dt.object};o_.defaultProps={width:320,height:240,colors:[[qc[900],qc[700],qc[500],qc[300],qc[100]],[Yc[900],Yc[700],Yc[500],Yc[300],Yc[100]],[Xc[900],Xc[700],Xc[500],Xc[300],Xc[100]],[Kc[900],Kc[700],Kc[500],Kc[300],Kc[100]],[Zc[900],Zc[700],Zc[500],Zc[300],Zc[100]],[Qc[900],Qc[700],Qc[500],Qc[300],Qc[100]],[Jc[900],Jc[700],Jc[500],Jc[300],Jc[100]],[eu[900],eu[700],eu[500],eu[300],eu[100]],[tu[900],tu[700],tu[500],tu[300],tu[100]],["#194D33",oh[700],oh[500],oh[300],oh[100]],[nu[900],nu[700],nu[500],nu[300],nu[100]],[ru[900],ru[700],ru[500],ru[300],ru[100]],[iu[900],iu[700],iu[500],iu[300],iu[100]],[su[900],su[700],su[500],su[300],su[100]],[au[900],au[700],au[500],au[300],au[100]],[ou[900],ou[700],ou[500],ou[300],ou[100]],[lu[900],lu[700],lu[500],lu[300],lu[100]],[cu[900],cu[700],cu[500],cu[300],cu[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};bs(o_);var l_=function(t){var n=t.onChange,r=t.onSwatchHover,i=t.hex,s=t.colors,a=t.width,o=t.triangle,u=t.styles,d=u===void 0?{}:u,h=t.className,p=h===void 0?"":h,m=yn(ys({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},d),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right"}),g=function(w,S){Sl(w)&&n({hex:w,source:"hex"},S)};return je.createElement("div",{style:m.card,className:"twitter-picker "+p},je.createElement("div",{style:m.triangleShadow}),je.createElement("div",{style:m.triangle}),je.createElement("div",{style:m.body},_c(s,function(v,w){return je.createElement(wc,{key:w,color:v,hex:v,style:m.swatch,onClick:g,onHover:r,focusStyle:{boxShadow:"0 0 4px "+v}})}),je.createElement("div",{style:m.hash},"#"),je.createElement(Mn,{label:null,style:{input:m.input},value:i.replace("#",""),onChange:g}),je.createElement("div",{style:m.clear})))};l_.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),triangle:Dt.oneOf(["hide","top-left","top-right"]),colors:Dt.arrayOf(Dt.string),styles:Dt.object};l_.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};bs(l_);var c_=function(t){var n=yn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return je.createElement("div",{style:n.picker})};c_.propTypes={hsl:Dt.shape({h:Dt.number,s:Dt.number,l:Dt.number,a:Dt.number})};c_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var u_=function(t){var n=yn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return je.createElement("div",{style:n.picker})};u_.propTypes={hsl:Dt.shape({h:Dt.number,s:Dt.number,l:Dt.number,a:Dt.number})};u_.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var woe=function(t){var n=t.onChange,r=t.rgb,i=t.hsl,s=t.hex,a=t.hsv,o=function(g,v){if(g.hex)Sl(g.hex)&&n({hex:g.hex,source:"hex"},v);else if(g.rgb){var w=g.rgb.split(",");Fy(g.rgb,"rgb")&&n({r:w[0],g:w[1],b:w[2],a:1,source:"rgb"},v)}else if(g.hsv){var S=g.hsv.split(",");Fy(g.hsv,"hsv")&&(S[2]=S[2].replace("%",""),S[1]=S[1].replace("%",""),S[0]=S[0].replace("",""),S[1]==1?S[1]=.01:S[2]==1&&(S[2]=.01),n({h:Number(S[0]),s:Number(S[1]),v:Number(S[2]),source:"hsv"},v))}else if(g.hsl){var x=g.hsl.split(",");Fy(g.hsl,"hsl")&&(x[2]=x[2].replace("%",""),x[1]=x[1].replace("%",""),x[0]=x[0].replace("",""),p[1]==1?p[1]=.01:p[2]==1&&(p[2]=.01),n({h:Number(x[0]),s:Number(x[1]),v:Number(x[2]),source:"hsl"},v))}},u=yn({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),d=r.r+", "+r.g+", "+r.b,h=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",p=Math.round(a.h)+", "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return je.createElement("div",{style:u.wrap,className:"flexbox-fix"},je.createElement("div",{style:u.fields},je.createElement("div",{style:u.double},je.createElement(Mn,{style:{input:u.input,label:u.label},label:"hex",value:s,onChange:o})),je.createElement("div",{style:u.column},je.createElement("div",{style:u.single},je.createElement(Mn,{style:{input:u.input2,label:u.label2},label:"rgb",value:d,onChange:o})),je.createElement("div",{style:u.single},je.createElement(Mn,{style:{input:u.input2,label:u.label2},label:"hsv",value:p,onChange:o})),je.createElement("div",{style:u.single},je.createElement(Mn,{style:{input:u.input2,label:u.label2},label:"hsl",value:h,onChange:o})))))},d_=function(t){var n=t.width,r=t.onChange,i=t.rgb,s=t.hsl,a=t.hsv,o=t.hex,u=t.header,d=t.styles,h=d===void 0?{}:d,p=t.className,m=p===void 0?"":p,g=yn(ys({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},h));return je.createElement("div",{style:g.picker,className:"google-picker "+m},je.createElement("div",{style:g.head},u),je.createElement("div",{style:g.swatch}),je.createElement("div",{style:g.saturation},je.createElement(f0,{hsl:s,hsv:a,pointer:c_,onChange:r})),je.createElement("div",{style:g.body},je.createElement("div",{style:g.controls,className:"flexbox-fix"},je.createElement("div",{style:g.hue},je.createElement(_d,{style:g.Hue,hsl:s,radius:"4px",pointer:u_,onChange:r}))),je.createElement(woe,{rgb:i,hsl:s,hex:o,hsv:a,onChange:r})))};d_.propTypes={width:Dt.oneOfType([Dt.string,Dt.number]),styles:Dt.object,header:Dt.string};d_.defaultProps={width:652,styles:{},header:"Color picker"};bs(d_);function _oe({color:e,mode:t="blend",onColorChange:n,onClose:r}){var h;const[i,s]=fe.useState((e==null?void 0:e.hex)||"#000000");fe.useEffect(()=>{e!=null&&e.hex&&s(e.hex)},[e==null?void 0:e.hex]),fe.useEffect(()=>{const p=m=>{m.key==="Escape"&&(m.stopImmediatePropagation(),m.preventDefault(),r())};return window.addEventListener("keydown",p,!0),()=>window.removeEventListener("keydown",p,!0)},[r]);const a=()=>{e!=null&&e.originalHex&&(s(e.originalHex),n&&n(e.originalHex))},o=p=>{const m=p.hex;s(m),n&&n(m)},u=()=>{s("transparent"),n&&n("transparent")},d=i==="transparent"||i==="none";return e?l.jsxs("div",{className:"color-editor-panel",children:[l.jsxs("div",{className:"editor-header",children:[l.jsx("h3",{children:"Edit Colour"}),l.jsx("button",{onClick:r,className:"close-button",children:""})]}),l.jsxs("div",{className:"editor-content",children:[l.jsxs("div",{className:"color-info-section",children:[l.jsx("div",{className:"color-display",children:l.jsxs("div",{className:"swatch-pair",children:[l.jsxs("div",{className:"swatch-group",children:[l.jsx("div",{className:"swatch original",style:{backgroundColor:e.originalHex||e.hex},title:"Original colour"}),l.jsx("span",{className:"swatch-label",children:"Original"})]}),l.jsx("span",{className:"arrow",children:""}),l.jsxs("div",{className:"swatch-group",children:[l.jsx("div",{className:`swatch current ${d?"transparent-preview":""}`,style:d?{}:{backgroundColor:i},title:"Current colour"}),l.jsx("span",{className:"swatch-label",children:d?"Transparent":"Current"})]})]})}),l.jsxs("div",{className:"color-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Hex:"}),l.jsx("span",{className:"value",children:i})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"label",children:"Coverage:"}),l.jsxs("span",{className:"value",children:[((h=e.areaPct)==null?void 0:h.toFixed(1))||0,"%"]})]})]})]}),l.jsxs("div",{className:"transparent-section",children:[l.jsx("h4",{children:"Remove Fill"}),l.jsxs("button",{className:`transparent-option ${d?"selected":""}`,onClick:u,title:"Make this area transparent (remove fill)",children:[l.jsx("div",{className:"transparent-swatch"}),l.jsx("span",{children:"Make Transparent"})]})]}),l.jsxs("div",{className:"tpv-palette-section",children:[l.jsx("h4",{children:"Standard TPV Colours"}),l.jsx("p",{className:"palette-description",children:"Select a pure TPV colour (no blending required)"}),l.jsx("div",{className:"tpv-color-grid",children:fi.map(p=>l.jsxs("div",{className:`tpv-color-item ${i.toLowerCase()===p.hex.toLowerCase()?"selected":""}`,onClick:()=>o(p),title:`${p.code} - ${p.name}`,children:[l.jsx("div",{className:"tpv-color-swatch",style:{backgroundColor:p.hex}}),l.jsx("span",{className:"tpv-color-code",children:p.code})]},p.code))})]}),Gl.BLEND_MODE_ENABLED,l.jsxs("div",{className:"solid-mode-info",children:[l.jsx("h4",{children:"Solid Mode Editing"}),l.jsx("p",{className:"info-description",children:"Select from the standard TPV colours above. Only solid TPV colours are available."}),l.jsx("button",{onClick:a,className:"reset-button",children:"Reset to Original Colour"})]})]}),l.jsx("style",{jsx:!0,children:`
        .color-editor-panel {
          position: fixed;
          top: 0;
          right: 0;
          width: 400px;
          height: 100vh;
          background: white;
          box-shadow: -4px 0 12px rgba(0, 0, 0, 0.15);
          z-index: 1000;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .editor-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1.5rem;
          border-bottom: 2px solid #1a365d;
          background: #f9f9f9;
        }

        .editor-header h3 {
          font-family: 'Overpass', sans-serif;
          margin: 0;
          color: #1e4a7a;
          font-size: 1.5rem;
          font-weight: 600;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 2rem;
          color: #666;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          line-height: 1;
          transition: color 0.2s;
        }

        .close-button:hover {
          color: #333;
        }

        .editor-content {
          flex: 1;
          overflow-y: auto;
          padding: 1.5rem;
        }

        /* Color Info Section */
        .color-info-section {
          margin-bottom: 2rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .color-display {
          margin-bottom: 1rem;
        }

        .swatch-pair {
          display: flex;
          align-items: center;
          gap: 1rem;
          justify-content: center;
        }

        .swatch-group {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
        }

        .swatch {
          width: 60px;
          height: 60px;
          border-radius: 8px;
          border: 3px solid #ddd;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .swatch.original {
          border-color: #999;
        }

        .swatch.current {
          border-color: #ff6b35;
        }

        .swatch.transparent-preview {
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 10px 10px;
          background-position: 0 0, 5px 5px;
          background-color: white;
        }

        .swatch-label {
          font-size: 0.85rem;
          color: #666;
          font-weight: 500;
        }

        .arrow {
          font-size: 1.5rem;
          color: #666;
          font-weight: bold;
        }

        .color-details {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .detail-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-size: 0.95rem;
        }

        .detail-row .label {
          font-weight: 600;
          color: #666;
        }

        .detail-row .value {
          font-family: 'Courier New', monospace;
          color: #333;
        }

        /* Transparent Section */
        .transparent-section {
          margin-bottom: 1.5rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .transparent-section h4 {
          margin: 0 0 0.75rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .transparent-option {
          display: flex;
          align-items: center;
          gap: 12px;
          width: 100%;
          padding: 12px 16px;
          background: white;
          border: 2px solid #d1d5db;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s;
          font-size: 0.95rem;
          font-weight: 500;
          color: #374151;
        }

        .transparent-option:hover {
          border-color: #6b7280;
          background: #fafafa;
        }

        .transparent-option.selected {
          border-color: #ff6b35;
          background: #fff5f0;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .transparent-swatch {
          width: 32px;
          height: 32px;
          border-radius: 4px;
          border: 1px solid #999;
          background:
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%),
            linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%);
          background-size: 8px 8px;
          background-position: 0 0, 4px 4px;
          background-color: white;
        }

        /* TPV Palette Section */
        .tpv-palette-section {
          margin-bottom: 2rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .tpv-palette-section h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .palette-description {
          margin: 0 0 1rem 0;
          font-size: 0.85rem;
          color: #666;
        }

        .tpv-color-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 0.75rem;
        }

        .tpv-color-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.4rem;
          padding: 0.5rem;
          border: 2px solid transparent;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s;
          background: white;
        }

        .tpv-color-item:hover {
          border-color: #ff6b35;
          transform: translateY(-2px);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tpv-color-item.selected {
          border-color: #ff6b35;
          background: #fff5f0;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .tpv-color-swatch {
          width: 100%;
          height: 50px;
          border-radius: 4px;
          border: 1px solid rgba(0, 0, 0, 0.1);
          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tpv-color-code {
          font-size: 0.75rem;
          font-weight: 600;
          color: #1a365d;
          font-family: 'Courier New', monospace;
        }

        /* Picker Section */
        .picker-section {
          margin-bottom: 1rem;
          padding: 1rem;
          background: #f9f9f9;
          border-radius: 6px;
        }

        .picker-section h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .picker-description {
          margin: 0 0 1rem 0;
          font-size: 0.85rem;
          color: #666;
        }

        .picker-section :global(.chrome-picker) {
          box-shadow: none !important;
          width: 100% !important;
        }

        .reset-button {
          width: 100%;
          padding: 0.75rem;
          margin-top: 1rem;
          background: #e0e0e0;
          color: #333;
          border: none;
          border-radius: 4px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .reset-button:hover {
          background: #d0d0d0;
        }

        /* Solid Mode Info */
        .solid-mode-info {
          margin-bottom: 1rem;
          padding: 1rem;
          background: #fff5f0;
          border: 2px solid #ff6b35;
          border-radius: 6px;
        }

        .solid-mode-info h4 {
          margin: 0 0 0.5rem 0;
          color: #1a365d;
          font-size: 1rem;
          font-weight: 600;
        }

        .info-description {
          margin: 0;
          font-size: 0.85rem;
          color: #666;
          line-height: 1.5;
        }

        /* Mobile Responsive - Fullscreen Modal */
        @media (max-width: 768px) {
          .color-editor-panel {
            width: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 0;
          }

          .editor-header {
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 10;
          }

          .editor-header h3 {
            font-size: 1.25rem;
          }

          /* Larger close button for touch */
          .close-button {
            width: 44px;
            height: 44px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .editor-content {
            padding: 1rem;
          }

          /* Color swatches - larger for touch */
          .swatch {
            width: 50px;
            height: 50px;
          }

          .color-info-section {
            padding: 0.75rem;
            margin-bottom: 1.5rem;
          }

          /* TPV color grid - better touch targets */
          .tpv-color-grid {
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
          }

          .tpv-color-item {
            padding: 0.4rem;
            min-height: 44px;
          }

          .tpv-color-swatch {
            height: 36px;
          }

          .tpv-color-code {
            font-size: 0.65rem;
          }

          .tpv-palette-section {
            padding: 0.75rem;
            margin-bottom: 1.5rem;
          }

          .tpv-palette-section h4 {
            font-size: 0.9rem;
          }

          .palette-description {
            font-size: 0.8rem;
          }

          /* Picker section */
          .picker-section {
            padding: 0.75rem;
          }

          .picker-section h4 {
            font-size: 0.9rem;
          }

          .picker-description {
            font-size: 0.8rem;
          }

          /* Larger reset button for touch */
          .reset-button {
            min-height: 44px;
            font-size: 0.9rem;
          }

          .solid-mode-info {
            padding: 0.75rem;
          }

          .solid-mode-info h4 {
            font-size: 0.9rem;
          }

          .info-description {
            font-size: 0.8rem;
          }
        }

        /* Extra small screens */
        @media (max-width: 400px) {
          .tpv-color-grid {
            grid-template-columns: repeat(3, 1fr);
          }

          .tpv-color-swatch {
            height: 44px;
          }

          .swatch {
            width: 44px;
            height: 44px;
          }

          .swatch-pair {
            gap: 0.5rem;
          }

          .arrow {
            font-size: 1.2rem;
          }
        }
      `})]}):null}const koe=fi;new Map(koe.map((e,t)=>[e.code,t]));function _x(e){const{inputMode:t,prompt:n,selectedFile:r,lengthMM:i,widthMM:s,result:a,viewMode:o,blendRecipes:u,solidRecipes:d,colorMapping:h,solidColorMapping:p,solidEditedColors:m,blendEditedColors:g,blendSvgUrl:v,solidSvgUrl:w,arMapping:S,jobId:x,inSituData:k,regionOverrides:j,originalTaggedSvg:O,originalUnflattenedSvg:I,originalRecipesState:E}=e,U=D=>D?D instanceof Map?Object.fromEntries(D):D:null;return{input_mode:t,prompt:n||null,uploaded_file_url:(r==null?void 0:r.url)||null,dimensions:{widthMM:s,lengthMM:i},original_svg_url:(a==null?void 0:a.svg_url)||null,original_png_url:(a==null?void 0:a.png_url)||null,thumbnail_url:(a==null?void 0:a.thumb_url)||null,blend_recipes:u||null,solid_recipes:d||null,color_mapping:U(h),solid_color_mapping:U(p),solid_color_edits:U(m),blend_color_edits:U(g),final_blend_svg_url:v||null,final_solid_svg_url:w||null,preferred_view_mode:o||"solid",aspect_ratio_mapping:S||null,job_id:x||null,in_situ:k?{room_photo_url:k.room_photo_url||null,mask_url:k.mask_url||null,floor_dimensions_m:k.floor_dimensions_m||null,preview_url:k.preview_url||null,blend_opacity:k.blend_opacity||20,perspective_corners:k.perspective_corners||null}:null,region_overrides:U(j),original_tagged_svg:O||null,original_unflattened_svg:I||null,original_recipes_state:E||null}}function kx(e){var o,u;const t=d=>d?d instanceof Map?d:new Map(Object.entries(d)):new Map,n=d=>{var h;return e[d]??((h=e.design_data)==null?void 0:h[d])},r=n("region_overrides"),i=n("original_tagged_svg"),s=n("original_unflattened_svg"),a=n("original_recipes_state");return{inputMode:e.input_mode||n("input_mode"),prompt:n("prompt")||"",selectedFile:n("uploaded_file_url")?{url:n("uploaded_file_url"),name:n("uploaded_file_url").split("/").pop()}:null,lengthMM:((o=n("dimensions"))==null?void 0:o.lengthMM)||0,widthMM:((u=n("dimensions"))==null?void 0:u.widthMM)||0,result:{svg_url:n("original_svg_url"),png_url:n("original_png_url"),thumbnail_url:n("thumbnail_url")},blendRecipes:n("blend_recipes")||null,solidRecipes:n("solid_recipes")||null,colorMapping:t(n("color_mapping")),solidColorMapping:t(n("solid_color_mapping")),solidEditedColors:t(n("solid_color_edits")),blendEditedColors:t(n("blend_color_edits")),blendSvgUrl:null,solidSvgUrl:null,viewMode:"solid",arMapping:n("aspect_ratio_mapping"),jobId:n("job_id"),inSituData:n("in_situ")||null,regionOverrides:t(r),originalTaggedSvg:i||null,originalUnflattenedSvg:s||null,originalRecipesState:a||null,generating:!1,generatingBlends:!1,showFinalRecipes:!!e.blend_recipes,showSolidSummary:!!e.solid_recipes,colorEditorOpen:!1,selectedColor:null}}function Soe(e){var n;const t=[];return e.inputMode||t.push("Input mode is required"),(!(e.widthMM>0)||!(e.lengthMM>0))&&t.push("Surface dimensions are required"),(n=e.result)!=null&&n.svg_url||t.push("No design to save - generate a design first"),{valid:t.length===0,errors:t}}function Coe({currentState:e,existingDesignId:t=null,initialName:n="",onClose:r,onSaved:i}){const[s,a]=fe.useState(n),[o,u]=fe.useState(""),[d,h]=fe.useState(""),[p,m]=fe.useState(""),[g,v]=fe.useState(!1),[w,S]=fe.useState([]),[x,k]=fe.useState(!1),[j,O]=fe.useState(""),[I,E]=fe.useState("#1a365d"),[U,D]=fe.useState(!1),[R,W]=fe.useState(!1),[ce,te]=fe.useState(!1),[me,H]=fe.useState(null);fe.useEffect(()=>{ge()},[]);const ge=async()=>{try{const{projects:xe}=await yw();S(xe)}catch(xe){console.error("Failed to load projects:",xe),H("Failed to load projects")}},Ee=async()=>{if(!j.trim()){H("Project name is required");return}te(!0),H(null);try{const{project:xe}=await dN({name:j.trim(),color:I});S([xe,...w]),h(xe.id),k(!1),O(""),E("#1a365d")}catch(xe){console.error("Failed to create project:",xe),H(xe.message)}finally{te(!1)}},ke=async(xe=!1)=>{if(!s.trim()){H("Design name is required");return}const Re=Soe(e);if(!Re.valid){H(Re.errors.join(", "));return}xe?W(!0):D(!0),H(null);try{const _e=_x(e);console.log("[SAVE-MODAL] Serialized design data:",_e),console.log("[SAVE-MODAL] SVG URL from serialized data:",_e.original_svg_url);const Pe={name:s.trim(),description:o.trim()||null,project_id:d||null,tags:p.split(",").map(tt=>tt.trim()).filter(tt=>tt),is_public:g,design_data:_e};console.log("[SAVE-MODAL] Full save payload:",Pe),t&&!xe&&(Pe.id=t);const it=await eg(Pe);i&&i(it,s.trim()),r()}catch(_e){console.error("Failed to save design:",_e),H(_e.message)}finally{D(!1),W(!1)}},ze=["#1a365d","#ff6b35","#4a90e2","#50c878","#9b59b6","#e74c3c"];return l.jsx("div",{className:"modal-overlay",onClick:r,children:l.jsxs("div",{className:"modal-content save-design-modal",onClick:xe=>xe.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:t?"Update Design":"Save Design"}),l.jsx("button",{onClick:r,className:"close-button",children:""})]}),l.jsxs("div",{className:"modal-body",children:[me&&l.jsx("div",{className:"error-message",children:me}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-name",children:"Design Name *"}),l.jsx("input",{id:"design-name",type:"text",value:s,onChange:xe=>a(xe.target.value),placeholder:"e.g., Playground Design A",autoFocus:!0,disabled:U||R})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-description",children:"Description"}),l.jsx("textarea",{id:"design-description",value:o,onChange:xe=>u(xe.target.value),placeholder:"Optional notes about this design...",rows:3,disabled:U||R})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-project",children:"Project"}),x?l.jsxs("div",{className:"new-project-form",children:[l.jsxs("div",{className:"input-row",children:[l.jsx("input",{type:"text",value:j,onChange:xe=>O(xe.target.value),placeholder:"Project name...",disabled:ce}),l.jsx("div",{className:"color-picker-inline",children:ze.map(xe=>l.jsx("button",{type:"button",className:`color-swatch ${I===xe?"active":""}`,style:{backgroundColor:xe},onClick:()=>E(xe),disabled:ce},xe))})]}),l.jsxs("div",{className:"button-row",children:[l.jsx("button",{type:"button",onClick:Ee,className:"btn-primary btn-small",disabled:ce,children:ce?"Creating...":"Create"}),l.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn-secondary btn-small",disabled:ce,children:"Cancel"})]})]}):l.jsxs("div",{className:"project-selector",children:[l.jsxs("select",{id:"design-project",value:d,onChange:xe=>h(xe.target.value),disabled:U||R,children:[l.jsx("option",{value:"",children:"No Project"}),w.map(xe=>l.jsxs("option",{value:xe.id,children:[xe.name," (",xe.design_count," designs)"]},xe.id))]}),l.jsx("button",{type:"button",onClick:()=>k(!0),className:"btn-secondary btn-small",disabled:U||R,children:"+ New Project"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-tags",children:"Tags"}),l.jsx("input",{id:"design-tags",type:"text",value:p,onChange:xe=>m(xe.target.value),placeholder:"e.g., playground, vibrant, geometric (comma-separated)",disabled:U||R}),l.jsx("small",{className:"help-text",children:"Separate tags with commas"})]}),l.jsx("div",{className:"form-group checkbox-group",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:g,onChange:xe=>v(xe.target.checked),disabled:U||R}),l.jsx("span",{children:"Make this design public (shareable link)"})]})})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{onClick:r,className:"btn-secondary",disabled:U||R,children:"Cancel"}),t&&l.jsx("button",{onClick:()=>ke(!0),className:"btn-secondary",disabled:U||R,children:R?"Saving...":"Save as New"}),l.jsx("button",{onClick:()=>ke(!1),className:"btn-primary",disabled:U||R,children:U?"Saving...":t?"Update":"Save Design"})]})]})})}const Hd=()=>{},Eoe=10*1024*1024,Toe=["image/jpeg","image/png","image/jpg"];function joe({onPhotoUploaded:e,disabled:t=!1}){const[n,r]=fe.useState(!1),[i,s]=fe.useState(!1),[a,o]=fe.useState(null),[u,d]=fe.useState(null),h=fe.useRef(null),p=k=>{k.preventDefault(),t||r(!0)},m=k=>{k.preventDefault(),r(!1)},g=async k=>{if(k.preventDefault(),r(!1),t)return;const j=k.dataTransfer.files;j.length>0&&await S(j[0])},v=()=>{!t&&h.current&&h.current.click()},w=async k=>{k.target.files.length>0&&await S(k.target.files[0])},S=async k=>{if(o(null),!Toe.includes(k.type)){o("Please upload a JPG or PNG image");return}if(k.size>Eoe){o("Image must be under 10MB");return}const j=URL.createObjectURL(k);d(j);const O=await new Promise((I,E)=>{const U=new Image;U.onload=()=>{Hd("[IN-SITU-UPLOADER] Local image loaded, dimensions:",U.naturalWidth,"x",U.naturalHeight),I({width:U.naturalWidth,height:U.naturalHeight})},U.onerror=D=>{console.error("[IN-SITU-UPLOADER] Failed to load local image:",D),E(new Error("Failed to read image dimensions"))},U.src=j});s(!0);try{const E=`in-situ-photos/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${k.type.split("/")[1]}`}`,{data:U,error:D}=await ti.storage.from("tpv-studio-uploads").upload(E,k,{cacheControl:"3600",upsert:!1});if(D)throw D;const{data:{publicUrl:R}}=ti.storage.from("tpv-studio-uploads").getPublicUrl(E);Hd("[IN-SITU-UPLOADER] Photo uploaded:",R),Hd("[IN-SITU-UPLOADER] Using dimensions from local file:",O),Hd("[IN-SITU-UPLOADER] Passing local blob URL for fast preview"),Hd("[IN-SITU-UPLOADER] Calling onPhotoUploaded callback..."),e({url:j,supabaseUrl:R,width:O.width,height:O.height,filename:k.name})}catch(I){console.error("[IN-SITU-UPLOADER] Upload failed:",I),o(I.message||"Upload failed"),URL.revokeObjectURL(j),d(null)}finally{s(!1)}},x=()=>{u&&URL.revokeObjectURL(u),d(null),o(null)};return l.jsxs("div",{className:"in-situ-uploader",children:[u?l.jsxs("div",{className:"preview-container",children:[l.jsx("img",{src:u,alt:"Site preview",className:"preview-image"}),i&&l.jsxs("div",{className:"upload-overlay",children:[l.jsx("div",{className:"upload-spinner"}),l.jsx("p",{children:"Uploading..."})]}),!i&&l.jsx("button",{className:"clear-button",onClick:x,title:"Remove photo",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}):l.jsxs("div",{className:`upload-zone ${n?"dragging":""} ${t?"disabled":""}`,onDragOver:p,onDragLeave:m,onDrop:g,onClick:v,children:[l.jsx("input",{ref:h,type:"file",accept:"image/jpeg,image/png",onChange:w,style:{display:"none"},disabled:t}),l.jsx("div",{className:"upload-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),l.jsxs("div",{className:"upload-text",children:[l.jsx("p",{className:"primary",children:n?"Drop photo here":"Upload site photo"}),l.jsx("p",{className:"secondary",children:"Drag & drop or click to browse"}),l.jsx("p",{className:"hint",children:"JPG or PNG, max 10MB"})]})]}),a&&l.jsx("div",{className:"error-message",children:a}),l.jsx("style",{children:`
        .in-situ-uploader {
          width: 100%;
        }

        .upload-zone {
          border: 2px dashed #d1d5db;
          border-radius: 8px;
          padding: 2rem;
          text-align: center;
          cursor: pointer;
          transition: all 0.2s;
          background: #f9fafb;
        }

        .upload-zone:hover {
          border-color: #ff6b35;
          background: #fff7f5;
        }

        .upload-zone.dragging {
          border-color: #ff6b35;
          background: #fff7f5;
          border-style: solid;
        }

        .upload-zone.disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .upload-zone.disabled:hover {
          border-color: #d1d5db;
          background: #f9fafb;
        }

        .upload-icon {
          width: 48px;
          height: 48px;
          margin: 0 auto 1rem;
          color: #9ca3af;
        }

        .upload-zone:hover .upload-icon {
          color: #ff6b35;
        }

        .upload-text .primary {
          font-size: 1rem;
          font-weight: 600;
          color: #374151;
          margin: 0 0 0.25rem;
        }

        .upload-text .secondary {
          font-size: 0.875rem;
          color: #6b7280;
          margin: 0 0 0.5rem;
        }

        .upload-text .hint {
          font-size: 0.75rem;
          color: #9ca3af;
          margin: 0;
        }

        .preview-container {
          position: relative;
          border-radius: 8px;
          overflow: hidden;
        }

        .preview-image {
          width: 100%;
          display: block;
          border-radius: 8px;
        }

        .upload-overlay {
          position: absolute;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: white;
        }

        .upload-spinner {
          width: 32px;
          height: 32px;
          border: 3px solid rgba(255, 255, 255, 0.3);
          border-top-color: white;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 0.5rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .clear-button {
          position: absolute;
          top: 0.5rem;
          right: 0.5rem;
          width: 32px;
          height: 32px;
          border-radius: 50%;
          background: rgba(0, 0, 0, 0.6);
          border: none;
          cursor: pointer;
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background 0.2s;
        }

        .clear-button:hover {
          background: rgba(0, 0, 0, 0.8);
        }

        .clear-button svg {
          width: 16px;
          height: 16px;
        }

        .error-message {
          margin-top: 0.75rem;
          padding: 0.5rem 0.75rem;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 4px;
          color: #dc2626;
          font-size: 0.875rem;
        }
      `})]})}function Aoe(e,t){const[n,r,i,s,a,o,u,d]=e,[h,p,m,g,v,w,S,x]=t,k=[[n,r,1,0,0,0,-h*n,-h*r],[0,0,0,n,r,1,-p*n,-p*r],[i,s,1,0,0,0,-m*i,-m*s],[0,0,0,i,s,1,-g*i,-g*s],[a,o,1,0,0,0,-v*a,-v*o],[0,0,0,a,o,1,-w*a,-w*o],[u,d,1,0,0,0,-S*u,-S*d],[0,0,0,u,d,1,-x*u,-x*d]],O=Poe(k,[h,p,m,g,v,w,S,x]);return function(E,U){const D=O[6]*E+O[7]*U+1,R=(O[0]*E+O[1]*U+O[2])/D,W=(O[3]*E+O[4]*U+O[5])/D;return[R,W]}}function Poe(e,t){const n=e.length,r=e.map((s,a)=>[...s,t[a]]);for(let s=0;s<n;s++){let a=s;for(let o=s+1;o<n;o++)Math.abs(r[o][s])>Math.abs(r[a][s])&&(a=o);[r[s],r[a]]=[r[a],r[s]];for(let o=s+1;o<n;o++){const u=r[o][s]/r[s][s];for(let d=s;d<=n;d++)r[o][d]-=u*r[s][d]}}const i=new Array(n);for(let s=n-1;s>=0;s--){i[s]=r[s][n];for(let a=s+1;a<n;a++)i[s]-=r[s][a]*i[a];i[s]/=r[s][s]}return i}function h_(e){return new Promise((t,n)=>{const r=new Image;!e.startsWith("blob:")&&!e.startsWith("data:")?(r.crossOrigin="anonymous",console.log("[LOAD-IMAGE] Loading external URL with CORS:",e.substring(0,50))):console.log("[LOAD-IMAGE] Loading local URL (blob/data):",e.substring(0,50)),r.onload=()=>{console.log("[LOAD-IMAGE] Successfully loaded image:",e.substring(0,50)),t(r)},r.onerror=()=>{console.error("[LOAD-IMAGE] Failed to load image:",e),n(new Error(`Failed to load image: ${e}`))},r.src=e})}async function DO(e,t=1536){console.log("[RASTERIZE-SVG] Starting SVG rasterization:",e.substring(0,50),"maxSize:",t);const n=await h_(e),{naturalWidth:r,naturalHeight:i}=n;console.log("[RASTERIZE-SVG] SVG loaded with dimensions:",r,"x",i);const s=Math.min(1,t/Math.max(r,i)),a=Math.round(r*s),o=Math.round(i*s);console.log("[RASTERIZE-SVG] Scaling to:",a,"x",o,"(scale:",s.toFixed(2),")");const u=document.createElement("canvas");return u.width=a,u.height=o,u.getContext("2d").drawImage(n,0,0,a,o),console.log("[RASTERIZE-SVG] Drew SVG to canvas"),new Promise((h,p)=>{const m=new Image;m.onload=()=>{console.log("[RASTERIZE-SVG] Successfully rasterized SVG to PNG"),h(m)},m.onerror=g=>{console.error("[RASTERIZE-SVG] Failed to convert canvas to image:",g),p(g)},m.src=u.toDataURL("image/png")})}function zO({photoCtx:e,photoImg:t,designImg:n,quad:r,opacity:i,shape:s,lighting:a}){const o=e.canvas;e.clearRect(0,0,o.width,o.height),e.drawImage(t,0,0,o.width,o.height);const u=n.width,d=n.height,h=[0,0,u,0,u,d,0,d],p=[r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y],m=Aoe(h,p),g=10,v=u/g,w=d/g,S=document.createElement("canvas");if(S.width=u,S.height=d,S.getContext("2d").drawImage(n,0,0),e.save(),e.globalAlpha=i,a&&a.enabled){const j=a.strength||.6,O=1+(a.baseBrightness-1)*j,I=1+(a.baseContrast-1)*j;e.filter=`brightness(${O}) contrast(${I})`}const k=s&&s.length>=3?s:r;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(let j=1;j<k.length;j++)e.lineTo(k[j].x,k[j].y);e.closePath(),e.clip();for(let j=0;j<g;j++)for(let O=0;O<g;O++){const I=j*v,E=O*w,U=(j+1)*v,D=(O+1)*w,R=m(I,E),W=m(U,E),ce=m(U,D),te=m(I,D);fE(e,S,I,E,U,E,I,D,R[0],R[1],W[0],W[1],te[0],te[1]),fE(e,S,U,E,U,D,I,D,W[0],W[1],ce[0],ce[1],te[0],te[1])}e.restore()}function fE(e,t,n,r,i,s,a,o,u,d,h,p,m,g){e.save(),e.beginPath(),e.moveTo(u,d),e.lineTo(h,p),e.lineTo(m,g),e.closePath(),e.clip();const v=(n-a)*(s-o)-(i-a)*(r-o);if(Math.abs(v)<.001){e.restore();return}const w=((u-m)*(s-o)-(h-m)*(r-o))/v,S=((d-g)*(s-o)-(p-g)*(r-o))/v,x=((n-a)*(h-m)-(i-a)*(u-m))/v,k=((n-a)*(p-g)-(i-a)*(d-g))/v,j=u-w*n-x*r,O=d-S*n-k*r;e.setTransform(w,S,x,k,j,O),e.drawImage(t,0,0),e.restore()}function Noe(e,t="tpv-in-situ-preview.png"){e.toBlob(n=>{const r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},"image/png")}function Ooe(e,t,n,r){const i=n/r,s=e*.6,a=t*.6;let o,u;i>s/a?(o=s,u=s/i):(u=a,o=a*i);const d=(e-o)/2,h=(t-u)/2;return[{x:d,y:h},{x:d+o,y:h},{x:d+o,y:h+u},{x:d,y:h+u}]}function Roe(e,t,n){let r=!1;for(let i=0,s=n.length-1;i<n.length;s=i++){const a=n[i].x,o=n[i].y,u=n[s].x,d=n[s].y;o>t!=d>t&&e<(u-a)*(t-o)/(d-o)+a&&(r=!r)}return r}function Moe(e,t,n){e/=255,t/=255,n/=255;const r=Math.max(e,t,n),i=Math.min(e,t,n),s=(r+i)/2;if(r===i)return{h:0,s:0,l:s};const a=r-i,o=s>.5?a/(2-r-i):a/(r+i);let u;switch(r){case e:u=((t-n)/a+(t<n?6:0))/6;break;case t:u=((n-e)/a+2)/6;break;case n:u=((e-t)/a+4)/6;break}return{h:u,s:o,l:s}}function Loe(e,t,n=2e3){if(!e||!t||t.length<3)return{avgLightness:.5,avgContrastProxy:.5};const r=Math.floor(Math.min(...t.map(k=>k.x))),i=Math.ceil(Math.max(...t.map(k=>k.x))),s=Math.floor(Math.min(...t.map(k=>k.y))),a=Math.ceil(Math.max(...t.map(k=>k.y))),o=i-r,u=a-s;if(o<=0||u<=0)return{avgLightness:.5,avgContrastProxy:.5};let d;try{d=e.getImageData(r,s,o,u)}catch(k){return console.warn("[LIGHTING] Failed to get image data:",k),{avgLightness:.5,avgContrastProxy:.5}}const h=d.data,p=[];let m=0;const g=n*5;for(;p.length<n&&m<g;){m++;const k=r+Math.random()*o,j=s+Math.random()*u;if(!Roe(k,j,t))continue;const O=Math.floor(k-r),E=(Math.floor(j-s)*o+O)*4;if(E<0||E>=h.length-3)continue;const U=h[E],D=h[E+1],R=h[E+2],{l:W}=Moe(U,D,R);p.push(W)}if(p.length===0)return{avgLightness:.5,avgContrastProxy:.5};const v=p.reduce((k,j)=>k+j,0)/p.length,w=p.reduce((k,j)=>k+Math.pow(j-v,2),0)/p.length,S=Math.sqrt(w),x=Math.min(1,S/.25);return{avgLightness:v,avgContrastProxy:x}}function Ioe(e){let t=1,n=1;const i=e.avgLightness-.5;return t+=i*.6,n+=(e.avgContrastProxy-.5)*.4,t=Math.max(.7,Math.min(1.3,t)),n=Math.max(.8,Math.min(1.25,n)),{brightness:t,contrast:n}}const Nc=()=>{},$oe=100;function Doe({photoUrl:e,svgUrl:t,designSizeMm:n,initialQuad:r,initialShape:i,initialOpacity:s=.8,initialLighting:a,onChange:o}){const[u,d]=fe.useState(null),[h,p]=fe.useState(null),[m,g]=fe.useState(r||null),[v,w]=fe.useState(i||null),[S,x]=fe.useState(Math.max(.3,Math.min(1,s))),[k,j]=fe.useState(a||{enabled:!1,strength:.6,baseBrightness:1,baseContrast:1}),[O,I]=fe.useState(!0),[E,U]=fe.useState(null),[D,R]=fe.useState(1),[W,ce]=fe.useState("corners"),[te,me]=fe.useState(null),[H,ge]=fe.useState(!1),[Ee,ke]=fe.useState(null),[ze,xe]=fe.useState(null),Re=fe.useRef(null),_e=fe.useRef(null),Pe=fe.useRef(null),[it,tt]=fe.useState([]),Ue=20;fe.useEffect(()=>{ut()},[e,t]),fe.useEffect(()=>{u&&h&&m&&de()},[u,h,m,v,S,k,W,te,H,ze]),fe.useEffect(()=>{if(!u||!m||m.length!==4)return;const c=document.createElement("canvas");c.width=u.naturalWidth,c.height=u.naturalHeight;const f=c.getContext("2d");f.drawImage(u,0,0);const b=Loe(f,m),{brightness:_,contrast:C}=Ioe(b);j(A=>({...A,baseBrightness:_,baseContrast:C}))},[u,JSON.stringify(m)]),fe.useEffect(()=>{const c=f=>{if(W==="shape"&&(f.key==="Delete"||f.key==="Backspace")&&ze!==null&&v&&v.length>3){f.preventDefault();const b=v.filter((_,C)=>C!==ze);w(b),xe(null),We(m,S,b)}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[W,ze,v,m,S]);const ut=async()=>{var c;Nc("[FOUR-POINT] Starting to load images - photo:",e==null?void 0:e.substring(0,50),"svg:",t==null?void 0:t.substring(0,50)),I(!0),U(null);try{Nc("[FOUR-POINT] Loading photo and rasterizing SVG...");const[f,b]=await Promise.all([h_(e),DO(t,1536)]);Nc("[FOUR-POINT] Both images loaded successfully - photo:",f.naturalWidth,"x",f.naturalHeight,"design:",b.naturalWidth,"x",b.naturalHeight),d(f),p(b);const _=((c=_e.current)==null?void 0:c.clientWidth)||800,C=500,A=_/f.naturalWidth,T=C/f.naturalHeight,N=Math.min(1,A,T);if(R(N),Nc("[FOUR-POINT] Display scale set to:",N.toFixed(3)),r)Nc("[FOUR-POINT] Using provided initial quad");else{const $=Ooe(f.naturalWidth,f.naturalHeight,n.width_mm,n.length_mm);g($),Nc("[FOUR-POINT] Initialized default quad")}}catch(f){console.error("[FOUR-POINT] Failed to load images:",f),U(f.message)}finally{I(!1)}},de=()=>{const c=Re.current;if(!c||!u||!h||!m)return;c.width=u.naturalWidth,c.height=u.naturalHeight;const f=c.getContext("2d");zO({photoCtx:f,photoImg:u,designImg:h,quad:m,opacity:S,shape:v,lighting:k}),oe(f)},oe=c=>{if(!m)return;c.setTransform(1,0,0,1,0,0);const f=Math.max(8,Math.min(15,u.naturalWidth/80));if(W==="corners"){c.strokeStyle="rgba(255, 255, 255, 0.8)",c.lineWidth=2,c.setLineDash([5,5]),c.beginPath(),c.moveTo(m[0].x,m[0].y),c.lineTo(m[1].x,m[1].y),c.lineTo(m[2].x,m[2].y),c.lineTo(m[3].x,m[3].y),c.closePath(),c.stroke(),c.setLineDash([]);const b=["TL","TR","BR","BL"];m.forEach((_,C)=>{c.beginPath(),c.arc(_.x,_.y,f,0,Math.PI*2),c.fillStyle=te===C?"#ff6b35":"rgba(255, 107, 53, 0.9)",c.fill(),c.strokeStyle="white",c.lineWidth=2,c.stroke(),c.fillStyle="white",c.font="10px sans-serif",c.textAlign="center",c.textBaseline="middle",c.fillText(b[C],_.x,_.y)})}else{const b=v||m;c.strokeStyle="rgba(34, 197, 94, 0.8)",c.lineWidth=2,c.setLineDash([]),c.beginPath(),c.moveTo(b[0].x,b[0].y);for(let _=1;_<b.length;_++)c.lineTo(b[_].x,b[_].y);c.closePath(),c.stroke(),b.forEach((_,C)=>{c.beginPath(),c.arc(_.x,_.y,f*.8,0,Math.PI*2),ze===C?c.fillStyle="#22c55e":te===C?c.fillStyle="#16a34a":c.fillStyle="rgba(34, 197, 94, 0.9)",c.fill(),c.strokeStyle="white",c.lineWidth=2,c.stroke()}),c.strokeStyle="rgba(255, 107, 53, 0.3)",c.lineWidth=1,c.setLineDash([3,3]),c.beginPath(),c.moveTo(m[0].x,m[0].y),c.lineTo(m[1].x,m[1].y),c.lineTo(m[2].x,m[2].y),c.lineTo(m[3].x,m[3].y),c.closePath(),c.stroke(),c.setLineDash([])}},We=fe.useCallback((c,f,b,_)=>{Pe.current&&clearTimeout(Pe.current),Pe.current=setTimeout(()=>{o&&o({quad:c,opacity:f,shape:b,lighting:_||k})},$oe)},[o,k]),Ne=fe.useCallback(()=>{tt(c=>{const f=[...c,{quad:[...m],shape:v?[...v]:null,opacity:S,lighting:{...k}}];return f.length>Ue?f.slice(-Ue):f})},[m,v,S,k]),ft=()=>{if(it.length===0)return;const c=it[it.length-1];tt(f=>f.slice(0,-1)),g(c.quad),w(c.shape),x(c.opacity),j(c.lighting),We(c.quad,c.opacity,c.shape,c.lighting)},Pt=(c,f)=>({x:c/D,y:f/D}),Ct=(c,f,b)=>{if(!b)return-1;const _=25/D;for(let C=0;C<b.length;C++){const A=b[C].x-c,T=b[C].y-f;if(Math.sqrt(A*A+T*T)<_)return C}return-1},q=(c,f,b)=>{if(!b||b.length<3)return!1;let _=!1;for(let C=0,A=b.length-1;C<b.length;A=C++){const T=b[C].x,N=b[C].y,$=b[A].x,F=b[A].y;N>f!=F>f&&c<($-T)*(f-N)/(F-N)+T&&(_=!_)}return _},qe=c=>{if(W!=="shape"||!v||v.length<=3)return;const f=Re.current;if(!f)return;const b=f.getBoundingClientRect(),_=c.clientX-b.left,C=c.clientY-b.top,{x:A,y:T}=Pt(_,C),N=Ct(A,T,v);if(N>=0){Ne();const $=v.filter((Y,Q)=>Q!==N);w($),xe(null);const F=ee(m,$);F!==m?(g(F),We(F,S,$)):We(m,S,$)}},ae=c=>{const f=Re.current;if(!f)return;const b=f.getBoundingClientRect(),_=c.clientX-b.left,C=c.clientY-b.top,{x:A,y:T}=Pt(_,C);if(W==="corners"){const N=Ct(A,T,m);N>=0?(Ne(),me(N),f.setPointerCapture(c.pointerId)):q(A,T,m)&&(Ne(),ge(!0),ke({x:A,y:T}),f.setPointerCapture(c.pointerId))}else{const N=v||m,$=Ct(A,T,N);if($>=0)Ne(),me($),xe($),f.setPointerCapture(c.pointerId);else{Ne();let F=0,Y=1/0;for(let X=0;X<N.length;X++){const B=(X+1)%N.length,Z=ve(A,T,N[X].x,N[X].y,N[B].x,N[B].y);Z<Y&&(Y=Z,F=B)}const Q={x:A,y:T},K=[...N];K.splice(F,0,Q),w(K),xe(F);const V=ee(m,K);V!==m?(g(V),We(V,S,K)):We(m,S,K)}}},M=c=>{if(te===null&&!H)return;const f=Re.current;if(!f)return;const b=f.getBoundingClientRect(),_=c.clientX-b.left,C=c.clientY-b.top,{x:A,y:T}=Pt(_,C),N=Math.max(0,Math.min(u.naturalWidth,A)),$=Math.max(0,Math.min(u.naturalHeight,T));if(W==="corners"){if(H&&Ee){const F=N-Ee.x,Y=$-Ee.y,Q=m.map(V=>({x:Math.max(0,Math.min(u.naturalWidth,V.x+F)),y:Math.max(0,Math.min(u.naturalHeight,V.y+Y))}));let K=v;v&&(K=v.map(V=>({x:Math.max(0,Math.min(u.naturalWidth,V.x+F)),y:Math.max(0,Math.min(u.naturalHeight,V.y+Y))})),w(K)),g(Q),ke({x:N,y:$}),We(Q,S,K)}else if(te!==null){const F=[...m];F[te]={x:N,y:$},g(F),We(F,S,v)}}else{const Y=[...v||m];Y[te]={x:N,y:$},w(Y),We(m,S,Y)}},L=c=>{if(te!==null||H){const f=Re.current;if(f&&f.releasePointerCapture(c.pointerId),W==="shape"&&v&&te!==null){const b=ee(m,v);b!==m&&(g(b),We(b,S,v))}me(null),ge(!1),ke(null)}},ee=(c,f)=>{if(!f||f.length<3||!c)return c;const b=c.reduce((V,X)=>V+X.x,0)/4,_=c.reduce((V,X)=>V+X.y,0)/4,C=f.reduce((V,X)=>V+X.x,0)/f.length,A=f.reduce((V,X)=>V+X.y,0)/f.length;let T=1;for(const V of f){const X=V.x-b,B=V.y-_,Z=Math.sqrt(X*X+B*B);if(Z<1)continue;const G=pe(b,_,X,B,c);if(G>0&&Z>G){const re=Z/G;T=Math.max(T,re)}}let N=1/0;for(const V of f){const X=V.x-b,B=V.y-_,Z=Math.sqrt(X*X+B*B);if(Z<1)continue;const G=pe(b,_,X,B,c);if(G>0){const re=Z/G;N=Math.min(N,re)}}let $=T;if(T<=1&&N<1/0&&($=N),Math.abs($-1)<.01)return c;const F=c.map(V=>({x:b+(V.x-b)*$,y:_+(V.y-_)*$})),Y=C-b,Q=A-_;return F.map(V=>({x:V.x+Y,y:V.y+Q}))},pe=(c,f,b,_,C)=>{let A=1/0;for(let T=0;T<4;T++){const N=C[T],$=C[(T+1)%4],F=$.x-N.x,Y=$.y-N.y,Q=b*Y-_*F;if(Math.abs(Q)<1e-4)continue;const K=((N.x-c)*Y-(N.y-f)*F)/Q,V=((N.x-c)*_-(N.y-f)*b)/Q;K>0&&V>=0&&V<=1&&(A=Math.min(A,K*Math.sqrt(b*b+_*_)))}return A===1/0?0:A},ve=(c,f,b,_,C,A)=>{const T=c-b,N=f-_,$=C-b,F=A-_,Y=T*$+N*F,Q=$*$+F*F;let K=Q!==0?Y/Q:-1,V,X;return K<0?(V=b,X=_):K>1?(V=C,X=A):(V=b+K*$,X=_+K*F),Math.sqrt((c-V)**2+(f-X)**2)},ye=()=>{W==="corners"?(v||w([...m]),ce("shape"),xe(null)):(ce("corners"),xe(null))},Me=c=>{const f=Math.max(.3,Math.min(1,parseFloat(c.target.value)/100));x(f),We(m,f,v)},Xe=c=>{const f={...k,enabled:c.target.checked};j(f),We(m,S,v,f)},$e=c=>{const f={...k,strength:parseFloat(c.target.value)/100};j(f),We(m,S,v,f)};return O?l.jsxs("div",{className:"four-point-editor loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading preview..."})]}):E?l.jsx("div",{className:"four-point-editor error",children:l.jsxs("p",{children:["Failed to load: ",E]})}):l.jsxs("div",{className:"four-point-editor",ref:_e,children:[l.jsxs("div",{className:"editor-header",children:[l.jsxs("div",{className:"header-title",children:[l.jsx("h3",{children:"Position Your Design"}),l.jsx(xw,{content:l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Corners Mode:"})," Drag the 4 corner handles (TL, TR, BR, BL) to position your design with perspective. You can also drag inside the design to move all corners at once."]}),l.jsxs("p",{style:{marginTop:"0.5rem"},children:[l.jsx("strong",{children:"Refine Shape Mode:"})," Click anywhere to add new vertices for precise shape control. Drag existing vertices to adjust. Double-click or press Delete/Backspace on a vertex to remove it."]}),l.jsxs("p",{style:{marginTop:"0.5rem"},children:[l.jsx("strong",{children:"Overlay Opacity:"})," Adjust transparency to see how the design blends with your photo."]}),l.jsxs("p",{style:{marginTop:"0.5rem"},children:[l.jsx("strong",{children:"Match Floor Lighting:"})," Automatically adjusts design brightness to match your floor's lighting conditions."]})]}),position:"right"})]}),l.jsx("p",{className:"instructions",children:W==="corners"?"Drag the corner handles (TL, TR, BR, BL) to position the design. Drag inside to move all corners.":"Click to add vertices, drag to move them, double-click or press Delete to remove."})]}),l.jsx("div",{className:"canvas-container",children:l.jsx("canvas",{ref:Re,onPointerDown:ae,onPointerMove:M,onPointerUp:L,onPointerLeave:L,onDoubleClick:qe,style:{width:`${((u==null?void 0:u.naturalWidth)||800)*D}px`,height:`${((u==null?void 0:u.naturalHeight)||600)*D}px`,cursor:te!==null||H?"grabbing":W==="shape"?"crosshair":"move",touchAction:"none"}})}),l.jsxs("div",{className:"controls",children:[l.jsxs("div",{className:"mode-toggle",children:[l.jsx("button",{className:`toggle-btn ${W==="corners"?"active":""}`,onClick:()=>ce("corners"),children:"Corners"}),l.jsx("button",{className:`toggle-btn ${W==="shape"?"active":""}`,onClick:ye,children:"Refine Shape"}),l.jsx("button",{className:"toggle-btn undo-btn",onClick:ft,disabled:it.length===0,title:"Undo last change",children:"Undo"})]}),l.jsxs("div",{className:"opacity-control",children:[l.jsxs("label",{children:["Overlay Opacity",l.jsxs("span",{className:"value",children:[Math.round(S*100),"%"]})]}),l.jsx("input",{type:"range",min:"30",max:"100",value:Math.round(S*100),onChange:Me})]}),l.jsxs("div",{className:"lighting-control",children:[l.jsxs("label",{className:"checkbox-label",children:[l.jsx("input",{type:"checkbox",checked:k.enabled,onChange:Xe}),"Match floor lighting"]}),k.enabled&&l.jsxs("div",{className:"lighting-slider",children:[l.jsxs("label",{children:["Strength",l.jsxs("span",{className:"value",children:[Math.round(k.strength*100),"%"]})]}),l.jsx("input",{type:"range",min:"0",max:"100",value:Math.round(k.strength*100),onChange:$e})]})]})]}),l.jsx("style",{children:`
        .four-point-editor {
          display: flex;
          flex-direction: column;
          height: 100%;
        }

        .four-point-editor.loading,
        .four-point-editor.error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 400px;
          color: #6b7280;
        }

        .four-point-editor .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid #e5e7eb;
          border-top-color: #ff6b35;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .editor-header {
          padding-bottom: 1rem;
          border-bottom: 1px solid #e5e7eb;
          margin-bottom: 1rem;
        }

        .editor-header .header-title {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 0.5rem;
        }

        .editor-header h3 {
          margin: 0;
          font-size: 1.125rem;
          color: #1e4a7a;
        }

        .editor-header .instructions {
          margin: 0;
          font-size: 0.875rem;
          color: #6b7280;
        }

        .canvas-container {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f3f4f6;
          border-radius: 8px;
          overflow: hidden;
          min-height: 400px;
        }

        .canvas-container canvas {
          display: block;
        }

        .controls {
          padding-top: 1rem;
          border-top: 1px solid #e5e7eb;
          margin-top: 1rem;
          display: flex;
          flex-direction: column;
          gap: 1rem;
        }

        .mode-toggle {
          display: flex;
          gap: 0.5rem;
        }

        .toggle-btn {
          padding: 0.5rem 1rem;
          border: 1px solid #d1d5db;
          background: white;
          border-radius: 4px;
          font-size: 0.875rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .toggle-btn:hover {
          background: #f9fafb;
        }

        .toggle-btn.active {
          background: #ff6b35;
          color: white;
          border-color: #ff6b35;
        }

        .toggle-btn:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }

        .toggle-btn:disabled:hover {
          background: white;
        }

        .opacity-control {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .opacity-control label {
          display: flex;
          justify-content: space-between;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
        }

        .opacity-control .value {
          font-weight: 400;
          color: #6b7280;
        }

        .opacity-control input[type="range"] {
          width: 100%;
          height: 6px;
          border-radius: 3px;
          background: #e5e7eb;
          outline: none;
          -webkit-appearance: none;
        }

        .opacity-control input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: #ff6b35;
          cursor: pointer;
        }

        .lighting-control {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .checkbox-label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          font-weight: 500;
          color: #374151;
          cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
          width: 16px;
          height: 16px;
          cursor: pointer;
        }

        .lighting-slider {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          padding-left: 1.5rem;
        }

        .lighting-slider label {
          display: flex;
          justify-content: space-between;
          font-size: 0.8rem;
          color: #6b7280;
        }

        .lighting-slider .value {
          font-weight: 400;
        }

        .lighting-slider input[type="range"] {
          width: 100%;
          height: 6px;
          border-radius: 3px;
          background: #e5e7eb;
          outline: none;
          -webkit-appearance: none;
        }

        .lighting-slider input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: #22c55e;
          cursor: pointer;
        }
      `})]})}const Ua={UPLOAD:"upload",POSITION:"position"};function FO({designUrl:e,designDimensions:t,onClose:n,onSaved:r}){const[i,s]=fe.useState(Ua.UPLOAD),[a,o]=fe.useState(null),[u,d]=fe.useState(null),[h,p]=fe.useState(null),[m,g]=fe.useState(.8),[v,w]=fe.useState({enabled:!1,strength:.6,baseBrightness:1,baseContrast:1}),[S,x]=fe.useState(!1),k=fe.useRef(null);fe.useEffect(()=>{if(e){console.log("[IN-SITU-MODAL] Design URL received:",e==null?void 0:e.substring(0,50));const R=new Image;!e.startsWith("blob:")&&!e.startsWith("data:")&&(R.crossOrigin="anonymous"),R.src=e}else console.warn("[IN-SITU-MODAL] No design URL provided")},[e]);const j=R=>{console.log("[IN-SITU-MODAL] Photo uploaded:",R),o(R),console.log("[IN-SITU-MODAL] Advancing to POSITION step, designUrl:",e==null?void 0:e.substring(0,50)),s(Ua.POSITION)},O=({quad:R,opacity:W,shape:ce,lighting:te})=>{d(R),g(W),p(ce),te&&w(te)},I=async()=>{if(!a||!u)return null;try{console.log("[InSitu] Loading design from URL:",e);const[R,W]=await Promise.all([h_(a.url),DO(e,1536)]);console.log("[InSitu] Successfully loaded design image");const ce=document.createElement("canvas");ce.width=R.naturalWidth,ce.height=R.naturalHeight;const te=ce.getContext("2d");return zO({photoCtx:te,photoImg:R,designImg:W,quad:u,opacity:m,shape:h,lighting:v}),ce}catch(R){return console.error("[InSitu] Failed to generate canvas:",R),Xr("Failed to generate preview. Please try again."),null}},E=async()=>{const R=await I();R&&Noe(R,"tpv-in-situ-preview.png")},U=async()=>{if(!(!u||!a)){x(!0);try{const R=await I();if(!R)throw new Error("Failed to generate preview");const W=await new Promise(ge=>R.toBlob(ge,"image/png")),te=`in-situ-previews/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.png`}`,{error:me}=await ti.storage.from("tpv-studio-uploads").upload(te,W,{contentType:"image/png",cacheControl:"3600"});if(me)throw me;const{data:{publicUrl:H}}=ti.storage.from("tpv-studio-uploads").getPublicUrl(te);r&&r({photo_url:a.supabaseUrl||a.url,quad:u,shape:h,opacity:m,lighting:v,preview_url:H}),n()}catch(R){console.error("[IN-SITU] Save failed:",R),Xr("Failed to save preview. Please try again.")}finally{x(!1)}}},D=()=>{switch(i){case Ua.UPLOAD:return"Upload Site Photo";case Ua.POSITION:return"Position Your Design";default:return"In-Situ Preview"}};return l.jsxs("div",{className:"modal-overlay in-situ-modal-overlay",onClick:n,children:[l.jsxs("div",{className:"modal-content in-situ-modal",onClick:R=>R.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("h2",{children:D()}),l.jsxs("div",{className:"step-indicator",children:[l.jsx("span",{className:i===Ua.UPLOAD?"active":"completed",children:"1. Upload"}),l.jsx("span",{className:i===Ua.POSITION?"active":"",children:"2. Position"})]})]}),l.jsx("button",{onClick:n,className:"close-button",children:""})]}),l.jsxs("div",{className:"modal-body",children:[i===Ua.UPLOAD&&l.jsxs("div",{className:"upload-step",children:[l.jsx("p",{className:"step-description",children:"Upload a photo of your site to see how your TPV design will look when installed. For best results, use a photo taken from above or at a slight angle showing the floor area clearly."}),l.jsx(joe,{onPhotoUploaded:j})]}),i===Ua.POSITION&&a&&l.jsx(Doe,{ref:k,photoUrl:a.url,svgUrl:e,designSizeMm:{width_mm:t.width,length_mm:t.length},initialOpacity:.8,onChange:O})]}),i===Ua.POSITION&&l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{onClick:()=>s(Ua.UPLOAD),className:"btn-secondary",children:"Back"}),l.jsxs("div",{className:"footer-actions",children:[l.jsx("button",{onClick:E,disabled:!u,className:"btn-secondary",children:"Download PNG"}),l.jsx("button",{onClick:U,disabled:!u||S,className:"btn-primary",children:S?"Saving...":"Save to Project"})]})]})]}),l.jsx("style",{children:`
        .in-situ-modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 1rem;
        }

        .in-situ-modal {
          background: white;
          border-radius: 12px;
          width: 100%;
          max-width: 1000px;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .in-situ-modal .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          padding: 1.25rem 1.5rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .header-left {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .in-situ-modal .modal-header h2 {
          margin: 0;
          font-size: 1.25rem;
          color: #1e4a7a;
        }

        .step-indicator {
          display: flex;
          gap: 1rem;
          font-size: 0.75rem;
        }

        .step-indicator span {
          color: #9ca3af;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
        }

        .step-indicator span.active {
          background: #fff7f5;
          color: #ff6b35;
          font-weight: 500;
        }

        .step-indicator span.completed {
          color: #22c55e;
        }

        .close-button {
          background: none;
          border: none;
          font-size: 1.5rem;
          cursor: pointer;
          color: #9ca3af;
          padding: 0;
          line-height: 1;
        }

        .close-button:hover {
          color: #374151;
        }

        .modal-body {
          flex: 1;
          padding: 1.5rem;
          overflow-y: auto;
          min-height: 500px;
        }

        .upload-step {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }

        .step-description {
          margin: 0;
          font-size: 0.875rem;
          color: #6b7280;
          line-height: 1.6;
        }

        .modal-footer {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 1.5rem;
          border-top: 1px solid #e5e7eb;
          background: #f9fafb;
          border-radius: 0 0 12px 12px;
        }

        .footer-actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary {
          padding: 0.5rem 1rem;
          border-radius: 4px;
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          border: none;
        }

        .btn-primary {
          background: #ff6b35;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #e55a2b;
        }

        .btn-primary:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        .btn-secondary {
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
        }

        .btn-secondary:hover:not(:disabled) {
          background: #f9fafb;
        }

        .btn-secondary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
          .in-situ-modal {
            max-width: 100%;
            max-height: 100vh;
            border-radius: 0;
          }

          .modal-body {
            padding: 1rem;
          }

          .step-indicator {
            display: none;
          }

          .modal-footer {
            border-radius: 0;
          }
        }
      `})]})}function zoe({isOpen:e,onClose:t,onConfirm:n,aspectRatio:r,defaultLongestSide:i=5e3}){const[s,a]=fe.useState(i),[o,u]=fe.useState(i/1e3),h=(w=>{if(!r||r<=0)return{width:w,length:w};if(r>=1){const S=w,x=Math.round(w/r);return{width:S,length:x}}else{const S=w;return{width:Math.round(w*r),length:S}}})(s),p=r>=1?"landscape":"portrait",m=r>=1?`${r.toFixed(1)}:1`:`1:${(1/r).toFixed(1)}`,g=w=>{const S=parseFloat(w.target.value)||0;u(S),a(Math.round(S*1e3))},v=()=>{n(h.width,h.length),t()};return e?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"dimension-modal-overlay",onClick:t,children:l.jsxs("div",{className:"dimension-modal",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"dimension-modal-header",children:[l.jsxs("div",{className:"dimension-modal-title",children:[l.jsx("h2",{children:"Set Installation Size"}),l.jsx(xw,{content:l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("strong",{children:"Why specify dimensions?"})}),l.jsx("p",{style:{marginTop:"0.5rem"},children:"Accurate dimensions are essential for:"}),l.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.25rem"},children:[l.jsx("li",{children:"Calculating exact material quantities"}),l.jsx("li",{children:"Generating PDF specifications for manufacturers"}),l.jsx("li",{children:"Slicing designs into 1m1m installation tiles"})]}),l.jsxs("p",{style:{marginTop:"0.5rem"},children:[l.jsx("strong",{children:"Tip:"})," Typical playground installations range from 3m to 20m on the longest side."]})]}),position:"bottom"})]}),l.jsx("button",{className:"dimension-modal-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsxs("div",{className:"dimension-modal-body",children:[l.jsx("div",{className:"dimension-info",children:l.jsxs("p",{className:"dimension-aspect",children:["Your design has a ",l.jsxs("strong",{children:[m," ",p]})," aspect ratio"]})}),l.jsxs("div",{className:"dimension-input-group",children:[l.jsx("label",{htmlFor:"longest-dimension",children:"Installation Size (Longest Side)"}),l.jsxs("div",{className:"dimension-input-wrapper",children:[l.jsx("input",{id:"longest-dimension",type:"number",min:"0.1",max:"50",step:"0.1",value:o,onChange:g,className:"dimension-input"}),l.jsx("span",{className:"dimension-unit",children:"meters"})]}),l.jsx("p",{className:"dimension-help",children:"Enter the measurement of the longest side of your installation area. The other dimension will be calculated automatically based on your design's aspect ratio."})]}),l.jsxs("div",{className:"dimension-preview",children:[l.jsx("div",{className:"dimension-preview-title",children:"Calculated Dimensions:"}),l.jsxs("div",{className:"dimension-preview-values",children:[l.jsxs("div",{className:"dimension-preview-item",children:[l.jsx("span",{className:"dimension-preview-label",children:"Width:"}),l.jsxs("span",{className:"dimension-preview-value",children:[(h.width/1e3).toFixed(2),"m"]})]}),l.jsxs("div",{className:"dimension-preview-item",children:[l.jsx("span",{className:"dimension-preview-label",children:"Length:"}),l.jsxs("span",{className:"dimension-preview-value",children:[(h.length/1e3).toFixed(2),"m"]})]}),l.jsxs("div",{className:"dimension-preview-item",children:[l.jsx("span",{className:"dimension-preview-label",children:"Total Area:"}),l.jsxs("span",{className:"dimension-preview-value",children:[(h.width*h.length/1e6).toFixed(2),"m"]})]})]})]}),l.jsxs("div",{className:"dimension-note",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"8",cy:"8",r:"7"}),l.jsx("line",{x1:"8",y1:"11",x2:"8",y2:"8"}),l.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:"currentColor"})]}),l.jsx("p",{children:"These dimensions will be used to calculate material quantities for your PDF specification and to slice your design into 1m1m installation tiles."})]})]}),l.jsxs("div",{className:"dimension-modal-footer",children:[l.jsx("button",{className:"dimension-btn dimension-btn-secondary",onClick:t,children:"Cancel"}),l.jsx("button",{className:"dimension-btn dimension-btn-primary",onClick:v,disabled:o<=0,children:"Confirm Size"})]})]})}),l.jsx("style",{children:`
        .dimension-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
        backdrop-filter: blur(4px);
      }

      .dimension-modal {
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        animation: dimensionModalSlideIn 0.3s ease-out;
      }

      @keyframes dimensionModalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .dimension-modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px;
        border-bottom: 1px solid #e5e7eb;
      }

      .dimension-modal-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .dimension-modal-header h2 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
        color: #111827;
      }

      .dimension-modal-close {
        background: none;
        border: none;
        font-size: 2rem;
        line-height: 1;
        color: #9ca3af;
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        transition: all 0.2s;
      }

      .dimension-modal-close:hover {
        background: #f3f4f6;
        color: #111827;
      }

      .dimension-modal-body {
        padding: 24px;
        overflow-y: auto;
        flex: 1;
      }

      .dimension-info {
        background: #f0f9ff;
        border: 1px solid #bae6fd;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 24px;
      }

      .dimension-aspect {
        margin: 0;
        color: #0c4a6e;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .dimension-input-group {
        margin-bottom: 24px;
      }

      .dimension-input-group label {
        display: block;
        font-weight: 600;
        color: #374151;
        margin-bottom: 8px;
        font-size: 0.95rem;
      }

      .dimension-input-wrapper {
        position: relative;
        display: flex;
        align-items: center;
      }

      .dimension-input {
        width: 100%;
        padding: 12px 16px;
        padding-right: 70px;
        font-size: 1.1rem;
        border: 2px solid #d1d5db;
        border-radius: 10px;
        transition: all 0.2s;
        font-family: inherit;
      }

      .dimension-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .dimension-unit {
        position: absolute;
        right: 16px;
        color: #6b7280;
        font-weight: 500;
        pointer-events: none;
      }

      .dimension-help {
        margin: 8px 0 0 0;
        font-size: 0.85rem;
        color: #6b7280;
      }

      .dimension-preview {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .dimension-preview-title {
        font-weight: 600;
        color: #374151;
        margin-bottom: 16px;
        font-size: 0.95rem;
      }

      .dimension-preview-values {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .dimension-preview-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
      }

      .dimension-preview-label {
        color: #6b7280;
        font-size: 0.9rem;
      }

      .dimension-preview-value {
        font-weight: 600;
        color: #111827;
        font-size: 1.05rem;
      }

      .dimension-note {
        display: flex;
        gap: 12px;
        padding: 16px;
        background: #fffbeb;
        border: 1px solid #fde68a;
        border-radius: 10px;
      }

      .dimension-note svg {
        flex-shrink: 0;
        margin-top: 2px;
        color: #f59e0b;
      }

      .dimension-note p {
        margin: 0;
        font-size: 0.85rem;
        color: #78350f;
        line-height: 1.5;
      }

      .dimension-modal-footer {
        padding: 20px 24px;
        border-top: 1px solid #e5e7eb;
        display: flex;
        gap: 12px;
        justify-content: flex-end;
      }

      .dimension-btn {
        padding: 10px 24px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
        font-family: inherit;
      }

      .dimension-btn-secondary {
        background: white;
        border: 1px solid #d1d5db;
        color: #374151;
      }

      .dimension-btn-secondary:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }

      .dimension-btn-primary {
        background: #3b82f6;
        color: white;
      }

      .dimension-btn-primary:hover {
        background: #2563eb;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .dimension-btn-primary:disabled {
        background: #9ca3af;
        cursor: not-allowed;
        box-shadow: none;
      }

      @media (max-width: 640px) {
        .dimension-modal {
          max-width: none;
          width: 100%;
          margin: 0;
          max-height: 100vh;
          border-radius: 0;
        }

        .dimension-modal-header {
          padding: 20px;
        }

        .dimension-modal-header h2 {
          font-size: 1.25rem;
        }

        .dimension-modal-body {
          padding: 20px;
        }

        .dimension-modal-footer {
          flex-direction: column-reverse;
          padding: 16px 20px;
        }

        .dimension-btn {
          width: 100%;
        }
      }
      `})]}):null}const BO={},Foe=Object.freeze(Object.defineProperty({__proto__:null,default:BO},Symbol.toStringTag,{value:"Module"})),Po=Symbol(),oo=(e,t,n)=>{const r=t[e.type];if(!(r!=null&&r.enter&&r.enter(e,n)===Po)){if(e.type==="root")for(const i of e.children)oo(i,t,e);if(e.type==="element"&&n.children.includes(e))for(const i of e.children)oo(i,t,e);r!=null&&r.exit&&r.exit(e,n)}},UO=(e,t,n,r,i)=>{for(const s of n){const a=r==null?void 0:r[s.name];if(a===!1)continue;const o={...s.params,...i,...a},u=s.fn(e,o,t);u!=null&&oo(e,u)}},Boe=({name:e,plugins:t})=>({name:e,isPreset:!0,plugins:Object.freeze(t),fn:(n,r,i)=>{const{floatPrecision:s,overrides:a}=r,o={};if(s!=null&&(o.floatPrecision=s),a){const u=t.map(({name:d})=>d);for(const d of Object.keys(a))u.includes(d)||console.warn(`You are trying to configure ${d} which is not part of ${e}.
Try to put it before or after, for example

plugins: [
  {
    name: '${e}',
  },
  '${d}'
]
`)}UO(n,i,t,a,o)}});var pi;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(pi||(pi={}));function Uoe(e){return e.type===pi.Tag||e.type===pi.Script||e.type===pi.Style}const Hoe=pi.Root,Woe=pi.Text,Voe=pi.Directive,Goe=pi.Comment,qoe=pi.Script,Yoe=pi.Style,Xoe=pi.Tag,Koe=pi.CDATA,Zoe=pi.Doctype;function Ys(e){return Uoe(e)}function f_(e){return e.type===pi.CDATA}function Xu(e){return e.type===pi.Text}function HO(e){return e.type===pi.Comment}function Qoe(e){return e.type===pi.Root}function Pa(e){return Object.prototype.hasOwnProperty.call(e,"children")}const pE=/["&'<>$\x80-\uFFFF]/g,Joe=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),ele=String.prototype.codePointAt!=null?(e,t)=>e.codePointAt(t):(e,t)=>(e.charCodeAt(t)&64512)===55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function WO(e){let t="",n=0,r;for(;(r=pE.exec(e))!==null;){const i=r.index,s=e.charCodeAt(i),a=Joe.get(s);a!==void 0?(t+=e.substring(n,i)+a,n=i+1):(t+=`${e.substring(n,i)}&#x${ele(e,i).toString(16)};`,n=pE.lastIndex+=+((s&64512)===55296))}return t+e.substr(n)}function VO(e,t){return function(r){let i,s=0,a="";for(;i=e.exec(r);)s!==i.index&&(a+=r.substring(s,i.index)),a+=t.get(i[0].charCodeAt(0)),s=i.index+1;return a+r.substring(s)}}const tle=VO(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),nle=VO(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),rle=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),ile=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),sle=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function ale(e){return e.replace(/"/g,"&quot;")}function ole(e,t){var n;if(!e)return;const r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?ale:t.xmlMode||t.encodeEntities!=="utf8"?WO:tle;return Object.keys(e).map(i=>{var s,a;const o=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(a=ile.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&o===""?i:`${i}="${r(o)}"`}).join(" ")}const mE=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function p_(e,t={}){const n="length"in e?e:[e];let r="";for(let i=0;i<n.length;i++)r+=lle(n[i],t);return r}function lle(e,t){switch(e.type){case Hoe:return p_(e.children,t);case Zoe:case Voe:return hle(e);case Goe:return mle(e);case Koe:return ple(e);case qoe:case Yoe:case Xoe:return dle(e,t);case Woe:return fle(e,t)}}const cle=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),ule=new Set(["svg","math"]);function dle(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=rle.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&cle.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&ule.has(e.name)&&(t={...t,xmlMode:"foreign"});let r=`<${e.name}`;const i=ole(e.attribs,t);return i&&(r+=` ${i}`),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&mE.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=p_(e.children,t)),(t.xmlMode||!mE.has(e.name))&&(r+=`</${e.name}>`)),r}function hle(e){return`<${e.data}>`}function fle(e,t){var n;let r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&sle.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?WO(r):nle(r)),r}function ple(e){return`<![CDATA[${e.children[0].data}]]>`}function mle(e){return`<!--${e.data}-->`}function GO(e,t){return p_(e,t)}function gle(e,t){return Pa(e)?e.children.map(n=>GO(n,t)).join(""):""}function fm(e){return Array.isArray(e)?e.map(fm).join(""):Ys(e)?e.name==="br"?`
`:fm(e.children):f_(e)?fm(e.children):Xu(e)?e.data:""}function mg(e){return Array.isArray(e)?e.map(mg).join(""):Pa(e)&&!HO(e)?mg(e.children):Xu(e)?e.data:""}function Sx(e){return Array.isArray(e)?e.map(Sx).join(""):Pa(e)&&(e.type===pi.Tag||f_(e))?Sx(e.children):Xu(e)?e.data:""}function qO(e){return Pa(e)?e.children:[]}function YO(e){return e.parent||null}function yle(e){const t=YO(e);if(t!=null)return qO(t);const n=[e];let{prev:r,next:i}=e;for(;r!=null;)n.unshift(r),{prev:r}=r;for(;i!=null;)n.push(i),{next:i}=i;return n}function ble(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function vle(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}function xle(e){return e.name}function wle(e){let{next:t}=e;for(;t!==null&&!Ys(t);)({next:t}=t);return t}function _le(e){let{prev:t}=e;for(;t!==null&&!Ys(t);)({prev:t}=t);return t}function If(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function kle(e,t){const n=t.prev=e.prev;n&&(n.next=t);const r=t.next=e.next;r&&(r.prev=t);const i=t.parent=e.parent;if(i){const s=i.children;s[s.lastIndexOf(e)]=t,e.parent=null}}function Sle(e,t){if(If(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}function Cle(e,t){If(t);const{parent:n}=e,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){const i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)}function Ele(e,t){if(If(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){const n=e.children[1];n.prev=t,t.next=n}else t.next=null}function Tle(e,t){If(t);const{parent:n}=e;if(n){const r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}function $f(e,t,n=!0,r=1/0){return XO(e,Array.isArray(t)?t:[t],n,r)}function XO(e,t,n,r){const i=[],s=[Array.isArray(t)?t:[t]],a=[0];for(;;){if(a[0]>=s[0].length){if(a.length===1)return i;s.shift(),a.shift();continue}const o=s[0][a[0]++];if(e(o)&&(i.push(o),--r<=0))return i;n&&Pa(o)&&o.children.length>0&&(a.unshift(0),s.unshift(o.children))}}function jle(e,t){return t.find(e)}function m_(e,t,n=!0){const r=Array.isArray(t)?t:[t];for(let i=0;i<r.length;i++){const s=r[i];if(Ys(s)&&e(s))return s;if(n&&Pa(s)&&s.children.length>0){const a=m_(e,s.children,!0);if(a)return a}}return null}function KO(e,t){return(Array.isArray(t)?t:[t]).some(n=>Ys(n)&&e(n)||Pa(n)&&KO(e,n.children))}function Ale(e,t){const n=[],r=[Array.isArray(t)?t:[t]],i=[0];for(;;){if(i[0]>=r[0].length){if(r.length===1)return n;r.shift(),i.shift();continue}const s=r[0][i[0]++];Ys(s)&&e(s)&&n.push(s),Pa(s)&&s.children.length>0&&(i.unshift(0),r.unshift(s.children))}}const gg={tag_name(e){return typeof e=="function"?t=>Ys(t)&&e(t.name):e==="*"?Ys:t=>Ys(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>Xu(t)&&e(t.data):t=>Xu(t)&&t.data===e}};function g_(e,t){return typeof t=="function"?n=>Ys(n)&&t(n.attribs[e]):n=>Ys(n)&&n.attribs[e]===t}function Ple(e,t){return n=>e(n)||t(n)}function ZO(e){const t=Object.keys(e).map(n=>{const r=e[n];return Object.prototype.hasOwnProperty.call(gg,n)?gg[n](r):g_(n,r)});return t.length===0?null:t.reduce(Ple)}function Nle(e,t){const n=ZO(e);return n?n(t):!0}function Ole(e,t,n,r=1/0){const i=ZO(e);return i?$f(i,t,n,r):[]}function Rle(e,t,n=!0){return Array.isArray(t)||(t=[t]),m_(g_("id",e),t,n)}function Sd(e,t,n=!0,r=1/0){return $f(gg.tag_name(e),t,n,r)}function Mle(e,t,n=!0,r=1/0){return $f(g_("class",e),t,n,r)}function Lle(e,t,n=!0,r=1/0){return $f(gg.tag_type(e),t,n,r)}function Ile(e){let t=e.length;for(;--t>=0;){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0){e.splice(t,1);continue}for(let r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e}var Bs;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(Bs||(Bs={}));function QO(e,t){const n=[],r=[];if(e===t)return 0;let i=Pa(e)?e:e.parent;for(;i;)n.unshift(i),i=i.parent;for(i=Pa(t)?t:t.parent;i;)r.unshift(i),i=i.parent;const s=Math.min(n.length,r.length);let a=0;for(;a<s&&n[a]===r[a];)a++;if(a===0)return Bs.DISCONNECTED;const o=n[a-1],u=o.children,d=n[a],h=r[a];return u.indexOf(d)>u.indexOf(h)?o===t?Bs.FOLLOWING|Bs.CONTAINED_BY:Bs.FOLLOWING:o===e?Bs.PRECEDING|Bs.CONTAINS:Bs.PRECEDING}function $le(e){return e=e.filter((t,n,r)=>!r.includes(t,n+1)),e.sort((t,n)=>{const r=QO(t,n);return r&Bs.PRECEDING?-1:r&Bs.FOLLOWING?1:0}),e}function Dle(e){const t=yg(Hle,e);return t?t.name==="feed"?zle(t):Fle(t):null}function zle(e){var t;const n=e.children,r={type:"atom",items:Sd("entry",n).map(a=>{var o;const{children:u}=a,d={media:JO(u)};ss(d,"id","id",u),ss(d,"title","title",u);const h=(o=yg("link",u))===null||o===void 0?void 0:o.attribs.href;h&&(d.link=h);const p=nl("summary",u)||nl("content",u);p&&(d.description=p);const m=nl("updated",u);return m&&(d.pubDate=new Date(m)),d})};ss(r,"id","id",n),ss(r,"title","title",n);const i=(t=yg("link",n))===null||t===void 0?void 0:t.attribs.href;i&&(r.link=i),ss(r,"description","subtitle",n);const s=nl("updated",n);return s&&(r.updated=new Date(s)),ss(r,"author","email",n,!0),r}function Fle(e){var t,n;const r=(n=(t=yg("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],i={type:e.name.substr(0,3),id:"",items:Sd("item",e.children).map(a=>{const{children:o}=a,u={media:JO(o)};ss(u,"id","guid",o),ss(u,"title","title",o),ss(u,"link","link",o),ss(u,"description","description",o);const d=nl("pubDate",o)||nl("dc:date",o);return d&&(u.pubDate=new Date(d)),u})};ss(i,"title","title",r),ss(i,"link","link",r),ss(i,"description","description",r);const s=nl("lastBuildDate",r);return s&&(i.updated=new Date(s)),ss(i,"author","managingEditor",r,!0),i}const Ble=["url","type","lang"],Ule=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function JO(e){return Sd("media:content",e).map(t=>{const{attribs:n}=t,r={medium:n.medium,isDefault:!!n.isDefault};for(const i of Ble)n[i]&&(r[i]=n[i]);for(const i of Ule)n[i]&&(r[i]=parseInt(n[i],10));return n.expression&&(r.expression=n.expression),r})}function yg(e,t){return Sd(e,t,!0,1)[0]}function nl(e,t,n=!1){return mg(Sd(e,t,n,1)).trim()}function ss(e,t,n,r,i=!1){const s=nl(n,r,i);s&&(e[t]=s)}function Hle(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}const eR=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return Bs},append:Cle,appendChild:Sle,compareDocumentPosition:QO,existsOne:KO,filter:$f,find:XO,findAll:Ale,findOne:m_,findOneChild:jle,getAttributeValue:ble,getChildren:qO,getElementById:Rle,getElements:Ole,getElementsByClassName:Mle,getElementsByTagName:Sd,getElementsByTagType:Lle,getFeed:Dle,getInnerHTML:gle,getName:xle,getOuterHTML:GO,getParent:YO,getSiblings:yle,getText:fm,hasAttrib:vle,hasChildren:Pa,innerText:Sx,isCDATA:f_,isComment:HO,isDocument:Qoe,isTag:Ys,isText:Xu,nextElementSibling:wle,prepend:Tle,prependChild:Ele,prevElementSibling:_le,removeElement:If,removeSubsets:Ile,replaceElement:kle,testElement:Nle,textContent:mg,uniqueSort:$le},Symbol.toStringTag,{value:"Module"}));var Wle={trueFunc:function(){return!0},falseFunc:function(){return!1}};const Sn=vl(Wle);var un;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(un||(un={}));var di;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(di||(di={}));const gE=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Vle=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Gle=new Map([[126,di.Element],[94,di.Start],[36,di.End],[42,di.Any],[33,di.Not],[124,di.Hyphen]]),qle=new Set(["has","not","matches","is","where","host","host-context"]);function tR(e){switch(e.type){case un.Adjacent:case un.Child:case un.Descendant:case un.Parent:case un.Sibling:case un.ColumnCombinator:return!0;default:return!1}}const Yle=new Set(["contains","icontains"]);function Xle(e,t,n){const r=parseInt(t,16)-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)}function Wd(e){return e.replace(Vle,Xle)}function Uy(e){return e===39||e===34}function yE(e){return e===32||e===9||e===10||e===12||e===13}function cf(e){const t=[],n=nR(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function nR(e,t,n){let r=[];function i(m){const g=t.slice(n+m).match(gE);if(!g)throw new Error(`Expected name, found ${t.slice(n)}`);const[v]=g;return n+=m+v.length,Wd(v)}function s(m){for(n+=m;n<t.length&&yE(t.charCodeAt(n));)n++}function a(){n+=1;const m=n;let g=1;for(;g>0&&n<t.length;n++)t.charCodeAt(n)===40&&!o(n)?g++:t.charCodeAt(n)===41&&!o(n)&&g--;if(g)throw new Error("Parenthesis not matched");return Wd(t.slice(m,n-1))}function o(m){let g=0;for(;t.charCodeAt(--m)===92;)g++;return(g&1)===1}function u(){if(r.length>0&&tR(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function d(m){if(r.length>0&&r[r.length-1].type===un.Descendant){r[r.length-1].type=m;return}u(),r.push({type:m})}function h(m,g){r.push({type:un.Attribute,name:m,action:g,value:i(1),namespace:null,ignoreCase:"quirks"})}function p(){if(r.length&&r[r.length-1].type===un.Descendant&&r.pop(),r.length===0)throw new Error("Empty sub-selector");e.push(r)}if(s(0),t.length===n)return n;e:for(;n<t.length;){const m=t.charCodeAt(n);switch(m){case 32:case 9:case 10:case 12:case 13:{(r.length===0||r[0].type!==un.Descendant)&&(u(),r.push({type:un.Descendant})),s(1);break}case 62:{d(un.Child),s(1);break}case 60:{d(un.Parent),s(1);break}case 126:{d(un.Sibling),s(1);break}case 43:{d(un.Adjacent),s(1);break}case 46:{h("class",di.Element);break}case 35:{h("id",di.Equals);break}case 91:{s(1);let g,v=null;t.charCodeAt(n)===124?g=i(1):t.startsWith("*|",n)?(v="*",g=i(2)):(g=i(0),t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==61&&(v=g,g=i(1))),s(0);let w=di.Exists;const S=Gle.get(t.charCodeAt(n));if(S){if(w=S,t.charCodeAt(n+1)!==61)throw new Error("Expected `=`");s(2)}else t.charCodeAt(n)===61&&(w=di.Equals,s(1));let x="",k=null;if(w!=="exists"){if(Uy(t.charCodeAt(n))){const I=t.charCodeAt(n);let E=n+1;for(;E<t.length&&(t.charCodeAt(E)!==I||o(E));)E+=1;if(t.charCodeAt(E)!==I)throw new Error("Attribute value didn't end");x=Wd(t.slice(n+1,E)),n=E+1}else{const I=n;for(;n<t.length&&(!yE(t.charCodeAt(n))&&t.charCodeAt(n)!==93||o(n));)n+=1;x=Wd(t.slice(I,n))}s(0);const O=t.charCodeAt(n)|32;O===115?(k=!1,s(1)):O===105&&(k=!0,s(1))}if(t.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const j={type:un.Attribute,name:g,action:w,value:x,namespace:v,ignoreCase:k};r.push(j);break}case 58:{if(t.charCodeAt(n+1)===58){r.push({type:un.PseudoElement,name:i(2).toLowerCase(),data:t.charCodeAt(n)===40?a():null});continue}const g=i(1).toLowerCase();let v=null;if(t.charCodeAt(n)===40)if(qle.has(g)){if(Uy(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${g} cannot be quoted`);if(v=[],n=nR(v,t,n+1),t.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${g} (${t})`);n+=1}else{if(v=a(),Yle.has(g)){const w=v.charCodeAt(0);w===v.charCodeAt(v.length-1)&&Uy(w)&&(v=v.slice(1,-1))}v=Wd(v)}r.push({type:un.Pseudo,name:g,data:v});break}case 44:{p(),r=[],s(1);break}default:{if(t.startsWith("/*",n)){const w=t.indexOf("*/",n+2);if(w<0)throw new Error("Comment was not terminated");n=w+2,r.length===0&&s(0);break}let g=null,v;if(m===42)n+=1,v="*";else if(m===124){if(v="",t.charCodeAt(n+1)===124){d(un.ColumnCombinator),s(2);break}}else if(gE.test(t.slice(n)))v=i(0);else break e;t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==124&&(g=v,t.charCodeAt(n+1)===42?(v="*",n+=2):v=i(1)),r.push(v==="*"?{type:un.Universal,namespace:g}:{type:un.Tag,name:v,namespace:g})}}}return p(),n}const rR=new Map([[un.Universal,50],[un.Tag,30],[un.Attribute,1],[un.Pseudo,0]]);function y_(e){return!rR.has(e.type)}const Kle=new Map([[di.Exists,10],[di.Equals,8],[di.Not,7],[di.Start,6],[di.End,6],[di.Any,5]]);function Zle(e){const t=e.map(iR);for(let n=1;n<e.length;n++){const r=t[n];if(!(r<0))for(let i=n-1;i>=0&&r<t[i];i--){const s=e[i+1];e[i+1]=e[i],e[i]=s,t[i+1]=t[i],t[i]=r}}}function iR(e){var t,n;let r=(t=rR.get(e.type))!==null&&t!==void 0?t:-1;return e.type===un.Attribute?(r=(n=Kle.get(e.action))!==null&&n!==void 0?n:4,e.action===di.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===un.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map(i=>Math.min(...i.map(iR)))),r<0&&(r=0)):r=2:r=3),r}const Qle=/[-[\]{}()*+?.,\\^$|#\s]/g;function bE(e){return e.replace(Qle,"\\$&")}const Jle=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Rl(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&Jle.has(e.name)}const ece={equals(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return Rl(t,n)?(s=s.toLowerCase(),a=>{const o=r.getAttributeValue(a,i);return o!=null&&o.length===s.length&&o.toLowerCase()===s&&e(a)}):a=>r.getAttributeValue(a,i)===s&&e(a)},hyphen(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=s.length;return Rl(t,n)?(s=s.toLowerCase(),function(u){const d=r.getAttributeValue(u,i);return d!=null&&(d.length===a||d.charAt(a)==="-")&&d.substr(0,a).toLowerCase()===s&&e(u)}):function(u){const d=r.getAttributeValue(u,i);return d!=null&&(d.length===a||d.charAt(a)==="-")&&d.substr(0,a)===s&&e(u)}},element(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(/\s/.test(s))return Sn.falseFunc;const a=new RegExp(`(?:^|\\s)${bE(s)}(?:$|\\s)`,Rl(t,n)?"i":"");return function(u){const d=r.getAttributeValue(u,i);return d!=null&&d.length>=s.length&&a.test(d)&&e(u)}},exists(e,{name:t},{adapter:n}){return r=>n.hasAttrib(r,t)&&e(r)},start(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=s.length;return a===0?Sn.falseFunc:Rl(t,n)?(s=s.toLowerCase(),o=>{const u=r.getAttributeValue(o,i);return u!=null&&u.length>=a&&u.substr(0,a).toLowerCase()===s&&e(o)}):o=>{var u;return!!(!((u=r.getAttributeValue(o,i))===null||u===void 0)&&u.startsWith(s))&&e(o)}},end(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;const a=-s.length;return a===0?Sn.falseFunc:Rl(t,n)?(s=s.toLowerCase(),o=>{var u;return((u=r.getAttributeValue(o,i))===null||u===void 0?void 0:u.substr(a).toLowerCase())===s&&e(o)}):o=>{var u;return!!(!((u=r.getAttributeValue(o,i))===null||u===void 0)&&u.endsWith(s))&&e(o)}},any(e,t,n){const{adapter:r}=n,{name:i,value:s}=t;if(s==="")return Sn.falseFunc;if(Rl(t,n)){const a=new RegExp(bE(s),"i");return function(u){const d=r.getAttributeValue(u,i);return d!=null&&d.length>=s.length&&a.test(d)&&e(u)}}return a=>{var o;return!!(!((o=r.getAttributeValue(a,i))===null||o===void 0)&&o.includes(s))&&e(a)}},not(e,t,n){const{adapter:r}=n,{name:i}=t;let{value:s}=t;return s===""?a=>!!r.getAttributeValue(a,i)&&e(a):Rl(t,n)?(s=s.toLowerCase(),a=>{const o=r.getAttributeValue(a,i);return(o==null||o.length!==s.length||o.toLowerCase()!==s)&&e(a)}):a=>r.getAttributeValue(a,i)!==s&&e(a)}},tce=new Set([9,10,12,13,32]),vE=48,nce=57;function rce(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let t=0,n=0,r=s(),i=a();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=r*(i??1),o(),t<e.length?(r=s(),o(),i=a()):r=i=0),i===null||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,r*i];function s(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function a(){const u=t;let d=0;for(;t<e.length&&e.charCodeAt(t)>=vE&&e.charCodeAt(t)<=nce;)d=d*10+(e.charCodeAt(t)-vE),t++;return t===u?null:d}function o(){for(;t<e.length&&tce.has(e.charCodeAt(t));)t++}}function ice(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return Sn.falseFunc;if(t===-1)return s=>s<=n;if(t===0)return s=>s===n;if(t===1)return n<0?Sn.trueFunc:s=>s>=n;const r=Math.abs(t),i=(n%r+r)%r;return t>1?s=>s>=n&&s%r===i:s=>s<=n&&s%r===i}function Np(e){return ice(rce(e))}function Op(e,t){return n=>{const r=t.getParent(n);return r!=null&&t.isTag(r)&&e(n)}}const Cx={contains(e,t,{adapter:n}){return function(i){return e(i)&&n.getText(i).includes(t)}},icontains(e,t,{adapter:n}){const r=t.toLowerCase();return function(s){return e(s)&&n.getText(s).toLowerCase().includes(r)}},"nth-child"(e,t,{adapter:n,equals:r}){const i=Np(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Op(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let d=0;d<o.length&&!r(a,o[d]);d++)n.isTag(o[d])&&u++;return i(u)&&e(a)}},"nth-last-child"(e,t,{adapter:n,equals:r}){const i=Np(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Op(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let d=o.length-1;d>=0&&!r(a,o[d]);d--)n.isTag(o[d])&&u++;return i(u)&&e(a)}},"nth-of-type"(e,t,{adapter:n,equals:r}){const i=Np(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Op(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let d=0;d<o.length;d++){const h=o[d];if(r(a,h))break;n.isTag(h)&&n.getName(h)===n.getName(a)&&u++}return i(u)&&e(a)}},"nth-last-of-type"(e,t,{adapter:n,equals:r}){const i=Np(t);return i===Sn.falseFunc?Sn.falseFunc:i===Sn.trueFunc?Op(e,n):function(a){const o=n.getSiblings(a);let u=0;for(let d=o.length-1;d>=0;d--){const h=o[d];if(r(a,h))break;n.isTag(h)&&n.getName(h)===n.getName(a)&&u++}return i(u)&&e(a)}},root(e,t,{adapter:n}){return r=>{const i=n.getParent(r);return(i==null||!n.isTag(i))&&e(r)}},scope(e,t,n,r){const{equals:i}=n;return!r||r.length===0?Cx.root(e,t,n):r.length===1?s=>i(r[0],s)&&e(s):s=>r.includes(s)&&e(s)},hover:Hy("isHovered"),visited:Hy("isVisited"),active:Hy("isActive")};function Hy(e){return function(n,r,{adapter:i}){const s=i[e];return typeof s!="function"?Sn.falseFunc:function(o){return s(o)&&n(o)}}}const xE={empty(e,{adapter:t}){return!t.getChildren(e).some(n=>t.isTag(n)||t.getText(n)!=="")},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return t.prevElementSibling(e)==null;const r=t.getSiblings(e).find(i=>t.isTag(i));return r!=null&&n(e,r)},"last-child"(e,{adapter:t,equals:n}){const r=t.getSiblings(e);for(let i=r.length-1;i>=0;i--){if(n(e,r[i]))return!0;if(t.isTag(r[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=0;s<r.length;s++){const a=r[s];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const r=t.getSiblings(e),i=t.getName(e);for(let s=r.length-1;s>=0;s--){const a=r[s];if(n(e,a))return!0;if(t.isTag(a)&&t.getName(a)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const r=t.getName(e);return t.getSiblings(e).every(i=>n(e,i)||!t.isTag(i)||t.getName(i)!==r)},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every(r=>n(e,r)||!t.isTag(r))}};function wE(e,t,n,r){if(n===null){if(e.length>r)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===r)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const sce={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},sR={};function aR(e,t){return e===Sn.falseFunc?Sn.falseFunc:n=>t.isTag(n)&&e(n)}function oR(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function Ex(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const Wy=(e,t,n,r,i)=>{const s=i(t,Ex(n),r);return s===Sn.trueFunc?e:s===Sn.falseFunc?Sn.falseFunc:a=>s(a)&&e(a)},Vy={is:Wy,matches:Wy,where:Wy,not(e,t,n,r,i){const s=i(t,Ex(n),r);return s===Sn.falseFunc?e:s===Sn.trueFunc?Sn.falseFunc:a=>!s(a)&&e(a)},has(e,t,n,r,i){const{adapter:s}=n,a=Ex(n);a.relativeSelector=!0;const o=t.some(h=>h.some(y_))?[sR]:void 0,u=i(t,a,o);if(u===Sn.falseFunc)return Sn.falseFunc;const d=aR(u,s);if(o&&u!==Sn.trueFunc){const{shouldTestNextSiblings:h=!1}=u;return p=>{if(!e(p))return!1;o[0]=p;const m=s.getChildren(p),g=h?[...m,...oR(p,s)]:m;return s.existsOne(d,g)}}return h=>e(h)&&s.existsOne(d,s.getChildren(h))}};function ace(e,t,n,r,i){var s;const{name:a,data:o}=t;if(Array.isArray(o)){if(!(a in Vy))throw new Error(`Unknown pseudo-class :${a}(${o})`);return Vy[a](e,o,n,r,i)}const u=(s=n.pseudos)===null||s===void 0?void 0:s[a],d=typeof u=="string"?u:sce[a];if(typeof d=="string"){if(o!=null)throw new Error(`Pseudo ${a} doesn't have any arguments`);const h=cf(d);return Vy.is(e,h,n,r,i)}if(typeof u=="function")return wE(u,a,o,1),h=>u(h,o)&&e(h);if(a in Cx)return Cx[a](e,o,n,r);if(a in xE){const h=xE[a];return wE(h,a,o,2),p=>h(p,n,o)&&e(p)}throw new Error(`Unknown pseudo-class :${a}`)}function Gy(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function oce(e,t,n,r,i){const{adapter:s,equals:a}=n;switch(t.type){case un.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case un.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case un.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),ece[t.action](e,t,n)}case un.Pseudo:return ace(e,t,n,r,i);case un.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:o}=t;return(!n.xmlMode||n.lowerCaseTags)&&(o=o.toLowerCase()),function(d){return s.getName(d)===o&&e(d)}}case un.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(d){let h=d;for(;h=Gy(h,s);)if(e(h))return!0;return!1};const o=new WeakSet;return function(d){let h=d;for(;h=Gy(h,s);)if(!o.has(h)){if(s.isTag(h)&&e(h))return!0;o.add(h)}return!1}}case"_flexibleDescendant":return function(u){let d=u;do if(e(d))return!0;while(d=Gy(d,s));return!1};case un.Parent:return function(u){return s.getChildren(u).some(d=>s.isTag(d)&&e(d))};case un.Child:return function(u){const d=s.getParent(u);return d!=null&&s.isTag(d)&&e(d)};case un.Sibling:return function(u){const d=s.getSiblings(u);for(let h=0;h<d.length;h++){const p=d[h];if(a(u,p))break;if(s.isTag(p)&&e(p))return!0}return!1};case un.Adjacent:return s.prevElementSibling?function(u){const d=s.prevElementSibling(u);return d!=null&&e(d)}:function(u){const d=s.getSiblings(u);let h;for(let p=0;p<d.length;p++){const m=d[p];if(a(u,m))break;s.isTag(m)&&(h=m)}return!!h&&e(h)};case un.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function lce(e,t,n){const r=lR(e,t,n);return aR(r,t.adapter)}function lR(e,t,n){const r=typeof e=="string"?cf(e):e;return uR(r,t,n)}function cR(e){return e.type===un.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(t=>t.some(cR)))}const cce={type:un.Descendant},uce={type:"_flexibleDescendant"},dce={type:un.Pseudo,name:"scope",data:null};function hce(e,{adapter:t},n){const r=!!(n!=null&&n.every(i=>{const s=t.isTag(i)&&t.getParent(i);return i===sR||s&&t.isTag(s)}));for(const i of e){if(!(i.length>0&&y_(i[0])&&i[0].type!==un.Descendant))if(r&&!i.some(cR))i.unshift(cce);else continue;i.unshift(dce)}}function uR(e,t,n){var r;e.forEach(Zle),n=(r=t.context)!==null&&r!==void 0?r:n;const i=Array.isArray(n),s=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)hce(e,t,s);else if(e.some(u=>u.length>0&&y_(u[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const o=e.map(u=>{if(u.length>=2){const[d,h]=u;d.type!==un.Pseudo||d.name!=="scope"||(i&&h.type===un.Descendant?u[1]=uce:(h.type===un.Adjacent||h.type===un.Sibling)&&(a=!0))}return fce(u,t,s)}).reduce(pce,Sn.falseFunc);return o.shouldTestNextSiblings=a,o}function fce(e,t,n){var r;return e.reduce((i,s)=>i===Sn.falseFunc?Sn.falseFunc:oce(i,s,t,n,uR),(r=t.rootFunc)!==null&&r!==void 0?r:Sn.trueFunc)}function pce(e,t){return t===Sn.falseFunc||e===Sn.trueFunc?e:e===Sn.falseFunc||t===Sn.trueFunc?t:function(r){return e(r)||t(r)}}const dR=(e,t)=>e===t,mce={adapter:eR,equals:dR};function hR(e){var t,n,r,i;const s=e??mce;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=eR),(n=s.equals)!==null&&n!==void 0||(s.equals=(i=(r=s.adapter)===null||r===void 0?void 0:r.equals)!==null&&i!==void 0?i:dR),s}function fR(e){return function(n,r,i){const s=hR(i);typeof n!="function"&&(n=lR(n,s,r));const a=gce(r,s.adapter,n.shouldTestNextSiblings);return e(n,a,s)}}function gce(e,t,n=!1){return n&&(e=yce(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function yce(e,t){const n=Array.isArray(e)?e.slice(0):[e],r=n.length;for(let i=0;i<r;i++){const s=oR(n[i],t);n.push(...s)}return n}const bce=fR((e,t,n)=>e===Sn.falseFunc||!t||t.length===0?[]:n.adapter.findAll(e,t)),vce=fR((e,t,n)=>e===Sn.falseFunc||!t||t.length===0?null:n.adapter.findOne(e,t));function xce(e,t,n){const r=hR(n);return(typeof t=="function"?t:lce(t,r))(e)}function wce(e){const t=new Map;for(const n of e.children)t.set(n,e),oo(n,{element:{enter:(r,i)=>{t.set(r,i)}}},e);return t}const g0=e=>e.type==="element",pR=(e,t)=>t.some(n=>g0(n)&&(e(n)||pR(e,uf(n)))),_ce=(e,t)=>e.attributes[t],uf=e=>e.children||[],kce=e=>e.name,Sce=e=>e.children[0].type==="text"||e.children[0].type==="cdata"?e.children[0].value:"",Cce=(e,t)=>e.attributes[t]!==void 0,mR=(e,t)=>{const n=[];for(const r of t)g0(r)&&(e(r)&&n.push(r),n.push(...mR(e,uf(r))));return n},gR=(e,t)=>{for(const n of t)if(g0(n)){if(e(n))return n;const r=gR(e,uf(n));if(r)return r}return null};function Ece(e,t){const n=s=>(t||(t=wce(e)),t.get(s)||null);return{isTag:g0,existsOne:pR,getAttributeValue:_ce,getChildren:uf,getName:kce,getParent:n,getSiblings:s=>{const a=n(s);return a?uf(a):[]},getText:Sce,hasAttrib:Cce,removeSubsets:s=>{let a=s.length,o,u,d;for(;--a>-1;){for(o=u=s[a],s[a]=null,d=!0;u;){if(s.includes(u)){d=!1,s.splice(a,1);break}u=n(u)}d&&(s[a]=o)}return s},findAll:mR,findOne:gR}}function b_(e,t){return{xmlMode:!0,adapter:Ece(e,t)}}const df=(e,t,n)=>bce(t,e,b_(e,n)),yR=(e,t,n)=>vce(t,e,b_(e,n)),Tce=(e,t,n)=>xce(e,t,b_(e,n)),Dn=(e,t)=>{t.children=t.children.filter(n=>n!==e)},jce="removeDoctype",Ace="removes doctype declaration",Pce=()=>({doctype:{enter:(e,t)=>{Dn(e,t)}}}),bR=Object.freeze(Object.defineProperty({__proto__:null,description:Ace,fn:Pce,name:jce},Symbol.toStringTag,{value:"Module"})),Nce="removeXMLProcInst",Oce="removes XML processing instructions",Rce=()=>({instruction:{enter:(e,t)=>{e.name==="xml"&&Dn(e,t)}}}),vR=Object.freeze(Object.defineProperty({__proto__:null,description:Oce,fn:Rce,name:Nce},Symbol.toStringTag,{value:"Module"})),Mce="removeComments",Lce="removes comments",Ice=[/^!/],$ce=(e,t)=>{const{preservePatterns:n=Ice}=t;return{comment:{enter:(r,i)=>{if(n){if(!Array.isArray(n))throw Error(`Expected array in removeComments preservePatterns parameter but received ${n}`);if(n.some(a=>new RegExp(a).test(r.value)))return}Dn(r,i)}}}},xR=Object.freeze(Object.defineProperty({__proto__:null,description:Lce,fn:$ce,name:Mce},Symbol.toStringTag,{value:"Module"})),Cl={animation:new Set(["animate","animateColor","animateMotion","animateTransform","set"]),descriptive:new Set(["desc","metadata","title"]),shape:new Set(["circle","ellipse","line","path","polygon","polyline","rect"]),structural:new Set(["defs","g","svg","symbol","use"]),paintServer:new Set(["hatch","linearGradient","meshGradient","pattern","radialGradient","solidColor"]),nonRendering:new Set(["clipPath","filter","linearGradient","marker","mask","pattern","radialGradient","solidColor","symbol"]),container:new Set(["a","defs","foreignObject","g","marker","mask","missing-glyph","pattern","svg","switch","symbol"]),textContent:new Set(["a","altGlyph","altGlyphDef","altGlyphItem","glyph","glyphRef","text","textPath","tref","tspan"]),textContentChild:new Set(["altGlyph","textPath","tref","tspan"]),lightSource:new Set(["feDiffuseLighting","feDistantLight","fePointLight","feSpecularLighting","feSpotLight"]),filterPrimitive:new Set(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"])},wR=new Set([...Cl.textContent,"pre","title"]),v_=new Set(["glyph","missing-glyph","path"]),Ui={animationAddition:new Set(["additive","accumulate"]),animationAttributeTarget:new Set(["attributeType","attributeName"]),animationEvent:new Set(["onbegin","onend","onrepeat","onload"]),animationTiming:new Set(["begin","dur","end","fill","max","min","repeatCount","repeatDur","restart"]),animationValue:new Set(["by","calcMode","from","keySplines","keyTimes","to","values"]),conditionalProcessing:new Set(["requiredExtensions","requiredFeatures","systemLanguage"]),core:new Set(["id","tabindex","xml:base","xml:lang","xml:space"]),graphicalEvent:new Set(["onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup"]),presentation:new Set(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-overflow","text-rendering","transform-origin","transform","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"]),xlink:new Set(["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"]),documentEvent:new Set(["onabort","onerror","onresize","onscroll","onunload","onzoom"]),documentElementEvent:new Set(["oncopy","oncut","onpaste"]),globalEvent:new Set(["oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting"]),filterPrimitive:new Set(["x","y","width","height","result"]),transferFunction:new Set(["amplitude","exponent","intercept","offset","slope","tableValues","type"])},x_={core:{"xml:space":"default"},presentation:{clip:"auto","clip-path":"none","clip-rule":"nonzero",mask:"none",opacity:"1","stop-color":"#000","stop-opacity":"1","fill-opacity":"1","fill-rule":"nonzero",fill:"#000",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","paint-order":"normal","vector-effect":"none",display:"inline",visibility:"visible","marker-start":"none","marker-mid":"none","marker-end":"none","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","image-rendering":"auto","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","font-size-adjust":"none",kerning:"auto","letter-spacing":"normal","word-spacing":"normal","text-decoration":"none","text-anchor":"start","text-overflow":"clip","writing-mode":"lr-tb","glyph-orientation-vertical":"auto","glyph-orientation-horizontal":"0deg",direction:"ltr","unicode-bidi":"normal","dominant-baseline":"auto","alignment-baseline":"baseline","baseline-shift":"baseline"},transferFunction:{slope:"1",intercept:"0",amplitude:"1",exponent:"1",offset:"0"}},Dce={animationAttributeTarget:{unsafe:new Set(["attributeType"])},conditionalProcessing:{unsafe:new Set(["requiredFeatures"])},core:{unsafe:new Set(["xml:base","xml:lang","xml:space"])},presentation:{unsafe:new Set(["clip","color-profile","enable-background","glyph-orientation-horizontal","glyph-orientation-vertical","kerning"])}},w_={a:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","style","target","transform"]),defaults:{target:"_self"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view","tspan"])},altGlyph:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","format","glyphRef","rotate","style","x","y"])},altGlyphDef:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef"])},altGlyphItem:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef","altGlyphItem"])},animate:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateColor:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateMotion:{attrsGroups:new Set(["animationAddition","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","keyPoints","origin","path","rotate"]),defaults:{rotate:"0"},contentGroups:new Set(["descriptive"]),content:new Set(["mpath"])},animateTransform:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","type"]),contentGroups:new Set(["descriptive"])},circle:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","r","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},clipPath:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","clipPathUnits","externalResourcesRequired","style","transform"]),defaults:{clipPathUnits:"userSpaceOnUse"},contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["text","use"])},"color-profile":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["local","name","rendering-intent"]),defaults:{name:"sRGB","rendering-intent":"auto"},deprecated:{unsafe:new Set(["name"])},contentGroups:new Set(["descriptive"])},cursor:{attrsGroups:new Set(["core","conditionalProcessing","xlink"]),attrs:new Set(["externalResourcesRequired","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["descriptive"])},defs:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},desc:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},ellipse:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","rx","ry","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},feBlend:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","in2","mode"]),defaults:{mode:"normal"},content:new Set(["animate","set"])},feColorMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","type","values"]),defaults:{type:"matrix"},content:new Set(["animate","set"])},feComponentTransfer:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["feFuncA","feFuncB","feFuncG","feFuncR"])},feComposite:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","k1","k2","k3","k4","operator","style"]),defaults:{operator:"over",k1:"0",k2:"0",k3:"0",k4:"0"},content:new Set(["animate","set"])},feConvolveMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelMatrix","order","style","bias","divisor","edgeMode","targetX","targetY","kernelUnitLength","preserveAlpha"]),defaults:{order:"3",bias:"0",edgeMode:"duplicate",preserveAlpha:"false"},content:new Set(["animate","set"])},feDiffuseLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","diffuseConstant","in","kernelUnitLength","style","surfaceScale"]),defaults:{surfaceScale:"1",diffuseConstant:"1"},contentGroups:new Set(["descriptive"]),content:new Set(["feDistantLight","fePointLight","feSpotLight"])},feDisplacementMap:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","scale","style","xChannelSelector","yChannelSelector"]),defaults:{scale:"0",xChannelSelector:"A",yChannelSelector:"A"},content:new Set(["animate","set"])},feDistantLight:{attrsGroups:new Set(["core"]),attrs:new Set(["azimuth","elevation"]),defaults:{azimuth:"0",elevation:"0"},content:new Set(["animate","set"])},feFlood:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["animate","animateColor","set"])},feFuncA:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncB:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncG:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncR:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feGaussianBlur:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","stdDeviation"]),defaults:{stdDeviation:"0"},content:new Set(["set","animate"])},feImage:{attrsGroups:new Set(["core","presentation","filterPrimitive","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","preserveAspectRatio","style","xlink:href"]),defaults:{preserveAspectRatio:"xMidYMid meet"},content:new Set(["animate","animateTransform","set"])},feMerge:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["feMergeNode"])},feMergeNode:{attrsGroups:new Set(["core"]),attrs:new Set(["in"]),content:new Set(["animate","set"])},feMorphology:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","operator","radius"]),defaults:{operator:"erode",radius:"0"},content:new Set(["animate","set"])},feOffset:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","dx","dy"]),defaults:{dx:"0",dy:"0"},content:new Set(["animate","set"])},fePointLight:{attrsGroups:new Set(["core"]),attrs:new Set(["x","y","z"]),defaults:{x:"0",y:"0",z:"0"},content:new Set(["animate","set"])},feSpecularLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelUnitLength","specularConstant","specularExponent","style","surfaceScale"]),defaults:{surfaceScale:"1",specularConstant:"1",specularExponent:"1"},contentGroups:new Set(["descriptive","lightSource"])},feSpotLight:{attrsGroups:new Set(["core"]),attrs:new Set(["limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","y","z"]),defaults:{x:"0",y:"0",z:"0",pointsAtX:"0",pointsAtY:"0",pointsAtZ:"0",specularExponent:"1"},content:new Set(["animate","set"])},feTile:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["animate","set"])},feTurbulence:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["baseFrequency","class","numOctaves","seed","stitchTiles","style","type"]),defaults:{baseFrequency:"0",numOctaves:"1",seed:"0",stitchTiles:"noStitch",type:"turbulence"},content:new Set(["animate","set"])},filter:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","filterRes","filterUnits","height","href","primitiveUnits","style","width","x","xlink:href","y"]),defaults:{primitiveUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},deprecated:{unsafe:new Set(["filterRes"])},contentGroups:new Set(["descriptive","filterPrimitive"]),content:new Set(["animate","set"])},font:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","style","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"horiz-origin-x":"0","horiz-origin-y":"0"},deprecated:{unsafe:new Set(["horiz-origin-x","horiz-origin-y","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["descriptive"]),content:new Set(["font-face","glyph","hkern","missing-glyph","vkern"])},"font-face":{attrsGroups:new Set(["core"]),attrs:new Set(["font-family","font-style","font-variant","font-weight","font-stretch","font-size","unicode-range","units-per-em","panose-1","stemv","stemh","slope","cap-height","x-height","accent-height","ascent","descent","widths","bbox","ideographic","alphabetic","mathematical","hanging","v-ideographic","v-alphabetic","v-mathematical","v-hanging","underline-position","underline-thickness","strikethrough-position","strikethrough-thickness","overline-position","overline-thickness"]),defaults:{"font-style":"all","font-variant":"normal","font-weight":"all","font-stretch":"normal","unicode-range":"U+0-10FFFF","units-per-em":"1000","panose-1":"0 0 0 0 0 0 0 0 0 0",slope:"0"},deprecated:{unsafe:new Set(["accent-height","alphabetic","ascent","bbox","cap-height","descent","hanging","ideographic","mathematical","panose-1","slope","stemh","stemv","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height"])},contentGroups:new Set(["descriptive"]),content:new Set(["font-face-src"])},"font-face-format":{attrsGroups:new Set(["core"]),attrs:new Set(["string"]),deprecated:{unsafe:new Set(["string"])}},"font-face-name":{attrsGroups:new Set(["core"]),attrs:new Set(["name"]),deprecated:{unsafe:new Set(["name"])}},"font-face-src":{attrsGroups:new Set(["core"]),content:new Set(["font-face-name","font-face-uri"])},"font-face-uri":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["href","xlink:href"]),content:new Set(["font-face-format"])},foreignObject:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","style","transform","width","x","y"]),defaults:{x:"0",y:"0"}},g:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyph:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["arabic-form","class","d","glyph-name","horiz-adv-x","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"arabic-form":"initial"},deprecated:{unsafe:new Set(["arabic-form","glyph-name","horiz-adv-x","orientation","unicode","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyphRef:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),deprecated:{unsafe:new Set(["horiz-adv-x","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},hatch:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","hatchContentUnits","hatchUnits","pitch","rotate","style","transform","x","y"]),defaults:{hatchUnits:"objectBoundingBox",hatchContentUnits:"userSpaceOnUse",x:"0",y:"0",pitch:"0",rotate:"0"},contentGroups:new Set(["animation","descriptive"]),content:new Set(["hatchPath"])},hatchPath:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","d","offset"]),defaults:{offset:"0"},contentGroups:new Set(["animation","descriptive"])},hkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"]),deprecated:{unsafe:new Set(["g1","g2","k","u1","u2"])}},image:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","preserveAspectRatio","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive"])},line:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform","x1","x2","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"0",y2:"0"},contentGroups:new Set(["animation","descriptive"])},linearGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","gradientTransform","gradientUnits","href","spreadMethod","style","x1","x2","xlink:href","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"100%",y2:"0",spreadMethod:"pad"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},marker:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{markerUnits:"strokeWidth",refX:"0",refY:"0",markerWidth:"3",markerHeight:"3"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mask:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","mask-type","maskContentUnits","maskUnits","style","width","x","y"]),defaults:{maskUnits:"objectBoundingBox",maskContentUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},metadata:{attrsGroups:new Set(["core"])},"missing-glyph":{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),deprecated:{unsafe:new Set(["horiz-adv-x","vert-adv-y","vert-origin-x","vert-origin-y"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mpath:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","href","xlink:href"]),contentGroups:new Set(["descriptive"])},path:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","d","externalResourcesRequired","pathLength","style","transform"]),contentGroups:new Set(["animation","descriptive"])},pattern:{attrsGroups:new Set(["conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","style","viewBox","width","x","xlink:href","y"]),defaults:{patternUnits:"objectBoundingBox",patternContentUnits:"userSpaceOnUse",x:"0",y:"0",width:"0",height:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},polygon:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},polyline:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},radialGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","fr","fx","fy","gradientTransform","gradientUnits","href","r","spreadMethod","style","xlink:href"]),defaults:{gradientUnits:"objectBoundingBox",cx:"50%",cy:"50%",r:"50%"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},meshGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","x","y","gradientUnits","transform"]),contentGroups:new Set(["descriptive","paintServer","animation"]),content:new Set(["meshRow"])},meshRow:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["meshPatch"])},meshPatch:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["stop"])},rect:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","rx","ry","style","transform","width","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},script:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","type","href","xlink:href"])},set:{attrsGroups:new Set(["animation","animationAttributeTarget","animationTiming","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","to"]),contentGroups:new Set(["descriptive"])},solidColor:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["paintServer"])},stop:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style","offset","path"]),content:new Set(["animate","animateColor","set"])},style:{attrsGroups:new Set(["core"]),attrs:new Set(["type","media","title"]),defaults:{type:"text/css"}},svg:{attrsGroups:new Set(["conditionalProcessing","core","documentEvent","graphicalEvent","presentation"]),attrs:new Set(["baseProfile","class","contentScriptType","contentStyleType","height","preserveAspectRatio","style","version","viewBox","width","x","y","zoomAndPan"]),defaults:{x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",zoomAndPan:"magnify",version:"1.1",baseProfile:"none",contentScriptType:"application/ecmascript",contentStyleType:"text/css"},deprecated:{safe:new Set(["version"]),unsafe:new Set(["baseProfile","contentScriptType","contentStyleType","zoomAndPan"])},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},switch:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["a","foreignObject","g","image","svg","switch","text","use"])},symbol:{attrsGroups:new Set(["core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{refX:"0",refY:"0"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},text:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","transform","x","y"]),defaults:{x:"0",y:"0",lengthAdjust:"spacing"},contentGroups:new Set(["animation","descriptive","textContentChild"]),content:new Set(["a"])},textPath:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","d","externalResourcesRequired","href","method","spacing","startOffset","style","xlink:href"]),defaults:{startOffset:"0",method:"align",spacing:"exact"},contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},title:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},tref:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","style","xlink:href"]),contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateColor","set"])},tspan:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","x","y"]),contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},use:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},view:{attrsGroups:new Set(["core"]),attrs:new Set(["externalResourcesRequired","preserveAspectRatio","viewBox","viewTarget","zoomAndPan"]),deprecated:{unsafe:new Set(["viewTarget","zoomAndPan"])},contentGroups:new Set(["descriptive"])},vkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"]),deprecated:{unsafe:new Set(["g1","g2","k","u1","u2"])}}},_E=new Set(["http://creativecommons.org/ns#","http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd","http://krita.org/namespaces/svg/krita","http://ns.adobe.com/AdobeIllustrator/10.0/","http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/","http://ns.adobe.com/Extensibility/1.0/","http://ns.adobe.com/Flows/1.0/","http://ns.adobe.com/GenericCustomNamespace/1.0/","http://ns.adobe.com/Graphs/1.0/","http://ns.adobe.com/ImageReplacement/1.0/","http://ns.adobe.com/SaveForWeb/1.0/","http://ns.adobe.com/Variables/1.0/","http://ns.adobe.com/XPath/1.0/","http://purl.org/dc/elements/1.1/","http://schemas.microsoft.com/visio/2003/SVGExtensions/","http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","http://taptrix.com/vectorillustrator/svg_extensions","http://www.bohemiancoding.com/sketch/ns","http://www.figma.com/figma/ns","http://www.inkscape.org/namespaces/inkscape","http://www.serif.com/","http://www.vector.evaxdesign.sk","http://www.w3.org/1999/02/22-rdf-syntax-ns#","https://boxy-svg.com"]),y0=new Set(["clip-path","color-profile","fill","filter","marker-end","marker-mid","marker-start","mask","stroke","style"]),b0=new Set(["clip-rule","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","dominant-baseline","fill-opacity","fill-rule","fill","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","font","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","marker-end","marker-mid","marker-start","marker","paint-order","pointer-events","shape-rendering","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-rendering","transform","visibility","word-spacing","writing-mode"]),__=new Set(["clip-path","display","filter","mask","opacity","text-decoration","transform","unicode-bidi"]),kE={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#639",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},SE={"#f0ffff":"azure","#f5f5dc":"beige","#ffe4c4":"bisque","#a52a2a":"brown","#ff7f50":"coral","#ffd700":"gold","#808080":"gray","#008000":"green","#4b0082":"indigo","#fffff0":"ivory","#f0e68c":"khaki","#faf0e6":"linen","#800000":"maroon","#000080":"navy","#808000":"olive","#ffa500":"orange","#da70d6":"orchid","#cd853f":"peru","#ffc0cb":"pink","#dda0dd":"plum","#800080":"purple","#f00":"red","#ff0000":"red","#fa8072":"salmon","#a0522d":"sienna","#c0c0c0":"silver","#fffafa":"snow","#d2b48c":"tan","#008080":"teal","#ff6347":"tomato","#ee82ee":"violet","#f5deb3":"wheat"},Tx=new Set(["color","fill","flood-color","lighting-color","stop-color","stroke"]),CE={treeStructural:new Set(["empty","first-child","first-of-type","last-child","last-of-type","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","root"]),functional:new Set(["is","not","where","has"])},Qo=0,Mt=1,_n=2,ei=3,yr=4,$a=5,v0=6,Fi=7,as=8,Ln=9,hn=10,Mr=11,Pn=12,Dr=13,Df=14,os=15,Wi=16,Vi=17,vs=18,ta=19,Na=20,Xn=21,dn=22,Pi=23,Qs=24,ji=25,zce=0;function Ei(e){return e>=48&&e<=57}function gl(e){return Ei(e)||e>=65&&e<=70||e>=97&&e<=102}function k_(e){return e>=65&&e<=90}function Fce(e){return e>=97&&e<=122}function Bce(e){return k_(e)||Fce(e)}function Uce(e){return e>=128}function bg(e){return Bce(e)||Uce(e)||e===95}function _R(e){return bg(e)||Ei(e)||e===45}function Hce(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function vg(e){return e===10||e===13||e===12}function dc(e){return vg(e)||e===32||e===9}function to(e,t){return!(e!==92||vg(t)||t===zce)}function pm(e,t,n){return e===45?bg(t)||t===45||to(t,n):bg(e)?!0:e===92?to(e,t):!1}function qy(e,t,n){return e===43||e===45?Ei(t)?2:t===46&&Ei(n)?3:0:e===46?Ei(t)?2:0:Ei(e)?1:0}function kR(e){return e===65279||e===65534?1:0}const jx=new Array(128),Wce=128,mm=130,SR=131,S_=132,CR=133;for(let e=0;e<jx.length;e++)jx[e]=dc(e)&&mm||Ei(e)&&SR||bg(e)&&S_||Hce(e)&&CR||e||Wce;function Yy(e){return e<128?jx[e]:S_}function Lu(e,t){return t<e.length?e.charCodeAt(t):0}function Ax(e,t,n){return n===13&&Lu(e,t+1)===10?2:1}function Iu(e,t,n){let r=e.charCodeAt(t);return k_(r)&&(r=r|32),r===n}function hf(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const s=r.charCodeAt(i-t);let a=e.charCodeAt(i);if(k_(a)&&(a=a|32),a!==s)return!1}return!0}function Vce(e,t){for(;t>=0&&dc(e.charCodeAt(t));t--);return t+1}function Rp(e,t){for(;t<e.length&&dc(e.charCodeAt(t));t++);return t}function Xy(e,t){for(;t<e.length&&Ei(e.charCodeAt(t));t++);return t}function Ku(e,t){if(t+=2,gl(Lu(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&gl(Lu(e,t));t++);const n=Lu(e,t);dc(n)&&(t+=Ax(e,t,n))}return t}function Mp(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!_R(n)){if(to(n,Lu(e,t+1))){t=Ku(e,t)-1;continue}break}}return t}function x0(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),Ei(n)&&(t=Xy(e,t+1),n=e.charCodeAt(t)),n===46&&Ei(e.charCodeAt(t+1))&&(t+=2,t=Xy(e,t)),Iu(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),Ei(n)&&(t=Xy(e,t+1+r+1))}return t}function Ky(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}to(n,Lu(e,t+1))&&(t=Ku(e,t))}return t}function ER(e){if(e.length===1&&!gl(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const TR=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token","comment-token"],Gce=16*1024;function xg(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,Gce)):e}const EE=10,qce=12,TE=13;function jE(e){const t=e.source,n=t.length,r=t.length>0?kR(t.charCodeAt(0)):0,i=xg(e.lines,n),s=xg(e.columns,n);let a=e.startLine,o=e.startColumn;for(let u=r;u<n;u++){const d=t.charCodeAt(u);i[u]=a,s[u]=o++,(d===EE||d===TE||d===qce)&&(d===TE&&u+1<n&&t.charCodeAt(u+1)===EE&&(u++,i[u]=a,s[u]=o),a++,o=1)}i[n]=a,s[n]=o,e.lines=i,e.columns=s,e.computed=!0}let Yce=class{constructor(t,n,r,i){this.setSource(t,n,r,i),this.lines=null,this.columns=null}setSource(t="",n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||jE(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||jE(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}};const Ha=16777215,Wa=24,hc=new Uint8Array(32);hc[_n]=dn;hc[Xn]=dn;hc[ta]=Na;hc[Pi]=Qs;function AE(e){return hc[e]!==0}let Xce=class{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=xg(this.offsetAndType,t.length+1),s=xg(this.balance,t.length+1);let a=0,o=-1,u=0,d=t.length;this.offsetAndType=null,this.balance=null,s.fill(0),n(t,(h,p,m)=>{const g=a++;if(i[g]=h<<Wa|m,o===-1&&(o=p),s[g]=d,h===u){const v=s[d];s[d]=g,d=v,u=hc[i[v]>>Wa]}else AE(h)&&(d=g,u=hc[h])}),i[a]=Qo<<Wa|r,s[a]=a;for(let h=0;h<a;h++){const p=s[h];if(p<=h){const m=s[p];m!==h&&(s[h]=m)}else p>a&&(s[h]=a)}this.source=t,this.firstCharOffset=o===-1?0:o,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>Wa:Qo}lookupTypeNonSC(t){for(let n=this.tokenIndex;n<this.tokenCount;n++){const r=this.offsetAndType[n]>>Wa;if(r!==Dr&&r!==ji&&t--===0)return r}return Qo}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&Ha:this.source.length}lookupOffsetNonSC(t){for(let n=this.tokenIndex;n<this.tokenCount;n++){const r=this.offsetAndType[n]>>Wa;if(r!==Dr&&r!==ji&&t--===0)return n-this.tokenIndex}return Qo}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?hf(this.source,this.offsetAndType[t-1]&Ha,this.offsetAndType[t]&Ha,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&Ha:this.offsetAndType[this.tokenCount]&Ha:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===Ln&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===Ln&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&Ha,n=this.offsetAndType[n],this.tokenType=n>>Wa,this.tokenEnd=n&Ha):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>Wa,this.tokenEnd=t&Ha):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=Qo,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Dr||this.tokenType===ji;)this.next()}skipUntilBalanced(t,n){let r=t,i=0,s=0;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(s=r>0?this.offsetAndType[r-1]&Ha:this.firstCharOffset,n(this.source.charCodeAt(s))){case 1:break e;case 2:r++;break e;default:AE(this.offsetAndType[r]>>Wa)&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,s=this.offsetAndType[n],a=s&Ha,o=s>>Wa;r=a,t(o,i,a,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,s)=>{t[s]={idx:s,type:TR[n],chunk:this.source.substring(r,i),balance:this.balance[s]}}),t}};function w0(e,t){function n(p){return p<o?e.charCodeAt(p):0}function r(){if(d=x0(e,d),pm(n(d),n(d+1),n(d+2))){h=Pn,d=Mp(e,d);return}if(n(d)===37){h=Mr,d++;return}h=hn}function i(){const p=d;if(d=Mp(e,d),hf(e,p,d,"url")&&n(d)===40){if(d=Rp(e,d+1),n(d)===34||n(d)===39){h=_n,d=p+4;return}a();return}if(n(d)===40){h=_n,d++;return}h=Mt}function s(p){for(p||(p=n(d++)),h=$a;d<e.length;d++){const m=e.charCodeAt(d);switch(Yy(m)){case p:d++;return;case mm:if(vg(m)){d+=Ax(e,d,m),h=v0;return}break;case 92:if(d===e.length-1)break;const g=n(d+1);vg(g)?d+=Ax(e,d+1,g):to(m,g)&&(d=Ku(e,d)-1);break}}}function a(){for(h=Fi,d=Rp(e,d);d<e.length;d++){const p=e.charCodeAt(d);switch(Yy(p)){case 41:d++;return;case mm:if(d=Rp(e,d),n(d)===41||d>=e.length){d<e.length&&d++;return}d=Ky(e,d),h=as;return;case 34:case 39:case 40:case CR:d=Ky(e,d),h=as;return;case 92:if(to(p,n(d+1))){d=Ku(e,d)-1;break}d=Ky(e,d),h=as;return}}}e=String(e||"");const o=e.length;let u=kR(n(0)),d=u,h;for(;d<o;){const p=e.charCodeAt(d);switch(Yy(p)){case mm:h=Dr,d=Rp(e,d+1);break;case 34:s();break;case 35:_R(n(d+1))||to(n(d+1),n(d+2))?(h=yr,d=Mp(e,d+1)):(h=Ln,d++);break;case 39:s();break;case 40:h=Xn,d++;break;case 41:h=dn,d++;break;case 43:qy(p,n(d+1),n(d+2))?r():(h=Ln,d++);break;case 44:h=vs,d++;break;case 45:qy(p,n(d+1),n(d+2))?r():n(d+1)===45&&n(d+2)===62?(h=os,d=d+3):pm(p,n(d+1),n(d+2))?i():(h=Ln,d++);break;case 46:qy(p,n(d+1),n(d+2))?r():(h=Ln,d++);break;case 47:n(d+1)===42?(h=ji,d=e.indexOf("*/",d+2),d=d===-1?e.length:d+2):(h=Ln,d++);break;case 58:h=Wi,d++;break;case 59:h=Vi,d++;break;case 60:n(d+1)===33&&n(d+2)===45&&n(d+3)===45?(h=Df,d=d+4):(h=Ln,d++);break;case 64:pm(n(d+1),n(d+2),n(d+3))?(h=ei,d=Mp(e,d+1)):(h=Ln,d++);break;case 91:h=ta,d++;break;case 92:to(p,n(d+1))?i():(h=Ln,d++);break;case 93:h=Na,d++;break;case 123:h=Pi,d++;break;case 125:h=Qs,d++;break;case SR:r();break;case S_:i();break;default:h=Ln,d++}t(h,u,u=d)}}let Oc=null,So=class fa{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return fa.createItem(t)}allocateCursor(t,n){let r;return Oc!==null?(r=Oc,Oc=Oc.cursor,r.prev=t,r.next=n,r.cursor=this.cursor):r={prev:t,next:n,cursor:this.cursor},this.cursor=r,r}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Oc,Oc=t}updateCursors(t,n,r,i){let{cursor:s}=this;for(;s!==null;)s.prev===t&&(s.prev=n),s.next===r&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let n=this.head;n!==null;n=n.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let r of t){const i=fa.createItem(r);n!==null?n.next=i:this.head=i,i.prev=n,n=i}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,n=this){const r=this.allocateCursor(null,this.head);for(;r.next!==null;){const i=r.next;r.next=i.next,t.call(n,i.data,i,this)}this.releaseCursor()}forEachRight(t,n=this){const r=this.allocateCursor(this.tail,null);for(;r.prev!==null;){const i=r.prev;r.prev=i.prev,t.call(n,i.data,i,this)}this.releaseCursor()}reduce(t,n,r=this){let i=this.allocateCursor(null,this.head),s=n,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(t,n,r=this){let i=this.allocateCursor(this.tail,null),s=n,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}some(t,n=this){for(let r=this.head;r!==null;r=r.next)if(t.call(n,r.data,r,this))return!0;return!1}map(t,n=this){const r=new fa;for(let i=this.head;i!==null;i=i.next)r.appendData(t.call(n,i.data,i,this));return r}filter(t,n=this){const r=new fa;for(let i=this.head;i!==null;i=i.next)t.call(n,i.data,i,this)&&r.appendData(i.data);return r}nextUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(null,t);for(;i.next!==null;){const s=i.next;if(i.next=s.next,n.call(r,s.data,s,this))break}this.releaseCursor()}prevUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(t,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,n.call(r,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new fa;for(let n of this)t.appendData(n);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(fa.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(fa.createItem(t))}insert(t,n=null){if(n!==null)if(this.updateCursors(n.prev,t,n,t),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=t,n.prev=t,t.next=n,this.updateCursors(null,t)}else n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(fa.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(fa.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(fa.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,n){return t.head===null?this:(n!=null?(this.updateCursors(n.prev,t.tail,n,t.head),n.prev!==null?(n.prev.next=t.head,t.head.prev=n.prev):this.head=t.head,n.prev=t.tail,t.tail.next=n):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,n){"head"in n?this.insertList(n,t):this.insert(n,t),this.remove(t)}};function _0(e,t){const n=Object.create(SyntaxError.prototype),r=new Error;return Object.assign(n,{name:e,message:t,get stack(){return(r.stack||"").replace(/^(.+\n){1,3}/,`${e}: ${t}
`)}})}const Zy=100,PE=60,NE="    ";function OE({source:e,line:t,column:n,baseLine:r,baseColumn:i},s){function a(v,w){return d.slice(v,w).map((S,x)=>String(v+x+1).padStart(m)+" |"+S).join(`
`)}const o=`
`.repeat(Math.max(r-1,0)),u=" ".repeat(Math.max(i-1,0)),d=(o+u+e).split(/\r\n?|\n|\f/),h=Math.max(1,t-s)-1,p=Math.min(t+s,d.length+1),m=Math.max(4,String(p).length)+1;let g=0;n+=(NE.length-1)*(d[t-1].substr(0,n-1).match(/\t/g)||[]).length,n>Zy&&(g=n-PE+3,n=PE-2);for(let v=h;v<=p;v++)v>=0&&v<d.length&&(d[v]=d[v].replace(/\t/g,NE),d[v]=(g>0&&d[v].length>g?"":"")+d[v].substr(g,Zy-2)+(d[v].length>g+Zy-1?"":""));return[a(h,t),new Array(n+m+2).join("-")+"^",a(t,p)].filter(Boolean).join(`
`).replace(/^(\s+\d+\s+\|\n)+/,"").replace(/\n(\s+\d+\s+\|)+$/,"")}function RE(e,t,n,r,i,s=1,a=1){return Object.assign(_0("SyntaxError",e),{source:t,offset:n,line:r,column:i,sourceFragment(u){return OE({source:t,line:r,column:i,baseLine:s,baseColumn:a},isNaN(u)?0:u)},get formattedMessage(){return`Parse error: ${e}
`+OE({source:t,line:r,column:i,baseLine:s,baseColumn:a},2)}})}function Kce(e){const t=this.createList();let n=!1;const r={recognizer:e};for(;!this.eof;){switch(this.tokenType){case ji:this.next();continue;case Dr:n=!0,this.next();continue}let i=e.getNode.call(this,r);if(i===void 0)break;n&&(e.onWhiteSpace&&e.onWhiteSpace.call(this,i,t,r),n=!1),t.push(i)}return n&&e.onWhiteSpace&&e.onWhiteSpace.call(this,null,t,r),t}const ME=()=>{},Zce=33,Qce=35,Qy=59,LE=123,IE=0;function Jce(e){return function(){return this[e]()}}function Jy(e){const t=Object.create(null);for(const n of Object.keys(e)){const r=e[n],i=r.parse||r;i&&(t[n]=i)}return t}function eue(e){const t={context:Object.create(null),features:Object.assign(Object.create(null),e.features),scope:Object.assign(Object.create(null),e.scope),atrule:Jy(e.atrule),pseudo:Jy(e.pseudo),node:Jy(e.node)};for(const[n,r]of Object.entries(e.parseContext))switch(typeof r){case"function":t.context[n]=r;break;case"string":t.context[n]=Jce(r);break}return{config:t,...t,...t.node}}function tue(e){let t="",n="<unknown>",r=!1,i=ME,s=!1;const a=new Yce,o=Object.assign(new Xce,eue(e||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:Kce,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(d){return d===LE?1:0},consumeUntilLeftCurlyBracketOrSemicolon(d){return d===LE||d===Qy?1:0},consumeUntilExclamationMarkOrSemicolon(d){return d===Zce||d===Qy?1:0},consumeUntilSemicolonIncluded(d){return d===Qy?2:0},createList(){return new So},createSingleNodeList(d){return new So().appendData(d)},getFirstListNode(d){return d&&d.first},getLastListNode(d){return d&&d.last},parseWithFallback(d,h){const p=this.tokenIndex;try{return d.call(this)}catch(m){if(s)throw m;this.skip(p-this.tokenIndex);const g=h.call(this);return s=!0,i(m,g),s=!1,g}},lookupNonWSType(d){let h;do if(h=this.lookupType(d++),h!==Dr&&h!==ji)return h;while(h!==IE);return IE},charCodeAt(d){return d>=0&&d<t.length?t.charCodeAt(d):0},substring(d,h){return t.substring(d,h)},substrToCursor(d){return this.source.substring(d,this.tokenStart)},cmpChar(d,h){return Iu(t,d,h)},cmpStr(d,h,p){return hf(t,d,h,p)},consume(d){const h=this.tokenStart;return this.eat(d),this.substrToCursor(h)},consumeFunctionName(){const d=t.substring(this.tokenStart,this.tokenEnd-1);return this.eat(_n),d},consumeNumber(d){const h=t.substring(this.tokenStart,x0(t,this.tokenStart));return this.eat(d),h},eat(d){if(this.tokenType!==d){const h=TR[d].slice(0,-6).replace(/-/g," ").replace(/^./,g=>g.toUpperCase());let p=`${/[[\](){}]/.test(h)?`"${h}"`:h} is expected`,m=this.tokenStart;switch(d){case Mt:this.tokenType===_n||this.tokenType===Fi?(m=this.tokenEnd-1,p="Identifier is expected but function found"):p="Identifier is expected";break;case yr:this.isDelim(Qce)&&(this.next(),m++,p="Name is expected");break;case Mr:this.tokenType===hn&&(m=this.tokenEnd,p="Percent sign is expected");break}this.error(p,m)}this.next()},eatIdent(d){(this.tokenType!==Mt||this.lookupValue(0,d)===!1)&&this.error(`Identifier "${d}" is expected`),this.next()},eatDelim(d){this.isDelim(d)||this.error(`Delim "${String.fromCharCode(d)}" is expected`),this.next()},getLocation(d,h){return r?a.getLocationRange(d,h,n):null},getLocationFromList(d){if(r){const h=this.getFirstListNode(d),p=this.getLastListNode(d);return a.getLocationRange(h!==null?h.loc.start.offset-a.startOffset:this.tokenStart,p!==null?p.loc.end.offset-a.startOffset:this.tokenStart,n)}return null},error(d,h){const p=typeof h<"u"&&h<t.length?a.getLocation(h):this.eof?a.getLocation(Vce(t,t.length-1)):a.getLocation(this.tokenStart);throw new RE(d||"Unexpected input",t,p.offset,p.line,p.column,a.startLine,a.startColumn)}});return Object.assign(function(d,h){t=d,h=h||{},o.setSource(t,w0),a.setSource(t,h.offset,h.line,h.column),n=h.filename||"<unknown>",r=!!h.positions,i=typeof h.onParseError=="function"?h.onParseError:ME,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in h?!!h.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in h?!!h.parseRulePrelude:!0,o.parseValue="parseValue"in h?!!h.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in h?!!h.parseCustomProperty:!1;const{context:p="default",onComment:m}=h;if(!(p in o.context))throw new Error("Unknown context `"+p+"`");typeof m=="function"&&o.forEachToken((v,w,S)=>{if(v===ji){const x=o.getLocation(w,S),k=hf(t,S-2,S,"*/")?t.slice(w+2,S-2):t.slice(w+2,S);m(k,x)}});const g=o.context[p].call(o,h);return o.eof||o.error(),g},{SyntaxError:RE,config:o.config})}var C_={},E_={},$E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");E_.encode=function(e){if(0<=e&&e<$E.length)return $E[e];throw new TypeError("Must be between 0 and 63: "+e)};E_.decode=function(e){var t=65,n=90,r=97,i=122,s=48,a=57,o=43,u=47,d=26,h=52;return t<=e&&e<=n?e-t:r<=e&&e<=i?e-r+d:s<=e&&e<=a?e-s+h:e==o?62:e==u?63:-1};var jR=E_,T_=5,AR=1<<T_,PR=AR-1,NR=AR;function nue(e){return e<0?(-e<<1)+1:(e<<1)+0}function rue(e){var t=(e&1)===1,n=e>>1;return t?-n:n}C_.encode=function(t){var n="",r,i=nue(t);do r=i&PR,i>>>=T_,i>0&&(r|=NR),n+=jR.encode(r);while(i>0);return n};C_.decode=function(t,n,r){var i=t.length,s=0,a=0,o,u;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(u=jR.decode(t.charCodeAt(n++)),u===-1)throw new Error("Invalid base64 digit: "+t.charAt(n-1));o=!!(u&NR),u&=PR,s=s+(u<<a),a+=T_}while(o);r.value=rue(s),r.rest=n};var k0={};(function(e){function t(D,R,W){if(R in D)return D[R];if(arguments.length===3)return W;throw new Error('"'+R+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function i(D){var R=D.match(n);return R?{scheme:R[1],auth:R[2],host:R[3],port:R[4],path:R[5]}:null}e.urlParse=i;function s(D){var R="";return D.scheme&&(R+=D.scheme+":"),R+="//",D.auth&&(R+=D.auth+"@"),D.host&&(R+=D.host),D.port&&(R+=":"+D.port),D.path&&(R+=D.path),R}e.urlGenerate=s;var a=32;function o(D){var R=[];return function(W){for(var ce=0;ce<R.length;ce++)if(R[ce].input===W){var te=R[0];return R[0]=R[ce],R[ce]=te,R[0].result}var me=D(W);return R.unshift({input:W,result:me}),R.length>a&&R.pop(),me}}var u=o(function(R){var W=R,ce=i(R);if(ce){if(!ce.path)return R;W=ce.path}for(var te=e.isAbsolute(W),me=[],H=0,ge=0;;)if(H=ge,ge=W.indexOf("/",H),ge===-1){me.push(W.slice(H));break}else for(me.push(W.slice(H,ge));ge<W.length&&W[ge]==="/";)ge++;for(var Ee,ke=0,ge=me.length-1;ge>=0;ge--)Ee=me[ge],Ee==="."?me.splice(ge,1):Ee===".."?ke++:ke>0&&(Ee===""?(me.splice(ge+1,ke),ke=0):(me.splice(ge,2),ke--));return W=me.join("/"),W===""&&(W=te?"/":"."),ce?(ce.path=W,s(ce)):W});e.normalize=u;function d(D,R){D===""&&(D="."),R===""&&(R=".");var W=i(R),ce=i(D);if(ce&&(D=ce.path||"/"),W&&!W.scheme)return ce&&(W.scheme=ce.scheme),s(W);if(W||R.match(r))return R;if(ce&&!ce.host&&!ce.path)return ce.host=R,s(ce);var te=R.charAt(0)==="/"?R:u(D.replace(/\/+$/,"")+"/"+R);return ce?(ce.path=te,s(ce)):te}e.join=d,e.isAbsolute=function(D){return D.charAt(0)==="/"||n.test(D)};function h(D,R){D===""&&(D="."),D=D.replace(/\/$/,"");for(var W=0;R.indexOf(D+"/")!==0;){var ce=D.lastIndexOf("/");if(ce<0||(D=D.slice(0,ce),D.match(/^([^\/]+:\/)?\/*$/)))return R;++W}return Array(W+1).join("../")+R.substr(D.length+1)}e.relative=h;var p=function(){var D=Object.create(null);return!("__proto__"in D)}();function m(D){return D}function g(D){return w(D)?"$"+D:D}e.toSetString=p?m:g;function v(D){return w(D)?D.slice(1):D}e.fromSetString=p?m:v;function w(D){if(!D)return!1;var R=D.length;if(R<9||D.charCodeAt(R-1)!==95||D.charCodeAt(R-2)!==95||D.charCodeAt(R-3)!==111||D.charCodeAt(R-4)!==116||D.charCodeAt(R-5)!==111||D.charCodeAt(R-6)!==114||D.charCodeAt(R-7)!==112||D.charCodeAt(R-8)!==95||D.charCodeAt(R-9)!==95)return!1;for(var W=R-10;W>=0;W--)if(D.charCodeAt(W)!==36)return!1;return!0}function S(D,R,W){var ce=O(D.source,R.source);return ce!==0||(ce=D.originalLine-R.originalLine,ce!==0)||(ce=D.originalColumn-R.originalColumn,ce!==0||W)||(ce=D.generatedColumn-R.generatedColumn,ce!==0)||(ce=D.generatedLine-R.generatedLine,ce!==0)?ce:O(D.name,R.name)}e.compareByOriginalPositions=S;function x(D,R,W){var ce;return ce=D.originalLine-R.originalLine,ce!==0||(ce=D.originalColumn-R.originalColumn,ce!==0||W)||(ce=D.generatedColumn-R.generatedColumn,ce!==0)||(ce=D.generatedLine-R.generatedLine,ce!==0)?ce:O(D.name,R.name)}e.compareByOriginalPositionsNoSource=x;function k(D,R,W){var ce=D.generatedLine-R.generatedLine;return ce!==0||(ce=D.generatedColumn-R.generatedColumn,ce!==0||W)||(ce=O(D.source,R.source),ce!==0)||(ce=D.originalLine-R.originalLine,ce!==0)||(ce=D.originalColumn-R.originalColumn,ce!==0)?ce:O(D.name,R.name)}e.compareByGeneratedPositionsDeflated=k;function j(D,R,W){var ce=D.generatedColumn-R.generatedColumn;return ce!==0||W||(ce=O(D.source,R.source),ce!==0)||(ce=D.originalLine-R.originalLine,ce!==0)||(ce=D.originalColumn-R.originalColumn,ce!==0)?ce:O(D.name,R.name)}e.compareByGeneratedPositionsDeflatedNoLine=j;function O(D,R){return D===R?0:D===null?1:R===null?-1:D>R?1:-1}function I(D,R){var W=D.generatedLine-R.generatedLine;return W!==0||(W=D.generatedColumn-R.generatedColumn,W!==0)||(W=O(D.source,R.source),W!==0)||(W=D.originalLine-R.originalLine,W!==0)||(W=D.originalColumn-R.originalColumn,W!==0)?W:O(D.name,R.name)}e.compareByGeneratedPositionsInflated=I;function E(D){return JSON.parse(D.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=E;function U(D,R,W){if(R=R||"",D&&(D[D.length-1]!=="/"&&R[0]!=="/"&&(D+="/"),R=D+R),W){var ce=i(W);if(!ce)throw new Error("sourceMapURL could not be parsed");if(ce.path){var te=ce.path.lastIndexOf("/");te>=0&&(ce.path=ce.path.substring(0,te+1))}R=d(s(ce),R)}return u(R)}e.computeSourceURL=U})(k0);var OR={},j_=k0,A_=Object.prototype.hasOwnProperty,nc=typeof Map<"u";function No(){this._array=[],this._set=nc?new Map:Object.create(null)}No.fromArray=function(t,n){for(var r=new No,i=0,s=t.length;i<s;i++)r.add(t[i],n);return r};No.prototype.size=function(){return nc?this._set.size:Object.getOwnPropertyNames(this._set).length};No.prototype.add=function(t,n){var r=nc?t:j_.toSetString(t),i=nc?this.has(t):A_.call(this._set,r),s=this._array.length;(!i||n)&&this._array.push(t),i||(nc?this._set.set(t,s):this._set[r]=s)};No.prototype.has=function(t){if(nc)return this._set.has(t);var n=j_.toSetString(t);return A_.call(this._set,n)};No.prototype.indexOf=function(t){if(nc){var n=this._set.get(t);if(n>=0)return n}else{var r=j_.toSetString(t);if(A_.call(this._set,r))return this._set[r]}throw new Error('"'+t+'" is not in the set.')};No.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};No.prototype.toArray=function(){return this._array.slice()};OR.ArraySet=No;var RR={},MR=k0;function iue(e,t){var n=e.generatedLine,r=t.generatedLine,i=e.generatedColumn,s=t.generatedColumn;return r>n||r==n&&s>=i||MR.compareByGeneratedPositionsInflated(e,t)<=0}function S0(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}S0.prototype.unsortedForEach=function(t,n){this._array.forEach(t,n)};S0.prototype.add=function(t){iue(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};S0.prototype.toArray=function(){return this._sorted||(this._array.sort(MR.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};RR.MappingList=S0;var Vd=C_,Zr=k0,wg=OR.ArraySet,sue=RR.MappingList;function Js(e){e||(e={}),this._file=Zr.getArg(e,"file",null),this._sourceRoot=Zr.getArg(e,"sourceRoot",null),this._skipValidation=Zr.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=Zr.getArg(e,"ignoreInvalidMapping",!1),this._sources=new wg,this._names=new wg,this._mappings=new sue,this._sourcesContents=null}Js.prototype._version=3;Js.fromSourceMap=function(t,n){var r=t.sourceRoot,i=new Js(Object.assign(n||{},{file:t.file,sourceRoot:r}));return t.eachMapping(function(s){var a={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(a.source=s.source,r!=null&&(a.source=Zr.relative(r,a.source)),a.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(a.name=s.name)),i.addMapping(a)}),t.sources.forEach(function(s){var a=s;r!==null&&(a=Zr.relative(r,s)),i._sources.has(a)||i._sources.add(a);var o=t.sourceContentFor(s);o!=null&&i.setSourceContent(s,o)}),i};Js.prototype.addMapping=function(t){var n=Zr.getArg(t,"generated"),r=Zr.getArg(t,"original",null),i=Zr.getArg(t,"source",null),s=Zr.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(n,r,i,s)===!1||(i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:s}))};Js.prototype.setSourceContent=function(t,n){var r=t;this._sourceRoot!=null&&(r=Zr.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Zr.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Zr.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Js.prototype.applySourceMap=function(t,n,r){var i=n;if(n==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=t.file}var s=this._sourceRoot;s!=null&&(i=Zr.relative(s,i));var a=new wg,o=new wg;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){var d=t.originalPositionFor({line:u.originalLine,column:u.originalColumn});d.source!=null&&(u.source=d.source,r!=null&&(u.source=Zr.join(r,u.source)),s!=null&&(u.source=Zr.relative(s,u.source)),u.originalLine=d.line,u.originalColumn=d.column,d.name!=null&&(u.name=d.name))}var h=u.source;h!=null&&!a.has(h)&&a.add(h);var p=u.name;p!=null&&!o.has(p)&&o.add(p)},this),this._sources=a,this._names=o,t.sources.forEach(function(u){var d=t.sourceContentFor(u);d!=null&&(r!=null&&(u=Zr.join(r,u)),s!=null&&(u=Zr.relative(s,u)),this.setSourceContent(u,d))},this)};Js.prototype._validateMapping=function(t,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number"){var s="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!n&&!r&&!i)){if(t&&"line"in t&&"column"in t&&n&&"line"in n&&"column"in n&&t.line>0&&t.column>=0&&n.line>0&&n.column>=0&&r)return;var s="Invalid mapping: "+JSON.stringify({generated:t,source:r,original:n,name:i});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(s),!1;throw new Error(s)}};Js.prototype._serializeMappings=function(){for(var t=0,n=1,r=0,i=0,s=0,a=0,o="",u,d,h,p,m=this._mappings.toArray(),g=0,v=m.length;g<v;g++){if(d=m[g],u="",d.generatedLine!==n)for(t=0;d.generatedLine!==n;)u+=";",n++;else if(g>0){if(!Zr.compareByGeneratedPositionsInflated(d,m[g-1]))continue;u+=","}u+=Vd.encode(d.generatedColumn-t),t=d.generatedColumn,d.source!=null&&(p=this._sources.indexOf(d.source),u+=Vd.encode(p-a),a=p,u+=Vd.encode(d.originalLine-1-i),i=d.originalLine-1,u+=Vd.encode(d.originalColumn-r),r=d.originalColumn,d.name!=null&&(h=this._names.indexOf(d.name),u+=Vd.encode(h-s),s=h)),o+=u}return o};Js.prototype._generateSourcesContent=function(t,n){return t.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Zr.relative(n,r));var i=Zr.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Js.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};Js.prototype.toString=function(){return JSON.stringify(this.toJSON())};var LR=Js;const DE=new Set(["Atrule","Selector","Declaration"]);function aue(e){const t=new LR,n={line:1,column:0},r={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,u=!1;const d=e.node;e.node=function(m){if(m.loc&&m.loc.start&&DE.has(m.type)){const g=m.loc.start.line,v=m.loc.start.column-1;(r.line!==g||r.column!==v)&&(r.line=g,r.column=v,n.line=a,n.column=o,u&&(u=!1,(n.line!==i.line||n.column!==i.column)&&t.addMapping(s)),u=!0,t.addMapping({source:m.loc.source,original:r,generated:n}))}d.call(this,m),u&&DE.has(m.type)&&(i.line=a,i.column=o)};const h=e.emit;e.emit=function(m,g,v){for(let w=0;w<m.length;w++)m.charCodeAt(w)===10?(a++,o=0):o++;h(m,g,v)};const p=e.result;return e.result=function(){return u&&t.addMapping(s),{css:p(),map:t}},e}const oue=43,lue=45,eb=(e,t)=>{if(e===Ln&&(e=t),typeof e=="string"){const n=e.charCodeAt(0);return n>127?32768:n<<8}return e},IR=[[Mt,Mt],[Mt,_n],[Mt,Fi],[Mt,as],[Mt,"-"],[Mt,hn],[Mt,Mr],[Mt,Pn],[Mt,os],[Mt,Xn],[ei,Mt],[ei,_n],[ei,Fi],[ei,as],[ei,"-"],[ei,hn],[ei,Mr],[ei,Pn],[ei,os],[yr,Mt],[yr,_n],[yr,Fi],[yr,as],[yr,"-"],[yr,hn],[yr,Mr],[yr,Pn],[yr,os],[Pn,Mt],[Pn,_n],[Pn,Fi],[Pn,as],[Pn,"-"],[Pn,hn],[Pn,Mr],[Pn,Pn],[Pn,os],["#",Mt],["#",_n],["#",Fi],["#",as],["#","-"],["#",hn],["#",Mr],["#",Pn],["#",os],["-",Mt],["-",_n],["-",Fi],["-",as],["-","-"],["-",hn],["-",Mr],["-",Pn],["-",os],[hn,Mt],[hn,_n],[hn,Fi],[hn,as],[hn,hn],[hn,Mr],[hn,Pn],[hn,"%"],[hn,os],["@",Mt],["@",_n],["@",Fi],["@",as],["@","-"],["@",os],[".",hn],[".",Mr],[".",Pn],["+",hn],["+",Mr],["+",Pn],["/","*"]],cue=IR.concat([[Mt,yr],[Pn,yr],[yr,yr],[ei,Xn],[ei,$a],[ei,Wi],[Mr,Mr],[Mr,Pn],[Mr,_n],[Mr,"-"],[dn,Mt],[dn,_n],[dn,Mr],[dn,Pn],[dn,yr],[dn,"-"]]);function $R(e){const t=new Set(e.map(([n,r])=>eb(n)<<16|eb(r)));return function(n,r,i){const s=eb(r,i),a=i.charCodeAt(0);return(a===lue&&r!==Mt&&r!==_n&&r!==os||a===oue?t.has(n<<16|a<<8):t.has(n<<16|s))&&this.emit(" ",Dr,!0),s}}const uue=$R(IR),DR=$R(cue),zE=Object.freeze(Object.defineProperty({__proto__:null,safe:DR,spec:uue},Symbol.toStringTag,{value:"Module"})),due=92;function hue(e,t){if(typeof t=="function"){let n=null;e.children.forEach(r=>{n!==null&&t.call(this,n),this.node(r),n=r});return}e.children.forEach(this.node,this)}function fue(e){w0(e,(t,n,r)=>{this.token(t,e.slice(n,r))})}function pue(e){const t=new Map;for(let[n,r]of Object.entries(e.node))typeof(r.generate||r)=="function"&&t.set(n,r.generate||r);return function(n,r){let i="",s=0,a={node(u){if(t.has(u.type))t.get(u.type).call(o,u);else throw new Error("Unknown node type: "+u.type)},tokenBefore:DR,token(u,d){s=this.tokenBefore(s,u,d),this.emit(d,u,!1),u===Ln&&d.charCodeAt(0)===due&&this.emit(`
`,Dr,!0)},emit(u){i+=u},result(){return i}};r&&(typeof r.decorator=="function"&&(a=r.decorator(a)),r.sourceMap&&(a=aue(a)),r.mode in zE&&(a.tokenBefore=zE[r.mode]));const o={node:u=>a.node(u),children:hue,token:(u,d)=>a.token(u,d),tokenize:fue};return a.node(n),a.result()}}function mue(e){return{fromPlainObject(t){return e(t,{enter(n){n.children&&!(n.children instanceof So)&&(n.children=new So().fromArray(n.children))}}),t},toPlainObject(t){return e(t,{leave(n){n.children&&n.children instanceof So&&(n.children=n.children.toArray())}}),t}}}const{hasOwnProperty:P_}=Object.prototype,lh=function(){};function FE(e){return typeof e=="function"?e:lh}function BE(e,t){return function(n,r,i){n.type===t&&e.call(this,n,r,i)}}function gue(e,t){const n=t.structure,r=[];for(const i in n){if(P_.call(n,i)===!1)continue;let s=n[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&r.push(a)}return r.length?{context:t.walkContext,fields:r}:null}function yue(e){const t={};for(const n in e.node)if(P_.call(e.node,n)){const r=e.node[n];if(!r.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");t[n]=gue(n,r)}return t}function UE(e,t){const n=e.fields.slice(),r=e.context,i=typeof r=="string";return t&&n.reverse(),function(s,a,o,u){let d;i&&(d=a[r],a[r]=s);for(const h of n){const p=s[h.name];if(!h.nullable||p){if(h.type==="list"){if(t?p.reduceRight(u,!1):p.reduce(u,!1))return!0}else if(o(p))return!0}}i&&(a[r]=d)}}function HE({StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}){return{Atrule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Rule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Declaration:{StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}}}function bue(e){const t=yue(e),n={},r={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const d in t)P_.call(t,d)&&t[d]!==null&&(n[d]=UE(t[d],!1),r[d]=UE(t[d],!0));const a=HE(n),o=HE(r),u=function(d,h){function p(x,k,j){const O=m.call(S,x,k,j);return O===i?!0:O===s?!1:!!(v.hasOwnProperty(x.type)&&v[x.type](x,S,p,w)||g.call(S,x,k,j)===i)}let m=lh,g=lh,v=n,w=(x,k,j,O)=>x||p(k,j,O);const S={break:i,skip:s,root:d,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof h=="function")m=h;else if(h&&(m=FE(h.enter),g=FE(h.leave),h.reverse&&(v=r),h.visit)){if(a.hasOwnProperty(h.visit))v=h.reverse?o[h.visit]:a[h.visit];else if(!t.hasOwnProperty(h.visit))throw new Error("Bad value `"+h.visit+"` for `visit` option (should be: "+Object.keys(t).sort().join(", ")+")");m=BE(m,h.visit),g=BE(g,h.visit)}if(m===lh&&g===lh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");p(d)};return u.break=i,u.skip=s,u.find=function(d,h){let p=null;return u(d,function(m,g,v){if(h.call(this,m,g,v))return p=m,i}),p},u.findLast=function(d,h){let p=null;return u(d,{reverse:!0,enter(m,g,v){if(h.call(this,m,g,v))return p=m,i}}),p},u.findAll=function(d,h){const p=[];return u(d,function(m,g,v){h.call(this,m,g,v)&&p.push(m)}),p},u}function vue(e){return e}function xue(e){const{min:t,max:n,comma:r}=e;return t===0&&n===0?r?"#?":"*":t===0&&n===1?"?":t===1&&n===0?r?"#":"+":t===1&&n===1?"":(r?"#":"")+(t===n?"{"+t+"}":"{"+t+","+(n!==0?n:"")+"}")}function wue(e){switch(e.type){case"Range":return" ["+(e.min===null?"-":e.min)+","+(e.max===null?"":e.max)+"]";default:throw new Error("Unknown node type `"+e.type+"`")}}function _ue(e,t,n,r){const i=e.combinator===" "||r?e.combinator:" "+e.combinator+" ",s=e.terms.map(a=>_g(a,t,n,r)).join(i);return e.explicit||n?(r||s[0]===","?"[":"[ ")+s+(r?"]":" ]"):s}function _g(e,t,n,r){let i;switch(e.type){case"Group":i=_ue(e,t,n,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return _g(e.term,t,n,r)+t(xue(e),e);case"Boolean":i="<boolean-expr["+_g(e.term,t,n,r)+"]>";break;case"Type":i="<"+e.name+(e.opts?t(wue(e.opts),e.opts):"")+">";break;case"Property":i="<'"+e.name+"'>";break;case"Keyword":i=e.name;break;case"AtKeyword":i="@"+e.name;break;case"Function":i=e.name+"(";break;case"String":case"Token":i=e.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return t(i,e)}function N_(e,t){let n=vue,r=!1,i=!1;return typeof t=="function"?n=t:t&&(r=!!t.forceBraces,i=!!t.compact,typeof t.decorate=="function"&&(n=t.decorate)),_g(e,n,r,i)}const WE={offset:0,line:1,column:1};function kue(e,t){const n=e.tokens,r=e.longestMatch,i=r<n.length&&n[r].node||null,s=i!==t?i:null;let a=0,o=0,u=0,d="",h,p;for(let m=0;m<n.length;m++){const g=n[m].value;m===r&&(o=g.length,a=d.length),s!==null&&n[m].node===s&&(m<=r?u++:u=0),d+=g}return r===n.length||u>1?(h=Lp(s||t,"end")||ch(WE,d),p=ch(h)):(h=Lp(s,"start")||ch(Lp(t,"start")||WE,d.slice(0,a)),p=Lp(s,"end")||ch(h,d.substr(a,o))),{css:d,mismatchOffset:a,mismatchLength:o,start:h,end:p}}function Lp(e,t){const n=e&&e.loc&&e.loc[t];return n?"line"in n?ch(n):n:null}function ch({offset:e,line:t,column:n},r){const i={offset:e,line:t,column:n};if(r){const s=r.split(/\n|\r\n?|\f/);i.offset+=r.length,i.line+=s.length-1,i.column=s.length===1?i.column+r.length:s.pop().length+1}return i}const Gd=function(e,t){const n=_0("SyntaxReferenceError",e+(t?" `"+t+"`":""));return n.reference=t,n},Sue=function(e,t,n,r){const i=_0("SyntaxMatchError",e),{css:s,mismatchOffset:a,mismatchLength:o,start:u,end:d}=kue(r,n);return i.rawMessage=e,i.syntax=t?N_(t):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=e+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,u),i.loc={source:n&&n.loc&&n.loc.source||"<unknown>",start:u,end:d},i},Ip=new Map,Rc=new Map,kg=45,tb=Cue,VE=Eue;function O_(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===kg&&e.charCodeAt(t+1)===kg}function zR(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===kg&&e.charCodeAt(t+1)!==kg){const n=e.indexOf("-",t+2);if(n!==-1)return e.substring(t,n+1)}return""}function Cue(e){if(Ip.has(e))return Ip.get(e);const t=e.toLowerCase();let n=Ip.get(t);if(n===void 0){const r=O_(t,0),i=r?"":zR(t,0);n=Object.freeze({basename:t.substr(i.length),name:t,prefix:i,vendor:i,custom:r})}return Ip.set(e,n),n}function Eue(e){if(Rc.has(e))return Rc.get(e);let t=e,n=e[0];n==="/"?n=e[1]==="/"?"//":"/":n!=="_"&&n!=="*"&&n!=="$"&&n!=="#"&&n!=="+"&&n!=="&"&&(n="");const r=O_(t,n.length);if(!r&&(t=t.toLowerCase(),Rc.has(t))){const o=Rc.get(t);return Rc.set(e,o),o}const i=r?"":zR(t,n.length),s=t.substr(0,n.length+i.length),a=Object.freeze({basename:t.substr(s.length),name:t.substr(n.length),hack:n,vendor:i,prefix:s,custom:r});return Rc.set(e,a),a}const R_=["initial","inherit","unset","revert","revert-layer"],ff=43,qa=45,nb=110,Mc=!0,Tue=!1;function Px(e,t){return e!==null&&e.type===Ln&&e.value.charCodeAt(0)===t}function Mh(e,t,n){for(;e!==null&&(e.type===Dr||e.type===ji);)e=n(++t);return t}function Wo(e,t,n,r){if(!e)return 0;const i=e.value.charCodeAt(t);if(i===ff||i===qa){if(n)return 0;t++}for(;t<e.value.length;t++)if(!Ei(e.value.charCodeAt(t)))return 0;return r+1}function rb(e,t,n){let r=!1,i=Mh(e,t,n);if(e=n(i),e===null)return t;if(e.type!==hn)if(Px(e,ff)||Px(e,qa)){if(r=!0,i=Mh(n(++i),i,n),e=n(i),e===null||e.type!==hn)return 0}else return t;if(!r){const s=e.value.charCodeAt(0);if(s!==ff&&s!==qa)return 0}return Wo(e,r?0:1,r,i)}function jue(e,t){let n=0;if(!e)return 0;if(e.type===hn)return Wo(e,0,Tue,n);if(e.type===Mt&&e.value.charCodeAt(0)===qa){if(!Iu(e.value,1,nb))return 0;switch(e.value.length){case 2:return rb(t(++n),n,t);case 3:return e.value.charCodeAt(2)!==qa?0:(n=Mh(t(++n),n,t),e=t(n),Wo(e,0,Mc,n));default:return e.value.charCodeAt(2)!==qa?0:Wo(e,3,Mc,n)}}else if(e.type===Mt||Px(e,ff)&&t(n+1).type===Mt){if(e.type!==Mt&&(e=t(++n)),e===null||!Iu(e.value,0,nb))return 0;switch(e.value.length){case 1:return rb(t(++n),n,t);case 2:return e.value.charCodeAt(1)!==qa?0:(n=Mh(t(++n),n,t),e=t(n),Wo(e,0,Mc,n));default:return e.value.charCodeAt(1)!==qa?0:Wo(e,2,Mc,n)}}else if(e.type===Pn){let r=e.value.charCodeAt(0),i=r===ff||r===qa?1:0,s=i;for(;s<e.value.length&&Ei(e.value.charCodeAt(s));s++);return s===i||!Iu(e.value,s,nb)?0:s+1===e.value.length?rb(t(++n),n,t):e.value.charCodeAt(s+1)!==qa?0:s+2===e.value.length?(n=Mh(t(++n),n,t),e=t(n),Wo(e,0,Mc,n)):Wo(e,s+2,Mc,n)}return 0}const Aue=43,FR=45,BR=63,Pue=117;function Nx(e,t){return e!==null&&e.type===Ln&&e.value.charCodeAt(0)===t}function Nue(e,t){return e.value.charCodeAt(0)===t}function uh(e,t,n){let r=0;for(let i=t;i<e.value.length;i++){const s=e.value.charCodeAt(i);if(s===FR&&n&&r!==0)return uh(e,t+r+1,!1),6;if(!gl(s)||++r>6)return 0}return r}function $p(e,t,n){if(!e)return 0;for(;Nx(n(t),BR);){if(++e>6)return 0;t++}return t}function Oue(e,t){let n=0;if(e===null||e.type!==Mt||!Iu(e.value,0,Pue)||(e=t(++n),e===null))return 0;if(Nx(e,Aue))return e=t(++n),e===null?0:e.type===Mt?$p(uh(e,0,!0),++n,t):Nx(e,BR)?$p(1,++n,t):0;if(e.type===hn){const r=uh(e,1,!0);return r===0?0:(e=t(++n),e===null?n:e.type===Pn||e.type===hn?!Nue(e,FR)||!uh(e,1,!1)?0:n+1:$p(r,n,t))}return e.type===Pn?$p(uh(e,1,!0),++n,t):0}const Rue=["calc(","-moz-calc(","-webkit-calc("],M_=new Map([[_n,dn],[Xn,dn],[ta,Na],[Pi,Qs]]);function Ea(e,t){return t<e.length?e.charCodeAt(t):0}function UR(e,t){return hf(e,0,e.length,t)}function HR(e,t){for(let n=0;n<t.length;n++)if(UR(e,t[n]))return!0;return!1}function WR(e,t){return t!==e.length-2?!1:Ea(e,t)===92&&Ei(Ea(e,t+1))}function C0(e,t,n){if(e&&e.type==="Range"){const r=Number(n!==void 0&&n!==t.length?t.substr(0,n):t);if(isNaN(r)||e.min!==null&&r<e.min&&typeof e.min!="string"||e.max!==null&&r>e.max&&typeof e.max!="string")return!0}return!1}function Mue(e,t){let n=0,r=[],i=0;e:do{switch(e.type){case Qs:case dn:case Na:if(e.type!==n)break e;if(n=r.pop(),r.length===0){i++;break e}break;case _n:case Xn:case ta:case Pi:r.push(n),n=M_.get(e.type);break}i++}while(e=t(i));return i}function Fs(e){return function(t,n,r){return t===null?0:t.type===_n&&HR(t.value,Rue)?Mue(t,n):e(t,n,r)}}function mr(e){return function(t){return t===null||t.type!==e?0:1}}function Lue(e){if(e===null||e.type!==Mt)return 0;const t=e.value.toLowerCase();return HR(t,R_)||UR(t,"default")?0:1}function VR(e){return e===null||e.type!==Mt||Ea(e.value,0)!==45||Ea(e.value,1)!==45?0:1}function Iue(e){return!VR(e)||e.value==="--"?0:1}function $ue(e){if(e===null||e.type!==yr)return 0;const t=e.value.length;if(t!==4&&t!==5&&t!==7&&t!==9)return 0;for(let n=1;n<t;n++)if(!gl(Ea(e.value,n)))return 0;return 1}function Due(e){return e===null||e.type!==yr||!pm(Ea(e.value,1),Ea(e.value,2),Ea(e.value,3))?0:1}function zue(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case v0:case as:break e;case Qs:case dn:case Na:if(e.type!==n)break e;n=r.pop();break;case Vi:if(n===0)break e;break;case Ln:if(n===0&&e.value==="!")break e;break;case _n:case Xn:case ta:case Pi:r.push(n),n=M_.get(e.type);break}i++}while(e=t(i));return i}function Fue(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case v0:case as:break e;case Qs:case dn:case Na:if(e.type!==n)break e;n=r.pop();break;case _n:case Xn:case ta:case Pi:r.push(n),n=M_.get(e.type);break}i++}while(e=t(i));return i}function po(e){return e&&(e=new Set(e)),function(t,n,r){if(t===null||t.type!==Pn)return 0;const i=x0(t.value,0);if(e!==null){const s=t.value.indexOf("\\",i),a=s===-1||!WR(t.value,s)?t.value.substr(i):t.value.substring(i,s);if(e.has(a.toLowerCase())===!1)return 0}return C0(r,t.value,i)?0:1}}function Bue(e,t,n){return e===null||e.type!==Mr||C0(n,e.value,e.value.length-1)?0:1}function GR(e){return typeof e!="function"&&(e=function(){return 0}),function(t,n,r){return t!==null&&t.type===hn&&Number(t.value)===0?1:e(t,n,r)}}function Uue(e,t,n){if(e===null)return 0;const r=x0(e.value,0);return!(r===e.value.length)&&!WR(e.value,r)||C0(n,e.value,r)?0:1}function Hue(e,t,n){if(e===null||e.type!==hn)return 0;let r=Ea(e.value,0)===43||Ea(e.value,0)===45?1:0;for(;r<e.value.length;r++)if(!Ei(Ea(e.value,r)))return 0;return C0(n,e.value,r)?0:1}const Wue={"ident-token":mr(Mt),"function-token":mr(_n),"at-keyword-token":mr(ei),"hash-token":mr(yr),"string-token":mr($a),"bad-string-token":mr(v0),"url-token":mr(Fi),"bad-url-token":mr(as),"delim-token":mr(Ln),"number-token":mr(hn),"percentage-token":mr(Mr),"dimension-token":mr(Pn),"whitespace-token":mr(Dr),"CDO-token":mr(Df),"CDC-token":mr(os),"colon-token":mr(Wi),"semicolon-token":mr(Vi),"comma-token":mr(vs),"[-token":mr(ta),"]-token":mr(Na),"(-token":mr(Xn),")-token":mr(dn),"{-token":mr(Pi),"}-token":mr(Qs)},Vue={string:mr($a),ident:mr(Mt),percentage:Fs(Bue),zero:GR(),number:Fs(Uue),integer:Fs(Hue),"custom-ident":Lue,"dashed-ident":VR,"custom-property-name":Iue,"hex-color":$ue,"id-selector":Due,"an-plus-b":jue,urange:Oue,"declaration-value":zue,"any-value":Fue};function Gue(e){const{angle:t,decibel:n,frequency:r,flex:i,length:s,resolution:a,semitones:o,time:u}=e||{};return{dimension:Fs(po(null)),angle:Fs(po(t)),decibel:Fs(po(n)),frequency:Fs(po(r)),flex:Fs(po(i)),length:Fs(GR(po(s))),resolution:Fs(po(a)),semitones:Fs(po(o)),time:Fs(po(u))}}function que(e){return{...Wue,...Vue,...Gue(e)}}const Yue=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],Xue=["deg","grad","rad","turn"],Kue=["s","ms"],Zue=["hz","khz"],Que=["dpi","dpcm","dppx","x"],Jue=["fr"],ede=["db"],tde=["st"],GE=Object.freeze(Object.defineProperty({__proto__:null,angle:Xue,decibel:ede,flex:Jue,frequency:Zue,length:Yue,resolution:Que,semitones:tde,time:Kue},Symbol.toStringTag,{value:"Module"}));function nde(e,t,n){return Object.assign(_0("SyntaxError",e),{input:t,offset:n,rawMessage:e,message:e+`
  `+t+`
--`+new Array((n||t.length)+1).join("-")+"^"})}const rde=9,ide=10,sde=12,ade=13,ode=32,qE=new Uint8Array(128).map((e,t)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(t))?1:0);class lde{constructor(t){this.str=t,this.pos=0}charCodeAt(t){return t<this.str.length?this.str.charCodeAt(t):0}charCode(){return this.charCodeAt(this.pos)}isNameCharCode(t=this.charCode()){return t<128&&qE[t]===1}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(t){return this.charCodeAt(this.findWsEnd(t))}skipWs(){this.pos=this.findWsEnd(this.pos)}findWsEnd(t){for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n!==ade&&n!==ide&&n!==sde&&n!==ode&&n!==rde)break}return t}substringToPos(t){return this.str.substring(this.pos,this.pos=t)}eat(t){this.charCode()!==t&&this.error("Expect `"+String.fromCharCode(t)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(t){throw new nde(t,this.str,this.pos)}scanSpaces(){return this.substringToPos(this.findWsEnd(this.pos))}scanWord(){let t=this.pos;for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n>=128||qE[n]===0)break}return this.pos===t&&this.error("Expect a keyword"),this.substringToPos(t)}scanNumber(){let t=this.pos;for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n<48||n>57)break}return this.pos===t&&this.error("Expect a number"),this.substringToPos(t)}scanString(){const t=this.str.indexOf("'",this.pos+1);return t===-1&&(this.pos=this.str.length,this.error("Expect an apostrophe")),this.substringToPos(t+1)}}const cde=9,ude=10,dde=12,hde=13,fde=32,qR=33,L_=35,YE=38,Sg=39,YR=40,pde=41,XR=42,I_=43,$_=44,XE=45,D_=60,Ox=62,Rx=63,mde=64,pf=91,mf=93,Cg=123,KE=124,ZE=125,QE=8734,JE={" ":1,"&&":2,"||":3,"|":4};function eT(e){let t=null,n=null;return e.eat(Cg),e.skipWs(),t=e.scanNumber(e),e.skipWs(),e.charCode()===$_?(e.pos++,e.skipWs(),e.charCode()!==ZE&&(n=e.scanNumber(e),e.skipWs())):n=t,e.eat(ZE),{min:Number(t),max:n?Number(n):0}}function gde(e){let t=null,n=!1;switch(e.charCode()){case XR:e.pos++,t={min:0,max:0};break;case I_:e.pos++,t={min:1,max:0};break;case Rx:e.pos++,t={min:0,max:1};break;case L_:e.pos++,n=!0,e.charCode()===Cg?t=eT(e):e.charCode()===Rx?(e.pos++,t={min:0,max:0}):t={min:1,max:0};break;case Cg:t=eT(e);break;default:return null}return{type:"Multiplier",comma:n,min:t.min,max:t.max,term:null}}function yl(e,t){const n=gde(e);return n!==null?(n.term=t,e.charCode()===L_&&e.charCodeAt(e.pos-1)===I_?yl(e,n):n):t}function ib(e){const t=e.peek();return t===""?null:yl(e,{type:"Token",value:t})}function yde(e){let t;return e.eat(D_),e.eat(Sg),t=e.scanWord(),e.eat(Sg),e.eat(Ox),yl(e,{type:"Property",name:t})}function bde(e){let t=null,n=null,r=1;return e.eat(pf),e.charCode()===XE&&(e.peek(),r=-1),r==-1&&e.charCode()===QE?e.peek():(t=r*Number(e.scanNumber(e)),e.isNameCharCode()&&(t+=e.scanWord())),e.skipWs(),e.eat($_),e.skipWs(),e.charCode()===QE?e.peek():(r=1,e.charCode()===XE&&(e.peek(),r=-1),n=r*Number(e.scanNumber(e)),e.isNameCharCode()&&(n+=e.scanWord())),e.eat(mf),{type:"Range",min:t,max:n}}function vde(e){let t,n=null;if(e.eat(D_),t=e.scanWord(),t==="boolean-expr"){e.eat(pf);const r=z_(e,mf);return e.eat(mf),e.eat(Ox),yl(e,{type:"Boolean",term:r.terms.length===1?r.terms[0]:r})}return e.charCode()===YR&&e.nextCharCode()===pde&&(e.pos+=2,t+="()"),e.charCodeAt(e.findWsEnd(e.pos))===pf&&(e.skipWs(),n=bde(e)),e.eat(Ox),yl(e,{type:"Type",name:t,opts:n})}function xde(e){const t=e.scanWord();return e.charCode()===YR?(e.pos++,{type:"Function",name:t}):yl(e,{type:"Keyword",name:t})}function wde(e,t){function n(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let r;for(t=Object.keys(t).sort((i,s)=>JE[i]-JE[s]);t.length>0;){r=t.shift();let i=0,s=0;for(;i<e.length;i++){const a=e[i];a.type==="Combinator"&&(a.value===r?(s===-1&&(s=i-1),e.splice(i,1),i--):(s!==-1&&i-s>1&&(e.splice(s,i-s,n(e.slice(s,i),r)),i=s+1),s=-1))}s!==-1&&t.length&&e.splice(s,i-s,n(e.slice(s,i),r))}return r}function z_(e,t){const n=Object.create(null),r=[];let i,s=null,a=e.pos;for(;e.charCode()!==t&&(i=kde(e,t));)i.type!=="Spaces"&&(i.type==="Combinator"?((s===null||s.type==="Combinator")&&(e.pos=a,e.error("Unexpected combinator")),n[i.value]=!0):s!==null&&s.type!=="Combinator"&&(n[" "]=!0,r.push({type:"Combinator",value:" "})),r.push(i),s=i,a=e.pos);return s!==null&&s.type==="Combinator"&&(e.pos-=a,e.error("Unexpected combinator")),{type:"Group",terms:r,combinator:wde(r,n)||" ",disallowEmpty:!1,explicit:!1}}function _de(e,t){let n;return e.eat(pf),n=z_(e,t),e.eat(mf),n.explicit=!0,e.charCode()===qR&&(e.pos++,n.disallowEmpty=!0),n}function kde(e,t){let n=e.charCode();switch(n){case mf:break;case pf:return yl(e,_de(e,t));case D_:return e.nextCharCode()===Sg?yde(e):vde(e);case KE:return{type:"Combinator",value:e.substringToPos(e.pos+(e.nextCharCode()===KE?2:1))};case YE:return e.pos++,e.eat(YE),{type:"Combinator",value:"&&"};case $_:return e.pos++,{type:"Comma"};case Sg:return yl(e,{type:"String",value:e.scanString()});case fde:case cde:case ude:case hde:case dde:return{type:"Spaces",value:e.scanSpaces()};case mde:return n=e.nextCharCode(),e.isNameCharCode(n)?(e.pos++,{type:"AtKeyword",name:e.scanWord()}):ib(e);case XR:case I_:case Rx:case L_:case qR:break;case Cg:if(n=e.nextCharCode(),n<48||n>57)return ib(e);break;default:return e.isNameCharCode(n)?xde(e):ib(e)}}function KR(e){const t=new lde(e),n=z_(t);return t.pos!==e.length&&t.error("Unexpected input"),n.terms.length===1&&n.terms[0].type==="Group"?n.terms[0]:n}const dh=function(){};function tT(e){return typeof e=="function"?e:dh}function Sde(e,t,n){function r(a){switch(i.call(n,a),a.type){case"Group":a.terms.forEach(r);break;case"Multiplier":case"Boolean":r(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(n,a)}let i=dh,s=dh;if(typeof t=="function"?i=t:t&&(i=tT(t.enter),s=tT(t.leave)),i===dh&&s===dh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");r(e)}const Cde={decorator(e){const t=[];let n=null;return{...e,node(r){const i=n;n=r,e.node.call(this,r),n=i},emit(r,i,s){t.push({type:i,value:r,node:s?null:n})},result(){return t}}}};function Ede(e){const t=[];return w0(e,(n,r,i)=>t.push({type:n,value:e.slice(r,i),node:null})),t}function Tde(e,t){return typeof e=="string"?Ede(e):t.generate(e,Cde)}const qn={type:"Match"},ir={type:"Mismatch"},F_={type:"DisallowEmpty"},jde=40,Ade=41;function Di(e,t,n){return t===qn&&n===ir||e===qn&&t===qn&&n===qn?e:(e.type==="If"&&e.else===ir&&t===qn&&(t=e.then,e=e.match),{type:"If",match:e,then:t,else:n})}function ZR(e){return e.length>2&&e.charCodeAt(e.length-2)===jde&&e.charCodeAt(e.length-1)===Ade}function nT(e){return e.type==="Keyword"||e.type==="AtKeyword"||e.type==="Function"||e.type==="Type"&&ZR(e.name)}function Fo(e,t=" ",n=!1){return{type:"Group",terms:e,combinator:t,disallowEmpty:!1,explicit:n}}function Lh(e,t,n=new Set){if(!n.has(e))switch(n.add(e),e.type){case"If":e.match=Lh(e.match,t,n),e.then=Lh(e.then,t,n),e.else=Lh(e.else,t,n);break;case"Type":return t[e.name]||e}return e}function Mx(e,t,n){switch(e){case" ":{let r=qn;for(let i=t.length-1;i>=0;i--){const s=t[i];r=Di(s,r,ir)}return r}case"|":{let r=ir,i=null;for(let s=t.length-1;s>=0;s--){let a=t[s];if(nT(a)&&(i===null&&s>0&&nT(t[s-1])&&(i=Object.create(null),r=Di({type:"Enum",map:i},qn,r)),i!==null)){const o=(ZR(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,r=Di(a,qn,r)}return r}case"&&":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!0};let r=ir;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Mx(e,t.filter(function(o){return o!==s}),!1):a=qn,r=Di(s,a,r)}return r}case"||":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!1};let r=n?qn:ir;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Mx(e,t.filter(function(o){return o!==s}),!0):a=qn,r=Di(s,a,r)}return r}}}function Pde(e){let t=qn,n=Su(e.term);if(e.max===0)n=Di(n,F_,ir),t=Di(n,null,ir),t.then=Di(qn,qn,t),e.comma&&(t.then.else=Di({type:"Comma",syntax:e},t,ir));else for(let r=e.min||1;r<=e.max;r++)e.comma&&t!==qn&&(t=Di({type:"Comma",syntax:e},t,ir)),t=Di(n,Di(qn,qn,t),ir);if(e.min===0)t=Di(qn,qn,t);else for(let r=0;r<e.min-1;r++)e.comma&&t!==qn&&(t=Di({type:"Comma",syntax:e},t,ir)),t=Di(n,t,ir);return t}function Su(e){if(typeof e=="function")return{type:"Generic",fn:e};switch(e.type){case"Group":{let t=Mx(e.combinator,e.terms.map(Su),!1);return e.disallowEmpty&&(t=Di(t,F_,ir)),t}case"Multiplier":return Pde(e);case"Boolean":{const t=Su(e.term),n=Su(Fo([Fo([{type:"Keyword",name:"not"},{type:"Type",name:"!boolean-group"}]),Fo([{type:"Type",name:"!boolean-group"},Fo([{type:"Multiplier",comma:!1,min:0,max:0,term:Fo([{type:"Keyword",name:"and"},{type:"Type",name:"!boolean-group"}])},{type:"Multiplier",comma:!1,min:0,max:0,term:Fo([{type:"Keyword",name:"or"},{type:"Type",name:"!boolean-group"}])}],"|")])],"|")),r=Su(Fo([{type:"Type",name:"!term"},Fo([{type:"Token",value:"("},{type:"Type",name:"!self"},{type:"Token",value:")"}]),{type:"Type",name:"general-enclosed"}],"|"));return Lh(r,{"!term":t,"!self":n}),Lh(n,{"!boolean-group":r}),n}case"Type":case"Property":return{type:e.type,name:e.name,syntax:e};case"Keyword":return{type:e.type,name:e.name.toLowerCase(),syntax:e};case"AtKeyword":return{type:e.type,name:"@"+e.name.toLowerCase(),syntax:e};case"Function":return{type:e.type,name:e.name.toLowerCase()+"(",syntax:e};case"String":return e.value.length===3?{type:"Token",value:e.value.charAt(1),syntax:e}:{type:e.type,value:e.value.substr(1,e.value.length-2).replace(/\\'/g,"'"),syntax:e};case"Token":return{type:e.type,value:e.value,syntax:e};case"Comma":return{type:e.type,syntax:e};default:throw new Error("Unknown node type:",e.type)}}function Dp(e,t){return typeof e=="string"&&(e=KR(e)),{type:"MatchGraph",match:Su(e),syntax:t||null,source:e}}const{hasOwnProperty:rT}=Object.prototype,Nde=0,Ode=1,Lx=2,QR=3,iT="Match",Rde="Mismatch",Mde="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",sT=15e3;function Lde(e){let t=null,n=null,r=e;for(;r!==null;)n=r.prev,r.prev=t,t=r,r=n;return t}function sb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=t.charCodeAt(n);let i=e.charCodeAt(n);if(i>=65&&i<=90&&(i=i|32),i!==r)return!1}return!0}function Ide(e){return e.type!==Ln?!1:e.value!=="?"}function aT(e){return e===null?!0:e.type===vs||e.type===_n||e.type===Xn||e.type===ta||e.type===Pi||Ide(e)}function oT(e){return e===null?!0:e.type===dn||e.type===Na||e.type===Qs||e.type===Ln&&e.value==="/"}function $de(e,t,n){function r(){do k++,x=k<e.length?e[k]:null;while(x!==null&&(x.type===Dr||x.type===ji))}function i(I){const E=k+I;return E<e.length?e[E]:null}function s(I,E){return{nextState:I,matchStack:O,syntaxStack:p,thenStack:m,tokenIndex:k,prev:E}}function a(I){m={nextState:I,matchStack:O,syntaxStack:p,prev:m}}function o(I){g=s(I,g)}function u(){O={type:Ode,syntax:t.syntax,token:x,prev:O},r(),v=null,k>j&&(j=k)}function d(){p={syntax:t.syntax,opts:t.syntax.opts||p!==null&&p.opts||null,prev:p},O={type:Lx,syntax:t.syntax,token:O.token,prev:O}}function h(){O.type===Lx?O=O.prev:O={type:QR,syntax:p.syntax,token:O.token,prev:O},p=p.prev}let p=null,m=null,g=null,v=null,w=0,S=null,x=null,k=-1,j=0,O={type:Nde,syntax:null,token:null,prev:null};for(r();S===null&&++w<sT;)switch(t.type){case"Match":if(m===null){if(x!==null&&(k!==e.length-1||x.value!=="\\0"&&x.value!=="\\9")){t=ir;break}S=iT;break}if(t=m.nextState,t===F_)if(m.matchStack===O){t=ir;break}else t=qn;for(;m.syntaxStack!==p;)h();m=m.prev;break;case"Mismatch":if(v!==null&&v!==!1)(g===null||k>g.tokenIndex)&&(g=v,v=!1);else if(g===null){S=Rde;break}t=g.nextState,m=g.thenStack,p=g.syntaxStack,O=g.matchStack,k=g.tokenIndex,x=k<e.length?e[k]:null,g=g.prev;break;case"MatchGraph":t=t.match;break;case"If":t.else!==ir&&o(t.else),t.then!==qn&&a(t.then),t=t.match;break;case"MatchOnce":t={type:"MatchOnceBuffer",syntax:t,index:0,mask:0};break;case"MatchOnceBuffer":{const U=t.syntax.terms;if(t.index===U.length){if(t.mask===0||t.syntax.all){t=ir;break}t=qn;break}if(t.mask===(1<<U.length)-1){t=qn;break}for(;t.index<U.length;t.index++){const D=1<<t.index;if(!(t.mask&D)){o(t),a({type:"AddMatchOnce",syntax:t.syntax,mask:t.mask|D}),t=U[t.index++];break}}break}case"AddMatchOnce":t={type:"MatchOnceBuffer",syntax:t.syntax,index:0,mask:t.mask};break;case"Enum":if(x!==null){let U=x.value.toLowerCase();if(U.indexOf("\\")!==-1&&(U=U.replace(/\\[09].*$/,"")),rT.call(t.map,U)){t=t.map[U];break}}t=ir;break;case"Generic":{const U=p!==null?p.opts:null,D=k+Math.floor(t.fn(x,i,U));if(!isNaN(D)&&D>k){for(;k<D;)u();t=qn}else t=ir;break}case"Type":case"Property":{const U=t.type==="Type"?"types":"properties",D=rT.call(n,U)?n[U][t.name]:null;if(!D||!D.match)throw new Error("Bad syntax reference: "+(t.type==="Type"?"<"+t.name+">":"<'"+t.name+"'>"));if(v!==!1&&x!==null&&t.type==="Type"&&(t.name==="custom-ident"&&x.type===Mt||t.name==="length"&&x.value==="0")){v===null&&(v=s(t,g)),t=ir;break}d(),t=D.matchRef||D.match;break}case"Keyword":{const U=t.name;if(x!==null){let D=x.value;if(D.indexOf("\\")!==-1&&(D=D.replace(/\\[09].*$/,"")),sb(D,U)){u(),t=qn;break}}t=ir;break}case"AtKeyword":case"Function":if(x!==null&&sb(x.value,t.name)){u(),t=qn;break}t=ir;break;case"Token":if(x!==null&&x.value===t.value){u(),t=qn;break}t=ir;break;case"Comma":x!==null&&x.type===vs?aT(O.token)?t=ir:(u(),t=oT(x)?ir:qn):t=aT(O.token)||oT(x)?qn:ir;break;case"String":let I="",E=k;for(;E<e.length&&I.length<t.value.length;E++)I+=e[E].value;if(sb(I,t.value)){for(;k<E;)u();t=qn}else t=ir;break;default:throw new Error("Unknown node type: "+t.type)}switch(S){case null:console.warn("[csstree-match] BREAK after "+sT+" iterations"),S=Mde,O=null;break;case iT:for(;p!==null;)h();break;default:O=null}return{tokens:e,reason:S,iterations:w,match:O,longestMatch:j}}function lT(e,t,n){const r=$de(e,t,n||{});if(r.match===null)return r;let i=r.match,s=r.match={syntax:t.syntax||null,match:[]};const a=[s];for(i=Lde(i).prev;i!==null;){switch(i.type){case Lx:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case QR:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return r}function JR(e){function t(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function n(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(n(i.match[s]))return t(i.syntax)&&r.unshift(i.syntax),!0}else if(i.node===e)return r=t(i.syntax)?[i.syntax]:[],!0;return!1}let r=null;return this.matched!==null&&n(this.matched),r}function Dde(e,t){return B_(this,e,n=>n.type==="Type"&&n.name===t)}function zde(e,t){return B_(this,e,n=>n.type==="Property"&&n.name===t)}function Fde(e){return B_(this,e,t=>t.type==="Keyword")}function B_(e,t,n){const r=JR.call(e,t);return r===null?!1:r.some(n)}const Bde=Object.freeze(Object.defineProperty({__proto__:null,getTrace:JR,isKeyword:Fde,isProperty:zde,isType:Dde},Symbol.toStringTag,{value:"Module"}));function e4(e){return"node"in e?e.node:e4(e.match[0])}function t4(e){return"node"in e?e.node:t4(e.match[e.match.length-1])}function cT(e,t,n,r,i){function s(o){if(o.syntax!==null&&o.syntax.type===r&&o.syntax.name===i){const u=e4(o),d=t4(o);e.syntax.walk(t,function(h,p,m){if(h===u){const g=new So;do{if(g.appendData(p.data),p.data===d)break;p=p.next}while(p!==null);a.push({parent:m,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return n.matched!==null&&s(n.matched),a}const{hasOwnProperty:Ih}=Object.prototype;function ab(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&e>=0}function uT(e){return!!e&&ab(e.offset)&&ab(e.line)&&ab(e.column)}function Ude(e,t){return function(r,i){if(!r||r.constructor!==Object)return i(r,"Type of node should be an Object");for(let s in r){let a=!0;if(Ih.call(r,s)!==!1){if(s==="type")r.type!==e&&i(r,"Wrong node type `"+r.type+"`, expected `"+e+"`");else if(s==="loc"){if(r.loc===null)continue;if(r.loc&&r.loc.constructor===Object)if(typeof r.loc.source!="string")s+=".source";else if(!uT(r.loc.start))s+=".start";else if(!uT(r.loc.end))s+=".end";else continue;a=!1}else if(t.hasOwnProperty(s)){a=!1;for(let o=0;!a&&o<t[s].length;o++){const u=t[s][o];switch(u){case String:a=typeof r[s]=="string";break;case Boolean:a=typeof r[s]=="boolean";break;case null:a=r[s]===null;break;default:typeof u=="string"?a=r[s]&&r[s].type===u:Array.isArray(u)&&(a=r[s]instanceof So)}}}else i(r,"Unknown field `"+s+"` for "+e+" node type");a||i(r,"Bad value for `"+e+"."+s+"`")}}for(const s in t)Ih.call(t,s)&&Ih.call(r,s)===!1&&i(r,"Field `"+e+"."+s+"` is missed")}}function n4(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i===String||i===Boolean)n.push(i.name.toLowerCase());else if(i===null)n.push("null");else if(typeof i=="string")n.push(i);else if(Array.isArray(i))n.push("List<"+(n4(i,t)||"any")+">");else throw new Error("Wrong value `"+i+"` in `"+t+"` structure definition")}return n.join(" | ")}function Hde(e,t){const n=t.structure,r={type:String,loc:!0},i={type:'"'+e+'"'};for(const s in n){if(Ih.call(n,s)===!1)continue;const a=r[s]=Array.isArray(n[s])?n[s].slice():[n[s]];i[s]=n4(a,e+"."+s)}return{docs:i,check:Ude(e,r)}}function Wde(e){const t={};if(e.node){for(const n in e.node)if(Ih.call(e.node,n)){const r=e.node[n];if(r.structure)t[n]=Hde(n,r);else throw new Error("Missed `structure` field in `"+n+"` node type definition")}}return t}function Ix(e,t,n){const r={};for(const i in e)e[i].syntax&&(r[i]=n?e[i].syntax:N_(e[i].syntax,{compact:t}));return r}function Vde(e,t,n){const r={};for(const[i,s]of Object.entries(e))r[i]={prelude:s.prelude&&(n?s.prelude.syntax:N_(s.prelude.syntax,{compact:t})),descriptors:s.descriptors&&Ix(s.descriptors,t,n)};return r}function Gde(e){for(let t=0;t<e.length;t++)if(e[t].value.toLowerCase()==="var(")return!0;return!1}function qde(e){const t=e.terms[0];return e.explicit===!1&&e.terms.length===1&&t.type==="Multiplier"&&t.comma===!0}function ga(e,t,n){return{matched:e,iterations:n,error:t,...Bde}}function Lc(e,t,n,r){const i=Tde(n,e.syntax);let s;return Gde(i)?ga(null,new Error("Matching for a tree with var() is not supported")):(r&&(s=lT(i,e.cssWideKeywordsSyntax,e)),(!r||!s.match)&&(s=lT(i,t.match,e),!s.match)?ga(null,new Sue(s.reason,t.syntax,n,s),s.iterations):ga(s.match,null,s.iterations))}let dT=class{constructor(t,n,r){if(this.cssWideKeywords=R_,this.syntax=n,this.generic=!1,this.units={...GE},this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=r||Wde(t),t){if(t.cssWideKeywords&&(this.cssWideKeywords=t.cssWideKeywords),t.units)for(const i of Object.keys(GE))Array.isArray(t.units[i])&&(this.units[i]=t.units[i]);if(t.types)for(const[i,s]of Object.entries(t.types))this.addType_(i,s);if(t.generic){this.generic=!0;for(const[i,s]of Object.entries(que(this.units)))this.addType_(i,s)}if(t.atrules)for(const[i,s]of Object.entries(t.atrules))this.addAtrule_(i,s);if(t.properties)for(const[i,s]of Object.entries(t.properties))this.addProperty_(i,s)}this.cssWideKeywordsSyntax=Dp(this.cssWideKeywords.join(" |  "))}checkStructure(t){function n(s,a){i.push({node:s,message:a})}const r=this.structure,i=[];return this.syntax.walk(t,function(s){r.hasOwnProperty(s.type)?r[s.type].check(s,n):n(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(t,n,r,i=null){const s={type:n,name:r},a={type:n,name:r,parent:i,serializable:typeof t=="string"||t&&typeof t.type=="string",syntax:null,match:null,matchRef:null};return typeof t=="function"?a.match=Dp(t,s):(typeof t=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:KR(t)}),a.syntax}}):a.syntax=t,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:Dp(a.syntax,s)}),a.match}}),n==="Property"&&Object.defineProperty(a,"matchRef",{get(){const o=a.syntax,u=qde(o)?Dp({...o,terms:[o.terms[0].term]},s):null;return Object.defineProperty(a,"matchRef",{value:u}),u}})),a}addAtrule_(t,n){n&&(this.atrules[t]={type:"Atrule",name:t,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",t):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((r,i)=>(r[i]=this.createDescriptor(n.descriptors[i],"AtruleDescriptor",i,t),r),Object.create(null)):null})}addProperty_(t,n){n&&(this.properties[t]=this.createDescriptor(n,"Property",t))}addType_(t,n){n&&(this.types[t]=this.createDescriptor(n,"Type",t))}checkAtruleName(t){if(!this.getAtrule(t))return new Gd("Unknown at-rule","@"+t)}checkAtrulePrelude(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t);if(!i.prelude&&n)return new SyntaxError("At-rule `@"+t+"` should not contain a prelude");if(i.prelude&&!n&&!Lc(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+t+"` should contain a prelude")}checkAtruleDescriptorName(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t),s=tb(n);if(!i.descriptors)return new SyntaxError("At-rule `@"+t+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new Gd("Unknown at-rule descriptor",n)}checkPropertyName(t){if(!this.getProperty(t))return new Gd("Unknown property",t)}matchAtrulePrelude(t,n){const r=this.checkAtrulePrelude(t,n);if(r)return ga(null,r);const i=this.getAtrule(t);return i.prelude?Lc(this,i.prelude,n||"",!1):ga(null,null)}matchAtruleDescriptor(t,n,r){const i=this.checkAtruleDescriptorName(t,n);if(i)return ga(null,i);const s=this.getAtrule(t),a=tb(n);return Lc(this,s.descriptors[a.name]||s.descriptors[a.basename],r,!1)}matchDeclaration(t){return t.type!=="Declaration"?ga(null,new Error("Not a Declaration node")):this.matchProperty(t.property,t.value)}matchProperty(t,n){if(VE(t).custom)return ga(null,new Error("Lexer matching doesn't applicable for custom properties"));const r=this.checkPropertyName(t);return r?ga(null,r):Lc(this,this.getProperty(t),n,!0)}matchType(t,n){const r=this.getType(t);return r?Lc(this,r,n,!1):ga(null,new Gd("Unknown type",t))}match(t,n){return typeof t!="string"&&(!t||!t.type)?ga(null,new Gd("Bad syntax")):((typeof t=="string"||!t.match)&&(t=this.createDescriptor(t,"Type","anonymous")),Lc(this,t,n,!1))}findValueFragments(t,n,r,i){return cT(this,n,this.matchProperty(t,n),r,i)}findDeclarationValueFragments(t,n,r){return cT(this,t.value,this.matchDeclaration(t),n,r)}findAllFragments(t,n,r){const i=[];return this.syntax.walk(t,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,n,r))}}),i}getAtrule(t,n=!0){const r=tb(t);return(r.vendor&&n?this.atrules[r.name]||this.atrules[r.basename]:this.atrules[r.name])||null}getAtrulePrelude(t,n=!0){const r=this.getAtrule(t,n);return r&&r.prelude||null}getAtruleDescriptor(t,n){return this.atrules.hasOwnProperty(t)&&this.atrules.declarators&&this.atrules[t].declarators[n]||null}getProperty(t,n=!0){const r=VE(t);return(r.vendor&&n?this.properties[r.name]||this.properties[r.basename]:this.properties[r.name])||null}getType(t){return hasOwnProperty.call(this.types,t)?this.types[t]:null}validate(){function t(u,d){return d?`<${u}>`:`<'${u}'>`}function n(u,d,h,p){if(h.has(d))return h.get(d);h.set(d,!1),p.syntax!==null&&Sde(p.syntax,function(m){if(m.type!=="Type"&&m.type!=="Property")return;const g=m.type==="Type"?u.types:u.properties,v=m.type==="Type"?i:s;hasOwnProperty.call(g,m.name)?n(u,m.name,v,g[m.name])&&(r.push(`${t(d,h===i)} used broken syntax definition ${t(m.name,m.type==="Type")}`),h.set(d,!0)):(r.push(`${t(d,h===i)} used missed syntax definition ${t(m.name,m.type==="Type")}`),h.set(d,!0))},this)}const r=[];let i=new Map,s=new Map;for(const u in this.types)n(this,u,i,this.types[u]);for(const u in this.properties)n(this,u,s,this.properties[u]);const a=[...i.keys()].filter(u=>i.get(u)),o=[...s.keys()].filter(u=>s.get(u));return a.length||o.length?{errors:r,types:a,properties:o}:null}dump(t,n){return{generic:this.generic,cssWideKeywords:this.cssWideKeywords,units:this.units,types:Ix(this.types,!n,t),properties:Ix(this.properties,!n,t),atrules:Vde(this.atrules,!n,t)}}toString(){return JSON.stringify(this.dump())}};function ob(e,t){return typeof t=="string"&&/^\s*\|/.test(t)?typeof e=="string"?e+t:t.replace(/^\s*\|\s*/,""):t||null}function hT(e,t){const n=Object.create(null);for(const[r,i]of Object.entries(e))if(i){n[r]={};for(const s of Object.keys(i))t.includes(s)&&(n[r][s]=i[s])}return n}function $x(e,t){const n={...e};for(const[r,i]of Object.entries(t))switch(r){case"generic":n[r]=!!i;break;case"cssWideKeywords":n[r]=e[r]?[...e[r],...i]:i||[];break;case"units":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]=Array.isArray(a)?a:[];break;case"atrules":n[r]={...e[r]};for(const[s,a]of Object.entries(i)){const o=n[r][s]||{},u=n[r][s]={prelude:o.prelude||null,descriptors:{...o.descriptors}};if(a){u.prelude=a.prelude?ob(u.prelude,a.prelude):u.prelude||null;for(const[d,h]of Object.entries(a.descriptors||{}))u.descriptors[d]=h?ob(u.descriptors[d],h):null;Object.keys(u.descriptors).length||(u.descriptors=null)}}break;case"types":case"properties":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]=ob(n[r][s],a);break;case"scope":case"features":n[r]={...e[r]};for(const[s,a]of Object.entries(i))n[r][s]={...n[r][s],...a};break;case"parseContext":n[r]={...e[r],...i};break;case"atrule":case"pseudo":n[r]={...e[r],...hT(i,["parse"])};break;case"node":n[r]={...e[r],...hT(i,["name","structure","parse","generate","walkContext"])};break}return n}function r4(e){const t=tue(e),n=bue(e),r=pue(e),{fromPlainObject:i,toPlainObject:s}=mue(n),a={lexer:null,createLexer:o=>new dT(o,a,a.lexer.structure),tokenize:w0,parse:t,generate:r,walk:n,find:n.find,findLast:n.findLast,findAll:n.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const u=$x({},e);return r4(typeof o=="function"?o(u):$x(u,o))}};return a.lexer=new dT({generic:e.generic,cssWideKeywords:e.cssWideKeywords,units:e.units,types:e.types,atrules:e.atrules,properties:e.properties,node:e.node},a),a}const Yde=e=>r4($x({},e)),Xde={generic:!0,cssWideKeywords:["initial","inherit","unset","revert","revert-layer"],units:{angle:["deg","grad","rad","turn"],decibel:["db"],flex:["fr"],frequency:["hz","khz"],length:["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],resolution:["dpi","dpcm","dppx","x"],semitones:["st"],time:["s","ms"]},types:{"abs()":"abs( <calc-sum> )","absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","acos()":"acos( <calc-sum> )","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>","asin()":"asin( <calc-sum> )","atan()":"atan( <calc-sum> )","atan2()":"atan2( <calc-sum> , <calc-sum> )",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?",axis:"block|inline|x|y","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<xywh()>|<rect()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )","calc-constant":"e|pi|infinity|-infinity|NaN","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<color-base>|currentColor|<system-color>|<device-cmyk()>|<light-dark()>|<-non-standard-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>","color-interpolation-method":"in [<rectangular-color-space>|<polar-color-space> <hue-interpolation-method>?|<custom-color-space>]",combinator:"'>'|'+'|'~'|['|' '|']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<complex-selector-unit> [<combinator>? <complex-selector-unit>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )","cos()":"cos( <calc-sum> )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","exp()":"exp( <calc-sum> )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value>? )]|[( <any-value>? )]","generic-family":"<generic-script-specific>|<generic-complete>|<generic-incomplete>|<-non-standard-generic-family>","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hue-interpolation-method":"[shorter|longer|increasing|decreasing] hue","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )","hypot()":"hypot( <calc-sum># )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length-percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>|<timeline-range-name> <percentage>","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","light-dark()":"light-dark( <color> , <color> )","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [[<angle>|to <side-or-corner>]||<color-interpolation-method>]? , <color-stop-list> )","log()":"log( <calc-sum> , <calc-sum>? )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )","mod()":"mod( <calc-sum> , <calc-sum> )","name-repeat":"repeat( [<integer [1,]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( [<length [0,]>|none] )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )","polar-color-space":"hsl|hwb|lch|oklch",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pow()":"pow( <calc-sum> , <calc-sum> )","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>|<legacy-pseudo-element-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )",ratio:"<number [0,]> [/ <number [0,]>]?","ray()":"ray( <angle>&&<ray-size>?&&contain?&&[at <position>]? )","ray-size":"closest-side|closest-corner|farthest-side|farthest-corner|sides","rectangular-color-space":"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|lab|oklab|xyz|xyz-d50|xyz-d65","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","rem()":"rem( <calc-sum> , <calc-sum> )","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","reversed-counter-name":"reversed( <counter-name> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","round()":"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )","rounding-strategy":"nearest|up|down|to-zero","saturate()":"saturate( <number-percentage> )","scale()":"scale( [<number>|<percentage>]#{1,2} )","scale3d()":"scale3d( [<number>|<percentage>]#{3} )","scaleX()":"scaleX( [<number>|<percentage>] )","scaleY()":"scaleY( [<number>|<percentage>] )","scaleZ()":"scaleZ( [<number>|<percentage>] )","scroll()":"scroll( [<axis>||<scroller>]? )",scroller:"root|nearest|self","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","sign()":"sign( <calc-sum> )","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","sin()":"sin( <calc-sum> )","single-animation":"<'animation-duration'>||<easing-function>||<'animation-delay'>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]||<single-animation-timeline>","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<dashed-ident>|<scroll()>|<view()>","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>||<transition-behavior-value>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","sqrt()":"sqrt( <calc-sum> )","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>","system-color":"AccentColor|AccentColorText|ActiveText|ButtonBorder|ButtonFace|ButtonText|Canvas|CanvasText|Field|FieldText|GrayText|Highlight|HighlightText|LinkText|Mark|MarkText|SelectedItem|SelectedItemText|VisitedText","tan()":"tan( <calc-sum> )",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-range-name":"cover|contain|entry|exit|entry-crossing|exit-crossing","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","transition-behavior-value":"normal|allow-discrete","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","view()":"view( [<axis>||<'view-timeline-inset'>]? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"overlay|-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-size":"intrinsic|min-intrinsic|-webkit-fill-available|-webkit-fit-content|-webkit-min-content|-webkit-max-content|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","absolute-color-base":"<hex-color>|<absolute-color-function>|<named-color>|transparent","absolute-color-function":"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>",age:"child|young|old","anchor-name":"<dashed-ident>","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text",bottom:"<length>|auto","container-name":"<custom-ident>","container-condition":"not <query-in-parens>|<query-in-parens> [[and <query-in-parens>]*|[or <query-in-parens>]*]","coord-box":"content-box|padding-box|border-box|fill-box|stroke-box|view-box","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral","generic-script-specific":"generic( kai )|generic( fangsong )|generic( nastaliq )","generic-complete":"serif|sans-serif|system-ui|cursive|fantasy|math|monospace","generic-incomplete":"ui-serif|ui-sans-serif|ui-monospace|ui-rounded","-non-standard-generic-family":"-apple-system|BlinkMacSystemFont",left:"<length>|auto","color-base":"<hex-color>|<color-function>|<named-color>|<color-mix()>|transparent","color-function":"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>","device-cmyk()":"<legacy-device-cmyk-syntax>|<modern-device-cmyk-syntax>","legacy-device-cmyk-syntax":"device-cmyk( <number>#{4} )","modern-device-cmyk-syntax":"device-cmyk( <cmyk-component>{4} [/ [<alpha-value>|none]]? )","cmyk-component":"<number>|<percentage>|none","color-mix()":"color-mix( <color-interpolation-method> , [<color>&&<percentage [0,100]>?]#{2} )","color-space":"<rectangular-color-space>|<polar-color-space>|<custom-color-space>","custom-color-space":"<dashed-ident>",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke","palette-identifier":"<dashed-ident>",right:"<length>|auto","scope-start":"<forgiving-selector-list>","scope-end":"<forgiving-selector-list>","forgiving-selector-list":"<complex-real-selector-list>","forgiving-relative-selector-list":"<relative-real-selector-list>","selector-list":"<complex-selector-list>","complex-real-selector-list":"<complex-real-selector>#","simple-selector-list":"<simple-selector>#","relative-real-selector-list":"<relative-real-selector>#","complex-selector-unit":"[<compound-selector>? <pseudo-compound-selector>*]!","complex-real-selector":"<compound-selector> [<combinator>? <compound-selector>]*","relative-real-selector":"<combinator>? <complex-real-selector>","pseudo-compound-selector":"<pseudo-element-selector> <pseudo-class-selector>*","simple-selector":"<type-selector>|<subclass-selector>","legacy-pseudo-element-selector":"':' [before|after|first-line|first-letter]","single-animation-composition":"replace|add|accumulate","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,]>","color()":"color( <colorspace-params> [/ [<alpha-value>|none]]? )","colorspace-params":"[<predefined-rgb-params>|<xyz-params>]","predefined-rgb-params":"<predefined-rgb> [<number>|<percentage>|none]{3}","predefined-rgb":"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020","xyz-params":"<xyz-space> [<number>|<percentage>|none]{3}","xyz-space":"xyz|xyz-d50|xyz-d65","oklab()":"oklab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","oklch()":"oklch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","offset-path":"<ray()>|<url>|<basic-shape>","rect()":"rect( [<length-percentage>|auto]{4} [round <'border-radius'>]? )","xywh()":"xywh( <length-percentage>{2} <length-percentage [0,]>{2} [round <'border-radius'>]? )","query-in-parens":"( <container-condition> )|( <size-feature> )|style( <style-query> )|<general-enclosed>","size-feature":"<mf-plain>|<mf-boolean>|<mf-range>","style-feature":"<declaration>","style-query":"<style-condition>|<style-feature>","style-condition":"not <style-in-parens>|<style-in-parens> [[and <style-in-parens>]*|[or <style-in-parens>]*]","style-in-parens":"( <style-condition> )|( <style-feature> )|<general-enclosed>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box","inset-area":"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]","position-area":"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|center|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|center|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]","anchor()":"anchor( <anchor-element>?&&<anchor-side> , <length-percentage>? )","anchor-side":"inside|outside|top|left|right|bottom|start|end|self-start|self-end|<percentage>|center","anchor-size()":"anchor-size( [<anchor-element>||<anchor-size>]? , <length-percentage>? )","anchor-size":"width|height|block|inline|self-block|self-inline","anchor-element":"<dashed-ident>","try-size":"most-width|most-height|most-block-size|most-inline-size","try-tactic":"flip-block||flip-inline||flip-start","font-variant-css2":"normal|small-caps","font-width-css3":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded","system-family-name":"caption|icon|menu|message-box|small-caption|status-bar"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer","anchor-name":"none|<dashed-ident>#","anchor-scope":"none|all|<dashed-ident>#",animation:"<single-animation>#","animation-composition":"<single-animation-composition>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-range":"[<'animation-range-start'> <'animation-range-end'>?]#","animation-range-end":"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#","animation-range-start":"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto||<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end",caret:"<'caret-color'>||<'caret-shape'>","caret-color":"auto|<color>","caret-shape":"auto|bar|block|underscore",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none","clip-rule":"nonzero|evenodd",color:"<color>","color-interpolation-filters":"auto|sRGB|linearRGB","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[[size||inline-size]||layout||style||paint]","contain-intrinsic-size":"[auto? [none|<length>]]{1,2}","contain-intrinsic-block-size":"auto? [none|<length>]","contain-intrinsic-height":"auto? [none|<length>]","contain-intrinsic-inline-size":"auto? [none|<length>]","contain-intrinsic-width":"auto? [none|<length>]",container:"<'container-name'> [/ <'container-type'>]?","container-name":"none|<custom-ident>+","container-type":"normal||[size|inline-size]",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",d:"none|path( <string> )",cx:"<length>|<percentage>",cy:"<length>|<percentage>",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge","empty-cells":"show|hide","field-sizing":"content|fixed",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css2>||<'font-weight'>||<font-width-css3>]? <'font-size'> [/ <'line-height'>]? <'font-family'>#]|<system-family-name>|<-non-standard-font>","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-palette":"normal|light|dark|<palette-identifier>","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps||position]","font-synthesis-position":"auto|none","font-synthesis-small-caps":"auto|none","font-synthesis-style":"auto|none","font-synthesis-weight":"auto|none","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-emoji":"normal|text|emoji|unicode","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none|preserve-parent-color",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","hyphenate-character":"auto|<string>","hyphenate-limit-chars":"[auto|<integer>]{1,3}",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>","interpolate-size":"numeric-only|allow-keywords",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-depth":"auto-add|add( <integer> )|<integer>","math-shift":"normal|compact","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|<offset-path>||<coord-box>","offset-position":"normal|auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-width'>||<'outline-style'>||<'outline-color'>]","outline-color":"auto|<color>","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto",overlay:"none|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>",page:"auto|<custom-ident>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky","position-anchor":"auto|<anchor-name>","position-area":"none|<position-area>","position-try":"<'position-try-order'>? <'position-try-fallbacks'>","position-try-fallbacks":"none|[[<dashed-ident>||<try-tactic>]|<'position-area'>]#","position-try-order":"normal|<try-size>","position-visibility":"always|[anchors-valid||anchors-visible||no-overflow]","print-color-adjust":"economy|exact",quotes:"none|auto|[<string> <string>]+",r:"<length>|<percentage>",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",rx:"<length>|<percentage>",ry:"<length>|<percentage>",scale:"none|[<number>|<percentage>]{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","scroll-timeline":"[<'scroll-timeline-name'>||<'scroll-timeline-axis'>]#","scroll-timeline-axis":"[block|inline|x|y]#","scroll-timeline-name":"[none|<dashed-ident>]#","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<'opacity'>","stroke-width":"<svg-length>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-anchor":"start|middle|end","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"auto|[over|under]&&[right|left]?","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-spacing-trim":"space-all|normal|space-first|trim-start|trim-both|trim-all|auto","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]","text-wrap":"<'text-wrap-mode'>||<'text-wrap-style'>","text-wrap-mode":"auto|wrap|nowrap","text-wrap-style":"auto|balance|stable|pretty","timeline-scope":"none|<dashed-ident>#",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-behavior":"<transition-behavior-value>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vector-effect":"none|non-scaling-stroke|non-scaling-size|non-rotation|fixed-position","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>","view-timeline":"[<'view-timeline-name'> <'view-timeline-axis'>?]#","view-timeline-axis":"[block|inline|x|y]#","view-timeline-inset":"[[auto|<length-percentage>]{1,2}]#","view-timeline-name":"none|<dashed-ident>#","view-transition-name":"none|<custom-ident>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces|[<'white-space-collapse'>||<'text-wrap'>||<'white-space-trim'>]","white-space-collapse":"collapse|discard|preserve|preserve-breaks|preserve-spaces|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word|auto-phrase","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>",x:"<length>|<percentage>",y:"<length>|<percentage>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|never|always","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]","white-space-trim":"none|discard-before||discard-after||discard-inner"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-palette-values":{prelude:"<dashed-ident>",descriptors:{"base-palette":"light|dark|<integer [0,]>","font-family":"<family-name>#","override-colors":"[<integer [0,]> <absolute-color-base>]#"}},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]","page-orientation":"upright|rotate-left|rotate-right",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},"position-try":{prelude:"<dashed-ident>",descriptors:{top:"<'top'>",left:"<'left'>",bottom:"<'bottom'>",right:"<'right'>","inset-block-start":"<'inset-block-start'>","inset-block-end":"<'inset-block-end'>","inset-inline-start":"<'inset-inline-start'>","inset-inline-end":"<'inset-inline-end'>","inset-block":"<'inset-block'>","inset-inline":"<'inset-inline'>",inset:"<'inset'>","margin-top":"<'margin-top'>","margin-left":"<'margin-left'>","margin-bottom":"<'margin-bottom'>","margin-right":"<'margin-right'>","margin-block-start":"<'margin-block-start'>","margin-block-end":"<'margin-block-end'>","margin-inline-start":"<'margin-inline-start'>","margin-inline-end":"<'margin-inline-end'>",margin:"<'margin'>","margin-block":"<'margin-block'>","margin-inline":"<'margin-inline'>",width:"<'width'>",height:"<'height'>","min-width":"<'min-width'>","min-height":"<'min-height'>","max-width":"<'max-width'>","max-height":"<'max-height'>","block-size":"<'block-size'>","inline-size":"<'inline-size'>","min-block-size":"<'min-block-size'>","min-inline-size":"<'min-inline-size'>","max-block-size":"<'max-block-size'>","max-inline-size":"<'max-inline-size'>","align-self":"<'align-self'>|anchor-center","justify-self":"<'justify-self'>|anchor-center"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<declaration-value>?"}},scope:{prelude:"[( <scope-start> )]? [to ( <scope-end> )]?",descriptors:null},"starting-style":{prelude:null,descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},container:{prelude:"[<container-name>]? <container-condition>",descriptors:null},nest:{prelude:"<complex-selector-list>",descriptors:null}}},Za=43,Ss=45,gm=110,Bl=!0,Kde=!1;function ym(e,t){let n=this.tokenStart+e;const r=this.charCodeAt(n);for((r===Za||r===Ss)&&(t&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)Ei(this.charCodeAt(n))||this.error("Integer is expected",n)}function Cu(e){return ym.call(this,0,e)}function Bo(e,t){if(!this.cmpChar(this.tokenStart+e,t)){let n="";switch(t){case gm:n="N is expected";break;case Ss:n="HyphenMinus is expected";break}this.error(n,this.tokenStart+e)}}function lb(){let e=0,t=0,n=this.tokenType;for(;n===Dr||n===ji;)n=this.lookupType(++e);if(n!==hn)if(this.isDelim(Za,e)||this.isDelim(Ss,e)){t=this.isDelim(Za,e)?Za:Ss;do n=this.lookupType(++e);while(n===Dr||n===ji);n!==hn&&(this.skip(e),Cu.call(this,Bl))}else return null;return e>0&&this.skip(e),t===0&&(n=this.charCodeAt(this.tokenStart),n!==Za&&n!==Ss&&this.error("Number sign is expected")),Cu.call(this,t!==0),t===Ss?"-"+this.consume(hn):this.consume(hn)}const Zde="AnPlusB",Qde={a:[String,null],b:[String,null]};function i4(){const e=this.tokenStart;let t=null,n=null;if(this.tokenType===hn)Cu.call(this,Kde),n=this.consume(hn);else if(this.tokenType===Mt&&this.cmpChar(this.tokenStart,Ss))switch(t="-1",Bo.call(this,1,gm),this.tokenEnd-this.tokenStart){case 2:this.next(),n=lb.call(this);break;case 3:Bo.call(this,2,Ss),this.next(),this.skipSC(),Cu.call(this,Bl),n="-"+this.consume(hn);break;default:Bo.call(this,2,Ss),ym.call(this,3,Bl),this.next(),n=this.substrToCursor(e+2)}else if(this.tokenType===Mt||this.isDelim(Za)&&this.lookupType(1)===Mt){let r=0;switch(t="1",this.isDelim(Za)&&(r=1,this.next()),Bo.call(this,0,gm),this.tokenEnd-this.tokenStart){case 1:this.next(),n=lb.call(this);break;case 2:Bo.call(this,1,Ss),this.next(),this.skipSC(),Cu.call(this,Bl),n="-"+this.consume(hn);break;default:Bo.call(this,1,Ss),ym.call(this,2,Bl),this.next(),n=this.substrToCursor(e+r+1)}}else if(this.tokenType===Pn){const r=this.charCodeAt(this.tokenStart),i=r===Za||r===Ss;let s=this.tokenStart+i;for(;s<this.tokenEnd&&Ei(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),Bo.call(this,s-this.tokenStart,gm),t=this.substring(e,s),s+1===this.tokenEnd?(this.next(),n=lb.call(this)):(Bo.call(this,s-this.tokenStart+1,Ss),s+2===this.tokenEnd?(this.next(),this.skipSC(),Cu.call(this,Bl),n="-"+this.consume(hn)):(ym.call(this,s-this.tokenStart+2,Bl),this.next(),n=this.substrToCursor(s+1)))}else this.error();return t!==null&&t.charCodeAt(0)===Za&&(t=t.substr(1)),n!==null&&n.charCodeAt(0)===Za&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(e,this.tokenStart),a:t,b:n}}function Jde(e){if(e.a){const t=e.a==="+1"&&"n"||e.a==="1"&&"n"||e.a==="-1"&&"-n"||e.a+"n";if(e.b){const n=e.b[0]==="-"||e.b[0]==="+"?e.b:"+"+e.b;this.tokenize(t+n)}else this.tokenize(t)}else this.tokenize(e.b)}const ehe=Object.freeze(Object.defineProperty({__proto__:null,generate:Jde,name:Zde,parse:i4,structure:Qde},Symbol.toStringTag,{value:"Module"}));function fT(){return this.Raw(this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function the(){for(let e=1,t;t=this.lookupType(e);e++){if(t===Qs)return!0;if(t===Pi||t===ei)return!1}return!1}const nhe="Atrule",rhe="atrule",ihe={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function s4(e=!1){const t=this.tokenStart;let n,r,i=null,s=null;switch(this.eat(ei),n=this.substrToCursor(t+1),r=n.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==Pi&&this.tokenType!==Vi&&(this.parseAtrulePrelude?i=this.parseWithFallback(this.AtrulePrelude.bind(this,n,e),fT):i=fT.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case Vi:this.next();break;case Pi:hasOwnProperty.call(this.atrule,r)&&typeof this.atrule[r].block=="function"?s=this.atrule[r].block.call(this,e):s=this.Block(the.call(this));break}return{type:"Atrule",loc:this.getLocation(t,this.tokenStart),name:n,prelude:i,block:s}}function she(e){this.token(ei,"@"+e.name),e.prelude!==null&&this.node(e.prelude),e.block?this.node(e.block):this.token(Vi,";")}const ahe=Object.freeze(Object.defineProperty({__proto__:null,generate:she,name:nhe,parse:s4,structure:ihe,walkContext:rhe},Symbol.toStringTag,{value:"Module"})),ohe="AtrulePrelude",lhe="atrulePrelude",che={children:[[]]};function a4(e){let t=null;return e!==null&&(e=e.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,e)&&typeof this.atrule[e].prelude=="function"?t=this.atrule[e].prelude.call(this):t=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Pi&&this.tokenType!==Vi&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(t),children:t}}function uhe(e){this.children(e)}const dhe=Object.freeze(Object.defineProperty({__proto__:null,generate:uhe,name:ohe,parse:a4,structure:che,walkContext:lhe},Symbol.toStringTag,{value:"Module"})),hhe=36,o4=42,bm=61,fhe=94,Dx=124,phe=126;function mhe(){this.eof&&this.error("Unexpected end of input");const e=this.tokenStart;let t=!1;return this.isDelim(o4)?(t=!0,this.next()):this.isDelim(Dx)||this.eat(Mt),this.isDelim(Dx)?this.charCodeAt(this.tokenStart+1)!==bm?(this.next(),this.eat(Mt)):t&&this.error("Identifier is expected",this.tokenEnd):t&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function ghe(){const e=this.tokenStart,t=this.charCodeAt(e);return t!==bm&&t!==phe&&t!==fhe&&t!==hhe&&t!==o4&&t!==Dx&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),t!==bm&&(this.isDelim(bm)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(e)}const yhe="AttributeSelector",bhe={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function l4(){const e=this.tokenStart;let t,n=null,r=null,i=null;return this.eat(ta),this.skipSC(),t=mhe.call(this),this.skipSC(),this.tokenType!==Na&&(this.tokenType!==Mt&&(n=ghe.call(this),this.skipSC(),r=this.tokenType===$a?this.String():this.Identifier(),this.skipSC()),this.tokenType===Mt&&(i=this.consume(Mt),this.skipSC())),this.eat(Na),{type:"AttributeSelector",loc:this.getLocation(e,this.tokenStart),name:t,matcher:n,value:r,flags:i}}function vhe(e){this.token(Ln,"["),this.node(e.name),e.matcher!==null&&(this.tokenize(e.matcher),this.node(e.value)),e.flags!==null&&this.token(Mt,e.flags),this.token(Ln,"]")}const xhe=Object.freeze(Object.defineProperty({__proto__:null,generate:vhe,name:yhe,parse:l4,structure:bhe},Symbol.toStringTag,{value:"Module"})),whe=38;function c4(){return this.Raw(null,!0)}function pT(){return this.parseWithFallback(this.Rule,c4)}function mT(){return this.Raw(this.consumeUntilSemicolonIncluded,!0)}function _he(){if(this.tokenType===Vi)return mT.call(this,this.tokenIndex);const e=this.parseWithFallback(this.Declaration,mT);return this.tokenType===Vi&&this.next(),e}const khe="Block",She="block",Che={children:[["Atrule","Rule","Declaration"]]};function u4(e){const t=e?_he:pT,n=this.tokenStart;let r=this.createList();this.eat(Pi);e:for(;!this.eof;)switch(this.tokenType){case Qs:break e;case Dr:case ji:this.next();break;case ei:r.push(this.parseWithFallback(this.Atrule.bind(this,e),c4));break;default:e&&this.isDelim(whe)?r.push(pT.call(this)):r.push(t.call(this))}return this.eof||this.eat(Qs),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:r}}function Ehe(e){this.token(Pi,"{"),this.children(e,t=>{t.type==="Declaration"&&this.token(Vi,";")}),this.token(Qs,"}")}const The=Object.freeze(Object.defineProperty({__proto__:null,generate:Ehe,name:khe,parse:u4,structure:Che,walkContext:She},Symbol.toStringTag,{value:"Module"})),jhe="Brackets",Ahe={children:[[]]};function d4(e,t){const n=this.tokenStart;let r=null;return this.eat(ta),r=e.call(this,t),this.eof||this.eat(Na),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:r}}function Phe(e){this.token(Ln,"["),this.children(e),this.token(Ln,"]")}const Nhe=Object.freeze(Object.defineProperty({__proto__:null,generate:Phe,name:jhe,parse:d4,structure:Ahe},Symbol.toStringTag,{value:"Module"})),Ohe="CDC",Rhe=[];function h4(){const e=this.tokenStart;return this.eat(os),{type:"CDC",loc:this.getLocation(e,this.tokenStart)}}function Mhe(){this.token(os,"-->")}const Lhe=Object.freeze(Object.defineProperty({__proto__:null,generate:Mhe,name:Ohe,parse:h4,structure:Rhe},Symbol.toStringTag,{value:"Module"})),Ihe="CDO",$he=[];function f4(){const e=this.tokenStart;return this.eat(Df),{type:"CDO",loc:this.getLocation(e,this.tokenStart)}}function Dhe(){this.token(Df,"<!--")}const zhe=Object.freeze(Object.defineProperty({__proto__:null,generate:Dhe,name:Ihe,parse:f4,structure:$he},Symbol.toStringTag,{value:"Module"})),Fhe=46,Bhe="ClassSelector",Uhe={name:String};function p4(){return this.eatDelim(Fhe),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Mt)}}function Hhe(e){this.token(Ln,"."),this.token(Mt,e.name)}const Whe=Object.freeze(Object.defineProperty({__proto__:null,generate:Hhe,name:Bhe,parse:p4,structure:Uhe},Symbol.toStringTag,{value:"Module"})),Vhe=43,gT=47,Ghe=62,qhe=126,Yhe="Combinator",Xhe={name:String};function m4(){const e=this.tokenStart;let t;switch(this.tokenType){case Dr:t=" ";break;case Ln:switch(this.charCodeAt(this.tokenStart)){case Ghe:case Vhe:case qhe:this.next();break;case gT:this.next(),this.eatIdent("deep"),this.eatDelim(gT);break;default:this.error("Combinator is expected")}t=this.substrToCursor(e);break}return{type:"Combinator",loc:this.getLocation(e,this.tokenStart),name:t}}function Khe(e){this.tokenize(e.name)}const Zhe=Object.freeze(Object.defineProperty({__proto__:null,generate:Khe,name:Yhe,parse:m4,structure:Xhe},Symbol.toStringTag,{value:"Module"})),Qhe=42,Jhe=47,efe="Comment",tfe={value:String};function g4(){const e=this.tokenStart;let t=this.tokenEnd;return this.eat(ji),t-e+2>=2&&this.charCodeAt(t-2)===Qhe&&this.charCodeAt(t-1)===Jhe&&(t-=2),{type:"Comment",loc:this.getLocation(e,this.tokenStart),value:this.substring(e+2,t)}}function nfe(e){this.token(ji,"/*"+e.value+"*/")}const rfe=Object.freeze(Object.defineProperty({__proto__:null,generate:nfe,name:efe,parse:g4,structure:tfe},Symbol.toStringTag,{value:"Module"})),ife=new Set([Wi,dn,Qo]),sfe="Condition",afe={kind:String,children:[["Identifier","Feature","FeatureFunction","FeatureRange","SupportsDeclaration"]]};function yT(e){return this.lookupTypeNonSC(1)===Mt&&ife.has(this.lookupTypeNonSC(2))?this.Feature(e):this.FeatureRange(e)}const ofe={media:yT,container:yT,supports(){return this.SupportsDeclaration()}};function y4(e="media"){const t=this.createList();e:for(;!this.eof;)switch(this.tokenType){case ji:case Dr:this.next();continue;case Mt:t.push(this.Identifier());break;case Xn:{let n=this.parseWithFallback(()=>ofe[e].call(this,e),()=>null);n||(n=this.parseWithFallback(()=>{this.eat(Xn);const r=this.Condition(e);return this.eat(dn),r},()=>this.GeneralEnclosed(e))),t.push(n);break}case _n:{let n=this.parseWithFallback(()=>this.FeatureFunction(e),()=>null);n||(n=this.GeneralEnclosed(e)),t.push(n);break}default:break e}return t.isEmpty&&this.error("Condition is expected"),{type:"Condition",loc:this.getLocationFromList(t),kind:e,children:t}}function lfe(e){e.children.forEach(t=>{t.type==="Condition"?(this.token(Xn,"("),this.node(t),this.token(dn,")")):this.node(t)})}const cfe=Object.freeze(Object.defineProperty({__proto__:null,generate:lfe,name:sfe,parse:y4,structure:afe},Symbol.toStringTag,{value:"Module"})),b4=33,ufe=35,dfe=36,hfe=38,ffe=42,pfe=43,bT=47;function mfe(){return this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!0)}function gfe(){return this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!1)}function yfe(){const e=this.tokenIndex,t=this.Value();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==Vi&&this.isDelim(b4)===!1&&this.isBalanceEdge(e)===!1&&this.error(),t}const bfe="Declaration",vfe="declaration",xfe={important:[Boolean,String],property:String,value:["Value","Raw"]};function v4(){const e=this.tokenStart,t=this.tokenIndex,n=_fe.call(this),r=O_(n),i=r?this.parseCustomProperty:this.parseValue,s=r?gfe:mfe;let a=!1,o;this.skipSC(),this.eat(Wi);const u=this.tokenIndex;if(r||this.skipSC(),i?o=this.parseWithFallback(yfe,s):o=s.call(this,this.tokenIndex),r&&o.type==="Value"&&o.children.isEmpty){for(let d=u-this.tokenIndex;d<=0;d++)if(this.lookupType(d)===Dr){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(b4)&&(a=kfe.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==Vi&&this.isBalanceEdge(t)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(e,this.tokenStart),important:a,property:n,value:o}}function wfe(e){this.token(Mt,e.property),this.token(Wi,":"),this.node(e.value),e.important&&(this.token(Ln,"!"),this.token(Mt,e.important===!0?"important":e.important))}function _fe(){const e=this.tokenStart;if(this.tokenType===Ln)switch(this.charCodeAt(this.tokenStart)){case ffe:case dfe:case pfe:case ufe:case hfe:this.next();break;case bT:this.next(),this.isDelim(bT)&&this.next();break}return this.tokenType===yr?this.eat(yr):this.eat(Mt),this.substrToCursor(e)}function kfe(){this.eat(Ln),this.skipSC();const e=this.consume(Mt);return e==="important"?!0:e}const Sfe=Object.freeze(Object.defineProperty({__proto__:null,generate:wfe,name:bfe,parse:v4,structure:xfe,walkContext:vfe},Symbol.toStringTag,{value:"Module"})),Cfe=38;function cb(){return this.Raw(this.consumeUntilSemicolonIncluded,!0)}const Efe="DeclarationList",Tfe={children:[["Declaration","Atrule","Rule"]]};function x4(){const e=this.createList();for(;!this.eof;)switch(this.tokenType){case Dr:case ji:case Vi:this.next();break;case ei:e.push(this.parseWithFallback(this.Atrule.bind(this,!0),cb));break;default:this.isDelim(Cfe)?e.push(this.parseWithFallback(this.Rule,cb)):e.push(this.parseWithFallback(this.Declaration,cb))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}}function jfe(e){this.children(e,t=>{t.type==="Declaration"&&this.token(Vi,";")})}const Afe=Object.freeze(Object.defineProperty({__proto__:null,generate:jfe,name:Efe,parse:x4,structure:Tfe},Symbol.toStringTag,{value:"Module"})),Pfe="Dimension",Nfe={value:String,unit:String};function w4(){const e=this.tokenStart,t=this.consumeNumber(Pn);return{type:"Dimension",loc:this.getLocation(e,this.tokenStart),value:t,unit:this.substring(e+t.length,this.tokenStart)}}function Ofe(e){this.token(Pn,e.value+e.unit)}const Rfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ofe,name:Pfe,parse:w4,structure:Nfe},Symbol.toStringTag,{value:"Module"})),Mfe=47,Lfe="Feature",Ife={kind:String,name:String,value:["Identifier","Number","Dimension","Ratio","Function",null]};function _4(e){const t=this.tokenStart;let n,r=null;if(this.eat(Xn),this.skipSC(),n=this.consume(Mt),this.skipSC(),this.tokenType!==dn){switch(this.eat(Wi),this.skipSC(),this.tokenType){case hn:this.lookupNonWSType(1)===Ln?r=this.Ratio():r=this.Number();break;case Pn:r=this.Dimension();break;case Mt:r=this.Identifier();break;case _n:r=this.parseWithFallback(()=>{const i=this.Function(this.readSequence,this.scope.Value);return this.skipSC(),this.isDelim(Mfe)&&this.error(),i},()=>this.Ratio());break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eof||this.eat(dn),{type:"Feature",loc:this.getLocation(t,this.tokenStart),kind:e,name:n,value:r}}function $fe(e){this.token(Xn,"("),this.token(Mt,e.name),e.value!==null&&(this.token(Wi,":"),this.node(e.value)),this.token(dn,")")}const Dfe=Object.freeze(Object.defineProperty({__proto__:null,generate:$fe,name:Lfe,parse:_4,structure:Ife},Symbol.toStringTag,{value:"Module"})),zfe="FeatureFunction",Ffe={kind:String,feature:String,value:["Declaration","Selector"]};function Bfe(e,t){const r=(this.features[e]||{})[t];return typeof r!="function"&&this.error(`Unknown feature ${t}()`),r}function k4(e="unknown"){const t=this.tokenStart,n=this.consumeFunctionName(),r=Bfe.call(this,e,n.toLowerCase());this.skipSC();const i=this.parseWithFallback(()=>{const s=this.tokenIndex,a=r.call(this);return this.eof===!1&&this.isBalanceEdge(s)===!1&&this.error(),a},()=>this.Raw(null,!1));return this.eof||this.eat(dn),{type:"FeatureFunction",loc:this.getLocation(t,this.tokenStart),kind:e,feature:n,value:i}}function Ufe(e){this.token(_n,e.feature+"("),this.node(e.value),this.token(dn,")")}const Hfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ufe,name:zfe,parse:k4,structure:Ffe},Symbol.toStringTag,{value:"Module"})),vT=47,Wfe=60,xT=61,Vfe=62,Gfe="FeatureRange",qfe={kind:String,left:["Identifier","Number","Dimension","Ratio","Function"],leftComparison:String,middle:["Identifier","Number","Dimension","Ratio","Function"],rightComparison:[String,null],right:["Identifier","Number","Dimension","Ratio","Function",null]};function ub(){switch(this.skipSC(),this.tokenType){case hn:return this.isDelim(vT,this.lookupOffsetNonSC(1))?this.Ratio():this.Number();case Pn:return this.Dimension();case Mt:return this.Identifier();case _n:return this.parseWithFallback(()=>{const e=this.Function(this.readSequence,this.scope.Value);return this.skipSC(),this.isDelim(vT)&&this.error(),e},()=>this.Ratio());default:this.error("Number, dimension, ratio or identifier is expected")}}function wT(e){if(this.skipSC(),this.isDelim(Wfe)||this.isDelim(Vfe)){const t=this.source[this.tokenStart];return this.next(),this.isDelim(xT)?(this.next(),t+"="):t}if(this.isDelim(xT))return"=";this.error(`Expected ${e?'":", ':""}"<", ">", "=" or ")"`)}function S4(e="unknown"){const t=this.tokenStart;this.skipSC(),this.eat(Xn);const n=ub.call(this),r=wT.call(this,n.type==="Identifier"),i=ub.call(this);let s=null,a=null;return this.lookupNonWSType(0)!==dn&&(s=wT.call(this),a=ub.call(this)),this.skipSC(),this.eat(dn),{type:"FeatureRange",loc:this.getLocation(t,this.tokenStart),kind:e,left:n,leftComparison:r,middle:i,rightComparison:s,right:a}}function Yfe(e){this.token(Xn,"("),this.node(e.left),this.tokenize(e.leftComparison),this.node(e.middle),e.right&&(this.tokenize(e.rightComparison),this.node(e.right)),this.token(dn,")")}const Xfe=Object.freeze(Object.defineProperty({__proto__:null,generate:Yfe,name:Gfe,parse:S4,structure:qfe},Symbol.toStringTag,{value:"Module"})),Kfe="Function",Zfe="function",Qfe={name:String,children:[[]]};function C4(e,t){const n=this.tokenStart,r=this.consumeFunctionName(),i=r.toLowerCase();let s;return s=t.hasOwnProperty(i)?t[i].call(this,t):e.call(this,t),this.eof||this.eat(dn),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:r,children:s}}function Jfe(e){this.token(_n,e.name+"("),this.children(e),this.token(dn,")")}const epe=Object.freeze(Object.defineProperty({__proto__:null,generate:Jfe,name:Kfe,parse:C4,structure:Qfe,walkContext:Zfe},Symbol.toStringTag,{value:"Module"})),tpe="GeneralEnclosed",npe={kind:String,function:[String,null],children:[[]]};function E4(e){const t=this.tokenStart;let n=null;this.tokenType===_n?n=this.consumeFunctionName():this.eat(Xn);const r=this.parseWithFallback(()=>{const i=this.tokenIndex,s=this.readSequence(this.scope.Value);return this.eof===!1&&this.isBalanceEdge(i)===!1&&this.error(),s},()=>this.createSingleNodeList(this.Raw(null,!1)));return this.eof||this.eat(dn),{type:"GeneralEnclosed",loc:this.getLocation(t,this.tokenStart),kind:e,function:n,children:r}}function rpe(e){e.function?this.token(_n,e.function+"("):this.token(Xn,"("),this.children(e),this.token(dn,")")}const ipe=Object.freeze(Object.defineProperty({__proto__:null,generate:rpe,name:tpe,parse:E4,structure:npe},Symbol.toStringTag,{value:"Module"})),spe="XXX",ape="Hash",ope={value:String};function T4(){const e=this.tokenStart;return this.eat(yr),{type:"Hash",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e+1)}}function lpe(e){this.token(yr,"#"+e.value)}const cpe=Object.freeze(Object.defineProperty({__proto__:null,generate:lpe,name:ape,parse:T4,structure:ope,xxx:spe},Symbol.toStringTag,{value:"Module"})),upe="Identifier",dpe={name:String};function j4(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Mt)}}function hpe(e){this.token(Mt,e.name)}const fpe=Object.freeze(Object.defineProperty({__proto__:null,generate:hpe,name:upe,parse:j4,structure:dpe},Symbol.toStringTag,{value:"Module"})),ppe="IdSelector",mpe={name:String};function A4(){const e=this.tokenStart;return this.eat(yr),{type:"IdSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e+1)}}function gpe(e){this.token(Ln,"#"+e.name)}const ype=Object.freeze(Object.defineProperty({__proto__:null,generate:gpe,name:ppe,parse:A4,structure:mpe},Symbol.toStringTag,{value:"Module"})),bpe=46,vpe="Layer",xpe={name:String};function P4(){let e=this.tokenStart,t=this.consume(Mt);for(;this.isDelim(bpe);)this.eat(Ln),t+="."+this.consume(Mt);return{type:"Layer",loc:this.getLocation(e,this.tokenStart),name:t}}function wpe(e){this.tokenize(e.name)}const _pe=Object.freeze(Object.defineProperty({__proto__:null,generate:wpe,name:vpe,parse:P4,structure:xpe},Symbol.toStringTag,{value:"Module"})),kpe="LayerList",Spe={children:[["Layer"]]};function N4(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.Layer()),this.lookupTypeNonSC(0)===vs);)this.skipSC(),this.next(),this.skipSC();return{type:"LayerList",loc:this.getLocationFromList(e),children:e}}function Cpe(e){this.children(e,()=>this.token(vs,","))}const Epe=Object.freeze(Object.defineProperty({__proto__:null,generate:Cpe,name:kpe,parse:N4,structure:Spe},Symbol.toStringTag,{value:"Module"})),Tpe="MediaQuery",jpe={modifier:[String,null],mediaType:[String,null],condition:["Condition",null]};function O4(){const e=this.tokenStart;let t=null,n=null,r=null;if(this.skipSC(),this.tokenType===Mt&&this.lookupTypeNonSC(1)!==Xn){const i=this.consume(Mt),s=i.toLowerCase();switch(s==="not"||s==="only"?(this.skipSC(),t=s,n=this.consume(Mt)):n=i,this.lookupTypeNonSC(0)){case Mt:{this.skipSC(),this.eatIdent("and"),r=this.Condition("media");break}case Pi:case Vi:case vs:case Qo:break;default:this.error("Identifier or parenthesis is expected")}}else switch(this.tokenType){case Mt:case Xn:case _n:{r=this.Condition("media");break}case Pi:case Vi:case Qo:break;default:this.error("Identifier or parenthesis is expected")}return{type:"MediaQuery",loc:this.getLocation(e,this.tokenStart),modifier:t,mediaType:n,condition:r}}function Ape(e){e.mediaType?(e.modifier&&this.token(Mt,e.modifier),this.token(Mt,e.mediaType),e.condition&&(this.token(Mt,"and"),this.node(e.condition))):e.condition&&this.node(e.condition)}const Ppe=Object.freeze(Object.defineProperty({__proto__:null,generate:Ape,name:Tpe,parse:O4,structure:jpe},Symbol.toStringTag,{value:"Module"})),Npe="MediaQueryList",Ope={children:[["MediaQuery"]]};function R4(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery()),this.tokenType===vs);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}}function Rpe(e){this.children(e,()=>this.token(vs,","))}const Mpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Rpe,name:Npe,parse:R4,structure:Ope},Symbol.toStringTag,{value:"Module"})),Lpe=38,Ipe="NestingSelector",$pe={};function M4(){const e=this.tokenStart;return this.eatDelim(Lpe),{type:"NestingSelector",loc:this.getLocation(e,this.tokenStart)}}function Dpe(){this.token(Ln,"&")}const zpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Dpe,name:Ipe,parse:M4,structure:$pe},Symbol.toStringTag,{value:"Module"})),Fpe="Nth",Bpe={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function L4(){this.skipSC();const e=this.tokenStart;let t=e,n=null,r;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?r=this.Identifier():r=this.AnPlusB(),t=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),n=this.SelectorList(),t=this.tokenStart),{type:"Nth",loc:this.getLocation(e,t),nth:r,selector:n}}function Upe(e){this.node(e.nth),e.selector!==null&&(this.token(Mt,"of"),this.node(e.selector))}const Hpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Upe,name:Fpe,parse:L4,structure:Bpe},Symbol.toStringTag,{value:"Module"})),Wpe="Number",Vpe={value:String};function I4(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(hn)}}function Gpe(e){this.token(hn,e.value)}const qpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Gpe,name:Wpe,parse:I4,structure:Vpe},Symbol.toStringTag,{value:"Module"})),Ype="Operator",Xpe={value:String};function $4(){const e=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function Kpe(e){this.tokenize(e.value)}const Zpe=Object.freeze(Object.defineProperty({__proto__:null,generate:Kpe,name:Ype,parse:$4,structure:Xpe},Symbol.toStringTag,{value:"Module"})),Qpe="Parentheses",Jpe={children:[[]]};function D4(e,t){const n=this.tokenStart;let r=null;return this.eat(Xn),r=e.call(this,t),this.eof||this.eat(dn),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:r}}function eme(e){this.token(Xn,"("),this.children(e),this.token(dn,")")}const tme=Object.freeze(Object.defineProperty({__proto__:null,generate:eme,name:Qpe,parse:D4,structure:Jpe},Symbol.toStringTag,{value:"Module"})),nme="Percentage",rme={value:String};function z4(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(Mr)}}function ime(e){this.token(Mr,e.value+"%")}const sme=Object.freeze(Object.defineProperty({__proto__:null,generate:ime,name:nme,parse:z4,structure:rme},Symbol.toStringTag,{value:"Module"})),ame="PseudoClassSelector",ome="function",lme={name:String,children:[["Raw"],null]};function F4(){const e=this.tokenStart;let t=null,n,r;return this.eat(Wi),this.tokenType===_n?(n=this.consumeFunctionName(),r=n.toLowerCase(),this.lookupNonWSType(0)==dn?t=this.createList():hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(null,!1))),this.eat(dn)):n=this.consume(Mt),{type:"PseudoClassSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function cme(e){this.token(Wi,":"),e.children===null?this.token(Mt,e.name):(this.token(_n,e.name+"("),this.children(e),this.token(dn,")"))}const ume=Object.freeze(Object.defineProperty({__proto__:null,generate:cme,name:ame,parse:F4,structure:lme,walkContext:ome},Symbol.toStringTag,{value:"Module"})),dme="PseudoElementSelector",hme="function",fme={name:String,children:[["Raw"],null]};function B4(){const e=this.tokenStart;let t=null,n,r;return this.eat(Wi),this.eat(Wi),this.tokenType===_n?(n=this.consumeFunctionName(),r=n.toLowerCase(),this.lookupNonWSType(0)==dn?t=this.createList():hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(null,!1))),this.eat(dn)):n=this.consume(Mt),{type:"PseudoElementSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function pme(e){this.token(Wi,":"),this.token(Wi,":"),e.children===null?this.token(Mt,e.name):(this.token(_n,e.name+"("),this.children(e),this.token(dn,")"))}const mme=Object.freeze(Object.defineProperty({__proto__:null,generate:pme,name:dme,parse:B4,structure:fme,walkContext:hme},Symbol.toStringTag,{value:"Module"})),_T=47;function kT(){switch(this.skipSC(),this.tokenType){case hn:return this.Number();case _n:return this.Function(this.readSequence,this.scope.Value);default:this.error("Number of function is expected")}}const gme="Ratio",yme={left:["Number","Function"],right:["Number","Function",null]};function U4(){const e=this.tokenStart,t=kT.call(this);let n=null;return this.skipSC(),this.isDelim(_T)&&(this.eatDelim(_T),n=kT.call(this)),{type:"Ratio",loc:this.getLocation(e,this.tokenStart),left:t,right:n}}function bme(e){this.node(e.left),this.token(Ln,"/"),e.right?this.node(e.right):this.node(hn,1)}const vme=Object.freeze(Object.defineProperty({__proto__:null,generate:bme,name:gme,parse:U4,structure:yme},Symbol.toStringTag,{value:"Module"}));function xme(){return this.tokenIndex>0&&this.lookupType(-1)===Dr?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const wme="Raw",_me={value:String};function H4(e,t){const n=this.getTokenStart(this.tokenIndex);let r;return this.skipUntilBalanced(this.tokenIndex,e||this.consumeUntilBalanceEnd),t&&this.tokenStart>n?r=xme.call(this):r=this.tokenStart,{type:"Raw",loc:this.getLocation(n,r),value:this.substring(n,r)}}function kme(e){this.tokenize(e.value)}const Sme=Object.freeze(Object.defineProperty({__proto__:null,generate:kme,name:wme,parse:H4,structure:_me},Symbol.toStringTag,{value:"Module"}));function ST(){return this.Raw(this.consumeUntilLeftCurlyBracket,!0)}function Cme(){const e=this.SelectorList();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==Pi&&this.error(),e}const Eme="Rule",Tme="rule",jme={prelude:["SelectorList","Raw"],block:["Block"]};function W4(){const e=this.tokenIndex,t=this.tokenStart;let n,r;return this.parseRulePrelude?n=this.parseWithFallback(Cme,ST):n=ST.call(this,e),r=this.Block(!0),{type:"Rule",loc:this.getLocation(t,this.tokenStart),prelude:n,block:r}}function Ame(e){this.node(e.prelude),this.node(e.block)}const Pme=Object.freeze(Object.defineProperty({__proto__:null,generate:Ame,name:Eme,parse:W4,structure:jme,walkContext:Tme},Symbol.toStringTag,{value:"Module"})),Nme="Scope",Ome={root:["SelectorList","Raw",null],limit:["SelectorList","Raw",null]};function V4(){let e=null,t=null;this.skipSC();const n=this.tokenStart;return this.tokenType===Xn&&(this.next(),this.skipSC(),e=this.parseWithFallback(this.SelectorList,()=>this.Raw(!1,!0)),this.skipSC(),this.eat(dn)),this.lookupNonWSType(0)===Mt&&(this.skipSC(),this.eatIdent("to"),this.skipSC(),this.eat(Xn),this.skipSC(),t=this.parseWithFallback(this.SelectorList,()=>this.Raw(!1,!0)),this.skipSC(),this.eat(dn)),{type:"Scope",loc:this.getLocation(n,this.tokenStart),root:e,limit:t}}function Rme(e){e.root&&(this.token(Xn,"("),this.node(e.root),this.token(dn,")")),e.limit&&(this.token(Mt,"to"),this.token(Xn,"("),this.node(e.limit),this.token(dn,")"))}const Mme=Object.freeze(Object.defineProperty({__proto__:null,generate:Rme,name:Nme,parse:V4,structure:Ome},Symbol.toStringTag,{value:"Module"})),Lme="Selector",Ime={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator"]]};function G4(){const e=this.readSequence(this.scope.Selector);return this.getFirstListNode(e)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}}function $me(e){this.children(e)}const Dme=Object.freeze(Object.defineProperty({__proto__:null,generate:$me,name:Lme,parse:G4,structure:Ime},Symbol.toStringTag,{value:"Module"})),zme="SelectorList",Fme="selector",Bme={children:[["Selector","Raw"]]};function q4(){const e=this.createList();for(;!this.eof;){if(e.push(this.Selector()),this.tokenType===vs){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}}function Ume(e){this.children(e,()=>this.token(vs,","))}const Hme=Object.freeze(Object.defineProperty({__proto__:null,generate:Ume,name:zme,parse:q4,structure:Bme,walkContext:Fme},Symbol.toStringTag,{value:"Module"})),zx=92,Y4=34,Wme=39;function X4(e){const t=e.length,n=e.charCodeAt(0),r=n===Y4||n===Wme?1:0,i=r===1&&t>1&&e.charCodeAt(t-1)===n?t-2:t-1;let s="";for(let a=r;a<=i;a++){let o=e.charCodeAt(a);if(o===zx){if(a===i){a!==t-1&&(s=e.substr(a+1));break}if(o=e.charCodeAt(++a),to(zx,o)){const u=a-1,d=Ku(e,u);a=d-1,s+=ER(e.substring(u+1,d))}else o===13&&e.charCodeAt(a+1)===10&&a++}else s+=e[a]}return s}function Vme(e,t){const n='"',r=Y4;let i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);if(o===0){i+="";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===r||o===zx?(i+="\\"+e.charAt(a),s=!1):(s&&(gl(o)||dc(o))&&(i+=" "),i+=e.charAt(a),s=!1)}return n+i+n}const Gme="String",qme={value:String};function K4(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:X4(this.consume($a))}}function Yme(e){this.token($a,Vme(e.value))}const Xme=Object.freeze(Object.defineProperty({__proto__:null,generate:Yme,name:Gme,parse:K4,structure:qme},Symbol.toStringTag,{value:"Module"})),Kme=33;function CT(){return this.Raw(null,!1)}const Zme="StyleSheet",Qme="stylesheet",Jme={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function Z4(){const e=this.tokenStart,t=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case Dr:this.next();continue;case ji:if(this.charCodeAt(this.tokenStart+2)!==Kme){this.next();continue}n=this.Comment();break;case Df:n=this.CDO();break;case os:n=this.CDC();break;case ei:n=this.parseWithFallback(this.Atrule,CT);break;default:n=this.parseWithFallback(this.Rule,CT)}t.push(n)}return{type:"StyleSheet",loc:this.getLocation(e,this.tokenStart),children:t}}function ege(e){this.children(e)}const tge=Object.freeze(Object.defineProperty({__proto__:null,generate:ege,name:Zme,parse:Z4,structure:Jme,walkContext:Qme},Symbol.toStringTag,{value:"Module"})),nge="SupportsDeclaration",rge={declaration:"Declaration"};function Q4(){const e=this.tokenStart;this.eat(Xn),this.skipSC();const t=this.Declaration();return this.eof||this.eat(dn),{type:"SupportsDeclaration",loc:this.getLocation(e,this.tokenStart),declaration:t}}function ige(e){this.token(Xn,"("),this.node(e.declaration),this.token(dn,")")}const sge=Object.freeze(Object.defineProperty({__proto__:null,generate:ige,name:nge,parse:Q4,structure:rge},Symbol.toStringTag,{value:"Module"})),age=42,ET=124;function db(){this.tokenType!==Mt&&this.isDelim(age)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const oge="TypeSelector",lge={name:String};function J4(){const e=this.tokenStart;return this.isDelim(ET)?(this.next(),db.call(this)):(db.call(this),this.isDelim(ET)&&(this.next(),db.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function cge(e){this.tokenize(e.name)}const uge=Object.freeze(Object.defineProperty({__proto__:null,generate:cge,name:oge,parse:J4,structure:lge},Symbol.toStringTag,{value:"Module"})),eM=43,tM=45,Fx=63;function hh(e,t){let n=0;for(let r=this.tokenStart+e;r<this.tokenEnd;r++){const i=this.charCodeAt(r);if(i===tM&&t&&n!==0)return hh.call(this,e+n+1,!1),-1;gl(i)||this.error(t&&n!==0?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",r),++n>6&&this.error("Too many hex digits",r)}return this.next(),n}function zp(e){let t=0;for(;this.isDelim(Fx);)++t>e&&this.error("Too many question marks"),this.next()}function dge(e){this.charCodeAt(this.tokenStart)!==e&&this.error((e===eM?"Plus sign":"Hyphen minus")+" is expected")}function hge(){let e=0;switch(this.tokenType){case hn:if(e=hh.call(this,1,!0),this.isDelim(Fx)){zp.call(this,6-e);break}if(this.tokenType===Pn||this.tokenType===hn){dge.call(this,tM),hh.call(this,1,!1);break}break;case Pn:e=hh.call(this,1,!0),e>0&&zp.call(this,6-e);break;default:if(this.eatDelim(eM),this.tokenType===Mt){e=hh.call(this,0,!0),e>0&&zp.call(this,6-e);break}if(this.isDelim(Fx)){this.next(),zp.call(this,5);break}this.error("Hex digit or question mark is expected")}}const fge="UnicodeRange",pge={value:String};function nM(){const e=this.tokenStart;return this.eatIdent("u"),hge.call(this),{type:"UnicodeRange",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function mge(e){this.tokenize(e.value)}const gge=Object.freeze(Object.defineProperty({__proto__:null,generate:mge,name:fge,parse:nM,structure:pge},Symbol.toStringTag,{value:"Module"})),yge=32,Bx=92,bge=34,vge=39,xge=40,rM=41;function wge(e){const t=e.length;let n=4,r=e.charCodeAt(t-1)===rM?t-2:t-1,i="";for(;n<r&&dc(e.charCodeAt(n));)n++;for(;n<r&&dc(e.charCodeAt(r));)r--;for(let s=n;s<=r;s++){let a=e.charCodeAt(s);if(a===Bx){if(s===r){s!==t-1&&(i=e.substr(s+1));break}if(a=e.charCodeAt(++s),to(Bx,a)){const o=s-1,u=Ku(e,o);s=u-1,i+=ER(e.substring(o+1,u))}else a===13&&e.charCodeAt(s+1)===10&&s++}else i+=e[s]}return i}function _ge(e){let t="",n=!1;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===0){t+="";continue}if(i<=31||i===127){t+="\\"+i.toString(16),n=!0;continue}i===yge||i===Bx||i===bge||i===vge||i===xge||i===rM?(t+="\\"+e.charAt(r),n=!1):(n&&gl(i)&&(t+=" "),t+=e.charAt(r),n=!1)}return"url("+t+")"}const kge="Url",Sge={value:String};function iM(){const e=this.tokenStart;let t;switch(this.tokenType){case Fi:t=wge(this.consume(Fi));break;case _n:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(_n),this.skipSC(),t=X4(this.consume($a)),this.skipSC(),this.eof||this.eat(dn);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(e,this.tokenStart),value:t}}function Cge(e){this.token(Fi,_ge(e.value))}const Ege=Object.freeze(Object.defineProperty({__proto__:null,generate:Cge,name:kge,parse:iM,structure:Sge},Symbol.toStringTag,{value:"Module"})),Tge="Value",jge={children:[[]]};function sM(){const e=this.tokenStart,t=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(e,this.tokenStart),children:t}}function Age(e){this.children(e)}const Pge=Object.freeze(Object.defineProperty({__proto__:null,generate:Age,name:Tge,parse:sM,structure:jge},Symbol.toStringTag,{value:"Module"})),Nge=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),Oge="WhiteSpace",Rge={value:String};function aM(){return this.eat(Dr),Nge}function Mge(e){this.token(Dr,e.value)}const Lge=Object.freeze(Object.defineProperty({__proto__:null,generate:Mge,name:Oge,parse:aM,structure:Rge},Symbol.toStringTag,{value:"Module"})),oM=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:ehe,Atrule:ahe,AtrulePrelude:dhe,AttributeSelector:xhe,Block:The,Brackets:Nhe,CDC:Lhe,CDO:zhe,ClassSelector:Whe,Combinator:Zhe,Comment:rfe,Condition:cfe,Declaration:Sfe,DeclarationList:Afe,Dimension:Rfe,Feature:Dfe,FeatureFunction:Hfe,FeatureRange:Xfe,Function:epe,GeneralEnclosed:ipe,Hash:cpe,IdSelector:ype,Identifier:fpe,Layer:_pe,LayerList:Epe,MediaQuery:Ppe,MediaQueryList:Mpe,NestingSelector:zpe,Nth:Hpe,Number:qpe,Operator:Zpe,Parentheses:tme,Percentage:sme,PseudoClassSelector:ume,PseudoElementSelector:mme,Ratio:vme,Raw:Sme,Rule:Pme,Scope:Mme,Selector:Dme,SelectorList:Hme,String:Xme,StyleSheet:tge,SupportsDeclaration:sge,TypeSelector:uge,UnicodeRange:gge,Url:Ege,Value:Pge,WhiteSpace:Lge},Symbol.toStringTag,{value:"Module"})),Ige={generic:!0,cssWideKeywords:R_,...Xde,node:oM},$ge=35,Dge=42,TT=43,zge=45,Fge=47,Bge=117;function lM(e){switch(this.tokenType){case yr:return this.Hash();case vs:return this.Operator();case Xn:return this.Parentheses(this.readSequence,e.recognizer);case ta:return this.Brackets(this.readSequence,e.recognizer);case $a:return this.String();case Pn:return this.Dimension();case Mr:return this.Percentage();case hn:return this.Number();case _n:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,e.recognizer);case Fi:return this.Url();case Mt:return this.cmpChar(this.tokenStart,Bge)&&this.cmpChar(this.tokenStart+1,TT)?this.UnicodeRange():this.Identifier();case Ln:{const t=this.charCodeAt(this.tokenStart);if(t===Fge||t===Dge||t===TT||t===zge)return this.Operator();t===$ge&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const Uge={getNode:lM},Hge=35,Wge=38,Vge=42,Gge=43,qge=47,jT=46,Yge=62,Xge=124,Kge=126;function Zge(e,t){t.last!==null&&t.last.type!=="Combinator"&&e!==null&&e.type!=="Combinator"&&t.push({type:"Combinator",loc:null,name:" "})}function Qge(){switch(this.tokenType){case ta:return this.AttributeSelector();case yr:return this.IdSelector();case Wi:return this.lookupType(1)===Wi?this.PseudoElementSelector():this.PseudoClassSelector();case Mt:return this.TypeSelector();case hn:case Mr:return this.Percentage();case Pn:this.charCodeAt(this.tokenStart)===jT&&this.error("Identifier is expected",this.tokenStart+1);break;case Ln:{switch(this.charCodeAt(this.tokenStart)){case Gge:case Yge:case Kge:case qge:return this.Combinator();case jT:return this.ClassSelector();case Vge:case Xge:return this.TypeSelector();case Hge:return this.IdSelector();case Wge:return this.NestingSelector()}break}}}const Jge={onWhiteSpace:Zge,getNode:Qge};function e0e(){return this.createSingleNodeList(this.Raw(null,!1))}function t0e(){const e=this.createList();if(this.skipSC(),e.push(this.Identifier()),this.skipSC(),this.tokenType===vs){e.push(this.Operator());const t=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.consumeUntilExclamationMarkOrSemicolon,!1);if(n.type==="Value"&&n.children.isEmpty){for(let r=t-this.tokenIndex;r<=0;r++)if(this.lookupType(r)===Dr){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}e.push(n)}return e}function AT(e){return e!==null&&e.type==="Operator"&&(e.value[e.value.length-1]==="-"||e.value[e.value.length-1]==="+")}const n0e={getNode:lM,onWhiteSpace(e,t){AT(e)&&(e.value=" "+e.value),AT(t.last)&&(t.last.value+=" ")},expression:e0e,var:t0e},r0e=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:Uge,Selector:Jge,Value:n0e},Symbol.toStringTag,{value:"Module"})),i0e=new Set(["none","and","not","or"]),s0e={parse:{prelude(){const e=this.createList();if(this.tokenType===Mt){const t=this.substring(this.tokenStart,this.tokenEnd);i0e.has(t.toLowerCase())||e.push(this.Identifier())}return e.push(this.Condition("container")),e},block(e=!1){return this.Block(e)}}},a0e={parse:{prelude:null,block(){return this.Block(!0)}}};function hb(e,t){return this.parseWithFallback(()=>{try{return e.call(this)}finally{this.skipSC(),this.lookupNonWSType(0)!==dn&&this.error()}},t||(()=>this.Raw(null,!0)))}const PT={layer(){this.skipSC();const e=this.createList(),t=hb.call(this,this.Layer);return(t.type!=="Raw"||t.value!=="")&&e.push(t),e},supports(){this.skipSC();const e=this.createList(),t=hb.call(this,this.Declaration,()=>hb.call(this,()=>this.Condition("supports")));return(t.type!=="Raw"||t.value!=="")&&e.push(t),e}},o0e={parse:{prelude(){const e=this.createList();switch(this.tokenType){case $a:e.push(this.String());break;case Fi:case _n:e.push(this.Url());break;default:this.error("String or url() is expected")}return this.skipSC(),this.tokenType===Mt&&this.cmpStr(this.tokenStart,this.tokenEnd,"layer")?e.push(this.Identifier()):this.tokenType===_n&&this.cmpStr(this.tokenStart,this.tokenEnd,"layer(")&&e.push(this.Function(null,PT)),this.skipSC(),this.tokenType===_n&&this.cmpStr(this.tokenStart,this.tokenEnd,"supports(")&&e.push(this.Function(null,PT)),(this.lookupNonWSType(0)===Mt||this.lookupNonWSType(0)===Xn)&&e.push(this.MediaQueryList()),e},block:null}},l0e={parse:{prelude(){return this.createSingleNodeList(this.LayerList())},block(){return this.Block(!1)}}},c0e={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(e=!1){return this.Block(e)}}},u0e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},d0e={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},h0e={parse:{prelude(){return this.createSingleNodeList(this.Scope())},block(e=!1){return this.Block(e)}}},f0e={parse:{prelude:null,block(e=!1){return this.Block(e)}}},p0e={parse:{prelude(){return this.createSingleNodeList(this.Condition("supports"))},block(e=!1){return this.Block(e)}}},m0e={container:s0e,"font-face":a0e,import:o0e,layer:l0e,media:c0e,nest:u0e,page:d0e,scope:h0e,"starting-style":f0e,supports:p0e};function g0e(){const e=this.createList();this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Mt:e.push(this.Identifier());break;case $a:e.push(this.String());break;case vs:e.push(this.Operator());break;case dn:break e;default:this.error("Identifier, string or comma is expected")}this.skipSC()}return e}const Ml={parse(){return this.createSingleNodeList(this.SelectorList())}},fb={parse(){return this.createSingleNodeList(this.Selector())}},y0e={parse(){return this.createSingleNodeList(this.Identifier())}},b0e={parse:g0e},Fp={parse(){return this.createSingleNodeList(this.Nth())}},v0e={dir:y0e,has:Ml,lang:b0e,matches:Ml,is:Ml,"-moz-any":Ml,"-webkit-any":Ml,where:Ml,not:Ml,"nth-child":Fp,"nth-last-child":Fp,"nth-last-of-type":Fp,"nth-of-type":Fp,slotted:fb,host:fb,"host-context":fb},x0e=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:i4,Atrule:s4,AtrulePrelude:a4,AttributeSelector:l4,Block:u4,Brackets:d4,CDC:h4,CDO:f4,ClassSelector:p4,Combinator:m4,Comment:g4,Condition:y4,Declaration:v4,DeclarationList:x4,Dimension:w4,Feature:_4,FeatureFunction:k4,FeatureRange:S4,Function:C4,GeneralEnclosed:E4,Hash:T4,IdSelector:A4,Identifier:j4,Layer:P4,LayerList:N4,MediaQuery:O4,MediaQueryList:R4,NestingSelector:M4,Nth:L4,Number:I4,Operator:$4,Parentheses:D4,Percentage:z4,PseudoClassSelector:F4,PseudoElementSelector:B4,Ratio:U4,Raw:H4,Rule:W4,Scope:V4,Selector:G4,SelectorList:q4,String:K4,StyleSheet:Z4,SupportsDeclaration:Q4,TypeSelector:J4,UnicodeRange:nM,Url:iM,Value:sM,WhiteSpace:aM},Symbol.toStringTag,{value:"Module"})),w0e={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(e){return this.AtrulePrelude(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",condition(e){return this.Condition(e.kind)},rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},features:{supports:{selector(){return this.Selector()}},container:{style(){return this.Declaration()}}},scope:r0e,atrule:m0e,pseudo:v0e,node:x0e},_0e={node:oM},k0e=Yde({...Ige,...w0e,..._0e});function Ux(e){const t={};for(const n of Object.keys(e)){let r=e[n];r&&(Array.isArray(r)||r instanceof So?r=r.map(Ux):r.constructor===Object&&(r=Ux(r))),t[n]=r}return t}const{tokenize:bje,parse:Zu,generate:js,lexer:vje,createLexer:xje,walk:Gs,find:wje,findLast:_je,findAll:kje,toPlainObject:Sje,fromPlainObject:Cje,fork:Eje}=k0e,pb=0,Ht=1,$n=2,ci=3,br=4,Oa=5,E0=6,Ci=7,ls=8,Hn=9,fn=10,Lr=11,Rn=12,Wr=13,zf=14,cs=15,Gi=16,ms=17,co=18,$s=19,Ra=20,mi=21,ar=22,qi=23,ea=24,Qi=25,S0e=0;function xi(e){return e>=48&&e<=57}function bl(e){return xi(e)||e>=65&&e<=70||e>=97&&e<=102}function U_(e){return e>=65&&e<=90}function C0e(e){return e>=97&&e<=122}function E0e(e){return U_(e)||C0e(e)}function T0e(e){return e>=128}function Eg(e){return E0e(e)||T0e(e)||e===95}function cM(e){return Eg(e)||xi(e)||e===45}function j0e(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function Tg(e){return e===10||e===13||e===12}function fc(e){return Tg(e)||e===32||e===9}function no(e,t){return!(e!==92||Tg(t)||t===S0e)}function vm(e,t,n){return e===45?Eg(t)||t===45||no(t,n):Eg(e)?!0:e===92?no(e,t):!1}function mb(e,t,n){return e===43||e===45?xi(t)?2:t===46&&xi(n)?3:0:e===46?xi(t)?2:0:xi(e)?1:0}function uM(e){return e===65279||e===65534?1:0}const Hx=new Array(128),A0e=128,xm=130,dM=131,H_=132,hM=133;for(let e=0;e<Hx.length;e++)Hx[e]=fc(e)&&xm||xi(e)&&dM||Eg(e)&&H_||j0e(e)&&hM||e||A0e;function gb(e){return e<128?Hx[e]:H_}function $u(e,t){return t<e.length?e.charCodeAt(t):0}function Wx(e,t,n){return n===13&&$u(e,t+1)===10?2:1}function Du(e,t,n){let r=e.charCodeAt(t);return U_(r)&&(r=r|32),r===n}function gf(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const s=r.charCodeAt(i-t);let a=e.charCodeAt(i);if(U_(a)&&(a=a|32),a!==s)return!1}return!0}function P0e(e,t){for(;t>=0&&fc(e.charCodeAt(t));t--);return t+1}function Bp(e,t){for(;t<e.length&&fc(e.charCodeAt(t));t++);return t}function yb(e,t){for(;t<e.length&&xi(e.charCodeAt(t));t++);return t}function Qu(e,t){if(t+=2,bl($u(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&bl($u(e,t));t++);const n=$u(e,t);fc(n)&&(t+=Wx(e,t,n))}return t}function Up(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!cM(n)){if(no(n,$u(e,t+1))){t=Qu(e,t)-1;continue}break}}return t}function T0(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),xi(n)&&(t=yb(e,t+1),n=e.charCodeAt(t)),n===46&&xi(e.charCodeAt(t+1))&&(t+=2,t=yb(e,t)),Du(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),xi(n)&&(t=yb(e,t+1+r+1))}return t}function bb(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}no(n,$u(e,t+1))&&(t=Qu(e,t))}return t}function fM(e){if(e.length===1&&!bl(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const pM=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"],N0e=16*1024;function jg(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,N0e)):e}const NT=10,O0e=12,OT=13;function RT(e){const t=e.source,n=t.length,r=t.length>0?uM(t.charCodeAt(0)):0,i=jg(e.lines,n),s=jg(e.columns,n);let a=e.startLine,o=e.startColumn;for(let u=r;u<n;u++){const d=t.charCodeAt(u);i[u]=a,s[u]=o++,(d===NT||d===OT||d===O0e)&&(d===OT&&u+1<n&&t.charCodeAt(u+1)===NT&&(u++,i[u]=a,s[u]=o),a++,o=1)}i[n]=a,s[n]=o,e.lines=i,e.columns=s,e.computed=!0}class R0e{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(t,n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||RT(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||RT(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}}const Ds=16777215,Uo=24,M0e=new Map([[$n,ar],[mi,ar],[$s,Ra],[qi,ea]]);class L0e{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=jg(this.offsetAndType,t.length+1),s=jg(this.balance,t.length+1);let a=0,o=0,u=0,d=-1;for(this.offsetAndType=null,this.balance=null,n(t,(h,p,m)=>{switch(h){default:s[a]=r;break;case o:{let g=u&Ds;for(u=s[g],o=u>>Uo,s[a]=g,s[g++]=a;g<a;g++)s[g]===r&&(s[g]=a);break}case mi:case $n:case $s:case qi:s[a]=u,o=M0e.get(h),u=o<<Uo|a;break}i[a++]=h<<Uo|m,d===-1&&(d=p)}),i[a]=pb<<Uo|r,s[a]=r,s[r]=r;u!==0;){const h=u&Ds;u=s[h],s[h]=r}this.source=t,this.firstCharOffset=d===-1?0:d,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>Uo:pb}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&Ds:this.source.length}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?gf(this.source,this.offsetAndType[t-1]&Ds,this.offsetAndType[t]&Ds,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&Ds:this.offsetAndType[this.tokenCount]&Ds:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===Hn&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===Hn&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&Ds,n=this.offsetAndType[n],this.tokenType=n>>Uo,this.tokenEnd=n&Ds):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>Uo,this.tokenEnd=t&Ds):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=pb,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===Wr||this.tokenType===Qi;)this.next()}skipUntilBalanced(t,n){let r=t,i,s;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(s=r>0?this.offsetAndType[r-1]&Ds:this.firstCharOffset,n(this.source.charCodeAt(s))){case 1:break e;case 2:r++;break e;default:this.balance[i]===r&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,s=this.offsetAndType[n],a=s&Ds,o=s>>Uo;r=a,t(o,i,a,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,s)=>{t[s]={idx:s,type:pM[n],chunk:this.source.substring(r,i),balance:this.balance[s]}}),t}}function j0(e,t){function n(p){return p<o?e.charCodeAt(p):0}function r(){if(d=T0(e,d),vm(n(d),n(d+1),n(d+2))){h=Rn,d=Up(e,d);return}if(n(d)===37){h=Lr,d++;return}h=fn}function i(){const p=d;if(d=Up(e,d),gf(e,p,d,"url")&&n(d)===40){if(d=Bp(e,d+1),n(d)===34||n(d)===39){h=$n,d=p+4;return}a();return}if(n(d)===40){h=$n,d++;return}h=Ht}function s(p){for(p||(p=n(d++)),h=Oa;d<e.length;d++){const m=e.charCodeAt(d);switch(gb(m)){case p:d++;return;case xm:if(Tg(m)){d+=Wx(e,d,m),h=E0;return}break;case 92:if(d===e.length-1)break;const g=n(d+1);Tg(g)?d+=Wx(e,d+1,g):no(m,g)&&(d=Qu(e,d)-1);break}}}function a(){for(h=Ci,d=Bp(e,d);d<e.length;d++){const p=e.charCodeAt(d);switch(gb(p)){case 41:d++;return;case xm:if(d=Bp(e,d),n(d)===41||d>=e.length){d<e.length&&d++;return}d=bb(e,d),h=ls;return;case 34:case 39:case 40:case hM:d=bb(e,d),h=ls;return;case 92:if(no(p,n(d+1))){d=Qu(e,d)-1;break}d=bb(e,d),h=ls;return}}}e=String(e||"");const o=e.length;let u=uM(n(0)),d=u,h;for(;d<o;){const p=e.charCodeAt(d);switch(gb(p)){case xm:h=Wr,d=Bp(e,d+1);break;case 34:s();break;case 35:cM(n(d+1))||no(n(d+1),n(d+2))?(h=br,d=Up(e,d+1)):(h=Hn,d++);break;case 39:s();break;case 40:h=mi,d++;break;case 41:h=ar,d++;break;case 43:mb(p,n(d+1),n(d+2))?r():(h=Hn,d++);break;case 44:h=co,d++;break;case 45:mb(p,n(d+1),n(d+2))?r():n(d+1)===45&&n(d+2)===62?(h=cs,d=d+3):vm(p,n(d+1),n(d+2))?i():(h=Hn,d++);break;case 46:mb(p,n(d+1),n(d+2))?r():(h=Hn,d++);break;case 47:n(d+1)===42?(h=Qi,d=e.indexOf("*/",d+2),d=d===-1?e.length:d+2):(h=Hn,d++);break;case 58:h=Gi,d++;break;case 59:h=ms,d++;break;case 60:n(d+1)===33&&n(d+2)===45&&n(d+3)===45?(h=zf,d=d+4):(h=Hn,d++);break;case 64:vm(n(d+1),n(d+2),n(d+3))?(h=ci,d=Up(e,d+1)):(h=Hn,d++);break;case 91:h=$s,d++;break;case 92:no(p,n(d+1))?i():(h=Hn,d++);break;case 93:h=Ra,d++;break;case 123:h=qi,d++;break;case 125:h=ea,d++;break;case dM:r();break;case H_:i();break;default:h=Hn,d++}t(h,u,u=d)}}let Ic=null;class Un{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return Un.createItem(t)}allocateCursor(t,n){let r;return Ic!==null?(r=Ic,Ic=Ic.cursor,r.prev=t,r.next=n,r.cursor=this.cursor):r={prev:t,next:n,cursor:this.cursor},this.cursor=r,r}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Ic,Ic=t}updateCursors(t,n,r,i){let{cursor:s}=this;for(;s!==null;)s.prev===t&&(s.prev=n),s.next===r&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let n=this.head;n!==null;n=n.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let r of t){const i=Un.createItem(r);n!==null?n.next=i:this.head=i,i.prev=n,n=i}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,n=this){const r=this.allocateCursor(null,this.head);for(;r.next!==null;){const i=r.next;r.next=i.next,t.call(n,i.data,i,this)}this.releaseCursor()}forEachRight(t,n=this){const r=this.allocateCursor(this.tail,null);for(;r.prev!==null;){const i=r.prev;r.prev=i.prev,t.call(n,i.data,i,this)}this.releaseCursor()}reduce(t,n,r=this){let i=this.allocateCursor(null,this.head),s=n,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(t,n,r=this){let i=this.allocateCursor(this.tail,null),s=n,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=t.call(r,s,a.data,a,this);return this.releaseCursor(),s}some(t,n=this){for(let r=this.head;r!==null;r=r.next)if(t.call(n,r.data,r,this))return!0;return!1}map(t,n=this){const r=new Un;for(let i=this.head;i!==null;i=i.next)r.appendData(t.call(n,i.data,i,this));return r}filter(t,n=this){const r=new Un;for(let i=this.head;i!==null;i=i.next)t.call(n,i.data,i,this)&&r.appendData(i.data);return r}nextUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(null,t);for(;i.next!==null;){const s=i.next;if(i.next=s.next,n.call(r,s.data,s,this))break}this.releaseCursor()}prevUntil(t,n,r=this){if(t===null)return;const i=this.allocateCursor(t,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,n.call(r,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new Un;for(let n of this)t.appendData(n);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(Un.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(Un.createItem(t))}insert(t,n=null){if(n!==null)if(this.updateCursors(n.prev,t,n,t),n.prev===null){if(this.head!==n)throw new Error("before doesn't belong to list");this.head=t,n.prev=t,t.next=n,this.updateCursors(null,t)}else n.prev.next=t,t.prev=n.prev,n.prev=t,t.next=n;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(Un.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(Un.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(Un.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,n){return t.head===null?this:(n!=null?(this.updateCursors(n.prev,t.tail,n,t.head),n.prev!==null?(n.prev.next=t.head,t.head.prev=n.prev):this.head=t.head,n.prev=t.tail,t.tail.next=n):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,n){"head"in n?this.insertList(n,t):this.insert(n,t),this.remove(t)}}function A0(e,t){const n=Object.create(SyntaxError.prototype),r=new Error;return Object.assign(n,{name:e,message:t,get stack(){return(r.stack||"").replace(/^(.+\n){1,3}/,`${e}: ${t}
`)}})}const vb=100,MT=60,LT="    ";function IT({source:e,line:t,column:n},r){function i(h,p){return s.slice(h,p).map((m,g)=>String(h+g+1).padStart(u)+" |"+m).join(`
`)}const s=e.split(/\r\n?|\n|\f/),a=Math.max(1,t-r)-1,o=Math.min(t+r,s.length+1),u=Math.max(4,String(o).length)+1;let d=0;n+=(LT.length-1)*(s[t-1].substr(0,n-1).match(/\t/g)||[]).length,n>vb&&(d=n-MT+3,n=MT-2);for(let h=a;h<=o;h++)h>=0&&h<s.length&&(s[h]=s[h].replace(/\t/g,LT),s[h]=(d>0&&s[h].length>d?"":"")+s[h].substr(d,vb-2)+(s[h].length>d+vb-1?"":""));return[i(a,t),new Array(n+u+2).join("-")+"^",i(t,o)].filter(Boolean).join(`
`)}function $T(e,t,n,r,i){return Object.assign(A0("SyntaxError",e),{source:t,offset:n,line:r,column:i,sourceFragment(a){return IT({source:t,line:r,column:i},isNaN(a)?0:a)},get formattedMessage(){return`Parse error: ${e}
`+IT({source:t,line:r,column:i},2)}})}function I0e(e){const t=this.createList();let n=!1;const r={recognizer:e};for(;!this.eof;){switch(this.tokenType){case Qi:this.next();continue;case Wr:n=!0,this.next();continue}let i=e.getNode.call(this,r);if(i===void 0)break;n&&(e.onWhiteSpace&&e.onWhiteSpace.call(this,i,t,r),n=!1),t.push(i)}return n&&e.onWhiteSpace&&e.onWhiteSpace.call(this,null,t,r),t}const DT=()=>{},$0e=33,D0e=35,xb=59,zT=123,FT=0;function z0e(e){return function(){return this[e]()}}function wb(e){const t=Object.create(null);for(const n in e){const r=e[n],i=r.parse||r;i&&(t[n]=i)}return t}function F0e(e){const t={context:Object.create(null),scope:Object.assign(Object.create(null),e.scope),atrule:wb(e.atrule),pseudo:wb(e.pseudo),node:wb(e.node)};for(const n in e.parseContext)switch(typeof e.parseContext[n]){case"function":t.context[n]=e.parseContext[n];break;case"string":t.context[n]=z0e(e.parseContext[n]);break}return{config:t,...t,...t.node}}function B0e(e){let t="",n="<unknown>",r=!1,i=DT,s=!1;const a=new R0e,o=Object.assign(new L0e,F0e(e||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:I0e,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(d){return d===zT?1:0},consumeUntilLeftCurlyBracketOrSemicolon(d){return d===zT||d===xb?1:0},consumeUntilExclamationMarkOrSemicolon(d){return d===$0e||d===xb?1:0},consumeUntilSemicolonIncluded(d){return d===xb?2:0},createList(){return new Un},createSingleNodeList(d){return new Un().appendData(d)},getFirstListNode(d){return d&&d.first},getLastListNode(d){return d&&d.last},parseWithFallback(d,h){const p=this.tokenIndex;try{return d.call(this)}catch(m){if(s)throw m;const g=h.call(this,p);return s=!0,i(m,g),s=!1,g}},lookupNonWSType(d){let h;do if(h=this.lookupType(d++),h!==Wr)return h;while(h!==FT);return FT},charCodeAt(d){return d>=0&&d<t.length?t.charCodeAt(d):0},substring(d,h){return t.substring(d,h)},substrToCursor(d){return this.source.substring(d,this.tokenStart)},cmpChar(d,h){return Du(t,d,h)},cmpStr(d,h,p){return gf(t,d,h,p)},consume(d){const h=this.tokenStart;return this.eat(d),this.substrToCursor(h)},consumeFunctionName(){const d=t.substring(this.tokenStart,this.tokenEnd-1);return this.eat($n),d},consumeNumber(d){const h=t.substring(this.tokenStart,T0(t,this.tokenStart));return this.eat(d),h},eat(d){if(this.tokenType!==d){const h=pM[d].slice(0,-6).replace(/-/g," ").replace(/^./,g=>g.toUpperCase());let p=`${/[[\](){}]/.test(h)?`"${h}"`:h} is expected`,m=this.tokenStart;switch(d){case Ht:this.tokenType===$n||this.tokenType===Ci?(m=this.tokenEnd-1,p="Identifier is expected but function found"):p="Identifier is expected";break;case br:this.isDelim(D0e)&&(this.next(),m++,p="Name is expected");break;case Lr:this.tokenType===fn&&(m=this.tokenEnd,p="Percent sign is expected");break}this.error(p,m)}this.next()},eatIdent(d){(this.tokenType!==Ht||this.lookupValue(0,d)===!1)&&this.error(`Identifier "${d}" is expected`),this.next()},eatDelim(d){this.isDelim(d)||this.error(`Delim "${String.fromCharCode(d)}" is expected`),this.next()},getLocation(d,h){return r?a.getLocationRange(d,h,n):null},getLocationFromList(d){if(r){const h=this.getFirstListNode(d),p=this.getLastListNode(d);return a.getLocationRange(h!==null?h.loc.start.offset-a.startOffset:this.tokenStart,p!==null?p.loc.end.offset-a.startOffset:this.tokenStart,n)}return null},error(d,h){const p=typeof h<"u"&&h<t.length?a.getLocation(h):this.eof?a.getLocation(P0e(t,t.length-1)):a.getLocation(this.tokenStart);throw new $T(d||"Unexpected input",t,p.offset,p.line,p.column)}});return Object.assign(function(d,h){t=d,h=h||{},o.setSource(t,j0),a.setSource(t,h.offset,h.line,h.column),n=h.filename||"<unknown>",r=!!h.positions,i=typeof h.onParseError=="function"?h.onParseError:DT,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in h?!!h.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in h?!!h.parseRulePrelude:!0,o.parseValue="parseValue"in h?!!h.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in h?!!h.parseCustomProperty:!1;const{context:p="default",onComment:m}=h;if(!(p in o.context))throw new Error("Unknown context `"+p+"`");typeof m=="function"&&o.forEachToken((v,w,S)=>{if(v===Qi){const x=o.getLocation(w,S),k=gf(t,S-2,S,"*/")?t.slice(w+2,S-2):t.slice(w+2,S);m(k,x)}});const g=o.context[p].call(o,h);return o.eof||o.error(),g},{SyntaxError:$T,config:o.config})}const BT=new Set(["Atrule","Selector","Declaration"]);function U0e(e){const t=new LR,n={line:1,column:0},r={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,u=!1;const d=e.node;e.node=function(m){if(m.loc&&m.loc.start&&BT.has(m.type)){const g=m.loc.start.line,v=m.loc.start.column-1;(r.line!==g||r.column!==v)&&(r.line=g,r.column=v,n.line=a,n.column=o,u&&(u=!1,(n.line!==i.line||n.column!==i.column)&&t.addMapping(s)),u=!0,t.addMapping({source:m.loc.source,original:r,generated:n}))}d.call(this,m),u&&BT.has(m.type)&&(i.line=a,i.column=o)};const h=e.emit;e.emit=function(m,g,v){for(let w=0;w<m.length;w++)m.charCodeAt(w)===10?(a++,o=0):o++;h(m,g,v)};const p=e.result;return e.result=function(){return u&&t.addMapping(s),{css:p(),map:t}},e}const H0e=43,W0e=45,_b=(e,t)=>{if(e===Hn&&(e=t),typeof e=="string"){const n=e.charCodeAt(0);return n>127?32768:n<<8}return e},mM=[[Ht,Ht],[Ht,$n],[Ht,Ci],[Ht,ls],[Ht,"-"],[Ht,fn],[Ht,Lr],[Ht,Rn],[Ht,cs],[Ht,mi],[ci,Ht],[ci,$n],[ci,Ci],[ci,ls],[ci,"-"],[ci,fn],[ci,Lr],[ci,Rn],[ci,cs],[br,Ht],[br,$n],[br,Ci],[br,ls],[br,"-"],[br,fn],[br,Lr],[br,Rn],[br,cs],[Rn,Ht],[Rn,$n],[Rn,Ci],[Rn,ls],[Rn,"-"],[Rn,fn],[Rn,Lr],[Rn,Rn],[Rn,cs],["#",Ht],["#",$n],["#",Ci],["#",ls],["#","-"],["#",fn],["#",Lr],["#",Rn],["#",cs],["-",Ht],["-",$n],["-",Ci],["-",ls],["-","-"],["-",fn],["-",Lr],["-",Rn],["-",cs],[fn,Ht],[fn,$n],[fn,Ci],[fn,ls],[fn,fn],[fn,Lr],[fn,Rn],[fn,"%"],[fn,cs],["@",Ht],["@",$n],["@",Ci],["@",ls],["@","-"],["@",cs],[".",fn],[".",Lr],[".",Rn],["+",fn],["+",Lr],["+",Rn],["/","*"]],V0e=mM.concat([[Ht,br],[Rn,br],[br,br],[ci,mi],[ci,Oa],[ci,Gi],[Lr,Lr],[Lr,Rn],[Lr,$n],[Lr,"-"],[ar,Ht],[ar,$n],[ar,Lr],[ar,Rn],[ar,br],[ar,"-"]]);function gM(e){const t=new Set(e.map(([n,r])=>_b(n)<<16|_b(r)));return function(n,r,i){const s=_b(r,i),a=i.charCodeAt(0);return(a===W0e&&r!==Ht&&r!==$n&&r!==cs||a===H0e?t.has(n<<16|a<<8):t.has(n<<16|s))&&this.emit(" ",Wr,!0),s}}const G0e=gM(mM),yM=gM(V0e),UT=Object.freeze(Object.defineProperty({__proto__:null,safe:yM,spec:G0e},Symbol.toStringTag,{value:"Module"})),q0e=92;function Y0e(e,t){if(typeof t=="function"){let n=null;e.children.forEach(r=>{n!==null&&t.call(this,n),this.node(r),n=r});return}e.children.forEach(this.node,this)}function X0e(e){j0(e,(t,n,r)=>{this.token(t,e.slice(n,r))})}function K0e(e){const t=new Map;for(let n in e.node){const r=e.node[n];typeof(r.generate||r)=="function"&&t.set(n,r.generate||r)}return function(n,r){let i="",s=0,a={node(u){if(t.has(u.type))t.get(u.type).call(o,u);else throw new Error("Unknown node type: "+u.type)},tokenBefore:yM,token(u,d){s=this.tokenBefore(s,u,d),this.emit(d,u,!1),u===Hn&&d.charCodeAt(0)===q0e&&this.emit(`
`,Wr,!0)},emit(u){i+=u},result(){return i}};r&&(typeof r.decorator=="function"&&(a=r.decorator(a)),r.sourceMap&&(a=U0e(a)),r.mode in UT&&(a.tokenBefore=UT[r.mode]));const o={node:u=>a.node(u),children:Y0e,token:(u,d)=>a.token(u,d),tokenize:X0e};return a.node(n),a.result()}}function Z0e(e){return{fromPlainObject(t){return e(t,{enter(n){n.children&&!(n.children instanceof Un)&&(n.children=new Un().fromArray(n.children))}}),t},toPlainObject(t){return e(t,{leave(n){n.children&&n.children instanceof Un&&(n.children=n.children.toArray())}}),t}}}const{hasOwnProperty:W_}=Object.prototype,fh=function(){};function HT(e){return typeof e=="function"?e:fh}function WT(e,t){return function(n,r,i){n.type===t&&e.call(this,n,r,i)}}function Q0e(e,t){const n=t.structure,r=[];for(const i in n){if(W_.call(n,i)===!1)continue;let s=n[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&r.push(a)}return r.length?{context:t.walkContext,fields:r}:null}function J0e(e){const t={};for(const n in e.node)if(W_.call(e.node,n)){const r=e.node[n];if(!r.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");t[n]=Q0e(n,r)}return t}function VT(e,t){const n=e.fields.slice(),r=e.context,i=typeof r=="string";return t&&n.reverse(),function(s,a,o,u){let d;i&&(d=a[r],a[r]=s);for(const h of n){const p=s[h.name];if(!h.nullable||p){if(h.type==="list"){if(t?p.reduceRight(u,!1):p.reduce(u,!1))return!0}else if(o(p))return!0}}i&&(a[r]=d)}}function GT({StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}){return{Atrule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Rule:{StyleSheet:e,Atrule:t,Rule:n,Block:r},Declaration:{StyleSheet:e,Atrule:t,Rule:n,Block:r,DeclarationList:i}}}function eye(e){const t=J0e(e),n={},r={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const d in t)W_.call(t,d)&&t[d]!==null&&(n[d]=VT(t[d],!1),r[d]=VT(t[d],!0));const a=GT(n),o=GT(r),u=function(d,h){function p(x,k,j){const O=m.call(S,x,k,j);return O===i?!0:O===s?!1:!!(v.hasOwnProperty(x.type)&&v[x.type](x,S,p,w)||g.call(S,x,k,j)===i)}let m=fh,g=fh,v=n,w=(x,k,j,O)=>x||p(k,j,O);const S={break:i,skip:s,root:d,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof h=="function")m=h;else if(h&&(m=HT(h.enter),g=HT(h.leave),h.reverse&&(v=r),h.visit)){if(a.hasOwnProperty(h.visit))v=h.reverse?o[h.visit]:a[h.visit];else if(!t.hasOwnProperty(h.visit))throw new Error("Bad value `"+h.visit+"` for `visit` option (should be: "+Object.keys(t).sort().join(", ")+")");m=WT(m,h.visit),g=WT(g,h.visit)}if(m===fh&&g===fh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");p(d)};return u.break=i,u.skip=s,u.find=function(d,h){let p=null;return u(d,function(m,g,v){if(h.call(this,m,g,v))return p=m,i}),p},u.findLast=function(d,h){let p=null;return u(d,{reverse:!0,enter(m,g,v){if(h.call(this,m,g,v))return p=m,i}}),p},u.findAll=function(d,h){const p=[];return u(d,function(m,g,v){h.call(this,m,g,v)&&p.push(m)}),p},u}function tye(e){return e}function nye(e){const{min:t,max:n,comma:r}=e;return t===0&&n===0?r?"#?":"*":t===0&&n===1?"?":t===1&&n===0?r?"#":"+":t===1&&n===1?"":(r?"#":"")+(t===n?"{"+t+"}":"{"+t+","+(n!==0?n:"")+"}")}function rye(e){switch(e.type){case"Range":return" ["+(e.min===null?"-":e.min)+","+(e.max===null?"":e.max)+"]";default:throw new Error("Unknown node type `"+e.type+"`")}}function iye(e,t,n,r){const i=e.combinator===" "||r?e.combinator:" "+e.combinator+" ",s=e.terms.map(a=>V_(a,t,n,r)).join(i);return e.explicit||n?(r||s[0]===","?"[":"[ ")+s+(r?"]":" ]"):s}function V_(e,t,n,r){let i;switch(e.type){case"Group":i=iye(e,t,n,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return V_(e.term,t,n,r)+t(nye(e),e);case"Type":i="<"+e.name+(e.opts?t(rye(e.opts),e.opts):"")+">";break;case"Property":i="<'"+e.name+"'>";break;case"Keyword":i=e.name;break;case"AtKeyword":i="@"+e.name;break;case"Function":i=e.name+"(";break;case"String":case"Token":i=e.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return t(i,e)}function G_(e,t){let n=tye,r=!1,i=!1;return typeof t=="function"?n=t:t&&(r=!!t.forceBraces,i=!!t.compact,typeof t.decorate=="function"&&(n=t.decorate)),V_(e,n,r,i)}const qT={offset:0,line:1,column:1};function sye(e,t){const n=e.tokens,r=e.longestMatch,i=r<n.length&&n[r].node||null,s=i!==t?i:null;let a=0,o=0,u=0,d="",h,p;for(let m=0;m<n.length;m++){const g=n[m].value;m===r&&(o=g.length,a=d.length),s!==null&&n[m].node===s&&(m<=r?u++:u=0),d+=g}return r===n.length||u>1?(h=Hp(s||t,"end")||ph(qT,d),p=ph(h)):(h=Hp(s,"start")||ph(Hp(t,"start")||qT,d.slice(0,a)),p=Hp(s,"end")||ph(h,d.substr(a,o))),{css:d,mismatchOffset:a,mismatchLength:o,start:h,end:p}}function Hp(e,t){const n=e&&e.loc&&e.loc[t];return n?"line"in n?ph(n):n:null}function ph({offset:e,line:t,column:n},r){const i={offset:e,line:t,column:n};if(r){const s=r.split(/\n|\r\n?|\f/);i.offset+=r.length,i.line+=s.length-1,i.column=s.length===1?i.column+r.length:s.pop().length+1}return i}const qd=function(e,t){const n=A0("SyntaxReferenceError",e+(t?" `"+t+"`":""));return n.reference=t,n},aye=function(e,t,n,r){const i=A0("SyntaxMatchError",e),{css:s,mismatchOffset:a,mismatchLength:o,start:u,end:d}=sye(r,n);return i.rawMessage=e,i.syntax=t?G_(t):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=e+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,u),i.loc={source:n&&n.loc&&n.loc.source||"<unknown>",start:u,end:d},i},Wp=new Map,$c=new Map,Ag=45,Ta=oye,Ju=lye;function q_(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===Ag&&e.charCodeAt(t+1)===Ag}function bM(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===Ag&&e.charCodeAt(t+1)!==Ag){const n=e.indexOf("-",t+2);if(n!==-1)return e.substring(t,n+1)}return""}function oye(e){if(Wp.has(e))return Wp.get(e);const t=e.toLowerCase();let n=Wp.get(t);if(n===void 0){const r=q_(t,0),i=r?"":bM(t,0);n=Object.freeze({basename:t.substr(i.length),name:t,prefix:i,vendor:i,custom:r})}return Wp.set(e,n),n}function lye(e){if($c.has(e))return $c.get(e);let t=e,n=e[0];n==="/"?n=e[1]==="/"?"//":"/":n!=="_"&&n!=="*"&&n!=="$"&&n!=="#"&&n!=="+"&&n!=="&"&&(n="");const r=q_(t,n.length);if(!r&&(t=t.toLowerCase(),$c.has(t))){const o=$c.get(t);return $c.set(e,o),o}const i=r?"":bM(t,n.length),s=t.substr(0,n.length+i.length),a=Object.freeze({basename:t.substr(s.length),name:t.substr(n.length),hack:n,vendor:i,prefix:s,custom:r});return $c.set(e,a),a}const vM=["initial","inherit","unset","revert","revert-layer"],yf=43,Ya=45,kb=110,Dc=!0,cye=!1;function Vx(e,t){return e!==null&&e.type===Hn&&e.value.charCodeAt(0)===t}function $h(e,t,n){for(;e!==null&&(e.type===Wr||e.type===Qi);)e=n(++t);return t}function Vo(e,t,n,r){if(!e)return 0;const i=e.value.charCodeAt(t);if(i===yf||i===Ya){if(n)return 0;t++}for(;t<e.value.length;t++)if(!xi(e.value.charCodeAt(t)))return 0;return r+1}function Sb(e,t,n){let r=!1,i=$h(e,t,n);if(e=n(i),e===null)return t;if(e.type!==fn)if(Vx(e,yf)||Vx(e,Ya)){if(r=!0,i=$h(n(++i),i,n),e=n(i),e===null||e.type!==fn)return 0}else return t;if(!r){const s=e.value.charCodeAt(0);if(s!==yf&&s!==Ya)return 0}return Vo(e,r?0:1,r,i)}function uye(e,t){let n=0;if(!e)return 0;if(e.type===fn)return Vo(e,0,cye,n);if(e.type===Ht&&e.value.charCodeAt(0)===Ya){if(!Du(e.value,1,kb))return 0;switch(e.value.length){case 2:return Sb(t(++n),n,t);case 3:return e.value.charCodeAt(2)!==Ya?0:(n=$h(t(++n),n,t),e=t(n),Vo(e,0,Dc,n));default:return e.value.charCodeAt(2)!==Ya?0:Vo(e,3,Dc,n)}}else if(e.type===Ht||Vx(e,yf)&&t(n+1).type===Ht){if(e.type!==Ht&&(e=t(++n)),e===null||!Du(e.value,0,kb))return 0;switch(e.value.length){case 1:return Sb(t(++n),n,t);case 2:return e.value.charCodeAt(1)!==Ya?0:(n=$h(t(++n),n,t),e=t(n),Vo(e,0,Dc,n));default:return e.value.charCodeAt(1)!==Ya?0:Vo(e,2,Dc,n)}}else if(e.type===Rn){let r=e.value.charCodeAt(0),i=r===yf||r===Ya?1:0,s=i;for(;s<e.value.length&&xi(e.value.charCodeAt(s));s++);return s===i||!Du(e.value,s,kb)?0:s+1===e.value.length?Sb(t(++n),n,t):e.value.charCodeAt(s+1)!==Ya?0:s+2===e.value.length?(n=$h(t(++n),n,t),e=t(n),Vo(e,0,Dc,n)):Vo(e,s+2,Dc,n)}return 0}const dye=43,xM=45,wM=63,hye=117;function Gx(e,t){return e!==null&&e.type===Hn&&e.value.charCodeAt(0)===t}function fye(e,t){return e.value.charCodeAt(0)===t}function mh(e,t,n){let r=0;for(let i=t;i<e.value.length;i++){const s=e.value.charCodeAt(i);if(s===xM&&n&&r!==0)return mh(e,t+r+1,!1),6;if(!bl(s)||++r>6)return 0}return r}function Vp(e,t,n){if(!e)return 0;for(;Gx(n(t),wM);){if(++e>6)return 0;t++}return t}function pye(e,t){let n=0;if(e===null||e.type!==Ht||!Du(e.value,0,hye)||(e=t(++n),e===null))return 0;if(Gx(e,dye))return e=t(++n),e===null?0:e.type===Ht?Vp(mh(e,0,!0),++n,t):Gx(e,wM)?Vp(1,++n,t):0;if(e.type===fn){const r=mh(e,1,!0);return r===0?0:(e=t(++n),e===null?n:e.type===Rn||e.type===fn?!fye(e,xM)||!mh(e,1,!1)?0:n+1:Vp(r,n,t))}return e.type===Rn?Vp(mh(e,1,!0),++n,t):0}const mye=["calc(","-moz-calc(","-webkit-calc("],Y_=new Map([[$n,ar],[mi,ar],[$s,Ra],[qi,ea]]),gye=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],yye=["deg","grad","rad","turn"],bye=["s","ms"],vye=["hz","khz"],xye=["dpi","dpcm","dppx","x"],wye=["fr"],_ye=["db"],kye=["st"];function ja(e,t){return t<e.length?e.charCodeAt(t):0}function _M(e,t){return gf(e,0,e.length,t)}function kM(e,t){for(let n=0;n<t.length;n++)if(_M(e,t[n]))return!0;return!1}function SM(e,t){return t!==e.length-2?!1:ja(e,t)===92&&xi(ja(e,t+1))}function P0(e,t,n){if(e&&e.type==="Range"){const r=Number(n!==void 0&&n!==t.length?t.substr(0,n):t);if(isNaN(r)||e.min!==null&&r<e.min&&typeof e.min!="string"||e.max!==null&&r>e.max&&typeof e.max!="string")return!0}return!1}function Sye(e,t){let n=0,r=[],i=0;e:do{switch(e.type){case ea:case ar:case Ra:if(e.type!==n)break e;if(n=r.pop(),r.length===0){i++;break e}break;case $n:case mi:case $s:case qi:r.push(n),n=Y_.get(e.type);break}i++}while(e=t(i));return i}function zs(e){return function(t,n,r){return t===null?0:t.type===$n&&kM(t.value,mye)?Sye(t,n):e(t,n,r)}}function fr(e){return function(t){return t===null||t.type!==e?0:1}}function Cye(e){if(e===null||e.type!==Ht)return 0;const t=e.value.toLowerCase();return kM(t,vM)||_M(t,"default")?0:1}function Eye(e){return e===null||e.type!==Ht||ja(e.value,0)!==45||ja(e.value,1)!==45?0:1}function Tye(e){if(e===null||e.type!==br)return 0;const t=e.value.length;if(t!==4&&t!==5&&t!==7&&t!==9)return 0;for(let n=1;n<t;n++)if(!bl(ja(e.value,n)))return 0;return 1}function jye(e){return e===null||e.type!==br||!vm(ja(e.value,1),ja(e.value,2),ja(e.value,3))?0:1}function Aye(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case E0:case ls:break e;case ea:case ar:case Ra:if(e.type!==n)break e;n=r.pop();break;case ms:if(n===0)break e;break;case Hn:if(n===0&&e.value==="!")break e;break;case $n:case mi:case $s:case qi:r.push(n),n=Y_.get(e.type);break}i++}while(e=t(i));return i}function Pye(e,t){if(!e)return 0;let n=0,r=[],i=0;e:do{switch(e.type){case E0:case ls:break e;case ea:case ar:case Ra:if(e.type!==n)break e;n=r.pop();break;case $n:case mi:case $s:case qi:r.push(n),n=Y_.get(e.type);break}i++}while(e=t(i));return i}function mo(e){return e&&(e=new Set(e)),function(t,n,r){if(t===null||t.type!==Rn)return 0;const i=T0(t.value,0);if(e!==null){const s=t.value.indexOf("\\",i),a=s===-1||!SM(t.value,s)?t.value.substr(i):t.value.substring(i,s);if(e.has(a.toLowerCase())===!1)return 0}return P0(r,t.value,i)?0:1}}function Nye(e,t,n){return e===null||e.type!==Lr||P0(n,e.value,e.value.length-1)?0:1}function YT(e){return typeof e!="function"&&(e=function(){return 0}),function(t,n,r){return t!==null&&t.type===fn&&Number(t.value)===0?1:e(t,n,r)}}function Oye(e,t,n){if(e===null)return 0;const r=T0(e.value,0);return!(r===e.value.length)&&!SM(e.value,r)||P0(n,e.value,r)?0:1}function Rye(e,t,n){if(e===null||e.type!==fn)return 0;let r=ja(e.value,0)===43||ja(e.value,0)===45?1:0;for(;r<e.value.length;r++)if(!xi(ja(e.value,r)))return 0;return P0(n,e.value,r)?0:1}const XT={"ident-token":fr(Ht),"function-token":fr($n),"at-keyword-token":fr(ci),"hash-token":fr(br),"string-token":fr(Oa),"bad-string-token":fr(E0),"url-token":fr(Ci),"bad-url-token":fr(ls),"delim-token":fr(Hn),"number-token":fr(fn),"percentage-token":fr(Lr),"dimension-token":fr(Rn),"whitespace-token":fr(Wr),"CDO-token":fr(zf),"CDC-token":fr(cs),"colon-token":fr(Gi),"semicolon-token":fr(ms),"comma-token":fr(co),"[-token":fr($s),"]-token":fr(Ra),"(-token":fr(mi),")-token":fr(ar),"{-token":fr(qi),"}-token":fr(ea),string:fr(Oa),ident:fr(Ht),"custom-ident":Cye,"custom-property-name":Eye,"hex-color":Tye,"id-selector":jye,"an-plus-b":uye,urange:pye,"declaration-value":Aye,"any-value":Pye,dimension:zs(mo(null)),angle:zs(mo(yye)),decibel:zs(mo(_ye)),frequency:zs(mo(vye)),flex:zs(mo(wye)),length:zs(YT(mo(gye))),resolution:zs(mo(xye)),semitones:zs(mo(kye)),time:zs(mo(bye)),percentage:zs(Nye),zero:YT(),number:zs(Oye),integer:zs(Rye)};function Mye(e,t,n){return Object.assign(A0("SyntaxError",e),{input:t,offset:n,rawMessage:e,message:e+`
  `+t+`
--`+new Array((n||t.length)+1).join("-")+"^"})}const Lye=9,Iye=10,$ye=12,Dye=13,zye=32;class Fye{constructor(t){this.str=t,this.pos=0}charCodeAt(t){return t<this.str.length?this.str.charCodeAt(t):0}charCode(){return this.charCodeAt(this.pos)}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(t){return this.charCodeAt(this.findWsEnd(t))}findWsEnd(t){for(;t<this.str.length;t++){const n=this.str.charCodeAt(t);if(n!==Dye&&n!==Iye&&n!==$ye&&n!==zye&&n!==Lye)break}return t}substringToPos(t){return this.str.substring(this.pos,this.pos=t)}eat(t){this.charCode()!==t&&this.error("Expect `"+String.fromCharCode(t)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(t){throw new Mye(t,this.str,this.pos)}}const Bye=9,Uye=10,Hye=12,Wye=13,Vye=32,CM=33,X_=35,KT=38,Pg=39,EM=40,Gye=41,TM=42,K_=43,Z_=44,ZT=45,Q_=60,jM=62,qx=63,qye=64,N0=91,J_=93,Ng=123,QT=124,JT=125,e5=8734,bf=new Uint8Array(128).map((e,t)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(t))?1:0),t5={" ":1,"&&":2,"||":3,"|":4};function Og(e){return e.substringToPos(e.findWsEnd(e.pos))}function ed(e){let t=e.pos;for(;t<e.str.length;t++){const n=e.str.charCodeAt(t);if(n>=128||bf[n]===0)break}return e.pos===t&&e.error("Expect a keyword"),e.substringToPos(t)}function Rg(e){let t=e.pos;for(;t<e.str.length;t++){const n=e.str.charCodeAt(t);if(n<48||n>57)break}return e.pos===t&&e.error("Expect a number"),e.substringToPos(t)}function Yye(e){const t=e.str.indexOf("'",e.pos+1);return t===-1&&(e.pos=e.str.length,e.error("Expect an apostrophe")),e.substringToPos(t+1)}function n5(e){let t=null,n=null;return e.eat(Ng),t=Rg(e),e.charCode()===Z_?(e.pos++,e.charCode()!==JT&&(n=Rg(e))):n=t,e.eat(JT),{min:Number(t),max:n?Number(n):0}}function Xye(e){let t=null,n=!1;switch(e.charCode()){case TM:e.pos++,t={min:0,max:0};break;case K_:e.pos++,t={min:1,max:0};break;case qx:e.pos++,t={min:0,max:1};break;case X_:e.pos++,n=!0,e.charCode()===Ng?t=n5(e):e.charCode()===qx?(e.pos++,t={min:0,max:0}):t={min:1,max:0};break;case Ng:t=n5(e);break;default:return null}return{type:"Multiplier",comma:n,min:t.min,max:t.max,term:null}}function td(e,t){const n=Xye(e);return n!==null?(n.term=t,e.charCode()===X_&&e.charCodeAt(e.pos-1)===K_?td(e,n):n):t}function Cb(e){const t=e.peek();return t===""?null:{type:"Token",value:t}}function Kye(e){let t;return e.eat(Q_),e.eat(Pg),t=ed(e),e.eat(Pg),e.eat(jM),td(e,{type:"Property",name:t})}function Zye(e){let t=null,n=null,r=1;return e.eat(N0),e.charCode()===ZT&&(e.peek(),r=-1),r==-1&&e.charCode()===e5?e.peek():(t=r*Number(Rg(e)),bf[e.charCode()]!==0&&(t+=ed(e))),Og(e),e.eat(Z_),Og(e),e.charCode()===e5?e.peek():(r=1,e.charCode()===ZT&&(e.peek(),r=-1),n=r*Number(Rg(e)),bf[e.charCode()]!==0&&(n+=ed(e))),e.eat(J_),{type:"Range",min:t,max:n}}function Qye(e){let t,n=null;return e.eat(Q_),t=ed(e),e.charCode()===EM&&e.nextCharCode()===Gye&&(e.pos+=2,t+="()"),e.charCodeAt(e.findWsEnd(e.pos))===N0&&(Og(e),n=Zye(e)),e.eat(jM),td(e,{type:"Type",name:t,opts:n})}function Jye(e){const t=ed(e);return e.charCode()===EM?(e.pos++,{type:"Function",name:t}):td(e,{type:"Keyword",name:t})}function ebe(e,t){function n(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let r;for(t=Object.keys(t).sort((i,s)=>t5[i]-t5[s]);t.length>0;){r=t.shift();let i=0,s=0;for(;i<e.length;i++){const a=e[i];a.type==="Combinator"&&(a.value===r?(s===-1&&(s=i-1),e.splice(i,1),i--):(s!==-1&&i-s>1&&(e.splice(s,i-s,n(e.slice(s,i),r)),i=s+1),s=-1))}s!==-1&&t.length&&e.splice(s,i-s,n(e.slice(s,i),r))}return r}function AM(e){const t=[],n={};let r,i=null,s=e.pos;for(;r=nbe(e);)r.type!=="Spaces"&&(r.type==="Combinator"?((i===null||i.type==="Combinator")&&(e.pos=s,e.error("Unexpected combinator")),n[r.value]=!0):i!==null&&i.type!=="Combinator"&&(n[" "]=!0,t.push({type:"Combinator",value:" "})),t.push(r),i=r,s=e.pos);return i!==null&&i.type==="Combinator"&&(e.pos-=s,e.error("Unexpected combinator")),{type:"Group",terms:t,combinator:ebe(t,n)||" ",disallowEmpty:!1,explicit:!1}}function tbe(e){let t;return e.eat(N0),t=AM(e),e.eat(J_),t.explicit=!0,e.charCode()===CM&&(e.pos++,t.disallowEmpty=!0),t}function nbe(e){let t=e.charCode();if(t<128&&bf[t]===1)return Jye(e);switch(t){case J_:break;case N0:return td(e,tbe(e));case Q_:return e.nextCharCode()===Pg?Kye(e):Qye(e);case QT:return{type:"Combinator",value:e.substringToPos(e.pos+(e.nextCharCode()===QT?2:1))};case KT:return e.pos++,e.eat(KT),{type:"Combinator",value:"&&"};case Z_:return e.pos++,{type:"Comma"};case Pg:return td(e,{type:"String",value:Yye(e)});case Vye:case Bye:case Uye:case Wye:case Hye:return{type:"Spaces",value:Og(e)};case qye:return t=e.nextCharCode(),t<128&&bf[t]===1?(e.pos++,{type:"AtKeyword",name:ed(e)}):Cb(e);case TM:case K_:case qx:case X_:case CM:break;case Ng:if(t=e.nextCharCode(),t<48||t>57)return Cb(e);break;default:return Cb(e)}}function PM(e){const t=new Fye(e),n=AM(t);return t.pos!==e.length&&t.error("Unexpected input"),n.terms.length===1&&n.terms[0].type==="Group"?n.terms[0]:n}const gh=function(){};function r5(e){return typeof e=="function"?e:gh}function rbe(e,t,n){function r(a){switch(i.call(n,a),a.type){case"Group":a.terms.forEach(r);break;case"Multiplier":r(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(n,a)}let i=gh,s=gh;if(typeof t=="function"?i=t:t&&(i=r5(t.enter),s=r5(t.leave)),i===gh&&s===gh)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");r(e)}const ibe={decorator(e){const t=[];let n=null;return{...e,node(r){const i=n;n=r,e.node.call(this,r),n=i},emit(r,i,s){t.push({type:i,value:r,node:s?null:n})},result(){return t}}}};function sbe(e){const t=[];return j0(e,(n,r,i)=>t.push({type:n,value:e.slice(r,i),node:null})),t}function abe(e,t){return typeof e=="string"?sbe(e):t.generate(e,ibe)}const Yn={type:"Match"},sr={type:"Mismatch"},e2={type:"DisallowEmpty"},obe=40,lbe=41;function zi(e,t,n){return t===Yn&&n===sr||e===Yn&&t===Yn&&n===Yn?e:(e.type==="If"&&e.else===sr&&t===Yn&&(t=e.then,e=e.match),{type:"If",match:e,then:t,else:n})}function NM(e){return e.length>2&&e.charCodeAt(e.length-2)===obe&&e.charCodeAt(e.length-1)===lbe}function i5(e){return e.type==="Keyword"||e.type==="AtKeyword"||e.type==="Function"||e.type==="Type"&&NM(e.name)}function Yx(e,t,n){switch(e){case" ":{let r=Yn;for(let i=t.length-1;i>=0;i--){const s=t[i];r=zi(s,r,sr)}return r}case"|":{let r=sr,i=null;for(let s=t.length-1;s>=0;s--){let a=t[s];if(i5(a)&&(i===null&&s>0&&i5(t[s-1])&&(i=Object.create(null),r=zi({type:"Enum",map:i},Yn,r)),i!==null)){const o=(NM(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,r=zi(a,Yn,r)}return r}case"&&":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!0};let r=sr;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Yx(e,t.filter(function(o){return o!==s}),!1):a=Yn,r=zi(s,a,r)}return r}case"||":{if(t.length>5)return{type:"MatchOnce",terms:t,all:!1};let r=n?Yn:sr;for(let i=t.length-1;i>=0;i--){const s=t[i];let a;t.length>1?a=Yx(e,t.filter(function(o){return o!==s}),!0):a=Yn,r=zi(s,a,r)}return r}}}function cbe(e){let t=Yn,n=t2(e.term);if(e.max===0)n=zi(n,e2,sr),t=zi(n,null,sr),t.then=zi(Yn,Yn,t),e.comma&&(t.then.else=zi({type:"Comma",syntax:e},t,sr));else for(let r=e.min||1;r<=e.max;r++)e.comma&&t!==Yn&&(t=zi({type:"Comma",syntax:e},t,sr)),t=zi(n,zi(Yn,Yn,t),sr);if(e.min===0)t=zi(Yn,Yn,t);else for(let r=0;r<e.min-1;r++)e.comma&&t!==Yn&&(t=zi({type:"Comma",syntax:e},t,sr)),t=zi(n,t,sr);return t}function t2(e){if(typeof e=="function")return{type:"Generic",fn:e};switch(e.type){case"Group":{let t=Yx(e.combinator,e.terms.map(t2),!1);return e.disallowEmpty&&(t=zi(t,e2,sr)),t}case"Multiplier":return cbe(e);case"Type":case"Property":return{type:e.type,name:e.name,syntax:e};case"Keyword":return{type:e.type,name:e.name.toLowerCase(),syntax:e};case"AtKeyword":return{type:e.type,name:"@"+e.name.toLowerCase(),syntax:e};case"Function":return{type:e.type,name:e.name.toLowerCase()+"(",syntax:e};case"String":return e.value.length===3?{type:"Token",value:e.value.charAt(1),syntax:e}:{type:e.type,value:e.value.substr(1,e.value.length-2).replace(/\\'/g,"'"),syntax:e};case"Token":return{type:e.type,value:e.value,syntax:e};case"Comma":return{type:e.type,syntax:e};default:throw new Error("Unknown node type:",e.type)}}function Xx(e,t){return typeof e=="string"&&(e=PM(e)),{type:"MatchGraph",match:t2(e),syntax:t||null,source:e}}const{hasOwnProperty:s5}=Object.prototype,ube=0,dbe=1,Kx=2,OM=3,a5="Match",hbe="Mismatch",fbe="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",o5=15e3;function pbe(e){let t=null,n=null,r=e;for(;r!==null;)n=r.prev,r.prev=t,t=r,r=n;return t}function Eb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=t.charCodeAt(n);let i=e.charCodeAt(n);if(i>=65&&i<=90&&(i=i|32),i!==r)return!1}return!0}function mbe(e){return e.type!==Hn?!1:e.value!=="?"}function l5(e){return e===null?!0:e.type===co||e.type===$n||e.type===mi||e.type===$s||e.type===qi||mbe(e)}function c5(e){return e===null?!0:e.type===ar||e.type===Ra||e.type===ea||e.type===Hn&&e.value==="/"}function gbe(e,t,n){function r(){do k++,x=k<e.length?e[k]:null;while(x!==null&&(x.type===Wr||x.type===Qi))}function i(I){const E=k+I;return E<e.length?e[E]:null}function s(I,E){return{nextState:I,matchStack:O,syntaxStack:p,thenStack:m,tokenIndex:k,prev:E}}function a(I){m={nextState:I,matchStack:O,syntaxStack:p,prev:m}}function o(I){g=s(I,g)}function u(){O={type:dbe,syntax:t.syntax,token:x,prev:O},r(),v=null,k>j&&(j=k)}function d(){p={syntax:t.syntax,opts:t.syntax.opts||p!==null&&p.opts||null,prev:p},O={type:Kx,syntax:t.syntax,token:O.token,prev:O}}function h(){O.type===Kx?O=O.prev:O={type:OM,syntax:p.syntax,token:O.token,prev:O},p=p.prev}let p=null,m=null,g=null,v=null,w=0,S=null,x=null,k=-1,j=0,O={type:ube,syntax:null,token:null,prev:null};for(r();S===null&&++w<o5;)switch(t.type){case"Match":if(m===null){if(x!==null&&(k!==e.length-1||x.value!=="\\0"&&x.value!=="\\9")){t=sr;break}S=a5;break}if(t=m.nextState,t===e2)if(m.matchStack===O){t=sr;break}else t=Yn;for(;m.syntaxStack!==p;)h();m=m.prev;break;case"Mismatch":if(v!==null&&v!==!1)(g===null||k>g.tokenIndex)&&(g=v,v=!1);else if(g===null){S=hbe;break}t=g.nextState,m=g.thenStack,p=g.syntaxStack,O=g.matchStack,k=g.tokenIndex,x=k<e.length?e[k]:null,g=g.prev;break;case"MatchGraph":t=t.match;break;case"If":t.else!==sr&&o(t.else),t.then!==Yn&&a(t.then),t=t.match;break;case"MatchOnce":t={type:"MatchOnceBuffer",syntax:t,index:0,mask:0};break;case"MatchOnceBuffer":{const U=t.syntax.terms;if(t.index===U.length){if(t.mask===0||t.syntax.all){t=sr;break}t=Yn;break}if(t.mask===(1<<U.length)-1){t=Yn;break}for(;t.index<U.length;t.index++){const D=1<<t.index;if(!(t.mask&D)){o(t),a({type:"AddMatchOnce",syntax:t.syntax,mask:t.mask|D}),t=U[t.index++];break}}break}case"AddMatchOnce":t={type:"MatchOnceBuffer",syntax:t.syntax,index:0,mask:t.mask};break;case"Enum":if(x!==null){let U=x.value.toLowerCase();if(U.indexOf("\\")!==-1&&(U=U.replace(/\\[09].*$/,"")),s5.call(t.map,U)){t=t.map[U];break}}t=sr;break;case"Generic":{const U=p!==null?p.opts:null,D=k+Math.floor(t.fn(x,i,U));if(!isNaN(D)&&D>k){for(;k<D;)u();t=Yn}else t=sr;break}case"Type":case"Property":{const U=t.type==="Type"?"types":"properties",D=s5.call(n,U)?n[U][t.name]:null;if(!D||!D.match)throw new Error("Bad syntax reference: "+(t.type==="Type"?"<"+t.name+">":"<'"+t.name+"'>"));if(v!==!1&&x!==null&&t.type==="Type"&&(t.name==="custom-ident"&&x.type===Ht||t.name==="length"&&x.value==="0")){v===null&&(v=s(t,g)),t=sr;break}d(),t=D.match;break}case"Keyword":{const U=t.name;if(x!==null){let D=x.value;if(D.indexOf("\\")!==-1&&(D=D.replace(/\\[09].*$/,"")),Eb(D,U)){u(),t=Yn;break}}t=sr;break}case"AtKeyword":case"Function":if(x!==null&&Eb(x.value,t.name)){u(),t=Yn;break}t=sr;break;case"Token":if(x!==null&&x.value===t.value){u(),t=Yn;break}t=sr;break;case"Comma":x!==null&&x.type===co?l5(O.token)?t=sr:(u(),t=c5(x)?sr:Yn):t=l5(O.token)||c5(x)?Yn:sr;break;case"String":let I="",E=k;for(;E<e.length&&I.length<t.value.length;E++)I+=e[E].value;if(Eb(I,t.value)){for(;k<E;)u();t=Yn}else t=sr;break;default:throw new Error("Unknown node type: "+t.type)}switch(S){case null:console.warn("[csstree-match] BREAK after "+o5+" iterations"),S=fbe,O=null;break;case a5:for(;p!==null;)h();break;default:O=null}return{tokens:e,reason:S,iterations:w,match:O,longestMatch:j}}function u5(e,t,n){const r=gbe(e,t,n||{});if(r.match===null)return r;let i=r.match,s=r.match={syntax:t.syntax||null,match:[]};const a=[s];for(i=pbe(i).prev;i!==null;){switch(i.type){case Kx:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case OM:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return r}function RM(e){function t(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function n(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(n(i.match[s]))return t(i.syntax)&&r.unshift(i.syntax),!0}else if(i.node===e)return r=t(i.syntax)?[i.syntax]:[],!0;return!1}let r=null;return this.matched!==null&&n(this.matched),r}function ybe(e,t){return n2(this,e,n=>n.type==="Type"&&n.name===t)}function bbe(e,t){return n2(this,e,n=>n.type==="Property"&&n.name===t)}function vbe(e){return n2(this,e,t=>t.type==="Keyword")}function n2(e,t,n){const r=RM.call(e,t);return r===null?!1:r.some(n)}const xbe=Object.freeze(Object.defineProperty({__proto__:null,getTrace:RM,isKeyword:vbe,isProperty:bbe,isType:ybe},Symbol.toStringTag,{value:"Module"}));function MM(e){return"node"in e?e.node:MM(e.match[0])}function LM(e){return"node"in e?e.node:LM(e.match[e.match.length-1])}function d5(e,t,n,r,i){function s(o){if(o.syntax!==null&&o.syntax.type===r&&o.syntax.name===i){const u=MM(o),d=LM(o);e.syntax.walk(t,function(h,p,m){if(h===u){const g=new Un;do{if(g.appendData(p.data),p.data===d)break;p=p.next}while(p!==null);a.push({parent:m,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return n.matched!==null&&s(n.matched),a}const{hasOwnProperty:Dh}=Object.prototype;function Tb(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&e>=0}function h5(e){return!!e&&Tb(e.offset)&&Tb(e.line)&&Tb(e.column)}function wbe(e,t){return function(r,i){if(!r||r.constructor!==Object)return i(r,"Type of node should be an Object");for(let s in r){let a=!0;if(Dh.call(r,s)!==!1){if(s==="type")r.type!==e&&i(r,"Wrong node type `"+r.type+"`, expected `"+e+"`");else if(s==="loc"){if(r.loc===null)continue;if(r.loc&&r.loc.constructor===Object)if(typeof r.loc.source!="string")s+=".source";else if(!h5(r.loc.start))s+=".start";else if(!h5(r.loc.end))s+=".end";else continue;a=!1}else if(t.hasOwnProperty(s)){a=!1;for(let o=0;!a&&o<t[s].length;o++){const u=t[s][o];switch(u){case String:a=typeof r[s]=="string";break;case Boolean:a=typeof r[s]=="boolean";break;case null:a=r[s]===null;break;default:typeof u=="string"?a=r[s]&&r[s].type===u:Array.isArray(u)&&(a=r[s]instanceof Un)}}}else i(r,"Unknown field `"+s+"` for "+e+" node type");a||i(r,"Bad value for `"+e+"."+s+"`")}}for(const s in t)Dh.call(t,s)&&Dh.call(r,s)===!1&&i(r,"Field `"+e+"."+s+"` is missed")}}function _be(e,t){const n=t.structure,r={type:String,loc:!0},i={type:'"'+e+'"'};for(const s in n){if(Dh.call(n,s)===!1)continue;const a=[],o=r[s]=Array.isArray(n[s])?n[s].slice():[n[s]];for(let u=0;u<o.length;u++){const d=o[u];if(d===String||d===Boolean)a.push(d.name);else if(d===null)a.push("null");else if(typeof d=="string")a.push("<"+d+">");else if(Array.isArray(d))a.push("List");else throw new Error("Wrong value `"+d+"` in `"+e+"."+s+"` structure definition")}i[s]=a.join(" | ")}return{docs:i,check:wbe(e,r)}}function kbe(e){const t={};if(e.node){for(const n in e.node)if(Dh.call(e.node,n)){const r=e.node[n];if(r.structure)t[n]=_be(n,r);else throw new Error("Missed `structure` field in `"+n+"` node type definition")}}return t}const Sbe=Xx(vM.join(" | "));function Zx(e,t,n){const r={};for(const i in e)e[i].syntax&&(r[i]=n?e[i].syntax:G_(e[i].syntax,{compact:t}));return r}function Cbe(e,t,n){const r={};for(const[i,s]of Object.entries(e))r[i]={prelude:s.prelude&&(n?s.prelude.syntax:G_(s.prelude.syntax,{compact:t})),descriptors:s.descriptors&&Zx(s.descriptors,t,n)};return r}function Ebe(e){for(let t=0;t<e.length;t++)if(e[t].value.toLowerCase()==="var(")return!0;return!1}function ya(e,t,n){return{matched:e,iterations:n,error:t,...xbe}}function zc(e,t,n,r){const i=abe(n,e.syntax);let s;return Ebe(i)?ya(null,new Error("Matching for a tree with var() is not supported")):(r&&(s=u5(i,e.cssWideKeywordsSyntax,e)),(!r||!s.match)&&(s=u5(i,t.match,e),!s.match)?ya(null,new aye(s.reason,t.syntax,n,s),s.iterations):ya(s.match,null,s.iterations))}class f5{constructor(t,n,r){if(this.cssWideKeywordsSyntax=Sbe,this.syntax=n,this.generic=!1,this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=r||kbe(t),t){if(t.types)for(const i in t.types)this.addType_(i,t.types[i]);if(t.generic){this.generic=!0;for(const i in XT)this.addType_(i,XT[i])}if(t.atrules)for(const i in t.atrules)this.addAtrule_(i,t.atrules[i]);if(t.properties)for(const i in t.properties)this.addProperty_(i,t.properties[i])}}checkStructure(t){function n(s,a){i.push({node:s,message:a})}const r=this.structure,i=[];return this.syntax.walk(t,function(s){r.hasOwnProperty(s.type)?r[s.type].check(s,n):n(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(t,n,r,i=null){const s={type:n,name:r},a={type:n,name:r,parent:i,serializable:typeof t=="string"||t&&typeof t.type=="string",syntax:null,match:null};return typeof t=="function"?a.match=Xx(t,s):(typeof t=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:PM(t)}),a.syntax}}):a.syntax=t,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:Xx(a.syntax,s)}),a.match}})),a}addAtrule_(t,n){n&&(this.atrules[t]={type:"Atrule",name:t,prelude:n.prelude?this.createDescriptor(n.prelude,"AtrulePrelude",t):null,descriptors:n.descriptors?Object.keys(n.descriptors).reduce((r,i)=>(r[i]=this.createDescriptor(n.descriptors[i],"AtruleDescriptor",i,t),r),Object.create(null)):null})}addProperty_(t,n){n&&(this.properties[t]=this.createDescriptor(n,"Property",t))}addType_(t,n){n&&(this.types[t]=this.createDescriptor(n,"Type",t))}checkAtruleName(t){if(!this.getAtrule(t))return new qd("Unknown at-rule","@"+t)}checkAtrulePrelude(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t);if(!i.prelude&&n)return new SyntaxError("At-rule `@"+t+"` should not contain a prelude");if(i.prelude&&!n&&!zc(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+t+"` should contain a prelude")}checkAtruleDescriptorName(t,n){const r=this.checkAtruleName(t);if(r)return r;const i=this.getAtrule(t),s=Ta(n);if(!i.descriptors)return new SyntaxError("At-rule `@"+t+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new qd("Unknown at-rule descriptor",n)}checkPropertyName(t){if(!this.getProperty(t))return new qd("Unknown property",t)}matchAtrulePrelude(t,n){const r=this.checkAtrulePrelude(t,n);if(r)return ya(null,r);const i=this.getAtrule(t);return i.prelude?zc(this,i.prelude,n||"",!1):ya(null,null)}matchAtruleDescriptor(t,n,r){const i=this.checkAtruleDescriptorName(t,n);if(i)return ya(null,i);const s=this.getAtrule(t),a=Ta(n);return zc(this,s.descriptors[a.name]||s.descriptors[a.basename],r,!1)}matchDeclaration(t){return t.type!=="Declaration"?ya(null,new Error("Not a Declaration node")):this.matchProperty(t.property,t.value)}matchProperty(t,n){if(Ju(t).custom)return ya(null,new Error("Lexer matching doesn't applicable for custom properties"));const r=this.checkPropertyName(t);return r?ya(null,r):zc(this,this.getProperty(t),n,!0)}matchType(t,n){const r=this.getType(t);return r?zc(this,r,n,!1):ya(null,new qd("Unknown type",t))}match(t,n){return typeof t!="string"&&(!t||!t.type)?ya(null,new qd("Bad syntax")):((typeof t=="string"||!t.match)&&(t=this.createDescriptor(t,"Type","anonymous")),zc(this,t,n,!1))}findValueFragments(t,n,r,i){return d5(this,n,this.matchProperty(t,n),r,i)}findDeclarationValueFragments(t,n,r){return d5(this,t.value,this.matchDeclaration(t),n,r)}findAllFragments(t,n,r){const i=[];return this.syntax.walk(t,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,n,r))}}),i}getAtrule(t,n=!0){const r=Ta(t);return(r.vendor&&n?this.atrules[r.name]||this.atrules[r.basename]:this.atrules[r.name])||null}getAtrulePrelude(t,n=!0){const r=this.getAtrule(t,n);return r&&r.prelude||null}getAtruleDescriptor(t,n){return this.atrules.hasOwnProperty(t)&&this.atrules.declarators&&this.atrules[t].declarators[n]||null}getProperty(t,n=!0){const r=Ju(t);return(r.vendor&&n?this.properties[r.name]||this.properties[r.basename]:this.properties[r.name])||null}getType(t){return hasOwnProperty.call(this.types,t)?this.types[t]:null}validate(){function t(i,s,a,o){if(a.has(s))return a.get(s);a.set(s,!1),o.syntax!==null&&rbe(o.syntax,function(u){if(u.type!=="Type"&&u.type!=="Property")return;const d=u.type==="Type"?i.types:i.properties,h=u.type==="Type"?n:r;(!hasOwnProperty.call(d,u.name)||t(i,u.name,h,d[u.name]))&&a.set(s,!0)},this)}let n=new Map,r=new Map;for(const i in this.types)t(this,i,n,this.types[i]);for(const i in this.properties)t(this,i,r,this.properties[i]);return n=[...n.keys()].filter(i=>n.get(i)),r=[...r.keys()].filter(i=>r.get(i)),n.length||r.length?{types:n,properties:r}:null}dump(t,n){return{generic:this.generic,types:Zx(this.types,!n,t),properties:Zx(this.properties,!n,t),atrules:Cbe(this.atrules,!n,t)}}toString(){return JSON.stringify(this.dump())}}const{hasOwnProperty:zu}=Object.prototype,Tbe={generic:!0,types:Qx,atrules:{prelude:m5,descriptors:m5},properties:Qx,parseContext:jbe,scope:$M,atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function O0(e){return e&&e.constructor===Object}function IM(e){return O0(e)?{...e}:e}function jbe(e,t){return Object.assign(e,t)}function $M(e,t){for(const n in t)zu.call(t,n)&&(O0(e[n])?$M(e[n],t[n]):e[n]=IM(t[n]));return e}function p5(e,t){return typeof t=="string"&&/^\s*\|/.test(t)?typeof e=="string"?e+t:t.replace(/^\s*\|\s*/,""):t||null}function Qx(e,t){if(typeof t=="string")return p5(e,t);const n={...e};for(let r in t)zu.call(t,r)&&(n[r]=p5(zu.call(e,r)?e[r]:void 0,t[r]));return n}function m5(e,t){const n=Qx(e,t);return!O0(n)||Object.keys(n).length?n:null}function yh(e,t,n){for(const r in n)if(zu.call(n,r)!==!1){if(n[r]===!0)zu.call(t,r)&&(e[r]=IM(t[r]));else if(n[r]){if(typeof n[r]=="function"){const i=n[r];e[r]=i({},e[r]),e[r]=i(e[r]||{},t[r])}else if(O0(n[r])){const i={};for(let s in e[r])i[s]=yh({},e[r][s],n[r]);for(let s in t[r])i[s]=yh(i[s]||{},t[r][s],n[r]);e[r]=i}else if(Array.isArray(n[r])){const i={},s=n[r].reduce(function(a,o){return a[o]=!0,a},{});for(const[a,o]of Object.entries(e[r]||{}))i[a]={},o&&yh(i[a],o,s);for(const a in t[r])zu.call(t[r],a)&&(i[a]||(i[a]={}),t[r]&&t[r][a]&&yh(i[a],t[r][a],s));e[r]=i}}}return e}const Jx=(e,t)=>yh(e,t,Tbe);function DM(e){const t=B0e(e),n=eye(e),r=K0e(e),{fromPlainObject:i,toPlainObject:s}=Z0e(n),a={lexer:null,createLexer:o=>new f5(o,a,a.lexer.structure),tokenize:j0,parse:t,generate:r,walk:n,find:n.find,findLast:n.findLast,findAll:n.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const u=Jx({},e);return DM(typeof o=="function"?o(u,Object.assign):Jx(u,o))}};return a.lexer=new f5({generic:!0,types:e.types,atrules:e.atrules,properties:e.properties,node:e.node},a),a}const Abe=e=>DM(Jx({},e)),Pbe={generic:!0,types:{"absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|( <calc-sum> )","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>",combinator:"'>'|'+'|'~'|['||']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<compound-selector> [<combinator>? <compound-selector>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fit-content()":"fit-content( [<length>|<percentage>] )","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value> )]|( <ident> <any-value> )","generic-family":"serif|sans-serif|cursive|fantasy|monospace|-apple-system","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length>|<percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length>|<percentage>|min-content|max-content|auto] , [<length>|<percentage>|<flex>|min-content|max-content|auto] )","name-repeat":"repeat( [<integer [1,]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( <length> )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","saturate()":"saturate( <number-percentage> )","scale()":"scale( <number> , <number>? )","scale3d()":"scale3d( <number> , <number> , <number> )","scaleX()":"scaleX( <number> )","scaleY()":"scaleY( <number> )","scaleZ()":"scaleZ( <number> )","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","single-animation":"<time>||<easing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<timeline-name>","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-name":"<custom-ident>|<string>","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( [<length>|<percentage>] )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-width":"fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-webkit-mask-clip-style":"border|border-box|padding|padding-box|content|content-box|text","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","-ms-filter":"<string>",age:"child|young|old","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text","border-radius":"<length-percentage>{1,2}",bottom:"<length>|auto","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )",left:"<length>|auto","mask-image":"<mask-reference>#",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke",ratio:"<number [0,]> [/ <number [0,]>]?","reversed-counter-name":"reversed( <counter-name> )",right:"<length>|auto","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto","track-group":"'(' [<string>* <track-minmax> <string>*]+ ')' ['[' <positive-integer> ']']?|<track-minmax>","track-list-v0":"[<string>* <track-group> <string>*]+|none","track-minmax":"minmax( <track-breadth> , <track-breadth> )|auto|<track-breadth>|fit-content",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,]>","positive-integer":"<integer [0,]>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer",animation:"<single-animation>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto|<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-overflow":"clip|ellipsis|<string>","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end","caret-color":"auto|<color>",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none",color:"<color>","print-color-adjust":"economy|exact","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance|balance-all","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[size||layout||style||paint]",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","empty-cells":"show|hide",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps]","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","hyphenate-character":"auto|<string>",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|ray( [<angle>&&<size>&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]","offset-position":"auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-color'>||<'outline-style'>||<'outline-width'>]","outline-color":"<color>|invert","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky",quotes:"none|auto|[<string> <string>]+",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",scale:"none|<number>{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"[over|under]&&[right|left]","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|fill|stretch|intrinsic|-moz-max-content|-webkit-max-content|-moz-fit-content|-webkit-fit-content","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+","clip-rule":"nonzero|evenodd",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|none|normal","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<number-zero-one>","stroke-width":"<svg-length>","text-anchor":"start|middle|end","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<string>"}},"scroll-timeline":{prelude:"<timeline-name>",descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},viewport:{prelude:null,descriptors:{height:"<viewport-length>{1,2}","max-height":"<viewport-length>","max-width":"<viewport-length>","max-zoom":"auto|<number>|<percentage>","min-height":"<viewport-length>","min-width":"<viewport-length>","min-zoom":"auto|<number>|<percentage>",orientation:"auto|portrait|landscape","user-zoom":"zoom|fixed","viewport-fit":"auto|contain|cover",width:"<viewport-length>{1,2}",zoom:"auto|<number>|<percentage>"}}}},Qa=43,Cs=45,wm=110,Ul=!0,Nbe=!1;function _m(e,t){let n=this.tokenStart+e;const r=this.charCodeAt(n);for((r===Qa||r===Cs)&&(t&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)xi(this.charCodeAt(n))||this.error("Integer is expected",n)}function Eu(e){return _m.call(this,0,e)}function Ho(e,t){if(!this.cmpChar(this.tokenStart+e,t)){let n="";switch(t){case wm:n="N is expected";break;case Cs:n="HyphenMinus is expected";break}this.error(n,this.tokenStart+e)}}function jb(){let e=0,t=0,n=this.tokenType;for(;n===Wr||n===Qi;)n=this.lookupType(++e);if(n!==fn)if(this.isDelim(Qa,e)||this.isDelim(Cs,e)){t=this.isDelim(Qa,e)?Qa:Cs;do n=this.lookupType(++e);while(n===Wr||n===Qi);n!==fn&&(this.skip(e),Eu.call(this,Ul))}else return null;return e>0&&this.skip(e),t===0&&(n=this.charCodeAt(this.tokenStart),n!==Qa&&n!==Cs&&this.error("Number sign is expected")),Eu.call(this,t!==0),t===Cs?"-"+this.consume(fn):this.consume(fn)}const Obe="AnPlusB",Rbe={a:[String,null],b:[String,null]};function zM(){const e=this.tokenStart;let t=null,n=null;if(this.tokenType===fn)Eu.call(this,Nbe),n=this.consume(fn);else if(this.tokenType===Ht&&this.cmpChar(this.tokenStart,Cs))switch(t="-1",Ho.call(this,1,wm),this.tokenEnd-this.tokenStart){case 2:this.next(),n=jb.call(this);break;case 3:Ho.call(this,2,Cs),this.next(),this.skipSC(),Eu.call(this,Ul),n="-"+this.consume(fn);break;default:Ho.call(this,2,Cs),_m.call(this,3,Ul),this.next(),n=this.substrToCursor(e+2)}else if(this.tokenType===Ht||this.isDelim(Qa)&&this.lookupType(1)===Ht){let r=0;switch(t="1",this.isDelim(Qa)&&(r=1,this.next()),Ho.call(this,0,wm),this.tokenEnd-this.tokenStart){case 1:this.next(),n=jb.call(this);break;case 2:Ho.call(this,1,Cs),this.next(),this.skipSC(),Eu.call(this,Ul),n="-"+this.consume(fn);break;default:Ho.call(this,1,Cs),_m.call(this,2,Ul),this.next(),n=this.substrToCursor(e+r+1)}}else if(this.tokenType===Rn){const r=this.charCodeAt(this.tokenStart),i=r===Qa||r===Cs;let s=this.tokenStart+i;for(;s<this.tokenEnd&&xi(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),Ho.call(this,s-this.tokenStart,wm),t=this.substring(e,s),s+1===this.tokenEnd?(this.next(),n=jb.call(this)):(Ho.call(this,s-this.tokenStart+1,Cs),s+2===this.tokenEnd?(this.next(),this.skipSC(),Eu.call(this,Ul),n="-"+this.consume(fn)):(_m.call(this,s-this.tokenStart+2,Ul),this.next(),n=this.substrToCursor(s+1)))}else this.error();return t!==null&&t.charCodeAt(0)===Qa&&(t=t.substr(1)),n!==null&&n.charCodeAt(0)===Qa&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(e,this.tokenStart),a:t,b:n}}function Mbe(e){if(e.a){const t=e.a==="+1"&&"n"||e.a==="1"&&"n"||e.a==="-1"&&"-n"||e.a+"n";if(e.b){const n=e.b[0]==="-"||e.b[0]==="+"?e.b:"+"+e.b;this.tokenize(t+n)}else this.tokenize(t)}else this.tokenize(e.b)}const Lbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Mbe,name:Obe,parse:zM,structure:Rbe},Symbol.toStringTag,{value:"Module"}));function g5(e){return this.Raw(e,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function Ibe(){for(let e=1,t;t=this.lookupType(e);e++){if(t===ea)return!0;if(t===qi||t===ci)return!1}return!1}const $be="Atrule",Dbe="atrule",zbe={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function FM(){const e=this.tokenStart;let t,n,r=null,i=null;switch(this.eat(ci),t=this.substrToCursor(e+1),n=t.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==qi&&this.tokenType!==ms&&(this.parseAtrulePrelude?r=this.parseWithFallback(this.AtrulePrelude.bind(this,t),g5):r=g5.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case ms:this.next();break;case qi:hasOwnProperty.call(this.atrule,n)&&typeof this.atrule[n].block=="function"?i=this.atrule[n].block.call(this):i=this.Block(Ibe.call(this));break}return{type:"Atrule",loc:this.getLocation(e,this.tokenStart),name:t,prelude:r,block:i}}function Fbe(e){this.token(ci,"@"+e.name),e.prelude!==null&&this.node(e.prelude),e.block?this.node(e.block):this.token(ms,";")}const Bbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Fbe,name:$be,parse:FM,structure:zbe,walkContext:Dbe},Symbol.toStringTag,{value:"Module"})),Ube="AtrulePrelude",Hbe="atrulePrelude",Wbe={children:[[]]};function BM(e){let t=null;return e!==null&&(e=e.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,e)&&typeof this.atrule[e].prelude=="function"?t=this.atrule[e].prelude.call(this):t=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==qi&&this.tokenType!==ms&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(t),children:t}}function Vbe(e){this.children(e)}const Gbe=Object.freeze(Object.defineProperty({__proto__:null,generate:Vbe,name:Ube,parse:BM,structure:Wbe,walkContext:Hbe},Symbol.toStringTag,{value:"Module"})),qbe=36,UM=42,km=61,Ybe=94,e1=124,Xbe=126;function Kbe(){this.eof&&this.error("Unexpected end of input");const e=this.tokenStart;let t=!1;return this.isDelim(UM)?(t=!0,this.next()):this.isDelim(e1)||this.eat(Ht),this.isDelim(e1)?this.charCodeAt(this.tokenStart+1)!==km?(this.next(),this.eat(Ht)):t&&this.error("Identifier is expected",this.tokenEnd):t&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function Zbe(){const e=this.tokenStart,t=this.charCodeAt(e);return t!==km&&t!==Xbe&&t!==Ybe&&t!==qbe&&t!==UM&&t!==e1&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),t!==km&&(this.isDelim(km)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(e)}const Qbe="AttributeSelector",Jbe={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function HM(){const e=this.tokenStart;let t,n=null,r=null,i=null;return this.eat($s),this.skipSC(),t=Kbe.call(this),this.skipSC(),this.tokenType!==Ra&&(this.tokenType!==Ht&&(n=Zbe.call(this),this.skipSC(),r=this.tokenType===Oa?this.String():this.Identifier(),this.skipSC()),this.tokenType===Ht&&(i=this.consume(Ht),this.skipSC())),this.eat(Ra),{type:"AttributeSelector",loc:this.getLocation(e,this.tokenStart),name:t,matcher:n,value:r,flags:i}}function eve(e){this.token(Hn,"["),this.node(e.name),e.matcher!==null&&(this.tokenize(e.matcher),this.node(e.value)),e.flags!==null&&this.token(Ht,e.flags),this.token(Hn,"]")}const tve=Object.freeze(Object.defineProperty({__proto__:null,generate:eve,name:Qbe,parse:HM,structure:Jbe},Symbol.toStringTag,{value:"Module"}));function WM(e){return this.Raw(e,null,!0)}function nve(){return this.parseWithFallback(this.Rule,WM)}function y5(e){return this.Raw(e,this.consumeUntilSemicolonIncluded,!0)}function rve(){if(this.tokenType===ms)return y5.call(this,this.tokenIndex);const e=this.parseWithFallback(this.Declaration,y5);return this.tokenType===ms&&this.next(),e}const ive="Block",sve="block",ave={children:[["Atrule","Rule","Declaration"]]};function VM(e){const t=e?rve:nve,n=this.tokenStart;let r=this.createList();this.eat(qi);e:for(;!this.eof;)switch(this.tokenType){case ea:break e;case Wr:case Qi:this.next();break;case ci:r.push(this.parseWithFallback(this.Atrule,WM));break;default:r.push(t.call(this))}return this.eof||this.eat(ea),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:r}}function ove(e){this.token(qi,"{"),this.children(e,t=>{t.type==="Declaration"&&this.token(ms,";")}),this.token(ea,"}")}const lve=Object.freeze(Object.defineProperty({__proto__:null,generate:ove,name:ive,parse:VM,structure:ave,walkContext:sve},Symbol.toStringTag,{value:"Module"})),cve="Brackets",uve={children:[[]]};function GM(e,t){const n=this.tokenStart;let r=null;return this.eat($s),r=e.call(this,t),this.eof||this.eat(Ra),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:r}}function dve(e){this.token(Hn,"["),this.children(e),this.token(Hn,"]")}const hve=Object.freeze(Object.defineProperty({__proto__:null,generate:dve,name:cve,parse:GM,structure:uve},Symbol.toStringTag,{value:"Module"})),fve="CDC",pve=[];function qM(){const e=this.tokenStart;return this.eat(cs),{type:"CDC",loc:this.getLocation(e,this.tokenStart)}}function mve(){this.token(cs,"-->")}const gve=Object.freeze(Object.defineProperty({__proto__:null,generate:mve,name:fve,parse:qM,structure:pve},Symbol.toStringTag,{value:"Module"})),yve="CDO",bve=[];function YM(){const e=this.tokenStart;return this.eat(zf),{type:"CDO",loc:this.getLocation(e,this.tokenStart)}}function vve(){this.token(zf,"<!--")}const xve=Object.freeze(Object.defineProperty({__proto__:null,generate:vve,name:yve,parse:YM,structure:bve},Symbol.toStringTag,{value:"Module"})),wve=46,_ve="ClassSelector",kve={name:String};function XM(){return this.eatDelim(wve),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Ht)}}function Sve(e){this.token(Hn,"."),this.token(Ht,e.name)}const Cve=Object.freeze(Object.defineProperty({__proto__:null,generate:Sve,name:_ve,parse:XM,structure:kve},Symbol.toStringTag,{value:"Module"})),Eve=43,b5=47,Tve=62,jve=126,Ave="Combinator",Pve={name:String};function KM(){const e=this.tokenStart;let t;switch(this.tokenType){case Wr:t=" ";break;case Hn:switch(this.charCodeAt(this.tokenStart)){case Tve:case Eve:case jve:this.next();break;case b5:this.next(),this.eatIdent("deep"),this.eatDelim(b5);break;default:this.error("Combinator is expected")}t=this.substrToCursor(e);break}return{type:"Combinator",loc:this.getLocation(e,this.tokenStart),name:t}}function Nve(e){this.tokenize(e.name)}const Ove=Object.freeze(Object.defineProperty({__proto__:null,generate:Nve,name:Ave,parse:KM,structure:Pve},Symbol.toStringTag,{value:"Module"})),Rve=42,Mve=47,Lve="Comment",Ive={value:String};function ZM(){const e=this.tokenStart;let t=this.tokenEnd;return this.eat(Qi),t-e+2>=2&&this.charCodeAt(t-2)===Rve&&this.charCodeAt(t-1)===Mve&&(t-=2),{type:"Comment",loc:this.getLocation(e,this.tokenStart),value:this.substring(e+2,t)}}function $ve(e){this.token(Qi,"/*"+e.value+"*/")}const Dve=Object.freeze(Object.defineProperty({__proto__:null,generate:$ve,name:Lve,parse:ZM,structure:Ive},Symbol.toStringTag,{value:"Module"})),QM=33,zve=35,Fve=36,Bve=38,Uve=42,Hve=43,v5=47;function Wve(e){return this.Raw(e,this.consumeUntilExclamationMarkOrSemicolon,!0)}function Vve(e){return this.Raw(e,this.consumeUntilExclamationMarkOrSemicolon,!1)}function Gve(){const e=this.tokenIndex,t=this.Value();return t.type!=="Raw"&&this.eof===!1&&this.tokenType!==ms&&this.isDelim(QM)===!1&&this.isBalanceEdge(e)===!1&&this.error(),t}const qve="Declaration",Yve="declaration",Xve={important:[Boolean,String],property:String,value:["Value","Raw"]};function JM(){const e=this.tokenStart,t=this.tokenIndex,n=Zve.call(this),r=q_(n),i=r?this.parseCustomProperty:this.parseValue,s=r?Vve:Wve;let a=!1,o;this.skipSC(),this.eat(Gi);const u=this.tokenIndex;if(r||this.skipSC(),i?o=this.parseWithFallback(Gve,s):o=s.call(this,this.tokenIndex),r&&o.type==="Value"&&o.children.isEmpty){for(let d=u-this.tokenIndex;d<=0;d++)if(this.lookupType(d)===Wr){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(QM)&&(a=Qve.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==ms&&this.isBalanceEdge(t)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(e,this.tokenStart),important:a,property:n,value:o}}function Kve(e){this.token(Ht,e.property),this.token(Gi,":"),this.node(e.value),e.important&&(this.token(Hn,"!"),this.token(Ht,e.important===!0?"important":e.important))}function Zve(){const e=this.tokenStart;if(this.tokenType===Hn)switch(this.charCodeAt(this.tokenStart)){case Uve:case Fve:case Hve:case zve:case Bve:this.next();break;case v5:this.next(),this.isDelim(v5)&&this.next();break}return this.tokenType===br?this.eat(br):this.eat(Ht),this.substrToCursor(e)}function Qve(){this.eat(Hn),this.skipSC();const e=this.consume(Ht);return e==="important"?!0:e}const Jve=Object.freeze(Object.defineProperty({__proto__:null,generate:Kve,name:qve,parse:JM,structure:Xve,walkContext:Yve},Symbol.toStringTag,{value:"Module"}));function exe(e){return this.Raw(e,this.consumeUntilSemicolonIncluded,!0)}const txe="DeclarationList",nxe={children:[["Declaration"]]};function e6(){const e=this.createList();for(;!this.eof;)switch(this.tokenType){case Wr:case Qi:case ms:this.next();break;default:e.push(this.parseWithFallback(this.Declaration,exe))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}}function rxe(e){this.children(e,t=>{t.type==="Declaration"&&this.token(ms,";")})}const ixe=Object.freeze(Object.defineProperty({__proto__:null,generate:rxe,name:txe,parse:e6,structure:nxe},Symbol.toStringTag,{value:"Module"})),sxe="Dimension",axe={value:String,unit:String};function t6(){const e=this.tokenStart,t=this.consumeNumber(Rn);return{type:"Dimension",loc:this.getLocation(e,this.tokenStart),value:t,unit:this.substring(e+t.length,this.tokenStart)}}function oxe(e){this.token(Rn,e.value+e.unit)}const lxe=Object.freeze(Object.defineProperty({__proto__:null,generate:oxe,name:sxe,parse:t6,structure:axe},Symbol.toStringTag,{value:"Module"})),cxe="Function",uxe="function",dxe={name:String,children:[[]]};function n6(e,t){const n=this.tokenStart,r=this.consumeFunctionName(),i=r.toLowerCase();let s;return s=t.hasOwnProperty(i)?t[i].call(this,t):e.call(this,t),this.eof||this.eat(ar),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:r,children:s}}function hxe(e){this.token($n,e.name+"("),this.children(e),this.token(ar,")")}const fxe=Object.freeze(Object.defineProperty({__proto__:null,generate:hxe,name:cxe,parse:n6,structure:dxe,walkContext:uxe},Symbol.toStringTag,{value:"Module"})),pxe="XXX",mxe="Hash",gxe={value:String};function r6(){const e=this.tokenStart;return this.eat(br),{type:"Hash",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e+1)}}function yxe(e){this.token(br,"#"+e.value)}const bxe=Object.freeze(Object.defineProperty({__proto__:null,generate:yxe,name:mxe,parse:r6,structure:gxe,xxx:pxe},Symbol.toStringTag,{value:"Module"})),vxe="Identifier",xxe={name:String};function i6(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(Ht)}}function wxe(e){this.token(Ht,e.name)}const _xe=Object.freeze(Object.defineProperty({__proto__:null,generate:wxe,name:vxe,parse:i6,structure:xxe},Symbol.toStringTag,{value:"Module"})),kxe="IdSelector",Sxe={name:String};function s6(){const e=this.tokenStart;return this.eat(br),{type:"IdSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e+1)}}function Cxe(e){this.token(Hn,"#"+e.name)}const Exe=Object.freeze(Object.defineProperty({__proto__:null,generate:Cxe,name:kxe,parse:s6,structure:Sxe},Symbol.toStringTag,{value:"Module"})),Txe="MediaFeature",jxe={name:String,value:["Identifier","Number","Dimension","Ratio",null]};function a6(){const e=this.tokenStart;let t,n=null;if(this.eat(mi),this.skipSC(),t=this.consume(Ht),this.skipSC(),this.tokenType!==ar){switch(this.eat(Gi),this.skipSC(),this.tokenType){case fn:this.lookupNonWSType(1)===Hn?n=this.Ratio():n=this.Number();break;case Rn:n=this.Dimension();break;case Ht:n=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(ar),{type:"MediaFeature",loc:this.getLocation(e,this.tokenStart),name:t,value:n}}function Axe(e){this.token(mi,"("),this.token(Ht,e.name),e.value!==null&&(this.token(Gi,":"),this.node(e.value)),this.token(ar,")")}const Pxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Axe,name:Txe,parse:a6,structure:jxe},Symbol.toStringTag,{value:"Module"})),Nxe="MediaQuery",Oxe={children:[["Identifier","MediaFeature","WhiteSpace"]]};function o6(){const e=this.createList();let t=null;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Qi:case Wr:this.next();continue;case Ht:t=this.Identifier();break;case mi:t=this.MediaFeature();break;default:break e}e.push(t)}return t===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(e),children:e}}function Rxe(e){this.children(e)}const Mxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Rxe,name:Nxe,parse:o6,structure:Oxe},Symbol.toStringTag,{value:"Module"})),Lxe="MediaQueryList",Ixe={children:[["MediaQuery"]]};function l6(){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery()),this.tokenType===co);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}}function $xe(e){this.children(e,()=>this.token(co,","))}const Dxe=Object.freeze(Object.defineProperty({__proto__:null,generate:$xe,name:Lxe,parse:l6,structure:Ixe},Symbol.toStringTag,{value:"Module"})),zxe="Nth",Fxe={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function c6(){this.skipSC();const e=this.tokenStart;let t=e,n=null,r;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?r=this.Identifier():r=this.AnPlusB(),t=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),n=this.SelectorList(),t=this.tokenStart),{type:"Nth",loc:this.getLocation(e,t),nth:r,selector:n}}function Bxe(e){this.node(e.nth),e.selector!==null&&(this.token(Ht,"of"),this.node(e.selector))}const Uxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Bxe,name:zxe,parse:c6,structure:Fxe},Symbol.toStringTag,{value:"Module"})),Hxe="Number",Wxe={value:String};function u6(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(fn)}}function Vxe(e){this.token(fn,e.value)}const Gxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Vxe,name:Hxe,parse:u6,structure:Wxe},Symbol.toStringTag,{value:"Module"})),qxe="Operator",Yxe={value:String};function d6(){const e=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function Xxe(e){this.tokenize(e.value)}const Kxe=Object.freeze(Object.defineProperty({__proto__:null,generate:Xxe,name:qxe,parse:d6,structure:Yxe},Symbol.toStringTag,{value:"Module"})),Zxe="Parentheses",Qxe={children:[[]]};function h6(e,t){const n=this.tokenStart;let r=null;return this.eat(mi),r=e.call(this,t),this.eof||this.eat(ar),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:r}}function Jxe(e){this.token(mi,"("),this.children(e),this.token(ar,")")}const e1e=Object.freeze(Object.defineProperty({__proto__:null,generate:Jxe,name:Zxe,parse:h6,structure:Qxe},Symbol.toStringTag,{value:"Module"})),t1e="Percentage",n1e={value:String};function f6(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(Lr)}}function r1e(e){this.token(Lr,e.value+"%")}const i1e=Object.freeze(Object.defineProperty({__proto__:null,generate:r1e,name:t1e,parse:f6,structure:n1e},Symbol.toStringTag,{value:"Module"})),s1e="PseudoClassSelector",a1e="function",o1e={name:String,children:[["Raw"],null]};function p6(){const e=this.tokenStart;let t=null,n,r;return this.eat(Gi),this.tokenType===$n?(n=this.consumeFunctionName(),r=n.toLowerCase(),hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(this.tokenIndex,null,!1))),this.eat(ar)):n=this.consume(Ht),{type:"PseudoClassSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function l1e(e){this.token(Gi,":"),e.children===null?this.token(Ht,e.name):(this.token($n,e.name+"("),this.children(e),this.token(ar,")"))}const c1e=Object.freeze(Object.defineProperty({__proto__:null,generate:l1e,name:s1e,parse:p6,structure:o1e,walkContext:a1e},Symbol.toStringTag,{value:"Module"})),u1e="PseudoElementSelector",d1e="function",h1e={name:String,children:[["Raw"],null]};function m6(){const e=this.tokenStart;let t=null,n,r;return this.eat(Gi),this.eat(Gi),this.tokenType===$n?(n=this.consumeFunctionName(),r=n.toLowerCase(),hasOwnProperty.call(this.pseudo,r)?(this.skipSC(),t=this.pseudo[r].call(this),this.skipSC()):(t=this.createList(),t.push(this.Raw(this.tokenIndex,null,!1))),this.eat(ar)):n=this.consume(Ht),{type:"PseudoElementSelector",loc:this.getLocation(e,this.tokenStart),name:n,children:t}}function f1e(e){this.token(Gi,":"),this.token(Gi,":"),e.children===null?this.token(Ht,e.name):(this.token($n,e.name+"("),this.children(e),this.token(ar,")"))}const p1e=Object.freeze(Object.defineProperty({__proto__:null,generate:f1e,name:u1e,parse:m6,structure:h1e,walkContext:d1e},Symbol.toStringTag,{value:"Module"})),m1e=47,g1e=46;function x5(){this.skipSC();const e=this.consume(fn);for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);!xi(n)&&n!==g1e&&this.error("Unsigned number is expected",this.tokenStart-e.length+t)}return Number(e)===0&&this.error("Zero number is not allowed",this.tokenStart-e.length),e}const y1e="Ratio",b1e={left:String,right:String};function g6(){const e=this.tokenStart,t=x5.call(this);let n;return this.skipSC(),this.eatDelim(m1e),n=x5.call(this),{type:"Ratio",loc:this.getLocation(e,this.tokenStart),left:t,right:n}}function v1e(e){this.token(fn,e.left),this.token(Hn,"/"),this.token(fn,e.right)}const x1e=Object.freeze(Object.defineProperty({__proto__:null,generate:v1e,name:y1e,parse:g6,structure:b1e},Symbol.toStringTag,{value:"Module"}));function w1e(){return this.tokenIndex>0&&this.lookupType(-1)===Wr?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const _1e="Raw",k1e={value:String};function y6(e,t,n){const r=this.getTokenStart(e);let i;return this.skipUntilBalanced(e,t||this.consumeUntilBalanceEnd),n&&this.tokenStart>r?i=w1e.call(this):i=this.tokenStart,{type:"Raw",loc:this.getLocation(r,i),value:this.substring(r,i)}}function S1e(e){this.tokenize(e.value)}const C1e=Object.freeze(Object.defineProperty({__proto__:null,generate:S1e,name:_1e,parse:y6,structure:k1e},Symbol.toStringTag,{value:"Module"}));function w5(e){return this.Raw(e,this.consumeUntilLeftCurlyBracket,!0)}function E1e(){const e=this.SelectorList();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==qi&&this.error(),e}const T1e="Rule",j1e="rule",A1e={prelude:["SelectorList","Raw"],block:["Block"]};function b6(){const e=this.tokenIndex,t=this.tokenStart;let n,r;return this.parseRulePrelude?n=this.parseWithFallback(E1e,w5):n=w5.call(this,e),r=this.Block(!0),{type:"Rule",loc:this.getLocation(t,this.tokenStart),prelude:n,block:r}}function P1e(e){this.node(e.prelude),this.node(e.block)}const N1e=Object.freeze(Object.defineProperty({__proto__:null,generate:P1e,name:T1e,parse:b6,structure:A1e,walkContext:j1e},Symbol.toStringTag,{value:"Module"})),O1e="Selector",R1e={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]};function v6(){const e=this.readSequence(this.scope.Selector);return this.getFirstListNode(e)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}}function M1e(e){this.children(e)}const L1e=Object.freeze(Object.defineProperty({__proto__:null,generate:M1e,name:O1e,parse:v6,structure:R1e},Symbol.toStringTag,{value:"Module"})),I1e="SelectorList",$1e="selector",D1e={children:[["Selector","Raw"]]};function x6(){const e=this.createList();for(;!this.eof;){if(e.push(this.Selector()),this.tokenType===co){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}}function z1e(e){this.children(e,()=>this.token(co,","))}const F1e=Object.freeze(Object.defineProperty({__proto__:null,generate:z1e,name:I1e,parse:x6,structure:D1e,walkContext:$1e},Symbol.toStringTag,{value:"Module"})),t1=92,w6=34,_6=39;function k6(e){const t=e.length,n=e.charCodeAt(0),r=n===w6||n===_6?1:0,i=r===1&&t>1&&e.charCodeAt(t-1)===n?t-2:t-1;let s="";for(let a=r;a<=i;a++){let o=e.charCodeAt(a);if(o===t1){if(a===i){a!==t-1&&(s=e.substr(a+1));break}if(o=e.charCodeAt(++a),no(t1,o)){const u=a-1,d=Qu(e,u);a=d-1,s+=fM(e.substring(u+1,d))}else o===13&&e.charCodeAt(a+1)===10&&a++}else s+=e[a]}return s}function n1(e,t){const n=t?"'":'"',r=t?_6:w6;let i="",s=!1;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);if(o===0){i+="";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===r||o===t1?(i+="\\"+e.charAt(a),s=!1):(s&&(bl(o)||fc(o))&&(i+=" "),i+=e.charAt(a),s=!1)}return n+i+n}const B1e="String",U1e={value:String};function S6(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:k6(this.consume(Oa))}}function H1e(e){this.token(Oa,n1(e.value))}const W1e=Object.freeze(Object.defineProperty({__proto__:null,generate:H1e,name:B1e,parse:S6,structure:U1e},Symbol.toStringTag,{value:"Module"})),V1e=33;function _5(e){return this.Raw(e,null,!1)}const G1e="StyleSheet",q1e="stylesheet",Y1e={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function C6(){const e=this.tokenStart,t=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case Wr:this.next();continue;case Qi:if(this.charCodeAt(this.tokenStart+2)!==V1e){this.next();continue}n=this.Comment();break;case zf:n=this.CDO();break;case cs:n=this.CDC();break;case ci:n=this.parseWithFallback(this.Atrule,_5);break;default:n=this.parseWithFallback(this.Rule,_5)}t.push(n)}return{type:"StyleSheet",loc:this.getLocation(e,this.tokenStart),children:t}}function X1e(e){this.children(e)}const K1e=Object.freeze(Object.defineProperty({__proto__:null,generate:X1e,name:G1e,parse:C6,structure:Y1e,walkContext:q1e},Symbol.toStringTag,{value:"Module"})),Z1e=42,k5=124;function Ab(){this.tokenType!==Ht&&this.isDelim(Z1e)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const Q1e="TypeSelector",J1e={name:String};function E6(){const e=this.tokenStart;return this.isDelim(k5)?(this.next(),Ab.call(this)):(Ab.call(this),this.isDelim(k5)&&(this.next(),Ab.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.tokenStart),name:this.substrToCursor(e)}}function ewe(e){this.tokenize(e.name)}const twe=Object.freeze(Object.defineProperty({__proto__:null,generate:ewe,name:Q1e,parse:E6,structure:J1e},Symbol.toStringTag,{value:"Module"})),T6=43,j6=45,r1=63;function bh(e,t){let n=0;for(let r=this.tokenStart+e;r<this.tokenEnd;r++){const i=this.charCodeAt(r);if(i===j6&&t&&n!==0)return bh.call(this,e+n+1,!1),-1;bl(i)||this.error(t&&n!==0?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",r),++n>6&&this.error("Too many hex digits",r)}return this.next(),n}function Gp(e){let t=0;for(;this.isDelim(r1);)++t>e&&this.error("Too many question marks"),this.next()}function nwe(e){this.charCodeAt(this.tokenStart)!==e&&this.error((e===T6?"Plus sign":"Hyphen minus")+" is expected")}function rwe(){let e=0;switch(this.tokenType){case fn:if(e=bh.call(this,1,!0),this.isDelim(r1)){Gp.call(this,6-e);break}if(this.tokenType===Rn||this.tokenType===fn){nwe.call(this,j6),bh.call(this,1,!1);break}break;case Rn:e=bh.call(this,1,!0),e>0&&Gp.call(this,6-e);break;default:if(this.eatDelim(T6),this.tokenType===Ht){e=bh.call(this,0,!0),e>0&&Gp.call(this,6-e);break}if(this.isDelim(r1)){this.next(),Gp.call(this,5);break}this.error("Hex digit or question mark is expected")}}const iwe="UnicodeRange",swe={value:String};function A6(){const e=this.tokenStart;return this.eatIdent("u"),rwe.call(this),{type:"UnicodeRange",loc:this.getLocation(e,this.tokenStart),value:this.substrToCursor(e)}}function awe(e){this.tokenize(e.value)}const owe=Object.freeze(Object.defineProperty({__proto__:null,generate:awe,name:iwe,parse:A6,structure:swe},Symbol.toStringTag,{value:"Module"})),lwe=32,i1=92,cwe=34,uwe=39,dwe=40,P6=41;function hwe(e){const t=e.length;let n=4,r=e.charCodeAt(t-1)===P6?t-2:t-1,i="";for(;n<r&&fc(e.charCodeAt(n));)n++;for(;n<r&&fc(e.charCodeAt(r));)r--;for(let s=n;s<=r;s++){let a=e.charCodeAt(s);if(a===i1){if(s===r){s!==t-1&&(i=e.substr(s+1));break}if(a=e.charCodeAt(++s),no(i1,a)){const o=s-1,u=Qu(e,o);s=u-1,i+=fM(e.substring(o+1,u))}else a===13&&e.charCodeAt(s+1)===10&&s++}else i+=e[s]}return i}function N6(e){let t="",n=!1;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===0){t+="";continue}if(i<=31||i===127){t+="\\"+i.toString(16),n=!0;continue}i===lwe||i===i1||i===cwe||i===uwe||i===dwe||i===P6?(t+="\\"+e.charAt(r),n=!1):(n&&bl(i)&&(t+=" "),t+=e.charAt(r),n=!1)}return"url("+t+")"}const fwe="Url",pwe={value:String};function O6(){const e=this.tokenStart;let t;switch(this.tokenType){case Ci:t=hwe(this.consume(Ci));break;case $n:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat($n),this.skipSC(),t=k6(this.consume(Oa)),this.skipSC(),this.eof||this.eat(ar);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(e,this.tokenStart),value:t}}function mwe(e){this.token(Ci,N6(e.value))}const gwe=Object.freeze(Object.defineProperty({__proto__:null,generate:mwe,name:fwe,parse:O6,structure:pwe},Symbol.toStringTag,{value:"Module"})),ywe="Value",bwe={children:[[]]};function R6(){const e=this.tokenStart,t=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(e,this.tokenStart),children:t}}function vwe(e){this.children(e)}const xwe=Object.freeze(Object.defineProperty({__proto__:null,generate:vwe,name:ywe,parse:R6,structure:bwe},Symbol.toStringTag,{value:"Module"})),wwe=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),_we="WhiteSpace",kwe={value:String};function M6(){return this.eat(Wr),wwe}function Swe(e){this.token(Wr,e.value)}const Cwe=Object.freeze(Object.defineProperty({__proto__:null,generate:Swe,name:_we,parse:M6,structure:kwe},Symbol.toStringTag,{value:"Module"})),L6=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:Lbe,Atrule:Bbe,AtrulePrelude:Gbe,AttributeSelector:tve,Block:lve,Brackets:hve,CDC:gve,CDO:xve,ClassSelector:Cve,Combinator:Ove,Comment:Dve,Declaration:Jve,DeclarationList:ixe,Dimension:lxe,Function:fxe,Hash:bxe,IdSelector:Exe,Identifier:_xe,MediaFeature:Pxe,MediaQuery:Mxe,MediaQueryList:Dxe,Nth:Uxe,Number:Gxe,Operator:Kxe,Parentheses:e1e,Percentage:i1e,PseudoClassSelector:c1e,PseudoElementSelector:p1e,Ratio:x1e,Raw:C1e,Rule:N1e,Selector:L1e,SelectorList:F1e,String:W1e,StyleSheet:K1e,TypeSelector:twe,UnicodeRange:owe,Url:gwe,Value:xwe,WhiteSpace:Cwe},Symbol.toStringTag,{value:"Module"})),Ewe={generic:!0,...Pbe,node:L6},Twe=35,jwe=42,S5=43,Awe=45,Pwe=47,Nwe=117;function I6(e){switch(this.tokenType){case br:return this.Hash();case co:return this.Operator();case mi:return this.Parentheses(this.readSequence,e.recognizer);case $s:return this.Brackets(this.readSequence,e.recognizer);case Oa:return this.String();case Rn:return this.Dimension();case Lr:return this.Percentage();case fn:return this.Number();case $n:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,e.recognizer);case Ci:return this.Url();case Ht:return this.cmpChar(this.tokenStart,Nwe)&&this.cmpChar(this.tokenStart+1,S5)?this.UnicodeRange():this.Identifier();case Hn:{const t=this.charCodeAt(this.tokenStart);if(t===Pwe||t===jwe||t===S5||t===Awe)return this.Operator();t===Twe&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const Owe={getNode:I6},Rwe=35,Mwe=42,Lwe=43,Iwe=47,C5=46,$we=62,Dwe=124,zwe=126;function Fwe(e,t){t.last!==null&&t.last.type!=="Combinator"&&e!==null&&e.type!=="Combinator"&&t.push({type:"Combinator",loc:null,name:" "})}function Bwe(){switch(this.tokenType){case $s:return this.AttributeSelector();case br:return this.IdSelector();case Gi:return this.lookupType(1)===Gi?this.PseudoElementSelector():this.PseudoClassSelector();case Ht:return this.TypeSelector();case fn:case Lr:return this.Percentage();case Rn:this.charCodeAt(this.tokenStart)===C5&&this.error("Identifier is expected",this.tokenStart+1);break;case Hn:{switch(this.charCodeAt(this.tokenStart)){case Lwe:case $we:case zwe:case Iwe:return this.Combinator();case C5:return this.ClassSelector();case Mwe:case Dwe:return this.TypeSelector();case Rwe:return this.IdSelector()}break}}}const Uwe={onWhiteSpace:Fwe,getNode:Bwe};function Hwe(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function Wwe(){const e=this.createList();if(this.skipSC(),e.push(this.Identifier()),this.skipSC(),this.tokenType===co){e.push(this.Operator());const t=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if(n.type==="Value"&&n.children.isEmpty){for(let r=t-this.tokenIndex;r<=0;r++)if(this.lookupType(r)===Wr){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}e.push(n)}return e}function E5(e){return e!==null&&e.type==="Operator"&&(e.value[e.value.length-1]==="-"||e.value[e.value.length-1]==="+")}const Vwe={getNode:I6,onWhiteSpace(e,t){E5(e)&&(e.value=" "+e.value),E5(t.last)&&(t.last.value+=" ")},expression:Hwe,var:Wwe},Gwe=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:Owe,Selector:Uwe,Value:Vwe},Symbol.toStringTag,{value:"Module"})),qwe={parse:{prelude:null,block(){return this.Block(!0)}}},Ywe={parse:{prelude(){const e=this.createList();switch(this.skipSC(),this.tokenType){case Oa:e.push(this.String());break;case Ci:case $n:e.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===Ht||this.lookupNonWSType(0)===mi)&&e.push(this.MediaQueryList()),e},block:null}},Xwe={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(){return this.Block(!1)}}},Kwe={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};function Zwe(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function Qwe(){return this.skipSC(),this.tokenType===Ht&&this.lookupNonWSType(1)===Gi?this.createSingleNodeList(this.Declaration()):$6.call(this)}function $6(){const e=this.createList();let t;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Qi:case Wr:this.next();continue;case $n:t=this.Function(Zwe,this.scope.AtrulePrelude);break;case Ht:t=this.Identifier();break;case mi:t=this.Parentheses(Qwe,this.scope.AtrulePrelude);break;default:break e}e.push(t)}return e}const Jwe={parse:{prelude(){const e=$6.call(this);return this.getFirstListNode(e)===null&&this.error("Condition is expected"),e},block(){return this.Block(!1)}}},e_e={"font-face":qwe,import:Ywe,media:Xwe,page:Kwe,supports:Jwe},Ll={parse(){return this.createSingleNodeList(this.SelectorList())}},t_e={parse(){return this.createSingleNodeList(this.Selector())}},T5={parse(){return this.createSingleNodeList(this.Identifier())}},qp={parse(){return this.createSingleNodeList(this.Nth())}},n_e={dir:T5,has:Ll,lang:T5,matches:Ll,is:Ll,"-moz-any":Ll,"-webkit-any":Ll,where:Ll,not:Ll,"nth-child":qp,"nth-last-child":qp,"nth-last-of-type":qp,"nth-of-type":qp,slotted:t_e},r_e=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:zM,Atrule:FM,AtrulePrelude:BM,AttributeSelector:HM,Block:VM,Brackets:GM,CDC:qM,CDO:YM,ClassSelector:XM,Combinator:KM,Comment:ZM,Declaration:JM,DeclarationList:e6,Dimension:t6,Function:n6,Hash:r6,IdSelector:s6,Identifier:i6,MediaFeature:a6,MediaQuery:o6,MediaQueryList:l6,Nth:c6,Number:u6,Operator:d6,Parentheses:h6,Percentage:f6,PseudoClassSelector:p6,PseudoElementSelector:m6,Ratio:g6,Raw:y6,Rule:b6,Selector:v6,SelectorList:x6,String:S6,StyleSheet:C6,TypeSelector:E6,UnicodeRange:A6,Url:O6,Value:R6,WhiteSpace:M6},Symbol.toStringTag,{value:"Module"})),i_e={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(e){return this.AtrulePrelude(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:Gwe,atrule:e_e,pseudo:n_e,node:r_e},s_e={node:L6},a_e=Abe({...Ewe,...i_e,...s_e});function s1(e){const t={};for(const n in e){let r=e[n];r&&(Array.isArray(r)||r instanceof Un?r=r.map(s1):r.constructor===Object&&(r=s1(r))),t[n]=r}return t}const{tokenize:Tje,parse:o_e,generate:ro,lexer:D6,createLexer:jje,walk:gs,find:Aje,findLast:Pje,findAll:Nje,toPlainObject:Oje,fromPlainObject:Rje,fork:l_e}=a_e,{hasOwnProperty:c_e}=Object.prototype;function Pb(e,t){const n=Object.create(null);if(!Array.isArray(e))return null;for(let r of e)t&&(r=r.toLowerCase()),n[r]=!0;return n}function j5(e){if(!e)return null;const t=Pb(e.tags,!0),n=Pb(e.ids),r=Pb(e.classes);return t===null&&n===null&&r===null?null:{tags:t,ids:n,classes:r}}function u_e(e){let t=!1;if(e.scopes&&Array.isArray(e.scopes)){t=Object.create(null);for(let n=0;n<e.scopes.length;n++){const r=e.scopes[n];if(!r||!Array.isArray(r))throw new Error("Wrong usage format");for(const i of r){if(c_e.call(t,i))throw new Error(`Class can't be used for several scopes: ${i}`);t[i]=n+1}}}return{whitelist:j5(e),blacklist:j5(e.blacklist),scopes:t}}function Jl(e){return!e||!e.children||e.children.isEmpty}function A5(e,t){return e!==null&&e.children===t}function d_e(e,t,n){if(e.block&&(this.stylesheet!==null&&(this.stylesheet.firstAtrulesAllowed=!1),Jl(e.block))){n.remove(t);return}switch(e.name){case"charset":if(Jl(e.prelude)){n.remove(t);return}if(t.prev){n.remove(t);return}break;case"import":if(this.stylesheet===null||!this.stylesheet.firstAtrulesAllowed){n.remove(t);return}n.prevUntil(t.prev,function(r){if(!(r.type==="Atrule"&&(r.name==="import"||r.name==="charset")))return this.root.firstAtrulesAllowed=!1,n.remove(t),!0},this);break;default:{const r=Ta(e.name).basename;(r==="keyframes"||r==="media"||r==="supports")&&(Jl(e.prelude)||Jl(e.block))&&n.remove(t)}}}function h_e(e,t,n){n.remove(t)}function f_e(e,t,n){if(e.value.children&&e.value.children.isEmpty){n.remove(t);return}Ju(e.property).custom&&/\S/.test(e.value.value)&&(e.value.value=e.value.value.trim())}function p_e(e,t,n){(A5(this.stylesheet,n)||A5(this.block,n))&&n.remove(t)}const{hasOwnProperty:Fc}=Object.prototype,m_e=new Set(["keyframes"]);function z6(e,t){return e.children.forEach((n,r,i)=>{let s=!1;gs(n,function(a){if(this.selector===null||this.selector===e)switch(a.type){case"SelectorList":(this.function===null||this.function.name.toLowerCase()!=="not")&&z6(a,t)&&(s=!0);break;case"ClassSelector":t.whitelist!==null&&t.whitelist.classes!==null&&!Fc.call(t.whitelist.classes,a.name)&&(s=!0),t.blacklist!==null&&t.blacklist.classes!==null&&Fc.call(t.blacklist.classes,a.name)&&(s=!0);break;case"IdSelector":t.whitelist!==null&&t.whitelist.ids!==null&&!Fc.call(t.whitelist.ids,a.name)&&(s=!0),t.blacklist!==null&&t.blacklist.ids!==null&&Fc.call(t.blacklist.ids,a.name)&&(s=!0);break;case"TypeSelector":a.name.charAt(a.name.length-1)!=="*"&&(t.whitelist!==null&&t.whitelist.tags!==null&&!Fc.call(t.whitelist.tags,a.name.toLowerCase())&&(s=!0),t.blacklist!==null&&t.blacklist.tags!==null&&Fc.call(t.blacklist.tags,a.name.toLowerCase())&&(s=!0));break}}),s&&i.remove(r)}),e.children.isEmpty}function g_e(e,t,n,r){if(Jl(e.prelude)||Jl(e.block)){n.remove(t);return}if(this.atrule&&m_e.has(Ta(this.atrule.name).basename))return;const{usage:i}=r;if(i&&(i.whitelist!==null||i.blacklist!==null)&&(z6(e.prelude,i),Jl(e.prelude))){n.remove(t);return}}function y_e(e,t,n){if(t.data.name!=="*")return;const i=t.next&&t.next.data.type;(i==="IdSelector"||i==="ClassSelector"||i==="AttributeSelector"||i==="PseudoClassSelector"||i==="PseudoElementSelector")&&n.remove(t)}function b_e(e,t,n){n.remove(t)}const P5={Atrule:d_e,Comment:h_e,Declaration:f_e,Raw:p_e,Rule:g_e,TypeSelector:y_e,WhiteSpace:b_e};function v_e(e,t){gs(e,{leave(n,r,i){P5.hasOwnProperty(n.type)&&P5[n.type].call(this,n,r,i,t)}})}function x_e(e){e.block.children.forEach(t=>{t.prelude.children.forEach(n=>{n.children.forEach((r,i)=>{r.type==="Percentage"&&r.value==="100"?i.data={type:"TypeSelector",loc:r.loc,name:"to"}:r.type==="TypeSelector"&&r.name==="from"&&(i.data={type:"Percentage",loc:r.loc,value:"0"})})})})}function w_e(e){Ta(e.name).basename==="keyframes"&&x_e(e)}const __e=/^(-?\d|--)|[\u0000-\u002c\u002e\u002f\u003A-\u0040\u005B-\u005E\u0060\u007B-\u009f]/;function k_e(e){return e===""||e==="-"?!1:!__e.test(e)}function S_e(e){const t=e.value;!t||t.type!=="String"||k_e(t.value)&&(e.value={type:"Identifier",loc:t.loc,name:t.value})}function C_e(e){const t=e.children;t.forEachRight(function(n,r){if(n.type==="Identifier"){if(n.name==="bold")r.data={type:"Number",loc:n.loc,value:"700"};else if(n.name==="normal"){const i=r.prev;i&&i.data.type==="Operator"&&i.data.value==="/"&&this.remove(i),this.remove(r)}}}),t.isEmpty&&t.insert(t.createItem({type:"Identifier",name:"normal"}))}function E_e(e){const t=e.children.head.data;if(t.type==="Identifier")switch(t.name){case"normal":e.children.head.data={type:"Number",loc:t.loc,value:"400"};break;case"bold":e.children.head.data={type:"Number",loc:t.loc,value:"700"};break}}function T_e(e){function t(){r.length||r.unshift({type:"Number",loc:null,value:"0"},{type:"Number",loc:null,value:"0"}),n.push.apply(n,r),r=[]}let n=[],r=[];e.children.forEach(i=>{if(i.type==="Operator"&&i.value===","){t(),n.push(i);return}i.type==="Identifier"&&(i.name==="transparent"||i.name==="none"||i.name==="repeat"||i.name==="scroll")||r.push(i)}),t(),e.children=new Un().fromArray(n)}function N5(e){e.children.forEach((t,n,r)=>{t.type==="Identifier"&&t.name.toLowerCase()==="none"&&(r.head===r.tail?n.data={type:"Number",loc:t.loc,value:"0"}:r.remove(n))})}const O5={font:C_e,"font-weight":E_e,background:T_e,border:N5,outline:N5};function j_e(e){if(!this.declaration)return;const t=Ju(this.declaration.property);O5.hasOwnProperty(t.basename)&&O5[t.basename](e)}const A_e=/^(?:\+|(-))?0*(\d*)(?:\.0*|(\.\d*?)0*)?$/;function R0(e,t){const n=A_e;return e=String(e).replace(n,"$1$2$3"),(e===""||e==="-")&&(e="0"),e}function P_e(e){e.value=R0(e.value)}const N_e=new Set(["calc","min","max","clamp"]),O_e=new Set(["px","mm","cm","in","pt","pc","em","ex","ch","rem","vh","vw","vmin","vmax","vm"]);function R_e(e,t){const n=R0(e.value);if(e.value=n,n==="0"&&this.declaration!==null&&this.atrulePrelude===null){const r=e.unit.toLowerCase();if(!O_e.has(r)||this.declaration.property==="-ms-flex"||this.declaration.property==="flex"||this.function&&N_e.has(this.function.name))return;t.data={type:"Number",loc:e.loc,value:n}}}const M_e=new Set(["width","min-width","max-width","height","min-height","max-height","flex","-ms-flex"]);function L_e(e,t){e.value=R0(e.value),e.value==="0"&&this.declaration&&!M_e.has(this.declaration.property)&&(t.data={type:"Number",loc:e.loc,value:e.value},D6.matchDeclaration(this.declaration).isType(t.data,"length")||(t.data=e))}function I_e(e){e.value=e.value.replace(/\\/g,"/")}const R5={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M5={8e5:"maroon",800080:"purple",808e3:"olive",808080:"gray","00ffff":"cyan",f0ffff:"azure",f5f5dc:"beige",ffe4c4:"bisque","000000":"black","0000ff":"blue",a52a2a:"brown",ff7f50:"coral",ffd700:"gold","008000":"green","4b0082":"indigo",fffff0:"ivory",f0e68c:"khaki","00ff00":"lime",faf0e6:"linen","000080":"navy",ffa500:"orange",da70d6:"orchid",cd853f:"peru",ffc0cb:"pink",dda0dd:"plum",f00:"red",ff0000:"red",fa8072:"salmon",a0522d:"sienna",c0c0c0:"silver",fffafa:"snow",d2b48c:"tan","008080":"teal",ff6347:"tomato",ee82ee:"violet",f5deb3:"wheat",ffffff:"white",ffff00:"yellow"};function Nb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function L5(e,t,n,r){let i,s,a;if(t===0)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,u=2*n-o;i=Nb(u,o,e+1/3),s=Nb(u,o,e),a=Nb(u,o,e-1/3)}return[Math.round(i*255),Math.round(s*255),Math.round(a*255),r]}function Ob(e){return e=e.toString(16),e.length===1?"0"+e:e}function Rb(e,t,n){let r=e.head,i=[],s=!1;for(;r!==null;){const{type:a,value:o}=r.data;switch(a){case"Number":case"Percentage":if(s)return;s=!0,i.push({type:a,value:Number(o)});break;case"Operator":if(o===","){if(!s)return;s=!1}else if(s||o!=="+")return;break;default:return}r=r.next}if(i.length===t){if(i.length===4){if(i[3].type!=="Number")return;i[3].type="Alpha"}if(n){if(i[0].type!==i[1].type||i[0].type!==i[2].type)return}else{if(i[0].type!=="Number"||i[1].type!=="Percentage"||i[2].type!=="Percentage")return;i[0].type="Angle"}return i.map(function(a){let o=Math.max(0,a.value);switch(a.type){case"Number":o=Math.min(o,255);break;case"Percentage":if(o=Math.min(o,100)/100,!n)return o;o=255*o;break;case"Angle":return(o%360+360)%360/360;case"Alpha":return Math.min(o,1)}return Math.round(o)})}}function $_e(e,t){let n=e.name,r;if(n==="rgba"||n==="hsla"){if(r=Rb(e.children,4,n==="rgba"),!r)return;if(n==="hsla"&&(r=L5(...r),e.name="rgba"),r[3]===0){const i=this.function&&this.function.name;if(r[0]===0&&r[1]===0&&r[2]===0||!/^(?:to|from|color-stop)$|gradient$/i.test(i)){t.data={type:"Identifier",loc:e.loc,name:"transparent"};return}}if(r[3]!==1){e.children.forEach((i,s,a)=>{if(i.type==="Operator"){i.value!==","&&a.remove(s);return}s.data={type:"Number",loc:i.loc,value:R0(r.shift())}});return}n="rgb"}if(n==="hsl"){if(r=r||Rb(e.children,3,!1),!r)return;r=L5(...r),n="rgb"}if(n==="rgb"){if(r=r||Rb(e.children,3,!0),!r)return;t.data={type:"Hash",loc:e.loc,value:Ob(r[0])+Ob(r[1])+Ob(r[2])},F6(t.data,t)}}function D_e(e,t){if(this.declaration===null)return;let n=e.name.toLowerCase();if(R5.hasOwnProperty(n)&&D6.matchDeclaration(this.declaration).isType(e,"color")){const r=R5[n];r.length+1<=n.length?t.data={type:"Hash",loc:e.loc,value:r}:(n==="grey"&&(n="gray"),e.name=n)}}function F6(e,t){let n=e.value.toLowerCase();n.length===6&&n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&(n=n[0]+n[2]+n[4]),M5[n]?t.data={type:"Identifier",loc:e.loc,name:M5[n]}:e.value=n}const I5={Atrule:w_e,AttributeSelector:S_e,Value:j_e,Dimension:R_e,Percentage:L_e,Number:P_e,Url:I_e,Hash:F6,Identifier:D_e,Function:$_e};function z_e(e){gs(e,{leave(t,n,r){I5.hasOwnProperty(t.type)&&I5[t.type].call(this,t,n,r)}})}class F_e{constructor(){this.map=new Map}resolve(t){let n=this.map.get(t);return n===void 0&&(n=this.map.size+1,this.map.set(t,n)),n}}function B_e(){const e=new F_e;return function(n){const r=ro(n);return n.id=e.resolve(r),n.length=r.length,n.fingerprint=null,n}}function U_e(e){return e.type==="Raw"?o_e(e.value,{context:"selectorList"}):e}function H_e(e,t){for(let n=0;n<3;n++)if(e[n]!==t[n])return e[n]>t[n]?e:t;return e}function $5(e){return U_e(e).children.reduce((t,n)=>H_e(nd(n),t),[0,0,0])}function nd(e){let t=0,n=0,r=0;return e.children.forEach(i=>{switch(i.type){case"IdSelector":t++;break;case"ClassSelector":case"AttributeSelector":n++;break;case"PseudoClassSelector":switch(i.name.toLowerCase()){case"not":case"has":case"is":case"matches":case"-webkit-any":case"-moz-any":{const[s,a,o]=$5(i.children.first);t+=s,n+=a,r+=o;break}case"nth-child":case"nth-last-child":{const s=i.children.first;if(s.type==="Nth"&&s.selector){const[a,o,u]=$5(s.selector);t+=a,n+=o+1,r+=u}else n++;break}case"where":break;case"before":case"after":case"first-line":case"first-letter":r++;break;default:n++}break;case"TypeSelector":i.name.endsWith("*")||r++;break;case"PseudoElementSelector":r++;break}}),[t,n,r]}const W_e=new Set(["first-letter","first-line","after","before"]),V_e=new Set(["link","visited","hover","active","first-letter","first-line","after","before"]);function G_e(e,t){const n=new Set;e.prelude.children.forEach(function(r){let i="*",s=0;r.children.forEach(function(a){switch(a.type){case"ClassSelector":if(t&&t.scopes){const o=t.scopes[a.name]||0;if(s!==0&&o!==s)throw new Error("Selector can't has classes from different scopes: "+ro(r));s=o}break;case"PseudoClassSelector":{const o=a.name.toLowerCase();V_e.has(o)||n.add(`:${o}`);break}case"PseudoElementSelector":{const o=a.name.toLowerCase();W_e.has(o)||n.add(`::${o}`);break}case"TypeSelector":i=a.name.toLowerCase();break;case"AttributeSelector":a.flags&&n.add(`[${a.flags.toLowerCase()}]`);break;case"Combinator":i="*";break}}),r.compareMarker=nd(r).toString(),r.id=null,r.id=ro(r),s&&(r.compareMarker+=":"+s),i!=="*"&&(r.compareMarker+=","+i)}),e.pseudoSignature=n.size>0?[...n].sort().join(","):!1}function q_e(e,t){const n=B_e();return gs(e,{visit:"Rule",enter(r){r.block.children.forEach(n),G_e(r,t.usage)}}),gs(e,{visit:"Atrule",enter(r){r.prelude&&(r.prelude.id=null,r.prelude.id=ro(r.prelude)),Ta(r.name).basename==="keyframes"&&(r.block.avoidRulesMerge=!0,r.block.children.forEach(function(i){i.prelude.children.forEach(function(s){s.compareMarker=s.id})}))}}),{declaration:n}}const{hasOwnProperty:D5}=Object.prototype;function z5(e,t,n,r){const i=t.data,s=Ta(i.name).basename,a=i.name.toLowerCase()+"/"+(i.prelude?i.prelude.id:null);D5.call(e,s)||(e[s]=Object.create(null)),r&&delete e[s][a],D5.call(e[s],a)||(e[s][a]=new Un),e[s][a].append(n.remove(t))}function Y_e(e,t){const n=Object.create(null);let r=null;e.children.forEach(function(i,s,a){if(i.type==="Atrule"){const o=Ta(i.name).basename;switch(o){case"keyframes":z5(n,s,a,!0);return;case"media":if(t.forceMediaMerge){z5(n,s,a,!1);return}break}r===null&&o!=="charset"&&o!=="import"&&(r=s)}else r===null&&(r=s)});for(const i in n)for(const s in n[i])e.children.insertList(n[i][s],i==="media"?null:r)}function F5(e){return e.type==="Atrule"&&e.name==="media"}function X_e(e,t,n){if(!F5(e))return;const r=t.prev&&t.prev.data;!r||!F5(r)||e.prelude&&r.prelude&&e.prelude.id===r.prelude.id&&(r.block.children.appendList(e.block.children),n.remove(t))}function K_e(e,t){Y_e(e,t),gs(e,{visit:"Atrule",reverse:!0,enter:X_e})}const{hasOwnProperty:Z_e}=Object.prototype;function B6(e,t){let n=e.head,r=t.head;for(;n!==null&&r!==null&&n.data.id===r.data.id;)n=n.next,r=r.next;return n===null&&r===null}function U6(e,t){let n=e.head,r=t.head;for(;n!==null&&r!==null&&n.data.id===r.data.id;)n=n.next,r=r.next;return n===null&&r===null}function Q_e(e,t){const n={eq:[],ne1:[],ne2:[],ne2overrided:[]},r=Object.create(null),i=Object.create(null);for(let s=t.head;s;s=s.next)i[s.data.id]=!0;for(let s=e.head;s;s=s.next){const a=s.data;a.fingerprint&&(r[a.fingerprint]=a.important),i[a.id]?(i[a.id]=!1,n.eq.push(a)):n.ne1.push(a)}for(let s=t.head;s;s=s.next){const a=s.data;i[a.id]&&((!Z_e.call(r,a.fingerprint)||!r[a.fingerprint]&&a.important)&&n.ne2.push(a),n.ne2overrided.push(a))}return n}function vh(e,t){return t.forEach(n=>{const r=n.id;let i=e.head;for(;i;){const s=i.data.id;if(s===r)return;if(s>r)break;i=i.next}e.insert(e.createItem(n),i)}),e}function H6(e,t){let n=e.head;for(;n!==null;){let r=t.head;for(;r!==null;){if(n.data.compareMarker===r.data.compareMarker)return!0;r=r.next}n=n.next}return!1}function M0(e){switch(e.type){case"Rule":return H6(e.prelude.children,this);case"Atrule":if(e.block)return e.block.children.some(M0,this);break;case"Declaration":return!1}return!0}function J_e(e,t,n){const r=e.prelude.children,i=e.block.children;n.prevUntil(t.prev,function(s){if(s.type!=="Rule")return M0.call(r,s);const a=s.prelude.children,o=s.block.children;if(e.pseudoSignature===s.pseudoSignature){if(B6(a,r))return o.appendList(i),n.remove(t),!0;if(U6(i,o))return vh(a,r),n.remove(t),!0}return H6(r,a)})}function e2e(e){gs(e,{visit:"Rule",enter:J_e})}function t2e(e,t,n){const r=e.prelude.children;for(;r.head!==r.tail;){const i=new Un;i.insert(r.remove(r.head)),n.insert(n.createItem({type:"Rule",loc:e.loc,prelude:{type:"SelectorList",loc:e.prelude.loc,children:i},block:{type:"Block",loc:e.block.loc,children:e.block.children.copy()},pseudoSignature:e.pseudoSignature}),t)}}function n2e(e){gs(e,{visit:"Rule",reverse:!0,enter:t2e})}const W6=1,r2e=2,Bc=0,Yd=1,Mb=2,Yp=3,B5=["top","right","bottom","left"],i2e={"margin-top":"top","margin-right":"right","margin-bottom":"bottom","margin-left":"left","padding-top":"top","padding-right":"right","padding-bottom":"bottom","padding-left":"left","border-top-color":"top","border-right-color":"right","border-bottom-color":"bottom","border-left-color":"left","border-top-width":"top","border-right-width":"right","border-bottom-width":"bottom","border-left-width":"left","border-top-style":"top","border-right-style":"right","border-bottom-style":"bottom","border-left-style":"left"},U5={margin:"margin","margin-top":"margin","margin-right":"margin","margin-bottom":"margin","margin-left":"margin",padding:"padding","padding-top":"padding","padding-right":"padding","padding-bottom":"padding","padding-left":"padding","border-color":"border-color","border-top-color":"border-color","border-right-color":"border-color","border-bottom-color":"border-color","border-left-color":"border-color","border-width":"border-width","border-top-width":"border-width","border-right-width":"border-width","border-bottom-width":"border-width","border-left-width":"border-width","border-style":"border-style","border-top-style":"border-style","border-right-style":"border-style","border-bottom-style":"border-style","border-left-style":"border-style"};class s2e{constructor(t){this.name=t,this.loc=null,this.iehack=void 0,this.sides={top:null,right:null,bottom:null,left:null}}getValueSequence(t,n){const r=[];let i="";return t.value.type!=="Value"||t.value.children.some(function(a){let o=!1;switch(a.type){case"Identifier":switch(a.name){case"\\0":case"\\9":i=a.name;return;case"inherit":case"initial":case"unset":case"revert":o=a.name;break}break;case"Dimension":switch(a.unit){case"rem":case"vw":case"vh":case"vmin":case"vmax":case"vm":o=a.unit;break}break;case"Hash":case"Number":case"Percentage":break;case"Function":if(a.name==="var")return!0;o=a.name;break;default:return!0}r.push({node:a,special:o,important:t.important})})||r.length>n||typeof this.iehack=="string"&&this.iehack!==i?!1:(this.iehack=i,r)}canOverride(t,n){const r=this.sides[t];return!r||n.important&&!r.important}add(t,n){function r(){const i=this.sides,s=i2e[t];if(s){if(!(s in i))return!1;const a=this.getValueSequence(n,1);if(!a||!a.length)return!1;for(const o in i)if(i[o]!==null&&i[o].special!==a[0].special)return!1;return this.canOverride(s,a[0])&&(i[s]=a[0]),!0}else if(t===this.name){const a=this.getValueSequence(n,4);if(!a||!a.length)return!1;switch(a.length){case 1:a[Yd]=a[Bc],a[Mb]=a[Bc],a[Yp]=a[Bc];break;case 2:a[Mb]=a[Bc],a[Yp]=a[Yd];break;case 3:a[Yp]=a[Yd];break}for(let o=0;o<4;o++)for(const u in i)if(i[u]!==null&&i[u].special!==a[o].special)return!1;for(let o=0;o<4;o++)this.canOverride(B5[o],a[o])&&(i[B5[o]]=a[o]);return!0}}return r.call(this)?(this.loc||(this.loc=n.loc),!0):!1}isOkToMinimize(){const t=this.sides.top,n=this.sides.right,r=this.sides.bottom,i=this.sides.left;if(t&&n&&r&&i){const s=t.important+n.important+r.important+i.important;return s===0||s===4}return!1}getValue(){const t=new Un,n=this.sides,r=[n.top,n.right,n.bottom,n.left],i=[ro(n.top.node),ro(n.right.node),ro(n.bottom.node),ro(n.left.node)];i[Yp]===i[Yd]&&(r.pop(),i[Mb]===i[Bc]&&(r.pop(),i[Yd]===i[Bc]&&r.pop()));for(let s=0;s<r.length;s++)t.appendData(r[s].node);return this.iehack&&t.appendData({type:"Identifier",loc:null,name:this.iehack}),{type:"Value",loc:null,children:t}}getDeclaration(){return{type:"Declaration",loc:this.loc,important:this.sides.top.important,property:this.name,value:this.getValue()}}}function a2e(e,t,n,r){const i=e.block.children,s=e.prelude.children.first.id;return e.block.children.forEachRight(function(a,o){const u=a.property;if(!U5.hasOwnProperty(u))return;const d=U5[u];let h,p;if((!r||s===r)&&d in t&&(p=r2e,h=t[d]),(!h||!h.add(u,a))&&(p=W6,h=new s2e(d),!h.add(u,a))){r=null;return}t[d]=h,n.push({operation:p,block:i,item:o,shorthand:h}),r=s}),r}function o2e(e,t){e.forEach(function(n){const r=n.shorthand;r.isOkToMinimize()&&(n.operation===W6?n.item.data=t(r.getDeclaration()):n.block.remove(n.item))})}function l2e(e,t){const n={},r=[];gs(e,{visit:"Rule",reverse:!0,enter(i){const s=this.block||this.stylesheet,a=(i.pseudoSignature||"")+"|"+i.prelude.children.first.id;let o,u;n.hasOwnProperty(s.id)?o=n[s.id]:(o={lastShortSelector:null},n[s.id]=o),o.hasOwnProperty(a)?u=o[a]:(u={},o[a]=u),o.lastShortSelector=a2e.call(this,i,u,r,o.lastShortSelector)}}),o2e(r,t.declaration)}let c2e=1;const u2e=new Set(["src"]),H5={display:/table|ruby|flex|-(flex)?box$|grid|contents|run-in/i,"text-align":/^(start|end|match-parent|justify-all)$/i},W5={cursor:["auto","crosshair","default","move","text","wait","help","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","pointer","progress","not-allowed","no-drop","vertical-text","all-scroll","col-resize","row-resize"],overflow:["hidden","visible","scroll","auto"],position:["static","relative","absolute","fixed"]},V5={"border-width":["border"],"border-style":["border"],"border-color":["border"],"border-top":["border"],"border-right":["border"],"border-bottom":["border"],"border-left":["border"],"border-top-width":["border-top","border-width","border"],"border-right-width":["border-right","border-width","border"],"border-bottom-width":["border-bottom","border-width","border"],"border-left-width":["border-left","border-width","border"],"border-top-style":["border-top","border-style","border"],"border-right-style":["border-right","border-style","border"],"border-bottom-style":["border-bottom","border-style","border"],"border-left-style":["border-left","border-style","border"],"border-top-color":["border-top","border-color","border"],"border-right-color":["border-right","border-color","border"],"border-bottom-color":["border-bottom","border-color","border"],"border-left-color":["border-left","border-color","border"],"margin-top":["margin"],"margin-right":["margin"],"margin-bottom":["margin"],"margin-left":["margin"],"padding-top":["padding"],"padding-right":["padding"],"padding-bottom":["padding"],"padding-left":["padding"],"font-style":["font"],"font-variant":["font"],"font-weight":["font"],"font-size":["font"],"font-family":["font"],"list-style-type":["list-style"],"list-style-position":["list-style"],"list-style-image":["list-style"]};function V6(e,t,n){const r=Ju(e).basename;if(r==="background")return e+":"+ro(t.value);const i=t.id;let s=n[i];if(!s){switch(t.value.type){case"Value":const a={};let o="",u="",d=!1;t.value.children.forEach(function h(p){switch(p.type){case"Value":case"Brackets":case"Parentheses":p.children.forEach(h);break;case"Raw":d=!0;break;case"Identifier":{const{name:m}=p;o||(o=Ta(m).vendor),/\\[09]/.test(m)&&(u=RegExp.lastMatch),W5.hasOwnProperty(r)?W5[r].indexOf(m)===-1&&(a[m]=!0):H5.hasOwnProperty(r)&&H5[r].test(m)&&(a[m]=!0);break}case"Function":{let{name:m}=p;o||(o=Ta(m).vendor),m==="rect"&&(p.children.some(v=>v.type==="Operator"&&v.value===",")||(m="rect-backward")),a[m+"()"]=!0,p.children.forEach(h);break}case"Dimension":{const{unit:m}=p;switch(/\\[09]/.test(m)&&(u=RegExp.lastMatch),m){case"rem":case"vw":case"vh":case"vmin":case"vmax":case"vm":a[m]=!0;break}break}}}),s=d?"!"+c2e++:"!"+Object.keys(a).sort()+"|"+u+o;break;case"Raw":s="!"+t.value.value;break;default:s=ro(t.value)}n[i]=s}return e+s}function d2e(e,t,n){const r=Ju(t.property);if(V5.hasOwnProperty(r.basename)){const i=V5[r.basename];for(const s of i){const a=V6(r.prefix+s,t,n),o=e.hasOwnProperty(a)?e[a]:null;if(o&&(!t.important||o.item.data.important))return o}}}function h2e(e,t,n,r,i){const s=e.block.children;s.forEachRight(function(a,o){const{property:u}=a,d=V6(u,a,i),h=r[d];h&&!u2e.has(u)?a.important&&!h.item.data.important?(r[d]={block:s,item:o},h.block.remove(h.item)):s.remove(o):d2e(r,a,i)?s.remove(o):(a.fingerprint=d,r[d]={block:s,item:o})}),s.isEmpty&&n.remove(t)}function f2e(e){const t={},n=Object.create(null);gs(e,{visit:"Rule",reverse:!0,enter(r,i,s){const a=this.block||this.stylesheet,o=(r.pseudoSignature||"")+"|"+r.prelude.children.first.id;let u,d;t.hasOwnProperty(a.id)?u=t[a.id]:(u={},t[a.id]=u),u.hasOwnProperty(o)?d=u[o]:(d={},u[o]=d),h2e.call(this,r,i,s,d,n)}})}function p2e(e,t,n){const r=e.prelude.children,i=e.block.children,s=r.first.compareMarker,a={};n.nextUntil(t.next,function(o,u){if(o.type!=="Rule")return M0.call(r,o);if(e.pseudoSignature!==o.pseudoSignature)return!0;const d=o.prelude.children.head,h=o.block.children,p=d.data.compareMarker;if(p in a)return!0;if(r.head===r.tail&&r.first.id===d.data.id){i.appendList(h),n.remove(u);return}if(U6(i,h)){const m=d.data.id;r.some((g,v)=>{const w=g.id;if(m<w)return r.insert(d,v),!0;if(!v.next)return r.insert(d),!0}),n.remove(u);return}if(p===s)return!0;a[p]=!0})}function m2e(e){gs(e,{visit:"Rule",enter:p2e})}function Lb(e){return e.reduce((t,n)=>t+n.id.length+1,0)-1}function Ib(e){let t=0;for(const n of e)t+=n.length;return t+e.length-1}function g2e(e,t,n){const r=this.block!==null?this.block.avoidRulesMerge:!1,i=e.prelude.children,s=e.block,a=Object.create(null);let o=!0,u=!0;n.prevUntil(t.prev,function(d,h){const p=d.block,m=d.type;if(m!=="Rule"){const w=M0.call(i,d);return!w&&m==="Atrule"&&p&&gs(p,{visit:"Rule",enter(S){S.prelude.children.forEach(x=>{a[x.compareMarker]=!0})}}),w}if(e.pseudoSignature!==d.pseudoSignature)return!0;const g=d.prelude.children;if(u=!g.some(w=>w.compareMarker in a),!u&&!o)return!0;if(o&&B6(g,i))return p.children.appendList(s.children),n.remove(t),!0;const v=Q_e(s.children,p.children);if(v.eq.length){if(!v.ne1.length&&!v.ne2.length)return u&&(vh(i,g),n.remove(h)),!0;if(!r)if(v.ne1.length&&!v.ne2.length){const w=Lb(i),S=Ib(v.eq);o&&w<S&&(vh(g,i),s.children.fromArray(v.ne1))}else if(!v.ne1.length&&v.ne2.length){const w=Lb(g),S=Ib(v.eq);u&&w<S&&(vh(i,g),p.children.fromArray(v.ne2))}else{const w={type:"SelectorList",loc:null,children:vh(g.copy(),i)},S=Lb(w.children)+2;if(Ib(v.eq)>=S){const k=n.createItem({type:"Rule",loc:null,prelude:w,block:{type:"Block",loc:null,children:new Un().fromArray(v.eq)},pseudoSignature:e.pseudoSignature});return s.children.fromArray(v.ne1),p.children.fromArray(v.ne2overrided),o?n.insert(k,h):n.insert(k,t),!0}}}o&&(o=!g.some(w=>i.some(S=>S.compareMarker===w.compareMarker))),g.forEach(w=>{a[w.compareMarker]=!0})})}function y2e(e){gs(e,{visit:"Rule",reverse:!0,enter:g2e})}function b2e(e,t){const n=q_e(e,t);t.logger("prepare",e),K_e(e,t),t.logger("mergeAtrule",e),e2e(e),t.logger("initialMergeRuleset",e),n2e(e),t.logger("disjoinRuleset",e),l2e(e,n),t.logger("restructShorthand",e),f2e(e),t.logger("restructBlock",e),m2e(e),t.logger("mergeRuleset",e),y2e(e),t.logger("restructRuleset",e)}function v2e(e,t){const n=new Un;let r=!1,i;return e.nextUntil(e.head,(s,a,o)=>{if(s.type==="Comment"){if(!t||s.value.charAt(0)!=="!"){o.remove(a);return}if(r||i)return!0;o.remove(a),i=s;return}s.type!=="WhiteSpace"&&(r=!0),n.insert(o.remove(a))}),{comment:i,stylesheet:{type:"StyleSheet",loc:null,children:n}}}function x2e(e,t,n,r){r.logger(`Compress block #${n}`,null,!0);let i=1;return e.type==="StyleSheet"&&(e.firstAtrulesAllowed=t,e.id=i++),gs(e,{visit:"Atrule",enter(s){s.block!==null&&(s.block.id=i++)}}),r.logger("init",e),v_e(e,r),r.logger("clean",e),z_e(e),r.logger("replace",e),r.restructuring&&b2e(e,r),e}function w2e(e){let t="comments"in e?e.comments:"exclamation";return typeof t=="boolean"?t=t?"exclamation":!1:t!=="exclamation"&&t!=="first-exclamation"&&(t=!1),t}function _2e(e){return"restructure"in e?e.restructure:"restructuring"in e?e.restructuring:!0}function k2e(e){return new Un().appendData({type:"Rule",loc:null,prelude:{type:"SelectorList",loc:null,children:new Un().appendData({type:"Selector",loc:null,children:new Un().appendData({type:"TypeSelector",loc:null,name:"x"})})},block:e})}function S2e(e,t){e=e||{type:"StyleSheet",loc:null,children:new Un},t=t||{};const n={logger:typeof t.logger=="function"?t.logger:function(){},restructuring:_2e(t),forceMediaMerge:!!t.forceMediaMerge,usage:t.usage?u_e(t.usage):!1},r=new Un;let i=w2e(t),s=!0,a,o,u=1,d;t.clone&&(e=s1(e)),e.type==="StyleSheet"?(a=e.children,e.children=r):a=k2e(e);do{if(o=v2e(a,!!i),x2e(o.stylesheet,s,u++,n),d=o.stylesheet.children,o.comment&&(r.isEmpty||r.insert(Un.createItem({type:"Raw",value:`
`})),r.insert(Un.createItem(o.comment)),d.isEmpty||r.insert(Un.createItem({type:"Raw",value:`
`}))),s&&!d.isEmpty){const h=d.last;(h.type!=="Atrule"||h.name!=="import"&&h.name!=="charset")&&(s=!1)}i!=="exclamation"&&(i=!1),r.appendList(d)}while(!a.isEmpty);return{ast:e}}function G5(e){const t=n1(e,!0),n=n1(e);return t.length<n.length?t:n}const{lexer:C2e,tokenize:E2e,parse:T2e,generate:j2e,walk:A2e,find:P2e,findLast:N2e,findAll:O2e,fromPlainObject:R2e,toPlainObject:M2e}=l_e({node:{String:{generate(e){this.token(Oa,G5(e.value))}},Url:{generate(e){const t=N6(e.value),n=G5(e.value);this.token(Ci,t.length<=n.length+5?t:"url("+n+")")}}}}),L2e=Object.freeze(Object.defineProperty({__proto__:null,compress:S2e,find:P2e,findAll:O2e,findLast:N2e,fromPlainObject:R2e,generate:j2e,lexer:C2e,parse:T2e,specificity:nd,toPlainObject:M2e,tokenize:E2e,walk:A2e},Symbol.toStringTag,{value:"Module"})),{parse:I2e,generate:a1,compress:$2e}=L2e;function Uc(e,t,n,r){return t.debug&&console.error(`## ${e} done in %d ms
`,Date.now()-n),r}function D2e(e){let t;return function(r,i){let s=r;if(i&&(s=`[${((Date.now()-t)/1e3).toFixed(3)}s] ${s}`),e>1&&i){let a=a1(i);e===2&&a.length>256&&(a=a.substr(0,256)+"..."),s+=`
  ${a}
`}console.error(s),t=Date.now()}}function z2e(e){return e={...e},typeof e.logger!="function"&&e.debug&&(e.logger=D2e(e.debug)),e}function q5(e,t,n){Array.isArray(n)||(n=[n]),n.forEach(r=>r(e,t))}function G6(e,t,n){n=n||{};const r=n.filename||"<unknown>";let i;const s=Uc("parsing",n,Date.now(),I2e(t,{context:e,filename:r,positions:!!n.sourceMap}));n.beforeCompress&&Uc("beforeCompress",n,Date.now(),q5(s,n,n.beforeCompress));const a=Uc("compress",n,Date.now(),$2e(s,z2e(n)));return n.afterCompress&&Uc("afterCompress",n,Date.now(),q5(a,n,n.afterCompress)),n.sourceMap?i=Uc("generate(sourceMap: true)",n,Date.now(),(()=>{const o=a1(a.ast,{sourceMap:!0});return o.map._file=r,o.map.setSourceContent(r,t),o})()):i=Uc("generate",n,Date.now(),{css:a1(a.ast),map:null}),i}function F2e(e,t){return G6("stylesheet",e,t)}function B2e(e,t){return G6("declarationList",e,t)}const Xp=Gs.skip,Y5=(e,t)=>{const n=[];e.block.children.forEach(i=>{i.type==="Declaration"&&n.push({name:i.property,value:js(i.value),important:i.important===!0})});const r=[];return Gs(e.prelude,i=>{if(i.type==="Selector"){const s=Ux(i);let a=!1;Gs(s,(o,u,d)=>{o.type==="PseudoClassSelector"&&(a=!0,d.remove(u))}),r.push({specificity:nd(i),dynamic:a||t,selector:js(s),declarations:n})}}),r},U2e=(e,t)=>{const n=[],r=Zu(e,{parseValue:!1,parseAtrulePrelude:!1});return Gs(r,i=>{if(i.type==="Rule")return n.push(...Y5(i,t||!1)),Xp;if(i.type==="Atrule")return["keyframes","-webkit-keyframes","-o-keyframes","-moz-keyframes"].includes(i.name)||Gs(i,s=>{if(s.type==="Rule")return n.push(...Y5(s,t||!0)),Xp}),Xp}),n},H2e=e=>{const t=[],n=Zu(e,{context:"declarationList",parseValue:!1});return Gs(n,r=>{r.type==="Declaration"&&t.push({name:r.property,value:js(r.value),important:r.important===!0})}),t},X5=(e,t,n)=>{const r={},i=new Map;for(const[a,o]of Object.entries(t.attributes))Ui.presentation.has(a)&&(r[a]={type:"static",inherited:!1,value:o},i.set(a,!1));for(const{selector:a,declarations:o,dynamic:u}of e.rules)if(Tce(t,a,n))for(const{name:d,value:h,important:p}of o){const m=r[d];if(!(m&&m.type==="dynamic")){if(u){r[d]={type:"dynamic",inherited:!1};continue}(m==null||p===!0||i.get(d)===!1)&&(r[d]={type:"static",inherited:!1,value:h},i.set(d,p))}}const s=t.attributes.style==null?[]:H2e(t.attributes.style);for(const{name:a,value:o,important:u}of s){const d=r[a];d&&d.type==="dynamic"||(d==null||u===!0||i.get(a)===!1)&&(r[a]={type:"static",inherited:!1,value:o},i.set(a,u))}return r},q6=(e,t)=>{for(let n=0;n<4;n+=1){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},Da=e=>{const t=[],n=new Map;return oo(e,{element:{enter:(r,i)=>{if(n.set(r,i),r.name==="style"&&(r.attributes.type==null||r.attributes.type===""||r.attributes.type==="text/css")){const s=r.attributes.media!=null&&r.attributes.media!=="all";for(const a of r.children)(a.type==="text"||a.type==="cdata")&&t.push(...U2e(a.value,s))}}}}),t.sort((r,i)=>q6(r.specificity,i.specificity)),{rules:t,parents:n}},Ma=(e,t)=>{const{parents:n}=e,r=X5(e,t,n);let i=n.get(t);for(;i!=null&&i.type!=="root";){const s=X5(e,i,n);for(const[a,o]of Object.entries(s))r[a]==null&&b0.has(a)&&!__.has(a)&&(r[a]={...o,inherited:!0});i=n.get(i)}return r},$b=(e,t,n=null,r=!1)=>{const i=cf(typeof e=="string"?e:js(e.data));for(const s of i)if(s.some((o,u)=>r&&(u===s.length-1||!tR(s[u+1]))||o.type!=="attribute"||o.name!==t?!1:n==null?!0:o.value===n))return!0;return!1},W2e="removeDeprecatedAttrs",V2e="removes deprecated attributes";function G2e(e){const t=new Set;return e.rules.forEach(n=>{cf(n.selector).forEach(i=>{i.forEach(s=>{s.type==="attribute"&&t.add(s.name)})})}),t}function K5(e,t,n,r){t&&(t.safe&&t.safe.forEach(i=>{r.has(i)||delete e.attributes[i]}),n.removeUnsafe&&t.unsafe&&t.unsafe.forEach(i=>{r.has(i)||delete e.attributes[i]}))}function q2e(e,t){const n=Da(e),r=G2e(n);return{element:{enter:i=>{const s=w_[i.name];s&&(s.attrsGroups.has("core")&&i.attributes["xml:lang"]&&!r.has("xml:lang")&&i.attributes.lang&&delete i.attributes["xml:lang"],s.attrsGroups.forEach(a=>{K5(i,Dce[a],t,r)}),K5(i,s.deprecated,t,r))}}}}const Y6=Object.freeze(Object.defineProperty({__proto__:null,description:V2e,fn:q2e,name:W2e},Symbol.toStringTag,{value:"Module"})),Y2e="removeMetadata",X2e="removes <metadata>",K2e=()=>({element:{enter:(e,t)=>{e.name==="metadata"&&Dn(e,t)}}}),X6=Object.freeze(Object.defineProperty({__proto__:null,description:X2e,fn:K2e,name:Y2e},Symbol.toStringTag,{value:"Module"})),Z2e="removeEditorsNSData",Q2e="removes editors namespaces, elements and attributes",J2e=(e,t)=>{let n=[..._E];Array.isArray(t.additionalNamespaces)&&(n=[..._E,...t.additionalNamespaces]);const r=[];return{element:{enter:(i,s)=>{if(i.name==="svg")for(const[a,o]of Object.entries(i.attributes))a.startsWith("xmlns:")&&n.includes(o)&&(r.push(a.slice(6)),delete i.attributes[a]);for(const a of Object.keys(i.attributes))if(a.includes(":")){const[o]=a.split(":");r.includes(o)&&delete i.attributes[a]}if(i.name.includes(":")){const[a]=i.name.split(":");r.includes(a)&&Dn(i,s)}}}}},K6=Object.freeze(Object.defineProperty({__proto__:null,description:Q2e,fn:J2e,name:Z2e},Symbol.toStringTag,{value:"Module"})),eke="cleanupAttrs",tke="cleanups attributes from newlines, trailing and repeating spaces",nke=/(\S)\r?\n(\S)/g,rke=/\r?\n/g,ike=/\s{2,}/g,ske=(e,t)=>{const{newlines:n=!0,trim:r=!0,spaces:i=!0}=t;return{element:{enter:s=>{for(const a of Object.keys(s.attributes))n&&(s.attributes[a]=s.attributes[a].replace(nke,(o,u,d)=>u+" "+d),s.attributes[a]=s.attributes[a].replace(rke,"")),r&&(s.attributes[a]=s.attributes[a].trim()),i&&(s.attributes[a]=s.attributes[a].replace(ike," "))}}}},Z6=Object.freeze(Object.defineProperty({__proto__:null,description:tke,fn:ske,name:eke},Symbol.toStringTag,{value:"Module"})),ake="mergeStyles",oke="merge multiple style elements into one",lke=()=>{let e=null,t="",n="text";return{element:{enter:(r,i)=>{if(r.name==="foreignObject")return Po;if(r.name!=="style"||r.attributes.type!=null&&r.attributes.type!==""&&r.attributes.type!=="text/css")return;let s="";for(const a of r.children)a.type==="text"&&(s+=a.value),a.type==="cdata"&&(n="cdata",s+=a.value);if(s.trim().length===0){Dn(r,i);return}if(r.attributes.media==null?t+=s:(t+=`@media ${r.attributes.media}{${s}}`,delete r.attributes.media),e==null)e=r;else{Dn(r,i);const a={type:n,value:t};e.children=[a]}}}}},Q6=Object.freeze(Object.defineProperty({__proto__:null,description:oke,fn:lke,name:ake},Symbol.toStringTag,{value:"Module"})),cke="inlineStyles",uke="inline styles (additional options)",dke=[...CE.functional,...CE.treeStructural],hke=(e,t)=>{const{onlyMatchedOnce:n=!0,removeMatchedSelectors:r=!0,useMqs:i=["","screen"],usePseudos:s=[""]}=t,a=[],o=[];return{element:{enter:(u,d)=>{if(u.name==="foreignObject")return Po;if(u.name!=="style"||u.children.length===0||u.attributes.type!=null&&u.attributes.type!==""&&u.attributes.type!=="text/css")return;const h=u.children.filter(m=>m.type==="text"||m.type==="cdata").map(m=>m.value).join("");let p=null;try{p=Zu(h,{parseValue:!1,parseCustomProperty:!1})}catch{return}p.type==="StyleSheet"&&a.push({node:u,parentNode:d,cssAst:p}),Gs(p,{visit:"Rule",enter(m){const g=this.atrule;let v="";g!=null&&(v=g.name,g.prelude!=null&&(v+=` ${js(g.prelude)}`)),i.includes(v)&&m.prelude.type==="SelectorList"&&m.prelude.children.forEach((w,S)=>{if(w.type==="Selector"){const x=[];w.children.forEach((j,O,I)=>{(j.type==="PseudoClassSelector"||j.type==="PseudoElementSelector")&&!dke.includes(j.name)&&x.push({item:O,list:I})});const k=js({type:"Selector",children:new So().fromArray(x.map(j=>j.item.data))});if(s.includes(k))for(const j of x)j.list.remove(j.item);o.push({node:w,rule:m,item:S})}})}})}},root:{exit:()=>{if(a.length===0)return;const u=o.slice().sort((d,h)=>{const p=nd(d.item.data),m=nd(h.item.data);return q6(p,m)}).reverse();for(const d of u){const h=js(d.item.data),p=[];try{for(const m of df(e,h))m.type==="element"&&p.push(m)}catch{continue}if(p.length!==0&&!(n&&p.length>1)){for(const m of p){const g=Zu(m.attributes.style??"",{context:"declarationList",parseValue:!1});if(g.type!=="DeclarationList")continue;const v=new Map;let w;Gs(g,{visit:"Declaration",enter(x,k){w==null&&(w=k),v.set(x.property.toLowerCase(),k)}}),Gs(d.rule,{visit:"Declaration",enter(x){const k=x.property;Ui.presentation.has(k)&&!o.some(I=>$b(I.item,k))&&delete m.attributes[k];const j=v.get(k),O=g.children.createItem(x);j==null?g.children.insert(O,w):j.data.important!==!0&&x.important===!0&&(g.children.replace(j,O),v.set(k,O))}});const S=js(g);S.length!==0&&(m.attributes.style=S)}r&&p.length!==0&&d.rule.prelude.type==="SelectorList"&&d.rule.prelude.children.remove(d.item),d.matchedElements=p}}if(r){for(const d of u)if(d.matchedElements!=null&&!(n&&d.matchedElements.length>1))for(const h of d.matchedElements){const p=new Set(h.attributes.class==null?null:h.attributes.class.split(" "));for(const g of d.node.children)g.type==="ClassSelector"&&!o.some(v=>$b(v.item,"class",g.name,!0))&&p.delete(g.name);p.size===0?delete h.attributes.class:h.attributes.class=Array.from(p).join(" ");const m=d.node.children.first;(m==null?void 0:m.type)==="IdSelector"&&h.attributes.id===m.name&&!o.some(g=>$b(g.item,"id",m.name,!0))&&delete h.attributes.id}for(const d of a)if(Gs(d.cssAst,{visit:"Rule",enter:function(h,p,m){h.type==="Rule"&&h.prelude.type==="SelectorList"&&h.prelude.children.isEmpty&&m.remove(p)}}),d.cssAst.children.isEmpty)Dn(d.node,d.parentNode);else{const h=d.node.children[0];(h.type==="text"||h.type==="cdata")&&(h.value=js(d.cssAst))}}}}}},J6=Object.freeze(Object.defineProperty({__proto__:null,description:uke,fn:hke,name:cke},Symbol.toStringTag,{value:"Module"})),eL=/\burl\((["'])?#(.+?)\1\)/g,fke=/^#(.+?)$/,pke=/(\w+)\.[a-zA-Z]/,mke=(e,t)=>{let n="data:image/svg+xml";return!t||t==="base64"?(n+=";base64,",e=n+Buffer.from(e).toString("base64")):t==="enc"?e=n+","+encodeURIComponent(e):t==="unenc"&&(e=n+","+e),e},rd=(e,t,n)=>{let r="",i,s;return e.forEach((a,o)=>{i=" ",o==0&&(i=""),t.noSpaceAfterFlags&&n=="a";const u=t.leadingZero?rc(a):a.toString();t.negativeExtraSpace&&i!=""&&(a<0||u.charAt(0)==="."&&s%1!==0)&&(i=""),s=a,r+=i+u}),r},rc=e=>{const t=e.toString();return 0<e&&e<1&&t.startsWith("0")?t.slice(1):-1<e&&e<0&&t[1]==="0"?t[0]+t.slice(2):t},L0=e=>e.name==="script"&&e.children.length!==0||e.name==="a"&&Object.entries(e.attributes).some(([r,i])=>(r==="href"||r.endsWith(":href"))&&i!=null&&i.trimStart().startsWith("javascript:"))?!0:[...Ui.animationEvent,...Ui.documentEvent,...Ui.documentElementEvent,...Ui.globalEvent,...Ui.graphicalEvent].some(n=>e.attributes[n]!=null),I0=e=>new RegExp(eL).test(e),tL=(e,t)=>{const n=[];if(y0.has(e)){const r=t.matchAll(eL);for(const i of r)n.push(i[2])}if(e==="href"||e.endsWith(":href")){const r=fke.exec(t);r!=null&&n.push(r[1])}if(e==="begin"){const r=pke.exec(t);r!=null&&n.push(r[1])}return n.map(r=>decodeURI(r))},Co=(e,t)=>{const n=10**t;return Math.round(e*n)/n},gke="minifyStyles",yke="minifies styles and removes unused styles",bke=(e,{usage:t,...n})=>{const r=new Map,i=[],s=new Set,a=new Set,o=new Set;let u=!0,d=!0,h=!0,p=!1;typeof t=="boolean"?(u=t,d=t,h=t):t&&(u=t.tags==null?!0:t.tags,d=t.ids==null?!0:t.ids,h=t.classes==null?!0:t.classes,p=t.force==null?!1:t.force);let m=!1;return{element:{enter:(g,v)=>{if(L0(g)&&(m=!0),s.add(g.name),g.attributes.id!=null&&a.add(g.attributes.id),g.attributes.class!=null)for(const w of g.attributes.class.split(/\s+/))o.add(w);g.name==="style"&&g.children.length!==0?r.set(g,v):g.attributes.style!=null&&i.push(g)}},root:{exit:()=>{const g={};(!m||p)&&(u&&(g.tags=Array.from(s)),d&&(g.ids=Array.from(a)),h&&(g.classes=Array.from(o)));for(const[v,w]of r.entries())if(v.children[0].type==="text"||v.children[0].type==="cdata"){const S=v.children[0].value,x=F2e(S,{...n,usage:g}).css;if(x.length===0){Dn(v,w);continue}S.indexOf(">")>=0||S.indexOf("<")>=0?(v.children[0].type="cdata",v.children[0].value=x):(v.children[0].type="text",v.children[0].value=x)}for(const v of i){const w=v.attributes.style;v.attributes.style=B2e(w,{...n}).css}}}}},nL=Object.freeze(Object.defineProperty({__proto__:null,description:yke,fn:bke,name:gke},Symbol.toStringTag,{value:"Module"})),vke="cleanupIds",xke="removes unused IDs and minifies used",rL=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Z5=rL.length-1,wke=(e,t)=>{for(const n of t)if(e.startsWith(n))return!0;return!1},_ke=e=>{if(e==null)return[0];e[e.length-1]+=1;for(let t=e.length-1;t>0;t--)e[t]>Z5&&(e[t]=0,e[t-1]!==void 0&&e[t-1]++);return e[0]>Z5&&(e[0]=0,e.unshift(0)),e},kke=e=>e.map(t=>rL[t]).join(""),Ske=(e,t)=>{const{remove:n=!0,minify:r=!0,preserve:i=[],preservePrefixes:s=[],force:a=!1}=t,o=new Set(Array.isArray(i)?i:i?[i]:[]),u=Array.isArray(s)?s:s?[s]:[],d=new Map,h=new Map;let p=!1;return{element:{enter:m=>{if(!a){if(m.name==="style"&&m.children.length!==0||L0(m)){p=!0;return}if(m.name==="svg"){let g=!0;for(const v of m.children)if(v.type!=="element"||v.name!=="defs"){g=!1;break}if(g)return Po}}for(const[g,v]of Object.entries(m.attributes))if(g==="id"){const w=v;d.has(w)?delete m.attributes.id:d.set(w,m)}else{const w=tL(g,v);for(const S of w){let x=h.get(S);x==null&&(x=[],h.set(S,x)),x.push({element:m,name:g})}}}},root:{exit:()=>{if(p)return;const m=v=>o.has(v)||wke(v,u);let g=null;for(const[v,w]of h){const S=d.get(v);if(S!=null){if(r&&m(v)===!1){let x;do g=_ke(g),x=kke(g);while(m(x)||h.has(x)&&d.get(x)==null);S.attributes.id=x;for(const{element:k,name:j}of w){const O=k.attributes[j];O.includes("#")?k.attributes[j]=O.replace(`#${encodeURI(v)}`,`#${x}`).replace(`#${v}`,`#${x}`):k.attributes[j]=O.replace(`${v}.`,`${x}.`)}}d.delete(v)}}if(n)for(const[v,w]of d)m(v)===!1&&delete w.attributes.id}}}},iL=Object.freeze(Object.defineProperty({__proto__:null,description:xke,fn:Ske,name:vke},Symbol.toStringTag,{value:"Module"})),Cke="removeUselessDefs",Eke="removes elements in <defs> without id",Tke=()=>({element:{enter:(e,t)=>{if(e.name==="defs"||Cl.nonRendering.has(e.name)&&e.attributes.id==null){const n=[];sL(e,n),n.length===0&&Dn(e,t),e.children=n}}}}),sL=(e,t)=>{for(const n of e.children)n.type==="element"&&(n.attributes.id!=null||n.name==="style"?t.push(n):sL(n,t))},aL=Object.freeze(Object.defineProperty({__proto__:null,description:Eke,fn:Tke,name:Cke},Symbol.toStringTag,{value:"Module"})),jke="cleanupNumericValues",Ake='rounds numeric values to the fixed precision, removes default "px" units',Pke=/^([-+]?\d*\.?\d+([eE][-+]?\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,Q5={cm:96/2.54,mm:96/25.4,in:96,pt:4/3,pc:16,px:1},Nke=(e,t)=>{const{floatPrecision:n=3,leadingZero:r=!0,defaultPx:i=!0,convertToPx:s=!0}=t;return{element:{enter:a=>{if(a.attributes.viewBox!=null){const o=a.attributes.viewBox.trim().split(/(?:\s,?|,)\s*/g);a.attributes.viewBox=o.map(u=>{const d=Number(u);return Number.isNaN(d)?u:Number(d.toFixed(n))}).join(" ")}for(const[o,u]of Object.entries(a.attributes)){if(o==="version")continue;const d=Pke.exec(u);if(d){let h=Number(Number(d[1]).toFixed(n)),m=d[3]||"";if(s&&m!==""&&m in Q5){const v=Number((Q5[m]*Number(d[1])).toFixed(n));v.toString().length<d[0].length&&(h=v,m="px")}let g;r?g=rc(h):g=h.toString(),i&&m==="px"&&(m=""),a.attributes[o]=g+m}}}}}},oL=Object.freeze(Object.defineProperty({__proto__:null,description:Ake,fn:Nke,name:jke},Symbol.toStringTag,{value:"Module"})),Oke="convertColors",Rke="converts colors: rgb() to #rrggbb and #rrggbb to #rgb",Db="([+-]?(?:\\d*\\.\\d+|\\d+\\.?)%?)",J5="(?:\\s*,\\s*|\\s+)",Mke=new RegExp("^rgb\\(\\s*"+Db+J5+Db+J5+Db+"\\s*\\)$"),Lke=/^#(([a-fA-F0-9])\2){3}$/,Ike=([e,t,n])=>"#"+((256+e<<8|t)<<8|n).toString(16).slice(1).toUpperCase(),$ke=(e,t)=>{const{currentColor:n=!1,names2hex:r=!0,rgb2hex:i=!0,convertCase:s="lower",shorthex:a=!0,shortname:o=!0}=t;let u=0;return{element:{enter:d=>{d.name==="mask"&&u++;for(const[h,p]of Object.entries(d.attributes))if(Tx.has(h)){let m=p;if(n&&u===0){let g;typeof n=="string"?g=m===n:n instanceof RegExp?g=n.exec(m)!=null:g=m!=="none",g&&(m="currentColor")}if(r){const g=m.toLowerCase();kE[g]!=null&&(m=kE[g])}if(i){const g=m.match(Mke);if(g!=null){const v=g.slice(1,4).map(w=>{let S;return w.indexOf("%")>-1?S=Math.round(parseFloat(w)*2.55):S=Number(w),Math.max(0,Math.min(S,255))});m=Ike(v)}}if(s&&!I0(m)&&m!=="currentColor"&&(s==="lower"?m=m.toLowerCase():s==="upper"&&(m=m.toUpperCase())),a){const g=Lke.exec(m);g!=null&&(m="#"+g[0][1]+g[0][3]+g[0][5])}if(o){const g=m.toLowerCase();SE[g]!=null&&(m=SE[g])}d.attributes[h]=m}},exit:d=>{d.name==="mask"&&u--}}}},lL=Object.freeze(Object.defineProperty({__proto__:null,description:Rke,fn:$ke,name:Oke},Symbol.toStringTag,{value:"Module"})),Dke="removeUnknownsAndDefaults",zke="removes unknown elements content and attributes, removes attrs with default values",o1=new Map,cL=new Map,uL=new Map;for(const[e,t]of Object.entries(w_)){const n=new Set;if(t.content)for(const s of t.content)n.add(s);if(t.contentGroups)for(const s of t.contentGroups){const a=Cl[s];if(a)for(const o of a)n.add(o)}const r=new Set;if(t.attrs)for(const s of t.attrs)r.add(s);const i=new Map;if(t.defaults)for(const[s,a]of Object.entries(t.defaults))i.set(s,a);for(const s of t.attrsGroups){const a=Ui[s];if(a)for(const u of a)r.add(u);const o=x_[s];if(o)for(const[u,d]of Object.entries(o))i.set(u,d)}o1.set(e,n),cL.set(e,r),uL.set(e,i)}const Fke=(e,t)=>{const{unknownContent:n=!0,unknownAttrs:r=!0,defaultAttrs:i=!0,defaultMarkupDeclarations:s=!0,uselessOverrides:a=!0,keepDataAttrs:o=!0,keepAriaAttrs:u=!0,keepRoleAttr:d=!1}=t,h=Da(e);return{instruction:{enter:p=>{s&&(p.value=p.value.replace(/\s*standalone\s*=\s*(["'])no\1/,""))}},element:{enter:(p,m)=>{if(p.name.includes(":"))return;if(p.name==="foreignObject")return Po;if(n&&m.type==="element"){const S=o1.get(m.name);if(S==null||S.size===0){if(o1.get(p.name)==null){Dn(p,m);return}}else if(S.has(p.name)===!1){Dn(p,m);return}}const g=cL.get(p.name),v=uL.get(p.name),w=m.type==="element"?Ma(h,m):null;for(const[S,x]of Object.entries(p.attributes))if(!(o&&S.startsWith("data-"))&&!(u&&S.startsWith("aria-"))&&!(d&&S==="role")&&S!=="xmlns"){if(S.includes(":")){const[k]=S.split(":");if(k!=="xml"&&k!=="xlink")continue}if(r&&g&&g.has(S)===!1&&delete p.attributes[S],i&&p.attributes.id==null&&v&&v.get(S)===x&&(w==null?void 0:w[S])==null&&delete p.attributes[S],a&&p.attributes.id==null){const k=w==null?void 0:w[S];__.has(S)===!1&&k!=null&&k.type==="static"&&k.value===x&&delete p.attributes[S]}}}}}},dL=Object.freeze(Object.defineProperty({__proto__:null,description:zke,fn:Fke,name:Dke},Symbol.toStringTag,{value:"Module"})),Bke="removeNonInheritableGroupAttrs",Uke="removes non-inheritable group's presentational attributes",Hke=()=>({element:{enter:e=>{if(e.name==="g")for(const t of Object.keys(e.attributes))Ui.presentation.has(t)&&!b0.has(t)&&!__.has(t)&&delete e.attributes[t]}}}),hL=Object.freeze(Object.defineProperty({__proto__:null,description:Uke,fn:Hke,name:Bke},Symbol.toStringTag,{value:"Module"})),Wke="removeUselessStrokeAndFill",Vke="removes useless stroke and fill attributes",Gke=(e,t)=>{const{stroke:n=!0,fill:r=!0,removeNone:i=!1}=t;let s=!1;if(oo(e,{element:{enter:o=>{(o.name==="style"||L0(o))&&(s=!0)}}}),s)return null;const a=Da(e);return{element:{enter:(o,u)=>{if(o.attributes.id!=null)return Po;if(!Cl.shape.has(o.name))return;const d=Ma(a,o),h=d.stroke,p=d["stroke-opacity"],m=d["stroke-width"],g=d["marker-end"],v=d.fill,w=d["fill-opacity"],S=u.type==="element"?Ma(a,u):null,x=S==null?null:S.stroke;if(n&&(h==null||h.type==="static"&&h.value=="none"||p!=null&&p.type==="static"&&p.value==="0"||m!=null&&m.type==="static"&&m.value==="0")&&(m!=null&&m.type==="static"&&m.value==="0"||g==null)){for(const k of Object.keys(o.attributes))k.startsWith("stroke")&&delete o.attributes[k];x!=null&&x.type==="static"&&x.value!=="none"&&(o.attributes.stroke="none")}if(r&&(v!=null&&v.type==="static"&&v.value==="none"||w!=null&&w.type==="static"&&w.value==="0")){for(const k of Object.keys(o.attributes))k.startsWith("fill-")&&delete o.attributes[k];(v==null||v.type==="static"&&v.value!=="none")&&(o.attributes.fill="none")}i&&(h==null||o.attributes.stroke==="none")&&(v!=null&&v.type==="static"&&v.value==="none"||o.attributes.fill==="none")&&Dn(o,u)}}}},fL=Object.freeze(Object.defineProperty({__proto__:null,description:Vke,fn:Gke,name:Wke},Symbol.toStringTag,{value:"Module"})),qke="cleanupEnableBackground",Yke="remove or cleanup enable-background attribute when possible",Xke=/^new\s0\s0\s([-+]?\d*\.?\d+([eE][-+]?\d+)?)\s([-+]?\d*\.?\d+([eE][-+]?\d+)?)$/,Kke=e=>{let t=!1;return oo(e,{element:{enter:n=>{n.name==="filter"&&(t=!0)}}}),{element:{enter:n=>{let r=null,i=null;if(n.attributes.style!=null&&(r=Zu(n.attributes.style,{context:"declarationList"}),r.type==="DeclarationList")){const a=[];Gs(r,(o,u)=>{o.type==="Declaration"&&o.property==="enable-background"&&(a.push(u),i=u)});for(let o=0;o<a.length-1;o++)r.children.remove(a[o])}if(!t){delete n.attributes["enable-background"],(r==null?void 0:r.type)==="DeclarationList"&&(i&&r.children.remove(i),r.children.isEmpty?delete n.attributes.style:n.attributes.style=js(r));return}const s=n.attributes.width!=null&&n.attributes.height!=null;if((n.name==="svg"||n.name==="mask"||n.name==="pattern")&&s){const a=n.attributes["enable-background"],o=ej(a,n.name,n.attributes.width,n.attributes.height);if(o?n.attributes["enable-background"]=o:delete n.attributes["enable-background"],(r==null?void 0:r.type)==="DeclarationList"&&i){const u=js(i.data.value),d=ej(u,n.name,n.attributes.width,n.attributes.height);d?i.data.value={type:"Raw",value:d}:r.children.remove(i)}}(r==null?void 0:r.type)==="DeclarationList"&&(r.children.isEmpty?delete n.attributes.style:n.attributes.style=js(r))}}}},ej=(e,t,n,r)=>{const i=Xke.exec(e);return i!=null&&n===i[1]&&r===i[3]?t==="svg"?void 0:"new":e},pL=Object.freeze(Object.defineProperty({__proto__:null,description:Yke,fn:Kke,name:qke},Symbol.toStringTag,{value:"Module"})),mL={M:2,m:2,Z:0,z:0,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2,A:7,a:7},Zke=e=>e in mL,Qke=e=>e===" "||e==="	"||e==="\r"||e===`
`,gL=e=>{const t=e.codePointAt(0);return t==null?!1:48<=t&&t<=57},zb=(e,t)=>{let n=t,r="",i="none";for(;n<e.length;n+=1){const a=e[n];if(a==="+"||a==="-"){if(i==="none"){i="sign",r+=a;continue}if(i==="e"){i="exponent_sign",r+=a;continue}}if(gL(a)){if(i==="none"||i==="sign"||i==="whole"){i="whole",r+=a;continue}if(i==="decimal_point"||i==="decimal"){i="decimal",r+=a;continue}if(i==="e"||i==="exponent_sign"||i==="exponent"){i="exponent",r+=a;continue}}if(a==="."&&(i==="none"||i==="sign"||i==="whole")){i="decimal_point",r+=a;continue}if((a==="E"||a=="e")&&(i==="whole"||i==="decimal_point"||i==="decimal")){i="e",r+=a;continue}break}const s=Number.parseFloat(r);return Number.isNaN(s)?[t,null]:[n-1,s]},r2=e=>{const t=[];let n=null,r=[],i=0,s=!1,a=!1;for(let o=0;o<e.length;o+=1){const u=e.charAt(o);if(Qke(u))continue;if(s&&u===","){if(a)break;a=!0;continue}if(Zke(u)){if(a)return t;if(n==null){if(u!=="M"&&u!=="m")return t}else if(r.length!==0)return t;n=u,r=[],i=mL[n],s=!1,i===0&&t.push({command:n,args:r});continue}if(n==null)return t;let d=o,h=null;if(n==="A"||n==="a"){const p=r.length;(p===0||p===1)&&u!=="+"&&u!=="-"&&([d,h]=zb(e,o)),(p===2||p===5||p===6)&&([d,h]=zb(e,o)),(p===3||p===4)&&(u==="0"&&(h=0),u==="1"&&(h=1))}else[d,h]=zb(e,o);if(h==null)return t;r.push(h),s=!0,a=!1,o=d,r.length===i&&(t.push({command:n,args:r}),n==="M"&&(n="L"),n==="m"&&(n="l"),r=[])}return t},Jke=(e,t)=>(t!=null&&(e=Co(e,t)),{roundedStr:rc(e),rounded:e}),Kp=(e,t,n,r)=>{let i="",s;for(let a=0;a<t.length;a++){const{roundedStr:o,rounded:u}=Jke(t[a],n);r&&(e==="A"||e==="a")&&(a%7===4||a%7===5)||a===0||u<0||!Number.isInteger(s)&&!gL(o[0])?i+=o:i+=` ${o}`,s=u}return i},uu=({pathData:e,precision:t,disableSpaceAfterFlags:n})=>{if(e.length===1){const{command:s,args:a}=e[0];return s+Kp(s,a,t,n)}let r="",i={...e[0]};e[1].command==="L"?i.command="M":e[1].command==="l"&&(i.command="m");for(let s=1;s<e.length;s++){const{command:a,args:o}=e[s];i.command===a&&i.command!=="M"&&i.command!=="m"||i.command==="M"&&a==="L"||i.command==="m"&&a==="l"?(i.args=[...i.args,...o],s===e.length-1&&(r+=i.command+Kp(i.command,i.args,t,n))):(r+=i.command+Kp(i.command,i.args,t,n),s===e.length-1?r+=a+Kp(a,o,t,n):i={command:a,args:o})}return r},eSe=Cl.nonRendering,tSe="removeHiddenElems",nSe="removes hidden elements (zero sized, with absent attributes)",rSe=(e,t)=>{const{isHidden:n=!0,displayNone:r=!0,opacity0:i=!0,circleR0:s=!0,ellipseRX0:a=!0,ellipseRY0:o=!0,rectWidth0:u=!0,rectHeight0:d=!0,patternWidth0:h=!0,patternHeight0:p=!0,imageWidth0:m=!0,imageHeight0:g=!0,pathEmptyD:v=!0,polylineEmptyPoints:w=!0,polygonEmptyPoints:S=!0}=t,x=Da(e),k=new Map,j=new Set,O=new Map,I=new Set,E=new Map;let U=!1;function D(W){if(I.has(W.attributes.id))return!1;for(const ce of W.children)if(ce.type==="element"&&!D(ce))return!1;return!0}function R(W,ce){W.type==="element"&&W.attributes.id!=null&&ce.type==="element"&&ce.name==="defs"&&j.add(W.attributes.id),Dn(W,ce)}return oo(e,{element:{enter:(W,ce)=>{if(eSe.has(W.name))return k.set(W,ce),Po;const te=Ma(x,W);if(i&&te.opacity&&te.opacity.type==="static"&&te.opacity.value==="0"){if(W.name==="path")return k.set(W,ce),Po;R(W,ce)}}}}),{element:{enter:(W,ce)=>{if(W.name==="style"&&W.children.length!==0||L0(W)){U=!0;return}if(W.name==="defs"&&O.set(W,ce),W.name==="use")for(const me of Object.keys(W.attributes)){if(me!=="href"&&!me.endsWith(":href"))continue;const ge=W.attributes[me].slice(1);let Ee=E.get(ge);Ee||(Ee=[],E.set(ge,Ee)),Ee.push({node:W,parentNode:ce})}const te=Ma(x,W);if(n&&te.visibility&&te.visibility.type==="static"&&te.visibility.value==="hidden"&&yR(W,"[visibility=visible]")==null){R(W,ce);return}if(r&&te.display&&te.display.type==="static"&&te.display.value==="none"&&W.name!=="marker"){R(W,ce);return}if(s&&W.name==="circle"&&W.children.length===0&&W.attributes.r==="0"){R(W,ce);return}if(a&&W.name==="ellipse"&&W.children.length===0&&W.attributes.rx==="0"){R(W,ce);return}if(o&&W.name==="ellipse"&&W.children.length===0&&W.attributes.ry==="0"){R(W,ce);return}if(u&&W.name==="rect"&&W.children.length===0&&W.attributes.width==="0"){R(W,ce);return}if(d&&u&&W.name==="rect"&&W.children.length===0&&W.attributes.height==="0"){R(W,ce);return}if(h&&W.name==="pattern"&&W.attributes.width==="0"){R(W,ce);return}if(p&&W.name==="pattern"&&W.attributes.height==="0"){R(W,ce);return}if(m&&W.name==="image"&&W.attributes.width==="0"){R(W,ce);return}if(g&&W.name==="image"&&W.attributes.height==="0"){R(W,ce);return}if(v&&W.name==="path"){if(W.attributes.d==null){R(W,ce);return}const me=r2(W.attributes.d);if(me.length===0){R(W,ce);return}if(me.length===1&&te["marker-start"]==null&&te["marker-end"]==null){R(W,ce);return}}if(w&&W.name==="polyline"&&W.attributes.points==null){R(W,ce);return}if(S&&W.name==="polygon"&&W.attributes.points==null){R(W,ce);return}for(const[me,H]of Object.entries(W.attributes)){const ge=tL(me,H);for(const Ee of ge)I.add(Ee)}}},root:{exit:()=>{for(const W of j){const ce=E.get(W);if(ce)for(const{node:te,parentNode:me}of ce)Dn(te,me)}if(!U)for(const[W,ce]of k.entries())D(W)&&Dn(W,ce);for(const[W,ce]of O.entries())W.children.length===0&&Dn(W,ce)}}}},yL=Object.freeze(Object.defineProperty({__proto__:null,description:nSe,fn:rSe,name:tSe},Symbol.toStringTag,{value:"Module"})),iSe="removeEmptyText",sSe="removes empty <text> elements",aSe=(e,t)=>{const{text:n=!0,tspan:r=!0,tref:i=!0}=t;return{element:{enter:(s,a)=>{n&&s.name==="text"&&s.children.length===0&&Dn(s,a),r&&s.name==="tspan"&&s.children.length===0&&Dn(s,a),i&&s.name==="tref"&&s.attributes["xlink:href"]==null&&Dn(s,a)}}}},bL=Object.freeze(Object.defineProperty({__proto__:null,description:sSe,fn:aSe,name:iSe},Symbol.toStringTag,{value:"Module"})),oSe="convertShapeToPath",lSe="converts basic shapes to more compact path form",cSe=/[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,uSe=(e,t)=>{const{convertArcs:n=!1,floatPrecision:r}=t;return{element:{enter:(i,s)=>{if(i.name==="rect"&&i.attributes.width!=null&&i.attributes.height!=null&&i.attributes.rx==null&&i.attributes.ry==null){const a=Number(i.attributes.x||"0"),o=Number(i.attributes.y||"0"),u=Number(i.attributes.width),d=Number(i.attributes.height);if(Number.isNaN(a-o+u-d))return;const h=[{command:"M",args:[a,o]},{command:"H",args:[a+u]},{command:"V",args:[o+d]},{command:"H",args:[a]},{command:"z",args:[]}];i.name="path",i.attributes.d=uu({pathData:h,precision:r}),delete i.attributes.x,delete i.attributes.y,delete i.attributes.width,delete i.attributes.height}if(i.name==="line"){const a=Number(i.attributes.x1||"0"),o=Number(i.attributes.y1||"0"),u=Number(i.attributes.x2||"0"),d=Number(i.attributes.y2||"0");if(Number.isNaN(a-o+u-d))return;const h=[{command:"M",args:[a,o]},{command:"L",args:[u,d]}];i.name="path",i.attributes.d=uu({pathData:h,precision:r}),delete i.attributes.x1,delete i.attributes.y1,delete i.attributes.x2,delete i.attributes.y2}if((i.name==="polyline"||i.name==="polygon")&&i.attributes.points!=null){const a=(i.attributes.points.match(cSe)||[]).map(Number);if(a.length<4){Dn(i,s);return}const o=[];for(let u=0;u<a.length;u+=2)o.push({command:u===0?"M":"L",args:a.slice(u,u+2)});i.name==="polygon"&&o.push({command:"z",args:[]}),i.name="path",i.attributes.d=uu({pathData:o,precision:r}),delete i.attributes.points}if(i.name==="circle"&&n){const a=Number(i.attributes.cx||"0"),o=Number(i.attributes.cy||"0"),u=Number(i.attributes.r||"0");if(Number.isNaN(a-o+u))return;const d=[{command:"M",args:[a,o-u]},{command:"A",args:[u,u,0,1,0,a,o+u]},{command:"A",args:[u,u,0,1,0,a,o-u]},{command:"z",args:[]}];i.name="path",i.attributes.d=uu({pathData:d,precision:r}),delete i.attributes.cx,delete i.attributes.cy,delete i.attributes.r}if(i.name==="ellipse"&&n){const a=Number(i.attributes.cx||"0"),o=Number(i.attributes.cy||"0"),u=Number(i.attributes.rx||"0"),d=Number(i.attributes.ry||"0");if(Number.isNaN(a-o+u-d))return;const h=[{command:"M",args:[a,o-d]},{command:"A",args:[u,d,0,1,0,a,o+d]},{command:"A",args:[u,d,0,1,0,a,o-d]},{command:"z",args:[]}];i.name="path",i.attributes.d=uu({pathData:h,precision:r}),delete i.attributes.cx,delete i.attributes.cy,delete i.attributes.rx,delete i.attributes.ry}}}}},vL=Object.freeze(Object.defineProperty({__proto__:null,description:lSe,fn:uSe,name:oSe},Symbol.toStringTag,{value:"Module"})),dSe="convertEllipseToCircle",hSe="converts non-eccentric <ellipse>s to <circle>s",fSe=()=>({element:{enter:e=>{if(e.name==="ellipse"){const t=e.attributes.rx||"0",n=e.attributes.ry||"0";if(t===n||t==="auto"||n==="auto"){e.name="circle";const r=t==="auto"?n:t;delete e.attributes.rx,delete e.attributes.ry,e.attributes.r=r}}}}}),xL=Object.freeze(Object.defineProperty({__proto__:null,description:hSe,fn:fSe,name:dSe},Symbol.toStringTag,{value:"Module"})),pSe="moveElemsAttrsToGroup",mSe="Move common attributes of group children to the group",gSe=e=>{let t=!1;return oo(e,{element:{enter:n=>{n.name==="style"&&(t=!0)}}}),{element:{exit:n=>{if(n.name!=="g"||n.children.length<=1||t)return;const r=new Map;let i=!0,s=!0;for(const a of n.children)if(a.type==="element")if(v_.has(a.name)||(s=!1),i){i=!1;for(const[o,u]of Object.entries(a.attributes))b0.has(o)&&r.set(o,u)}else for(const[o,u]of r)a.attributes[o]!==u&&r.delete(o);(n.attributes.filter!=null||n.attributes["clip-path"]!=null||n.attributes.mask!=null)&&r.delete("transform"),s&&r.delete("transform");for(const[a,o]of r)a==="transform"?n.attributes.transform!=null?n.attributes.transform=`${n.attributes.transform} ${o}`:n.attributes.transform=o:n.attributes[a]=o;for(const a of n.children)if(a.type==="element")for(const[o]of r)delete a.attributes[o]}}}},wL=Object.freeze(Object.defineProperty({__proto__:null,description:mSe,fn:gSe,name:pSe},Symbol.toStringTag,{value:"Module"})),ySe="moveGroupAttrsToElems",bSe="moves some group attributes to the content elements",vSe=[...v_,"g","text"],xSe=()=>({element:{enter:e=>{if(e.name==="g"&&e.children.length!==0&&e.attributes.transform!=null&&Object.entries(e.attributes).some(([t,n])=>y0.has(t)&&I0(n))===!1&&e.children.every(t=>t.type==="element"&&vSe.includes(t.name)&&t.attributes.id==null)){for(const t of e.children){const n=e.attributes.transform;t.type==="element"&&(t.attributes.transform!=null?t.attributes.transform=`${n} ${t.attributes.transform}`:t.attributes.transform=n)}delete e.attributes.transform}}}}),_L=Object.freeze(Object.defineProperty({__proto__:null,description:bSe,fn:xSe,name:ySe},Symbol.toStringTag,{value:"Module"})),wSe="collapseGroups",_Se="collapses useless groups",kL=(e,t)=>{if(e.type==="element"){if(Cl.animation.has(e.name)&&e.attributes.attributeName===t)return!0;for(const n of e.children)if(kL(n,t))return!0}return!1},kSe=e=>{const t=Da(e);return{element:{exit:(n,r)=>{if(!(r.type==="root"||r.name==="switch")&&!(n.name!=="g"||n.children.length===0)){if(Object.keys(n.attributes).length!==0&&n.children.length===1){const i=n.children[0],s=!!(n.attributes.filter||Ma(t,n).filter);if(i.type==="element"&&i.attributes.id==null&&!s&&(n.attributes.class==null||i.attributes.class==null)&&(n.attributes["clip-path"]==null&&n.attributes.mask==null||i.name==="g"&&n.attributes.transform==null&&i.attributes.transform==null)){const a={...i.attributes};for(const[o,u]of Object.entries(n.attributes)){if(kL(i,o))return;if(a[o]==null)a[o]=u;else if(o==="transform")a[o]=u+" "+a[o];else if(a[o]==="inherit")a[o]=u;else if(!b0.has(o)&&a[o]!==u)return}n.attributes={},i.attributes=a}}if(Object.keys(n.attributes).length===0){for(const s of n.children)if(s.type==="element"&&Cl.animation.has(s.name))return;const i=r.children.indexOf(n);r.children.splice(i,1,...n.children)}}}}}},SL=Object.freeze(Object.defineProperty({__proto__:null,description:_Se,fn:kSe,name:wSe},Symbol.toStringTag,{value:"Module"}));let Va;const Mg=e=>{if(e.pathJS)return e.pathJS;const t=[],n=r2(e.attributes.d);for(const{command:r,args:i}of n)t.push({command:r,args:i});return t.length&&t[0].command=="m"&&(t[0].command="M"),e.pathJS=t,t},tj=e=>{const t=[],n=[0,0],r=[0,0];for(let{command:i,args:s}of e)s=s.slice(),i==="m"&&(s[0]+=r[0],s[1]+=r[1],i="M"),i==="M"&&(r[0]=s[0],r[1]=s[1],n[0]=r[0],n[1]=r[1]),i==="h"&&(s[0]+=r[0],i="H"),i==="H"&&(r[0]=s[0]),i==="v"&&(s[0]+=r[1],i="V"),i==="V"&&(r[1]=s[0]),i==="l"&&(s[0]+=r[0],s[1]+=r[1],i="L"),i==="L"&&(r[0]=s[0],r[1]=s[1]),i==="c"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],s[4]+=r[0],s[5]+=r[1],i="C"),i==="C"&&(r[0]=s[4],r[1]=s[5]),i==="s"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],i="S"),i==="S"&&(r[0]=s[2],r[1]=s[3]),i==="q"&&(s[0]+=r[0],s[1]+=r[1],s[2]+=r[0],s[3]+=r[1],i="Q"),i==="Q"&&(r[0]=s[2],r[1]=s[3]),i==="t"&&(s[0]+=r[0],s[1]+=r[1],i="T"),i==="T"&&(r[0]=s[0],r[1]=s[1]),i==="a"&&(s[5]+=r[0],s[6]+=r[1],i="A"),i==="A"&&(r[0]=s[5],r[1]=s[6]),(i==="z"||i==="Z")&&(r[0]=n[0],r[1]=n[1],i="z"),t.push({command:i,args:s});return t},CL=function(e,t,n){e.pathJS=t;const r=[];for(const i of t){if(r.length!==0&&(i.command==="M"||i.command==="m")){const s=r[r.length-1];(s.command==="M"||s.command==="m")&&r.pop()}r.push({command:i.command,args:i.args})}e.attributes.d=uu({pathData:r,precision:n.floatPrecision,disableSpaceAfterFlags:n.noSpaceAfterFlags})};function Hc(e,t){return e[0]=t[t.length-2],e[1]=t[t.length-1],e}const EL=function(e,t){const n=nj(tj(e)),r=nj(tj(t));if(n.maxX<=r.minX||r.maxX<=n.minX||n.maxY<=r.minY||r.maxY<=n.minY||n.list.every(u=>r.list.every(d=>u.list[u.maxX][0]<=d.list[d.minX][0]||d.list[d.maxX][0]<=u.list[u.minX][0]||u.list[u.maxY][1]<=d.list[d.minY][1]||d.list[d.maxY][1]<=u.list[u.minY][1])))return!1;const i=n.list.map(rj),s=r.list.map(rj);return i.some(function(u){return u.list.length<3?!1:s.some(function(d){if(d.list.length<3)return!1;const h=[a(u,d,[1,0])],p=id(h[0]);let m=1e4;for(;;){if(m--==0)return console.error("Error: infinite loop while processing mergePaths plugin."),!0;if(h.push(a(u,d,p)),Jo(p,h[h.length-1])<=0)return!1;if(SSe(h,p))return!0}})});function a(u,d,h){return Sm(o(u,h),o(d,id(h)))}function o(u,d){let h=d[1]>=0?d[0]<0?u.maxY:u.maxX:d[0]<0?u.minX:u.minY,p=-1/0,m;for(;(m=Jo(u.list[h],d))>p;)p=m,h=++h%u.list.length;return u.list[(h||u.list.length)-1]}};function SSe(e,t){if(e.length==2){const n=e[1],r=e[0],i=id(e[1]),s=Sm(r,n);Jo(i,s)>0?Hc(t,Fb(s,n)):(Hc(t,i),e.shift())}else{const n=e[2],r=e[1],i=e[0],s=Sm(r,n),a=Sm(i,n),o=id(n),u=Fb(s,a),d=Fb(a,s);if(Jo(u,o)>0)Jo(s,o)>0?(Hc(t,u),e.shift()):(Hc(t,o),e.splice(0,2));else if(Jo(d,o)>0)Jo(a,o)>0?(Hc(t,d),e.splice(1,1)):(Hc(t,o),e.splice(0,2));else return!0}return!1}function id(e){return[-e[0],-e[1]]}function Sm(e,t){return[e[0]-t[0],e[1]-t[1]]}function Jo(e,t){return e[0]*t[0]+e[1]*t[1]}function Fb(e,t){const n=[-e[1],e[0]];return Jo(n,id(t))<0?id(n):n}function nj(e){const t={list:[],minX:0,minY:0,maxX:0,maxY:0},n=(i,s)=>{(!i.list.length||s[1]>i.list[i.maxY][1])&&(i.maxY=i.list.length,t.maxY=t.list.length?Math.max(s[1],t.maxY):s[1]),(!i.list.length||s[0]>i.list[i.maxX][0])&&(i.maxX=i.list.length,t.maxX=t.list.length?Math.max(s[0],t.maxX):s[0]),(!i.list.length||s[1]<i.list[i.minY][1])&&(i.minY=i.list.length,t.minY=t.list.length?Math.min(s[1],t.minY):s[1]),(!i.list.length||s[0]<i.list[i.minX][0])&&(i.minX=i.list.length,t.minX=t.list.length?Math.min(s[0],t.minX):s[0]),i.list.push(s)};for(let i=0;i<e.length;i+=1){const s=e[i];let a=t.list.length===0?{list:[],minX:0,minY:0,maxX:0,maxY:0}:t.list[t.list.length-1];const o=i===0?null:e[i-1];let u=a.list.length===0?null:a.list[a.list.length-1];const d=s.args;let h=u;const p=(m,g)=>m+(u==null?0:u[g%2]);switch(s.command){case"M":a={list:[],minX:0,minY:0,maxX:0,maxY:0},t.list.push(a);break;case"H":u!=null&&n(a,[d[0],u[1]]);break;case"V":u!=null&&n(a,[u[0],d[0]]);break;case"Q":n(a,d.slice(0,2)),Va=[d[2]-d[0],d[3]-d[1]];break;case"T":u!=null&&o!=null&&(o.command=="Q"||o.command=="T")&&(h=[u[0]+Va[0],u[1]+Va[1]],n(a,h),Va=[d[0]-h[0],d[1]-h[1]]);break;case"C":u!=null&&n(a,[.5*(u[0]+d[0]),.5*(u[1]+d[1])]),n(a,[.5*(d[0]+d[2]),.5*(d[1]+d[3])]),n(a,[.5*(d[2]+d[4]),.5*(d[3]+d[5])]),Va=[d[4]-d[2],d[5]-d[3]];break;case"S":u!=null&&o!=null&&(o.command=="C"||o.command=="S")&&(n(a,[u[0]+.5*Va[0],u[1]+.5*Va[1]]),h=[u[0]+Va[0],u[1]+Va[1]]),h!=null&&n(a,[.5*(h[0]+d[0]),.5*(h[1]+d[1])]),n(a,[.5*(d[0]+d[2]),.5*(d[1]+d[3])]),Va=[d[2]-d[0],d[3]-d[1]];break;case"A":if(u!=null){const m=TL.apply(0,u.concat(d));for(var r;(r=m.splice(0,6).map(p)).length;)u!=null&&n(a,[.5*(u[0]+r[0]),.5*(u[1]+r[1])]),n(a,[.5*(r[0]+r[2]),.5*(r[1]+r[3])]),n(a,[.5*(r[2]+r[4]),.5*(r[3]+r[5])]),m.length&&n(a,u=r.slice(-2))}break}d.length>=2&&n(a,d.slice(-2))}return t}function rj(e){e.list.sort(function(d,h){return d[0]==h[0]?d[1]-h[1]:d[0]-h[0]});const t=[];let n=0,r=0;for(let d=0;d<e.list.length;d++){for(;t.length>=2&&ij(t[t.length-2],t[t.length-1],e.list[d])<=0;)t.pop();e.list[d][1]<e.list[n][1]&&(n=d,r=t.length),t.push(e.list[d])}const i=[];let s=e.list.length-1,a=0;for(let d=e.list.length;d--;){for(;i.length>=2&&ij(i[i.length-2],i[i.length-1],e.list[d])<=0;)i.pop();e.list[d][1]>e.list[s][1]&&(s=d,a=i.length),i.push(e.list[d])}i.pop(),t.pop();const o=t.concat(i);return{list:o,minX:0,maxX:t.length,minY:r,maxY:(t.length+a)%o.length}}function ij(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}const TL=(e,t,n,r,i,s,a,o,u,d)=>{const h=Math.PI*120/180,p=Math.PI/180*(+i||0);let m=[];const g=(te,me,H)=>te*Math.cos(H)-me*Math.sin(H),v=(te,me,H)=>te*Math.sin(H)+me*Math.cos(H);if(d)x=d[0],k=d[1],w=d[2],S=d[3];else{e=g(e,t,-p),t=v(e,t,-p),o=g(o,u,-p),u=v(o,u,-p);const te=(e-o)/2,me=(t-u)/2;let H=te*te/(n*n)+me*me/(r*r);H>1&&(H=Math.sqrt(H),n=H*n,r=H*r);const ge=n*n,Ee=r*r,ke=(s==a?-1:1)*Math.sqrt(Math.abs((ge*Ee-ge*me*me-Ee*te*te)/(ge*me*me+Ee*te*te)));var w=ke*n*me/r+(e+o)/2,S=ke*-r*te/n+(t+u)/2,x=Math.asin(Number(((t-S)/r).toFixed(9))),k=Math.asin(Number(((u-S)/r).toFixed(9)));x=e<w?Math.PI-x:x,k=o<w?Math.PI-k:k,x<0&&(x=Math.PI*2+x),k<0&&(k=Math.PI*2+k),a&&x>k&&(x=x-Math.PI*2),!a&&k>x&&(k=k-Math.PI*2)}let j=k-x;if(Math.abs(j)>h){const te=k,me=o,H=u;k=x+h*(a&&k>x?1:-1),o=w+n*Math.cos(k),u=S+r*Math.sin(k),m=TL(o,u,n,r,i,0,a,me,H,[k,te,w,S])}j=k-x;const O=Math.cos(x),I=Math.sin(x),E=Math.cos(k),U=Math.sin(k),D=Math.tan(j/4),R=4/3*n*D,W=4/3*r*D,ce=[-R*I,W*O,o+R*U-e,u-W*E-t,o-e,u-t];if(d)return ce.concat(m);{m=ce.concat(m);const te=[];for(let me=0,H=m.length;me<H;me++)te[me]=me%2?v(m[me-1],m[me],p):g(m[me],m[me+1],p);return te}},CSe=new Set(["matrix","rotate","scale","skewX","skewY","translate"]),ESe=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,TSe=/[-+]?(?:\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,jL=e=>{const t=[];let n=null;for(const r of e.split(ESe))if(r)if(CSe.has(r))n={name:r,data:[]},t.push(n);else{let i;for(;i=TSe.exec(r);)i=Number(i),n!=null&&n.data.push(i)}return n==null||n.data.length==0?[]:t},AL=e=>{const t=e.map(r=>r.name==="matrix"?r.data:LSe(r));return{name:"matrix",data:t.length>0?t.reduce(PL):[]}},Ki={rad:e=>e*Math.PI/180,deg:e=>e*180/Math.PI,cos:e=>Math.cos(Ki.rad(e)),acos:(e,t)=>Co(Ki.deg(Math.acos(e)),t),sin:e=>Math.sin(Ki.rad(e)),asin:(e,t)=>Co(Ki.deg(Math.asin(e)),t),tan:e=>Math.tan(Ki.rad(e)),atan:(e,t)=>Co(Ki.deg(Math.atan(e)),t)},jSe=e=>{const t=[],n=ASe(e),r=PSe(e);return n&&t.push(n),r&&t.push(r),t},ASe=e=>{const t=e.data,[n,r,i,s,a,o]=t,u=n*s-r*i;if(u===0)return;const d=Math.hypot(n,r);if(d===0)return;const h=[],p=n/d;if((a||o)&&h.push({name:"translate",data:[a,o]}),p!==1){const w=Math.acos(p);h.push({name:"rotate",data:[Ki.deg(r<0?-w:w),0,0]})}const m=d,g=u/m;(m!==1||g!==1)&&h.push({name:"scale",data:[m,g]});const v=n*i+r*s;return v&&h.push({name:"skewX",data:[Ki.deg(Math.atan(v/(n*n+r*r)))]}),h},PSe=e=>{const t=e.data,[n,r,i,s,a,o]=t,u=n*s-r*i;if(u===0)return;const d=Math.hypot(i,s);if(d===0)return;const h=[];(a||o)&&h.push({name:"translate",data:[a,o]});const p=Math.PI/2-(s<0?-1:1)*Math.acos(-i/d);h.push({name:"rotate",data:[Ki.deg(p),0,0]});const m=u/d,g=d;(m!==1||g!==1)&&h.push({name:"scale",data:[m,g]});const v=n*i+r*s;return v&&h.push({name:"skewY",data:[Ki.deg(Math.atan(v/(i*i+s*s)))]}),h},NSe=(e,t,n)=>{const r=Ki.rad(n),i=1-Math.cos(r),s=Math.sin(r),a=(i*t+s*e)/(i*i+s*s),o=(e-s*a)/i;return{name:"rotate",data:[n,o,a]}},OSe=e=>{switch(e.name){case"rotate":case"skewX":case"skewY":return e.data[0]===0;case"scale":return e.data[0]===1&&e.data[1]===1;case"translate":return e.data[0]===0&&e.data[1]===0}return!1},RSe=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){const i=e[r];if(OSe(i))continue;const s=i.data;switch(i.name){case"rotate":switch(s[0]){case 180:case-180:{const a=e[r+1];a&&a.name==="scale"?(n.push(sj(a.data.map(o=>-o))),r++):n.push({name:"scale",data:[-1]})}continue}n.push({name:"rotate",data:s.slice(0,s[1]||s[2]?3:1)});break;case"scale":n.push(sj(s));break;case"skewX":case"skewY":n.push({name:i.name,data:[s[0]]});break;case"translate":{const a=e[r+1];if(a&&a.name==="rotate"&&a.data[0]!==180&&a.data[0]!==-180&&a.data[0]!==0&&a.data[1]===0&&a.data[2]===0){const o=t[r].data;n.push(NSe(o[0],o[1],t[r+1].data[0])),r++;continue}}n.push({name:"translate",data:s.slice(0,s[1]?2:1)});break}}return n.length?n:[{name:"scale",data:[1]}]},sj=e=>({name:"scale",data:e.slice(0,e[0]===e[1]?1:2)}),MSe=(e,t)=>{const n=jSe(e);let r,i=Number.MAX_VALUE;for(const s of n){const a=s.map(d=>{const h={name:d.name,data:[...d.data]};return $0(h,t)}),o=RSe(a,s),u=Lg(o,t).length;u<i&&(r=o,i=u)}return r??[e]},LSe=e=>{if(e.name==="matrix")return e.data;switch(e.name){case"translate":return[1,0,0,1,e.data[0],e.data[1]||0];case"scale":return[e.data[0],0,0,e.data[1]??e.data[0],0,0];case"rotate":var t=Ki.cos(e.data[0]),n=Ki.sin(e.data[0]),r=e.data[1]||0,i=e.data[2]||0;return[t,n,-n,t,(1-t)*r+n*i,(1-t)*i-n*r];case"skewX":return[1,0,Ki.tan(e.data[0]),1,0,0];case"skewY":return[1,Ki.tan(e.data[0]),0,1,0,0];default:throw Error(`Unknown transform ${e.name}`)}},aj=(e,t,n)=>{const r=t[5]-e[0],i=t[6]-e[1];let s=t[0],a=t[1];const o=t[2]*Math.PI/180,u=Math.cos(o),d=Math.sin(o);if(s>0&&a>0){let w=Math.pow(r*u+i*d,2)/(4*s*s)+Math.pow(i*u-r*d,2)/(4*a*a);w>1&&(w=Math.sqrt(w),s*=w,a*=w)}const h=[s*u,s*d,-a*d,a*u,0,0],p=PL(n,h),m=p[2]*p[2]+p[3]*p[3],g=p[0]*p[0]+p[1]*p[1]+m,v=Math.hypot(p[0]-p[3],p[1]+p[2])*Math.hypot(p[0]+p[3],p[1]-p[2]);if(!v)t[0]=t[1]=Math.sqrt(g/2),t[2]=0;else{const w=(g+v)/2,S=(g-v)/2,x=Math.abs(w-m)>1e-6,k=(x?w:S)-m,j=p[0]*p[2]+p[1]*p[3],O=p[0]*k+p[2]*j,I=p[1]*k+p[3]*j;t[0]=Math.sqrt(w),t[1]=Math.sqrt(S),t[2]=((x?I<0:O>0)?-1:1)*Math.acos((x?O:I)/Math.hypot(O,I))*180/Math.PI}return n[0]<0!=n[3]<0&&(t[4]=1-t[4]),t},PL=(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],$0=(e,t)=>{switch(e.name){case"translate":e.data=Bb(e.data,t);break;case"rotate":e.data=[...oj(e.data.slice(0,1),t),...Bb(e.data.slice(1),t)];break;case"skewX":case"skewY":e.data=oj(e.data,t);break;case"scale":e.data=lj(e.data,t);break;case"matrix":e.data=[...lj(e.data.slice(0,4),t),...Bb(e.data.slice(4),t)];break}return e},oj=(e,t)=>t.degPrecision!=null&&t.degPrecision>=1&&t.floatPrecision<20?s2(t.degPrecision,e):i2(e),Bb=(e,t)=>t.floatPrecision>=1&&t.floatPrecision<20?s2(t.floatPrecision,e):i2(e),lj=(e,t)=>t.transformPrecision>=1&&t.floatPrecision<20?s2(t.transformPrecision,e):i2(e),i2=e=>e.map(Math.round),s2=(e,t)=>{for(let n=t.length,r=+Math.pow(.1,e).toFixed(e);n--;)if(Co(t[n],e)!==t[n]){const i=+t[n].toFixed(e-1);t[n]=+Math.abs(i-t[n]).toFixed(e+1)>=r?+t[n].toFixed(e):i}return t},Lg=(e,t)=>e.map(r=>($0(r,t),`${r.name}(${rd(r.data,t)})`)).join(""),Ub=/[-+]?(\d*\.\d+|\d+\.?)(?:[eE][-+]?\d+)?/g,ISe=(e,t)=>{const n=Da(e);return{element:{enter:r=>{var m,g,v,w;if(r.attributes.d==null||r.attributes.id!=null||r.attributes.transform==null||r.attributes.transform===""||r.attributes.style!=null||Object.entries(r.attributes).some(([S,x])=>y0.has(S)&&I0(x)))return;const i=Ma(n,r),s=i.transform;if(s.type==="static"&&s.value!==r.attributes.transform)return;const a=AL(jL(r.attributes.transform)),o=((m=i.stroke)==null?void 0:m.type)==="static"?i.stroke.value:null,u=((g=i["stroke-width"])==null?void 0:g.type)==="static"?i["stroke-width"].value:null,d=t.transformPrecision;if(((v=i.stroke)==null?void 0:v.type)==="dynamic"||((w=i["stroke-width"])==null?void 0:w.type)==="dynamic")return;const h=Number(Math.hypot(a.data[0],a.data[1]).toFixed(d));if(o&&o!="none"){if(!t.applyTransformsStroked||(a.data[0]!==a.data[3]||a.data[1]!==-a.data[2])&&(a.data[0]!==-a.data[3]||a.data[1]!==a.data[2]))return;h!==1&&r.attributes["vector-effect"]!=="non-scaling-stroke"&&(r.attributes["stroke-width"]=(u||x_.presentation["stroke-width"]).trim().replace(Ub,S=>rc(Number(S)*h)),r.attributes["stroke-dashoffset"]!=null&&(r.attributes["stroke-dashoffset"]=r.attributes["stroke-dashoffset"].trim().replace(Ub,S=>rc(Number(S)*h))),r.attributes["stroke-dasharray"]!=null&&(r.attributes["stroke-dasharray"]=r.attributes["stroke-dasharray"].trim().replace(Ub,S=>rc(Number(S)*h))))}const p=Mg(r);$Se(p,a.data),delete r.attributes.transform}}}},la=(e,t,n)=>{const r=e[0]*t+e[2]*n+e[4],i=e[1]*t+e[3]*n+e[5];return[r,i]},ca=(e,t,n)=>{const r=e[0]*t+e[2]*n,i=e[1]*t+e[3]*n;return[r,i]},$Se=(e,t)=>{const n=[0,0],r=[0,0];for(const i of e){let{command:s,args:a}=i;if(s==="M"){r[0]=a[0],r[1]=a[1],n[0]=r[0],n[1]=r[1];const[o,u]=la(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="m"){r[0]+=a[0],r[1]+=a[1],n[0]=r[0],n[1]=r[1];const[o,u]=ca(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="H"&&(s="L",a=[a[0],r[1]]),s==="h"&&(s="l",a=[a[0],0]),s==="V"&&(s="L",a=[r[0],a[0]]),s==="v"&&(s="l",a=[0,a[0]]),s==="L"){r[0]=a[0],r[1]=a[1];const[o,u]=la(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="l"){r[0]+=a[0],r[1]+=a[1];const[o,u]=ca(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="C"){r[0]=a[4],r[1]=a[5];const[o,u]=la(t,a[0],a[1]),[d,h]=la(t,a[2],a[3]),[p,m]=la(t,a[4],a[5]);a[0]=o,a[1]=u,a[2]=d,a[3]=h,a[4]=p,a[5]=m}if(s==="c"){r[0]+=a[4],r[1]+=a[5];const[o,u]=ca(t,a[0],a[1]),[d,h]=ca(t,a[2],a[3]),[p,m]=ca(t,a[4],a[5]);a[0]=o,a[1]=u,a[2]=d,a[3]=h,a[4]=p,a[5]=m}if(s==="S"){r[0]=a[2],r[1]=a[3];const[o,u]=la(t,a[0],a[1]),[d,h]=la(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=d,a[3]=h}if(s==="s"){r[0]+=a[2],r[1]+=a[3];const[o,u]=ca(t,a[0],a[1]),[d,h]=ca(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=d,a[3]=h}if(s==="Q"){r[0]=a[2],r[1]=a[3];const[o,u]=la(t,a[0],a[1]),[d,h]=la(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=d,a[3]=h}if(s==="q"){r[0]+=a[2],r[1]+=a[3];const[o,u]=ca(t,a[0],a[1]),[d,h]=ca(t,a[2],a[3]);a[0]=o,a[1]=u,a[2]=d,a[3]=h}if(s==="T"){r[0]=a[0],r[1]=a[1];const[o,u]=la(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="t"){r[0]+=a[0],r[1]+=a[1];const[o,u]=ca(t,a[0],a[1]);a[0]=o,a[1]=u}if(s==="A"){if(aj(r,a,t),r[0]=a[5],r[1]=a[6],Math.abs(a[2])>80){const d=a[0],h=a[2];a[0]=a[1],a[1]=d,a[2]=h+(h>0?-90:90)}const[o,u]=la(t,a[5],a[6]);a[5]=o,a[6]=u}if(s==="a"){if(aj([0,0],a,t),r[0]+=a[5],r[1]+=a[6],Math.abs(a[2])>80){const d=a[0],h=a[2];a[0]=a[1],a[1]=d,a[2]=h+(h>0?-90:90)}const[o,u]=ca(t,a[5],a[6]);a[5]=o,a[6]=u}(s==="z"||s==="Z")&&(r[0]=n[0],r[1]=n[1]),i.command=s,i.args=a}},DSe="convertPathData",zSe="optimizes path data: writes in shorter form, applies transformations";let xo,xa,jr,a2,o2;const FSe=(e,t)=>{const{applyTransforms:n=!0,applyTransformsStroked:r=!0,makeArcs:i={threshold:2.5,tolerance:.5},straightCurves:s=!0,convertToQ:a=!0,lineShorthands:o=!0,convertToZ:u=!0,curveSmoothShorthands:d=!0,floatPrecision:h=3,transformPrecision:p=5,smartArcRounding:m=!0,removeUseless:g=!0,collapseRepeated:v=!0,utilizeAbsolute:w=!0,leadingZero:S=!0,negativeExtraSpace:x=!0,noSpaceAfterFlags:k=!1,forceAbsolutePath:j=!1}=t,O={applyTransforms:n,applyTransformsStroked:r,makeArcs:i,straightCurves:s,convertToQ:a,lineShorthands:o,convertToZ:u,curveSmoothShorthands:d,floatPrecision:h,transformPrecision:p,smartArcRounding:m,removeUseless:g,collapseRepeated:v,utilizeAbsolute:w,leadingZero:S,negativeExtraSpace:x,noSpaceAfterFlags:k,forceAbsolutePath:j};n&&oo(e,ISe(e,{transformPrecision:p,applyTransformsStroked:r}));const I=Da(e);return{element:{enter:E=>{var U,D;if(v_.has(E.name)&&E.attributes.d!=null){const R=Ma(I,E);xa=h,jr=xa!==!1?+Math.pow(.1,xa).toFixed(xa):.01,xo=xa&&xa>0&&xa<20?WSe:VSe,i&&(a2=i.threshold,o2=i.tolerance);const W=R["marker-mid"]!=null,ce=R.stroke&&(R.stroke.type==="dynamic"||R.stroke.value!=="none"),te=R["stroke-linecap"]&&(R["stroke-linecap"].type==="dynamic"||R["stroke-linecap"].value!=="butt"),me=ce&&te,H=ce?((U=R["stroke-linecap"])==null?void 0:U.type)==="static"&&R["stroke-linecap"].value==="round"&&((D=R["stroke-linejoin"])==null?void 0:D.type)==="static"&&R["stroke-linejoin"].value==="round":!0;let ge=Mg(E);if(ge.length){const Ee=ge.some(xe=>xe.command!=="m"&&xe.command!=="M");BSe(ge),ge=USe(ge,O,{isSafeToUseZ:H,maybeHasStrokeAndLinecap:me,hasMarkerMid:W}),w&&(ge=HSe(ge,O)),(E.attributes["marker-start"]!=null||E.attributes["marker-end"]!=null)&&Ee&&ge.every(xe=>xe.command==="m"||xe.command==="M")&&ge.push({command:"z",args:[]}),CL(E,ge,O)}}}}}},BSe=e=>{const t=[0,0],n=[0,0];let r=[0,0];for(let i=0;i<e.length;i+=1){const s=e[i];let{command:a,args:o}=s;a==="m"&&(n[0]+=o[0],n[1]+=o[1],t[0]=n[0],t[1]=n[1]),a==="M"&&(i!==0&&(a="m"),o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1],t[0]=n[0],t[1]=n[1]),a==="l"&&(n[0]+=o[0],n[1]+=o[1]),a==="L"&&(a="l",o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1]),a==="h"&&(n[0]+=o[0]),a==="H"&&(a="h",o[0]-=n[0],n[0]+=o[0]),a==="v"&&(n[1]+=o[0]),a==="V"&&(a="v",o[0]-=n[1],n[1]+=o[0]),a==="c"&&(n[0]+=o[4],n[1]+=o[5]),a==="C"&&(a="c",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],o[4]-=n[0],o[5]-=n[1],n[0]+=o[4],n[1]+=o[5]),a==="s"&&(n[0]+=o[2],n[1]+=o[3]),a==="S"&&(a="s",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],n[0]+=o[2],n[1]+=o[3]),a==="q"&&(n[0]+=o[2],n[1]+=o[3]),a==="Q"&&(a="q",o[0]-=n[0],o[1]-=n[1],o[2]-=n[0],o[3]-=n[1],n[0]+=o[2],n[1]+=o[3]),a==="t"&&(n[0]+=o[0],n[1]+=o[1]),a==="T"&&(a="t",o[0]-=n[0],o[1]-=n[1],n[0]+=o[0],n[1]+=o[1]),a==="a"&&(n[0]+=o[5],n[1]+=o[6]),a==="A"&&(a="a",o[5]-=n[0],o[6]-=n[1],n[0]+=o[5],n[1]+=o[6]),(a==="Z"||a==="z")&&(n[0]=t[0],n[1]=t[1]),s.command=a,s.args=o,s.base=r,s.coords=[n[0],n[1]],r=s.coords}return e};function USe(e,t,{isSafeToUseZ:n,maybeHasStrokeAndLinecap:r,hasMarkerMid:i}){const s=qSe.bind(null,t),a=[0,0],o=[0,0];let u={},d;return e=e.filter(function(h,p,m){const g=d;let v=h.command,w=h.args,S=m[p+1];if(v!=="Z"&&v!=="z"){let k=w,j;if(v==="s"){k=[0,0].concat(w);const I=u.args,E=I.length;k[0]=I[E-2]-I[E-4],k[1]=I[E-1]-I[E-3]}if(t.makeArcs&&(v=="c"||v=="s")&&Hb(k)&&(j=GSe(k))){const I=xo([j.radius])[0];let E=Vb(k,j);const U=k[5]*k[0]-k[4]*k[1]>0?1:0;let D={command:"a",args:[I,I,0,0,U,k[4],k[5]],coords:h.coords.slice(),base:h.base};const R=[D],W=[j.center[0]-k[4],j.center[1]-k[5]],ce={center:W,radius:j.radius},te=[h];let me=0,H="",ge;if(u.command=="c"&&Hb(u.args)&&dj(u.args,j)||u.command=="a"&&u.sdata&&dj(u.sdata,j)){te.unshift(u),D.base=u.base,D.args[5]=D.coords[0]-D.base[0],D.args[6]=D.coords[1]-D.base[1];const Ee=u.command=="a"?u.sdata:u.args,ke=Vb(Ee,{center:[Ee[4]+j.center[0],Ee[5]+j.center[1]],radius:j.radius});E+=ke,E>Math.PI&&(D.args[3]=1),me=1}for(var x=p;(S=m[++x])&&(S.command==="c"||S.command==="s");){let Ee=S.args;if(S.command=="s"&&(ge=Xd({command:"s",args:S.args.slice()},m[x-1].args),Ee=ge.args,ge.args=Ee.slice(0,2),H=s([ge])),Hb(Ee)&&OL(Ee,ce)){if(E+=Vb(Ee,ce),E-2*Math.PI>.001)break;if(E>Math.PI&&(D.args[3]=1),te.push(S),2*Math.PI-E>.001)D.coords=S.coords,D.args[5]=D.coords[0]-D.base[0],D.args[6]=D.coords[1]-D.base[1];else{D.args[5]=2*(ce.center[0]-Ee[4]),D.args[6]=2*(ce.center[1]-Ee[5]),D.coords=[D.base[0]+D.args[5],D.base[1]+D.args[6]],D={command:"a",args:[I,I,0,0,U,S.coords[0]-D.coords[0],S.coords[1]-D.coords[1]],coords:S.coords,base:D.coords},R.push(D),x++;break}W[0]-=Ee[4],W[1]-=Ee[5]}else break}if((s(R)+H).length<s(te).length){if(m[x]&&m[x].command=="s"&&Xd(m[x],m[x-1].args),me){const Ee=R.shift();xo(Ee.args),a[0]+=Ee.args[5]-u.args[u.args.length-2],a[1]+=Ee.args[6]-u.args[u.args.length-1],u.command="a",u.args=Ee.args,h.base=u.coords=Ee.coords}if(D=R.shift(),te.length==1?h.sdata=k.slice():te.length-1-me>0&&m.splice(p+1,te.length-1-me,...R),!D)return!1;v="a",w=D.args,h.coords=D.coords}}if(xa!==!1){if(v==="m"||v==="l"||v==="t"||v==="q"||v==="s"||v==="c")for(let I=w.length;I--;)w[I]+=h.base[I%2]-a[I%2];else v=="h"?w[0]+=h.base[0]-a[0]:v=="v"?w[0]+=h.base[1]-a[1]:v=="a"&&(w[5]+=h.base[0]-a[0],w[6]+=h.base[1]-a[1]);xo(w),v=="h"?a[0]+=w[0]:v=="v"?a[1]+=w[0]:(a[0]+=w[w.length-2],a[1]+=w[w.length-1]),xo(a),(v==="M"||v==="m")&&(o[0]=a[0],o[1]=a[1])}const O=v==="a"?cj(w):void 0;if(t.smartArcRounding&&O!==void 0&&xa)for(let I=xa;I>=0;I--){const E=Co(w[0],I),U=cj([E,E,...w.slice(2)]);if(Math.abs(O-U)<jr)w[0]=E,w[1]=E;else break}if(t.straightCurves&&(v==="c"&&Wb(w)||v==="s"&&Wb(k)?(S&&S.command=="s"&&Xd(S,w),v="l",w=w.slice(-2)):v==="q"&&Wb(w)?(S&&S.command=="t"&&Xd(S,w),v="l",w=w.slice(-2)):(v==="t"&&u.command!=="q"&&u.command!=="t"||v==="a"&&(w[0]===0||w[1]===0||O!==void 0&&O<jr))&&(v="l",w=w.slice(-2))),t.convertToQ&&v=="c"){const I=.75*(h.base[0]+w[0])-.25*h.base[0],E=.75*(h.base[0]+w[2])-.25*(h.base[0]+w[4]);if(Math.abs(I-E)<jr*2){const U=.75*(h.base[1]+w[1])-.25*h.base[1],D=.75*(h.base[1]+w[3])-.25*(h.base[1]+w[5]);if(Math.abs(U-D)<jr*2){const R=w.slice();R.splice(0,4,I+E-h.base[0],U+D-h.base[1]),xo(R);const W=rd(w,t).length;rd(R,t).length<W&&(v="q",w=R,S&&S.command=="s"&&Xd(S,w))}}}if(t.lineShorthands&&v==="l"&&(w[1]===0?(v="h",w.pop()):w[0]===0&&(v="v",w.shift())),t.collapseRepeated&&i===!1&&(v==="m"||v==="h"||v==="v")&&u.command&&v==u.command.toLowerCase()&&(v!="h"&&v!="v"||u.args[0]>=0==w[0]>=0))return u.args[0]+=w[0],v!="h"&&v!="v"&&(u.args[1]+=w[1]),u.coords=h.coords,m[p]=u,!1;if(t.curveSmoothShorthands&&u.command){if(v==="c")(u.command==="c"&&Math.abs(w[0]- -(u.args[2]-u.args[4]))<jr&&Math.abs(w[1]- -(u.args[3]-u.args[5]))<jr||u.command==="s"&&Math.abs(w[0]- -(u.args[0]-u.args[2]))<jr&&Math.abs(w[1]- -(u.args[1]-u.args[3]))<jr||u.command!=="c"&&u.command!=="s"&&Math.abs(w[0])<jr&&Math.abs(w[1])<jr)&&(v="s",w=w.slice(2));else if(v==="q"){if(u.command==="q"&&Math.abs(w[0]-(u.args[2]-u.args[0]))<jr&&Math.abs(w[1]-(u.args[3]-u.args[1]))<jr)v="t",w=w.slice(2);else if(u.command==="t"){const I=uj(g,h.base),E=[w[0]+h.base[0],w[1]+h.base[1]];Math.abs(I[0]-E[0])<jr&&Math.abs(I[1]-E[1])<jr&&(v="t",w=w.slice(2))}}}if(t.removeUseless&&!r&&((v==="l"||v==="h"||v==="v"||v==="q"||v==="t"||v==="c"||v==="s")&&w.every(function(I){return I===0})||v==="a"&&w[5]===0&&w[6]===0))return m[p]=u,!1;t.convertToZ&&(n||(S==null?void 0:S.command)==="Z"||(S==null?void 0:S.command)==="z")&&(v==="l"||v==="h"||v==="v")&&Math.abs(o[0]-h.coords[0])<jr&&Math.abs(o[1]-h.coords[1])<jr&&(v="z",w=[]),h.command=v,h.args=w}else if(a[0]=o[0],a[1]=o[1],u.command==="Z"||u.command==="z")return!1;return(v==="Z"||v==="z")&&t.removeUseless&&n&&Math.abs(h.base[0]-h.coords[0])<jr/10&&Math.abs(h.base[1]-h.coords[1])<jr/10?!1:(v==="q"?d=[w[0]+h.base[0],w[1]+h.base[1]]:v==="t"?g?d=uj(g,h.base):d=h.coords:d=void 0,u=h,!0)}),e}function HSe(e,t){let n=e[0];return e=e.filter(function(r,i){if(i==0)return!0;if(r.command==="Z"||r.command==="z")return n=r,!0;const s=r.command,a=r.args,o=a.slice(),u=a.slice();if(s==="m"||s==="l"||s==="t"||s==="q"||s==="s"||s==="c")for(let p=o.length;p--;)o[p]+=r.base[p%2];else s=="h"?o[0]+=r.base[0]:s=="v"?o[0]+=r.base[1]:s=="a"&&(o[5]+=r.base[0],o[6]+=r.base[1]);xo(o),xo(u);const d=rd(o,t),h=rd(u,t);return(t.forceAbsolutePath||d.length<h.length&&!(t.negativeExtraSpace&&s==n.command&&n.command.charCodeAt(0)>96&&d.length==h.length-1&&(a[0]<0||Math.floor(a[0])===0&&!Number.isInteger(a[0])&&n.args[n.args.length-1]%1)))&&(r.command=s.toUpperCase(),r.args=o),n=r,!0}),e}function Hb(e){const t=NL([0,0,e[2],e[3],e[0],e[1],e[4],e[5]]);return t!=null&&e[2]<t[0]==t[0]<0&&e[3]<t[1]==t[1]<0&&e[4]<t[0]==t[0]<e[0]&&e[5]<t[1]==t[1]<e[1]}function NL(e){const t=e[1]-e[3],n=e[2]-e[0],r=e[0]*e[3]-e[2]*e[1],i=e[5]-e[7],s=e[6]-e[4],a=e[4]*e[7]-e[5]*e[6],o=t*s-i*n;if(!o)return;const u=[(n*a-s*r)/o,(t*a-i*r)/-o];if(!isNaN(u[0])&&!isNaN(u[1])&&isFinite(u[0])&&isFinite(u[1]))return u}function WSe(e){const t=xa||0;for(let n=e.length;n-- >0;){const r=Co(e[n],t);if(r!==e[n]){const i=Co(e[n],t-1);e[n]=Co(Math.abs(i-e[n]),t+1)>=jr?r:i}}return e}function VSe(e){for(let t=e.length;t-- >0;)e[t]=Math.round(e[t]);return e}function Wb(e){let t=e.length-2;const n=-e[t+1],r=e[t],i=1/(n*n+r*r);if(t<=1||!isFinite(i))return!1;for(;(t-=2)>=0;)if(Math.sqrt(Math.pow(n*e[t]+r*e[t+1],2)*i)>jr)return!1;return!0}function cj(e){if(e[3]===1)return;const[t,n]=e;if(Math.abs(t-n)>jr)return;const r=Math.hypot(e[5],e[6]);if(!(r>t*2))return t-Math.sqrt(t**2-.25*r**2)}function Xd(e,t){switch(e.command){case"s":e.command="c";break;case"t":e.command="q";break}return e.args.unshift(t[t.length-2]-t[t.length-4],t[t.length-1]-t[t.length-3]),e}function l1(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function uj(e,t){return[2*t[0]-e[0],2*t[1]-e[1]]}function c1(e,t){const n=t*t,r=n*t,i=1-t,s=i*i;return[3*s*t*e[0]+3*i*n*e[2]+r*e[4],3*s*t*e[1]+3*i*n*e[3]+r*e[5]]}function GSe(e){const t=c1(e,.5),n=[t[0]/2,t[1]/2],r=[(t[0]+e[4])/2,(t[1]+e[5])/2],i=NL([n[0],n[1],n[0]+n[1],n[1]-n[0],r[0],r[1],r[0]+(r[1]-t[1]),r[1]-(r[0]-t[0])]),s=i&&l1([0,0],i),a=Math.min(a2*jr,o2*s/100);if(i&&s<1e15&&[1/4,3/4].every(function(o){return Math.abs(l1(c1(e,o),i)-s)<=a}))return{center:i,radius:s}}function OL(e,t){const n=Math.min(a2*jr,o2*t.radius/100);return[0,1/4,1/2,3/4,1].every(function(r){return Math.abs(l1(c1(e,r),t.center)-t.radius)<=n})}function dj(e,t){return OL(e,{center:[t.center[0]+e[4],t.center[1]+e[5]],radius:t.radius})}function Vb(e,t){const n=-t.center[0],r=-t.center[1],i=e[4]-t.center[0],s=e[5]-t.center[1];return Math.acos((n*i+r*s)/Math.sqrt((n*n+r*r)*(i*i+s*s)))}function qSe(e,t){return t.reduce(function(n,r){let i="";return r.args&&(i=rd(xo(r.args.slice()),e)),n+r.command+i},"")}const RL=Object.freeze(Object.defineProperty({__proto__:null,description:zSe,fn:FSe,name:DSe},Symbol.toStringTag,{value:"Module"})),YSe="convertTransform",XSe="collapses multiple transformations and optimizes it",KSe=(e,t)=>{const{convertToShorts:n=!0,degPrecision:r,floatPrecision:i=3,transformPrecision:s=5,matrixToTransform:a=!0,shortTranslate:o=!0,shortScale:u=!0,shortRotate:d=!0,removeUseless:h=!0,collapseIntoOne:p=!0,leadingZero:m=!0,negativeExtraSpace:g=!1}=t,v={convertToShorts:n,degPrecision:r,floatPrecision:i,transformPrecision:s,matrixToTransform:a,shortTranslate:o,shortScale:u,shortRotate:d,removeUseless:h,collapseIntoOne:p,leadingZero:m,negativeExtraSpace:g};return{element:{enter:w=>{w.attributes.transform!=null&&Gb(w,"transform",v),w.attributes.gradientTransform!=null&&Gb(w,"gradientTransform",v),w.attributes.patternTransform!=null&&Gb(w,"patternTransform",v)}}}},Gb=(e,t,n)=>{let r=jL(e.attributes[t]);n=ZSe(r,n),n.collapseIntoOne&&r.length>1&&(r=[AL(r)]),n.convertToShorts?r=JSe(r,n):r.forEach(i=>$0(i,n)),n.removeUseless&&(r=eCe(r)),r.length?e.attributes[t]=Lg(r,n):delete e.attributes[t]},ZSe=(e,{...t})=>{const n=[];for(const i of e)i.name=="matrix"&&n.push(...i.data.slice(0,4));let r=t.transformPrecision;return n.length&&(t.transformPrecision=Math.min(t.transformPrecision,Math.max.apply(Math,n.map(QSe))||t.transformPrecision),r=Math.max.apply(Math,n.map(i=>i.toString().replace(/\D+/g,"").length))),t.degPrecision==null&&(t.degPrecision=Math.max(0,Math.min(t.floatPrecision,r-2))),t},QSe=e=>{const t=e.toString();return t.slice(t.indexOf(".")).length-1},JSe=(e,t)=>{var n;for(let r=0;r<e.length;r++){let i=e[r];if(t.matrixToTransform&&i.name==="matrix"){const s=MSe(i,t);Lg(s,t).length<=Lg([i],t).length&&e.splice(r,1,...s),i=e[r]}$0(i,t),t.shortTranslate&&i.name==="translate"&&i.data.length===2&&!i.data[1]&&i.data.pop(),t.shortScale&&i.name==="scale"&&i.data.length===2&&i.data[0]===i.data[1]&&i.data.pop(),t.shortRotate&&((n=e[r-2])==null?void 0:n.name)==="translate"&&e[r-1].name==="rotate"&&e[r].name==="translate"&&e[r-2].data[0]===-e[r].data[0]&&e[r-2].data[1]===-e[r].data[1]&&(e.splice(r-2,3,{name:"rotate",data:[e[r-1].data[0],e[r-2].data[0],e[r-2].data[1]]}),r-=2)}return e},eCe=e=>e.filter(t=>!(["translate","rotate","skewX","skewY"].indexOf(t.name)>-1&&(t.data.length==1||t.name=="rotate")&&!t.data[0]||t.name=="translate"&&!t.data[0]&&!t.data[1]||t.name=="scale"&&t.data[0]==1&&(t.data.length<2||t.data[1]==1)||t.name=="matrix"&&t.data[0]==1&&t.data[3]==1&&!(t.data[1]||t.data[2]||t.data[4]||t.data[5]))),ML=Object.freeze(Object.defineProperty({__proto__:null,description:XSe,fn:KSe,name:YSe},Symbol.toStringTag,{value:"Module"})),tCe="removeEmptyAttrs",nCe="removes empty attributes",rCe=()=>({element:{enter:e=>{for(const[t,n]of Object.entries(e.attributes))n===""&&!Ui.conditionalProcessing.has(t)&&delete e.attributes[t]}}}),LL=Object.freeze(Object.defineProperty({__proto__:null,description:nCe,fn:rCe,name:tCe},Symbol.toStringTag,{value:"Module"})),iCe="removeEmptyContainers",sCe="removes empty container elements",aCe=e=>{const t=Da(e);return{element:{exit:(n,r)=>{n.name==="svg"||!Cl.container.has(n.name)||n.children.length!==0||n.name==="pattern"&&Object.keys(n.attributes).length!==0||n.name==="mask"&&n.attributes.id!=null||r.type==="element"&&r.name==="switch"||n.name==="g"&&(n.attributes.filter!=null||Ma(t,n).filter)||Dn(n,r)}}}},IL=Object.freeze(Object.defineProperty({__proto__:null,description:sCe,fn:aCe,name:iCe},Symbol.toStringTag,{value:"Module"})),oCe="mergePaths",lCe="merges multiple paths in one if possible";function cCe(e,t){const n=e[t];return(n==null?void 0:n.type)==="static"?I0(n.value):!1}const uCe=(e,t)=>{const{force:n=!1,floatPrecision:r=3,noSpaceAfterFlags:i=!1}=t,s=Da(e);return{element:{enter:a=>{if(a.children.length<=1)return;const o=[];let u=a.children[0],d=null;const h=(p,m)=>{CL(p,m,{floatPrecision:r,noSpaceAfterFlags:i}),d=null};for(let p=1;p<a.children.length;p++){const m=a.children[p];if(u.type!=="element"||u.name!=="path"||u.children.length!==0||u.attributes.d==null){d&&u.type==="element"&&h(u,d),u=m;continue}if(m.type!=="element"||m.name!=="path"||m.children.length!==0||m.attributes.d==null){d&&h(u,d),u=m;continue}const g=Ma(s,m);if(g["marker-start"]||g["marker-mid"]||g["marker-end"]||g["clip-path"]||g.mask||g["mask-image"]||["fill","filter","stroke"].some(k=>cCe(g,k))){d&&h(u,d),u=m;continue}const v=Object.keys(m.attributes);if(v.length!==Object.keys(u.attributes).length){d&&h(u,d),u=m;continue}if(v.some(k=>k!=="d"&&u.type==="element"&&u.attributes[k]!==m.attributes[k])){d&&h(u,d),u=m;continue}const S=d!=null,x=Mg(m);if(d=d??Mg(u),n||!EL(d,x)){d.push(...x),o.push(m);continue}S&&h(u,d),u=m,d=null}d&&u.type==="element"&&h(u,d),a.children=a.children.filter(p=>!o.includes(p))}}}},$L=Object.freeze(Object.defineProperty({__proto__:null,description:lCe,fn:uCe,name:oCe},Symbol.toStringTag,{value:"Module"})),dCe="removeUnusedNS",hCe="removes unused namespaces declaration",fCe=()=>{const e=new Set;return{element:{enter:(t,n)=>{if(t.name==="svg"&&n.type==="root"){for(const r of Object.keys(t.attributes))if(r.startsWith("xmlns:")){const i=r.slice(6);e.add(i)}}if(e.size!==0){if(t.name.includes(":")){const[r]=t.name.split(":");e.has(r)&&e.delete(r)}for(const r of Object.keys(t.attributes))if(r.includes(":")){const[i]=r.split(":");e.delete(i)}}},exit:(t,n)=>{if(t.name==="svg"&&n.type==="root")for(const r of e)delete t.attributes[`xmlns:${r}`]}}}},DL=Object.freeze(Object.defineProperty({__proto__:null,description:hCe,fn:fCe,name:dCe},Symbol.toStringTag,{value:"Module"})),pCe="sortAttrs",mCe="Sort element attributes for better compression",gCe=(e,t)=>{const{order:n=["id","width","height","x","x1","x2","y","y1","y2","cx","cy","r","fill","stroke","marker","d","points"],xmlnsOrder:r="front"}=t,i=a=>{if(r==="front"){if(a==="xmlns")return 3;if(a.startsWith("xmlns:"))return 2}return a.includes(":")?1:0},s=([a],[o])=>{const u=i(a),h=i(o)-u;if(h!==0)return h;const[p]=a.split("-"),[m]=o.split("-");if(p!==m){const g=n.includes(p)?1:0,v=n.includes(m)?1:0;if(g===1&&v===1)return n.indexOf(p)-n.indexOf(m);const w=v-g;if(w!==0)return w}return a<o?-1:1};return{element:{enter:a=>{const o=Object.entries(a.attributes);o.sort(s);const u={};for(const[d,h]of o)u[d]=h;a.attributes=u}}}},zL=Object.freeze(Object.defineProperty({__proto__:null,description:mCe,fn:gCe,name:pCe},Symbol.toStringTag,{value:"Module"})),yCe="sortDefsChildren",bCe="Sorts children of <defs> to improve compression",vCe=()=>({element:{enter:e=>{if(e.name==="defs"){const t=new Map;for(const n of e.children)if(n.type==="element"){const r=t.get(n.name);r==null?t.set(n.name,1):t.set(n.name,r+1)}e.children.sort((n,r)=>{if(n.type!=="element"||r.type!=="element")return 0;const i=t.get(n.name),s=t.get(r.name);if(i!=null&&s!=null){const o=s-i;if(o!==0)return o}const a=r.name.length-n.name.length;return a!==0?a:n.name!==r.name?n.name>r.name?-1:1:0})}}}}),FL=Object.freeze(Object.defineProperty({__proto__:null,description:bCe,fn:vCe,name:yCe},Symbol.toStringTag,{value:"Module"})),xCe="removeDesc",wCe="removes <desc>",_Ce=/^(Created with|Created using)/,kCe=(e,t)=>{const{removeAny:n=!1}=t;return{element:{enter:(r,i)=>{r.name==="desc"&&(n||r.children.length===0||r.children[0].type==="text"&&_Ce.test(r.children[0].value))&&Dn(r,i)}}}},BL=Object.freeze(Object.defineProperty({__proto__:null,description:wCe,fn:kCe,name:xCe},Symbol.toStringTag,{value:"Module"})),SCe=Boe({name:"preset-default",plugins:[bR,vR,xR,Y6,X6,K6,Z6,Q6,J6,nL,iL,aL,oL,lL,dL,hL,fL,pL,yL,bL,vL,xL,wL,_L,SL,RL,ML,LL,IL,$L,DL,zL,FL,BL]}),CCe="addAttributesToSVGElement",ECe="adds attributes to an outer <svg> element",TCe=`Error in plugin "addAttributesToSVGElement": absent parameters.
It should have a list of "attributes" or one "attribute".
Config example:

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attribute: "mySvg"
    }
  }
]

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attributes: ["mySvg", "size-big"]
    }
  }
]

plugins: [
  {
    name: 'addAttributesToSVGElement',
    params: {
      attributes: [
        {
          focusable: false
        },
        {
          'data-image': icon
        }
      ]
    }
  }
]
`,jCe=(e,t)=>{if(!Array.isArray(t.attributes)&&!t.attribute)return console.error(TCe),null;const n=t.attributes||[t.attribute];return{element:{enter:(r,i)=>{if(r.name==="svg"&&i.type==="root"){for(const s of n)if(typeof s=="string"&&r.attributes[s]==null&&(r.attributes[s]=void 0),typeof s=="object")for(const a of Object.keys(s))r.attributes[a]==null&&(r.attributes[a]=s[a])}}}}},ACe=Object.freeze(Object.defineProperty({__proto__:null,description:ECe,fn:jCe,name:CCe},Symbol.toStringTag,{value:"Module"})),PCe="addClassesToSVGElement",NCe="adds classnames to an outer <svg> element",OCe=`Error in plugin "addClassesToSVGElement": absent parameters.
It should have a list of classes in "classNames" or one "className".
Config example:

plugins: [
  {
    name: "addClassesToSVGElement",
    params: {
      className: "mySvg"
    }
  }
]

plugins: [
  {
    name: "addClassesToSVGElement",
    params: {
      classNames: ["mySvg", "size-big"]
    }
  }
]
`,RCe=(e,t,n)=>{if(!(Array.isArray(t.classNames)&&t.classNames.length!==0)&&!t.className)return console.error(OCe),null;const r=t.classNames||[t.className];return{element:{enter:(i,s)=>{if(i.name==="svg"&&s.type==="root"){const a=new Set(i.attributes.class==null?null:i.attributes.class.split(" "));for(const o of r)if(o!=null){const u=typeof o=="string"?o:o(i,n);a.add(u)}i.attributes.class=Array.from(a).join(" ")}}}}},MCe=Object.freeze(Object.defineProperty({__proto__:null,description:NCe,fn:RCe,name:PCe},Symbol.toStringTag,{value:"Module"})),LCe="cleanupListOfValues",ICe="rounds list of values to the fixed precision",$Ce=/^([-+]?\d*\.?\d+([eE][-+]?\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/,DCe=/\s+,?\s*|,\s*/,hj={cm:96/2.54,mm:96/25.4,in:96,pt:4/3,pc:16,px:1},zCe=(e,t)=>{const{floatPrecision:n=3,leadingZero:r=!0,defaultPx:i=!0,convertToPx:s=!0}=t,a=o=>{const u=[];for(const d of o.split(DCe)){const h=d.match($Ce),p=d.match(/new/);if(h){let m=Number(Number(h[1]).toFixed(n)),v=h[3]||"";if(s&&v&&v in hj){const S=Number((hj[v]*Number(h[1])).toFixed(n));S.toString().length<h[0].length&&(m=S,v="px")}let w;r?w=rc(m):w=m.toString(),i&&v==="px"&&(v=""),u.push(w+v)}else p?u.push("new"):d&&u.push(d)}return u.join(" ")};return{element:{enter:o=>{o.attributes.points!=null&&(o.attributes.points=a(o.attributes.points)),o.attributes["enable-background"]!=null&&(o.attributes["enable-background"]=a(o.attributes["enable-background"])),o.attributes.viewBox!=null&&(o.attributes.viewBox=a(o.attributes.viewBox)),o.attributes["stroke-dasharray"]!=null&&(o.attributes["stroke-dasharray"]=a(o.attributes["stroke-dasharray"])),o.attributes.dx!=null&&(o.attributes.dx=a(o.attributes.dx)),o.attributes.dy!=null&&(o.attributes.dy=a(o.attributes.dy)),o.attributes.x!=null&&(o.attributes.x=a(o.attributes.x)),o.attributes.y!=null&&(o.attributes.y=a(o.attributes.y))}}}},FCe=Object.freeze(Object.defineProperty({__proto__:null,description:ICe,fn:zCe,name:LCe},Symbol.toStringTag,{value:"Module"})),BCe="convertOneStopGradients",UCe="converts one-stop (single color) gradients to a plain color",HCe=e=>{const t=Da(e),n=new Set,r=new Map,i=new Map;let s=0;return{element:{enter:(a,o)=>{if(a.attributes["xlink:href"]!=null&&s++,a.name==="defs"){r.set(a,o);return}if(a.name!=="linearGradient"&&a.name!=="radialGradient")return;const u=a.children.filter(k=>k.type==="element"&&k.name==="stop"),d=a.attributes["xlink:href"]||a.attributes.href,h=u.length===0&&d!=null&&d.startsWith("#")?yR(e,d):a;if(h==null||h.type!=="element"){i.set(a,o);return}const p=h.children.filter(k=>k.type==="element"&&k.name==="stop");if(p.length!==1||p[0].type!=="element")return;o.type==="element"&&o.name==="defs"&&n.add(o),i.set(a,o);let m;const g=Ma(t,p[0])["stop-color"];g!=null&&g.type==="static"&&(m=g.value);const v=`url(#${a.attributes.id})`,w=[...Tx].map(k=>`[${k}="${v}"]`).join(","),S=df(e,w);for(const k of S)if(k.type==="element")for(const j of Tx)k.attributes[j]===v&&(m!=null?k.attributes[j]=m:delete k.attributes[j]);const x=df(e,`[style*=${v}]`);for(const k of x)k.type==="element"&&(k.attributes.style=k.attributes.style.replace(v,m||x_.presentation["stop-color"]))},exit:a=>{if(a.name==="svg"){for(const[o,u]of i.entries())o.attributes["xlink:href"]!=null&&s--,Dn(o,u);s===0&&delete a.attributes["xmlns:xlink"];for(const[o,u]of r.entries())n.has(o)&&o.children.length===0&&Dn(o,u)}}}}},WCe=Object.freeze(Object.defineProperty({__proto__:null,description:UCe,fn:HCe,name:BCe},Symbol.toStringTag,{value:"Module"})),VCe="convertStyleToAttrs",GCe="converts style to attributes",Ff=(...e)=>"(?:"+e.join("|")+")",qCe=Ui.presentation,Cd="\\\\(?:[0-9a-f]{1,6}\\s?|\\r\\n|.)",YCe="\\s*("+Ff("[^:;\\\\]",Cd)+"*?)\\s*",D0="'(?:[^'\\n\\r\\\\]|"+Cd+")*?(?:'|$)",z0='"(?:[^"\\n\\r\\\\]|'+Cd+')*?(?:"|$)',XCe=new RegExp("^"+Ff(D0,z0)+"$"),KCe="\\("+Ff(`[^'"()\\\\]+`,Cd,D0,z0)+"*?\\)",ZCe="\\s*("+Ff(`[^!'"();\\\\]+?`,Cd,D0,z0,KCe,"[^;]*?")+"*?)",QCe="\\s*(?:;\\s*|$)",JCe="(\\s*!important(?![-(\\w]))?",fj=new RegExp(YCe+":"+ZCe+JCe+QCe,"ig"),eEe=new RegExp(Ff(Cd,D0,z0,"/\\*[^]*?\\*/"),"ig"),tEe=(e,t)=>{const{keepImportant:n=!1}=t;return{element:{enter:r=>{if(r.attributes.style!=null){let s=[];const a={},o=r.attributes.style.replace(eEe,u=>u[0]=="/"?"":u[0]=="\\"&&/[-g-z]/i.test(u[1])?u[1]:u);fj.lastIndex=0;for(var i;i=fj.exec(o);)(!n||!i[3])&&s.push([i[1],i[2]]);s.length&&(s=s.filter(function(u){if(u[0]){const d=u[0].toLowerCase();let h=u[1];if(XCe.test(h)&&(h=h.slice(1,-1)),qCe.has(d))return a[d]=h,!1}return!0}),Object.assign(r.attributes,a),s.length?r.attributes.style=s.map(u=>u.join(":")).join(";"):delete r.attributes.style)}}}}},nEe=Object.freeze(Object.defineProperty({__proto__:null,description:GCe,fn:tEe,name:VCe},Symbol.toStringTag,{value:"Module"})),rEe="prefixIds",iEe="prefix IDs",sEe=e=>{const t=/[/\\]?([^/\\]+)$/.exec(e);return t?t[1]:""},aEe=e=>e.replace(/[. ]/g,"_"),oEe=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e,xh=(e,t)=>{const n=e(t);return t.startsWith(n)?t:n+t},qb=(e,t)=>t.startsWith("#")?"#"+xh(e,t.slice(1)):null,lEe=(e,t,n,r,i,s)=>{if(typeof r=="function"){let a=s.get(e);return a!=null||(a=r(t,n)+i,s.set(e,a)),a}return typeof r=="string"?r+i:r===!1?"":n.path!=null&&n.path.length>0?aEe(sEe(n.path))+i:"prefix"+i},cEe=(e,t,n)=>{const{delim:r="__",prefix:i,prefixIds:s=!0,prefixClassNames:a=!0}=t,o=new Map;return{element:{enter:u=>{const d=h=>lEe(h,u,n,i,r,o);if(u.name==="style"){if(u.children.length===0)return;for(const h of u.children){if(h.type!=="text"&&h.type!=="cdata")continue;const p=h.value;let m;try{m=Zu(p,{parseValue:!0,parseCustomProperty:!1})}catch{return}Gs(m,g=>{if(s&&g.type==="IdSelector"||a&&g.type==="ClassSelector"){g.name=xh(d,g.name);return}if(g.type==="Url"&&g.value.length>0){const v=qb(d,oEe(g.value));v!=null&&(g.value=v)}}),h.value=js(m)}}s&&u.attributes.id!=null&&u.attributes.id.length!==0&&(u.attributes.id=xh(d,u.attributes.id)),a&&u.attributes.class!=null&&u.attributes.class.length!==0&&(u.attributes.class=u.attributes.class.split(/\s+/).map(h=>xh(d,h)).join(" "));for(const h of["href","xlink:href"])if(u.attributes[h]!=null&&u.attributes[h].length!==0){const p=qb(d,u.attributes[h]);p!=null&&(u.attributes[h]=p)}for(const h of y0)u.attributes[h]!=null&&u.attributes[h].length!==0&&(u.attributes[h]=u.attributes[h].replace(/\burl\((["'])?(#.+?)\1\)/gi,(p,m,g)=>{const v=qb(d,g);return v==null?p:`url(${v})`}));for(const h of["begin","end"])if(u.attributes[h]!=null&&u.attributes[h].length!==0){const p=u.attributes[h].split(/\s*;\s+/).map(m=>{if(m.endsWith(".end")||m.endsWith(".start")){const[g,v]=m.split(".");return`${xh(d,g)}.${v}`}return m});u.attributes[h]=p.join("; ")}}}}},uEe=Object.freeze(Object.defineProperty({__proto__:null,description:iEe,fn:cEe,name:rEe},Symbol.toStringTag,{value:"Module"})),dEe="removeAttributesBySelector",hEe="removes attributes of elements that match a css selector",fEe=(e,t)=>{const n=Array.isArray(t.selectors)?t.selectors:[t];for(const{selector:r,attributes:i}of n){const s=df(e,r);for(const a of s)if(a.type==="element")if(Array.isArray(i))for(const o of i)delete a.attributes[o];else delete a.attributes[i]}return{}},pEe=Object.freeze(Object.defineProperty({__proto__:null,description:hEe,fn:fEe,name:dEe},Symbol.toStringTag,{value:"Module"})),mEe="removeAttrs",gEe="removes specified attributes",yEe=":",bEe=`Warning: The plugin "removeAttrs" requires the "attrs" parameter.
It should have a pattern to remove, otherwise the plugin is a noop.
Config example:

plugins: [
  {
    name: "removeAttrs",
    params: {
      attrs: "(fill|stroke)"
    }
  }
]
`,vEe=(e,t)=>{if(typeof t.attrs>"u")return console.warn(bEe),null;const n=typeof t.elemSeparator=="string"?t.elemSeparator:yEe,r=typeof t.preserveCurrentColor=="boolean"?t.preserveCurrentColor:!1,i=Array.isArray(t.attrs)?t.attrs:[t.attrs];return{element:{enter:s=>{for(let a of i){a.includes(n)?a.split(n).length<3&&(a=[a,".*"].join(n)):a=[".*",a,".*"].join(n);const o=a.split(n).map(u=>(u==="*"&&(u=".*"),new RegExp(["^",u,"$"].join(""),"i")));if(o[0].test(s.name))for(const[u,d]of Object.entries(s.attributes)){const h=d.toLowerCase()==="currentcolor",p=r&&u=="fill"&&h,m=r&&u=="stroke"&&h;!p&&!m&&o[1].test(u)&&o[2].test(d)&&delete s.attributes[u]}}}}}},xEe=Object.freeze(Object.defineProperty({__proto__:null,description:gEe,fn:vEe,name:mEe},Symbol.toStringTag,{value:"Module"})),wEe="removeDimensions",_Ee="removes width and height in presence of viewBox (opposite to removeViewBox)",kEe=()=>({element:{enter:e=>{if(e.name==="svg"){if(e.attributes.viewBox!=null)delete e.attributes.width,delete e.attributes.height;else if(e.attributes.width!=null&&e.attributes.height!=null&&Number.isNaN(Number(e.attributes.width))===!1&&Number.isNaN(Number(e.attributes.height))===!1){const t=Number(e.attributes.width),n=Number(e.attributes.height);e.attributes.viewBox=`0 0 ${t} ${n}`,delete e.attributes.width,delete e.attributes.height}}}}}),SEe=Object.freeze(Object.defineProperty({__proto__:null,description:_Ee,fn:kEe,name:wEe},Symbol.toStringTag,{value:"Module"})),CEe="removeElementsByAttr",EEe="removes arbitrary elements by ID or className (disabled by default)",TEe=(e,t)=>{const n=t.id==null?[]:Array.isArray(t.id)?t.id:[t.id],r=t.class==null?[]:Array.isArray(t.class)?t.class:[t.class];return{element:{enter:(i,s)=>{if(i.attributes.id!=null&&n.length!==0&&n.includes(i.attributes.id)&&Dn(i,s),i.attributes.class&&r.length!==0){const a=i.attributes.class.split(" ");for(const o of r)if(a.includes(o)){Dn(i,s);break}}}}}},jEe=Object.freeze(Object.defineProperty({__proto__:null,description:EEe,fn:TEe,name:CEe},Symbol.toStringTag,{value:"Module"})),AEe="removeOffCanvasPaths",PEe="removes elements that are drawn outside of the viewBox (disabled by default)",NEe=()=>{let e=null;return{element:{enter:(t,n)=>{if(t.name==="svg"&&n.type==="root"){let r="";t.attributes.viewBox!=null?r=t.attributes.viewBox:t.attributes.height!=null&&t.attributes.width!=null&&(r=`0 0 ${t.attributes.width} ${t.attributes.height}`),r=r.replace(/[,+]|px/g," ").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"");const i=/^(-?\d*\.?\d+) (-?\d*\.?\d+) (\d*\.?\d+) (\d*\.?\d+)$/.exec(r);if(i==null)return;const s=Number.parseFloat(i[1]),a=Number.parseFloat(i[2]),o=Number.parseFloat(i[3]),u=Number.parseFloat(i[4]);e={left:s,top:a,right:s+o,bottom:a+u,width:o,height:u}}if(t.attributes.transform!=null)return Po;if(t.name==="path"&&t.attributes.d!=null&&e!=null){const r=r2(t.attributes.d);let i=!1;for(const h of r)if(h.command==="M"){const[p,m]=h.args;p>=e.left&&p<=e.right&&m>=e.top&&m<=e.bottom&&(i=!0)}if(i)return;r.length===2&&r.push({command:"z",args:[]});const{left:s,top:a,width:o,height:u}=e;EL([{command:"M",args:[s,a]},{command:"h",args:[o]},{command:"v",args:[u]},{command:"H",args:[s]},{command:"z",args:[]}],r)===!1&&Dn(t,n)}}}}},OEe=Object.freeze(Object.defineProperty({__proto__:null,description:PEe,fn:NEe,name:AEe},Symbol.toStringTag,{value:"Module"})),REe="removeRasterImages",MEe="removes raster images (disabled by default)",LEe=()=>({element:{enter:(e,t)=>{e.name==="image"&&e.attributes["xlink:href"]!=null&&/(\.|image\/)(jpe?g|png|gif)/.test(e.attributes["xlink:href"])&&Dn(e,t)}}}),IEe=Object.freeze(Object.defineProperty({__proto__:null,description:MEe,fn:LEe,name:REe},Symbol.toStringTag,{value:"Module"})),$Ee="removeScripts",DEe="removes scripts (disabled by default)",zEe=[...Ui.animationEvent,...Ui.documentEvent,...Ui.documentElementEvent,...Ui.globalEvent,...Ui.graphicalEvent],FEe=()=>({element:{enter:(e,t)=>{if(e.name==="script"){Dn(e,t);return}for(const n of zEe)e.attributes[n]!=null&&delete e.attributes[n]},exit:(e,t)=>{if(e.name==="a"){for(const n of Object.keys(e.attributes))if(n==="href"||n.endsWith(":href")){if(e.attributes[n]==null||!e.attributes[n].trimStart().startsWith("javascript:"))continue;const r=t.children.indexOf(e),i=e.children.filter(s=>s.type!=="text");t.children.splice(r,1,...i)}}}}}),BEe=Object.freeze(Object.defineProperty({__proto__:null,description:DEe,fn:FEe,name:$Ee},Symbol.toStringTag,{value:"Module"})),UEe="removeStyleElement",HEe="removes <style> element (disabled by default)",WEe=()=>({element:{enter:(e,t)=>{e.name==="style"&&Dn(e,t)}}}),VEe=Object.freeze(Object.defineProperty({__proto__:null,description:HEe,fn:WEe,name:UEe},Symbol.toStringTag,{value:"Module"})),GEe="removeTitle",qEe="removes <title>",YEe=()=>({element:{enter:(e,t)=>{e.name==="title"&&Dn(e,t)}}}),XEe=Object.freeze(Object.defineProperty({__proto__:null,description:qEe,fn:YEe,name:GEe},Symbol.toStringTag,{value:"Module"})),KEe="removeViewBox",ZEe="removes viewBox attribute when possible",QEe=new Set(["pattern","svg","symbol"]),JEe=()=>({element:{enter:(e,t)=>{if(QEe.has(e.name)&&e.attributes.viewBox!=null&&e.attributes.width!=null&&e.attributes.height!=null){if(e.name==="svg"&&t.type!=="root")return;const n=e.attributes.viewBox.split(/[ ,]+/g);n[0]==="0"&&n[1]==="0"&&e.attributes.width.replace(/px$/,"")===n[2]&&e.attributes.height.replace(/px$/,"")===n[3]&&delete e.attributes.viewBox}}}}),eTe=Object.freeze(Object.defineProperty({__proto__:null,description:ZEe,fn:JEe,name:KEe},Symbol.toStringTag,{value:"Module"})),tTe="removeXlink",nTe="remove xlink namespace and replaces attributes with the SVG 2 equivalent where applicable",pj="http://www.w3.org/1999/xlink",rTe={new:"_blank",replace:"_self"},iTe=new Set(["cursor","filter","font-face-uri","glyphRef","tref"]),Yb=(e,t,n)=>t.map(r=>`${r}:${n}`).filter(r=>e.attributes[r]!=null),sTe=(e,t)=>{const{includeLegacy:n}=t,r=[],i=[],s=[];return{element:{enter:a=>{var p,m;for(const[g,v]of Object.entries(a.attributes))if(g.startsWith("xmlns:")){const w=g.split(":",2)[1];if(v===pj){r.push(w);continue}r.includes(w)&&i.push(w)}if(i.some(g=>r.includes(g)))return;const o=Yb(a,r,"show");let u=a.attributes.target!=null;for(let g=o.length-1;g>=0;g--){const v=o[g],w=a.attributes[v],S=rTe[w];if(u||S==null){delete a.attributes[v];continue}S!==((m=(p=w_[a.name])==null?void 0:p.defaults)==null?void 0:m.target)&&(a.attributes.target=S),delete a.attributes[v],u=!0}const d=Yb(a,r,"title");for(let g=d.length-1;g>=0;g--){const v=d[g],w=a.attributes[v];if(a.children.filter(k=>k.type==="element"&&k.name==="title").length>0){delete a.attributes[v];continue}const x={type:"element",name:"title",attributes:{},children:[{type:"text",value:w}]};Object.defineProperty(x,"parentNode",{writable:!0,value:a}),a.children.unshift(x),delete a.attributes[v]}const h=Yb(a,r,"href");if(h.length>0&&iTe.has(a.name)&&!n){h.map(g=>g.split(":",1)[0]).forEach(g=>s.push(g));return}for(let g=h.length-1;g>=0;g--){const v=h[g],w=a.attributes[v];if(a.attributes.href!=null){delete a.attributes[v];continue}a.attributes.href=w,delete a.attributes[v]}},exit:a=>{for(const[o,u]of Object.entries(a.attributes)){const[d,h]=o.split(":",2);if(r.includes(d)&&!i.includes(d)&&!s.includes(d)&&!n){delete a.attributes[o];continue}if(o.startsWith("xmlns:")&&!s.includes(h)){if(u===pj){const p=r.indexOf(h);r.splice(p,1),delete a.attributes[o];continue}if(i.includes(d)){const p=i.indexOf(h);i.splice(p,1)}}}}}}},aTe=Object.freeze(Object.defineProperty({__proto__:null,description:nTe,fn:sTe,name:tTe},Symbol.toStringTag,{value:"Module"})),oTe="removeXMLNS",lTe="removes xmlns attribute (for inline svg, disabled by default)",cTe=()=>({element:{enter:e=>{e.name==="svg"&&delete e.attributes.xmlns}}}),uTe=Object.freeze(Object.defineProperty({__proto__:null,description:lTe,fn:cTe,name:oTe},Symbol.toStringTag,{value:"Module"})),dTe="reusePaths",hTe="Finds <path> elements with the same d, fill, and stroke, and converts them to <use> elements referencing a single <path> def.",fTe=e=>{const t=Da(e),n=new Map;let r;const i=new Set;return{element:{enter:(s,a)=>{if(s.name==="path"&&s.attributes.d!=null){const o=s.attributes.d,u=s.attributes.fill||"",d=s.attributes.stroke||"",h=o+";s:"+d+";f:"+u;let p=n.get(h);p==null&&(p=[],n.set(h,p)),p.push(s)}if(r==null&&s.name==="defs"&&a.type==="element"&&a.name==="svg"&&(r=s),s.name==="use")for(const o of["href","xlink:href"]){const u=s.attributes[o];u!=null&&u.startsWith("#")&&u.length>1&&i.add(u.slice(1))}},exit:(s,a)=>{if(s.name==="svg"&&a.type==="root"){let o=r;o==null&&(o={type:"element",name:"defs",attributes:{},children:[]});let u=0;for(const d of n.values())if(d.length>1){const h={type:"element",name:"path",attributes:{},children:[]};for(const m of["fill","stroke","d"])d[0].attributes[m]!=null&&(h.attributes[m]=d[0].attributes[m]);const p=d[0].attributes.id;p==null||i.has(p)||t.rules.some(m=>m.selector===`#${p}`)?h.attributes.id="reuse-"+u++:(h.attributes.id=p,delete d[0].attributes.id),o.children.push(h);for(const m of d){if(delete m.attributes.d,delete m.attributes.stroke,delete m.attributes.fill,o.children.includes(m)&&m.children.length===0){if(Object.keys(m.attributes).length===0){Dn(m,o);continue}if(Object.keys(m.attributes).length===1&&m.attributes.id!=null){Dn(m,o);const g=`[xlink\\:href=#${m.attributes.id}], [href=#${m.attributes.id}]`;for(const v of df(s,g))if(v.type==="element")for(const w of["href","xlink:href"])v.attributes[w]!=null&&(v.attributes[w]="#"+h.attributes.id);continue}}m.name="use",m.attributes["xlink:href"]="#"+h.attributes.id}}o.children.length!==0&&(s.attributes["xmlns:xlink"]==null&&(s.attributes["xmlns:xlink"]="http://www.w3.org/1999/xlink"),r==null&&s.children.unshift(o))}}}}},pTe=Object.freeze(Object.defineProperty({__proto__:null,description:hTe,fn:fTe,name:dTe},Symbol.toStringTag,{value:"Module"})),mTe=Object.freeze([SCe,ACe,MCe,Z6,pL,iL,FCe,oL,SL,lL,xL,WCe,RL,vL,nEe,ML,J6,$L,Q6,nL,wL,_L,uEe,pEe,xEe,xR,Y6,BL,SEe,bR,K6,jEe,LL,IL,bL,yL,X6,hL,OEe,IEe,BEe,VEe,XEe,dL,DL,aL,fL,eTe,aTe,uTe,vR,pTe,zL,FL]);var UL={};const u1=Nj(Foe);var Xb={},Zp={exports:{}},Kb={},Kd={},mj;function gTe(){if(mj)return Kd;mj=1,Kd.byteLength=o,Kd.toByteArray=d,Kd.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function a(g){var v=g.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=v);var S=w===v?0:4-w%4;return[w,S]}function o(g){var v=a(g),w=v[0],S=v[1];return(w+S)*3/4-S}function u(g,v,w){return(v+w)*3/4-w}function d(g){var v,w=a(g),S=w[0],x=w[1],k=new n(u(g,S,x)),j=0,O=x>0?S-4:S,I;for(I=0;I<O;I+=4)v=t[g.charCodeAt(I)]<<18|t[g.charCodeAt(I+1)]<<12|t[g.charCodeAt(I+2)]<<6|t[g.charCodeAt(I+3)],k[j++]=v>>16&255,k[j++]=v>>8&255,k[j++]=v&255;return x===2&&(v=t[g.charCodeAt(I)]<<2|t[g.charCodeAt(I+1)]>>4,k[j++]=v&255),x===1&&(v=t[g.charCodeAt(I)]<<10|t[g.charCodeAt(I+1)]<<4|t[g.charCodeAt(I+2)]>>2,k[j++]=v>>8&255,k[j++]=v&255),k}function h(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function p(g,v,w){for(var S,x=[],k=v;k<w;k+=3)S=(g[k]<<16&16711680)+(g[k+1]<<8&65280)+(g[k+2]&255),x.push(h(S));return x.join("")}function m(g){for(var v,w=g.length,S=w%3,x=[],k=16383,j=0,O=w-S;j<O;j+=k)x.push(p(g,j,j+k>O?O:j+k));return S===1?(v=g[w-1],x.push(e[v>>2]+e[v<<4&63]+"==")):S===2&&(v=(g[w-2]<<8)+g[w-1],x.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),x.join("")}return Kd}var Qp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var gj;function yTe(){return gj||(gj=1,Qp.read=function(e,t,n,r,i){var s,a,o=i*8-r-1,u=(1<<o)-1,d=u>>1,h=-7,p=n?i-1:0,m=n?-1:1,g=e[t+p];for(p+=m,s=g&(1<<-h)-1,g>>=-h,h+=o;h>0;s=s*256+e[t+p],p+=m,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;h>0;a=a*256+e[t+p],p+=m,h-=8);if(s===0)s=1-d;else{if(s===u)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-d}return(g?-1:1)*a*Math.pow(2,s-r)},Qp.write=function(e,t,n,r,i,s){var a,o,u,d=s*8-i-1,h=(1<<d)-1,p=h>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+p>=1?t+=m/u:t+=m*Math.pow(2,1-p),t*u>=2&&(a++,u/=2),a+p>=h?(o=0,a=h):a+p>=1?(o=(t*u-1)*Math.pow(2,i),a=a+p):(o=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+g]=o&255,g+=v,o/=256,i-=8);for(a=a<<i|o,d+=i;d>0;e[n+g]=a&255,g+=v,a/=256,d-=8);e[n+g-v]|=w*128}),Qp}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var yj;function bTe(){return yj||(yj=1,function(e){var t=gTe(),n=yTe(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var ae=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(ae,M),ae.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(ae){if(ae>i)throw new RangeError('The value "'+ae+'" is invalid for option "size"');var M=new Uint8Array(ae);return Object.setPrototypeOf(M,o.prototype),M}function o(ae,M,L){if(typeof ae=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ae)}return u(ae,M,L)}o.poolSize=8192;function u(ae,M,L){if(typeof ae=="string")return m(ae,M);if(ArrayBuffer.isView(ae))return v(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(Ct(ae,ArrayBuffer)||ae&&Ct(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ct(ae,SharedArrayBuffer)||ae&&Ct(ae.buffer,SharedArrayBuffer)))return w(ae,M,L);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=ae.valueOf&&ae.valueOf();if(ee!=null&&ee!==ae)return o.from(ee,M,L);var pe=S(ae);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return o.from(ae[Symbol.toPrimitive]("string"),M,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}o.from=function(ae,M,L){return u(ae,M,L)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function h(ae,M,L){return d(ae),ae<=0?a(ae):M!==void 0?typeof L=="string"?a(ae).fill(M,L):a(ae).fill(M):a(ae)}o.alloc=function(ae,M,L){return h(ae,M,L)};function p(ae){return d(ae),a(ae<0?0:x(ae)|0)}o.allocUnsafe=function(ae){return p(ae)},o.allocUnsafeSlow=function(ae){return p(ae)};function m(ae,M){if((typeof M!="string"||M==="")&&(M="utf8"),!o.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var L=j(ae,M)|0,ee=a(L),pe=ee.write(ae,M);return pe!==L&&(ee=ee.slice(0,pe)),ee}function g(ae){for(var M=ae.length<0?0:x(ae.length)|0,L=a(M),ee=0;ee<M;ee+=1)L[ee]=ae[ee]&255;return L}function v(ae){if(Ct(ae,Uint8Array)){var M=new Uint8Array(ae);return w(M.buffer,M.byteOffset,M.byteLength)}return g(ae)}function w(ae,M,L){if(M<0||ae.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<M+(L||0))throw new RangeError('"length" is outside of buffer bounds');var ee;return M===void 0&&L===void 0?ee=new Uint8Array(ae):L===void 0?ee=new Uint8Array(ae,M):ee=new Uint8Array(ae,M,L),Object.setPrototypeOf(ee,o.prototype),ee}function S(ae){if(o.isBuffer(ae)){var M=x(ae.length)|0,L=a(M);return L.length===0||ae.copy(L,0,0,M),L}if(ae.length!==void 0)return typeof ae.length!="number"||q(ae.length)?a(0):g(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return g(ae.data)}function x(ae){if(ae>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ae|0}function k(ae){return+ae!=ae&&(ae=0),o.alloc(+ae)}o.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==o.prototype},o.compare=function(M,L){if(Ct(M,Uint8Array)&&(M=o.from(M,M.offset,M.byteLength)),Ct(L,Uint8Array)&&(L=o.from(L,L.offset,L.byteLength)),!o.isBuffer(M)||!o.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===L)return 0;for(var ee=M.length,pe=L.length,ve=0,ye=Math.min(ee,pe);ve<ye;++ve)if(M[ve]!==L[ve]){ee=M[ve],pe=L[ve];break}return ee<pe?-1:pe<ee?1:0},o.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(M,L){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return o.alloc(0);var ee;if(L===void 0)for(L=0,ee=0;ee<M.length;++ee)L+=M[ee].length;var pe=o.allocUnsafe(L),ve=0;for(ee=0;ee<M.length;++ee){var ye=M[ee];if(Ct(ye,Uint8Array))ve+ye.length>pe.length?o.from(ye).copy(pe,ve):Uint8Array.prototype.set.call(pe,ye,ve);else if(o.isBuffer(ye))ye.copy(pe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=ye.length}return pe};function j(ae,M){if(o.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||Ct(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);var L=ae.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&L===0)return 0;for(var pe=!1;;)switch(M){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return oe(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return ft(ae).length;default:if(pe)return ee?-1:oe(ae).length;M=(""+M).toLowerCase(),pe=!0}}o.byteLength=j;function O(ae,M,L){var ee=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,M>>>=0,L<=M))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return xe(this,M,L);case"utf8":case"utf-8":return H(this,M,L);case"ascii":return ke(this,M,L);case"latin1":case"binary":return ze(this,M,L);case"base64":return me(this,M,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,M,L);default:if(ee)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),ee=!0}}o.prototype._isBuffer=!0;function I(ae,M,L){var ee=ae[M];ae[M]=ae[L],ae[L]=ee}o.prototype.swap16=function(){var M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<M;L+=2)I(this,L,L+1);return this},o.prototype.swap32=function(){var M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<M;L+=4)I(this,L,L+3),I(this,L+1,L+2);return this},o.prototype.swap64=function(){var M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<M;L+=8)I(this,L,L+7),I(this,L+1,L+6),I(this,L+2,L+5),I(this,L+3,L+4);return this},o.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?H(this,0,M):O.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(M){if(!o.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:o.compare(this,M)===0},o.prototype.inspect=function(){var M="",L=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(M+=" ... "),"<Buffer "+M+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(M,L,ee,pe,ve){if(Ct(M,Uint8Array)&&(M=o.from(M,M.offset,M.byteLength)),!o.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(L===void 0&&(L=0),ee===void 0&&(ee=M?M.length:0),pe===void 0&&(pe=0),ve===void 0&&(ve=this.length),L<0||ee>M.length||pe<0||ve>this.length)throw new RangeError("out of range index");if(pe>=ve&&L>=ee)return 0;if(pe>=ve)return-1;if(L>=ee)return 1;if(L>>>=0,ee>>>=0,pe>>>=0,ve>>>=0,this===M)return 0;for(var ye=ve-pe,Me=ee-L,Xe=Math.min(ye,Me),$e=this.slice(pe,ve),c=M.slice(L,ee),f=0;f<Xe;++f)if($e[f]!==c[f]){ye=$e[f],Me=c[f];break}return ye<Me?-1:Me<ye?1:0};function E(ae,M,L,ee,pe){if(ae.length===0)return-1;if(typeof L=="string"?(ee=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,q(L)&&(L=pe?0:ae.length-1),L<0&&(L=ae.length+L),L>=ae.length){if(pe)return-1;L=ae.length-1}else if(L<0)if(pe)L=0;else return-1;if(typeof M=="string"&&(M=o.from(M,ee)),o.isBuffer(M))return M.length===0?-1:U(ae,M,L,ee,pe);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(ae,M,L):Uint8Array.prototype.lastIndexOf.call(ae,M,L):U(ae,[M],L,ee,pe);throw new TypeError("val must be string, number or Buffer")}function U(ae,M,L,ee,pe){var ve=1,ye=ae.length,Me=M.length;if(ee!==void 0&&(ee=String(ee).toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(ae.length<2||M.length<2)return-1;ve=2,ye/=2,Me/=2,L/=2}function Xe(_,C){return ve===1?_[C]:_.readUInt16BE(C*ve)}var $e;if(pe){var c=-1;for($e=L;$e<ye;$e++)if(Xe(ae,$e)===Xe(M,c===-1?0:$e-c)){if(c===-1&&(c=$e),$e-c+1===Me)return c*ve}else c!==-1&&($e-=$e-c),c=-1}else for(L+Me>ye&&(L=ye-Me),$e=L;$e>=0;$e--){for(var f=!0,b=0;b<Me;b++)if(Xe(ae,$e+b)!==Xe(M,b)){f=!1;break}if(f)return $e}return-1}o.prototype.includes=function(M,L,ee){return this.indexOf(M,L,ee)!==-1},o.prototype.indexOf=function(M,L,ee){return E(this,M,L,ee,!0)},o.prototype.lastIndexOf=function(M,L,ee){return E(this,M,L,ee,!1)};function D(ae,M,L,ee){L=Number(L)||0;var pe=ae.length-L;ee?(ee=Number(ee),ee>pe&&(ee=pe)):ee=pe;var ve=M.length;ee>ve/2&&(ee=ve/2);for(var ye=0;ye<ee;++ye){var Me=parseInt(M.substr(ye*2,2),16);if(q(Me))return ye;ae[L+ye]=Me}return ye}function R(ae,M,L,ee){return Pt(oe(M,ae.length-L),ae,L,ee)}function W(ae,M,L,ee){return Pt(We(M),ae,L,ee)}function ce(ae,M,L,ee){return Pt(ft(M),ae,L,ee)}function te(ae,M,L,ee){return Pt(Ne(M,ae.length-L),ae,L,ee)}o.prototype.write=function(M,L,ee,pe){if(L===void 0)pe="utf8",ee=this.length,L=0;else if(ee===void 0&&typeof L=="string")pe=L,ee=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(ee)?(ee=ee>>>0,pe===void 0&&(pe="utf8")):(pe=ee,ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ve=this.length-L;if((ee===void 0||ee>ve)&&(ee=ve),M.length>0&&(ee<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var ye=!1;;)switch(pe){case"hex":return D(this,M,L,ee);case"utf8":case"utf-8":return R(this,M,L,ee);case"ascii":case"latin1":case"binary":return W(this,M,L,ee);case"base64":return ce(this,M,L,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,M,L,ee);default:if(ye)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),ye=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(ae,M,L){return M===0&&L===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(M,L))}function H(ae,M,L){L=Math.min(ae.length,L);for(var ee=[],pe=M;pe<L;){var ve=ae[pe],ye=null,Me=ve>239?4:ve>223?3:ve>191?2:1;if(pe+Me<=L){var Xe,$e,c,f;switch(Me){case 1:ve<128&&(ye=ve);break;case 2:Xe=ae[pe+1],(Xe&192)===128&&(f=(ve&31)<<6|Xe&63,f>127&&(ye=f));break;case 3:Xe=ae[pe+1],$e=ae[pe+2],(Xe&192)===128&&($e&192)===128&&(f=(ve&15)<<12|(Xe&63)<<6|$e&63,f>2047&&(f<55296||f>57343)&&(ye=f));break;case 4:Xe=ae[pe+1],$e=ae[pe+2],c=ae[pe+3],(Xe&192)===128&&($e&192)===128&&(c&192)===128&&(f=(ve&15)<<18|(Xe&63)<<12|($e&63)<<6|c&63,f>65535&&f<1114112&&(ye=f))}}ye===null?(ye=65533,Me=1):ye>65535&&(ye-=65536,ee.push(ye>>>10&1023|55296),ye=56320|ye&1023),ee.push(ye),pe+=Me}return Ee(ee)}var ge=4096;function Ee(ae){var M=ae.length;if(M<=ge)return String.fromCharCode.apply(String,ae);for(var L="",ee=0;ee<M;)L+=String.fromCharCode.apply(String,ae.slice(ee,ee+=ge));return L}function ke(ae,M,L){var ee="";L=Math.min(ae.length,L);for(var pe=M;pe<L;++pe)ee+=String.fromCharCode(ae[pe]&127);return ee}function ze(ae,M,L){var ee="";L=Math.min(ae.length,L);for(var pe=M;pe<L;++pe)ee+=String.fromCharCode(ae[pe]);return ee}function xe(ae,M,L){var ee=ae.length;(!M||M<0)&&(M=0),(!L||L<0||L>ee)&&(L=ee);for(var pe="",ve=M;ve<L;++ve)pe+=qe[ae[ve]];return pe}function Re(ae,M,L){for(var ee=ae.slice(M,L),pe="",ve=0;ve<ee.length-1;ve+=2)pe+=String.fromCharCode(ee[ve]+ee[ve+1]*256);return pe}o.prototype.slice=function(M,L){var ee=this.length;M=~~M,L=L===void 0?ee:~~L,M<0?(M+=ee,M<0&&(M=0)):M>ee&&(M=ee),L<0?(L+=ee,L<0&&(L=0)):L>ee&&(L=ee),L<M&&(L=M);var pe=this.subarray(M,L);return Object.setPrototypeOf(pe,o.prototype),pe};function _e(ae,M,L){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+M>L)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(M,L,ee){M=M>>>0,L=L>>>0,ee||_e(M,L,this.length);for(var pe=this[M],ve=1,ye=0;++ye<L&&(ve*=256);)pe+=this[M+ye]*ve;return pe},o.prototype.readUintBE=o.prototype.readUIntBE=function(M,L,ee){M=M>>>0,L=L>>>0,ee||_e(M,L,this.length);for(var pe=this[M+--L],ve=1;L>0&&(ve*=256);)pe+=this[M+--L]*ve;return pe},o.prototype.readUint8=o.prototype.readUInt8=function(M,L){return M=M>>>0,L||_e(M,1,this.length),this[M]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(M,L){return M=M>>>0,L||_e(M,2,this.length),this[M]|this[M+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(M,L){return M=M>>>0,L||_e(M,2,this.length),this[M]<<8|this[M+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},o.prototype.readIntLE=function(M,L,ee){M=M>>>0,L=L>>>0,ee||_e(M,L,this.length);for(var pe=this[M],ve=1,ye=0;++ye<L&&(ve*=256);)pe+=this[M+ye]*ve;return ve*=128,pe>=ve&&(pe-=Math.pow(2,8*L)),pe},o.prototype.readIntBE=function(M,L,ee){M=M>>>0,L=L>>>0,ee||_e(M,L,this.length);for(var pe=L,ve=1,ye=this[M+--pe];pe>0&&(ve*=256);)ye+=this[M+--pe]*ve;return ve*=128,ye>=ve&&(ye-=Math.pow(2,8*L)),ye},o.prototype.readInt8=function(M,L){return M=M>>>0,L||_e(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},o.prototype.readInt16LE=function(M,L){M=M>>>0,L||_e(M,2,this.length);var ee=this[M]|this[M+1]<<8;return ee&32768?ee|4294901760:ee},o.prototype.readInt16BE=function(M,L){M=M>>>0,L||_e(M,2,this.length);var ee=this[M+1]|this[M]<<8;return ee&32768?ee|4294901760:ee},o.prototype.readInt32LE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},o.prototype.readInt32BE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},o.prototype.readFloatLE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),n.read(this,M,!0,23,4)},o.prototype.readFloatBE=function(M,L){return M=M>>>0,L||_e(M,4,this.length),n.read(this,M,!1,23,4)},o.prototype.readDoubleLE=function(M,L){return M=M>>>0,L||_e(M,8,this.length),n.read(this,M,!0,52,8)},o.prototype.readDoubleBE=function(M,L){return M=M>>>0,L||_e(M,8,this.length),n.read(this,M,!1,52,8)};function Pe(ae,M,L,ee,pe,ve){if(!o.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>pe||M<ve)throw new RangeError('"value" argument is out of bounds');if(L+ee>ae.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(M,L,ee,pe){if(M=+M,L=L>>>0,ee=ee>>>0,!pe){var ve=Math.pow(2,8*ee)-1;Pe(this,M,L,ee,ve,0)}var ye=1,Me=0;for(this[L]=M&255;++Me<ee&&(ye*=256);)this[L+Me]=M/ye&255;return L+ee},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(M,L,ee,pe){if(M=+M,L=L>>>0,ee=ee>>>0,!pe){var ve=Math.pow(2,8*ee)-1;Pe(this,M,L,ee,ve,0)}var ye=ee-1,Me=1;for(this[L+ye]=M&255;--ye>=0&&(Me*=256);)this[L+ye]=M/Me&255;return L+ee},o.prototype.writeUint8=o.prototype.writeUInt8=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,1,255,0),this[L]=M&255,L+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,2,65535,0),this[L]=M&255,this[L+1]=M>>>8,L+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,2,65535,0),this[L]=M>>>8,this[L+1]=M&255,L+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,4,4294967295,0),this[L+3]=M>>>24,this[L+2]=M>>>16,this[L+1]=M>>>8,this[L]=M&255,L+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,4,4294967295,0),this[L]=M>>>24,this[L+1]=M>>>16,this[L+2]=M>>>8,this[L+3]=M&255,L+4},o.prototype.writeIntLE=function(M,L,ee,pe){if(M=+M,L=L>>>0,!pe){var ve=Math.pow(2,8*ee-1);Pe(this,M,L,ee,ve-1,-ve)}var ye=0,Me=1,Xe=0;for(this[L]=M&255;++ye<ee&&(Me*=256);)M<0&&Xe===0&&this[L+ye-1]!==0&&(Xe=1),this[L+ye]=(M/Me>>0)-Xe&255;return L+ee},o.prototype.writeIntBE=function(M,L,ee,pe){if(M=+M,L=L>>>0,!pe){var ve=Math.pow(2,8*ee-1);Pe(this,M,L,ee,ve-1,-ve)}var ye=ee-1,Me=1,Xe=0;for(this[L+ye]=M&255;--ye>=0&&(Me*=256);)M<0&&Xe===0&&this[L+ye+1]!==0&&(Xe=1),this[L+ye]=(M/Me>>0)-Xe&255;return L+ee},o.prototype.writeInt8=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,1,127,-128),M<0&&(M=255+M+1),this[L]=M&255,L+1},o.prototype.writeInt16LE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,2,32767,-32768),this[L]=M&255,this[L+1]=M>>>8,L+2},o.prototype.writeInt16BE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,2,32767,-32768),this[L]=M>>>8,this[L+1]=M&255,L+2},o.prototype.writeInt32LE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,4,2147483647,-2147483648),this[L]=M&255,this[L+1]=M>>>8,this[L+2]=M>>>16,this[L+3]=M>>>24,L+4},o.prototype.writeInt32BE=function(M,L,ee){return M=+M,L=L>>>0,ee||Pe(this,M,L,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[L]=M>>>24,this[L+1]=M>>>16,this[L+2]=M>>>8,this[L+3]=M&255,L+4};function it(ae,M,L,ee,pe,ve){if(L+ee>ae.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function tt(ae,M,L,ee,pe){return M=+M,L=L>>>0,pe||it(ae,M,L,4),n.write(ae,M,L,ee,23,4),L+4}o.prototype.writeFloatLE=function(M,L,ee){return tt(this,M,L,!0,ee)},o.prototype.writeFloatBE=function(M,L,ee){return tt(this,M,L,!1,ee)};function Ue(ae,M,L,ee,pe){return M=+M,L=L>>>0,pe||it(ae,M,L,8),n.write(ae,M,L,ee,52,8),L+8}o.prototype.writeDoubleLE=function(M,L,ee){return Ue(this,M,L,!0,ee)},o.prototype.writeDoubleBE=function(M,L,ee){return Ue(this,M,L,!1,ee)},o.prototype.copy=function(M,L,ee,pe){if(!o.isBuffer(M))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),!pe&&pe!==0&&(pe=this.length),L>=M.length&&(L=M.length),L||(L=0),pe>0&&pe<ee&&(pe=ee),pe===ee||M.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),M.length-L<pe-ee&&(pe=M.length-L+ee);var ve=pe-ee;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,ee,pe):Uint8Array.prototype.set.call(M,this.subarray(ee,pe),L),ve},o.prototype.fill=function(M,L,ee,pe){if(typeof M=="string"){if(typeof L=="string"?(pe=L,L=0,ee=this.length):typeof ee=="string"&&(pe=ee,ee=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(M.length===1){var ve=M.charCodeAt(0);(pe==="utf8"&&ve<128||pe==="latin1")&&(M=ve)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(L<0||this.length<L||this.length<ee)throw new RangeError("Out of range index");if(ee<=L)return this;L=L>>>0,ee=ee===void 0?this.length:ee>>>0,M||(M=0);var ye;if(typeof M=="number")for(ye=L;ye<ee;++ye)this[ye]=M;else{var Me=o.isBuffer(M)?M:o.from(M,pe),Xe=Me.length;if(Xe===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ye=0;ye<ee-L;++ye)this[ye+L]=Me[ye%Xe]}return this};var ut=/[^+/0-9A-Za-z-_]/g;function de(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(ut,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function oe(ae,M){M=M||1/0;for(var L,ee=ae.length,pe=null,ve=[],ye=0;ye<ee;++ye){if(L=ae.charCodeAt(ye),L>55295&&L<57344){if(!pe){if(L>56319){(M-=3)>-1&&ve.push(239,191,189);continue}else if(ye+1===ee){(M-=3)>-1&&ve.push(239,191,189);continue}pe=L;continue}if(L<56320){(M-=3)>-1&&ve.push(239,191,189),pe=L;continue}L=(pe-55296<<10|L-56320)+65536}else pe&&(M-=3)>-1&&ve.push(239,191,189);if(pe=null,L<128){if((M-=1)<0)break;ve.push(L)}else if(L<2048){if((M-=2)<0)break;ve.push(L>>6|192,L&63|128)}else if(L<65536){if((M-=3)<0)break;ve.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((M-=4)<0)break;ve.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return ve}function We(ae){for(var M=[],L=0;L<ae.length;++L)M.push(ae.charCodeAt(L)&255);return M}function Ne(ae,M){for(var L,ee,pe,ve=[],ye=0;ye<ae.length&&!((M-=2)<0);++ye)L=ae.charCodeAt(ye),ee=L>>8,pe=L%256,ve.push(pe),ve.push(ee);return ve}function ft(ae){return t.toByteArray(de(ae))}function Pt(ae,M,L,ee){for(var pe=0;pe<ee&&!(pe+L>=M.length||pe>=ae.length);++pe)M[pe+L]=ae[pe];return pe}function Ct(ae,M){return ae instanceof M||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===M.name}function q(ae){return ae!==ae}var qe=function(){for(var ae="0123456789abcdef",M=new Array(256),L=0;L<16;++L)for(var ee=L*16,pe=0;pe<16;++pe)M[ee+pe]=ae[L]+ae[pe];return M}()}(Kb)),Kb}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var bj;function vTe(){return bj||(bj=1,function(e,t){var n=bTe(),r=n.Buffer;function i(a,o){for(var u in a)o[u]=a[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s);function s(a,o,u){return r(a,o,u)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(a,o,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,o,u)},s.alloc=function(a,o,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var d=r(a);return o!==void 0?typeof u=="string"?d.fill(o,u):d.fill(o):d.fill(0),d},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(Zp,Zp.exports)),Zp.exports}var vj;function xTe(){if(vj)return Xb;vj=1;var e=vTe().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var k;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(k)return;x=(""+x).toLowerCase(),k=!0}}function r(x){var k=n(x);if(typeof k!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return k||x}Xb.StringDecoder=i;function i(x){this.encoding=r(x);var k;switch(this.encoding){case"utf16le":this.text=p,this.end=m,k=4;break;case"utf8":this.fillLast=u,k=4;break;case"base64":this.text=g,this.end=v,k=3;break;default:this.write=w,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(k)}i.prototype.write=function(x){if(x.length===0)return"";var k,j;if(this.lastNeed){if(k=this.fillLast(x),k===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<x.length?k?k+this.text(x,j):this.text(x,j):k||""},i.prototype.end=h,i.prototype.text=d,i.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function s(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function a(x,k,j){var O=k.length-1;if(O<j)return 0;var I=s(k[O]);return I>=0?(I>0&&(x.lastNeed=I-1),I):--O<j||I===-2?0:(I=s(k[O]),I>=0?(I>0&&(x.lastNeed=I-2),I):--O<j||I===-2?0:(I=s(k[O]),I>=0?(I>0&&(I===2?I=0:x.lastNeed=I-3),I):0))}function o(x,k,j){if((k[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var k=this.lastTotal-this.lastNeed,j=o(this,x);if(j!==void 0)return j;if(this.lastNeed<=x.length)return x.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,k,0,x.length),this.lastNeed-=x.length}function d(x,k){var j=a(this,x,k);if(!this.lastNeed)return x.toString("utf8",k);this.lastTotal=j;var O=x.length-(j-this.lastNeed);return x.copy(this.lastChar,0,O),x.toString("utf8",k,O)}function h(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+"":k}function p(x,k){if((x.length-k)%2===0){var j=x.toString("utf16le",k);if(j){var O=j.charCodeAt(j.length-1);if(O>=55296&&O<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",k,x.length-1)}function m(x){var k=x&&x.length?this.write(x):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,j)}return k}function g(x,k){var j=(x.length-k)%3;return j===0?x.toString("base64",k):(this.lastNeed=3-j,this.lastTotal=3,j===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",k,x.length-j))}function v(x){var k=x&&x.length?this.write(x):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function w(x){return x.toString(this.encoding)}function S(x){return x&&x.length?this.write(x):""}return Xb}(function(e){(function(t){t.parser=function(de,oe){return new r(de,oe)},t.SAXParser=r,t.SAXStream=h,t.createStream=d,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(de,oe){if(!(this instanceof r))return new r(de,oe);var We=this;s(We),We.q=We.c="",We.bufferCheckPosition=t.MAX_BUFFER_LENGTH,We.opt=oe||{},We.opt.lowercase=We.opt.lowercase||We.opt.lowercasetags,We.looseCase=We.opt.lowercase?"toLowerCase":"toUpperCase",We.tags=[],We.closed=We.closedRoot=We.sawRoot=!1,We.tag=We.error=null,We.strict=!!de,We.noscript=!!(de||We.opt.noscript),We.state=R.BEGIN,We.strictEntities=We.opt.strictEntities,We.ENTITIES=We.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),We.attribList=[],We.opt.xmlns&&(We.ns=Object.create(w)),We.opt.unquotedAttributeValues===void 0&&(We.opt.unquotedAttributeValues=!de),We.trackPosition=We.opt.position!==!1,We.trackPosition&&(We.position=We.line=We.column=0),ce(We,"onready")}Object.create||(Object.create=function(de){function oe(){}oe.prototype=de;var We=new oe;return We}),Object.keys||(Object.keys=function(de){var oe=[];for(var We in de)de.hasOwnProperty(We)&&oe.push(We);return oe});function i(de){for(var oe=Math.max(t.MAX_BUFFER_LENGTH,10),We=0,Ne=0,ft=n.length;Ne<ft;Ne++){var Pt=de[n[Ne]].length;if(Pt>oe)switch(n[Ne]){case"textNode":me(de);break;case"cdata":te(de,"oncdata",de.cdata),de.cdata="";break;case"script":te(de,"onscript",de.script),de.script="";break;default:ge(de,"Max buffer length exceeded: "+n[Ne])}We=Math.max(We,Pt)}var Ct=t.MAX_BUFFER_LENGTH-We;de.bufferCheckPosition=Ct+de.position}function s(de){for(var oe=0,We=n.length;oe<We;oe++)de[n[oe]]=""}function a(de){me(de),de.cdata!==""&&(te(de,"oncdata",de.cdata),de.cdata=""),de.script!==""&&(te(de,"onscript",de.script),de.script="")}r.prototype={end:function(){Ee(this)},write:ut,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var o;try{o=u1.Stream}catch{o=function(){}}o||(o=function(){});var u=t.EVENTS.filter(function(de){return de!=="error"&&de!=="end"});function d(de,oe){return new h(de,oe)}function h(de,oe){if(!(this instanceof h))return new h(de,oe);o.apply(this),this._parser=new r(de,oe),this.writable=!0,this.readable=!0;var We=this;this._parser.onend=function(){We.emit("end")},this._parser.onerror=function(Ne){We.emit("error",Ne),We._parser.error=null},this._decoder=null,u.forEach(function(Ne){Object.defineProperty(We,"on"+Ne,{get:function(){return We._parser["on"+Ne]},set:function(ft){if(!ft)return We.removeAllListeners(Ne),We._parser["on"+Ne]=ft,ft;We.on(Ne,ft)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(o.prototype,{constructor:{value:h}}),h.prototype.write=function(de){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(de)){if(!this._decoder){var oe=xTe().StringDecoder;this._decoder=new oe("utf8")}de=this._decoder.write(de)}return this._parser.write(de.toString()),this.emit("data",de),!0},h.prototype.end=function(de){return de&&de.length&&this.write(de),this._parser.end(),!0},h.prototype.on=function(de,oe){var We=this;return!We._parser["on"+de]&&u.indexOf(de)!==-1&&(We._parser["on"+de]=function(){var Ne=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Ne.splice(0,0,de),We.emit.apply(We,Ne)}),o.prototype.on.call(We,de,oe)};var p="[CDATA[",m="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",w={xml:g,xmlns:v},S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function O(de){return de===" "||de===`
`||de==="\r"||de==="	"}function I(de){return de==='"'||de==="'"}function E(de){return de===">"||O(de)}function U(de,oe){return de.test(oe)}function D(de,oe){return!U(de,oe)}var R=0;t.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(de){var oe=t.ENTITIES[de],We=typeof oe=="number"?String.fromCharCode(oe):oe;t.ENTITIES[de]=We});for(var W in t.STATE)t.STATE[t.STATE[W]]=W;R=t.STATE;function ce(de,oe,We){de[oe]&&de[oe](We)}function te(de,oe,We){de.textNode&&me(de),ce(de,oe,We)}function me(de){de.textNode=H(de.opt,de.textNode),de.textNode&&ce(de,"ontext",de.textNode),de.textNode=""}function H(de,oe){return de.trim&&(oe=oe.trim()),de.normalize&&(oe=oe.replace(/\s+/g," ")),oe}function ge(de,oe){return me(de),de.trackPosition&&(oe+=`
Line: `+de.line+`
Column: `+de.column+`
Char: `+de.c),oe=new Error(oe),de.error=oe,ce(de,"onerror",oe),de}function Ee(de){return de.sawRoot&&!de.closedRoot&&ke(de,"Unclosed root tag"),de.state!==R.BEGIN&&de.state!==R.BEGIN_WHITESPACE&&de.state!==R.TEXT&&ge(de,"Unexpected end"),me(de),de.c="",de.closed=!0,ce(de,"onend"),r.call(de,de.strict,de.opt),de}function ke(de,oe){if(typeof de!="object"||!(de instanceof r))throw new Error("bad call to strictFail");de.strict&&ge(de,oe)}function ze(de){de.strict||(de.tagName=de.tagName[de.looseCase]());var oe=de.tags[de.tags.length-1]||de,We=de.tag={name:de.tagName,attributes:{}};de.opt.xmlns&&(We.ns=oe.ns),de.attribList.length=0,te(de,"onopentagstart",We)}function xe(de,oe){var We=de.indexOf(":"),Ne=We<0?["",de]:de.split(":"),ft=Ne[0],Pt=Ne[1];return oe&&de==="xmlns"&&(ft="xmlns",Pt=""),{prefix:ft,local:Pt}}function Re(de){if(de.strict||(de.attribName=de.attribName[de.looseCase]()),de.attribList.indexOf(de.attribName)!==-1||de.tag.attributes.hasOwnProperty(de.attribName)){de.attribName=de.attribValue="";return}if(de.opt.xmlns){var oe=xe(de.attribName,!0),We=oe.prefix,Ne=oe.local;if(We==="xmlns")if(Ne==="xml"&&de.attribValue!==g)ke(de,"xml: prefix must be bound to "+g+`
Actual: `+de.attribValue);else if(Ne==="xmlns"&&de.attribValue!==v)ke(de,"xmlns: prefix must be bound to "+v+`
Actual: `+de.attribValue);else{var ft=de.tag,Pt=de.tags[de.tags.length-1]||de;ft.ns===Pt.ns&&(ft.ns=Object.create(Pt.ns)),ft.ns[Ne]=de.attribValue}de.attribList.push([de.attribName,de.attribValue])}else de.tag.attributes[de.attribName]=de.attribValue,te(de,"onattribute",{name:de.attribName,value:de.attribValue});de.attribName=de.attribValue=""}function _e(de,oe){if(de.opt.xmlns){var We=de.tag,Ne=xe(de.tagName);We.prefix=Ne.prefix,We.local=Ne.local,We.uri=We.ns[Ne.prefix]||"",We.prefix&&!We.uri&&(ke(de,"Unbound namespace prefix: "+JSON.stringify(de.tagName)),We.uri=Ne.prefix);var ft=de.tags[de.tags.length-1]||de;We.ns&&ft.ns!==We.ns&&Object.keys(We.ns).forEach(function(ye){te(de,"onopennamespace",{prefix:ye,uri:We.ns[ye]})});for(var Pt=0,Ct=de.attribList.length;Pt<Ct;Pt++){var q=de.attribList[Pt],qe=q[0],ae=q[1],M=xe(qe,!0),L=M.prefix,ee=M.local,pe=L===""?"":We.ns[L]||"",ve={name:qe,value:ae,prefix:L,local:ee,uri:pe};L&&L!=="xmlns"&&!pe&&(ke(de,"Unbound namespace prefix: "+JSON.stringify(L)),ve.uri=L),de.tag.attributes[qe]=ve,te(de,"onattribute",ve)}de.attribList.length=0}de.tag.isSelfClosing=!!oe,de.sawRoot=!0,de.tags.push(de.tag),te(de,"onopentag",de.tag),oe||(!de.noscript&&de.tagName.toLowerCase()==="script"?de.state=R.SCRIPT:de.state=R.TEXT,de.tag=null,de.tagName=""),de.attribName=de.attribValue="",de.attribList.length=0}function Pe(de){if(!de.tagName){ke(de,"Weird empty close tag."),de.textNode+="</>",de.state=R.TEXT;return}if(de.script){if(de.tagName!=="script"){de.script+="</"+de.tagName+">",de.tagName="",de.state=R.SCRIPT;return}te(de,"onscript",de.script),de.script=""}var oe=de.tags.length,We=de.tagName;de.strict||(We=We[de.looseCase]());for(var Ne=We;oe--;){var ft=de.tags[oe];if(ft.name!==Ne)ke(de,"Unexpected close tag");else break}if(oe<0){ke(de,"Unmatched closing tag: "+de.tagName),de.textNode+="</"+de.tagName+">",de.state=R.TEXT;return}de.tagName=We;for(var Pt=de.tags.length;Pt-- >oe;){var Ct=de.tag=de.tags.pop();de.tagName=de.tag.name,te(de,"onclosetag",de.tagName);var q={};for(var qe in Ct.ns)q[qe]=Ct.ns[qe];var ae=de.tags[de.tags.length-1]||de;de.opt.xmlns&&Ct.ns!==ae.ns&&Object.keys(Ct.ns).forEach(function(M){var L=Ct.ns[M];te(de,"onclosenamespace",{prefix:M,uri:L})})}oe===0&&(de.closedRoot=!0),de.tagName=de.attribValue=de.attribName="",de.attribList.length=0,de.state=R.TEXT}function it(de){var oe=de.entity,We=oe.toLowerCase(),Ne,ft="";return de.ENTITIES[oe]?de.ENTITIES[oe]:de.ENTITIES[We]?de.ENTITIES[We]:(oe=We,oe.charAt(0)==="#"&&(oe.charAt(1)==="x"?(oe=oe.slice(2),Ne=parseInt(oe,16),ft=Ne.toString(16)):(oe=oe.slice(1),Ne=parseInt(oe,10),ft=Ne.toString(10))),oe=oe.replace(/^0+/,""),isNaN(Ne)||ft.toLowerCase()!==oe||Ne<0||Ne>1114111?(ke(de,"Invalid character entity"),"&"+de.entity+";"):String.fromCodePoint(Ne))}function tt(de,oe){oe==="<"?(de.state=R.OPEN_WAKA,de.startTagPosition=de.position):O(oe)||(ke(de,"Non-whitespace before first tag."),de.textNode=oe,de.state=R.TEXT)}function Ue(de,oe){var We="";return oe<de.length&&(We=de.charAt(oe)),We}function ut(de){var oe=this;if(this.error)throw this.error;if(oe.closed)return ge(oe,"Cannot write after close. Assign an onready handler.");if(de===null)return Ee(oe);typeof de=="object"&&(de=de.toString());for(var We=0,Ne="";Ne=Ue(de,We++),oe.c=Ne,!!Ne;)switch(oe.trackPosition&&(oe.position++,Ne===`
`?(oe.line++,oe.column=0):oe.column++),oe.state){case R.BEGIN:if(oe.state=R.BEGIN_WHITESPACE,Ne==="\uFEFF")continue;tt(oe,Ne);continue;case R.BEGIN_WHITESPACE:tt(oe,Ne);continue;case R.TEXT:if(oe.sawRoot&&!oe.closedRoot){for(var Pt=We-1;Ne&&Ne!=="<"&&Ne!=="&";)Ne=Ue(de,We++),Ne&&oe.trackPosition&&(oe.position++,Ne===`
`?(oe.line++,oe.column=0):oe.column++);oe.textNode+=de.substring(Pt,We-1)}Ne==="<"&&!(oe.sawRoot&&oe.closedRoot&&!oe.strict)?(oe.state=R.OPEN_WAKA,oe.startTagPosition=oe.position):(!O(Ne)&&(!oe.sawRoot||oe.closedRoot)&&ke(oe,"Text data outside of root node."),Ne==="&"?oe.state=R.TEXT_ENTITY:oe.textNode+=Ne);continue;case R.SCRIPT:Ne==="<"?oe.state=R.SCRIPT_ENDING:oe.script+=Ne;continue;case R.SCRIPT_ENDING:Ne==="/"?oe.state=R.CLOSE_TAG:(oe.script+="<"+Ne,oe.state=R.SCRIPT);continue;case R.OPEN_WAKA:if(Ne==="!")oe.state=R.SGML_DECL,oe.sgmlDecl="";else if(!O(Ne))if(U(S,Ne))oe.state=R.OPEN_TAG,oe.tagName=Ne;else if(Ne==="/")oe.state=R.CLOSE_TAG,oe.tagName="";else if(Ne==="?")oe.state=R.PROC_INST,oe.procInstName=oe.procInstBody="";else{if(ke(oe,"Unencoded <"),oe.startTagPosition+1<oe.position){var ft=oe.position-oe.startTagPosition;Ne=new Array(ft).join(" ")+Ne}oe.textNode+="<"+Ne,oe.state=R.TEXT}continue;case R.SGML_DECL:if(oe.sgmlDecl+Ne==="--"){oe.state=R.COMMENT,oe.comment="",oe.sgmlDecl="";continue}oe.doctype&&oe.doctype!==!0&&oe.sgmlDecl?(oe.state=R.DOCTYPE_DTD,oe.doctype+="<!"+oe.sgmlDecl+Ne,oe.sgmlDecl=""):(oe.sgmlDecl+Ne).toUpperCase()===p?(te(oe,"onopencdata"),oe.state=R.CDATA,oe.sgmlDecl="",oe.cdata=""):(oe.sgmlDecl+Ne).toUpperCase()===m?(oe.state=R.DOCTYPE,(oe.doctype||oe.sawRoot)&&ke(oe,"Inappropriately located doctype declaration"),oe.doctype="",oe.sgmlDecl=""):Ne===">"?(te(oe,"onsgmldeclaration",oe.sgmlDecl),oe.sgmlDecl="",oe.state=R.TEXT):(I(Ne)&&(oe.state=R.SGML_DECL_QUOTED),oe.sgmlDecl+=Ne);continue;case R.SGML_DECL_QUOTED:Ne===oe.q&&(oe.state=R.SGML_DECL,oe.q=""),oe.sgmlDecl+=Ne;continue;case R.DOCTYPE:Ne===">"?(oe.state=R.TEXT,te(oe,"ondoctype",oe.doctype),oe.doctype=!0):(oe.doctype+=Ne,Ne==="["?oe.state=R.DOCTYPE_DTD:I(Ne)&&(oe.state=R.DOCTYPE_QUOTED,oe.q=Ne));continue;case R.DOCTYPE_QUOTED:oe.doctype+=Ne,Ne===oe.q&&(oe.q="",oe.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:Ne==="]"?(oe.doctype+=Ne,oe.state=R.DOCTYPE):Ne==="<"?(oe.state=R.OPEN_WAKA,oe.startTagPosition=oe.position):I(Ne)?(oe.doctype+=Ne,oe.state=R.DOCTYPE_DTD_QUOTED,oe.q=Ne):oe.doctype+=Ne;continue;case R.DOCTYPE_DTD_QUOTED:oe.doctype+=Ne,Ne===oe.q&&(oe.state=R.DOCTYPE_DTD,oe.q="");continue;case R.COMMENT:Ne==="-"?oe.state=R.COMMENT_ENDING:oe.comment+=Ne;continue;case R.COMMENT_ENDING:Ne==="-"?(oe.state=R.COMMENT_ENDED,oe.comment=H(oe.opt,oe.comment),oe.comment&&te(oe,"oncomment",oe.comment),oe.comment=""):(oe.comment+="-"+Ne,oe.state=R.COMMENT);continue;case R.COMMENT_ENDED:Ne!==">"?(ke(oe,"Malformed comment"),oe.comment+="--"+Ne,oe.state=R.COMMENT):oe.doctype&&oe.doctype!==!0?oe.state=R.DOCTYPE_DTD:oe.state=R.TEXT;continue;case R.CDATA:for(var Pt=We-1;Ne&&Ne!=="]";)Ne=Ue(de,We++),Ne&&oe.trackPosition&&(oe.position++,Ne===`
`?(oe.line++,oe.column=0):oe.column++);oe.cdata+=de.substring(Pt,We-1),Ne==="]"&&(oe.state=R.CDATA_ENDING);continue;case R.CDATA_ENDING:Ne==="]"?oe.state=R.CDATA_ENDING_2:(oe.cdata+="]"+Ne,oe.state=R.CDATA);continue;case R.CDATA_ENDING_2:Ne===">"?(oe.cdata&&te(oe,"oncdata",oe.cdata),te(oe,"onclosecdata"),oe.cdata="",oe.state=R.TEXT):Ne==="]"?oe.cdata+="]":(oe.cdata+="]]"+Ne,oe.state=R.CDATA);continue;case R.PROC_INST:Ne==="?"?oe.state=R.PROC_INST_ENDING:O(Ne)?oe.state=R.PROC_INST_BODY:oe.procInstName+=Ne;continue;case R.PROC_INST_BODY:if(!oe.procInstBody&&O(Ne))continue;Ne==="?"?oe.state=R.PROC_INST_ENDING:oe.procInstBody+=Ne;continue;case R.PROC_INST_ENDING:Ne===">"?(te(oe,"onprocessinginstruction",{name:oe.procInstName,body:oe.procInstBody}),oe.procInstName=oe.procInstBody="",oe.state=R.TEXT):(oe.procInstBody+="?"+Ne,oe.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:U(x,Ne)?oe.tagName+=Ne:(ze(oe),Ne===">"?_e(oe):Ne==="/"?oe.state=R.OPEN_TAG_SLASH:(O(Ne)||ke(oe,"Invalid character in tag name"),oe.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:Ne===">"?(_e(oe,!0),Pe(oe)):(ke(oe,"Forward-slash in opening tag not followed by >"),oe.state=R.ATTRIB);continue;case R.ATTRIB:if(O(Ne))continue;Ne===">"?_e(oe):Ne==="/"?oe.state=R.OPEN_TAG_SLASH:U(S,Ne)?(oe.attribName=Ne,oe.attribValue="",oe.state=R.ATTRIB_NAME):ke(oe,"Invalid attribute name");continue;case R.ATTRIB_NAME:Ne==="="?oe.state=R.ATTRIB_VALUE:Ne===">"?(ke(oe,"Attribute without value"),oe.attribValue=oe.attribName,Re(oe),_e(oe)):O(Ne)?oe.state=R.ATTRIB_NAME_SAW_WHITE:U(x,Ne)?oe.attribName+=Ne:ke(oe,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if(Ne==="=")oe.state=R.ATTRIB_VALUE;else{if(O(Ne))continue;ke(oe,"Attribute without value"),oe.tag.attributes[oe.attribName]="",oe.attribValue="",te(oe,"onattribute",{name:oe.attribName,value:""}),oe.attribName="",Ne===">"?_e(oe):U(S,Ne)?(oe.attribName=Ne,oe.state=R.ATTRIB_NAME):(ke(oe,"Invalid attribute name"),oe.state=R.ATTRIB)}continue;case R.ATTRIB_VALUE:if(O(Ne))continue;I(Ne)?(oe.q=Ne,oe.state=R.ATTRIB_VALUE_QUOTED):(oe.opt.unquotedAttributeValues||ge(oe,"Unquoted attribute value"),oe.state=R.ATTRIB_VALUE_UNQUOTED,oe.attribValue=Ne);continue;case R.ATTRIB_VALUE_QUOTED:if(Ne!==oe.q){Ne==="&"?oe.state=R.ATTRIB_VALUE_ENTITY_Q:oe.attribValue+=Ne;continue}Re(oe),oe.q="",oe.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:O(Ne)?oe.state=R.ATTRIB:Ne===">"?_e(oe):Ne==="/"?oe.state=R.OPEN_TAG_SLASH:U(S,Ne)?(ke(oe,"No whitespace between attributes"),oe.attribName=Ne,oe.attribValue="",oe.state=R.ATTRIB_NAME):ke(oe,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(!E(Ne)){Ne==="&"?oe.state=R.ATTRIB_VALUE_ENTITY_U:oe.attribValue+=Ne;continue}Re(oe),Ne===">"?_e(oe):oe.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(oe.tagName)Ne===">"?Pe(oe):U(x,Ne)?oe.tagName+=Ne:oe.script?(oe.script+="</"+oe.tagName,oe.tagName="",oe.state=R.SCRIPT):(O(Ne)||ke(oe,"Invalid tagname in closing tag"),oe.state=R.CLOSE_TAG_SAW_WHITE);else{if(O(Ne))continue;D(S,Ne)?oe.script?(oe.script+="</"+Ne,oe.state=R.SCRIPT):ke(oe,"Invalid tagname in closing tag."):oe.tagName=Ne}continue;case R.CLOSE_TAG_SAW_WHITE:if(O(Ne))continue;Ne===">"?Pe(oe):ke(oe,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:var Ct,q;switch(oe.state){case R.TEXT_ENTITY:Ct=R.TEXT,q="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:Ct=R.ATTRIB_VALUE_QUOTED,q="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:Ct=R.ATTRIB_VALUE_UNQUOTED,q="attribValue";break}if(Ne===";"){var qe=it(oe);oe.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(qe)?(oe.entity="",oe.state=Ct,oe.write(qe)):(oe[q]+=qe,oe.entity="",oe.state=Ct)}else U(oe.entity.length?j:k,Ne)?oe.entity+=Ne:(ke(oe,"Invalid character in entity name"),oe[q]+="&"+oe.entity+Ne,oe.entity="",oe.state=Ct);continue;default:throw new Error(oe,"Unknown state: "+oe.state)}return oe.position>=oe.bufferCheckPosition&&i(oe),oe}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var de=String.fromCharCode,oe=Math.floor,We=function(){var Ne=16384,ft=[],Pt,Ct,q=-1,qe=arguments.length;if(!qe)return"";for(var ae="";++q<qe;){var M=Number(arguments[q]);if(!isFinite(M)||M<0||M>1114111||oe(M)!==M)throw RangeError("Invalid code point: "+M);M<=65535?ft.push(M):(M-=65536,Pt=(M>>10)+55296,Ct=M%1024+56320,ft.push(Pt,Ct)),(q+1===qe||ft.length>Ne)&&(ae+=de.apply(null,ft),ft.length=0)}return ae};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:We,configurable:!0,writable:!0}):String.fromCodePoint=We}()})(e)})(UL);const wTe=vl(UL);class l2 extends Error{constructor(t,n,r,i,s){super(t),this.name="SvgoParserError",this.message=`${s||"<input>"}:${n}:${r}: ${t}`,this.reason=t,this.line=n,this.column=r,this.source=i,Error.captureStackTrace&&Error.captureStackTrace(this,l2)}toString(){const t=this.source.split(/\r?\n/),n=Math.max(this.line-3,0),r=Math.min(this.line+2,t.length),i=String(r).length,s=Math.max(this.column-54,0),a=Math.max(this.column+20,80),o=t.slice(n,r).map((u,d)=>{const h=u.slice(s,a);let p="",m="";s!==0&&(p=s>u.length-1?" ":""),a<u.length-1&&(m="");const g=n+1+d,v=` ${g.toString().padStart(i)} | `;if(g===this.line){const w=v.replace(/[^|]/g," "),S=(p+u.slice(s,this.column-1)).replace(/[^\t]/g," "),x=w+S;return`>${v}${p}${h}${m}
 ${x}^`}return` ${v}${p}${h}${m}`}).join(`
`);return`${this.name}: ${this.message}

${o}
`}}const Zb=/<!ENTITY\s+(\S+)\s+(?:'([^']+)'|"([^"]+)")\s*>/g,xj={strict:!0,trim:!1,normalize:!1,lowercase:!0,xmlns:!0,position:!0,unparsedEntities:!0},_Te=(e,t)=>{const n=wTe.parser(xj.strict,xj),r={type:"root",children:[]};let i=r;const s=[r],a=o=>{i.children.push(o)};return n.ondoctype=o=>{a({type:"doctype",name:"svg",data:{doctype:o}});const d=o.indexOf("[");if(d>=0){Zb.lastIndex=d;let h=Zb.exec(e);for(;h!=null;)n.ENTITIES[h[1]]=h[2]||h[3],h=Zb.exec(e)}},n.onprocessinginstruction=o=>{const u={type:"instruction",name:o.name,value:o.body};a(u)},n.oncomment=o=>{const u={type:"comment",value:o.trim()};a(u)},n.oncdata=o=>{a({type:"cdata",value:o})},n.onopentag=o=>{const u={type:"element",name:o.name,attributes:{},children:[]};for(const[d,h]of Object.entries(o.attributes))u.attributes[d]=h.value;a(u),i=u,s.push(u)},n.ontext=o=>{if(i.type==="element")if(wR.has(i.name))a({type:"text",value:o});else{const u=o.trim();u!==""&&a({type:"text",value:u})}},n.onclosetag=()=>{s.pop(),i=s[s.length-1]},n.onerror=o=>{const u=o.message.split(`
`)[0],d=new l2(u,n.line+1,n.column,e,t);if(o.message.indexOf("Unexpected end")===-1)throw d},n.write(e).close(),r},kTe=e=>STe[e],Hl={doctypeStart:"<!DOCTYPE",doctypeEnd:">",procInstStart:"<?",procInstEnd:"?>",tagOpenStart:"<",tagOpenEnd:">",tagCloseStart:"</",tagCloseEnd:">",tagShortStart:"<",tagShortEnd:"/>",attrStart:'="',attrEnd:'"',commentStart:"<!--",commentEnd:"-->",cdataStart:"<![CDATA[",cdataEnd:"]]>",textStart:"",textEnd:"",indent:4,regEntities:/[&'"<>]/g,regValEntities:/[&"<>]/g,encodeEntity:kTe,pretty:!1,useShortTags:!0,eol:"lf",finalNewline:!1},STe={"&":"&amp;","'":"&apos;",'"':"&quot;",">":"&gt;","<":"&lt;"},CTe=(e,t={})=>{const n={...Hl,...t},r=n.indent;let i="    ";typeof r=="number"&&Number.isNaN(r)===!1?i=r<0?"	":" ".repeat(r):typeof r=="string"&&(i=r);const s={indent:i,textContext:null,indentLevel:0},a=n.eol==="crlf"?`\r
`:`
`;n.pretty&&(n.doctypeEnd+=a,n.procInstEnd+=a,n.commentEnd+=a,n.cdataEnd+=a,n.tagShortEnd+=a,n.tagOpenEnd+=a,n.tagCloseEnd+=a,n.textEnd+=a);let o=HL(e,n,s);return n.finalNewline&&o.length>0&&!o.endsWith(`
`)&&(o+=a),o},HL=(e,t,n)=>{let r="";n.indentLevel++;for(const i of e.children)switch(i.type){case"element":r+=PTe(i,t,n);break;case"text":r+=NTe(i,t,n);break;case"doctype":r+=ETe(i,t);break;case"instruction":r+=TTe(i,t);break;case"comment":r+=jTe(i,t);break;case"cdata":r+=ATe(i,t,n)}return n.indentLevel--,r},Tu=(e,t)=>{let n="";return e.pretty&&t.textContext==null&&(n=t.indent.repeat(t.indentLevel-1)),n},ETe=(e,t)=>t.doctypeStart+e.data.doctype+t.doctypeEnd,TTe=(e,t)=>t.procInstStart+e.name+" "+e.value+t.procInstEnd,jTe=(e,t)=>t.commentStart+e.value+t.commentEnd,ATe=(e,t,n)=>Tu(t,n)+t.cdataStart+e.value+t.cdataEnd,PTe=(e,t,n)=>{if(e.children.length===0)return t.useShortTags?Tu(t,n)+t.tagShortStart+e.name+Qb(e,t)+t.tagShortEnd:Tu(t,n)+t.tagShortStart+e.name+Qb(e,t)+t.tagOpenEnd+t.tagCloseStart+e.name+t.tagCloseEnd;let r=t.tagOpenStart,i=t.tagOpenEnd,s=t.tagCloseStart,a=t.tagCloseEnd,o=Tu(t,n),u=Tu(t,n);n.textContext?(r=Hl.tagOpenStart,i=Hl.tagOpenEnd,s=Hl.tagCloseStart,a=Hl.tagCloseEnd,o=""):wR.has(e.name)&&(i=Hl.tagOpenEnd,s=Hl.tagCloseStart,u="",n.textContext=e);const d=HL(e,t,n);return n.textContext===e&&(n.textContext=null),o+r+e.name+Qb(e,t)+i+d+u+s+e.name+a},Qb=(e,t)=>{let n="";for(const[r,i]of Object.entries(e.attributes))if(n+=" "+r,i!==void 0){const s=i.toString().replace(t.regValEntities,t.encodeEntity);n+=t.attrStart+s+t.attrEnd}return n},NTe=(e,t,n)=>Tu(t,n)+t.textStart+e.value.replace(t.regEntities,t.encodeEntity)+(n.textContext?"":t.textEnd),d1=new Map;for(const e of mTe)d1.set(e.name,e);function wj(e){return e==="removeScriptElement"?(console.warn("Warning: removeScriptElement has been renamed to removeScripts, please update your SVGO config"),d1.get("removeScripts")):d1.get(e)}const OTe=e=>{if(typeof e=="string"){const t=wj(e);if(t==null)throw Error(`Unknown builtin plugin "${e}" specified.`);return{name:e,params:{},fn:t.fn}}if(typeof e=="object"&&e!=null){if(e.name==null)throw Error("Plugin name must be specified");let t=e.fn;if(t==null){const n=wj(e.name);if(n==null)throw Error(`Unknown builtin plugin "${e.name}" specified.`);t=n.fn}return{name:e.name,params:e.params,fn:t}}return null},RTe=(e,t)=>{if(t==null&&(t={}),typeof t!="object")throw Error("Config should be an object");const n=t.multipass?10:1;let r=Number.POSITIVE_INFINITY,i="";const s={};t.path!=null&&(s.path=t.path);for(let a=0;a<n;a+=1){s.multipassCount=a;const o=_Te(e,t.path),u=t.plugins||["preset-default"];if(!Array.isArray(u))throw Error("malformed config, `plugins` property must be an array.\nSee more info here: https://github.com/svg/svgo#configuration");const d=u.filter(p=>p!=null).map(OTe);d.length<u.length&&console.warn("Warning: plugins list includes null or undefined elements, these will be ignored.");const h={};if(t.floatPrecision!=null&&(h.floatPrecision=t.floatPrecision),UO(o,s,d,null,h),i=CTe(o,t.js2svg),i.length<r)e=i,r=i.length;else break}return t.datauri&&(i=mke(i,t.datauri)),{data:i}},MTe=(e,t)=>{if(t==null&&(t={}),typeof t!="object")throw Error("Config should be an object");return RTe(e,{...t,js2svg:{eol:BO.EOL===`\r
`?"crlf":"lf",...t.js2svg}})},LTe={plugins:["cleanupAttrs","removeDoctype","removeXMLProcInst","removeComments","removeMetadata","removeEditorsNSData","removeEmptyAttrs","removeEmptyContainers","removeUnusedNS",{name:"cleanupNumericValues",params:{floatPrecision:3,leadingZero:!0,defaultPx:!0,convertToPx:!1}},{name:"convertTransform",params:{convertToShorts:!0,floatPrecision:3,transformPrecision:5,matrixToTransform:!0,shortTranslate:!0,shortScale:!0,shortRotate:!0,removeUseless:!0,collapseIntoOne:!1,leadingZero:!0,negativeExtraSpace:!1}},{name:"convertShapeToPath",params:{convertArcs:!1}},{name:"convertPathData",params:{applyTransforms:!0,applyTransformsStroked:!0,makeArcs:!1,straightCurves:!0,lineShorthands:!0,curveSmoothShorthands:!0,floatPrecision:3,transformPrecision:5,removeUseless:!0,collapseRepeated:!0,utilizeAbsolute:!0,leadingZero:!0,negativeExtraSpace:!0,noSpaceAfterFlags:!1,forceAbsolutePath:!1}}],multipass:!1,floatPrecision:3};function Jb(e,t={}){if(!e||typeof e!="string")return console.warn("[SVG-NORMALIZE] Invalid input:",typeof e),e||"";if(!e.includes("<svg"))return console.warn("[SVG-NORMALIZE] Input does not appear to be SVG"),e;try{const n=e.length,r={...LTe,...t},i=MTe(e,r);if(!i||!i.data)return console.error("[SVG-NORMALIZE] SVGO returned no output"),e;const s=i.data.length,a=n-s,o=(a/n*100).toFixed(1);return console.log(`[SVG-NORMALIZE] Optimized: ${n}  ${s} bytes (saved ${a} bytes, ${o}%)`),i.data.includes("<svg")?i.data:(console.error("[SVG-NORMALIZE] Output is not valid SVG, returning original"),e)}catch(n){return console.error("[SVG-NORMALIZE] Optimization failed:",n.message),e}}const Wc={SIMPLE_MAX:500,MODERATE_MAX:1500,COMPLEX_MAX:1e4};function ITe(e){if(!e)return 0;const t=e.match(/[MmLlHhVvCcSsQqTtAaZz]/g);return t?t.length:0}function $Te(e){if(!e)return[];const t=[],n=e.match(/[MmLlHhVvCcSsQqTtAaZz][^MmLlHhVvCcSsQqTtAaZz]*/g)||[];for(const r of n){const i=r[0],s=r.slice(1).trim().split(/[\s,]+/).filter(Boolean).map(Number);t.push({command:i,args:s,raw:r})}return t}function DTe(e){if(!e)return null;const t=$Te(e);if(t.length===0)return null;let n=1/0,r=1/0,i=-1/0,s=-1/0,a=0,o=0;for(const u of t){const{command:d,args:h}=u,p=d===d.toLowerCase();switch(d.toUpperCase()){case"M":case"L":case"T":h.length>=2&&(a=p?a+h[0]:h[0],o=p?o+h[1]:h[1]);break;case"H":h.length>=1&&(a=p?a+h[0]:h[0]);break;case"V":h.length>=1&&(o=p?o+h[0]:h[0]);break;case"C":if(h.length>=6){for(let g=0;g<h.length;g+=2){const v=p?a+h[g]:h[g],w=p?o+h[g+1]:h[g+1];n=Math.min(n,v),r=Math.min(r,w),i=Math.max(i,v),s=Math.max(s,w)}a=p?a+h[h.length-2]:h[h.length-2],o=p?o+h[h.length-1]:h[h.length-1]}break;case"S":case"Q":h.length>=4&&(a=p?a+h[h.length-2]:h[h.length-2],o=p?o+h[h.length-1]:h[h.length-1]);break;case"A":h.length>=7&&(a=p?a+h[5]:h[5],o=p?o+h[6]:h[6]);break}n=Math.min(n,a),r=Math.min(r,o),i=Math.max(i,a),s=Math.max(s,o)}return!isFinite(n)||!isFinite(r)?null:{minX:n,minY:r,maxX:i,maxY:s,width:i-n,height:s-r}}function zTe(e){const t=Array.from(e.querySelectorAll("path, rect, circle, ellipse, polygon"));if(t.length<2)return{hasHiddenShapes:!1,hiddenCount:0,details:[]};const n=t.map((i,s)=>{const a=i.getAttribute("d");let u=a?DTe(a):null;if(!u){const d=i.tagName.toLowerCase();if(d==="rect"){const h=parseFloat(i.getAttribute("x"))||0,p=parseFloat(i.getAttribute("y"))||0,m=parseFloat(i.getAttribute("width"))||0,g=parseFloat(i.getAttribute("height"))||0;u={minX:h,minY:p,maxX:h+m,maxY:p+g,width:m,height:g}}else if(d==="circle"){const h=parseFloat(i.getAttribute("cx"))||0,p=parseFloat(i.getAttribute("cy"))||0,m=parseFloat(i.getAttribute("r"))||0;u={minX:h-m,minY:p-m,maxX:h+m,maxY:p+m,width:m*2,height:m*2}}else if(d==="ellipse"){const h=parseFloat(i.getAttribute("cx"))||0,p=parseFloat(i.getAttribute("cy"))||0,m=parseFloat(i.getAttribute("rx"))||0,g=parseFloat(i.getAttribute("ry"))||0;u={minX:h-m,minY:p-g,maxX:h+m,maxY:p+g,width:m*2,height:g*2}}}return{element:i,index:s,bounds:u,regionId:i.getAttribute("data-region-id"),fill:i.getAttribute("fill")||"none",fillOpacity:parseFloat(i.getAttribute("fill-opacity"))||1}}).filter(i=>i.bounds),r=[];for(let i=0;i<n.length;i++){const s=n[i];if(!(s.fill==="none"||s.fillOpacity===0))for(let a=i+1;a<n.length;a++){const o=n[a];if(!(o.fill==="none"||o.fillOpacity===0)&&o.bounds.minX<=s.bounds.minX&&o.bounds.minY<=s.bounds.minY&&o.bounds.maxX>=s.bounds.maxX&&o.bounds.maxY>=s.bounds.maxY){r.push({hiddenIndex:i,hiddenRegion:s.regionId,coveringIndex:a,coveringRegion:o.regionId});break}}}return{hasHiddenShapes:r.length>0,hiddenCount:r.length,details:r}}function FTe(e){let t;if(typeof e=="string"){const g=new DOMParser().parseFromString(e,"image/svg+xml");if(g.querySelector("parsererror"))return{valid:!1,error:"SVG parse error",pathCount:0,totalSegments:0,estimatedComplexity:"unknown",warnings:["Failed to parse SVG"]};t=g.documentElement}else if(e instanceof Element)t=e;else return{valid:!1,error:"Invalid input",pathCount:0,totalSegments:0,estimatedComplexity:"unknown",warnings:["Input must be SVG string or Element"]};const n=t.querySelectorAll("path"),r=t.querySelectorAll("rect, circle, ellipse, polygon, polyline, line"),i=t.querySelectorAll("g");let s=0,a=0;const o=[];n.forEach((m,g)=>{const v=m.getAttribute("d"),w=ITe(v);s+=w,a=Math.max(a,w),o.push({index:g,segments:w,regionId:m.getAttribute("data-region-id")})});const u=r.length*4;s+=u;let d;s<=Wc.SIMPLE_MAX?d="simple":s<=Wc.MODERATE_MAX?d="moderate":s<=Wc.COMPLEX_MAX?d="complex":d="very_complex";const h=zTe(t),p=[];return s>Wc.MODERATE_MAX&&p.push(`High segment count (${s}) may slow boolean operations`),s>Wc.COMPLEX_MAX&&p.push('Consider using "Flatten Artwork" before boolean operations'),a>500&&p.push(`Complex path detected (${a} segments in single path)`),h.hasHiddenShapes&&p.push(`${h.hiddenCount} potentially hidden shape(s) detected`),i.length>20&&p.push(`Deep nesting detected (${i.length} groups)`),{valid:!0,pathCount:n.length,shapeCount:r.length,groupCount:i.length,totalSegments:s,maxSegmentsInPath:a,estimatedComplexity:d,hasHiddenShapes:h.hasHiddenShapes,hiddenShapeCount:h.hiddenCount,hiddenShapeDetails:h.details,warnings:p,thresholds:Wc,complexityColor:BTe(d),complexityLabel:UTe(d)}}function BTe(e){switch(e){case"simple":return"#22c55e";case"moderate":return"#eab308";case"complex":return"#f97316";case"very_complex":return"#ef4444";default:return"#6b7280"}}function UTe(e){switch(e){case"simple":return"Simple";case"moderate":return"Moderate";case"complex":return"Complex";case"very_complex":return"Very Complex";default:return"Unknown"}}function HTe({svgContent:e,showDetails:t=!1,compact:n=!1}){const[r,i]=fe.useState(t),[s,a]=fe.useState(null);if(fe.useEffect(()=>{if(!e){a(null);return}const S=FTe(e);a(S),S.valid&&console.log("[ComplexityBadge] SVG Analysis:",{paths:S.pathCount,segments:S.totalSegments,complexity:S.estimatedComplexity,warnings:S.warnings})},[e]),!e||!s||!s.valid)return null;const{pathCount:o,shapeCount:u,totalSegments:d,estimatedComplexity:h,complexityColor:p,complexityLabel:m,hasHiddenShapes:g,hiddenShapeCount:v,warnings:w}=s;return n?l.jsx("span",{className:"complexity-badge-compact",title:`${d} segments, ${o} paths`,style:{backgroundColor:p},children:m}):l.jsxs("div",{className:"complexity-badge",children:[l.jsxs("button",{className:"complexity-badge-toggle",onClick:()=>i(!r),style:{borderColor:p},children:[l.jsx("span",{className:"complexity-dot",style:{backgroundColor:p}}),l.jsx("span",{className:"complexity-label",children:m}),l.jsxs("span",{className:"complexity-segments",children:[d," seg"]}),l.jsx("span",{className:"complexity-chevron",children:r?"":""})]}),r&&l.jsxs("div",{className:"complexity-details",children:[l.jsxs("div",{className:"complexity-stats",children:[l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Paths"}),l.jsx("span",{className:"stat-value",children:o})]}),l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Shapes"}),l.jsx("span",{className:"stat-value",children:u})]}),l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-label",children:"Segments"}),l.jsx("span",{className:"stat-value",children:d})]})]}),g&&l.jsxs("div",{className:"complexity-warning",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsxs("span",{children:[v," potentially hidden shape(s)"]})]}),w.length>0&&l.jsx("div",{className:"complexity-warnings",children:w.map((S,x)=>l.jsxs("div",{className:"complexity-warning",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{children:S})]},x))}),h==="very_complex"&&l.jsxs("div",{className:"complexity-suggestion",children:[l.jsx("strong",{children:"Tip:"}),' Consider using "Flatten Artwork" to simplify this design before editing.']})]}),l.jsx("style",{jsx:!0,children:`
        .complexity-badge {
          display: inline-block;
          font-size: 0.75rem;
        }

        .complexity-badge-toggle {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.25rem 0.5rem;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 4px;
          cursor: pointer;
          font-size: 0.75rem;
          color: #475569;
          transition: all 0.15s ease;
        }

        .complexity-badge-toggle:hover {
          background: #f1f5f9;
        }

        .complexity-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          flex-shrink: 0;
        }

        .complexity-label {
          font-weight: 600;
        }

        .complexity-segments {
          color: #94a3b8;
        }

        .complexity-chevron {
          font-size: 0.6rem;
          color: #94a3b8;
        }

        .complexity-details {
          margin-top: 0.5rem;
          padding: 0.75rem;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 6px;
        }

        .complexity-stats {
          display: flex;
          gap: 1rem;
          margin-bottom: 0.5rem;
        }

        .stat {
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .stat-label {
          font-size: 0.65rem;
          color: #94a3b8;
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .stat-value {
          font-size: 1rem;
          font-weight: 600;
          color: #1e293b;
        }

        .complexity-warnings {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        .complexity-warning {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.375rem 0.5rem;
          background: #fef3c7;
          border-radius: 4px;
          font-size: 0.7rem;
          color: #92400e;
        }

        .warning-icon {
          font-size: 0.8rem;
        }

        .complexity-suggestion {
          margin-top: 0.5rem;
          padding: 0.5rem;
          background: #dbeafe;
          border-radius: 4px;
          font-size: 0.7rem;
          color: #1e40af;
        }

        .complexity-badge-compact {
          display: inline-block;
          padding: 0.125rem 0.375rem;
          font-size: 0.65rem;
          font-weight: 600;
          color: white;
          border-radius: 3px;
          text-transform: uppercase;
          letter-spacing: 0.03em;
        }
      `})]})}var WL={exports:{}};(function(e){(function(){function t(){var n=this;this.versionnumber="1.2.6",this.imageToSVG=function(r,i,s){s=n.checkoptions(s),n.loadImage(r,function(a){i(n.imagedataToSVG(n.getImgdata(a),s))},s)},this.imagedataToSVG=function(r,i){i=n.checkoptions(i);var s=n.imagedataToTracedata(r,i);return n.getsvgstring(s,i)},this.imageToTracedata=function(r,i,s){s=n.checkoptions(s),n.loadImage(r,function(a){i(n.imagedataToTracedata(n.getImgdata(a),s))},s)},this.imagedataToTracedata=function(r,i){i=n.checkoptions(i);var s=n.colorquantization(r,i);if(i.layering===0)for(var a={layers:[],palette:s.palette,width:s.array[0].length-2,height:s.array.length-2},o=0;o<s.palette.length;o++){var u=n.batchtracepaths(n.internodes(n.pathscan(n.layeringstep(s,o),i.pathomit),i),i.ltres,i.qtres);a.layers.push(u)}else{var d=n.layering(s);i.layercontainerid&&n.drawLayers(d,n.specpalette,i.scale,i.layercontainerid);var h=n.batchpathscan(d,i.pathomit),p=n.batchinternodes(h,i),a={layers:n.batchtracelayers(p,i.ltres,i.qtres),palette:s.palette,width:r.width,height:r.height}}return a},this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.checkoptions=function(r){r=r||{},typeof r=="string"&&(r=r.toLowerCase(),n.optionpresets[r]?r=n.optionpresets[r]:r={});for(var i=Object.keys(n.optionpresets.default),s=0;s<i.length;s++)r.hasOwnProperty(i[s])||(r[i[s]]=n.optionpresets.default[i[s]]);return r},this.colorquantization=function(r,i){var s=[],a=0,o,u,d,h=[],p=r.width*r.height,m,g,v,w,S;if(r.data.length<p*4){for(var x=new Uint8ClampedArray(p*4),k=0;k<p;k++)x[k*4]=r.data[k*3],x[k*4+1]=r.data[k*3+1],x[k*4+2]=r.data[k*3+2],x[k*4+3]=255;r.data=x}for(g=0;g<r.height+2;g++)for(s[g]=[],m=0;m<r.width+2;m++)s[g][m]=-1;for(i.pal?S=i.pal:i.colorsampling===0?S=n.generatepalette(i.numberofcolors):i.colorsampling===1?S=n.samplepalette(i.numberofcolors,r):S=n.samplepalette2(i.numberofcolors,r),i.blurradius>0&&(r=n.blur(r,i.blurradius,i.blurdelta)),w=0;w<i.colorquantcycles;w++){if(w>0)for(v=0;v<S.length;v++)h[v].n>0&&(S[v]={r:Math.floor(h[v].r/h[v].n),g:Math.floor(h[v].g/h[v].n),b:Math.floor(h[v].b/h[v].n),a:Math.floor(h[v].a/h[v].n)}),h[v].n/p<i.mincolorratio&&w<i.colorquantcycles-1&&(S[v]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(m=0;m<S.length;m++)h[m]={r:0,g:0,b:0,a:0,n:0};for(g=0;g<r.height;g++)for(m=0;m<r.width;m++){for(a=(g*r.width+m)*4,d=0,u=1024,v=0;v<S.length;v++)o=Math.abs(S[v].r-r.data[a])+Math.abs(S[v].g-r.data[a+1])+Math.abs(S[v].b-r.data[a+2])+Math.abs(S[v].a-r.data[a+3]),o<u&&(u=o,d=v);h[d].r+=r.data[a],h[d].g+=r.data[a+1],h[d].b+=r.data[a+2],h[d].a+=r.data[a+3],h[d].n++,s[g+1][m+1]=d}}return{array:s,palette:S}},this.samplepalette=function(r,i){for(var s,a=[],o=0;o<r;o++)s=Math.floor(Math.random()*i.data.length/4)*4,a.push({r:i.data[s],g:i.data[s+1],b:i.data[s+2],a:i.data[s+3]});return a},this.samplepalette2=function(r,i){for(var s,a=[],o=Math.ceil(Math.sqrt(r)),u=Math.ceil(r/o),d=i.width/(o+1),h=i.height/(u+1),p=0;p<u;p++)for(var m=0;m<o&&a.length!==r;m++)s=Math.floor((p+1)*h*i.width+(m+1)*d)*4,a.push({r:i.data[s],g:i.data[s+1],b:i.data[s+2],a:i.data[s+3]});return a},this.generatepalette=function(r){var i=[],s,a,o;if(r<8)for(var u=Math.floor(255/(r-1)),d=0;d<r;d++)i.push({r:d*u,g:d*u,b:d*u,a:255});else{var h=Math.floor(Math.pow(r,.3333333333333333)),p=Math.floor(255/(h-1)),m=r-h*h*h;for(s=0;s<h;s++)for(a=0;a<h;a++)for(o=0;o<h;o++)i.push({r:s*p,g:a*p,b:o*p,a:255});for(s=0;s<m;s++)i.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return i},this.layering=function(r){var i=[],s=0,a=r.array.length,o=r.array[0].length,u,d,h,p,m,g,v,w,S,x,k;for(k=0;k<r.palette.length;k++)for(i[k]=[],x=0;x<a;x++)for(i[k][x]=[],S=0;S<o;S++)i[k][x][S]=0;for(x=1;x<a-1;x++)for(S=1;S<o-1;S++)s=r.array[x][S],u=r.array[x-1][S-1]===s?1:0,d=r.array[x-1][S]===s?1:0,h=r.array[x-1][S+1]===s?1:0,p=r.array[x][S-1]===s?1:0,m=r.array[x][S+1]===s?1:0,g=r.array[x+1][S-1]===s?1:0,v=r.array[x+1][S]===s?1:0,w=r.array[x+1][S+1]===s?1:0,i[s][x+1][S+1]=1+m*2+w*4+v*8,p||(i[s][x+1][S]=2+v*4+g*8),d||(i[s][x][S+1]=0+h*2+m*4+8),u||(i[s][x][S]=0+d*2+4+p*8);return i},this.layeringstep=function(r,i){var s=[],a=r.array.length,o=r.array[0].length,u,d;for(d=0;d<a;d++)for(s[d]=[],u=0;u<o;u++)s[d][u]=0;for(d=1;d<a;d++)for(u=1;u<o;u++)s[d][u]=(r.array[d-1][u-1]===i?1:0)+(r.array[d-1][u]===i?2:0)+(r.array[d][u-1]===i?8:0)+(r.array[d][u]===i?4:0);return s},this.pointinpoly=function(r,i){for(var s=!1,a=0,o=i.length-1;a<i.length;o=a++)s=i[a].y>r.y!=i[o].y>r.y&&r.x<(i[o].x-i[a].x)*(r.y-i[a].y)/(i[o].y-i[a].y)+i[a].x?!s:s;return s},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.pathscan=function(r,i){for(var s=[],a=0,o=0,u=0,d=0,h=r[0].length,p=r.length,m=0,g=!0,v=!1,w,S=0;S<p;S++)for(var x=0;x<h;x++)if(r[S][x]==4||r[S][x]==11)for(u=x,d=S,s[a]={},s[a].points=[],s[a].boundingbox=[u,d,u,d],s[a].holechildren=[],g=!1,o=0,v=r[S][x]==11,m=1;!g;){if(s[a].points[o]={},s[a].points[o].x=u-1,s[a].points[o].y=d-1,s[a].points[o].t=r[d][u],u-1<s[a].boundingbox[0]&&(s[a].boundingbox[0]=u-1),u-1>s[a].boundingbox[2]&&(s[a].boundingbox[2]=u-1),d-1<s[a].boundingbox[1]&&(s[a].boundingbox[1]=d-1),d-1>s[a].boundingbox[3]&&(s[a].boundingbox[3]=d-1),w=n.pathscan_combined_lookup[r[d][u]][m],r[d][u]=w[0],m=w[1],u+=w[2],d+=w[3],u-1===s[a].points[0].x&&d-1===s[a].points[0].y)if(g=!0,s[a].points.length<i)s.pop();else{if(s[a].isholepath=!!v,v){for(var k=0,j=[-1,-1,h+1,p+1],O=0;O<a;O++)!s[O].isholepath&&n.boundingboxincludes(s[O].boundingbox,s[a].boundingbox)&&n.boundingboxincludes(j,s[O].boundingbox)&&n.pointinpoly(s[a].points[0],s[O].points)&&(k=O,j=s[O].boundingbox);s[k].holechildren.push(a)}a++}o++}return s},this.boundingboxincludes=function(r,i){return r[0]<i[0]&&r[1]<i[1]&&r[2]>i[2]&&r[3]>i[3]},this.batchpathscan=function(r,i){var s=[];for(var a in r)r.hasOwnProperty(a)&&(s[a]=n.pathscan(r[a],i));return s},this.internodes=function(r,i){var s=[],a=0,o=0,u=0,d=0,h=0,p,m;for(p=0;p<r.length;p++)for(s[p]={},s[p].points=[],s[p].boundingbox=r[p].boundingbox,s[p].holechildren=r[p].holechildren,s[p].isholepath=r[p].isholepath,a=r[p].points.length,m=0;m<a;m++)o=(m+1)%a,u=(m+2)%a,d=(m-1+a)%a,h=(m-2+a)%a,i.rightangleenhance&&n.testrightangle(r[p],h,d,m,o,u)&&(s[p].points.length>0&&(s[p].points[s[p].points.length-1].linesegment=n.getdirection(s[p].points[s[p].points.length-1].x,s[p].points[s[p].points.length-1].y,r[p].points[m].x,r[p].points[m].y)),s[p].points.push({x:r[p].points[m].x,y:r[p].points[m].y,linesegment:n.getdirection(r[p].points[m].x,r[p].points[m].y,(r[p].points[m].x+r[p].points[o].x)/2,(r[p].points[m].y+r[p].points[o].y)/2)})),s[p].points.push({x:(r[p].points[m].x+r[p].points[o].x)/2,y:(r[p].points[m].y+r[p].points[o].y)/2,linesegment:n.getdirection((r[p].points[m].x+r[p].points[o].x)/2,(r[p].points[m].y+r[p].points[o].y)/2,(r[p].points[o].x+r[p].points[u].x)/2,(r[p].points[o].y+r[p].points[u].y)/2)});return s},this.testrightangle=function(r,i,s,a,o,u){return r.points[a].x===r.points[i].x&&r.points[a].x===r.points[s].x&&r.points[a].y===r.points[o].y&&r.points[a].y===r.points[u].y||r.points[a].y===r.points[i].y&&r.points[a].y===r.points[s].y&&r.points[a].x===r.points[o].x&&r.points[a].x===r.points[u].x},this.getdirection=function(r,i,s,a){var o=8;return r<s?i<a?o=1:i>a?o=7:o=0:r>s?i<a?o=3:i>a?o=5:o=4:i<a?o=2:i>a?o=6:o=8,o},this.batchinternodes=function(r,i){var s=[];for(var a in r)r.hasOwnProperty(a)&&(s[a]=n.internodes(r[a],i));return s},this.tracepath=function(r,i,s){var a=0,o,u,d,h={};for(h.segments=[],h.boundingbox=r.boundingbox,h.holechildren=r.holechildren,h.isholepath=r.isholepath;a<r.points.length;){for(o=r.points[a].linesegment,u=-1,d=a+1;(r.points[d].linesegment===o||r.points[d].linesegment===u||u===-1)&&d<r.points.length-1;)r.points[d].linesegment!==o&&u===-1&&(u=r.points[d].linesegment),d++;d===r.points.length-1&&(d=0),h.segments=h.segments.concat(n.fitseq(r,i,s,a,d)),d>0?a=d:a=r.points.length}return h},this.fitseq=function(r,i,s,a,o){if(o>r.points.length||o<0)return[];var u=a,d=0,h=!0,p,m,g,v=o-a;v<0&&(v+=r.points.length);for(var w=(r.points[o].x-r.points[a].x)/v,S=(r.points[o].y-r.points[a].y)/v,x=(a+1)%r.points.length,k;x!=o;)k=x-a,k<0&&(k+=r.points.length),p=r.points[a].x+w*k,m=r.points[a].y+S*k,g=(r.points[x].x-p)*(r.points[x].x-p)+(r.points[x].y-m)*(r.points[x].y-m),g>i&&(h=!1),g>d&&(u=x,d=g),x=(x+1)%r.points.length;if(h)return[{type:"L",x1:r.points[a].x,y1:r.points[a].y,x2:r.points[o].x,y2:r.points[o].y}];var j=u;h=!0,d=0;var O=(j-a)/v,I=(1-O)*(1-O),E=2*(1-O)*O,U=O*O,D=(I*r.points[a].x+U*r.points[o].x-r.points[j].x)/-E,R=(I*r.points[a].y+U*r.points[o].y-r.points[j].y)/-E;for(x=a+1;x!=o;)O=(x-a)/v,I=(1-O)*(1-O),E=2*(1-O)*O,U=O*O,p=I*r.points[a].x+E*D+U*r.points[o].x,m=I*r.points[a].y+E*R+U*r.points[o].y,g=(r.points[x].x-p)*(r.points[x].x-p)+(r.points[x].y-m)*(r.points[x].y-m),g>s&&(h=!1),g>d&&(u=x,d=g),x=(x+1)%r.points.length;if(h)return[{type:"Q",x1:r.points[a].x,y1:r.points[a].y,x2:D,y2:R,x3:r.points[o].x,y3:r.points[o].y}];var W=j;return n.fitseq(r,i,s,a,W).concat(n.fitseq(r,i,s,W,o))},this.batchtracepaths=function(r,i,s){var a=[];for(var o in r)r.hasOwnProperty(o)&&a.push(n.tracepath(r[o],i,s));return a},this.batchtracelayers=function(r,i,s){var a=[];for(var o in r)r.hasOwnProperty(o)&&(a[o]=n.batchtracepaths(r[o],i,s));return a},this.roundtodec=function(r,i){return+r.toFixed(i)},this.svgpathstring=function(r,i,s,a){var o=r.layers[i],u=o[s],d="",h;if(a.linefilter&&u.segments.length<3)return d;if(d="<path "+(a.desc?'desc="l '+i+" p "+s+'" ':"")+n.tosvgcolorstr(r.palette[i],a)+'d="',a.roundcoords===-1){for(d+="M "+u.segments[0].x1*a.scale+" "+u.segments[0].y1*a.scale+" ",h=0;h<u.segments.length;h++)d+=u.segments[h].type+" "+u.segments[h].x2*a.scale+" "+u.segments[h].y2*a.scale+" ",u.segments[h].hasOwnProperty("x3")&&(d+=u.segments[h].x3*a.scale+" "+u.segments[h].y3*a.scale+" ");d+="Z "}else{for(d+="M "+n.roundtodec(u.segments[0].x1*a.scale,a.roundcoords)+" "+n.roundtodec(u.segments[0].y1*a.scale,a.roundcoords)+" ",h=0;h<u.segments.length;h++)d+=u.segments[h].type+" "+n.roundtodec(u.segments[h].x2*a.scale,a.roundcoords)+" "+n.roundtodec(u.segments[h].y2*a.scale,a.roundcoords)+" ",u.segments[h].hasOwnProperty("x3")&&(d+=n.roundtodec(u.segments[h].x3*a.scale,a.roundcoords)+" "+n.roundtodec(u.segments[h].y3*a.scale,a.roundcoords)+" ");d+="Z "}for(var p=0;p<u.holechildren.length;p++){var m=o[u.holechildren[p]];if(a.roundcoords===-1)for(m.segments[m.segments.length-1].hasOwnProperty("x3")?d+="M "+m.segments[m.segments.length-1].x3*a.scale+" "+m.segments[m.segments.length-1].y3*a.scale+" ":d+="M "+m.segments[m.segments.length-1].x2*a.scale+" "+m.segments[m.segments.length-1].y2*a.scale+" ",h=m.segments.length-1;h>=0;h--)d+=m.segments[h].type+" ",m.segments[h].hasOwnProperty("x3")&&(d+=m.segments[h].x2*a.scale+" "+m.segments[h].y2*a.scale+" "),d+=m.segments[h].x1*a.scale+" "+m.segments[h].y1*a.scale+" ";else for(m.segments[m.segments.length-1].hasOwnProperty("x3")?d+="M "+n.roundtodec(m.segments[m.segments.length-1].x3*a.scale)+" "+n.roundtodec(m.segments[m.segments.length-1].y3*a.scale)+" ":d+="M "+n.roundtodec(m.segments[m.segments.length-1].x2*a.scale)+" "+n.roundtodec(m.segments[m.segments.length-1].y2*a.scale)+" ",h=m.segments.length-1;h>=0;h--)d+=m.segments[h].type+" ",m.segments[h].hasOwnProperty("x3")&&(d+=n.roundtodec(m.segments[h].x2*a.scale)+" "+n.roundtodec(m.segments[h].y2*a.scale)+" "),d+=n.roundtodec(m.segments[h].x1*a.scale)+" "+n.roundtodec(m.segments[h].y1*a.scale)+" ";d+="Z "}if(d+='" />',a.lcpr||a.qcpr){for(h=0;h<u.segments.length;h++)u.segments[h].hasOwnProperty("x3")&&a.qcpr&&(d+='<circle cx="'+u.segments[h].x2*a.scale+'" cy="'+u.segments[h].y2*a.scale+'" r="'+a.qcpr+'" fill="cyan" stroke-width="'+a.qcpr*.2+'" stroke="black" />',d+='<circle cx="'+u.segments[h].x3*a.scale+'" cy="'+u.segments[h].y3*a.scale+'" r="'+a.qcpr+'" fill="white" stroke-width="'+a.qcpr*.2+'" stroke="black" />',d+='<line x1="'+u.segments[h].x1*a.scale+'" y1="'+u.segments[h].y1*a.scale+'" x2="'+u.segments[h].x2*a.scale+'" y2="'+u.segments[h].y2*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />',d+='<line x1="'+u.segments[h].x2*a.scale+'" y1="'+u.segments[h].y2*a.scale+'" x2="'+u.segments[h].x3*a.scale+'" y2="'+u.segments[h].y3*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />'),!u.segments[h].hasOwnProperty("x3")&&a.lcpr&&(d+='<circle cx="'+u.segments[h].x2*a.scale+'" cy="'+u.segments[h].y2*a.scale+'" r="'+a.lcpr+'" fill="white" stroke-width="'+a.lcpr*.2+'" stroke="black" />');for(var p=0;p<u.holechildren.length;p++){var m=o[u.holechildren[p]];for(h=0;h<m.segments.length;h++)m.segments[h].hasOwnProperty("x3")&&a.qcpr&&(d+='<circle cx="'+m.segments[h].x2*a.scale+'" cy="'+m.segments[h].y2*a.scale+'" r="'+a.qcpr+'" fill="cyan" stroke-width="'+a.qcpr*.2+'" stroke="black" />',d+='<circle cx="'+m.segments[h].x3*a.scale+'" cy="'+m.segments[h].y3*a.scale+'" r="'+a.qcpr+'" fill="white" stroke-width="'+a.qcpr*.2+'" stroke="black" />',d+='<line x1="'+m.segments[h].x1*a.scale+'" y1="'+m.segments[h].y1*a.scale+'" x2="'+m.segments[h].x2*a.scale+'" y2="'+m.segments[h].y2*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />',d+='<line x1="'+m.segments[h].x2*a.scale+'" y1="'+m.segments[h].y2*a.scale+'" x2="'+m.segments[h].x3*a.scale+'" y2="'+m.segments[h].y3*a.scale+'" stroke-width="'+a.qcpr*.2+'" stroke="cyan" />'),!m.segments[h].hasOwnProperty("x3")&&a.lcpr&&(d+='<circle cx="'+m.segments[h].x2*a.scale+'" cy="'+m.segments[h].y2*a.scale+'" r="'+a.lcpr+'" fill="white" stroke-width="'+a.lcpr*.2+'" stroke="black" />')}}return d},this.getsvgstring=function(r,i){i=n.checkoptions(i);for(var s=r.width*i.scale,a=r.height*i.scale,o="<svg "+(i.viewbox?'viewBox="0 0 '+s+" "+a+'" ':'width="'+s+'" height="'+a+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+n.versionnumber+'" >',u=0;u<r.layers.length;u++)for(var d=0;d<r.layers[u].length;d++)r.layers[u][d].isholepath||(o+=n.svgpathstring(r,u,d,i));return o+="</svg>",o},this.compareNumbers=function(r,i){return r-i},this.torgbastr=function(r){return"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"},this.tosvgcolorstr=function(r,i){return'fill="rgb('+r.r+","+r.g+","+r.b+')" stroke="rgb('+r.r+","+r.g+","+r.b+')" stroke-width="'+i.strokewidth+'" opacity="'+r.a/255+'" '},this.appendSVGString=function(r,i){var s;i?(s=document.getElementById(i),s||(s=document.createElement("div"),s.id=i,document.body.appendChild(s))):(s=document.createElement("div"),document.body.appendChild(s)),s.innerHTML+=r},this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.blur=function(r,i,s){var a,o,u,d,h,p,m,g,v,w,S={width:r.width,height:r.height,data:[]};if(i=Math.floor(i),i<1)return r;i>5&&(i=5),s=Math.abs(s),s>1024&&(s=1024);var x=n.gks[i-1];for(o=0;o<r.height;o++)for(a=0;a<r.width;a++){for(p=0,m=0,g=0,v=0,w=0,u=-i;u<i+1;u++)a+u>0&&a+u<r.width&&(h=(o*r.width+a+u)*4,p+=r.data[h]*x[u+i],m+=r.data[h+1]*x[u+i],g+=r.data[h+2]*x[u+i],v+=r.data[h+3]*x[u+i],w+=x[u+i]);h=(o*r.width+a)*4,S.data[h]=Math.floor(p/w),S.data[h+1]=Math.floor(m/w),S.data[h+2]=Math.floor(g/w),S.data[h+3]=Math.floor(v/w)}var k=new Uint8ClampedArray(S.data);for(o=0;o<r.height;o++)for(a=0;a<r.width;a++){for(p=0,m=0,g=0,v=0,w=0,u=-i;u<i+1;u++)o+u>0&&o+u<r.height&&(h=((o+u)*r.width+a)*4,p+=k[h]*x[u+i],m+=k[h+1]*x[u+i],g+=k[h+2]*x[u+i],v+=k[h+3]*x[u+i],w+=x[u+i]);h=(o*r.width+a)*4,S.data[h]=Math.floor(p/w),S.data[h+1]=Math.floor(m/w),S.data[h+2]=Math.floor(g/w),S.data[h+3]=Math.floor(v/w)}for(o=0;o<r.height;o++)for(a=0;a<r.width;a++)h=(o*r.width+a)*4,d=Math.abs(S.data[h]-r.data[h])+Math.abs(S.data[h+1]-r.data[h+1])+Math.abs(S.data[h+2]-r.data[h+2])+Math.abs(S.data[h+3]-r.data[h+3]),d>s&&(S.data[h]=r.data[h],S.data[h+1]=r.data[h+1],S.data[h+2]=r.data[h+2],S.data[h+3]=r.data[h+3]);return S},this.loadImage=function(r,i,s){var a=new Image;s&&s.corsenabled&&(a.crossOrigin="Anonymous"),a.onload=function(){var o=document.createElement("canvas");o.width=a.width,o.height=a.height;var u=o.getContext("2d");u.drawImage(a,0,0),i(o)},a.src=r},this.getImgdata=function(r){var i=r.getContext("2d");return i.getImageData(0,0,r.width,r.height)},this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}],this.drawLayers=function(r,i,s,a){s=s||1;var o,u,d,h,p,m;a?(m=document.getElementById(a),m||(m=document.createElement("div"),m.id=a,document.body.appendChild(m))):(m=document.createElement("div"),document.body.appendChild(m));for(p in r)if(r.hasOwnProperty(p)){o=r[p][0].length,u=r[p].length;var g=document.createElement("canvas");g.width=o*s,g.height=u*s;var v=g.getContext("2d");for(h=0;h<u;h++)for(d=0;d<o;d++)v.fillStyle=n.torgbastr(i[r[p][h][d]%i.length]),v.fillRect(d*s,h*s,s,s);m.appendChild(g)}}}e.exports=new t})()})(WL);var WTe=WL.exports;const VTe=vl(WTe),VL=4096,GTe=25,_j={fast:{colorsampling:2,numberofcolors:24,mincolorratio:0,colorquantcycles:1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,blurradius:0,blurdelta:20,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0},clean:{colorsampling:1,numberofcolors:32,mincolorratio:0,colorquantcycles:3,ltres:.5,qtres:.5,pathomit:4,rightangleenhance:!0,blurradius:1,blurdelta:20,strokewidth:1,linefilter:!1,scale:1,roundcoords:2,viewbox:!1,desc:!1,lcpr:0,qcpr:0}};function qTe(e,t,n,r,i,s){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-i,2)+Math.pow(n-s,2))}function GL(e,t,n){let r=null,i=1/0;for(const s of fi){const a=qTe(e,t,n,s.R,s.G,s.B);a<i&&(i=a,r=s)}return r}function YTe(e,t=128){const n=e.data,r=new Uint8ClampedArray(n.length),i=new Map;for(let s=0;s<n.length;s+=4){const a=n[s],o=n[s+1],u=n[s+2];if(n[s+3]<t){r[s]=255,r[s+1]=255,r[s+2]=255,r[s+3]=0;continue}const h=`${a},${o},${u}`;let p=i.get(h);p||(p=GL(a,o,u),i.set(h,p)),r[s]=p.R,r[s+1]=p.G,r[s+2]=p.B,r[s+3]=255}return console.log(`[FLATTEN] Quantized to ${i.size} unique colors mapped to TPV palette`),new ImageData(r,e.width,e.height)}async function XTe(e,t=VL){return new Promise((n,r)=>{const a=new DOMParser().parseFromString(e,"image/svg+xml").documentElement;let o,u;const d=a.getAttribute("viewBox");if(d){const k=d.split(/\s+/).map(Number);o=k[2],u=k[3]}else o=parseFloat(a.getAttribute("width"))||1e3,u=parseFloat(a.getAttribute("height"))||1e3;const h=t/Math.max(o,u),p=Math.round(o*h),m=Math.round(u*h);console.log(`[FLATTEN] Rendering SVG ${o}x${u} to canvas ${p}x${m}`);const g=document.createElement("canvas");g.width=p,g.height=m;const v=g.getContext("2d");v.fillStyle="#ffffff",v.fillRect(0,0,p,m);const w=new Image,S=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),x=URL.createObjectURL(S);w.onload=()=>{v.drawImage(w,0,0,p,m),URL.revokeObjectURL(x),n({canvas:g,width:p,height:m,originalWidth:o,originalHeight:u})},w.onerror=()=>{URL.revokeObjectURL(x),r(new Error("Failed to load SVG for rasterization"))},w.src=x})}function KTe(e,t=GTe){const r=new DOMParser().parseFromString(e,"image/svg+xml"),s=r.documentElement.querySelectorAll("path");let a=0;return s.forEach(o=>{try{const u=o.getAttribute("d");if(!u)return;const d=u.match(/-?\d+\.?\d*/g);if(!d||d.length<4){o.remove(),a++;return}const h=d.map(Number);let p=1/0,m=-1/0,g=1/0,v=-1/0;for(let k=0;k<h.length-1;k+=2){const j=h[k],O=h[k+1];p=Math.min(p,j),m=Math.max(m,j),g=Math.min(g,O),v=Math.max(v,O)}const w=m-p,S=v-g;w*S<t&&(o.remove(),a++)}catch{}}),a>0&&console.log(`[FLATTEN] Removed ${a} small paths (speckle cleanup)`),new XMLSerializer().serializeToString(r)}function ZTe(e,t,n){const i=new DOMParser().parseFromString(e,"image/svg+xml"),s=i.documentElement,a=s.getAttribute("width"),o=s.getAttribute("height");console.log(`[FLATTEN] structureSvg - canvas: ${t}x${n}, existing: ${a}x${o}`);const u=a?parseFloat(a):t,d=o?parseFloat(o):n;return s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("viewBox",`0 0 ${u} ${d}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("data-flattened","true"),s.setAttribute("data-flatten-date",new Date().toISOString()),console.log(`[FLATTEN] Final viewBox: 0 0 ${u} ${d}`),new XMLSerializer().serializeToString(i)}async function QTe(e,t={}){const{quality:n="fast",resolution:r=VL,quantize:i=!0,onProgress:s=()=>{}}=t,a=Date.now(),o={quality:n,resolution:r,quantized:i,originalSize:e.length,finalSize:0,processingTime:0};try{s(5),console.log(`[FLATTEN] Starting flatten (quality: ${n}, resolution: ${r})`),s(10);const{canvas:u,width:d,height:h,originalWidth:p,originalHeight:m}=await XTe(e,r),g=u.getContext("2d");s(20);let v=g.getImageData(0,0,d,h);i&&(s(30),v=YTe(v),g.putImageData(v,0,0)),s(50);const w=_j[n]||_j.fast,S=VTe.imagedataToSVG(v,w);s(80);let x=KTe(S);return s(90),x=ZTe(x,d,h),s(100),o.finalSize=x.length,o.processingTime=Date.now()-a,console.log(`[FLATTEN] Complete in ${o.processingTime}ms`),console.log(`[FLATTEN] Size: ${o.originalSize} to ${o.finalSize} bytes`),{svg:x,stats:o}}catch(u){throw console.error("[FLATTEN] Error:",u),u}}function ev(e){return e.includes('data-flattened="true"')}function JTe(e){const r=new DOMParser().parseFromString(e,"image/svg+xml").documentElement,i=new Map;r.querySelectorAll("path, rect, circle, ellipse, polygon").forEach(d=>{let h=d.getAttribute("fill");if(!h){const p=d.getAttribute("style");if(p){const m=p.match(/fill:\s*([^;]+)/);m&&(h=m[1].trim())}}if(h&&h!=="none"&&h!=="transparent"){if(h=h.toLowerCase(),h.startsWith("rgb")){const m=h.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);m&&(h="#"+[m[1],m[2],m[3]].map(g=>parseInt(g).toString(16).padStart(2,"0")).join(""))}const p=i.get(h)||0;i.set(h,p+1)}});const a=Array.from(i.values()).reduce((d,h)=>d+h,0),o=[],u=new Map;return i.forEach((d,h)=>{const p=e5e(h),m=a>0?Math.round(d/a*100):0;p&&(o.push({targetColor:{hex:h,areaPct:m},originalColor:{hex:h},blendColor:{hex:p.hex},chosenRecipe:{components:[{code:p.code,name:p.name,hex:p.hex,pct:100}],hex:p.hex},tpvCode:p.code,tpvName:p.name}),u.set(h,{blendHex:p.hex}))}),o.sort((d,h)=>h.targetColor.areaPct-d.targetColor.areaPct),console.log(`[FLATTEN] Built ${o.length} recipes from flattened SVG`),{recipes:o,colorMapping:u}}function e5e(e){const t=e.replace("#",""),n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return GL(n,r,i)}var t5e={exports:{}},Jp={exports:{}},kj;function n5e(){return kj||(kj=1,function(e,t){(function(n,r){r(t)})(Ja,function(n){var r=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],i=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],s="-----------------------------------------------------------------------------------------------------------------------------------------------------",a="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},u="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",d={5:u,"5module":u+" export import",6:u+" const class extends export import super"},h=/^in(stanceof)?$/,p=new RegExp("["+a+"]"),m=new RegExp("["+a+s+"]");function g(y,P){for(var J=65536,le=0;le<P.length;le+=2){if(J+=P[le],J>y)return!1;if(J+=P[le+1],J>=y)return!0}return!1}function v(y,P){return y<65?y===36:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&p.test(String.fromCharCode(y)):P===!1?!1:g(y,i)}function w(y,P){return y<48?y===36:y<58?!0:y<65?!1:y<91?!0:y<97?y===95:y<123?!0:y<=65535?y>=170&&m.test(String.fromCharCode(y)):P===!1?!1:g(y,i)||g(y,r)}var S=function(P,J){J===void 0&&(J={}),this.label=P,this.keyword=J.keyword,this.beforeExpr=!!J.beforeExpr,this.startsExpr=!!J.startsExpr,this.isLoop=!!J.isLoop,this.isAssign=!!J.isAssign,this.prefix=!!J.prefix,this.postfix=!!J.postfix,this.binop=J.binop||null,this.updateContext=null};function x(y,P){return new S(y,{beforeExpr:!0,binop:P})}var k={beforeExpr:!0},j={startsExpr:!0},O={};function I(y,P){return P===void 0&&(P={}),P.keyword=y,O[y]=new S(y,P)}var E={num:new S("num",j),regexp:new S("regexp",j),string:new S("string",j),name:new S("name",j),privateId:new S("privateId",j),eof:new S("eof"),bracketL:new S("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new S("]"),braceL:new S("{",{beforeExpr:!0,startsExpr:!0}),braceR:new S("}"),parenL:new S("(",{beforeExpr:!0,startsExpr:!0}),parenR:new S(")"),comma:new S(",",k),semi:new S(";",k),colon:new S(":",k),dot:new S("."),question:new S("?",k),questionDot:new S("?."),arrow:new S("=>",k),template:new S("template"),invalidTemplate:new S("invalidTemplate"),ellipsis:new S("...",k),backQuote:new S("`",j),dollarBraceL:new S("${",{beforeExpr:!0,startsExpr:!0}),eq:new S("=",{beforeExpr:!0,isAssign:!0}),assign:new S("_=",{beforeExpr:!0,isAssign:!0}),incDec:new S("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new S("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:x("||",1),logicalAND:x("&&",2),bitwiseOR:x("|",3),bitwiseXOR:x("^",4),bitwiseAND:x("&",5),equality:x("==/!=/===/!==",6),relational:x("</>/<=/>=",7),bitShift:x("<</>>/>>>",8),plusMin:new S("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:x("%",10),star:x("*",10),slash:x("/",10),starstar:new S("**",{beforeExpr:!0}),coalesce:x("??",1),_break:I("break"),_case:I("case",k),_catch:I("catch"),_continue:I("continue"),_debugger:I("debugger"),_default:I("default",k),_do:I("do",{isLoop:!0,beforeExpr:!0}),_else:I("else",k),_finally:I("finally"),_for:I("for",{isLoop:!0}),_function:I("function",j),_if:I("if"),_return:I("return",k),_switch:I("switch"),_throw:I("throw",k),_try:I("try"),_var:I("var"),_const:I("const"),_while:I("while",{isLoop:!0}),_with:I("with"),_new:I("new",{beforeExpr:!0,startsExpr:!0}),_this:I("this",j),_super:I("super",j),_class:I("class",j),_extends:I("extends",k),_export:I("export"),_import:I("import",j),_null:I("null",j),_true:I("true",j),_false:I("false",j),_in:I("in",{beforeExpr:!0,binop:7}),_instanceof:I("instanceof",{beforeExpr:!0,binop:7}),_typeof:I("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:I("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:I("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},U=/\r\n?|\n|\u2028|\u2029/,D=new RegExp(U.source,"g");function R(y){return y===10||y===13||y===8232||y===8233}function W(y,P,J){J===void 0&&(J=y.length);for(var le=P;le<J;le++){var Ce=y.charCodeAt(le);if(R(Ce))return le<J-1&&Ce===13&&y.charCodeAt(le+1)===10?le+2:le+1}return-1}var ce=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,te=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,me=Object.prototype,H=me.hasOwnProperty,ge=me.toString,Ee=Object.hasOwn||function(y,P){return H.call(y,P)},ke=Array.isArray||function(y){return ge.call(y)==="[object Array]"},ze=Object.create(null);function xe(y){return ze[y]||(ze[y]=new RegExp("^(?:"+y.replace(/ /g,"|")+")$"))}function Re(y){return y<=65535?String.fromCharCode(y):(y-=65536,String.fromCharCode((y>>10)+55296,(y&1023)+56320))}var _e=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Pe=function(P,J){this.line=P,this.column=J};Pe.prototype.offset=function(P){return new Pe(this.line,this.column+P)};var it=function(P,J,le){this.start=J,this.end=le,P.sourceFile!==null&&(this.source=P.sourceFile)};function tt(y,P){for(var J=1,le=0;;){var Ce=W(y,le,P);if(Ce<0)return new Pe(J,P-le);++J,le=Ce}}var Ue={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ut=!1;function de(y){var P={};for(var J in Ue)P[J]=y&&Ee(y,J)?y[J]:Ue[J];if(P.ecmaVersion==="latest"?P.ecmaVersion=1e8:P.ecmaVersion==null?(!ut&&typeof console=="object"&&console.warn&&(ut=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),P.ecmaVersion=11):P.ecmaVersion>=2015&&(P.ecmaVersion-=2009),P.allowReserved==null&&(P.allowReserved=P.ecmaVersion<5),(!y||y.allowHashBang==null)&&(P.allowHashBang=P.ecmaVersion>=14),ke(P.onToken)){var le=P.onToken;P.onToken=function(Ce){return le.push(Ce)}}return ke(P.onComment)&&(P.onComment=oe(P,P.onComment)),P}function oe(y,P){return function(J,le,Ce,Je,rt,xt){var _t={type:J?"Block":"Line",value:le,start:Ce,end:Je};y.locations&&(_t.loc=new it(this,rt,xt)),y.ranges&&(_t.range=[Ce,Je]),P.push(_t)}}var We=1,Ne=2,ft=4,Pt=8,Ct=16,q=32,qe=64,ae=128,M=256,L=512,ee=We|Ne|M;function pe(y,P){return Ne|(y?ft:0)|(P?Pt:0)}var ve=0,ye=1,Me=2,Xe=3,$e=4,c=5,f=function(P,J,le){this.options=P=de(P),this.sourceFile=P.sourceFile,this.keywords=xe(d[P.ecmaVersion>=6?6:P.sourceType==="module"?"5module":5]);var Ce="";P.allowReserved!==!0&&(Ce=o[P.ecmaVersion>=6?6:P.ecmaVersion===5?5:3],P.sourceType==="module"&&(Ce+=" await")),this.reservedWords=xe(Ce);var Je=(Ce?Ce+" ":"")+o.strict;this.reservedWordsStrict=xe(Je),this.reservedWordsStrictBind=xe(Je+" "+o.strictBind),this.input=String(J),this.containsEsc=!1,le?(this.pos=le,this.lineStart=this.input.lastIndexOf(`
`,le-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(U).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=E.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=P.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&P.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(We),this.regexpState=null,this.privateNameStack=[]},b={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};f.prototype.parse=function(){var P=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(P)},b.inFunction.get=function(){return(this.currentVarScope().flags&Ne)>0},b.inGenerator.get=function(){return(this.currentVarScope().flags&Pt)>0},b.inAsync.get=function(){return(this.currentVarScope().flags&ft)>0},b.canAwait.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var P=this.scopeStack[y],J=P.flags;if(J&(M|L))return!1;if(J&Ne)return(J&ft)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},b.allowSuper.get=function(){var y=this.currentThisScope(),P=y.flags;return(P&qe)>0||this.options.allowSuperOutsideMethod},b.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ae)>0},b.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},b.allowNewDotTarget.get=function(){for(var y=this.scopeStack.length-1;y>=0;y--){var P=this.scopeStack[y],J=P.flags;if(J&(M|L)||J&Ne&&!(J&Ct))return!0}return!1},b.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&M)>0},f.extend=function(){for(var P=[],J=arguments.length;J--;)P[J]=arguments[J];for(var le=this,Ce=0;Ce<P.length;Ce++)le=P[Ce](le);return le},f.parse=function(P,J){return new this(J,P).parse()},f.parseExpressionAt=function(P,J,le){var Ce=new this(le,P,J);return Ce.nextToken(),Ce.parseExpression()},f.tokenizer=function(P,J){return new this(J,P)},Object.defineProperties(f.prototype,b);var _=f.prototype,C=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;_.strictDirective=function(y){if(this.options.ecmaVersion<5)return!1;for(;;){te.lastIndex=y,y+=te.exec(this.input)[0].length;var P=C.exec(this.input.slice(y));if(!P)return!1;if((P[1]||P[2])==="use strict"){te.lastIndex=y+P[0].length;var J=te.exec(this.input),le=J.index+J[0].length,Ce=this.input.charAt(le);return Ce===";"||Ce==="}"||U.test(J[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Ce)||Ce==="!"&&this.input.charAt(le+1)==="=")}y+=P[0].length,te.lastIndex=y,y+=te.exec(this.input)[0].length,this.input[y]===";"&&y++}},_.eat=function(y){return this.type===y?(this.next(),!0):!1},_.isContextual=function(y){return this.type===E.name&&this.value===y&&!this.containsEsc},_.eatContextual=function(y){return this.isContextual(y)?(this.next(),!0):!1},_.expectContextual=function(y){this.eatContextual(y)||this.unexpected()},_.canInsertSemicolon=function(){return this.type===E.eof||this.type===E.braceR||U.test(this.input.slice(this.lastTokEnd,this.start))},_.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},_.semicolon=function(){!this.eat(E.semi)&&!this.insertSemicolon()&&this.unexpected()},_.afterTrailingComma=function(y,P){if(this.type===y)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),P||this.next(),!0},_.expect=function(y){this.eat(y)||this.unexpected()},_.unexpected=function(y){this.raise(y??this.start,"Unexpected token")};var A=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};_.checkPatternErrors=function(y,P){if(y){y.trailingComma>-1&&this.raiseRecoverable(y.trailingComma,"Comma is not permitted after the rest element");var J=P?y.parenthesizedAssign:y.parenthesizedBind;J>-1&&this.raiseRecoverable(J,P?"Assigning to rvalue":"Parenthesized pattern")}},_.checkExpressionErrors=function(y,P){if(!y)return!1;var J=y.shorthandAssign,le=y.doubleProto;if(!P)return J>=0||le>=0;J>=0&&this.raise(J,"Shorthand property assignments are valid only in destructuring patterns"),le>=0&&this.raiseRecoverable(le,"Redefinition of __proto__ property")},_.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},_.isSimpleAssignTarget=function(y){return y.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(y.expression):y.type==="Identifier"||y.type==="MemberExpression"};var T=f.prototype;T.parseTopLevel=function(y){var P=Object.create(null);for(y.body||(y.body=[]);this.type!==E.eof;){var J=this.parseStatement(null,!0,P);y.body.push(J)}if(this.inModule)for(var le=0,Ce=Object.keys(this.undefinedExports);le<Ce.length;le+=1){var Je=Ce[le];this.raiseRecoverable(this.undefinedExports[Je].start,"Export '"+Je+"' is not defined")}return this.adaptDirectivePrologue(y.body),this.next(),y.sourceType=this.options.sourceType,this.finishNode(y,"Program")};var N={kind:"loop"},$={kind:"switch"};T.isLet=function(y){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;te.lastIndex=this.pos;var P=te.exec(this.input),J=this.pos+P[0].length,le=this.input.charCodeAt(J);if(le===91||le===92)return!0;if(y)return!1;if(le===123||le>55295&&le<56320)return!0;if(v(le,!0)){for(var Ce=J+1;w(le=this.input.charCodeAt(Ce),!0);)++Ce;if(le===92||le>55295&&le<56320)return!0;var Je=this.input.slice(J,Ce);if(!h.test(Je))return!0}return!1},T.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;te.lastIndex=this.pos;var y=te.exec(this.input),P=this.pos+y[0].length,J;return!U.test(this.input.slice(this.pos,P))&&this.input.slice(P,P+8)==="function"&&(P+8===this.input.length||!(w(J=this.input.charCodeAt(P+8))||J>55295&&J<56320))},T.isUsingKeyword=function(y,P){if(this.options.ecmaVersion<17||!this.isContextual(y?"await":"using"))return!1;te.lastIndex=this.pos;var J=te.exec(this.input),le=this.pos+J[0].length;if(U.test(this.input.slice(this.pos,le)))return!1;if(y){var Ce=le+5,Je;if(this.input.slice(le,Ce)!=="using"||Ce===this.input.length||w(Je=this.input.charCodeAt(Ce))||Je>55295&&Je<56320)return!1;te.lastIndex=Ce;var rt=te.exec(this.input);if(rt&&U.test(this.input.slice(Ce,Ce+rt[0].length)))return!1}if(P){var xt=le+2,_t;if(this.input.slice(le,xt)==="of"&&(xt===this.input.length||!w(_t=this.input.charCodeAt(xt))&&!(_t>55295&&_t<56320)))return!1}var Qt=this.input.charCodeAt(le);return v(Qt,!0)||Qt===92},T.isAwaitUsing=function(y){return this.isUsingKeyword(!0,y)},T.isUsing=function(y){return this.isUsingKeyword(!1,y)},T.parseStatement=function(y,P,J){var le=this.type,Ce=this.startNode(),Je;switch(this.isLet(y)&&(le=E._var,Je="let"),le){case E._break:case E._continue:return this.parseBreakContinueStatement(Ce,le.keyword);case E._debugger:return this.parseDebuggerStatement(Ce);case E._do:return this.parseDoStatement(Ce);case E._for:return this.parseForStatement(Ce);case E._function:return y&&(this.strict||y!=="if"&&y!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Ce,!1,!y);case E._class:return y&&this.unexpected(),this.parseClass(Ce,!0);case E._if:return this.parseIfStatement(Ce);case E._return:return this.parseReturnStatement(Ce);case E._switch:return this.parseSwitchStatement(Ce);case E._throw:return this.parseThrowStatement(Ce);case E._try:return this.parseTryStatement(Ce);case E._const:case E._var:return Je=Je||this.value,y&&Je!=="var"&&this.unexpected(),this.parseVarStatement(Ce,Je);case E._while:return this.parseWhileStatement(Ce);case E._with:return this.parseWithStatement(Ce);case E.braceL:return this.parseBlock(!0,Ce);case E.semi:return this.parseEmptyStatement(Ce);case E._export:case E._import:if(this.options.ecmaVersion>10&&le===E._import){te.lastIndex=this.pos;var rt=te.exec(this.input),xt=this.pos+rt[0].length,_t=this.input.charCodeAt(xt);if(_t===40||_t===46)return this.parseExpressionStatement(Ce,this.parseExpression())}return this.options.allowImportExportEverywhere||(P||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),le===E._import?this.parseImport(Ce):this.parseExport(Ce,J);default:if(this.isAsyncFunction())return y&&this.unexpected(),this.next(),this.parseFunctionStatement(Ce,!0,!y);var Qt=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(Qt)return P&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),Qt==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(Ce,!1,Qt),this.semicolon(),this.finishNode(Ce,"VariableDeclaration");var sn=this.value,An=this.parseExpression();return le===E.name&&An.type==="Identifier"&&this.eat(E.colon)?this.parseLabeledStatement(Ce,sn,An,y):this.parseExpressionStatement(Ce,An)}},T.parseBreakContinueStatement=function(y,P){var J=P==="break";this.next(),this.eat(E.semi)||this.insertSemicolon()?y.label=null:this.type!==E.name?this.unexpected():(y.label=this.parseIdent(),this.semicolon());for(var le=0;le<this.labels.length;++le){var Ce=this.labels[le];if((y.label==null||Ce.name===y.label.name)&&(Ce.kind!=null&&(J||Ce.kind==="loop")||y.label&&J))break}return le===this.labels.length&&this.raise(y.start,"Unsyntactic "+P),this.finishNode(y,J?"BreakStatement":"ContinueStatement")},T.parseDebuggerStatement=function(y){return this.next(),this.semicolon(),this.finishNode(y,"DebuggerStatement")},T.parseDoStatement=function(y){return this.next(),this.labels.push(N),y.body=this.parseStatement("do"),this.labels.pop(),this.expect(E._while),y.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(E.semi):this.semicolon(),this.finishNode(y,"DoWhileStatement")},T.parseForStatement=function(y){this.next();var P=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(N),this.enterScope(0),this.expect(E.parenL),this.type===E.semi)return P>-1&&this.unexpected(P),this.parseFor(y,null);var J=this.isLet();if(this.type===E._var||this.type===E._const||J){var le=this.startNode(),Ce=J?"let":this.value;return this.next(),this.parseVar(le,!0,Ce),this.finishNode(le,"VariableDeclaration"),this.parseForAfterInit(y,le,P)}var Je=this.isContextual("let"),rt=!1,xt=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(xt){var _t=this.startNode();return this.next(),xt==="await using"&&this.next(),this.parseVar(_t,!0,xt),this.finishNode(_t,"VariableDeclaration"),this.parseForAfterInit(y,_t,P)}var Qt=this.containsEsc,sn=new A,An=this.start,rr=P>-1?this.parseExprSubscripts(sn,"await"):this.parseExpression(!0,sn);return this.type===E._in||(rt=this.options.ecmaVersion>=6&&this.isContextual("of"))?(P>-1?(this.type===E._in&&this.unexpected(P),y.await=!0):rt&&this.options.ecmaVersion>=8&&(rr.start===An&&!Qt&&rr.type==="Identifier"&&rr.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(y.await=!1)),Je&&rt&&this.raise(rr.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(rr,!1,sn),this.checkLValPattern(rr),this.parseForIn(y,rr)):(this.checkExpressionErrors(sn,!0),P>-1&&this.unexpected(P),this.parseFor(y,rr))},T.parseForAfterInit=function(y,P,J){return(this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&P.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===E._in?J>-1&&this.unexpected(J):y.await=J>-1),this.parseForIn(y,P)):(J>-1&&this.unexpected(J),this.parseFor(y,P))},T.parseFunctionStatement=function(y,P,J){return this.next(),this.parseFunction(y,Y|(J?0:Q),!1,P)},T.parseIfStatement=function(y){return this.next(),y.test=this.parseParenExpression(),y.consequent=this.parseStatement("if"),y.alternate=this.eat(E._else)?this.parseStatement("if"):null,this.finishNode(y,"IfStatement")},T.parseReturnStatement=function(y){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(E.semi)||this.insertSemicolon()?y.argument=null:(y.argument=this.parseExpression(),this.semicolon()),this.finishNode(y,"ReturnStatement")},T.parseSwitchStatement=function(y){this.next(),y.discriminant=this.parseParenExpression(),y.cases=[],this.expect(E.braceL),this.labels.push($),this.enterScope(0);for(var P,J=!1;this.type!==E.braceR;)if(this.type===E._case||this.type===E._default){var le=this.type===E._case;P&&this.finishNode(P,"SwitchCase"),y.cases.push(P=this.startNode()),P.consequent=[],this.next(),le?P.test=this.parseExpression():(J&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),J=!0,P.test=null),this.expect(E.colon)}else P||this.unexpected(),P.consequent.push(this.parseStatement(null));return this.exitScope(),P&&this.finishNode(P,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(y,"SwitchStatement")},T.parseThrowStatement=function(y){return this.next(),U.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),y.argument=this.parseExpression(),this.semicolon(),this.finishNode(y,"ThrowStatement")};var F=[];T.parseCatchClauseParam=function(){var y=this.parseBindingAtom(),P=y.type==="Identifier";return this.enterScope(P?q:0),this.checkLValPattern(y,P?$e:Me),this.expect(E.parenR),y},T.parseTryStatement=function(y){if(this.next(),y.block=this.parseBlock(),y.handler=null,this.type===E._catch){var P=this.startNode();this.next(),this.eat(E.parenL)?P.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),P.param=null,this.enterScope(0)),P.body=this.parseBlock(!1),this.exitScope(),y.handler=this.finishNode(P,"CatchClause")}return y.finalizer=this.eat(E._finally)?this.parseBlock():null,!y.handler&&!y.finalizer&&this.raise(y.start,"Missing catch or finally clause"),this.finishNode(y,"TryStatement")},T.parseVarStatement=function(y,P,J){return this.next(),this.parseVar(y,!1,P,J),this.semicolon(),this.finishNode(y,"VariableDeclaration")},T.parseWhileStatement=function(y){return this.next(),y.test=this.parseParenExpression(),this.labels.push(N),y.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(y,"WhileStatement")},T.parseWithStatement=function(y){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),y.object=this.parseParenExpression(),y.body=this.parseStatement("with"),this.finishNode(y,"WithStatement")},T.parseEmptyStatement=function(y){return this.next(),this.finishNode(y,"EmptyStatement")},T.parseLabeledStatement=function(y,P,J,le){for(var Ce=0,Je=this.labels;Ce<Je.length;Ce+=1){var rt=Je[Ce];rt.name===P&&this.raise(J.start,"Label '"+P+"' is already declared")}for(var xt=this.type.isLoop?"loop":this.type===E._switch?"switch":null,_t=this.labels.length-1;_t>=0;_t--){var Qt=this.labels[_t];if(Qt.statementStart===y.start)Qt.statementStart=this.start,Qt.kind=xt;else break}return this.labels.push({name:P,kind:xt,statementStart:this.start}),y.body=this.parseStatement(le?le.indexOf("label")===-1?le+"label":le:"label"),this.labels.pop(),y.label=J,this.finishNode(y,"LabeledStatement")},T.parseExpressionStatement=function(y,P){return y.expression=P,this.semicolon(),this.finishNode(y,"ExpressionStatement")},T.parseBlock=function(y,P,J){for(y===void 0&&(y=!0),P===void 0&&(P=this.startNode()),P.body=[],this.expect(E.braceL),y&&this.enterScope(0);this.type!==E.braceR;){var le=this.parseStatement(null);P.body.push(le)}return J&&(this.strict=!1),this.next(),y&&this.exitScope(),this.finishNode(P,"BlockStatement")},T.parseFor=function(y,P){return y.init=P,this.expect(E.semi),y.test=this.type===E.semi?null:this.parseExpression(),this.expect(E.semi),y.update=this.type===E.parenR?null:this.parseExpression(),this.expect(E.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,"ForStatement")},T.parseForIn=function(y,P){var J=this.type===E._in;return this.next(),P.type==="VariableDeclaration"&&P.declarations[0].init!=null&&(!J||this.options.ecmaVersion<8||this.strict||P.kind!=="var"||P.declarations[0].id.type!=="Identifier")&&this.raise(P.start,(J?"for-in":"for-of")+" loop variable declaration may not have an initializer"),y.left=P,y.right=J?this.parseExpression():this.parseMaybeAssign(),this.expect(E.parenR),y.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(y,J?"ForInStatement":"ForOfStatement")},T.parseVar=function(y,P,J,le){for(y.declarations=[],y.kind=J;;){var Ce=this.startNode();if(this.parseVarId(Ce,J),this.eat(E.eq)?Ce.init=this.parseMaybeAssign(P):!le&&J==="const"&&!(this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!le&&(J==="using"||J==="await using")&&this.options.ecmaVersion>=17&&this.type!==E._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+J+" declaration"):!le&&Ce.id.type!=="Identifier"&&!(P&&(this.type===E._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Ce.init=null,y.declarations.push(this.finishNode(Ce,"VariableDeclarator")),!this.eat(E.comma))break}return y},T.parseVarId=function(y,P){y.id=P==="using"||P==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(y.id,P==="var"?ye:Me,!1)};var Y=1,Q=2,K=4;T.parseFunction=function(y,P,J,le,Ce){this.initFunction(y),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!le)&&(this.type===E.star&&P&Q&&this.unexpected(),y.generator=this.eat(E.star)),this.options.ecmaVersion>=8&&(y.async=!!le),P&Y&&(y.id=P&K&&this.type!==E.name?null:this.parseIdent(),y.id&&!(P&Q)&&this.checkLValSimple(y.id,this.strict||y.generator||y.async?this.treatFunctionsAsVar?ye:Me:Xe));var Je=this.yieldPos,rt=this.awaitPos,xt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(pe(y.async,y.generator)),P&Y||(y.id=this.type===E.name?this.parseIdent():null),this.parseFunctionParams(y),this.parseFunctionBody(y,J,!1,Ce),this.yieldPos=Je,this.awaitPos=rt,this.awaitIdentPos=xt,this.finishNode(y,P&Y?"FunctionDeclaration":"FunctionExpression")},T.parseFunctionParams=function(y){this.expect(E.parenL),y.params=this.parseBindingList(E.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},T.parseClass=function(y,P){this.next();var J=this.strict;this.strict=!0,this.parseClassId(y,P),this.parseClassSuper(y);var le=this.enterClassBody(),Ce=this.startNode(),Je=!1;for(Ce.body=[],this.expect(E.braceL);this.type!==E.braceR;){var rt=this.parseClassElement(y.superClass!==null);rt&&(Ce.body.push(rt),rt.type==="MethodDefinition"&&rt.kind==="constructor"?(Je&&this.raiseRecoverable(rt.start,"Duplicate constructor in the same class"),Je=!0):rt.key&&rt.key.type==="PrivateIdentifier"&&V(le,rt)&&this.raiseRecoverable(rt.key.start,"Identifier '#"+rt.key.name+"' has already been declared"))}return this.strict=J,this.next(),y.body=this.finishNode(Ce,"ClassBody"),this.exitClassBody(),this.finishNode(y,P?"ClassDeclaration":"ClassExpression")},T.parseClassElement=function(y){if(this.eat(E.semi))return null;var P=this.options.ecmaVersion,J=this.startNode(),le="",Ce=!1,Je=!1,rt="method",xt=!1;if(this.eatContextual("static")){if(P>=13&&this.eat(E.braceL))return this.parseClassStaticBlock(J),J;this.isClassElementNameStart()||this.type===E.star?xt=!0:le="static"}if(J.static=xt,!le&&P>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===E.star)&&!this.canInsertSemicolon()?Je=!0:le="async"),!le&&(P>=9||!Je)&&this.eat(E.star)&&(Ce=!0),!le&&!Je&&!Ce){var _t=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?rt=_t:le=_t)}if(le?(J.computed=!1,J.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),J.key.name=le,this.finishNode(J.key,"Identifier")):this.parseClassElementName(J),P<13||this.type===E.parenL||rt!=="method"||Ce||Je){var Qt=!J.static&&X(J,"constructor"),sn=Qt&&y;Qt&&rt!=="method"&&this.raise(J.key.start,"Constructor can't have get/set modifier"),J.kind=Qt?"constructor":rt,this.parseClassMethod(J,Ce,Je,sn)}else this.parseClassField(J);return J},T.isClassElementNameStart=function(){return this.type===E.name||this.type===E.privateId||this.type===E.num||this.type===E.string||this.type===E.bracketL||this.type.keyword},T.parseClassElementName=function(y){this.type===E.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),y.computed=!1,y.key=this.parsePrivateIdent()):this.parsePropertyName(y)},T.parseClassMethod=function(y,P,J,le){var Ce=y.key;y.kind==="constructor"?(P&&this.raise(Ce.start,"Constructor can't be a generator"),J&&this.raise(Ce.start,"Constructor can't be an async method")):y.static&&X(y,"prototype")&&this.raise(Ce.start,"Classes may not have a static property named prototype");var Je=y.value=this.parseMethod(P,J,le);return y.kind==="get"&&Je.params.length!==0&&this.raiseRecoverable(Je.start,"getter should have no params"),y.kind==="set"&&Je.params.length!==1&&this.raiseRecoverable(Je.start,"setter should have exactly one param"),y.kind==="set"&&Je.params[0].type==="RestElement"&&this.raiseRecoverable(Je.params[0].start,"Setter cannot use rest params"),this.finishNode(y,"MethodDefinition")},T.parseClassField=function(y){return X(y,"constructor")?this.raise(y.key.start,"Classes can't have a field named 'constructor'"):y.static&&X(y,"prototype")&&this.raise(y.key.start,"Classes can't have a static field named 'prototype'"),this.eat(E.eq)?(this.enterScope(L|qe),y.value=this.parseMaybeAssign(),this.exitScope()):y.value=null,this.semicolon(),this.finishNode(y,"PropertyDefinition")},T.parseClassStaticBlock=function(y){y.body=[];var P=this.labels;for(this.labels=[],this.enterScope(M|qe);this.type!==E.braceR;){var J=this.parseStatement(null);y.body.push(J)}return this.next(),this.exitScope(),this.labels=P,this.finishNode(y,"StaticBlock")},T.parseClassId=function(y,P){this.type===E.name?(y.id=this.parseIdent(),P&&this.checkLValSimple(y.id,Me,!1)):(P===!0&&this.unexpected(),y.id=null)},T.parseClassSuper=function(y){y.superClass=this.eat(E._extends)?this.parseExprSubscripts(null,!1):null},T.enterClassBody=function(){var y={declared:Object.create(null),used:[]};return this.privateNameStack.push(y),y.declared},T.exitClassBody=function(){var y=this.privateNameStack.pop(),P=y.declared,J=y.used;if(this.options.checkPrivateFields)for(var le=this.privateNameStack.length,Ce=le===0?null:this.privateNameStack[le-1],Je=0;Je<J.length;++Je){var rt=J[Je];Ee(P,rt.name)||(Ce?Ce.used.push(rt):this.raiseRecoverable(rt.start,"Private field '#"+rt.name+"' must be declared in an enclosing class"))}};function V(y,P){var J=P.key.name,le=y[J],Ce="true";return P.type==="MethodDefinition"&&(P.kind==="get"||P.kind==="set")&&(Ce=(P.static?"s":"i")+P.kind),le==="iget"&&Ce==="iset"||le==="iset"&&Ce==="iget"||le==="sget"&&Ce==="sset"||le==="sset"&&Ce==="sget"?(y[J]="true",!1):le?!0:(y[J]=Ce,!1)}function X(y,P){var J=y.computed,le=y.key;return!J&&(le.type==="Identifier"&&le.name===P||le.type==="Literal"&&le.value===P)}T.parseExportAllDeclaration=function(y,P){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(y.exported=this.parseModuleExportName(),this.checkExport(P,y.exported,this.lastTokStart)):y.exported=null),this.expectContextual("from"),this.type!==E.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ExportAllDeclaration")},T.parseExport=function(y,P){if(this.next(),this.eat(E.star))return this.parseExportAllDeclaration(y,P);if(this.eat(E._default))return this.checkExport(P,"default",this.lastTokStart),y.declaration=this.parseExportDefaultDeclaration(),this.finishNode(y,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())y.declaration=this.parseExportDeclaration(y),y.declaration.type==="VariableDeclaration"?this.checkVariableExport(P,y.declaration.declarations):this.checkExport(P,y.declaration.id,y.declaration.id.start),y.specifiers=[],y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[]);else{if(y.declaration=null,y.specifiers=this.parseExportSpecifiers(P),this.eatContextual("from"))this.type!==E.string&&this.unexpected(),y.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause());else{for(var J=0,le=y.specifiers;J<le.length;J+=1){var Ce=le[J];this.checkUnreserved(Ce.local),this.checkLocalExport(Ce.local),Ce.local.type==="Literal"&&this.raise(Ce.local.start,"A string literal cannot be used as an exported binding without `from`.")}y.source=null,this.options.ecmaVersion>=16&&(y.attributes=[])}this.semicolon()}return this.finishNode(y,"ExportNamedDeclaration")},T.parseExportDeclaration=function(y){return this.parseStatement(null)},T.parseExportDefaultDeclaration=function(){var y;if(this.type===E._function||(y=this.isAsyncFunction())){var P=this.startNode();return this.next(),y&&this.next(),this.parseFunction(P,Y|K,!1,y)}else if(this.type===E._class){var J=this.startNode();return this.parseClass(J,"nullableID")}else{var le=this.parseMaybeAssign();return this.semicolon(),le}},T.checkExport=function(y,P,J){y&&(typeof P!="string"&&(P=P.type==="Identifier"?P.name:P.value),Ee(y,P)&&this.raiseRecoverable(J,"Duplicate export '"+P+"'"),y[P]=!0)},T.checkPatternExport=function(y,P){var J=P.type;if(J==="Identifier")this.checkExport(y,P,P.start);else if(J==="ObjectPattern")for(var le=0,Ce=P.properties;le<Ce.length;le+=1){var Je=Ce[le];this.checkPatternExport(y,Je)}else if(J==="ArrayPattern")for(var rt=0,xt=P.elements;rt<xt.length;rt+=1){var _t=xt[rt];_t&&this.checkPatternExport(y,_t)}else J==="Property"?this.checkPatternExport(y,P.value):J==="AssignmentPattern"?this.checkPatternExport(y,P.left):J==="RestElement"&&this.checkPatternExport(y,P.argument)},T.checkVariableExport=function(y,P){if(y)for(var J=0,le=P;J<le.length;J+=1){var Ce=le[J];this.checkPatternExport(y,Ce.id)}},T.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},T.parseExportSpecifier=function(y){var P=this.startNode();return P.local=this.parseModuleExportName(),P.exported=this.eatContextual("as")?this.parseModuleExportName():P.local,this.checkExport(y,P.exported,P.exported.start),this.finishNode(P,"ExportSpecifier")},T.parseExportSpecifiers=function(y){var P=[],J=!0;for(this.expect(E.braceL);!this.eat(E.braceR);){if(J)J=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;P.push(this.parseExportSpecifier(y))}return P},T.parseImport=function(y){return this.next(),this.type===E.string?(y.specifiers=F,y.source=this.parseExprAtom()):(y.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),y.source=this.type===E.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(y.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(y,"ImportDeclaration")},T.parseImportSpecifier=function(){var y=this.startNode();return y.imported=this.parseModuleExportName(),this.eatContextual("as")?y.local=this.parseIdent():(this.checkUnreserved(y.imported),y.local=y.imported),this.checkLValSimple(y.local,Me),this.finishNode(y,"ImportSpecifier")},T.parseImportDefaultSpecifier=function(){var y=this.startNode();return y.local=this.parseIdent(),this.checkLValSimple(y.local,Me),this.finishNode(y,"ImportDefaultSpecifier")},T.parseImportNamespaceSpecifier=function(){var y=this.startNode();return this.next(),this.expectContextual("as"),y.local=this.parseIdent(),this.checkLValSimple(y.local,Me),this.finishNode(y,"ImportNamespaceSpecifier")},T.parseImportSpecifiers=function(){var y=[],P=!0;if(this.type===E.name&&(y.push(this.parseImportDefaultSpecifier()),!this.eat(E.comma)))return y;if(this.type===E.star)return y.push(this.parseImportNamespaceSpecifier()),y;for(this.expect(E.braceL);!this.eat(E.braceR);){if(P)P=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;y.push(this.parseImportSpecifier())}return y},T.parseWithClause=function(){var y=[];if(!this.eat(E._with))return y;this.expect(E.braceL);for(var P={},J=!0;!this.eat(E.braceR);){if(J)J=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;var le=this.parseImportAttribute(),Ce=le.key.type==="Identifier"?le.key.name:le.key.value;Ee(P,Ce)&&this.raiseRecoverable(le.key.start,"Duplicate attribute key '"+Ce+"'"),P[Ce]=!0,y.push(le)}return y},T.parseImportAttribute=function(){var y=this.startNode();return y.key=this.type===E.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(E.colon),this.type!==E.string&&this.unexpected(),y.value=this.parseExprAtom(),this.finishNode(y,"ImportAttribute")},T.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===E.string){var y=this.parseLiteral(this.value);return _e.test(y.value)&&this.raise(y.start,"An export name cannot include a lone surrogate."),y}return this.parseIdent(!0)},T.adaptDirectivePrologue=function(y){for(var P=0;P<y.length&&this.isDirectiveCandidate(y[P]);++P)y[P].directive=y[P].expression.raw.slice(1,-1)},T.isDirectiveCandidate=function(y){return this.options.ecmaVersion>=5&&y.type==="ExpressionStatement"&&y.expression.type==="Literal"&&typeof y.expression.value=="string"&&(this.input[y.start]==='"'||this.input[y.start]==="'")};var B=f.prototype;B.toAssignable=function(y,P,J){if(this.options.ecmaVersion>=6&&y)switch(y.type){case"Identifier":this.inAsync&&y.name==="await"&&this.raise(y.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":y.type="ObjectPattern",J&&this.checkPatternErrors(J,!0);for(var le=0,Ce=y.properties;le<Ce.length;le+=1){var Je=Ce[le];this.toAssignable(Je,P),Je.type==="RestElement"&&(Je.argument.type==="ArrayPattern"||Je.argument.type==="ObjectPattern")&&this.raise(Je.argument.start,"Unexpected token")}break;case"Property":y.kind!=="init"&&this.raise(y.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(y.value,P);break;case"ArrayExpression":y.type="ArrayPattern",J&&this.checkPatternErrors(J,!0),this.toAssignableList(y.elements,P);break;case"SpreadElement":y.type="RestElement",this.toAssignable(y.argument,P),y.argument.type==="AssignmentPattern"&&this.raise(y.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":y.operator!=="="&&this.raise(y.left.end,"Only '=' operator can be used for specifying default value."),y.type="AssignmentPattern",delete y.operator,this.toAssignable(y.left,P);break;case"ParenthesizedExpression":this.toAssignable(y.expression,P,J);break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!P)break;default:this.raise(y.start,"Assigning to rvalue")}else J&&this.checkPatternErrors(J,!0);return y},B.toAssignableList=function(y,P){for(var J=y.length,le=0;le<J;le++){var Ce=y[le];Ce&&this.toAssignable(Ce,P)}if(J){var Je=y[J-1];this.options.ecmaVersion===6&&P&&Je&&Je.type==="RestElement"&&Je.argument.type!=="Identifier"&&this.unexpected(Je.argument.start)}return y},B.parseSpread=function(y){var P=this.startNode();return this.next(),P.argument=this.parseMaybeAssign(!1,y),this.finishNode(P,"SpreadElement")},B.parseRestBinding=function(){var y=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==E.name&&this.unexpected(),y.argument=this.parseBindingAtom(),this.finishNode(y,"RestElement")},B.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case E.bracketL:var y=this.startNode();return this.next(),y.elements=this.parseBindingList(E.bracketR,!0,!0),this.finishNode(y,"ArrayPattern");case E.braceL:return this.parseObj(!0)}return this.parseIdent()},B.parseBindingList=function(y,P,J,le){for(var Ce=[],Je=!0;!this.eat(y);)if(Je?Je=!1:this.expect(E.comma),P&&this.type===E.comma)Ce.push(null);else{if(J&&this.afterTrailingComma(y))break;if(this.type===E.ellipsis){var rt=this.parseRestBinding();this.parseBindingListItem(rt),Ce.push(rt),this.type===E.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(y);break}else Ce.push(this.parseAssignableListItem(le))}return Ce},B.parseAssignableListItem=function(y){var P=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(P),P},B.parseBindingListItem=function(y){return y},B.parseMaybeDefault=function(y,P,J){if(J=J||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(E.eq))return J;var le=this.startNodeAt(y,P);return le.left=J,le.right=this.parseMaybeAssign(),this.finishNode(le,"AssignmentPattern")},B.checkLValSimple=function(y,P,J){P===void 0&&(P=ve);var le=P!==ve;switch(y.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(y.name)&&this.raiseRecoverable(y.start,(le?"Binding ":"Assigning to ")+y.name+" in strict mode"),le&&(P===Me&&y.name==="let"&&this.raiseRecoverable(y.start,"let is disallowed as a lexically bound name"),J&&(Ee(J,y.name)&&this.raiseRecoverable(y.start,"Argument name clash"),J[y.name]=!0),P!==c&&this.declareName(y.name,P,y.start));break;case"ChainExpression":this.raiseRecoverable(y.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":le&&this.raiseRecoverable(y.start,"Binding member expression");break;case"ParenthesizedExpression":return le&&this.raiseRecoverable(y.start,"Binding parenthesized expression"),this.checkLValSimple(y.expression,P,J);default:this.raise(y.start,(le?"Binding":"Assigning to")+" rvalue")}},B.checkLValPattern=function(y,P,J){switch(P===void 0&&(P=ve),y.type){case"ObjectPattern":for(var le=0,Ce=y.properties;le<Ce.length;le+=1){var Je=Ce[le];this.checkLValInnerPattern(Je,P,J)}break;case"ArrayPattern":for(var rt=0,xt=y.elements;rt<xt.length;rt+=1){var _t=xt[rt];_t&&this.checkLValInnerPattern(_t,P,J)}break;default:this.checkLValSimple(y,P,J)}},B.checkLValInnerPattern=function(y,P,J){switch(P===void 0&&(P=ve),y.type){case"Property":this.checkLValInnerPattern(y.value,P,J);break;case"AssignmentPattern":this.checkLValPattern(y.left,P,J);break;case"RestElement":this.checkLValPattern(y.argument,P,J);break;default:this.checkLValPattern(y,P,J)}};var Z=function(P,J,le,Ce,Je){this.token=P,this.isExpr=!!J,this.preserveSpace=!!le,this.override=Ce,this.generator=!!Je},G={b_stat:new Z("{",!1),b_expr:new Z("{",!0),b_tmpl:new Z("${",!1),p_stat:new Z("(",!1),p_expr:new Z("(",!0),q_tmpl:new Z("`",!0,!0,function(y){return y.tryReadTemplateToken()}),f_stat:new Z("function",!1),f_expr:new Z("function",!0),f_expr_gen:new Z("function",!0,!1,null,!0),f_gen:new Z("function",!1,!1,null,!0)},re=f.prototype;re.initialContext=function(){return[G.b_stat]},re.curContext=function(){return this.context[this.context.length-1]},re.braceIsBlock=function(y){var P=this.curContext();return P===G.f_expr||P===G.f_stat?!0:y===E.colon&&(P===G.b_stat||P===G.b_expr)?!P.isExpr:y===E._return||y===E.name&&this.exprAllowed?U.test(this.input.slice(this.lastTokEnd,this.start)):y===E._else||y===E.semi||y===E.eof||y===E.parenR||y===E.arrow?!0:y===E.braceL?P===G.b_stat:y===E._var||y===E._const||y===E.name?!1:!this.exprAllowed},re.inGeneratorContext=function(){for(var y=this.context.length-1;y>=1;y--){var P=this.context[y];if(P.token==="function")return P.generator}return!1},re.updateContext=function(y){var P,J=this.type;J.keyword&&y===E.dot?this.exprAllowed=!1:(P=J.updateContext)?P.call(this,y):this.exprAllowed=J.beforeExpr},re.overrideContext=function(y){this.curContext()!==y&&(this.context[this.context.length-1]=y)},E.parenR.updateContext=E.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var y=this.context.pop();y===G.b_stat&&this.curContext().token==="function"&&(y=this.context.pop()),this.exprAllowed=!y.isExpr},E.braceL.updateContext=function(y){this.context.push(this.braceIsBlock(y)?G.b_stat:G.b_expr),this.exprAllowed=!0},E.dollarBraceL.updateContext=function(){this.context.push(G.b_tmpl),this.exprAllowed=!0},E.parenL.updateContext=function(y){var P=y===E._if||y===E._for||y===E._with||y===E._while;this.context.push(P?G.p_stat:G.p_expr),this.exprAllowed=!0},E.incDec.updateContext=function(){},E._function.updateContext=E._class.updateContext=function(y){y.beforeExpr&&y!==E._else&&!(y===E.semi&&this.curContext()!==G.p_stat)&&!(y===E._return&&U.test(this.input.slice(this.lastTokEnd,this.start)))&&!((y===E.colon||y===E.braceL)&&this.curContext()===G.b_stat)?this.context.push(G.f_expr):this.context.push(G.f_stat),this.exprAllowed=!1},E.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},E.backQuote.updateContext=function(){this.curContext()===G.q_tmpl?this.context.pop():this.context.push(G.q_tmpl),this.exprAllowed=!1},E.star.updateContext=function(y){if(y===E._function){var P=this.context.length-1;this.context[P]===G.f_expr?this.context[P]=G.f_expr_gen:this.context[P]=G.f_gen}this.exprAllowed=!0},E.name.updateContext=function(y){var P=!1;this.options.ecmaVersion>=6&&y!==E.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(P=!0),this.exprAllowed=P};var z=f.prototype;z.checkPropClash=function(y,P,J){if(!(this.options.ecmaVersion>=9&&y.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(y.computed||y.method||y.shorthand))){var le=y.key,Ce;switch(le.type){case"Identifier":Ce=le.name;break;case"Literal":Ce=String(le.value);break;default:return}var Je=y.kind;if(this.options.ecmaVersion>=6){Ce==="__proto__"&&Je==="init"&&(P.proto&&(J?J.doubleProto<0&&(J.doubleProto=le.start):this.raiseRecoverable(le.start,"Redefinition of __proto__ property")),P.proto=!0);return}Ce="$"+Ce;var rt=P[Ce];if(rt){var xt;Je==="init"?xt=this.strict&&rt.init||rt.get||rt.set:xt=rt.init||rt[Je],xt&&this.raiseRecoverable(le.start,"Redefinition of property")}else rt=P[Ce]={init:!1,get:!1,set:!1};rt[Je]=!0}},z.parseExpression=function(y,P){var J=this.start,le=this.startLoc,Ce=this.parseMaybeAssign(y,P);if(this.type===E.comma){var Je=this.startNodeAt(J,le);for(Je.expressions=[Ce];this.eat(E.comma);)Je.expressions.push(this.parseMaybeAssign(y,P));return this.finishNode(Je,"SequenceExpression")}return Ce},z.parseMaybeAssign=function(y,P,J){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(y);this.exprAllowed=!1}var le=!1,Ce=-1,Je=-1,rt=-1;P?(Ce=P.parenthesizedAssign,Je=P.trailingComma,rt=P.doubleProto,P.parenthesizedAssign=P.trailingComma=-1):(P=new A,le=!0);var xt=this.start,_t=this.startLoc;(this.type===E.parenL||this.type===E.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=y==="await");var Qt=this.parseMaybeConditional(y,P);if(J&&(Qt=J.call(this,Qt,xt,_t)),this.type.isAssign){var sn=this.startNodeAt(xt,_t);return sn.operator=this.value,this.type===E.eq&&(Qt=this.toAssignable(Qt,!1,P)),le||(P.parenthesizedAssign=P.trailingComma=P.doubleProto=-1),P.shorthandAssign>=Qt.start&&(P.shorthandAssign=-1),this.type===E.eq?this.checkLValPattern(Qt):this.checkLValSimple(Qt),sn.left=Qt,this.next(),sn.right=this.parseMaybeAssign(y),rt>-1&&(P.doubleProto=rt),this.finishNode(sn,"AssignmentExpression")}else le&&this.checkExpressionErrors(P,!0);return Ce>-1&&(P.parenthesizedAssign=Ce),Je>-1&&(P.trailingComma=Je),Qt},z.parseMaybeConditional=function(y,P){var J=this.start,le=this.startLoc,Ce=this.parseExprOps(y,P);if(this.checkExpressionErrors(P))return Ce;if(this.eat(E.question)){var Je=this.startNodeAt(J,le);return Je.test=Ce,Je.consequent=this.parseMaybeAssign(),this.expect(E.colon),Je.alternate=this.parseMaybeAssign(y),this.finishNode(Je,"ConditionalExpression")}return Ce},z.parseExprOps=function(y,P){var J=this.start,le=this.startLoc,Ce=this.parseMaybeUnary(P,!1,!1,y);return this.checkExpressionErrors(P)||Ce.start===J&&Ce.type==="ArrowFunctionExpression"?Ce:this.parseExprOp(Ce,J,le,-1,y)},z.parseExprOp=function(y,P,J,le,Ce){var Je=this.type.binop;if(Je!=null&&(!Ce||this.type!==E._in)&&Je>le){var rt=this.type===E.logicalOR||this.type===E.logicalAND,xt=this.type===E.coalesce;xt&&(Je=E.logicalAND.binop);var _t=this.value;this.next();var Qt=this.start,sn=this.startLoc,An=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,Ce),Qt,sn,Je,Ce),rr=this.buildBinary(P,J,y,An,_t,rt||xt);return(rt&&this.type===E.coalesce||xt&&(this.type===E.logicalOR||this.type===E.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(rr,P,J,le,Ce)}return y},z.buildBinary=function(y,P,J,le,Ce,Je){le.type==="PrivateIdentifier"&&this.raise(le.start,"Private identifier can only be left side of binary expression");var rt=this.startNodeAt(y,P);return rt.left=J,rt.operator=Ce,rt.right=le,this.finishNode(rt,Je?"LogicalExpression":"BinaryExpression")},z.parseMaybeUnary=function(y,P,J,le){var Ce=this.start,Je=this.startLoc,rt;if(this.isContextual("await")&&this.canAwait)rt=this.parseAwait(le),P=!0;else if(this.type.prefix){var xt=this.startNode(),_t=this.type===E.incDec;xt.operator=this.value,xt.prefix=!0,this.next(),xt.argument=this.parseMaybeUnary(null,!0,_t,le),this.checkExpressionErrors(y,!0),_t?this.checkLValSimple(xt.argument):this.strict&&xt.operator==="delete"&&ne(xt.argument)?this.raiseRecoverable(xt.start,"Deleting local variable in strict mode"):xt.operator==="delete"&&se(xt.argument)?this.raiseRecoverable(xt.start,"Private fields can not be deleted"):P=!0,rt=this.finishNode(xt,_t?"UpdateExpression":"UnaryExpression")}else if(!P&&this.type===E.privateId)(le||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),rt=this.parsePrivateIdent(),this.type!==E._in&&this.unexpected();else{if(rt=this.parseExprSubscripts(y,le),this.checkExpressionErrors(y))return rt;for(;this.type.postfix&&!this.canInsertSemicolon();){var Qt=this.startNodeAt(Ce,Je);Qt.operator=this.value,Qt.prefix=!1,Qt.argument=rt,this.checkLValSimple(rt),this.next(),rt=this.finishNode(Qt,"UpdateExpression")}}if(!J&&this.eat(E.starstar))if(P)this.unexpected(this.lastTokStart);else return this.buildBinary(Ce,Je,rt,this.parseMaybeUnary(null,!1,!1,le),"**",!1);else return rt};function ne(y){return y.type==="Identifier"||y.type==="ParenthesizedExpression"&&ne(y.expression)}function se(y){return y.type==="MemberExpression"&&y.property.type==="PrivateIdentifier"||y.type==="ChainExpression"&&se(y.expression)||y.type==="ParenthesizedExpression"&&se(y.expression)}z.parseExprSubscripts=function(y,P){var J=this.start,le=this.startLoc,Ce=this.parseExprAtom(y,P);if(Ce.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Ce;var Je=this.parseSubscripts(Ce,J,le,!1,P);return y&&Je.type==="MemberExpression"&&(y.parenthesizedAssign>=Je.start&&(y.parenthesizedAssign=-1),y.parenthesizedBind>=Je.start&&(y.parenthesizedBind=-1),y.trailingComma>=Je.start&&(y.trailingComma=-1)),Je},z.parseSubscripts=function(y,P,J,le,Ce){for(var Je=this.options.ecmaVersion>=8&&y.type==="Identifier"&&y.name==="async"&&this.lastTokEnd===y.end&&!this.canInsertSemicolon()&&y.end-y.start===5&&this.potentialArrowAt===y.start,rt=!1;;){var xt=this.parseSubscript(y,P,J,le,Je,rt,Ce);if(xt.optional&&(rt=!0),xt===y||xt.type==="ArrowFunctionExpression"){if(rt){var _t=this.startNodeAt(P,J);_t.expression=xt,xt=this.finishNode(_t,"ChainExpression")}return xt}y=xt}},z.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(E.arrow)},z.parseSubscriptAsyncArrow=function(y,P,J,le){return this.parseArrowExpression(this.startNodeAt(y,P),J,!0,le)},z.parseSubscript=function(y,P,J,le,Ce,Je,rt){var xt=this.options.ecmaVersion>=11,_t=xt&&this.eat(E.questionDot);le&&_t&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Qt=this.eat(E.bracketL);if(Qt||_t&&this.type!==E.parenL&&this.type!==E.backQuote||this.eat(E.dot)){var sn=this.startNodeAt(P,J);sn.object=y,Qt?(sn.property=this.parseExpression(),this.expect(E.bracketR)):this.type===E.privateId&&y.type!=="Super"?sn.property=this.parsePrivateIdent():sn.property=this.parseIdent(this.options.allowReserved!=="never"),sn.computed=!!Qt,xt&&(sn.optional=_t),y=this.finishNode(sn,"MemberExpression")}else if(!le&&this.eat(E.parenL)){var An=new A,rr=this.yieldPos,ns=this.awaitPos,Ut=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var He=this.parseExprList(E.parenR,this.options.ecmaVersion>=8,!1,An);if(Ce&&!_t&&this.shouldParseAsyncArrow())return this.checkPatternErrors(An,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=rr,this.awaitPos=ns,this.awaitIdentPos=Ut,this.parseSubscriptAsyncArrow(P,J,He,rt);this.checkExpressionErrors(An,!0),this.yieldPos=rr||this.yieldPos,this.awaitPos=ns||this.awaitPos,this.awaitIdentPos=Ut||this.awaitIdentPos;var St=this.startNodeAt(P,J);St.callee=y,St.arguments=He,xt&&(St.optional=_t),y=this.finishNode(St,"CallExpression")}else if(this.type===E.backQuote){(_t||Je)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Rt=this.startNodeAt(P,J);Rt.tag=y,Rt.quasi=this.parseTemplate({isTagged:!0}),y=this.finishNode(Rt,"TaggedTemplateExpression")}return y},z.parseExprAtom=function(y,P,J){this.type===E.slash&&this.readRegexp();var le,Ce=this.potentialArrowAt===this.start;switch(this.type){case E._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),le=this.startNode(),this.next(),this.type===E.parenL&&!this.allowDirectSuper&&this.raise(le.start,"super() call outside constructor of a subclass"),this.type!==E.dot&&this.type!==E.bracketL&&this.type!==E.parenL&&this.unexpected(),this.finishNode(le,"Super");case E._this:return le=this.startNode(),this.next(),this.finishNode(le,"ThisExpression");case E.name:var Je=this.start,rt=this.startLoc,xt=this.containsEsc,_t=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!xt&&_t.name==="async"&&!this.canInsertSemicolon()&&this.eat(E._function))return this.overrideContext(G.f_expr),this.parseFunction(this.startNodeAt(Je,rt),0,!1,!0,P);if(Ce&&!this.canInsertSemicolon()){if(this.eat(E.arrow))return this.parseArrowExpression(this.startNodeAt(Je,rt),[_t],!1,P);if(this.options.ecmaVersion>=8&&_t.name==="async"&&this.type===E.name&&!xt&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return _t=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(E.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Je,rt),[_t],!0,P)}return _t;case E.regexp:var Qt=this.value;return le=this.parseLiteral(Qt.value),le.regex={pattern:Qt.pattern,flags:Qt.flags},le;case E.num:case E.string:return this.parseLiteral(this.value);case E._null:case E._true:case E._false:return le=this.startNode(),le.value=this.type===E._null?null:this.type===E._true,le.raw=this.type.keyword,this.next(),this.finishNode(le,"Literal");case E.parenL:var sn=this.start,An=this.parseParenAndDistinguishExpression(Ce,P);return y&&(y.parenthesizedAssign<0&&!this.isSimpleAssignTarget(An)&&(y.parenthesizedAssign=sn),y.parenthesizedBind<0&&(y.parenthesizedBind=sn)),An;case E.bracketL:return le=this.startNode(),this.next(),le.elements=this.parseExprList(E.bracketR,!0,!0,y),this.finishNode(le,"ArrayExpression");case E.braceL:return this.overrideContext(G.b_expr),this.parseObj(!1,y);case E._function:return le=this.startNode(),this.next(),this.parseFunction(le,0);case E._class:return this.parseClass(this.startNode(),!1);case E._new:return this.parseNew();case E.backQuote:return this.parseTemplate();case E._import:return this.options.ecmaVersion>=11?this.parseExprImport(J):this.unexpected();default:return this.parseExprAtomDefault()}},z.parseExprAtomDefault=function(){this.unexpected()},z.parseExprImport=function(y){var P=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===E.parenL&&!y)return this.parseDynamicImport(P);if(this.type===E.dot){var J=this.startNodeAt(P.start,P.loc&&P.loc.start);return J.name="import",P.meta=this.finishNode(J,"Identifier"),this.parseImportMeta(P)}else this.unexpected()},z.parseDynamicImport=function(y){if(this.next(),y.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(E.parenR)?y.options=null:(this.expect(E.comma),this.afterTrailingComma(E.parenR)?y.options=null:(y.options=this.parseMaybeAssign(),this.eat(E.parenR)||(this.expect(E.comma),this.afterTrailingComma(E.parenR)||this.unexpected())));else if(!this.eat(E.parenR)){var P=this.start;this.eat(E.comma)&&this.eat(E.parenR)?this.raiseRecoverable(P,"Trailing comma is not allowed in import()"):this.unexpected(P)}return this.finishNode(y,"ImportExpression")},z.parseImportMeta=function(y){this.next();var P=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="meta"&&this.raiseRecoverable(y.property.start,"The only valid meta property for import is 'import.meta'"),P&&this.raiseRecoverable(y.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(y.start,"Cannot use 'import.meta' outside a module"),this.finishNode(y,"MetaProperty")},z.parseLiteral=function(y){var P=this.startNode();return P.value=y,P.raw=this.input.slice(this.start,this.end),P.raw.charCodeAt(P.raw.length-1)===110&&(P.bigint=P.value!=null?P.value.toString():P.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(P,"Literal")},z.parseParenExpression=function(){this.expect(E.parenL);var y=this.parseExpression();return this.expect(E.parenR),y},z.shouldParseArrow=function(y){return!this.canInsertSemicolon()},z.parseParenAndDistinguishExpression=function(y,P){var J=this.start,le=this.startLoc,Ce,Je=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var rt=this.start,xt=this.startLoc,_t=[],Qt=!0,sn=!1,An=new A,rr=this.yieldPos,ns=this.awaitPos,Ut;for(this.yieldPos=0,this.awaitPos=0;this.type!==E.parenR;)if(Qt?Qt=!1:this.expect(E.comma),Je&&this.afterTrailingComma(E.parenR,!0)){sn=!0;break}else if(this.type===E.ellipsis){Ut=this.start,_t.push(this.parseParenItem(this.parseRestBinding())),this.type===E.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else _t.push(this.parseMaybeAssign(!1,An,this.parseParenItem));var He=this.lastTokEnd,St=this.lastTokEndLoc;if(this.expect(E.parenR),y&&this.shouldParseArrow(_t)&&this.eat(E.arrow))return this.checkPatternErrors(An,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=rr,this.awaitPos=ns,this.parseParenArrowList(J,le,_t,P);(!_t.length||sn)&&this.unexpected(this.lastTokStart),Ut&&this.unexpected(Ut),this.checkExpressionErrors(An,!0),this.yieldPos=rr||this.yieldPos,this.awaitPos=ns||this.awaitPos,_t.length>1?(Ce=this.startNodeAt(rt,xt),Ce.expressions=_t,this.finishNodeAt(Ce,"SequenceExpression",He,St)):Ce=_t[0]}else Ce=this.parseParenExpression();if(this.options.preserveParens){var Rt=this.startNodeAt(J,le);return Rt.expression=Ce,this.finishNode(Rt,"ParenthesizedExpression")}else return Ce},z.parseParenItem=function(y){return y},z.parseParenArrowList=function(y,P,J,le){return this.parseArrowExpression(this.startNodeAt(y,P),J,!1,le)};var ue=[];z.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var y=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===E.dot){var P=this.startNodeAt(y.start,y.loc&&y.loc.start);P.name="new",y.meta=this.finishNode(P,"Identifier"),this.next();var J=this.containsEsc;return y.property=this.parseIdent(!0),y.property.name!=="target"&&this.raiseRecoverable(y.property.start,"The only valid meta property for new is 'new.target'"),J&&this.raiseRecoverable(y.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(y.start,"'new.target' can only be used in functions and class static block"),this.finishNode(y,"MetaProperty")}var le=this.start,Ce=this.startLoc;return y.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),le,Ce,!0,!1),this.eat(E.parenL)?y.arguments=this.parseExprList(E.parenR,this.options.ecmaVersion>=8,!1):y.arguments=ue,this.finishNode(y,"NewExpression")},z.parseTemplateElement=function(y){var P=y.isTagged,J=this.startNode();return this.type===E.invalidTemplate?(P||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),J.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):J.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),J.tail=this.type===E.backQuote,this.finishNode(J,"TemplateElement")},z.parseTemplate=function(y){y===void 0&&(y={});var P=y.isTagged;P===void 0&&(P=!1);var J=this.startNode();this.next(),J.expressions=[];var le=this.parseTemplateElement({isTagged:P});for(J.quasis=[le];!le.tail;)this.type===E.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(E.dollarBraceL),J.expressions.push(this.parseExpression()),this.expect(E.braceR),J.quasis.push(le=this.parseTemplateElement({isTagged:P}));return this.next(),this.finishNode(J,"TemplateLiteral")},z.isAsyncProp=function(y){return!y.computed&&y.key.type==="Identifier"&&y.key.name==="async"&&(this.type===E.name||this.type===E.num||this.type===E.string||this.type===E.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===E.star)&&!U.test(this.input.slice(this.lastTokEnd,this.start))},z.parseObj=function(y,P){var J=this.startNode(),le=!0,Ce={};for(J.properties=[],this.next();!this.eat(E.braceR);){if(le)le=!1;else if(this.expect(E.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(E.braceR))break;var Je=this.parseProperty(y,P);y||this.checkPropClash(Je,Ce,P),J.properties.push(Je)}return this.finishNode(J,y?"ObjectPattern":"ObjectExpression")},z.parseProperty=function(y,P){var J=this.startNode(),le,Ce,Je,rt;if(this.options.ecmaVersion>=9&&this.eat(E.ellipsis))return y?(J.argument=this.parseIdent(!1),this.type===E.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(J,"RestElement")):(J.argument=this.parseMaybeAssign(!1,P),this.type===E.comma&&P&&P.trailingComma<0&&(P.trailingComma=this.start),this.finishNode(J,"SpreadElement"));this.options.ecmaVersion>=6&&(J.method=!1,J.shorthand=!1,(y||P)&&(Je=this.start,rt=this.startLoc),y||(le=this.eat(E.star)));var xt=this.containsEsc;return this.parsePropertyName(J),!y&&!xt&&this.options.ecmaVersion>=8&&!le&&this.isAsyncProp(J)?(Ce=!0,le=this.options.ecmaVersion>=9&&this.eat(E.star),this.parsePropertyName(J)):Ce=!1,this.parsePropertyValue(J,y,le,Ce,Je,rt,P,xt),this.finishNode(J,"Property")},z.parseGetterSetter=function(y){var P=y.key.name;this.parsePropertyName(y),y.value=this.parseMethod(!1),y.kind=P;var J=y.kind==="get"?0:1;if(y.value.params.length!==J){var le=y.value.start;y.kind==="get"?this.raiseRecoverable(le,"getter should have no params"):this.raiseRecoverable(le,"setter should have exactly one param")}else y.kind==="set"&&y.value.params[0].type==="RestElement"&&this.raiseRecoverable(y.value.params[0].start,"Setter cannot use rest params")},z.parsePropertyValue=function(y,P,J,le,Ce,Je,rt,xt){(J||le)&&this.type===E.colon&&this.unexpected(),this.eat(E.colon)?(y.value=P?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,rt),y.kind="init"):this.options.ecmaVersion>=6&&this.type===E.parenL?(P&&this.unexpected(),y.method=!0,y.value=this.parseMethod(J,le),y.kind="init"):!P&&!xt&&this.options.ecmaVersion>=5&&!y.computed&&y.key.type==="Identifier"&&(y.key.name==="get"||y.key.name==="set")&&this.type!==E.comma&&this.type!==E.braceR&&this.type!==E.eq?((J||le)&&this.unexpected(),this.parseGetterSetter(y)):this.options.ecmaVersion>=6&&!y.computed&&y.key.type==="Identifier"?((J||le)&&this.unexpected(),this.checkUnreserved(y.key),y.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Ce),P?y.value=this.parseMaybeDefault(Ce,Je,this.copyNode(y.key)):this.type===E.eq&&rt?(rt.shorthandAssign<0&&(rt.shorthandAssign=this.start),y.value=this.parseMaybeDefault(Ce,Je,this.copyNode(y.key))):y.value=this.copyNode(y.key),y.kind="init",y.shorthand=!0):this.unexpected()},z.parsePropertyName=function(y){if(this.options.ecmaVersion>=6){if(this.eat(E.bracketL))return y.computed=!0,y.key=this.parseMaybeAssign(),this.expect(E.bracketR),y.key;y.computed=!1}return y.key=this.type===E.num||this.type===E.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},z.initFunction=function(y){y.id=null,this.options.ecmaVersion>=6&&(y.generator=y.expression=!1),this.options.ecmaVersion>=8&&(y.async=!1)},z.parseMethod=function(y,P,J){var le=this.startNode(),Ce=this.yieldPos,Je=this.awaitPos,rt=this.awaitIdentPos;return this.initFunction(le),this.options.ecmaVersion>=6&&(le.generator=y),this.options.ecmaVersion>=8&&(le.async=!!P),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(pe(P,le.generator)|qe|(J?ae:0)),this.expect(E.parenL),le.params=this.parseBindingList(E.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(le,!1,!0,!1),this.yieldPos=Ce,this.awaitPos=Je,this.awaitIdentPos=rt,this.finishNode(le,"FunctionExpression")},z.parseArrowExpression=function(y,P,J,le){var Ce=this.yieldPos,Je=this.awaitPos,rt=this.awaitIdentPos;return this.enterScope(pe(J,!1)|Ct),this.initFunction(y),this.options.ecmaVersion>=8&&(y.async=!!J),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,y.params=this.toAssignableList(P,!0),this.parseFunctionBody(y,!0,!1,le),this.yieldPos=Ce,this.awaitPos=Je,this.awaitIdentPos=rt,this.finishNode(y,"ArrowFunctionExpression")},z.parseFunctionBody=function(y,P,J,le){var Ce=P&&this.type!==E.braceL,Je=this.strict,rt=!1;if(Ce)y.body=this.parseMaybeAssign(le),y.expression=!0,this.checkParams(y,!1);else{var xt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(y.params);(!Je||xt)&&(rt=this.strictDirective(this.end),rt&&xt&&this.raiseRecoverable(y.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var _t=this.labels;this.labels=[],rt&&(this.strict=!0),this.checkParams(y,!Je&&!rt&&!P&&!J&&this.isSimpleParamList(y.params)),this.strict&&y.id&&this.checkLValSimple(y.id,c),y.body=this.parseBlock(!1,void 0,rt&&!Je),y.expression=!1,this.adaptDirectivePrologue(y.body.body),this.labels=_t}this.exitScope()},z.isSimpleParamList=function(y){for(var P=0,J=y;P<J.length;P+=1){var le=J[P];if(le.type!=="Identifier")return!1}return!0},z.checkParams=function(y,P){for(var J=Object.create(null),le=0,Ce=y.params;le<Ce.length;le+=1){var Je=Ce[le];this.checkLValInnerPattern(Je,ye,P?null:J)}},z.parseExprList=function(y,P,J,le){for(var Ce=[],Je=!0;!this.eat(y);){if(Je)Je=!1;else if(this.expect(E.comma),P&&this.afterTrailingComma(y))break;var rt=void 0;J&&this.type===E.comma?rt=null:this.type===E.ellipsis?(rt=this.parseSpread(le),le&&this.type===E.comma&&le.trailingComma<0&&(le.trailingComma=this.start)):rt=this.parseMaybeAssign(!1,le),Ce.push(rt)}return Ce},z.checkUnreserved=function(y){var P=y.start,J=y.end,le=y.name;if(this.inGenerator&&le==="yield"&&this.raiseRecoverable(P,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&le==="await"&&this.raiseRecoverable(P,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&ee)&&le==="arguments"&&this.raiseRecoverable(P,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(le==="arguments"||le==="await")&&this.raise(P,"Cannot use "+le+" in class static initialization block"),this.keywords.test(le)&&this.raise(P,"Unexpected keyword '"+le+"'"),!(this.options.ecmaVersion<6&&this.input.slice(P,J).indexOf("\\")!==-1)){var Ce=this.strict?this.reservedWordsStrict:this.reservedWords;Ce.test(le)&&(!this.inAsync&&le==="await"&&this.raiseRecoverable(P,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(P,"The keyword '"+le+"' is reserved"))}},z.parseIdent=function(y){var P=this.parseIdentNode();return this.next(!!y),this.finishNode(P,"Identifier"),y||(this.checkUnreserved(P),P.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=P.start)),P},z.parseIdentNode=function(){var y=this.startNode();return this.type===E.name?y.name=this.value:this.type.keyword?(y.name=this.type.keyword,(y.name==="class"||y.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=E.name):this.unexpected(),y},z.parsePrivateIdent=function(){var y=this.startNode();return this.type===E.privateId?y.name=this.value:this.unexpected(),this.next(),this.finishNode(y,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(y.start,"Private field '#"+y.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(y)),y},z.parseYield=function(y){this.yieldPos||(this.yieldPos=this.start);var P=this.startNode();return this.next(),this.type===E.semi||this.canInsertSemicolon()||this.type!==E.star&&!this.type.startsExpr?(P.delegate=!1,P.argument=null):(P.delegate=this.eat(E.star),P.argument=this.parseMaybeAssign(y)),this.finishNode(P,"YieldExpression")},z.parseAwait=function(y){this.awaitPos||(this.awaitPos=this.start);var P=this.startNode();return this.next(),P.argument=this.parseMaybeUnary(null,!0,!1,y),this.finishNode(P,"AwaitExpression")};var ie=f.prototype;ie.raise=function(y,P){var J=tt(this.input,y);P+=" ("+J.line+":"+J.column+")",this.sourceFile&&(P+=" in "+this.sourceFile);var le=new SyntaxError(P);throw le.pos=y,le.loc=J,le.raisedAt=this.pos,le},ie.raiseRecoverable=ie.raise,ie.curPosition=function(){if(this.options.locations)return new Pe(this.curLine,this.pos-this.lineStart)};var be=f.prototype,Se=function(P){this.flags=P,this.var=[],this.lexical=[],this.functions=[]};be.enterScope=function(y){this.scopeStack.push(new Se(y))},be.exitScope=function(){this.scopeStack.pop()},be.treatFunctionsAsVarInScope=function(y){return y.flags&Ne||!this.inModule&&y.flags&We},be.declareName=function(y,P,J){var le=!1;if(P===Me){var Ce=this.currentScope();le=Ce.lexical.indexOf(y)>-1||Ce.functions.indexOf(y)>-1||Ce.var.indexOf(y)>-1,Ce.lexical.push(y),this.inModule&&Ce.flags&We&&delete this.undefinedExports[y]}else if(P===$e){var Je=this.currentScope();Je.lexical.push(y)}else if(P===Xe){var rt=this.currentScope();this.treatFunctionsAsVar?le=rt.lexical.indexOf(y)>-1:le=rt.lexical.indexOf(y)>-1||rt.var.indexOf(y)>-1,rt.functions.push(y)}else for(var xt=this.scopeStack.length-1;xt>=0;--xt){var _t=this.scopeStack[xt];if(_t.lexical.indexOf(y)>-1&&!(_t.flags&q&&_t.lexical[0]===y)||!this.treatFunctionsAsVarInScope(_t)&&_t.functions.indexOf(y)>-1){le=!0;break}if(_t.var.push(y),this.inModule&&_t.flags&We&&delete this.undefinedExports[y],_t.flags&ee)break}le&&this.raiseRecoverable(J,"Identifier '"+y+"' has already been declared")},be.checkLocalExport=function(y){this.scopeStack[0].lexical.indexOf(y.name)===-1&&this.scopeStack[0].var.indexOf(y.name)===-1&&(this.undefinedExports[y.name]=y)},be.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},be.currentVarScope=function(){for(var y=this.scopeStack.length-1;;y--){var P=this.scopeStack[y];if(P.flags&(ee|L|M))return P}},be.currentThisScope=function(){for(var y=this.scopeStack.length-1;;y--){var P=this.scopeStack[y];if(P.flags&(ee|L|M)&&!(P.flags&Ct))return P}};var Ae=function(P,J,le){this.type="",this.start=J,this.end=0,P.options.locations&&(this.loc=new it(P,le)),P.options.directSourceFile&&(this.sourceFile=P.options.directSourceFile),P.options.ranges&&(this.range=[J,0])},De=f.prototype;De.startNode=function(){return new Ae(this,this.start,this.startLoc)},De.startNodeAt=function(y,P){return new Ae(this,y,P)};function we(y,P,J,le){return y.type=P,y.end=J,this.options.locations&&(y.loc.end=le),this.options.ranges&&(y.range[1]=J),y}De.finishNode=function(y,P){return we.call(this,y,P,this.lastTokEnd,this.lastTokEndLoc)},De.finishNodeAt=function(y,P,J,le){return we.call(this,y,P,J,le)},De.copyNode=function(y){var P=new Ae(this,y.start,this.startLoc);for(var J in y)P[J]=y[J];return P};var Ie="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",Fe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ye=Fe+" Extended_Pictographic",Ze=Ye,Qe=Ze+" EBase EComp EMod EPres ExtPict",pt=Qe,gt=pt,At={9:Fe,10:Ye,11:Ze,12:Qe,13:pt,14:gt},kt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",at={9:"",10:"",11:"",12:"",13:"",14:kt},lt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Tt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ot=Tt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Be=Ot+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",dt=Be+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",vt=dt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Lt=vt+" "+Ie,It={9:Tt,10:Ot,11:Be,12:dt,13:vt,14:Lt},$t={};function nn(y){var P=$t[y]={binary:xe(At[y]+" "+lt),binaryOfStrings:xe(at[y]),nonBinary:{General_Category:xe(lt),Script:xe(It[y])}};P.nonBinary.Script_Extensions=P.nonBinary.Script,P.nonBinary.gc=P.nonBinary.General_Category,P.nonBinary.sc=P.nonBinary.Script,P.nonBinary.scx=P.nonBinary.Script_Extensions}for(var rn=0,vn=[9,10,11,12,13,14];rn<vn.length;rn+=1){var Cn=vn[rn];nn(Cn)}var wt=f.prototype,En=function(P,J){this.parent=P,this.base=J||this};En.prototype.separatedFrom=function(P){for(var J=this;J;J=J.parent)for(var le=P;le;le=le.parent)if(J.base===le.base&&J!==le)return!0;return!1},En.prototype.sibling=function(){return new En(this.parent,this.base)};var Nn=function(P){this.parser=P,this.validFlags="gim"+(P.options.ecmaVersion>=6?"uy":"")+(P.options.ecmaVersion>=9?"s":"")+(P.options.ecmaVersion>=13?"d":"")+(P.options.ecmaVersion>=15?"v":""),this.unicodeProperties=$t[P.options.ecmaVersion>=14?14:P.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Nn.prototype.reset=function(P,J,le){var Ce=le.indexOf("v")!==-1,Je=le.indexOf("u")!==-1;this.start=P|0,this.source=J+"",this.flags=le,Ce&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Je&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Je&&this.parser.options.ecmaVersion>=9)},Nn.prototype.raise=function(P){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+P)},Nn.prototype.at=function(P,J){J===void 0&&(J=!1);var le=this.source,Ce=le.length;if(P>=Ce)return-1;var Je=le.charCodeAt(P);if(!(J||this.switchU)||Je<=55295||Je>=57344||P+1>=Ce)return Je;var rt=le.charCodeAt(P+1);return rt>=56320&&rt<=57343?(Je<<10)+rt-56613888:Je},Nn.prototype.nextIndex=function(P,J){J===void 0&&(J=!1);var le=this.source,Ce=le.length;if(P>=Ce)return Ce;var Je=le.charCodeAt(P),rt;return!(J||this.switchU)||Je<=55295||Je>=57344||P+1>=Ce||(rt=le.charCodeAt(P+1))<56320||rt>57343?P+1:P+2},Nn.prototype.current=function(P){return P===void 0&&(P=!1),this.at(this.pos,P)},Nn.prototype.lookahead=function(P){return P===void 0&&(P=!1),this.at(this.nextIndex(this.pos,P),P)},Nn.prototype.advance=function(P){P===void 0&&(P=!1),this.pos=this.nextIndex(this.pos,P)},Nn.prototype.eat=function(P,J){return J===void 0&&(J=!1),this.current(J)===P?(this.advance(J),!0):!1},Nn.prototype.eatChars=function(P,J){J===void 0&&(J=!1);for(var le=this.pos,Ce=0,Je=P;Ce<Je.length;Ce+=1){var rt=Je[Ce],xt=this.at(le,J);if(xt===-1||xt!==rt)return!1;le=this.nextIndex(le,J)}return this.pos=le,!0},wt.validateRegExpFlags=function(y){for(var P=y.validFlags,J=y.flags,le=!1,Ce=!1,Je=0;Je<J.length;Je++){var rt=J.charAt(Je);P.indexOf(rt)===-1&&this.raise(y.start,"Invalid regular expression flag"),J.indexOf(rt,Je+1)>-1&&this.raise(y.start,"Duplicate regular expression flag"),rt==="u"&&(le=!0),rt==="v"&&(Ce=!0)}this.options.ecmaVersion>=15&&le&&Ce&&this.raise(y.start,"Invalid regular expression flag")};function xn(y){for(var P in y)return!0;return!1}wt.validateRegExpPattern=function(y){this.regexp_pattern(y),!y.switchN&&this.options.ecmaVersion>=9&&xn(y.groupNames)&&(y.switchN=!0,this.regexp_pattern(y))},wt.regexp_pattern=function(y){y.pos=0,y.lastIntValue=0,y.lastStringValue="",y.lastAssertionIsQuantifiable=!1,y.numCapturingParens=0,y.maxBackReference=0,y.groupNames=Object.create(null),y.backReferenceNames.length=0,y.branchID=null,this.regexp_disjunction(y),y.pos!==y.source.length&&(y.eat(41)&&y.raise("Unmatched ')'"),(y.eat(93)||y.eat(125))&&y.raise("Lone quantifier brackets")),y.maxBackReference>y.numCapturingParens&&y.raise("Invalid escape");for(var P=0,J=y.backReferenceNames;P<J.length;P+=1){var le=J[P];y.groupNames[le]||y.raise("Invalid named capture referenced")}},wt.regexp_disjunction=function(y){var P=this.options.ecmaVersion>=16;for(P&&(y.branchID=new En(y.branchID,null)),this.regexp_alternative(y);y.eat(124);)P&&(y.branchID=y.branchID.sibling()),this.regexp_alternative(y);P&&(y.branchID=y.branchID.parent),this.regexp_eatQuantifier(y,!0)&&y.raise("Nothing to repeat"),y.eat(123)&&y.raise("Lone quantifier brackets")},wt.regexp_alternative=function(y){for(;y.pos<y.source.length&&this.regexp_eatTerm(y););},wt.regexp_eatTerm=function(y){return this.regexp_eatAssertion(y)?(y.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(y)&&y.switchU&&y.raise("Invalid quantifier"),!0):(y.switchU?this.regexp_eatAtom(y):this.regexp_eatExtendedAtom(y))?(this.regexp_eatQuantifier(y),!0):!1},wt.regexp_eatAssertion=function(y){var P=y.pos;if(y.lastAssertionIsQuantifiable=!1,y.eat(94)||y.eat(36))return!0;if(y.eat(92)){if(y.eat(66)||y.eat(98))return!0;y.pos=P}if(y.eat(40)&&y.eat(63)){var J=!1;if(this.options.ecmaVersion>=9&&(J=y.eat(60)),y.eat(61)||y.eat(33))return this.regexp_disjunction(y),y.eat(41)||y.raise("Unterminated group"),y.lastAssertionIsQuantifiable=!J,!0}return y.pos=P,!1},wt.regexp_eatQuantifier=function(y,P){return P===void 0&&(P=!1),this.regexp_eatQuantifierPrefix(y,P)?(y.eat(63),!0):!1},wt.regexp_eatQuantifierPrefix=function(y,P){return y.eat(42)||y.eat(43)||y.eat(63)||this.regexp_eatBracedQuantifier(y,P)},wt.regexp_eatBracedQuantifier=function(y,P){var J=y.pos;if(y.eat(123)){var le=0,Ce=-1;if(this.regexp_eatDecimalDigits(y)&&(le=y.lastIntValue,y.eat(44)&&this.regexp_eatDecimalDigits(y)&&(Ce=y.lastIntValue),y.eat(125)))return Ce!==-1&&Ce<le&&!P&&y.raise("numbers out of order in {} quantifier"),!0;y.switchU&&!P&&y.raise("Incomplete quantifier"),y.pos=J}return!1},wt.regexp_eatAtom=function(y){return this.regexp_eatPatternCharacters(y)||y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)},wt.regexp_eatReverseSolidusAtomEscape=function(y){var P=y.pos;if(y.eat(92)){if(this.regexp_eatAtomEscape(y))return!0;y.pos=P}return!1},wt.regexp_eatUncapturingGroup=function(y){var P=y.pos;if(y.eat(40)){if(y.eat(63)){if(this.options.ecmaVersion>=16){var J=this.regexp_eatModifiers(y),le=y.eat(45);if(J||le){for(var Ce=0;Ce<J.length;Ce++){var Je=J.charAt(Ce);J.indexOf(Je,Ce+1)>-1&&y.raise("Duplicate regular expression modifiers")}if(le){var rt=this.regexp_eatModifiers(y);!J&&!rt&&y.current()===58&&y.raise("Invalid regular expression modifiers");for(var xt=0;xt<rt.length;xt++){var _t=rt.charAt(xt);(rt.indexOf(_t,xt+1)>-1||J.indexOf(_t)>-1)&&y.raise("Duplicate regular expression modifiers")}}}}if(y.eat(58)){if(this.regexp_disjunction(y),y.eat(41))return!0;y.raise("Unterminated group")}}y.pos=P}return!1},wt.regexp_eatCapturingGroup=function(y){if(y.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(y):y.current()===63&&y.raise("Invalid group"),this.regexp_disjunction(y),y.eat(41))return y.numCapturingParens+=1,!0;y.raise("Unterminated group")}return!1},wt.regexp_eatModifiers=function(y){for(var P="",J=0;(J=y.current())!==-1&&xr(J);)P+=Re(J),y.advance();return P};function xr(y){return y===105||y===109||y===115}wt.regexp_eatExtendedAtom=function(y){return y.eat(46)||this.regexp_eatReverseSolidusAtomEscape(y)||this.regexp_eatCharacterClass(y)||this.regexp_eatUncapturingGroup(y)||this.regexp_eatCapturingGroup(y)||this.regexp_eatInvalidBracedQuantifier(y)||this.regexp_eatExtendedPatternCharacter(y)},wt.regexp_eatInvalidBracedQuantifier=function(y){return this.regexp_eatBracedQuantifier(y,!0)&&y.raise("Nothing to repeat"),!1},wt.regexp_eatSyntaxCharacter=function(y){var P=y.current();return Tr(P)?(y.lastIntValue=P,y.advance(),!0):!1};function Tr(y){return y===36||y>=40&&y<=43||y===46||y===63||y>=91&&y<=94||y>=123&&y<=125}wt.regexp_eatPatternCharacters=function(y){for(var P=y.pos,J=0;(J=y.current())!==-1&&!Tr(J);)y.advance();return y.pos!==P},wt.regexp_eatExtendedPatternCharacter=function(y){var P=y.current();return P!==-1&&P!==36&&!(P>=40&&P<=43)&&P!==46&&P!==63&&P!==91&&P!==94&&P!==124?(y.advance(),!0):!1},wt.regexp_groupSpecifier=function(y){if(y.eat(63)){this.regexp_eatGroupName(y)||y.raise("Invalid group");var P=this.options.ecmaVersion>=16,J=y.groupNames[y.lastStringValue];if(J)if(P)for(var le=0,Ce=J;le<Ce.length;le+=1){var Je=Ce[le];Je.separatedFrom(y.branchID)||y.raise("Duplicate capture group name")}else y.raise("Duplicate capture group name");P?(J||(y.groupNames[y.lastStringValue]=[])).push(y.branchID):y.groupNames[y.lastStringValue]=!0}},wt.regexp_eatGroupName=function(y){if(y.lastStringValue="",y.eat(60)){if(this.regexp_eatRegExpIdentifierName(y)&&y.eat(62))return!0;y.raise("Invalid capture group name")}return!1},wt.regexp_eatRegExpIdentifierName=function(y){if(y.lastStringValue="",this.regexp_eatRegExpIdentifierStart(y)){for(y.lastStringValue+=Re(y.lastIntValue);this.regexp_eatRegExpIdentifierPart(y);)y.lastStringValue+=Re(y.lastIntValue);return!0}return!1},wt.regexp_eatRegExpIdentifierStart=function(y){var P=y.pos,J=this.options.ecmaVersion>=11,le=y.current(J);return y.advance(J),le===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,J)&&(le=y.lastIntValue),or(le)?(y.lastIntValue=le,!0):(y.pos=P,!1)};function or(y){return v(y,!0)||y===36||y===95}wt.regexp_eatRegExpIdentifierPart=function(y){var P=y.pos,J=this.options.ecmaVersion>=11,le=y.current(J);return y.advance(J),le===92&&this.regexp_eatRegExpUnicodeEscapeSequence(y,J)&&(le=y.lastIntValue),lr(le)?(y.lastIntValue=le,!0):(y.pos=P,!1)};function lr(y){return w(y,!0)||y===36||y===95||y===8204||y===8205}wt.regexp_eatAtomEscape=function(y){return this.regexp_eatBackReference(y)||this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)||y.switchN&&this.regexp_eatKGroupName(y)?!0:(y.switchU&&(y.current()===99&&y.raise("Invalid unicode escape"),y.raise("Invalid escape")),!1)},wt.regexp_eatBackReference=function(y){var P=y.pos;if(this.regexp_eatDecimalEscape(y)){var J=y.lastIntValue;if(y.switchU)return J>y.maxBackReference&&(y.maxBackReference=J),!0;if(J<=y.numCapturingParens)return!0;y.pos=P}return!1},wt.regexp_eatKGroupName=function(y){if(y.eat(107)){if(this.regexp_eatGroupName(y))return y.backReferenceNames.push(y.lastStringValue),!0;y.raise("Invalid named reference")}return!1},wt.regexp_eatCharacterEscape=function(y){return this.regexp_eatControlEscape(y)||this.regexp_eatCControlLetter(y)||this.regexp_eatZero(y)||this.regexp_eatHexEscapeSequence(y)||this.regexp_eatRegExpUnicodeEscapeSequence(y,!1)||!y.switchU&&this.regexp_eatLegacyOctalEscapeSequence(y)||this.regexp_eatIdentityEscape(y)},wt.regexp_eatCControlLetter=function(y){var P=y.pos;if(y.eat(99)){if(this.regexp_eatControlLetter(y))return!0;y.pos=P}return!1},wt.regexp_eatZero=function(y){return y.current()===48&&!ii(y.lookahead())?(y.lastIntValue=0,y.advance(),!0):!1},wt.regexp_eatControlEscape=function(y){var P=y.current();return P===116?(y.lastIntValue=9,y.advance(),!0):P===110?(y.lastIntValue=10,y.advance(),!0):P===118?(y.lastIntValue=11,y.advance(),!0):P===102?(y.lastIntValue=12,y.advance(),!0):P===114?(y.lastIntValue=13,y.advance(),!0):!1},wt.regexp_eatControlLetter=function(y){var P=y.current();return ur(P)?(y.lastIntValue=P%32,y.advance(),!0):!1};function ur(y){return y>=65&&y<=90||y>=97&&y<=122}wt.regexp_eatRegExpUnicodeEscapeSequence=function(y,P){P===void 0&&(P=!1);var J=y.pos,le=P||y.switchU;if(y.eat(117)){if(this.regexp_eatFixedHexDigits(y,4)){var Ce=y.lastIntValue;if(le&&Ce>=55296&&Ce<=56319){var Je=y.pos;if(y.eat(92)&&y.eat(117)&&this.regexp_eatFixedHexDigits(y,4)){var rt=y.lastIntValue;if(rt>=56320&&rt<=57343)return y.lastIntValue=(Ce-55296)*1024+(rt-56320)+65536,!0}y.pos=Je,y.lastIntValue=Ce}return!0}if(le&&y.eat(123)&&this.regexp_eatHexDigits(y)&&y.eat(125)&&Nr(y.lastIntValue))return!0;le&&y.raise("Invalid unicode escape"),y.pos=J}return!1};function Nr(y){return y>=0&&y<=1114111}wt.regexp_eatIdentityEscape=function(y){if(y.switchU)return this.regexp_eatSyntaxCharacter(y)?!0:y.eat(47)?(y.lastIntValue=47,!0):!1;var P=y.current();return P!==99&&(!y.switchN||P!==107)?(y.lastIntValue=P,y.advance(),!0):!1},wt.regexp_eatDecimalEscape=function(y){y.lastIntValue=0;var P=y.current();if(P>=49&&P<=57){do y.lastIntValue=10*y.lastIntValue+(P-48),y.advance();while((P=y.current())>=48&&P<=57);return!0}return!1};var Vr=0,In=1,Kn=2;wt.regexp_eatCharacterClassEscape=function(y){var P=y.current();if(gi(P))return y.lastIntValue=-1,y.advance(),In;var J=!1;if(y.switchU&&this.options.ecmaVersion>=9&&((J=P===80)||P===112)){y.lastIntValue=-1,y.advance();var le;if(y.eat(123)&&(le=this.regexp_eatUnicodePropertyValueExpression(y))&&y.eat(125))return J&&le===Kn&&y.raise("Invalid property name"),le;y.raise("Invalid property name")}return Vr};function gi(y){return y===100||y===68||y===115||y===83||y===119||y===87}wt.regexp_eatUnicodePropertyValueExpression=function(y){var P=y.pos;if(this.regexp_eatUnicodePropertyName(y)&&y.eat(61)){var J=y.lastStringValue;if(this.regexp_eatUnicodePropertyValue(y)){var le=y.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(y,J,le),In}}if(y.pos=P,this.regexp_eatLoneUnicodePropertyNameOrValue(y)){var Ce=y.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(y,Ce)}return Vr},wt.regexp_validateUnicodePropertyNameAndValue=function(y,P,J){Ee(y.unicodeProperties.nonBinary,P)||y.raise("Invalid property name"),y.unicodeProperties.nonBinary[P].test(J)||y.raise("Invalid property value")},wt.regexp_validateUnicodePropertyNameOrValue=function(y,P){if(y.unicodeProperties.binary.test(P))return In;if(y.switchV&&y.unicodeProperties.binaryOfStrings.test(P))return Kn;y.raise("Invalid property name")},wt.regexp_eatUnicodePropertyName=function(y){var P=0;for(y.lastStringValue="";_i(P=y.current());)y.lastStringValue+=Re(P),y.advance();return y.lastStringValue!==""};function _i(y){return ur(y)||y===95}wt.regexp_eatUnicodePropertyValue=function(y){var P=0;for(y.lastStringValue="";Gr(P=y.current());)y.lastStringValue+=Re(P),y.advance();return y.lastStringValue!==""};function Gr(y){return _i(y)||ii(y)}wt.regexp_eatLoneUnicodePropertyNameOrValue=function(y){return this.regexp_eatUnicodePropertyValue(y)},wt.regexp_eatCharacterClass=function(y){if(y.eat(91)){var P=y.eat(94),J=this.regexp_classContents(y);return y.eat(93)||y.raise("Unterminated character class"),P&&J===Kn&&y.raise("Negated character class may contain strings"),!0}return!1},wt.regexp_classContents=function(y){return y.current()===93?In:y.switchV?this.regexp_classSetExpression(y):(this.regexp_nonEmptyClassRanges(y),In)},wt.regexp_nonEmptyClassRanges=function(y){for(;this.regexp_eatClassAtom(y);){var P=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassAtom(y)){var J=y.lastIntValue;y.switchU&&(P===-1||J===-1)&&y.raise("Invalid character class"),P!==-1&&J!==-1&&P>J&&y.raise("Range out of order in character class")}}},wt.regexp_eatClassAtom=function(y){var P=y.pos;if(y.eat(92)){if(this.regexp_eatClassEscape(y))return!0;if(y.switchU){var J=y.current();(J===99||tr(J))&&y.raise("Invalid class escape"),y.raise("Invalid escape")}y.pos=P}var le=y.current();return le!==93?(y.lastIntValue=le,y.advance(),!0):!1},wt.regexp_eatClassEscape=function(y){var P=y.pos;if(y.eat(98))return y.lastIntValue=8,!0;if(y.switchU&&y.eat(45))return y.lastIntValue=45,!0;if(!y.switchU&&y.eat(99)){if(this.regexp_eatClassControlLetter(y))return!0;y.pos=P}return this.regexp_eatCharacterClassEscape(y)||this.regexp_eatCharacterEscape(y)},wt.regexp_classSetExpression=function(y){var P=In,J;if(!this.regexp_eatClassSetRange(y))if(J=this.regexp_eatClassSetOperand(y)){J===Kn&&(P=Kn);for(var le=y.pos;y.eatChars([38,38]);){if(y.current()!==38&&(J=this.regexp_eatClassSetOperand(y))){J!==Kn&&(P=In);continue}y.raise("Invalid character in character class")}if(le!==y.pos)return P;for(;y.eatChars([45,45]);)this.regexp_eatClassSetOperand(y)||y.raise("Invalid character in character class");if(le!==y.pos)return P}else y.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(y)){if(J=this.regexp_eatClassSetOperand(y),!J)return P;J===Kn&&(P=Kn)}},wt.regexp_eatClassSetRange=function(y){var P=y.pos;if(this.regexp_eatClassSetCharacter(y)){var J=y.lastIntValue;if(y.eat(45)&&this.regexp_eatClassSetCharacter(y)){var le=y.lastIntValue;return J!==-1&&le!==-1&&J>le&&y.raise("Range out of order in character class"),!0}y.pos=P}return!1},wt.regexp_eatClassSetOperand=function(y){return this.regexp_eatClassSetCharacter(y)?In:this.regexp_eatClassStringDisjunction(y)||this.regexp_eatNestedClass(y)},wt.regexp_eatNestedClass=function(y){var P=y.pos;if(y.eat(91)){var J=y.eat(94),le=this.regexp_classContents(y);if(y.eat(93))return J&&le===Kn&&y.raise("Negated character class may contain strings"),le;y.pos=P}if(y.eat(92)){var Ce=this.regexp_eatCharacterClassEscape(y);if(Ce)return Ce;y.pos=P}return null},wt.regexp_eatClassStringDisjunction=function(y){var P=y.pos;if(y.eatChars([92,113])){if(y.eat(123)){var J=this.regexp_classStringDisjunctionContents(y);if(y.eat(125))return J}else y.raise("Invalid escape");y.pos=P}return null},wt.regexp_classStringDisjunctionContents=function(y){for(var P=this.regexp_classString(y);y.eat(124);)this.regexp_classString(y)===Kn&&(P=Kn);return P},wt.regexp_classString=function(y){for(var P=0;this.regexp_eatClassSetCharacter(y);)P++;return P===1?In:Kn},wt.regexp_eatClassSetCharacter=function(y){var P=y.pos;if(y.eat(92))return this.regexp_eatCharacterEscape(y)||this.regexp_eatClassSetReservedPunctuator(y)?!0:y.eat(98)?(y.lastIntValue=8,!0):(y.pos=P,!1);var J=y.current();return J<0||J===y.lookahead()&&yi(J)||Ni(J)?!1:(y.advance(),y.lastIntValue=J,!0)};function yi(y){return y===33||y>=35&&y<=38||y>=42&&y<=44||y===46||y>=58&&y<=64||y===94||y===96||y===126}function Ni(y){return y===40||y===41||y===45||y===47||y>=91&&y<=93||y>=123&&y<=125}wt.regexp_eatClassSetReservedPunctuator=function(y){var P=y.current();return ri(P)?(y.lastIntValue=P,y.advance(),!0):!1};function ri(y){return y===33||y===35||y===37||y===38||y===44||y===45||y>=58&&y<=62||y===64||y===96||y===126}wt.regexp_eatClassControlLetter=function(y){var P=y.current();return ii(P)||P===95?(y.lastIntValue=P%32,y.advance(),!0):!1},wt.regexp_eatHexEscapeSequence=function(y){var P=y.pos;if(y.eat(120)){if(this.regexp_eatFixedHexDigits(y,2))return!0;y.switchU&&y.raise("Invalid escape"),y.pos=P}return!1},wt.regexp_eatDecimalDigits=function(y){var P=y.pos,J=0;for(y.lastIntValue=0;ii(J=y.current());)y.lastIntValue=10*y.lastIntValue+(J-48),y.advance();return y.pos!==P};function ii(y){return y>=48&&y<=57}wt.regexp_eatHexDigits=function(y){var P=y.pos,J=0;for(y.lastIntValue=0;qr(J=y.current());)y.lastIntValue=16*y.lastIntValue+si(J),y.advance();return y.pos!==P};function qr(y){return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function si(y){return y>=65&&y<=70?10+(y-65):y>=97&&y<=102?10+(y-97):y-48}wt.regexp_eatLegacyOctalEscapeSequence=function(y){if(this.regexp_eatOctalDigit(y)){var P=y.lastIntValue;if(this.regexp_eatOctalDigit(y)){var J=y.lastIntValue;P<=3&&this.regexp_eatOctalDigit(y)?y.lastIntValue=P*64+J*8+y.lastIntValue:y.lastIntValue=P*8+J}else y.lastIntValue=P;return!0}return!1},wt.regexp_eatOctalDigit=function(y){var P=y.current();return tr(P)?(y.lastIntValue=P-48,y.advance(),!0):(y.lastIntValue=0,!1)};function tr(y){return y>=48&&y<=55}wt.regexp_eatFixedHexDigits=function(y,P){var J=y.pos;y.lastIntValue=0;for(var le=0;le<P;++le){var Ce=y.current();if(!qr(Ce))return y.pos=J,!1;y.lastIntValue=16*y.lastIntValue+si(Ce),y.advance()}return!0};var zn=function(P){this.type=P.type,this.value=P.value,this.start=P.start,this.end=P.end,P.options.locations&&(this.loc=new it(P,P.startLoc,P.endLoc)),P.options.ranges&&(this.range=[P.start,P.end])},Gt=f.prototype;Gt.next=function(y){!y&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new zn(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Gt.getToken=function(){return this.next(),new zn(this)},typeof Symbol<"u"&&(Gt[Symbol.iterator]=function(){var y=this;return{next:function(){var P=y.getToken();return{done:P.type===E.eof,value:P}}}}),Gt.nextToken=function(){var y=this.curContext();if((!y||!y.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(E.eof);if(y.override)return y.override(this);this.readToken(this.fullCharCodeAtPos())},Gt.readToken=function(y){return v(y,this.options.ecmaVersion>=6)||y===92?this.readWord():this.getTokenFromCode(y)},Gt.fullCharCodeAtPos=function(){var y=this.input.charCodeAt(this.pos);if(y<=55295||y>=56320)return y;var P=this.input.charCodeAt(this.pos+1);return P<=56319||P>=57344?y:(y<<10)+P-56613888},Gt.skipBlockComment=function(){var y=this.options.onComment&&this.curPosition(),P=this.pos,J=this.input.indexOf("*/",this.pos+=2);if(J===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=J+2,this.options.locations)for(var le=void 0,Ce=P;(le=W(this.input,Ce,this.pos))>-1;)++this.curLine,Ce=this.lineStart=le;this.options.onComment&&this.options.onComment(!0,this.input.slice(P+2,J),P,this.pos,y,this.curPosition())},Gt.skipLineComment=function(y){for(var P=this.pos,J=this.options.onComment&&this.curPosition(),le=this.input.charCodeAt(this.pos+=y);this.pos<this.input.length&&!R(le);)le=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(P+y,this.pos),P,this.pos,J,this.curPosition())},Gt.skipSpace=function(){e:for(;this.pos<this.input.length;){var y=this.input.charCodeAt(this.pos);switch(y){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(y>8&&y<14||y>=5760&&ce.test(String.fromCharCode(y)))++this.pos;else break e}}},Gt.finishToken=function(y,P){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var J=this.type;this.type=y,this.value=P,this.updateContext(J)},Gt.readToken_dot=function(){var y=this.input.charCodeAt(this.pos+1);if(y>=48&&y<=57)return this.readNumber(!0);var P=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&y===46&&P===46?(this.pos+=3,this.finishToken(E.ellipsis)):(++this.pos,this.finishToken(E.dot))},Gt.readToken_slash=function(){var y=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):y===61?this.finishOp(E.assign,2):this.finishOp(E.slash,1)},Gt.readToken_mult_modulo_exp=function(y){var P=this.input.charCodeAt(this.pos+1),J=1,le=y===42?E.star:E.modulo;return this.options.ecmaVersion>=7&&y===42&&P===42&&(++J,le=E.starstar,P=this.input.charCodeAt(this.pos+2)),P===61?this.finishOp(E.assign,J+1):this.finishOp(le,J)},Gt.readToken_pipe_amp=function(y){var P=this.input.charCodeAt(this.pos+1);if(P===y){if(this.options.ecmaVersion>=12){var J=this.input.charCodeAt(this.pos+2);if(J===61)return this.finishOp(E.assign,3)}return this.finishOp(y===124?E.logicalOR:E.logicalAND,2)}return P===61?this.finishOp(E.assign,2):this.finishOp(y===124?E.bitwiseOR:E.bitwiseAND,1)},Gt.readToken_caret=function(){var y=this.input.charCodeAt(this.pos+1);return y===61?this.finishOp(E.assign,2):this.finishOp(E.bitwiseXOR,1)},Gt.readToken_plus_min=function(y){var P=this.input.charCodeAt(this.pos+1);return P===y?P===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||U.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(E.incDec,2):P===61?this.finishOp(E.assign,2):this.finishOp(E.plusMin,1)},Gt.readToken_lt_gt=function(y){var P=this.input.charCodeAt(this.pos+1),J=1;return P===y?(J=y===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+J)===61?this.finishOp(E.assign,J+1):this.finishOp(E.bitShift,J)):P===33&&y===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(P===61&&(J=2),this.finishOp(E.relational,J))},Gt.readToken_eq_excl=function(y){var P=this.input.charCodeAt(this.pos+1);return P===61?this.finishOp(E.equality,this.input.charCodeAt(this.pos+2)===61?3:2):y===61&&P===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(E.arrow)):this.finishOp(y===61?E.eq:E.prefix,1)},Gt.readToken_question=function(){var y=this.options.ecmaVersion;if(y>=11){var P=this.input.charCodeAt(this.pos+1);if(P===46){var J=this.input.charCodeAt(this.pos+2);if(J<48||J>57)return this.finishOp(E.questionDot,2)}if(P===63){if(y>=12){var le=this.input.charCodeAt(this.pos+2);if(le===61)return this.finishOp(E.assign,3)}return this.finishOp(E.coalesce,2)}}return this.finishOp(E.question,1)},Gt.readToken_numberSign=function(){var y=this.options.ecmaVersion,P=35;if(y>=13&&(++this.pos,P=this.fullCharCodeAtPos(),v(P,!0)||P===92))return this.finishToken(E.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Re(P)+"'")},Gt.getTokenFromCode=function(y){switch(y){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(E.parenL);case 41:return++this.pos,this.finishToken(E.parenR);case 59:return++this.pos,this.finishToken(E.semi);case 44:return++this.pos,this.finishToken(E.comma);case 91:return++this.pos,this.finishToken(E.bracketL);case 93:return++this.pos,this.finishToken(E.bracketR);case 123:return++this.pos,this.finishToken(E.braceL);case 125:return++this.pos,this.finishToken(E.braceR);case 58:return++this.pos,this.finishToken(E.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(E.backQuote);case 48:var P=this.input.charCodeAt(this.pos+1);if(P===120||P===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(P===111||P===79)return this.readRadixNumber(8);if(P===98||P===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(y);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(y);case 124:case 38:return this.readToken_pipe_amp(y);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(y);case 60:case 62:return this.readToken_lt_gt(y);case 61:case 33:return this.readToken_eq_excl(y);case 63:return this.readToken_question();case 126:return this.finishOp(E.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Re(y)+"'")},Gt.finishOp=function(y,P){var J=this.input.slice(this.pos,this.pos+P);return this.pos+=P,this.finishToken(y,J)},Gt.readRegexp=function(){for(var y,P,J=this.pos;;){this.pos>=this.input.length&&this.raise(J,"Unterminated regular expression");var le=this.input.charAt(this.pos);if(U.test(le)&&this.raise(J,"Unterminated regular expression"),y)y=!1;else{if(le==="[")P=!0;else if(le==="]"&&P)P=!1;else if(le==="/"&&!P)break;y=le==="\\"}++this.pos}var Ce=this.input.slice(J,this.pos);++this.pos;var Je=this.pos,rt=this.readWord1();this.containsEsc&&this.unexpected(Je);var xt=this.regexpState||(this.regexpState=new Nn(this));xt.reset(J,Ce,rt),this.validateRegExpFlags(xt),this.validateRegExpPattern(xt);var _t=null;try{_t=new RegExp(Ce,rt)}catch{}return this.finishToken(E.regexp,{pattern:Ce,flags:rt,value:_t})},Gt.readInt=function(y,P,J){for(var le=this.options.ecmaVersion>=12&&P===void 0,Ce=J&&this.input.charCodeAt(this.pos)===48,Je=this.pos,rt=0,xt=0,_t=0,Qt=P??1/0;_t<Qt;++_t,++this.pos){var sn=this.input.charCodeAt(this.pos),An=void 0;if(le&&sn===95){Ce&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),xt===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),_t===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),xt=sn;continue}if(sn>=97?An=sn-97+10:sn>=65?An=sn-65+10:sn>=48&&sn<=57?An=sn-48:An=1/0,An>=y)break;xt=sn,rt=rt*y+An}return le&&xt===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Je||P!=null&&this.pos-Je!==P?null:rt};function dr(y,P){return P?parseInt(y,8):parseFloat(y.replace(/_/g,""))}function kn(y){return typeof BigInt!="function"?null:BigInt(y.replace(/_/g,""))}Gt.readRadixNumber=function(y){var P=this.pos;this.pos+=2;var J=this.readInt(y);return J==null&&this.raise(this.start+2,"Expected number in radix "+y),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(J=kn(this.input.slice(P,this.pos)),++this.pos):v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(E.num,J)},Gt.readNumber=function(y){var P=this.pos;!y&&this.readInt(10,void 0,!0)===null&&this.raise(P,"Invalid number");var J=this.pos-P>=2&&this.input.charCodeAt(P)===48;J&&this.strict&&this.raise(P,"Invalid number");var le=this.input.charCodeAt(this.pos);if(!J&&!y&&this.options.ecmaVersion>=11&&le===110){var Ce=kn(this.input.slice(P,this.pos));return++this.pos,v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(E.num,Ce)}J&&/[89]/.test(this.input.slice(P,this.pos))&&(J=!1),le===46&&!J&&(++this.pos,this.readInt(10),le=this.input.charCodeAt(this.pos)),(le===69||le===101)&&!J&&(le=this.input.charCodeAt(++this.pos),(le===43||le===45)&&++this.pos,this.readInt(10)===null&&this.raise(P,"Invalid number")),v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Je=dr(this.input.slice(P,this.pos),J);return this.finishToken(E.num,Je)},Gt.readCodePoint=function(){var y=this.input.charCodeAt(this.pos),P;if(y===123){this.options.ecmaVersion<6&&this.unexpected();var J=++this.pos;P=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,P>1114111&&this.invalidStringToken(J,"Code point out of bounds")}else P=this.readHexChar(4);return P},Gt.readString=function(y){for(var P="",J=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var le=this.input.charCodeAt(this.pos);if(le===y)break;le===92?(P+=this.input.slice(J,this.pos),P+=this.readEscapedChar(!1),J=this.pos):le===8232||le===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(R(le)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return P+=this.input.slice(J,this.pos++),this.finishToken(E.string,P)};var nr={};Gt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(y){if(y===nr)this.readInvalidTemplateToken();else throw y}this.inTemplateElement=!1},Gt.invalidStringToken=function(y,P){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw nr;this.raise(y,P)},Gt.readTmplToken=function(){for(var y="",P=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var J=this.input.charCodeAt(this.pos);if(J===96||J===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===E.template||this.type===E.invalidTemplate)?J===36?(this.pos+=2,this.finishToken(E.dollarBraceL)):(++this.pos,this.finishToken(E.backQuote)):(y+=this.input.slice(P,this.pos),this.finishToken(E.template,y));if(J===92)y+=this.input.slice(P,this.pos),y+=this.readEscapedChar(!0),P=this.pos;else if(R(J)){switch(y+=this.input.slice(P,this.pos),++this.pos,J){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:y+=`
`;break;default:y+=String.fromCharCode(J);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),P=this.pos}else++this.pos}},Gt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(E.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Gt.readEscapedChar=function(y){var P=this.input.charCodeAt(++this.pos);switch(++this.pos,P){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Re(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),y){var J=this.pos-1;this.invalidStringToken(J,"Invalid escape sequence in template string")}default:if(P>=48&&P<=55){var le=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Ce=parseInt(le,8);return Ce>255&&(le=le.slice(0,-1),Ce=parseInt(le,8)),this.pos+=le.length-1,P=this.input.charCodeAt(this.pos),(le!=="0"||P===56||P===57)&&(this.strict||y)&&this.invalidStringToken(this.pos-1-le.length,y?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Ce)}return R(P)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(P)}},Gt.readHexChar=function(y){var P=this.pos,J=this.readInt(16,y);return J===null&&this.invalidStringToken(P,"Bad character escape sequence"),J},Gt.readWord1=function(){this.containsEsc=!1;for(var y="",P=!0,J=this.pos,le=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Ce=this.fullCharCodeAtPos();if(w(Ce,le))this.pos+=Ce<=65535?1:2;else if(Ce===92){this.containsEsc=!0,y+=this.input.slice(J,this.pos);var Je=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var rt=this.readCodePoint();(P?v:w)(rt,le)||this.invalidStringToken(Je,"Invalid Unicode escape"),y+=Re(rt),J=this.pos}else break;P=!1}return y+this.input.slice(J,this.pos)},Gt.readWord=function(){var y=this.readWord1(),P=E.name;return this.keywords.test(y)&&(P=O[y]),this.finishToken(P,y)};var Or="8.15.0";f.acorn={Parser:f,version:Or,defaultOptions:Ue,Position:Pe,SourceLocation:it,getLineInfo:tt,Node:Ae,TokenType:S,tokTypes:E,keywordTypes:O,TokContext:Z,tokContexts:G,isIdentifierChar:w,isIdentifierStart:v,Token:zn,isNewLine:R,lineBreak:U,lineBreakG:D,nonASCIIwhitespace:ce};function ts(y,P){return f.parse(y,P)}function Br(y,P,J){return f.parseExpressionAt(y,P,J)}function bi(y,P){return f.tokenizer(y,P)}n.Node=Ae,n.Parser=f,n.Position=Pe,n.SourceLocation=it,n.TokContext=Z,n.Token=zn,n.TokenType=S,n.defaultOptions=Ue,n.getLineInfo=tt,n.isIdentifierChar=w,n.isIdentifierStart=v,n.isNewLine=R,n.keywordTypes=O,n.lineBreak=U,n.lineBreakG=D,n.nonASCIIwhitespace=ce,n.parse=ts,n.parseExpressionAt=Br,n.tokContexts=G,n.tokTypes=E,n.tokenizer=bi,n.version=Or})}(Jp,Jp.exports)),Jp.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(t,n){t=t||u1;var r=t.window,i=t.document,s=new function(){var c=/^(statics|enumerable|beans|preserve)$/,f=[],b=f.slice,_=Object.create,C=Object.getOwnPropertyDescriptor,A=Object.defineProperty,T=f.forEach||function(K,V){for(var X=0,B=this.length;X<B;X++)K.call(V,this[X],X,this)},N=function(K,V){for(var X in this)this.hasOwnProperty(X)&&K.call(V,this[X],X,this)},$=Object.assign||function(K){for(var V=1,X=arguments.length;V<X;V++){var B=arguments[V];for(var Z in B)B.hasOwnProperty(Z)&&(K[Z]=B[Z])}return K},F=function(K,V,X){if(K){var B=C(K,"length");(B&&typeof B.value=="number"?T:N).call(K,V,X=X||K)}return X};function Y(K,V,X,B,Z){var G={};function re(ie,be){be=be||(be=C(V,ie))&&(be.get?be:be.value),typeof be=="string"&&be[0]==="#"&&(be=K[be.substring(1)]||be);var Se=typeof be=="function",Ae=be,De=Z||Se&&!be.base?be&&be.get?ie in K:K[ie]:null,we;(!Z||!De)&&(Se&&De&&(be.base=De),Se&&B!==!1&&(we=ie.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(G[we[3].toLowerCase()+we[4]]=we[2]),(!Ae||Se||!Ae.get||typeof Ae.get!="function"||!Q.isPlainObject(Ae))&&(Ae={value:Ae,writable:!0}),(C(K,ie)||{configurable:!0}).configurable&&(Ae.configurable=!0,Ae.enumerable=X??!we),A(K,ie,Ae))}if(V){for(var z in V)V.hasOwnProperty(z)&&!c.test(z)&&re(z);for(var z in G){var ne=G[z],se=K["set"+ne],ue=K["get"+ne]||se&&K["is"+ne];ue&&(B===!0||ue.length===0)&&re(z,{get:ue,set:se})}}return K}function Q(){for(var K=0,V=arguments.length;K<V;K++){var X=arguments[K];X&&$(this,X)}return this}return Y(Q,{inject:function(K){if(K){var V=K.statics===!0?K:K.statics,X=K.beans,B=K.preserve;V!==K&&Y(this.prototype,K,K.enumerable,X,B),Y(this,V,null,X,B)}for(var Z=1,G=arguments.length;Z<G;Z++)this.inject(arguments[Z]);return this},extend:function(){for(var K=this,V,X,B=0,Z,G=arguments.length;B<G&&!(V&&X);B++)Z=arguments[B],V=V||Z.initialize,X=X||Z.prototype;return V=V||function(){K.apply(this,arguments)},X=V.prototype=X||_(this.prototype),A(X,"constructor",{value:V,writable:!0,configurable:!0}),Y(V,this),arguments.length&&this.inject.apply(V,arguments),V.base=K,V}}).inject({enumerable:!1,initialize:Q,set:Q,inject:function(){for(var K=0,V=arguments.length;K<V;K++){var X=arguments[K];X&&Y(this,X,X.enumerable,X.beans,X.preserve)}return this},extend:function(){var K=_(this);return K.inject.apply(K,arguments)},each:function(K,V){return F(this,K,V)},clone:function(){return new this.constructor(this)},statics:{set:$,each:F,create:_,define:A,describe:C,clone:function(K){return $(new K.constructor,K)},isPlainObject:function(K){var V=K!=null&&K.constructor;return V&&(V===Object||V===Q||V.name==="Object")},pick:function(K,V){return K!==n?K:V},slice:function(K,V,X){return b.call(K,V,X)}}})};e.exports=s,s.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(c,f){if(!/^_/.test(f)){var b=typeof c;this.push(f+": "+(b==="number"?h.instance.number(c):b==="string"?"'"+c+"'":c))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(c){return s.importJSON(c,this)},exportJSON:function(c){return s.exportJSON(this,c)},toJSON:function(){return s.serialize(this)},set:function(c,f){return c&&s.filter(this,c,f,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function c(){var f=c.base.apply(this,arguments),b=f.prototype._class;return b&&!s.exports[b]&&(s.exports[b]=f),f},equals:function(c,f){if(c===f)return!0;if(c&&c.equals)return c.equals(f);if(f&&f.equals)return f.equals(c);if(c&&f&&typeof c=="object"&&typeof f=="object"){if(Array.isArray(c)&&Array.isArray(f)){var b=c.length;if(b!==f.length)return!1;for(;b--;)if(!s.equals(c[b],f[b]))return!1}else{var _=Object.keys(c),b=_.length;if(b!==Object.keys(f).length)return!1;for(;b--;){var C=_[b];if(!(f.hasOwnProperty(C)&&s.equals(c[C],f[C])))return!1}}return!0}return!1},read:function(c,f,b,_){if(this===s){var C=this.peek(c,f);return c.__index++,C}var A=this.prototype,T=A._readIndex,N=f||T&&c.__index||0,$=c.length,F=c[N];if(_=_||$-N,F instanceof this||b&&b.readNull&&F==null&&_<=1)return T&&(c.__index=N+1),F&&b&&b.clone?F.clone():F;if(F=s.create(A),T&&(F.__read=!0),F=F.initialize.apply(F,N>0||N+_<$?s.slice(c,N,N+_):c)||F,T){c.__index=N+F.__read;var Y=F.__filtered;Y&&(c.__filtered=Y,F.__filtered=n),F.__read=n}return F},peek:function(c,f){return c[c.__index=f||c.__index||0]},remain:function(c){return c.length-(c.__index||0)},readList:function(c,f,b,_){for(var C=[],A,T=f||0,N=_?T+_:c.length,$=T;$<N;$++)C.push(Array.isArray(A=c[$])?this.read(A,0,b):this.read(c,$,b,1));return C},readNamed:function(c,f,b,_,C){var A=this.getNamed(c,f),T=A!==n;if(T){var N=c.__filtered;if(!N){var $=this.getSource(c);N=c.__filtered=s.create($),N.__unfiltered=$}N[f]=n}return this.read(T?[A]:c,b,_,C)},readSupported:function(c,f){var b=this.getSource(c),_=this,C=!1;return b&&Object.keys(b).forEach(function(A){if(A in f){var T=_.readNamed(c,A);T!==n&&(f[A]=T),C=!0}}),C},getSource:function(c){var f=c.__source;if(f===n){var b=c.length===1&&c[0];f=c.__source=b&&s.isPlainObject(b)?b:null}return f},getNamed:function(c,f){var b=this.getSource(c);if(b)return f?b[f]:c.__filtered||b},hasNamed:function(c,f){return!!this.getNamed(c,f)},filter:function(c,f,b,_){var C;function A(Y){if(!(b&&Y in b)&&!(C&&Y in C)){var Q=f[Y];Q!==n&&(c[Y]=Q)}}if(_){for(var T={},N=0,$,F=_.length;N<F;N++)($=_[N])in f&&(A($),T[$]=!0);C=T}return Object.keys(f.__unfiltered||f).forEach(A),c},isPlainValue:function(c,f){return s.isPlainObject(c)||Array.isArray(c)||f&&typeof c=="string"},serialize:function(c,f,b,_){f=f||{};var C=!_,A;if(C&&(f.formatter=new h(f.precision),_={length:0,definitions:{},references:{},add:function(Q,K){var V="#"+Q._id,X=this.references[V];if(!X){this.length++;var B=K.call(Q),Z=Q._class;Z&&B[0]!==Z&&B.unshift(Z),this.definitions[V]=B,X=this.references[V]=[V]}return X}}),c&&c._serialize){A=c._serialize(f,_);var T=c._class;T&&!c._compactSerialize&&(C||!b)&&A[0]!==T&&A.unshift(T)}else if(Array.isArray(c)){A=[];for(var N=0,$=c.length;N<$;N++)A[N]=s.serialize(c[N],f,b,_)}else if(s.isPlainObject(c)){A={};for(var F=Object.keys(c),N=0,$=F.length;N<$;N++){var Y=F[N];A[Y]=s.serialize(c[Y],f,b,_)}}else typeof c=="number"?A=f.formatter.number(c,f.precision):A=c;return C&&_.length>0?[["dictionary",_.definitions],A]:A},deserialize:function(c,f,b,_,C){var A=c,T=!b,N=T&&c&&c.length&&c[0][0]==="dictionary";if(b=b||{},Array.isArray(c)){var $=c[0],F=$==="dictionary";if(c.length==1&&/^#/.test($))return b.dictionary[$];$=s.exports[$],A=[];for(var Y=$?1:0,Q=c.length;Y<Q;Y++)A.push(s.deserialize(c[Y],f,b,F,N));if($){var K=A;f?A=f($,K,T||C):A=new $(K)}}else if(s.isPlainObject(c)){A={},_&&(b.dictionary=A);for(var V in c)A[V]=s.deserialize(c[V],f,b)}return N?A[1]:A},exportJSON:function(c,f){var b=s.serialize(c,f);return f&&f.asString==!1?b:JSON.stringify(b)},importJSON:function(c,f){return s.deserialize(typeof c=="string"?JSON.parse(c):c,function(b,_,C){var A=C&&f&&f.constructor===b,T=A?f:s.create(b.prototype);if(_.length===1&&T instanceof E&&(A||!(T instanceof D))){var N=_[0];s.isPlainObject(N)&&(N.insert=!1,A&&(_=_.concat([E.INSERT])))}return(A?T.set:b).apply(T,_),A&&(f=null),T})},push:function(c,f){var b=f.length;if(b<4096)c.push.apply(c,f);else{var _=c.length;c.length+=b;for(var C=0;C<b;C++)c[_+C]=f[C]}return c},splice:function(c,f,b,_){var C=f&&f.length,A=b===n;b=A?c.length:b,b>c.length&&(b=c.length);for(var T=0;T<C;T++)f[T]._index=b+T;if(A)return s.push(c,f),[];var N=[b,_];f&&s.push(N,f);for(var $=c.splice.apply(c,N),T=0,F=$.length;T<F;T++)$[T]._index=n;for(var T=b+C,F=c.length;T<F;T++)c[T]._index=T;return $},capitalize:function(c){return c.replace(/\b[a-z]/g,function(f){return f.toUpperCase()})},camelize:function(c){return c.replace(/-(.)/g,function(f,b){return b.toUpperCase()})},hyphenate:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(c,f){if(typeof c!="string")s.each(c,function(A,T){this.on(T,A)},this);else{var b=this._eventTypes,_=b&&b[c],C=this._callbacks=this._callbacks||{};C=C[c]=C[c]||[],C.indexOf(f)===-1&&(C.push(f),_&&_.install&&C.length===1&&_.install.call(this,c))}return this},off:function(c,f){if(typeof c!="string"){s.each(c,function(T,N){this.off(N,T)},this);return}var b=this._eventTypes,_=b&&b[c],C=this._callbacks&&this._callbacks[c],A;return C&&(!f||(A=C.indexOf(f))!==-1&&C.length===1?(_&&_.uninstall&&_.uninstall.call(this,c),delete this._callbacks[c]):A!==-1&&C.splice(A,1)),this},once:function(c,f){return this.on(c,function b(){f.apply(this,arguments),this.off(c,b)})},emit:function(c,f){var b=this._callbacks&&this._callbacks[c];if(!b)return!1;var _=s.slice(arguments,1),C=f&&f.target&&!f.currentTarget;b=b.slice(),C&&(f.currentTarget=this);for(var A=0,T=b.length;A<T;A++)if(b[A].apply(this,_)==!1){f&&f.stop&&f.stop();break}return C&&delete f.currentTarget,!0},responds:function(c){return!!(this._callbacks&&this._callbacks[c])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(c){var f=this._eventTypes,b=this._callbacks,_=c?"install":"uninstall";if(f){for(var C in b)if(b[C].length>0){var A=f[C],T=A&&A[_];T&&T.call(this,C)}}},statics:{inject:function c(f){var b=f._events;if(b){var _={};s.each(b,function(C,A){var T=typeof C=="string",N=T?C:A,$=s.capitalize(N),F=N.substring(2).toLowerCase();_[F]=T?{}:C,N="_"+N,f["get"+$]=function(){return this[N]},f["set"+$]=function(Y){var Q=this[N];Q&&this.off(F,Q),Y&&this.on(F,Y),this[N]=Y}}),f._eventTypes=_}return c.base.apply(this,arguments)}}},o=s.extend({_class:"PaperScope",initialize:function c(){$e=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=c._id++,c._scopes[this._id]=this;var f=c.prototype;if(!this.support){var b=ve.getContext(1,1)||{};f.support={nativeDash:"setLineDash"in b||"mozDash"in b,nativeBlendModes:ye.nativeModes},ve.release(b)}if(!this.agent){var _=t.navigator.userAgent.toLowerCase(),C=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(_)||[])[0],A=C==="darwin"?"mac":C,T=f.agent=f.browser={platform:A};A&&(T[A]=!0),_.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(N,$,F,Y,Q){if(!T.chrome){var K=$==="opera"?Y:/^(node|trident)$/.test($)?Q:F;T.version=K,T.versionNumber=parseFloat(K),$={trident:"msie",jsdom:"node"}[$]||$,T.name=$,T[$]=!0}}),T.chrome&&delete T.webkit,T.atom&&delete T.chrome}},version:"0.12.18",getView:function(){var c=this.project;return c&&c._view},getPaper:function(){return this},execute:function(c,f){var b=$e.PaperScript.execute(c,this,f);return ft.updateFocus(),b},install:function(c){var f=this;s.each(["project","view","tool"],function(_){s.define(c,_,{configurable:!0,get:function(){return f[_]}})});for(var b in this)!/^_/.test(b)&&this[b]&&(c[b]=this[b])},setup:function(c){return $e=this,this.project=new I(c),this},createCanvas:function(c,f){return ve.getCanvas(c,f)},activate:function(){$e=this},clear:function(){for(var c=this.projects,f=this.tools,b=c.length-1;b>=0;b--)c[b].remove();for(var b=f.length-1;b>=0;b--)f[b].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function c(f){return f+="Attribute",function(b,_){return b[f](_)||b[f]("data-paper-"+_)}}return{_scopes:{},_id:0,get:function(f){return this._scopes[f]||null},getAttribute:c("get"),hasAttribute:c("has")}}}),u=s.extend(a,{initialize:function(c){this._scope=$e,this._index=this._scope[this._list].push(this)-1,(c||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var c=this._scope[this._reference];return c&&c!==this&&c.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",c),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),d={findItemBoundsCollisions:function(c,f,b){function _(T){for(var N=new Array(T.length),$=0;$<T.length;$++){var F=T[$].getBounds();N[$]=[F.left,F.top,F.right,F.bottom]}return N}var C=_(c),A=!f||f===c?C:_(f);return this.findBoundsCollisions(C,A,b||0)},findCurveBoundsCollisions:function(c,f,b,_){function C(K){for(var V=Math.min,X=Math.max,B=new Array(K.length),Z=0;Z<K.length;Z++){var G=K[Z];B[Z]=[V(G[0],G[2],G[4],G[6]),V(G[1],G[3],G[5],G[7]),X(G[0],G[2],G[4],G[6]),X(G[1],G[3],G[5],G[7])]}return B}var A=C(c),T=!f||f===c?A:C(f);if(_){for(var N=this.findBoundsCollisions(A,T,b||0,!1,!0),$=this.findBoundsCollisions(A,T,b||0,!0,!0),F=[],Y=0,Q=N.length;Y<Q;Y++)F[Y]={hor:N[Y],ver:$[Y]};return F}return this.findBoundsCollisions(A,T,b||0)},findBoundsCollisions:function(c,f,b,_,C){var A=!f||c===f,T=A?c:c.concat(f),N=c.length,$=T.length;function F(gt,At,kt){for(var at=0,lt=gt.length;at<lt;){var Tt=lt+at>>>1;T[gt[Tt]][At]<kt?at=Tt+1:lt=Tt}return at-1}for(var Y=_?1:0,Q=Y+2,K=_?0:1,V=K+2,X=new Array($),B=0;B<$;B++)X[B]=B;X.sort(function(gt,At){return T[gt][Y]-T[At][Y]});for(var Z=[],G=new Array(N),B=0;B<$;B++){var re=X[B],z=T[re],ne=A?re:re-N,se=re<N,ue=A||!se,ie=se?[]:null;if(Z.length){var be=F(Z,Q,z[Y]-b)+1;if(Z.splice(0,be),A&&C){ie=ie.concat(Z);for(var Se=0;Se<Z.length;Se++){var Ae=Z[Se];G[Ae].push(ne)}}else for(var De=z[V],we=z[K],Se=0;Se<Z.length;Se++){var Ae=Z[Se],Ie=T[Ae],Fe=Ae<N,Ye=A||Ae>=N;(C||(se&&Ye||ue&&Fe)&&De>=Ie[K]-b&&we<=Ie[V]+b)&&(se&&Ye&&ie.push(A?Ae:Ae-N),ue&&Fe&&G[Ae].push(ne))}}if(se&&(c===f&&ie.push(re),G[re]=ie),Z.length){var Ze=z[Q],Qe=F(Z,Q,Ze);Z.splice(Qe+1,0,re)}else Z.push(re)}for(var B=0;B<G.length;B++){var pt=G[B];pt&&pt.sort(function(At,kt){return At-kt})}return G}},h=s.extend({initialize:function(c){this.precision=s.pick(c,5),this.multiplier=Math.pow(10,this.precision)},number:function(c){return this.precision<16?Math.round(c*this.multiplier)/this.multiplier:c},pair:function(c,f,b){return this.number(c)+(b||",")+this.number(f)},point:function(c,f){return this.number(c.x)+(f||",")+this.number(c.y)},size:function(c,f){return this.number(c.width)+(f||",")+this.number(c.height)},rectangle:function(c,f){return this.point(c,f)+(f||",")+this.size(c,f)}});h.instance=new h;var p=new function(){var c=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],f=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],b=Math.abs,_=Math.sqrt,C=Math.pow,A=Math.log2||function(Q){return Math.log(Q)*Math.LOG2E},T=1e-12,N=112e-18;function $(Q,K,V){return Q<K?K:Q>V?V:Q}function F(Q,K,V){function X(be){var Se=be*134217729,Ae=be-Se,De=Ae+Se,we=be-De;return[De,we]}var B=K*K-Q*V,Z=K*K+Q*V;if(b(B)*3<Z){var G=X(Q),re=X(K),z=X(V),ne=K*K,se=re[0]*re[0]-ne+2*re[0]*re[1]+re[1]*re[1],ue=Q*V,ie=G[0]*z[0]-ue+G[0]*z[1]+G[1]*z[0]+G[1]*z[1];B=ne-ue+(se-ie)}return B}function Y(){var Q=Math.max.apply(Math,arguments);return Q&&(Q<1e-8||Q>1e8)?C(2,-Math.round(A(Q))):0}return{EPSILON:T,MACHINE_EPSILON:N,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(_(2)-1)/3,isZero:function(Q){return Q>=-T&&Q<=T},isMachineZero:function(Q){return Q>=-N&&Q<=N},clamp:$,integrate:function(Q,K,V,X){for(var B=c[X-2],Z=f[X-2],G=(V-K)*.5,re=G+K,z=0,ne=X+1>>1,se=X&1?Z[z++]*Q(re):0;z<ne;){var ue=G*B[z];se+=Z[z++]*(Q(re+ue)+Q(re-ue))}return G*se},findRoot:function(Q,K,V,X,B,Z,G){for(var re=0;re<Z;re++){var z=Q(V),ne=z/K(V),se=V-ne;if(b(ne)<G){V=se;break}z>0?(B=V,V=se<=X?(X+B)*.5:se):(X=V,V=se>=B?(X+B)*.5:se)}return $(V,X,B)},solveQuadratic:function(Q,K,V,X,B,Z){var G,re=1/0;if(b(Q)<T){if(b(K)<T)return b(V)<T?-1:0;G=-V/K}else{K*=-.5;var z=F(Q,K,V);if(z&&b(z)<N){var ne=Y(b(Q),b(K),b(V));ne&&(Q*=ne,K*=ne,V*=ne,z=F(Q,K,V))}if(z>=-N){var se=z<0?0:_(z),ue=K+(K<0?-se:se);ue===0?(G=V/Q,re=-G):(G=ue/Q,re=V/ue)}}var ie=0,be=B==null,Se=B-T,Ae=Z+T;return isFinite(G)&&(be||G>Se&&G<Ae)&&(X[ie++]=be?G:$(G,B,Z)),re!==G&&isFinite(re)&&(be||re>Se&&re<Ae)&&(X[ie++]=be?re:$(re,B,Z)),ie},solveCubic:function(Q,K,V,X,B,Z,G){var re=Y(b(Q),b(K),b(V),b(X)),z,ne,se,ue,ie;re&&(Q*=re,K*=re,V*=re,X*=re);function be(Qe){z=Qe;var pt=Q*z;ne=pt+K,se=ne*z+V,ue=(pt+ne)*z+se,ie=se*z+X}if(b(Q)<T)Q=K,ne=V,se=X,z=1/0;else if(b(X)<T)ne=K,se=V,z=0;else{be(-(K/Q)/3);var Se=ie/Q,Ae=C(b(Se),1/3),De=Se<0?-1:1,we=-ue/Q,Ie=we>0?1.324717957244746*Math.max(Ae,_(we)):Ae,Fe=z-De*Ie;if(Fe!==z){do be(Fe),Fe=ue===0?z:z-ie/ue/(1+N);while(De*Fe>De*z);b(Q)*z*z>b(X/z)&&(se=-X/z,ne=(se-V)/z)}}var Ye=p.solveQuadratic(Q,ne,se,B,Z,G),Ze=Z==null;return isFinite(z)&&(Ye===0||Ye>0&&z!==B[0]&&z!==B[1])&&(Ze||z>Z-T&&z<G+T)&&(B[Ye++]=Ze?z:$(z,Z,G)),Ye}}},m={_id:1,_pools:{},get:function(c){if(c){var f=this._pools[c];return f||(f=this._pools[c]={_id:1}),f._id++}else return this._id++}},g=s.extend({_class:"Point",_readIndex:!0,initialize:function(f,b){var _=typeof f,C=this.__read,A=0;if(_==="number"){var T=typeof b=="number";this._set(f,T?b:f),C&&(A=T?2:1)}else if(_==="undefined"||f===null)this._set(0,0),C&&(A=f===null?1:0);else{var N=_==="string"?f.split(/[\s,]+/)||[]:f;A=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"x"in N?this._set(N.x||0,N.y||0):"width"in N?this._set(N.width||0,N.height||0):"angle"in N?(this._set(N.length||0,0),this.setAngle(N.angle||0)):(this._set(0,0),A=0)}return C&&(this.__read=A),this},set:"#initialize",_set:function(c,f){return this.x=c,this.y=f,this},equals:function(c){return this===c||c&&(this.x===c.x&&this.y===c.y||Array.isArray(c)&&this.x===c[0]&&this.y===c[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var c=h.instance;return"{ x: "+c.number(this.x)+", y: "+c.number(this.y)+" }"},_serialize:function(c){var f=c.formatter;return[f.number(this.x),f.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(c){if(this.isZero()){var f=this._angle||0;this._set(Math.cos(f)*c,Math.sin(f)*c)}else{var b=c/this.getLength();p.isZero(b)&&this.getAngle(),this._set(this.x*b,this.y*b)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(c){this.setAngleInRadians.call(this,c*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var c=g.read(arguments),f=this.getLength()*c.getLength();if(p.isZero(f))return NaN;var b=this.dot(c)/f;return Math.acos(b<-1?-1:b>1?1:b)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(c){if(this._angle=c,!this.isZero()){var f=this.getLength();this._set(Math.cos(c)*f,Math.sin(c)*f)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var c=g.read(arguments);return Math.atan2(this.cross(c),this.dot(c))*180/Math.PI},getDistance:function(){var c=arguments,f=g.read(c),b=f.x-this.x,_=f.y-this.y,C=b*b+_*_,A=s.read(c);return A?C:Math.sqrt(C)},normalize:function(c){c===n&&(c=1);var f=this.getLength(),b=f!==0?c/f:0,_=new g(this.x*b,this.y*b);return b>=0&&(_._angle=this._angle),_},rotate:function(c,f){if(c===0)return this.clone();c=c*Math.PI/180;var b=f?this.subtract(f):this,_=Math.sin(c),C=Math.cos(c);return b=new g(b.x*C-b.y*_,b.x*_+b.y*C),f?b.add(f):b},transform:function(c){return c?c._transformPoint(this):this},add:function(){var c=g.read(arguments);return new g(this.x+c.x,this.y+c.y)},subtract:function(){var c=g.read(arguments);return new g(this.x-c.x,this.y-c.y)},multiply:function(){var c=g.read(arguments);return new g(this.x*c.x,this.y*c.y)},divide:function(){var c=g.read(arguments);return new g(this.x/c.x,this.y/c.y)},modulo:function(){var c=g.read(arguments);return new g(this.x%c.x,this.y%c.y)},negate:function(){return new g(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var c=arguments,f=g.read(c),b=s.read(c);return this.getDistance(f)<=b},isCollinear:function(){var c=g.read(arguments);return g.isCollinear(this.x,this.y,c.x,c.y)},isColinear:"#isCollinear",isOrthogonal:function(){var c=g.read(arguments);return g.isOrthogonal(this.x,this.y,c.x,c.y)},isZero:function(){var c=p.isZero;return c(this.x)&&c(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(c){return this.x*(c>1&&c<4?-1:1)>=0&&this.y*(c>2?-1:1)>=0},dot:function(){var c=g.read(arguments);return this.x*c.x+this.y*c.y},cross:function(){var c=g.read(arguments);return this.x*c.y-this.y*c.x},project:function(){var c=g.read(arguments),f=c.isZero()?0:this.dot(c)/c.dot(c);return new g(c.x*f,c.y*f)},statics:{min:function(){var c=arguments,f=g.read(c),b=g.read(c);return new g(Math.min(f.x,b.x),Math.min(f.y,b.y))},max:function(){var c=arguments,f=g.read(c),b=g.read(c);return new g(Math.max(f.x,b.x),Math.max(f.y,b.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(c,f,b,_){return Math.abs(c*_-f*b)<=Math.sqrt((c*c+f*f)*(b*b+_*_))*1e-8},isOrthogonal:function(c,f,b,_){return Math.abs(c*b+f*_)<=Math.sqrt((c*c+f*f)*(b*b+_*_))*1e-8}}},s.each(["round","ceil","floor","abs"],function(c){var f=Math[c];this[c]=function(){return new g(f(this.x),f(this.y))}},{})),v=g.extend({initialize:function(f,b,_,C){this._x=f,this._y=b,this._owner=_,this._setter=C},_set:function(c,f,b){return this._x=c,this._y=f,b||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(c){this._x=c,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(c){this._y=c,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(c){this._owner._changeSelection(this._getSelection(),c)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),w=s.extend({_class:"Size",_readIndex:!0,initialize:function(f,b){var _=typeof f,C=this.__read,A=0;if(_==="number"){var T=typeof b=="number";this._set(f,T?b:f),C&&(A=T?2:1)}else if(_==="undefined"||f===null)this._set(0,0),C&&(A=f===null?1:0);else{var N=_==="string"?f.split(/[\s,]+/)||[]:f;A=1,Array.isArray(N)?this._set(+N[0],+(N.length>1?N[1]:N[0])):"width"in N?this._set(N.width||0,N.height||0):"x"in N?this._set(N.x||0,N.y||0):(this._set(0,0),A=0)}return C&&(this.__read=A),this},set:"#initialize",_set:function(c,f){return this.width=c,this.height=f,this},equals:function(c){return c===this||c&&(this.width===c.width&&this.height===c.height||Array.isArray(c)&&this.width===c[0]&&this.height===c[1])||!1},clone:function(){return new w(this.width,this.height)},toString:function(){var c=h.instance;return"{ width: "+c.number(this.width)+", height: "+c.number(this.height)+" }"},_serialize:function(c){var f=c.formatter;return[f.number(this.width),f.number(this.height)]},add:function(){var c=w.read(arguments);return new w(this.width+c.width,this.height+c.height)},subtract:function(){var c=w.read(arguments);return new w(this.width-c.width,this.height-c.height)},multiply:function(){var c=w.read(arguments);return new w(this.width*c.width,this.height*c.height)},divide:function(){var c=w.read(arguments);return new w(this.width/c.width,this.height/c.height)},modulo:function(){var c=w.read(arguments);return new w(this.width%c.width,this.height%c.height)},negate:function(){return new w(-this.width,-this.height)},isZero:function(){var c=p.isZero;return c(this.width)&&c(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(c,f){return new w(Math.min(c.width,f.width),Math.min(c.height,f.height))},max:function(c,f){return new w(Math.max(c.width,f.width),Math.max(c.height,f.height))},random:function(){return new w(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(c){var f=Math[c];this[c]=function(){return new w(f(this.width),f(this.height))}},{})),S=w.extend({initialize:function(f,b,_,C){this._width=f,this._height=b,this._owner=_,this._setter=C},_set:function(c,f,b){return this._width=c,this._height=f,b||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(c){this._width=c,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(c){this._height=c,this._owner[this._setter](this)}}),x=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(f,b,_,C){var A=arguments,T=typeof f,N;if(T==="number"?(this._set(f,b,_,C),N=4):T==="undefined"||f===null?(this._set(0,0,0,0),N=f===null?1:0):A.length===1&&(Array.isArray(f)?(this._set.apply(this,f),N=1):f.x!==n||f.width!==n?(this._set(f.x||0,f.y||0,f.width||0,f.height||0),N=1):f.from===n&&f.to===n&&(this._set(0,0,0,0),s.readSupported(A,this)&&(N=1))),N===n){var $=g.readNamed(A,"from"),F=s.peek(A),Y=$.x,Q=$.y,K,V;if(F&&F.x!==n||s.hasNamed(A,"to")){var X=g.readNamed(A,"to");K=X.x-Y,V=X.y-Q,K<0&&(Y=X.x,K=-K),V<0&&(Q=X.y,V=-V)}else{var B=w.read(A);K=B.width,V=B.height}this._set(Y,Q,K,V),N=A.__index}var Z=A.__filtered;return Z&&(this.__filtered=Z),this.__read&&(this.__read=N),this},set:"#initialize",_set:function(c,f,b,_){return this.x=c,this.y=f,this.width=b,this.height=_,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(c){var f=s.isPlainValue(c)?x.read(arguments):c;return f===this||f&&this.x===f.x&&this.y===f.y&&this.width===f.width&&this.height===f.height||!1},toString:function(){var c=h.instance;return"{ x: "+c.number(this.x)+", y: "+c.number(this.y)+", width: "+c.number(this.width)+", height: "+c.number(this.height)+" }"},_serialize:function(c){var f=c.formatter;return[f.number(this.x),f.number(this.y),f.number(this.width),f.number(this.height)]},getPoint:function(c){var f=c?g:v;return new f(this.x,this.y,this,"setPoint")},setPoint:function(){var c=g.read(arguments);this.x=c.x,this.y=c.y},getSize:function(c){var f=c?w:S;return new f(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var c=w.read(arguments),f=this._sx,b=this._sy,_=c.width,C=c.height;f&&(this.x+=(this.width-_)*f),b&&(this.y+=(this.height-C)*b),this.width=_,this.height=C,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(c){if(!this._fw){var f=c-this.x;this.width-=this._sx===.5?f*2:f}this.x=c,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(c){if(!this._fh){var f=c-this.y;this.height-=this._sy===.5?f*2:f}this.y=c,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(c){if(!this._fw){var f=c-this.x;this.width=this._sx===.5?f*2:f}this.x=c-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(c){if(!this._fh){var f=c-this.y;this.height=this._sy===.5?f*2:f}this.y=c-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(c){this._fw||this._sx===.5?this.x=c-this.width/2:(this._sx&&(this.x+=(c-this.x)*2*this._sx),this.width=(c-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(c){this._fh||this._sy===.5?this.y=c-this.height/2:(this._sy&&(this.y+=(c-this.y)*2*this._sy),this.height=(c-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(c){var f=c?g:v;return new f(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var c=g.read(arguments);return this.setCenterX(c.x),this.setCenterY(c.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(c){return c&&c.width!==n||(Array.isArray(c)?c:arguments).length===4?this._containsRectangle(x.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(c){var f=c.x,b=c.y;return f>=this.x&&b>=this.y&&f<=this.x+this.width&&b<=this.y+this.height},_containsRectangle:function(c){var f=c.x,b=c.y;return f>=this.x&&b>=this.y&&f+c.width<=this.x+this.width&&b+c.height<=this.y+this.height},intersects:function(){var c=x.read(arguments),f=s.read(arguments)||0;return c.x+c.width>this.x-f&&c.y+c.height>this.y-f&&c.x<this.x+this.width+f&&c.y<this.y+this.height+f},intersect:function(){var c=x.read(arguments),f=Math.max(this.x,c.x),b=Math.max(this.y,c.y),_=Math.min(this.x+this.width,c.x+c.width),C=Math.min(this.y+this.height,c.y+c.height);return new x(f,b,_-f,C-b)},unite:function(){var c=x.read(arguments),f=Math.min(this.x,c.x),b=Math.min(this.y,c.y),_=Math.max(this.x+this.width,c.x+c.width),C=Math.max(this.y+this.height,c.y+c.height);return new x(f,b,_-f,C-b)},include:function(){var c=g.read(arguments),f=Math.min(this.x,c.x),b=Math.min(this.y,c.y),_=Math.max(this.x+this.width,c.x),C=Math.max(this.y+this.height,c.y);return new x(f,b,_-f,C-b)},expand:function(){var c=w.read(arguments),f=c.width,b=c.height;return new x(this.x-f/2,this.y-b/2,this.width+f,this.height+b)},scale:function(c,f){return this.expand(this.width*c-this.width,this.height*(f===n?c:f)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(c,f){var b=c.join(""),_=/^[RL]/.test(b);f>=4&&(c[1]+=_?"Y":"X");var C=c[_?0:1],A=c[_?1:0],T="get"+C,N="get"+A,$="set"+C,F="set"+A,Y="get"+b,Q="set"+b;this[Y]=function(K){var V=K?g:v;return new V(this[T](),this[N](),this,Q)},this[Q]=function(){var K=g.read(arguments);this[$](K.x),this[F](K.y)}},{beans:!0})),k=x.extend({initialize:function(f,b,_,C,A,T){this._set(f,b,_,C,!0),this._owner=A,this._setter=T},_set:function(c,f,b,_,C){return this._x=c,this._y=f,this._width=b,this._height=_,C||this._owner[this._setter](this),this}},new function(){var c=x.prototype;return s.each(["x","y","width","height"],function(f){var b=s.capitalize(f),_="_"+f;this["get"+b]=function(){return this[_]},this["set"+b]=function(C){this[_]=C,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(f){var b="set"+f;this[b]=function(){this._dontNotify=!0,c[b].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(f){var b=this._owner;b._changeSelection&&b._changeSelection(2,f)}}))}),j=s.extend({_class:"Matrix",initialize:function c(f,b){var _=arguments,C=_.length,A=!0;if(C>=6?this._set.apply(this,_):C===1||C===2?f instanceof c?this._set(f._a,f._b,f._c,f._d,f._tx,f._ty,b):Array.isArray(f)?this._set.apply(this,b?f.concat([b]):f):A=!1:C?A=!1:this.reset(),!A)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(c,f,b,_,C,A,T){return this._a=c,this._b=f,this._c=b,this._d=_,this._tx=C,this._ty=A,T||this._changed(),this},_serialize:function(c,f){return s.serialize(this.getValues(),c,!0,f)},_changed:function(){var c=this._owner;c&&(c._applyMatrix?c.transform(null,!0):c._changed(25))},clone:function(){return new j(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(c){return c===this||c&&this._a===c._a&&this._b===c._b&&this._c===c._c&&this._d===c._d&&this._tx===c._tx&&this._ty===c._ty},toString:function(){var c=h.instance;return"[["+[c.number(this._a),c.number(this._c),c.number(this._tx)].join(", ")+"], ["+[c.number(this._b),c.number(this._d),c.number(this._ty)].join(", ")+"]]"},reset:function(c){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,c||this._changed(),this},apply:function(c,f){var b=this._owner;return b?(b.transform(null,s.pick(c,!0),f),this.isIdentity()):!1},translate:function(){var c=g.read(arguments),f=c.x,b=c.y;return this._tx+=f*this._a+b*this._c,this._ty+=f*this._b+b*this._d,this._changed(),this},scale:function(){var c=arguments,f=g.read(c),b=g.read(c,0,{readNull:!0});return b&&this.translate(b),this._a*=f.x,this._b*=f.x,this._c*=f.y,this._d*=f.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(c){c*=Math.PI/180;var f=g.read(arguments,1),b=f.x,_=f.y,C=Math.cos(c),A=Math.sin(c),T=b-b*C+_*A,N=_-b*A-_*C,$=this._a,F=this._b,Y=this._c,Q=this._d;return this._a=C*$+A*Y,this._b=C*F+A*Q,this._c=-A*$+C*Y,this._d=-A*F+C*Q,this._tx+=T*$+N*Y,this._ty+=T*F+N*Q,this._changed(),this},shear:function(){var c=arguments,f=g.read(c),b=g.read(c,0,{readNull:!0});b&&this.translate(b);var _=this._a,C=this._b;return this._a+=f.y*this._c,this._b+=f.y*this._d,this._c+=f.x*_,this._d+=f.x*C,b&&this.translate(b.negate()),this._changed(),this},skew:function(){var c=arguments,f=g.read(c),b=g.read(c,0,{readNull:!0}),_=Math.PI/180,C=new g(Math.tan(f.x*_),Math.tan(f.y*_));return this.shear(C,b)},append:function(c,f){if(c){var b=this._a,_=this._b,C=this._c,A=this._d,T=c._a,N=c._c,$=c._b,F=c._d,Y=c._tx,Q=c._ty;this._a=T*b+$*C,this._c=N*b+F*C,this._b=T*_+$*A,this._d=N*_+F*A,this._tx+=Y*b+Q*C,this._ty+=Y*_+Q*A,f||this._changed()}return this},prepend:function(c,f){if(c){var b=this._a,_=this._b,C=this._c,A=this._d,T=this._tx,N=this._ty,$=c._a,F=c._c,Y=c._b,Q=c._d,K=c._tx,V=c._ty;this._a=$*b+F*_,this._c=$*C+F*A,this._b=Y*b+Q*_,this._d=Y*C+Q*A,this._tx=$*T+F*N+K,this._ty=Y*T+Q*N+V,f||this._changed()}return this},appended:function(c){return this.clone().append(c)},prepended:function(c){return this.clone().prepend(c)},invert:function(){var c=this._a,f=this._b,b=this._c,_=this._d,C=this._tx,A=this._ty,T=c*_-f*b,N=null;return T&&!isNaN(T)&&isFinite(C)&&isFinite(A)&&(this._a=_/T,this._b=-f/T,this._c=-b/T,this._d=c/T,this._tx=(b*A-_*C)/T,this._ty=(f*C-c*A)/T,N=this),N},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new j(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var c=this._a*this._d-this._c*this._b;return c&&!isNaN(c)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(c,f,b){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(c,f,b)},_transformPoint:function(c,f,b){var _=c.x,C=c.y;return f||(f=new g),f._set(_*this._a+C*this._c+this._tx,_*this._b+C*this._d+this._ty,b)},_transformCoordinates:function(c,f,b){for(var _=0,C=2*b;_<C;_+=2){var A=c[_],T=c[_+1];f[_]=A*this._a+T*this._c+this._tx,f[_+1]=A*this._b+T*this._d+this._ty}return f},_transformCorners:function(c){var f=c.x,b=c.y,_=f+c.width,C=b+c.height,A=[f,b,_,b,_,C,f,C];return this._transformCoordinates(A,A,4)},_transformBounds:function(c,f,b){for(var _=this._transformCorners(c),C=_.slice(0,2),A=C.slice(),T=2;T<8;T++){var N=_[T],$=T&1;N<C[$]?C[$]=N:N>A[$]&&(A[$]=N)}return f||(f=new x),f._set(C[0],C[1],A[0]-C[0],A[1]-C[1],b)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(c,f,b){var _=this._a,C=this._b,A=this._c,T=this._d,N=this._tx,$=this._ty,F=_*T-C*A,Y=null;if(F&&!isNaN(F)&&isFinite(N)&&isFinite($)){var Q=c.x-this._tx,K=c.y-this._ty;f||(f=new g),Y=f._set((Q*T-K*A)/F,(K*_-Q*C)/F,b)}return Y},decompose:function(){var c=this._a,f=this._b,b=this._c,_=this._d,C=c*_-f*b,A=Math.sqrt,T=Math.atan2,N=180/Math.PI,$,F,Y;if(c!==0||f!==0){var Q=A(c*c+f*f);$=Math.acos(c/Q)*(f>0?1:-1),F=[Q,C/Q],Y=[T(c*b+f*_,Q*Q),0]}else if(b!==0||_!==0){var K=A(b*b+_*_);$=Math.asin(b/K)*(_>0?1:-1),F=[C/K,K],Y=[0,T(c*b+f*_,K*K)]}else $=0,Y=F=[0,0];return{translation:this.getTranslation(),rotation:$*N,scaling:new g(F),skewing:new g(Y[0]*N,Y[1]*N)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(c){this.isIdentity()||c.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(c){var f=s.capitalize(c),b="_"+c;this["get"+f]=function(){return this[b]},this["set"+f]=function(_){this[b]=_,this._changed()}},{})),O=s.extend({_class:"Line",initialize:function(f,b,_,C,A){var T=!1;arguments.length>=4?(this._px=f,this._py=b,this._vx=_,this._vy=C,T=A):(this._px=f.x,this._py=f.y,this._vx=b.x,this._vy=b.y,T=_),T||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(c,f){return O.intersect(this._px,this._py,this._vx,this._vy,c._px,c._py,c._vx,c._vy,!0,f)},getSide:function(c,f){return O.getSide(this._px,this._py,this._vx,this._vy,c.x,c.y,!0,f)},getDistance:function(c){return Math.abs(this.getSignedDistance(c))},getSignedDistance:function(c){return O.getSignedDistance(this._px,this._py,this._vx,this._vy,c.x,c.y,!0)},isCollinear:function(c){return g.isCollinear(this._vx,this._vy,c._vx,c._vy)},isOrthogonal:function(c){return g.isOrthogonal(this._vx,this._vy,c._vx,c._vy)},statics:{intersect:function(c,f,b,_,C,A,T,N,$,F){$||(b-=c,_-=f,T-=C,N-=A);var Y=b*N-_*T;if(!p.isMachineZero(Y)){var Q=c-C,K=f-A,V=(T*K-N*Q)/Y,X=(b*K-_*Q)/Y,B=1e-12,Z=-B,G=1+B;if(F||Z<V&&V<G&&Z<X&&X<G)return F||(V=V<=0?0:V>=1?1:V),new g(c+V*b,f+V*_)}},getSide:function(c,f,b,_,C,A,T,N){T||(b-=c,_-=f);var $=C-c,F=A-f,Y=$*_-F*b;return!N&&p.isMachineZero(Y)&&(Y=($*b+$*b)/(b*b+_*_),Y>=0&&Y<=1&&(Y=0)),Y<0?-1:Y>0?1:0},getSignedDistance:function(c,f,b,_,C,A,T){return T||(b-=c,_-=f),b===0?_>0?C-c:c-C:_===0?b<0?A-f:f-A:((C-c)*_-(A-f)*b)/(_>b?_*Math.sqrt(1+b*b/(_*_)):b*Math.sqrt(1+_*_/(b*b)))},getDistance:function(c,f,b,_,C,A,T){return Math.abs(O.getSignedDistance(c,f,b,_,C,A,T))}}}),I=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(f){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new oe(null,null,this),this._view=ft.create(this,f||ve.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(c,f){return s.serialize(this._children,c,!0,f)},_changed:function(c,f){if(c&1){var b=this._view;b&&(b._needsUpdate=!0,!b._requested&&b._autoUpdate&&b.requestUpdate())}var _=this._changes;if(_&&f){var C=this._changesById,A=f._id,T=C[A];T?T.flags|=c:_.push(C[A]={item:f,flags:c})}},clear:function(){for(var c=this._children,f=c.length-1;f>=0;f--)c[f].remove()},isEmpty:function(){return!this._children.length},remove:function c(){return c.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(c){this._currentStyle.set(c)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new D({project:this,insert:!0})},getSymbolDefinitions:function(){var c=[],f={};return this.getItems({class:ce,match:function(b){var _=b._definition,C=_._id;return f[C]||(f[C]=!0,c.push(_)),!1}}),c},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var c=this._selectionItems,f=[];for(var b in c){var _=c[b],C=_._selection;C&1&&_.isInserted()?f.push(_):C||this._updateSelection(_)}return f},_updateSelection:function(c){var f=c._id,b=this._selectionItems;c._selection?b[f]!==c&&(this._selectionCount++,b[f]=c):b[f]===c&&(this._selectionCount--,delete b[f])},selectAll:function(){for(var c=this._children,f=0,b=c.length;f<b;f++)c[f].setFullySelected(!0)},deselectAll:function(){var c=this._selectionItems;for(var f in c)c[f].setFullySelected(!1)},addLayer:function(c){return this.insertLayer(n,c)},insertLayer:function(c,f){if(f instanceof D){f._remove(!1,!0),s.splice(this._children,[f],c,0),f._setProject(this,!0);var b=f._name;b&&f.setName(b),this._changes&&f._changed(5),this._activeLayer||(this._activeLayer=f)}else f=null;return f},_insertItem:function(c,f,b){return f=this.insertLayer(c,f)||(this._activeLayer||this._insertItem(n,new D(E.NO_INSERT),!0)).insertChild(c,f),b&&f.activate&&f.activate(),f},getItems:function(c){return E._getItems(this,c)},getItem:function(c){return E._getItems(this,c,null,null,!0)[0]||null},importJSON:function(c){this.activate();var f=this._activeLayer;return s.importJSON(c,f&&f.isEmpty()&&f)},removeOn:function(c){var f=this._removeSets;if(f){c==="mouseup"&&(f.mousedrag=null);var b=f[c];if(b){for(var _ in b){var C=b[_];for(var A in f){var T=f[A];T&&T!=b&&delete T[C._id]}C.remove()}f[c]=null}}},draw:function(c,f,b){this._updateVersion++,c.save(),f.applyToContext(c);for(var _=this._children,C=new s({offset:new g(0,0),pixelRatio:b,viewMatrix:f.isIdentity()?null:f,matrices:[new j],updateMatrix:!0}),A=0,T=_.length;A<T;A++)_[A].draw(c,C);if(c.restore(),this._selectionCount>0){c.save(),c.strokeWidth=1;var N=this._selectionItems,$=this._scope.settings.handleSize,F=this._updateVersion;for(var Y in N)N[Y]._drawSelection(c,f,$,N,F);c.restore()}}}),E=s.extend(a,{statics:{extend:function c(f){return f._serializeFields&&(f._serializeFields=s.set({},this.prototype._serializeFields,f._serializeFields)),c.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new j,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var c=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(c,function(f){this._events[f]={install:function(b){this.getView()._countItemEvent(b,1)},uninstall:function(b){this.getView()._countItemEvent(b,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:c}})},{initialize:function(){},_initialize:function(c,f){var b=c&&s.isPlainObject(c),_=b&&c.internal===!0,C=this._matrix=new j,A=b&&c.project||$e.project,T=$e.settings;return this._id=_?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&T.applyMatrix,f&&C.translate(f),C._owner=this,this._style=new oe(A._currentStyle,this,A),_||b&&c.insert==!1||!T.insertItems&&!(b&&c.insert==!0)?this._setProject(A):(b&&c.parent||A)._insertItem(n,this,!0),b&&c!==E.NO_INSERT&&c!==E.INSERT&&this.set(c,{internal:!0,insert:!0,project:!0,parent:!0}),b},_serialize:function(c,f){var b={},_=this;function C(A){for(var T in A){var N=_[T];s.equals(N,T==="leading"?A.fontSize*1.2:A[T])||(b[T]=s.serialize(N,c,T!=="data",f))}}return C(this._serializeFields),this instanceof U||C(this._style._defaults),[this._class,b]},_changed:function(c){var f=this._symbol,b=this._parent||f,_=this._project;c&8&&(this._bounds=this._position=this._decomposed=n),c&16&&(this._globalMatrix=n),b&&c&72&&E._clearBoundsCache(b),c&2&&E._clearBoundsCache(this),_&&_._changed(c,this),f&&f._changed(c)},getId:function(){return this._id},getName:function(){return this._name},setName:function(c){if(this._name&&this._removeNamed(),c===+c+"")throw new Error("Names consisting only of numbers are not supported.");var f=this._getOwner();if(c&&f){var b=f._children,_=f._namedChildren;(_[c]=_[c]||[]).push(this),c in b||(b[c]=this)}this._name=c||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(c){this.getStyle().set(c)}},s.each(["locked","visible","blendMode","opacity","guide"],function(c){var f=s.capitalize(c),b="_"+c,_={locked:256,visible:265};this["get"+f]=function(){return this[b]},this["set"+f]=function(C){C!=this[b]&&(this[b]=C,this._changed(_[c]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(c){if(c!==this._selection){this._selection=c;var f=this._project;f&&(f._updateSelection(this),this._changed(257))}},_changeSelection:function(c,f){var b=this._selection;this.setSelection(f?b|c:b&~c)},isSelected:function(){if(this._selectChildren){for(var c=this._children,f=0,b=c.length;f<b;f++)if(c[f].isSelected())return!0}return!!(this._selection&1)},setSelected:function(c){if(this._selectChildren)for(var f=this._children,b=0,_=f.length;b<_;b++)f[b].setSelected(c);this._changeSelection(1,c)},isFullySelected:function(){var c=this._children,f=!!(this._selection&1);if(c&&f){for(var b=0,_=c.length;b<_;b++)if(!c[b].isFullySelected())return!1;return!0}return f},setFullySelected:function(c){var f=this._children;if(f)for(var b=0,_=f.length;b<_;b++)f[b].setFullySelected(c);this._changeSelection(1,c)},isClipMask:function(){return this._clipMask},setClipMask:function(c){this._clipMask!=(c=!!c)&&(this._clipMask=c,c&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(c){this._data=c},getPosition:function(c){var f=c?g:v,b=this._position||(this._position=this._getPositionFromBounds());return new f(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(c){return this._pivot?this._matrix._transformPoint(this._pivot):(c||this.getBounds()).getCenter(!0)},getPivot:function(){var c=this._pivot;return c?new v(c.x,c.y,this,"setPivot"):null},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(c,f){this[f]=function(b){return this.getBounds(b,c)}},{beans:!0,getBounds:function(c,f){var b=f||c instanceof j,_=s.set({},b?f:c,this._boundsOptions);(!_.stroke||this.getStrokeScaling())&&(_.cacheItem=this);var C=this._getCachedBounds(b&&c,_).rect;return arguments.length?C:new k(C.x,C.y,C.width,C.height,this,"setBounds")},setBounds:function(){var c=x.read(arguments),f=this.getBounds(),b=this._matrix,_=new j,C=c.getCenter();_.translate(C),(c.width!=f.width||c.height!=f.height)&&(b.isInvertible()||(b.set(b._backup||new j().translate(b.getTranslation())),f=this.getBounds()),_.scale(f.width!==0?c.width/f.width:0,f.height!==0?c.height/f.height:0)),C=f.getCenter(),_.translate(-C.x,-C.y),this.transform(_)},_getBounds:function(c,f){var b=this._children;return!b||!b.length?new x:(E._updateBoundsCache(this,f.cacheItem),E._getBounds(b,c,f))},_getBoundsCacheKey:function(c,f){return[c.stroke?1:0,c.handle?1:0,f?1:0].join("")},_getCachedBounds:function(c,f,b){c=c&&c._orNullIfIdentity();var _=f.internal&&!b,C=f.cacheItem,A=_?null:this._matrix._orNullIfIdentity(),T=C&&(!c||c.equals(A))&&this._getBoundsCacheKey(f,_),N=this._bounds;if(E._updateBoundsCache(this._parent||this._symbol,C),T&&N&&T in N){var $=N[T];return{rect:$.rect.clone(),nonscaling:$.nonscaling}}var F=this._getBounds(c||A,f),Y=F.rect||F,Q=this._style,K=F.nonscaling||Q.hasStroke()&&!Q.getStrokeScaling();if(T){N||(this._bounds=N={});var $=N[T]={rect:Y.clone(),nonscaling:K,internal:_}}return{rect:Y,nonscaling:K}},_getStrokeMatrix:function(c,f){var b=this.getStrokeScaling()?null:f&&f.internal?this:this._parent||this._symbol&&this._symbol._item,_=b?b.getViewMatrix().invert():c;return _&&_._shiftless()},statics:{_updateBoundsCache:function(c,f){if(c&&f){var b=f._id,_=c._boundsCache=c._boundsCache||{ids:{},list:[]};_.ids[b]||(_.list.push(f),_.ids[b]=f)}},_clearBoundsCache:function(c){var f=c._boundsCache;if(f){c._bounds=c._position=c._boundsCache=n;for(var b=0,_=f.list,C=_.length;b<C;b++){var A=_[b];A!==c&&(A._bounds=A._position=n,A._boundsCache&&E._clearBoundsCache(A))}}},_getBounds:function(c,f,b){var _=1/0,C=-_,A=_,T=C,N=!1;b=b||{};for(var $=0,F=c.length;$<F;$++){var Y=c[$];if(Y._visible&&!Y.isEmpty(!0)){var Q=Y._getCachedBounds(f&&f.appended(Y._matrix),b,!0),K=Q.rect;_=Math.min(K.x,_),A=Math.min(K.y,A),C=Math.max(K.x+K.width,C),T=Math.max(K.y+K.height,T),Q.nonscaling&&(N=!0)}}return{rect:isFinite(_)?new x(_,A,C-_,T-A):new x,nonscaling:N}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var c=this._decompose();return c?c.rotation:0},setRotation:function(c){var f=this.getRotation();if(f!=null&&c!=null){var b=this._decomposed;this.rotate(c-f),b&&(b.rotation=c,this._decomposed=b)}},getScaling:function(){var c=this._decompose(),f=c&&c.scaling;return new v(f?f.x:1,f?f.y:1,this,"setScaling")},setScaling:function(){var c=this.getScaling(),f=g.read(arguments,0,{clone:!0,readNull:!0});if(c&&f&&!c.equals(f)){var b=this.getRotation(),_=this._decomposed,C=new j,A=p.isZero;if(A(c.x)||A(c.y))C.translate(_.translation),b&&C.rotate(b),C.scale(f.x,f.y),this._matrix.set(C);else{var T=this.getPosition(!0);C.translate(T),b&&C.rotate(b),C.scale(f.x/c.x,f.y/c.y),b&&C.rotate(-b),C.translate(T.negate()),this.transform(C)}_&&(_.scaling=f,this._decomposed=_)}},getMatrix:function(){return this._matrix},setMatrix:function(){var c=this._matrix;c.set.apply(c,arguments)},getGlobalMatrix:function(c){var f=this._globalMatrix;if(f)for(var b=this._parent,_=[];b;){if(!b._globalMatrix){f=null;for(var C=0,A=_.length;C<A;C++)_[C]._globalMatrix=null;break}_.push(b),b=b._parent}if(!f){f=this._globalMatrix=this._matrix.clone();var b=this._parent;b&&f.prepend(b.getGlobalMatrix(!0))}return c?f:f.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(c){(this._applyMatrix=this._canApplyMatrix&&!!c)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(c,f){if(this._project!==c){this._project&&this._installEvents(!1),this._project=c;for(var b=this._children,_=0,C=b&&b.length;_<C;_++)b[_]._setProject(c);f=!0}f&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function c(f){c.base.call(this,f);for(var b=this._children,_=0,C=b&&b.length;_<C;_++)b[_]._installEvents(f)},getLayer:function(){for(var c=this;c=c._parent;)if(c instanceof D)return c;return null},getParent:function(){return this._parent},setParent:function(c){return c.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(c){this.removeChildren(),this.addChildren(c)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var c=this._getOwner();return c&&c._children[this._index+1]||null},getPreviousSibling:function(){var c=this._getOwner();return c&&c._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(c){var f=this._parent,b=f&&f._children;b&&f.insertChildren(c in b?c:n,[this])},equals:function(c){return c===this||c&&this._class===c._class&&this._style.equals(c._style)&&this._matrix.equals(c._matrix)&&this._locked===c._locked&&this._visible===c._visible&&this._blendMode===c._blendMode&&this._opacity===c._opacity&&this._clipMask===c._clipMask&&this._guide===c._guide&&this._equals(c)||!1},_equals:function(c){return s.equals(this._children,c._children)},clone:function(c){var f=new this.constructor(E.NO_INSERT),b=this._children,_=s.pick(c?c.insert:n,c===n||c===!0),C=s.pick(c?c.deep:n,!0);b&&f.copyAttributes(this),(!b||C)&&f.copyContent(this),b||f.copyAttributes(this),_&&f.insertAbove(this);var A=this._name,T=this._parent;if(A&&T){for(var b=T._children,N=A,$=1;b[A];)A=N+" "+$++;A!==N&&f.setName(A)}return f},copyContent:function(c){for(var f=c._children,b=0,_=f&&f.length;b<_;b++)this.addChild(f[b].clone(!1),!0)},copyAttributes:function(c,f){this.setStyle(c._style);for(var b=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],_=0,C=b.length;_<C;_++){var A=b[_];c.hasOwnProperty(A)&&(this[A]=c[A])}f||this._matrix.set(c._matrix,!0),this.setApplyMatrix(c._applyMatrix),this.setPivot(c._pivot),this.setSelection(c._selection);var T=c._data,N=c._name;this._data=T?s.clone(T):null,N&&this.setName(N)},rasterize:function(c,f){var b,_,C;s.isPlainObject(c)?(b=c.resolution,_=c.insert,C=c.raster):(b=c,_=f),C||(C=new W(E.NO_INSERT));var A=this.getStrokeBounds(),T=(b||this.getView().getResolution())/72,N=A.getTopLeft().floor(),$=A.getBottomRight().ceil(),F=new w($.subtract(N)),Y=F.multiply(T);if(C.setSize(Y,!0),!Y.isZero()){var Q=C.getContext(!0),K=new j().scale(T).translate(N.negate());Q.save(),K.applyToContext(Q),this.draw(Q,new s({matrices:[K]})),Q.restore()}return C._matrix.set(new j().translate(N.add(F.divide(2))).scale(1/T)),(_===n||_)&&C.insertAbove(this),C},contains:function(){var c=this._matrix;return c.isInvertible()&&!!this._contains(c._inverseTransform(g.read(arguments)))},_contains:function(c){var f=this._children;if(f){for(var b=f.length-1;b>=0;b--)if(f[b].contains(c))return!0;return!1}return c.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new xe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(c,f){return c instanceof E?this._asPathItem().getIntersections(c._asPathItem(),null,f,!0).length>0:!1}},new function(){function c(){var _=arguments;return this._hitTest(g.read(_),me.getOptions(_))}function f(){var _=arguments,C=g.read(_),A=me.getOptions(_),T=[];return this._hitTest(C,new s({all:T},A)),T}function b(_,C,A,T){var N=this._children;if(N)for(var $=N.length-1;$>=0;$--){var F=N[$],Y=F!==T&&F._hitTest(_,C,A);if(Y&&!C.all)return Y}return null}return I.inject({hitTest:c,hitTestAll:f,_hitTest:b}),{hitTest:c,hitTestAll:f,_hitTestChildren:b}},{_hitTest:function(c,f,b){if(this._locked||!this._visible||this._guide&&!f.guides||this.isEmpty())return null;var _=this._matrix,C=b?b.appended(_):this.getGlobalMatrix().prepend(this.getView()._matrix),A=Math.max(f.tolerance,1e-12),T=f._tolerancePadding=new w(xe._getStrokePadding(A,_._shiftless().invert()));if(c=_._inverseTransform(c),!c||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(T.multiply(2))._containsPoint(c))return null;var N=!(f.guides&&!this._guide||f.selected&&!this.isSelected()||f.type&&f.type!==s.hyphenate(this._class)||f.class&&!(this instanceof f.class)),$=f.match,F=this,Y,Q;function K(z){return z&&$&&!$(z)&&(z=null),z&&f.all&&f.all.push(z),z}function V(z,ne){var se=ne?Y["get"+ne]():F.getPosition();if(c.subtract(se).divide(T).length<=1)return new me(z,F,{name:ne?s.hyphenate(ne):z,point:se})}var X=f.position,B=f.center,Z=f.bounds;if(N&&this._parent&&(X||B||Z)){if((B||Z)&&(Y=this.getInternalBounds()),Q=X&&V("position")||B&&V("center","Center"),!Q&&Z)for(var G=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],re=0;re<8&&!Q;re++)Q=V("bounds",G[re]);Q=K(Q)}return Q||(Q=this._hitTestChildren(c,f,C)||N&&K(this._hitTestSelf(c,f,C,this.getStrokeScaling()?null:C._shiftless().invert()))||null),Q&&Q.point&&(Q.point=_.transform(Q.point)),Q},_hitTestSelf:function(c,f){if(f.fill&&this.hasFill()&&this._contains(c))return new me("fill",this)},matches:function(c,f){function b(T,N){for(var $ in T)if(T.hasOwnProperty($)){var F=T[$],Y=N[$];if(s.isPlainObject(F)&&s.isPlainObject(Y)){if(!b(F,Y))return!1}else if(!s.equals(F,Y))return!1}return!0}var _=typeof c;if(_==="object"){for(var C in c)if(c.hasOwnProperty(C)&&!this.matches(C,c[C]))return!1;return!0}else{if(_==="function")return c(this);if(c==="match")return f(this);var A=/^(empty|editable)$/.test(c)?this["is"+s.capitalize(c)]():c==="type"?s.hyphenate(this._class):this[c];if(c==="class"){if(typeof f=="function")return this instanceof f;A=this._class}if(typeof f=="function")return!!f(A);if(f){if(f.test)return f.test(A);if(s.isPlainObject(f))return b(f,A)}return s.equals(A,f)}},getItems:function(c){return E._getItems(this,c,this._matrix)},getItem:function(c){return E._getItems(this,c,this._matrix,null,!0)[0]||null},statics:{_getItems:function c(f,b,_,C,A){if(!C){var T=typeof b=="object"&&b,N=T&&T.overlapping,$=T&&T.inside,F=N||$,K=F&&x.read([F]);C={items:[],recursive:T&&T.recursive!==!1,inside:!!$,overlapping:!!N,rect:K,path:N&&new xe.Rectangle({rectangle:K,insert:!1})},T&&(b=s.filter({},b,{recursive:!0,inside:!0,overlapping:!0}))}var Y=f._children,Q=C.items,K=C.rect;_=K&&(_||new j);for(var V=0,X=Y&&Y.length;V<X;V++){var B=Y[V],Z=_&&_.appended(B._matrix),G=!0;if(K){var F=B.getBounds(Z);if(!K.intersects(F))continue;K.contains(F)||C.overlapping&&(F.contains(K)||C.path.intersects(B,Z))||(G=!1)}if(G&&B.matches(b)&&(Q.push(B),A)||(C.recursive!==!1&&c(B,b,Z,C,A),A&&Q.length>0))break}return Q}}},{importJSON:function(c){var f=s.importJSON(c,this);return f!==this?this.addChild(f):f},addChild:function(c){return this.insertChild(n,c)},insertChild:function(c,f){var b=f?this.insertChildren(c,[f]):null;return b&&b[0]},addChildren:function(c){return this.insertChildren(this._children.length,c)},insertChildren:function(c,f){var b=this._children;if(b&&f&&f.length>0){f=s.slice(f);for(var _={},C=f.length-1;C>=0;C--){var A=f[C],T=A&&A._id;!A||_[T]?f.splice(C,1):(A._remove(!1,!0),_[T]=!0)}s.splice(b,f,c,0);for(var N=this._project,$=N._changes,C=0,F=f.length;C<F;C++){var A=f[C],Y=A._name;A._parent=this,A._setProject(N,!0),Y&&A.setName(Y),$&&A._changed(5)}this._changed(11)}else f=null;return f},_insertItem:"#insertChild",_insertAt:function(c,f){var b=c&&c._getOwner(),_=c!==this&&b?this:null;return _&&(_._remove(!1,!0),b._insertItem(c._index+f,_)),_},insertAbove:function(c){return this._insertAt(c,1)},insertBelow:function(c){return this._insertAt(c,0)},sendToBack:function(){var c=this._getOwner();return c?c._insertItem(0,this):null},bringToFront:function(){var c=this._getOwner();return c?c._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(c){return this.insertChild(0,c)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(c){return c._insertItem(n,this)},copyTo:function(c){return this.clone(!1).addTo(c)},reduce:function(c){var f=this._children;if(f&&f.length===1){var b=f[0].reduce(c);return this._parent?(b.insertAbove(this),this.remove()):b.remove(),b}return this},_removeNamed:function(){var c=this._getOwner();if(c){var f=c._children,b=c._namedChildren,_=this._name,C=b[_],A=C?C.indexOf(this):-1;A!==-1&&(f[_]==this&&delete f[_],C.splice(A,1),C.length?f[_]=C[0]:delete b[_])}},_remove:function(c,f){var b=this._getOwner(),_=this._project,C=this._index;return this._style&&this._style._dispose(),b?(this._name&&this._removeNamed(),C!=null&&(_._activeLayer===this&&(_._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(b._children,null,C,1)),this._installEvents(!1),c&&_._changes&&this._changed(5),f&&b._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(c){var f=c&&c.insertBelow(this);return f&&this.remove(),f},removeChildren:function(c,f){if(!this._children)return null;c=c||0,f=s.pick(f,this._children.length);for(var b=s.splice(this._children,null,c,f-c),_=b.length-1;_>=0;_--)b[_]._remove(!0,!1);return b.length>0&&this._changed(11),b},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var c=0,f=this._children.length;c<f;c++)this._children[c]._index=c;this._changed(11)}},isEmpty:function(c){var f=this._children,b=f?f.length:0;if(c){for(var _=0;_<b;_++)if(!f[_].isEmpty(c))return!1;return!0}return!b},isEditable:function(){for(var c=this;c;){if(!c._visible||c._locked)return!1;c=c._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(c){function f(T){var N=[];do N.unshift(T);while(T=T._parent);return N}for(var b=f(this),_=f(c),C=0,A=Math.min(b.length,_.length);C<A;C++)if(b[C]!=_[C])return b[C]._index<_[C]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(c){return this._getOrder(c)===-1},isBelow:function(c){return this._getOrder(c)===1},isParent:function(c){return this._parent===c},isChild:function(c){return c&&c._parent===this},isDescendant:function(c){for(var f=this;f=f._parent;)if(f===c)return!0;return!1},isAncestor:function(c){return c?c.isDescendant(this):!1},isSibling:function(c){return this._parent===c._parent},isGroupedWith:function(c){for(var f=this._parent;f;){if(f._parent&&/^(Group|Layer|CompoundPath)$/.test(f._class)&&c.isDescendant(f))return!0;f=f._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(c){var f=c==="rotate";this[c]=function(){var b=arguments,_=(f?s:g).read(b),C=g.read(b,0,{readNull:!0});return this.transform(new j()[c](_,C||this.getPosition(!0)))}},{translate:function(){var c=new j;return this.transform(c.translate.apply(c,arguments))},transform:function(c,f,b){var _=this._matrix,C=c&&!c.isIdentity(),A=b&&this._canApplyMatrix||this._applyMatrix&&(C||!_.isIdentity()||f&&this._children);if(!C&&!A)return this;if(C){!c.isInvertible()&&_.isInvertible()&&(_._backup=_.getValues()),_.prepend(c,!0);var T=this._style,N=T.getFillColor(!0),$=T.getStrokeColor(!0);N&&N.transform(c),$&&$.transform(c)}if(A&&(A=this._transformContent(_,f,b))){var F=this._pivot;F&&_._transformPoint(F,F,!0),_.reset(!0),b&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Y=this._bounds,Q=this._position;(C||A)&&this._changed(25);var K=C&&Y&&c.decompose();if(K&&K.skewing.isZero()&&K.rotation%90===0){for(var V in Y){var X=Y[V];if(X.nonscaling)delete Y[V];else if(A||!X.internal){var B=X.rect;c._transformBounds(B,B)}}this._bounds=Y;var Z=Y[this._getBoundsCacheKey(this._boundsOptions||{})];Z&&(this._position=this._getPositionFromBounds(Z.rect))}else C&&Q&&this._pivot&&(this._position=c._transformPoint(Q,Q));return this},_transformContent:function(c,f,b){var _=this._children;if(_){for(var C=0,A=_.length;C<A;C++)_[C].transform(c,f,b);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(c,f){c=x.read(arguments);var b=this.getBounds(),_=b.height/b.width,C=c.height/c.width,A=(f?_>C:_<C)?c.width/b.width:c.height/b.height,T=new x(new g,new w(b.width*A,b.height*A));T.setCenter(c.getCenter()),this.setBounds(T)}}),{_setStyles:function(c,f,b){var _=this._style,C=this._matrix;if(_.hasFill()&&(c.fillStyle=_.getFillColor().toCanvasStyle(c,C)),_.hasStroke()){c.strokeStyle=_.getStrokeColor().toCanvasStyle(c,C),c.lineWidth=_.getStrokeWidth();var A=_.getStrokeJoin(),T=_.getStrokeCap(),N=_.getMiterLimit();if(A&&(c.lineJoin=A),T&&(c.lineCap=T),N&&(c.miterLimit=N),$e.support.nativeDash){var $=_.getDashArray(),F=_.getDashOffset();$&&$.length&&("setLineDash"in c?(c.setLineDash($),c.lineDashOffset=F):(c.mozDash=$,c.mozDashOffset=F))}}if(_.hasShadow()){var Y=f.pixelRatio||1,Q=b._shiftless().prepend(new j().scale(Y,Y)),K=Q.transform(new g(_.getShadowBlur(),0)),V=Q.transform(this.getShadowOffset());c.shadowColor=_.getShadowColor().toCanvasStyle(c),c.shadowBlur=K.getLength(),c.shadowOffsetX=V.x,c.shadowOffsetY=V.y}},draw:function(c,f,b){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var _=f.matrices,C=f.viewMatrix,A=this._matrix,T=_[_.length-1].appended(A);if(T.isInvertible()){C=C?C.appended(T):T,_.push(T),f.updateMatrix&&(this._globalMatrix=T);var N=this._blendMode,$=p.clamp(this._opacity,0,1),F=N==="normal",Y=ye.nativeModes[N],Q=F&&$===1||f.dontStart||f.clip||(Y||F&&$<1)&&this._canComposite(),K=f.pixelRatio||1,V,X,B;if(!Q){var Z=this.getStrokeBounds(C);if(!Z.width||!Z.height){_.pop();return}B=f.offset,X=f.offset=Z.getTopLeft().floor(),V=c,c=ve.getContext(Z.getSize().ceil().add(1).multiply(K)),K!==1&&c.scale(K,K)}c.save();var G=b?b.appended(A):this._canScaleStroke&&!this.getStrokeScaling(!0)&&C,re=!Q&&f.clipItem,z=!G||re;if(Q?(c.globalAlpha=$,Y&&(c.globalCompositeOperation=N)):z&&c.translate(-X.x,-X.y),z&&(Q?A:C).applyToContext(c),re&&f.clipItem.draw(c,f.extend({clip:!0})),G){c.setTransform(K,0,0,K,0,0);var ne=f.offset;ne&&c.translate(-ne.x,-ne.y)}this._draw(c,f,C,G),c.restore(),_.pop(),f.clip&&!f.dontFinish&&c.clip(this.getFillRule()),Q||(ye.process(N,c,V,$,X.subtract(B).multiply(K)),ve.release(c),f.offset=B)}}},_isUpdated:function(c){var f=this._parent;if(f instanceof Re)return f._isUpdated(c);var b=this._updateVersion===c;return!b&&f&&f._visible&&f._isUpdated(c)&&(this._updateVersion=c,b=!0),b},_drawSelection:function(c,f,b,_,C){var A=this._selection,T=A&1,N=A&2||T&&this._selectBounds,$=A&4;if(this._drawSelected||(T=!1),(T||N||$)&&this._isUpdated(C)){var F,Y=this.getSelectedColor(!0)||(F=this.getLayer())&&F.getSelectedColor(!0),Q=f.appended(this.getGlobalMatrix(!0)),K=b/2;if(c.strokeStyle=c.fillStyle=Y?Y.toCanvasStyle(c):"#009dec",T&&this._drawSelected(c,Q,_),$){var V=this.getPosition(!0),X=this._parent,B=X?X.localToGlobal(V):V,Z=B.x,G=B.y;c.beginPath(),c.arc(Z,G,K,0,Math.PI*2,!0),c.stroke();for(var re=[[0,-1],[1,0],[0,1],[-1,0]],z=K,ne=b+1,se=0;se<4;se++){var ue=re[se],ie=ue[0],be=ue[1];c.moveTo(Z+ie*z,G+be*z),c.lineTo(Z+ie*ne,G+be*ne),c.stroke()}}if(N){var Se=Q._transformCorners(this.getInternalBounds());c.beginPath();for(var se=0;se<8;se++)c[se?"lineTo":"moveTo"](Se[se],Se[++se]);c.closePath(),c.stroke();for(var se=0;se<8;se++)c.fillRect(Se[se]-K,Se[++se]-K,b,b)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(c){this["removeOn"+s.capitalize(c)]=function(){var f={};return f[c]=!0,this.removeOn(f)}},{removeOn:function(c){for(var f in c)if(c[f]){var b="mouse"+f,_=this._project,C=_._removeSets=_._removeSets||{};C[b]=C[b]||{},C[b][this._id]=this}return this}}),{tween:function(c,f,b){b||(b=f,f=c,c=null,b||(b=f,f=null));var _=b&&b.easing,C=b&&b.start,A=b!=null&&(typeof b=="number"?b:b.duration),T=new ee(this,c,f,A,_,C);function N($){T._handleFrame($.time*1e3),T.running||this.off("frame",N)}return A&&this.on("frame",N),T},tweenTo:function(c,f){return this.tween(null,c,f)},tweenFrom:function(c,f){return this.tween(c,null,f)}}),U=E.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(f){this._children=[],this._namedChildren={},this._initialize(f)||this.addChildren(Array.isArray(f)?f:arguments)},_changed:function c(f){c.base.call(this,f),f&2050&&(this._clipItem=n)},_getClipItem:function(){var c=this._clipItem;if(c===n){c=null;for(var f=this._children,b=0,_=f.length;b<_;b++)if(f[b]._clipMask){c=f[b];break}this._clipItem=c}return c},isClipped:function(){return!!this._getClipItem()},setClipped:function(c){var f=this.getFirstChild();f&&f.setClipMask(c)},_getBounds:function c(f,b){var _=this._getClipItem();return _?_._getCachedBounds(_._matrix.prepended(f),s.set({},b,{stroke:!1})):c.base.call(this,f,b)},_hitTestChildren:function c(f,b,_){var C=this._getClipItem();return(!C||C.contains(f))&&c.base.call(this,f,b,_,C)},_draw:function(c,f){var b=f.clip,_=!b&&this._getClipItem();f=f.extend({clipItem:_,clip:!1}),b?(c.beginPath(),f.dontStart=f.dontFinish=!0):_&&_.draw(c,f.extend({clip:!0}));for(var C=this._children,A=0,T=C.length;A<T;A++){var N=C[A];N!==_&&N.draw(c,f)}}}),D=U.extend({_class:"Layer",initialize:function(){U.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function c(){return this._parent?c.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),R=E.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(f,b){this._initialize(f,b)},_equals:function(c){return this._type===c._type&&this._size.equals(c._size)&&s.equals(this._radius,c._radius)},copyContent:function(c){this.setType(c._type),this.setSize(c._size),this.setRadius(c._radius)},getType:function(){return this._type},setType:function(c){this._type=c},getShape:"#getType",setShape:"#setType",getSize:function(){var c=this._size;return new S(c.width,c.height,this,"setSize")},setSize:function(){var c=w.read(arguments);if(!this._size)this._size=c.clone();else if(!this._size.equals(c)){var f=this._type,b=c.width,_=c.height;f==="rectangle"?this._radius.set(w.min(this._radius,c.divide(2).abs())):f==="circle"?(b=_=(b+_)/2,this._radius=b/2):f==="ellipse"&&this._radius._set(b/2,_/2),this._size._set(b,_),this._changed(9)}},getRadius:function(){var c=this._radius;return this._type==="circle"?c:new S(c.width,c.height,this,"setRadius")},setRadius:function(c){var f=this._type;if(f==="circle"){if(c===this._radius)return;var b=c*2;this._radius=c,this._size._set(b,b)}else if(c=w.read(arguments),!this._radius)this._radius=c.clone();else{if(this._radius.equals(c))return;if(this._radius.set(c),f==="rectangle"){var b=w.max(this._size,c.multiply(2));this._size.set(b)}else f==="ellipse"&&this._size._set(c.width*2,c.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(c){var f=new xe[s.capitalize(this._type)]({center:new g,size:this._size,radius:this._radius,insert:!1});return f.copyAttributes(this),$e.settings.applyMatrix&&f.setApplyMatrix(!0),(c===n||c)&&f.insertAbove(this),f},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(c,f,b,_){var C=this._style,A=C.hasFill(),T=C.hasStroke(),N=f.dontFinish||f.clip,$=!_;if(A||T||N){var F=this._type,Y=this._radius,Q=F==="circle";if(f.dontStart||c.beginPath(),$&&Q)c.arc(0,0,Y,0,Math.PI*2,!0);else{var K=Q?Y:Y.width,V=Q?Y:Y.height,X=this._size,B=X.width,Z=X.height;if($&&F==="rectangle"&&K===0&&V===0)c.rect(-B/2,-Z/2,B,Z);else{var G=B/2,re=Z/2,z=1-.5522847498307936,ne=K*z,se=V*z,ue=[-G,-re+V,-G,-re+se,-G+ne,-re,-G+K,-re,G-K,-re,G-ne,-re,G,-re+se,G,-re+V,G,re-V,G,re-se,G-ne,re,G-K,re,-G+K,re,-G+ne,re,-G,re-se,-G,re-V];_&&_.transform(ue,ue,32),c.moveTo(ue[0],ue[1]),c.bezierCurveTo(ue[2],ue[3],ue[4],ue[5],ue[6],ue[7]),G!==K&&c.lineTo(ue[8],ue[9]),c.bezierCurveTo(ue[10],ue[11],ue[12],ue[13],ue[14],ue[15]),re!==V&&c.lineTo(ue[16],ue[17]),c.bezierCurveTo(ue[18],ue[19],ue[20],ue[21],ue[22],ue[23]),G!==K&&c.lineTo(ue[24],ue[25]),c.bezierCurveTo(ue[26],ue[27],ue[28],ue[29],ue[30],ue[31])}}c.closePath()}!N&&(A||T)&&(this._setStyles(c,f,b),A&&(c.fill(C.getFillRule()),c.shadowColor="rgba(0,0,0,0)"),T&&c.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(c,f){var b=new x(this._size).setCenter(0,0),_=this._style,C=f.stroke&&_.hasStroke()&&_.getStrokeWidth();return c&&(b=c._transformBounds(b)),C?b.expand(xe._getStrokePadding(C,this._getStrokeMatrix(c,f))):b}},new function(){function c(b,_,C){var A=b._radius;if(!A.isZero())for(var T=b._size.divide(2),N=1;N<=4;N++){var $=new g(N>1&&N<4?-1:1,N>2?-1:1),F=$.multiply(T),Y=F.subtract($.multiply(A)),Q=new x(C?F.add($.multiply(C)):F,Y);if(Q.contains(_))return{point:Y,quadrant:N}}}function f(b,_,C,A){var T=b.divide(_);return(!A||T.isInQuadrant(A))&&T.subtract(T.normalize()).multiply(_).divide(C).length<=1}return{_contains:function b(_){if(this._type==="rectangle"){var C=c(this,_);return C?_.subtract(C.point).divide(this._radius).getLength()<=1:b.base.call(this,_)}else return _.divide(this.size).getLength()<=.5},_hitTestSelf:function b(_,C,A,T){var N=!1,$=this._style,F=C.stroke&&$.hasStroke(),Y=C.fill&&$.hasFill();if(F||Y){var Q=this._type,K=this._radius,V=F?$.getStrokeWidth()/2:0,X=C._tolerancePadding.add(xe._getStrokePadding(V,!$.getStrokeScaling()&&T));if(Q==="rectangle"){var B=X.multiply(2),Z=c(this,_,B);if(Z)N=f(_.subtract(Z.point),K,X,Z.quadrant);else{var G=new x(this._size).setCenter(0,0),re=G.expand(B),z=G.expand(B.negate());N=re._containsPoint(_)&&!z._containsPoint(_)}}else N=f(_,K,X)}return N?new me(F?"stroke":"fill",this):b.base.apply(this,arguments)}}},{statics:new function(){function c(f,b,_,C,A){var T=s.create(R.prototype);return T._type=f,T._size=_,T._radius=C,T._initialize(s.getNamed(A),b),T}return{Circle:function(){var f=arguments,b=g.readNamed(f,"center"),_=s.readNamed(f,"radius");return c("circle",b,new w(_*2),_,f)},Rectangle:function(){var f=arguments,b=x.readNamed(f,"rectangle"),_=w.min(w.readNamed(f,"radius"),b.getSize(!0).divide(2));return c("rectangle",b.getCenter(!0),b.getSize(!0),_,f)},Ellipse:function(){var f=arguments,b=R._readEllipse(f),_=b.radius;return c("ellipse",b.center,_.multiply(2),_,f)},_readEllipse:function(f){var b,_;if(s.hasNamed(f,"radius"))b=g.readNamed(f,"center"),_=w.readNamed(f,"radius");else{var C=x.readNamed(f,"rectangle");b=C.getCenter(!0),_=C.getSize(!0).divide(2)}return{center:b,radius:_}}}}}),W=E.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(f,b){if(!this._initialize(f,b!==n&&g.read(arguments))){var _,C=typeof f,A=C==="string"?i.getElementById(f):C==="object"?f:null;if(A&&A!==E.NO_INSERT){if(A.getContext||A.naturalHeight!=null)_=A;else if(A){var T=w.read(arguments);T.isZero()||(_=ve.getCanvas(T))}}_?this.setImage(_):this.setSource(f)}this._size||(this._size=new w,this._loaded=!1)},_equals:function(c){return this.getSource()===c.getSource()},copyContent:function(c){var f=c._image,b=c._canvas;if(f)this._setImage(f);else if(b){var _=ve.getCanvas(c._size);_.getContext("2d").drawImage(b,0,0),this._setImage(_)}this._crossOrigin=c._crossOrigin},getSize:function(){var c=this._size;return new S(c?c.width:0,c?c.height:0,this,"setSize")},setSize:function(c,f){var b=w.read(arguments);if(b.equals(this._size))f&&this.clear();else if(b.width>0&&b.height>0){var _=!f&&this.getElement();this._setImage(ve.getCanvas(b)),_&&this.getContext(!0).drawImage(_,0,0,b.width,b.height)}else this._canvas&&ve.release(this._canvas),this._size=b.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(c){this.setSize(c,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(c){this.setSize(this.getWidth(),c)},getLoaded:function(){return this._loaded},isEmpty:function(){var c=this._size;return!c||c.width===0&&c.height===0},getResolution:function(){var c=this._matrix,f=new g(0,0).transform(c),b=new g(1,0).transform(c).subtract(f),_=new g(0,1).transform(c).subtract(f);return new w(72/b.getLength(),72/_.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(c){var f=this;function b(_){var C=f.getView(),A=_&&_.type||"load";C&&f.responds(A)&&($e=C._scope,f.emit(A,new Ct(_)))}this._setImage(c),this._loaded?setTimeout(b,0):c&&Ne.add(c,{load:function(_){f._setImage(c),b(_)},error:b})},_setImage:function(c){this._canvas&&ve.release(this._canvas),c&&c.getContext?(this._image=null,this._canvas=c,this._loaded=!0):(this._image=c,this._canvas=null,this._loaded=!!(c&&c.src&&c.complete)),this._size=new w(c?c.naturalWidth||c.width:0,c?c.naturalHeight||c.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var c=ve.getContext(this._size);try{this._image&&c.drawImage(this._image,0,0),this._canvas=c.canvas}catch{ve.release(c)}}return this._canvas},setCanvas:"#setImage",getContext:function(c){return this._context||(this._context=this.getCanvas().getContext("2d")),c&&(this._image=null,this._changed(1025)),this._context},setContext:function(c){this._context=c},getSource:function(){var c=this._image;return c&&c.src||this.toDataURL()},setSource:function(c){var f=new t.Image,b=this._crossOrigin;b&&(f.crossOrigin=b),c&&(f.src=c),this.setImage(f)},getCrossOrigin:function(){var c=this._image;return c&&c.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(c){this._crossOrigin=c;var f=this._image;f&&(f.crossOrigin=c)},getSmoothing:function(){return this._smoothing},setSmoothing:function(c){this._smoothing=typeof c=="string"?c:c?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var c=x.read(arguments),f=ve.getContext(c.getSize());return f.drawImage(this.getCanvas(),c.x,c.y,c.width,c.height,0,0,c.width,c.height),f.canvas},getSubRaster:function(){var c=x.read(arguments),f=new W(E.NO_INSERT);return f._setImage(this.getSubCanvas(c)),f.translate(c.getCenter().subtract(this.getSize().divide(2))),f._matrix.prepend(this._matrix),f.insertAbove(this),f},toDataURL:function(){var c=this._image,f=c&&c.src;if(/^data:/.test(f))return f;var b=this.getCanvas();return b?b.toDataURL.apply(b,arguments):null},drawImage:function(c){var f=g.read(arguments,1);this.getContext(!0).drawImage(c,f.x,f.y)},getAverageColor:function(c){var f,b;if(c?c instanceof ze?(b=c,f=c.getBounds()):typeof c=="object"&&("width"in c?f=new x(c):"x"in c&&(f=new x(c.x-.5,c.y-.5,1,1))):f=this.getBounds(),!f)return null;var _=32,C=Math.min(f.width,_),A=Math.min(f.height,_),T=W._sampleContext;T?T.clearRect(0,0,_+1,_+1):T=W._sampleContext=ve.getContext(new w(_)),T.save();var N=new j().scale(C/f.width,A/f.height).translate(-f.x,-f.y);N.applyToContext(T),b&&b.draw(T,new s({clip:!0,matrices:[N]})),this._matrix.applyToContext(T);var $=this.getElement(),F=this._size;$&&T.drawImage($,-F.width/2,-F.height/2),T.restore();for(var Y=T.getImageData(.5,.5,Math.ceil(C),Math.ceil(A)).data,Q=[0,0,0],K=0,V=0,X=Y.length;V<X;V+=4){var B=Y[V+3];K+=B,B/=255,Q[0]+=Y[V]*B,Q[1]+=Y[V+1]*B,Q[2]+=Y[V+2]*B}for(var V=0;V<3;V++)Q[V]/=K;return K?Ue.read(Q):null},getPixel:function(){var c=g.read(arguments),f=this.getContext().getImageData(c.x,c.y,1,1).data;return new Ue("rgb",[f[0]/255,f[1]/255,f[2]/255],f[3]/255)},setPixel:function(){var c=arguments,f=g.read(c),b=Ue.read(c),_=b._convert("rgb"),C=b._alpha,A=this.getContext(!0),T=A.createImageData(1,1),N=T.data;N[0]=_[0]*255,N[1]=_[1]*255,N[2]=_[2]*255,N[3]=C!=null?C*255:255,A.putImageData(T,f.x,f.y)},clear:function(){var c=this._size;this.getContext(!0).clearRect(0,0,c.width+1,c.height+1)},createImageData:function(){var c=w.read(arguments);return this.getContext().createImageData(c.width,c.height)},getImageData:function(){var c=x.read(arguments);return c.isEmpty()&&(c=new x(this._size)),this.getContext().getImageData(c.x,c.y,c.width,c.height)},putImageData:function(c){var f=g.read(arguments,1);this.getContext(!0).putImageData(c,f.x,f.y)},setImageData:function(c){this.setSize(c),this.getContext(!0).putImageData(c,0,0)},_getBounds:function(c,f){var b=new x(this._size).setCenter(0,0);return c?c._transformBounds(b):b},_hitTestSelf:function(c){if(this._contains(c)){var f=this;return new me("pixel",f,{offset:c.add(f._size.divide(2)).round(),color:{get:function(){return f.getPixel(this.offset)}}})}},_draw:function(c,f,b){var _=this.getElement();if(_&&_.width>0&&_.height>0){c.globalAlpha=p.clamp(this._opacity,0,1),this._setStyles(c,f,b);var C=this._smoothing,A=C==="off";We.setPrefixed(c,A?"imageSmoothingEnabled":"imageSmoothingQuality",A?!1:C),c.drawImage(_,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ce=E.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(f,b){this._initialize(f,b!==n&&g.read(arguments,1))||this.setDefinition(f instanceof te?f:new te(f))},_equals:function(c){return this._definition===c._definition},copyContent:function(c){this.setDefinition(c._definition)},getDefinition:function(){return this._definition},setDefinition:function(c){this._definition=c,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(c,f){var b=this._definition._item;return b._getCachedBounds(b._matrix.prepended(c),f)},_hitTestSelf:function(c,f,b){var _=f.extend({all:!1}),C=this._definition._item._hitTest(c,_,b);return C&&(C.item=this),C},_draw:function(c,f){this._definition._item.draw(c,f)}}),te=s.extend({_class:"SymbolDefinition",initialize:function(f,b){this._id=m.get(),this.project=$e.project,f&&this.setItem(f,b)},_serialize:function(c,f){return f.add(this,function(){return s.serialize([this._class,this._item],c,!1,f)})},_changed:function(c){c&8&&E._clearBoundsCache(this),c&1&&this.project._changed(c)},getItem:function(){return this._item},setItem:function(c,f){c._symbol&&(c=c.clone()),this._item&&(this._item._symbol=null),this._item=c,c.remove(),c.setSelected(!1),f||c.setPosition(new g),c._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(c){return new ce(this,c)},clone:function(){return new te(this._item.clone(!1))},equals:function(c){return c===this||c&&this._item.equals(c._item)||!1}}),me=s.extend({_class:"HitResult",initialize:function(f,b,_){this.type=f,this.item=b,_&&this.inject(_)},statics:{getOptions:function(c){var f=c&&s.read(c);return new s({type:null,tolerance:$e.settings.hitTolerance,fill:!f,stroke:!f,segments:!f,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},f)}}}),H=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(f,b,_,C,A,T){var N=arguments.length,$,F,Y,Q;N>0&&(f==null||typeof f=="object"?N===1&&f&&"point"in f?($=f.point,F=f.handleIn,Y=f.handleOut,Q=f.selection):($=f,F=b,Y=_,Q=C):($=[f,b],F=_!==n?[_,C]:null,Y=A!==n?[A,T]:null)),new ge($,this,"_point"),new ge(F,this,"_handleIn"),new ge(Y,this,"_handleOut"),Q&&this.setSelection(Q)},_serialize:function(c,f){var b=this._point,_=this._selection,C=_||this.hasHandles()?[b,this._handleIn,this._handleOut]:b;return _&&C.push(_),s.serialize(C,c,!0,f)},_changed:function(c){var f=this._path;if(f){var b=f._curves,_=this._index,C;b&&((!c||c===this._point||c===this._handleIn)&&(C=_>0?b[_-1]:f._closed?b[b.length-1]:null)&&C._changed(),(!c||c===this._point||c===this._handleOut)&&(C=b[_])&&C._changed()),f._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(g.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(g.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(g.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var c=this._handleIn,f=this._handleOut;return!c.isZero()&&!f.isZero()&&c.isCollinear(f)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(c){var f=this._selection,b=this._path;this._selection=c=c||0,b&&c!==f&&(b._updateSelection(this,f,c),b._changed(257))},_changeSelection:function(c,f){var b=this._selection;this.setSelection(f?b|c:b&~c)},isSelected:function(){return!!(this._selection&7)},setSelected:function(c){this._changeSelection(7,c)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var c=this._path,f=this._index;return c?(f>0&&!c._closed&&f===c._segments.length-1&&f--,c.getCurves()[f]||null):null},getLocation:function(){var c=this.getCurve();return c?new ke(c,this===c._segment1?0:1):null},getNext:function(){var c=this._path&&this._path._segments;return c&&(c[this._index+1]||this._path._closed&&c[0])||null},smooth:function(c,f,b){var _=c||{},C=_.type,A=_.factor,T=this.getPrevious(),N=this.getNext(),$=(T||this)._point,F=this._point,Y=(N||this)._point,Q=$.getDistance(F),K=F.getDistance(Y);if(!C||C==="catmull-rom"){var V=A===n?.5:A,X=Math.pow(Q,V),B=X*X,Z=Math.pow(K,V),G=Z*Z;if(!f&&T){var re=2*G+3*Z*X+B,z=3*Z*(Z+X);this.setHandleIn(z!==0?new g((G*$._x+re*F._x-B*Y._x)/z-F._x,(G*$._y+re*F._y-B*Y._y)/z-F._y):new g)}if(!b&&N){var re=2*B+3*X*Z+G,z=3*X*(X+Z);this.setHandleOut(z!==0?new g((B*Y._x+re*F._x-G*$._x)/z-F._x,(B*Y._y+re*F._y-G*$._y)/z-F._y):new g)}}else if(C==="geometric"){if(T&&N){var ne=$.subtract(Y),se=A===n?.4:A,ue=se*Q/(Q+K);f||this.setHandleIn(ne.multiply(ue)),b||this.setHandleOut(ne.multiply(ue-se))}}else throw new Error("Smoothing method '"+C+"' not supported.")},getPrevious:function(){var c=this._path&&this._path._segments;return c&&(c[this._index-1]||this._path._closed&&c[c.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var c=this._path;return c&&this._index===c._segments.length-1||!1},reverse:function(){var c=this._handleIn,f=this._handleOut,b=c.clone();c.set(f),f.set(b)},reversed:function(){return new H(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new H(this._point,this._handleIn,this._handleOut)},equals:function(c){return c===this||c&&this._class===c._class&&this._point.equals(c._point)&&this._handleIn.equals(c._handleIn)&&this._handleOut.equals(c._handleOut)||!1},toString:function(){var c=["point: "+this._point];return this._handleIn.isZero()||c.push("handleIn: "+this._handleIn),this._handleOut.isZero()||c.push("handleOut: "+this._handleOut),"{ "+c.join(", ")+" }"},transform:function(c){this._transformCoordinates(c,new Array(6),!0),this._changed()},interpolate:function(c,f,b){var _=1-b,C=b,A=c._point,T=f._point,N=c._handleIn,$=f._handleIn,F=f._handleOut,Y=c._handleOut;this._point._set(_*A._x+C*T._x,_*A._y+C*T._y,!0),this._handleIn._set(_*N._x+C*$._x,_*N._y+C*$._y,!0),this._handleOut._set(_*Y._x+C*F._x,_*Y._y+C*F._y,!0),this._changed()},_transformCoordinates:function(c,f,b){var _=this._point,C=!b||!this._handleIn.isZero()?this._handleIn:null,A=!b||!this._handleOut.isZero()?this._handleOut:null,T=_._x,N=_._y,$=2;return f[0]=T,f[1]=N,C&&(f[$++]=C._x+T,f[$++]=C._y+N),A&&(f[$++]=A._x+T,f[$++]=A._y+N),c&&(c._transformCoordinates(f,f,$/2),T=f[0],N=f[1],b?(_._x=T,_._y=N,$=2,C&&(C._x=f[$++]-T,C._y=f[$++]-N),A&&(A._x=f[$++]-T,A._y=f[$++]-N)):(C||(f[$++]=T,f[$++]=N),A||(f[$++]=T,f[$++]=N))),f}}),ge=g.extend({initialize:function(f,b,_){var C,A,T;if(!f)C=A=0;else if((C=f[0])!==n)A=f[1];else{var N=f;(C=N.x)===n&&(N=g.read(arguments),C=N.x),A=N.y,T=N.selected}this._x=C,this._y=A,this._owner=b,b[_]=this,T&&this.setSelected(!0)},_set:function(c,f){return this._x=c,this._y=f,this._owner._changed(this),this},getX:function(){return this._x},setX:function(c){this._x=c,this._owner._changed(this)},getY:function(){return this._y},setY:function(c){this._y=c,this._owner._changed(this)},isZero:function(){var c=p.isZero;return c(this._x)&&c(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(c){this._owner._changeSelection(this._getSelection(),c)},_getSelection:function(){var c=this._owner;return this===c._point?1:this===c._handleIn?2:this===c._handleOut?4:0}}),Ee=s.extend({_class:"Curve",beans:!0,initialize:function(f,b,_,C,A,T,N,$){var F=arguments.length,Y,Q,K,V,X,B;F===3?(this._path=f,Y=b,Q=_):F?F===1?"segment1"in f?(Y=new H(f.segment1),Q=new H(f.segment2)):"point1"in f?(K=f.point1,X=f.handle1,B=f.handle2,V=f.point2):Array.isArray(f)&&(K=[f[0],f[1]],V=[f[6],f[7]],X=[f[2]-f[0],f[3]-f[1]],B=[f[4]-f[6],f[5]-f[7]]):F===2?(Y=new H(f),Q=new H(b)):F===4?(K=f,X=b,B=_,V=C):F===8&&(K=[f,b],V=[N,$],X=[_-f,C-b],B=[A-N,T-$]):(Y=new H,Q=new H),this._segment1=Y||new H(K,null,X),this._segment2=Q||new H(V,B,null)},_serialize:function(c,f){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],c,!0,f)},_changed:function(){this._length=this._bounds=n},clone:function(){return new Ee(this._segment1,this._segment2)},toString:function(){var c=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||c.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||c.push("handle2: "+this._segment2._handleIn),c.push("point2: "+this._segment2._point),"{ "+c.join(", ")+" }"},classify:function(){return Ee.classify(this.getValues())},remove:function(){var c=!1;if(this._path){var f=this._segment2,b=f._handleOut;c=f.remove(),c&&this._segment1._handleOut.set(b)}return c},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(g.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(g.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(g.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(g.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var c=this._path&&this._path._curves;return c&&(c[this._segment1._index+1]||this._path._closed&&c[0])||null},getPrevious:function(){var c=this._path&&this._path._curves;return c&&(c[this._segment1._index-1]||this._path._closed&&c[c.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var c=this._path;return c&&this._segment1._index===c._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(c){this.getPoint1().setSelected(c),this.getHandle1().setSelected(c),this.getHandle2().setSelected(c),this.getPoint2().setSelected(c)},getValues:function(c){return Ee.getValues(this._segment1,this._segment2,c)},getPoints:function(){for(var c=this.getValues(),f=[],b=0;b<8;b+=2)f.push(new g(c[b],c[b+1]));return f}},{getLength:function(){return this._length==null&&(this._length=Ee.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Ee.getArea(this.getValues())},getLine:function(){return new O(this._segment1._point,this._segment2._point)},getPart:function(c,f){return new Ee(Ee.getPart(this.getValues(),c,f))},getPartLength:function(c,f){return Ee.getLength(this.getValues(),c,f)},divideAt:function(c){return this.divideAtTime(c&&c.curve===this?c.time:this.getTimeAt(c))},divideAtTime:function(c,f){var b=1e-8,_=1-b,C=null;if(c>=b&&c<=_){var A=Ee.subdivide(this.getValues(),c),T=A[0],N=A[1],$=f||this.hasHandles(),F=this._segment1,Y=this._segment2,Q=this._path;$&&(F._handleOut._set(T[2]-T[0],T[3]-T[1]),Y._handleIn._set(N[4]-N[6],N[5]-N[7]));var K=T[6],V=T[7],X=new H(new g(K,V),$&&new g(T[4]-K,T[5]-V),$&&new g(N[2]-K,N[3]-V));Q?(Q.insert(F._index+1,X),C=this.getNext()):(this._segment2=X,this._changed(),C=new Ee(X,Y))}return C},splitAt:function(c){var f=this._path;return f?f.splitAt(c):null},splitAtTime:function(c){return this.splitAt(this.getLocationAtTime(c))},divide:function(c,f){return this.divideAtTime(c===n?.5:f?c:this.getTimeAt(c))},split:function(c,f){return this.splitAtTime(c===n?.5:f?c:this.getTimeAt(c))},reversed:function(){return new Ee(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(c,f,b,_){var C=c._point,A=c._handleOut,T=f._handleIn,N=f._point,$=C.x,F=C.y,Y=N.x,Q=N.y,K=_?[$,F,$,F,Y,Q,Y,Q]:[$,F,$+A._x,F+A._y,Y+T._x,Q+T._y,Y,Q];return b&&b._transformCoordinates(K,K,4),K},subdivide:function(c,f){var b=c[0],_=c[1],C=c[2],A=c[3],T=c[4],N=c[5],$=c[6],F=c[7];f===n&&(f=.5);var Y=1-f,Q=Y*b+f*C,K=Y*_+f*A,V=Y*C+f*T,X=Y*A+f*N,B=Y*T+f*$,Z=Y*N+f*F,G=Y*Q+f*V,re=Y*K+f*X,z=Y*V+f*B,ne=Y*X+f*Z,se=Y*G+f*z,ue=Y*re+f*ne;return[[b,_,Q,K,G,re,se,ue],[se,ue,z,ne,B,Z,$,F]]},getMonoCurves:function(c,f){var b=[],_=f?0:1,C=c[_+0],A=c[_+2],T=c[_+4],N=c[_+6];if(C>=A==A>=T&&A>=T==T>=N||Ee.isStraight(c))b.push(c);else{var $=3*(A-T)-C+N,F=2*(C+T)-4*A,Y=A-C,Q=1e-8,K=1-Q,V=[],X=p.solveQuadratic($,F,Y,V,Q,K);if(!X)b.push(c);else{V.sort();var B=V[0],Z=Ee.subdivide(c,B);b.push(Z[0]),X>1&&(B=(V[1]-B)/(1-B),Z=Ee.subdivide(Z[1],B),b.push(Z[0])),b.push(Z[1])}}return b},solveCubic:function(c,f,b,_,C,A){var T=c[f],N=c[f+2],$=c[f+4],F=c[f+6],Y=0;if(!(T<b&&F<b&&N<b&&$<b||T>b&&F>b&&N>b&&$>b)){var Q=3*(N-T),K=3*($-N)-Q,V=F-T-Q-K;Y=p.solveCubic(V,K,Q,T-b,_,C,A)}return Y},getTimeOf:function(c,f){var b=new g(c[0],c[1]),_=new g(c[6],c[7]),C=1e-12,A=1e-7,T=f.isClose(b,C)?0:f.isClose(_,C)?1:null;if(T===null)for(var N=[f.x,f.y],$=[],F=0;F<2;F++)for(var Y=Ee.solveCubic(c,F,N[F],$,0,1),Q=0;Q<Y;Q++){var K=$[Q];if(f.isClose(Ee.getPoint(c,K),A))return K}return f.isClose(b,A)?0:f.isClose(_,A)?1:null},getNearestTime:function(c,f){if(Ee.isStraight(c)){var b=c[0],_=c[1],C=c[6],A=c[7],T=C-b,N=A-_,$=T*T+N*N;if($===0)return 0;var F=((f.x-b)*T+(f.y-_)*N)/$;return F<1e-12?0:F>.999999999999?1:Ee.getTimeOf(c,new g(b+F*T,_+F*N))}var Y=100,Q=1/0,K=0;function V(Z){if(Z>=0&&Z<=1){var G=f.getDistance(Ee.getPoint(c,Z),!0);if(G<Q)return Q=G,K=Z,!0}}for(var X=0;X<=Y;X++)V(X/Y);for(var B=1/(Y*2);B>1e-8;)!V(K-B)&&!V(K+B)&&(B/=2);return K},getPart:function(c,f,b){var _=f>b;if(_){var C=f;f=b,b=C}return f>0&&(c=Ee.subdivide(c,f)[1]),b<1&&(c=Ee.subdivide(c,(b-f)/(1-f))[0]),_?[c[6],c[7],c[4],c[5],c[2],c[3],c[0],c[1]]:c},isFlatEnough:function(c,f){var b=c[0],_=c[1],C=c[2],A=c[3],T=c[4],N=c[5],$=c[6],F=c[7],Y=3*C-2*b-$,Q=3*A-2*_-F,K=3*T-2*$-b,V=3*N-2*F-_;return Math.max(Y*Y,K*K)+Math.max(Q*Q,V*V)<=16*f*f},getArea:function(c){var f=c[0],b=c[1],_=c[2],C=c[3],A=c[4],T=c[5],N=c[6],$=c[7];return 3*(($-b)*(_+A)-(N-f)*(C+T)+C*(f-A)-_*(b-T)+$*(A+f/3)-N*(T+b/3))/20},getBounds:function(c){for(var f=c.slice(0,2),b=f.slice(),_=[0,0],C=0;C<2;C++)Ee._addBounds(c[C],c[C+2],c[C+4],c[C+6],C,0,f,b,_);return new x(f[0],f[1],b[0]-f[0],b[1]-f[1])},_addBounds:function(c,f,b,_,C,A,T,N,$){function F(se,ue){var ie=se-ue,be=se+ue;ie<T[C]&&(T[C]=ie),be>N[C]&&(N[C]=be)}A/=2;var Y=T[C]+A,Q=N[C]-A;if(c<Y||f<Y||b<Y||_<Y||c>Q||f>Q||b>Q||_>Q)if(f<c!=f<_&&b<c!=b<_)F(c,0),F(_,0);else{var K=3*(f-b)-c+_,V=2*(c+b)-4*f,X=f-c,B=p.solveQuadratic(K,V,X,$),Z=1e-8,G=1-Z;F(_,0);for(var re=0;re<B;re++){var z=$[re],ne=1-z;Z<=z&&z<=G&&F(ne*ne*ne*c+3*ne*ne*z*f+3*ne*z*z*b+z*z*z*_,A)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(c){this[c]=function(){this._bounds||(this._bounds={});var f=this._bounds[c];return f||(f=this._bounds[c]=xe[c]([this._segment1,this._segment2],!1,this._path)),f.clone()}},{}),s.each({isStraight:function(c,f,b,_){if(f.isZero()&&b.isZero())return!0;var C=_.subtract(c);if(C.isZero())return!1;if(C.isCollinear(f)&&C.isCollinear(b)){var A=new O(c,_),T=1e-7;if(A.getDistance(c.add(f))<T&&A.getDistance(_.add(b))<T){var N=C.dot(C),$=C.dot(f)/N,F=C.dot(b)/N;return $>=0&&$<=1&&F<=0&&F>=-1}}return!1},isLinear:function(c,f,b,_){var C=_.subtract(c).divide(3);return f.equals(C)&&b.negate().equals(C)}},function(c,f){this[f]=function(b){var _=this._segment1,C=this._segment2;return c(_._point,_._handleOut,C._handleIn,C._point,b)},this.statics[f]=function(b,_){var C=b[0],A=b[1],T=b[6],N=b[7];return c(new g(C,A),new g(b[2]-C,b[3]-A),new g(b[4]-T,b[5]-N),new g(T,N),_)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(c){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(c||0)},isCollinear:function(c){return c&&this.isStraight()&&c.isStraight()&&this.getLine().isCollinear(c.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(c,f){return this.getLocationAtTime(f?c:this.getTimeAt(c))},getLocationAtTime:function(c){return c!=null&&c>=0&&c<=1?new ke(this,c):null},getTimeAt:function(c,f){return Ee.getTimeAt(this.getValues(),c,f)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var c=g.read(arguments);return c.isZero()?[]:Ee.getTimesWithTangent(this.getValues(),c)},getOffsetAtTime:function(c){return this.getPartLength(0,c)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var c=this.getLocationOf.apply(this,arguments);return c?c.getOffset():null},getTimeOf:function(){return Ee.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var c=g.read(arguments),f=this.getValues(),b=Ee.getNearestTime(f,c),_=Ee.getPoint(f,b);return new ke(this,b,_,null,c.getDistance(_))},getNearestPoint:function(){var c=this.getNearestLocation.apply(this,arguments);return c&&c.getPoint()}},new function(){var c=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(c,function(f){this[f+"At"]=function(b,_){var C=this.getValues();return Ee[f](C,_?b:Ee.getTimeAt(C,b))},this[f+"AtTime"]=function(b){return Ee[f](this.getValues(),b)}},{statics:{_evaluateMethods:c}})},new function(){function c(_){var C=_[0],A=_[1],T=_[2],N=_[3],$=_[4],F=_[5],Y=_[6],Q=_[7],K=9*(T-$)+3*(Y-C),V=6*(C+$)-12*T,X=3*(T-C),B=9*(N-F)+3*(Q-A),Z=6*(A+F)-12*N,G=3*(N-A);return function(re){var z=(K*re+V)*re+X,ne=(B*re+Z)*re+G;return Math.sqrt(z*z+ne*ne)}}function f(_,C){return Math.max(2,Math.min(16,Math.ceil(Math.abs(C-_)*32)))}function b(_,C,A,T){if(C==null||C<0||C>1)return null;var N=_[0],$=_[1],F=_[2],Y=_[3],Q=_[4],K=_[5],V=_[6],X=_[7],B=p.isZero;B(F-N)&&B(Y-$)&&(F=N,Y=$),B(Q-V)&&B(K-X)&&(Q=V,K=X);var Z=3*(F-N),G=3*(Q-F)-Z,re=V-N-Z-G,z=3*(Y-$),ne=3*(K-Y)-z,se=X-$-z-ne,ue,ie;if(A===0)ue=C===0?N:C===1?V:((re*C+G)*C+Z)*C+N,ie=C===0?$:C===1?X:((se*C+ne)*C+z)*C+$;else{var be=1e-8,Se=1-be;if(C<be?(ue=Z,ie=z):C>Se?(ue=3*(V-Q),ie=3*(X-K)):(ue=(3*re*C+2*G)*C+Z,ie=(3*se*C+2*ne)*C+z),T){ue===0&&ie===0&&(C<be||C>Se)&&(ue=Q-F,ie=K-Y);var Ae=Math.sqrt(ue*ue+ie*ie);Ae&&(ue/=Ae,ie/=Ae)}if(A===3){var Q=6*re*C+2*G,K=6*se*C+2*ne,De=Math.pow(ue*ue+ie*ie,3/2);ue=De!==0?(ue*K-ie*Q)/De:0,ie=0}}return A===2?new g(ie,-ue):new g(ue,ie)}return{statics:{classify:function(_){var C=_[0],A=_[1],T=_[2],N=_[3],$=_[4],F=_[5],Y=_[6],Q=_[7],K=C*(Q-F)+A*($-Y)+Y*F-Q*$,V=T*(A-Q)+N*(Y-C)+C*Q-A*Y,X=$*(N-A)+F*(C-T)+T*A-N*C,B=3*X,Z=B-V,G=Z-V+K,re=Math.sqrt(G*G+Z*Z+B*B),z=re!==0?1/re:0,ne=p.isZero,se="serpentine";G*=z,Z*=z,B*=z;function ue(Ae,De,we){var Ie=De!==n,Fe=Ie&&De>0&&De<1,Ye=Ie&&we>0&&we<1;return Ie&&(!(Fe||Ye)||Ae==="loop"&&!(Fe&&Ye))&&(Ae="arch",Fe=Ye=!1),{type:Ae,roots:Fe||Ye?Fe&&Ye?De<we?[De,we]:[we,De]:[Fe?De:we]:null}}if(ne(G))return ne(Z)?ue(ne(B)?"line":"quadratic"):ue(se,B/(3*Z));var ie=3*Z*Z-4*G*B;if(ne(ie))return ue("cusp",Z/(2*G));var be=ie>0?Math.sqrt(ie/3):Math.sqrt(-ie),Se=2*G;return ue(ie>0?se:"loop",(Z+be)/Se,(Z-be)/Se)},getLength:function(_,C,A,T){if(C===n&&(C=0),A===n&&(A=1),Ee.isStraight(_)){var N=_;A<1&&(N=Ee.subdivide(N,A)[0],C/=A),C>0&&(N=Ee.subdivide(N,C)[1]);var $=N[6]-N[0],F=N[7]-N[1];return Math.sqrt($*$+F*F)}return p.integrate(T||c(_),C,A,f(C,A))},getTimeAt:function(_,C,A){if(A===n&&(A=C<0?1:0),C===0)return A;var T=Math.abs,N=1e-12,$=C>0,F=$?A:0,Y=$?1:A,Q=c(_),K=Ee.getLength(_,F,Y,Q),V=T(C)-K;if(T(V)<N)return $?Y:F;if(V>N)return null;var X=C/K,B=0;function Z(G){return B+=p.integrate(Q,A,G,f(A,G)),A=G,B-C}return p.findRoot(Z,Q,A+X,F,Y,32,1e-12)},getPoint:function(_,C){return b(_,C,0,!1)},getTangent:function(_,C){return b(_,C,1,!0)},getWeightedTangent:function(_,C){return b(_,C,1,!1)},getNormal:function(_,C){return b(_,C,2,!0)},getWeightedNormal:function(_,C){return b(_,C,2,!1)},getCurvature:function(_,C){return b(_,C,3,!1).x},getPeaks:function(_){var C=_[0],A=_[1],T=_[2],N=_[3],$=_[4],F=_[5],Y=_[6],Q=_[7],K=-C+3*T-3*$+Y,V=3*C-6*T+3*$,X=-3*C+3*T,B=-A+3*N-3*F+Q,Z=3*A-6*N+3*F,G=-3*A+3*N,re=1e-8,z=1-re,ne=[];return p.solveCubic(9*(K*K+B*B),9*(K*V+Z*B),2*(V*V+Z*Z)+3*(X*K+G*B),X*V+Z*G,ne,re,z),ne.sort()}}}},new function(){function c(V,X,B,Z,G,re,z){var ne=!z&&B.getPrevious()===G,se=!z&&B!==G&&B.getNext()===G,ue=1e-8,ie=1-ue;if(Z!==null&&Z>=(ne?ue:0)&&Z<=(se?ie:1)&&re!==null&&re>=(se?ue:0)&&re<=(ne?ie:1)){var be=new ke(B,Z,null,z),Se=new ke(G,re,null,z);be._intersection=Se,Se._intersection=be,(!X||X(be))&&ke.insert(V,be,!0)}}function f(V,X,B,Z,G,re,z,ne,se,ue,ie,be,Se){if(++se>=4096||++ne>=40)return se;var Ae=1e-9,De=X[0],we=X[1],Ie=X[6],Fe=X[7],Ye=O.getSignedDistance,Ze=Ye(De,we,Ie,Fe,X[2],X[3]),Qe=Ye(De,we,Ie,Fe,X[4],X[5]),pt=Ze*Qe>0?3/4:4/9,gt=pt*Math.min(0,Ze,Qe),At=pt*Math.max(0,Ze,Qe),kt=Ye(De,we,Ie,Fe,V[0],V[1]),at=Ye(De,we,Ie,Fe,V[2],V[3]),lt=Ye(De,we,Ie,Fe,V[4],V[5]),Tt=Ye(De,we,Ie,Fe,V[6],V[7]),Ot=b(kt,at,lt,Tt),Be=Ot[0],dt=Ot[1],vt,Lt;if(Ze===0&&Qe===0&&kt===0&&at===0&&lt===0&&Tt===0||(vt=_(Be,dt,gt,At))==null||(Lt=_(Be.reverse(),dt.reverse(),gt,At))==null)return se;var It=ue+(ie-ue)*vt,$t=ue+(ie-ue)*Lt;if(Math.max(Se-be,$t-It)<Ae){var nn=(It+$t)/2,rn=(be+Se)/2;c(G,re,z?Z:B,z?rn:nn,z?B:Z,z?nn:rn)}else{V=Ee.getPart(V,vt,Lt);var vn=Se-be;if(Lt-vt>.8)if($t-It>vn){var Cn=Ee.subdivide(V,.5),nn=(It+$t)/2;se=f(X,Cn[0],Z,B,G,re,!z,ne,se,be,Se,It,nn),se=f(X,Cn[1],Z,B,G,re,!z,ne,se,be,Se,nn,$t)}else{var Cn=Ee.subdivide(X,.5),rn=(be+Se)/2;se=f(Cn[0],V,Z,B,G,re,!z,ne,se,be,rn,It,$t),se=f(Cn[1],V,Z,B,G,re,!z,ne,se,rn,Se,It,$t)}else vn===0||vn>=Ae?se=f(X,V,Z,B,G,re,!z,ne,se,be,Se,It,$t):se=f(V,X,B,Z,G,re,z,ne,se,It,$t,be,Se)}return se}function b(V,X,B,Z){var G=[0,V],re=[1/3,X],z=[2/3,B],ne=[1,Z],se=X-(2*V+Z)/3,ue=B-(V+2*Z)/3,ie;if(se*ue<0)ie=[[G,re,ne],[G,z,ne]];else{var be=se/ue;ie=[be>=2?[G,re,ne]:be<=.5?[G,z,ne]:[G,re,z,ne],[G,ne]]}return(se||ue)<0?ie.reverse():ie}function _(V,X,B,Z){return V[0][1]<B?C(V,!0,B):X[0][1]>Z?C(X,!1,Z):V[0][0]}function C(V,X,B){for(var Z=V[0][0],G=V[0][1],re=1,z=V.length;re<z;re++){var ne=V[re][0],se=V[re][1];if(X?se>=B:se<=B)return se===B?ne:Z+(B-G)*(ne-Z)/(se-G);Z=ne,G=se}return null}function A(V,X,B,Z,G){var re=p.isZero;if(re(Z)&&re(G)){var z=Ee.getTimeOf(V,new g(X,B));return z===null?[]:[z]}for(var ne=Math.atan2(-G,Z),se=Math.sin(ne),ue=Math.cos(ne),ie=[],be=[],Se=0;Se<8;Se+=2){var Ae=V[Se]-X,De=V[Se+1]-B;ie.push(Ae*ue-De*se,Ae*se+De*ue)}return Ee.solveCubic(ie,1,0,be,0,1),be}function T(V,X,B,Z,G,re,z){for(var ne=X[0],se=X[1],ue=X[6],ie=X[7],be=A(V,ne,se,ue-ne,ie-se),Se=0,Ae=be.length;Se<Ae;Se++){var De=be[Se],we=Ee.getPoint(V,De),Ie=Ee.getTimeOf(X,we);Ie!==null&&c(G,re,z?Z:B,z?Ie:De,z?B:Z,z?De:Ie)}}function N(V,X,B,Z,G,re){var z=O.intersect(V[0],V[1],V[6],V[7],X[0],X[1],X[6],X[7]);z&&c(G,re,B,Ee.getTimeOf(V,z),Z,Ee.getTimeOf(X,z))}function $(V,X,B,Z,G,re){var z=1e-12,ne=Math.min,se=Math.max;if(se(V[0],V[2],V[4],V[6])+z>ne(X[0],X[2],X[4],X[6])&&ne(V[0],V[2],V[4],V[6])-z<se(X[0],X[2],X[4],X[6])&&se(V[1],V[3],V[5],V[7])+z>ne(X[1],X[3],X[5],X[7])&&ne(V[1],V[3],V[5],V[7])-z<se(X[1],X[3],X[5],X[7])){var ue=Q(V,X);if(ue)for(var ie=0;ie<2;ie++){var be=ue[ie];c(G,re,B,be[0],Z,be[1],!0)}else{var Se=Ee.isStraight(V),Ae=Ee.isStraight(X),De=Se&&Ae,we=Se&&!Ae,Ie=G.length;if((De?N:Se||Ae?T:f)(we?X:V,we?V:X,we?Z:B,we?B:Z,G,re,we,0,0,0,1,0,1),!De||G.length===Ie)for(var ie=0;ie<4;ie++){var Fe=ie>>1,Ye=ie&1,Ze=Fe*6,Qe=Ye*6,pt=new g(V[Ze],V[Ze+1]),gt=new g(X[Qe],X[Qe+1]);pt.isClose(gt,z)&&c(G,re,B,Fe,Z,Ye)}}}return G}function F(V,X,B,Z){var G=Ee.classify(V);if(G.type==="loop"){var re=G.roots;c(B,Z,X,re[0],X,re[1])}return B}function Y(V,X,B,Z,G,re){var z=1e-7,ne=!X;ne&&(X=V);for(var se=V.length,ue=X.length,ie=new Array(se),be=ne?ie:new Array(ue),Se=[],Ae=0;Ae<se;Ae++)ie[Ae]=V[Ae].getValues(Z);if(!ne)for(var Ae=0;Ae<ue;Ae++)be[Ae]=X[Ae].getValues(G);for(var De=d.findCurveBoundsCollisions(ie,be,z),we=0;we<se;we++){var Ie=V[we],Fe=ie[we];ne&&F(Fe,Ie,Se,B);var Ye=De[we];if(Ye)for(var Ze=0;Ze<Ye.length;Ze++){if(re&&Se.length)return Se;var Qe=Ye[Ze];if(!ne||Qe>we){var pt=X[Qe],gt=be[Qe];$(Fe,gt,Ie,pt,Se,B)}}}return Se}function Q(V,X){function B(Tt){var Ot=Tt[6]-Tt[0],Be=Tt[7]-Tt[1];return Ot*Ot+Be*Be}var Z=Math.abs,G=O.getDistance,re=1e-8,z=1e-7,ne=Ee.isStraight(V),se=Ee.isStraight(X),ue=ne&&se,ie=B(V)<B(X),be=ie?X:V,Se=ie?V:X,Ae=be[0],De=be[1],we=be[6]-Ae,Ie=be[7]-De;if(G(Ae,De,we,Ie,Se[0],Se[1],!0)<z&&G(Ae,De,we,Ie,Se[6],Se[7],!0)<z)!ue&&G(Ae,De,we,Ie,be[2],be[3],!0)<z&&G(Ae,De,we,Ie,be[4],be[5],!0)<z&&G(Ae,De,we,Ie,Se[2],Se[3],!0)<z&&G(Ae,De,we,Ie,Se[4],Se[5],!0)<z&&(ne=se=ue=!0);else if(ue)return null;if(ne^se)return null;for(var Fe=[V,X],Ye=[],Ze=0;Ze<4&&Ye.length<2;Ze++){var Qe=Ze&1,pt=Qe^1,gt=Ze>>1,At=Ee.getTimeOf(Fe[Qe],new g(Fe[pt][gt?6:0],Fe[pt][gt?7:1]));if(At!=null){var kt=Qe?[gt,At]:[At,gt];(!Ye.length||Z(kt[0]-Ye[0][0])>re&&Z(kt[1]-Ye[0][1])>re)&&Ye.push(kt)}if(Ze>2&&!Ye.length)break}if(Ye.length!==2)Ye=null;else if(!ue){var at=Ee.getPart(V,Ye[0][0],Ye[1][0]),lt=Ee.getPart(X,Ye[0][1],Ye[1][1]);(Z(lt[2]-at[2])>z||Z(lt[3]-at[3])>z||Z(lt[4]-at[4])>z||Z(lt[5]-at[5])>z)&&(Ye=null)}return Ye}function K(V,X){var B=V[0],Z=V[1],G=V[2],re=V[3],z=V[4],ne=V[5],se=V[6],ue=V[7],ie=X.normalize(),be=ie.x,Se=ie.y,Ae=3*se-9*z+9*G-3*B,De=3*ue-9*ne+9*re-3*Z,we=6*z-12*G+6*B,Ie=6*ne-12*re+6*Z,Fe=3*G-3*B,Ye=3*re-3*Z,Ze=2*Ae*Se-2*De*be,Qe=[];if(Math.abs(Ze)<p.CURVETIME_EPSILON){var pt=Ae*Ye-De*Fe,Ze=Ae*Ie-De*we;if(Ze!=0){var gt=-pt/Ze;gt>=0&&gt<=1&&Qe.push(gt)}}else{var At=(we*we-4*Ae*Fe)*Se*Se+(-2*we*Ie+4*De*Fe+4*Ae*Ye)*be*Se+(Ie*Ie-4*De*Ye)*be*be,kt=we*Se-Ie*be;if(At>=0&&Ze!=0){var at=Math.sqrt(At),lt=-(kt+at)/Ze,Tt=(-kt+at)/Ze;lt>=0&&lt<=1&&Qe.push(lt),Tt>=0&&Tt<=1&&Qe.push(Tt)}}return Qe}return{getIntersections:function(V){var X=this.getValues(),B=V&&V!==this&&V.getValues();return B?$(X,B,this,V,[]):F(X,this,[])},statics:{getOverlaps:Q,getIntersections:Y,getCurveLineIntersections:A,getTimesWithTangent:K}}}),ke=s.extend({_class:"CurveLocation",initialize:function(f,b,_,C,A){if(b>=.99999999){var T=f.getNext();T&&(b=0,f=T)}this._setCurve(f),this._time=b,this._point=_||f.getPointAtTime(b),this._overlap=C,this._distance=A,this._intersection=this._next=this._previous=null},_setPath:function(c){this._path=c,this._version=c?c._version:0},_setCurve:function(c){this._setPath(c._path),this._curve=c,this._segment=null,this._segment1=c._segment1,this._segment2=c._segment2},_setSegment:function(c){var f=c.getCurve();f?this._setCurve(f):(this._setPath(c._path),this._segment1=c,this._segment2=null),this._segment=c,this._time=c===this._segment1?0:1,this._point=c._point.clone()},getSegment:function(){var c=this._segment;if(!c){var f=this.getCurve(),b=this.getTime();b===0?c=f._segment1:b===1?c=f._segment2:b!=null&&(c=f.getPartLength(0,b)<f.getPartLength(b,1)?f._segment1:f._segment2),this._segment=c}return c},getCurve:function(){var c=this._path,f=this;c&&c._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function b(_){var C=_&&_.getCurve();if(C&&(f._time=C.getTimeOf(f._point))!=null)return f._setCurve(C),C}return this._curve||b(this._segment)||b(this._segment1)||b(this._segment2.getPrevious())},getPath:function(){var c=this.getCurve();return c&&c._path},getIndex:function(){var c=this.getCurve();return c&&c.getIndex()},getTime:function(){var c=this.getCurve(),f=this._time;return c&&f==null?this._time=c.getTimeOf(this._point):f},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var c=this._offset;if(c==null){c=0;var f=this.getPath(),b=this.getIndex();if(f&&b!=null)for(var _=f.getCurves(),C=0;C<b;C++)c+=_[C].getLength();this._offset=c+=this.getCurveOffset()}return c},getCurveOffset:function(){var c=this._curveOffset;if(c==null){var f=this.getCurve(),b=this.getTime();this._curveOffset=c=b!=null&&f&&f.getPartLength(0,b)}return c},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var c=this.getCurve(),f=c&&c.divideAtTime(this.getTime());return f&&this._setSegment(f._segment1),f},split:function(){var c=this.getCurve(),f=c._path,b=c&&c.splitAtTime(this.getTime());return b&&this._setSegment(f.getLastSegment()),b},equals:function(c,f){var b=this===c;if(!b&&c instanceof ke){var _=this.getCurve(),C=c.getCurve(),A=_._path,T=C._path;if(A===T){var N=Math.abs,$=1e-7,F=N(this.getOffset()-c.getOffset()),Y=!f&&this._intersection,Q=!f&&c._intersection;b=(F<$||A&&N(A.getLength()-F)<$)&&(!Y&&!Q||Y&&Q&&Y.equals(Q,!0))}}return b},toString:function(){var c=[],f=this.getPoint(),b=h.instance;f&&c.push("point: "+f);var _=this.getIndex();_!=null&&c.push("index: "+_);var C=this.getTime();return C!=null&&c.push("time: "+b.number(C)),this._distance!=null&&c.push("distance: "+b.number(this._distance)),"{ "+c.join(", ")+" }"},isTouching:function(){var c=this._intersection;if(c&&this.getTangent().isCollinear(c.getTangent())){var f=this.getCurve(),b=c.getCurve();return!(f.isStraight()&&b.isStraight()&&f.getLine().intersect(b.getLine()))}return!1},isCrossing:function(){var c=this._intersection;if(!c)return!1;var f=this.getTime(),b=c.getTime(),_=1e-8,C=1-_,A=f>=_&&f<=C,T=b>=_&&b<=C;if(A&&T)return!this.isTouching();var N=this.getCurve(),$=N&&f<_?N.getPrevious():N,F=c.getCurve(),Y=F&&b<_?F.getPrevious():F;if(f>C&&(N=N.getNext()),b>C&&(F=F.getNext()),!$||!N||!Y||!F)return!1;var Q=[];function K(be,Se){var Ae=be.getValues(),De=Ee.classify(Ae).roots||Ee.getPeaks(Ae),we=De.length,Ie=Ee.getLength(Ae,Se&&we?De[we-1]:0,!Se&&we?De[0]:1);Q.push(we?Ie:Ie/32)}function V(be,Se,Ae){return Se<Ae?be>Se&&be<Ae:be>Se||be<Ae}A||(K($,!0),K(N,!1)),T||(K(Y,!0),K(F,!1));var X=this.getPoint(),B=Math.min.apply(Math,Q),Z=A?N.getTangentAtTime(f):N.getPointAt(B).subtract(X),G=A?Z.negate():$.getPointAt(-B).subtract(X),re=T?F.getTangentAtTime(b):F.getPointAt(B).subtract(X),z=T?re.negate():Y.getPointAt(-B).subtract(X),ne=G.getAngle(),se=Z.getAngle(),ue=z.getAngle(),ie=re.getAngle();return!!(A?V(ne,ue,ie)^V(se,ue,ie)&&V(ne,ie,ue)^V(se,ie,ue):V(ue,ne,se)^V(ie,ne,se)&&V(ue,se,ne)^V(ie,se,ne))},hasOverlap:function(){return!!this._overlap}},s.each(Ee._evaluateMethods,function(c){var f=c+"At";this[c]=function(){var b=this.getCurve(),_=this.getTime();return _!=null&&b&&b[f](_,!0)}},{preserve:!0}),new function(){function c(f,b,_){var C=f.length,A=0,T=C-1;function N(X,B){for(var Z=X+B;Z>=-1&&Z<=C;Z+=B){var G=f[(Z%C+C)%C];if(!b.getPoint().isClose(G.getPoint(),1e-7))break;if(b.equals(G))return G}return null}for(;A<=T;){var $=A+T>>>1,F=f[$],Y;if(_&&(Y=b.equals(F)?F:N($,-1)||N($,1)))return b._overlap&&(Y._overlap=Y._intersection._overlap=!0),Y;var Q=b.getPath(),K=F.getPath(),V=Q!==K?Q._id-K._id:b.getIndex()+b.getTime()-(F.getIndex()+F.getTime());V<0?T=$-1:A=$+1}return f.splice(A,0,b),b}return{statics:{insert:c,expand:function(f){for(var b=f.slice(),_=f.length-1;_>=0;_--)c(b,f[_]._intersection,!1);return b}}}}),ze=E.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(c){var f,b,_;if(s.isPlainObject(c)?(b=c.segments,f=c.pathData):Array.isArray(c)?b=c:typeof c=="string"&&(f=c),b){var C=b[0];_=C&&Array.isArray(C[0])}else f&&(_=(f.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(f));var A=_?Re:xe;return new A(c)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(c){this.isClockwise()!=(c=!!c)&&this.reverse()},setPathData:function(c){var f=c&&c.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),b,_=!1,C,A,T=new g,N=new g;function $(z,ne){var se=+b[z];return _&&(se+=T[ne]),se}function F(z){return new g($(z,"x"),$(z+1,"y"))}this.clear();for(var Y=0,Q=f&&f.length;Y<Q;Y++){var K=f[Y],V=K[0],X=V.toLowerCase();b=K.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var B=b&&b.length;switch(_=V===X,C==="z"&&!/[mz]/.test(X)&&this.moveTo(T),X){case"m":case"l":for(var Z=X==="m",G=0;G<B;G+=2)this[Z?"moveTo":"lineTo"](T=F(G)),Z&&(N=T,Z=!1);A=T;break;case"h":case"v":var re=X==="h"?"x":"y";T=T.clone();for(var G=0;G<B;G++)T[re]=$(G,re),this.lineTo(T);A=T;break;case"c":for(var G=0;G<B;G+=6)this.cubicCurveTo(F(G),A=F(G+2),T=F(G+4));break;case"s":for(var G=0;G<B;G+=4)this.cubicCurveTo(/[cs]/.test(C)?T.multiply(2).subtract(A):T,A=F(G),T=F(G+2)),C=X;break;case"q":for(var G=0;G<B;G+=4)this.quadraticCurveTo(A=F(G),T=F(G+2));break;case"t":for(var G=0;G<B;G+=2)this.quadraticCurveTo(A=/[qt]/.test(C)?T.multiply(2).subtract(A):T,T=F(G)),C=X;break;case"a":for(var G=0;G<B;G+=7)this.arcTo(T=F(G+5),new w(+b[G],+b[G+1]),+b[G+2],+b[G+4],+b[G+3]);break;case"z":this.closePath(1e-12),T=N;break}C=X}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(c){var f=c.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(c):{};return f.onPath||!!(this.getFillRule()==="evenodd"?f.windingL&1||f.windingR&1:f.winding)},getIntersections:function(c,f,b,_){var C=this===c||!c,A=this._matrix._orNullIfIdentity(),T=C?A:(b||c._matrix)._orNullIfIdentity();return C||this.getBounds(A).intersects(c.getBounds(T),1e-12)?Ee.getIntersections(this.getCurves(),!C&&c.getCurves(),f,A,T,_):[]},getCrossings:function(c){return this.getIntersections(c,function(f){return f.isCrossing()})},getNearestLocation:function(){for(var c=g.read(arguments),f=this.getCurves(),b=1/0,_=null,C=0,A=f.length;C<A;C++){var T=f[C].getNearestLocation(c);T._distance<b&&(b=T._distance,_=T)}return _},getNearestPoint:function(){var c=this.getNearestLocation.apply(this,arguments);return c&&c.getPoint()},interpolate:function(c,f,b){var _=!this._children,C=_?"_segments":"_children",A=c[C],T=f[C],N=this[C];if(!A||!T||A.length!==T.length)throw new Error("Invalid operands in interpolate() call: "+c+", "+f);var $=N.length,F=T.length;if($<F)for(var Y=_?H:xe,Q=$;Q<F;Q++)this.add(new Y);else $>F&&this[_?"removeSegments":"removeChildren"](F,$);for(var Q=0;Q<F;Q++)N[Q].interpolate(A[Q],T[Q],b);_&&(this.setClosed(c._closed),this._changed(9))},compare:function(c){var f=!1;if(c){var b=this._children||[this],_=c._children?c._children.slice():[c],C=b.length,A=_.length,T=[],N=0;f=!0;for(var $=d.findItemBoundsCollisions(b,_,p.GEOMETRIC_EPSILON),F=C-1;F>=0&&f;F--){var Y=b[F];f=!1;var Q=$[F];if(Q)for(var K=Q.length-1;K>=0&&!f;K--)Y.compare(_[Q[K]])&&(T[Q[K]]||(T[Q[K]]=!0,N++),f=!0)}f=f&&N===A}return f}}),xe=ze.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(f){this._closed=!1,this._segments=[],this._version=0;var b=arguments,_=Array.isArray(f)?typeof f[0]=="object"?f:b:f&&f.size===n&&(f.x!==n||f.point!==n)?b:null;_&&_.length>0?this.setSegments(_):(this._curves=n,this._segmentSelection=0,!_&&typeof f=="string"&&(this.setPathData(f),f=null)),this._initialize(!_&&f)},_equals:function(c){return this._closed===c._closed&&s.equals(this._segments,c._segments)},copyContent:function(c){this.setSegments(c._segments),this._closed=c._closed},_changed:function c(f){if(c.base.call(this,f),f&8){if(this._length=this._area=n,f&32)this._version++;else if(this._curves)for(var b=0,_=this._curves.length;b<_;b++)this._curves[b]._changed()}else f&64&&(this._bounds=n)},getStyle:function(){var c=this._parent;return(c instanceof Re?c:this)._style},getSegments:function(){return this._segments},setSegments:function(c){var f=this.isFullySelected(),b=c&&c.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,b){var _=c[b-1];typeof _=="boolean"&&(this.setClosed(_),b--),this._add(H.readList(c,0,{},b))}f&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var c=this._curves,f=this._segments;if(!c){var b=this._countCurves();c=this._curves=new Array(b);for(var _=0;_<b;_++)c[_]=new Ee(this,f[_],f[_+1]||f[0])}return c},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var c=this.getCurves();return c[c.length-1]},isClosed:function(){return this._closed},setClosed:function(c){if(this._closed!=(c=!!c)){if(this._closed=c,this._curves){var f=this._curves.length=this._countCurves();c&&(this._curves[f-1]=new Ee(this,this._segments[f-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(c,f){var b=this._segments,_=b.length,C=new h(f),A=new Array(6),T=!0,N,$,F,Y,Q,K,V,X,B=[];function Z(re,z){if(re._transformCoordinates(c,A),N=A[0],$=A[1],T)B.push("M"+C.pair(N,$)),T=!1;else if(Q=A[2],K=A[3],Q===N&&K===$&&V===F&&X===Y){if(!z){var ne=N-F,se=$-Y;B.push(ne===0?"v"+C.number(se):se===0?"h"+C.number(ne):"l"+C.pair(ne,se))}}else B.push("c"+C.pair(V-F,X-Y)+" "+C.pair(Q-F,K-Y)+" "+C.pair(N-F,$-Y));F=N,Y=$,V=A[4],X=A[5]}if(!_)return"";for(var G=0;G<_;G++)Z(b[G]);return this._closed&&_>0&&(Z(b[0],!0),B.push("z")),B.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(c){for(var f=this._segments,b=new Array(6),_=0,C=f.length;_<C;_++)f[_]._transformCoordinates(c,b,!0);return!0},_add:function(c,T){for(var b=this._segments,_=this._curves,C=c.length,A=T==null,T=A?b.length:T,N=0;N<C;N++){var $=c[N];$._path&&($=c[N]=$.clone()),$._path=this,$._index=T+N,$._selection&&this._updateSelection($,0,$._selection)}if(A)s.push(b,c);else{b.splice.apply(b,[T,0].concat(c));for(var N=T+C,F=b.length;N<F;N++)b[N]._index=N}if(_){var Y=this._countCurves(),Q=T>0&&T+C-1===Y?T-1:T,K=Q,V=Math.min(Q+C,Y);c._curves&&(_.splice.apply(_,[Q,0].concat(c._curves)),K+=c._curves.length);for(var N=K;N<V;N++)_.splice(N,0,new Ee(this,null,null));this._adjustCurves(Q,V)}return this._changed(41),c},_adjustCurves:function(c,f){for(var b=this._segments,_=this._curves,C,A=c;A<f;A++)C=_[A],C._path=this,C._segment1=b[A],C._segment2=b[A+1]||b[0],C._changed();(C=_[this._closed&&!c?b.length-1:c-1])&&(C._segment2=b[c]||b[0],C._changed()),(C=_[f])&&(C._segment1=b[f],C._changed())},_countCurves:function(){var c=this._segments.length;return!this._closed&&c>0?c-1:c},add:function(c){var f=arguments;return f.length>1&&typeof c!="number"?this._add(H.readList(f)):this._add([H.read(f)])[0]},insert:function(c,f){var b=arguments;return b.length>2&&typeof f!="number"?this._add(H.readList(b,1),c):this._add([H.read(b,1)],c)[0]},addSegment:function(){return this._add([H.read(arguments)])[0]},insertSegment:function(c){return this._add([H.read(arguments,1)],c)[0]},addSegments:function(c){return this._add(H.readList(c))},insertSegments:function(c,f){return this._add(H.readList(f),c)},removeSegment:function(c){return this.removeSegments(c,c+1)[0]||null},removeSegments:function(c,f,b){c=c||0,f=s.pick(f,this._segments.length);var _=this._segments,C=this._curves,A=_.length,T=_.splice(c,f-c),N=T.length;if(!N)return T;for(var $=0;$<N;$++){var F=T[$];F._selection&&this._updateSelection(F,F._selection,0),F._index=F._path=null}for(var $=c,Y=_.length;$<Y;$++)_[$]._index=$;if(C){for(var Q=c>0&&f===A+(this._closed?1:0)?c-1:c,C=C.splice(Q,N),$=C.length-1;$>=0;$--)C[$]._path=null;b&&(T._curves=C.slice(1)),this._adjustCurves(Q,Q)}return this._changed(41),T},clear:"#removeSegments",hasHandles:function(){for(var c=this._segments,f=0,b=c.length;f<b;f++)if(c[f].hasHandles())return!0;return!1},clearHandles:function(){for(var c=this._segments,f=0,b=c.length;f<b;f++)c[f].clearHandles()},getLength:function(){if(this._length==null){for(var c=this.getCurves(),f=0,b=0,_=c.length;b<_;b++)f+=c[b].getLength();this._length=f}return this._length},getArea:function(){var c=this._area;if(c==null){var f=this._segments,b=this._closed;c=0;for(var _=0,C=f.length;_<C;_++){var A=_+1===C;c+=Ee.getArea(Ee.getValues(f[_],f[A?0:_+1],null,A&&!b))}this._area=c}return c},isFullySelected:function(){var c=this._segments.length;return this.isSelected()&&c>0&&this._segmentSelection===c*7},setFullySelected:function(c){c&&this._selectSegments(!0),this.setSelected(c)},setSelection:function c(f){f&1||this._selectSegments(!1),c.base.call(this,f)},_selectSegments:function(c){var f=this._segments,b=f.length,_=c?7:0;this._segmentSelection=_*b;for(var C=0;C<b;C++)f[C]._selection=_},_updateSelection:function(c,f,b){c._selection=b;var _=this._segmentSelection+=b-f;_>0&&this.setSelected(!0)},divideAt:function(c){var f=this.getLocationAt(c),b;return f&&(b=f.getCurve().divideAt(f.getCurveOffset()))?b._segment1:null},splitAt:function(c){var f=this.getLocationAt(c),b=f&&f.index,_=f&&f.time,C=1e-8,A=1-C;_>A&&(b++,_=0);var T=this.getCurves();if(b>=0&&b<T.length){_>=C&&T[b++].divideAtTime(_);var N=this.removeSegments(b,this._segments.length,!0),$;return this._closed?(this.setClosed(!1),$=this):($=new xe(E.NO_INSERT),$.insertAbove(this),$.copyAttributes(this)),$._add(N,0),this.addSegment(N[0]),$}return null},split:function(c,f){var b,_=f===n?c:(b=this.getCurves()[c])&&b.getLocationAtTime(f);return _!=null?this.splitAt(_):null},join:function(c,f){var b=f||0;if(c&&c!==this){var _=c._segments,C=this.getLastSegment(),A=c.getLastSegment();if(!A)return this;C&&C._point.isClose(A._point,b)&&c.reverse();var T=c.getFirstSegment();if(C&&C._point.isClose(T._point,b))C.setHandleOut(T._handleOut),this._add(_.slice(1));else{var N=this.getFirstSegment();N&&N._point.isClose(T._point,b)&&c.reverse(),A=c.getLastSegment(),N&&N._point.isClose(A._point,b)?(N.setHandleIn(A._handleIn),this._add(_.slice(0,_.length-1),0)):this._add(_.slice())}c._closed&&this._add([_[0]]),c.remove()}var $=this.getFirstSegment(),F=this.getLastSegment();return $!==F&&$._point.isClose(F._point,b)&&($.setHandleIn(F._handleIn),F.remove(),this.setClosed(!0)),this},reduce:function(c){for(var f=this.getCurves(),b=c&&c.simplify,_=b?1e-7:0,C=f.length-1;C>=0;C--){var A=f[C];!A.hasHandles()&&(!A.hasLength(_)||b&&A.isCollinear(A.getNext()))&&A.remove()}return this},reverse:function(){this._segments.reverse();for(var c=0,f=this._segments.length;c<f;c++){var b=this._segments[c],_=b._handleIn;b._handleIn=b._handleOut,b._handleOut=_,b._index=c}this._curves=null,this._changed(9)},flatten:function(c){for(var f=new _e(this,c||.25,256,!0),b=f.parts,_=b.length,C=[],A=0;A<_;A++)C.push(new H(b[A].curve.slice(0,2)));!this._closed&&_>0&&C.push(new H(b[_-1].curve.slice(6))),this.setSegments(C)},simplify:function(c){var f=new Pe(this).fit(c||2.5);return f&&this.setSegments(f),!!f},smooth:function(c){var f=this,b=c||{},_=b.type||"asymmetric",C=this._segments,A=C.length,T=this._closed;function N(Be,dt){var vt=Be&&Be.index;if(vt!=null){var Lt=Be.path;if(Lt&&Lt!==f)throw new Error(Be._class+" "+vt+" of "+Lt+" is not part of "+f);dt&&Be instanceof Ee&&vt++}else vt=typeof Be=="number"?Be:dt;return Math.min(vt<0&&T?vt%A:vt<0?vt+A:vt,A-1)}var $=T&&b.from===n&&b.to===n,F=N(b.from,0),Y=N(b.to,A-1);if(F>Y)if(T)F-=A;else{var Q=F;F=Y,Y=Q}if(/^(?:asymmetric|continuous)$/.test(_)){var K=_==="asymmetric",V=Math.min,X=Y-F+1,B=X-1,Z=$?V(X,4):1,G=Z,re=Z,z=[];if(T||(G=V(1,F),re=V(1,A-Y-1)),B+=G+re,B<=1)return;for(var ne=0,se=F-G;ne<=B;ne++,se++)z[ne]=C[(se<0?se+A:se)%A]._point;for(var ue=z[0]._x+2*z[1]._x,ie=z[0]._y+2*z[1]._y,be=2,Se=B-1,Ae=[ue],De=[ie],we=[be],Ie=[],Fe=[],ne=1;ne<B;ne++){var Ye=ne<Se,Ze=Ye||K?1:2,Qe=Ye?4:K?2:7,pt=Ye?4:K?3:8,gt=Ye?2:K?0:1,At=Ze/be;be=we[ne]=Qe-At,ue=Ae[ne]=pt*z[ne]._x+gt*z[ne+1]._x-At*ue,ie=De[ne]=pt*z[ne]._y+gt*z[ne+1]._y-At*ie}Ie[Se]=Ae[Se]/we[Se],Fe[Se]=De[Se]/we[Se];for(var ne=B-2;ne>=0;ne--)Ie[ne]=(Ae[ne]-Ie[ne+1])/we[ne],Fe[ne]=(De[ne]-Fe[ne+1])/we[ne];Ie[B]=(3*z[B]._x-Ie[Se])/2,Fe[B]=(3*z[B]._y-Fe[Se])/2;for(var ne=G,kt=B-re,se=F;ne<=kt;ne++,se++){var at=C[se<0?se+A:se],lt=at._point,Tt=Ie[ne]-lt._x,Ot=Fe[ne]-lt._y;($||ne<kt)&&at.setHandleOut(Tt,Ot),($||ne>G)&&at.setHandleIn(-Tt,-Ot)}}else for(var ne=F;ne<=Y;ne++)C[ne<0?ne+A:ne].smooth(b,!$&&ne===F,!$&&ne===Y)},toShape:function(c){if(!this._closed)return null;var f=this._segments,b,_,C,A;function T(K,V){var X=f[K],B=X.getNext(),Z=f[V],G=Z.getNext();return X._handleOut.isZero()&&B._handleIn.isZero()&&Z._handleOut.isZero()&&G._handleIn.isZero()&&B._point.subtract(X._point).isCollinear(G._point.subtract(Z._point))}function N(K){var V=f[K],X=V.getPrevious(),B=V.getNext();return X._handleOut.isZero()&&V._handleIn.isZero()&&V._handleOut.isZero()&&B._handleIn.isZero()&&V._point.subtract(X._point).isOrthogonal(B._point.subtract(V._point))}function $(K){var V=f[K],X=V.getNext(),B=V._handleOut,Z=X._handleIn,G=.5522847498307936;if(B.isOrthogonal(Z)){var re=V._point,z=X._point,ne=new O(re,B,!0).intersect(new O(z,Z,!0),!0);return ne&&p.isZero(B.getLength()/ne.subtract(re).getLength()-G)&&p.isZero(Z.getLength()/ne.subtract(z).getLength()-G)}return!1}function F(K,V){return f[K]._point.getDistance(f[V]._point)}if(!this.hasHandles()&&f.length===4&&T(0,2)&&T(1,3)&&N(1)?(b=R.Rectangle,_=new w(F(0,3),F(0,1)),A=f[1]._point.add(f[2]._point).divide(2)):f.length===8&&$(0)&&$(2)&&$(4)&&$(6)&&T(1,5)&&T(3,7)?(b=R.Rectangle,_=new w(F(1,6),F(0,3)),C=_.subtract(new w(F(0,7),F(1,2))).divide(2),A=f[3]._point.add(f[4]._point).divide(2)):f.length===4&&$(0)&&$(1)&&$(2)&&$(3)&&(p.isZero(F(0,2)-F(1,3))?(b=R.Circle,C=F(0,2)/2):(b=R.Ellipse,C=new w(F(2,0)/2,F(3,1)/2)),A=f[1]._point),b){var Y=this.getPosition(!0),Q=new b({center:Y,size:_,radius:C,insert:!1});return Q.copyAttributes(this,!0),Q._matrix.prepend(this._matrix),Q.rotate(A.subtract(Y).getAngle()+90),(c===n||c)&&Q.insertAbove(this),Q}return null},toPath:"#clone",compare:function c(f){if(!f||f instanceof Re)return c.base.call(this,f);var b=this.getCurves(),_=f.getCurves(),C=b.length,A=_.length;if(!C||!A)return C==A;for(var T=b[0].getValues(),N=[],$=0,F,Y=0,Q,K=0;K<A;K++){var Z=_[K].getValues();N.push(Z);var V=Ee.getOverlaps(T,Z);if(V){F=!K&&V[0][0]>0?A-1:K,Q=V[0][1];break}}for(var X=Math.abs,B=1e-8,Z=N[F],G;T&&Z;){var V=Ee.getOverlaps(T,Z);if(V){var re=V[0][0];if(X(re-Y)<B){Y=V[1][0],Y===1&&(T=++$<C?b[$].getValues():null,Y=0);var z=V[0][1];if(X(z-Q)<B){if(G||(G=[F,z]),Q=V[1][1],Q===1&&(++F>=A&&(F=0),Z=N[F]||_[F].getValues(),Q=0),!T)return G[0]===F&&G[1]===Q;continue}}}break}return!1},_hitTestSelf:function(c,f,b,_){var C=this,A=this.getStyle(),T=this._segments,N=T.length,$=this._closed,F=f._tolerancePadding,Y=F,Q,K,V,X,B,Z,G=f.stroke&&A.hasStroke(),re=f.fill&&A.hasFill(),z=f.curves,ne=G?A.getStrokeWidth()/2:re&&f.tolerance>0||z?0:null;ne!==null&&(ne>0?(Q=A.getStrokeJoin(),K=A.getStrokeCap(),V=A.getMiterLimit(),Y=Y.add(xe._getStrokePadding(ne,_))):Q=K="round");function se(Ie,Fe){return c.subtract(Ie).divide(Fe).length<=1}function ue(Ie,Fe,Ye){if(!f.selected||Fe.isSelected()){var Ze=Ie._point;if(Fe!==Ze&&(Fe=Fe.add(Ze)),se(Fe,Y))return new me(Ye,C,{segment:Ie,point:Fe})}}function ie(Ie,Fe){return(Fe||f.segments)&&ue(Ie,Ie._point,"segment")||!Fe&&f.handles&&(ue(Ie,Ie._handleIn,"handle-in")||ue(Ie,Ie._handleOut,"handle-out"))}function be(Ie){X.add(Ie)}function Se(Ie){var Fe=$||Ie._index>0&&Ie._index<N-1;if((Fe?Q:K)==="round")return se(Ie._point,Y);if(X=new xe({internal:!0,closed:!0}),Fe?Ie.isSmooth()||xe._addBevelJoin(Ie,Q,ne,V,null,_,be,!0):K==="square"&&xe._addSquareCap(Ie,K,ne,null,_,be,!0),!X.isEmpty()){var Ye;return X.contains(c)||(Ye=X.getNearestLocation(c))&&se(Ye.getPoint(),F)}}if(f.ends&&!f.segments&&!$){if(Z=ie(T[0],!0)||ie(T[N-1],!0))return Z}else if(f.segments||f.handles){for(var Ae=0;Ae<N;Ae++)if(Z=ie(T[Ae]))return Z}if(ne!==null){if(B=this.getNearestLocation(c),B){var De=B.getTime();De===0||De===1&&N>1?Se(B.getSegment())||(B=null):se(B.getPoint(),Y)||(B=null)}if(!B&&Q==="miter"&&N>1)for(var Ae=0;Ae<N;Ae++){var we=T[Ae];if(c.getDistance(we._point)<=V*ne&&Se(we)){B=we.getLocation();break}}}return!B&&re&&this._contains(c)||B&&!G&&!z?new me("fill",this):B?new me(G?"stroke":"curve",this,{location:B,point:B.getPoint()}):null}},s.each(Ee._evaluateMethods,function(c){this[c+"At"]=function(f){var b=this.getLocationAt(f);return b&&b[c]()}},{beans:!1,getLocationOf:function(){for(var c=g.read(arguments),f=this.getCurves(),b=0,_=f.length;b<_;b++){var C=f[b].getLocationOf(c);if(C)return C}return null},getOffsetOf:function(){var c=this.getLocationOf.apply(this,arguments);return c?c.getOffset():null},getLocationAt:function(c){if(typeof c=="number"){for(var f=this.getCurves(),b=0,_=0,C=f.length;_<C;_++){var A=b,T=f[_];if(b+=T.getLength(),b>c)return T.getLocationAt(c-A)}if(f.length>0&&c<=this.getLength())return new ke(f[f.length-1],1)}else if(c&&c.getPath&&c.getPath()===this)return c;return null},getOffsetsWithTangent:function(){var c=g.read(arguments);if(c.isZero())return[];for(var f=[],b=0,_=this.getCurves(),C=0,A=_.length;C<A;C++){for(var T=_[C],N=T.getTimesWithTangent(c),$=0,F=N.length;$<F;$++){var Y=b+T.getOffsetAtTime(N[$]);f.indexOf(Y)<0&&f.push(Y)}b+=T.length}return f}}),new function(){function c(b,_,C,A){if(A<=0)return;var T=A/2,N=A-2,$=T-1,F=new Array(6),Y,Q;function K(re){var z=F[re],ne=F[re+1];(Y!=z||Q!=ne)&&(b.beginPath(),b.moveTo(Y,Q),b.lineTo(z,ne),b.stroke(),b.beginPath(),b.arc(z,ne,T,0,Math.PI*2,!0),b.fill())}for(var V=0,X=_.length;V<X;V++){var B=_[V],Z=B._selection;if(B._transformCoordinates(C,F),Y=F[0],Q=F[1],Z&2&&K(2),Z&4&&K(4),b.fillRect(Y-T,Q-T,A,A),N>0&&!(Z&1)){var G=b.fillStyle;b.fillStyle="#ffffff",b.fillRect(Y-$,Q-$,N,N),b.fillStyle=G}}}function f(b,_,C){var A=_._segments,T=A.length,N=new Array(6),$=!0,F,Y,Q,K,V,X,B,Z;function G(z){if(C)z._transformCoordinates(C,N),F=N[0],Y=N[1];else{var ne=z._point;F=ne._x,Y=ne._y}if($)b.moveTo(F,Y),$=!1;else{if(C)V=N[2],X=N[3];else{var se=z._handleIn;V=F+se._x,X=Y+se._y}V===F&&X===Y&&B===Q&&Z===K?b.lineTo(F,Y):b.bezierCurveTo(B,Z,V,X,F,Y)}if(Q=F,K=Y,C)B=N[4],Z=N[5];else{var se=z._handleOut;B=Q+se._x,Z=K+se._y}}for(var re=0;re<T;re++)G(A[re]);_._closed&&T>0&&G(A[0])}return{_draw:function(b,_,C,A){var T=_.dontStart,N=_.dontFinish||_.clip,$=this.getStyle(),F=$.hasFill(),Y=$.hasStroke(),Q=$.getDashArray(),K=!$e.support.nativeDash&&Y&&Q&&Q.length;T||b.beginPath(),(F||Y&&!K||N)&&(f(b,this,A),this._closed&&b.closePath());function V(z){return Q[(z%K+K)%K]}if(!N&&(F||Y)&&(this._setStyles(b,_,C),F&&(b.fill($.getFillRule()),b.shadowColor="rgba(0,0,0,0)"),Y)){if(K){T||b.beginPath();for(var X=new _e(this,.25,32,!1,A),B=X.length,Z=-$.getDashOffset(),G,re=0;Z>0;)Z-=V(re--)+V(re--);for(;Z<B;)G=Z+V(re++),(Z>0||G>0)&&X.drawPart(b,Math.max(Z,0),Math.max(G,0)),Z=G+V(re++)}b.stroke()}},_drawSelected:function(b,_){b.beginPath(),f(b,this,_),b.stroke(),c(b,this._segments,_,$e.settings.handleSize)}}},new function(){function c(f){var b=f._segments;if(!b.length)throw new Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var f=this._segments;f.length===1&&this.removeSegment(0),f.length||this._add([new H(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new H(g.read(arguments))])},cubicCurveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),C=g.read(f),A=c(this);A.setHandleOut(b.subtract(A._point)),this._add([new H(C,_.subtract(C))])},quadraticCurveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),C=c(this)._point;this.cubicCurveTo(b.add(C.subtract(b).multiply(1/3)),b.add(_.subtract(b).multiply(1/3)),_)},curveTo:function(){var f=arguments,b=g.read(f),_=g.read(f),C=s.pick(s.read(f),.5),A=1-C,T=c(this)._point,N=b.subtract(T.multiply(A*A)).subtract(_.multiply(C*C)).divide(2*C*A);if(N.isNaN())throw new Error("Cannot put a curve through points with parameter = "+C);this.quadraticCurveTo(N,_)},arcTo:function(){var f=arguments,b=Math.abs,_=Math.sqrt,C=c(this),A=C._point,T=g.read(f),N,$=s.peek(f),F=s.pick($,!0),Y,Q,K,V;if(typeof F=="boolean")var X=A.add(T).divide(2),N=X.add(X.subtract(A).rotate(F?-90:90));else if(s.remain(f)<=2)N=T,T=g.read(f);else if(!A.equals(T)){var B=w.read(f),Z=p.isZero;if(Z(B.width)||Z(B.height))return this.lineTo(T);var G=s.read(f),F=!!s.read(f),re=!!s.read(f),X=A.add(T).divide(2),z=A.subtract(X).rotate(-G),ne=z.x,se=z.y,ue=b(B.width),ie=b(B.height),be=ue*ue,Se=ie*ie,Ae=ne*ne,De=se*se,we=_(Ae/be+De/Se);if(we>1&&(ue*=we,ie*=we,be=ue*ue,Se=ie*ie),we=(be*Se-be*De-Se*Ae)/(be*De+Se*Ae),b(we)<1e-12&&(we=0),we<0)throw new Error("Cannot create an arc with the given arguments");Y=new g(ue*se/ie,-ie*ne/ue).multiply((re===F?-1:1)*_(we)).rotate(G).add(X),V=new j().translate(Y).rotate(G).scale(ue,ie),K=V._inverseTransform(A),Q=K.getDirectedAngle(V._inverseTransform(T)),!F&&Q>0?Q-=360:F&&Q<0&&(Q+=360)}if(N){var Ie=new O(A.add(N).divide(2),N.subtract(A).rotate(90),!0),Fe=new O(N.add(T).divide(2),T.subtract(N).rotate(90),!0),Ye=new O(A,T),Ze=Ye.getSide(N);if(Y=Ie.intersect(Fe,!0),!Y){if(!Ze)return this.lineTo(T);throw new Error("Cannot create an arc with the given arguments")}K=A.subtract(Y),Q=K.getDirectedAngle(T.subtract(Y));var Qe=Ye.getSide(Y,!0);Qe===0?Q=Ze*b(Q):Ze===Qe&&(Q+=Q<0?360:-360)}if(Q){for(var pt=1e-5,gt=b(Q),At=gt>=360?4:Math.ceil((gt-pt)/90),kt=Q/At,at=kt*Math.PI/360,lt=4/3*Math.sin(at)/(1+Math.cos(at)),Tt=[],Ot=0;Ot<=At;Ot++){var z=T,Be=null;if(Ot<At&&(Be=K.rotate(90).multiply(lt),V?(z=V._transformPoint(K),Be=V._transformPoint(K.add(Be)).subtract(z)):z=Y.add(K)),!Ot)C.setHandleOut(Be);else{var dt=K.rotate(-90).multiply(lt);V&&(dt=V._transformPoint(K.add(dt)).subtract(z)),Tt.push(new H(z,dt,Be))}K=K.rotate(kt)}this._add(Tt)}},lineBy:function(){var f=g.read(arguments),b=c(this)._point;this.lineTo(b.add(f))},curveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),C=s.read(f),A=c(this)._point;this.curveTo(A.add(b),A.add(_),C)},cubicCurveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),C=g.read(f),A=c(this)._point;this.cubicCurveTo(A.add(b),A.add(_),A.add(C))},quadraticCurveBy:function(){var f=arguments,b=g.read(f),_=g.read(f),C=c(this)._point;this.quadraticCurveTo(C.add(b),C.add(_))},arcBy:function(){var f=arguments,b=c(this)._point,_=b.add(g.read(f)),C=s.pick(s.peek(f),!0);typeof C=="boolean"?this.arcTo(_,C):this.arcTo(_,b.add(g.read(f)))},closePath:function(f){this.setClosed(!0),this.join(this,f)}}},{_getBounds:function(c,f){var b=f.handle?"getHandleBounds":f.stroke?"getStrokeBounds":"getBounds";return xe[b](this._segments,this._closed,this,c,f)},statics:{getBounds:function(c,f,b,_,C,A){var T=c[0];if(!T)return new x;var N=new Array(6),$=T._transformCoordinates(_,new Array(6)),F=$.slice(0,2),Y=F.slice(),Q=new Array(2);function K(B){B._transformCoordinates(_,N);for(var Z=0;Z<2;Z++)Ee._addBounds($[Z],$[Z+4],N[Z+2],N[Z],Z,A?A[Z]:0,F,Y,Q);var G=$;$=N,N=G}for(var V=1,X=c.length;V<X;V++)K(c[V]);return f&&K(T),new x(F[0],F[1],Y[0]-F[0],Y[1]-F[1])},getStrokeBounds:function(c,f,b,_,C){var A=b.getStyle(),T=A.hasStroke(),N=A.getStrokeWidth(),$=T&&b._getStrokeMatrix(_,C),F=T&&xe._getStrokePadding(N,$),Y=xe.getBounds(c,f,b,_,C,F);if(!T)return Y;var Q=N/2,K=A.getStrokeJoin(),V=A.getStrokeCap(),X=A.getMiterLimit(),B=new x(new w(F));function Z(ue){Y=Y.include(ue)}function G(ue){Y=Y.unite(B.setCenter(ue._point.transform(_)))}function re(ue,ie){ie==="round"||ue.isSmooth()?G(ue):xe._addBevelJoin(ue,ie,Q,X,_,$,Z)}function z(ue,ie){ie==="round"?G(ue):xe._addSquareCap(ue,ie,Q,_,$,Z)}var ne=c.length-(f?0:1);if(ne>0){for(var se=1;se<ne;se++)re(c[se],K);f?re(c[0],K):(z(c[0],V),z(c[c.length-1],V))}return Y},_getStrokePadding:function(c,f){if(!f)return[c,c];var b=new g(c,0).transform(f),_=new g(0,c).transform(f),C=b.getAngleInRadians(),A=b.getLength(),T=_.getLength(),N=Math.sin(C),$=Math.cos(C),F=Math.tan(C),Y=Math.atan2(T*F,A),Q=Math.atan2(T,F*A);return[Math.abs(A*Math.cos(Y)*$+T*Math.sin(Y)*N),Math.abs(T*Math.sin(Q)*$+A*Math.cos(Q)*N)]},_addBevelJoin:function(c,f,b,_,C,A,T,N){var $=c.getCurve(),F=$.getPrevious(),Y=$.getPoint1().transform(C),Q=F.getNormalAtTime(1).multiply(b).transform(A),K=$.getNormalAtTime(0).multiply(b).transform(A),V=Q.getDirectedAngle(K);if((V<0||V>=180)&&(Q=Q.negate(),K=K.negate()),N&&T(Y),T(Y.add(Q)),f==="miter"){var X=new O(Y.add(Q),new g(-Q.y,Q.x),!0).intersect(new O(Y.add(K),new g(-K.y,K.x),!0),!0);X&&Y.getDistance(X)<=_*b&&T(X)}T(Y.add(K))},_addSquareCap:function(c,f,b,_,C,A,T){var N=c._point.transform(_),$=c.getLocation(),F=$.getNormal().multiply($.getTime()===0?b:-b).transform(C);f==="square"&&(T&&(A(N.subtract(F)),A(N.add(F))),N=N.add(F.rotate(-90))),A(N.add(F)),A(N.subtract(F))},getHandleBounds:function(c,f,b,_,C){var A=b.getStyle(),T=C.stroke&&A.hasStroke(),N,$;if(T){var F=b._getStrokeMatrix(_,C),Y=A.getStrokeWidth()/2,Q=Y;A.getStrokeJoin()==="miter"&&(Q=Y*A.getMiterLimit()),A.getStrokeCap()==="square"&&(Q=Math.max(Q,Y*Math.SQRT2)),N=xe._getStrokePadding(Y,F),$=xe._getStrokePadding(Q,F)}for(var K=new Array(6),V=1/0,X=-V,B=V,Z=X,G=0,re=c.length;G<re;G++){var z=c[G];z._transformCoordinates(_,K);for(var ne=0;ne<6;ne+=2){var se=ne?N:$,ue=se?se[0]:0,ie=se?se[1]:0,be=K[ne],Se=K[ne+1],Ae=be-ue,De=be+ue,we=Se-ie,Ie=Se+ie;Ae<V&&(V=Ae),De>X&&(X=De),we<B&&(B=we),Ie>Z&&(Z=Ie)}}return new x(V,B,X-V,Z-B)}}});xe.inject({statics:new function(){var c=.5522847498307936,f=[new H([-1,0],[0,c],[0,-c]),new H([0,-1],[-c,0],[c,0]),new H([1,0],[0,-c],[0,c]),new H([0,1],[c,0],[-c,0])];function b(C,A,T){var N=s.getNamed(T),$=new xe(N&&(N.insert==!0?E.INSERT:N.insert==!1?E.NO_INSERT:null));return $._add(C),$._closed=A,$.set(N,E.INSERT)}function _(C,A,T){for(var N=new Array(4),$=0;$<4;$++){var F=f[$];N[$]=new H(F._point.multiply(A).add(C),F._handleIn.multiply(A),F._handleOut.multiply(A))}return b(N,!0,T)}return{Line:function(){var C=arguments;return b([new H(g.readNamed(C,"from")),new H(g.readNamed(C,"to"))],!1,C)},Circle:function(){var C=arguments,A=g.readNamed(C,"center"),T=s.readNamed(C,"radius");return _(A,new w(T),C)},Rectangle:function(){var C=arguments,A=x.readNamed(C,"rectangle"),T=w.readNamed(C,"radius",0,{readNull:!0}),N=A.getBottomLeft(!0),$=A.getTopLeft(!0),F=A.getTopRight(!0),Y=A.getBottomRight(!0),Q;if(!T||T.isZero())Q=[new H(N),new H($),new H(F),new H(Y)];else{T=w.min(T,A.getSize(!0).divide(2));var K=T.width,V=T.height,X=K*c,B=V*c;Q=[new H(N.add(K,0),null,[-X,0]),new H(N.subtract(0,V),[0,B]),new H($.add(0,V),null,[0,-B]),new H($.add(K,0),[-X,0],null),new H(F.subtract(K,0),null,[X,0]),new H(F.add(0,V),[0,-B],null),new H(Y.subtract(0,V),null,[0,B]),new H(Y.subtract(K,0),[X,0])]}return b(Q,!0,C)},RoundRectangle:"#Rectangle",Ellipse:function(){var C=arguments,A=R._readEllipse(C);return _(A.center,A.radius,C)},Oval:"#Ellipse",Arc:function(){var C=arguments,A=g.readNamed(C,"from"),T=g.readNamed(C,"through"),N=g.readNamed(C,"to"),$=s.getNamed(C),F=new xe($&&$.insert==!1&&E.NO_INSERT);return F.moveTo(A),F.arcTo(T,N),F.set($)},RegularPolygon:function(){for(var C=arguments,A=g.readNamed(C,"center"),T=s.readNamed(C,"sides"),N=s.readNamed(C,"radius"),$=360/T,F=T%3===0,Y=new g(0,F?-N:N),Q=F?-1:.5,K=new Array(T),V=0;V<T;V++)K[V]=new H(A.add(Y.rotate((V+Q)*$)));return b(K,!0,C)},Star:function(){for(var C=arguments,A=g.readNamed(C,"center"),T=s.readNamed(C,"points")*2,N=s.readNamed(C,"radius1"),$=s.readNamed(C,"radius2"),F=360/T,Y=new g(0,-1),Q=new Array(T),K=0;K<T;K++)Q[K]=new H(A.add(Y.rotate(F*K).multiply(K%2?$:N)));return b(Q,!0,C)}}}});var Re=ze.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(f){this._children=[],this._namedChildren={},this._initialize(f)||(typeof f=="string"?this.setPathData(f):this.addChildren(Array.isArray(f)?f:arguments))},insertChildren:function c(f,b){var _=b,C=_[0];C&&typeof C[0]=="number"&&(_=[_]);for(var A=b.length-1;A>=0;A--){var T=_[A];_===b&&!(T instanceof xe)&&(_=s.slice(_)),Array.isArray(T)?_[A]=new xe({segments:T,insert:!1}):T instanceof Re&&(_.splice.apply(_,[A,1].concat(T.removeChildren())),T.remove())}return c.base.call(this,f,_)},reduce:function c(f){for(var b=this._children,_=b.length-1;_>=0;_--){var C=b[_].reduce(f);C.isEmpty()&&C.remove()}if(!b.length){var C=new xe(E.NO_INSERT);return C.copyAttributes(this),C.insertAbove(this),this.remove(),C}return c.base.call(this)},isClosed:function(){for(var c=this._children,f=0,b=c.length;f<b;f++)if(!c[f]._closed)return!1;return!0},setClosed:function(c){for(var f=this._children,b=0,_=f.length;b<_;b++)f[b].setClosed(c)},getFirstSegment:function(){var c=this.getFirstChild();return c&&c.getFirstSegment()},getLastSegment:function(){var c=this.getLastChild();return c&&c.getLastSegment()},getCurves:function(){for(var c=this._children,f=[],b=0,_=c.length;b<_;b++)s.push(f,c[b].getCurves());return f},getFirstCurve:function(){var c=this.getFirstChild();return c&&c.getFirstCurve()},getLastCurve:function(){var c=this.getLastChild();return c&&c.getLastCurve()},getArea:function(){for(var c=this._children,f=0,b=0,_=c.length;b<_;b++)f+=c[b].getArea();return f},getLength:function(){for(var c=this._children,f=0,b=0,_=c.length;b<_;b++)f+=c[b].getLength();return f},getPathData:function(c,f){for(var b=this._children,_=[],C=0,A=b.length;C<A;C++){var T=b[C],N=T._matrix;_.push(T.getPathData(c&&!N.isIdentity()?c.appended(N):c,f))}return _.join("")},_hitTestChildren:function c(f,b,_){return c.base.call(this,f,b.class===xe||b.type==="path"?b:s.set({},b,{fill:!1}),_)},_draw:function(c,f,b,_){var C=this._children;if(C.length){f=f.extend({dontStart:!0,dontFinish:!0}),c.beginPath();for(var A=0,T=C.length;A<T;A++)C[A].draw(c,f,_);if(!f.clip){this._setStyles(c,f,b);var N=this._style;N.hasFill()&&(c.fill(N.getFillRule()),c.shadowColor="rgba(0,0,0,0)"),N.hasStroke()&&c.stroke()}}},_drawSelected:function(c,f,b){for(var _=this._children,C=0,A=_.length;C<A;C++){var T=_[C],N=T._matrix;b[T._id]||T._drawSelected(c,N.isIdentity()?f:f.appended(N))}}},new function(){function c(f,b){var _=f._children;if(b&&!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(f){this[f]=function(){var b=c(this,!0);b[f].apply(b,arguments)}},{moveTo:function(){var f=c(this),b=f&&f.isEmpty()?f:new xe(E.NO_INSERT);b!==f&&this.addChild(b),b.moveTo.apply(b,arguments)},moveBy:function(){var f=c(this,!0),b=f&&f.getLastSegment(),_=g.read(arguments);this.moveTo(b?_.add(b._point):_)},closePath:function(f){c(this,!0).closePath(f)}})},s.each(["reverse","flatten","simplify","smooth"],function(c){this[c]=function(f){for(var b=this._children,_,C=0,A=b.length;C<A;C++)_=b[C][c](f)||_;return _}},{}));ze.inject(new function(){var c=Math.min,f=Math.max,b=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function C(G){return G._children||[G]}function A(G,re){var z=G.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(re){for(var ne=C(z),se=0,ue=ne.length;se<ue;se++){var G=ne[se];!G._closed&&!G.isEmpty()&&(G.closePath(1e-12),G.getFirstSegment().setHandleIn(0,0),G.getLastSegment().setHandleOut(0,0))}z=z.resolveCrossings().reorient(z.getFillRule()==="nonzero",!0)}return z}function T(G,re,z,ne,se){var ue=new Re(E.NO_INSERT);return ue.addChildren(G,!0),ue=ue.reduce({simplify:re}),se&&se.insert==!1||ue.insertAbove(ne&&z.isSibling(ne)&&z.getIndex()<ne.getIndex()?ne:z),ue.copyAttributes(z,!0),ue}function N(G){return G.hasOverlap()||G.isCrossing()}function $(G,re,z,ne){if(ne&&(ne.trace==!1||ne.stroke)&&/^(subtract|intersect)$/.test(z))return F(G,re,z);var se=A(G,!0),ue=re&&G!==re&&A(re,!0),ie=_[z];ie[z]=!0,ue&&(ie.subtract||ie.exclude)^(ue.isClockwise()^se.isClockwise())&&ue.reverse();var be=V(ke.expand(se.getIntersections(ue,N))),Se=C(se),Ae=ue&&C(ue),De=[],we=[],Ie;function Fe(Be){for(var dt=0,vt=Be.length;dt<vt;dt++){var Lt=Be[dt];s.push(De,Lt._segments),s.push(we,Lt.getCurves()),Lt._overlapsOnly=!0}}function Ye(Be){for(var dt=[],vt=0,Lt=Be&&Be.length;vt<Lt;vt++)dt.push(we[Be[vt]]);return dt}if(be.length){Fe(Se),Ae&&Fe(Ae);for(var Ze=new Array(we.length),Qe=0,pt=we.length;Qe<pt;Qe++)Ze[Qe]=we[Qe].getValues();for(var gt=d.findCurveBoundsCollisions(Ze,Ze,0,!0),At={},Qe=0;Qe<we.length;Qe++){var kt=we[Qe],at=kt._path._id,lt=At[at]=At[at]||{};lt[kt.getIndex()]={hor:Ye(gt[Qe].hor),ver:Ye(gt[Qe].ver)}}for(var Qe=0,pt=be.length;Qe<pt;Qe++)B(be[Qe]._segment,se,ue,At,ie);for(var Qe=0,pt=De.length;Qe<pt;Qe++){var Tt=De[Qe],Ot=Tt._intersection;Tt._winding||B(Tt,se,ue,At,ie),Ot&&Ot._overlap||(Tt._path._overlapsOnly=!1)}Ie=Z(De,ie)}else Ie=K(Ae?Se.concat(Ae):Se.slice(),function(Be){return!!ie[Be]});return T(Ie,!0,G,re,ne)}function F(G,re,z){var ne=A(G),se=A(re),ue=ne.getIntersections(se,N),ie=z==="subtract",be=z==="divide",Se={},Ae=[];function De(Fe){if(!Se[Fe._id]&&(be||se.contains(Fe.getPointAt(Fe.getLength()/2))^ie))return Ae.unshift(Fe),Se[Fe._id]=!0}for(var we=ue.length-1;we>=0;we--){var Ie=ue[we].split();Ie&&(De(Ie)&&Ie.getFirstSegment().setHandleIn(0,0),ne.getLastSegment().setHandleOut(0,0))}return De(ne),T(Ae,!1,G,re)}function Y(G,re){for(var z=G;z;){if(z===re)return;z=z._previous}for(;G._next&&G._next!==re;)G=G._next;if(!G._next){for(;re._previous;)re=re._previous;G._next=re,re._previous=G}}function Q(G){for(var re=G.length-1;re>=0;re--)G[re].clearHandles()}function K(G,re,z){var ne=G&&G.length;if(ne){var se=s.each(G,function(gt,At){this[gt._id]={container:null,winding:gt.isClockwise()?1:-1,index:At}},{}),ue=G.slice().sort(function(gt,At){return b(At.getArea())-b(gt.getArea())}),ie=ue[0],be=d.findItemBoundsCollisions(ue,null,p.GEOMETRIC_EPSILON);z==null&&(z=ie.isClockwise());for(var Se=0;Se<ne;Se++){var Ae=ue[Se],De=se[Ae._id],we=0,Ie=be[Se];if(Ie){for(var Fe=null,Ye=Ie.length-1;Ye>=0;Ye--)if(Ie[Ye]<Se){Fe=Fe||Ae.getInteriorPoint();var Ze=ue[Ie[Ye]];if(Ze.contains(Fe)){var Qe=se[Ze._id];we=Qe.winding,De.winding+=we,De.container=Qe.exclude?Qe.container:Ze;break}}}if(re(De.winding)===re(we))De.exclude=!0,G[De.index]=null;else{var pt=De.container;Ae.setClockwise(pt?!pt.isClockwise():z)}}}return G}function V(G,re,z){var ne=re&&[],se=1e-8,ue=1-se,ie=!1,be=z||[],Se=z&&{},Ae,De,we;function Ie(dt){return dt._path._id+"."+dt._segment1._index}for(var Fe=(z&&z.length)-1;Fe>=0;Fe--){var Ye=z[Fe];Ye._path&&(Se[Ie(Ye)]=!0)}for(var Fe=G.length-1;Fe>=0;Fe--){var Ze=G[Fe],Qe=Ze._time,pt=Qe,gt=re&&!re(Ze),Ye=Ze._curve,At;if(Ye&&(Ye!==De?(ie=!Ye.hasHandles()||Se&&Se[Ie(Ye)],Ae=[],we=null,De=Ye):we>=se&&(Qe/=we)),gt){Ae&&Ae.push(Ze);continue}else re&&ne.unshift(Ze);if(we=pt,Qe<se)At=Ye._segment1;else if(Qe>ue)At=Ye._segment2;else{var kt=Ye.divideAtTime(Qe,!0);ie&&be.push(Ye,kt),At=kt._segment1;for(var at=Ae.length-1;at>=0;at--){var lt=Ae[at];lt._time=(lt._time-Qe)/(1-Qe)}}Ze._setSegment(At);var Tt=At._intersection,Ot=Ze._intersection;if(Tt){Y(Tt,Ot);for(var Be=Tt;Be;)Y(Be._intersection,Tt),Be=Be._next}else At._intersection=Ot}return z||Q(be),ne||G}function X(G,re,z,ne,se){var ue=Array.isArray(re)?re:re[z?"hor":"ver"],ie=z?1:0,be=ie^1,Se=[G.x,G.y],Ae=Se[ie],De=Se[be],we=1e-9,Ie=1e-6,Fe=Ae-we,Ye=Ae+we,Ze=0,Qe=0,pt=0,gt=0,At=!1,kt=!1,at=1,lt=[],Tt,Ot;function Be(wt){var En=wt[be+0],Nn=wt[be+6];if(!(De<c(En,Nn)||De>f(En,Nn))){var xn=wt[ie+0],xr=wt[ie+2],Tr=wt[ie+4],or=wt[ie+6];if(En===Nn){(xn<Ye&&or>Fe||or<Ye&&xn>Fe)&&(At=!0);return}var lr=De===En?0:De===Nn||Fe>f(xn,xr,Tr,or)||Ye<c(xn,xr,Tr,or)?1:Ee.solveCubic(wt,be,De,lt,0,1)>0?lt[0]:1,ur=lr===0?xn:lr===1?or:Ee.getPoint(wt,lr)[z?"y":"x"],Nr=En>Nn?1:-1,Vr=Tt[be]>Tt[be+6]?1:-1,In=Tt[ie+6];return De!==En?(ur<Fe?pt+=Nr:ur>Ye?gt+=Nr:At=!0,ur>Ae-Ie&&ur<Ae+Ie&&(at/=2)):(Nr!==Vr?xn<Fe?pt+=Nr:xn>Ye&&(gt+=Nr):xn!=In&&(In<Ye&&ur>Ye?(gt+=Nr,At=!0):In>Fe&&ur<Fe&&(pt+=Nr,At=!0)),at/=4),Tt=wt,!se&&ur>Fe&&ur<Ye&&Ee.getTangent(wt,lr)[z?"x":"y"]===0&&X(G,re,!z,ne,!0)}}function dt(wt){var En=wt[be+0],Nn=wt[be+2],xn=wt[be+4],xr=wt[be+6];if(De<=f(En,Nn,xn,xr)&&De>=c(En,Nn,xn,xr)){for(var Tr=wt[ie+0],or=wt[ie+2],lr=wt[ie+4],ur=wt[ie+6],Nr=Fe>f(Tr,or,lr,ur)||Ye<c(Tr,or,lr,ur)?[wt]:Ee.getMonoCurves(wt,z),Vr,In=0,Kn=Nr.length;In<Kn;In++)if(Vr=Be(Nr[In]))return Vr}}for(var vt=0,Lt=ue.length;vt<Lt;vt++){var It=ue[vt],$t=It._path,nn=It.getValues(),rn;if((!vt||ue[vt-1]._path!==$t)&&(Tt=null,$t._closed||(Ot=Ee.getValues($t.getLastCurve().getSegment2(),It.getSegment1(),null,!ne),Ot[be]!==Ot[be+6]&&(Tt=Ot)),!Tt)){Tt=nn;for(var vn=$t.getLastCurve();vn&&vn!==It;){var Cn=vn.getValues();if(Cn[be]!==Cn[be+6]){Tt=Cn;break}vn=vn.getPrevious()}}if(rn=dt(nn))return rn;if(vt+1===Lt||ue[vt+1]._path!==$t){if(Ot&&(rn=dt(Ot)))return rn;At&&!pt&&!gt&&(pt=gt=$t.isClockwise(ne)^z?1:-1),Ze+=pt,Qe+=gt,pt=gt=0,At&&(kt=!0,At=!1),Ot=null}}return Ze=b(Ze),Qe=b(Qe),{winding:f(Ze,Qe),windingL:Ze,windingR:Qe,quality:at,onPath:kt}}function B(G,re,z,ne,se){var ue=[],ie=G,be=0,we;do{var Se=G.getCurve();if(Se){var Ae=Se.getLength();ue.push({segment:G,curve:Se,length:Ae}),be+=Ae}G=G.getNext()}while(G&&!G._intersection&&G!==ie);for(var De=[.5,.25,.75],we={winding:0,quality:-1},Ie=.001,Fe=1-Ie,Ye=0;Ye<De.length&&we.quality<.5;Ye++)for(var Ae=be*De[Ye],Ze=0,Qe=ue.length;Ze<Qe;Ze++){var pt=ue[Ze],gt=pt.length;if(Ae<=gt){var Se=pt.curve,At=Se._path,kt=At._parent,at=kt instanceof Re?kt:At,lt=p.clamp(Se.getTimeAt(Ae),Ie,Fe),Tt=Se.getPointAtTime(lt),Ot=b(Se.getTangentAtTime(lt).y)<Math.SQRT1_2,Be=null;if(se.subtract&&z){var dt=at===re?z:re,vt=dt._getWinding(Tt,Ot,!0);if(at===re&&vt.winding||at===z&&!vt.winding){if(vt.quality<1)continue;Be={winding:0,quality:1}}}Be=Be||X(Tt,ne[At._id][Se.getIndex()],Ot,!0),Be.quality>we.quality&&(we=Be);break}Ae-=gt}for(var Ze=ue.length-1;Ze>=0;Ze--)ue[Ze].segment._winding=we}function Z(G,re){var z=[],ne;function se(Lt){var It;return!!(Lt&&!Lt._visited&&(!re||re[(It=Lt._winding||{}).winding]&&!(re.unite&&It.winding===2&&It.windingL&&It.windingR)))}function ue(Lt){if(Lt){for(var It=0,$t=ne.length;It<$t;It++)if(Lt===ne[It])return!0}return!1}function ie(Lt){for(var It=Lt._segments,$t=0,nn=It.length;$t<nn;$t++)It[$t]._visited=!0}function be(Lt,It){var $t=Lt._intersection,nn=$t,rn=[];It&&(ne=[Lt]);function vn(Cn,wt){for(;Cn&&Cn!==wt;){var En=Cn._segment,Nn=En&&En._path;if(Nn){var xn=En.getNext()||Nn.getFirstSegment(),xr=xn._intersection;En!==Lt&&(ue(En)||ue(xn)||xn&&se(En)&&(se(xn)||xr&&se(xr._segment)))&&rn.push(En),It&&ne.push(En)}Cn=Cn._next}}if($t){for(vn($t);$t&&$t._previous;)$t=$t._previous;vn($t,nn)}return rn}G.sort(function(Lt,It){var $t=Lt._intersection,nn=It._intersection,rn=!!($t&&$t._overlap),vn=!!(nn&&nn._overlap),Cn=Lt._path,wt=It._path;return rn^vn?rn?1:-1:!$t^!nn?$t?1:-1:Cn!==wt?Cn._id-wt._id:Lt._index-It._index});for(var Se=0,Ae=G.length;Se<Ae;Se++){var De=G[Se],we=se(De),Ie=null,Fe=!1,Ye=!0,Ze=[],Qe,pt,gt;if(we&&De._path._overlapsOnly){var At=De._path,kt=De._intersection._segment._path;At.compare(kt)&&(At.getArea()&&z.push(At.clone(!1)),ie(At),ie(kt),we=!1)}for(;we;){var at=!Ie,lt=be(De,at),Tt=lt.shift(),Fe=!at&&(ue(De)||ue(Tt)),Ot=!Fe&&Tt;if(at&&(Ie=new xe(E.NO_INSERT),Qe=null),Fe){(De.isFirst()||De.isLast())&&(Ye=De._path._closed),De._visited=!0;break}if(Ot&&Qe&&(Ze.push(Qe),Qe=null),Qe||(Ot&&lt.push(De),Qe={start:Ie._segments.length,crossings:lt,visited:pt=[],handleIn:gt}),Ot&&(De=Tt),!se(De)){Ie.removeSegments(Qe.start);for(var Be=0,dt=pt.length;Be<dt;Be++)pt[Be]._visited=!1;pt.length=0;do De=Qe&&Qe.crossings.shift(),(!De||!De._path)&&(De=null,Qe=Ze.pop(),Qe&&(pt=Qe.visited,gt=Qe.handleIn));while(Qe&&!se(De));if(!De)break}var vt=De.getNext();Ie.add(new H(De._point,gt,vt&&De._handleOut)),De._visited=!0,pt.push(De),De=vt||De._path.getFirstSegment(),gt=vt&&vt._handleIn}Fe&&(Ye&&(Ie.getFirstSegment().setHandleIn(gt),Ie.setClosed(Ye)),Ie.getArea()!==0&&z.push(Ie))}return z}return{_getWinding:function(G,re,z){return X(G,this.getCurves(),re,z)},unite:function(G,re){return $(this,G,"unite",re)},intersect:function(G,re){return $(this,G,"intersect",re)},subtract:function(G,re){return $(this,G,"subtract",re)},exclude:function(G,re){return $(this,G,"exclude",re)},divide:function(G,re){return re&&(re.trace==!1||re.stroke)?F(this,G,"divide"):T([this.subtract(G,re),this.intersect(G,re)],!0,this,G,re)},resolveCrossings:function(){var G=this._children,re=G||[this];function z(Qe,pt){var gt=Qe&&Qe._intersection;return gt&&gt._overlap&&gt._path===pt}var ne=!1,se=!1,ue=this.getIntersections(null,function(Qe){return Qe.hasOverlap()&&(ne=!0)||Qe.isCrossing()&&(se=!0)}),ie=ne&&se&&[];if(ue=ke.expand(ue),ne)for(var be=V(ue,function(Qe){return Qe.hasOverlap()},ie),Se=be.length-1;Se>=0;Se--){var Ae=be[Se],De=Ae._path,we=Ae._segment,Ie=we.getPrevious(),Fe=we.getNext();z(Ie,De)&&z(Fe,De)&&(we.remove(),Ie._handleOut._set(0,0),Fe._handleIn._set(0,0),Ie!==we&&!Ie.getCurve().hasLength()&&(Fe._handleIn.set(Ie._handleIn),Ie.remove()))}se&&(V(ue,ne&&function(Qe){var pt=Qe.getCurve(),gt=Qe.getSegment(),At=Qe._intersection,kt=At._curve,at=At._segment;if(pt&&kt&&pt._path&&kt._path)return!0;gt&&(gt._intersection=null),at&&(at._intersection=null)},ie),ie&&Q(ie),re=Z(s.each(re,function(Qe){s.push(this,Qe._segments)},[])));var Ye=re.length,Ze;return Ye>1&&G?(re!==G&&this.setChildren(re),Ze=this):Ye===1&&!G&&(re[0]!==this&&this.setSegments(re[0].removeSegments()),Ze=this),Ze||(Ze=new Re(E.NO_INSERT),Ze.addChildren(re),Ze=Ze.reduce(),Ze.copyAttributes(this),this.replaceWith(Ze)),Ze},reorient:function(G,re){var z=this._children;return z&&z.length?this.setChildren(K(this.removeChildren(),function(ne){return!!(G?ne:ne&1)},re)):re!==n&&this.setClockwise(re),this},getInteriorPoint:function(){var G=this.getBounds(),re=G.getCenter(!0);if(!this.contains(re)){for(var z=this.getCurves(),ne=re.y,se=[],ue=[],ie=0,be=z.length;ie<be;ie++){var Se=z[ie].getValues(),Ae=Se[1],De=Se[3],we=Se[5],Ie=Se[7];if(ne>=c(Ae,De,we,Ie)&&ne<=f(Ae,De,we,Ie))for(var Fe=Ee.getMonoCurves(Se),Ye=0,Ze=Fe.length;Ye<Ze;Ye++){var Qe=Fe[Ye],pt=Qe[1],gt=Qe[7];if(pt!==gt&&(ne>=pt&&ne<=gt||ne>=gt&&ne<=pt)){var At=ne===pt?Qe[0]:ne===gt?Qe[6]:Ee.solveCubic(Qe,1,ne,ue,0,1)===1?Ee.getPoint(Qe,ue[0]).x:(Qe[0]+Qe[6])/2;se.push(At)}}}se.length>1&&(se.sort(function(kt,at){return kt-at}),re.x=(se[0]+se[1])/2)}return re}}});var _e=s.extend({_class:"PathFlattener",initialize:function(c,f,b,_,C){var A=[],T=[],N=0,$=1/(b||32),F=c._segments,Y=F[0],Q;function K(Z,G){var re=Ee.getValues(Z,G,C);A.push(re),V(re,Z._index,0,1)}function V(Z,G,re,z){if(z-re>$&&!(_&&Ee.isStraight(Z))&&!Ee.isFlatEnough(Z,f||.25)){var ne=Ee.subdivide(Z,.5),se=(re+z)/2;V(ne[0],G,re,se),V(ne[1],G,se,z)}else{var ue=Z[6]-Z[0],ie=Z[7]-Z[1],be=Math.sqrt(ue*ue+ie*ie);be>0&&(N+=be,T.push({offset:N,curve:Z,index:G,time:z}))}}for(var X=1,B=F.length;X<B;X++)Q=F[X],K(Y,Q),Y=Q;c._closed&&K(Q||Y,F[0]),this.curves=A,this.parts=T,this.length=N,this.index=0},_get:function(c){for(var f=this.parts,b=f.length,_,C=this.index;_=C,!(!C||f[--C].offset<c););for(;_<b;_++){var A=f[_];if(A.offset>=c){this.index=_;var T=f[_-1],N=T&&T.index===A.index?T.time:0,$=T?T.offset:0;return{index:A.index,time:N+(A.time-N)*(c-$)/(A.offset-$)}}}return{index:f[b-1].index,time:1}},drawPart:function(c,f,b){for(var _=this._get(f),C=this._get(b),A=_.index,T=C.index;A<=T;A++){var N=Ee.getPart(this.curves[A],A===_.index?_.time:0,A===C.index?C.time:1);A===_.index&&c.moveTo(N[0],N[1]),c.bezierCurveTo.apply(c,N.slice(2))}}},s.each(Ee._evaluateMethods,function(c){this[c+"At"]=function(f){var b=this._get(f);return Ee[c](this.curves[b.index],b.time)}},{})),Pe=s.extend({initialize:function(c){for(var f=this.points=[],b=c._segments,_=c._closed,C=0,A,T=b.length;C<T;C++){var N=b[C].point;(!A||!A.equals(N))&&f.push(A=N.clone())}_&&(f.unshift(f[f.length-1]),f.push(f[1])),this.closed=_},fit:function(c){var f=this.points,b=f.length,_=null;return b>0&&(_=[new H(f[0])],b>1&&(this.fitCubic(_,c,0,b-1,f[1].subtract(f[0]),f[b-2].subtract(f[b-1])),this.closed&&(_.shift(),_.pop()))),_},fitCubic:function(c,f,b,_,C,A){var T=this.points;if(_-b===1){var N=T[b],$=T[_],F=N.getDistance($)/3;this.addCurve(c,[N,N.add(C.normalize(F)),$.add(A.normalize(F)),$]);return}for(var Y=this.chordLengthParameterize(b,_),Q=Math.max(f,f*f),K,V=!0,X=0;X<=4;X++){var B=this.generateBezier(b,_,Y,C,A),Z=this.findMaxError(b,_,B,Y);if(Z.error<f&&V){this.addCurve(c,B);return}if(K=Z.index,Z.error>=Q)break;V=this.reparameterize(b,_,Y,B),Q=Z.error}var G=T[K-1].subtract(T[K+1]);this.fitCubic(c,f,b,K,C,G),this.fitCubic(c,f,K,_,G.negate(),A)},addCurve:function(c,f){var b=c[c.length-1];b.setHandleOut(f[1].subtract(f[0])),c.push(new H(f[3],f[2].subtract(f[3])))},generateBezier:function(c,f,b,_,C){for(var A=1e-12,T=Math.abs,N=this.points,$=N[c],F=N[f],Y=[[0,0],[0,0]],Q=[0,0],K=0,V=f-c+1;K<V;K++){var X=b[K],B=1-X,Z=3*X*B,G=B*B*B,re=Z*B,z=Z*X,ne=X*X*X,se=_.normalize(re),ue=C.normalize(z),ie=N[c+K].subtract($.multiply(G+re)).subtract(F.multiply(z+ne));Y[0][0]+=se.dot(se),Y[0][1]+=se.dot(ue),Y[1][0]=Y[0][1],Y[1][1]+=ue.dot(ue),Q[0]+=se.dot(ie),Q[1]+=ue.dot(ie)}var be=Y[0][0]*Y[1][1]-Y[1][0]*Y[0][1],Se,Ae;if(T(be)>A){var De=Y[0][0]*Q[1]-Y[1][0]*Q[0],we=Q[0]*Y[1][1]-Q[1]*Y[0][1];Se=we/be,Ae=De/be}else{var Ie=Y[0][0]+Y[0][1],Fe=Y[1][0]+Y[1][1];Se=Ae=T(Ie)>A?Q[0]/Ie:T(Fe)>A?Q[1]/Fe:0}var Ye=F.getDistance($),Ze=A*Ye,Qe,pt;if(Se<Ze||Ae<Ze)Se=Ae=Ye/3;else{var gt=F.subtract($);Qe=_.normalize(Se),pt=C.normalize(Ae),Qe.dot(gt)-pt.dot(gt)>Ye*Ye&&(Se=Ae=Ye/3,Qe=pt=null)}return[$,$.add(Qe||_.normalize(Se)),F.add(pt||C.normalize(Ae)),F]},reparameterize:function(c,f,b,_){for(var C=c;C<=f;C++)b[C-c]=this.findRoot(_,this.points[C],b[C-c]);for(var C=1,A=b.length;C<A;C++)if(b[C]<=b[C-1])return!1;return!0},findRoot:function(c,f,b){for(var _=[],C=[],A=0;A<=2;A++)_[A]=c[A+1].subtract(c[A]).multiply(3);for(var A=0;A<=1;A++)C[A]=_[A+1].subtract(_[A]).multiply(2);var T=this.evaluate(3,c,b),N=this.evaluate(2,_,b),$=this.evaluate(1,C,b),F=T.subtract(f),Y=N.dot(N)+F.dot($);return p.isMachineZero(Y)?b:b-F.dot(N)/Y},evaluate:function(c,f,b){for(var _=f.slice(),C=1;C<=c;C++)for(var A=0;A<=c-C;A++)_[A]=_[A].multiply(1-b).add(_[A+1].multiply(b));return _[0]},chordLengthParameterize:function(c,f){for(var b=[0],_=c+1;_<=f;_++)b[_-c]=b[_-c-1]+this.points[_].getDistance(this.points[_-1]);for(var _=1,C=f-c;_<=C;_++)b[_]/=b[C];return b},findMaxError:function(c,f,b,_){for(var C=Math.floor((f-c+1)/2),A=0,T=c+1;T<f;T++){var N=this.evaluate(3,b,_[T-c]),$=N.subtract(this.points[T]),F=$.x*$.x+$.y*$.y;F>=A&&(A=F,C=T)}return{error:A,index:C}}}),it=E.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(f){this._content="",this._lines=[];var b=f&&s.isPlainObject(f)&&f.x===n&&f.y===n;this._initialize(b&&f,!b&&g.read(arguments))},_equals:function(c){return this._content===c._content},copyContent:function(c){this.setContent(c._content)},getContent:function(){return this._content},setContent:function(c){this._content=""+c,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),tt=it.extend({_class:"PointText",initialize:function(){it.apply(this,arguments)},getPoint:function(){var c=this._matrix.getTranslation();return new v(c.x,c.y,this,"setPoint")},setPoint:function(){var c=g.read(arguments);this.translate(c.subtract(this._matrix.getTranslation()))},_draw:function(c,f,b){if(this._content){this._setStyles(c,f,b);var _=this._lines,C=this._style,A=C.hasFill(),T=C.hasStroke(),N=C.getLeading(),$=c.shadowColor;c.font=C.getFontStyle(),c.textAlign=C.getJustification();for(var F=0,Y=_.length;F<Y;F++){c.shadowColor=$;var Q=_[F];A&&(c.fillText(Q,0,0),c.shadowColor="rgba(0,0,0,0)"),T&&c.strokeText(Q,0,0),c.translate(0,N)}}},_getBounds:function(c,f){var b=this._style,_=this._lines,C=_.length,A=b.getJustification(),T=b.getLeading(),N=this.getView().getTextWidth(b.getFontStyle(),_),$=0;A!=="left"&&($-=N/(A==="center"?2:1));var F=new x($,C?-.75*T:0,N,C*T);return c?c._transformBounds(F,F):F}}),Ue=s.extend(new function(){var c={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},f={},b={transparent:[0,0,0,0]},_;function C(N){var $=N.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||N.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),F="rgb",Y;if($){var Q=$[4]?4:3;Y=new Array(Q);for(var K=0;K<Q;K++){var V=$[K+1];Y[K]=parseInt(V.length==1?V+V:V,16)/255}}else if($=N.match(/^(rgb|hsl)a?\((.*)\)$/)){F=$[1],Y=$[2].trim().split(/[,\s]+/g);for(var X=F==="hsl",K=0,B=Math.min(Y.length,4);K<B;K++){var Z=Y[K],V=parseFloat(Z);if(X)if(K===0){var G=Z.match(/([a-z]*)$/)[1];V*={turn:360,rad:180/Math.PI,grad:.9}[G]||1}else K<3&&(V/=100);else K<3&&(V/=/%$/.test(Z)?100:255);Y[K]=V}}else{var re=b[N];if(!re)if(r){_||(_=ve.getContext(1,1,{willReadFrequently:!0}),_.globalCompositeOperation="copy"),_.fillStyle="rgba(0,0,0,0)",_.fillStyle=N,_.fillRect(0,0,1,1);var z=_.getImageData(0,0,1,1).data;re=b[N]=[z[0]/255,z[1]/255,z[2]/255]}else re=[0,0,0];Y=re.slice()}return[F,Y]}var A=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],T={"rgb-hsb":function(N,$,F){var Y=Math.max(N,$,F),Q=Math.min(N,$,F),K=Y-Q,V=K===0?0:(Y==N?($-F)/K+($<F?6:0):Y==$?(F-N)/K+2:(N-$)/K+4)*60;return[V,Y===0?0:K/Y,Y]},"hsb-rgb":function(N,$,F){N=(N/60%6+6)%6;var Q=Math.floor(N),Y=N-Q,Q=A[Q],K=[F,F*(1-$),F*(1-$*Y),F*(1-$*(1-Y))];return[K[Q[0]],K[Q[1]],K[Q[2]]]},"rgb-hsl":function(N,$,F){var Y=Math.max(N,$,F),Q=Math.min(N,$,F),K=Y-Q,V=K===0,X=V?0:(Y==N?($-F)/K+($<F?6:0):Y==$?(F-N)/K+2:(N-$)/K+4)*60,B=(Y+Q)/2,Z=V?0:B<.5?K/(Y+Q):K/(2-Y-Q);return[X,Z,B]},"hsl-rgb":function(N,$,F){if(N=(N/360%1+1)%1,$===0)return[F,F,F];for(var Y=[N+1/3,N,N-1/3],Q=F<.5?F*(1+$):F+$-F*$,K=2*F-Q,V=[],X=0;X<3;X++){var B=Y[X];B<0&&(B+=1),B>1&&(B-=1),V[X]=6*B<1?K+(Q-K)*6*B:2*B<1?Q:3*B<2?K+(Q-K)*(2/3-B)*6:K}return V},"rgb-gray":function(N,$,F){return[N*.2989+$*.587+F*.114]},"gray-rgb":function(N){return[N,N,N]},"gray-hsb":function(N){return[0,0,N]},"gray-hsl":function(N){return[0,0,N]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(c,function(N,$){f[$]=[],s.each(N,function(F,Y){var Q=s.capitalize(F),K=/^(hue|saturation)$/.test(F),V=f[$][Y]=$==="gradient"?F==="gradient"?function(X){var B=this._components[0];return X=ut.read(Array.isArray(X)?X:arguments,0,{readNull:!0}),B!==X&&(B&&B._removeOwner(this),X&&X._addOwner(this)),X}:function(){return g.read(arguments,0,{readNull:F==="highlight",clone:!0})}:function(X){return X==null||isNaN(X)?0:+X};this["get"+Q]=function(){return this._type===$||K&&/^hs[bl]$/.test(this._type)?this._components[Y]:this._convert($)[Y]},this["set"+Q]=function(X){this._type!==$&&!(K&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert($),this._properties=c[$],this._type=$),this._components[Y]=V.call(this,X),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function N($){var F=arguments,Y=this.__read,Q=0,K,V,X,B;Array.isArray($)&&(F=$,$=F[0]);var Z=$!=null&&typeof $;if(Z==="string"&&$ in c&&(K=$,$=F[1],Array.isArray($)?(V=$,X=F[2]):(Y&&(Q=1),F=s.slice(F,1),Z=typeof $)),!V){if(B=Z==="number"?F:Z==="object"&&$.length!=null?$:null,B){K||(K=B.length>=3?"rgb":"gray");var G=c[K].length;X=B[G],Y&&(Q+=B===arguments?G+(X!=null?1:0):1),B.length>G&&(B=s.slice(B,0,G))}else if(Z==="string"){var re=C($);K=re[0],V=re[1],V.length===4&&(X=V[3],V.length--)}else if(Z==="object")if($.constructor===N){if(K=$._type,V=$._components.slice(),X=$._alpha,K==="gradient")for(var z=1,ne=V.length;z<ne;z++){var se=V[z];se&&(V[z]=se.clone())}}else if($.constructor===ut)K="gradient",B=F;else{K="hue"in $?"lightness"in $?"hsl":"hsb":"gradient"in $||"stops"in $||"radial"in $?"gradient":"gray"in $?"gray":"rgb";var ue=c[K],ie=f[K];this._components=V=[];for(var z=0,ne=ue.length;z<ne;z++){var be=$[ue[z]];be==null&&!z&&K==="gradient"&&"stops"in $&&(be={stops:$.stops,radial:$.radial}),be=ie[z].call(this,be),be!=null&&(V[z]=be)}X=$.alpha}Y&&K&&(Q=1)}if(this._type=K||"rgb",!V){this._components=V=[];for(var ie=f[this._type],z=0,ne=ie.length;z<ne;z++){var be=ie[z].call(this,B&&B[z]);be!=null&&(V[z]=be)}}return this._components=V,this._properties=c[this._type],this._alpha=X,Y&&(this.__read=Q),this},set:"#initialize",_serialize:function(N,$){var F=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?F:[this._type].concat(F),N,!0,$)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(N){var $;return this._type===N?this._components.slice():($=T[this._type+"-"+N])?$.apply(this,this._components):T["rgb-"+N].apply(this,T[this._type+"-rgb"].apply(this,this._components))},convert:function(N){return new Ue(N,this._convert(N),this._alpha)},getType:function(){return this._type},setType:function(N){this._components=this._convert(N),this._properties=c[N],this._type=N},getComponents:function(){var N=this._components.slice();return this._alpha!=null&&N.push(this._alpha),N},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(N){this._alpha=N==null?null:Math.min(Math.max(N,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(N){var $=s.isPlainValue(N,!0)?Ue.read(arguments):N;return $===this||$&&this._class===$._class&&this._type===$._type&&this.getAlpha()===$.getAlpha()&&s.equals(this._components,$._components)||!1},toString:function(){for(var N=this._properties,$=[],F=this._type==="gradient",Y=h.instance,Q=0,K=N.length;Q<K;Q++){var V=this._components[Q];V!=null&&$.push(N[Q]+": "+(F?V:Y.number(V)))}return this._alpha!=null&&$.push("alpha: "+Y.number(this._alpha)),"{ "+$.join(", ")+" }"},toCSS:function(N){var $=this._convert("rgb"),F=N||this._alpha==null?1:this._alpha;function Y(Q){return Math.round((Q<0?0:Q>1?1:Q)*255)}return $=[Y($[0]),Y($[1]),Y($[2])],F<1&&$.push(F<0?0:F),N?"#"+((1<<24)+($[0]<<16)+($[1]<<8)+$[2]).toString(16).slice(1):($.length==4?"rgba(":"rgb(")+$.join(",")+")"},toCanvasStyle:function(N,$){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var F=this._components,Y=F[0],Q=Y._stops,K=F[1],V=F[2],X=F[3],B=$&&$.inverted(),Z;if(B&&(K=B._transformPoint(K),V=B._transformPoint(V),X&&(X=B._transformPoint(X))),Y._radial){var G=V.getDistance(K);if(X){var re=X.subtract(K);re.getLength()>G&&(X=K.add(re.normalize(G-.1)))}var z=X||K;Z=N.createRadialGradient(z.x,z.y,0,K.x,K.y,G)}else Z=N.createLinearGradient(K.x,K.y,V.x,V.y);for(var ne=0,se=Q.length;ne<se;ne++){var ue=Q[ne],ie=ue._offset;Z.addColorStop(ie??ne/(se-1),ue._color.toCanvasStyle())}return this._canvasStyle=Z},transform:function(N){if(this._type==="gradient"){for(var $=this._components,F=1,Y=$.length;F<Y;F++){var Q=$[F];N._transformPoint(Q,Q,!0)}this._changed()}},statics:{_types:c,random:function(){var N=Math.random;return new Ue(N(),N(),N())},_setOwner:function(N,$,F){return N&&(N._owner&&$&&N._owner!==$&&(N=N.clone()),!N._owner^!$&&(N._owner=$||null,N._setter=F||null)),N}}})},new function(){var c={add:function(f,b){return f+b},subtract:function(f,b){return f-b},multiply:function(f,b){return f*b},divide:function(f,b){return f/b}};return s.each(c,function(f,b){this[b]=function(_){_=Ue.read(arguments);for(var C=this._type,A=this._components,T=_._convert(C),N=0,$=A.length;N<$;N++)T[N]=f(A[N],T[N]);return new Ue(C,T,this._alpha!=null?f(this._alpha,_.getAlpha()):null)}},{})}),ut=s.extend({_class:"Gradient",initialize:function(f,b){this._id=m.get(),f&&s.isPlainObject(f)&&(this.set(f),f=b=null),this._stops==null&&this.setStops(f||["white","black"]),this._radial==null&&this.setRadial(typeof b=="string"&&b==="radial"||b||!1)},_serialize:function(c,f){return f.add(this,function(){return s.serialize([this._stops,this._radial],c,!0,f)})},_changed:function(){for(var c=0,f=this._owners&&this._owners.length;c<f;c++)this._owners[c]._changed()},_addOwner:function(c){this._owners||(this._owners=[]),this._owners.push(c)},_removeOwner:function(c){var f=this._owners?this._owners.indexOf(c):-1;f!=-1&&(this._owners.splice(f,1),this._owners.length||(this._owners=n))},clone:function(){for(var c=[],f=0,b=this._stops.length;f<b;f++)c[f]=this._stops[f].clone();return new ut(c,this._radial)},getStops:function(){return this._stops},setStops:function(c){if(c.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var f=this._stops;if(f)for(var b=0,_=f.length;b<_;b++)f[b]._owner=n;f=this._stops=de.readList(c,0,{clone:!0});for(var b=0,_=f.length;b<_;b++)f[b]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(c){this._radial=c,this._changed()},equals:function(c){if(c===this)return!0;if(c&&this._class===c._class){var f=this._stops,b=c._stops,_=f.length;if(_===b.length){for(var C=0;C<_;C++)if(!f[C].equals(b[C]))return!1;return!0}}return!1}}),de=s.extend({_class:"GradientStop",initialize:function(f,b){var _=f,C=b;typeof f=="object"&&b===n&&(Array.isArray(f)&&typeof f[0]!="number"?(_=f[0],C=f[1]):("color"in f||"offset"in f||"rampPoint"in f)&&(_=f.color,C=f.offset||f.rampPoint||0)),this.setColor(_),this.setOffset(C)},clone:function(){return new de(this._color.clone(),this._offset)},_serialize:function(c,f){var b=this._color,_=this._offset;return s.serialize(_==null?[b]:[b,_],c,!0,f)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(c){this._offset=c,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ue._setOwner(this._color,null),this._color=Ue._setOwner(Ue.read(arguments,0),this,"setColor"),this._changed()},equals:function(c){return c===this||c&&this._class===c._class&&this._color.equals(c._color)&&this._offset==c._offset||!1}}),oe=s.extend(new function(){var c={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},f=s.set({},c,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),b=s.set({},f,{fillColor:new Ue}),_={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},C={beans:!0},A={_class:"Style",beans:!0,initialize:function(N,$,F){this._values={},this._owner=$,this._project=$&&$._project||F||$e.project,this._defaults=!$||$ instanceof U?f:$ instanceof it?b:c,N&&this.set(N)}};return s.each(f,function(T,N){var $=/Color$/.test(N),F=N==="shadowOffset",Y=s.capitalize(N),Q=_[N],K="set"+Y,V="get"+Y;A[K]=function(X){var B=this._owner,Z=B&&B._children,G=Z&&Z.length>0&&!(B instanceof Re);if(G)for(var re=0,z=Z.length;re<z;re++)Z[re]._style[K](X);if((N==="selectedColor"||!G)&&N in this._defaults){var ne=this._values[N];ne!==X&&($&&(ne&&(Ue._setOwner(ne,null),ne._canvasStyle=null),X&&X.constructor===Ue&&(X=Ue._setOwner(X,B,G&&K))),this._values[N]=X,B&&B._changed(Q||129))}},A[V]=function(X){var B=this._owner,Z=B&&B._children,G=Z&&Z.length>0&&!(B instanceof Re),re;if(G&&!X)for(var z=0,ne=Z.length;z<ne;z++){var se=Z[z]._style[V]();if(!z)re=se;else if(!s.equals(re,se))return n}else if(N in this._defaults){var re=this._values[N];if(re===n)re=this._defaults[N],re&&re.clone&&(re=re.clone());else{var ue=$?Ue:F?g:null;ue&&!(re&&re.constructor===ue)&&(this._values[N]=re=ue.read([re],0,{readNull:!0,clone:!0}))}}return re&&$&&(re=Ue._setOwner(re,B,G&&K)),re},C[V]=function(X){return this._style[V](X)},C[K]=function(X){this._style[K](X)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(T,N){var $="get"+N,F="set"+N;A[$]=C[$]="#get"+T,A[F]=C[F]="#set"+T}),E.inject(C),A},{set:function(c){var f=c instanceof oe,b=f?c._values:c;if(b){for(var _ in b)if(_ in this._defaults){var C=b[_];this[_]=C&&f&&C.clone?C.clone():C}}},equals:function(c){function f(b,_,C){var A=b._values,T=_._values,N=_._defaults;for(var $ in A){var F=A[$],Y=T[$];if(!(C&&$ in T)&&!s.equals(F,Y===n?N[$]:Y))return!1}return!0}return c===this||c&&this._class===c._class&&f(this,c)&&f(c,this,!0)||!1},_dispose:function(){var c;c=this.getFillColor(),c&&(c._canvasStyle=null),c=this.getStrokeColor(),c&&(c._canvasStyle=null),c=this.getShadowColor(),c&&(c._canvasStyle=null)},hasFill:function(){var c=this.getFillColor();return!!c&&c.alpha>0},hasStroke:function(){var c=this.getStrokeColor();return!!c&&c.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var c=this.getShadowColor();return!!c&&c.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var c=this.getFontSize();return this.getFontWeight()+" "+c+(/[a-z]/i.test(c+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function c(){var f=c.base.call(this),b=this.getFontSize();return/pt|em|%|px/.test(b)&&(b=this.getView().getPixelSize(b)),f??b*1.2}}),We=new function(){function c(f,b,_,C){for(var A=["","webkit","moz","Moz","ms","o"],T=b[0].toUpperCase()+b.substring(1),N=0;N<6;N++){var $=A[N],F=$?$+T:b;if(F in f){if(_)f[F]=C;else return f[F];break}}}return{getStyles:function(f){var b=f&&f.nodeType!==9?f.ownerDocument:f,_=b&&b.defaultView;return _&&_.getComputedStyle(f,"")},getBounds:function(f,b){var _=f.ownerDocument,C=_.body,A=_.documentElement,T;try{T=f.getBoundingClientRect()}catch{T={left:0,top:0,width:0,height:0}}var N=T.left-(A.clientLeft||C.clientLeft||0),$=T.top-(A.clientTop||C.clientTop||0);if(!b){var F=_.defaultView;N+=F.pageXOffset||A.scrollLeft||C.scrollLeft,$+=F.pageYOffset||A.scrollTop||C.scrollTop}return new x(N,$,T.width,T.height)},getViewportBounds:function(f){var b=f.ownerDocument,_=b.defaultView,C=b.documentElement;return new x(0,0,_.innerWidth||C.clientWidth,_.innerHeight||C.clientHeight)},getOffset:function(f,b){return We.getBounds(f,b).getPoint()},getSize:function(f){return We.getBounds(f,!0).getSize()},isInvisible:function(f){return We.getSize(f).equals(new w(0,0))},isInView:function(f){return!We.isInvisible(f)&&We.getViewportBounds(f).intersects(We.getBounds(f,!0))},isInserted:function(f){return i.body.contains(f)},getPrefixed:function(f,b){return f&&c(f,b)},setPrefixed:function(f,b,_){if(typeof b=="object")for(var C in b)c(f,C,!0,b[C]);else c(f,b,!0,_)}}},Ne={add:function(c,f){if(c)for(var b in f)for(var _=f[b],C=b.split(/[\s,]+/g),A=0,T=C.length;A<T;A++){var N=C[A],$=c===i&&(N==="touchstart"||N==="touchmove")?{passive:!1}:!1;c.addEventListener(N,_,$)}},remove:function(c,f){if(c)for(var b in f)for(var _=f[b],C=b.split(/[\s,]+/g),A=0,T=C.length;A<T;A++)c.removeEventListener(C[A],_,!1)},getPoint:function(c){var f=c.targetTouches?c.targetTouches.length?c.targetTouches[0]:c.changedTouches[0]:c;return new g(f.pageX||f.clientX+i.documentElement.scrollLeft,f.pageY||f.clientY+i.documentElement.scrollTop)},getTarget:function(c){return c.target||c.srcElement},getRelatedTarget:function(c){return c.relatedTarget||c.toElement},getOffset:function(c,f){return Ne.getPoint(c).subtract(We.getOffset(f||Ne.getTarget(c)))}};Ne.requestAnimationFrame=new function(){var c=We.getPrefixed(r,"requestAnimationFrame"),f=!1,b=[],_;function C(){var A=b;b=[];for(var T=0,N=A.length;T<N;T++)A[T]();f=c&&b.length,f&&c(C)}return function(A){b.push(A),c?f||(c(C),f=!0):_||(_=setInterval(C,1e3/60))}};var ft=s.extend(a,{_class:"View",initialize:function c(f,b){function _(Q){return b[Q]||parseInt(b.getAttribute(Q),10)}function C(){var Q=We.getSize(b);return Q.isNaN()||Q.isZero()?new w(_("width"),_("height")):Q}var A;if(r&&b){this._id=b.getAttribute("id"),this._id==null&&b.setAttribute("id",this._id="paper-view-"+c._id++),Ne.add(b,this._viewEvents);var T="none";if(We.setPrefixed(b.style,{userDrag:T,userSelect:T,touchCallout:T,contentZooming:T,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(b,"resize")){var N=this;Ne.add(r,this._windowEvents={resize:function(){N.setViewSize(C())}})}if(A=C(),o.hasAttribute(b,"stats")&&typeof Stats<"u"){this._stats=new Stats;var $=this._stats.domElement,F=$.style,Y=We.getOffset(b);F.position="absolute",F.left=Y.x+"px",F.top=Y.y+"px",i.body.appendChild($)}}else A=new w(b),b=null;this._project=f,this._scope=f._scope,this._element=b,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(A.width,A.height),this._viewSize=A,c._views.push(this),c._viewsById[this._id]=this,(this._matrix=new j)._owner=this,c._focused||(c._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!$e.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;ft._focused===this&&(ft._focused=null),ft._views.splice(ft._views.indexOf(this),1),delete ft._viewsById[this._id];var c=this._project;return c._view===this&&(c._view=null),Ne.remove(this._element,this._viewEvents),Ne.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(E._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(c){this[c]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(c){this._autoUpdate=c,c&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var c=this;Ne.requestAnimationFrame(function(){if(c._requested=!1,c._animate){c.requestUpdate();var f=c._element;(!We.getPrefixed(i,"hidden")||o.getAttribute(f,"keepalive")==="true")&&We.isInView(f)&&c._handleFrame()}c._autoUpdate&&c.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){$e=this._scope;var c=Date.now()/1e3,f=this._last?c-this._last:0;this._last=c,this.emit("frame",new s({delta:f,time:this._time+=f,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(c,f){var b=this._frameItems;f?(b[c._id]={item:c,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete b[c._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(c){for(var f in this._frameItems){var b=this._frameItems[f];b.item.emit("frame",new s(c,{time:b.time+=c.delta,count:b.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var c=this._viewSize;return new S(c.width,c.height,this,"setViewSize")},setViewSize:function(){var c=w.read(arguments),f=c.subtract(this._viewSize);f.isZero()||(this._setElementSize(c.width,c.height),this._viewSize.set(c),this._changed(),this.emit("resize",{size:c,delta:f}),this._autoUpdate&&this.update())},_setElementSize:function(c,f){var b=this._element;b&&(b.width!==c&&(b.width=c),b.height!==f&&(b.height=f))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return We.isInView(this._element)},isInserted:function(){return We.isInserted(this._element)},getPixelSize:function(c){var f=this._element,b;if(f){var _=f.parentNode,C=i.createElement("div");C.style.fontSize=c,_.appendChild(C),b=parseFloat(We.getStyles(C).fontSize),_.removeChild(C)}else b=parseFloat(b);return b},getTextWidth:function(c,f){return 0}},s.each(["rotate","scale","shear","skew"],function(c){var f=c==="rotate";this[c]=function(){var b=arguments,_=(f?s:g).read(b),C=g.read(b,0,{readNull:!0});return this.transform(new j()[c](_,C||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var c=new j;return this.transform(c.translate.apply(c,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var c=g.read(arguments);this.translate(this.getCenter().subtract(c))},getZoom:function(){var c=this._decompose().scaling;return(c.x+c.y)/2},setZoom:function(c){this.transform(new j().scale(c/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(c){var f=this.getRotation();f!=null&&c!=null&&this.rotate(c-f)},getScaling:function(){var c=this._decompose().scaling;return new v(c.x,c.y,this,"setScaling")},setScaling:function(){var c=this.getScaling(),f=g.read(arguments,0,{clone:!0,readNull:!0});c&&f&&this.scale(f.x/c.x,f.y/c.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var c=this._matrix;c.set.apply(c,arguments)},transform:function(c){this._matrix.append(c)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(c){return this.viewToProject(Ne.getOffset(c,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(c,f){i&&typeof f=="string"&&(f=i.getElementById(f));var b=r?Pt:ft;return new b(c,f)}}},new function(){if(!r)return;var c,f,b=!1,_=!1;function C(we){var Ie=Ne.getTarget(we);return Ie.getAttribute&&ft._viewsById[Ie.getAttribute("id")]}function A(){var we=ft._focused;if(!we||!we.isVisible()){for(var Ie=0,Fe=ft._views.length;Ie<Fe;Ie++)if((we=ft._views[Ie]).isVisible()){ft._focused=f=we;break}}}function T(we,Ie,Fe){we._handleMouseEvent("mousemove",Ie,Fe)}var N=r.navigator,$,F,Y;N.pointerEnabled||N.msPointerEnabled?($="pointerdown MSPointerDown",F="pointermove MSPointerMove",Y="pointerup pointercancel MSPointerUp MSPointerCancel"):($="touchstart",F="touchmove",Y="touchend touchcancel","ontouchstart"in r&&N.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||($+=" mousedown",F+=" mousemove",Y+=" mouseup"));var Q={},K={mouseout:function(we){var Ie=ft._focused,Fe=Ne.getRelatedTarget(we);if(Ie&&(!Fe||Fe.nodeName==="HTML")){var Ye=Ne.getOffset(we,Ie._element),Ze=Ye.x,Qe=Math.abs,pt=Qe(Ze),gt=1<<25,At=pt-gt;Ye.x=Qe(At)<pt?At*(Ze<0?-1:1):Ze,T(Ie,we,Ie.viewToProject(Ye))}},scroll:A};Q[$]=function(we){var Ie=ft._focused=C(we);b||(b=!0,Ie._handleMouseEvent("mousedown",we))},K[F]=function(we){var Ie=ft._focused;if(!_){var Fe=C(we);Fe?Ie!==Fe&&(Ie&&T(Ie,we),c||(c=Ie),Ie=ft._focused=f=Fe):f&&f===Ie&&(c&&!c.isInserted()&&(c=null),Ie=ft._focused=c,c=null,A())}Ie&&T(Ie,we)},K[$]=function(){_=!0},K[Y]=function(we){var Ie=ft._focused;Ie&&b&&Ie._handleMouseEvent("mouseup",we),_=b=!1},Ne.add(i,K),Ne.add(r,{load:A});var V=!1,X=!1,B={doubleclick:"click",mousedrag:"mousemove"},Z=!1,G,re,z,ne,se,ue,ie,be;function Se(we,Ie,Fe,Ye,Ze,Qe,pt){var gt=!1,At;function kt(at,lt){if(at.responds(lt)){if(At||(At=new ae(lt,Ye,Ze,Ie||at,Qe?Ze.subtract(Qe):null)),at.emit(lt,At)&&(V=!0,At.prevented&&(X=!0),At.stopped))return gt=!0}else{var Tt=B[lt];if(Tt)return kt(at,Tt)}}for(;we&&we!==pt&&!kt(we,Fe);)we=we._parent;return gt}function Ae(we,Ie,Fe,Ye,Ze,Qe){return we._project.removeOn(Fe),X=V=!1,se&&Se(se,null,Fe,Ye,Ze,Qe)||Ie&&Ie!==se&&!Ie.isDescendant(se)&&Se(Ie,null,Fe==="mousedrag"?"mousemove":Fe,Ye,Ze,Qe,se)||Se(we,se||Ie||we,Fe,Ye,Ze,Qe)}var De={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Q,_handleMouseEvent:function(we,Ie,Fe){var Ye=this._itemEvents,Ze=Ye.native[we],Qe=we==="mousemove",pt=this._scope.tool,gt=this;function At(dt){return Ye.virtual[dt]||gt.responds(dt)||pt&&pt.responds(dt)}Qe&&b&&At("mousedrag")&&(we="mousedrag"),Fe||(Fe=this.getEventPoint(Ie));var kt=this.getBounds().contains(Fe),at=Ze&&kt&&gt._project.hitTest(Fe,{tolerance:0,fill:!0,stroke:!0}),lt=at&&at.item||null,Tt=!1,Ot={};if(Ot[we.substr(5)]=!0,Ze&&lt!==ne&&(ne&&Se(ne,null,"mouseleave",Ie,Fe),lt&&Se(lt,null,"mouseenter",Ie,Fe),ne=lt),Z^kt&&(Se(this,null,kt?"mouseenter":"mouseleave",Ie,Fe),Tt=!0),(kt||Ot.drag)&&!Fe.equals(re)&&(Ae(this,lt,Qe?we:"mousemove",Ie,Fe,re),Tt=!0),Z=kt,Ot.down&&kt||Ot.up&&G){if(Ae(this,lt,we,Ie,Fe,G),Ot.down){if(be=lt===ue&&Date.now()-ie<300,z=ue=lt,!X&&lt){for(var Be=lt;Be&&!Be.responds("mousedrag");)Be=Be._parent;Be&&(se=lt)}G=Fe}else Ot.up&&(!X&&lt===z&&(ie=Date.now(),Ae(this,lt,be?"doubleclick":"click",Ie,Fe,G),be=!1),z=se=null);Z=!1,Tt=!0}re=Fe,Tt&&pt&&(V=pt._handleMouseEvent(we,Ie,Fe,Ot)||V),Ie.cancelable!==!1&&(V&&!Ot.move||Ot.down&&At("mouseup"))&&Ie.preventDefault()},_handleKeyEvent:function(we,Ie,Fe,Ye){var Ze=this._scope,Qe=Ze.tool,pt;function gt(At){At.responds(we)&&($e=Ze,At.emit(we,pt=pt||new q(we,Ie,Fe,Ye)))}this.isVisible()&&(gt(this),Qe&&Qe.responds(we)&&gt(Qe))},_countItemEvent:function(we,Ie){var Fe=this._itemEvents,Ye=Fe.native,Ze=Fe.virtual;for(var Qe in De)Ye[Qe]=(Ye[Qe]||0)+(De[Qe][we]||0)*Ie;Ze[we]=(Ze[we]||0)+Ie},statics:{updateFocus:A,_resetState:function(){b=_=V=Z=!1,c=f=G=re=z=ne=se=ue=ie=be=null}}}}),Pt=ft.extend({_class:"CanvasView",initialize:function(f,b){if(!(b instanceof r.HTMLCanvasElement)){var _=w.read(arguments,1);if(_.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));b=ve.getCanvas(_)}var C=this._context=b.getContext("2d");if(C.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(b,"hidpi"))){var A=r.devicePixelRatio||1,T=We.getPrefixed(C,"backingStorePixelRatio")||1;this._pixelRatio=A/T}ft.call(this,f,b),this._needsUpdate=!0},remove:function c(){return this._context.restore(),c.base.call(this)},_setElementSize:function c(f,b){var _=this._pixelRatio;if(c.base.call(this,f*_,b*_),_!==1){var C=this._element,A=this._context;if(!o.hasAttribute(C,"resize")){var T=C.style;T.width=f+"px",T.height=b+"px"}A.restore(),A.save(),A.scale(_,_)}},getContext:function(){return this._context},getPixelSize:function c(f){var b=$e.agent,_;if(b&&b.firefox)_=c.base.call(this,f);else{var C=this._context,A=C.font;C.font=f+" serif",_=parseFloat(C.font),C.font=A}return _},getTextWidth:function(c,f){var b=this._context,_=b.font,C=0;b.font=c;for(var A=0,T=f.length;A<T;A++)C=Math.max(C,b.measureText(f[A]).width);return b.font=_,C},update:function(){if(!this._needsUpdate)return!1;var c=this._project,f=this._context,b=this._viewSize;return f.clearRect(0,0,b.width+1,b.height+1),c&&c.draw(f,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ct=s.extend({_class:"Event",initialize:function(f){this.event=f,this.type=f&&f.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return qe.modifiers}}),q=Ct.extend({_class:"KeyEvent",initialize:function(f,b,_,C){this.type=f,this.event=b,this.key=_,this.character=C},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),qe=new function(){var c={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},f={tab:"	",space:" ",enter:"\r"},b={},_={},C,A,T=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var F=$e&&$e.agent;return F&&F.mac?this.meta:this.control}}});function N(F){var Y=F.key||F.keyIdentifier;return Y=/^U\+/.test(Y)?String.fromCharCode(parseInt(Y.substr(2),16)):/^Arrow[A-Z]/.test(Y)?Y.substr(5):Y==="Unidentified"||Y===n?String.fromCharCode(F.keyCode):Y,c[Y]||(Y.length>1?s.hyphenate(Y):Y.toLowerCase())}function $(F,Y,Q,K){var V=ft._focused,X;if(b[Y]=F,F?_[Y]=Q:delete _[Y],Y.length>1&&(X=s.camelize(Y))in T){T[X]=F;var B=$e&&$e.agent;if(X==="meta"&&B&&B.mac)if(F)C={};else{for(var Z in C)Z in _&&$(!1,Z,C[Z],K);C=null}}else F&&C&&(C[Y]=Q);V&&V._handleKeyEvent(F?"keydown":"keyup",K,Y,Q)}return Ne.add(i,{keydown:function(F){var Y=N(F),Q=$e&&$e.agent;Y.length>1||Q&&Q.chrome&&(F.altKey||Q.mac&&F.metaKey||!Q.mac&&F.ctrlKey)?$(!0,Y,f[Y]||(Y.length>1?"":Y),F):A=Y},keypress:function(F){if(A){var Y=N(F),Q=F.charCode,K=Q>=32?String.fromCharCode(Q):Y.length>1?"":Y;Y!==A&&(Y=K.toLowerCase()),$(!0,Y,K,F),A=null}},keyup:function(F){var Y=N(F);Y in _&&$(!1,Y,_[Y],F)}}),Ne.add(r,{blur:function(F){for(var Y in _)$(!1,Y,_[Y],F)}}),{modifiers:T,isDown:function(F){return!!b[F]}}},ae=Ct.extend({_class:"MouseEvent",initialize:function(f,b,_,C,A){this.type=f,this.event=b,this.point=_,this.target=C,this.delta=A},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),M=Ct.extend({_class:"ToolEvent",_item:null,initialize:function(f,b,_){this.tool=f,this.type=b,this.event=_},_choosePoint:function(c,f){return c||(f?f.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(c){this._point=c},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(c){this._lastPoint=c},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(c){this._downPoint=c},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(c){this._middlePoint=c},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(c){this._delta=c},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(c){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=c},getItem:function(){if(!this._item){var c=this.tool._scope.project.hitTest(this.getPoint());if(c){for(var f=c.item,b=f._parent;/^(Group|CompoundPath)$/.test(b._class);)f=b,b=b._parent;this._item=f}}return this._item},setItem:function(c){this._item=c},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),L=u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(f){u.call(this),this._moveCount=-1,this._downCount=-1,this.set(f)},getMinDistance:function(){return this._minDistance},setMinDistance:function(c){this._minDistance=c,c!=null&&this._maxDistance!=null&&c>this._maxDistance&&(this._maxDistance=c)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(c){this._maxDistance=c,this._minDistance!=null&&c!=null&&c<this._minDistance&&(this._minDistance=c)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(c){this._minDistance=this._maxDistance=c},_handleMouseEvent:function(c,f,b,_){$e=this._scope,_.drag&&!this.responds(c)&&(c="mousemove");var C=_.move||_.drag,A=this.responds(c),T=!1,N=this;function $(Y,Q){var K=b,V=C?N._point:N._downPoint||K;if(C){if(N._moveCount>=0&&K.equals(V))return!1;if(V&&(Y!=null||Q!=null)){var X=K.subtract(V),B=X.getLength();if(B<(Y||0))return!1;Q&&(K=V.add(X.normalize(Math.min(B,Q))))}N._moveCount++}return N._point=K,N._lastPoint=V||K,_.down&&(N._moveCount=-1,N._downPoint=K,N._downCount++),!0}function F(){A&&(T=N.emit(c,new M(N,c,f))||T)}if(_.down)$(),F();else if(_.up)$(null,this._maxDistance),F();else if(A)for(;$(this._minDistance,this._maxDistance);)F();return T}}),ee=s.extend(a,{_class:"Tween",statics:{easings:new s({linear:function(c){return c},easeInQuad:function(c){return c*c},easeOutQuad:function(c){return c*(2-c)},easeInOutQuad:function(c){return c<.5?2*c*c:-1+2*(2-c)*c},easeInCubic:function(c){return c*c*c},easeOutCubic:function(c){return--c*c*c+1},easeInOutCubic:function(c){return c<.5?4*c*c*c:(c-1)*(2*c-2)*(2*c-2)+1},easeInQuart:function(c){return c*c*c*c},easeOutQuart:function(c){return 1- --c*c*c*c},easeInOutQuart:function(c){return c<.5?8*c*c*c*c:1-8*--c*c*c*c},easeInQuint:function(c){return c*c*c*c*c},easeOutQuint:function(c){return 1+--c*c*c*c*c},easeInOutQuint:function(c){return c<.5?16*c*c*c*c*c:1+16*--c*c*c*c*c}})},initialize:function c(f,b,_,C,A,T){this.object=f;var N=typeof A,$=N==="function";this.type=$?N:N==="string"?A:"linear",this.easing=$?A:c.easings[this.type],this.duration=C,this.running=!1,this._then=null,this._startTime=null;var F=b||_;this._keys=F?Object.keys(F):[],this._parsedKeys=this._parseKeys(this._keys),this._from=F&&this._getState(b),this._to=F&&this._getState(_),T!==!1&&this.start()},then:function(c){return this._then=c,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(c){if(this.running){c>=1&&(c=1,this.running=!1);for(var f=this.easing(c),b=this._keys,_=function(Y){return typeof Y=="function"?Y(f,c):Y},C=0,A=b&&b.length;C<A;C++){var T=b[C],N=_(this._from[T]),$=_(this._to[T]),F=N&&$&&N.__add&&$.__add?$.__subtract(N).__multiply(f).__add(N):($-N)*f+N;this._setProperty(this._parsedKeys[T],F)}this.responds("update")&&this.emit("update",new s({progress:c,factor:f})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(c){var f=this._startTime,b=f?(c-f)/this.duration:0;f||(this._startTime=c),this.update(b)},_getState:function(c){for(var f=this._keys,b={},_=0,C=f.length;_<C;_++){var A=f[_],T=this._parsedKeys[A],N=this._getProperty(T),$;if(c){var F=this._resolveValue(N,c[A]);this._setProperty(T,F),$=this._getProperty(T),$=$&&$.clone?$.clone():$,this._setProperty(T,N)}else $=N&&N.clone?N.clone():N;b[A]=$}return b},_resolveValue:function(c,f){if(f){if(Array.isArray(f)&&f.length===2){var b=f[0];return b&&b.match&&b.match(/^[+\-\*\/]=/)?this._calculate(c,b[0],f[1]):f}else if(typeof f=="string"){var _=f.match(/^[+\-*/]=(.*)/);if(_){var C=JSON.parse(_[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(c,f[0],C)}}}return f},_calculate:function(c,f,b){return $e.PaperScript.calculateBinary(c,f,b)},_parseKeys:function(c){for(var f={},b=0,_=c.length;b<_;b++){var C=c[b],A=C.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");f[C]=A.split("/")}return f},_getProperty:function(c,f){for(var b=this.object,_=0,C=c.length-(f||0);_<C&&b;_++)b=b[c[_]];return b},_setProperty:function(c,f){var b=this._getProperty(c,1);b&&(b[c[c.length-1]]=f)}}),pe={request:function(c){var f=new t.XMLHttpRequest;return f.open((c.method||"get").toUpperCase(),c.url,s.pick(c.async,!0)),c.mimeType&&f.overrideMimeType(c.mimeType),f.onload=function(){var b=f.status;b===0||b===200?c.onLoad&&c.onLoad.call(f,f.responseText):f.onerror()},f.onerror=function(){var b=f.status,_='Could not load "'+c.url+'" (Status: '+b+")";if(c.onError)c.onError(_,b);else throw new Error(_)},f.send(null)}},ve=s.exports.CanvasProvider={canvases:[],getCanvas:function(c,f,b){if(!r)return null;var _,C=!0;typeof c=="object"&&(f=c.height,c=c.width),this.canvases.length?_=this.canvases.pop():(_=i.createElement("canvas"),C=!1);var A=_.getContext("2d",b||{});if(!A)throw new Error("Canvas "+_+" is unable to provide a 2D context.");return _.width===c&&_.height===f?C&&A.clearRect(0,0,c+1,f+1):(_.width=c,_.height=f),A.save(),_},getContext:function(c,f,b){var _=this.getCanvas(c,f,b);return _?_.getContext("2d",b||{}):null},release:function(c){var f=c&&c.canvas?c.canvas:c;f&&f.getContext&&(f.getContext("2d").restore(),this.canvases.push(f))}},ye=new function(){var c=Math.min,f=Math.max,b=Math.abs,_,C,A,T,N,$,F,Y,Q,K,V;function X(se,ue,ie){return .2989*se+.587*ue+.114*ie}function B(se,ue,ie,Ae){var Se=Ae-X(se,ue,ie);Q=se+Se,K=ue+Se,V=ie+Se;var Ae=X(Q,K,V),De=c(Q,K,V),we=f(Q,K,V);if(De<0){var Ie=Ae-De;Q=Ae+(Q-Ae)*Ae/Ie,K=Ae+(K-Ae)*Ae/Ie,V=Ae+(V-Ae)*Ae/Ie}if(we>255){var Fe=255-Ae,Ye=we-Ae;Q=Ae+(Q-Ae)*Fe/Ye,K=Ae+(K-Ae)*Fe/Ye,V=Ae+(V-Ae)*Fe/Ye}}function Z(se,ue,ie){return f(se,ue,ie)-c(se,ue,ie)}function G(se,ue,ie,be){var Se=[se,ue,ie],Ae=f(se,ue,ie),De=c(se,ue,ie),we;De=De===se?0:De===ue?1:2,Ae=Ae===se?0:Ae===ue?1:2,we=c(De,Ae)===0?f(De,Ae)===1?2:1:0,Se[Ae]>Se[De]?(Se[we]=(Se[we]-Se[De])*be/(Se[Ae]-Se[De]),Se[Ae]=be):Se[we]=Se[Ae]=0,Se[De]=0,Q=Se[0],K=Se[1],V=Se[2]}var re={multiply:function(){Q=N*_/255,K=$*C/255,V=F*A/255},screen:function(){Q=N+_-N*_/255,K=$+C-$*C/255,V=F+A-F*A/255},overlay:function(){Q=N<128?2*N*_/255:255-2*(255-N)*(255-_)/255,K=$<128?2*$*C/255:255-2*(255-$)*(255-C)/255,V=F<128?2*F*A/255:255-2*(255-F)*(255-A)/255},"soft-light":function(){var se=_*N/255;Q=se+N*(255-(255-N)*(255-_)/255-se)/255,se=C*$/255,K=se+$*(255-(255-$)*(255-C)/255-se)/255,se=A*F/255,V=se+F*(255-(255-F)*(255-A)/255-se)/255},"hard-light":function(){Q=_<128?2*_*N/255:255-2*(255-_)*(255-N)/255,K=C<128?2*C*$/255:255-2*(255-C)*(255-$)/255,V=A<128?2*A*F/255:255-2*(255-A)*(255-F)/255},"color-dodge":function(){Q=N===0?0:_===255?255:c(255,255*N/(255-_)),K=$===0?0:C===255?255:c(255,255*$/(255-C)),V=F===0?0:A===255?255:c(255,255*F/(255-A))},"color-burn":function(){Q=N===255?255:_===0?0:f(0,255-(255-N)*255/_),K=$===255?255:C===0?0:f(0,255-(255-$)*255/C),V=F===255?255:A===0?0:f(0,255-(255-F)*255/A)},darken:function(){Q=N<_?N:_,K=$<C?$:C,V=F<A?F:A},lighten:function(){Q=N>_?N:_,K=$>C?$:C,V=F>A?F:A},difference:function(){Q=N-_,Q<0&&(Q=-Q),K=$-C,K<0&&(K=-K),V=F-A,V<0&&(V=-V)},exclusion:function(){Q=N+_*(255-N-N)/255,K=$+C*(255-$-$)/255,V=F+A*(255-F-F)/255},hue:function(){G(_,C,A,Z(N,$,F)),B(Q,K,V,X(N,$,F))},saturation:function(){G(N,$,F,Z(_,C,A)),B(Q,K,V,X(N,$,F))},luminosity:function(){B(N,$,F,X(_,C,A))},color:function(){B(_,C,A,X(N,$,F))},add:function(){Q=c(N+_,255),K=c($+C,255),V=c(F+A,255)},subtract:function(){Q=f(N-_,0),K=f($-C,0),V=f(F-A,0)},average:function(){Q=(N+_)/2,K=($+C)/2,V=(F+A)/2},negation:function(){Q=255-b(255-_-N),K=255-b(255-C-$),V=255-b(255-A-F)}},z=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(se){this[se]=!0},{}),ne=ve.getContext(1,1,{willReadFrequently:!0});ne&&(s.each(re,function(se,ue){var ie=ue==="darken",be=!1;ne.save();try{ne.fillStyle=ie?"#300":"#a00",ne.fillRect(0,0,1,1),ne.globalCompositeOperation=ue,ne.globalCompositeOperation===ue&&(ne.fillStyle=ie?"#a00":"#300",ne.fillRect(0,0,1,1),be=ne.getImageData(0,0,1,1).data[0]!==ie?170:51)}catch{}ne.restore(),z[ue]=be}),ve.release(ne)),this.process=function(se,ue,ie,be,Se){var Ae=ue.canvas,De=se==="normal";if(De||z[se])ie.save(),ie.setTransform(1,0,0,1,0,0),ie.globalAlpha=be,De||(ie.globalCompositeOperation=se),ie.drawImage(Ae,Se.x,Se.y),ie.restore();else{var we=re[se];if(!we)return;for(var Ie=ie.getImageData(Se.x,Se.y,Ae.width,Ae.height),Fe=Ie.data,Ye=ue.getImageData(0,0,Ae.width,Ae.height).data,Ze=0,Qe=Fe.length;Ze<Qe;Ze+=4){_=Ye[Ze],N=Fe[Ze],C=Ye[Ze+1],$=Fe[Ze+1],A=Ye[Ze+2],F=Fe[Ze+2],T=Ye[Ze+3],Y=Fe[Ze+3],we();var pt=T*be/255,gt=1-pt;Fe[Ze]=pt*Q+gt*N,Fe[Ze+1]=pt*K+gt*$,Fe[Ze+2]=pt*V+gt*F,Fe[Ze+3]=T*be+gt*Y}ie.putImageData(Ie,Se.x,Se.y)}}},Me=new function(){var c="http://www.w3.org/2000/svg",f="http://www.w3.org/2000/xmlns",b="http://www.w3.org/1999/xlink",_={href:b,xlink:f,xmlns:f+"/","xmlns:xlink":f+"/"};function C(N,$,F){return T(i.createElementNS(c,N),$,F)}function A(N,$){var F=_[$],Y=F?N.getAttributeNS(F,$):N.getAttribute($);return Y==="null"?null:Y}function T(N,$,F){for(var Y in $){var Q=$[Y],K=_[Y];typeof Q=="number"&&F&&(Q=F.number(Q)),K?N.setAttributeNS(K,Y,Q):N.setAttribute(Y,Q)}return N}return{svg:c,xmlns:f,xlink:b,create:C,get:A,set:T}},Xe=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(c,f){return!f&&(c instanceof ze||c instanceof R||c instanceof it)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(c,f){var b=s.capitalize(f),_=c[2];this[f]={type:c[1],property:f,attribute:c[0],toSVG:_,fromSVG:_&&s.each(_,function(C,A){this[C]=A},{}),exportFilter:c[3],get:"get"+b,set:"set"+b}},{});new function(){var c;function f(re,z,ne){var se=new s,ue=re.getTranslation();if(z){var ie;re.isInvertible()?(re=re._shiftless(),ie=re._inverseTransform(ue),ue=null):ie=new g,se[ne?"cx":"x"]=ie.x,se[ne?"cy":"y"]=ie.y}if(!re.isIdentity()){var be=re.decompose();if(be){var Se=[],Ae=be.rotation,De=be.scaling,we=be.skewing;ue&&!ue.isZero()&&Se.push("translate("+c.point(ue)+")"),Ae&&Se.push("rotate("+c.number(Ae)+")"),(!p.isZero(De.x-1)||!p.isZero(De.y-1))&&Se.push("scale("+c.point(De)+")"),we.x&&Se.push("skewX("+c.number(we.x)+")"),we.y&&Se.push("skewY("+c.number(we.y)+")"),se.transform=Se.join(" ")}else se.transform="matrix("+re.getValues().join(",")+")"}return se}function b(re,z){for(var ne=f(re._matrix),se=re._children,ue=Me.create("g",ne,c),ie=0,be=se.length;ie<be;ie++){var Se=se[ie],Ae=Z(Se,z);if(Ae)if(Se.isClipMask()){var De=Me.create("clipPath");De.appendChild(Ae),X(Se,De,"clip"),Me.set(ue,{"clip-path":"url(#"+De.id+")"})}else ue.appendChild(Ae)}return ue}function _(re,z){var ne=f(re._matrix,!0),se=re.getSize(),ue=re.getImage();return ne.x-=se.width/2,ne.y-=se.height/2,ne.width=se.width,ne.height=se.height,ne.href=z.embedImages==!1&&ue&&ue.src||re.toDataURL(),Me.create("image",ne,c)}function C(re,z){var ne=z.matchShapes;if(ne){var se=re.toShape(!1);if(se)return A(se)}var ue=re._segments,ie=ue.length,be,Se=f(re._matrix);if(ne&&ie>=2&&!re.hasHandles())if(ie>2){be=re._closed?"polygon":"polyline";for(var Ae=[],De=0;De<ie;De++)Ae.push(c.point(ue[De]._point));Se.points=Ae.join(" ")}else{be="line";var we=ue[0]._point,Ie=ue[1]._point;Se.set({x1:we.x,y1:we.y,x2:Ie.x,y2:Ie.y})}else be="path",Se.d=re.getPathData(null,z.precision);return Me.create(be,Se,c)}function A(re){var z=re._type,ne=re._radius,se=f(re._matrix,!0,z!=="rectangle");if(z==="rectangle"){z="rect";var ue=re._size,ie=ue.width,be=ue.height;se.x-=ie/2,se.y-=be/2,se.width=ie,se.height=be,ne.isZero()&&(ne=null)}return ne&&(z==="circle"?se.r=ne:(se.rx=ne.width,se.ry=ne.height)),Me.create(z,se,c)}function T(re,z){var ne=f(re._matrix),se=re.getPathData(null,z.precision);return se&&(ne.d=se),Me.create("path",ne,c)}function N(re,z){var ne=f(re._matrix,!0),se=re._definition,ue=V(se,"symbol"),ie=se._item,be=ie.getStrokeBounds();return ue||(ue=Me.create("symbol",{viewBox:c.rectangle(be)}),ue.appendChild(Z(ie,z)),X(se,ue,"symbol")),ne.href="#"+ue.id,ne.x+=be.x,ne.y+=be.y,ne.width=be.width,ne.height=be.height,ne.overflow="visible",Me.create("use",ne,c)}function $(re){var z=V(re,"color");if(!z){var ne=re.getGradient(),se=ne._radial,ue=re.getOrigin(),ie=re.getDestination(),be;if(se){be={cx:ue.x,cy:ue.y,r:ue.getDistance(ie)};var Se=re.getHighlight();Se&&(be.fx=Se.x,be.fy=Se.y)}else be={x1:ue.x,y1:ue.y,x2:ie.x,y2:ie.y};be.gradientUnits="userSpaceOnUse",z=Me.create((se?"radial":"linear")+"Gradient",be,c);for(var Ae=ne._stops,De=0,we=Ae.length;De<we;De++){var Ie=Ae[De],Fe=Ie._color,Ye=Fe.getAlpha(),Ze=Ie._offset;be={offset:Ze??De/(we-1)},Fe&&(be["stop-color"]=Fe.toCSS(!0)),Ye<1&&(be["stop-opacity"]=Ye),z.appendChild(Me.create("stop",be,c))}X(re,z,"color")}return"url(#"+z.id+")"}function F(re){var z=Me.create("text",f(re._matrix,!0),c);return z.textContent=re._content,z}var Y={Group:b,Layer:b,Raster:_,Path:C,Shape:A,CompoundPath:T,SymbolItem:N,PointText:F};function Q(re,z,ne,se){var ue={},ie=!se&&re.getParent(),be=[];return re._name!=null&&(ue.id=re._name),s.each(Xe,function(Se){var Ae=Se.get,De=Se.type,we=re[Ae]();if(Se.exportFilter?Se.exportFilter(re,we):ne.reduceAttributes==!1||!ie||!s.equals(ie[Ae](),we)){if(De==="color"&&we!=null){var Ie=we.getAlpha();Ie<1&&(ue[Se.attribute+"-opacity"]=Ie)}De==="style"?be.push(Se.attribute+": "+we):ue[Se.attribute]=we==null?"none":De==="color"?we.gradient?$(we):we.toCSS(!0):De==="array"?we.join(","):De==="lookup"?Se.toSVG[we]:we}}),be.length&&(ue.style=be.join(";")),ue.opacity===1&&delete ue.opacity,re._visible||(ue.visibility="hidden"),Me.set(z,ue,c)}var K;function V(re,z){return K||(K={ids:{},svgs:{}}),re&&K.svgs[z+"-"+(re._id||re.__id||(re.__id=m.get("svg")))]}function X(re,z,ne){K||V();var se=K.ids[ne]=(K.ids[ne]||0)+1;z.id=ne+"-"+se,K.svgs[ne+"-"+(re._id||re.__id)]=z}function B(re,z){var ne=re,se=null;if(K){ne=re.nodeName.toLowerCase()==="svg"&&re;for(var ue in K.svgs)se||(ne||(ne=Me.create("svg"),ne.appendChild(re)),se=ne.insertBefore(Me.create("defs"),ne.firstChild)),se.appendChild(K.svgs[ue]);K=null}return z.asString?new t.XMLSerializer().serializeToString(ne):ne}function Z(re,z,ne){var se=Y[re._class],ue=se&&se(re,z);if(ue){var ie=z.onExport;ie&&(ue=ie(re,ue,z)||ue);var be=JSON.stringify(re._data);be&&be!=="{}"&&be!=="null"&&ue.setAttribute("data-paper-data",be)}return ue&&Q(re,ue,z,ne)}function G(re){return re||(re={}),c=new h(re.precision),re}E.inject({exportSVG:function(re){return re=G(re),B(Z(this,re,!0),re)}}),I.inject({exportSVG:function(re){re=G(re);var z=this._children,ne=this.getView(),se=s.pick(re.bounds,"view"),ue=re.matrix||se==="view"&&ne._matrix,ie=ue&&j.read([ue]),be=se==="view"?new x([0,0],ne.getViewSize()):se==="content"?E._getBounds(z,ie,{stroke:!0}).rect:x.read([se],0,{readNull:!0}),Se={version:"1.1",xmlns:Me.svg,"xmlns:xlink":Me.xlink};be&&(Se.width=be.width,Se.height=be.height,(be.x||be.x===0||be.y||be.y===0)&&(Se.viewBox=c.rectangle(be)));var Ae=Me.create("svg",Se,c),De=Ae;ie&&!ie.isIdentity()&&(De=Ae.appendChild(Me.create("g",f(ie),c)));for(var we=0,Ie=z.length;we<Ie;we++)De.appendChild(Z(z[we],re,!0));return B(Ae,re)}})},new function(){var c={},f;function b(z,ne,se,ue,ie,be){var Se=Me.get(z,ne)||be,Ae=Se==null?ue?null:se?"":0:se?Se:parseFloat(Se);return/%\s*$/.test(Se)?Ae/100*(ie?1:f[/x|^width/.test(ne)?"width":"height"]):Ae}function _(z,ne,se,ue,ie,be,Se){return ne=b(z,ne||"x",!1,ue,ie,be),se=b(z,se||"y",!1,ue,ie,Se),ue&&(ne==null||se==null)?null:new g(ne,se)}function C(z,ne,se,ue,ie){return ne=b(z,ne||"width",!1,ue,ie),se=b(z,se||"height",!1,ue,ie),ue&&(ne==null||se==null)?null:new w(ne,se)}function A(z,ne,se){return z==="none"?null:ne==="number"?parseFloat(z):ne==="array"?z?z.split(/[\s,]+/g).map(parseFloat):[]:ne==="color"?Z(z)||z:ne==="lookup"?se[z]:z}function T(z,ne,se,ue){var ie=z.childNodes,be=ne==="clippath",Se=ne==="defs",Ae=new U,De=Ae._project,we=De._currentStyle,Ie=[];if(!be&&!Se&&(Ae=B(Ae,z,ue),De._currentStyle=Ae._style.clone()),ue)for(var Fe=z.querySelectorAll("defs"),Ye=0,Ze=Fe.length;Ye<Ze;Ye++)G(Fe[Ye],se,!1);for(var Ye=0,Ze=ie.length;Ye<Ze;Ye++){var Qe=ie[Ye],pt;Qe.nodeType===1&&!/^defs$/i.test(Qe.nodeName)&&(pt=G(Qe,se,!1))&&!(pt instanceof te)&&Ie.push(pt)}return Ae.addChildren(Ie),be&&(Ae=B(Ae.reduce(),z,ue)),De._currentStyle=we,(be||Se)&&(Ae.remove(),Ae=null),Ae}function N(z,ne){for(var se=z.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),ue=[],ie=0,be=se.length;ie<be;ie+=2)ue.push(new g(parseFloat(se[ie]),parseFloat(se[ie+1])));var Se=new xe(ue);return ne==="polygon"&&Se.closePath(),Se}function $(z){return ze.create(z.getAttribute("d"))}function F(z,ne){var se=(b(z,"href",!0)||"").substring(1),ue=ne==="radialgradient",ie;if(se)ie=c[se].getGradient(),ie._radial^ue&&(ie=ie.clone(),ie._radial=ue);else{for(var be=z.childNodes,Se=[],Ae=0,De=be.length;Ae<De;Ae++){var we=be[Ae];we.nodeType===1&&Se.push(B(new de,we))}ie=new ut(Se,ue)}var Ie,Fe,Ye,Ze=b(z,"gradientUnits",!0)!=="userSpaceOnUse";ue?(Ie=_(z,"cx","cy",!1,Ze,"50%","50%"),Fe=Ie.add(b(z,"r",!1,!1,Ze,"50%"),0),Ye=_(z,"fx","fy",!0,Ze)):(Ie=_(z,"x1","y1",!1,Ze,"0%","0%"),Fe=_(z,"x2","y2",!1,Ze,"100%","0%"));var Qe=B(new Ue(ie,Ie,Fe,Ye),z);return Qe._scaleToBounds=Ze,null}var Y={"#document":function(z,ne,se,ue){for(var ie=z.childNodes,be=0,Se=ie.length;be<Se;be++){var Ae=ie[be];if(Ae.nodeType===1)return G(Ae,se,ue)}},g:T,svg:T,clippath:T,polygon:N,polyline:N,path:$,lineargradient:F,radialgradient:F,image:function(z){var ne=new W(b(z,"href",!0));return ne.on("load",function(){var se=C(z);this.setSize(se);var ue=_(z).add(se.divide(2));this._matrix.append(new j().translate(ue))}),ne},symbol:function(z,ne,se,ue){return new te(T(z,ne,se,ue),!0)},defs:T,use:function(z){var ne=(b(z,"href",!0)||"").substring(1),se=c[ne],ue=_(z);return se?se instanceof te?se.place(ue):se.clone().translate(ue):null},circle:function(z){return new R.Circle(_(z,"cx","cy"),b(z,"r"))},ellipse:function(z){return new R.Ellipse({center:_(z,"cx","cy"),radius:C(z,"rx","ry")})},rect:function(z){return new R.Rectangle(new x(_(z),C(z)),C(z,"rx","ry"))},line:function(z){return new xe.Line(_(z,"x1","y1"),_(z,"x2","y2"))},text:function(z){var ne=new tt(_(z).add(_(z,"dx","dy")));return ne.setContent(z.textContent.trim()||""),ne},switch:T};function Q(z,ne,se,ue){if(z.transform){for(var ie=(ue.getAttribute(se)||"").split(/\)\s*/g),be=new j,Se=0,Ae=ie.length;Se<Ae;Se++){var De=ie[Se];if(!De)break;for(var we=De.split(/\(\s*/),Ie=we[0].trim(),Fe=we[1].split(/[\s,]+/g),Ye=0,Ze=Fe.length;Ye<Ze;Ye++)Fe[Ye]=parseFloat(Fe[Ye]);switch(Ie){case"matrix":be.append(new j(Fe[0],Fe[1],Fe[2],Fe[3],Fe[4],Fe[5]));break;case"rotate":be.rotate(Fe[0],Fe[1]||0,Fe[2]||0);break;case"translate":be.translate(Fe[0],Fe[1]||0);break;case"scale":be.scale(Fe);break;case"skewX":be.skew(Fe[0],0);break;case"skewY":be.skew(0,Fe[0]);break}}z.transform(be)}}function K(z,ne,se){var ue=se==="fill-opacity"?"getFillColor":"getStrokeColor",ie=z[ue]&&z[ue]();ie&&ie.setAlpha(parseFloat(ne))}var V=s.set(s.each(Xe,function(z){this[z.attribute]=function(ne,se){if(ne[z.set]&&(ne[z.set](A(se,z.type,z.fromSVG)),z.type==="color")){var ue=ne[z.get]();if(ue&&ue._scaleToBounds){var ie=ne.getBounds();ue.transform(new j().translate(ie.getPoint()).scale(ie.getSize()))}}}},{}),{id:function(z,ne){c[ne]=z,z.setName&&z.setName(ne)},"clip-path":function(z,ne){var se=Z(ne);if(se)if(se=se.clone(),se.setClipMask(!0),z instanceof U)z.insertChild(0,se);else return new U(se,z)},gradientTransform:Q,transform:Q,"fill-opacity":K,"stroke-opacity":K,visibility:function(z,ne){z.setVisible&&z.setVisible(ne==="visible")},display:function(z,ne){z.setVisible&&z.setVisible(ne!==null)},"stop-color":function(z,ne){z.setColor&&z.setColor(ne)},"stop-opacity":function(z,ne){z._color&&z._color.setAlpha(parseFloat(ne))},offset:function(z,ne){if(z.setOffset){var se=ne.match(/(.*)%$/);z.setOffset(se?se[1]/100:parseFloat(ne))}},viewBox:function(z,ne,se,ue,ie){var be=new x(A(ne,"array")),Se=C(ue,null,null,!0),Ae,De;if(z instanceof U){var we=Se?Se.divide(be.getSize()):1,De=new j().scale(we).translate(be.getPoint().negate());Ae=z}else z instanceof te&&(Se&&be.setSize(Se),Ae=z._item);if(Ae){if(X(ue,"overflow",ie)!=="visible"){var Ie=new R.Rectangle(be);Ie.setClipMask(!0),Ae.addChild(Ie)}De&&Ae.transform(De)}}});function X(z,ne,se){var ue=z.attributes[ne],ie=ue&&ue.value;if(!ie&&z.style){var be=s.camelize(ne);ie=z.style[be],!ie&&se.node[be]!==se.parent[be]&&(ie=se.node[be])}return ie?ie==="none"?null:ie:n}function B(z,ne,se){var ue=ne.parentNode,ie={node:We.getStyles(ne)||{},parent:!se&&!/^defs$/i.test(ue.tagName)&&We.getStyles(ue)||{}};return s.each(V,function(be,Se){var Ae=X(ne,Se,ie);z=Ae!==n&&be(z,Ae,Se,ne,ie)||z}),z}function Z(z){var ne=z&&z.match(/\((?:["'#]*)([^"')]+)/),se=ne&&ne[1],ue=se&&c[r?se.replace(r.location.href.split("#")[0]+"#",""):se];return ue&&ue._scaleToBounds&&(ue=ue.clone(),ue._scaleToBounds=!0),ue}function G(z,ne,se){var ue=z.nodeName.toLowerCase(),ie=ue!=="#document",be=i.body,Se,Ae,De;se&&ie&&(f=$e.getView().getSize(),f=C(z,null,null,!0)||f,Se=Me.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Ae=z.parentNode,De=z.nextSibling,Se.appendChild(z),be.appendChild(Se));var we=$e.settings,Ie=we.applyMatrix,Fe=we.insertItems;we.applyMatrix=!1,we.insertItems=!1;var Ye=Y[ue],Ze=Ye&&Ye(z,ue,ne,se)||null;if(we.insertItems=Fe,we.applyMatrix=Ie,Ze){ie&&!(Ze instanceof U)&&(Ze=B(Ze,z,se));var Qe=ne.onImport,pt=ie&&z.getAttribute("data-paper-data");Qe&&(Ze=Qe(z,Ze,ne)||Ze),ne.expandShapes&&Ze instanceof R&&(Ze.remove(),Ze=Ze.toPath()),pt&&(Ze._data=JSON.parse(pt))}return Se&&(be.removeChild(Se),Ae&&(De?Ae.insertBefore(z,De):Ae.appendChild(z))),se&&(c={},Ze&&s.pick(ne.applyMatrix,Ie)&&Ze.matrix.apply(!0,!0)),Ze}function re(z,ne,se){if(!z)return null;ne=typeof ne=="function"?{onLoad:ne}:ne||{};var ue=$e,ie=null;function be(we){try{var Ie=typeof we=="object"?we:new t.DOMParser().parseFromString(we.trim(),"image/svg+xml");if(!Ie.nodeName)throw Ie=null,new Error("Unsupported SVG source: "+z);$e=ue,ie=G(Ie,ne,!0),(!ne||ne.insert!==!1)&&se._insertItem(n,ie);var Fe=ne.onLoad;Fe&&Fe(ie,we)}catch(Ye){Se(Ye)}}function Se(we,Ie){var Fe=ne.onError;if(Fe)Fe(we,Ie);else throw new Error(we)}if(typeof z=="string"&&!/^[\s\S]*</.test(z)){var Ae=i.getElementById(z);Ae?be(Ae):pe.request({url:z,async:!0,onLoad:be,onError:Se})}else if(typeof File<"u"&&z instanceof File){var De=new FileReader;return De.onload=function(){be(De.result)},De.onerror=function(){Se(De.error)},De.readAsText(z)}else be(z);return ie}E.inject({importSVG:function(z,ne){return re(z,ne,this)}}),I.inject({importSVG:function(z,ne){return this.activate(),re(z,ne,this)}})},s.exports.PaperScript=(function(){var c=this,f=c.acorn;if(!f&&typeof ih<"u")try{f=n5e()}catch{}if(!f){var b,_;f=b=_={},function(B,Z){if(typeof b=="object"&&typeof _=="object")return Z(b);if(typeof n=="function"&&n.amd)return n(["exports"],Z);Z(B.acorn||(B.acorn={}))}(this,function(B){B.version="0.5.0";var Z,G,re,z;B.parse=function(Le,Ge){return G=String(Le),re=G.length,se(Ge),Io(),F0(Z.program)};var ne=B.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function se(Le){Z=Le||{};for(var Ge in ne)Object.prototype.hasOwnProperty.call(Z,Ge)||(Z[Ge]=ne[Ge]);z=Z.sourceFile||null}var ue=B.getLineInfo=function(Le,Ge){for(var ct=1,bt=0;;){ai.lastIndex=bt;var an=ai.exec(Le);if(an&&an.index<Ge)++ct,bt=an.index+an[0].length;else break}return{line:ct,column:Ge-bt}};B.tokenize=function(Le,Ge){G=String(Le),re=G.length,se(Ge),Io();var ct={};function bt(an){return pt=Se,on(an),ct.start=be,ct.end=Se,ct.startLoc=Ae,ct.endLoc=De,ct.type=we,ct.value=Ie,ct}return bt.jumpTo=function(an,ln){if(ie=an,Z.locations){Ye=1,Ze=ai.lastIndex=0;for(var gn;(gn=ai.exec(G))&&gn.index<an;)++Ye,Ze=gn.index+gn[0].length}Fe=ln,jt()},bt};var ie,be,Se,Ae,De,we,Ie,Fe,Ye,Ze,Qe,pt,gt,At,kt,at;function lt(Le,Ge){var ct=ue(G,Le);Ge+=" ("+ct.line+":"+ct.column+")";var bt=new SyntaxError(Ge);throw bt.pos=Le,bt.loc=ct,bt.raisedAt=ie,bt}var Tt=[],Ot={type:"num"},Be={type:"regexp"},dt={type:"string"},vt={type:"name"},Lt={type:"eof"},It={keyword:"break"},$t={keyword:"case",beforeExpr:!0},nn={keyword:"catch"},rn={keyword:"continue"},vn={keyword:"debugger"},Cn={keyword:"default"},wt={keyword:"do",isLoop:!0},En={keyword:"else",beforeExpr:!0},Nn={keyword:"finally"},xn={keyword:"for",isLoop:!0},xr={keyword:"function"},Tr={keyword:"if"},or={keyword:"return",beforeExpr:!0},lr={keyword:"switch"},ur={keyword:"throw",beforeExpr:!0},Nr={keyword:"try"},Vr={keyword:"var"},In={keyword:"while",isLoop:!0},Kn={keyword:"with"},gi={keyword:"new",beforeExpr:!0},_i={keyword:"this"},Gr={keyword:"null",atomValue:null},yi={keyword:"true",atomValue:!0},Ni={keyword:"false",atomValue:!1},ri={keyword:"in",binop:7,beforeExpr:!0},ii={break:It,case:$t,catch:nn,continue:rn,debugger:vn,default:Cn,do:wt,else:En,finally:Nn,for:xn,function:xr,if:Tr,return:or,switch:lr,throw:ur,try:Nr,var:Vr,while:In,with:Kn,null:Gr,true:yi,false:Ni,new:gi,in:ri,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:_i,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},qr={type:"[",beforeExpr:!0},si={type:"]"},tr={type:"{",beforeExpr:!0},zn={type:"}"},Gt={type:"(",beforeExpr:!0},dr={type:")"},kn={type:",",beforeExpr:!0},nr={type:";",beforeExpr:!0},Or={type:":",beforeExpr:!0},ts={type:"."},Br={type:"?",beforeExpr:!0},bi={binop:10,beforeExpr:!0},y={isAssign:!0,beforeExpr:!0},P={isAssign:!0,beforeExpr:!0},J={postfix:!0,prefix:!0,isUpdate:!0},le={prefix:!0,beforeExpr:!0},Ce={binop:1,beforeExpr:!0},Je={binop:2,beforeExpr:!0},rt={binop:3,beforeExpr:!0},xt={binop:4,beforeExpr:!0},_t={binop:5,beforeExpr:!0},Qt={binop:6,beforeExpr:!0},sn={binop:7,beforeExpr:!0},An={binop:8,beforeExpr:!0},rr={binop:9,prefix:!0,beforeExpr:!0},ns={binop:10,beforeExpr:!0};B.tokTypes={bracketL:qr,bracketR:si,braceL:tr,braceR:zn,parenL:Gt,parenR:dr,comma:kn,semi:nr,colon:Or,dot:ts,question:Br,slash:bi,eq:y,name:vt,eof:Lt,num:Ot,regexp:Be,string:dt};for(var Ut in ii)B.tokTypes["_"+Ut]=ii[Ut];function He(Le){Le=Le.split(" ");var Ge="",ct=[];e:for(var bt=0;bt<Le.length;++bt){for(var an=0;an<ct.length;++an)if(ct[an][0].length==Le[bt].length){ct[an].push(Le[bt]);continue e}ct.push([Le[bt]])}function ln(Gn){if(Gn.length==1)return Ge+="return str === "+JSON.stringify(Gn[0])+";";Ge+="switch(str){";for(var sa=0;sa<Gn.length;++sa)Ge+="case "+JSON.stringify(Gn[sa])+":";Ge+="return true}return false;"}if(ct.length>3){ct.sort(function(Gn,sa){return sa.length-Gn.length}),Ge+="switch(str.length){";for(var bt=0;bt<ct.length;++bt){var gn=ct[bt];Ge+="case "+gn[0].length+":",ln(gn)}Ge+="}"}else ln(Le);return new Function("str",Ge)}var St=He("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Rt=He("class enum extends super const export import"),Fn=He("implements interface let package private protected public static yield"),bn=He("eval arguments"),Qn=He("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Yr=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Oi="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",na="------------------------------------------------------------------------------------------------------------------------------------------",ra=new RegExp("["+Oi+"]"),cr=new RegExp("["+Oi+na+"]"),Ri=/[\n\r\u2028\u2029]/,ai=/\r\n|[\n\r\u2028\u2029]/g,xs=B.isIdentifierStart=function(Le){return Le<65?Le===36:Le<91?!0:Le<97?Le===95:Le<123?!0:Le>=170&&ra.test(String.fromCharCode(Le))},El=B.isIdentifierChar=function(Le){return Le<48?Le===36:Le<58?!0:Le<65?!1:Le<91?!0:Le<97?Le===95:Le<123?!0:Le>=170&&cr.test(String.fromCharCode(Le))};function ws(){this.line=Ye,this.column=ie-Ze}function Io(){Ye=1,ie=Ze=0,Fe=!0,jt()}function Ke(Le,Ge){Se=ie,Z.locations&&(De=new ws),we=Le,jt(),Ie=Ge,Fe=Le.beforeExpr}function mt(){var Le=Z.onComment&&Z.locations&&new ws,Ge=ie,ct=G.indexOf("*/",ie+=2);if(ct===-1&&lt(ie-2,"Unterminated comment"),ie=ct+2,Z.locations){ai.lastIndex=Ge;for(var bt;(bt=ai.exec(G))&&bt.index<ie;)++Ye,Ze=bt.index+bt[0].length}Z.onComment&&Z.onComment(!0,G.slice(Ge+2,ct),Ge,ie,Le,Z.locations&&new ws)}function st(){for(var Le=ie,Ge=Z.onComment&&Z.locations&&new ws,ct=G.charCodeAt(ie+=2);ie<re&&ct!==10&&ct!==13&&ct!==8232&&ct!==8233;)++ie,ct=G.charCodeAt(ie);Z.onComment&&Z.onComment(!1,G.slice(Le+2,ie),Le,ie,Ge,Z.locations&&new ws)}function jt(){for(;ie<re;){var Le=G.charCodeAt(ie);if(Le===32)++ie;else if(Le===13){++ie;var Ge=G.charCodeAt(ie);Ge===10&&++ie,Z.locations&&(++Ye,Ze=ie)}else if(Le===10||Le===8232||Le===8233)++ie,Z.locations&&(++Ye,Ze=ie);else if(Le>8&&Le<14)++ie;else if(Le===47){var Ge=G.charCodeAt(ie+1);if(Ge===42)mt();else if(Ge===47)st();else break}else if(Le===160)++ie;else if(Le>=5760&&Yr.test(String.fromCharCode(Le)))++ie;else break}}function pn(){var Le=G.charCodeAt(ie+1);return Le>=48&&Le<=57?Ed(!0):(++ie,Ke(ts))}function Ft(){var Le=G.charCodeAt(ie+1);return Fe?(++ie,rs()):Le===61?Xt(P,2):Xt(bi,1)}function Bt(){var Le=G.charCodeAt(ie+1);return Le===61?Xt(P,2):Xt(ns,1)}function Vt(Le){var Ge=G.charCodeAt(ie+1);return Ge===Le?Xt(Le===124?Ce:Je,2):Ge===61?Xt(P,2):Xt(Le===124?rt:_t,1)}function Tn(){var Le=G.charCodeAt(ie+1);return Le===61?Xt(P,2):Xt(xt,1)}function Vn(Le){var Ge=G.charCodeAt(ie+1);return Ge===Le?Ge==45&&G.charCodeAt(ie+2)==62&&Ri.test(G.slice(pt,ie))?(ie+=3,st(),jt(),on()):Xt(J,2):Ge===61?Xt(P,2):Xt(rr,1)}function Bn(Le){var Ge=G.charCodeAt(ie+1),ct=1;return Ge===Le?(ct=Le===62&&G.charCodeAt(ie+2)===62?3:2,G.charCodeAt(ie+ct)===61?Xt(P,ct+1):Xt(An,ct)):Ge==33&&Le==60&&G.charCodeAt(ie+2)==45&&G.charCodeAt(ie+3)==45?(ie+=4,st(),jt(),on()):(Ge===61&&(ct=G.charCodeAt(ie+2)===61?3:2),Xt(sn,ct))}function wr(Le){var Ge=G.charCodeAt(ie+1);return Ge===61?Xt(Qt,G.charCodeAt(ie+2)===61?3:2):Xt(Le===61?y:le,1)}function Zn(Le){switch(Le){case 46:return pn();case 40:return++ie,Ke(Gt);case 41:return++ie,Ke(dr);case 59:return++ie,Ke(nr);case 44:return++ie,Ke(kn);case 91:return++ie,Ke(qr);case 93:return++ie,Ke(si);case 123:return++ie,Ke(tr);case 125:return++ie,Ke(zn);case 58:return++ie,Ke(Or);case 63:return++ie,Ke(Br);case 48:var Ge=G.charCodeAt(ie+1);if(Ge===120||Ge===88)return kc();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ed(!1);case 34:case 39:return Bf(Le);case 47:return Ft();case 37:case 42:return Bt();case 124:case 38:return Vt(Le);case 94:return Tn();case 43:case 45:return Vn(Le);case 60:case 62:return Bn(Le);case 61:case 33:return wr(Le);case 126:return Xt(le,1)}return!1}function on(Le){if(Le?ie=be+1:be=ie,Z.locations&&(Ae=new ws),Le)return rs();if(ie>=re)return Ke(Lt);var Ge=G.charCodeAt(ie);if(xs(Ge)||Ge===92)return Hf();var ct=Zn(Ge);if(ct===!1){var bt=String.fromCharCode(Ge);if(bt==="\\"||ra.test(bt))return Hf();lt(ie,"Unexpected character '"+bt+"'")}return ct}function Xt(Le,Ge){var ct=G.slice(ie,ie+Ge);ie+=Ge,Ke(Le,ct)}function rs(){for(var an="",Le,Ge,ct=ie;;){ie>=re&&lt(ct,"Unterminated regular expression");var bt=G.charAt(ie);if(Ri.test(bt)&&lt(ct,"Unterminated regular expression"),Le)Le=!1;else{if(bt==="[")Ge=!0;else if(bt==="]"&&Ge)Ge=!1;else if(bt==="/"&&!Ge)break;Le=bt==="\\"}++ie}var an=G.slice(ct,ie);++ie;var ln=Uf();ln&&!/^[gmsiy]*$/.test(ln)&&lt(ct,"Invalid regexp flag");try{var gn=new RegExp(an,ln)}catch(Gn){Gn instanceof SyntaxError&&lt(ct,Gn.message),lt(Gn)}return Ke(Be,gn)}function Mi(Le,Ge){for(var ct=ie,bt=0,an=0,ln=Ge??1/0;an<ln;++an){var gn=G.charCodeAt(ie),Gn;if(gn>=97?Gn=gn-97+10:gn>=65?Gn=gn-65+10:gn>=48&&gn<=57?Gn=gn-48:Gn=1/0,Gn>=Le)break;++ie,bt=bt*Le+Gn}return ie===ct||Ge!=null&&ie-ct!==Ge?null:bt}function kc(){ie+=2;var Le=Mi(16);return Le==null&&lt(be+2,"Expected hexadecimal number"),xs(G.charCodeAt(ie))&&lt(ie,"Identifier directly after number"),Ke(Ot,Le)}function Ed(Le){var Ge=ie,ct=!1,bt=G.charCodeAt(ie)===48;!Le&&Mi(10)===null&&lt(Ge,"Invalid number"),G.charCodeAt(ie)===46&&(++ie,Mi(10),ct=!0);var an=G.charCodeAt(ie);(an===69||an===101)&&(an=G.charCodeAt(++ie),(an===43||an===45)&&++ie,Mi(10)===null&&lt(Ge,"Invalid number"),ct=!0),xs(G.charCodeAt(ie))&&lt(ie,"Identifier directly after number");var ln=G.slice(Ge,ie),gn;return ct?gn=parseFloat(ln):!bt||ln.length===1?gn=parseInt(ln,10):/[89]/.test(ln)||at?lt(Ge,"Invalid number"):gn=parseInt(ln,8),Ke(Ot,gn)}function Bf(Le){ie++;for(var Ge="";;){ie>=re&&lt(be,"Unterminated string constant");var ct=G.charCodeAt(ie);if(ct===Le)return++ie,Ke(dt,Ge);if(ct===92){ct=G.charCodeAt(++ie);var bt=/^[0-7]+/.exec(G.slice(ie,ie+3));for(bt&&(bt=bt[0]);bt&&parseInt(bt,8)>255;)bt=bt.slice(0,-1);if(bt==="0"&&(bt=null),++ie,bt)at&&lt(ie-2,"Octal literal in strict mode"),Ge+=String.fromCharCode(parseInt(bt,8)),ie+=bt.length-1;else switch(ct){case 110:Ge+=`
`;break;case 114:Ge+="\r";break;case 120:Ge+=String.fromCharCode(Tl(2));break;case 117:Ge+=String.fromCharCode(Tl(4));break;case 85:Ge+=String.fromCharCode(Tl(8));break;case 116:Ge+="	";break;case 98:Ge+="\b";break;case 118:Ge+="\v";break;case 102:Ge+="\f";break;case 48:Ge+="\0";break;case 13:G.charCodeAt(ie)===10&&++ie;case 10:Z.locations&&(Ze=ie,++Ye);break;default:Ge+=String.fromCharCode(ct);break}}else(ct===13||ct===10||ct===8232||ct===8233)&&lt(be,"Unterminated string constant"),Ge+=String.fromCharCode(ct),++ie}}function Tl(Le){var Ge=Mi(16,Le);return Ge===null&&lt(be,"Bad character escape sequence"),Ge}var uo;function Uf(){uo=!1;for(var Le,Ge=!0,ct=ie;;){var bt=G.charCodeAt(ie);if(El(bt))uo&&(Le+=G.charAt(ie)),++ie;else if(bt===92){uo||(Le=G.slice(ct,ie)),uo=!0,G.charCodeAt(++ie)!=117&&lt(ie,"Expecting Unicode escape sequence \\uXXXX"),++ie;var an=Tl(4),ln=String.fromCharCode(an);ln||lt(ie-1,"Invalid Unicode escape"),(Ge?xs(an):El(an))||lt(ie-4,"Invalid Unicode escape"),Le+=ln}else break;Ge=!1}return uo?Le:G.slice(ct,ie)}function Hf(){var Le=Uf(),Ge=vt;return!uo&&Qn(Le)&&(Ge=ii[Le]),Ke(Ge,Le)}function On(){Qe=be,pt=Se,gt=De,on()}function Td(Le){if(at=Le,ie=be,Z.locations)for(;ie<Ze;)Ze=G.lastIndexOf(`
`,Ze-2)+1,--Ye;jt(),on()}function Wf(){this.type=null,this.start=be,this.end=null}function Vf(){this.start=Ae,this.end=null,z!==null&&(this.source=z)}function oi(){var Le=new Wf;return Z.locations&&(Le.loc=new Vf),Z.directSourceFile&&(Le.sourceFile=Z.directSourceFile),Z.ranges&&(Le.range=[be,0]),Le}function za(Le){var Ge=new Wf;return Ge.start=Le.start,Z.locations&&(Ge.loc=new Vf,Ge.loc.start=Le.loc.start),Z.ranges&&(Ge.range=[Le.range[0],0]),Ge}function wn(Le,Ge){return Le.type=Ge,Le.end=pt,Z.locations&&(Le.loc.end=gt),Z.ranges&&(Le.range[1]=pt),Le}function jd(Le){return Z.ecmaVersion>=5&&Le.type==="ExpressionStatement"&&Le.expression.type==="Literal"&&Le.expression.value==="use strict"}function _r(Le){if(we===Le)return On(),!0}function jl(){return!Z.strictSemicolons&&(we===Lt||we===zn||Ri.test(G.slice(pt,be)))}function Fa(){!_r(nr)&&!jl()&&ia()}function Ur(Le){we===Le?On():ia()}function ia(){lt(be,"Unexpected token")}function Sc(Le){Le.type!=="Identifier"&&Le.type!=="MemberExpression"&&lt(Le.start,"Assigning to rvalue"),at&&Le.type==="Identifier"&&bn(Le.name)&&lt(Le.start,"Assigning to "+Le.name+" in strict mode")}function F0(Le){Qe=pt=ie,Z.locations&&(gt=new ws),At=at=null,kt=[],on();var Ge=Le||oi(),ct=!0;for(Le||(Ge.body=[]);we!==Lt;){var bt=is();Ge.body.push(bt),ct&&jd(bt)&&Td(!0),ct=!1}return wn(Ge,"Program")}var Qr={kind:"loop"},Ad={kind:"switch"};function is(){(we===bi||we===P&&Ie=="/=")&&on(!0);var Le=we,Ge=oi();switch(Le){case It:case rn:On();var ct=Le===It;_r(nr)||jl()?Ge.label=null:we!==vt?ia():(Ge.label=Jn(),Fa());for(var bt=0;bt<kt.length;++bt){var an=kt[bt];if((Ge.label==null||an.name===Ge.label.name)&&(an.kind!=null&&(ct||an.kind==="loop")||Ge.label&&ct))break}return bt===kt.length&&lt(Ge.start,"Unsyntactic "+Le.keyword),wn(Ge,ct?"BreakStatement":"ContinueStatement");case vn:return On(),Fa(),wn(Ge,"DebuggerStatement");case wt:return On(),kt.push(Qr),Ge.body=is(),kt.pop(),Ur(In),Ge.test=$o(),Fa(),wn(Ge,"DoWhileStatement");case xn:if(On(),kt.push(Qr),Ur(Gt),we===nr)return Ve(Ge,null);if(we===Vr){var ln=oi();return On(),Oe(ln,!0),wn(ln,"VariableDeclaration"),ln.declarations.length===1&&_r(ri)?Te(Ge,ln):Ve(Ge,ln)}var ln=nt(!1,!0);return _r(ri)?(Sc(ln),Te(Ge,ln)):Ve(Ge,ln);case xr:return On(),ki(Ge,!0);case Tr:return On(),Ge.test=$o(),Ge.consequent=is(),Ge.alternate=_r(En)?is():null,wn(Ge,"IfStatement");case or:return!At&&!Z.allowReturnOutsideFunction&&lt(be,"'return' outside of function"),On(),_r(nr)||jl()?Ge.argument=null:(Ge.argument=nt(),Fa()),wn(Ge,"ReturnStatement");case lr:On(),Ge.discriminant=$o(),Ge.cases=[],Ur(tr),kt.push(Ad);for(var gn,Gn;we!=zn;)if(we===$t||we===Cn){var sa=we===$t;gn&&wn(gn,"SwitchCase"),Ge.cases.push(gn=oi()),gn.consequent=[],On(),sa?gn.test=nt():(Gn&&lt(Qe,"Multiple default clauses"),Gn=!0,gn.test=null),Ur(Or)}else gn||ia(),gn.consequent.push(is());return gn&&wn(gn,"SwitchCase"),On(),kt.pop(),wn(Ge,"SwitchStatement");case ur:return On(),Ri.test(G.slice(pt,be))&&lt(pt,"Illegal newline after throw"),Ge.argument=nt(),Fa(),wn(Ge,"ThrowStatement");case Nr:if(On(),Ge.block=he(),Ge.handler=null,we===nn){var Al=oi();On(),Ur(Gt),Al.param=Jn(),at&&bn(Al.param.name)&&lt(Al.param.start,"Binding "+Al.param.name+" in strict mode"),Ur(dr),Al.guard=null,Al.body=he(),Ge.handler=wn(Al,"CatchClause")}return Ge.guardedHandlers=Tt,Ge.finalizer=_r(Nn)?he():null,!Ge.handler&&!Ge.finalizer&&lt(Ge.start,"Missing catch or finally clause"),wn(Ge,"TryStatement");case Vr:return On(),Oe(Ge),Fa(),wn(Ge,"VariableDeclaration");case In:return On(),Ge.test=$o(),kt.push(Qr),Ge.body=is(),kt.pop(),wn(Ge,"WhileStatement");case Kn:return at&&lt(be,"'with' in strict mode"),On(),Ge.object=$o(),Ge.body=is(),wn(Ge,"WithStatement");case tr:return he();case nr:return On(),wn(Ge,"EmptyStatement");default:var B0=Ie,Gf=nt();if(Le===vt&&Gf.type==="Identifier"&&_r(Or)){for(var bt=0;bt<kt.length;++bt)kt[bt].name===B0&&lt(Gf.start,"Label '"+B0+"' is already declared");var qL=we.isLoop?"loop":we===lr?"switch":null;return kt.push({name:B0,kind:qL}),Ge.body=is(),kt.pop(),Ge.label=Gf,wn(Ge,"LabeledStatement")}else return Ge.expression=Gf,Fa(),wn(Ge,"ExpressionStatement")}}function $o(){Ur(Gt);var Le=nt();return Ur(dr),Le}function he(Le){var Ge=oi(),ct=!0,bt=!1,an;for(Ge.body=[],Ur(tr);!_r(zn);){var ln=is();Ge.body.push(ln),ct&&Le&&jd(ln)&&(an=bt,Td(bt=!0)),ct=!1}return bt&&!an&&Td(!1),wn(Ge,"BlockStatement")}function Ve(Le,Ge){return Le.init=Ge,Ur(nr),Le.test=we===nr?null:nt(),Ur(nr),Le.update=we===dr?null:nt(),Ur(dr),Le.body=is(),kt.pop(),wn(Le,"ForStatement")}function Te(Le,Ge){return Le.left=Ge,Le.right=nt(),Ur(dr),Le.body=is(),kt.pop(),wn(Le,"ForInStatement")}function Oe(Le,Ge){for(Le.declarations=[],Le.kind="var";;){var ct=oi();if(ct.id=Jn(),at&&bn(ct.id.name)&&lt(ct.id.start,"Binding "+ct.id.name+" in strict mode"),ct.init=_r(y)?nt(!0,Ge):null,Le.declarations.push(wn(ct,"VariableDeclarator")),!_r(kn))break}return Le}function nt(Le,Ge){var ct=ot(Ge);if(!Le&&we===kn){var bt=za(ct);for(bt.expressions=[ct];_r(kn);)bt.expressions.push(ot(Ge));return wn(bt,"SequenceExpression")}return ct}function ot(Le){var Ge=et(Le);if(we.isAssign){var ct=za(Ge);return ct.operator=Ie,ct.left=Ge,On(),ct.right=ot(Le),Sc(Ge),wn(ct,"AssignmentExpression")}return Ge}function et(Le){var Ge=yt(Le);if(_r(Br)){var ct=za(Ge);return ct.test=Ge,ct.consequent=nt(!0),Ur(Or),ct.alternate=nt(!0,Le),wn(ct,"ConditionalExpression")}return Ge}function yt(Le){return ht(Et(),-1,Le)}function ht(Le,Ge,ct){var bt=we.binop;if(bt!=null&&(!ct||we!==ri)&&bt>Ge){var an=za(Le);an.left=Le,an.operator=Ie;var ln=we;On(),an.right=ht(Et(),bt,ct);var gn=wn(an,ln===Ce||ln===Je?"LogicalExpression":"BinaryExpression");return ht(gn,Ge,ct)}return Le}function Et(){if(we.prefix){var Le=oi(),Ge=we.isUpdate;return Le.operator=Ie,Le.prefix=!0,Fe=!0,On(),Le.argument=Et(),Ge?Sc(Le.argument):at&&Le.operator==="delete"&&Le.argument.type==="Identifier"&&lt(Le.start,"Deleting local variable in strict mode"),wn(Le,Ge?"UpdateExpression":"UnaryExpression")}for(var ct=zt();we.postfix&&!jl();){var Le=za(ct);Le.operator=Ie,Le.prefix=!1,Le.argument=ct,Sc(ct),On(),ct=wn(Le,"UpdateExpression")}return ct}function zt(){return en(mn())}function en(Le,Ge){if(_r(ts)){var ct=za(Le);return ct.object=Le,ct.property=Jn(!0),ct.computed=!1,en(wn(ct,"MemberExpression"),Ge)}else if(_r(qr)){var ct=za(Le);return ct.object=Le,ct.property=nt(),ct.computed=!0,Ur(si),en(wn(ct,"MemberExpression"),Ge)}else if(!Ge&&_r(Gt)){var ct=za(Le);return ct.callee=Le,ct.arguments=ho(dr,!1),en(wn(ct,"CallExpression"),Ge)}else return Le}function mn(){switch(we){case _i:var bt=oi();return On(),wn(bt,"ThisExpression");case vt:return Jn();case Ot:case dt:case Be:var bt=oi();return bt.value=Ie,bt.raw=G.slice(be,Se),On(),wn(bt,"Literal");case Gr:case yi:case Ni:var bt=oi();return bt.value=we.atomValue,bt.raw=we.keyword,On(),wn(bt,"Literal");case Gt:var Le=Ae,Ge=be;On();var ct=nt();return ct.start=Ge,ct.end=Se,Z.locations&&(ct.loc.start=Le,ct.loc.end=De),Z.ranges&&(ct.range=[Ge,Se]),Ur(dr),ct;case qr:var bt=oi();return On(),bt.elements=ho(si,!0,!0),wn(bt,"ArrayExpression");case tr:return qt();case xr:var bt=oi();return On(),ki(bt,!1);case gi:return Yt();default:ia()}}function Yt(){var Le=oi();return On(),Le.callee=en(mn(),!0),_r(Gt)?Le.arguments=ho(dr,!1):Le.arguments=Tt,wn(Le,"NewExpression")}function qt(){var Le=oi(),Ge=!0,ct=!1;for(Le.properties=[],On();!_r(zn);){if(Ge)Ge=!1;else if(Ur(kn),Z.allowTrailingCommas&&_r(zn))break;var bt={key:hr()},an=!1,ln;if(_r(Or)?(bt.value=nt(!0),ln=bt.kind="init"):Z.ecmaVersion>=5&&bt.key.type==="Identifier"&&(bt.key.name==="get"||bt.key.name==="set")?(an=ct=!0,ln=bt.kind=bt.key.name,bt.key=hr(),we!==Gt&&ia(),bt.value=ki(oi(),!1)):ia(),bt.key.type==="Identifier"&&(at||ct))for(var gn=0;gn<Le.properties.length;++gn){var Gn=Le.properties[gn];if(Gn.key.name===bt.key.name){var sa=ln==Gn.kind||an&&Gn.kind==="init"||ln==="init"&&(Gn.kind==="get"||Gn.kind==="set");sa&&!at&&ln==="init"&&Gn.kind==="init"&&(sa=!1),sa&&lt(bt.key.start,"Redefinition of property")}}Le.properties.push(bt)}return wn(Le,"ObjectExpression")}function hr(){return we===Ot||we===dt?mn():Jn(!0)}function ki(Le,Ge){we===vt?Le.id=Jn():Ge?ia():Le.id=null,Le.params=[];var ct=!0;for(Ur(Gt);!_r(dr);)ct?ct=!1:Ur(kn),Le.params.push(Jn());var bt=At,an=kt;if(At=!0,kt=[],Le.body=he(!0),At=bt,kt=an,at||Le.body.body.length&&jd(Le.body.body[0]))for(var ln=Le.id?-1:0;ln<Le.params.length;++ln){var gn=ln<0?Le.id:Le.params[ln];if((Fn(gn.name)||bn(gn.name))&&lt(gn.start,"Defining '"+gn.name+"' in strict mode"),ln>=0)for(var Gn=0;Gn<ln;++Gn)gn.name===Le.params[Gn].name&&lt(gn.start,"Argument name clash in strict mode")}return wn(Le,Ge?"FunctionDeclaration":"FunctionExpression")}function ho(Le,Ge,ct){for(var bt=[],an=!0;!_r(Le);){if(an)an=!1;else if(Ur(kn),Ge&&Z.allowTrailingCommas&&_r(Le))break;ct&&we===kn?bt.push(null):bt.push(nt(!0))}return bt}function Jn(Le){var Ge=oi();return Le&&Z.forbidReserved=="everywhere"&&(Le=!1),we===vt?(!Le&&(Z.forbidReserved&&(Z.ecmaVersion===3?St:Rt)(Ie)||at&&Fn(Ie))&&G.slice(be,Se).indexOf("\\")==-1&&lt(be,"The keyword '"+Ie+"' is reserved"),Ge.name=Ie):Le&&we.keyword?Ge.name=we.keyword:ia(),Fe=!1,On(),wn(Ge,"Identifier")}}),f.version||(f=null)}function C(B,Z){return(c.acorn||f).parse(B,Z)}var A={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},T={"-":"__negate","+":"__self"},N=s.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(B){this["__"+B]="#"+B},{__self:function(){return this}});g.inject(N),w.inject(N),Ue.inject(N);function $(B,Z,G){var re=A[Z];if(B&&B[re]){var z=B[re](G);return Z==="!="?!z:z}switch(Z){case"+":return B+G;case"-":return B-G;case"*":return B*G;case"/":return B/G;case"%":return B%G;case"==":return B==G;case"!=":return B!=G}}function F(B,Z){var G=T[B];if(Z&&Z[G])return Z[G]();switch(B){case"+":return+Z;case"-":return-Z}}function Y(B,Z){if(!B)return"";Z=Z||{};var G=[];function re(at){for(var lt=0,Tt=G.length;lt<Tt;lt++){var Ot=G[lt];if(Ot[0]>=at)break;at+=Ot[1]}return at}function z(at){return B.substring(re(at.range[0]),re(at.range[1]))}function ne(at,lt){return B.substring(re(at.range[1]),re(lt.range[0]))}function se(at,lt){for(var Tt=re(at.range[0]),Ot=re(at.range[1]),Be=0,dt=G.length-1;dt>=0;dt--)if(Tt>G[dt][0]){Be=dt+1;break}G.splice(Be,0,[Tt,lt.length-Ot+Tt]),B=B.substring(0,Tt)+lt+B.substring(Ot)}function ue(at,lt){switch(at.type){case"UnaryExpression":if(at.operator in T&&at.argument.type!=="Literal"){var Tt=z(at.argument);se(at,'$__("'+at.operator+'", '+Tt+")")}break;case"BinaryExpression":if(at.operator in A&&at.left.type!=="Literal"){var Ot=z(at.left),Be=z(at.right),dt=ne(at.left,at.right),vt=at.operator;se(at,"__$__("+Ot+","+dt.replace(new RegExp("\\"+vt),'"'+vt+'"')+", "+Be+")")}break;case"UpdateExpression":case"AssignmentExpression":var Lt=lt&&lt.type;if(!(Lt==="ForStatement"||Lt==="BinaryExpression"&&/^[=!<>]/.test(lt.operator)||Lt==="MemberExpression"&&lt.computed)){if(at.type==="UpdateExpression"){var Tt=z(at.argument),It="__$__("+Tt+', "'+at.operator[0]+'", 1)',$t=Tt+" = "+It;at.prefix?$t="("+$t+")":(Lt==="AssignmentExpression"||Lt==="VariableDeclarator"||Lt==="BinaryExpression")&&(z(lt.left||lt.id)===Tt&&($t=It),$t=Tt+"; "+$t),se(at,$t)}else if(/^.=$/.test(at.operator)&&at.left.type!=="Literal"){var Ot=z(at.left),Be=z(at.right),It=Ot+" = __$__("+Ot+', "'+at.operator[0]+'", '+Be+")";se(at,/^\(.*\)$/.test(z(at))?"("+It+")":It)}}break}}function ie(at){switch(at.type){case"ExportDefaultDeclaration":se({range:[at.start,at.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var lt=at.declaration,Tt=at.specifiers;if(lt){var Ot=lt.declarations;Ot&&(Ot.forEach(function(dt){se(dt,"module.exports."+z(dt))}),se({range:[at.start,lt.start+lt.kind.length]},""))}else if(Tt){var Be=Tt.map(function(dt){var vt=z(dt);return"module.exports."+vt+" = "+vt+"; "}).join("");Be&&se(at,Be)}break}}function be(at,lt,Tt){if(at){for(var Ot in at)if(Ot!=="range"&&Ot!=="loc"){var Be=at[Ot];if(Array.isArray(Be))for(var dt=0,vt=Be.length;dt<vt;dt++)be(Be[dt],at,Tt);else Be&&typeof Be=="object"&&be(Be,at,Tt)}Tt.operatorOverloading!==!1&&ue(at,lt),Tt.moduleExports!==!1&&ie(at)}}function Se(at){var lt="",Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(at=(Math.abs(at)<<1)+(at<0?1:0);at||!lt;){var Ot=at&31;at>>=5,at&&(Ot|=32),lt+=Tt[Ot]}return lt}var Ae=Z.url||"",De=Z.sourceMaps,we=Z.paperFeatures||{},Ie=Z.source||B,Fe=Z.offset||0,Ye=$e.agent,Ze=Ye.versionNumber,Qe=!1,pt=/\r\n|\n|\r/mg,gt;if(De&&(Ye.chrome&&Ze>=30||Ye.webkit&&Ze>=537.76||Ye.firefox&&Ze>=23||Ye.node)){if(Ye.node)Fe-=2;else if(r&&Ae&&!r.location.href.indexOf(Ae)){var At=i.getElementsByTagName("html")[0].innerHTML;Fe=At.substr(0,At.indexOf(B)+1).match(pt).length+1}Qe=Fe>0&&!(Ye.chrome&&Ze>=36||Ye.safari&&Ze>=600||Ye.firefox&&Ze>=40||Ye.node);var kt=["AA"+Se(Qe?0:Fe)+"A"];kt.length=(B.match(pt)||[]).length+1+(Qe?Fe:0),gt={version:3,file:Ae,names:[],mappings:kt.join(";AACA"),sourceRoot:"",sources:[Ae],sourcesContent:[Ie]}}return(we.operatorOverloading!==!1||we.moduleExports!==!1)&&be(C(B,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,we),gt&&(Qe&&(B=new Array(Fe+1).join(`
`)+B),/^(inline|both)$/.test(De)&&(B+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(gt))))),B+=`
//# sourceURL=`+(Ae||"paperscript")),{url:Ae,source:Ie,code:B,map:gt}}function Q(B,Z,G){$e=Z;var re=Z.getView(),z=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(B)&&!/\bnew\s+Tool\b/.test(B)?new L:null,ne=z?z._events:[],se=["onFrame","onResize"].concat(ne),ue=[],ie=[],be,Se=typeof B=="object"?B:Y(B,G);B=Se.code;function Ae(Ze,Qe){for(var pt in Ze)(Qe||!/^_/.test(pt))&&new RegExp("([\\b\\s\\W]|^)"+pt.replace(/\$/g,"\\$")+"\\b").test(B)&&(ue.push(pt),ie.push(Ze[pt]))}Ae({__$__:$,$__:F,paper:Z,tool:z},!0),Ae(Z),B="var module = { exports: {} }; "+B;var Fe=s.each(se,function(Ze){new RegExp("\\s+"+Ze+"\\b").test(B)&&(ue.push(Ze),this.push("module.exports."+Ze+" = "+Ze+";"))},[]).join(`
`);Fe&&(B+=`
`+Fe),B+=`
return module.exports;`;var De=$e.agent;if(i&&(De.chrome||De.firefox&&De.versionNumber<40)){var we=i.createElement("script"),Ie=i.head||i.getElementsByTagName("head")[0];De.firefox&&(B=`
`+B),we.appendChild(i.createTextNode("document.__paperscript__ = function("+ue+") {"+B+`
}`)),Ie.appendChild(we),be=i.__paperscript__,delete i.__paperscript__,Ie.removeChild(we)}else be=Function(ue,B);var Fe=be&&be.apply(Z,ie),Ye=Fe||{};return s.each(ne,function(Ze){var Qe=Ye[Ze];Qe&&(z[Ze]=Qe)}),re&&(Ye.onResize&&re.setOnResize(Ye.onResize),re.emit("resize",{size:re.size,delta:new g}),Ye.onFrame&&re.setOnFrame(Ye.onFrame),re.requestUpdate()),Fe}function K(B){if(/^text\/(?:x-|)paperscript$/.test(B.type)&&o.getAttribute(B,"ignore")!=="true"){var Z=o.getAttribute(B,"canvas"),G=i.getElementById(Z),re=B.src||B.getAttribute("data-src"),z=o.hasAttribute(B,"async"),ne="data-paper-scope";if(!G)throw new Error('Unable to find canvas with id "'+Z+'"');var se=o.get(G.getAttribute(ne))||new o().setup(G);return G.setAttribute(ne,se._id),re?pe.request({url:re,async:z,mimeType:"text/plain",onLoad:function(ue){Q(ue,se,re)}}):Q(B.innerHTML,se,B.baseURI),B.setAttribute("data-paper-ignore","true"),se}}function V(){s.each(i&&i.getElementsByTagName("script"),K)}function X(B){return B?K(B):V()}return r&&(i.readyState==="complete"?setTimeout(V):Ne.add(r,{load:V})),{compile:Y,execute:Q,load:X,parse:C,calculateBinary:$,calculateUnary:F}}).call(this);var $e=new(o.inject(s.exports,{Base:s,Numerical:p,Key:qe,DomEvent:Ne,DomElement:We,document:i,window:r,Symbol:te,PlacedSymbol:ce}));return $e.agent.node&&u1($e),typeof n=="function"&&n.amd?n("paper",$e):e&&(e.exports=$e),$e}).call(Ja,typeof self=="object"?self:null)})(t5e);function r5e(e,t,n){return"#"+[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("").toUpperCase()}async function i5e(e,t={}){const{canvasSize:n=500,ignoreWhite:r=!0,ignoreTransparent:i=!0}=t;return new Promise((s,a)=>{const o=document.createElement("canvas");o.width=n,o.height=n;const u=o.getContext("2d",{willReadFrequently:!0}),d=new Image,h=new Blob([e],{type:"image/svg+xml"}),p=URL.createObjectURL(h);d.onload=()=>{try{u.clearRect(0,0,n,n);const m=Math.min(n/d.width,n/d.height),g=d.width*m,v=d.height*m,w=(n-g)/2,S=(n-v)/2;u.drawImage(d,w,S,g,v);const k=u.getImageData(0,0,n,n).data,j=new Map;let O=0;for(let E=0;E<k.length;E+=4){const U=k[E],D=k[E+1],R=k[E+2],W=k[E+3];if(i&&W<128||r&&U>250&&D>250&&R>250)continue;const ce=r5e(U,D,R),te=j.get(ce)||0;j.set(ce,te+1),O++}const I=new Map;for(const[E,U]of j)I.set(E,{coverage:O>0?U/O*100:0,pixelCount:U});URL.revokeObjectURL(p),s(I)}catch(m){URL.revokeObjectURL(p),a(m)}},d.onerror=m=>{URL.revokeObjectURL(p),a(new Error("Failed to load SVG for coverage analysis"))},d.src=p})}function ic(e){if(!e)return null;let t=e.replace("#","").toUpperCase();return t.length===3&&(t=t.split("").map(n=>n+n).join("")),"#"+t}function s5e(e,t=10){const n=Array.from(e.entries()),r=new Map,i=new Set;for(const[s,a]of n){if(i.has(s))continue;let o=a.coverage,u=a.pixelCount;const d=Sj(s);for(const[h,p]of n){if(s===h||i.has(h))continue;const m=Sj(h);Math.max(Math.abs(d.r-m.r),Math.abs(d.g-m.g),Math.abs(d.b-m.b))<=t&&(o+=p.coverage,u+=p.pixelCount,i.add(h))}i.add(s),r.set(s,{coverage:o,pixelCount:u})}return r}function Sj(e){const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}}async function a5e(e,t={}){try{const r=await(await fetch(e)).text();return i5e(r,t)}catch(n){throw console.error("[CoverageAnalyzer] Failed to fetch SVG from URL:",n),n}}const o5e=[{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH30",name:"Standard Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH40",name:"Mustard Yellow",hex:"#E5A144"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH70",name:"Black",hex:"#231F20"}];function l5e(e){if(!e)return null;const t=ic(e);return o5e.find(n=>ic(n.hex)===t)||null}function Cj(e){const t=e.replace("#","");return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}}function Ej(e,t,n=10){const r=ic(t);if(!r)return 0;for(const[o,u]of e)if(ic(o)===r)return u.coverage;const i=Cj(r);let s=null,a=1/0;for(const[o,u]of e){const d=Cj(ic(o)),h=Math.max(Math.abs(i.r-d.r),Math.abs(i.g-d.g),Math.abs(i.b-d.b));h<=n&&h<a&&(a=h,s=u)}return s?s.coverage:0}async function Tj(e,t,n,r="solid"){var i,s;if(!e||!t)return t||[];try{const a=await a5e(e,{canvasSize:600,ignoreWhite:!0,ignoreTransparent:!0}),o=s5e(a,5);console.log("[deriveCurrentColors] Coverage analysis:",o);const u=new Map;n&&n.size>0&&n.forEach(p=>{const m=typeof p=="string"?p:p.hex,g=ic(m);g&&m!=="transparent"&&m!=="none"&&(!u.has(g)||p.tpvCode)&&u.set(g,{hex:g,tpvCode:p.tpvCode||null,tpvName:p.tpvName||null,editType:p.editType||"unknown",blendComponents:p.blendComponents||null})});const d=new Map;for(const p of t){const m=ic(((i=p.blendColor)==null?void 0:i.hex)||((s=p.targetColor)==null?void 0:s.hex));if(!m)continue;const g=Ej(o,m,10);g>.1&&d.set(m,{...p,targetColor:{...p.targetColor,areaPct:g}})}for(const[p,m]of u)if(!d.has(p)){const g=Ej(o,p,10);if(g>.1){const v=m.tpvCode?{code:m.tpvCode,name:m.tpvName}:l5e(p);d.set(p,{originalColor:{hex:p},targetColor:{hex:p,areaPct:g},blendColor:{hex:p},chosenRecipe:m.blendComponents?{components:m.blendComponents,deltaE:0,quality:"Custom Blend"}:{components:v?[{code:v.code,name:v.name,percentage:100,parts:10}]:[{code:"CUSTOM",name:"Custom Color",percentage:100,parts:10}],deltaE:0,quality:v?"Pure TPV Colour":"Custom"},tpvCode:m.tpvCode||(v==null?void 0:v.code)||null,tpvName:m.tpvName||(v==null?void 0:v.name)||null,isAddedFromEdit:!0})}}const h=Array.from(d.values()).sort((p,m)=>{var g,v;return(((g=m.targetColor)==null?void 0:g.areaPct)||0)-(((v=p.targetColor)==null?void 0:v.areaPct)||0)});return console.log("[deriveCurrentColors] Derived colors:",h.length,"colors"),h}catch(a){return console.error("[deriveCurrentColors] Failed to analyze coverage:",a),t}}function c5e(e){if(!e||e.size===0)return!1;for(const t of e.values()){const n=typeof t=="string"?t:t.hex;if(n&&n!=="transparent"&&n!=="none")return!0}return!1}const jj={landscape:[{name:"1:1",ratio:1,width:1024,height:1024},{name:"4:3",ratio:4/3,width:1024,height:768},{name:"3:2",ratio:3/2,width:1024,height:683},{name:"16:9",ratio:16/9,width:1024,height:576},{name:"2:1",ratio:2,width:1024,height:512},{name:"3:1",ratio:3,width:1024,height:341}],portrait:[{name:"1:1",ratio:1,width:1024,height:1024},{name:"3:4",ratio:3/4,width:768,height:1024},{name:"2:3",ratio:2/3,width:683,height:1024},{name:"9:16",ratio:9/16,width:576,height:1024},{name:"1:2",ratio:1/2,width:512,height:1024},{name:"1:3",ratio:1/3,width:341,height:1024}]},Zd={safeDifference:.3,tilingThreshold:3.5,framingThreshold:2.5};function u5e(e,t){return e/t}function d5e(e){return e>=.95&&e<=1.05?"square":e>1?"landscape":"portrait"}function h5e(e,t){const n=t==="portrait"?jj.portrait:jj.landscape;let r=n[0],i=Math.abs(e-r.ratio);for(const s of n){const a=Math.abs(e-s.ratio);a<i&&(i=a,r=s)}return{...r,difference:i}}function f5e(e,t,n){return e>=Zd.tilingThreshold||e<=1/Zd.tilingThreshold?{mode:"tiling",reason:"Extreme aspect ratio - design will repeat along length",warning:!0}:n>=Zd.safeDifference||e>=Zd.framingThreshold||e<=1/Zd.framingThreshold?{mode:"framing",reason:"Design panel centered with base color surround",warning:!1}:{mode:"full",reason:"Design fills entire surface",warning:!1}}function p5e(e,t){const n=u5e(e,t),r=d5e(n),i=h5e(n,r),s=f5e(n,i.ratio,i.difference);return{user:{widthMM:e,heightMM:t,aspectRatio:n,orientation:r,formatted:`${(e/1e3).toFixed(1)}m  ${(t/1e3).toFixed(1)}m`},canonical:{name:i.name,ratio:i.ratio,width:i.width,height:i.height,difference:i.difference},layout:s,recraft:{width:i.width,height:i.height,metadata:{targetWidthMM:e,targetHeightMM:t,layoutMode:s.mode}}}}function m5e(e){return e.layout.warning||e.layout.mode!=="full"}async function g5e(e,t="tpv-studio-uploads"){try{const n=Date.now(),r=Math.random().toString(36).substring(7),i=e.name.split(".").pop(),a=`uploads/${`${n}-${r}.${i}`}`;console.log("[Upload] Uploading file:",e.name,"",a);const{data:o,error:u}=await ti.storage.from(t).upload(a,e,{cacheControl:"3600",upsert:!1});if(u)return console.error("[Upload] Error:",u),{success:!1,error:u.message||"Failed to upload file"};const{data:{publicUrl:d}}=ti.storage.from(t).getPublicUrl(a);return console.log("[Upload] Success:",d),{success:!0,url:d,path:a}}catch(n){return console.error("[Upload] Unexpected error:",n),{success:!1,error:n.message||"Unexpected error during upload"}}}function Aj(e,t={}){const{maxSizeMB:n=10,allowedTypes:r=["image/png","image/jpeg","image/svg+xml"]}=t;if(!e)return{valid:!1,error:"No file selected"};if(!r.includes(e.type))return{valid:!1,error:`Invalid file type. Allowed: ${r.map(a=>a.split("/")[1].toUpperCase()).join(", ")}`};const i=n*1024*1024;return e.size>i?{valid:!1,error:`File too large. Maximum size: ${n}MB`}:{valid:!0}}function y5e({onExportSVG:e,onExportPNG:t,onExportPDF:n,onExportTiles:r,onExportDXF:i,onExportCanvasPDF:s,viewMode:a,exporting:o,disabled:u}){const[d,h]=fe.useState(!1),p=fe.useRef(null);fe.useEffect(()=>{const v=w=>{p.current&&!p.current.contains(w.target)&&h(!1)};return d&&document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[d]);const m=a==="solid"?"Solid":"Blend",g=v=>{h(!1),v()};return l.jsxs("div",{className:"playground-export-menu",ref:p,children:[l.jsxs("button",{className:"action-bar__btn action-bar__btn--export",onClick:()=>h(!d),disabled:u||o,children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),o?"Exporting...":"Export",l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginLeft:"0.25rem"},children:l.jsx("path",{d:d?"M18 15l-6-6-6 6":"M6 9l6 6 6-6"})})]}),d&&l.jsxs("div",{className:"playground-export-menu__dropdown",children:[l.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(e),children:[l.jsx("span",{className:"playground-export-menu__icon",children:""}),l.jsxs("div",{className:"playground-export-menu__content",children:[l.jsxs("span",{className:"playground-export-menu__title",children:["Download ",m," SVG"]}),l.jsx("span",{className:"playground-export-menu__desc",children:"Vector format for CAD/printing"})]})]}),l.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(t),children:[l.jsx("span",{className:"playground-export-menu__icon",children:""}),l.jsxs("div",{className:"playground-export-menu__content",children:[l.jsxs("span",{className:"playground-export-menu__title",children:["Download ",m," PNG"]}),l.jsx("span",{className:"playground-export-menu__desc",children:"High-res image for presentations"})]})]}),l.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(r),children:[l.jsx("span",{className:"playground-export-menu__icon",children:""}),l.jsxs("div",{className:"playground-export-menu__content",children:[l.jsx("span",{className:"playground-export-menu__title",children:"Download Tiles ZIP"}),l.jsx("span",{className:"playground-export-menu__desc",children:"1m1m SVG tiles for large printing"})]})]}),l.jsx("div",{className:"playground-export-menu__divider"}),l.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(n),children:[l.jsx("span",{className:"playground-export-menu__icon",children:""}),l.jsxs("div",{className:"playground-export-menu__content",children:[l.jsxs("span",{className:"playground-export-menu__title",children:[m," Recipe Report (PDF)"]}),l.jsx("span",{className:"playground-export-menu__desc",children:"TPV quantities & specifications"})]})]}),s&&l.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(s),children:[l.jsx("span",{className:"playground-export-menu__icon",children:""}),l.jsxs("div",{className:"playground-export-menu__content",children:[l.jsx("span",{className:"playground-export-menu__title",children:"Canvas PDF (1:100)"}),l.jsx("span",{className:"playground-export-menu__desc",children:"Scaled design with dimensions"})]})]}),i&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"playground-export-menu__divider"}),l.jsxs("button",{className:"playground-export-menu__item",onClick:()=>g(i),children:[l.jsx("span",{className:"playground-export-menu__icon",children:""}),l.jsxs("div",{className:"playground-export-menu__content",children:[l.jsx("span",{className:"playground-export-menu__title",children:"Download DXF"}),l.jsx("span",{className:"playground-export-menu__desc",children:"CAD format for AutoCAD/Rhino"})]})]})]})]})]})}function Qd(e){var n;if(!e)return null;if(e.type==="image/svg+xml")return"svg";if(e.type==="image/png"||e.type==="image/jpeg")return"image";const t=(n=e.name.split(".").pop())==null?void 0:n.toLowerCase();return t==="svg"?"svg":["png","jpg","jpeg"].includes(t)?"image":null}function b5e({loadedDesign:e,onDesignSaved:t,isEmbedded:n=!1}){const r=rg(),{inputMode:i,prompt:s,lengthMM:a,widthMM:o,arMapping:u,uploadedFileUrl:d,result:h,jobId:p,blendRecipes:m,colorMapping:g,blendSvgUrl:v,blendEditedColors:w,solidRecipes:S,solidColorMapping:x,solidSvgUrl:k,solidEditedColors:j,viewMode:O,showFinalRecipes:I,showSolidSummary:E,regionOverrides:U,originalTaggedSvg:D,regionOverridesHistory:R,historyIndex:W,designName:ce,currentDesignId:te,hasUnsavedChanges:me,resetDesign:H,originalUnflattenedSvg:ge,originalRecipesState:Ee}=r,ke=r.setInputMode,ze=r.setPrompt,xe=r.setDimensions,Re=r.setArMapping;r.setGenerationResult;const _e=r.setResult,Pe=r.setJobId;r.setBlendState;const it=r.setBlendRecipes,tt=r.setColorMapping,Ue=r.setBlendSvgUrl;r.setSolidState;const ut=r.setSolidRecipes,de=r.setSolidColorMapping,oe=r.setSolidSvgUrl;r.updateBlendSvgUrl,r.updateSolidSvgUrl;const We=r.setBlendEditedColors,Ne=r.setSolidEditedColors;r.setViewMode;const ft=r.setShowFinalRecipes,Pt=r.setShowSolidSummary,Ct=r.setRegionOverrides;r.addRegionOverride;const q=r.setOriginalTaggedSvg,qe=r.setRegionOverridesHistory,ae=r.setHistoryIndex;r.canUndo,r.canRedo,r.undo,r.redo;const M=r.setDesignName,L=r.setCurrentDesignId,ee=r.loadDesign,pe=r.setOriginalUnflattenedSvg,ve=r.setOriginalRecipesState,ye=Ke=>xe(Ke,a),Me=Ke=>xe(o,Ke),[Xe,$e]=fe.useState(null),[c,f]=fe.useState(null),[b,_]=fe.useState(!1),[C,A]=fe.useState(!1),[T,N]=fe.useState(null),[$,F]=fe.useState(null),[Y,Q]=fe.useState(""),[K,V]=fe.useState(null),[X,B]=fe.useState(!1),[Z,G]=fe.useState(null),[re,z]=fe.useState(!1),[ne,se]=fe.useState(null),[ue,ie]=fe.useState([]),[be,Se]=fe.useState(!1),[Ae,De]=fe.useState(!1),[we,Ie]=fe.useState(null),[Fe,Ye]=fe.useState(!1),[Ze,Qe]=fe.useState(!1),[pt,gt]=fe.useState(!1),[At,kt]=fe.useState(null),[at,lt]=fe.useState(!1),[Tt,Ot]=fe.useState(null),[Be,dt]=fe.useState(null),[vt,Lt]=fe.useState(null),[It,$t]=fe.useState(!1),[nn,rn]=fe.useState(0),[vn,Cn]=fe.useState(null),[wt,En]=fe.useState(!1),[Nn,xn]=fe.useState(!1),[xr,Tr]=fe.useState(null),[or,lr]=fe.useState(!1),[ur,Nr]=fe.useState(null),[Vr,In]=fe.useState(null),[Kn,gi]=fe.useState(null),[_i,Gr]=fe.useState(!1),[yi,Ni]=fe.useState(null),ri=fe.useRef(null),ii=fe.useRef(null);fe.useEffect(()=>{(k||v)&&ri.current&&!Ae&&!X&&setTimeout(()=>{var Ke;(Ke=ri.current)==null||Ke.scrollIntoView({behavior:"smooth",block:"start"})},300)},[k,v,Ae,X]),fe.useEffect(()=>{if(!Ae)return;const Ke=mt=>{mt.key==="Escape"&&(mt.stopImmediatePropagation(),mt.preventDefault(),De(!1),Ie(null))};return window.addEventListener("keydown",Ke,!0),()=>window.removeEventListener("keydown",Ke,!0)},[Ae]),fe.useEffect(()=>{(async()=>{try{const mt=await tg({limit:1,offset:0});Ni(mt.designs.length>0)}catch(mt){console.error("[INSPIRE] Failed to check for existing designs:",mt),Ni(!0)}})()},[]),fe.useEffect(()=>{i==="upload"?xe(null,null):i==="prompt"&&(o===null||a===null)&&xe(5e3,5e3)},[i,xe]),fe.useEffect(()=>()=>{ii.current&&ii.current.abort(),v&&v.startsWith("blob:")&&URL.revokeObjectURL(v),k&&k.startsWith("blob:")&&URL.revokeObjectURL(k)},[]),fe.useEffect(()=>{const Ke=mt=>{mt.key==="Escape"&&re&&(z(!1),se(null))};return window.addEventListener("keydown",Ke),()=>window.removeEventListener("keydown",Ke)},[re]),fe.useEffect(()=>{ue.length>0&&!be&&Qn()},[ue,be]),fe.useEffect(()=>{(async()=>{if(!v&&!k){In(null),gi(null);return}if(!c5e(U)){In(m),gi(S);return}Gr(!0);try{if(v&&m){const mt=await Tj(v,m,U,"blend");In(mt)}if(k&&S){const mt=await Tj(k,S,U,"solid");gi(mt)}}catch(mt){console.error("[INSPIRE] Failed to recalculate recipes:",mt),In(m),gi(S)}finally{Gr(!1)}})()},[v,k,U,m,S]),fe.useEffect(()=>{if(e){const Ke=kx(e);ee(Ke),e.name&&M(e.name),e.id&&L(e.id),setTimeout(async()=>{var mt;if((mt=Ke.result)!=null&&mt.svg_url){let st=Ke.originalTaggedSvg||null;if(st)q(st);else try{const pn=await(await fetch(Ke.result.svg_url)).text(),Ft=Jb(pn);st=Ql(Ft),q(st)}catch(jt){console.error("[INSPIRE] Failed to tag SVG regions:",jt)}try{Ke.blendRecipes&&Ke.colorMapping&&await ws(Ke.result.svg_url,Ke.colorMapping,Ke.blendRecipes,Ke.blendEditedColors,st,Ke.regionOverrides),Ke.solidRecipes&&Ke.solidColorMapping&&await Io(Ke.result.svg_url,Ke.solidColorMapping,Ke.solidRecipes,Ke.solidEditedColors,st,Ke.regionOverrides)}catch(jt){console.error("[INSPIRE] Failed to regenerate SVGs:",jt),F("Failed to restore design preview. Please try reloading.")}}},100)}},[e,ee,M,L,q]);const qr=fe.useRef(!1);fe.useEffect(()=>{if(e||qr.current||!((h==null?void 0:h.svg_url)&&!v&&!k&&(m||S)))return;qr.current=!0,(async()=>{let st=D||null;if(!st)try{const pn=await(await fetch(h.svg_url)).text(),Ft=Jb(pn);st=Ql(Ft),q(st)}catch(jt){console.error("[INSPIRE] Failed to tag SVG regions:",jt)}try{m&&g&&await ws(h.svg_url,g,m,w,st,U),S&&x&&await Io(h.svg_url,x,S,j,st,U)}catch(jt){console.error("[INSPIRE] Failed to regenerate SVGs:",jt),F("Failed to restore design preview. Please try reloading.")}})()},[h,v,k,m,S,g,x,e,U,D]),fe.useEffect(()=>{h||(qr.current=!1)},[h]);const si=Ke=>{var jt;const mt=(jt=Ke.target.files)==null?void 0:jt[0];if(!mt){$e(null);return}const st=Aj(mt,{maxSizeMB:10,allowedTypes:["image/png","image/jpeg","image/svg+xml"]});if(!st.valid){F(st.error),$e(null);return}$e(mt),F(null)},tr=Ke=>{Ke.preventDefault(),Ke.stopPropagation(),_(!0)},zn=Ke=>{Ke.preventDefault(),Ke.stopPropagation(),Ke.currentTarget===Ke.target&&_(!1)},Gt=Ke=>{Ke.preventDefault(),Ke.stopPropagation()},dr=Ke=>{Ke.preventDefault(),Ke.stopPropagation(),_(!1);const mt=Ke.dataTransfer.files;if(mt&&mt.length>0){const st=mt[0],jt=Aj(st,{maxSizeMB:10,allowedTypes:["image/png","image/jpeg","image/svg+xml"]});if(!jt.valid){F(jt.error),$e(null);return}$e(st),F(null)}},kn=async()=>{var Ke,mt;if(i==="prompt"&&!s.trim()){F("Please enter a design description");return}if(i==="upload"&&!Xe){F("Please select a file to upload");return}if(i==="upload"&&Xe&&!Qd(Xe)){F("Unsupported file type. Please upload PNG, JPG, or SVG.");return}F(null),A(!0),N(null),_e(null),Pe(null),Q("Initialising..."),V(null);try{let st;if(i==="upload"&&Xe){const Bt=Qd(Xe);Q(Bt==="svg"?"Uploading SVG file...":"Uploading image..."),f("Uploading...");const Vt=await g5e(Xe);if(!Vt.success)throw new Error(Vt.error||"Failed to upload file");if(f(null),Bt==="svg"){if(Q("Processing SVG..."),st=await Ol.processUploadedSVG({svg_url:Vt.url}),!st.success)throw new Error(st.error||"Failed to process SVG");Pe(st.jobId),Q(" SVG uploaded successfully!"),A(!1);const Tn=await Ol.getRecraftStatus(st.jobId);N(Tn),_e(Tn.result),(Ke=Tn.result)!=null&&Ke.svg_url&&await rr(Tn.result.svg_url,st.jobId);return}else{if(Q("Starting vectorisation..."),st=await Ol.vectorizeImage({image_url:Vt.url}),!st.success)throw new Error(st.error||"Failed to start vectorisation");Q(" AI is vectorising your image...")}}else if(i==="prompt"){const Bt=p5e(a,o);if(Re(Bt),m5e(Bt)?Q(`Generating ${Bt.canonical.name} design panel...`):Q("Initialising..."),st=await Ol.generateRecraft({prompt:s.trim(),lengthMM:Bt.recraft.height,widthMM:Bt.recraft.width}),!st.success)throw new Error(st.error||"Failed to start generation");Q(" AI is creating your design...")}Pe(st.jobId),Q("Request submitted, waiting for processing...");let jt=null,pn=Date.now();ii.current=new AbortController,await Ol.waitForRecraftCompletion(st.jobId,Bt=>{var Tn,Vn;N(Bt);const Vt=Math.floor((Date.now()-pn)/1e3);if(Bt.status==="queued"){const Bn=[` Preparing your canvas... (${Vt}s)`,` Warming up the AI brushes... (${Vt}s)`,` Queueing your masterpiece... (${Vt}s)`,` Mixing digital paints... (${Vt}s)`,` AI is contemplating your vision... (${Vt}s)`,` Selecting the perfect colours... (${Vt}s)`,` Calculating vector paths... (${Vt}s)`,` Almost ready to create... (${Vt}s)`],wr=Math.floor(Vt/4)%Bn.length;Q(Bn[wr])}else if(Bt.status==="running")if(jt!=="running")Q(" AI is creating your design..."),jt="running";else{const Bn=[` Creating vector shapes... (${Vt}s)`,` Applying colours and patterns... (${Vt}s)`,` Refining design details... (${Vt}s)`,` Finalising artwork... (${Vt}s)`],wr=Math.floor(Vt/5)%Bn.length;Q(Bn[wr])}else if(Bt.status==="retrying"){const Bn=((Tn=Bt.recraft)==null?void 0:Tn.attempt_current)||0,wr=((Vn=Bt.recraft)==null?void 0:Vn.attempt_max)||3;Q(` Retrying generation (attempt ${Bn}/${wr})...`)}},2e3,ii.current.signal);const Ft=await Ol.getRecraftStatus(st.jobId);N(Ft),_e(Ft.result),Ft.status==="completed"&&(Q(" Design ready!"),A(!1),(mt=Ft.result)!=null&&mt.svg_url&&await rr(Ft.result.svg_url,st.jobId))}catch(st){if(st.name==="AbortError")return;console.error("Generation failed:",st),F(st.message),Q(""),A(!1)}},nr=()=>{const Ke=O==="solid"?k:v,mt=O==="solid"?"tpv-solid":"tpv-blend";if(Ke){const st=document.createElement("a");st.href=Ke,st.download=`${mt}-${Date.now()}.svg`,document.body.appendChild(st),st.click(),document.body.removeChild(st)}},Or=async Ke=>{try{const st=await(await fetch(Ke)).text(),Ft=new DOMParser().parseFromString(st,"image/svg+xml").querySelector("svg");if(!Ft)return null;let Bt,Vt;const Tn=Ft.getAttribute("viewBox");if(Tn){const Bn=Tn.split(/\s+/).map(Number);Bt=Bn[2],Vt=Bn[3]}else Bt=parseFloat(Ft.getAttribute("width"))||1024,Vt=parseFloat(Ft.getAttribute("height"))||1024;return Bt/Vt}catch(mt){return console.error("[DIMENSION] Failed to detect aspect ratio:",mt),null}},ts=(Ke,mt)=>{ye(Ke),Me(mt),Lt({width:Ke,height:mt}),Be==="pdf"?setTimeout(()=>Qt(Ke,mt),100):Be==="tiles"?setTimeout(()=>An(Ke,mt),100):Be==="insitu"?setTimeout(()=>gt(!0),100):Be==="save"&&Ye(!0),dt(null)},Br=async()=>{const Ke=O==="solid"?k:v;if(i==="upload"&&(!o||!a)){const mt=await Or(Ke);if(mt){Ot(mt),dt("insitu"),lt(!0);return}else{Ot(1),dt("insitu"),lt(!0);return}}gt(!0)},bi=async(Ke="fast")=>{const mt=O==="solid"?k:v;if(!(!mt||It)){if(D&&ev(D)){Cn("This artwork has already been flattened.");return}$t(!0),rn(0),Cn(null);try{console.log(`[INSPIRE] Starting flatten (quality: ${Ke})`);const jt=await(await fetch(mt)).text();ge||(pe(jt),ve({solidRecipes:S,solidColorMapping:x,blendRecipes:m,colorMapping:g}),console.log("[INSPIRE] Saved original SVG and recipes for revert"));const{svg:pn,stats:Ft}=await QTe(jt,{quality:Ke,resolution:4096,quantize:!0,onProgress:rn});console.log("[INSPIRE] Flatten complete:",Ft);const Bt=Ql(pn);q(Bt),Ct(new Map),qe([new Map]),ae(0);const Vt=new Blob([Bt],{type:"image/svg+xml"}),Tn=URL.createObjectURL(Vt);O==="solid"?oe(Tn):Ue(Tn);const{recipes:Vn,colorMapping:Bn}=JTe(Bt);O==="solid"?(ut(Vn),de(Bn)):(it(Vn),tt(Bn)),console.log("[INSPIRE] Rebuilt recipes from flattened SVG:",Vn.length,"colors"),rn(100),console.log("[INSPIRE] Flatten applied successfully")}catch(st){console.error("[INSPIRE] Flatten failed:",st),Cn(st.message||"Flatten failed. Please try again.")}finally{$t(!1)}}},y=Ke=>{Tr(Ke),xn(!0),En(!1)},P=()=>{xn(!1),bi(xr)},J=async()=>{if(!ge)return;console.log("[INSPIRE] Reverting to original unflattened SVG");const Ke=new Blob([ge],{type:"image/svg+xml"}),mt=URL.createObjectURL(Ke);q(ge),O==="solid"?oe(mt):Ue(mt),Ee&&(ut(Ee.solidRecipes),de(Ee.solidColorMapping),it(Ee.blendRecipes),tt(Ee.colorMapping),console.log("[INSPIRE] Restored original recipes and color mapping")),pe(null),ve(null),Ct(new Map),qe([new Map]),ae(0),console.log("[INSPIRE] Reverted to original successfully")},le=()=>{const Ke=O==="solid"?k:v,mt=O==="solid"?"tpv-solid":"tpv-blend";if(Ke){const st=new Image;st.onload=()=>{const jt=document.createElement("canvas");jt.width=st.naturalWidth||1e3,jt.height=st.naturalHeight||1e3,jt.getContext("2d").drawImage(st,0,0),jt.toBlob(Ft=>{const Bt=URL.createObjectURL(Ft),Vt=document.createElement("a");Vt.href=Bt,Vt.download=`${mt}-${Date.now()}.png`,document.body.appendChild(Vt),Vt.click(),document.body.removeChild(Vt),URL.revokeObjectURL(Bt)})},st.src=Ke}},Ce=()=>{me()&&!window.confirm(`Start a new design?

You have unsaved changes that will be lost.`)||(H(),$e(null),A(!1),N(null),F(null),Q(""),V(null),B(!1),G(null),z(!1),se(null),De(!1),Ie(null),pe(null),ve(null),En(!1),xn(!1),Tr(null))},Je=async()=>{const Ke=O==="solid"?k:v,mt=o>0&&a>0;if(i==="upload"&&!mt){const jt=await Or(Ke);if(jt){Ot(jt),dt("save"),lt(!0);return}else{Ot(1),dt("save"),lt(!0);return}}Ye(!0)},[rt,xt]=fe.useState(!1),_t=async()=>{const Ke=O==="solid"?k:v;if(i==="upload"&&(!o||!a)){const mt=await Or(Ke);if(mt){Ot(mt),dt("pdf"),lt(!0);return}else{Ot(1),dt("pdf"),lt(!0);return}}await Qt(o,a)},Qt=async(Ke,mt)=>{const st=O==="solid"?k:v,jt=O==="solid"?Kn||S:Vr||m,pn=O==="solid"?"tpv-solid":"tpv-blend";if(!st||!jt){F("Cannot generate PDF: missing SVG or recipes");return}xt(!0),F(null);try{const Bt=await(await fetch(st)).text(),Vt=new AbortController,Tn=setTimeout(()=>Vt.abort(),3e4),Vn=await _a.getSession(),Bn={"Content-Type":"application/json"};Vn!=null&&Vn.access_token&&(Bn.Authorization=`Bearer ${Vn.access_token}`);const wr=await fetch("/api/export-pdf",{method:"POST",headers:Bn,signal:Vt.signal,body:JSON.stringify({svgString:Bt,designName:ce||s||"TPV Design",projectName:"TPV Studio",dimensions:{widthMM:Ke,lengthMM:mt},recipes:jt,mode:O,designId:p||""})});if(clearTimeout(Tn),!wr.ok){const rs=wr.headers.get("content-type");if(rs&&rs.includes("application/json")){const Mi=await wr.json();throw new Error(Mi.message||"PDF generation failed")}else{const Mi=await wr.text();throw console.error("PDF API error response:",Mi),new Error(`Server error: ${wr.status}`)}}const Zn=await wr.blob(),on=URL.createObjectURL(Zn),Xt=document.createElement("a");Xt.href=on,Xt.download=`${pn}-${Date.now()}.pdf`,document.body.appendChild(Xt),Xt.click(),document.body.removeChild(Xt),URL.revokeObjectURL(on)}catch(Ft){console.error("PDF download error:",Ft),Ft.name==="AbortError"?F("PDF generation timed out. Please try again."):F(`PDF generation failed: ${Ft.message}`)}finally{xt(!1)}},sn=async()=>{const Ke=O==="solid"?k:v;if(!Ke){F("No SVG available to slice");return}if(i==="upload"&&(!o||!a)){const mt=await Or(Ke);if(mt){Ot(mt),dt("tiles"),lt(!0);return}else{Ot(1),dt("tiles"),lt(!0);return}}await An(o,a)},An=async(Ke,mt)=>{const st=O==="solid"?k:v;try{await Y7(st,{width:Ke,length:mt},ce||"tpv-design")}catch(jt){console.error("Tile download error:",jt),F(`Failed to download tiles: ${jt.message}`)}},rr=async(Ke=null,mt=null)=>{const st=Ke||(h==null?void 0:h.svg_url),jt=mt||p;if(!st){F("No SVG available to analyse");return}{F(null),Q(" Processing design colours...");let pn=null;try{const Bt=await(await fetch(st)).text(),Vt=Jb(Bt);pn=Ql(Vt),q(pn)}catch(Ft){console.error("[TPV-STUDIO] Failed to tag SVG regions:",Ft)}await St(st,jt,pn);return}},ns=async()=>{B(!1),G(null),De(!1),Ie(null),O==="solid"?Ne(new Map):We(new Map),h!=null&&h.svg_url&&await rr(h.svg_url,p)},Ut=async Ke=>{var mt;if(!ce){if(!s||i!=="prompt"){Xe&&M(`TPV Design  ${Xe.name.replace(/\.[^/.]+$/,"")}`);return}Qe(!0);try{const st=(Ke==null?void 0:Ke.slice(0,6).map(pn=>{var Bt,Vt;const Ft=(Vt=(Bt=pn.chosenRecipe)==null?void 0:Bt.components)==null?void 0:Vt[0];return(Ft==null?void 0:Ft.name)||null}).filter(Boolean))||[],jt=await Ol.generateDesignName({prompt:s,colors:st,dimensions:{widthMM:o,lengthMM:a}});jt.success&&((mt=jt.names)==null?void 0:mt.length)>0?M(jt.names[0]):M(He(s))}catch(st){console.error("[TPV-STUDIO] Name generation failed:",st),M(He(s))}finally{Qe(!1)}}},He=Ke=>Ke?`TPV Design  ${Ke.split(/[,.]/)[0].trim().slice(0,40)}`:"TPV Playground Design",St=async(Ke=null,mt=null,st=null)=>{const jt=Ke||(h==null?void 0:h.svg_url),pn=mt||p,Ft=st||D;if(jt)try{const Bt=await fetch("/api/solid-recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({svg_url:jt,job_id:pn,max_colors:15})}),Vt=await Bt.json();if(!Bt.ok)throw new Error(Vt.error||"Failed to generate solid recipes");if(Vt.success){ut(Vt.recipes);const Tn=new Map(Object.entries(Vt.colorMapping||{}));de(Tn);try{const{dataUrl:Vn,stats:Bn}=await ql(jt,Tn,Ft);oe(Vn),Bn.colorsNotMapped&&Bn.colorsNotMapped.size>0&&console.warn("[TPV-STUDIO] Unmapped colors in solid mode:",Array.from(Bn.colorsNotMapped)),Ut(Vt.recipes)}catch(Vn){console.error("[TPV-STUDIO] Failed to generate solid SVG:",Vn)}}}catch(Bt){console.error("[TPV-STUDIO] Solid generation failed:",Bt)}},Rt=(Ke,mt="palette")=>{if(re&&ne&&mt==="palette"){bn(ne.regionId,Ke.hex),z(!1),se(null);return}mt==="palette"&&(O==="blend"?(Ie(Ke),De(!0),ft(!1)):(G(Ke),B(!0),Pt(!1)))},Fn=Ke=>{re?(bn(ne.regionId,Ke.sourceColor),z(!1),se(null)):(z(!0),se(Ke))},bn=(Ke,mt)=>{const st=typeof mt=="string"?{hex:mt,editType:"eyedrop"}:mt;ie(jt=>[...jt,{regionId:Ke,colorData:{...st,hex:st.hex.toLowerCase()},viewMode:O}])},Qn=async()=>{if(be||ue.length===0)return;Se(!0);const Ke=ue[0],mt=Ke.colorData;try{const st=new Map(U);st.set(Ke.regionId,mt),Ke.viewMode==="blend"?await ai(null,null,st):await xs(null,null,st),Ct(st);const jt=r.historyIndex,Ft=r.regionOverridesHistory.slice(0,jt+1);Ft.push(new Map(st)),Ft.length>50&&Ft.shift(),qe(Ft),ae(Ft.length-1)}catch(st){console.error("[TPV-STUDIO] Failed to process region recolor:",st)}finally{ie(st=>st.slice(1)),Se(!1)}},Yr=()=>{z(!1),se(null)},Oi=()=>{ne&&(bn(ne.regionId,"transparent"),z(!1),se(null))},na=Ke=>{if(!ne)return;const mt={hex:Ke.hex,tpvCode:Ke.code,tpvName:Ke.name,originalHex:ne.sourceColor,editType:"solid"};bn(ne.regionId,mt),z(!1),se(null)},ra=async()=>{if(W<=0)return;const Ke=W-1,mt=R[Ke];Ct(new Map(mt)),ae(Ke),O==="blend"?await ai(null,null,mt):await xs(null,null,mt)},cr=async()=>{if(W>=R.length-1)return;const Ke=W+1,mt=R[Ke];Ct(new Map(mt)),ae(Ke),O==="blend"?await ai(null,null,mt):await xs(null,null,mt)},Ri=async Ke=>{if(Z)if(O==="solid"){const st=(Kn||S).find(jt=>jt.targetColor.hex.toLowerCase()===Z.hex.toLowerCase());if(st!=null&&st.isAddedFromEdit){const jt=Z.hex.toLowerCase(),pn=new Map(U),Ft=fi.find(Vt=>Vt.hex.toLowerCase()===Ke.toLowerCase());U.forEach((Vt,Tn)=>{(typeof Vt=="string"?Vt:Vt.hex).toLowerCase()===jt&&pn.set(Tn,{hex:Ke,tpvCode:(Ft==null?void 0:Ft.code)||null,tpvName:(Ft==null?void 0:Ft.name)||null,originalHex:Vt.originalHex||jt,editType:"solid"})});const Bt=R.slice(0,W+1);Bt.push(new Map(pn)),Bt.length>50&&Bt.shift(),Ct(pn),qe(Bt),ae(Bt.length-1),G({...Z,hex:Ke,blendHex:Ke}),await xs(j,Ke,pn)}else{const jt=new Map(j);((st==null?void 0:st.mergedOriginalColors)||[Z.originalHex.toLowerCase()]).forEach(Ft=>{jt.set(Ft,{newHex:Ke.toLowerCase()})}),Ne(jt),G({...Z,hex:Ke,blendHex:Ke}),await xs(jt,Ke)}}else{const mt=new Map(w);mt.set(Z.originalHex.toLowerCase(),{newHex:Ke.toLowerCase()}),We(mt),G({...Z,hex:Ke,blendHex:Ke}),await ai(mt,Ke)}};fe.useCallback(async({blendHex:Ke,parts:mt,recipe:st})=>{if(we)if(we.isAddedFromEdit){const jt=we.hex.toLowerCase(),pn=new Map(U);U.forEach((Bt,Vt)=>{(typeof Bt=="string"?Bt:Bt.hex).toLowerCase()===jt&&pn.set(Vt,{hex:Ke,originalHex:Bt.originalHex||jt,editType:"blend",blendComponents:(st==null?void 0:st.components)||null})}),Ie({...we,hex:Ke,blendHex:Ke}),await ai(w,Ke,pn);const Ft=R.slice(0,W+1);Ft.push(new Map(pn)),Ft.length>50&&Ft.shift(),Ct(pn),qe(Ft),ae(Ft.length-1)}else{const jt=new Map(w);jt.set(we.originalHex.toLowerCase(),{newHex:Ke.toLowerCase(),recipe:st,parts:mt}),We(jt),Ie({...we,hex:Ke,blendHex:Ke}),await ai(jt,Ke)}},[we,w,U,R,W,h,g]);const ai=async(Ke=null,mt=null,st=null)=>{if(!(!(h!=null&&h.svg_url)||!g||!m))try{const jt=new Map(g),pn=Ke||w;pn.forEach((Zn,on)=>{if(Zn.newHex){const Xt=on.toLowerCase();jt.set(Xt,{...jt.get(Xt),blendHex:Zn.newHex})}});const Ft=m.map(Zn=>{const on=pn.get(Zn.originalColor.hex.toLowerCase());if(on!=null&&on.newHex){const Xt={...Zn,targetColor:{...Zn.targetColor,hex:on.newHex},blendColor:{...Zn.blendColor,hex:on.newHex}};return on.recipe&&on.recipe.components&&(Xt.chosenRecipe={...Zn.chosenRecipe,components:on.recipe.components,deltaE:0,quality:"Excellent"}),Xt}return Zn}),{svgText:Bt,stats:Vt}=await ql(h.svg_url,jt,D),Tn=st!==null?st:U,Vn=ku(Bt,Tn);v&&v.startsWith("blob:")&&URL.revokeObjectURL(v);const Bn=new Blob([Vn],{type:"image/svg+xml"}),wr=URL.createObjectURL(Bn);Ue(wr),tt(jt),it(Ft),Tn.size>0}catch(jt){console.error("[TPV-STUDIO] Failed to regenerate blend SVG:",jt)}},xs=async(Ke=null,mt=null,st=null)=>{if(!(!(h!=null&&h.svg_url)||!x||!S))try{const jt=new Map(x),pn=Ke||j;pn.forEach((Zn,on)=>{if(Zn.newHex){const Xt=on.toLowerCase();jt.set(Xt,{...jt.get(Xt),blendHex:Zn.newHex})}});const Ft=S.map(Zn=>{const on=pn.get(Zn.originalColor.hex.toLowerCase());if(on!=null&&on.newHex){const Xt=fi.find(rs=>rs.hex.toLowerCase()===on.newHex.toLowerCase());return Xt?{...Zn,targetColor:{...Zn.targetColor,hex:on.newHex},blendColor:{hex:on.newHex,rgb:Xt.rgb,lab:Xt.lab},chosenRecipe:{components:[{code:Xt.code,name:Xt.name,hex:Xt.hex,rgb:Xt.rgb,lab:Xt.lab,ratio:1}],blendColor:{hex:Xt.hex,rgb:Xt.rgb,lab:Xt.lab},deltaE:0,quality:"Perfect"}}:{...Zn,targetColor:{...Zn.targetColor,hex:on.newHex},blendColor:{...Zn.blendColor,hex:on.newHex}}}return Zn}),{svgText:Bt,stats:Vt}=await ql(h.svg_url,jt,D),Tn=st!==null?st:U,Vn=ku(Bt,Tn);k&&k.startsWith("blob:")&&URL.revokeObjectURL(k);const Bn=new Blob([Vn],{type:"image/svg+xml"}),wr=URL.createObjectURL(Bn);oe(wr),de(jt),ut(Ft),Tn.size>0}catch(jt){console.error("[TPV-STUDIO] Failed to regenerate solid SVG:",jt)}},El=Ke=>{if(!(Ke!=null&&Ke.components))return null;const mt={};return Ke.components.forEach(st=>{st.code&&st.parts&&(mt[st.code]=st.parts)}),Object.keys(mt).length>0?{parts:mt}:null};fe.useCallback(Ke=>{var st;if(!Ke)return null;const mt=w.get((st=Ke.originalHex)==null?void 0:st.toLowerCase());return mt!=null&&mt.recipe?mt.recipe:Ke.isAddedFromEdit&&Ke.chosenRecipe?El(Ke.chosenRecipe):Ke.recipe||null},[w]);const ws=async(Ke,mt,st,jt,pn=null,Ft=null)=>{try{const Bt=new Map(mt);jt&&jt.size>0&&jt.forEach((Zn,on)=>{const Xt=on.toLowerCase();Bt.has(Xt)&&Bt.set(Xt,{...Bt.get(Xt),blendHex:Zn.newHex})});const{dataUrl:Vt,svgText:Tn}=await ql(Ke,Bt,pn);let Vn=Tn;Ft&&Ft.size>0&&(Vn=ku(Tn,Ft));const Bn=new Blob([Vn],{type:"image/svg+xml"}),wr=URL.createObjectURL(Bn);Ue(wr)}catch(Bt){console.error("[INSPIRE] Failed to regenerate blend SVG:",Bt)}},Io=async(Ke,mt,st,jt,pn=null,Ft=null)=>{try{const Bt=new Map(mt);jt&&jt.size>0&&jt.forEach((Zn,on)=>{const Xt=on.toLowerCase();Bt.has(Xt)&&Bt.set(Xt,{...Bt.get(Xt),blendHex:Zn.newHex})});const{dataUrl:Vt,svgText:Tn}=await ql(Ke,Bt,pn);let Vn=Tn;Ft&&Ft.size>0&&(Vn=ku(Tn,Ft));const Bn=new Blob([Vn],{type:"image/svg+xml"}),wr=URL.createObjectURL(Bn);oe(wr)}catch(Bt){console.error("[INSPIRE] Failed to regenerate solid SVG:",Bt)}};return l.jsxs("div",{className:`inspire-panel-recraft${n?" inspire-panel-recraft--embedded":""}`,children:[!n&&l.jsxs("div",{className:"panel-header",children:[l.jsx("h2",{children:"TPV Studio - Vector AI"}),l.jsx("p",{className:"subtitle",children:"AI-powered vector designs for playground surfacing"})]}),!h&&!C&&yi===!1&&l.jsxs("div",{className:"welcome-guidance",children:[l.jsx("div",{className:"welcome-icon",children:""}),l.jsx("h3",{children:"Create Your First Design"}),l.jsx("p",{children:"Choose how you'd like to create your TPV design below. You can describe what you want, upload an image to convert, or process an existing SVG file. Once generated, you'll be able to edit colours, export PDFs with specifications, and preview designs on-site."})]}),l.jsxs("div",{className:"input-mode-tabs",children:[l.jsxs("button",{className:`input-mode-tab ${i==="prompt"?"active":""}`,onClick:()=>{ke("prompt"),$e(null),F(null)},disabled:C,children:[l.jsxs("svg",{className:"mode-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 3l1.545 4.635L18.18 9.18l-4.635 1.545L12 15.36l-1.545-4.635L5.82 9.18l4.635-1.545L12 3z"}),l.jsx("path",{d:"M5 21l1.5-4.5L2 15l4.5-1.5L8 9l1.5 4.5L14 15l-4.5 1.5L8 21z",opacity:"0.5"})]}),l.jsx("span",{className:"mode-title",children:"Text Prompt"}),l.jsx("span",{className:"mode-description",children:"Describe your design"})]}),l.jsxs("button",{className:`input-mode-tab ${i==="upload"?"active":""}`,onClick:()=>{ke("upload"),ze(""),F(null)},disabled:C,children:[l.jsxs("svg",{className:"mode-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),l.jsx("span",{className:"mode-title",children:"Upload Design"}),l.jsx("span",{className:"mode-description",children:"PNG, JPG, or SVG"})]})]}),l.jsxs("div",{className:"form-section",children:[i==="prompt"&&l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"prompt",children:"Design Description"}),l.jsx("textarea",{id:"prompt",value:s,onChange:Ke=>ze(Ke.target.value),placeholder:"e.g., calm ocean theme with big fish silhouettes and waves",rows:4,disabled:C,className:"prompt-input"}),l.jsx("p",{className:"helper-text",children:"Describe the design you want to generate. The AI will create a vector illustration based on your description. Perfect for creating completely new designs from scratch - just describe colors, themes, and elements you want."})]}),i==="upload"&&l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"design-upload",children:"Upload Design File"}),l.jsxs("div",{className:`drop-zone ${b?"dragging":""} ${Xe?"has-file":""}`,onDragEnter:tr,onDragLeave:zn,onDragOver:Gt,onDrop:dr,children:[l.jsx("input",{id:"design-upload",type:"file",accept:".png,.jpg,.jpeg,.svg,image/png,image/jpeg,image/svg+xml",onChange:si,disabled:C,className:"file-input-hidden"}),l.jsx("label",{htmlFor:"design-upload",className:"drop-zone-content",children:Xe?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"upload-icon success",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),l.jsx("span",{className:"file-name",children:Xe.name}),l.jsx("span",{className:"file-type-badge",children:Qd(Xe)==="svg"?"SVG - will process immediately":"Image - will vectorise with AI"}),l.jsx("span",{className:"drop-hint",children:"Click to change file"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),l.jsx("span",{className:"drop-text",children:"Drag & drop your design here"}),l.jsx("span",{className:"drop-hint",children:"or click to browse"}),l.jsx("span",{className:"supported-formats",children:"PNG, JPG, or SVG"})]})})]}),l.jsxs("p",{className:"helper-text",children:["Upload your design file. ",l.jsx("strong",{children:"PNG/JPG"})," images will be vectorised with AI (~30 seconds). ",l.jsx("strong",{children:"SVG"})," files are processed immediately for TPV colour matching."]})]}),i==="prompt"&&l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"length",children:"Length (mm)"}),l.jsx("input",{id:"length",type:"number",value:a,onChange:Ke=>Me(parseInt(Ke.target.value,10)),min:1e3,max:2e4,step:100,disabled:C})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"width",children:"Width (mm)"}),l.jsx("input",{id:"width",type:"number",value:o,onChange:Ke=>ye(parseInt(Ke.target.value,10)),min:1e3,max:2e4,step:100,disabled:C})]})]}),$&&l.jsxs("div",{className:"error-message",children:[l.jsx("strong",{children:"Error:"})," ",$]}),c&&l.jsx("div",{className:"upload-progress",children:l.jsx("p",{children:c})}),l.jsx("button",{onClick:kn,disabled:C||i==="prompt"&&!s.trim()||i==="upload"&&!Xe,className:"generate-button",children:C?i==="upload"&&Xe&&Qd(Xe)==="svg"?"Processing...":"Generating...":i==="prompt"?"Generate Vector Design":Xe&&Qd(Xe)==="svg"?"Process SVG":"Vectorise & Process"})]}),C&&l.jsxs("div",{className:"progress-section",children:[l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-bar-fill"})}),l.jsx("p",{className:"progress-message",children:Y})]}),h&&!C&&l.jsxs("div",{className:"results-section",children:[u&&l.jsxs("div",{className:`ar-info ${u.layout.mode}`,children:[l.jsxs("div",{className:"ar-info-header",children:[l.jsx("strong",{children:"Layout:"})," ",u.layout.reason]}),l.jsxs("div",{className:"ar-info-details",children:[l.jsxs("span",{children:["Requested: ",u.user.formatted]}),l.jsx("span",{children:""}),l.jsxs("span",{children:["Generated: ",u.canonical.name," panel"]}),u.layout.mode==="framing"&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{className:"layout-note",children:"Panel centred with base colour surround"})]}),u.layout.mode==="tiling"&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{className:"layout-note",children:"Pattern will repeat along length"})]})]})]}),Gl.BLEND_MODE_ENABLED,D&&(v||k)&&l.jsxs("div",{className:"complexity-indicator",children:[l.jsx(HTe,{svgContent:D}),ge&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"simplified-badge",children:"Simplified"}),l.jsx("button",{className:"revert-btn",onClick:J,title:"Restore original artwork",children:" Revert"})]}),!ge&&!ev(D)&&l.jsxs("div",{className:"troubleshoot-dropdown",children:[l.jsxs("button",{className:"troubleshoot-toggle",onClick:()=>En(!wt),children:["Having issues? ",wt?"":""]}),wt&&l.jsxs("div",{className:"troubleshoot-menu",children:[l.jsx("div",{className:"troubleshoot-header",children:"Simplify Artwork"}),l.jsx("p",{className:"troubleshoot-desc",children:"If editing feels slow or you see visual artifacts, simplifying can help."}),l.jsxs("div",{className:"troubleshoot-buttons",children:[l.jsx("button",{onClick:()=>y("fast"),disabled:It,children:"Quick"}),l.jsx("button",{onClick:()=>y("clean"),disabled:It,children:"Smooth"})]})]})]}),!ge&&ev(D)&&l.jsx("span",{className:"simplified-badge",children:"Simplified"})]}),Nn&&l.jsx("div",{className:"modal-overlay",onClick:()=>xn(!1),children:l.jsxs("div",{className:"flatten-confirm-modal",onClick:Ke=>Ke.stopPropagation(),children:[l.jsx("h3",{children:"Simplify Artwork?"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Converts vector paths to traced outlines"}),l.jsx("li",{children:"Locks in current colors"}),l.jsx("li",{children:"May slightly simplify geometry"})]}),l.jsx("p",{className:"modal-note",children:"You can revert to the original later."}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{onClick:()=>xn(!1),children:"Cancel"}),l.jsx("button",{onClick:P,className:"primary",children:"Simplify"})]})]})}),It&&l.jsx("div",{className:"flatten-overlay",children:l.jsxs("div",{className:"flatten-modal",children:[l.jsx("div",{className:"flatten-spinner"}),l.jsx("div",{className:"flatten-title",children:"Flattening Artwork..."}),l.jsx("div",{className:"flatten-progress-bar",children:l.jsx("div",{className:"flatten-progress-fill",style:{width:`${nn}%`}})}),l.jsxs("div",{className:"flatten-progress-text",children:[nn,"%"]}),l.jsx("div",{className:"flatten-warning",children:"This converts paths to traced outlines. Region colors will be reset."})]})}),vn&&l.jsxs("div",{className:"flatten-error",children:[l.jsx("span",{children:vn}),l.jsx("button",{onClick:()=>Cn(null),children:""})]}),Gl.BLEND_MODE_ENABLED,O==="solid"&&k&&S&&l.jsx("div",{ref:ri,children:l.jsx(uU,{blendSvgUrl:k,recipes:Kn||S,mode:"solid",onColorClick:Rt,onRegionClick:Fn,onEyedropperCancel:Yr,onMakeTransparent:Oi,onSelectTPVColor:na,selectedColor:Z,editedColors:j,onResetAll:ns,designName:ce,onNameChange:M,isNameLoading:Ze,onInSituClick:Br,eyedropperActive:re,eyedropperRegion:ne,onRegionUndo:ra,onRegionRedo:cr,canUndo:W>0,canRedo:W<R.length-1,regionOverridesCount:U.size})}),Gl.BLEND_MODE_ENABLED,(v||k)&&l.jsxs("div",{className:"action-bar",children:[l.jsxs("button",{className:"action-bar__btn action-bar__btn--secondary",onClick:Ce,title:"Start a new design",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M12 5v14M5 12h14"})}),"New"]}),l.jsxs("button",{className:"action-bar__btn action-bar__btn--primary",onClick:Je,title:"Save this design to your gallery",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save"]}),l.jsx(y5e,{onExportSVG:nr,onExportPNG:le,onExportPDF:_t,onExportTiles:sn,viewMode:O,exporting:rt,disabled:!(v||k)})]})]}),Gl.BLEND_MODE_ENABLED,O==="solid"&&k&&S&&!E&&l.jsxs("div",{className:"finalize-section",children:[l.jsx("button",{onClick:()=>Pt(!0),className:"finalize-button",children:"View TPV Colours Used"}),l.jsx("p",{className:"finalize-hint",children:"See which pure TPV colours are used in this design"})]}),Gl.BLEND_MODE_ENABLED,E&&S&&l.jsx(oU,{recipes:Kn||S,onClose:()=>{Pt(!1)},isRecalculating:_i}),X&&Z&&l.jsx(_oe,{color:Z,mode:O,onColorChange:Ri,onClose:()=>{B(!1),G(null)}}),Fe&&l.jsx(Coe,{currentState:{inputMode:i,prompt:s,selectedFile:Xe,lengthMM:(vt==null?void 0:vt.height)||a,widthMM:(vt==null?void 0:vt.width)||o,result:h,viewMode:O,blendRecipes:m,solidRecipes:S,colorMapping:g,solidColorMapping:x,solidEditedColors:j,blendEditedColors:w,blendSvgUrl:v,solidSvgUrl:k,arMapping:u,jobId:p,inSituData:At,regionOverrides:U,originalTaggedSvg:D,originalUnflattenedSvg:ge},existingDesignId:te,initialName:ce,onClose:()=>{Ye(!1),Lt(null)},onSaved:(Ke,mt)=>{Ye(!1),Lt(null),Ni(!0),mt&&M(mt),t&&t(mt)}}),pt&&l.jsx(FO,{designUrl:O==="solid"?k:v,designDimensions:{width:o,length:a},onClose:()=>gt(!1),onSaved:Ke=>{kt(Ke),gt(!1)}}),l.jsx(zoe,{isOpen:at,onClose:()=>{lt(!1),dt(null)},onConfirm:ts,aspectRatio:Tt,defaultLongestSide:5e3}),l.jsx("style",{jsx:!0,children:`
        .inspire-panel-recraft {
          max-width: var(--max-width-xl);
          margin: 0 auto;
          padding: var(--space-4);
        }

        .panel-header {
          text-align: center;
          margin-bottom: var(--space-6);
        }

        .panel-header h2 {
          font-family: var(--font-heading);
          font-size: var(--text-3xl);
          margin: 0 0 var(--space-2) 0;
          color: var(--color-primary);
          font-weight: var(--font-bold);
          letter-spacing: var(--tracking-tight);
        }

        .subtitle {
          color: var(--color-text-secondary);
          font-size: var(--text-base);
          line-height: var(--leading-relaxed);
        }

        /* Complexity Indicator (Phase 1.5 Diagnostics) */
        .complexity-indicator {
          display: flex;
          align-items: center;
          justify-content: flex-end;
          gap: 1rem;
          padding: 0.5rem 0;
          margin-bottom: 0.5rem;
        }

        /* Troubleshoot Dropdown (Phase 3) */
        .troubleshoot-dropdown {
          position: relative;
        }

        .troubleshoot-toggle {
          padding: 0.375rem 0.75rem;
          font-size: 0.75rem;
          font-weight: 500;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 4px;
          color: #64748b;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .troubleshoot-toggle:hover {
          background: #f1f5f9;
          border-color: #cbd5e1;
          color: #475569;
        }

        .troubleshoot-menu {
          position: absolute;
          top: 100%;
          right: 0;
          margin-top: 0.5rem;
          padding: 1rem;
          background: white;
          border: 1px solid #e2e8f0;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          min-width: 240px;
          z-index: 100;
        }

        .troubleshoot-header {
          font-size: 0.875rem;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 0.5rem;
        }

        .troubleshoot-desc {
          font-size: 0.75rem;
          color: #64748b;
          margin: 0 0 0.75rem 0;
          line-height: 1.4;
        }

        .troubleshoot-buttons {
          display: flex;
          gap: 0.5rem;
        }

        .troubleshoot-buttons button {
          flex: 1;
          padding: 0.5rem 0.75rem;
          font-size: 0.75rem;
          font-weight: 500;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.15s ease;
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          color: #475569;
        }

        .troubleshoot-buttons button:hover:not(:disabled) {
          background: #e2e8f0;
          border-color: #94a3b8;
        }

        .troubleshoot-buttons button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Simplified Badge & Revert Button */
        .simplified-badge {
          display: inline-block;
          padding: 0.125rem 0.5rem;
          font-size: 0.65rem;
          font-weight: 600;
          color: white;
          background: #22c55e;
          border-radius: 3px;
          text-transform: uppercase;
          letter-spacing: 0.03em;
        }

        .revert-btn {
          padding: 0.25rem 0.625rem;
          font-size: 0.75rem;
          font-weight: 500;
          background: #fef3c7;
          border: 1px solid #fcd34d;
          border-radius: 4px;
          color: #92400e;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .revert-btn:hover {
          background: #fde68a;
          border-color: #fbbf24;
        }

        /* Flatten Confirmation Modal */
        .flatten-confirm-modal {
          background: white;
          padding: 1.5rem;
          border-radius: 12px;
          max-width: 360px;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .flatten-confirm-modal h3 {
          margin: 0 0 1rem 0;
          font-size: 1.125rem;
          color: #1e293b;
        }

        .flatten-confirm-modal ul {
          margin: 0 0 1rem 0;
          padding-left: 1.25rem;
          color: #475569;
          font-size: 0.875rem;
        }

        .flatten-confirm-modal li {
          margin-bottom: 0.25rem;
        }

        .flatten-confirm-modal .modal-note {
          margin: 0 0 1rem 0;
          padding: 0.75rem;
          background: #f0fdf4;
          border-radius: 6px;
          font-size: 0.8rem;
          color: #166534;
        }

        .flatten-confirm-modal .modal-actions {
          display: flex;
          gap: 0.75rem;
          justify-content: flex-end;
        }

        .flatten-confirm-modal .modal-actions button {
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          font-weight: 500;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.15s ease;
        }

        .flatten-confirm-modal .modal-actions button:first-child {
          background: #f1f5f9;
          border: 1px solid #cbd5e1;
          color: #475569;
        }

        .flatten-confirm-modal .modal-actions button:first-child:hover {
          background: #e2e8f0;
        }

        .flatten-confirm-modal .modal-actions button.primary {
          background: #ff6b35;
          border: 1px solid #ff6b35;
          color: white;
        }

        .flatten-confirm-modal .modal-actions button.primary:hover {
          background: #e55a2b;
        }

        /* Flatten Progress Overlay */
        .flatten-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }

        .flatten-modal {
          background: white;
          border-radius: 12px;
          padding: 2rem;
          text-align: center;
          max-width: 320px;
          box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .flatten-spinner {
          width: 48px;
          height: 48px;
          border: 4px solid #e2e8f0;
          border-top-color: #3b82f6;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .flatten-title {
          font-size: 1.125rem;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 1rem;
        }

        .flatten-progress-bar {
          height: 8px;
          background: #e2e8f0;
          border-radius: 4px;
          overflow: hidden;
          margin-bottom: 0.5rem;
        }

        .flatten-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, #3b82f6, #60a5fa);
          border-radius: 4px;
          transition: width 0.2s ease;
        }

        .flatten-progress-text {
          font-size: 0.875rem;
          font-weight: 500;
          color: #64748b;
          margin-bottom: 1rem;
        }

        .flatten-warning {
          font-size: 0.75rem;
          color: #94a3b8;
          line-height: 1.4;
        }

        /* Flatten Error */
        .flatten-error {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 0.5rem;
          padding: 0.75rem 1rem;
          background: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: 6px;
          margin-bottom: 0.5rem;
          font-size: 0.875rem;
          color: #dc2626;
        }

        .flatten-error button {
          background: none;
          border: none;
          font-size: 1.25rem;
          color: #dc2626;
          cursor: pointer;
          padding: 0;
          line-height: 1;
          opacity: 0.6;
        }

        .flatten-error button:hover {
          opacity: 1;
        }

        /* Welcome Guidance */
        .welcome-guidance {
          background: linear-gradient(135deg, #fff5f0 0%, #fff9f7 100%);
          border: 2px solid #ff6b35;
          border-radius: var(--radius-lg);
          padding: var(--space-6);
          margin-bottom: var(--space-6);
          text-align: center;
        }

        .welcome-icon {
          font-size: 3rem;
          margin-bottom: var(--space-2);
        }

        .welcome-guidance h3 {
          margin: 0 0 var(--space-3);
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          color: var(--color-primary);
        }

        .welcome-guidance p {
          margin: 0;
          color: var(--color-text-secondary);
          font-size: var(--text-base);
          line-height: var(--leading-relaxed);
          max-width: 600px;
          margin-left: auto;
          margin-right: auto;
        }

        /* Input Mode Tabs - Enhanced cards */
        .input-mode-tabs {
          display: flex;
          gap: var(--space-2);
          margin-bottom: var(--space-3);
          background: var(--color-bg-subtle);
          padding: var(--space-1);
          border-radius: var(--radius-lg);
        }

        .input-mode-tab {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: var(--space-1);
          padding: var(--space-3);
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .input-mode-tab:hover:not(:disabled) {
          border-color: var(--color-primary);
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        .input-mode-tab.active {
          background: linear-gradient(135deg, var(--color-bg-subtle) 0%, var(--color-bg-card) 100%);
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .input-mode-tab:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mode-icon {
          width: 28px;
          height: 28px;
          color: var(--color-text-secondary);
          transition: all var(--transition-base);
        }

        .input-mode-tab:hover:not(:disabled) .mode-icon {
          color: var(--color-primary);
          transform: scale(1.1);
        }

        .input-mode-tab.active .mode-icon {
          color: var(--color-primary);
        }

        .input-mode-tab .mode-title {
          font-family: var(--font-heading);
          font-size: var(--text-sm);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
          margin-top: 0;
        }

        .input-mode-tab .mode-description {
          display: none; /* Hidden to save space */
        }

        .input-mode-tab.active .mode-title {
          color: var(--color-primary);
          font-weight: var(--font-bold);
        }

        /* Helper text */
        .helper-text {
          margin-top: var(--space-1);
          font-size: var(--text-sm);
          color: var(--color-text-tertiary);
          font-style: normal;
          line-height: var(--leading-snug);
        }

        /* Drag & Drop File Upload */
        .file-input-hidden {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
        }

        .drop-zone {
          position: relative;
          width: 100%;
          min-height: 120px;
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-subtle);
          transition: all var(--transition-base);
        }

        .drop-zone.dragging {
          border-color: var(--color-primary);
          background: var(--color-primary-light);
          background: linear-gradient(135deg, rgba(30, 74, 122, 0.05) 0%, rgba(30, 74, 122, 0.1) 100%);
          box-shadow: var(--shadow-glow);
        }

        .drop-zone.has-file {
          border-color: var(--color-success);
          background: var(--color-success-light);
        }

        .drop-zone-content {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: var(--space-1);
          padding: var(--space-4);
          cursor: pointer;
          min-height: 120px;
        }

        .upload-icon {
          width: 36px;
          height: 36px;
          color: var(--color-text-secondary);
          transition: all var(--transition-base);
        }

        .upload-icon.success {
          color: var(--color-success);
        }

        .drop-zone:hover .upload-icon {
          color: var(--color-primary);
          transform: scale(1.1);
        }

        .drop-zone.has-file:hover .upload-icon.success {
          color: var(--color-success);
        }

        .drop-text {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
        }

        .file-name {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-success);
          max-width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .drop-hint {
          font-size: var(--text-sm);
          color: var(--color-text-tertiary);
        }

        .file-type-badge {
          display: inline-block;
          font-size: var(--text-xs);
          color: var(--color-text-secondary);
          background: var(--color-bg-tertiary);
          padding: var(--space-1) var(--space-2);
          border-radius: var(--radius-sm);
          margin-top: var(--space-1);
        }

        .supported-formats {
          display: block;
          font-size: var(--text-xs);
          color: var(--color-text-tertiary);
          margin-top: var(--space-2);
          font-weight: var(--font-medium);
        }

        .drop-zone.dragging .drop-text,
        .drop-zone.dragging .drop-hint {
          color: var(--color-primary);
        }

        .upload-progress {
          padding: var(--space-2);
          background: var(--color-info-light);
          border: 1px solid var(--color-info);
          border-radius: var(--radius-md);
          color: var(--color-info);
          margin-bottom: var(--space-2);
          text-align: center;
          font-size: var(--text-sm);
        }

        .form-section {
          background: var(--color-bg-card);
          padding: var(--space-3);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-3);
          border: 1px solid var(--color-border);
          box-shadow: var(--shadow-xs);
        }

        .form-group {
          margin-bottom: var(--space-3);
        }

        .form-group label {
          display: block;
          margin-bottom: var(--space-2);
          font-weight: var(--font-semibold);
          color: var(--color-text-primary);
          font-size: var(--text-sm);
        }

        .prompt-input {
          width: 100%;
          padding: var(--space-3);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          font-family: inherit;
          font-size: var(--text-base);
          background: var(--color-bg-card);
          color: var(--color-text-primary);
          transition: border-color var(--transition-base);
        }

        .prompt-input:focus {
          outline: none;
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: var(--space-3);
        }

        input[type="number"] {
          width: 100%;
          padding: var(--space-2);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          background: var(--color-bg-card);
          color: var(--color-text-primary);
          font-size: var(--text-base);
          transition: border-color var(--transition-base);
        }

        input[type="number"]:focus {
          outline: none;
          border-color: var(--color-primary);
          box-shadow: var(--shadow-glow);
        }

        .error-message {
          padding: var(--space-3);
          background: var(--color-error-light);
          border: 1px solid var(--color-error);
          border-radius: var(--radius-md);
          color: var(--color-error);
          margin-bottom: var(--space-4);
          font-size: var(--text-sm);
        }

        .generate-button {
          width: 100%;
          padding: var(--space-4);
          background: var(--color-accent);
          color: white;
          border: none;
          border-radius: var(--radius-md);
          font-size: var(--text-lg);
          font-weight: var(--font-semibold);
          cursor: pointer;
          transition: all var(--transition-base);
          box-shadow: var(--shadow-sm);
        }

        .generate-button:hover:not(:disabled) {
          background: var(--color-accent-hover);
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
        }

        .generate-button:disabled {
          background: var(--color-bg-subtle);
          color: var(--color-text-tertiary);
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
        }

        .progress-section {
          padding: var(--space-4);
          background: var(--color-info-light);
          border-radius: var(--radius-lg);
          margin-bottom: var(--space-4);
          border: 1px solid var(--color-info);
        }

        .progress-bar {
          height: 4px;
          background: var(--color-border);
          border-radius: var(--radius-full);
          overflow: hidden;
          margin-bottom: var(--space-3);
        }

        .progress-bar-fill {
          height: 100%;
          background: var(--color-accent);
          animation: progress 2s ease-in-out infinite;
        }

        @keyframes progress {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }

        .progress-message {
          text-align: center;
          color: var(--color-text-secondary);
          font-weight: var(--font-medium);
          font-size: var(--text-base);
        }

        .results-section {
          background: var(--color-bg-card);
          padding: var(--space-4);
          border-radius: var(--radius-lg);
          border: 1px solid var(--color-border);
          box-shadow: var(--shadow-sm);
        }

        .results-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: var(--space-3);
        }

        .results-header h3 {
          font-family: var(--font-heading);
          margin: 0;
          color: var(--color-primary);
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
        }

        /* Aspect Ratio Info */
        .ar-info {
          padding: var(--space-3) var(--space-4);
          border-radius: var(--radius-md);
          margin-bottom: var(--space-3);
          font-size: var(--text-sm);
        }

        .ar-info.full {
          background: var(--color-success-light);
          border: 1px solid var(--color-success);
        }

        .ar-info.framing {
          background: var(--color-warning-light);
          border: 1px solid var(--color-warning);
        }

        .ar-info.tiling {
          background: var(--color-info-light);
          border: 1px solid var(--color-info);
        }

        .ar-info-header {
          color: var(--color-text-primary);
          margin-bottom: var(--space-2);
          font-weight: var(--font-semibold);
        }

        .ar-info-details {
          display: flex;
          flex-wrap: wrap;
          gap: var(--space-2);
          align-items: center;
          color: var(--color-text-secondary);
          font-size: var(--text-sm);
        }

        .ar-info-details span {
          white-space: nowrap;
        }

        .layout-note {
          color: var(--color-accent);
          font-weight: var(--font-medium);
        }

        /* Mode Toggle Tabs */
        .mode-tabs {
          display: flex;
          gap: var(--space-2);
          margin-bottom: var(--space-3);
          background: var(--color-bg-subtle);
          padding: var(--space-1);
          border-radius: var(--radius-lg);
        }

        .mode-tab {
          flex: 1;
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;
          gap: var(--space-2);
          padding: var(--space-2);
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .mode-tab:hover:not(:disabled) {
          border-color: var(--color-accent);
          transform: translateY(-2px);
          box-shadow: var(--shadow-md);
        }

        .mode-tab.active {
          background: var(--color-accent);
          border-color: var(--color-accent);
          box-shadow: var(--shadow-glow-accent);
        }

        .mode-tab:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .mode-title {
          font-family: var(--font-heading);
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          color: var(--color-primary);
        }

        .mode-description {
          display: none; /* Hidden to save space */
        }

        .mode-tab.active .mode-title {
          color: white;
          font-weight: var(--font-bold);
        }

        .svg-preview {
          margin: var(--space-2) 0;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          background: var(--color-bg-subtle);
          padding: var(--space-2);
        }

        .design-preview {
          width: 100%;
          height: auto;
          display: block;
        }

        /* Finalize Section */
        .finalize-section {
          background: var(--color-accent-light);
          border: 2px solid var(--color-accent);
          border-radius: var(--radius-lg);
          padding: var(--space-3);
          margin-top: var(--space-3);
          text-align: center;
        }

        .finalize-button {
          width: 100%;
          max-width: 400px;
          padding: var(--space-3);
          background: var(--color-accent);
          color: white;
          border: none;
          border-radius: var(--radius-md);
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          cursor: pointer;
          transition: all var(--transition-base);
          box-shadow: var(--shadow-sm);
        }

        .finalize-button:hover {
          background: var(--color-accent-hover);
          transform: translateY(-1px);
          box-shadow: var(--shadow-md);
        }

        .finalize-hint {
          margin: var(--space-2) 0 0 0;
          color: var(--color-text-secondary);
          font-size: var(--text-xs);
        }

        /* Mixer Widget Container Styles */
        .mixer-widget-container {
          margin-top: var(--space-3);
          background: white;
          border-radius: 12px;
          padding: var(--space-3);
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .mixer-widget-header {
          display: flex;
          justify-content: flex-end;
          margin-bottom: var(--space-2);
          padding-bottom: var(--space-2);
          border-bottom: 2px solid var(--color-border);
        }

        .mixer-close-btn {
          padding: var(--space-2) var(--space-4);
          background: var(--color-primary);
          color: white;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          font-size: var(--text-sm);
          cursor: pointer;
          transition: all 0.2s;
        }

        .mixer-close-btn:hover {
          background: #2563eb;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
          transform: translateY(-1px);
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
          .inspire-panel-recraft {
            padding: var(--space-2);
          }

          .panel-header {
            margin-bottom: var(--space-4);
          }

          .panel-header h2 {
            font-size: var(--text-xl);
          }

          .subtitle {
            font-size: var(--text-sm);
          }

          .welcome-guidance {
            padding: var(--space-4);
            margin-bottom: var(--space-4);
          }

          .welcome-icon {
            font-size: 2rem;
          }

          .welcome-guidance h3 {
            font-size: var(--text-lg);
          }

          .welcome-guidance p {
            font-size: var(--text-sm);
          }

          /* Stack input mode tabs vertically on mobile */
          .input-mode-tabs {
            flex-direction: column;
            gap: var(--space-1);
          }

          .input-mode-tab {
            flex-direction: row;
            justify-content: flex-start;
            padding: var(--space-3);
            min-height: 44px;
          }

          .mode-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
          }

          .input-mode-tab .mode-title {
            font-size: var(--text-sm);
            margin-top: 0;
          }

          .input-mode-tab .mode-description {
            display: none;
          }

          /* Form sections */
          .form-section {
            padding: var(--space-3);
          }

          .form-group label {
            font-size: var(--text-xs);
          }

          /* Stack form rows on mobile */
          .form-row {
            grid-template-columns: 1fr;
            gap: var(--space-2);
          }

          /* Drop zone adjustments */
          .drop-zone {
            min-height: 140px;
          }

          .drop-zone-content {
            padding: var(--space-4);
            min-height: 140px;
          }

          .upload-icon {
            width: 36px;
            height: 36px;
          }

          .drop-text {
            font-size: var(--text-sm);
          }

          /* Generate button */
          .generate-button {
            padding: var(--space-3);
            font-size: var(--text-base);
            min-height: 44px;
          }

          /* Results section - minimal padding for max image width */
          .results-section {
            padding: var(--space-2);
            border-radius: var(--radius-md);
          }

          .results-header h3 {
            font-size: var(--text-lg);
          }

          /* Mode tabs */
          .mode-tabs {
            flex-direction: column;
            gap: var(--space-1);
          }

          .mode-tab {
            flex-direction: row;
            justify-content: flex-start;
            padding: var(--space-3);
            min-height: 44px;
          }

          .mode-title {
            font-size: var(--text-sm);
          }

          .mode-description {
            display: none;
          }

          /* AR info */
          .ar-info {
            padding: var(--space-2) var(--space-3);
          }

          .ar-info-details {
            flex-direction: column;
            align-items: flex-start;
            gap: var(--space-1);
          }

          /* Finalize section */
          .finalize-section {
            padding: var(--space-3);
          }

          .finalize-button {
            padding: var(--space-3);
            font-size: var(--text-base);
          }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
          .inspire-panel-recraft {
            padding: var(--space-1);
          }

          .panel-header h2 {
            font-size: var(--text-lg);
          }

          /* Results section - even less padding */
          .results-section {
            padding: var(--space-1);
            margin: 0 calc(-1 * var(--space-1));
            border-radius: 0;
          }

          .input-mode-tab {
            padding: var(--space-2);
          }

          .mode-tab {
            padding: var(--space-2);
          }
        }
      `})]})}function v5e({isOpen:e,onClose:t}){const[n,r]=fe.useState(!1),[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),{addMotif:u}=tn(),d=rg(),{currentDesignId:h,blendSvgUrl:p,solidSvgUrl:m,designName:g}=d,v=p||m,w=!!h;fe.useEffect(()=>{if(!e)return;const j=O=>{O.key==="Escape"&&t()};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[e,t]),fe.useEffect(()=>{e||(o(!1),r(!1),s(!1))},[e]);const S=fe.useCallback((j,O)=>{console.log("[EDITOR] Design saved:",j,O),o(!1)},[]),x=async()=>{if(!(!h||i)){s(!0);try{const j=_x(d);await eg({id:h,name:g||"Untitled Design",description:"",tags:[],design_data:j,input_mode:d.inputMode}),console.log("[EDITOR] Saved changes to design:",h),o(!0),setTimeout(()=>{t()},600)}catch(j){console.error("[EDITOR] Failed to save changes:",j),Xr("Failed to save changes. Please try again.")}finally{s(!1)}}},k=async()=>{var j,O;if(!(!v||n)){r(!0);try{const{blendSvgUrl:I,solidSvgUrl:E,widthMM:U,lengthMM:D}=d;let R=null,W=null;if(E)try{R=await(await fetch(E)).text(),console.log("[EDITOR] Fetched solid SVG from blob:",R.length,"chars")}catch(Re){console.error("[EDITOR] Failed to fetch solid SVG:",Re)}if(I)try{W=await(await fetch(I)).text(),console.log("[EDITOR] Fetched blend SVG from blob:",W.length,"chars")}catch(Re){console.error("[EDITOR] Failed to fetch blend SVG:",Re)}if(!R&&!W)throw new Error("No SVG content available. Please ensure a design has been generated.");const te=gw(R||W);let me=U||5e3,H=D||5e3;if(te){const Re=te.width/te.height;Re>1?(me=Math.max(U||5e3,5e3),H=me/Re):(H=Math.max(D||5e3,5e3),me=H*Re),console.log("[EDITOR] Using SVG aspect ratio:",Re,"",me,"x",H,"mm")}s(!0);let ge=h;const Ee=g||`Design ${new Date().toLocaleString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}`,ke=_x(d);ge=(await eg({id:ge||void 0,name:Ee,description:"",tags:[],design_data:ke,input_mode:d.inputMode})).design_id,d.setCurrentDesignId(ge),d.setDesignName(Ee),s(!1);const xe=((j=d.result)==null?void 0:j.thumb_url)||((O=d.result)==null?void 0:O.png_url)||null;u(ge,Ee,R||W,me,H,xe,{solidSvgContent:R,blendSvgContent:W,hasBothVersions:!!(R&&W)}),o(!0),setTimeout(()=>{t()},600)}catch(I){console.error("[EDITOR] Failed to add to canvas:",I),Xr("Failed to add design to canvas. Please try again."),s(!1)}finally{r(!1)}}};return e?l.jsx("div",{className:"design-editor-overlay",children:l.jsxs("div",{className:"design-editor-modal",children:[l.jsxs("div",{className:"design-editor__header",children:[l.jsx("div",{className:"design-editor__title",children:l.jsx("h2",{children:"Design Editor"})}),l.jsx("div",{className:"design-editor__hint",children:"Generate a design with AI or upload your own SVG"}),l.jsx("button",{className:"design-editor__close",onClick:t,title:"Close (Esc)",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsx("div",{className:"design-editor__content",children:l.jsx(b5e,{onDesignSaved:S,isEmbedded:!0})}),l.jsx("div",{className:`design-editor__footer ${a?"design-editor__footer--success":""}`,children:a?l.jsxs("div",{className:"design-editor__success",children:[l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M20 6L9 17l-5-5"})}),l.jsx("span",{children:"Added to canvas!"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"design-editor__status",children:v?w?l.jsxs("span",{className:"design-editor__saved-indicator",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M20 6L9 17l-5-5"})}),"Saved to library"]}):l.jsx("span",{className:"design-editor__unsaved-indicator",children:"Design ready  Will auto-save when added"}):l.jsx("span",{className:"design-editor__no-design",children:"Generate or upload a design to continue"})}),l.jsxs("div",{className:"design-editor__actions",children:[l.jsx("button",{className:"design-editor__btn design-editor__btn--secondary",onClick:t,children:"Cancel"}),w&&l.jsx("button",{className:"design-editor__btn design-editor__btn--secondary",onClick:x,disabled:!v||i,title:"Save changes to the source design without adding a new motif",children:i&&!n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"design-editor__spinner"}),"Saving..."]}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save Changes"]})}),l.jsx("button",{className:"design-editor__btn design-editor__btn--primary",onClick:k,disabled:!v||n,children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"design-editor__spinner"}),i?"Saving...":"Adding..."]}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),l.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add to Canvas"]})})]})]})})]})}):null}function x5e(){const{addShape:e,addText:t,addExclusionZone:n,standaloneMode:r,startPathDrawing:i}=tn(),[s,a]=fe.useState(!1);if(r)return null;const o=[{preset:"rectangle",icon:"",label:"Shape"},{preset:"blob",icon:"",label:"Blob"},{preset:"path",icon:"",label:"Pen"}],u=p=>{p==="path"?(i(),a(!1)):e(p)},d=()=>{t(),a(!1)},h=()=>{n("rectangle")};return l.jsxs("div",{className:`shape-toolbar ${s?"shape-toolbar--expanded":""}`,children:[l.jsxs("button",{className:"shape-toolbar__toggle",onClick:()=>a(!s),title:s?"Collapse elements panel":"Add elements",children:[l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),l.jsx("polyline",{points:"2 17 12 22 22 17"}),l.jsx("polyline",{points:"2 12 12 17 22 12"})]}),!s&&l.jsx("span",{className:"shape-toolbar__label",children:"Elements"})]}),s&&l.jsxs("div",{className:"shape-toolbar__shapes",children:[l.jsxs("button",{className:"shape-toolbar__btn shape-toolbar__btn--text",onClick:d,title:"Add Text Label",children:[l.jsx("span",{className:"shape-toolbar__icon",children:"T"}),l.jsx("span",{className:"shape-toolbar__name",children:"Text"})]}),l.jsx("div",{className:"shape-toolbar__divider"}),o.map(p=>l.jsxs("button",{className:"shape-toolbar__btn",onClick:()=>u(p.preset),title:`Add ${p.label}`,children:[l.jsx("span",{className:"shape-toolbar__icon",children:p.icon}),l.jsx("span",{className:"shape-toolbar__name",children:p.label})]},p.preset)),l.jsx("div",{className:"shape-toolbar__divider"}),l.jsxs("button",{className:"shape-toolbar__btn shape-toolbar__btn--exclusion",onClick:h,title:"Add Exclusion Zone (building, planter, obstacle)",children:[l.jsx("span",{className:"shape-toolbar__icon",style:{fontSize:"1rem"},children:""}),l.jsx("span",{className:"shape-toolbar__name",children:"Exclusion"})]})]})]})}function w5e({loadedDesign:e}){var se,ue,ie,be,Se,Ae,De,we,Ie,Fe,Ye,Ze,Qe,pt,gt,At,kt,at,lt,Tt,Ot;const[t,n]=fe.useState(!1),[r,i]=fe.useState(()=>{const Be=tn.getState().surface;return Be!=null&&Be.width_mm?String(Be.width_mm/1e3):"50"}),[s,a]=fe.useState(()=>{const Be=tn.getState().surface;return Be!=null&&Be.length_mm?String(Be.length_mm/1e3):"50"}),[o,u]=fe.useState(!1),[d,h]=fe.useState(!1),[p,m]=fe.useState(!1),[g,v]=fe.useState(!1),[w,S]=fe.useState(!1),[x,k]=fe.useState(null),[j,O]=fe.useState(!1),[I,E]=fe.useState(null),[U,D]=fe.useState(""),[R,W]=fe.useState(!1),[ce,te]=fe.useState(!1),me=fe.useRef(null);fe.useEffect(()=>{if(e){const Be=e.design_data||{},dt=e.input_mode||Be.input_mode||Be.blend_recipes||Be.solid_recipes,vt=Be.courts||Be.surface||Be.tracks;if(console.log("[TPV] Design detection:",{id:e.id,name:e.name,hasDesignData:!!e.design_data,topLevelInputMode:e.input_mode,isPlaygroundDesign:dt,isSportsDesign:vt}),dt&&!vt){console.log("[TPV] Loading playground design into editor:",e.id,e.name);const Lt=kx(e),It=rg.getState();It.loadDesign(Lt),e.name&&It.setDesignName(e.name),It.setCurrentDesignId(e.id),v(!0)}else e.design_data?(console.log("[SPORTS] Loading design from prop:",e.id,e.name),tn.getState().loadDesign(Be),E(e.id),D(e.name||""),n(!1)):console.warn("[TPV] Design has no design_data and is not a playground design:",e.id,e.name)}},[e]);const{surface:H,courts:ge,tracks:Ee,selectedCourtId:ke,selectedTrackId:ze,selectedMotifId:xe,selectedShapeId:Re,selectedTextId:_e,selectedGroupId:Pe,selectedElementIds:it,showCourtLibrary:tt,showPropertiesPanel:Ue,toggleCourtLibrary:ut,togglePropertiesPanel:de,setSurfaceDimensions:oe,setSurfaceColor:We,setSurfaceBoundaryPreset:Ne,resetSurfaceBoundary:ft,updateBoundaryParams:Pt,resetDesign:Ct,hasUnsavedChanges:q,standaloneMode:qe,toggleStandaloneMode:ae,groupSelected:M,ungroup:L,alignElements:ee,distributeElements:pe,addShape:ve,addText:ye,addExclusionZone:Me,startPathDrawing:Xe,pathDrawingMode:$e,mobileLibraryOpen:c,mobilePropertiesOpen:f,mobileColoursOpen:b,mobileActiveTab:_,setMobileLibraryOpen:C,setMobilePropertiesOpen:A,setMobileColoursOpen:T,setMobileActiveTab:N,closeMobileSheets:$,isDirty:F,clearAutosaveTimer:Y,isBorrowed:Q,borrowedFromUser:K,isForking:V,forkedDesignId:X}=tn(),B=Be=>{Be.preventDefault();const dt=parseFloat(r)*1e3,vt=parseFloat(s)*1e3;dt>0&&vt>0&&(oe(dt,vt),n(!1))},Z=Be=>{We({tpv_code:Be.code,hex:Be.hex,name:Be.name}),u(!1)},G=()=>{q()&&!window.confirm(`Start a new design?

You have unsaved changes that will be lost.`)||(Ct(),E(null),D(""),i("50"),a("50"))},re=()=>{const Be=me.current||document.querySelector(".court-canvas__svg");if(!Be){Xr("Canvas not ready. Please wait a moment.");return}const dt=tn.getState().exportDesignData(),vt=bw(Be,dt),Lt=new Blob([vt],{type:"image/svg+xml"}),It=URL.createObjectURL(Lt);x&&URL.revokeObjectURL(x),k(It),S(!0)},z=()=>{S(!1),x&&(URL.revokeObjectURL(x),k(null))},ne=async Be=>{if(!Be){Xr("Source design ID not found");return}try{const dt=await Ef(Be),vt=(dt==null?void 0:dt.design)||dt;if(!vt)throw new Error("Design not found");const Lt=kx(vt),It=rg.getState();It.loadDesign(Lt),vt.name&&It.setDesignName(vt.name),It.setCurrentDesignId(Be),v(!0),console.log("[TPV] Loaded source design for editing:",vt.name)}catch(dt){console.error("[TPV] Failed to load source design:",dt),Xr("Failed to load design. Please try again.")}};return fe.useEffect(()=>{if(!R)return;const Be=()=>{W(!1),te(!1)};return document.addEventListener("click",Be),()=>document.removeEventListener("click",Be)},[R]),fe.useEffect(()=>{if(!ce)return;const Be=()=>te(!1);return document.addEventListener("click",Be),()=>document.removeEventListener("click",Be)},[ce]),fe.useEffect(()=>{const Be=dt=>{if(F)return dt.preventDefault(),dt.returnValue="You have unsaved changes.",dt.returnValue};return window.addEventListener("beforeunload",Be),()=>window.removeEventListener("beforeunload",Be)},[F]),fe.useEffect(()=>()=>Y(),[Y]),fe.useEffect(()=>{const Be=dt=>{const vt=dt.target.tagName.toLowerCase();if(vt==="input"||vt==="textarea"||vt==="select")return;const{removeCourt:Lt,removeTrack:It,removeMotif:$t,removeShape:nn,removeText:rn,deselectCourt:vn,deselectTrack:Cn,deselectMotif:wt,deselectShape:En,deselectText:Nn,stopEditingText:xn,undo:xr,redo:Tr,canUndo:or,canRedo:lr,duplicateCourt:ur,duplicateMotif:Nr,duplicateShape:Vr,duplicateText:In,updateCourtPosition:Kn,updateTrackPosition:gi,updateMotifPosition:_i,updateShapePosition:Gr,updateTextPosition:yi,courts:Ni,tracks:ri,motifs:ii,shapes:qr,texts:si,selectedMotifId:tr,selectedShapeId:zn,selectedTextId:Gt,editingTextId:dr,elementOrder:kn,setElementOrder:nr,toggleSnapToGrid:Or,snapToGrid:ts,addToHistory:Br}=tn.getState(),bi=ke||ze||tr||zn||Gt;if((dt.key==="Delete"||dt.key==="Backspace")&&bi&&!dr&&(dt.preventDefault(),ke?Lt(ke):ze?It(ze):tr?$t(tr):zn?nn(zn):Gt&&rn(Gt)),dt.key==="Escape"&&(dr?xn():bi&&(ke?vn():ze?Cn():tr?wt():zn?En():Gt&&Nn())),(dt.ctrlKey||dt.metaKey)&&dt.key==="z"&&!dt.shiftKey&&(dt.preventDefault(),or()&&xr()),(dt.ctrlKey||dt.metaKey)&&dt.key==="z"&&dt.shiftKey&&(dt.preventDefault(),lr()&&Tr()),(dt.ctrlKey||dt.metaKey)&&dt.key==="d"&&bi&&(dt.preventDefault(),ke?ur(ke):tr?Nr(tr):zn?Vr(zn):Gt&&In(Gt)),bi&&!dr&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(dt.key)){dt.preventDefault();const y=dt.shiftKey?10:100;let P=0,J=0;if(dt.key==="ArrowLeft"&&(P=-y),dt.key==="ArrowRight"&&(P=y),dt.key==="ArrowUp"&&(J=-y),dt.key==="ArrowDown"&&(J=y),ke){const le=Ni[ke];le&&(Kn(ke,{x:le.position.x+P,y:le.position.y+J}),Br())}else if(ze){const le=ri[ze];le&&(gi(ze,{x:le.position.x+P,y:le.position.y+J}),Br())}else if(tr){const le=ii[tr];le&&(_i(tr,{x:le.position.x+P,y:le.position.y+J}),Br())}else if(zn){const le=qr[zn];le&&(Gr(zn,{x:le.position.x+P,y:le.position.y+J}),Br())}else if(Gt){const le=si[Gt];le&&(yi(Gt,{x:le.position.x+P,y:le.position.y+J}),Br())}}if(bi&&(dt.key==="["||dt.key==="]")){dt.preventDefault();const y=kn.indexOf(bi);if(y===-1)return;const P=[...kn];dt.key==="["&&y>0?([P[y],P[y-1]]=[P[y-1],P[y]],nr(P),Br()):dt.key==="]"&&y<kn.length-1&&([P[y],P[y+1]]=[P[y+1],P[y]],nr(P),Br())}(dt.key==="g"||dt.key==="G")&&(dt.preventDefault(),Or()),(dt.key==="?"||dt.shiftKey&&dt.key==="/")&&(dt.preventDefault(),m(!0))};return window.addEventListener("keydown",Be),()=>window.removeEventListener("keydown",Be)},[ke,ze,xe,Re,_e]),l.jsxs("div",{className:"sports-designer",children:[(Q||X)&&l.jsx("div",{className:`borrowed-banner ${X?"forked":""}`,children:V?l.jsx("span",{children:"Creating your copy..."}):X?l.jsx("span",{children:"Now editing your copy - original design unchanged"}):l.jsxs("span",{children:["Viewing ",K,"'s design - changes will create your own copy"]})}),t&&l.jsx("div",{className:"sports-designer__modal-overlay",onClick:()=>n(!1),children:l.jsxs("div",{className:"sports-designer__modal",onClick:Be=>Be.stopPropagation(),children:[l.jsx("h2",{children:"Edit Surface Size"}),l.jsx("p",{children:"Adjust the dimensions of your sports surface"}),l.jsxs("form",{onSubmit:B,children:[l.jsxs("div",{className:"sports-designer__dimension-inputs",children:[l.jsxs("div",{className:"sports-designer__input-group",children:[l.jsx("label",{htmlFor:"width",children:"Width (metres)"}),l.jsx("input",{id:"width",type:"number",min:"5",max:"100",step:"0.5",value:r,onChange:Be=>i(Be.target.value),required:!0,autoFocus:!0})]}),l.jsx("span",{className:"sports-designer__dimension-separator",children:""}),l.jsxs("div",{className:"sports-designer__input-group",children:[l.jsx("label",{htmlFor:"length",children:"Length (metres)"}),l.jsx("input",{id:"length",type:"number",min:"5",max:"100",step:"0.5",value:s,onChange:Be=>a(Be.target.value),required:!0})]})]}),l.jsx("p",{className:"sports-designer__dimension-hint",children:"Common sizes: 37m  34m (tennis), 40m  20m (futsal), 50m  50m (multi-sport)"}),l.jsxs("div",{className:"sports-designer__boundary-section",children:[l.jsx("label",{htmlFor:"boundary-shape",children:"Surface Shape"}),l.jsxs("div",{className:"sports-designer__boundary-options",children:[l.jsxs("select",{id:"boundary-shape",value:((se=H.boundary)==null?void 0:se.type)||"rectangle",onChange:Be=>{const dt=Be.target.value;dt==="rectangle"?ft():Ne(dt)},className:"sports-designer__select",children:[l.jsx("option",{value:"rectangle",children:"Rectangle (default)"}),l.jsx("option",{value:"l-shape",children:"L-Shape"}),l.jsx("option",{value:"u-shape",children:"U-Shape"}),l.jsx("option",{value:"t-shape",children:"T-Shape"})]}),((ue=H.boundary)==null?void 0:ue.type)&&H.boundary.type!=="rectangle"&&l.jsx("button",{type:"button",className:"sports-designer__btn-secondary",onClick:ft,title:"Reset to rectangle",children:"Reset"})]}),((ie=H.boundary)==null?void 0:ie.type)==="l-shape"&&l.jsxs("div",{className:"sports-designer__boundary-params",children:[l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Cut Width: ",Math.round((((be=H.boundary.params)==null?void 0:be.cutWidth)||.6)*100),"%"]}),l.jsx("input",{type:"range",min:"20",max:"80",value:(((Se=H.boundary.params)==null?void 0:Se.cutWidth)||.6)*100,onChange:Be=>Pt({cutWidth:parseInt(Be.target.value)/100})})]}),l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Cut Height: ",Math.round((((Ae=H.boundary.params)==null?void 0:Ae.cutHeight)||.4)*100),"%"]}),l.jsx("input",{type:"range",min:"20",max:"80",value:(((De=H.boundary.params)==null?void 0:De.cutHeight)||.4)*100,onChange:Be=>Pt({cutHeight:parseInt(Be.target.value)/100})})]})]}),((we=H.boundary)==null?void 0:we.type)==="u-shape"&&l.jsxs("div",{className:"sports-designer__boundary-params",children:[l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Cut Start: ",Math.round((((Ie=H.boundary.params)==null?void 0:Ie.cutStart)||.35)*100),"%"]}),l.jsx("input",{type:"range",min:"10",max:"45",value:(((Fe=H.boundary.params)==null?void 0:Fe.cutStart)||.35)*100,onChange:Be=>Pt({cutStart:parseInt(Be.target.value)/100})})]}),l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Cut End: ",Math.round((((Ye=H.boundary.params)==null?void 0:Ye.cutEnd)||.65)*100),"%"]}),l.jsx("input",{type:"range",min:"55",max:"90",value:(((Ze=H.boundary.params)==null?void 0:Ze.cutEnd)||.65)*100,onChange:Be=>Pt({cutEnd:parseInt(Be.target.value)/100})})]}),l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Cut Height: ",Math.round((((Qe=H.boundary.params)==null?void 0:Qe.cutHeight)||.4)*100),"%"]}),l.jsx("input",{type:"range",min:"20",max:"80",value:(((pt=H.boundary.params)==null?void 0:pt.cutHeight)||.4)*100,onChange:Be=>Pt({cutHeight:parseInt(Be.target.value)/100})})]})]}),((gt=H.boundary)==null?void 0:gt.type)==="t-shape"&&l.jsxs("div",{className:"sports-designer__boundary-params",children:[l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Stem Start: ",Math.round((((At=H.boundary.params)==null?void 0:At.stemStart)||.3)*100),"%"]}),l.jsx("input",{type:"range",min:"10",max:"45",value:(((kt=H.boundary.params)==null?void 0:kt.stemStart)||.3)*100,onChange:Be=>Pt({stemStart:parseInt(Be.target.value)/100})})]}),l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Stem End: ",Math.round((((at=H.boundary.params)==null?void 0:at.stemEnd)||.7)*100),"%"]}),l.jsx("input",{type:"range",min:"55",max:"90",value:(((lt=H.boundary.params)==null?void 0:lt.stemEnd)||.7)*100,onChange:Be=>Pt({stemEnd:parseInt(Be.target.value)/100})})]}),l.jsxs("div",{className:"sports-designer__param-row",children:[l.jsxs("label",{children:["Bar Height: ",Math.round((((Tt=H.boundary.params)==null?void 0:Tt.stemHeight)||.4)*100),"%"]}),l.jsx("input",{type:"range",min:"20",max:"80",value:(((Ot=H.boundary.params)==null?void 0:Ot.stemHeight)||.4)*100,onChange:Be=>Pt({stemHeight:parseInt(Be.target.value)/100})})]})]}),l.jsx("p",{className:"sports-designer__boundary-hint",children:"Non-rectangular shapes are useful for L-shaped buildings or irregular sites"})]}),l.jsx("button",{type:"submit",className:"sports-designer__btn-primary",children:"Update Surface"})]})]})}),l.jsxs(l.Fragment,{children:[l.jsxs("header",{className:"sports-designer__mobile-header",children:[l.jsx("span",{className:"sports-designer__mobile-header-title",children:"TPV Designer"}),l.jsxs("div",{className:"sports-designer__mobile-header-actions",children:[l.jsx("button",{className:"sports-designer__mobile-header-btn",onClick:()=>{i(String(H.width_mm/1e3)),a(String(H.length_mm/1e3)),n(!0)},title:"Surface settings",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})}),l.jsx(RS,{svgRef:me,mobileMode:!0})]})]}),l.jsxs("nav",{className:"sports-designer__mobile-action-bar",children:[l.jsxs("button",{className:`sports-designer__mobile-action-btn ${c?"sports-designer__mobile-action-btn--active":""}`,onClick:()=>{$(),C(!0)},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),l.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),l.jsx("span",{children:"Add"})]}),l.jsxs("button",{className:"sports-designer__mobile-action-btn",onClick:()=>{$(),T(!0)},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),l.jsx("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),l.jsx("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),l.jsx("circle",{cx:"6.5",cy:"12.5",r:"2.5"})]}),l.jsx("span",{children:"Colours"})]}),l.jsxs("button",{className:`sports-designer__mobile-action-btn ${ke||ze||xe||Re||_e?"":"sports-designer__mobile-action-btn--disabled"}`,onClick:()=>{(ke||ze||xe||Re||_e)&&($(),A(!0))},disabled:!ke&&!ze&&!xe&&!Re&&!_e,children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),l.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),l.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),l.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),l.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),l.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),l.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),l.jsx("span",{children:"Properties"})]}),l.jsxs("button",{className:"sports-designer__mobile-action-btn",onClick:()=>h(!0),children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),l.jsx("span",{children:"Save"})]})]}),l.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${c?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>C(!1)}),l.jsxs("div",{className:`sports-designer__bottom-sheet ${c?"sports-designer__bottom-sheet--open":""}`,children:[l.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),l.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[l.jsx("h3",{children:"Add Element"}),l.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>C(!1),children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsxs("div",{className:"sports-designer__mobile-tabs",children:[l.jsx("button",{className:`sports-designer__mobile-tab ${_==="courts"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("courts"),children:"Courts"}),l.jsx("button",{className:`sports-designer__mobile-tab ${_==="tracks"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("tracks"),children:"Tracks"}),l.jsx("button",{className:`sports-designer__mobile-tab ${_==="shapes"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("shapes"),children:"Shapes"}),l.jsx("button",{className:`sports-designer__mobile-tab ${_==="designs"?"sports-designer__mobile-tab--active":""}`,onClick:()=>N("designs"),children:"Designs"})]}),l.jsx("div",{className:"sports-designer__bottom-sheet-content",children:l.jsx(cN,{mobileMode:!0,activeTab:_,onItemAdded:()=>C(!1),onOpenGenerator:()=>{C(!1),v(!0)}})})]}),l.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${b?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>T(!1)}),l.jsxs("div",{className:`sports-designer__bottom-sheet ${b?"sports-designer__bottom-sheet--open":""}`,children:[l.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),l.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[l.jsx("h3",{children:"Surface Colour"}),l.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>T(!1),children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsx("div",{className:"sports-designer__bottom-sheet-content",children:l.jsx("div",{className:"sports-designer__color-grid",children:fi.map(Be=>l.jsx("button",{className:`sports-designer__color-swatch ${H.color.tpv_code===Be.code?"sports-designer__color-swatch--selected":""}`,style:{backgroundColor:Be.hex},onClick:()=>{Z(Be),T(!1)},title:`${Be.code} - ${Be.name}`,children:l.jsx("span",{className:"sports-designer__color-code",children:Be.code})},Be.code))})})]}),l.jsx("div",{className:`sports-designer__bottom-sheet-overlay ${f?"sports-designer__bottom-sheet-overlay--open":""}`,onClick:()=>A(!1)}),l.jsxs("div",{className:`sports-designer__bottom-sheet ${f?"sports-designer__bottom-sheet--open":""}`,children:[l.jsx("div",{className:"sports-designer__bottom-sheet-handle"}),l.jsxs("div",{className:"sports-designer__bottom-sheet-header",children:[l.jsx("h3",{children:"Properties"}),l.jsx("button",{className:"sports-designer__bottom-sheet-close",onClick:()=>A(!1),children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsx("div",{className:"sports-designer__bottom-sheet-content",children:(ke||ze||xe||Re||_e)&&l.jsx(_S,{mobileMode:!0,onEditSourceDesign:ne})})]}),l.jsxs("div",{className:"sports-designer__content",children:[!qe&&l.jsxs("aside",{className:`sports-designer__sidebar ${tt?"":"sports-designer__sidebar--collapsed"}`,children:[l.jsxs("div",{className:"sidebar-content",children:[l.jsx("div",{className:"sidebar-add-element",children:l.jsxs("button",{className:"sidebar-add-element__btn",onClick:()=>O(!0),children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),l.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add Courts & Designs"]})}),l.jsx(j7,{})]}),l.jsx("button",{className:"sidebar-toggle sidebar-toggle--left",onClick:ut,title:tt?"Collapse panel":"Expand panel",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:tt?l.jsx("polyline",{points:"15 18 9 12 15 6"}):l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),l.jsxs("main",{className:"sports-designer__canvas-container",children:[l.jsxs("div",{className:"sports-toolbar",children:[l.jsxs("div",{className:"sports-toolbar__group",children:[l.jsx("button",{className:`sports-toolbar__btn ${tt?"sports-toolbar__btn--active":""}`,onClick:ut,title:"Element Library",disabled:qe,children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),l.jsx("button",{className:`sports-toolbar__btn ${Ue&&(ke||ze||xe||Re||_e)?"sports-toolbar__btn--active":""}`,onClick:de,title:"Properties",disabled:!ke&&!ze&&!xe&&!Re&&!_e||qe,children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),l.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),l.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),l.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),l.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),l.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),l.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})})]}),l.jsx("div",{className:"sports-toolbar__divider"}),l.jsxs("div",{className:"sports-toolbar__group",style:{position:"relative"},children:[l.jsxs("button",{className:`sports-toolbar__btn sports-toolbar__btn--with-label ${ce?"sports-toolbar__btn--active":""}`,onClick:Be=>{Be.stopPropagation(),te(!ce)},title:"Add Elements",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),l.jsx("polyline",{points:"2 17 12 22 22 17"}),l.jsx("polyline",{points:"2 12 12 17 22 12"})]}),l.jsx("span",{children:"Elements"}),l.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:l.jsx("path",{d:"M6 9l6 6 6-6"})})]}),ce&&l.jsxs("div",{className:"sports-toolbar__dropdown-menu",onClick:Be=>Be.stopPropagation(),children:[l.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ye(),te(!1)},children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M4 7V4h16v3"}),l.jsx("path",{d:"M12 4v16"}),l.jsx("path",{d:"M8 20h8"})]}),l.jsx("span",{children:"Text"}),l.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"T"})]}),l.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ve("rectangle"),te(!1)},children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})}),l.jsx("span",{children:"Shape"}),l.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"S"})]}),l.jsxs("button",{className:"sports-toolbar__dropdown-item",onClick:()=>{ve("blob"),te(!1)},children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 3c-4 0-7 3-8 6s0 6 2 8c2 2 5 3 8 2s5-3 6-6-1-6-3-8c-1-1-3-2-5-2z"})}),l.jsx("span",{children:"Blob"}),l.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"B"})]}),l.jsxs("button",{className:`sports-toolbar__dropdown-item ${$e?"sports-toolbar__dropdown-item--active":""}`,onClick:()=>{Xe(),te(!1)},children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),l.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),l.jsx("path",{d:"M2 2l7.586 7.586"})]}),l.jsx("span",{children:"Pen"}),l.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"P"})]}),l.jsx("div",{className:"sports-toolbar__dropdown-divider"}),l.jsxs("button",{className:"sports-toolbar__dropdown-item sports-toolbar__dropdown-item--exclusion",onClick:()=>{Me("rectangle"),te(!1)},children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"})]}),l.jsx("span",{children:"Exclusion Zone"}),l.jsx("span",{className:"sports-toolbar__dropdown-shortcut",children:"E"})]})]})]}),l.jsx("div",{className:"sports-toolbar__divider"}),l.jsxs("div",{className:"sports-toolbar__group",children:[l.jsxs("button",{className:"sports-toolbar__dimensions",onClick:()=>{i(String(H.width_mm/1e3)),a(String(H.length_mm/1e3)),n(!0)},title:"Click to edit surface size",children:[(H.width_mm/1e3).toFixed(0),"m  ",(H.length_mm/1e3).toFixed(0),"m"]}),l.jsx("button",{className:"sports-toolbar__color-swatch",style:{backgroundColor:H.color.hex},onClick:()=>u(!0),title:`${H.color.name} (${H.color.tpv_code}) - Click to change`})]}),l.jsx("div",{className:"sports-toolbar__divider"}),l.jsxs("div",{className:"sports-toolbar__group",children:[l.jsx("button",{className:"sports-toolbar__btn",disabled:!tn.getState().canUndo(),onClick:()=>tn.getState().undo(),title:"Undo (Ctrl+Z)",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 7v6h6"}),l.jsx("path",{d:"M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"})]})}),l.jsx("button",{className:"sports-toolbar__btn",disabled:!tn.getState().canRedo(),onClick:()=>tn.getState().redo(),title:"Redo (Ctrl+Shift+Z)",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 7v6h-6"}),l.jsx("path",{d:"M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"})]})})]}),(it.length>=2||Pe)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"sports-toolbar__divider"}),l.jsxs("div",{className:"sports-toolbar__group",children:[it.length>=2&&l.jsx("button",{className:"sports-toolbar__btn",onClick:M,title:"Group selected elements (Cmd+G)",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),l.jsx("path",{d:"M10 7h4"}),l.jsx("path",{d:"M10 17h4"}),l.jsx("path",{d:"M7 10v4"}),l.jsx("path",{d:"M17 10v4"})]})}),Pe&&l.jsx("button",{className:"sports-toolbar__btn",onClick:()=>L(Pe),title:"Ungroup (Cmd+Shift+G)",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),l.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),l.jsx("path",{d:"M10 7h4",strokeDasharray:"2 2"}),l.jsx("path",{d:"M10 17h4",strokeDasharray:"2 2"}),l.jsx("path",{d:"M7 10v4",strokeDasharray:"2 2"}),l.jsx("path",{d:"M17 10v4",strokeDasharray:"2 2"})]})})]}),it.length>=2&&l.jsxs("div",{className:"sports-toolbar__align-dropdown",style:{position:"relative"},children:[l.jsx("button",{className:`sports-toolbar__btn ${R?"sports-toolbar__btn--active":""}`,onClick:Be=>{Be.stopPropagation(),W(!R)},title:"Align elements",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),l.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),l.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),l.jsx("line",{x1:"21",y1:"18",x2:"3",y2:"18"})]})}),R&&l.jsxs("div",{className:"sports-toolbar__align-menu",style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"8px",zIndex:100,minWidth:"120px"},onClick:Be=>Be.stopPropagation(),children:[l.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Align"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{ee("left"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Left"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{ee("center"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Center"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{ee("right"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Right"}),l.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{ee("top"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Top"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{ee("middle"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Middle"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{ee("bottom"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Bottom"}),it.length>=3&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),l.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Distribute"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("horizontal"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Horizontal"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("vertical"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Vertical"}),l.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 0"}}),l.jsx("div",{style:{fontSize:"10px",color:"#666",padding:"4px 8px",textTransform:"uppercase",fontWeight:600},children:"Distribute Centres"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("center-horizontal"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Centres H"}),l.jsx("button",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"6px 8px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontSize:"12px"},onClick:()=>{pe("center-vertical"),W(!1)},onMouseOver:Be=>Be.currentTarget.style.background="#f1f5f9",onMouseOut:Be=>Be.currentTarget.style.background="transparent",children:" Centres V"})]})]})]})]}),l.jsx("div",{className:"sports-toolbar__divider"}),l.jsxs("div",{className:"sports-toolbar__group",children:[l.jsx("button",{className:"sports-toolbar__btn",onClick:G,title:"Start new design",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),l.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),l.jsx("button",{className:"sports-toolbar__btn",onClick:re,title:"View In-Situ Preview",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),l.jsx("button",{className:"sports-toolbar__btn",onClick:()=>m(!0),title:"Keyboard shortcuts (?)",children:l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),l.jsx("button",{className:"sports-toolbar__btn-primary",onClick:()=>h(!0),children:"Save"}),l.jsx(RS,{svgRef:me})]})]}),l.jsx(e7,{ref:me}),l.jsx(x5e,{})]}),(ke||ze||xe||Re||_e)&&!qe&&l.jsxs("aside",{className:`sports-designer__properties ${Ue?"":"sports-designer__properties--collapsed"}`,children:[l.jsx("button",{className:"sidebar-toggle sidebar-toggle--right",onClick:de,title:Ue?"Collapse properties":"Expand properties",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Ue?l.jsx("polyline",{points:"9 18 15 12 9 6"}):l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsx("div",{className:"sidebar-content",children:l.jsx(_S,{onEditSourceDesign:ne})})]})]}),o&&l.jsx("div",{className:"sports-designer__color-modal-overlay",onClick:()=>u(!1),children:l.jsxs("div",{className:"sports-designer__color-modal",onClick:Be=>Be.stopPropagation(),children:[l.jsxs("div",{className:"sports-designer__color-modal-header",children:[l.jsx("h4",{children:"Select Surface Colour"}),l.jsx("button",{onClick:()=>u(!1),children:""})]}),l.jsx("div",{className:"sports-designer__color-grid",children:fi.map(Be=>l.jsx("button",{className:`sports-designer__color-swatch ${H.color.tpv_code===Be.code?"sports-designer__color-swatch--selected":""}`,style:{backgroundColor:Be.hex},onClick:()=>Z(Be),title:`${Be.code} - ${Be.name}`,children:l.jsx("span",{className:"sports-designer__color-code",children:Be.code})},Be.code))})]})}),d&&l.jsx(z7,{existingDesignId:I,initialName:U,svgRef:me,onClose:()=>h(!1),onSaved:(Be,dt)=>{E(Be.design_id),D(dt),console.log("[SPORTS] Design saved:",Be.design_id)}}),l.jsx(sU,{isOpen:p,onClose:()=>m(!1)}),l.jsx(w7,{isOpen:j,onClose:()=>O(!1),onOpenGenerator:()=>v(!0)}),l.jsx(v5e,{isOpen:g,onClose:()=>v(!1)}),w&&x&&l.jsx(FO,{designUrl:x,designDimensions:{width:H.width_mm,length:H.length_mm},onClose:z,onSaved:Be=>{console.log("[TPV] In-situ preview saved:",Be),z()}})]})]})}function _5e({onShowDesigns:e,onShowAdmin:t,isAdmin:n,currentDesignName:r}){const[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),u=async()=>{if(!a){o(!0);return}await _a.signOut(),window.location.reload()},d=()=>{s(!1),o(!1)};return l.jsx("header",{className:"studio-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("h1",{className:"studio-title",children:"TPV Designer"}),r&&l.jsxs("span",{className:"current-design-indicator",children:[l.jsx("svg",{width:"4",height:"4",viewBox:"0 0 4 4",children:l.jsx("circle",{cx:"2",cy:"2",r:"2",fill:"currentColor"})}),r]})]}),l.jsxs("div",{className:"header-right",children:[l.jsxs("button",{onClick:e,className:"btn-my-designs","aria-label":"My Designs",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),l.jsx("path",{d:"M9 22V12h6v10"})]}),"My Designs"]}),n&&l.jsxs("button",{onClick:t,className:"btn-admin","aria-label":"Admin Dashboard",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]}),"Admin"]}),l.jsxs("div",{className:"user-menu",children:[l.jsx("button",{onClick:()=>{s(!i),o(!1)},className:"user-menu-button","aria-label":"User menu",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),i&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"user-menu-backdrop",onClick:d}),l.jsx("div",{className:"user-menu-dropdown",children:l.jsxs("button",{onClick:u,className:`menu-item sign-out${a?" confirming":""}`,children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})}),a?"Confirm Sign Out":"Sign Out"]})})]})]})]})]})})}function k5e({design:e,onLoad:t,onDelete:n,onUpdateMetadata:r}){var v;const[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),u=async()=>{if(confirm(`Delete "${e.name}"? This cannot be undone.`)){o(!0);try{await n(e.id)}catch(w){console.error("Failed to delete design:",w),Xr("Failed to delete design. Please try again."),o(!1)}}},d=w=>{const S=new Date(w),x=new Date,k=x-S,j=Math.floor(k/(1e3*60*60*24));return j===0?"Today":j===1?"Yesterday":j<7?`${j} days ago`:j<30?`${Math.floor(j/7)} weeks ago`:S.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:S.getFullYear()!==x.getFullYear()?"numeric":void 0})},h=e.input_mode==="sports_surface"||((v=e.design_data)==null?void 0:v.type)==="sports_surface",p=e.thumbnail_url||e.original_png_url||e.original_svg_url,g=h?{label:"Surface",icon:"",className:"type-surface"}:{label:"Motif",icon:"",className:"type-motif"};return l.jsxs("div",{className:`design-card ${a?"deleting":""}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[l.jsxs("div",{className:`design-type-badge ${g.className}`,children:[l.jsx("span",{className:"type-icon",children:g.icon}),l.jsx("span",{className:"type-label",children:g.label})]}),l.jsxs("div",{className:"card-thumbnail",onClick:()=>t(e.id),children:[p?l.jsx("img",{src:p,alt:e.name}):l.jsx("div",{className:"no-thumbnail",children:l.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),i&&l.jsx("div",{className:"thumbnail-overlay",children:l.jsx("button",{className:"btn-load",children:"Open"})})]}),l.jsxs("div",{className:"card-info",children:[l.jsx("h3",{className:"design-name",title:e.name,children:e.name}),e.description&&l.jsx("p",{className:"design-description",title:e.description,children:e.description}),l.jsxs("div",{className:"card-meta",children:[e.projects&&l.jsx("span",{className:"project-badge",style:{backgroundColor:e.projects.color||"#1a365d"},title:e.projects.name,children:e.projects.name}),l.jsx("span",{className:"design-date",title:new Date(e.updated_at).toLocaleString(),children:d(e.updated_at)})]}),e.tags&&e.tags.length>0&&l.jsxs("div",{className:"design-tags",children:[e.tags.slice(0,3).map((w,S)=>l.jsx("span",{className:"tag",children:w},S)),e.tags.length>3&&l.jsxs("span",{className:"tag more",children:["+",e.tags.length-3]})]})]}),i&&!a&&l.jsxs("div",{className:"card-actions",children:[l.jsx("button",{onClick:()=>t(e.id),className:"action-btn load-btn",title:"Load design",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),l.jsx("button",{onClick:u,className:"action-btn delete-btn",title:"Delete design",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})})]}),a&&l.jsx("div",{className:"deleting-overlay",children:l.jsx("div",{className:"spinner"})})]})}function S5e({onClose:e,onLoadDesign:t}){const[n,r]=fe.useState([]),[i,s]=fe.useState([]),[a,o]=fe.useState(!0),[u,d]=fe.useState(null),[h,p]=fe.useState(""),[m,g]=fe.useState(""),[v,w]=fe.useState(!1),[S,x]=fe.useState(!1);fe.useEffect(()=>{k()},[h,m]);const k=async()=>{o(!0),d(null);try{const[E,U]=await Promise.all([yw(),tg({project_id:h||void 0,search:m||void 0,limit:12,offset:0})]);s(E.projects),r(U.designs),w(U.pagination.has_more)}catch(E){console.error("Failed to load designs:",E),d(E.message)}finally{o(!1)}},j=async()=>{if(!(S||!v)){x(!0);try{const E=await tg({project_id:h||void 0,search:m||void 0,limit:12,offset:n.length});r([...n,...E.designs]),w(E.pagination.has_more)}catch(E){console.error("Failed to load more designs:",E),d(E.message)}finally{x(!1)}}},O=async E=>{try{const{design:U}=await Ef(E);t(U),e()}catch(U){console.error("Failed to load design:",U),Xr("Failed to load design. Please try again.")}},I=async E=>{try{await Uz(E),r(n.filter(U=>U.id!==E))}catch(U){throw console.error("Failed to delete design:",U),U}};return l.jsx("div",{className:"modal-overlay",onClick:e,children:l.jsxs("div",{className:"modal-content design-gallery-modal",onClick:E=>E.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"My Designs"}),l.jsx("button",{onClick:e,className:"close-button",children:""})]}),l.jsxs("div",{className:"gallery-filters",children:[l.jsx("div",{className:"filter-group",children:l.jsx("input",{type:"text",placeholder:"Search designs...",value:m,onChange:E=>g(E.target.value),className:"search-input"})}),l.jsx("div",{className:"filter-group",children:l.jsxs("select",{value:h,onChange:E=>p(E.target.value),className:"project-filter",children:[l.jsx("option",{value:"",children:"All Projects"}),i.map(E=>l.jsxs("option",{value:E.id,children:[E.name," (",E.design_count,")"]},E.id))]})})]}),l.jsxs("div",{className:"modal-body",children:[u&&l.jsxs("div",{className:"error-message",children:[u,l.jsx("button",{onClick:k,className:"btn-retry",children:"Retry"})]}),a?l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"spinner-large"}),l.jsx("p",{children:"Loading your designs..."})]}):n.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),l.jsx("path",{d:"M17 21v-8H7v8M7 3v5h8"})]}),l.jsx("h3",{children:"No designs yet"}),l.jsx("p",{children:m||h?"No designs match your filters. Try adjusting your search.":"Create your first design to see it here!"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"designs-grid",children:n.map(E=>l.jsx(k5e,{design:E,onLoad:O,onDelete:I},E.id))}),v&&l.jsx("div",{className:"load-more-section",children:l.jsx("button",{onClick:j,className:"btn-load-more",disabled:S,children:S?"Loading...":"Load More"})})]})]})]})})}function C5e(){const[e,t]=fe.useState([]),[n,r]=fe.useState(0),[i,s]=fe.useState(!1),[a,o]=fe.useState(null),[u,d]=fe.useState("all"),[h,p]=fe.useState("all"),[m,g]=fe.useState(""),[v,w]=fe.useState(0),S=50,x=async()=>{var D,R;const E=await ti.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(R=(D=E==null?void 0:E.data)==null?void 0:D.session)==null?void 0:R.access_token}`}},k=async()=>{s(!0),o(null);try{const E=await x(),U=new URLSearchParams({limit:S.toString(),offset:v.toString()});u!=="all"&&U.append("status",u),h!=="all"&&U.append("saved_status",h),m&&U.append("search",m);const D=await fetch(`/api/admin/jobs?${U.toString()}`,{headers:E}),R=await D.json();if(!D.ok)throw new Error(R.error||"Failed to fetch jobs");t(R.jobs),r(R.total)}catch(E){console.error("Failed to fetch jobs:",E),o(E.message)}finally{s(!1)}};fe.useEffect(()=>{k()},[u,h,m,v]);const j=e.filter(E=>E.status==="completed").length,O=e.filter(E=>!E.is_saved&&E.status==="completed").length,I=e.filter(E=>E.is_saved).length;return l.jsxs("div",{className:"generations-tab",children:[l.jsxs("div",{className:"admin-stats-grid",children:[l.jsxs("div",{className:"admin-stat-card",children:[l.jsx("h3",{children:"Total Generations"}),l.jsx("p",{className:"stat-value",children:n}),l.jsx("span",{className:"stat-label",children:"All time"})]}),l.jsxs("div",{className:"admin-stat-card",children:[l.jsx("h3",{children:"Completed"}),l.jsx("p",{className:"stat-value",children:j}),l.jsx("span",{className:"stat-label",children:"Current page"})]}),l.jsxs("div",{className:"admin-stat-card success",children:[l.jsx("h3",{children:"Saved"}),l.jsx("p",{className:"stat-value",children:I}),l.jsx("span",{className:"stat-label",children:" Linked to designs"})]}),l.jsxs("div",{className:"admin-stat-card warning",children:[l.jsx("h3",{children:"Orphaned"}),l.jsx("p",{className:"stat-value",children:O}),l.jsx("span",{className:"stat-label",children:" Not saved"})]})]}),l.jsxs("div",{className:"admin-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:u,onChange:E=>d(E.target.value),children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"failed",children:"Failed"}),l.jsx("option",{value:"running",children:"Running"}),l.jsx("option",{value:"queued",children:"Queued"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Saved:"}),l.jsxs("select",{value:h,onChange:E=>p(E.target.value),children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"saved",children:"Saved only"}),l.jsx("option",{value:"orphaned",children:"Orphaned only"})]})]}),l.jsxs("div",{className:"filter-group search",children:[l.jsx("label",{children:"Search prompt:"}),l.jsx("input",{type:"text",placeholder:"Search in prompts...",value:m,onChange:E=>g(E.target.value)})]})]}),i&&l.jsxs("div",{className:"admin-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading jobs..."})]}),a&&l.jsx("div",{className:"admin-error",children:l.jsxs("p",{children:["Error: ",a]})}),!i&&e.length>0&&l.jsx("div",{className:"jobs-table-container",children:l.jsxs("table",{className:"jobs-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Thumbnail"}),l.jsx("th",{children:"Prompt"}),l.jsx("th",{children:"Dimensions"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Saved"}),l.jsx("th",{children:"User"}),l.jsx("th",{children:"Created"})]})}),l.jsx("tbody",{children:e.map(E=>l.jsxs("tr",{className:`job-row ${E.is_saved?"saved":"orphaned"} ${E.status}`,children:[l.jsx("td",{className:"thumbnail-cell",children:E.thumbnail_url?l.jsx("img",{src:E.thumbnail_url,alt:"Design",className:"job-thumbnail",loading:"lazy"}):l.jsx("div",{className:"thumbnail-placeholder",children:"No image"})}),l.jsx("td",{className:"prompt-cell",children:l.jsx("div",{className:"prompt-text",title:E.prompt,children:E.prompt||l.jsx("em",{children:"No prompt"})})}),l.jsx("td",{className:"dimensions-cell",children:E.width_mm&&E.length_mm?l.jsxs("span",{children:[E.width_mm,"  ",E.length_mm," mm"]}):l.jsx("em",{children:"N/A"})}),l.jsx("td",{className:"status-cell",children:l.jsx("span",{className:`status-badge ${E.status}`,children:E.status})}),l.jsx("td",{className:"saved-cell",children:E.is_saved?l.jsx("span",{className:"saved-badge",children:" Saved"}):l.jsx("span",{className:"orphaned-badge",children:" Orphaned"})}),l.jsx("td",{className:"user-cell",children:E.user_email}),l.jsx("td",{className:"date-cell",children:new Date(E.created_at).toLocaleDateString()})]},E.id))})]})}),!i&&e.length===0&&l.jsx("div",{className:"admin-empty",children:l.jsx("p",{children:"No jobs found matching your filters."})}),n>S&&l.jsxs("div",{className:"admin-pagination",children:[l.jsx("button",{onClick:()=>w(Math.max(0,v-S)),disabled:v===0,children:"Previous"}),l.jsxs("span",{children:["Showing ",v+1," to ",Math.min(v+S,n)," of ",n]}),l.jsx("button",{onClick:()=>w(v+S),disabled:v+S>=n,children:"Next"})]}),l.jsx("style",{children:`
        .jobs-table-container {
          overflow-x: auto;
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .jobs-table {
          width: 100%;
          border-collapse: collapse;
        }

        .jobs-table th {
          background: #f9fafb;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          font-size: 0.875rem;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .jobs-table td {
          padding: 1rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .job-row.saved {
          background: rgba(16, 185, 129, 0.03);
        }

        .job-row.orphaned {
          background: rgba(245, 158, 11, 0.03);
        }

        .thumbnail-cell {
          width: 80px;
        }

        .job-thumbnail {
          width: 64px;
          height: 64px;
          object-fit: cover;
          border-radius: 4px;
        }

        .thumbnail-placeholder {
          width: 64px;
          height: 64px;
          background: #f3f4f6;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 0.75rem;
          color: #9ca3af;
        }

        .prompt-cell {
          max-width: 300px;
        }

        .prompt-text {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .status-badge.completed {
          background: #d1fae5;
          color: #065f46;
        }

        .status-badge.failed {
          background: #fee2e2;
          color: #991b1b;
        }

        .status-badge.running {
          background: #dbeafe;
          color: #1e40af;
        }

        .status-badge.queued {
          background: #e0e7ff;
          color: #3730a3;
        }

        .saved-badge {
          color: #059669;
          font-weight: 500;
        }

        .orphaned-badge {
          color: #d97706;
          font-weight: 500;
        }

        .user-cell {
          font-size: 0.875rem;
          color: #6b7280;
        }

        .date-cell {
          font-size: 0.875rem;
          color: #6b7280;
          white-space: nowrap;
        }

        .admin-stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 1.5rem;
          margin-bottom: 2rem;
        }

        .admin-stat-card {
          background: white;
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .admin-stat-card h3 {
          font-size: 0.875rem;
          color: #64748b;
          margin-bottom: 0.5rem;
          font-weight: 500;
        }

        .admin-stat-card .value {
          font-size: 2rem;
          font-weight: 700;
          color: #1e293b;
        }

        .admin-stat-card.success {
          border-left: 4px solid #10b981;
        }

        .admin-stat-card.warning {
          border-left: 4px solid #f59e0b;
        }

        .admin-filters {
          display: flex;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          align-items: center;
        }

        .admin-pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 0.5rem;
          margin-top: 1.5rem;
          padding: 1rem 0;
        }

        .admin-empty {
          text-align: center;
          padding: 3rem;
          color: #64748b;
        }
      `})]})}function E5e(){const[e,t]=fe.useState([]),[n,r]=fe.useState(null),[i,s]=fe.useState(!1),[a,o]=fe.useState(null),[u,d]=fe.useState(!1),[h,p]=fe.useState(new Set),[m,g]=fe.useState(1),[v,w]=fe.useState(1),[S,x]=fe.useState(0),k=50,[j,O]=fe.useState("all"),I=async()=>{var H,ge;const te=await ti.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(ge=(H=te==null?void 0:te.data)==null?void 0:H.session)==null?void 0:ge.access_token}`}},E=async(te=m)=>{s(!0),o(null);try{const me=await I(),H=new URLSearchParams;j!=="all"&&H.append("age_filter",j),H.append("page",te.toString()),H.append("limit",k.toString());const ge=await fetch(`/api/admin/recovery/orphaned?${H.toString()}`,{headers:me}),Ee=await ge.json();if(!ge.ok)throw new Error(Ee.error||"Failed to fetch orphaned jobs");t(Ee.orphaned_jobs),r(Ee.age_buckets),x(Ee.total||0),w(Ee.total_pages||1),g(Ee.page||1)}catch(me){console.error("Failed to fetch orphaned jobs:",me),o(me.message)}finally{s(!1)}};fe.useEffect(()=>{g(1),E(1)},[j]);const U=te=>{te>=1&&te<=v&&(g(te),E(te),p(new Set))},D=te=>{const me=new Set(h);me.has(te)?me.delete(te):me.add(te),p(me)},R=()=>{p(new Set(e.map(te=>te.id)))},W=()=>{p(new Set)},ce=async()=>{if(h.size===0){Xr("Please select at least one job to recover","warning");return}if(confirm(`Recover ${h.size} orphaned ${h.size===1?"design":"designs"}?`)){d(!0),o(null);try{const te=await I(),me=await fetch("/api/admin/recovery/create",{method:"POST",headers:te,body:JSON.stringify({job_ids:Array.from(h)})}),H=await me.json();if(!me.ok)throw new Error(H.error||"Failed to recover designs");Xr(`Successfully recovered ${H.recovered_count} ${H.recovered_count===1?"design":"designs"}!`,"success"),W(),await E()}catch(te){console.error("Failed to recover designs:",te),o(te.message),Xr("Recovery failed. Please try again.")}finally{d(!1)}}};return l.jsxs("div",{className:"recovery-tab",children:[l.jsxs("div",{className:"admin-stats-grid",children:[l.jsxs("div",{className:"admin-stat-card warning",children:[l.jsx("h3",{children:"Total Orphaned"}),l.jsx("p",{className:"stat-value",children:S}),l.jsx("span",{className:"stat-label",children:"Designs not saved"})]}),n&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"admin-stat-card",children:[l.jsx("h3",{children:"<24 hours"}),l.jsx("p",{className:"stat-value",children:n["<24h"]}),l.jsx("span",{className:"stat-label",children:"Recent"})]}),l.jsxs("div",{className:"admin-stat-card",children:[l.jsx("h3",{children:"1-7 days"}),l.jsx("p",{className:"stat-value",children:n["1-7d"]}),l.jsx("span",{className:"stat-label",children:"This week"})]}),l.jsxs("div",{className:"admin-stat-card",children:[l.jsx("h3",{children:">7 days"}),l.jsx("p",{className:"stat-value",children:n["7-30d"]+n[">30d"]}),l.jsx("span",{className:"stat-label",children:"Older"})]})]})]}),l.jsxs("div",{className:"recovery-controls",children:[l.jsx("div",{className:"admin-filters",children:l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Age:"}),l.jsxs("select",{value:j,onChange:te=>O(te.target.value),children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"24h",children:"<24 hours"}),l.jsx("option",{value:"7d",children:"<7 days"}),l.jsx("option",{value:"30d",children:"<30 days"})]})]})}),l.jsxs("div",{className:"bulk-actions",children:[l.jsx("button",{onClick:R,className:"btn-secondary",children:"Select All"}),l.jsxs("button",{onClick:W,className:"btn-secondary",children:["Clear (",h.size,")"]}),l.jsx("button",{onClick:ce,disabled:h.size===0||u,className:"btn-primary",children:u?"Recovering...":`Recover Selected (${h.size})`})]})]}),i&&l.jsxs("div",{className:"admin-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading orphaned jobs..."})]}),a&&l.jsx("div",{className:"admin-error",children:l.jsxs("p",{children:["Error: ",a]})}),!i&&e.length>0&&l.jsxs("div",{className:"recovery-table-container",children:[l.jsxs("table",{className:"recovery-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"40px"},children:l.jsx("input",{type:"checkbox",checked:h.size===e.length,onChange:te=>te.target.checked?R():W()})}),l.jsx("th",{children:"Thumbnail"}),l.jsx("th",{children:"Prompt / Auto-name"}),l.jsx("th",{children:"Dimensions"}),l.jsx("th",{children:"Age"}),l.jsx("th",{children:"User"})]})}),l.jsx("tbody",{children:e.map(te=>l.jsxs("tr",{className:h.has(te.id)?"selected":"",onClick:()=>D(te.id),children:[l.jsx("td",{onClick:me=>me.stopPropagation(),children:l.jsx("input",{type:"checkbox",checked:h.has(te.id),onChange:()=>D(te.id)})}),l.jsx("td",{className:"thumbnail-cell",children:te.thumbnail_url?l.jsx("img",{src:te.thumbnail_url,alt:"Design",className:"job-thumbnail",loading:"lazy"}):l.jsx("div",{className:"thumbnail-placeholder",children:"No image"})}),l.jsxs("td",{className:"prompt-cell",children:[l.jsx("div",{className:"prompt-text",title:te.prompt,children:te.auto_name}),te.prompt&&te.prompt.length>50&&l.jsx("div",{className:"prompt-full",children:te.prompt})]}),l.jsx("td",{className:"dimensions-cell",children:te.width_mm&&te.length_mm?l.jsxs("span",{children:[te.width_mm,"  ",te.length_mm," mm"]}):l.jsx("em",{children:"N/A"})}),l.jsx("td",{className:"age-cell",children:l.jsxs("span",{className:`age-badge ${te.age_bucket.replace(/[<>]/g,"")}`,children:[te.age_days," ",te.age_days===1?"day":"days"]})}),l.jsx("td",{className:"user-cell",children:te.user_email})]},te.id))})]}),v>1&&l.jsxs("div",{className:"admin-pagination",children:[l.jsx("button",{onClick:()=>U(1),disabled:m===1,className:"btn-secondary",children:"First"}),l.jsx("button",{onClick:()=>U(m-1),disabled:m===1,className:"btn-secondary",children:"Previous"}),l.jsxs("span",{className:"pagination-info",children:["Page ",m," of ",v," (",S," total)"]}),l.jsx("button",{onClick:()=>U(m+1),disabled:m===v,className:"btn-secondary",children:"Next"}),l.jsx("button",{onClick:()=>U(v),disabled:m===v,className:"btn-secondary",children:"Last"})]})]}),!i&&e.length===0&&l.jsx("div",{className:"admin-empty",children:l.jsx("p",{children:"No orphaned jobs found. All designs have been saved!"})}),l.jsx("style",{children:`
        .admin-stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 1.5rem;
          margin-bottom: 2rem;
        }

        .admin-stat-card {
          background: white;
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .admin-stat-card h3 {
          font-size: 0.875rem;
          color: #64748b;
          margin-bottom: 0.5rem;
          font-weight: 500;
        }

        .admin-stat-card .value {
          font-size: 2rem;
          font-weight: 700;
          color: #1e293b;
        }

        .admin-filters {
          display: flex;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          align-items: center;
        }

        .admin-pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 0.5rem;
          margin-top: 1.5rem;
          padding: 1rem 0;
        }

        .pagination-info {
          padding: 0 1rem;
          color: #64748b;
          font-size: 0.875rem;
        }

        .admin-empty {
          text-align: center;
          padding: 3rem;
          color: #64748b;
        }

        .recovery-controls {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          gap: 1rem;
        }

        .bulk-actions {
          display: flex;
          gap: 0.5rem;
        }

        .btn-primary {
          padding: 0.5rem 1rem;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 4px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-primary:hover:not(:disabled) {
          background: #e55a2b;
        }

        .btn-primary:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        .btn-secondary {
          padding: 0.5rem 1rem;
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
          border-radius: 4px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-secondary:hover {
          background: #f9fafb;
        }

        .recovery-table-container {
          overflow-x: auto;
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .recovery-table {
          width: 100%;
          border-collapse: collapse;
        }

        .recovery-table th {
          background: #f9fafb;
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          font-size: 0.875rem;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .recovery-table td {
          padding: 1rem;
          border-bottom: 1px solid #e5e7eb;
        }

        .recovery-table tbody tr {
          cursor: pointer;
          transition: background 0.15s;
        }

        .recovery-table tbody tr:hover {
          background: #f9fafb;
        }

        .recovery-table tbody tr.selected {
          background: #eff6ff;
        }

        .age-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .age-badge.24h {
          background: #fee2e2;
          color: #991b1b;
        }

        .age-badge.1-7d {
          background: #fed7aa;
          color: #92400e;
        }

        .age-badge.7-30d {
          background: #fef3c7;
          color: #78350f;
        }

        .age-badge.30d {
          background: #e5e7eb;
          color: #374151;
        }

        .prompt-full {
          font-size: 0.75rem;
          color: #6b7280;
          margin-top: 0.25rem;
          display: none;
        }

        .recovery-table tbody tr:hover .prompt-full {
          display: block;
        }
      `})]})}function T5e({onClose:e}){const[t,n]=fe.useState("overview"),[r,i]=fe.useState(!0),[s,a]=fe.useState(null),[o,u]=fe.useState(null),[d,h]=fe.useState([]),[p,m]=fe.useState([]),[g,v]=fe.useState(0),[w,S]=fe.useState(null),[x,k]=fe.useState(null),j=async()=>{var W,ce;const D=await ti.auth.getSession();return{"Content-Type":"application/json",Authorization:`Bearer ${(ce=(W=D==null?void 0:D.data)==null?void 0:W.session)==null?void 0:ce.access_token}`}},O=async()=>{try{const D=await j(),R=await fetch("/api/admin/analytics/overview",{headers:D}),W=await R.json();if(!R.ok)throw new Error(W.error||"Failed to fetch overview");u(W.stats)}catch(D){console.error("Failed to fetch overview:",D),a(D.message)}},I=async()=>{try{const D=await j(),R=await fetch("/api/admin/users",{headers:D}),W=await R.json();if(!R.ok)throw new Error(W.error||"Failed to fetch users");h(W.users)}catch(D){console.error("Failed to fetch users:",D),a(D.message)}},E=async()=>{try{const D=await j(),R=await fetch("/api/admin/designs?limit=50",{headers:D}),W=await R.json();if(!R.ok)throw new Error(W.error||"Failed to fetch designs");m(W.designs),v(W.total)}catch(D){console.error("Failed to fetch designs:",D),a(D.message)}},U=async()=>{try{const D=await j(),R=await fetch("/api/admin/analytics/colours",{headers:D}),W=await R.json();if(!R.ok)throw new Error(W.error||"Failed to fetch colour analytics");S(W.analytics)}catch(D){console.error("Failed to fetch colours:",D),a(D.message)}};return fe.useEffect(()=>{(async()=>{var W;i(!0);const{data:{session:R}}=await ti.auth.getSession();(W=R==null?void 0:R.user)!=null&&W.id&&k(R.user.id),await O(),i(!1)})()},[]),fe.useEffect(()=>{t==="users"&&d.length===0?I():t==="designs"&&p.length===0?E():t==="colours"&&!w&&U()},[t]),r?l.jsxs("div",{className:"admin-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading admin dashboard..."})]}):s?l.jsxs("div",{className:"admin-error",children:[l.jsx("h2",{children:"Access Denied"}),l.jsx("p",{children:s}),l.jsx("p",{children:"You need admin privileges to view this page."})]}):l.jsxs("div",{className:"admin-dashboard",children:[l.jsxs("header",{className:"admin-header",children:[l.jsxs("div",{className:"admin-header-left",children:[l.jsxs("button",{onClick:e,className:"btn-back",children:[l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Studio"]}),l.jsx("h1",{children:"TPV Studio Admin"})]}),l.jsxs("nav",{className:"admin-nav",children:[l.jsx("button",{className:t==="overview"?"active":"",onClick:()=>n("overview"),children:"Overview"}),l.jsx("button",{className:t==="generations"?"active":"",onClick:()=>n("generations"),children:"Generations"}),l.jsx("button",{className:t==="recovery"?"active":"",onClick:()=>n("recovery"),children:"Recovery"}),l.jsx("button",{className:t==="users"?"active":"",onClick:()=>n("users"),children:"Users"}),l.jsx("button",{className:t==="designs"?"active":"",onClick:()=>n("designs"),children:"Designs"}),l.jsx("button",{className:t==="colours"?"active":"",onClick:()=>n("colours"),children:"Colour Analytics"})]})]}),l.jsxs("main",{className:"admin-content",children:[t==="overview"&&o&&l.jsx(j5e,{stats:o}),t==="generations"&&l.jsx(C5e,{}),t==="recovery"&&l.jsx(E5e,{}),t==="users"&&l.jsx(A5e,{users:d}),t==="designs"&&l.jsx(P5e,{designs:p,total:g,currentUserId:x}),t==="colours"&&w&&l.jsx(N5e,{analytics:w})]}),l.jsx("style",{jsx:!0,children:`
        .admin-dashboard {
          min-height: 100vh;
          background: #f8fafc;
        }

        .admin-header {
          background: white;
          border-bottom: 1px solid #e5e7eb;
          padding: 20px 40px;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .admin-header-left {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .btn-back {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 6px 12px;
          background: #f3f4f6;
          border: 1px solid #e5e7eb;
          border-radius: 6px;
          font-size: 13px;
          color: #6b7280;
          cursor: pointer;
          transition: all 0.2s;
          width: fit-content;
        }

        .btn-back:hover {
          background: #e5e7eb;
          color: #374151;
        }

        .admin-header h1 {
          margin: 0;
          font-size: 24px;
          color: #1e4a7a;
        }

        .admin-nav {
          display: flex;
          gap: 8px;
        }

        .admin-nav button {
          padding: 8px 16px;
          border: 1px solid #e5e7eb;
          background: white;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          color: #64748b;
          transition: all 0.2s;
        }

        .admin-nav button:hover {
          background: #f8fafc;
          color: #1e4a7a;
        }

        .admin-nav button.active {
          background: #1e4a7a;
          color: white;
          border-color: #1e4a7a;
        }

        .admin-content {
          padding: 24px 40px;
        }

        .admin-loading,
        .admin-error {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 50vh;
          text-align: center;
        }

        .admin-error h2 {
          color: #dc2626;
        }

        .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid #e5e7eb;
          border-top-color: #1e4a7a;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-bottom: 16px;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function j5e({stats:e}){return l.jsxs("div",{className:"overview-panel",children:[l.jsx("h2",{children:"Dashboard Overview"}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:e.totals.users}),l.jsx("div",{className:"stat-label",children:"Total Users"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:e.totals.designs}),l.jsx("div",{className:"stat-label",children:"Total Designs"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:e.totals.projects}),l.jsx("div",{className:"stat-label",children:"Total Projects"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:e.totals.jobs}),l.jsx("div",{className:"stat-label",children:"AI Jobs Run"})]})]}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card highlight",children:[l.jsx("div",{className:"stat-value",children:e.activity.active_users_30d}),l.jsx("div",{className:"stat-label",children:"Active Users (30d)"})]}),l.jsxs("div",{className:"stat-card highlight",children:[l.jsx("div",{className:"stat-value",children:e.activity.designs_7d}),l.jsx("div",{className:"stat-label",children:"Designs This Week"})]}),l.jsxs("div",{className:"stat-card highlight",children:[l.jsx("div",{className:"stat-value",children:e.activity.designs_30d}),l.jsx("div",{className:"stat-label",children:"Designs This Month"})]}),l.jsxs("div",{className:"stat-card highlight",children:[l.jsxs("div",{className:"stat-value",children:[e.activity.job_success_rate,"%"]}),l.jsx("div",{className:"stat-label",children:"Job Success Rate"})]})]}),l.jsx("h3",{children:"Activity Timeline (14 Days)"}),l.jsx("div",{className:"activity-chart",children:e.timeline.map((t,n)=>l.jsxs("div",{className:"bar-container",children:[l.jsx("div",{className:"bar",style:{height:`${Math.max(4,t.count*20)}px`},title:`${t.date}: ${t.count} designs`}),l.jsx("div",{className:"bar-label",children:t.date.split("-")[2]})]},n))}),l.jsxs("div",{className:"breakdowns",children:[l.jsxs("div",{className:"breakdown-card",children:[l.jsx("h4",{children:"Input Mode"}),l.jsxs("div",{className:"breakdown-items",children:[l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Prompt"}),l.jsx("strong",{children:e.breakdowns.input_mode.prompt})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Image Upload"}),l.jsx("strong",{children:e.breakdowns.input_mode.image})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"SVG Upload"}),l.jsx("strong",{children:e.breakdowns.input_mode.svg})]})]})]}),l.jsxs("div",{className:"breakdown-card",children:[l.jsx("h4",{children:"View Mode Preference"}),l.jsxs("div",{className:"breakdown-items",children:[l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Solid TPV"}),l.jsx("strong",{children:e.breakdowns.view_mode.solid})]}),l.jsxs("div",{className:"breakdown-item",children:[l.jsx("span",{children:"Blend TPV"}),l.jsx("strong",{children:e.breakdowns.view_mode.blend})]})]})]})]}),l.jsx("style",{jsx:!0,children:`
        .overview-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .overview-panel h3 {
          margin: 32px 0 16px 0;
          color: #1a202c;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 16px;
          margin-bottom: 16px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .stat-card.highlight {
          border-color: #1e4a7a;
          border-width: 2px;
        }

        .stat-value {
          font-size: 32px;
          font-weight: 700;
          color: #1e4a7a;
        }

        .stat-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }

        .activity-chart {
          display: flex;
          align-items: flex-end;
          gap: 8px;
          height: 120px;
          padding: 16px;
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .bar-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .bar {
          width: 100%;
          background: #1e4a7a;
          border-radius: 4px 4px 0 0;
          min-height: 4px;
        }

        .bar-label {
          font-size: 10px;
          color: #64748b;
          margin-top: 4px;
        }

        .breakdowns {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-top: 24px;
        }

        .breakdown-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .breakdown-card h4 {
          margin: 0 0 12px 0;
          color: #1a202c;
        }

        .breakdown-item {
          display: flex;
          justify-content: space-between;
          padding: 8px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .breakdown-item:last-child {
          border-bottom: none;
        }

        .breakdown-item span {
          color: #64748b;
        }

        .breakdown-item strong {
          color: #1a202c;
        }
      `})]})}function A5e({users:e}){return l.jsxs("div",{className:"users-panel",children:[l.jsxs("h2",{children:["User Management (",e.length," users)"]}),l.jsxs("table",{className:"users-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Email"}),l.jsx("th",{children:"Role"}),l.jsx("th",{children:"Designs"}),l.jsx("th",{children:"Projects"}),l.jsx("th",{children:"Jobs"}),l.jsx("th",{children:"Last Design"}),l.jsx("th",{children:"Joined"})]})}),l.jsx("tbody",{children:e.map(t=>l.jsxs("tr",{children:[l.jsx("td",{children:t.email}),l.jsx("td",{children:l.jsx("span",{className:`role-badge ${t.role}`,children:t.role})}),l.jsx("td",{children:t.design_count}),l.jsx("td",{children:t.project_count}),l.jsx("td",{children:t.job_count}),l.jsx("td",{children:t.last_design_at?new Date(t.last_design_at).toLocaleDateString():"-"}),l.jsx("td",{children:new Date(t.created_at).toLocaleDateString()})]},t.id))})]}),l.jsx("style",{jsx:!0,children:`
        .users-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .users-table {
          width: 100%;
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          border-collapse: collapse;
        }

        .users-table th,
        .users-table td {
          padding: 12px 16px;
          text-align: left;
          border-bottom: 1px solid #e5e7eb;
        }

        .users-table th {
          background: #f8fafc;
          font-weight: 600;
          color: #64748b;
          font-size: 12px;
          text-transform: uppercase;
        }

        .users-table td {
          font-size: 14px;
          color: #1a202c;
        }

        .role-badge {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
        }

        .role-badge.user {
          background: #f3f4f6;
          color: #64748b;
        }

        .role-badge.admin {
          background: #dbeafe;
          color: #1e40af;
        }

        .role-badge.superadmin {
          background: #fef3c7;
          color: #92400e;
        }
      `})]})}function P5e({designs:e,total:t,currentUserId:n}){const[r,i]=fe.useState(null),s=o=>{i(o)},a=o=>{window.open(`/studio?design=${o.id}`,"_blank")};return l.jsxs("div",{className:"designs-panel",children:[l.jsxs("h2",{children:["All Designs (",t," total)"]}),l.jsx("div",{className:"designs-grid",children:e.map(o=>l.jsxs("div",{className:"design-card",onClick:()=>s(o),title:"Click to view details",children:[l.jsx("div",{className:"design-thumbnail",children:o.thumbnail_url||o.original_png_url?l.jsx("img",{src:o.thumbnail_url||o.original_png_url,alt:o.name,loading:"lazy"}):l.jsx("div",{className:"no-image",children:"No preview"})}),l.jsxs("div",{className:"design-info",children:[l.jsx("h4",{children:o.name}),l.jsx("p",{className:"design-user",children:o.user_email}),l.jsx("p",{className:"design-date",children:new Date(o.created_at).toLocaleDateString()}),l.jsxs("div",{className:"design-meta",children:[o.width_mm&&o.length_mm&&l.jsxs("span",{className:"size-badge",children:[o.width_mm,"  ",o.length_mm," mm"]}),o.project&&l.jsx("span",{className:"project-badge",style:{backgroundColor:o.project.color||"#64748b"},children:o.project.name})]}),l.jsx("button",{className:"view-details-btn",onClick:u=>{u.stopPropagation(),i(o)},children:"View Details"})]})]},o.id))}),r&&l.jsx("div",{className:"design-modal-overlay",onClick:()=>i(null),children:l.jsxs("div",{className:"design-modal",onClick:o=>o.stopPropagation(),children:[l.jsx("button",{className:"modal-close",onClick:()=>i(null),children:""}),l.jsx("div",{className:"modal-thumbnail",children:r.thumbnail_url||r.original_png_url?l.jsx("img",{src:r.original_png_url||r.thumbnail_url,alt:r.name}):l.jsx("div",{className:"no-image",children:"No preview"})}),l.jsxs("div",{className:"modal-info",children:[l.jsx("h3",{children:r.name}),l.jsxs("p",{children:[l.jsx("strong",{children:"User:"})," ",r.user_email]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Created:"})," ",new Date(r.created_at).toLocaleString()]}),r.width_mm&&r.length_mm&&l.jsxs("p",{children:[l.jsx("strong",{children:"Dimensions:"})," ",r.width_mm,"  ",r.length_mm," mm"]}),r.project&&l.jsxs("p",{children:[l.jsx("strong",{children:"Project:"})," ",r.project.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Design ID:"})," ",l.jsx("code",{children:r.id})]}),r.job_id&&l.jsxs("p",{children:[l.jsx("strong",{children:"Job ID:"})," ",l.jsx("code",{children:r.job_id})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"btn-primary",onClick:()=>a(r),children:"Open in Studio"}),n!==r.user_id&&l.jsx("p",{className:"ownership-note",children:"Changes will create your own copy"})]})]})]})}),l.jsx("style",{jsx:!0,children:`
        .designs-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .designs-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 16px;
        }

        .design-card {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
          cursor: pointer;
          transition: transform 0.15s, box-shadow 0.15s;
        }

        .design-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .design-thumbnail {
          aspect-ratio: 1;
          background: #f3f4f6;
          overflow: hidden;
        }

        .design-thumbnail img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .no-image {
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #9ca3af;
          font-size: 14px;
        }

        .design-info {
          padding: 12px;
        }

        .design-info h4 {
          margin: 0 0 4px 0;
          font-size: 14px;
          color: #1a202c;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .design-user {
          margin: 0;
          font-size: 12px;
          color: #64748b;
        }

        .design-date {
          margin: 4px 0;
          font-size: 12px;
          color: #9ca3af;
        }

        .design-meta {
          display: flex;
          gap: 6px;
          flex-wrap: wrap;
          margin-top: 8px;
        }

        .size-badge {
          display: inline-block;
          padding: 2px 6px;
          border-radius: 4px;
          font-size: 10px;
          background: #f3f4f6;
          color: #64748b;
        }

        .project-badge {
          display: inline-block;
          padding: 2px 8px;
          border-radius: 10px;
          font-size: 10px;
          color: white;
        }

        .view-details-btn {
          margin-top: 8px;
          padding: 6px 12px;
          font-size: 12px;
          background: #f3f4f6;
          border: 1px solid #e5e7eb;
          border-radius: 4px;
          cursor: pointer;
          width: 100%;
        }

        .view-details-btn:hover {
          background: #e5e7eb;
        }

        /* Modal styles */
        .design-modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }

        .design-modal {
          background: white;
          border-radius: 12px;
          max-width: 600px;
          width: 90%;
          max-height: 90vh;
          overflow-y: auto;
          position: relative;
        }

        .modal-close {
          position: absolute;
          top: 12px;
          right: 12px;
          width: 32px;
          height: 32px;
          border-radius: 50%;
          border: none;
          background: rgba(0, 0, 0, 0.1);
          font-size: 20px;
          cursor: pointer;
          z-index: 1;
        }

        .modal-close:hover {
          background: rgba(0, 0, 0, 0.2);
        }

        .modal-thumbnail {
          width: 100%;
          aspect-ratio: 1;
          background: #f3f4f6;
          overflow: hidden;
        }

        .modal-thumbnail img {
          width: 100%;
          height: 100%;
          object-fit: contain;
        }

        .modal-info {
          padding: 20px;
        }

        .modal-info h3 {
          margin: 0 0 16px 0;
          font-size: 18px;
        }

        .modal-info p {
          margin: 8px 0;
          font-size: 14px;
          color: #374151;
        }

        .modal-info code {
          background: #f3f4f6;
          padding: 2px 6px;
          border-radius: 4px;
          font-size: 12px;
        }

        .modal-actions {
          margin-top: 20px;
          display: flex;
          gap: 12px;
        }

        .btn-primary {
          padding: 10px 20px;
          background: #ff6b35;
          color: white;
          border: none;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
        }

        .btn-primary:hover {
          background: #e55a2b;
        }

        .ownership-note {
          color: #64748b;
          font-size: 13px;
          font-style: italic;
          margin: 0;
          padding: 8px 12px;
          background: #f8fafc;
          border-radius: 6px;
        }
      `})]})}function N5e({analytics:e}){return l.jsxs("div",{className:"colours-panel",children:[l.jsx("h2",{children:"Colour Usage Analytics"}),l.jsxs("div",{className:"colour-stats",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:e.totals.designs_analysed}),l.jsx("div",{className:"stat-label",children:"Designs Analysed"})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-value",children:e.totals.colour_usages}),l.jsx("div",{className:"stat-label",children:"Total Colour Uses"})]})]}),l.jsx("h3",{children:"Top 10 TPV Colours"}),l.jsx("div",{className:"colour-list",children:e.top_colours.map((t,n)=>l.jsxs("div",{className:"colour-item",children:[l.jsxs("span",{className:"colour-rank",children:["#",n+1]}),l.jsx("div",{className:"colour-swatch",style:{backgroundColor:t.hex}}),l.jsxs("div",{className:"colour-info",children:[l.jsx("strong",{children:t.code}),l.jsx("span",{children:t.name})]}),l.jsxs("div",{className:"colour-count",children:[t.count," uses"]})]},t.code))}),l.jsx("h3",{children:"Colour Family Breakdown"}),l.jsx("div",{className:"family-bars",children:Object.entries(e.families).map(([t,n])=>l.jsxs("div",{className:"family-bar",children:[l.jsx("span",{className:"family-name",children:t}),l.jsx("div",{className:"bar-bg",children:l.jsx("div",{className:"bar-fill",style:{width:`${n/e.totals.colour_usages*100}%`,backgroundColor:O5e(t)}})}),l.jsx("span",{className:"family-count",children:n})]},t))}),l.jsx("style",{jsx:!0,children:`
        .colours-panel h2 {
          margin: 0 0 24px 0;
          color: #1a202c;
        }

        .colours-panel h3 {
          margin: 32px 0 16px 0;
          color: #1a202c;
        }

        .colour-stats {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-bottom: 24px;
        }

        .stat-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
        }

        .stat-value {
          font-size: 32px;
          font-weight: 700;
          color: #1e4a7a;
        }

        .stat-label {
          font-size: 14px;
          color: #64748b;
          margin-top: 4px;
        }

        .colour-list {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .colour-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          border-bottom: 1px solid #f3f4f6;
        }

        .colour-item:last-child {
          border-bottom: none;
        }

        .colour-rank {
          width: 30px;
          font-size: 12px;
          color: #9ca3af;
        }

        .colour-swatch {
          width: 32px;
          height: 32px;
          border-radius: 6px;
          border: 1px solid #e5e7eb;
        }

        .colour-info {
          flex: 1;
        }

        .colour-info strong {
          display: block;
          color: #1a202c;
        }

        .colour-info span {
          font-size: 12px;
          color: #64748b;
        }

        .colour-count {
          font-weight: 600;
          color: #1e4a7a;
        }

        .family-bars {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          padding: 16px;
        }

        .family-bar {
          display: flex;
          align-items: center;
          gap: 12px;
          margin-bottom: 12px;
        }

        .family-bar:last-child {
          margin-bottom: 0;
        }

        .family-name {
          width: 80px;
          font-size: 14px;
          color: #64748b;
          text-transform: capitalize;
        }

        .bar-bg {
          flex: 1;
          height: 20px;
          background: #f3f4f6;
          border-radius: 4px;
          overflow: hidden;
        }

        .bar-fill {
          height: 100%;
          border-radius: 4px;
        }

        .family-count {
          width: 50px;
          text-align: right;
          font-weight: 600;
          color: #1a202c;
        }

        .blend-list {
          background: white;
          border-radius: 8px;
          border: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .blend-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          border-bottom: 1px solid #f3f4f6;
        }

        .blend-item:last-child {
          border-bottom: none;
        }

        .blend-swatches {
          display: flex;
          gap: 4px;
        }

        .blend-swatch {
          width: 24px;
          height: 24px;
          border-radius: 4px;
          border: 1px solid #e5e7eb;
        }

        .blend-codes {
          flex: 1;
          font-size: 14px;
          color: #1a202c;
        }

        .blend-count {
          font-weight: 600;
          color: #1e4a7a;
        }
      `})]})}function O5e(e){return{reds:"#dc2626",greens:"#16a34a",blues:"#2563eb",yellows:"#ca8a04",neutrals:"#6b7280"}[e]||"#6b7280"}const tv=[{code:"RH30",name:"Beige",hex:"#E4C4AA"},{code:"RH31",name:"Cream",hex:"#E8E3D8"},{code:"RH41",name:"Bright Yellow",hex:"#FFD833"},{code:"RH40",name:"Mustard",hex:"#E5A144"},{code:"RH50",name:"Orange",hex:"#F15B32"},{code:"RH01",name:"Standard Red",hex:"#A5362F"},{code:"RH02",name:"Bright Red",hex:"#E21F2F"},{code:"RH90",name:"Funky Pink",hex:"#E8457E"},{code:"RH21",name:"Purple",hex:"#493D8C"},{code:"RH20",name:"Standard Blue",hex:"#0075BC"},{code:"RH22",name:"Light Blue",hex:"#47AFE3"},{code:"RH23",name:"Azure",hex:"#039DC4"},{code:"RH26",name:"Turquoise",hex:"#00A6A3"},{code:"RH12",name:"Dark Green",hex:"#006C55"},{code:"RH10",name:"Standard Green",hex:"#609B63"},{code:"RH11",name:"Bright Green",hex:"#3BB44A"},{code:"RH32",name:"Brown",hex:"#8B5F3C"},{code:"RH65",name:"Pale Grey",hex:"#D9D9D6"},{code:"RH61",name:"Light Grey",hex:"#939598"},{code:"RH60",name:"Dark Grey",hex:"#59595B"},{code:"RH70",name:"Black",hex:"#231F20"}],Pj=["ocean theme with dolphins and waves","jungle adventure with parrots","solar system with planets","garden with butterflies and flowers","racing track with cars","underwater coral reef scene","dinosaur footprints trail","rainbow with clouds"],R5e=[...Array(60)].map(e=>({delay:`${Math.random()*3}s`,x:`${Math.random()*100}%`,y:`${Math.random()*100}%`,size:`${8+Math.random()*12}px`}));function M5e(){const[e,t]=fe.useState(""),[n,r]=fe.useState(""),[i,s]=fe.useState(""),[a,o]=fe.useState(!1),[u,d]=fe.useState(!1),[h,p]=fe.useState(0);fe.useEffect(()=>{const v=setInterval(()=>{p(w=>(w+1)%Pj.length)},5e3);return()=>clearInterval(v)},[]);const m=async v=>{v.preventDefault(),s(""),o(!0);try{await _a.signIn(e,n)}catch(w){s(w.message||"Sign in failed")}finally{o(!1)}},g=v=>{var w;(w=document.getElementById(v))==null||w.scrollIntoView({behavior:"smooth"})};return l.jsxs("div",{className:"landing-page",children:[l.jsxs("nav",{className:"landing-nav",children:[l.jsxs("div",{className:"nav-logo",children:[l.jsxs("div",{className:"logo-main",children:[l.jsxs("span",{className:"logo-text",children:["Rosehill TPV",l.jsx("sup",{children:""})]}),l.jsx("span",{className:"logo-accent",children:"Studio"})]}),l.jsx("span",{className:"logo-byline",children:"by Rosehill Sports & Play"})]}),l.jsxs("div",{className:"nav-links",children:[l.jsx("button",{onClick:()=>g("features"),children:"Features"}),l.jsx("button",{onClick:()=>g("palette"),children:"Colours"}),l.jsx("button",{onClick:()=>d(!0),className:"nav-cta",children:"Sign In"})]})]}),l.jsxs("section",{className:"hero",children:[l.jsx("div",{className:"hero-background",children:l.jsx("div",{className:"granule-field",children:R5e.map((v,w)=>l.jsx("div",{className:"granule",style:{"--delay":v.delay,"--x":v.x,"--y":v.y,"--color":tv[w%tv.length].hex,"--size":v.size}},w))})}),l.jsxs("div",{className:"hero-content",children:[l.jsxs("div",{className:"hero-badge",children:["Rosehill TPV",l.jsx("sup",{children:""})," Surface Design Platform"]}),l.jsxs("h1",{children:[l.jsx("span",{className:"hero-line-1",children:"Design Any"}),l.jsxs("span",{className:"hero-line-2",children:["Rosehill TPV",l.jsx("sup",{children:""})," Surface"]})]}),l.jsxs("p",{className:"hero-subtitle",children:["From AI-generated playground art to professional sports courts  one powerful design platform for all your Rosehill TPV",l.jsx("sup",{children:""})," surfaces."]}),l.jsxs("div",{className:"hero-ctas",children:[l.jsxs("button",{onClick:()=>d(!0),className:"cta-primary",children:["Start Designing",l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),l.jsx("button",{onClick:()=>g("how-it-works"),className:"cta-secondary",children:"See How It Works"})]})]}),l.jsx("div",{className:"hero-visual",children:l.jsx("div",{className:"mockup-container",children:l.jsxs("div",{className:"mockup-screen",children:[l.jsx("div",{className:"mockup-header",children:l.jsxs("div",{className:"mockup-dots",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]})}),l.jsxs("div",{className:"mockup-content",children:[l.jsx("div",{className:"mockup-input",children:l.jsx("span",{className:"typing-text",children:Pj[h]},h)}),l.jsxs("div",{className:"mockup-preview",children:[l.jsx("div",{className:"preview-shape shape-1"}),l.jsx("div",{className:"preview-shape shape-2"}),l.jsx("div",{className:"preview-shape shape-3"})]})]})]})})})]}),l.jsxs("section",{className:"unified-showcase",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-tag",children:"One Powerful Tool"}),l.jsx("h2",{children:"Design Any Surface"}),l.jsx("p",{className:"section-subtitle",children:"Courts, tracks, playgrounds, and custom graphics  all in one canvas"})]}),l.jsx("div",{className:"showcase-container",children:l.jsxs("div",{className:"showcase-card",children:[l.jsxs("div",{className:"showcase-canvas",children:[l.jsxs("div",{className:"canvas-preview",children:[l.jsx("div",{className:"canvas-grid"}),l.jsxs("div",{className:"canvas-surface",children:[l.jsx("div",{className:"surface-court"}),l.jsx("div",{className:"surface-motif"})]})]}),l.jsxs("div",{className:"capability-pill pill-courts",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M2 12h4M18 12h4"})]}),l.jsx("span",{children:"Courts & Tracks"})]}),l.jsxs("div",{className:"capability-pill pill-ai",children:[l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})}),l.jsx("span",{children:"AI Artwork"})]}),l.jsxs("div",{className:"capability-pill pill-upload",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]}),l.jsx("span",{children:"Custom Images"})]}),l.jsxs("div",{className:"capability-pill pill-layers",children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),l.jsx("path",{d:"M2 17l10 5 10-5"}),l.jsx("path",{d:"M2 12l10 5 10-5"})]}),l.jsx("span",{children:"Layer & Combine"})]})]}),l.jsx("div",{className:"showcase-tagline",children:"One canvas. Unlimited possibilities."}),l.jsxs("div",{className:"showcase-features",children:[l.jsxs("div",{className:"showcase-feature",children:[l.jsx("div",{className:"feature-badge ai-badge",children:"AI-POWERED"}),l.jsx("span",{children:"Generate motifs from text descriptions"})]}),l.jsxs("div",{className:"showcase-feature",children:[l.jsx("div",{className:"feature-badge template-badge",children:"TEMPLATES"}),l.jsx("span",{children:"15+ professional court layouts"})]}),l.jsxs("div",{className:"showcase-feature",children:[l.jsx("div",{className:"feature-badge compose-badge",children:"COMPOSE"}),l.jsx("span",{children:"Mix courts, tracks & artwork freely"})]})]}),l.jsxs("button",{onClick:()=>d(!0),className:"cta-primary showcase-cta",children:["Start Designing",l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})})]}),l.jsxs("section",{id:"how-it-works",className:"how-it-works",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-tag",children:"Process"}),l.jsx("h2",{children:"Three Steps to Production-Ready Designs"})]}),l.jsxs("div",{className:"steps-container",children:[l.jsxs("div",{className:"step",children:[l.jsx("div",{className:"step-number",children:"01"}),l.jsx("div",{className:"step-icon",children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("path",{d:"M3 9h18M9 21V9"})]})}),l.jsx("h3",{children:"Set Up Your Surface"}),l.jsx("p",{children:"Define your dimensions and choose your base colour. Start with any size from small playgrounds to full athletic facilities."})]}),l.jsx("div",{className:"step-connector",children:l.jsx("svg",{viewBox:"0 0 100 20",preserveAspectRatio:"none",children:l.jsx("path",{d:"M0 10 Q50 10 100 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 4"})})}),l.jsxs("div",{className:"step",children:[l.jsx("div",{className:"step-number",children:"02"}),l.jsx("div",{className:"step-icon",children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),l.jsx("path",{d:"M2 17l10 5 10-5"}),l.jsx("path",{d:"M2 12l10 5 10-5"})]})}),l.jsx("h3",{children:"Add Elements"}),l.jsx("p",{children:"Drop in courts and tracks from the library, generate AI artwork, upload your own designs  layer and combine freely."})]}),l.jsx("div",{className:"step-connector",children:l.jsx("svg",{viewBox:"0 0 100 20",preserveAspectRatio:"none",children:l.jsx("path",{d:"M0 10 Q50 10 100 10",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 4"})})}),l.jsxs("div",{className:"step",children:[l.jsx("div",{className:"step-number",children:"03"}),l.jsx("div",{className:"step-icon",children:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),l.jsx("path",{d:"M14 2v6h6M12 18v-6M9 15l3 3 3-3"})]})}),l.jsx("h3",{children:"Export & Build"}),l.jsx("p",{children:"Generate professional PDFs with material specifications, colour recipes, and exact quantities for installation."})]})]})]}),l.jsxs("section",{id:"features",className:"features",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("span",{className:"section-tag",children:"Capabilities"}),l.jsxs("h2",{children:["Everything You Need to Design Rosehill TPV",l.jsx("sup",{children:""})," Surfaces"]})]}),l.jsxs("div",{className:"features-grid unified-features",children:[l.jsxs("div",{className:"feature-card feature-highlight",children:[l.jsx("div",{className:"feature-icon",children:l.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),l.jsx("h3",{children:"AI Text-to-Vector"}),l.jsxs("p",{children:["Describe any concept in natural language. Our AI transforms your words into production-ready vector designs optimised for Rosehill TPV",l.jsx("sup",{children:""})," surfaces."]}),l.jsx("div",{className:"feature-example",children:'"vibrant underwater scene with coral reef"'})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx("div",{className:"feature-icon",children:l.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M2 12h4M18 12h4"})]})}),l.jsx("h3",{children:"Court & Track Library"}),l.jsx("p",{children:"15+ professional templates including basketball, tennis, netball, futsal, and running tracks."})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx("div",{className:"feature-icon",children:l.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),l.jsx("h3",{children:"Image Vectorisation"}),l.jsxs("p",{children:["Upload any image and convert it to clean vectors optimised for Rosehill TPV",l.jsx("sup",{children:""})," production."]})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx("div",{className:"feature-icon",children:l.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("circle",{cx:"13.5",cy:"6.5",r:"2.5"}),l.jsx("circle",{cx:"17.5",cy:"10.5",r:"2.5"}),l.jsx("circle",{cx:"8.5",cy:"7.5",r:"2.5"}),l.jsx("circle",{cx:"6.5",cy:"12.5",r:"2.5"})]})}),l.jsx("h3",{children:"Colour Matching"}),l.jsxs("p",{children:["Automatic colour matching to the Rosehill TPV",l.jsx("sup",{children:""})," palette with precise specifications."]})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx("div",{className:"feature-icon",children:l.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),l.jsx("path",{d:"M2 17l10 5 10-5"}),l.jsx("path",{d:"M2 12l10 5 10-5"})]})}),l.jsx("h3",{children:"Layer Management"}),l.jsx("p",{children:"Combine courts, tracks, and motifs freely. Drag, rotate, and layer with precision controls."})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx("div",{className:"feature-icon",children:l.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),l.jsx("path",{d:"M14 2v6h6M12 18v-6M9 15l3 3 3-3"})]})}),l.jsx("h3",{children:"PDF Specifications"}),l.jsx("p",{children:"Export production-ready material specs with colour specifications and installation guides."})]})]})]}),l.jsxs("section",{id:"palette",className:"palette-section",children:[l.jsxs("div",{className:"section-header light",children:[l.jsx("span",{className:"section-tag",children:"Palette"}),l.jsxs("h2",{children:["21 Standard Rosehill TPV",l.jsx("sup",{children:""})," Colours"]}),l.jsxs("p",{className:"section-subtitle",children:["The complete Rosehill TPV",l.jsx("sup",{children:""})," granule palette at your fingertips"]})]}),l.jsx("div",{className:"palette-grid",children:tv.map((v,w)=>l.jsxs("div",{className:"palette-swatch",style:{"--swatch-color":v.hex,"--delay":`${w*.03}s`},children:[l.jsx("div",{className:"swatch-color"}),l.jsxs("div",{className:"swatch-info",children:[l.jsx("span",{className:"swatch-name",children:v.name}),l.jsx("span",{className:"swatch-code",children:v.code})]})]},v.code))})]}),l.jsx("section",{className:"benefits",children:l.jsxs("div",{className:"benefits-grid benefits-grid-4",children:[l.jsxs("div",{className:"benefit",children:[l.jsx("div",{className:"benefit-metric",children:"10x"}),l.jsx("div",{className:"benefit-label",children:"Faster Design"}),l.jsx("p",{children:"What took hours now takes minutes with AI and templates."})]}),l.jsxs("div",{className:"benefit",children:[l.jsx("div",{className:"benefit-metric",children:"100%"}),l.jsx("div",{className:"benefit-label",children:"Production Accurate"}),l.jsxs("p",{children:["Exact Rosehill TPV",l.jsx("sup",{children:""})," granule specs with precise specifications."]})]}),l.jsxs("div",{className:"benefit",children:[l.jsx("div",{className:"benefit-metric infinite-symbol",children:""}),l.jsx("div",{className:"benefit-label",children:"Combinations"}),l.jsx("p",{children:"Mix courts, tracks, and artwork in unlimited configurations."})]}),l.jsxs("div",{className:"benefit",children:[l.jsx("div",{className:"benefit-metric",children:"21"}),l.jsx("div",{className:"benefit-label",children:"Standard Colours"}),l.jsxs("p",{children:["Complete Rosehill TPV",l.jsx("sup",{children:""})," standard colour palette."]})]})]})}),l.jsx("footer",{className:"landing-footer",children:l.jsxs("div",{className:"footer-content",children:[l.jsxs("div",{className:"footer-brand",children:[l.jsxs("span",{className:"footer-logo",children:["Rosehill TPV",l.jsx("sup",{children:""})," Studio"]}),l.jsx("span",{className:"footer-tagline",children:"A web app by Rosehill Sports & Play"}),l.jsx("span",{className:"footer-division",children:"A Division of Rosehill Group"})]}),l.jsxs("div",{className:"footer-links",children:[l.jsx("a",{href:"https://rosehilltpv.com",target:"_blank",rel:"noopener noreferrer",children:"rosehilltpv.com"}),l.jsx("a",{href:"mailto:info@rosehill.group",children:"info@rosehill.group"})]})]})}),l.jsx("section",{className:"cta-footer",children:l.jsxs("div",{className:"cta-content",children:[l.jsx("h2",{children:"Ready to Design Your Surface?"}),l.jsxs("p",{children:["Create playgrounds or sports facilities with production-ready Rosehill TPV",l.jsx("sup",{children:""})," specifications."]}),l.jsxs("button",{onClick:()=>d(!0),className:"cta-primary large",children:["Sign In to Rosehill TPV",l.jsx("sup",{children:""})," Studio",l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}),l.jsxs("p",{className:"cta-note",children:["Need an account? Contact ",l.jsx("a",{href:"mailto:info@rosehill.group",children:"info@rosehill.group"})]})]})}),u&&l.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:l.jsxs("div",{className:"sign-in-modal",onClick:v=>v.stopPropagation(),children:[l.jsx("button",{className:"modal-close",onClick:()=>d(!1),children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Sign In"}),l.jsxs("p",{children:["Access your Rosehill TPV",l.jsx("sup",{children:""})," Studio account"]})]}),i&&l.jsx("div",{className:"form-error",children:i}),l.jsxs("form",{onSubmit:m,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",value:e,onChange:v=>t(v.target.value),placeholder:"your.email@company.com",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:n,onChange:v=>r(v.target.value),required:!0})]}),l.jsx("button",{type:"submit",disabled:a,className:"submit-btn",children:a?"Signing in...":"Sign In"})]}),l.jsx("p",{className:"modal-footer-text",children:"Don't have an account? Contact your administrator."})]})}),l.jsx("style",{jsx:!0,children:`
        /* ============================================
           TPV STUDIO LANDING PAGE
           Aesthetic: Sophisticated Industrial-Creative
           ============================================ */

        @import url('https://fonts.googleapis.com/css2?family=Overpass:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap');

        .landing-page {
          --primary: #1a365d;
          --primary-light: #2a4a73;
          --accent: #ff6b35;
          --accent-hover: #e55a2a;
          --text: #1a202c;
          --text-secondary: #64748b;
          --text-light: #94a3b8;
          --bg: #fafbfc;
          --bg-dark: #0f172a;
          --card: #ffffff;
          --border: #e2e8f0;

          font-family: 'Source Sans Pro', sans-serif;
          background: var(--bg);
          color: var(--text);
          overflow-x: hidden;
        }

        /* Navigation */
        .landing-nav {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 3rem;
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(12px);
          border-bottom: 1px solid var(--border);
        }

        .nav-logo {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 700;
        }

        .logo-text {
          color: var(--primary);
        }

        .logo-accent {
          color: var(--accent);
        }

        .nav-links {
          display: flex;
          align-items: center;
          gap: 2rem;
        }

        .nav-links button {
          background: none;
          border: none;
          font-family: inherit;
          font-size: 0.875rem;
          font-weight: 500;
          color: var(--text-secondary);
          cursor: pointer;
          transition: color 0.2s;
        }

        .nav-links button:hover {
          color: var(--text);
        }

        .nav-cta {
          background: var(--primary) !important;
          color: white !important;
          padding: 0.5rem 1.25rem !important;
          border-radius: 6px !important;
        }

        .nav-cta:hover {
          background: var(--primary-light) !important;
        }

        .logo-main {
          display: flex;
          align-items: baseline;
          gap: 0.25rem;
        }

        .logo-byline {
          display: block;
          font-size: 0.625rem;
          font-weight: 400;
          color: var(--text-light);
          margin-top: 2px;
          letter-spacing: 0.02em;
        }

        .landing-page sup {
          font-size: 0.6em;
          vertical-align: super;
          line-height: 0;
        }

        /* Hero Section */
        .hero {
          min-height: 100vh;
          display: grid;
          grid-template-columns: 1fr 1fr;
          align-items: center;
          padding: 8rem 4rem 4rem;
          position: relative;
          overflow: hidden;
        }

        .hero-background {
          position: absolute;
          inset: 0;
          pointer-events: none;
        }

        .granule-field {
          position: absolute;
          inset: 0;
        }

        .granule {
          position: absolute;
          left: var(--x);
          top: var(--y);
          width: var(--size);
          height: var(--size);
          background: var(--color);
          border-radius: 50%;
          opacity: 0.15;
          animation: float 8s ease-in-out infinite;
          animation-delay: var(--delay);
        }

        @keyframes float {
          0%, 100% { transform: translateY(0) scale(1); }
          50% { transform: translateY(-20px) scale(1.1); }
        }

        .hero-content {
          position: relative;
          z-index: 10;
        }

        .hero-badge {
          display: inline-block;
          padding: 0.5rem 1rem;
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
          font-size: 0.75rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.1em;
          border-radius: 50px;
          margin-bottom: 1.5rem;
        }

        .hero h1 {
          font-family: 'Overpass', sans-serif;
          font-size: 3.5rem;
          font-weight: 700;
          line-height: 1.1;
          margin: 0 0 1.5rem;
        }

        .hero-line-1 {
          display: block;
          color: var(--text-secondary);
        }

        .hero-line-2 {
          display: block;
          color: var(--primary);
        }

        .hero-subtitle {
          font-size: 1.125rem;
          color: var(--text-secondary);
          line-height: 1.7;
          max-width: 480px;
          margin-bottom: 2rem;
        }

        .hero-ctas {
          display: flex;
          gap: 1rem;
        }

        .cta-primary {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.875rem 1.5rem;
          background: var(--accent);
          color: white;
          border: none;
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .cta-primary:hover {
          background: var(--accent-hover);
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
        }

        .cta-primary.large {
          padding: 1rem 2rem;
          font-size: 1rem;
        }

        .cta-secondary {
          padding: 0.875rem 1.5rem;
          background: white;
          color: var(--text);
          border: 2px solid var(--border);
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .cta-secondary:hover {
          border-color: var(--primary);
          color: var(--primary);
        }

        /* Hero Visual / Mockup */
        .hero-visual {
          position: relative;
          z-index: 10;
          display: flex;
          justify-content: center;
        }

        .mockup-container {
          perspective: 1000px;
        }

        .mockup-screen {
          width: 400px;
          background: white;
          border-radius: 12px;
          box-shadow: 0 24px 80px rgba(0, 0, 0, 0.15);
          overflow: hidden;
          transform: rotateY(-5deg) rotateX(2deg);
          animation: mockupFloat 6s ease-in-out infinite;
        }

        @keyframes mockupFloat {
          0%, 100% { transform: rotateY(-5deg) rotateX(2deg) translateY(0); }
          50% { transform: rotateY(-5deg) rotateX(2deg) translateY(-10px); }
        }

        .mockup-header {
          padding: 0.75rem 1rem;
          background: #f8f8f8;
          border-bottom: 1px solid #eee;
        }

        .mockup-dots {
          display: flex;
          gap: 6px;
        }

        .mockup-dots span {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          background: #ddd;
        }

        .mockup-dots span:nth-child(1) { background: #ff5f56; }
        .mockup-dots span:nth-child(2) { background: #ffbd2e; }
        .mockup-dots span:nth-child(3) { background: #27ca41; }

        .mockup-content {
          padding: 1.5rem;
        }

        .mockup-input {
          background: #f5f5f5;
          padding: 1rem;
          border-radius: 8px;
          font-size: 0.875rem;
          color: var(--text-secondary);
          margin-bottom: 1.5rem;
          display: flex;
          align-items: center;
        }

        .typing-text {
          display: inline-block;
          overflow: hidden;
          white-space: nowrap;
          border-right: 2px solid var(--primary);
          animation: typing 5s steps(40, end) forwards, blink 0.7s step-end infinite;
        }

        @keyframes typing {
          0% { max-width: 0; }
          35% { max-width: 500px; }
          65% { max-width: 500px; }
          100% { max-width: 0; }
        }

        @keyframes blink {
          50% { border-color: transparent; }
        }

        .mockup-preview {
          height: 180px;
          background: linear-gradient(135deg, #e8f4f8, #f0f4ff);
          border-radius: 8px;
          position: relative;
          overflow: hidden;
        }

        .preview-shape {
          position: absolute;
          border-radius: 50%;
          animation: shapeReveal 4s ease-out infinite;
        }

        .shape-1 {
          width: 80px;
          height: 80px;
          background: var(--accent);
          opacity: 0.8;
          top: 20%;
          left: 15%;
          animation-delay: 0s;
        }

        .shape-2 {
          width: 60px;
          height: 60px;
          background: #30D5C8;
          opacity: 0.8;
          top: 40%;
          left: 50%;
          animation-delay: 0.3s;
        }

        .shape-3 {
          width: 100px;
          height: 100px;
          background: var(--primary);
          opacity: 0.8;
          top: 50%;
          right: 10%;
          animation-delay: 0.6s;
        }

        @keyframes shapeReveal {
          0%, 100% { transform: scale(0.8); opacity: 0.4; }
          50% { transform: scale(1); opacity: 0.8; }
        }

        /* Section Headers */
        .section-header {
          text-align: center;
          margin-bottom: 4rem;
        }

        .section-header.light h2,
        .section-header.light .section-subtitle {
          color: white;
        }

        .section-header.light .section-tag {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.9);
        }

        .section-tag {
          display: inline-block;
          padding: 0.375rem 0.875rem;
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
          font-size: 0.6875rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.15em;
          border-radius: 50px;
          margin-bottom: 1rem;
        }

        .section-header h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text);
          margin: 0;
        }

        .section-subtitle {
          margin-top: 1rem;
          font-size: 1.125rem;
          color: var(--text-secondary);
        }

        /* How It Works */
        .how-it-works {
          padding: 6rem 4rem;
          background: white;
        }

        .steps-container {
          display: flex;
          align-items: flex-start;
          justify-content: center;
          gap: 1rem;
        }

        .step {
          flex: 1;
          max-width: 280px;
          text-align: center;
          padding: 2rem 1.5rem;
        }

        .step-number {
          font-family: 'Overpass', sans-serif;
          font-size: 3rem;
          font-weight: 700;
          color: rgba(30, 74, 122, 0.1);
          margin-bottom: 1rem;
        }

        .step-icon {
          width: 64px;
          height: 64px;
          margin: 0 auto 1.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(255, 107, 53, 0.1);
          border-radius: 16px;
          color: var(--accent);
        }

        .step h3 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.25rem;
          font-weight: 600;
          margin: 0 0 0.75rem;
          color: var(--text);
        }

        .step p {
          font-size: 0.9375rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        .step-connector {
          width: 100px;
          padding-top: 5rem;
          color: var(--border);
        }

        /* Features */
        .features {
          padding: 6rem 4rem;
          background: var(--bg);
        }

        .features-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 1.5rem;
          max-width: 1200px;
          margin: 0 auto;
        }

        .feature-card {
          background: white;
          padding: 2rem;
          border-radius: 12px;
          border: 1px solid var(--border);
          transition: all 0.3s;
        }

        .feature-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
        }

        .feature-highlight {
          grid-column: span 2;
          background: linear-gradient(135deg, var(--primary), var(--primary-light));
          color: white;
          border: none;
        }

        .feature-highlight .feature-icon {
          background: rgba(255, 255, 255, 0.2);
          color: white;
        }

        .feature-highlight h3 {
          color: white;
        }

        .feature-highlight p {
          color: rgba(255, 255, 255, 0.9);
        }

        .feature-icon {
          width: 56px;
          height: 56px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(30, 74, 122, 0.1);
          border-radius: 12px;
          color: var(--primary);
          margin-bottom: 1.25rem;
        }

        .feature-card h3 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.125rem;
          font-weight: 600;
          margin: 0 0 0.5rem;
        }

        .feature-card p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        .feature-example {
          margin-top: 1.5rem;
          padding: 0.875rem 1rem;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          font-size: 0.8125rem;
          font-style: italic;
          opacity: 0.9;
        }

        /* Unified Showcase Section */
        .unified-showcase {
          padding: 6rem 4rem;
          background: white;
        }

        .showcase-container {
          max-width: 900px;
          margin: 0 auto;
        }

        .showcase-card {
          background: linear-gradient(135deg, #f8fafc, #f1f5f9);
          border-radius: 24px;
          padding: 3rem;
          border: 1px solid var(--border);
          text-align: center;
        }

        .showcase-canvas {
          position: relative;
          height: 280px;
          margin-bottom: 2rem;
        }

        .canvas-preview {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 240px;
          height: 160px;
          background: white;
          border-radius: 12px;
          border: 2px solid var(--border);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
          overflow: hidden;
        }

        .canvas-grid {
          position: absolute;
          inset: 0;
          background-image:
            linear-gradient(rgba(30, 74, 122, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(30, 74, 122, 0.05) 1px, transparent 1px);
          background-size: 20px 20px;
        }

        .canvas-surface {
          position: absolute;
          inset: 10px;
          background: #e8f4f8;
          border-radius: 4px;
        }

        .surface-court {
          position: absolute;
          top: 20%;
          left: 15%;
          width: 70%;
          height: 60%;
          border: 2px solid #00a6a3;
          border-radius: 4px;
          opacity: 0.8;
        }

        .surface-court::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 2px;
          background: #00a6a3;
        }

        .surface-court::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          border: 2px solid #00a6a3;
          border-radius: 50%;
        }

        .surface-motif {
          position: absolute;
          bottom: 10%;
          right: 10%;
          width: 35px;
          height: 35px;
          background: var(--accent);
          border-radius: 50%;
          opacity: 0.8;
          animation: motifPulse 3s ease-in-out infinite;
        }

        @keyframes motifPulse {
          0%, 100% { transform: scale(1); opacity: 0.8; }
          50% { transform: scale(1.1); opacity: 1; }
        }

        .capability-pill {
          position: absolute;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.625rem 1rem;
          background: white;
          border-radius: 50px;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
          font-size: 0.8125rem;
          font-weight: 500;
          color: var(--text);
          animation: pillFloat 4s ease-in-out infinite;
        }

        .pill-courts {
          top: 10%;
          left: 5%;
          animation-delay: 0s;
        }

        .pill-courts svg {
          color: #00a6a3;
        }

        .pill-ai {
          top: 5%;
          right: 10%;
          animation-delay: 0.5s;
        }

        .pill-ai svg {
          color: var(--accent);
        }

        .pill-upload {
          bottom: 15%;
          left: 8%;
          animation-delay: 1s;
        }

        .pill-upload svg {
          color: var(--primary);
        }

        .pill-layers {
          bottom: 10%;
          right: 5%;
          animation-delay: 1.5s;
        }

        .pill-layers svg {
          color: #30D5C8;
        }

        @keyframes pillFloat {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }

        .showcase-tagline {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          color: var(--text);
          margin-bottom: 2rem;
        }

        .showcase-features {
          display: flex;
          justify-content: center;
          gap: 2rem;
          flex-wrap: wrap;
          margin-bottom: 2rem;
        }

        .showcase-feature {
          display: flex;
          align-items: center;
          gap: 0.625rem;
          font-size: 0.875rem;
          color: var(--text-secondary);
        }

        .feature-badge {
          padding: 0.25rem 0.625rem;
          border-radius: 50px;
          font-size: 0.625rem;
          font-weight: 700;
          letter-spacing: 0.05em;
        }

        .ai-badge {
          background: rgba(255, 107, 53, 0.1);
          color: var(--accent);
        }

        .template-badge {
          background: rgba(0, 166, 163, 0.1);
          color: #00a6a3;
        }

        .compose-badge {
          background: rgba(30, 74, 122, 0.1);
          color: var(--primary);
        }

        .showcase-cta {
          margin: 0 auto;
        }

        /* Unified Features Grid */
        .unified-features {
          grid-template-columns: repeat(3, 1fr);
        }

        /* Infinite symbol styling */
        .infinite-symbol {
          font-size: 3.5rem;
          line-height: 1;
        }

        /* Benefits Grid 4 columns */
        .benefits-grid-4 {
          grid-template-columns: repeat(4, 1fr);
        }

        /* Palette Section */
        .palette-section {
          padding: 6rem 4rem;
          background: var(--bg-dark);
        }

        .palette-grid {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 1rem;
          max-width: 1000px;
          margin: 0 auto;
        }

        .palette-swatch {
          animation: swatchReveal 0.5s ease-out forwards;
          animation-delay: var(--delay);
          opacity: 0;
          transform: translateY(20px);
        }

        @keyframes swatchReveal {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .swatch-color {
          aspect-ratio: 1;
          background: var(--swatch-color);
          border-radius: 8px;
          margin-bottom: 0.5rem;
          transition: transform 0.2s;
        }

        .palette-swatch:hover .swatch-color {
          transform: scale(1.1);
        }

        .swatch-info {
          text-align: center;
        }

        .swatch-name {
          display: block;
          font-size: 0.6875rem;
          font-weight: 500;
          color: white;
        }

        .swatch-code {
          display: block;
          font-size: 0.625rem;
          color: rgba(255, 255, 255, 0.5);
        }

        /* Benefits */
        .benefits {
          padding: 6rem 4rem;
          background: white;
        }

        .benefits-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 3rem;
          max-width: 1000px;
          margin: 0 auto;
          text-align: center;
        }

        .benefit-metric {
          font-family: 'Overpass', sans-serif;
          font-size: 4rem;
          font-weight: 700;
          color: var(--accent);
          line-height: 1;
        }

        .benefit-label {
          font-family: 'Overpass', sans-serif;
          font-size: 1.125rem;
          font-weight: 600;
          color: var(--text);
          margin: 0.5rem 0 1rem;
        }

        .benefit p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0;
        }

        /* Company Footer */
        .landing-footer {
          padding: 3rem 4rem;
          background: var(--bg-dark);
          border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-content {
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: 2rem;
        }

        .footer-brand {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        .footer-logo {
          font-family: 'Overpass', sans-serif;
          font-size: 1.25rem;
          font-weight: 600;
          color: white;
        }

        .footer-tagline {
          font-size: 0.875rem;
          color: rgba(255, 255, 255, 0.8);
        }

        .footer-division {
          font-size: 0.75rem;
          color: rgba(255, 255, 255, 0.5);
        }

        .footer-links {
          display: flex;
          gap: 2rem;
        }

        .footer-links a {
          font-size: 0.875rem;
          color: rgba(255, 255, 255, 0.7);
          text-decoration: none;
          transition: color 0.2s;
        }

        .footer-links a:hover {
          color: var(--accent);
        }

        /* CTA Footer */
        .cta-footer {
          padding: 6rem 4rem;
          background: var(--bg);
          text-align: center;
        }

        .cta-content h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text);
          margin: 0 0 1rem;
        }

        .cta-content > p {
          font-size: 1.125rem;
          color: var(--text-secondary);
          margin-bottom: 2rem;
        }

        .cta-note {
          margin-top: 1.5rem;
          font-size: 0.875rem;
          color: var(--text-light);
        }

        .cta-note a {
          color: var(--primary);
          text-decoration: none;
        }

        .cta-note a:hover {
          text-decoration: underline;
        }

        /* Modal */
        .modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.5);
          backdrop-filter: blur(4px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 2000;
          padding: 2rem;
        }

        .sign-in-modal {
          background: white;
          border-radius: 16px;
          padding: 2.5rem;
          width: 100%;
          max-width: 400px;
          position: relative;
          animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
        }

        .modal-close {
          position: absolute;
          top: 1rem;
          right: 1rem;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: none;
          border: none;
          color: var(--text-light);
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.2s;
        }

        .modal-close:hover {
          background: var(--bg);
          color: var(--text);
        }

        .modal-header {
          text-align: center;
          margin-bottom: 1.5rem;
        }

        .modal-header h2 {
          font-family: 'Overpass', sans-serif;
          font-size: 1.5rem;
          font-weight: 600;
          margin: 0 0 0.25rem;
        }

        .modal-header p {
          font-size: 0.875rem;
          color: var(--text-secondary);
          margin: 0;
        }

        .form-error {
          padding: 0.75rem 1rem;
          background: #fef2f2;
          color: #dc2626;
          border-radius: 8px;
          font-size: 0.875rem;
          margin-bottom: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          font-size: 0.875rem;
          font-weight: 500;
          margin-bottom: 0.5rem;
        }

        .form-group input {
          width: 100%;
          padding: 0.75rem 1rem;
          border: 1px solid var(--border);
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          transition: all 0.2s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(30, 74, 122, 0.1);
        }

        .submit-btn {
          width: 100%;
          padding: 0.875rem;
          background: var(--accent);
          color: white;
          border: none;
          border-radius: 8px;
          font-family: inherit;
          font-size: 0.9375rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .submit-btn:hover:not(:disabled) {
          background: var(--accent-hover);
        }

        .submit-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .modal-footer-text {
          text-align: center;
          font-size: 0.8125rem;
          color: var(--text-light);
          margin: 1.5rem 0 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
          .hero {
            grid-template-columns: 1fr;
            text-align: center;
          }

          .hero-content {
            max-width: 600px;
            margin: 0 auto;
          }

          .hero-subtitle {
            margin-left: auto;
            margin-right: auto;
          }

          .hero-ctas {
            justify-content: center;
          }

          .hero-visual {
            display: none;
          }

          .showcase-canvas {
            height: 240px;
          }

          .capability-pill {
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
          }

          .features-grid {
            grid-template-columns: repeat(2, 1fr);
          }

          .unified-features {
            grid-template-columns: repeat(2, 1fr);
          }

          .feature-highlight {
            grid-column: span 2;
          }

          .benefits-grid-4 {
            grid-template-columns: repeat(2, 1fr);
          }

          .palette-grid {
            grid-template-columns: repeat(5, 1fr);
          }
        }

        @media (max-width: 768px) {
          .landing-nav {
            padding: 1rem 1.5rem;
          }

          .nav-links {
            gap: 1rem;
          }

          .hero {
            padding: 6rem 1.5rem 3rem;
          }

          .hero h1 {
            font-size: 2.5rem;
          }

          .steps-container {
            flex-direction: column;
            gap: 0;
          }

          .step-connector {
            display: none;
          }

          .features-grid,
          .unified-features {
            grid-template-columns: 1fr;
          }

          .feature-highlight {
            grid-column: span 1;
          }

          .section-header h2 {
            font-size: 2rem;
          }

          .how-it-works,
          .features,
          .palette-section,
          .benefits,
          .cta-footer,
          .unified-showcase,
          .landing-footer {
            padding: 4rem 1.5rem;
          }

          .footer-content {
            flex-direction: column;
            text-align: center;
          }

          .footer-links {
            flex-direction: column;
            gap: 1rem;
          }

          .logo-byline {
            display: none;
          }

          .showcase-card {
            padding: 2rem 1.5rem;
          }

          .showcase-canvas {
            height: 200px;
          }

          .canvas-preview {
            width: 180px;
            height: 120px;
          }

          .capability-pill {
            display: none;
          }

          .showcase-features {
            flex-direction: column;
            gap: 1rem;
          }

          .showcase-tagline {
            font-size: 1.25rem;
          }

          .benefits-grid,
          .benefits-grid-4 {
            grid-template-columns: 1fr;
            gap: 2rem;
          }

          .palette-grid {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        @media (max-width: 480px) {
          .nav-links button:not(.nav-cta) {
            display: none;
          }

          .hero h1 {
            font-size: 2rem;
          }

          .cta-content h2 {
            font-size: 1.75rem;
          }

          .palette-grid {
            grid-template-columns: repeat(3, 1fr);
          }
        }
      `})]})}function L5e({user:e,onPasswordSet:t}){const[n,r]=fe.useState(""),[i,s]=fe.useState(""),[a,o]=fe.useState(!1),[u,d]=fe.useState(""),h=async p=>{if(p.preventDefault(),d(""),n.length<8){d("Password must be at least 8 characters long");return}if(!/[A-Z]/.test(n)){d("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(n)){d("Password must contain at least one lowercase letter");return}if(!/[0-9]/.test(n)){d("Password must contain at least one number");return}if(n!==i){d("Passwords do not match");return}o(!0);try{await _a.updatePassword(n),t()}catch(m){d(m.message||"Failed to set password. Please try again.")}finally{o(!1)}};return l.jsx("div",{className:"tpv-studio",children:l.jsx("div",{className:"tpv-studio__container",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:l.jsxs("div",{style:{maxWidth:"400px",width:"100%",padding:"2rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[l.jsx("h2",{style:{marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Welcome to TPV Studio"}),l.jsxs("p",{style:{marginBottom:"1.5rem",color:"#666",fontSize:"0.9rem"},children:["Please set a password for your account: ",l.jsx("strong",{children:e.email})]}),l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"New Password"}),l.jsx("input",{type:"password",value:n,onChange:p=>r(p.target.value),placeholder:"Enter your password",required:!0,minLength:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"}}),l.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#666"},children:"At least 8 characters with uppercase, lowercase, and a number"})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Confirm Password"}),l.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Confirm your password",required:!0,minLength:8,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"}})]}),u&&l.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",background:"#fee",border:"1px solid #fcc",borderRadius:"4px",color:"#c00",fontSize:"0.9rem"},children:u}),l.jsx("button",{type:"submit",disabled:a,style:{width:"100%",padding:"0.75rem",background:a?"#ccc":"#007bff",color:"#fff",border:"none",borderRadius:"4px",fontSize:"1rem",fontWeight:"500",cursor:a?"not-allowed":"pointer"},children:a?"Setting Password...":"Set Password"})]})]})})})}function I5e(){const[e,t]=fe.useState(null),[n,r]=fe.useState(!0),[i,s]=fe.useState(!1),[a,o]=fe.useState(!1),[u,d]=fe.useState(!1),[h,p]=fe.useState(!1),[m,g]=fe.useState(null),[v,w]=fe.useState(null),S=async()=>{try{const O=await _a.getSession();if(!(O!=null&&O.access_token)){d(!1);return}const I=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${O.access_token}`}});d(I.ok)}catch{console.error("[APP] Admin check failed"),d(!1)}},x=async O=>{try{console.log("[APP] Loading design from URL:",O);const I=await Ef(O),{design:E,is_borrowed:U,owner_email:D}=I;if(E){U?(console.log("[APP] Loading borrowed design from:",D),tn.getState().setBorrowed(O,D)):tn.getState().clearBorrowed(),k(E);const R=new URL(window.location);R.searchParams.delete("design"),window.history.replaceState({},"",R)}}catch(I){console.error("[APP] Failed to load design from URL:",I)}};fe.useEffect(()=>{_a.getSession().then(I=>{var U;const E=(I==null?void 0:I.user)||null;if(t(E),r(!1),E){const D=(U=E.user_metadata)==null?void 0:U.password_setup_complete;p(!D),S();const W=new URLSearchParams(window.location.search).get("design");W&&x(W)}});const{data:O}=_a.onAuthStateChange((I,E)=>{var D;const U=(E==null?void 0:E.user)||null;if(t(U),U){const R=(D=U.user_metadata)==null?void 0:D.password_setup_complete;p(!R),S()}else d(!1),p(!1)});return()=>O==null?void 0:O.unsubscribe()},[]);const k=O=>{g(O),w(O.name)},j=async()=>{p(!1);const O=await _a.getSession();t((O==null?void 0:O.user)||null)};return n?l.jsx("div",{className:"tpv-studio",children:l.jsx("div",{className:"tpv-studio__container",children:l.jsxs("div",{className:"tpv-studio__empty",children:[l.jsx("div",{className:"tpv-studio__spinner"}),l.jsx("p",{children:"Loading..."})]})})}):e?h?l.jsx(L5e,{user:e,onPasswordSet:j}):a?l.jsx("div",{className:"tpv-studio",children:l.jsx(T5e,{onClose:()=>o(!1)})}):l.jsx(dF,{children:l.jsxs("div",{className:"tpv-studio",children:[l.jsx(_5e,{onShowDesigns:()=>s(!0),onShowAdmin:()=>o(!0),isAdmin:u,currentDesignName:v}),l.jsx("main",{className:"tpv-studio__container tpv-studio__container--full",children:l.jsx(w5e,{loadedDesign:m})}),i&&l.jsx(S5e,{onClose:()=>s(!1),onLoadDesign:k})]})}):l.jsx(M5e,{})}nv.createRoot(document.getElementById("root")).render(l.jsx(je.StrictMode,{children:l.jsx(I5e,{})}))});export default $5e();
//# sourceMappingURL=index-Bvmpn5u5.js.map
